(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+Ewk":function(e,t,i){"use strict";var n=i("P7XM"),s=i("96lO"),r=i("+fXv"),o=i("v0om");function a(e){if(!a.enabled())throw new Error("Transport created when disabled");s.call(this,e,"/jsonp",o,r)}n(a,s),a.enabled=function(){return!!global.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},"+R4f":function(e,t,i){"use strict";var n=i("P7XM"),s=i("raCH").EventEmitter,r=i("yjSe");function o(e){s.call(this);var t=this,i=this.es=new r(e);i.onmessage=function(e){t.emit("message",decodeURI(e.data))},i.onerror=function(e){var n=2!==i.readyState?"network":"permanent";t._cleanup(),t._close(n)}}n(o,s),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},o.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=o},"+fXv":function(e,t,i){"use strict";var n=i("8fj+"),s=i("JYLm"),r=i("JqAl"),o=i("Yh+D"),a=i("P7XM"),l=i("raCH").EventEmitter;function c(e){var t=this;l.call(this),n.polluteGlobalNamespace(),this.id="a"+s.string(6);var i=o.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));global[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),c.timeout)}a(c,l),c.prototype.abort=function(){if(global[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},c.timeout=35e3,c.scriptErrorTimeout=1e3,c.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},c.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},c.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete global[n.WPrefix][this.id]},c.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),c.scriptErrorTimeout))},c.prototype._createScript=function(e){var t,i=this,n=this.script=global.document.createElement("script");if(n.id="a"+s.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){i._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){i.loadedOkay=!0;try{n.onclick()}catch(e){}}n&&i._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===n.async&&global.document.attachEvent)if(r.isOpera())(t=this.script2=global.document.createElement("script")).text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=t.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch(a){}n.async=!0}void 0!==n.async&&(n.async=!0);var o=global.document.getElementsByTagName("head")[0];o.insertBefore(n,o.firstChild),t&&o.insertBefore(t,o.firstChild)},e.exports=c},0:function(e,t,i){e.exports=i("zUnb")},"1eVo":function(e,t,i){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,i,n=1,s=arguments.length;n<s;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}}},"2Naf":function(t,i,n){"use strict";var s=n("raCH").EventEmitter,r=n("P7XM"),o=n("woL0"),a=n("Yh+D"),l=global.XMLHttpRequest;function c(e,t,i,n){var r=this;s.call(this),setTimeout((function(){r._start(e,t,i,n)}),0)}r(c,s),c.prototype._start=function(t,i,n,s){var r=this;try{this.xhr=new l}catch(d){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();i=a.addQuery(i,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){r._cleanup(!0)}));try{this.xhr.open(t,i,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){r.emit("finish",0,""),r._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(s&&s.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),s&&s.headers)for(var h in s.headers)this.xhr.setRequestHeader(h,s.headers[h]);this.xhr.onreadystatechange=function(){if(r.xhr){var t,i,n=r.xhr;switch(n.readyState){case 3:try{i=n.status,t=n.responseText}catch(e){}1223===i&&(i=204),200===i&&t&&t.length>0&&r.emit("chunk",i,t);break;case 4:1223===(i=n.status)&&(i=204),12005!==i&&12029!==i||(i=0),r.emit("finish",i,n.responseText),r._cleanup(!1)}}};try{r.xhr.send(n)}catch(e){r.emit("finish",0,""),r._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!l;var h=["Active"].concat("Object").join("X");!c.enabled&&h in global&&(c.enabled=!!new(l=function(){try{return new global[h]("Microsoft.XMLHTTP")}catch(e){return null}}));var d=!1;try{d="withCredentials"in new l}catch(u){}c.supportsCORS=d,t.exports=c},"3wkl":function(e,t,i){"use strict";var n=i("P7XM"),s=i("2Naf");function r(e,t,i,n){s.call(this,e,t,i,n)}n(r,s),r.enabled=s.enabled&&s.supportsCORS,e.exports=r},"42Jg":function(e,t,i){"use strict";var n=i("P7XM"),s=i("moM4");function r(){s.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}n(r,s),e.exports=r},"4rNY":function(e,t,i){"use strict";var n=i("P7XM"),s=i("dXd4"),r=i("FUii"),o=i("3wkl"),a=i("c6pU");function l(e){if(!a.enabled&&!o.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/xhr",r,o)}n(l,s),l.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||o.enabled)},l.transportName="xhr-polling",l.roundTrips=2,e.exports=l},"5Vaj":function(e,t,i){"use strict";var n=i("P7XM"),s=i("dXd4"),r=i("sYUk"),o=i("FUii"),a=i("nX0T");function l(e){if(!a.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/xhr",o,a)}n(l,s),l.enabled=r.enabled,l.transportName="xdr-polling",l.roundTrips=2,e.exports=l},"6Zju":function(e,t,i){"use strict";var n=i("P7XM"),s=i("raCH").EventEmitter;function r(e,t){s.call(this),this.sendBuffer=[],this.sender=t,this.url=e}n(r,s),r.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},r.prototype.sendSchedule=function(){var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=r},"8fj+":function(e,t,i){"use strict";var n=i("woL0"),s=i("kwwM"),r=i("JqAl");e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in global||(global[e.exports.WPrefix]={})},postMessage:function(t,i){global.parent!==global&&global.parent.postMessage(s.stringify({windowId:e.exports.currentWindowId,type:t,data:i||""}),"*")},createIframe:function(e,t){var i,s,r=global.document.createElement("iframe"),o=function(){clearTimeout(i);try{r.onload=null}catch(e){}r.onerror=null},a=function(){r&&(o(),setTimeout((function(){r&&r.parentNode.removeChild(r),r=null}),0),n.unloadDel(s))},l=function(e){r&&(a(),t(e))};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){l("onerror")},r.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},global.document.body.appendChild(r),i=setTimeout((function(){l("timeout")}),15e3),s=n.unloadAdd(a),{post:function(e,t){setTimeout((function(){try{r&&r.contentWindow&&r.contentWindow.postMessage(e,t)}catch(i){}}),0)},cleanup:a,loaded:o}},createHtmlfile:function(t,i){var s,r,o,a=["Active"].concat("Object").join("X"),l=new global[a]("htmlfile"),c=function(){clearTimeout(s),o.onerror=null},h=function(){l&&(c(),n.unloadDel(r),o.parentNode.removeChild(o),o=l=null,CollectGarbage())},d=function(e){l&&(h(),i(e))};l.open(),l.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=global[e.exports.WPrefix];var u=l.createElement("div");return l.body.appendChild(u),o=l.createElement("iframe"),u.appendChild(o),o.src=t,o.onerror=function(){d("onerror")},s=setTimeout((function(){d("timeout")}),15e3),r=n.unloadAdd(h),{post:function(e,t){try{setTimeout((function(){o&&o.contentWindow&&o.contentWindow.postMessage(e,t)}),0)}catch(i){}},cleanup:h,loaded:c}}},e.exports.iframeEnabled=!1,global.document&&(e.exports.iframeEnabled=("function"==typeof global.postMessage||"object"==typeof global.postMessage)&&!r.isKonqueror())},"96lO":function(e,t,i){"use strict";var n=i("P7XM"),s=i("Yh+D"),r=i("6Zju"),o=i("Dohz");function a(e,t,i,n,a){var l=s.addPath(e,t),c=this;r.call(this,e,i),this.poll=new o(n,l,a),this.poll.on("message",(function(e){c.emit("message",e)})),this.poll.once("close",(function(e,t){c.poll=null,c.emit("close",e,t),c.close()}))}n(a,r),a.prototype.close=function(){r.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},"9wH6":function(e,t,i){"use strict";var n=i("raCH").EventEmitter;function s(){var e=this;n.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),s.timeout)}i("P7XM")(s,n),s.prototype.close=function(){clearTimeout(this.to)},s.timeout=2e3,e.exports=s},AEAD:function(e,t,i){"use strict";e.exports=function(e){return{filterToEnabled:function(t,i){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===i.websocket||t.length&&-1===t.indexOf(e.transportName)||e.enabled(i)&&(n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)))})),n}}}},BOF4:function(t,i,n){"use strict";var s=n("evrj");function r(e){this.message=e}(r.prototype=new Error).name="InvalidTokenError",t.exports=function(t,i){if("string"!=typeof t)throw new r("Invalid token specified");var n=!0===(i=i||{}).header?0:1;try{return JSON.parse(s(t.split(".")[n]))}catch(e){throw new r("Invalid token specified: "+e.message)}},t.exports.InvalidTokenError=r},DjPg:function(t,i,n){var s,r,o;r=[n("EVdn")],void 0===(o="function"==typeof(s=function(t){var i=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var i=t.fn.select2.amd;return i&&i.requirejs||(i?s=i:i={},function(e){var t,i,o,a,l={},c={},h={},d={},u=Object.prototype.hasOwnProperty,p=[].slice,f=/\.js$/;function m(e,t){return u.call(e,t)}function g(e,t){var i,n,s,r,o,a,l,c,d,u,p,m=t&&t.split("/"),g=h.map,v=g&&g["*"]||{};if(e){for(o=(e=e.split("/")).length-1,h.nodeIdCompat&&f.test(e[o])&&(e[o]=e[o].replace(f,"")),"."===e[0].charAt(0)&&m&&(e=m.slice(0,m.length-1).concat(e)),d=0;d<e.length;d++)if("."===(p=e[d]))e.splice(d,1),d-=1;else if(".."===p){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((m||v)&&g){for(d=(i=e.split("/")).length;d>0;d-=1){if(n=i.slice(0,d).join("/"),m)for(u=m.length;u>0;u-=1)if((s=g[m.slice(0,u).join("/")])&&(s=s[n])){r=s,a=d;break}if(r)break;!l&&v&&v[n]&&(l=v[n],c=d)}!r&&l&&(r=l,a=c),r&&(i.splice(0,a,r),e=i.join("/"))}return e}function v(e,t){return function(){var n=p.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),i.apply(void 0,n.concat([e,t]))}}function y(e){return function(t){l[e]=t}}function b(e){if(m(c,e)){var i=c[e];delete c[e],d[e]=!0,t.apply(void 0,i)}if(!m(l,e)&&!m(d,e))throw new Error("No "+e);return l[e]}function w(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function S(e){return e?w(e):[]}function C(e){return function(){return h&&h.config&&h.config[e]||{}}}o=function(e,t){var i,n,s=w(e),r=s[0],o=t[1];return e=s[1],r&&(i=b(r=g(r,o))),r?e=i&&i.normalize?i.normalize(e,(n=o,function(e){return g(e,n)})):g(e,o):(e=(s=w(e=g(e,o)))[1],(r=s[0])&&(i=b(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}},a={require:function(e){return v(e)},exports:function(e){var t=l[e];return void 0!==t?t:l[e]={}},module:function(e){return{id:e,uri:"",exports:l[e],config:C(e)}}},t=function(e,t,i,n){var s,r,h,u,p,f,g,w=[],C=typeof i;if(f=S(n=n||e),"undefined"===C||"function"===C){for(t=!t.length&&i.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if("require"===(r=(u=o(t[p],f)).f))w[p]=a.require(e);else if("exports"===r)w[p]=a.exports(e),g=!0;else if("module"===r)s=w[p]=a.module(e);else if(m(l,r)||m(c,r)||m(d,r))w[p]=b(r);else{if(!u.p)throw new Error(e+" missing "+r);u.p.load(u.n,v(n,!0),y(r),{}),w[p]=l[r]}h=i?i.apply(l[e],w):void 0,e&&(s&&void 0!==s.exports&&s.exports!==l[e]?l[e]=s.exports:void 0===h&&g||(l[e]=h))}else e&&(l[e]=i)},n=s=i=function(e,n,s,r,l){if("string"==typeof e)return a[e]?a[e](n):b(o(e,S(n)).f);if(!e.splice){if((h=e).deps&&i(h.deps,h.callback),!n)return;n.splice?(e=n,n=s,s=null):e=void 0}return n=n||function(){},"function"==typeof s&&(s=r,r=l),r?t(void 0,e,n,s):setTimeout((function(){t(void 0,e,n,s)}),4),i},i.config=function(e){return i(e)},n._defined=l,(r=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),m(l,e)||m(c,e)||(c[e]=[e,t,i])}).amd={jQuery:!0}}(),i.requirejs=n,i.require=s,i.define=r),i.define("almond",(function(){})),i.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),i.define("select2/utils",["jquery"],(function(e){var t={};function i(e){var t=e.prototype,i=[];for(var n in t)"function"==typeof t[n]&&"constructor"!==n&&i.push(n);return i}t.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var s in t)i.call(t,s)&&(e[s]=t[s]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},t.Decorate=function(e,t){var n=i(t),s=i(e);function r(){var i=Array.prototype.unshift,n=t.prototype.constructor.length,s=e.prototype.constructor;n>0&&(i.call(arguments,e.prototype.constructor),s=t.prototype.constructor),s.apply(this,arguments)}t.displayName=e.displayName,r.prototype=new function(){this.constructor=r};for(var o=0;o<s.length;o++){var a=s[o];r.prototype[a]=e.prototype[a]}for(var l=function(e){var i=function(){};e in r.prototype&&(i=r.prototype[e]);var n=t.prototype[e];return function(){var e=Array.prototype.unshift;return e.call(arguments,i),n.apply(this,arguments)}},c=0;c<n.length;c++){var h=n[c];r.prototype[h]=l(h)}return r};var n=function(){this.listeners={}};n.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},n.prototype.trigger=function(e){var t=Array.prototype.slice,i=t.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++)e[i].apply(this,t)},t.Observable=n,t.generateChars=function(e){for(var t="",i=0;i<e;i++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var i=t.split("-"),n=e;if(1!==i.length){for(var s=0;s<i.length;s++){var r=i[s];(r=r.substring(0,1).toLowerCase()+r.substring(1))in n||(n[r]={}),s==i.length-1&&(n[r]=e[t]),n=n[r]}delete e[t]}}return e},t.hasScroll=function(t,i){var n=e(i),s=i.style.overflowX,r=i.style.overflowY;return(s!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===s||"scroll"===r||n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth)},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},t.__cache={};var s=0;return t.GetUniqueElementId=function(e){var i=e.getAttribute("data-select2-id");return null!=i||(i=e.id?"select2-data-"+e.id:"select2-data-"+(++s).toString()+"-"+t.generateChars(4),e.setAttribute("data-select2-id",i)),i},t.StoreData=function(e,i,n){var s=t.GetUniqueElementId(e);t.__cache[s]||(t.__cache[s]={}),t.__cache[s][i]=n},t.GetData=function(i,n){var s=t.GetUniqueElementId(i);return n?t.__cache[s]&&null!=t.__cache[s][n]?t.__cache[s][n]:e(i).data(n):t.__cache[s]},t.RemoveData=function(e){var i=t.GetUniqueElementId(e);null!=t.__cache[i]&&delete t.__cache[i],e.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(e,t){var i=e.getAttribute("class").trim().split(/\s+/);i=i.filter((function(e){return 0===e.indexOf("select2-")}));var n=t.getAttribute("class").trim().split(/\s+/);n=n.filter((function(e){return 0!==e.indexOf("select2-")}));var s=i.concat(n);e.setAttribute("class",s.join(" "))},t})),i.define("select2/results",["jquery","./utils"],(function(e,t){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=e('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),s=this.options.get("translations").get(t.message);n.append(i(s(t.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=this.option(e.results[i]);t.push(n)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current((function(n){var s=n.map((function(e){return e.id.toString()}));i.$results.find(".select2-results__option--selectable").each((function(){var i=e(this),n=t.GetData(this,"data");null!=n.element&&n.element.selected||null==n.element&&s.indexOf(""+n.id)>-1?(this.classList.add("select2-results__option--selected"),i.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),i.attr("aria-selected","false"))}))}))},i.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},i=this.option(t);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var n=document.createElement("li");n.classList.add("select2-results__option"),n.classList.add("select2-results__option--selectable");var s={role:"option"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var o in(null!=i.element&&r.call(i.element,":disabled")||null==i.element&&i.disabled)&&(s["aria-disabled"]="true",n.classList.remove("select2-results__option--selectable"),n.classList.add("select2-results__option--disabled")),null==i.id&&n.classList.remove("select2-results__option--selectable"),null!=i._resultId&&(n.id=i._resultId),i.title&&(n.title=i.title),i.children&&(s.role="group",s["aria-label"]=i.text,n.classList.remove("select2-results__option--selectable"),n.classList.add("select2-results__option--group")),s)n.setAttribute(o,s[o]);if(i.children){var a=e(n),l=document.createElement("strong");l.className="select2-results__group",this.template(i,l);for(var c=[],h=0;h<i.children.length;h++){var d=this.option(i.children[h]);c.push(d)}var u=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});u.append(c),a.append(l),a.append(u)}else this.template(i,n);return t.StoreData(n,"data",i),n},i.prototype.bind=function(i,n){var s=this;this.$results.attr("id",i.id+"-results"),i.on("results:all",(function(e){s.clear(),s.append(e.data),i.isOpen()&&(s.setClasses(),s.highlightFirstItem())})),i.on("results:append",(function(e){s.append(e.data),i.isOpen()&&s.setClasses()})),i.on("query",(function(e){s.hideMessages(),s.showLoading(e)})),i.on("select",(function(){i.isOpen()&&(s.setClasses(),s.options.get("scrollAfterSelect")&&s.highlightFirstItem())})),i.on("unselect",(function(){i.isOpen()&&(s.setClasses(),s.options.get("scrollAfterSelect")&&s.highlightFirstItem())})),i.on("open",(function(){s.$results.attr("aria-expanded","true"),s.$results.attr("aria-hidden","false"),s.setClasses(),s.ensureHighlightVisible()})),i.on("close",(function(){s.$results.attr("aria-expanded","false"),s.$results.attr("aria-hidden","true"),s.$results.removeAttr("aria-activedescendant")})),i.on("results:toggle",(function(){var e=s.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),i.on("results:select",(function(){var e=s.getHighlightedResults();if(0!==e.length){var i=t.GetData(e[0],"data");e.hasClass("select2-results__option--selected")?s.trigger("close",{}):s.trigger("select",{data:i})}})),i.on("results:previous",(function(){var e=s.getHighlightedResults(),t=s.$results.find(".select2-results__option--selectable"),i=t.index(e);if(!(i<=0)){var n=i-1;0===e.length&&(n=0);var r=t.eq(n);r.trigger("mouseenter");var o=s.$results.offset().top,a=r.offset().top,l=s.$results.scrollTop()+(a-o);0===n?s.$results.scrollTop(0):a-o<0&&s.$results.scrollTop(l)}})),i.on("results:next",(function(){var e=s.getHighlightedResults(),t=s.$results.find(".select2-results__option--selectable"),i=t.index(e)+1;if(!(i>=t.length)){var n=t.eq(i);n.trigger("mouseenter");var r=s.$results.offset().top+s.$results.outerHeight(!1),o=n.offset().top+n.outerHeight(!1),a=s.$results.scrollTop()+o-r;0===i?s.$results.scrollTop(0):o>r&&s.$results.scrollTop(a)}})),i.on("results:focus",(function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")})),i.on("results:message",(function(e){s.displayMessage(e)})),e.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=s.$results.scrollTop(),i=s.$results.get(0).scrollHeight-t+e.deltaY,n=e.deltaY>0&&t-e.deltaY<=0,r=e.deltaY<0&&i<=s.$results.height();n?(s.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):r&&(s.$results.scrollTop(s.$results.get(0).scrollHeight-s.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(i){var n=e(this),r=t.GetData(this,"data");n.hasClass("select2-results__option--selected")?s.options.get("multiple")?s.trigger("unselect",{originalEvent:i,data:r}):s.trigger("close",{}):s.trigger("select",{originalEvent:i,data:r})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(i){var n=t.GetData(this,"data");s.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),s.trigger("results:focus",{data:n,element:e(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find(".select2-results__option--selectable").index(e),i=this.$results.offset().top,n=e.offset().top,s=this.$results.scrollTop()+(n-i),r=n-i;s-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(s)}},i.prototype.template=function(t,i){var n=this.options.get("templateResult"),s=this.options.get("escapeMarkup"),r=n(t,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=s(r):e(i).append(r)},i})),i.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),i.define("select2/selection/base",["jquery","../utils","../keys"],(function(e,t,i){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var i=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i,i},n.prototype.bind=function(e,t){var n=this,s=e.id+"-results";this.container=e,this.$selection.on("focus",(function(e){n.trigger("focus",e)})),this.$selection.on("blur",(function(e){n._handleBlur(e)})),this.$selection.on("keydown",(function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){n.update(e.data)})),e.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",s),n._attachCloseHandler(e)})),e.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)})),e.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")})),e.on("disable",(function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")}))},n.prototype._handleBlur=function(t){var i=this;window.setTimeout((function(){document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)}),1)},n.prototype._attachCloseHandler=function(i){e(document.body).on("mousedown.select2."+i.id,(function(i){var n=e(i.target).closest(".select2");e(".select2.select2-container--open").each((function(){this!=n[0]&&t.GetData(this,"element").select2("close")}))}))},n.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},n.prototype.position=function(e,t){t.find(".selection").append(e)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},n.prototype.isEnabled=function(){return!this.isDisabled()},n.prototype.isDisabled=function(){return this.options.get("disabled")},n})),i.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,i,n){function s(){s.__super__.constructor.apply(this,arguments)}return i.Extend(s,t),s.prototype.render=function(){var e=s.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},s.prototype.bind=function(e,t){var i=this;s.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",n),this.$selection.attr("aria-controls",n),this.$selection.on("mousedown",(function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),e.on("focus",(function(t){e.isOpen()||i.$selection.trigger("focus")}))},s.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},s.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},s.prototype.selectionContainer=function(){return e("<span></span>")},s.prototype.update=function(e){if(0!==e.length){var t=e[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(t,i);i.empty().append(n);var s=t.title||t.text;s?i.attr("title",s):i.removeAttr("title")}else this.clear()},s})),i.define("select2/selection/multiple",["jquery","./base","../utils"],(function(e,t,i){function n(e,t){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,t),n.prototype.render=function(){var e=n.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(t,s){var r=this;n.__super__.bind.apply(this,arguments);var o=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",o),this.$selection.on("click",(function(e){r.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(t){if(!r.isDisabled()){var n=e(this).parent(),s=i.GetData(n[0],"data");r.trigger("unselect",{originalEvent:t,data:s})}})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(e){r.isDisabled()||e.stopPropagation()}))},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},n.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",s=0;s<e.length;s++){var r=e[s],o=this.selectionContainer(),a=this.display(r,o),l=n+i.generateChars(4)+"-";l+=r.id?r.id:i.generateChars(4),o.find(".select2-selection__choice__display").append(a).attr("id",l);var c=r.title||r.text;c&&o.attr("title",c);var h=this.options.get("translations").get("removeItem"),d=o.find(".select2-selection__choice__remove");d.attr("title",h()),d.attr("aria-label",h()),d.attr("aria-describedby",l),i.StoreData(o[0],"data",r),t.push(o)}this.$selection.find(".select2-selection__rendered").append(t)}},n})),i.define("select2/selection/placeholder",[],(function(){function e(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();i.html(this.display(t)),i[0].classList.add("select2-selection__placeholder"),i[0].classList.remove("select2-selection__choice");var n=t.title||t.text||i.text();return this.$selection.find(".select2-selection__rendered").attr("title",n),i},e.prototype.update=function(e,t){if(t.length>1||1==t.length&&t[0].id!=this.placeholder.id)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e})),i.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(e,t,i){function n(){}return n.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(e){n._handleClear(e)})),t.on("keypress",(function(e){n._handleKeyboardClear(e,t)}))},n.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var s=i.GetData(n[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var o={data:s};if(this.trigger("clear",o),o.prevented)this.$element.val(r);else{for(var a=0;a<s.length;a++)if(this.trigger("unselect",o={data:s[a]}),o.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},n.prototype._handleKeyboardClear=function(e,i,n){n.isOpen()||i.which!=t.DELETE&&i.which!=t.BACKSPACE||this._handleClear(i)},n.prototype.update=function(t,n){if(t.call(this,n),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var s=this.$selection.find(".select2-selection__rendered").attr("id"),r=this.options.get("translations").get("removeAllItems"),o=e('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');o.attr("title",r()),o.attr("aria-label",r()),o.attr("aria-describedby",s),i.StoreData(o[0],"data",n),this.$selection.prepend(o),this.$selection[0].classList.add("select2-selection--clearable")}},n})),i.define("select2/selection/search",["jquery","../utils","../keys"],(function(e,t,i){function n(e,t,i){e.call(this,t,i)}return n.prototype.render=function(t){var i=this.options.get("translations").get("search"),n=e('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=n,this.$search=n.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",i());var s=t.call(this);return this._transferTabIndex(),s.append(this.$searchContainer),s},n.prototype.bind=function(e,n,s){var r=this,o=n.id+"-results",a=n.id+"-container";e.call(this,n,s),r.$search.attr("aria-describedby",a),n.on("open",(function(){r.$search.attr("aria-controls",o),r.$search.trigger("focus")})),n.on("close",(function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),n.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),n.on("disable",(function(){r.$search.prop("disabled",!0)})),n.on("focus",(function(e){r.$search.trigger("focus")})),n.on("results:focus",(function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(e){r.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){r._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===i.BACKSPACE&&""===r.$search.val()){var n=r.$selection.find(".select2-selection__choice").last();if(n.length>0){var s=t.GetData(n[0],"data");r.searchRemoveChoice(s),e.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(e){r.$search.val()&&e.stopPropagation()}));var l=document.documentMode,c=l&&l<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){r.$selection.off(c?"input.search input.searchcheck":"keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(c&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&r.handleSearch(e)}}))},n.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},n.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),i&&this.$search.trigger("focus")},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},n})),i.define("select2/selection/selectionCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){var i=t.call(this),n=this.options.get("selectionCssClass")||"";return-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),e.copyNonInternalCssClasses(i[0],this.$element[0])),i.addClass(n),i},t})),i.define("select2/selection/eventRelay",["jquery"],(function(e){function t(){}return t.prototype.bind=function(t,i,n){var s=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],o=["opening","closing","selecting","unselecting","clearing"];t.call(this,i,n),i.on("*",(function(t,i){if(-1!==r.indexOf(t)){var n=e.Event("select2:"+t,{params:i=i||{}});s.$element.trigger(n),-1!==o.indexOf(t)&&(i.prevented=n.isDefaultPrevented())}}))},t})),i.define("select2/translation",["jquery","require"],(function(e,t){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var n=t(e);i._cache[e]=n}return new i(i._cache[e])},i})),i.define("select2/diacritics",[],(function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u0152":"OE","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u0153":"oe","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03ce":"\u03c9","\u03c2":"\u03c3","\u2019":"'"}})),i.define("select2/data/base",["../utils"],(function(e){function t(e,i){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var n=t.id+"-result-";return(n+=e.generateChars(4))+(null!=i.id?"-"+i.id.toString():"-"+e.generateChars(4))},t})),i.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,i){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(e){return t.item(i(e))})))},n.prototype.select=function(e){var t=this;if(e.selected=!0,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current((function(i){var n=[];(e=[e]).push.apply(e,i);for(var s=0;s<e.length;s++){var r=e[s].id;-1===n.indexOf(r)&&n.push(r)}t.$element.val(n),t.$element.trigger("input").trigger("change")})):(this.$element.val(e.id),this.$element.trigger("input").trigger("change"))},n.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(i){for(var n=[],s=0;s<i.length;s++){var r=i[s].id;r!==e.id&&-1===n.indexOf(r)&&n.push(r)}t.$element.val(n),t.$element.trigger("input").trigger("change")}))}},n.prototype.bind=function(e,t){var i=this;this.container=e,e.on("select",(function(e){i.select(e.data)})),e.on("unselect",(function(e){i.unselect(e.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){t.RemoveData(this)}))},n.prototype.query=function(e,t){var n=[],s=this;this.$element.children().each((function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var t=i(this),r=s.item(t),o=s.matches(e,r);null!==o&&n.push(o)}})),t({results:n})},n.prototype.addOptions=function(e){this.$element.append(e)},n.prototype.option=function(e){var n;e.children?(n=document.createElement("optgroup")).label=e.text:void 0!==(n=document.createElement("option")).textContent?n.textContent=e.text:n.innerText=e.text,void 0!==e.id&&(n.value=e.id),e.disabled&&(n.disabled=!0),e.selected&&(n.selected=!0),e.title&&(n.title=e.title);var s=this._normalizeItem(e);return s.element=n,t.StoreData(n,"data",s),i(n)},n.prototype.item=function(e){var n={};if(null!=(n=t.GetData(e[0],"data")))return n;var s=e[0];if("option"===s.tagName.toLowerCase())n={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===s.tagName.toLowerCase()){n={text:e.prop("label"),children:[],title:e.prop("title")};for(var r=e.children("option"),o=[],a=0;a<r.length;a++){var l=i(r[a]),c=this.item(l);o.push(c)}n.children=o}return(n=this._normalizeItem(n)).element=e[0],t.StoreData(e[0],"data",n),n},n.prototype._normalizeItem=function(e){return e!==Object(e)&&(e={id:e,text:e}),null!=(e=i.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),i.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n})),i.define("select2/data/array",["./select","../utils","jquery"],(function(e,t,i){function n(e,t){this._dataToConvert=t.get("data")||[],n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype.bind=function(e,t){n.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},n.prototype.select=function(e){var t=this.$element.find("option").filter((function(t,i){return i.value==e.id.toString()}));0===t.length&&(t=this.option(e),this.addOptions(t)),n.__super__.select.call(this,e)},n.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),s=n.map((function(){return t.item(i(this)).id})).get(),r=[];function o(e){return function(){return i(this).val()==e.id}}for(var a=0;a<e.length;a++){var l=this._normalizeItem(e[a]);if(s.indexOf(l.id)>=0){var c=n.filter(o(l)),h=this.item(c),d=i.extend(!0,{},l,h),u=this.option(d);c.replaceWith(u)}else{var p=this.option(l);if(l.children){var f=this.convertToOptions(l.children);p.append(f)}r.push(p)}}return r},n})),i.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){var s=i.ajax(e);return s.then(t),s.fail(n),s}};return i.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(e,t){var n=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var s=i.extend({type:"GET"},this.ajaxOptions);function r(){var i=s.transport(s,(function(i){var s=n.processResults(i,e);n.options.get("debug")&&window.console&&console.error&&(s&&s.results&&Array.isArray(s.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(s)}),(function(){(!("status"in i)||0!==i.status&&"0"!==i.status)&&n.trigger("results:message",{message:"errorLoading"})}));n._request=i}"function"==typeof s.url&&(s.url=s.url.call(this.$element,e)),"function"==typeof s.data&&(s.data=s.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},n})),i.define("select2/data/tags",["jquery"],(function(e){function t(e,t,i){var n=i.get("tags"),s=i.get("createTag");void 0!==s&&(this.createTag=s);var r=i.get("insertTag");if(void 0!==r&&(this.insertTag=r),e.call(this,t,i),Array.isArray(n))for(var o=0;o<n.length;o++){var a=this._normalizeItem(n[o]),l=this.option(a);this.$element.append(l)}}return t.prototype.query=function(e,t,i){var n=this;this._removeOldTags(),e.call(this,t,null!=t.term&&null==t.page?function e(s,r){for(var o=s.results,a=0;a<o.length;a++){var l=o[a],c=null!=l.children&&!e({results:l.children},!0);if((l.text||"").toUpperCase()===(t.term||"").toUpperCase()||c)return!r&&(s.data=o,void i(s))}if(r)return!0;var h=n.createTag(t);if(null!=h){var d=n.option(h);d.attr("data-select2-tag","true"),n.addOptions([d]),n.insertTag(o,h)}s.results=o,i(s)}:i)},t.prototype.createTag=function(e,t){if(null==t.term)return null;var i=t.term.trim();return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,i){t.unshift(i)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each((function(){this.selected||e(this).remove()}))},t})),i.define("select2/data/tokenizer",["jquery"],(function(e){function t(e,t,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),e.call(this,t,i)}return t.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,n){var s=this;i.term=i.term||"";var r=this.tokenizer(i,this.options,(function(t){var i=s._normalizeItem(t);if(!s.$element.find("option").filter((function(){return e(this).val()===i.id})).length){var n=s.option(i);n.attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([n])}!function(e){s.trigger("select",{data:e})}(i)}));r.term!==i.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),i.term=r.term),t.call(this,i,n)},t.prototype.tokenizer=function(t,i,n,s){for(var r=n.get("tokenSeparators")||[],o=i.term,a=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};a<o.length;)if(-1!==r.indexOf(o[a])){var c=o.substr(0,a),h=l(e.extend({},i,{term:c}));null!=h?(s(h),o=o.substr(a+1)||"",a=0):a++}else a++;return{term:o}},t})),i.define("select2/data/minimumInputLength",[],(function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,i)},e})),i.define("select2/data/maximumInputLength",[],(function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,i)},e})),i.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",(function(){n._checkIfMaximumSelected()}))},e.prototype.query=function(e,t,i){var n=this;this._checkIfMaximumSelected((function(){e.call(n,t,i)}))},e.prototype._checkIfMaximumSelected=function(e,t){var i=this;this.current((function(e){i.maximumSelectionLength>0&&(null!=e?e.length:0)>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t&&t()}))},e})),i.define("select2/dropdown",["jquery","./utils"],(function(e,t){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i})),i.define("select2/dropdown/search",["jquery"],(function(e){function t(){}return t.prototype.render=function(t){var i=t.call(this),n=this.options.get("translations").get("search"),s=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=s,this.$search=s.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),i.prepend(s),i},t.prototype.bind=function(t,i,n){var s=this,r=i.id+"-results";t.call(this,i,n),this.$search.on("keydown",(function(e){s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(t){e(this).off("keyup")})),this.$search.on("keyup input",(function(e){s.handleSearch(e)})),i.on("open",(function(){s.$search.attr("tabindex",0),s.$search.attr("aria-controls",r),s.$search.trigger("focus"),window.setTimeout((function(){s.$search.trigger("focus")}),0)})),i.on("close",(function(){s.$search.attr("tabindex",-1),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.val(""),s.$search.trigger("blur")})),i.on("focus",(function(){i.isOpen()||s.$search.trigger("focus")})),i.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(s.showSearch(e)?s.$searchContainer[0].classList.remove("select2-search--hide"):s.$searchContainer[0].classList.add("select2-search--hide"))})),i.on("results:focus",(function(e){e.data._resultId?s.$search.attr("aria-activedescendant",e.data._resultId):s.$search.removeAttr("aria-activedescendant")}))},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),i.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,n)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),n=t.length-1;n>=0;n--)this.placeholder.id===t[n].id&&i.splice(n,1);return i},e})),i.define("select2/dropdown/infiniteScroll",["jquery"],(function(e){function t(e,t,i,n){this.lastParams={},e.call(this,t,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("query",(function(e){n.lastParams=e,n.loading=!0})),t.on("query:append",(function(e){n.lastParams=e,n.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&t&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t})),i.define("select2/dropdown/attachBody",["jquery","../utils"],(function(e,t){function i(t,i,n){this.$dropdownParent=e(n.get("dropdownParent")||document.body),t.call(this,i,n)}return i.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("open",(function(){n._showDropdown(),n._attachPositioningHandler(t),n._bindContainerResultHandlers(t)})),t.on("close",(function(){n._hideDropdown(),n._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},i.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(t){var i=e("<span></span>"),n=t.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var i=this;t.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),t.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})),t.on("results:message",(function(){i._positionDropdown(),i._resizeDropdown()})),t.on("select",(function(){i._positionDropdown(),i._resizeDropdown()})),t.on("unselect",(function(){i._positionDropdown(),i._resizeDropdown()})),this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,n){var s=this,r="scroll.select2."+n.id,o="resize.select2."+n.id,a="orientationchange.select2."+n.id,l=this.$container.parents().filter(t.hasScroll);l.each((function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})})),l.on(r,(function(i){var n=t.GetData(this,"select2-scroll-position");e(this).scrollTop(n.y)})),e(window).on(r+" "+o+" "+a,(function(e){s._positionDropdown(),s._resizeDropdown()}))},i.prototype._detachPositioningHandler=function(i,n){var s="scroll.select2."+n.id,r="resize.select2."+n.id,o="orientationchange.select2."+n.id;this.$container.parents().filter(t.hasScroll).off(s),e(window).off(s+" "+r+" "+o)},i.prototype._positionDropdown=function(){var t=e(window),i=this.$dropdown[0].classList.contains("select2-dropdown--above"),n=this.$dropdown[0].classList.contains("select2-dropdown--below"),s=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=r.top,o.bottom=r.top+o.height;var a=this.$dropdown.outerHeight(!1),l=t.scrollTop(),c=t.scrollTop()+t.height(),h=l<r.top-a,d=c>r.bottom+a,u={left:r.left,top:o.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var f={top:0,left:0};(e.contains(document.body,p[0])||p[0].isConnected)&&(f=p.offset()),u.top-=f.top,u.left-=f.left,i||n||(s="below"),d||!h||i?!h&&d&&i&&(s="below"):s="above",("above"==s||i&&"below"!==s)&&(u.top=o.top-f.top-a),null!=s&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+s),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+s)),this.$dropdownContainer.css(u)},i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i})),i.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,n)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var i=0,n=0;n<t.length;n++){var s=t[n];s.children?i+=e(s.children):i++}return i}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e})),i.define("select2/dropdown/selectOnClose",["../utils"],(function(e){function t(){}return t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("close",(function(e){n._handleSelectOnClose(e)}))},t.prototype._handleSelectOnClose=function(t,i){if(i&&null!=i.originalSelect2Event){var n=i.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var s=this.getHighlightedResults();if(!(s.length<1)){var r=e.GetData(s[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},t})),i.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",(function(e){n._selectTriggered(e)})),t.on("unselect",(function(e){n._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},e})),i.define("select2/dropdown/dropdownCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){var i=t.call(this),n=this.options.get("dropdownCssClass")||"";return-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),e.copyNonInternalCssClasses(i[0],this.$element[0])),i.addClass(n),i},t})),i.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(e){function t(){}return t.prototype.highlightFirstItem=function(t){var i=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(i.length>0){var n=i.first(),s=e.GetData(n[0],"data").element;if(s&&s.getAttribute&&"true"===s.getAttribute("data-select2-tag"))return void n.trigger("mouseenter")}t.call(this)},t})),i.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),i.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(t,i,n,s,r,o,a,l,c,h,d,u,p,f,m,g,v,y,b,w,S,C,_,E,T,x,k,A,O,D,I){function R(){this.reset()}return R.prototype.apply=function(e){if(null==(e=t.extend(!0,{},this.defaults,e)).dataAdapter&&(e.dataAdapter=null!=e.ajax?m:null!=e.data?f:p,e.minimumInputLength>0&&(e.dataAdapter=h.Decorate(e.dataAdapter,y)),e.maximumInputLength>0&&(e.dataAdapter=h.Decorate(e.dataAdapter,b)),e.maximumSelectionLength>0&&(e.dataAdapter=h.Decorate(e.dataAdapter,w)),e.tags&&(e.dataAdapter=h.Decorate(e.dataAdapter,g)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=h.Decorate(e.dataAdapter,v))),null==e.resultsAdapter&&(e.resultsAdapter=i,null!=e.ajax&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,E)),null!=e.placeholder&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,_)),e.selectOnClose&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,k)),e.tags&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,D))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=S;else{var d=h.Decorate(S,C);e.dropdownAdapter=d}0!==e.minimumResultsForSearch&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,x)),e.closeOnSelect&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,A)),null!=e.dropdownCssClass&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,O)),e.dropdownAdapter=h.Decorate(e.dropdownAdapter,T)}null==e.selectionAdapter&&(e.selectionAdapter=e.multiple?s:n,null!=e.placeholder&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,r)),e.allowClear&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,o)),e.multiple&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,a)),null!=e.selectionCssClass&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,l)),e.selectionAdapter=h.Decorate(e.selectionAdapter,c)),e.language=this._resolveLanguage(e.language),e.language.push("en");for(var u=[],I=0;I<e.language.length;I++){var R=e.language[I];-1===u.indexOf(R)&&u.push(R)}return e.language=u,e.translations=this._processTranslations(e.language,e.debug),e},R.prototype.reset=function(){function e(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return u[e]||e}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function i(n,s){if(null==n.term||""===n.term.trim())return s;if(s.children&&s.children.length>0){for(var r=t.extend(!0,{},s),o=s.children.length-1;o>=0;o--)null==i(n,s.children[o])&&r.children.splice(o,1);return r.children.length>0?r:i(n,r)}var a=e(s.text).toUpperCase(),l=e(n.term).toUpperCase();return a.indexOf(l)>-1?s:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},R.prototype.applyFromElement=function(e,t){var i=e.language,n=this.defaults.language,s=t.prop("lang"),r=t.closest("[lang]").prop("lang"),o=Array.prototype.concat.call(this._resolveLanguage(s),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r));return e.language=o,e},R.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var i;i=Array.isArray(e)?e:[e];for(var n=[],s=0;s<i.length;s++)if(n.push(i[s]),"string"==typeof i[s]&&i[s].indexOf("-")>0){var r=i[s].split("-");n.push(r[0])}return n},R.prototype._processTranslations=function(i,n){for(var s=new d,r=0;r<i.length;r++){var o=new d,a=i[r];if("string"==typeof a)try{o=d.loadPath(a)}catch(e){try{o=d.loadPath(a=this.defaults.amdLanguageBase+a)}catch(l){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else o=t.isPlainObject(a)?new d(a):a;s.extend(o)}return s},R.prototype.set=function(e,i){var n={};n[t.camelCase(e)]=i;var s=h._convertData(n);t.extend(!0,this.defaults,s)},new R})),i.define("select2/options",["jquery","./defaults","./utils"],(function(e,t,i){function n(e,i){this.options=e,null!=i&&this.fromElement(i),null!=i&&(this.options=t.applyFromElement(this.options,i)),this.options=t.apply(this.options)}return n.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),i.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(t[0],"data",i.GetData(t[0],"select2Tags")),i.StoreData(t[0],"tags",!0)),i.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",i.GetData(t[0],"ajaxUrl")),i.StoreData(t[0],"ajax-Url",i.GetData(t[0],"ajaxUrl")));var s={};function r(e,t){return t.toUpperCase()}for(var o=0;o<t[0].attributes.length;o++){var a=t[0].attributes[o].name;if("data-"==a.substr(0,"data-".length)){var l=a.substring("data-".length),c=i.GetData(t[0],l);s[l.replace(/-([a-z])/g,r)]=c}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(s=e.extend(!0,{},t[0].dataset,s));var h=e.extend(!0,{},i.GetData(t[0]),s);for(var d in h=i._convertData(h))n.indexOf(d)>-1||(e.isPlainObject(this.options[d])?e.extend(this.options[d],h[d]):this.options[d]=h[d]);return this},n.prototype.get=function(e){return this.options[e]},n.prototype.set=function(e,t){this.options[e]=t},n})),i.define("select2/core",["jquery","./options","./utils","./keys"],(function(e,t,i,n){var s=function(e,n){null!=i.GetData(e[0],"select2")&&i.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new t(n=n||{},e),s.__super__.constructor.call(this);var r=e.attr("tabindex")||0;i.StoreData(e[0],"old-tabindex",r),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var a=this.render();this._placeContainer(a);var l=this.options.get("selectionAdapter");this.selection=new l(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var c=this.options.get("dropdownAdapter");this.dropdown=new c(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var h=this.options.get("resultsAdapter");this.results=new h(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){d.trigger("selection:update",{data:e})})),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(e[0],"select2",this),e.data("select2",this)};return i.Extend(s,i.Observable),s.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},s.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},s.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var n=this._resolveWidth(e,"style");return null!=n?n:this._resolveWidth(e,"element")}if("element"==t){var s=e.outerWidth(!1);return s<=0?"auto":s+"px"}if("style"==t){var r=e.attr("style");if("string"!=typeof r)return null;for(var o=r.split(";"),a=0,l=o.length;a<l;a+=1){var c=o[a].replace(/\s/g,"").match(i);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==t?window.getComputedStyle(e[0]).width:t},s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},s.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(t){e._syncA(),e._syncS(t)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},s.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",(function(t,i){e.trigger(t,i)}))},s.prototype._registerSelectionEvents=function(){var e=this,t=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(i,n){-1===t.indexOf(i)&&e.trigger(i,n)}))},s.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",(function(t,i){e.trigger(t,i)}))},s.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",(function(t,i){e.trigger(t,i)}))},s.prototype._registerEvents=function(){var e=this;this.on("open",(function(){e.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){e.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){e.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){e.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){e.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,(function(i){e.trigger("results:all",{data:i,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(i){e.trigger("results:append",{data:i,query:t})}))})),this.on("keypress",(function(t){var i=t.which;e.isOpen()?i===n.ESC||i===n.UP&&t.altKey?(e.close(t),t.preventDefault()):i===n.ENTER||i===n.TAB?(e.trigger("results:select",{}),t.preventDefault()):i===n.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):i===n.UP?(e.trigger("results:previous",{}),t.preventDefault()):i===n.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&t.altKey)&&(e.open(),t.preventDefault())}))},s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},s.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var i=0;i<e.addedNodes.length;i++)if(e.addedNodes[i].selected)return!0}else{if(e.removedNodes&&e.removedNodes.length>0)return!0;if(Array.isArray(e))return e.some((function(e){return t._isChangeMutation(e)}))}return!1},s.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e),i=this;t&&this.dataAdapter.current((function(e){i.trigger("selection:update",{data:e})}))},s.prototype.trigger=function(e,t){var i=s.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in n){var r={prevented:!1,name:e,args:t};if(i.call(this,n[e],r),r.prevented)return void(t.prevented=!0)}i.call(this,e,t)},s.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},s.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},s.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},s.prototype.isEnabled=function(){return!this.isDisabled()},s.prototype.isDisabled=function(){return this.options.get("disabled")},s.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},s.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},s.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},s.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]),this.$element.prop("disabled",!e[0])},s.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current((function(t){e=t})),e},s.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];Array.isArray(t)&&(t=t.map((function(e){return e.toString()}))),this.$element.val(t).trigger("input").trigger("change")},s.prototype.destroy=function(){i.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},s.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),i.StoreData(t[0],"element",this.$element),t},s})),i.define("jquery-mousewheel",["jquery"],(function(e){return e})),i.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(e,t,i,n,s){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var n=e.extend(!0,{},t);new i(e(this),n)})),this;if("string"==typeof t){var n,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=s.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,o)})),r.indexOf(t)>-1?this:n}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=n),i})),{define:i.define,require:i.require};var n,s,r}(),n=i.require("jquery.select2");return t.fn.select2.amd=i,n})?s.apply(i,r):s)||(t.exports=o)},Dohz:function(e,t,i){"use strict";var n=i("P7XM"),s=i("raCH").EventEmitter;function r(e,t,i){s.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=i,this._scheduleReceiver()}n(r,s),r.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(i,n){e.poll=t=null,e.pollIsClosing||("network"===n?e._scheduleReceiver():(e.emit("close",i||1006,n),e.removeAllListeners()))}))},r.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=r},E8Ah:function(e,t,i){"use strict";var n=global.WebSocket||global.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0},EBWB:function(e,t){e.exports="1.4.0"},EVdn:function(t,i,n){var s;!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(e)}("undefined"!=typeof window?window:this,(function(n,r){"use strict";var o=[],a=Object.getPrototypeOf,l=o.slice,c=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},h=o.push,d=o.indexOf,u={},p=u.toString,f=u.hasOwnProperty,m=f.toString,g=m.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},b=function(e){return null!=e&&e===e.window},w=n.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,i){var n,s,r=(i=i||w).createElement("script");if(r.text=e,t)for(n in S)(s=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,s);i.head.appendChild(r).parentNode.removeChild(r)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[p.call(e)]||"object":typeof e}var E=function(e,t){return new E.fn.init(e,t)};function T(e){var t=!!e&&"length"in e&&e.length,i=_(e);return!y(e)&&!b(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}E.fn=E.prototype={jquery:"3.6.0",constructor:E,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var e,t,i,n,s,r,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(c&&n&&(E.isPlainObject(n)||(s=Array.isArray(n)))?(i=o[t],r=s&&!Array.isArray(i)?[]:s||E.isPlainObject(i)?i:{},s=!1,o[t]=E.extend(c,r,n)):void 0!==n&&(o[t]=n));return o},E.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==p.call(e)||(t=a(e))&&("function"!=typeof(i=f.call(t,"constructor")&&t.constructor)||m.call(i)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){C(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(T(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(T(Object(e))?E.merge(i,"string"==typeof e?[e]:e):h.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:d.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;n<i;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,i){for(var n=[],s=0,r=e.length,o=!i;s<r;s++)!t(e[s],s)!==o&&n.push(e[s]);return n},map:function(e,t,i){var n,s,r=0,o=[];if(T(e))for(n=e.length;r<n;r++)null!=(s=t(e[r],r,i))&&o.push(s);else for(r in e)null!=(s=t(e[r],r,i))&&o.push(s);return c(o)},guid:1,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var x=function(t){var i,n,s,r,o,a,l,c,h,d,u,p,f,m,g,v,y,b,w,S="sizzle"+1*new Date,C=t.document,_=0,E=0,T=ce(),x=ce(),k=ce(),A=ce(),O=function(e,t){return e===t&&(u=!0),0},D={}.hasOwnProperty,I=[],R=I.pop,P=I.push,M=I.push,L=I.slice,N=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},V="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+B+"*("+F+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",H=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",U=new RegExp(B+"+","g"),q=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),W=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),G=new RegExp(B+"|>"),Y=new RegExp(H),$=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+V+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,ie=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){p()},ae=Se((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(I=L.call(C.childNodes),C.childNodes)}catch(e){M={apply:I.length?function(e,t){P.apply(e,L.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function le(e,t,i,s){var r,o,l,h,d,u,m,y=t&&t.ownerDocument,b=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return i;if(!s&&(p(t),t=t||f,g)){if(11!==b&&(d=ee.exec(e)))if(r=d[1]){if(9===b){if(!(l=t.getElementById(r)))return i;if(l.id===r)return i.push(l),i}else if(y&&(l=y.getElementById(r))&&w(t,l)&&l.id===r)return i.push(l),i}else{if(d[2])return M.apply(i,t.getElementsByTagName(e)),i;if((r=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!A[e+" "]&&(!v||!v.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(m=e,y=t,1===b&&(G.test(e)||z.test(e))){for((y=te.test(e)&&ye(t.parentNode)||t)===t&&n.scope||((h=t.getAttribute("id"))?h=h.replace(se,re):t.setAttribute("id",h=S)),o=(u=a(e)).length;o--;)u[o]=(h?"#"+h:":scope")+" "+we(u[o]);m=u.join(",")}try{return M.apply(i,y.querySelectorAll(m)),i}catch(C){A(e,!0)}finally{h===S&&t.removeAttribute("id")}}}return c(e.replace(q,"$1"),t,i,s)}function ce(){var e=[];return function t(i,n){return e.push(i+" ")>s.cacheLength&&delete t[e.shift()],t[i+" "]=n}}function he(e){return e[S]=!0,e}function de(t){var i=f.createElement("fieldset");try{return!!t(i)}catch(e){return!1}finally{i.parentNode&&i.parentNode.removeChild(i),i=null}}function ue(e,t){for(var i=e.split("|"),n=i.length;n--;)s.attrHandle[i[n]]=t}function pe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function me(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return he((function(t){return t=+t,he((function(i,n){for(var s,r=e([],i.length,t),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(i in n=le.support={},o=le.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!X.test(e&&e.namespaceURI||t&&t.nodeName||"HTML")},p=le.setDocument=function(e){var t,i,r=e?e.ownerDocument||e:C;return r!=f&&9===r.nodeType&&r.documentElement?(m=(f=r).documentElement,g=!o(f),C!=f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=de((function(e){return m.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=de((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=de((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(f.getElementsByClassName),n.getById=de((function(e){return m.appendChild(e).id=S,!f.getElementsByName||!f.getElementsByName(S).length})),n.getById?(s.filter.ID=function(e){var t=e.replace(ie,ne);return function(e){return e.getAttribute("id")===t}},s.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}}):(s.filter.ID=function(e){var t=e.replace(ie,ne);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},s.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i,n,s,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(s=t.getElementsByName(e),n=0;r=s[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),s.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},s.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=Z.test(f.querySelectorAll))&&(de((function(e){var t;m.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+B+"*(?:value|"+V+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+B+"*name"+B+"*="+B+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),de((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+B+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),m.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Z.test(b=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&de((function(e){n.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),y.push("!=",H)})),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=Z.test(m.compareDocumentPosition),w=t||Z.test(m.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==f||e.ownerDocument==C&&w(C,e)?-1:t==f||t.ownerDocument==C&&w(C,t)?1:d?N(d,e)-N(d,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var i,n=0,s=e.parentNode,r=t.parentNode,o=[e],a=[t];if(!s||!r)return e==f?-1:t==f?1:s?-1:r?1:d?N(d,e)-N(d,t):0;if(s===r)return pe(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?pe(o[n],a[n]):o[n]==C?-1:a[n]==C?1:0},f):f},le.matches=function(e,t){return le(e,null,null,t)},le.matchesSelector=function(t,i){if(p(t),n.matchesSelector&&g&&!A[i+" "]&&(!y||!y.test(i))&&(!v||!v.test(i)))try{var s=b.call(t,i);if(s||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return s}catch(e){A(i,!0)}return le(i,f,null,[t]).length>0},le.contains=function(e,t){return(e.ownerDocument||e)!=f&&p(e),w(e,t)},le.attr=function(e,t){(e.ownerDocument||e)!=f&&p(e);var i=s.attrHandle[t.toLowerCase()],r=i&&D.call(s.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==r?r:n.attributes||!g?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},le.escape=function(e){return(e+"").replace(se,re)},le.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},le.uniqueSort=function(e){var t,i=[],s=0,r=0;if(u=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort(O),u){for(;t=e[r++];)t===e[r]&&(s=i.push(r));for(;s--;)e.splice(i[s],1)}return d=null,e},r=le.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},(s=le.selectors={cacheLength:50,createPseudo:he,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(ie,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||le.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&le.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&Y.test(i)&&(t=a(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&T(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var s=le.attr(n,e);return null==s?"!="===t:!t||(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s.replace(U," ")+" ").indexOf(i)>-1:"|="===t&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var c,h,d,u,p,f,m=r!==o?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(r){for(;m;){for(u=t;u=u[m];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(b=(p=(c=(h=(d=(u=g)[S]||(u[S]={}))[u.uniqueID]||(d[u.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(b=p=0)||f.pop();)if(1===u.nodeType&&++b&&u===t){h[e]=[_,p,b];break}}else if(y&&(b=p=(c=(h=(d=(u=t)[S]||(u[S]={}))[u.uniqueID]||(d[u.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(u=++p&&u&&u[m]||(b=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++b||(y&&((h=(d=u[S]||(u[S]={}))[u.uniqueID]||(d[u.uniqueID]={}))[e]=[_,b]),u!==t)););return(b-=s)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var i,n=s.pseudos[e]||s.setFilters[e.toLowerCase()]||le.error("unsupported pseudo: "+e);return n[S]?n(t):n.length>1?(i=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?he((function(e,i){for(var s,r=n(e,t),o=r.length;o--;)e[s=N(e,r[o])]=!(i[s]=r[o])})):function(e){return n(e,0,i)}):n}},pseudos:{not:he((function(e){var t=[],i=[],n=l(e.replace(q,"$1"));return n[S]?he((function(e,t,i,s){for(var r,o=n(e,null,s,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))})):function(e,s,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}})),has:he((function(e){return function(t){return le(e,t).length>0}})),contains:he((function(e){return e=e.replace(ie,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:he((function(e){return $.test(e||"")||le.error("unsupported lang: "+e),e=e.replace(ie,ne).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(e){return e===m},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve((function(){return[0]})),last:ve((function(e,t){return[t-1]})),eq:ve((function(e,t,i){return[i<0?i+t:i]})),even:ve((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:ve((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:ve((function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:ve((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=s.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[i]=fe(i);for(i in{submit:!0,reset:!0})s.pseudos[i]=me(i);function be(){}function we(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function Se(e,t,i){var n=t.dir,s=t.next,r=s||n,o=i&&"parentNode"===r,a=E++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,s);return!1}:function(t,i,l){var c,h,d,u=[_,a];if(l){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(h=(d=t[S]||(t[S]={}))[t.uniqueID]||(d[t.uniqueID]={}),s&&s===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=h[r])&&c[0]===_&&c[1]===a)return u[2]=c[2];if(h[r]=u,u[2]=e(t,i,l))return!0}return!1}}function Ce(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function _e(e,t,i,n,s){for(var r,o=[],a=0,l=e.length,c=null!=t;a<l;a++)(r=e[a])&&(i&&!i(r,n,s)||(o.push(r),c&&t.push(a)));return o}function Ee(e,t,i,n,s,r){return n&&!n[S]&&(n=Ee(n)),s&&!s[S]&&(s=Ee(s,r)),he((function(r,o,a,l){var c,h,d,u=[],p=[],f=o.length,m=r||function(e,t,i){for(var n=0,s=t.length;n<s;n++)le(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),g=!e||!r&&t?m:_e(m,u,e,a,l),v=i?s||(r?e:f||n)?[]:o:g;if(i&&i(g,v,a,l),n)for(c=_e(v,p),n(c,[],a,l),h=c.length;h--;)(d=c[h])&&(v[p[h]]=!(g[p[h]]=d));if(r){if(s||e){if(s){for(c=[],h=v.length;h--;)(d=v[h])&&c.push(g[h]=d);s(null,v=[],c,l)}for(h=v.length;h--;)(d=v[h])&&(c=s?N(r,d):u[h])>-1&&(r[c]=!(o[c]=d))}}else v=_e(v===o?v.splice(f,v.length):v),s?s(null,o,v,l):M.apply(o,v)}))}function Te(e){for(var t,i,n,r=e.length,o=s.relative[e[0].type],a=o||s.relative[" "],l=o?1:0,c=Se((function(e){return e===t}),a,!0),d=Se((function(e){return N(t,e)>-1}),a,!0),u=[function(e,i,n){var s=!o&&(n||i!==h)||((t=i).nodeType?c(e,i,n):d(e,i,n));return t=null,s}];l<r;l++)if(i=s.relative[e[l].type])u=[Se(Ce(u),i)];else{if((i=s.filter[e[l].type].apply(null,e[l].matches))[S]){for(n=++l;n<r&&!s.relative[e[n].type];n++);return Ee(l>1&&Ce(u),l>1&&we(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(q,"$1"),i,l<n&&Te(e.slice(l,n)),n<r&&Te(e=e.slice(n)),n<r&&we(e))}u.push(i)}return Ce(u)}return be.prototype=s.filters=s.pseudos,s.setFilters=new be,a=le.tokenize=function(e,t){var i,n,r,o,a,l,c,h=x[e+" "];if(h)return t?0:h.slice(0);for(a=e,l=[],c=s.preFilter;a;){for(o in i&&!(n=W.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(r=[])),i=!1,(n=z.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(q," ")}),a=a.slice(i.length)),s.filter)!(n=K[o].exec(a))||c[o]&&!(n=c[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?le.error(e):x(e,l).slice(0)},l=le.compile=function(e,t){var i,n=[],r=[],o=k[e+" "];if(!o){for(t||(t=a(e)),i=t.length;i--;)(o=Te(t[i]))[S]?n.push(o):r.push(o);(o=k(e,function(e,t){var i=t.length>0,n=e.length>0,r=function(r,o,a,l,c){var d,u,m,v=0,y="0",b=r&&[],w=[],S=h,C=r||n&&s.find.TAG("*",c),E=_+=null==S?1:Math.random()||.1,T=C.length;for(c&&(h=o==f||o||c);y!==T&&null!=(d=C[y]);y++){if(n&&d){for(u=0,o||d.ownerDocument==f||(p(d),a=!g);m=e[u++];)if(m(d,o||f,a)){l.push(d);break}c&&(_=E)}i&&((d=!m&&d)&&v--,r&&b.push(d))}if(v+=y,i&&y!==v){for(u=0;m=t[u++];)m(b,w,o,a);if(r){if(v>0)for(;y--;)b[y]||w[y]||(w[y]=R.call(l));w=_e(w)}M.apply(l,w),c&&!r&&w.length>0&&v+t.length>1&&le.uniqueSort(l)}return c&&(_=E,h=S),b};return i?he(r):r}(r,n))).selector=e}return o},c=le.select=function(e,t,i,n){var r,o,c,h,d,u="function"==typeof e&&e,p=!n&&a(e=u.selector||e);if(i=i||[],1===p.length){if((o=p[0]=p[0].slice(0)).length>2&&"ID"===(c=o[0]).type&&9===t.nodeType&&g&&s.relative[o[1].type]){if(!(t=(s.find.ID(c.matches[0].replace(ie,ne),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=K.needsContext.test(e)?0:o.length;r--&&!s.relative[h=(c=o[r]).type];)if((d=s.find[h])&&(n=d(c.matches[0].replace(ie,ne),te.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&we(o)))return M.apply(i,n),i;break}}return(u||l(e,p))(n,t,!g,i,!t||te.test(e)&&ye(t.parentNode)||t),i},n.sortStable=S.split("").sort(O).join("")===S,n.detectDuplicates=!!u,p(),n.sortDetached=de((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),de((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&de((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),de((function(e){return null==e.getAttribute("disabled")}))||ue(V,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),le}(n);E.find=x,E.expr=x.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=x.uniqueSort,E.text=x.getText,E.isXMLDoc=x.isXML,E.contains=x.contains,E.escapeSelector=x.escape;var k=function(e,t,i){for(var n=[],s=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&E(e).is(i))break;n.push(e)}return n},A=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},O=E.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(e,t,i){return y(t)?E.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?E.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?E.grep(e,(function(e){return d.call(t,e)>-1!==i})):E.filter(t,e,i)}E.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?E.find.matchesSelector(n,e)?[n]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,i,n=this.length,s=this;if("string"!=typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<n;t++)if(E.contains(s[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)E.find(e,s[t],i);return n>1?E.uniqueSort(i):i},filter:function(e){return this.pushStack(R(this,e||[],!1))},not:function(e){return this.pushStack(R(this,e||[],!0))},is:function(e){return!!R(this,"string"==typeof e&&O.test(e)?E(e):e||[],!1).length}});var P,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,i){var n,s;if(!e)return this;if(i=i||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:M.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(E.merge(this,E.parseHTML(n[1],(t=t instanceof E?t[0]:t)&&t.nodeType?t.ownerDocument||t:w,!0)),I.test(n[1])&&E.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(s=w.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,P=E(w);var L=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function V(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,s=this.length,r=[],o="string"!=typeof e&&E(e);if(!O.test(e))for(;n<s;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&E.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?E.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?d.call(E(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,i){return k(e,"parentNode",i)},next:function(e){return V(e,"nextSibling")},prev:function(e){return V(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,i){return k(e,"nextSibling",i)},prevUntil:function(e,t,i){return k(e,"previousSibling",i)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(i,n){var s=E.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=E.filter(n,s)),this.length>1&&(N[e]||E.uniqueSort(s),L.test(e)&&s.reverse()),this.pushStack(s)}}));var B=/[^\x20\t\r\n\f]+/g;function F(e){return e}function j(e){throw e}function H(e,t,i,n){var s;try{e&&y(s=e.promise)?s.call(e).done(t).fail(i):e&&y(s=e.then)?s.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}E.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return E.each(e.match(B)||[],(function(e,i){t[i]=!0})),t}(e):E.extend({},e);var t,i,n,s,r=[],o=[],a=-1,l=function(){for(s=s||e.once,n=t=!0;o.length;a=-1)for(i=o.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=r.length,i=!1);e.memory||(i=!1),t=!1,s&&(r=i?[]:"")},c={add:function(){return r&&(i&&!t&&(a=r.length-1,o.push(i)),function t(i){E.each(i,(function(i,n){y(n)?e.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==_(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return E.each(arguments,(function(e,t){for(var i;(i=E.inArray(t,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(e){return e?E.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=i="",this},disabled:function(){return!r},lock:function(){return s=o=[],i||t||(r=i=""),this},locked:function(){return!!s},fireWith:function(e,i){return s||(i=[e,(i=i||[]).slice?i.slice():i],o.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},E.extend({Deferred:function(t){var i=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],s="pending",r={state:function(){return s},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(t){E.each(i,(function(i,n){var s=y(e[n[4]])&&e[n[4]];o[n[1]]((function(){var e=s&&s.apply(this,arguments);e&&y(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,s?[e]:arguments)}))})),e=null})).promise()},then:function(t,s,r){var o=0;function a(t,i,s,r){return function(){var l=this,c=arguments,h=function(){var e,n;if(!(t<o)){if((e=s.apply(l,c))===i.promise())throw new TypeError("Thenable self-resolution");y(n=e&&("object"==typeof e||"function"==typeof e)&&e.then)?r?n.call(e,a(o,i,F,r),a(o,i,j,r)):(o++,n.call(e,a(o,i,F,r),a(o,i,j,r),a(o,i,F,i.notifyWith))):(s!==F&&(l=void 0,c=[e]),(r||i.resolveWith)(l,c))}},d=r?h:function(){try{h()}catch(e){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(e,d.stackTrace),t+1>=o&&(s!==j&&(l=void 0,c=[e]),i.rejectWith(l,c))}};t?d():(E.Deferred.getStackHook&&(d.stackTrace=E.Deferred.getStackHook()),n.setTimeout(d))}}return E.Deferred((function(e){i[0][3].add(a(0,e,y(r)?r:F,e.notifyWith)),i[1][3].add(a(0,e,y(t)?t:F)),i[2][3].add(a(0,e,y(s)?s:j))})).promise()},promise:function(e){return null!=e?E.extend(e,r):r}},o={};return E.each(i,(function(e,t){var n=t[2],a=t[5];r[t[1]]=n.add,a&&n.add((function(){s=a}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),n.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=n.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),s=l.call(arguments),r=E.Deferred(),o=function(e){return function(i){n[e]=this,s[e]=arguments.length>1?l.call(arguments):i,--t||r.resolveWith(n,s)}};if(t<=1&&(H(e,r.done(o(i)).resolve,r.reject,!t),"pending"===r.state()||y(s[i]&&s[i].then)))return r.then();for(;i--;)H(s[i],o(i),r.reject);return r.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&U.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){n.setTimeout((function(){throw e}))};var q=E.Deferred();function W(){w.removeEventListener("DOMContentLoaded",W),n.removeEventListener("load",W),E.ready()}E.fn.ready=function(e){return q.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||q.resolveWith(w,[E]))}}),E.ready.then=q.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?n.setTimeout(E.ready):(w.addEventListener("DOMContentLoaded",W),n.addEventListener("load",W));var z=function(e,t,i,n,s,r,o){var a=0,l=e.length,c=null==i;if("object"===_(i))for(a in s=!0,i)z(e,t,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,y(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(E(e),i)})),t))for(;a<l;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return s?e:c?t.call(e):l?t(e[0],i):r},G=/^-ms-/,Y=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function K(e){return e.replace(G,"ms-").replace(Y,$)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=E.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[K(t)]=i;else for(n in t)s[K(n)]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(K):(t=K(t))in n?[t]:t.match(B)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||E.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var Q=new J,Z=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ie(t,i,n){var s;if(void 0===n&&1===t.nodeType)if(s="data-"+i.replace(te,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(s))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(t,i,n)}else n=void 0;return n}E.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,i){return Z.access(e,t,i)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,i){return Q.access(e,t,i)},_removeData:function(e,t){Q.remove(e,t)}}),E.fn.extend({data:function(e,t){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(s=Z.get(r),1===r.nodeType&&!Q.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=K(n.slice(5)),ie(r,n,s[n]));Q.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each((function(){Z.set(this,e)})):z(this,(function(t){var i;if(r&&void 0===t)return void 0!==(i=Z.get(r,e))||void 0!==(i=ie(r,e))?i:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),E.extend({queue:function(e,t,i){var n;if(e)return n=Q.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=Q.access(e,t,E.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=E.queue(e,t=t||"fx"),n=i.length,s=i.shift(),r=E._queueHooks(e,t);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete r.stop,s.call(e,(function(){E.dequeue(e,t)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Q.get(e,i)||Q.access(e,i,{empty:E.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",i])}))})}}),E.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?E.queue(this[0],e):void 0===t?this:this.each((function(){var i=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=E.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=Q.get(r[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,se=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],oe=w.documentElement,ae=function(e){return E.contains(e.ownerDocument,e)},le={composed:!0};oe.getRootNode&&(ae=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===E.css(e,"display")};function he(e,t,i,n){var s,r,o=20,a=n?function(){return n.cur()}:function(){return E.css(e,t,"")},l=a(),c=i&&i[3]||(E.cssNumber[t]?"":"px"),h=e.nodeType&&(E.cssNumber[t]||"px"!==c&&+l)&&se.exec(E.css(e,t));if(h&&h[3]!==c){for(c=c||h[3],h=+(l/=2)||1;o--;)E.style(e,t,h+c),(1-r)*(1-(r=a()/l||.5))<=0&&(o=0),h/=r;E.style(e,t,(h*=2)+c),i=i||[]}return i&&(h=+h||+l||0,s=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=s)),s}var de={};function ue(e){var t,i=e.ownerDocument,n=e.nodeName,s=de[n];return s||(t=i.body.appendChild(i.createElement(n)),s=E.css(t,"display"),t.parentNode.removeChild(t),"none"===s&&(s="block"),de[n]=s,s)}function pe(e,t){for(var i,n,s=[],r=0,o=e.length;r<o;r++)(n=e[r]).style&&(i=n.style.display,t?("none"===i&&(s[r]=Q.get(n,"display")||null,s[r]||(n.style.display="")),""===n.style.display&&ce(n)&&(s[r]=ue(n))):"none"!==i&&(s[r]="none",Q.set(n,"display",i)));for(r=0;r<o;r++)null!=s[r]&&(e[r].style.display=s[r]);return e}E.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?E(this).show():E(this).hide()}))}});var fe,me,ge=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;fe=w.createDocumentFragment().appendChild(w.createElement("div")),(me=w.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),fe.appendChild(me),v.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",v.option=!!fe.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function we(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?E.merge([e],i):i}function Se(e,t){for(var i=0,n=e.length;i<n;i++)Q.set(e[i],"globalEval",!t||Q.get(t[i],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,v.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var Ce=/<|&#?\w+;/;function _e(e,t,i,n,s){for(var r,o,a,l,c,h,d=t.createDocumentFragment(),u=[],p=0,f=e.length;p<f;p++)if((r=e[p])||0===r)if("object"===_(r))E.merge(u,r.nodeType?[r]:r);else if(Ce.test(r)){for(o=o||d.appendChild(t.createElement("div")),a=(ve.exec(r)||["",""])[1].toLowerCase(),o.innerHTML=(l=be[a]||be._default)[1]+E.htmlPrefilter(r)+l[2],h=l[0];h--;)o=o.lastChild;E.merge(u,o.childNodes),(o=d.firstChild).textContent=""}else u.push(t.createTextNode(r));for(d.textContent="",p=0;r=u[p++];)if(n&&E.inArray(r,n)>-1)s&&s.push(r);else if(c=ae(r),o=we(d.appendChild(r),"script"),c&&Se(o),i)for(h=0;r=o[h++];)ye.test(r.type||"")&&i.push(r);return d}var Ee=/^([^.]*)(?:\.(.+)|)/;function Te(){return!0}function xe(){return!1}function ke(e,t){return e===function(){try{return w.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,i,n,s,r){var o,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Ae(e,a,i,n,t[a],r);return e}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=xe;else if(!s)return e;return 1===r&&(o=s,(s=function(e){return E().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=E.guid++)),e.each((function(){E.event.add(this,t,s,n,i)}))}function Oe(e,t,i){i?(Q.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var n,s,r=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=l.call(arguments),Q.set(this,t,r),n=i(this,t),this[t](),r!==(s=Q.get(this,t))||n?Q.set(this,t,!1):s={},r!==s)return e.stopImmediatePropagation(),e.preventDefault(),s&&s.value}else r.length&&(Q.set(this,t,{value:E.event.trigger(E.extend(r[0],E.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&E.event.add(e,t,Te)}E.event={global:{},add:function(e,t,i,n,s){var r,o,a,l,c,h,d,u,p,f,m,g=Q.get(e);if(X(e))for(i.handler&&(i=(r=i).handler,s=r.selector),s&&E.find.matchesSelector(oe,s),i.guid||(i.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(B)||[""]).length;c--;)p=m=(a=Ee.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=E.event.special[p]||{},d=E.event.special[p=(s?d.delegateType:d.bindType)||p]||{},h=E.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&E.expr.match.needsContext.test(s),namespace:f.join(".")},r),(u=l[p])||((u=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,f,o)||e.addEventListener&&e.addEventListener(p,o)),d.add&&(d.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,h):u.push(h),E.event.global[p]=!0)},remove:function(e,t,i,n,s){var r,o,a,l,c,h,d,u,p,f,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(B)||[""]).length;c--;)if(p=m=(a=Ee.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=E.event.special[p]||{},u=l[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=u.length;r--;)h=u[r],!s&&m!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(u.splice(r,1),h.selector&&u.delegateCount--,d.remove&&d.remove.call(e,h));o&&!u.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||E.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)E.event.remove(e,p+t[c],i,n,!0);E.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,i,n,s,r,o,a=new Array(arguments.length),l=E.event.fix(e),c=(Q.get(this,"events")||Object.create(null))[l.type]||[],h=E.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,l)){for(o=E.event.handlers.call(this,l,c),t=0;(s=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=((E.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,s,r,o,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(r=[],o={},i=0;i<l;i++)void 0===o[s=(n=t[i]).selector+" "]&&(o[s]=n.needsContext?E(s,this).index(c)>-1:E.find(s,this,null,[c]).length),o[s]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&Oe(t,"click",Te),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&D(t,"input")&&Oe(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&D(t,"input")&&Q.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){E.event.special[e]={setup:function(){return Oe(this,e,ke),!1},trigger:function(){return Oe(this,e),!0},_default:function(){return!0},delegateType:t}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;return s&&(s===n||E.contains(n,s))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}})),E.fn.extend({on:function(e,t,i,n){return Ae(this,e,t,i,n)},one:function(e,t,i,n){return Ae(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,E(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=xe),this.each((function(){E.event.remove(this,e,i,t)}))}});var De=/<script|<style|<link/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ne(e,t){var i,n,s,r,o,a;if(1===t.nodeType){if(Q.hasData(e)&&(a=Q.get(e).events))for(s in Q.remove(t,"handle events"),a)for(i=0,n=a[s].length;i<n;i++)E.event.add(t,s,a[s][i]);Z.hasData(e)&&(r=Z.access(e),o=E.extend({},r),Z.set(t,o))}}function Ve(e,t){var i=t.nodeName.toLowerCase();"input"===i&&ge.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Be(e,t,i,n){t=c(t);var s,r,o,a,l,h,d=0,u=e.length,p=u-1,f=t[0],m=y(f);if(m||u>1&&"string"==typeof f&&!v.checkClone&&Ie.test(f))return e.each((function(s){var r=e.eq(s);m&&(t[0]=f.call(this,s,r.html())),Be(r,t,i,n)}));if(u&&(r=(s=_e(t,e[0].ownerDocument,!1,e,n)).firstChild,1===s.childNodes.length&&(s=r),r||n)){for(a=(o=E.map(we(s,"script"),Me)).length;d<u;d++)l=s,d!==p&&(l=E.clone(l,!0,!0),a&&E.merge(o,we(l,"script"))),i.call(e[d],l,d);if(a)for(h=o[o.length-1].ownerDocument,E.map(o,Le),d=0;d<a;d++)ye.test((l=o[d]).type||"")&&!Q.access(l,"globalEval")&&E.contains(h,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},h):C(l.textContent.replace(Re,""),l,h))}return e}function Fe(e,t,i){for(var n,s=t?E.filter(t,e):e,r=0;null!=(n=s[r]);r++)i||1!==n.nodeType||E.cleanData(we(n)),n.parentNode&&(i&&ae(n)&&Se(we(n,"script")),n.parentNode.removeChild(n));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,s,r,o,a=e.cloneNode(!0),l=ae(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(o=we(a),n=0,s=(r=we(e)).length;n<s;n++)Ve(r[n],o[n]);if(t)if(i)for(r=r||we(e),o=o||we(a),n=0,s=r.length;n<s;n++)Ne(r[n],o[n]);else Ne(e,a);return(o=we(a,"script")).length>0&&Se(o,!l&&we(e,"script")),a},cleanData:function(e){for(var t,i,n,s=E.event.special,r=0;void 0!==(i=e[r]);r++)if(X(i)){if(t=i[Q.expando]){if(t.events)for(n in t.events)s[n]?E.event.remove(i,n):E.removeEvent(i,n,t.handle);i[Q.expando]=void 0}i[Z.expando]&&(i[Z.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return z(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Be(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)}))},prepend:function(){return Be(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(we(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(t){return z(this,(function(t){var i=this[0]||{},n=0,s=this.length;if(void 0===t&&1===i.nodeType)return i.innerHTML;if("string"==typeof t&&!De.test(t)&&!be[(ve.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<s;n++)1===(i=this[n]||{}).nodeType&&(E.cleanData(we(i,!1)),i.innerHTML=t);i=0}catch(e){}}i&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,(function(t){var i=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(we(this)),i&&i.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var i,n=[],s=E(e),r=s.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),E(s[o])[t](i),h.apply(n,i.get());return this.pushStack(n)}}));var je=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Ue=function(e,t,i){var n,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];for(s in n=i.call(e),t)e.style[s]=r[s];return n},qe=new RegExp(re.join("|"),"i");function We(e,t,i){var n,s,r,o,a=e.style;return(i=i||He(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||ae(e)||(o=E.style(e,t)),!v.pixelBoxStyles()&&je.test(o)&&qe.test(t)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(h){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(c).appendChild(h);var e=n.getComputedStyle(h);i="1%"!==e.top,l=12===t(e.marginLeft),h.style.right="60%",o=36===t(e.right),s=36===t(e.width),h.style.position="absolute",r=12===t(h.offsetWidth/3),oe.removeChild(c),h=null}}function t(e){return Math.round(parseFloat(e))}var i,s,r,o,a,l,c=w.createElement("div"),h=w.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===h.style.backgroundClip,E.extend(v,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,i,s;return null==a&&(e=w.createElement("table"),t=w.createElement("tr"),i=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",oe.appendChild(e).appendChild(t).appendChild(i),s=n.getComputedStyle(t),a=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===t.offsetHeight,oe.removeChild(e)),a}}))}();var Ge=["Webkit","Moz","ms"],Ye=w.createElement("div").style,$e={};function Ke(e){return E.cssProps[e]||$e[e]||(e in Ye?e:$e[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Ge.length;i--;)if((e=Ge[i]+t)in Ye)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function et(e,t,i){var n=se.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function tt(e,t,i,n,s,r){var o="width"===t?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(l+=E.css(e,i+re[o],!0,s)),n?("content"===i&&(l-=E.css(e,"padding"+re[o],!0,s)),"margin"!==i&&(l-=E.css(e,"border"+re[o]+"Width",!0,s))):(l+=E.css(e,"padding"+re[o],!0,s),"padding"!==i?l+=E.css(e,"border"+re[o]+"Width",!0,s):a+=E.css(e,"border"+re[o]+"Width",!0,s));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-a-.5))||0),l}function it(e,t,i){var n=He(e),s=(!v.boxSizingReliable()||i)&&"border-box"===E.css(e,"boxSizing",!1,n),r=s,o=We(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(o)){if(!i)return o;o="auto"}return(!v.boxSizingReliable()&&s||!v.reliableTrDimensions()&&D(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(e,"display",!1,n))&&e.getClientRects().length&&(s="border-box"===E.css(e,"boxSizing",!1,n),(r=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+tt(e,t,i||(s?"border":"content"),r,n,o)+"px"}function nt(e,t,i,n,s){return new nt.prototype.init(e,t,i,n,s)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=We(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,o,a=K(t),l=Je.test(t),c=e.style;if(l||(t=Ke(a)),o=E.cssHooks[t]||E.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(e,!1,n))?s:c[t];"string"==(r=typeof i)&&(s=se.exec(i))&&s[1]&&(i=he(e,t,s),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=s&&s[3]||(E.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var s,r,o,a=K(t);return Je.test(t)||(t=Ke(a)),(o=E.cssHooks[t]||E.cssHooks[a])&&"get"in o&&(s=o.get(e,!0,i)),void 0===s&&(s=We(e,t,n)),"normal"===s&&t in Ze&&(s=Ze[t]),""===i||i?(r=parseFloat(s),!0===i||isFinite(r)?r||0:s):s}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,i,n){if(i)return!Xe.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?it(e,t,n):Ue(e,Qe,(function(){return it(e,t,n)}))},set:function(e,i,n){var s,r=He(e),o=!v.scrollboxSize()&&"absolute"===r.position,a=(o||n)&&"border-box"===E.css(e,"boxSizing",!1,r),l=n?tt(e,t,n,a,r):0;return a&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-tt(e,t,"border",!1,r)-.5)),l&&(s=se.exec(i))&&"px"!==(s[3]||"px")&&(e.style[t]=i,i=E.css(e,t)),et(0,i,l)}}})),E.cssHooks.marginLeft=ze(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];n<4;n++)s[e+re[n]+t]=r[n]||r[n-2]||r[0];return s}},"margin"!==e&&(E.cssHooks[e+t].set=et)})),E.fn.extend({css:function(e,t){return z(this,(function(e,t,i){var n,s,r={},o=0;if(Array.isArray(t)){for(n=He(e),s=t.length;o<s;o++)r[t[o]]=E.css(e,t[o],!1,n);return r}return void 0!==i?E.style(e,t,i):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=nt,(nt.prototype={constructor:nt,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(E.cssNumber[i]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,i=nt.propHooks[this.prop];return this.pos=t=this.options.duration?E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=nt.prototype.init,E.fx.step={};var st,rt,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function lt(){rt&&(!1===w.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(lt):n.setTimeout(lt,E.fx.interval),E.fx.tick())}function ct(){return n.setTimeout((function(){st=void 0})),st=Date.now()}function ht(e,t){var i,n=0,s={height:e};for(t=t?1:0;n<4;n+=2-t)s["margin"+(i=re[n])]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function dt(e,t,i){for(var n,s=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,t,e))return n}function ut(e,t,i){var n,s,r=0,o=ut.prefilters.length,a=E.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var t=st||ct(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),r=0,o=c.tweens.length;r<o;r++)c.tweens[r].run(n);return a.notifyWith(e,[c,n,i]),n<1&&o?i:(o||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},i),originalProperties:t,originalOptions:i,startTime:st||ct(),duration:i.duration,tweens:[],createTween:function(t,i){var n=E.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)c.tweens[i].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),h=c.props;for(function(e,t){var i,n,s,r,o;for(i in e)if(s=t[n=K(i)],r=e[i],Array.isArray(r)&&(s=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(o=E.cssHooks[n])&&"expand"in o)for(i in r=o.expand(r),delete e[n],r)i in e||(e[i]=r[i],t[i]=s);else t[n]=s}(h,c.opts.specialEasing);r<o;r++)if(n=ut.prefilters[r].call(c,e,h,c.opts))return y(n.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return E.map(h,dt,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(ut,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return he(i.elem,e,se.exec(t),i),i}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(B);for(var i,n=0,s=e.length;n<s;n++)(ut.tweeners[i=e[n]]=ut.tweeners[i]||[]).unshift(t)},prefilters:[function(e,t,i){var n,s,r,o,a,l,c,h,d="width"in t||"height"in t,u=this,p={},f=e.style,m=e.nodeType&&ce(e),g=Q.get(e,"fxshow");for(n in i.queue||(null==(o=E._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,u.always((function(){u.always((function(){o.unqueued--,E.queue(e,"fx").length||o.empty.fire()}))}))),t)if(ot.test(s=t[n])){if(delete t[n],r=r||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||E.style(e,n)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(n in d&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(h=E.css(e,"display"))&&(c?h=c:(pe([e],!0),c=e.style.display||c,h=E.css(e,"display"),pe([e]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===E.css(e,"float")&&(l||(u.done((function(){f.display=c})),null==c&&(c="none"===(h=f.display)?"":h)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",u.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),r&&(g.hidden=!m),m&&pe([e],!0),u.done((function(){for(n in m||pe([e]),Q.remove(e,"fxshow"),p)E.style(e,n,p[n])}))),l=dt(m?g[n]:0,n,u),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),E.speed=function(e,t,i){var n=e&&"object"==typeof e?E.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return E.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in E.fx.speeds?E.fx.speeds[n.duration]:E.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&E.dequeue(this,n.queue)},n},E.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=E.isEmptyObject(e),r=E.speed(t,i,n),o=function(){var t=ut(this,E.extend({},e),r);(s||Q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,s=null!=e&&e+"queueHooks",r=E.timers,o=Q.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&at.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(i),t=!1,r.splice(s,1));!t&&i||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=Q.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=E.timers,o=n?n.length:0;for(i.finish=!0,E.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var i=E.fn[t];E.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ht(t,!0),e,n,s)}})),E.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),E.timers=[],E.fx.tick=function(){var e,t=0,i=E.timers;for(st=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||E.fx.stop(),st=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){rt||(rt=!0,lt())},E.fx.stop=function(){rt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,this.queue(t=t||"fx",(function(t,i){var s=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(s)}}))},function(){var e=w.createElement("input"),t=w.createElement("select").appendChild(w.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=w.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var pt,ft=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return z(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?E.prop(e,t,i):(1===r&&E.isXMLDoc(e)||(s=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?pt:void 0)),void 0!==i?null===i?void E.removeAttr(e,t):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=E.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&D(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,s=t&&t.match(B);if(s&&1===e.nodeType)for(;i=s[n++];)e.removeAttribute(i)}}),pt={set:function(e,t,i){return!1===t?E.removeAttr(e,i):e.setAttribute(i,i),i}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=ft[t]||E.find.attr;ft[t]=function(e,t,n){var s,r,o=t.toLowerCase();return n||(r=ft[o],ft[o]=s,s=null!=i(e,t,n)?o:null,ft[o]=r),s}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(B)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}E.fn.extend({prop:function(e,t){return z(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&E.isXMLDoc(e)||(s=E.propHooks[t=E.propFix[t]||t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(e){return null},set:function(e){}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,i,n,s,r,o,a,l=0;if(y(e))return this.each((function(t){E(this).addClass(e.call(this,t,yt(this)))}));if((t=bt(e)).length)for(;i=this[l++];)if(s=yt(i),n=1===i.nodeType&&" "+vt(s)+" "){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s!==(a=vt(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,s,r,o,a,l=0;if(y(e))return this.each((function(t){E(this).removeClass(e.call(this,t,yt(this)))}));if(!arguments.length)return this.attr("class","");if((t=bt(e)).length)for(;i=this[l++];)if(s=yt(i),n=1===i.nodeType&&" "+vt(s)+" "){for(o=0;r=t[o++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");s!==(a=vt(n))&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(i){E(this).toggleClass(e.call(this,i,yt(this),t),t)})):this.each((function(){var t,s,r,o;if(n)for(s=0,r=E(this),o=bt(e);t=o[s++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||((t=yt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+vt(yt(i))+" ").indexOf(t)>-1)return!0;return!1}});var wt=/\r/g;E.fn.extend({val:function(e){var t,i,n,s=this[0];return arguments.length?(n=y(e),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?e.call(this,i,E(this).val()):e)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=E.map(s,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))}))):s?(t=E.valHooks[s.type]||E.valHooks[s.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(wt,""):null==i?"":i:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:vt(E.text(e))}},select:{get:function(e){var t,i,n,s=e.options,r=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?r+1:s.length;for(n=r<0?l:o?r:0;n<l;n++)if(((i=s[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!D(i.parentNode,"optgroup"))){if(t=E(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,s=e.options,r=E.makeArray(t),o=s.length;o--;)((n=s[o]).selected=E.inArray(E.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},v.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.focusin="onfocusin"in n;var St=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,i,s){var r,o,a,l,c,h,d,u,p=[i||w],m=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(o=u=a=i=i||w,3!==i.nodeType&&8!==i.nodeType&&!St.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[E.expando]?e:new E.Event(m,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:E.makeArray(t,[e]),d=E.event.special[m]||{},s||!d.trigger||!1!==d.trigger.apply(i,t))){if(!s&&!d.noBubble&&!b(i)){for(St.test((l=d.delegateType||m)+m)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(i.ownerDocument||w)&&p.push(a.defaultView||a.parentWindow||n)}for(r=0;(o=p[r++])&&!e.isPropagationStopped();)u=o,e.type=r>1?l:d.bindType||m,(h=(Q.get(o,"events")||Object.create(null))[e.type]&&Q.get(o,"handle"))&&h.apply(o,t),(h=c&&o[c])&&h.apply&&X(o)&&(e.result=h.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!X(i)||c&&y(i[m])&&!b(i)&&((a=i[c])&&(i[c]=null),E.event.triggered=m,e.isPropagationStopped()&&u.addEventListener(m,Ct),i[m](),e.isPropagationStopped()&&u.removeEventListener(m,Ct),E.event.triggered=void 0,a&&(i[c]=a)),e.result}},simulate:function(e,t,i){var n=E.extend(new E.Event,i,{type:e,isSimulated:!0});E.event.trigger(n,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return E.event.trigger(e,t,i,!0)}}),v.focusin||E.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,s=Q.access(n,t);s||n.addEventListener(e,i,!0),Q.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,s=Q.access(n,t)-1;s?Q.access(n,t,s):(n.removeEventListener(e,i,!0),Q.remove(n,t))}}}));var _t=n.location,Et={guid:Date.now()},Tt=/\?/;E.parseXML=function(t){var i,s;if(!t||"string"!=typeof t)return null;try{i=(new n.DOMParser).parseFromString(t,"text/xml")}catch(e){}return s=i&&i.getElementsByTagName("parsererror")[0],i&&!s||E.error("Invalid XML: "+(s?E.map(s.childNodes,(function(e){return e.textContent})).join("\n"):t)),i};var xt=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,i,n){var s;if(Array.isArray(t))E.each(t,(function(t,s){i||xt.test(e)?n(e,s):Dt(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,i,n)}));else if(i||"object"!==_(t))n(e,t);else for(s in t)Dt(e+"["+s+"]",t[s],i,n)}E.param=function(e,t){var i,n=[],s=function(e,t){var i=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){s(this.name,this.value)}));else for(i in e)Dt(i,e[i],t,s);return n.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Ot.test(this.nodeName)&&!At.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var i=E(this).val();return null==i?null:Array.isArray(i)?E.map(i,(function(e){return{name:t.name,value:e.replace(kt,"\r\n")}})):{name:t.name,value:i.replace(kt,"\r\n")}})).get()}});var It=/%20/g,Rt=/#.*$/,Pt=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Nt=/^\/\//,Vt={},Bt={},Ft="*/".concat("*"),jt=w.createElement("a");function Ht(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,r=t.toLowerCase().match(B)||[];if(y(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Ut(e,t,i,n){var s={},r=e===Bt;function o(a){var l;return s[a]=!0,E.each(e[a]||[],(function(e,a){var c=a(t,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),l}return o(t.dataTypes[0])||!s["*"]&&o("*")}function qt(e,t){var i,n,s=E.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((s[i]?e:n||(n={}))[i]=t[i]);return n&&E.extend(!0,e,n),e}jt.href=_t.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,E.ajaxSettings),t):qt(E.ajaxSettings,e)},ajaxPrefilter:Ht(Vt),ajaxTransport:Ht(Bt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0);var s,r,o,a,l,c,h,d,u,p,f=E.ajaxSetup({},i=i||{}),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?E(m):E.event,v=E.Deferred(),y=E.Callbacks("once memory"),b=f.statusCode||{},S={},C={},_="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!a)for(a={};t=Mt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?o:null},setRequestHeader:function(e,t){return null==h&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,S[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||_;return s&&s.abort(t),x(0,t),this}};if(v.promise(T),f.url=((t||f.url||_t.href)+"").replace(Nt,_t.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(B)||[""],null==f.crossDomain){c=w.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=jt.protocol+"//"+jt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=E.param(f.data,f.traditional)),Ut(Vt,f,i,T),h)return T;for(u in(d=E.event&&f.global)&&0==E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Lt.test(f.type),r=f.url.replace(Rt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(It,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Tt.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Pt,"$1"),p=(Tt.test(r)?"&":"?")+"_="+Et.guid+++p),f.url=r+p),f.ifModified&&(E.lastModified[r]&&T.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&T.setRequestHeader("If-None-Match",E.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ft+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(!1===f.beforeSend.call(m,T,f)||h))return T.abort();if(_="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),s=Ut(Bt,f,i,T)){if(T.readyState=1,d&&g.trigger("ajaxSend",[T,f]),h)return T;f.async&&f.timeout>0&&(l=n.setTimeout((function(){T.abort("timeout")}),f.timeout));try{h=!1,s.send(S,x)}catch(e){if(h)throw e;x(-1,e)}}else x(-1,"No Transport");function x(t,i,a,c){var u,p,w,S,C,_=i;h||(h=!0,l&&n.clearTimeout(l),s=void 0,o=c||"",T.readyState=t>0?4:0,u=t>=200&&t<300||304===t,a&&(S=function(e,t,i){for(var n,s,r,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),i[r]}(f,T,a)),!u&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),S=function(t,i,n,s){var r,o,a,l,c,h={},d=t.dataTypes.slice();if(d[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=d.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=i),!c&&s&&t.dataFilter&&(i=t.dataFilter(i,t.dataType)),c=o,o=d.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=h[c+" "+o]||h["* "+o]))for(r in h)if((l=r.split(" "))[1]===o&&(a=h[c+" "+l[0]]||h["* "+l[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=l[0],d.unshift(l[1]));break}if(!0!==a)if(a&&t.throws)i=a(i);else try{i=a(i)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:i}}(f,S,T,u),u?(f.ifModified&&((C=T.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=C),(C=T.getResponseHeader("etag"))&&(E.etag[r]=C)),204===t||"HEAD"===f.type?_="nocontent":304===t?_="notmodified":(_=S.state,p=S.data,u=!(w=S.error))):(w=_,!t&&_||(_="error",t<0&&(t=0))),T.status=t,T.statusText=(i||_)+"",u?v.resolveWith(m,[p,_,T]):v.rejectWith(m,[T,_,w]),T.statusCode(b),b=void 0,d&&g.trigger(u?"ajaxSuccess":"ajaxError",[T,f,u?p:w]),y.fireWith(m,[T,_]),d&&(g.trigger("ajaxComplete",[T,f]),--E.active||E.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,i){return E.get(e,t,i,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,i,n,s){return y(i)&&(s=s||n,n=i,i=void 0),E.ajax(E.extend({url:e,type:t,dataType:s,data:i,success:n},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,i){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,i)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(i){E(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},zt=E.ajaxSettings.xhr();v.cors=!!zt&&"withCredentials"in zt,v.ajax=zt=!!zt,E.ajaxTransport((function(t){var i,s;if(v.cors||zt&&!t.crossDomain)return{send:function(r,o){var a,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)l[a]=t.xhrFields[a];for(a in t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)l.setRequestHeader(a,r[a]);i=function(e){return function(){i&&(i=s=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?o(0,"error"):o(l.status,l.statusText):o(Wt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=i(),s=l.onerror=l.ontimeout=i("error"),void 0!==l.onabort?l.onabort=s:l.onreadystatechange=function(){4===l.readyState&&n.setTimeout((function(){i&&s()}))},i=i("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,s){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Gt,Yt=[],$t=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||E.expando+"_"+Et.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,i){var s,r,o,a=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace($t,"$1"+s):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||E.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=n[s],n[s]=function(){o=arguments},i.always((function(){void 0===r?E(n).removeProp(s):n[s]=r,e[s]&&(e.jsonpCallback=t.jsonpCallback,Yt.push(s)),o&&y(r)&&r(o[0]),o=r=void 0})),"script"})),v.createHTMLDocument=((Gt=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Gt.childNodes.length),E.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(v.createHTMLDocument?((n=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(n)):t=w),r=!i&&[],(s=I.exec(e))?[t.createElement(s[1])]:(s=_e([e],t,r),r&&r.length&&E(r).remove(),E.merge([],s.childNodes)));var n,s,r},E.fn.load=function(e,t,i){var n,s,r,o=this,a=e.indexOf(" ");return a>-1&&(n=vt(e.slice(a)),e=e.slice(0,a)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&E.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done((function(e){r=arguments,o.html(n?E("<div>").append(E.parseHTML(e)).find(n):e)})).always(i&&function(e,t){o.each((function(){i.apply(this,r||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,i){var n,s,r,o,a,l,c=E.css(e,"position"),h=E(e),d={};"static"===c&&(e.style.position="relative"),a=h.offset(),r=E.css(e,"top"),l=E.css(e,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(o=(n=h.position()).top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),y(t)&&(t=t.call(e,i,E.extend({},a))),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+s),"using"in t?t.using.call(e,d):h.css(d)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?{top:(t=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:t.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],s={top:0,left:0};if("fixed"===E.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((s=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),s.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-s.top-E.css(n,"marginTop",!0),left:t.left-s.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||oe}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;E.fn[e]=function(n){return z(this,(function(e,n,s){var r;if(b(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===s)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:s,i?s:r.pageYOffset):e[n]=s}),e,n,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=ze(v.pixelPosition,(function(e,i){if(i)return i=We(e,t),je.test(i)?E(e).position()[t]+"px":i}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){E.fn[n]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(!0===s||!0===r?"margin":"border");return z(this,(function(t,i,s){var r;return b(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===s?E.css(t,i,a):E.style(t,i,s,a)}),t,o?s:void 0,o)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var Kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var i,n,s;if("string"==typeof t&&(i=e[t],t=e,e=i),y(e))return n=l.call(arguments,2),(s=function(){return e.apply(t||this,n.concat(l.call(arguments)))}).guid=e.guid=e.guid||E.guid++,s},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=D,E.isFunction=y,E.isWindow=b,E.camelCase=K,E.type=_,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},void 0===(s=(function(){return E}).apply(i,[]))||(t.exports=s);var Xt=n.jQuery,Jt=n.$;return E.noConflict=function(e){return n.$===E&&(n.$=Jt),e&&n.jQuery===E&&(n.jQuery=Xt),E},void 0===r&&(n.jQuery=n.$=E),E}))},EWj0:function(e,t,i){e.exports=i("ugx8").version},FUii:function(e,t,i){"use strict";var n=i("P7XM"),s=i("raCH").EventEmitter;function r(e,t){s.call(this);var i=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){i._chunkHandler(e,t),i.xo=null,i.emit("close",null,200===e?"network":"permanent"),i._cleanup()}))}n(r,s),r.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var i=-1;;this.bufferPosition+=i+1){var n=t.slice(this.bufferPosition);if(-1===(i=n.indexOf("\n")))break;var s=n.slice(0,i);s&&this.emit("message",s)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=r},GBY4:function(e,t,i){"use strict";var n=i("RA0T"),s=i("nFlj"),r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(e){return(e||"").toString().replace(a,"")}var c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function d(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var i,n={},s=typeof(e=e||t.location||{});if("blob:"===e.protocol)n=new p(unescape(e.pathname),{});else if("string"===s)for(i in n=new p(e,{}),h)delete n[i];else if("object"===s){for(i in e)i in h||(n[i]=e[i]);void 0===n.slashes&&(n.slashes=r.test(e.href))}return n}function u(e){e=l(e);var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,i){if(e=l(e),!(this instanceof p))return new p(e,t,i);var r,o,a,h,f,m,g=c.slice(),v=typeof t,y=this,b=0;for("object"!==v&&"string"!==v&&(i=t,t=null),i&&"function"!=typeof i&&(i=s.parse),t=d(t),r=!(o=u(e||"")).protocol&&!o.slashes,y.slashes=o.slashes||r&&t.slashes,y.protocol=o.protocol||t.protocol||"",e=o.rest,o.slashes||(g[3]=[/(.*)/,"pathname"]);b<g.length;b++)"function"!=typeof(h=g[b])?(m=h[1],(a=h[0])!=a?y[m]=e:"string"==typeof a?~(f=e.indexOf(a))&&("number"==typeof h[2]?(y[m]=e.slice(0,f),e=e.slice(f+h[2])):(y[m]=e.slice(f),e=e.slice(0,f))):(f=a.exec(e))&&(y[m]=f[1],e=e.slice(0,f.index)),y[m]=y[m]||r&&h[3]&&t[m]||"",h[4]&&(y[m]=y[m].toLowerCase())):e=h(e);i&&(y.query=i(y.query)),r&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=i.length,s=i[n-1],r=!1,o=0;n--;)"."===i[n]?i.splice(n,1):".."===i[n]?(i.splice(n,1),o++):o&&(0===n&&(r=!0),i.splice(n,1),o--);return r&&i.unshift(""),"."!==s&&".."!==s||i.push(""),i.join("/")}(y.pathname,t.pathname)),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(h=y.auth.split(":"),y.username=h[0]||"",y.password=h[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}p.prototype={set:function(e,t,i){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||s.parse)(t)),r[e]=t;break;case"port":r[e]=t,n(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!i;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;default:r[e]=t}for(var a=0;a<c.length;a++){var l=c[a];l[4]&&(r[l[1]]=r[l[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=s.stringify);var t,i=this,n=i.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var r=n+(i.slashes?"//":"");return i.username&&(r+=i.username,i.password&&(r+=":"+i.password),r+="@"),r+=i.host+i.pathname,(t="object"==typeof i.query?e(i.query):i.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),i.hash&&(r+=i.hash),r}},p.extractProtocol=u,p.location=d,p.trimLeft=l,p.qs=s,e.exports=p},J5zx:function(t,i,n){(function(t){var s,r;void 0===(r="function"==typeof(s=function(){"use strict";var i={},s=null;function r(i){if(t&&t.exports)try{return n(!function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()).randomBytes(i)}catch(e){}try{var r;return(self.crypto||self.msCrypto).getRandomValues(r=new Uint32Array(i)),Array.prototype.slice.call(r)}catch(e){}if(!s)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return s(i)}try{r(1)}catch(e){}function o(e,t){for(var i=0,n=0,s=0,r=e.length;s<r;++s)e.charCodeAt(s)===t.charCodeAt(s)?++i:++n;return!(i<0)&&0===n}s=null,i.setRandomFallback=function(e){s=e},i.genSaltSync=function(e,t){if("number"!=typeof(e=e||m))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var i=[];return i.push("$2a$"),e<10&&i.push("0"),i.push(e.toString()),i.push("$"),i.push(d(r(f),f)),i.join("")},i.genSalt=function(e,t,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=void 0),void 0===e)e=m;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function s(t){a((function(){try{t(null,i.genSaltSync(e))}catch(n){t(n)}}))}if(!n)return new Promise((function(e,t){s((function(i,n){i?t(i):e(n)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);s(n)},i.hashSync=function(e,t){if(void 0===t&&(t=m),"number"==typeof t&&(t=i.genSaltSync(t)),"string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return _(e,t)},i.hash=function(e,t,n,s){function r(n){"string"==typeof e&&"number"==typeof t?i.genSalt(t,(function(t,i){_(e,i,n,s)})):"string"==typeof e&&"string"==typeof t?_(e,t,n,s):a(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){r((function(i,n){i?t(i):e(n)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);r(n)},i.compareSync=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&o(i.hashSync(e,t.substr(0,t.length-31)),t)},i.compare=function(e,t,n,s){function r(n){"string"==typeof e&&"string"==typeof t?60===t.length?i.hash(e,t.substr(0,29),(function(e,i){e?n(e):n(null,o(i,t))}),s):a(n.bind(this,null,!1)):a(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){r((function(i,n){i?t(i):e(n)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);r(n)},i.getRounds=function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},i.getSalt=function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)};var a="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout,l="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],h=String.fromCharCode;function d(e,t){var i,n,s=0,r=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;s<t;){if(i=255&e[s++],r.push(l[i>>2&63]),i=(3&i)<<4,s>=t){r.push(l[63&i]);break}if(n=255&e[s++],r.push(l[63&(i|=n>>4&15)]),i=(15&n)<<2,s>=t){r.push(l[63&i]);break}n=255&e[s++],r.push(l[63&(i|=n>>6&3)]),r.push(l[63&n])}return r.join("")}function u(e,t){var i,n,s,r,o,a=0,l=e.length,d=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;a<l-1&&d<t&&(i=(o=e.charCodeAt(a++))<c.length?c[o]:-1,n=(o=e.charCodeAt(a++))<c.length?c[o]:-1,-1!=i&&-1!=n)&&(r=i<<2>>>0,u.push(h(r|=(48&n)>>4)),!(++d>=t||a>=l))&&-1!=(s=(o=e.charCodeAt(a++))<c.length?c[o]:-1)&&(r=(15&n)<<4>>>0,u.push(h(r|=(60&s)>>2)),!(++d>=t||a>=l));)o=e.charCodeAt(a++),r=(3&s)<<6>>>0,u.push(h(r|=o<c.length?c[o]:-1)),++d;var p=[];for(a=0;a<d;a++)p.push(u[a].charCodeAt(0));return p}var p=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<128?t(127&i):i<2048?(t(i>>6&31|192),t(63&i|128)):i<65536?(t(i>>12&15|224),t(i>>6&63|128),t(63&i|128)):(t(i>>18&7|240),t(i>>12&63|128),t(i>>6&63|128),t(63&i|128)),i=null},decodeUTF8:function(e,t){for(var i,n,s,r,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(i=e());)if(0==(128&i))t(i);else if(192==(224&i))null===(n=e())&&o([i,n]),t((31&i)<<6|63&n);else if(224==(240&i))(null===(n=e())||null===(s=e()))&&o([i,n,s]),t((15&i)<<12|(63&n)<<6|63&s);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=e())||null===(s=e())||null===(r=e()))&&o([i,n,s,r]),t((7&i)<<18|(63&n)<<12|(63&s)<<6|63&r)}},UTF16toUTF8:function(e,t){for(var i,n=null;null!==(i=null!==n?n:e());)i>=55296&&i<=57343&&null!==(n=e())&&n>=56320&&n<=57343?(t(1024*(i-55296)+n-56320+65536),n=null):t(i);null!==n&&t(n)},UTF8toUTF16:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<=65535?t(i):(t(55296+((i-=65536)>>10)),t(i%1024+56320)),i=null},encodeUTF16toUTF8:function(t,i){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,i)}))},decodeUTF8toUTF16:function(t,i){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,i)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(t){for(var i,n=0;null!==(i=t());)n+=e.calculateCodePoint(i);return n},calculateUTF16asUTF8:function(t){var i=0,n=0;return e.UTF16toUTF8(t,(function(t){++i,n+=e.calculateCodePoint(t)})),[i,n]}};return e}();Date.now=Date.now||function(){return+new Date};var f=16,m=10,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],v=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],y=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function b(e,t,i,n){var s,r=e[t],o=e[t+1];return s=n[(r^=i[0])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[1])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[2])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[3])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[4])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[5])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[6])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[7])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[8])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[9])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[10])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[11])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[12])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[13])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],s=n[(r^=(s+=n[768|255&o])^i[14])>>>24],s+=n[256|r>>16&255],s^=n[512|r>>8&255],s=n[(o^=(s+=n[768|255&r])^i[15])>>>24],s+=n[256|o>>16&255],s^=n[512|o>>8&255],r^=(s+=n[768|255&o])^i[16],e[t]=o^i[17],e[t+1]=r,e}function w(e,t){for(var i=0,n=0;i<4;++i)n=n<<8|255&e[t],t=(t+1)%e.length;return{key:n,offp:t}}function S(e,t,i){for(var n,s=0,r=[0,0],o=t.length,a=i.length,l=0;l<o;l++)s=(n=w(e,s)).offp,t[l]=t[l]^n.key;for(l=0;l<o;l+=2)r=b(r,0,t,i),t[l]=r[0],t[l+1]=r[1];for(l=0;l<a;l+=2)r=b(r,0,t,i),i[l]=r[0],i[l+1]=r[1]}function C(e,t,i,n,s){var r,o=y.slice(),l=o.length;if(i<4||i>31){if(r=Error("Illegal number of rounds (4-31): "+i),n)return void a(n.bind(this,r));throw r}if(t.length!==f){if(r=Error("Illegal salt length: "+t.length+" != "+f),n)return void a(n.bind(this,r));throw r}i=1<<i>>>0;var c,h,d,u=0;function p(){if(s&&s(u/i),!(u<i)){for(u=0;u<64;u++)for(d=0;d<l>>1;d++)b(o,d<<1,c,h);var r=[];for(u=0;u<l;u++)r.push((o[u]>>24&255)>>>0),r.push((o[u]>>16&255)>>>0),r.push((o[u]>>8&255)>>>0),r.push((255&o[u])>>>0);return n?void n(null,r):r}for(var f=Date.now();u<i&&(u+=1,S(e,c,h),S(t,c,h),!(Date.now()-f>100)););n&&a(p)}if(Int32Array?(c=new Int32Array(g),h=new Int32Array(v)):(c=g.slice(),h=v.slice()),function(e,t,i,n){for(var s,r=0,o=[0,0],a=i.length,l=n.length,c=0;c<a;c++)r=(s=w(t,r)).offp,i[c]=i[c]^s.key;for(r=0,c=0;c<a;c+=2)r=(s=w(e,r)).offp,o[0]^=s.key,r=(s=w(e,r)).offp,o[1]^=s.key,o=b(o,0,i,n),i[c]=o[0],i[c+1]=o[1];for(c=0;c<l;c+=2)r=(s=w(e,r)).offp,o[0]^=s.key,r=(s=w(e,r)).offp,o[1]^=s.key,o=b(o,0,i,n),n[c]=o[0],n[c+1]=o[1]}(t,e,c,h),void 0!==n)p();else for(var m;;)if(void 0!==(m=p()))return m||[]}function _(e,t,i,n){var s,r,o;if("string"!=typeof e||"string"!=typeof t){if(s=Error("Invalid string / salt: Not a string"),i)return void a(i.bind(this,s));throw s}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(s=Error("Invalid salt version: "+t.substring(0,2)),i)return void a(i.bind(this,s));throw s}if("$"===t.charAt(2))r=String.fromCharCode(0),o=3;else{if("a"!==(r=t.charAt(2))&&"b"!==r&&"y"!==r||"$"!==t.charAt(3)){if(s=Error("Invalid salt revision: "+t.substring(2,4)),i)return void a(i.bind(this,s));throw s}o=4}if(t.charAt(o+2)>"$"){if(s=Error("Missing salt rounds"),i)return void a(i.bind(this,s));throw s}var l,c,h,m=10*parseInt(t.substring(o,o+1),10)+parseInt(t.substring(o+1,o+2),10),g=t.substring(o+3,o+25),v=(l=e+=r>="a"?"\0":"",c=[],h=0,p.encodeUTF16toUTF8((function(){return h>=l.length?null:l.charCodeAt(h++)}),(function(e){c.push(e)})),c),b=u(g,f);function w(e){var t=[];return t.push("$2"),r>="a"&&t.push(r),t.push("$"),m<10&&t.push("0"),t.push(m.toString()),t.push("$"),t.push(d(b,b.length)),t.push(d(e,4*y.length-1)),t.join("")}if(void 0===i)return w(C(v,b,m));C(v,b,m,(function(e,t){e?i(e,null):i(null,w(t))}),n)}return i.encodeBase64=d,i.decodeBase64=u,i})?s.apply(i,[]):s)||(t.exports=r)}).call(this,n("YuTi")(t))},JYLm:function(e,t,i){"use strict";var n=i("z+YZ");e.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,i=n.randomBytes(e),s=[],r=0;r<e;r++)s.push("abcdefghijklmnopqrstuvwxyz012345".substr(i[r]%t,1));return s.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},JqAl:function(t,i,n){"use strict";t.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch(e){return!1}}}},"JuP+":function(e,t,i){"use strict";var n=i("P7XM"),s=i("nzop"),r=i("1eVo");e.exports=function(e){function t(t,i){s.call(this,e.transportName,t,i)}return n(t,s),t.enabled=function(t,i){if(!global.document)return!1;var n=r.extend({},i);return n.sameOrigin=!0,e.enabled(n)&&s.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=s.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},"OX/4":function(e,t,i){"use strict";var n=i("woL0"),s=i("Yh+D"),r=i("P7XM"),o=i("raCH").EventEmitter,a=i("E8Ah");function l(e,t,i){if(!l.enabled())throw new Error("Transport created when disabled");o.call(this);var r=this,c=s.addPath(e,"/websocket");c="https"===c.slice(0,5)?"wss"+c.slice(5):"ws"+c.slice(4),this.url=c,this.ws=new a(this.url,[],i),this.ws.onmessage=function(e){r.emit("message",e.data)},this.unloadRef=n.unloadAdd((function(){r.ws.close()})),this.ws.onclose=function(e){r.emit("close",e.code,e.reason),r._cleanup()},this.ws.onerror=function(e){r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}r(l,o),l.prototype.send=function(e){this.ws.send("["+e+"]")},l.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},l.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},l.enabled=function(){return!!a},l.transportName="websocket",l.roundTrips=2,e.exports=l},P7XM:function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},Ph6G:function(e,t,i){"use strict";var n=i("P7XM"),s=i("dXd4"),r=i("FUii"),o=i("3wkl"),a=i("c6pU"),l=i("JqAl");function c(e){if(!a.enabled&&!o.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/xhr_streaming",r,o)}n(c,s),c.enabled=function(e){return!e.nullOrigin&&!l.isOpera()&&o.enabled},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!global.document,e.exports=c},QJpz:function(e,t){!function(e,t,i,n){function s(t,i){this.settings=null,this.options=e.extend({},s.Defaults,i),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy((function(t,i){this._handlers[i]=e.proxy(this[i],this)}),this)),e.each(s.Plugins,e.proxy((function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)}),this)),e.each(s.Workers,e.proxy((function(t,i){this._pipe.push({filter:i.filter,run:e.proxy(i.run,this)})}),this)),this.setup(),this.initialize()}s.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},s.Width={Default:"default",Inner:"inner",Outer:"outer"},s.Type={Event:"event",State:"state"},s.Plugins={},s.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",i=this.settings.rtl,n={width:"auto","margin-left":i?t:"","margin-right":i?"":t};!!this.settings.autoWidth&&this.$stage.children().css(n),e.css=n}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,s=!this.settings.autoWidth,r=[];for(e.items={merge:!1,width:t};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,e.items.merge=i>1||e.items.merge,r[n]=s?t*i:this._items[n].width();this._widths=r}},{filter:["items","settings"],run:function(){var t=[],i=this._items,n=this.settings,s=Math.max(2*n.items,4),r=2*Math.ceil(i.length/2),o=n.loop&&i.length?n.rewind?s:Math.max(s,r):0,a="",l="";for(o/=2;o>0;)t.push(this.normalize(t.length/2,!0)),a+=i[t[t.length-1]][0].outerHTML,t.push(this.normalize(i.length-1-(t.length-1)/2,!0)),l=i[t[t.length-1]][0].outerHTML+l,o-=1;this._clones=t,e(a).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,i=-1,n=0,s=0,r=[];++i<t;)n=r[i-1]||0,s=this._widths[this.relative(i)]+this.settings.margin,r.push(n+s*e);this._coordinates=r}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,i={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],n.eq(t).css(e.css);else i&&(e.css.width=e.items.width,n.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,i,n,s=this.settings.rtl?1:-1,r=2*this.settings.stagePadding,o=this.coordinates(this.current())+r,a=o+this.width()*s,l=[];for(i=0,n=this._coordinates.length;i<n;i++)e=this._coordinates[i-1]||0,t=Math.abs(this._coordinates[i])+r*s,(this.op(e,"<=",o)&&this.op(e,">",a)||this.op(t,"<",o)&&this.op(t,">",a))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],s.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(e("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},s.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map((function(t){return e(t)})),this._mergers=this._items.map((function(){return 1})),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},s.prototype.initialize=function(){var e,t;this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")&&(e=this.$element.find("img"),t=this.$element.children(this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:void 0).width(),e.length&&t<=0&&this.preloadAutoWidthImages(e)),this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},s.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},s.prototype.setup=function(){var t=this.viewport(),i=this.options.responsive,n=-1,s=null;i?(e.each(i,(function(e){e<=t&&e>n&&(n=Number(e))})),"function"==typeof(s=e.extend({},this.options,i[n])).stagePadding&&(s.stagePadding=s.stagePadding()),delete s.responsive,s.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):s=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:s}}),this._breakpoint=n,this.settings=s,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},s.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},s.prototype.prepare=function(t){var i=this.trigger("prepare",{content:t});return i.data||(i.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:i.data}),i.data},s.prototype.update=function(){for(var t=0,i=this._pipe.length,n=e.proxy((function(e){return this[e]}),this._invalidated),s={};t<i;)(this._invalidated.all||e.grep(this._pipe[t].filter,n).length>0)&&this._pipe[t].run(s),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},s.prototype.width=function(e){switch(e=e||s.Width.Default){case s.Width.Inner:case s.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},s.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},s.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},s.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},s.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",(function(){return!1}))),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},s.prototype.onDragStart=function(t){var n=null;3!==t.which&&(e.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(e.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(t),e(i).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(i).one("mousemove.owl.core touchmove.owl.core",e.proxy((function(t){var n=this.difference(this._drag.pointer,this.pointer(t));e(i).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))}),this)))},s.prototype.onDragMove=function(e){var t=null,i=null,n=null,s=this.difference(this._drag.pointer,this.pointer(e)),r=this.difference(this._drag.stage.start,s);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-t,r.x=((r.x-t)%i+i)%i+t):(t=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),n=this.settings.pullDrag?-1*s.x/5:0,r.x=Math.max(Math.min(r.x,t+n),i+n)),this._drag.stage.current=r,this.animate(r.x))},s.prototype.onDragEnd=function(t){var n=this.difference(this._drag.pointer,this.pointer(t)),s=this._drag.stage.current,r=n.x>0^this.settings.rtl?"left":"right";e(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(s.x,0!==n.x?r:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=r,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",(function(){return!1}))),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},s.prototype.closest=function(t,i){var n=-1,s=this.width(),r=this.coordinates();return this.settings.freeDrag||e.each(r,e.proxy((function(e,o){return"left"===i&&t>o-30&&t<o+30?n=e:"right"===i&&t>o-s-30&&t<o-s+30?n=e+1:this.op(t,"<",o)&&this.op(t,">",void 0!==r[e+1]?r[e+1]:o-s)&&(n="left"===i?e+1:e),-1===n}),this)),this.settings.loop||(this.op(t,">",r[this.minimum()])?n=t=this.minimum():this.op(t,"<",r[this.maximum()])&&(n=t=this.maximum())),n},s.prototype.animate=function(t){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},s.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},s.prototype.current=function(e){if(void 0===e)return this._current;if(0!==this._items.length){if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});void 0!==t.data&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current}},s.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,(function(e,t){return t}))},s.prototype.reset=function(e){void 0!==(e=this.normalize(e))&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},s.prototype.normalize=function(e,t){var i=this._items.length,n=t?0:this._clones.length;return!this.isNumeric(e)||i<1?e=void 0:(e<0||e>=i+n)&&(e=((e-n/2)%i+i)%i+n/2),e},s.prototype.relative=function(e){return this.normalize(e-=this._clones.length/2,!0)},s.prototype.maximum=function(e){var t,i,n,s=this.settings,r=this._coordinates.length;if(s.loop)r=this._clones.length/2+this._items.length-1;else if(s.autoWidth||s.merge){if(t=this._items.length)for(i=this._items[--t].width(),n=this.$element.width();t--&&!((i+=this._items[t].width()+this.settings.margin)>n););r=t+1}else r=s.center?this._items.length-1:this._items.length-s.items;return e&&(r-=this._clones.length/2),Math.max(r,0)},s.prototype.minimum=function(e){return e?0:this._clones.length/2},s.prototype.items=function(e){return void 0===e?this._items.slice():(e=this.normalize(e,!0),this._items[e])},s.prototype.mergers=function(e){return void 0===e?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},s.prototype.clones=function(t){var i=this._clones.length/2,n=i+this._items.length,s=function(e){return e%2==0?n+e/2:i-(e+1)/2};return e.map(this._clones,void 0===t?function(e,t){return s(t)}:function(e,i){return e===t?s(i):null})},s.prototype.speed=function(e){return void 0!==e&&(this._speed=e),this._speed},s.prototype.coordinates=function(t){var i,n=1,s=t-1;return void 0===t?e.map(this._coordinates,e.proxy((function(e,t){return this.coordinates(t)}),this)):(this.settings.center?(this.settings.rtl&&(n=-1,s=t+1),i=this._coordinates[t],i+=(this.width()-i+(this._coordinates[s]||0))/2*n):i=this._coordinates[s]||0,i=Math.ceil(i))},s.prototype.duration=function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},s.prototype.to=function(e,t){var i=this.current(),n=null,s=e-this.relative(i),r=(s>0)-(s<0),o=this._items.length,a=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(s)>o/2&&(s+=-1*r*o),(n=(((e=i+s)-a)%o+o)%o+a)!==e&&n-s<=l&&n-s>0&&(e=n,this.reset(i=n-s))):e=this.settings.rewind?(e%(l+=1)+l)%l:Math.max(a,Math.min(l,e)),this.speed(this.duration(i,e,t)),this.current(e),this.isVisible()&&this.update()},s.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},s.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},s.prototype.onTransitionEnd=function(e){if(void 0!==e&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},s.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==t?n=e(this.options.responsiveBaseElement).width():t.innerWidth?n=t.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},s.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter((function(){return 1===this.nodeType})).each(e.proxy((function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)}),this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},s.prototype.add=function(t,i){var n=this.relative(this._current);i=void 0===i?this._items.length:this.normalize(i,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:i}),t=this.prepare(t),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[i-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(t),this._items.splice(i,0,t),this._mergers.splice(i,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[n]&&this.reset(this._items[n].index()),this.invalidate("items"),this.trigger("added",{content:t,position:i})},s.prototype.remove=function(e){void 0!==(e=this.normalize(e,!0))&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},s.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy((function(t,i){this.enter("pre-loading"),i=e(i),e(new Image).one("load",e.proxy((function(e){i.attr("src",e.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()}),this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))}),this))},s.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(i).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},s.prototype.op=function(e,t,i){var n=this.settings.rtl;switch(t){case"<":return n?e>i:e<i;case">":return n?e<i:e>i;case">=":return n?e<=i:e>=i;case"<=":return n?e>=i:e<=i}},s.prototype.on=function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},s.prototype.off=function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)},s.prototype.trigger=function(t,i,n,r,o){var a={item:{count:this._items.length,index:this.current()}},l=e.camelCase(e.grep(["on",t,n],(function(e){return e})).join("-").toLowerCase()),c=e.Event([t,"owl",n||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},a,i));return this._supress[t]||(e.each(this._plugins,(function(e,t){t.onTrigger&&t.onTrigger(c)})),this.register({type:s.Type.Event,name:t}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},s.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){void 0===this._states.current[t]&&(this._states.current[t]=0),this._states.current[t]++}),this))},s.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]--}),this))},s.prototype.register=function(t){if(t.type===s.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var i=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!i||!i.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:i.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===s.Type.State&&(this._states.tags[t.name]=this._states.tags[t.name]?this._states.tags[t.name].concat(t.tags):t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy((function(i,n){return e.inArray(i,this._states.tags[t.name])===n}),this)))},s.prototype.suppress=function(t){e.each(t,e.proxy((function(e,t){this._supress[t]=!0}),this))},s.prototype.release=function(t){e.each(t,e.proxy((function(e,t){delete this._supress[t]}),this))},s.prototype.pointer=function(e){var i={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i},s.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},s.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=e(this),r=n.data("owl.carousel");r||(r=new s(this,"object"==typeof t&&t),n.data("owl.carousel",r),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],(function(t,i){r.register({type:s.Type.Event,name:i}),r.$element.on(i+".owl.carousel.core",e.proxy((function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([i]),r[i].apply(this,[].slice.call(arguments,1)),this.release([i]))}),r))}))),"string"==typeof t&&"_"!==t.charAt(0)&&r[t].apply(r,i)}))},e.fn.owlCarousel.Constructor=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers)};s.Defaults={autoRefresh:!0,autoRefreshInterval:500},s.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},s.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},s.prototype.destroy=function(){var e,i;for(e in t.clearInterval(this._interval),this._handlers)this._core.$element.off(e,this._handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy((function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var i=this._core.settings,n=i.center&&Math.ceil(i.items/2)||i.items,s=i.center&&-1*n||0,r=(t.property&&void 0!==t.property.value?t.property.value:this._core.current())+s,o=this._core.clones().length,a=e.proxy((function(e,t){this.load(t)}),this);for(i.lazyLoadEager>0&&(n+=i.lazyLoadEager,i.loop&&(r-=i.lazyLoadEager,n++));s++<n;)this.load(o/2+this._core.relative(r)),o&&e.each(this._core.clones(this._core.relative(r)),a),r++}}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers)};s.Defaults={lazyLoad:!1,lazyLoadEager:0},s.prototype.load=function(i){var n=this._core.$stage.children().eq(i),s=n&&n.find(".owl-lazy");!s||e.inArray(n.get(0),this._loaded)>-1||(s.each(e.proxy((function(i,n){var s,r=e(n),o=t.devicePixelRatio>1&&r.attr("data-src-retina")||r.attr("data-src")||r.attr("data-srcset");this._core.trigger("load",{element:r,url:o},"lazy"),r.is("img")?r.one("load.owl.lazy",e.proxy((function(){r.css("opacity",1),this._core.trigger("loaded",{element:r,url:o},"lazy")}),this)).attr("src",o):r.is("source")?r.one("load.owl.lazy",e.proxy((function(){this._core.trigger("loaded",{element:r,url:o},"lazy")}),this)).attr("srcset",o):((s=new Image).onload=e.proxy((function(){r.css({"background-image":'url("'+o+'")',opacity:"1"}),this._core.trigger("loaded",{element:r,url:o},"lazy")}),this),s.src=o)}),this)),this._loaded.push(n.get(0)))},s.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(i){this._core=i,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&this.update()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&"position"===e.property.name&&this.update()}),this),"loaded.owl.lazy":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var n=this;e(t).on("load",(function(){n._core.settings.autoHeight&&n.update()})),e(t).resize((function(){n._core.settings.autoHeight&&(null!=n._intervalId&&clearTimeout(n._intervalId),n._intervalId=setTimeout((function(){n.update()}),250))}))};s.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},s.prototype.update=function(){var t=this._core._current,i=t+this._core.settings.items,n=this._core.settings.lazyLoad,s=this._core.$stage.children().toArray().slice(t,i),r=[],o=0;e.each(s,(function(t,i){r.push(e(i).height())})),(o=Math.max.apply(null,r))<=1&&n&&this._previousHeight&&(o=this._previousHeight),this._previousHeight=o,this._core.$stage.parent().height(o).addClass(this._core.settings.autoHeightClass)},s.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})}),this),"resize.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy((function(e){this.play(e)}),this))};s.Defaults={video:!1,videoHeight:!1,videoWidth:!1},s.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",n=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),s=e.attr("data-width")||this._core.settings.videoWidth,r=e.attr("data-height")||this._core.settings.videoHeight,o=e.attr("href");if(!o)throw new Error("Missing video URL.");if((n=o.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}this._videos[o]={type:i,id:n=n[6],width:s,height:r},t.attr("data-video",o),this.thumbnail(e,this._videos[o])},s.prototype.thumbnail=function(t,i){var n,s=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",r=t.find("img"),o="src",a="",l=this._core.settings,c=function(i){n=e("<div/>",l.lazyLoad?{class:"owl-video-tn "+a,srcType:i}:{class:"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),t.after(n),t.after('<div class="owl-video-play-icon"></div>')};if(t.wrap(e("<div/>",{class:"owl-video-wrapper",style:s})),this._core.settings.lazyLoad&&(o="data-src",a="owl-lazy"),r.length)return c(r.attr(o)),r.remove(),!1;"youtube"===i.type?c("//img.youtube.com/vi/"+i.id+"/hqdefault.jpg"):"vimeo"===i.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){c(e[0].thumbnail_large)}}):"vzaar"===i.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){c(e.framegrab_url)}})},s.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},s.prototype.play=function(t){var i,n=e(t.target).closest("."+this._core.settings.itemClass),s=this._videos[n.attr("data-video")],r=s.width||"100%",o=s.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=e('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",o),i.attr("width",r),"youtube"===s.type?i.attr("src","//www.youtube.com/embed/"+s.id+"?autoplay=1&rel=0&v="+s.id):"vimeo"===s.type?i.attr("src","//player.vimeo.com/video/"+s.id+"?autoplay=1"):"vzaar"===s.type&&i.attr("src","//view.vzaar.com/"+s.id+"/player?autoplay=true"),e(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},s.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},s.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this.core=t,this.core.options=e.extend({},s.Defaults,this.core.options),this.swapping=!0,this.previous=void 0,this.next=void 0,this.handlers={"change.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)}),this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy((function(e){e.namespace&&(this.swapping="translated"==e.type)}),this),"translate.owl.carousel":e.proxy((function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()}),this)},this.core.$element.on(this.handlers)};s.Defaults={animateOut:!1,animateIn:!1},s.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,i=e.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),s=this.core.$stage.children().eq(this.next),r=this.core.settings.animateIn,o=this.core.settings.animateOut;this.core.current()!==this.previous&&(o&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(e.support.animation.end,i).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(o)),r&&s.one(e.support.animation.end,i).addClass("animated owl-animated-in").addClass(r))}},s.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},s.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":e.proxy((function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._paused&&(this._time=0)}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoplay&&this.play()}),this),"play.owl.autoplay":e.proxy((function(e,t,i){e.namespace&&this.play(t,i)}),this),"stop.owl.autoplay":e.proxy((function(e){e.namespace&&this.stop()}),this),"mouseover.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"mouseleave.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()}),this),"touchstart.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"touchend.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this.play()}),this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},s.Defaults,this._core.options)};s.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},s.prototype._next=function(n){this._call=t.setTimeout(e.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},s.prototype.read=function(){return(new Date).getTime()-this._time},s.prototype.play=function(i,n){var s;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,s=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):t.clearTimeout(this._call),this._time+=this.read()%i-s,this._timeout=i,this._call=t.setTimeout(e.proxy(this._next,this,n),i-s)},s.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,t.clearTimeout(this._call),this._core.leave("rotating"))},s.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,t.clearTimeout(this._call))},s.prototype.destroy=function(){var e,t;for(e in this.stop(),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var s=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy((function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")}),this),"added.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())}),this),"remove.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&this.draw()}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this.$element.on(this._handlers)};s.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},s.prototype.initialize=function(){var t,i=this._core.settings;for(t in this._controls.$relative=(i.navContainer?e(i.navContainer):e("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy((function(e){this.prev(i.navSpeed)}),this)),this._controls.$next=e("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy((function(e){this.next(i.navSpeed)}),this)),i.dotsData||(this._templates=[e('<button role="button">').addClass(i.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?e(i.dotsContainer):e("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",e.proxy((function(t){var n=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(n,i.dotsSpeed)}),this)),this._overrides)this._core[t]=e.proxy(this[t],this)},s.prototype.destroy=function(){var e,t,i,n,s;for(e in s=this._core.settings,this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)"$relative"===t&&s.navContainer?this._controls[t].html(""):this._controls[t].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},s.prototype.update=function(){var e,t,i=this._core.clones().length/2,n=i+this._core.items().length,s=this._core.maximum(!0),r=this._core.settings,o=r.center||r.autoWidth||r.dotsData?1:r.dotsEach||r.items;if("page"!==r.slideBy&&(r.slideBy=Math.min(r.slideBy,r.items)),r.dots||"page"==r.slideBy)for(this._pages=[],e=i,t=0;e<n;e++){if(t>=o||0===t){if(this._pages.push({start:Math.min(s,e-i),end:e-i+o-1}),Math.min(s,e-i)===s)break;t=0}t+=this._core.mergers(this._core.relative(e))}},s.prototype.draw=function(){var t,i=this._core.settings,n=this._core.items().length<=i.items,s=this._core.relative(this._core.current()),r=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!r&&s<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!r&&s>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(t=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},s.prototype.onTrigger=function(t){var i=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},s.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy((function(e,i){return e.start<=t&&e.end>=t}),this)).pop()},s.prototype.getPosition=function(t){var i,n,s=this._core.settings;return"page"==s.slideBy?(i=e.inArray(this.current(),this._pages),t?++i:--i,i=this._pages[(i%(n=this._pages.length)+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,t?i+=s.slideBy:i-=s.slideBy),i},s.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},s.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},s.prototype.to=function(t,i,n){var s;!n&&this._pages.length?(s=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%s+s)%s].start,i)):e.proxy(this._overrides.to,this._core)(t,i)},e.fn.owlCarousel.Constructor.Plugins.Navigation=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var s=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy((function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var i=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=t.content}}),this),"changed.owl.carousel":e.proxy((function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),s=e.map(this._hashes,(function(e,t){return e===n?t:null})).join();if(!s||t.location.hash.slice(1)===s)return;t.location.hash=s}}),this)},this._core.options=e.extend({},s.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy((function(e){var i=t.location.hash.substring(1),n=this._core.$stage.children(),s=this._hashes[i]&&n.index(this._hashes[i]);void 0!==s&&s!==this._core.current()&&this._core.to(this._core.relative(s),!1,!0)}),this))};s.Defaults={URLhashListener:!1},s.prototype.destroy=function(){var i,n;for(i in e(t).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=s}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var s=e("<support>").get(0).style,r="Webkit Moz O ms".split(" "),o={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}};function a(t,i){var n=!1,o=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+r.join(o+" ")+o).split(" "),(function(e,t){if(void 0!==s[t])return n=!i||t,!1})),n}function l(e){return a(e,!0)}!!a("transition")&&(e.support.transition=new String(l("transition")),e.support.transition.end=o.transition.end[e.support.transition]),!!a("animation")&&(e.support.animation=new String(l("animation")),e.support.animation.end=o.animation.end[e.support.animation]),a("transform")&&(e.support.transform=new String(l("transform")),e.support.transform3d=!!a("perspective"))}(window.Zepto||window.jQuery,window,document)},QLKV:function(e,t,i){"use strict";var n=i("P7XM"),s=i("VNbE"),r=i("c6pU"),o=i("dXd4");function a(e){if(!s.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/htmlfile",s,r)}n(a,o),a.enabled=function(e){return s.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},"R+Q3":function(e,t,i){"use strict";var n=i("P7XM"),s=i("moM4");function r(e){s.call(this),this.initEvent("message",!1,!1),this.data=e}n(r,s),e.exports=r},RA0T:function(e,t,i){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},RUQ2:function(e,t,i){var n=i("RUQ2");for(k in n)global[k]=n[k]},"S+S0":function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=n("mrSG"),r=n("zVF4"),o=function(){function e(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a=function(){function t(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){var n=new r.Deferred;this.instancesDeferred.set(i,n);try{var s=this.getOrInitializeService(i);s&&n.resolve(s)}catch(e){}}return this.instancesDeferred.get(i).promise},t.prototype.getImmediate=function(t){var i=s.__assign({identifier:"[DEFAULT]",optional:!1},t),n=i.optional,r=this.normalizeInstanceIdentifier(i.identifier);try{var o=this.getOrInitializeService(r);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(e){if(n)return null;throw e}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var i,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var r=s.__values(this.instancesDeferred.entries()),o=r.next();!o.done;o=r.next()){var a=s.__read(o.value,2),l=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var h=this.getOrInitializeService(c);l.resolve(h)}catch(e){}}}catch(d){i={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},t.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,(function(){var e;return s.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(s.__spread(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})),e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))))];case 1:return t.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},t}(),l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();i.Component=o,i.ComponentContainer=l,i.Provider=a},SGzc:function(t,i,n){"use strict";n("dyV1");var s,r=n("GBY4"),o=n("P7XM"),a=n("kwwM"),l=n("JYLm"),c=n("hPxs"),h=n("Yh+D"),d=n("woL0"),u=n("AEAD"),p=n("1eVo"),f=n("JqAl"),m=n("SM0v"),g=n("moM4"),v=n("l6Lj"),y=n("oOIF"),b=n("42Jg"),w=n("R+Q3"),S=n("uajq");function C(e,t,i){if(!(this instanceof C))return new C(e,t,i);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=C.CONNECTING,this.extensions="",this.protocol="",(i=i||{}).protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=i.transports,this._transportOptions=i.transportOptions||{},this._timeout=i.timeout||0;var n=i.sessionId||8;if("function"==typeof n)this._generateSessionId=n;else{if("number"!=typeof n)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return l.string(n)}}this._server=i.server||l.numberString(1e3);var s=new r(e);if(!s.host||!s.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(s.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==s.protocol&&"https:"!==s.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+s.protocol+"' is not allowed.");var o="https:"===s.protocol;if("https:"===y.protocol&&!o)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var a=t.sort();a.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<a.length-1&&e===a[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var c=h.getOrigin(y.href);this._origin=c?c.toLowerCase():null,s.set("pathname",s.pathname.replace(/\/+$/,"")),this.url=s.href,this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:h.isOriginEqual(this.url,y.href),sameScheme:h.isSchemeEqual(this.url,y.href)},this._ir=new S(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function _(e){return 1e3===e||e>=3e3&&e<=4999}o(C,v),C.prototype.close=function(e,t){if(e&&!_(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==C.CLOSING&&this.readyState!==C.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},C.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===C.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===C.OPEN&&this._transport.send(c.quote(e))},C.version=n("EBWB"),C.CONNECTING=0,C.OPEN=1,C.CLOSING=2,C.CLOSED=3,C.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=p.extend(e,this._urlInfo);var i=s.filterToEnabled(this._transportsWhitelist,e);this._transports=i.main,this._connect()}else this._close(1002,"Cannot connect to server")},C.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.needBody&&(!global.document.body||void 0!==global.document.readyState&&"complete"!==global.document.readyState&&"interactive"!==global.document.readyState))return this._transports.unshift(e),void d.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var i=new e(h.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),this._transUrl,this._transportOptions[e.transportName]);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},C.prototype._transportTimeout=function(){this.readyState===C.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},C.prototype._transportMessage=function(t){var i,n=this,s=t.slice(0,1),r=t.slice(1);switch(s){case"o":return void this._open();case"h":return void this.dispatchEvent(new g("heartbeat"))}if(r)try{i=a.parse(r)}catch(e){}if(void 0!==i)switch(s){case"a":Array.isArray(i)&&i.forEach((function(e){n.dispatchEvent(new w(e))}));break;case"m":this.dispatchEvent(new w(i));break;case"c":Array.isArray(i)&&2===i.length&&this._close(i[0],i[1],!0)}},C.prototype._transportClose=function(e,t){this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),_(e)||2e3===e||this.readyState!==C.CONNECTING?this._close(e,t):this._connect()},C.prototype._open=function(){this.readyState===C.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=C.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open"))):this._close(1006,"Server lost session")},C.prototype._close=function(e,t,i){var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===C.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=C.CLOSING,setTimeout((function(){this.readyState=C.CLOSED,n&&this.dispatchEvent(new g("error"));var s=new b("close");s.wasClean=i||!1,s.code=e||1e3,s.reason=t,this.dispatchEvent(s),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},C.prototype.countRTO=function(e){return e>100?4*e:300+e},t.exports=function(e){return s=u(e),n("n6ct")(C,e),C}},SM0v:function(t,i,n){"use strict";var s={};["log","debug","warn"].forEach((function(t){var i;try{i=global.console&&global.console[t]&&global.console[t].apply}catch(e){}s[t]=i?function(){return global.console[t].apply(global.console,arguments)}:"log"===t?function(){}:s.log})),t.exports=s},SMEb:function(e,t,i){(function(){var e,i,n,s,r={}.hasOwnProperty,o=[].slice;e={LF:"\n",NULL:"\0"},n=function(){var t;function i(e,t,i){this.command=e,this.headers=null!=t?t:{},this.body=null!=i?i:""}return i.prototype.toString=function(){var t,n,s,o;for(n in t=[this.command],(s=!1===this.headers["content-length"])&&delete this.headers["content-length"],o=this.headers)r.call(o,n)&&t.push(n+":"+o[n]);return this.body&&!s&&t.push("content-length:"+i.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},i.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var n,s,r,o,a,l,c,h,d,u,p,f,m,g,v,y,b;for(o=t.search(RegExp(""+e.LF+e.LF)),r=(a=t.substring(0,o).split(e.LF)).shift(),l={},f=function(e){return e.replace(/^\s+|\s+$/g,"")},m=0,v=(y=a.reverse()).length;m<v;m++)h=(u=y[m]).indexOf(":"),l[f(u.substring(0,h))]=f(u.substring(h+1));if(n="",p=o+2,l["content-length"])d=parseInt(l["content-length"]),n=(""+t).substring(p,p+d);else for(s=null,c=g=p,b=t.length;(p<=b?g<b:g>b)&&(s=t.charAt(c))!==e.NULL;c=p<=b?++g:--g)n+=s;return new i(r,l,n)},i.unmarshall=function(i){var n;return function(){var s,r,o,a;for(a=[],s=0,r=(o=i.split(RegExp(""+e.NULL+e.LF+"*"))).length;s<r;s++)(null!=(n=o[s])?n.length:void 0)>0&&a.push(t(n));return a}()},i.marshall=function(t,n,s){return new i(t,n,s).toString()+e.NULL},i}(),i=function(){var t;function i(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return i.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},i.prototype._transmit=function(e,t,i){var s;for(s=n.marshall(e,t,i),"function"==typeof this.debug&&this.debug(">>> "+s);;){if(!(s.length>this.maxWebSocketFrameSize))return this.ws.send(s);this.ws.send(s.substring(0,this.maxWebSocketFrameSize)),s=s.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+s.length)}},i.prototype._setupHeartbeat=function(i){var n,r,o,a,l,c;if((a=i.version)===s.VERSIONS.V1_1||a===s.VERSIONS.V1_2)return r=(l=function(){var e,t,n,s;for(s=[],e=0,t=(n=i["heart-beat"].split(",")).length;e<t;e++)s.push(parseInt(n[e]));return s}())[0],n=l[1],0!==this.heartbeat.outgoing&&0!==n&&(o=Math.max(this.heartbeat.outgoing,n),"function"==typeof this.debug&&this.debug("send PING every "+o+"ms"),this.pinger=s.setInterval(o,(c=this,function(){return c.ws.send(e.LF),"function"==typeof c.debug?c.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==r?(o=Math.max(this.heartbeat.incoming,r),"function"==typeof this.debug&&this.debug("check PONG every "+o+"ms"),this.ponger=s.setInterval(o,function(e){return function(){var i;if((i=t()-e.serverActivity)>2*o)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+i+"ms"),e.ws.close()}}(this))):void 0},i.prototype._parseConnect=function(){var e,t,i,n;switch(n={},(e=1<=arguments.length?o.call(arguments,0):[]).length){case 2:n=e[0],t=e[1];break;case 3:e[1]instanceof Function?(n=e[0],t=e[1],i=e[2]):(n.login=e[0],n.passcode=e[1],t=e[2]);break;case 4:n.login=e[0],n.passcode=e[1],t=e[2],i=e[3];break;default:n.login=e[0],n.passcode=e[1],t=e[2],i=e[3],n.host=e[4]}return[n,t,i]},i.prototype.connect=function(){var i,r,a,l,c;return i=1<=arguments.length?o.call(arguments,0):[],l=this._parseConnect.apply(this,i),a=l[0],this.connectCallback=l[1],r=l[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(c=this,function(i){var s,o,a,l,h,d,u,p,f,m,g;if(a="undefined"!=typeof ArrayBuffer&&i.data instanceof ArrayBuffer?(s=new Uint8Array(i.data),"function"==typeof c.debug&&c.debug("--- got data length: "+s.length),function(){var e,t,i;for(i=[],e=0,t=s.length;e<t;e++)i.push(String.fromCharCode(s[e]));return i}().join("")):i.data,c.serverActivity=t(),a!==e.LF){for("function"==typeof c.debug&&c.debug("<<< "+a),g=[],p=0,f=(m=n.unmarshall(a)).length;p<f;p++)switch((l=m[p]).command){case"CONNECTED":"function"==typeof c.debug&&c.debug("connected to server "+l.headers.server),c.connected=!0,c._setupHeartbeat(l.headers),g.push("function"==typeof c.connectCallback?c.connectCallback(l):void 0);break;case"MESSAGE":(d=c.subscriptions[u=l.headers.subscription]||c.onreceive)?(o=c,h=l.headers["message-id"],l.ack=function(e){return null==e&&(e={}),o.ack(h,u,e)},l.nack=function(e){return null==e&&(e={}),o.nack(h,u,e)},g.push(d(l))):g.push("function"==typeof c.debug?c.debug("Unhandled received MESSAGE: "+l):void 0);break;case"RECEIPT":g.push("function"==typeof c.onreceipt?c.onreceipt(l):void 0);break;case"ERROR":g.push("function"==typeof r?r(l):void 0);break;default:g.push("function"==typeof c.debug?c.debug("Unhandled frame: "+l):void 0)}return g}"function"==typeof c.debug&&c.debug("<<< PONG")}),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof r?r(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),a["accept-version"]=s.VERSIONS.supportedVersions(),a["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",a)}}(this)},i.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},i.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&s.clearInterval(this.pinger),this.ponger)return s.clearInterval(this.ponger)},i.prototype.send=function(e,t,i){return null==t&&(t={}),null==i&&(i=""),t.destination=e,this._transmit("SEND",t,i)},i.prototype.subscribe=function(e,t,i){var n;return null==i&&(i={}),i.id||(i.id="sub-"+this.counter++),i.destination=e,this.subscriptions[i.id]=t,this._transmit("SUBSCRIBE",i),n=this,{id:i.id,unsubscribe:function(){return n.unsubscribe(i.id)}}},i.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},i.prototype.begin=function(e){var t,i;return i=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:i}),t=this,{id:i,commit:function(){return t.commit(i)},abort:function(){return t.abort(i)}}},i.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},i.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},i.prototype.ack=function(e,t,i){return null==i&&(i={}),i["message-id"]=e,i.subscription=t,this._transmit("ACK",i)},i.prototype.nack=function(e,t,i){return null==i&&(i={}),i["message-id"]=e,i.subscription=t,this._transmit("NACK",i)},i}(),s={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var n;return null==t&&(t=["v10.stomp","v11.stomp"]),n=new(s.WebSocketClass||WebSocket)(e,t),new i(n)},over:function(e){return new i(e)},Frame:n},null!==t&&(t.Stomp=s),"undefined"!=typeof window&&null!==window?(s.setInterval=function(e,t){return window.setInterval(t,e)},s.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=s):t||(self.Stomp=s)}).call(this)},VNbE:function(e,t,i){"use strict";var n=i("P7XM"),s=i("8fj+"),r=i("Yh+D"),o=i("raCH").EventEmitter,a=i("JYLm");function l(e){o.call(this);var t=this;s.polluteGlobalNamespace(),this.id="a"+a.string(6),e=r.addQuery(e,"c="+decodeURIComponent(s.WPrefix+"."+this.id));var i=l.htmlfileEnabled?s.createHtmlfile:s.createIframe;global[s.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=i(e,(function(){t._cleanup(),t._close("permanent")}))}n(l,o),l.prototype.abort=function(){this._cleanup(),this._close("user")},l.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[s.WPrefix][this.id]},l.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},l.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in global)try{l.htmlfileEnabled=!!new global[c]("htmlfile")}catch(h){}l.enabled=l.htmlfileEnabled||s.iframeEnabled,e.exports=l},Wcq6:function(e,t,i){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=n(i("wj3C"));s.default.registerVersion("firebase","7.21.0","app"),e.exports=s.default},"Yh+D":function(e,t,i){"use strict";var n=i("GBY4");e.exports={getOrigin:function(e){if(!e)return null;var t=new n(e);if("file:"===t.protocol)return null;var i=t.port;return i||(i="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+i},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var i=e.split("?");return i[0]+t+(i[1]?"?"+i[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},Z4fQ:function(e,t){var i=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return i()}try{return __global__||i()}finally{delete Object.prototype.__global__}}()},"a1+y":function(module,exports,__webpack_require__){var t;window,t=function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,(function(t){return e[t]}).bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=92)}([function(e,t,i){"use strict";i.r(t);var n,s=i(11),r=i.n(s),o=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},a=i(14),l=i(3),c=i(1),h=i(46),d=i.n(h),u=i(47),p=i.n(u),f=new Array(32).fill(void 0);function m(e){return f[e]}f.push(void 0,null,!0,!1);var g=f.length;function v(e){var t=m(e);return function(e){e<36||(f[e]=g,g=e)}(e),t}var y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});y.decode();var b=null;function w(){return null!==b&&b.buffer===n.memory.buffer||(b=new Uint8Array(n.memory.buffer)),b}function S(e,t){return y.decode(w().subarray(e,e+t))}function C(e){g===f.length&&f.push(f.length+1);var t=g;return g=f[t],f[t]=e,t}var _=0,E=new TextEncoder("utf-8"),T="function"==typeof E.encodeInto?function(e,t){return E.encodeInto(e,t)}:function(e,t){var i=E.encode(e);return t.set(i),{read:e.length,written:i.length}},x=null;function k(){return null!==x&&x.buffer===n.memory.buffer||(x=new Int32Array(n.memory.buffer)),x}var A,O=function(){function e(){d()(this,e)}return p()(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,n.__wbg_signmanager_free(e)}},{key:"get_digest",value:function(e){return v(n.signmanager_get_digest(this.ptr,C(e)))}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}},{key:"new",value:function(){var t=n.signmanager_new();return e.__wrap(t)}}]),e}(),D=!1,I=null,R=0,P="free",M=[],L=[],N=0;(I?Promise.resolve(I):new Promise((function(e){D||n||function e(){var t={wbg:{}};t.wbg.__wbindgen_object_drop_ref=function(e){v(e)},t.wbg.__wbindgen_string_new=function(e,t){return C(S(e,t))},t.wbg.__wbindgen_string_get=function(e,t){var i=m(t),s="string"==typeof i?i:void 0,r=null==s?0:function(e,t,i){if(void 0===i){var n=E.encode(e),s=t(n.length);return w().subarray(s,s+n.length).set(n),_=n.length,s}for(var r=e.length,o=(s=t(r),w()),a=0;a<r;a++){var l=e.charCodeAt(a);if(l>127)break;o[s+a]=l}if(a!==r){0!==a&&(e=e.slice(a)),s=i(s,r,r=a+3*e.length);var c=w().subarray(s+a,s+r);a+=T(e,c).written}return _=a,s}(s,n.__wbindgen_malloc,n.__wbindgen_realloc),o=_;k()[e/4+1]=o,k()[e/4+0]=r},t.wbg.__wbindgen_throw=function(e,t){throw new Error(S(e,t))};for(var i=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),(function(e){return e.charCodeAt(0)})),s=new Uint8Array([177,156,215,89,13,111,230,1]),r=new Uint8Array(i.length),o=new Uint8Array(256),a=0;a<256;a++)o[a]=a;var l=0;for(a=0;a<256;a++){var c=[o[l=(l+o[a]+s[a%s.length])%256],o[a]];o[a]=c[0],o[l]=c[1]}a=0,l=0;for(var h=0;h<0+i.length;h++){var d=[o[l=(l+o[a=(a+1)%256])%256],o[a]];o[a]=d[0],o[l]=d[1],h>=0&&(r[h-0]=i[h-0]^o[(o[a]+o[l])%256])}return D=!0,new Promise((function(i){(function(e,t){return WebAssembly.instantiate(e,t)})(r.buffer,t).then((function(t){D=!1,n=t.instance.exports,e.__wbindgen_wasm_module=t.module,i()}))}))}().then((function(){I=O.new(),e(I)}))}))).then((function(e){A=e})),setInterval((function(){Object(l.getParameter)("UPLOAD_LOG")&&V.info("console log upload")}),9e5);var V=function(){var e,t,i,n,s,h,d=null,u=["DEBUG","INFO","WARNING","ERROR","NONE"],p=0,f=function(e,t){if(Object(l.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var i="";t.forEach((function(e){"object"===r()(e)&&(e=JSON.stringify(e)),i=i+e+" "})),M.push({payload:i,log_level:e}),"free"===P&&function e(t){P="uploading",setTimeout((function(){!function(e,t,i){var n={};Array.isArray(e)||(e=[e]),e=e.map((function(e){return{log_item_id:R++,log_level:e.log_level,payload_str:e.payload}})),n={timestamp:Date.now(),sdk_version:l.VERSION,process_id:Object(c.getProcessId)(),payload:JSON.stringify(e)},A?n.hash=A.get_digest("".concat(n.payload).concat(n.process_id).concat(n.timestamp)):i&&i();try{var s=d||"https://".concat(Object(l.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(a.post)(s,n,(function(e){"OK"===e?t&&t():i&&i()}),(function(e){i&&i()}),{withCredentials:!0})}catch(e){i&&i()}}(t,(function(){N=0,0!==M.length?(L=M.splice(0,M.length<10?M.length:10),e(L)):P="free"}),(function(){setTimeout((function(){e(L)}),N++<2?200:1e4)}))}),3e3)}(L=M.splice(0,M.length<10?M.length:10))}catch(e){}};t=function(){for(var t=[0],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)},i=function(){for(var t=[1],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)},n=function(){for(var t=[2],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)},s=function(){for(var t=[3],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)};var m={};return h=function(e){m[e]||(n.apply(void 0,arguments),m[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,enableLogUpload:function(){Object(l.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(l.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){d=e?"https://".concat(d,"/ls/?h=").concat(Object(l.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(l.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),p=e},log:e=function(){var e=arguments[0],t=arguments;if(t[0]=o()+" Agora-SDK ["+(u[e]||"DEFAULT")+"]:",f(e,t),!(e<p))switch(e){case 0:case 1:console.log.apply(console,t);break;case 2:console.warn.apply(console,t);break;case 3:console.log.apply(console,t);break;default:return void console.log.apply(console,t)}},debug:t,info:i,warning:n,deprecate:h,error:s}}();t.default=V},function(e,t,i){"use strict";i.r(t),i.d(t,"report",(function(){return x})),i.d(t,"SESSION_INIT",(function(){return v})),i.d(t,"JOIN_CHOOSE_SERVER",(function(){return y})),i.d(t,"JOIN_GATEWAY",(function(){return b})),i.d(t,"PUBLISH",(function(){return w})),i.d(t,"SUBSCRIBE",(function(){return S})),i.d(t,"getProcessId",(function(){return T}));var n=i(44),s=i.n(n),r=i(7),o=i.n(r),a=i(3),l=i(0),c=i(14),h=i(27),d=i.n(h),u=i(45);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var m,g,v="session_init",y="join_choose_server",b="join_gateway",w="publish",S="subscribe",C=new(i.n(u).a),_={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},E=null,T=function(){return E||(E="process-"+d()(),l.default.info("processId: "+E)),E},x=(g=0,(m={list:{},setProxyServer:function(e){C.setProxy(e),m.proxyServerURL=e},getUrl:function(){return m.proxyServerURL?"https://".concat(m.proxyServerURL,"/rs/?h=").concat(Object(a.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(a.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return m.proxyServerURL?"https://".concat(m.proxyServerURL,"/rs/?h=").concat(Object(a.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(a.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(e){return m.list[e].startTime},sessionInit:function(e,t){var i=o()({},_);i.startTime=+new Date,i.sid=e,i.cname=t.cname,m.list[e]=i;var n=o()({},{willUploadConsoleLog:Object(a.getParameter)("UPLOAD_LOG"),areaVersion:"global"},t.extend),s=o()({},i);s.eventType=v,s.appid=t.appid,s.browser=navigator.userAgent,s.build=a.BUILD,s.lts=+new Date,s.elapse=s.lts-s.startTime,s.extend=JSON.stringify(n),s.mode=t.mode,s.process=T(),s.success=t.succ,s.version=a.VERSION,delete s.startTime,m.send({type:"Session",data:s}),m._flushInvokeReport(e)},joinChooseServer:function(e,t,i){if(m.list[e]){t.uid&&(m.list[e].uid=parseInt(t.uid)),t.cid&&(m.list[e].cid=parseInt(t.cid));var n=o()({},m.list[e]);n.eventType=y;var s=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-s,n.chooseServerAddr=t.csAddr,n.errorCode=t.ec,n.elapse=n.lts-n.startTime,n.success=t.succ,n.chooseServerAddrList=JSON.stringify(t.serverList),delete n.startTime,m.send({type:"JoinChooseServer",data:n})}},reqUserAccount:function(e,t){t.vid&&(m.list[e].vid=t.vid);var i=o()({},m.list[e]),n=t.lts;i.eventType="req_user_account",i.lts=Date.now(),i.success=t.success,i.serverAddress=t.serverAddress,i.stringUid=t.stringUid,i.uid=t.uid,i.errorCode=t.errorCode,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-n,i.extend="string"==typeof t.extend?t.extend:JSON.stringify(t.extend),delete i.startTime,m.send({type:"ReqUserAccount",data:i})},joinGateway:function(e,t){t.vid&&(m.list[e].vid=t.vid);var i=o()({},m.list[e]),n=t.lts;i.eventType=b,i.firstSuccess=t.firstSuccess,i.lts=Date.now(),i.gatewayAddr=t.addr,i.success=t.succ,i.errorCode=t.ec,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-n,delete i.startTime,m.send({type:"JoinGateway",data:i})},publish:function(e,t){var i=o()({},m.list[e]);i.eventType=w;var n=t.lts;i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.success=t.succ,i.errorCode=t.ec,i.audio=t.audio,i.video=t.video,i.screenshare=t.screenshare,i.publishRequestid=t.publishRequestid,i.p2pid=t.p2pid,t.videoName&&(i.videoName=t.videoName),t.audioName&&(i.audioName=t.audioName),t.screenName&&(i.screenName=t.screenName),delete i.startTime,m.send({type:"Publish",data:i}),m._flushInvokeReport(e)},subscribe:function(e,t){var i=o()({},m.list[e]);i.eventType=S;var n=t.lts;i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.errorCode=t.ec,i.success=t.succ,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,isFinite(t.peerid)?i.peer=t.peerid:i.peerSuid=""+t.peerid,"boolean"==typeof t.video&&(i.video=t.video),"boolean"==typeof t.audio&&(i.audio=t.audio),delete i.startTime,m.send({type:"Subscribe",data:i}),m._flushInvokeReport(e)},firstRemoteFrame:function(e,t){var i=o()({},m.list[e]);i.eventType="first_remote_frame";var n=t.lts;i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.width=t.width,i.height=t.height,i.success=t.succ,i.errorCode=t.ec,isFinite(t.peerid)?i.peer=t.peerid:i.peerSuid=""+t.peerid,delete i.startTime,m.send({type:"FirstFrame",data:i})},firstVideoReceived:function(e,t){var i=o()({},m.list[e]);i.eventType="first_video_received",i.lts=Date.now(),i.peer=t.peerid,i.uid=t.uid,i.elapse=t.elapse,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,m.send({type:"FirstVideoReceived",data:i})},firstAudioReceived:function(e,t){var i=o()({},m.list[e]);i.eventType="first_audio_received",i.lts=Date.now(),i.peer=t.peerid,i.uid=t.uid,i.elapse=t.elapse,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,m.send({type:"FirstAudioReceived",data:i})},firstVideoDecode:function(e,t){var i=o()({},m.list[e]);i.eventType="first_video_decode",i.lts=Date.now(),i.peer=t.peerid,i.uid=t.uid,i.elapse=t.elapse,i.videowidth=t.width,i.videoheight=t.height,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,m.send({type:"FirstVideoDecode",data:i})},firstAudioDecode:function(e,t){var i=o()({},m.list[e]);i.eventType="first_audio_decode",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,i.elapse=t.elapse,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,m.send({type:"FirstAudioDecode",data:i})},onAddAudioStream:function(e,t){var i=o()({},m.list[e]);i.eventType="on_add_audio_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,m.send({type:"OnAddAudioStream",data:i})},onAddVideoStream:function(e,t){var i=o()({},m.list[e]);i.eventType="on_add_video_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,m.send({type:"OnAddVideoStream",data:i})},onUpdateStream:function(e,t){var i=o()({},m.list[e]);i.eventType="on_update_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,i.audio=t.audio,i.video=t.video,m.send({type:"OnUpdateStream",data:i})},onRemoveStream:function(e,t){var i=o()({},m.list[e]);i.eventType="on_remove_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,m.send({type:"OnRemoveStream",data:i})},streamSwitch:function(e,t){var i=o()({},m.list[e]);i.eventType="stream_switch",i.lts=Date.now(),i.isDual=t.isdual,i.elapse=i.lts-i.startTime,i.success=i.succ,delete i.startTime,m.send({type:"StreamSwitch",data:i})},audioSendingStopped:function(e,t){var i=o()({},m.list[e]);i.eventType="audio_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reason=t.reason,i.success=t.succ,delete i.startTime,m.send({type:"AudioSendingStopped",data:i})},videoSendingStopped:function(e,t){var i=o()({},m.list[e]);i.eventType="video_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reson=t.reason,i.success=t.succ,delete i.startTime,m.send({type:"VideoSendingStopped",data:i})},requestProxyAppCenter:function(e,t){var i=o()({},m.list[e]),n=t.lts;i.eventType="request_proxy_appcenter",i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.extend=t.extend+"",i.APAddr=t.APAddr,i.workerManagerList=t.workerManagerList,i.response=t.response,i.errorCode=t.ec,i.success=t.succ,delete i.startTime,m.send({type:"RequestProxyAppCenter",data:i})},requestProxyWorkerManager:function(e,t){var i=o()({},m.list[e]),n=t.lts;i.eventType="request_proxy_worker_manager",i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.extend=t.extend,i.workerManagerAddr=t.workerManagerAddr,i.response=t.response,i.errorCode=t.ec,i.success=t.succ,delete i.startTime,m.send({type:"RequestProxyWorkerManager",data:i})},requestWorkerEvent:function(e,t){var i=o()({},m.list[e]),n=i.startTime,s=Date.now();delete(i=f({},i,{},t,{elapse:s-n,lts:s,productType:"WebRTC"})).startTime,m.send({type:"WorkerEvent",data:i})},requestApWorkerEvent:function(e,t){var i=o()({},m.list[e]),n=i.startTime,s=Date.now();i=f({},i,{},t,{elapse:s-n,lts:s}),m.send({type:"APWorkerEvent",data:i})},sendCustomReportMessage:function(e,t,i){var n={type:"UserAnalytics",data:f({sid:e},t)},s=m.getUrl();Object(c.post)(s,n,(function(e){i&&i()}),(function(e){var t=m.getBackUrl();Object(c.post)(t,n,(function(e){i&&i()}),(function(e){i&&i("Failed")}),{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT")})}),{timeout:Object(a.getParameter)("CUSTOMER_REPORT_TIMEOUT")})},joinChannelTimeOut:function(e){m.send({type:"JoinChannelTimeout",data:f({},e)})},peerPublishStatus:function(e){m.send({type:"PeerPublishStatus",data:f({},e)})}}).reportApiInvoke=function(e,t){var i=t.tag,n=t.name,s=t.getStates,r=t.options,o=t.timeout,c=void 0===o?6e4:o,h=t.callback,d=t.reportResult,u=void 0===d||d,p=Date.now(),m=0,v=g++,y=function(){return f({tag:i,invokeId:v,sid:e,name:n,apiInvokeTime:p,options:r},s&&{states:(t=s(),Object.keys(t).reduce((function(e,i){var n=e;return null!=t[i]&&(n[i]=t[i]),n}),{}))});var t},b=!!Object(a.getParameter)("SHOW_REPORT_INVOKER_LOG");b&&l.default.info("".concat(n," start"));var w=setTimeout((function(){x._sendApiInvoke(f({},y(),{error:"API_INVOKE_TIMEOUT",success:!1}))}),c);return function(e,t){if(clearTimeout(w),++m>1&&(e="EXECUTOR_INVOKE_".concat(m)),e)return x._sendApiInvoke(f({},y(),{success:!1,error:e},s&&{states:s()})),b&&l.default.info("".concat(n," onFailure"),e),h&&h(e);x._sendApiInvoke(f({},y(),{success:!0},u&&{result:t},{},s&&{states:s()})),b&&l.default.info("".concat(n," onSuccess")),h&&h(null,t)}},m._cachedItems=[],m._cacheInvokeReport=function(e){e.lts||(e.lts=Date.now()),m._cachedItems.push(e),m._cachedItems.length>50&&m._cachedItems.shift()},m._flushInvokeReport=function(e){if(m._cachedItems.length){var t=m._cachedItems;m._cachedItems=[],l.default.debug("Flush cached event reporting:",t.length),t.forEach((function(t,i){t.sid=e,setTimeout((function(){m._sendApiInvoke(t)}),5e3+500*i)}))}},m._sendApiInvoke=function(e){var t=e.tag,i=e.invokeId,n=e.sid,s=e.name,r=e.result,o=e.states,l=e.options,c=e.error,h=e.success,d=e.apiInvokeTime,u=e.lts,p=Object(a.getParameter)("NOT_REPORT_EVENT");if(!(t&&p instanceof Array&&-1!==p.indexOf(t)))if(m.list[n]){var g=m.list[n],v=g.startTime,y=g.cname,b=g.uid,w=g.cid,S=(u=u||Date.now())-v,C=u-d,_="";if(l)try{_=JSON.stringify(l)}catch(e){_=l.toString()}var E=f({invokeId:i,sid:n,cname:y,cid:w,lts:u,uid:b,success:h,elapse:S,apiName:s,execElapse:C},void 0!==l&&{options:_},{},void 0!==o&&{execStates:JSON.stringify(o)},{},void 0!==c&&{errorCode:JSON.stringify(c)},{},void 0!==r&&{execResult:JSON.stringify(r)});m.send({type:"ApiInvoke",data:E})}else m._cacheInvokeReport(arguments[0])},m.sendCache=[],m.sendTimer=null,m.send=function(e){if(e.data){var t=e.data;m._lastLts&&m._lastLts>=t.lts&&(t.lts=m._lastLts+1),m._lastLts=t.lts}if(m.sendCache.push(e),null===m.sendTimer)return function e(){m.sendTimer=setTimeout((function(){if(0!==m.sendCache.length){var t=m.sendCache.splice(0,m.sendCache.length<10?m.sendCache.length:10);return C.sendReportList(t),e()}m.sendTimer=null}),Object(a.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},m)},function(e,t,i){"use strict";i.r(t),i.d(t,"checkValidObject",(function(){return a})),i.d(t,"checkValidString",(function(){return l})),i.d(t,"checkValidNumber",(function(){return c})),i.d(t,"checkValidArray",(function(){return h})),i.d(t,"checkValidFloatNumber",(function(){return d})),i.d(t,"checkValidBoolean",(function(){return u})),i.d(t,"checkValidEnum",(function(){return o})),i.d(t,"checkValidUID",(function(){return p})),i.d(t,"isValidString",(function(){return f})),i.d(t,"isValidNumber",(function(){return m})),i.d(t,"isValidBoolean",(function(){return v})),i.d(t,"isASCII",(function(){return w})),i.d(t,"isInteger",(function(){return S})),i.d(t,"isNumber",(function(){return C})),i.d(t,"isString",(function(){return _})),i.d(t,"isArray",(function(){return E})),i.d(t,"isEmpty",(function(){return T})),i.d(t,"isValidToken",(function(){return y})),i.d(t,"isValidChannelName",(function(){return b}));var n=i(11),s=i.n(n),r=i(10),o=function(e,t,i){for(var n=0;n<i.length;n++)if(e===i[n])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(i)))},a=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==s()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},l=function(e,t,i,n,s){if(T(i)&&(i=1),n=n||255,T(s)&&(s=!0),T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!f(e,i,n,s))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(i,",").concat(n,"].").concat(s?" ASCII characters only.":""))},c=function(e,t,i,n){if(T(i)&&(i=1),n=n||1e4,T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e,i,n))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(i,",").concat(n,"]. integer only"))},h=function(e,t){if(!Array.isArray(e))throw new Error("".concat(t," should be an array"))},d=function(e,t,i,n){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(T(i)&&(i=0),n=n||1e4,T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!g(e,i,n))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(i,",").concat(n,"]."))},u=function(e,t){if(T(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!v(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},p=function(e){if(!Object(r.is32Uint)(e)&&!f(e,1,255))throw logger.error("Invalid UID ".concat(e," ").concat(s()(e))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},f=function(e,t,i,n){return t||(t=0),i||(i=Number.MAX_SAFE_INTEGER),T(n)&&(n=!0),_(e)&&(!n||w(e))&&e.length>=t&&e.length<=i},m=function(e,t,i){return S(e)&&e>=t&&e<=i},g=function(e,t,i){return C(e)&&e>=t&&e<=i},v=function(e){return"boolean"==typeof e},y=function(e){return f(e,1,2047)},b=function(e){return _(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},w=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<0||i>255)return!1}return!0}},S=function(e){return"number"==typeof e&&e%1==0},C=function(e){return"number"==typeof e},_=function(e){return"string"==typeof e},E=function(e){return e instanceof Array},T=function(e){return null==e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILD="v3.2.1-0-gf393343",t.VERSION="3.2.1";var n=0*Date.now()+11499+86604+5615+6547+846;t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var s={WEBCS_DOMAIN:["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],LOG_UPLOAD_SERVER:"logservice-oversea.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1-oversea.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"statscollector-2-oversea.agora.io",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:n.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:""};s.WEBCS_DOMAIN=["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],s.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],s.PROXY_CS=["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],s.CDS_AP=["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],s.ACCOUNT_REGISTER=["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],s.UAP_AP=["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],s.LOG_UPLOAD_SERVER="logservice.agora.io",s.EVENT_REPORT_DOMAIN="webcollector-1.agora.io",s.EVENT_REPORT_BACKUP_DOMAIN="webcollector-2.agoraio.cn",s.GATEWAY_DOMAINS=["edge.agora.io","edge.agoraio.cn"],t.setParameter=function(e,t){return void 0!==s[e]&&(s[e]=t,!0)},t.getParameter=function(e){return void 0!==s[e]?s[e]:null}},function(e,t,i){"use strict";i.r(t),i.d(t,"getBrowserInfo",(function(){return y})),i.d(t,"getBrowserVersion",(function(){return u})),i.d(t,"getBrowserOS",(function(){return p})),i.d(t,"isChrome",(function(){return n})),i.d(t,"isSafari",(function(){return s})),i.d(t,"isFireFox",(function(){return o})),i.d(t,"isOpera",(function(){return a})),i.d(t,"isEdge",(function(){return r})),i.d(t,"isQQBrowser",(function(){return l})),i.d(t,"isWeChatBrowser",(function(){return c})),i.d(t,"isLegacyChrome",(function(){return m})),i.d(t,"isSupportedPC",(function(){return h})),i.d(t,"isSupportedMobile",(function(){return d})),i.d(t,"getChromeKernelVersion",(function(){return v})),i.d(t,"isChromeKernel",(function(){return f}));var n=function(){var e=y();return e.name&&"Chrome"===e.name},s=function(){var e=y();return e.name&&"Safari"===e.name},r=function(){var e=y();return e.name&&"Edge"===e.name},o=function(){var e=y();return e.name&&"Firefox"===e.name},a=function(){var e=y();return e.name&&"OPR"===e.name},l=function(){var e=y();return e.name&&"QQBrowser"===e.name},c=function(){var e=y();return e.name&&"MicroMessenger"===e.name},h=function(){var e=p();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},d=function(){var e=p();return"Android"===e||"iOS"===e},u=function(){return y().version},p=function(){return y().os},f=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function m(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var g,v=function(){var e=navigator.userAgent.match(/chrome\/[\d]./i);return e&&e[0]&&e[0].split("/")[1]},y=(g=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===i[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(i=e),"Safari"===i[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(i[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(i=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(i=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(i=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(i=[null,"IE",e[1]]);var n=void 0,s=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in s){var o=s[r];if(o.r.test(navigator.userAgent)){n=o.s;break}}return{name:i[1],version:i[2],os:n}}(),function(){return g})},function(e,t,i){"use strict";i.r(t),i.d(t,"APErrorCode",(function(){return n})),i.d(t,"GatewayErrorCode",(function(){return s})),i.d(t,"StringUidErrorCode",(function(){return r})),i.d(t,"JOIN_GS_TRYNEXT_LIST",(function(){return o})),i.d(t,"JOIN_CS_RETRY_LIST",(function(){return a})),i.d(t,"INJECT_STREAM_STATUS",(function(){return l}));var n={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},s={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},r={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},o=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],a=["NO_SERVICE_AVAILABLE"],l={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10};t.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return r})),i(0);var n=function(e,t,i){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(t)>-1&&("string"==typeof i||isFinite(i)))return e[t]=""+i},s=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("send")&&-1===e.type.toLowerCase().indexOf("outbound")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(n(t,"audioSendBytes",e.bytesSent),n(t,"audioSendPackets",e.packetsSent),n(t,"audioSendPacketsLost",e.packetsLost)):(n(t,"videoSendBytes",e.bytesSent),n(t,"videoSendPackets",e.packetsSent),n(t,"videoSendPacketsLost",e.packetsLost),n(t,"videoSendFrameRate",e.googFrameRateSent),n(t,"videoSendResolutionWidth",e.googFrameWidthSent),n(t,"videoSendResolutionHeight",e.googFrameHeightSent))))})),t},r=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("recv")&&-1===e.type.toLowerCase().indexOf("inbound")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(n(t,"audioReceiveBytes",e.bytesReceived),n(t,"audioReceivePackets",e.packetsReceived),n(t,"audioReceivePacketsLost",e.packetsLost)):(n(t,"videoReceiveBytes",e.bytesReceived),n(t,"videoReceivePacketsLost",e.packetsLost),n(t,"videoReceivePackets",e.packetsReceived),n(t,"videoReceiveFrameRate",e.googFrameRateReceived),n(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),n(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),n(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))})),t}},function(e,t){function i(){return e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},i.apply(this,arguments)}e.exports=i},function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"e",(function(){return o})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c}));var n=i(0),s=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,i){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(i)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,i){var n;e.dispatcher.eventListeners[t]&&-1!==(n=e.dispatcher.eventListeners[t].indexOf(i))&&e.dispatcher.eventListeners[t].splice(n,1)},e.dispatchEvent=function(t){var i;for(i in e.dispatcher.eventListeners[t.type])if(e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(i)&&"function"==typeof e.dispatcher.eventListeners[t.type][i])try{e.dispatcher.eventListeners[t.type][i](t)}catch(i){n.default.debug("[".concat(e.clientId,"] Error in ").concat(t.type," event"),i)}},e.dispatchSocketEvent=function(t){var i;for(i in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(i)&&"function"==typeof e.dispatcher.eventListeners[t.type][i]&&e.dispatcher.eventListeners[t.type][i](t.msg)},e},r=function(e){var t={};return t.type=e.type,t},o=function(e){var t=r(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},a=function(e){var t=r(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},l=function(e){var t=r(e);return t.msg=e.msg,t},c=function(e){var t=r(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t}},function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(i(67)),c=i(3),h=a(i(0)),d=i(2),u=i(14),p=i(10),f=function(e){function t(t,i){var n=e.call(this)||this;return n._state=b.RELAY_STATE_IDLE,n._onStatus=function(e){h.default.debug("["+n.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&n.emit("event",y.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&n.emit("event",y.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(n._state=b.RELAY_STATE_FAILURE,n.emit("state",b.RELAY_STATE_FAILURE,w.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(n._state=b.RELAY_STATE_FAILURE,n.emit("state",b.RELAY_STATE_FAILURE,w.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},n._onClose=function(){return r(n,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(h.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",y.NETWORK_DISCONNECTED),this.state=b.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof C&&(e.message===g.WS_ABORT||e.message===g.AP_REQUEST_ABORT)?[2]:(this.emit("state",b.RELAY_STATE_FAILURE,w.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}}))}))},n.token=t.appId,n.appId=t.appId,n.cname=t.cname,n.uid=t.uid,n.sid=t.sid,n.clientId=i,n}return s(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(this.state!==b.RELAY_STATE_IDLE)throw new C(g.BAD_STATE);return this.state=b.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.updateChannelMediaRelay=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(this.state!==b.RELAY_STATE_RUNNING)throw new C(g.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.stopChannelMediaRelay=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),h.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=b.RELAY_STATE_IDLE,this.dispose(),[2]}}))}))},t.prototype.dispose=function(){h.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=b.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise((function(i,n){var s={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:c.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},r={service_name:"tele_channel",json_body:JSON.stringify(s)};u.post("https://"+e,r,(function(e){var t=null,s=null;try{t=JSON.parse(e)}catch(e){n(new C(g.AP_JSON_PARSE_ERROR,e))}0!==t.code&&n(new C(g.AP_REQUEST_ERROR,t));try{s=JSON.parse(t.json_body)}catch(e){n(new C(g.AP_JSON_PARSE_ERROR,e))}200!==s.code&&n(new C(g.AP_REQUEST_ERROR,s)),s.servers?i(s.servers):n(new C(g.AP_JSON_PARSE_ERROR,s))}),(function(e){return n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})}))},t.prototype._requestAP=function(){var e=this,t=c.getParameter("UAP_AP");return new Promise((function(i,n){setTimeout((function(){n(new C(g.AP_REQUEST_TIMEOUT))}),5e3),e.on("dispose",(function(){n(new C(g.AP_REQUEST_ABORT))})),t.forEach((function(t){e._requestOneAP(t+="/api/v1").then((function(n){h.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(n));var s=n[0],r="wss://"+s.address.replace(/\./g,"-")+".edge.agora.io:"+s.wss;i(r)})).catch((function(i){h.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(i))}))}))}))},t.prototype._connectWebsocket=function(e){return this._signal=new S(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",y.NETWORK_CONNECTED),[2]}}))}))},t.prototype._sendStartRelayMessage=function(e){return r(this,void 0,void 0,(function(){var t,i,n,s,r,a;return o(this,(function(o){switch(o.label){case 0:return this._checkSignal(),t=this._genMessage(v.StopPacketTransfer),[4,this._signal.request(t)];case 1:return o.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return o.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),i=this._genMessage(v.SetSdkProfile,e),[4,this._signal.request(i)];case 3:return o.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),n=this._genMessage(v.SetSourceChannel,e),[4,this._signal.request(n)];case 4:return o.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return o.sent(),this.emit("event",y.PACKET_JOINED_SRC_CHANNEL),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),s=this._genMessage(v.SetSourceUserId,e),[4,this._signal.request(s)];case 6:return o.sent(),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),r=this._genMessage(v.SetDestChannel,e),[4,this._signal.request(r)];case 7:return o.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return o.sent(),this.emit("event",y.PACKET_JOINED_DEST_CHANNEL),h.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),a=this._genMessage(v.StartPacketTransfer,e),[4,this._signal.request(a)];case 9:return o.sent(),this.emit("event",y.PACKET_SENT_TO_DEST_CHANNEL),this.state=b.RELAY_STATE_RUNNING,h.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}}))}))},t.prototype._sendReconnectMessage=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return this._checkSignal(),t=this._genMessage(v.Reconnect,e),[4,this._signal.request(t)];case 1:return i.sent(),[2]}}))}))},t.prototype._sendUpdateMessage=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return this._checkSignal(),t=this._genMessage(v.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return i.sent(),this.emit("event",y.PACKET_UPDATE_DEST_CHANNEL),h.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}}))}))},t.prototype._sendStopRelayMessage=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(v.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),h.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}}))}))},t.prototype._genMessage=function(e,t){var i=this,n=[],s=[],r=[],o={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:c.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},a=null;switch(e){case v.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case v.SetSourceChannel:return a=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceChannel",uid:a.uid+"",channelName:a.channelName,token:a.token||this.appId},o;case v.SetSourceUserId:return a=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceUserId",uid:this.uid+""},o;case v.SetDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){n.push(e.channelName),s.push(e.uid+""),r.push(e.token||i.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:s,token:r},o;case v.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case v.Reconnect:return o.clientRequest={command:"Reconnect"},o;case v.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case v.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){n.push(e.channelName),s.push(e.uid+""),r.push(e.token||i.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:s,token:r},o}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new C(g.WS_DISCONNECTED)},t}(l.default);t.default=f;var m=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){d.checkValidObject(e,"srcInfo");var t=e.uid,i=e.channelName,n=e.token;if(n&&!d.isValidToken(n))throw new Error("Invalid token in SrcChannelInfo");if(!d.isValidChannelName(i))throw new Error("Invalid channelName in SrcChannelInfo");if(!p.is32Uint(t))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!d.isValidChannelName(e))throw new Error("Invalid channelName in DestChannelInfo");d.checkValidObject(t,"destInfo");var i=t.uid,n=t.token,s=t.channelName;if(n&&!d.isValidToken(n))throw new Error("Invalid token in DestChannelInfo");if(!d.isValidChannelName(s))throw new Error("Invalid channelName in DestChannelInfo");if(!p.is32Uint(i))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!d.isValidChannelName(e))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=m;var g,v,y,b,w,S=function(e){function t(t,i,n,s){var r=e.call(this)||this;return r._onOpen=function(){r.emit("open")},r._onClose=function(e){r.emit("close"),r.dispose()},r._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(r.emit("status",t.serverStatus),void r.emit(t.serverStatus.command,t.serverStatus)):void 0;r.emit("req_"+t.requestId,t)},r._requestId=1,r.appId=t,r.cname=i,r.uid=n,r.sid=s,r}return s(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new C(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise((function(i,n){var s=window.setTimeout((function(){n(new C(g.WAIT_STATUS_TIMEOUT,e))}),5e3);t.once(e,(function(t){clearTimeout(s),t.state&&0!==t.state?n(new C(g.WAIT_STATUS_ERROR,e)):i()})),t.once("dispose",(function(){clearTimeout(s),n(new C(g.WS_ABORT))}))}))},t.prototype.request=function(e){var t=this;return new Promise((function(i,n){var s=t.sendMessage(e),r=window.setTimeout((function(){t.removeAllListeners("req_"+s),n(new C(g.REQUEST_TIMEOUT))}),3e3);t.once("req_"+s,(function(e){clearTimeout(r),e&&200===e.code?i(e):n(new C(g.REQUEST_FAILED,e))})),t.once("dispose",(function(){clearTimeout(r),n(new C(g.WS_ABORT))}))}))},t.prototype.connect=function(e){var t=this;return new Promise((function(i,n){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),i()},t._ws.onclose=function(e){t._ws=null,n(new C(g.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout((function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,n(new C(g.CONNECT_TIMEOUT)))}),5e3),t.once("dispose",(function(){n(new C(g.WS_ABORT))}))}))},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new C(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval((function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})}),3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(l.default),C=function(e,t,i){void 0===e&&(e=""),this.code=i,this.data=t,this.message=e};t.ChannelMediaError=C,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(g=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(v||(v={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(y=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(b=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(w=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t,i){"use strict";i.r(t),i.d(t,"isLiveTranscodingValid",(function(){return y})),i.d(t,"generateSessionId",(function(){return m})),i.d(t,"audioLevelHelper",(function(){return u})),i.d(t,"vsResHack",(function(){return g})),i.d(t,"is32Uint",(function(){return v})),i.d(t,"safeCall",(function(){return d})),i.d(t,"random",(function(){return w})),i.d(t,"popBanTip",(function(){return _})),i.d(t,"lengthInUtf8Bytes",(function(){return S})),i.d(t,"audioTimerLoop",(function(){return C})),i.d(t,"generateId",(function(){return f}));var n=i(11),s=i.n(n),r=i(4),o=i(0),a=i(27),l=i.n(a),c=i(24),h=i(15),d=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},u=function(e){return this.audioContext=Object(c.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return o.default.warning("can't find analyser in audioLevelHelper"),0},this},p=1e4;function f(){return++p}function m(){return l()().replace(/-/g,"").toUpperCase()}var g=function(e,t,i){try{o.default.debug("start vsResHack",e);var n=document.createElement("video");n.setAttribute("autoplay",""),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("playsinline",""),n.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(n),n.addEventListener("playing",(function(i){r.isFireFox()?n.videoWidth&&(o.default.debug("[vsResHack] get stream resolution: ","".concat(n.videoWidth," x ").concat(n.videoHeight),e),t(n.videoWidth,n.videoHeight),document.body.removeChild(n)):(o.default.debug("[vsResHack] get stream resolution: ","".concat(n.videoWidth," x ").concat(n.videoHeight),e),t(n.videoWidth,n.videoHeight),document.body.removeChild(n))})),Object(h.setSrcObject)(n,e)}catch(e){i(e)}},v=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},y=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var i in e)if("lowLatency"===i&&"boolean"!=typeof e[i]||"userConfigExtraInfo"===i&&"object"!==s()(e[i])||"transcodingUsers"===i&&!b(e[i])||!~t.indexOf(i)&&"number"!=typeof e[i])throw new Error("Param ["+i+"] is inValid");return!0},b=function(e){for(var t=0;t<e.length;t++)for(var i in e[t])if("number"!=typeof e[t][i])throw new Error("Param user["+t+"] - ["+i+"] is inValid");return!0},w=function(e){isNaN(e)&&(e=1e3);var t=+new Date,i=(t=(9301*t+49297)%233280)/233280;return Math.ceil(i*e)},S=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},C=function(e,t){var i=1/t,n=Object(c.a)(),s=n.createGain();s.gain.value=0,s.connect(n.destination);var r=!1;return function t(){var o=n.createOscillator();o.onended=t,o.connect(s),o.start(0),o.stop(n.currentTime+i),e(n.currentTime),r&&(o.onended=function(){})}(),function(){r=!0}},_=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var i=document.createElement("div");i.style="height: 76px; display: flex; justify-content: center; align-items: center;";var n=document.createElement("span");n.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",n.innerText="!";var s=document.createElement("span");s.innerText="This browser does not support webRTC",i.append(n),i.append(s);var r=document.createElement("div");r.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",r.innerText="OK",t.append(i),t.append(r),r.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},function(t,i,n){"use strict";var s=n(13),r=n.n(s),o=n(17),a=n.n(o),l=n(11),c=n.n(l),h=n(29),d=n.n(h),u=n(7),p=n.n(u),f=n(21),m=n(8),g=function(e){e&&e.apply(this,[].slice.call(arguments,1))},v=n(0),y=n(1),b=n(10),w=n(14),S=n(3),C=function(e){var t=Object(m.b)(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,t.host=e.host instanceof Array?e.host:[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,v.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(Object(m.d)({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){if(t.needReconnect=!0,t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={},t.connection.url){var i=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),n=t.host[t.hostIndex].split(":"),s=t.connection.url.match(/h=([^:]+)&p=(\d+)/);i?(t.turnConfig.url=i[1],Object(S.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[2])+30),Object(S.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[2])+30)):s?(t.turnConfig.url=s[1],Object(S.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(s[2])+30),Object(S.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(s[2])+30)):n&&(t.turnConfig.url=n[0],Object(S.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(n[1])+30),Object(S.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(n[1])+30))}t.connection.onopen=function(e){t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(w.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(m.d)({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(b.lengthInUtf8Bytes)(e.data);var i=JSON.parse(e.data);t.lastMsgTime=Date.now(),i.hasOwnProperty("_id")?t.dispatchEvent(Object(m.d)({type:i._id,msg:i})):i.hasOwnProperty("_type")&&t.dispatchSocketEvent(Object(m.d)({type:i._type,msg:i._message}))}},t.connection.onclose=function(i){t.needReconnect?t.isTimeout||t.isInit?(v.default.debug("["+t.clientId+"] websockect connect timeout"),y.report.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):(t.dispatchEvent(Object(m.d)({type:"disconnect",event:i})),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])):(v.default.debug("["+t.clientId+"] websockect closeed"),g(e.onFailure,i),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(m.d)({type:"close",event:i})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout((function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())}),5e3)},t.creatConnection(),t.sendMessage=function(e,i){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var n=JSON.stringify(e);t.sendbytes+=Object(b.lengthInUtf8Bytes)(n),t.connection.send(n)}else i({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close(),clearInterval(t.requestTimer),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])},t.sendSignalCommand=function(e,i){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,(function(n){n.msg&&i&&i(n.msg._result,n.msg.message),delete t.dispatcher.eventListeners[e._id]})),t.sendMessage(e,(function(e){e.reason="NOT_CONNECTED",i&&i(e.reason,e)}))},t.requests=[];var i=function(e){var i=t.requests.findIndex((function(t){return t.id===e.type}));if(i>=0)var n=t.requests.splice(i,1)[0];n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&n.callback&&n.callback(e.msg._result,e.msg._message)):v.default.warning("Detached Response",e.type,e.msg)},n=function(e){var i=this,n=t.requests.findIndex((function(e){return e.id===i.id}));n>=0&&(i=t.requests.splice(n,1)[0]),i&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",i.callback&&i.callback(e.reason,e)):v.default.warning("handleSendError",i)};return t.sendRequest=function(e,s){e=p()({_id:"_request_"+t.requestID},e),t.requestID+=1;var r={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:s};t.requests.push(r),t.addEventListener(e._id,i),t.sendMessage(e,n.bind(r))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(S.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(S.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),i=t.requests.length-1;i>=0;i--){var n=t.requests[i];n.timeoutCounter>=e?(t.requests.splice(i,1),v.default.error("Request Timeout",n.timeoutCounter,n.message),n.callback&&n.callback("TIMEOUT")):n.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(S.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,(function(){}))},t},_=function(e,t){var i={connect:function(){t.host=e,i.signal=C(t),i.on=i.signal.on,i.dispatchEvent=i.signal.dispatchEvent,i.signal.on("onopen",(function(e){i.signal.onEvent=function(e){i.dispatchEvent(Object(m.d)({type:e.event,msg:e}))},i.dispatchEvent(Object(m.d)({type:"connect",msg:e}))})),i.signal.on("onError",(function(e){onError(e.msg.code,"error")}))},getLastMsgTime:function(){return i.signal&&i.signal.lastMsgTime},getSendBytes:function(){return i.signal.getSendBytes()},getRecvBytes:function(){return i.signal.getRecvBytes()},getDuration:function(){return i.signal.getDuration()},disconnect:function(){i.signal.disconnect()},close:function(){i.signal.close()},getURL:function(){return i.signal.getURL()},reconnect:function(){i.signal.reconnect()},connectNext:function(){i.signal.connectNext()},replaceHost:function(e){i.signal.replaceHost(e)},emitSimpleMessage:function(e,t){i.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){i.signal.sendRequest(e,t)},emitReport:function(e){i.signal.sendReport(e)}};return i.connect(),i},E=n(22),T=n(5),x=n(20),k=n(4),A={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"recover",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},O={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},D={};for(var I in O){var R=O[I];D[R]&&v.default.error("Key Conflict: ".concat(R,": ").concat(O[R],"| ").concat(I)),D[R]=I}var P=function(e){return O[e]||e},M=function(e){return D[e]||e},L=n(9),N=n.n(L),V=function t(i){var n=!1,s=function(e){return{_type:"control",_message:e}},o=function(e,t){var i={};return Object.keys(t).forEach((function(e){Object(S.getParameter)("STATS_FILTER")[e]||(i[P(e)]=t[e])})),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:i}}},l=function(e){return{_type:"publish",_message:e}},h=function(e,t){var i={};return Object.keys(t).forEach((function(e){Object(S.getParameter)("STATS_FILTER")[e]||(i[P(e)]=t[e])})),{_type:"subscribe_stats",_message:{stream_id:e,stats:i}}},u=t.DISCONNECTED,w=t.CONNECTING,C=t.CONNECTED,O=t.DISCONNECTING,D=u,I=Object(m.b)(i);Object.defineProperty(I,"state",{set:function(e){var i=D;D=e,Object(x._setClientConnectionStateRecord)(I.clientId,e),e!==t.CONNECTED&&(I.hasJoined=!1),i!==e&&I.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[i],curState:t.connetionStateMap[e]})},get:function(){return D}}),I.socket=void 0,I.state=u,I.mode=i.mode,I.role=i.role,I.codec=i.codec,I.config={},I.timers={},I.timer_counter={},I.localStreams={},I.remoteStreams={},I.remoteMuteState={},I.attemps=1,I.p2p_attemps=1,I.audioLevel={},I.activeSpeaker=void 0,I.reconnectMode="tryNext",I.rejoinAttempt=0,I.hasChangeBGPAddress=!1,I.traffic_stats={},I.clientId=i.clientId,I.pingpongCounter=0,I.hasInvokeLeave=!1,I.p2ps=new Map,I.liveStreams=new Map,I.injectLiveStreams=new Map,I.remoteStreamsInChannel=new Set,I.subscribeRequestId=new Map,I.publishRequestId=0,I.hasJoined=!1,I.isFirstSuccess=!0,I.peerPublishDurationMap=new Map,function(e){var t=g;e.makeRequest=function(i,n,s){if(void 0===e.socket)return v.default.debug("[".concat(e.clientId,"] No socket available")),void t(s,T.default.INVALID_OPERATION);try{e.socket.emitRequest(i,(function(e,t){var i;"success"===e?"function"==typeof n&&n(t):"function"==typeof s&&(i=t&&t.error_code&&T.GatewayErrorCode[t.error_code]?T.GatewayErrorCode[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,s(i,t))}))}catch(n){v.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(i))),v.default.debug("[".concat(e.clientId,"] "),n),t(s,T.default.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&v.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(i){v.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(I),I.inChannelInfo={joinAt:null,duration:0},I._sendMessage=function(e,t){switch(e){case"SubscribeStats":I.makeReport(h.apply(void 0,d()(t)));break;case"SubscribeRelatedStats":I.makeReport(o.apply(void 0,d()(t)))}};var R=g;I.p2pCounter=Object(b.random)(1e5),I.generateP2PId=function(){return++I.p2pCounter},I.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},I.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},I.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},I.configPublisher=function(e){I.config=e},I.getGatewayInfo=function(e,t){I.makeRequest({_type:"gateway_info"},e,t)},I.setClientRole=function(e,t){v.default.debug("[".concat(I.clientId,"] setClientRole to ").concat(e));var i=y.report.reportApiInvoke(I.joinInfo.sid,{name:"_setClientRole",callback:t});I.makeRequest({_type:"set_client_role",_message:{role:e}},(function(){I.role=e,I.dispatchEvent({type:"client-role-changed",role:e}),i&&i(null,{role:e})}),(function(t,n){if(n&&n.code&&(t=T.GatewayErrorCode[n.code]||"UNKNOW_ERROR_"+n.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===t)return i&&i(null);v.default.error("set Client role error to "+e+": "+t),i&&i(t)}))},I.join=function(e,t,n,s){I.hasInvokeLeave=!1,e.useProxyServer&&(I.hasChangeBGPAddress=!0);var r=(new Date).getTime(),o=e.uid;if(I.inChannelInfo.joinAt&&(I.inChannelInfo.duration+=r-I.inChannelInfo.joinAt),I.inChannelInfo.joinAt=r,I.state!==w)return v.default.error("[".concat(I.clientId,"] GatewayClient.join Failed: state "),I.state),s&&s(T.default.INVALID_OPERATION),void y.report.joinGateway(e.sid,{lts:r,succ:!1,ec:T.default.INVALID_OPERATION,addr:null});if(null!=o&&parseInt(o)!==o)return v.default.error("[".concat(I.clientId,"] Input uid is invalid")),I.state=u,s&&s(T.default.INVALID_PARAMETER),void y.report.joinGateway(e.sid,{lts:r,succ:!1,ec:T.default.INVALID_PARAMETER,addr:null});var a=B.register(I,{uid:o,cname:e&&e.cname});if(a)return I.state=u,s&&s(a),void y.report.joinGateway(e.sid,{lts:r,succ:!1,ec:a,addr:null});I.joinInfo=p()({},e),I.uid=o,I.key=t,I.pingpongCounter=0,H(e,(function(t){if(I.state===O||I.state===u)return s&&s("LEAVE_BEFORE_JOIN_SUCCESS");I.state=C,v.default.debug("[".concat(I.clientId,"] Connected to gateway server")),clearInterval(I.pingTimer),I.pingTimer=setInterval((function(){var e=Object(S.getParameter)("PING_PONG_TIME_OUT");if(++I.pingpongCounter>=e){var t=Date.now();I.socket&&v.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-I.socket.getLastMsgTime(),"ms")),I.socket&&I.socket.getLastMsgTime()&&t-I.socket.getLastMsgTime()>Object(S.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(I.pingpongCounter=0,I.socket.close(),I.socket.dispatchEvent(Object(m.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var i=Date.now();I.makeRequest({_type:"ping"},(function(){I.pingpongCounter=0;var e=Date.now()-i;setTimeout((function(){Object(S.getParameter)("REPORT_STATS")&&I.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})}),1e3)}),(function(e,t){"TIMEOUT"!==e&&(v.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&I.socket&&I.socket.signal&&I.socket.signal.connection&&I.socket.signal.connection.readyState===WebSocket.OPEN&&(v.default.info("Disconnecting websocket connection"),I.socket.signal.connection.close()))}))}),3e3),I.makeRequest(function(e){var t=e.role,n=p()({},I.joinInfo.apResponse),s={session_id:I.joinInfo.sid,app_id:i.appId,channel_key:I.key,channel_name:I.joinInfo.cname,sdk_version:S.VERSION,browser:navigator.userAgent,process_id:Object(y.getProcessId)(),mode:I.mode,codec:I.codec,role:t,has_changed_gateway:Object(S.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||I.hasChangeBGPAddress,ap_response:n,optionalInfo:I.joinInfo.optionalInfo,extend:Object(S.getParameter)("JOIN_EXTEND"),details:{}};if(I.joinInfo.hasOwnProperty("stringUid")&&(s.string_uid=I.joinInfo.stringUid),I.joinInfo.aesmode&&I.joinInfo.aespassword&&(s.aes_mode=I.joinInfo.aesmode,s.aes_secret=I.joinInfo.aespassword),I.socket&&I.socket.signal&&I.socket.signal&&(n.addresses[I.socket.signal.hostIndex]&&(s.ap_response.ticket=n.addresses[I.socket.signal.hostIndex].ticket,delete n.addresses),Object(S.getParameter)("SET_DEFAULT_TURNSERVER")&&I.socket.signal.turnConfig)){var r={username:"test",credential:Object(S.getParameter)("TURN_SERVER_PASSWORD"),forceturn:Object(S.getParameter)("FORCE_TURN")};r.url=I.socket.signal.turnConfig.url,I.socket.signal.turnConfig.tcpport&&(r.tcpport=""+I.socket.signal.turnConfig.tcpport),I.socket.signal.turnConfig.udpport&&(r.udpport=""+I.socket.signal.turnConfig.udpport),I.joinInfo.turnServers.push(r)}return I.dispatchEvent({type:"join-message-hook",joinMessage:s}),{_type:"join",_message:s}}({role:I.role}),(function(t){if(y.report.joinGateway(e.sid,{lts:r,succ:!0,ec:null,vid:e.vid,addr:I.socket.getURL(),firstSuccess:I.isFirstSuccess}),I.joinSuccessLts=Date.now(),I.isFirstSuccess=!1,I.rejoinAttempt=0,I.hasJoined=!0,n&&n(t.uid),!0===t.return_vosip||!0===Object(S.getParameter)("ENABLE_LIVE_SERVER_LIST")){var i=null;try{i=I.socket.signal.connection.url}catch(e){v.default.debug("[".concat(I.clientId,"] Can not get gateway ip: ").concat(e))}i?Object(S.setParameter)("LIVE_SERVER_LIST",[i]):Object(S.setParameter)("LIVE_SERVER_LIST",[])}I.dispatchEvent({type:"join"}),clearInterval(I.timers.trafficStats),I.timers.trafficStats=setInterval((function(){I.makeRequest({_type:"traffic_stats"},(function(e){var t={};for(var i in e)t[M(i)]=e[i];if(t.peer_delay&&t.peer_delay.length){var n=[];t.peer_delay.forEach((function(e){var t={};for(var i in e)t[M(i)]=e[i];n.push(t)})),t.peer_delay=n}I.traffic_stats=t,I.traffic_stats.timestamp=Date.now();var s=I.localStreams[o]||I.localStreams[I.joinInfo.stringUid];s&&(s.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach((function(e){var i=I.remoteStreams[e.peer_uid];i&&(i.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})})),I.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})}))}),3e3)}),(function(t,i){if(v.default.error("[".concat(I.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t){try{y.report.joinGateway(e.sid,{lts:r,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:I.socket.getURL()})}catch(e){}return I.dispatchEvent({type:"onMultiIP",option:i.option})}A[t]&&I.rejoinAttempt<4?I._doWithAction(A[t],n,s):s&&s(t),y.report.joinGateway(e.sid,{lts:r,succ:!1,ec:t,addr:I.socket&&I.socket.getURL()})}))}),(function(t){v.default.error("[".concat(I.clientId,"] User join failed [").concat(t,"]")),s&&s(t),y.report.joinGateway(e.sid,{lts:r,succ:!1,ec:t,addr:I.socket.getURL()})})),this.remoteMuteState={},I.resetAudioVolumeIndication()},I.leave=function(e,t){var i=B.unregister(I);switch(i&&v.default.debug("[".concat(I.clientId,"] "),i),I.p2ps.clear(),I.state){case u:return v.default.debug("[".concat(I.clientId,"] Client Already in DISCONNECTED status")),void R(e);case O:return v.default.debug("[".concat(I.clientId,"] Client Already in DISCONNECTING status")),void R(t,T.default.INVALID_OPERATION);case w:return I.socket&&I.socket.close(),I.socket=void 0,v.default.info("[".concat(I.clientId,"] Client connecting, Leave channel success")),I.state=u,e&&e()}for(var n in I.state=O,I.channelMediaConfig&&(I.channelMediaRelayController&&I.channelMediaRelayController.dispose(),I.channelMediaRelayController=null),clearInterval(I.pingTimer),I.timers)I.timers.hasOwnProperty(n)&&clearInterval(I.timers[n]);for(var n in I.inChannelInfo.joinAt&&(I.inChannelInfo.duration+=Date.now()-I.inChannelInfo.joinAt,I.inChannelInfo.joinAt=null),I.hasJoined?I.makeRequest({_type:"leave"},(function(t){I.socket.close(),I.socket=void 0,v.default.info("[".concat(I.clientId,"] Leave channel success")),I.state=u,e&&e(t)}),(function(e){"TIMEOUT"!==e&&(v.default.error("[".concat(I.clientId,"] Leave Channel Failed"),e),I.state=C,t&&t(e))})):(I.socket&&(I.socket.close(),I.socket=void 0),v.default.info("[".concat(I.clientId,"] Leave channel before joined")),I.state=u,e&&e()),I.localStreams)if(I.localStreams.hasOwnProperty(n)){var s=I.localStreams[n];delete I.localStreams[n],void 0!==s.pc&&(s.pc.close(),s.pc=void 0)}W()},I.publish=function(e,t,i,n){var r=(new Date).getTime(),o=!1;if(e.publishLTS=r,"object"!==c()(e)||null===e)return v.default.error("[".concat(I.clientId,"] Invalid local stream")),n&&n(T.default.INVALID_LOCAL_STREAM),void y.report.publish(I.joinInfo.sid,{lts:r,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:T.default.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return v.default.error("[".concat(I.clientId,"] Invalid local media stream")),n&&n(T.default.INVALID_LOCAL_STREAM),void y.report.publish(I.joinInfo.sid,{lts:r,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:T.default.INVALID_LOCAL_STREAM});if(I.state!==C)return v.default.error("[".concat(I.clientId,"] User is not in the session")),n&&n(T.default.INVALID_OPERATION),void y.report.publish(I.joinInfo.sid,{lts:r,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:T.default.INVALID_OPERATION});var a=e.getAttributes()||{};if(e.local&&void 0===I.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var h=I.generateP2PId();if(I.p2ps.set(h,e),e.p2pId=h,void 0!==e.url)U(l({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()}),(function(t,i){"success"===t?(e.getUserId()!==i&&e.setUserId(i),I.localStreams[i]=e,e.onClose=function(){I.unpublish(e)}):v.default.error("[".concat(I.clientId,"] Publish local stream failed"),t)}));else{I.localStreams[e.getId()]=e,e.connectionSpec={callback:function(a){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution"),I.makeRequest(l({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:h,sdp:a,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:I.codec,extend:Object(S.getParameter)("PUB_EXTEND")}),(function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),v.default.info("[".concat(I.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){I.unpublish(e)},e._onAudioUnmute=function(){I.makeReport(s({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){I.makeReport(s({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){I.makeReport(s({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){I.makeReport(s({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(v.default.debug("[".concat(I.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(v.default.debug("[".concat(I.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=I.timers[e.getId()]&&(clearInterval(I.timers[e.getId()]),clearInterval(I.timers[e.getId()]+"_RelatedStats")),v.default.error("[".concat(I.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(h)),I.p2ps.delete(h),v.default.debug("[".concat(I.clientId,"] publish p2p failed: "),I.p2ps),!o)return o=!0,y.report.publish(I.joinInfo.sid,{lts:r,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:T.default.PEERCONNECTION_FAILED,publishRequestid:I.publishRequestId||0,p2pid:h}),I.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:e})),n&&n(T.default.PEERCONNECTION_FAILED);I.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(v.default.debug("[".concat(I.clientId,"] publish p2p connected: "),I.p2ps),e.getId()===e.getUserId()&&(e._isAudioMuted()?I.makeReport(s({action:"mute_local_audio",stream_id:e.getId()})):I.makeReport(s({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?I.makeReport(s({action:"mute_local_video",stream_id:e.getId()})):I.makeReport(s({action:"unmute_local_video",stream_id:e.getId()}))),!o))return o=!0,y.report.publish(I.joinInfo.sid,{lts:r,succ:!0,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null,publishRequestid:I.publishRequestId||0,p2pid:h}),i&&i()},e.pc.processSignalingMessage(t.sdp)}),(function(t,i){v.default.error("Publish Failed: ".concat(t)),y.report.publish(I.joinInfo.sid,{lts:r,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t,publishRequestid:I.publishRequestId||0,p2pid:h}),"TIMEOUT"!=t&&(I.processPublishFailure(e),n&&n(t))}))},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),optimizationMode:e.optimizationMode,isSubscriber:!1,stunServerUrl:I.stunServerUrl,turnServers:I.joinInfo.turnServers,maxAudioBW:a.maxAudioBW,minVideoBW:a.minVideoBW,maxVideoBW:a.maxVideoBW,mode:I.mode,codec:I.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,agoraStream:e,clientId:I.clientId},e.pc=Object(E.a)(e.connectionSpec),e.pc.addStream(e.stream),v.default.debug("[".concat(I.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(i){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution");var n={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:h,sdp:i};I.makeRequest(l(n),(function(t){v.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)}),(function(e,t){v.default.error("Negotiation failed ".concat(e),t,n)}))},clearInterval(I.timers[e.getId()]),I.timers[e.getId()]=setInterval((function(){if(Object(S.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(i){i.forEach((function(i){if(i&&i.id&&!/_recv$/.test(i.id)&&!/^time$/.test(i.id)&&e.getUserId()){if(-1===i.id.indexOf("outbound_rtp")&&-1===i.id.indexOf("OutboundRTP")&&-1===i.type.toLowerCase().indexOf("outbound")||"video"!==i.mediaType||(i.googFrameWidthSent=e.videoWidth+"",i.googFrameHeightSent=e.videoHeight+""),"video"===i.mediaType)try{var n=e.stream.getVideoTracks()[0];i.A_vstd=n.enabled?"0":"1"}catch(e){}if("audio"===i.mediaType)try{var s=e.stream.getAudioTracks()[0];i.A_astd=s.enabled?"0":"1"}catch(e){}if(e.getId()==e.getUserId()){var r=200*t;t++,setTimeout((function(){var e=I.socket&&I.socket.getLastMsgTime()&&Date.now()-I.socket.getLastMsgTime();e>Object(S.getParameter)("REPORT_STATS_TIMEOUT")?v.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):I.makeReport(function(e){var t={};return Object.keys(e).forEach((function(i){Object(S.getParameter)("STATS_FILTER")[i]||(t[P(i)]=e[i])})),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(i))}),r)}else r=200*t,t++,setTimeout((function(){var e=I.socket&&I.socket.getLastMsgTime()&&Date.now()-I.socket.getLastMsgTime();e>Object(S.getParameter)("REPORT_STATS_TIMEOUT")?v.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):I.makeReport(function(e){var t={};return Object.keys(e).forEach((function(i){Object(S.getParameter)("STATS_FILTER")[i]||(t[P(i)]=e[i])})),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(i))}),r)}}))}))}}),3e3);var d=function(){Object(S.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){var i,n,s=I.socket&&I.socket.getLastMsgTime()&&Date.now()-I.socket.getLastMsgTime();s>Object(S.getParameter)("REPORT_STATS_TIMEOUT")?v.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(s)):e.getId()===e.getUserId()?I.makeReport((i=t,n={},Object.keys(i).forEach((function(e){Object(S.getParameter)("STATS_FILTER")[e]||(n[P(e)]=i[e])})),{_type:"publish_related_stats",_message:{stream_type:"high",stats:n}})):I.makeReport(function(e){var t={};return Object.keys(e).forEach((function(i){Object(S.getParameter)("STATS_FILTER")[i]||(t[P(i)]=e[i])})),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))}))};d(),clearInterval(I.timers[e.getId()+"_RelatedStats"]),I.timers[e.getId()+"_RelatedStats"]=setInterval(d,1e3)}}},I.unpublish=function(e,t,i,n){if("object"!==c()(e)||null===e)return v.default.error("[".concat(I.clientId,"] Invalid local stream")),void R(n,T.default.INVALID_LOCAL_STREAM);if(I.state!==C)return v.default.error("[".concat(I.clientId,"] User not in the session")),void R(n,T.default.INVALID_OPERATION);if(null!=I.timers[e.getId()]&&(clearInterval(I.timers[e.getId()]),clearInterval(I.timers[e.getId()+"_RelatedStats"])),void 0!==I.socket)if(e.local&&void 0!==I.localStreams[e.getId()]){delete I.localStreams[e.getId()];var s={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};I.makeRequest({_type:"unpublish",_message:s}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,I.p2ps.delete(e.p2pId),I.dispatchEvent({type:"stream-unpublished",stream:e,options:t}),i&&i()}else v.default.error("[".concat(I.clientId,"] Invalid local stream")),R(n,T.default.INVALID_LOCAL_STREAM);else v.default.error("[".concat(I.clientId,"] User not in the session")),R(n,T.default.INVALID_OPERATION)},I.subscribe=function(e,t,i){var n=(new Date).getTime();e.subscribeLTS=n;var r=!1;if(v.default.info("[".concat(I.clientId,"] Gatewayclient ").concat(I.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==c()(e)||null===e)return v.default.error("[".concat(I.clientId,"] Invalid remote stream")),i&&i(T.default.INVALID_REMOTE_STREAM),void y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.INVALID_REMOTE_STREAM});if(I.state!==C&&(v.default.error("[".concat(I.clientId,"] User is not in the session")),!r))return r=!0,y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.INVALID_OPERATION}),i&&i(T.default.INVALID_OPERATION);if(!e.local&&I.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var a=I.generateP2PId();I.p2ps.set(a,e),e.p2pId=a,e.pc=Object(E.a)({callback:function(t){var s={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:I.codec,p2p_id:a,sdp:t,tcc:Object(S.getParameter)("SUBSCRIBE_TCC"),extend:Object(S.getParameter)("SUB_EXTEND")};I.makeRequest({_type:"subscribe",_message:s},(function(t){e.pc.processSignalingMessage(t.sdp)}),(function(t,s){v.default.error("[".concat(I.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),s),y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(I.processSubscribeFailure(e),i&&i(t))}))},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:I.stunServerUrl,turnServers:I.joinInfo.turnServers,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),agoraStream:e,clientId:I.clientId}),e.pc.onaddstream=function(t,i){if(e._onAudioUnmute=function(){I.makeReport(s({action:"unmute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onAudioMute=function(){I.makeReport(s({action:"mute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoUnmute=function(){I.makeReport(s({action:"unmute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoMute=function(){I.makeReport(s({action:"mute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},"ontrack"===i&&"video"===t.track.kind||"onaddstream"===i){v.default.info("[".concat(I.clientId,"] Remote stream subscribed with uid "),e.getId());var n=I.remoteStreams[e.getId()];if(I.remoteStreams[e.getId()].stream="onaddstream"===i?t.stream:t.streams[0],I.remoteStreams[e.getId()].hasVideo()){if(Object(k.isFireFox)()||Object(k.isSafari)()){var r=I.remoteStreams[e.getId()].stream;Object(b.vsResHack)(r,(function(t,i){e.videoWidth=t,e.videoHeight=i}),(function(e){return v.default.warning("[".concat(I.clientId,"] vsResHack failed: ")+e)}))}}else{var o=I.remoteStreams[e.getId()];o.peerMuteVideo=!0,I._adjustPCMuteStatus(o)}n&&n.isPlaying()&&n.elementID&&(v.default.debug("[".concat(I.clientId,"] Reload Player ").concat(n.elementID," StreamId ").concat(n.getId())),e.audioOutput=n.audioOutput,n.stop(),e.play(n.elementID,n.playOptions)),delete e.audioLevelHelper;var a=Object(m.e)({type:"stream-subscribed",stream:I.remoteStreams[e.getId()]});I.dispatchEvent(a)}},clearInterval(I.timers[e.getId()]),I.timers[e.getId()]=setInterval((function(){if(Object(S.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(i){i.forEach((function(i){if(i&&i.id){if(/_send$/.test(i.id)||/^time$/.test(i.id)||/^bweforvideo$/.test(i.id))return;-1===i.id.indexOf("inbound_rtp")&&-1===i.id.indexOf("inbound-rtp")&&-1===i.type.toLowerCase().indexOf("inbound")||"video"!==i.mediaType||(i.googFrameWidthReceived=e.videoWidth+"",i.googFrameHeightReceived=e.videoHeight+"");var n=200*t;t++;var s=e.getId();setTimeout((function(){var t=I.socket&&I.socket.getLastMsgTime()&&Date.now()-I.socket.getLastMsgTime();if(t>Object(S.getParameter)("REPORT_STATS_TIMEOUT"))v.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));else{if("video"===i.mediaType)try{var n=e.stream.getVideoTracks()[0];i.A_vrtd=n.enabled?"0":"1",e.player&&e.player.freezeTimeCounterList.length>0&&(i.A_vrft=e.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(e){}if("audio"===i.mediaType)try{var r=e.stream.getAudioTracks()[0];i.A_artd=r.enabled?"0":"1"}catch(e){}I.makeReport(h(s,i))}}),n)}}))}))}}),3e3),clearInterval(I.timers[e.getId()+"_RelatedStats"]),I.timers[e.getId()+"_RelatedStats"]=setInterval((function(){if(Object(S.getParameter)("REPORT_STATS")&&e&&e.pc){var t=I.socket&&I.socket.getLastMsgTime()&&Date.now()-I.socket.getLastMsgTime();if(t>Object(S.getParameter)("REPORT_STATS_TIMEOUT"))return void v.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){e.player&&(e.hasVideo()&&!e.peerMuteVideo&&(t.isFreeze=e.player.freezeCount>e.player.lastFreezeCount),e.player.lastFreezeCount=e.player.freezeCount),I.makeReport(o(e.getId(),t))})),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats((function(t){I.makeReport(o(e.getId(),t))}))}}),1e3),I.audioLevel[e.getId()]=0,clearInterval(I.timers[e.getId()+"audio"]),I.timers[e.getId()+"audio"]=setInterval((function(){I.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats((function(t){t.forEach((function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var i in I.audioLevel[e.getId()]<20&&(I.audioLevel[e.getId()]+=1),I.audioLevel)i!==""+e.getId()&&I.audioLevel[i]>0&&(I.audioLevel[i]-=1);var n=Object.keys(I.audioLevel).sort((function(e,t){return I.audioLevel[t]-I.audioLevel[e]}));if(I.activeSpeaker!==n[0]){var s=Object(m.a)({type:"active-speaker",uid:n[0]});I.dispatchEvent(s),I.activeSpeaker=n[0],v.default.debug("[".concat(I.clientId,"] Update active speaker: ").concat(I.activeSpeaker))}}}))}),50)}),50),e.pc.oniceconnectionstatechange=function(s){if("failed"===s)null!=I.timers[e.getId()]&&(clearInterval(I.timers[e.getId()]),clearInterval(I.timers[e.getId()]+"audio")),v.default.error("[".concat(I.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(a)),v.default.debug("[".concat(I.clientId,"] subscribe p2p failed: "),I.p2ps),r||(r=!0,i&&i(T.default.PEERCONNECTION_FAILED),y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.PEERCONNECTION_FAILED,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:a})),I.remoteStreams[e.getId()]&&I.p2ps.has(a)&&(I.p2ps.delete(a),I.dispatchEvent(Object(m.a)({type:"subP2PLost",stream:e})));else if("connected"===s&&(v.default.debug("[".concat(I.clientId,"] subscribe p2p connected: "),I.p2ps),!r)){r=!0,y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:a}),I._adjustPCMuteStatus(e);var o=!1,l=!1,c=!1,h=setInterval((function(){o&&l||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"audio"===t.mediaType){if((t.googDecodingNormal>0||t.audioOutputLevel>0)&&!o){o=!0,I.dispatchEvent({type:"first-audio-frame-decode",stream:e}),o&&l&&clearInterval(h);var i=Date.now(),n=y.report.getSessionStartTime(I.joinInfo.sid);y.report.firstAudioDecode(I.joinInfo.sid,{peerid:e.uintId,uid:I.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:a})}parseInt(t.packetsReceived)>0&&!l&&(l=!0,I.dispatchEvent({type:"first-audio-packet-received",stream:e}),o&&l&&clearInterval(h),i=Date.now(),n=y.report.getSessionStartTime(I.joinInfo.sid),y.report.firstAudioReceived(I.joinInfo.sid,{peerid:e.uintId,uid:I.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:a}))}}))}),100):clearInterval(h))}),100),d=!1,u=!1,p=setInterval((function(){d&&u||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"video"===t.mediaType){if((t.framesDecoded>0||t.googFramesDecoded>0)&&!d){d=!0,I.dispatchEvent({type:"first-video-frame-decode",stream:e}),d&&u&&clearInterval(p);var i=Date.now(),n=y.report.getSessionStartTime(I.joinInfo.sid);e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,y.report.firstVideoDecode(I.joinInfo.sid,{peerid:e.uintId,width:parseInt(t.googFrameWidthReceived)||0,height:parseInt(t.googFrameHeightReceived)||0,uid:I.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:a})}t.packetsReceived>0&&!u&&(u=!0,I.dispatchEvent({type:"first-video-packet-received",stream:e}),d&&u&&clearInterval(p),i=Date.now(),n=y.report.getSessionStartTime(I.joinInfo.sid),y.report.firstVideoReceived(I.joinInfo.sid,{peerid:e.uintId,uid:I.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:a}))}}))}),100):clearInterval(p))}),100),f=setInterval((function(){if(!c){var t=e.getId(),i=I.traffic_stats;if(i&&i.peer_delay){var n=i.peer_delay.find((function(e){return e.peer_uid==t}));if(n){if(c=!0,I.peerPublishDurationMap.get(e.getId()))return void clearInterval(f);var s=n.peer_publish_audio_duration,r=n.peer_publish_video_duration;if(void 0===s||void 0===r)return;I.peerPublishDurationMap.set(e.getId(),!0);var o=y.report.getSessionStartTime(I.joinInfo.sid),a=(s||r)+(Date.now()-i.timestamp),l=Date.now();y.report.peerPublishStatus({audiotag:s?1:-1,videotag:r?1:-1,lts:l,sid:I.joinInfo.sid,cname:I.joinInfo.cname,cid:I.joinInfo.cid,uid:I.joinInfo.uid,elapse:l-o,peer:t,peerPublishDuration:a,joinChannelSuccessElapse:l-I.joinSuccessLts,subscribeElapse:l-e.subscribeLTS}),clearInterval(f)}}}}),1e3);return e.sid=I.joinInfo.sid,t&&t()}}}else v.default.error("[".concat(I.clientId,"] Invalid remote stream")),r||(r=!0,i&&i(T.default.INVALID_REMOTE_STREAM),y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.INVALID_REMOTE_STREAM}));else v.default.error("[".concat(I.clientId,"] No such remote stream")),r||(r=!0,i&&i(T.default.NO_SUCH_REMOTE_STREAM),y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.NO_SUCH_REMOTE_STREAM}))},I.subscribeChange=function(e,t,i){var n=Date.now();v.default.info("[".concat(I.clientId,"] Gatewayclient ").concat(I.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),I._adjustPCMuteStatus(e);var s={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};I.makeRequest({_type:"subscribe_change",_message:s},(function(i){var s=Object(m.e)({type:"stream-subscribe-changed",stream:I.remoteStreams[e.getId()]});y.report.subscribe(I.joinInfo.sid,{lts:n,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:I.subscribeRequestId.get(e.getId())||0,p2pid:I.p2ps.get(e.getId())}),I.dispatchEvent(s),t&&t()}),(function(t,n){v.default.error("[".concat(I.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,n),i&&i(t,n)}))},I.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&I.p2ps.get(e.p2pId)===e&&I.p2ps.delete(e.p2pId),I.localStreams[e.getUserId()]===e&&delete I.localStreams[e.getUserId()],I.localStreams[e.getId()]===e&&delete I.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},I.processSubscribeFailure=function(e){e.p2pId&&I.p2ps.get(e.p2pId)===e&&I.p2ps.delete(e.p2pId),e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},I._adjustPCMuteStatus=function(e){!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach((function(t){if(t&&t.track&&"audio"===t.track.kind){var i=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(i=!1),t.track.enabled=!!i}else if(t&&t.track&&"video"===t.track.kind){var n=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(n=!1),t.track.enabled=!!n}}))},I.unsubscribe=function(e,t,i){if("object"!==c()(e)||null===e)return v.default.error("[".concat(I.clientId,"] Invalid remote stream")),void R(i,T.default.INVALID_REMOTE_STREAM);if(I.state!==C)return v.default.error("[".concat(I.clientId,"] User is not in the session")),void R(i,T.default.INVALID_OPERATION);if(null!=I.timers[e.getId()]&&(clearInterval(I.timers[e.getId()]),clearInterval(I.timers[e.getId()]+"audio")),null!=I.audioLevel[e.getId()]&&delete I.audioLevel[e.getId()],null!=I.timer_counter[e.getId()]&&delete I.timer_counter[e.getId()],I.remoteStreams.hasOwnProperty(e.getId())){if(!I.socket)return v.default.error("[".concat(I.clientId,"] User is not in the session")),void R(i,T.default.INVALID_OPERATION);if(e.local)return v.default.error("[".concat(I.clientId,"] Invalid remote stream")),void R(i,T.default.INVALID_REMOTE_STREAM);e.close(),e.stop();var n={stream_id:e.getId()};I.makeRequest({_type:"unsubscribe",_message:n}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,I.p2ps.delete(e.p2pId),v.default.info("[".concat(I.clientId,"] Unsubscribe stream success")),t&&t()}else R(i,T.default.NO_SUCH_REMOTE_STREAM)},I.setRemoteVideoStreamType=function(e,t){if(v.default.debug("[".concat(I.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===c()(e)&&null!==e)if(I.state===C){if(!e.local){switch(t){case I.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case I.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case I.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var i={stream_id:e.getId(),stream_type:t};I.makeRequest({_type:"switch_video_stream",_message:i},(function(){v.default.debug("SwitchVideoStream Success ".concat(i.stream_id," ").concat(i.stream_type))}),(function(e,t){v.default.error("SwitchVideoStream Error ".concat(e," ").concat(i.stream_id," ").concat(i.stream_type),t)}))}}else v.default.error("[".concat(I.clientId,"] User is not in the session"));else v.default.error("[".concat(I.clientId,"] Invalid remote stream"))},I.renewToken=function(e,t,i){e?I.key?I.state!==C?(v.default.debug("[".concat(I.clientId,"] Client is not connected. Trying to rejoin")),I.key=e,I.rejoin(),t&&t()):(v.default.debug("[".concat(I.clientId,"] renewToken from ").concat(I.key," to ").concat(e)),I.makeRequest({_type:"renew_token",_message:{token:e}},t,i)):(v.default.error("[".concat(I.clientId,"] Client is previously joined without token")),i&&i(T.default.INVALID_PARAMETER)):(v.default.error("[".concat(I.clientId,"] Invalid Token ").concat(e)),i&&i(T.default.INVALID_PARAMETER))},I.setStreamFallbackOption=function(e,t){if(v.default.debug("[".concat(I.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===c()(e)&&null!==e)if(I.state===C){if(!e.local){switch(t){case I.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case I.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case I.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var i={stream_id:e.getId(),fallback_type:t};I.makeRequest({_type:"set_fallback_option",_message:i},(function(){v.default.debug("SetStreamFallbackOption success ".concat(i.stream_id," ").concat(t))}),(function(e,n){v.default.error("Failed to SetStreamFallbackOption ".concat(i.stream_id," ").concat(t," ").concat(e),n)}))}}else v.default.error("[".concat(I.clientId,"] User is not in the session"));else v.default.error("[".concat(I.clientId,"] Invalid remote stream"))},I.enableAudioVolumeIndicator=function(e,t){I.audioVolumeIndication.enabled=!0,I.audioVolumeIndication.interval=e,I.audioVolumeIndication.smooth=t,I.resetAudioVolumeIndication()},I.resetAudioVolumeIndication=function(){if(clearInterval(I.timers.audioVolumeIndication),clearInterval(I.timers.audioVolumeSampling),I.audioVolumeIndication.enabled&&I.audioVolumeIndication.interval){var e=Math.floor(1e3*I.audioVolumeIndication.smooth/100);clearInterval(I.timers.audioVolumeSampling),I.timers.audioVolumeSampling=setInterval((function(){I.audioVolumeSampling||(I.audioVolumeSampling={});var t={};for(var i in I.remoteStreams){var n=I.remoteStreams[i];if(n.stream&&n.hasAudio()){var s=n.getAudioLevel();s>0&&s<1&&(s*=100);var r=I.audioVolumeSampling[i]||[];for(r.push(s);r.length>e;)r.shift();t[i]=r}}I.audioVolumeSampling=t}),100),clearInterval(I.timers.audioVolumeIndication),I.timers.audioVolumeIndication=setInterval((function(){if(I.socket&&I.socket.signal&&I.socket.signal.connection&&I.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in I.remoteStreams)if(I.audioVolumeSampling&&I.audioVolumeSampling[t]){var i=I.audioVolumeSampling[t],n=0;i.forEach((function(e){n+=e}));var s={uid:t,level:Math.floor(n/i.length)};s.level&&e.push(s)}var r=e.sort((function(e,t){return e.level-t.level}));v.default.debug("[".concat(I.clientId,"] volume-indicator "),JSON.stringify(r)),I.audioVolumeIndication.sortedAudioVolumes=r;var o=Object(m.a)({type:"volume-indicator",attr:r});I.dispatchEvent(o)}}),I.audioVolumeIndication.interval)}},I.closeGateway=function(){v.default.debug("[".concat(I.clientId,"] close gateway")),I.state=u,I.socket.close(),F()},I.startChannelMediaRelay=function(){var e=a()(r.a.mark((function e(t){var i,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.channelMediaRelayController){e.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return i=function(e){I.dispatchEvent({type:"channel-media-relay-event",code:e})},n=function(e,t,i){e===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(I.channelMediaRelayController.dispose(),I.channelMediaRelayController=null),I.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:i})},I.channelMediaRelayController=new N.a(I.joinInfo,I.clientId),I.channelMediaRelayController.on("event",i),I.channelMediaRelayController.on("state",n),e.prev=7,e.next=10,I.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),v.default.debug("[".concat(I.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),I.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[s=e.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),I.channelMediaRelayController&&(I.channelMediaRelayController.dispose(),I.channelMediaConfig=null,I.channelMediaRelayController=null),I.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(s,null,L.CHANNEL_MEDIA_RELAY_ERROR[s]);case 22:I.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),I.channelMediaConfig=t;case 24:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),I.updateChannelMediaRelay=function(){var t=a()(r.a.mark((function t(i){var n,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,I.channelMediaRelayController.updateChannelMediaRelay(i);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),v.default.debug("[".concat(I.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,s=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",I.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),I.dispatchEvent({type:"channel-media-relay-state",state:n,code:L.CHANNEL_MEDIA_RELAY_ERROR[s]}),I.channelMediaRelayController&&(I.channelMediaRelayController.dispose(),I.channelMediaConfig=null,I.channelMediaRelayController=null),I.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(s,null,L.CHANNEL_MEDIA_RELAY_ERROR[s]);case 18:I.channelMediaConfig=i;case 19:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),I.stopChannelMediaRelay=a()(r.a.mark((function t(){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,I.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),v.default.debug("[".concat(I.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),i=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",I.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[i]}),I.channelMediaRelayController&&(I.channelMediaRelayController.dispose(),I.channelMediaConfig=null,I.channelMediaRelayController=null),I.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(i,null,L.CHANNEL_MEDIA_RELAY_ERROR[i]);case 17:I.channelMediaConfig=null,I.channelMediaRelayController=null;case 19:case"end":return t.stop()}}),t,null,[[2,7]])}))),I.sendMetadata=function(e,t){I.makeRequest(function(e){return{_type:"send_metadata",_message:{session_id:I.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(e)))}}}(e),(function(){v.default.debug("[".concat(I.clientId,'] send metadata "').concat(e,'" success')),t&&t(null)}),(function(i){v.default.error("[".concat(I.clientId,'] send metadata "').concat(e,'" failed'),i),t&&t(i)}))};var V=function(){v.default.debug("[".concat(I.clientId,"] Reconnect gateway")),I.state=u,I.socket.close(),F(),I.reconnectMode="recover",I.state=w,j()};I.recover=V;var F=function(){for(var e in I.dispatchEvent({type:"before-clear-connection"}),I.timers)I.timers.hasOwnProperty(e)&&clearInterval(I.timers[e]);for(var e in I.remoteStreams)if(I.remoteStreams.hasOwnProperty(e)){var t=I.remoteStreams[e],i=Object(m.a)({type:"stream-removed",uid:t.getId(),stream:t});I.dispatchEvent(i)}I.p2ps.clear(),W(),q(),clearInterval(I.pingTimer)};I.rejoin=function(){I.socket&&(clearInterval(I.pingTimer),I.socket.close(),I.socket=void 0),I.state=w,j()};var j=function(e,t){I.dispatchEvent(Object(m.a)({type:"rejoin-start"})),e=e||function(e){v.default.info("[".concat(I.clientId,"] User ").concat(e," is re-joined to ").concat(I.joinInfo.cname)),I.dispatchEvent(Object(m.a)({type:"rejoin"})),I.channelMediaConfig&&I.startChannelMediaRelay(I.channelMediaConfig).then((function(){v.default.debug("[".concat(I.clientId,"] restartChannelMediaRelay success"))})).catch((function(e){v.default.debug("[".concat(I.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))})),I.liveStreams&&I.liveStreams.size&&I.liveStreams.forEach((function(e,t){e&&I.setLiveTranscoding(I.transcoding),I.startLiveStreaming(t,e)})),I.injectLiveStreams&&I.injectLiveStreams.size&&I.injectLiveStreams.forEach((function(e,t){I.addInjectStreamUrl(t,e)}))},t=t||function(e){v.default.error("[".concat(I.clientId,"] Re-join to channel failed "),e),I.dispatchEvent(Object(m.e)({type:"error",reason:e}))},I.key?(++I.rejoinAttempt,I.join(I.joinInfo,I.key,e,t)):v.default.error("[".concat(I.clientId,"] Connection recover failed [Invalid channel key]"))},H=function(e,t,i){if(I.onConnect=t,I.socket){if(I.dispatchEvent({type:"reconnect"}),"retry"===I.reconnectMode)v.default.debug("[".concat(I.clientId,"] Retry current gateway")),I.socket.reconnect();else if("tryNext"===I.reconnectMode)v.default.debug("[".concat(I.clientId,"] Try next gateway")),I.socket.connectNext();else if("recover"===I.reconnectMode){v.default.debug("[".concat(I.clientId,"] Recover gateway")),v.default.debug("[".concat(I.clientId,"] Try to reconnect choose server and get gateway list again ")),I.reconnectingCS=!0;var s=I.joinInfo&&I.joinInfo.sid;Object(x.getGatewayList)(I.joinInfo,(function(e){v.default.debug("[".concat(I.clientId,"] session:  ").concat(s," get gateway list success")),I.joinInfo.apResponse=e.res,I.reconnectingCS?I.socket.replaceHost(e.gateway_addr):v.default.debug("[".concat(I.clientId,"] session:  ").concat(s," already leave"))}))}}else I.socket=_(e.gatewayAddr,{sid:I.joinInfo.sid,clientId:I.clientId}),I.socket.on("start-connection",(function(e){I.ticket=e&&e.msg&&e.msg.ticket})),I.socket.on("on_uplink_stats",(function(e){var t={};for(var i in e)t[M(i)]=e[i];if(I.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,I.localStreams[I.uid]){var n=I.localStreams[I.uid].uplinkStats;n&&n.period_fir===t.period_fir||v.default.debug("[".concat(I.clientId,"]: Period fir change to: ").concat(t.period_fir)),I.localStreams[I.uid].uplinkStats=t}})),I.socket.on("connect",(function(){I.dispatchEvent({type:"connected"}),I.attemps=1,I.onConnect()})),I.socket.on("recover",(function(){I.state=w,v.default.debug("[".concat(I.clientId,"] Try to reconnect choose server and get gateway list again ")),I.reconnectingCS=!0;var e=I.joinInfo&&I.joinInfo.sid;Object(x.getGatewayList)(I.joinInfo,(function(t){v.default.debug("[".concat(I.clientId,"] session:  ").concat(e," get gateway list success")),I.reconnectingCS?I.socket.replaceHost(t.gateway_addr):v.default.debug("[".concat(I.clientId,"] session:  ").concat(e," already leave"))}))})),I.socket.on("disconnect",(function(e){if(v.default.debug("[".concat(I.clientId,"] Receive disconnect message")),I.state!==u){I.state=u;var t=Object(m.e)({type:"error",reason:T.default.SOCKET_DISCONNECTED});if(I.dispatchEvent(t),I.reconnectMode=0===I.p2ps.size?"tryNext":"retry",F(),I.channelMediaRelayController&&I.channelMediaRelayController.dispose(),I.channelMediaRelayController=null,1!=n){var i=1e3*Math.min(30,Math.pow(2,I.attemps)-1);if(v.default.error("[".concat(I.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(I.attemps,"] after ").concat(i/1e3," seconds")),I.hasInvokeLeave)return v.default.debug("[".concat(I.clientId,"] No reconnection because Client.leave has been invoked")),void(I.hasInvokeLeave=!1);setTimeout((function(){I.attemps++,I.state=w,I.inChannelInfo&&Date.now()-I.inChannelInfo.joinAt>Object(S.getParameter)("TICKET_RENEW_TIMEOUT")?(v.default.debug("Recovering to renew ticket"),V()):j()}),i)}}})),I.socket.on("on_add_audio_stream",(function(e){if(v.default.info("[".concat(I.clientId,"] Newly added audio stream with uid ").concat(e.uid)),I.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),I.remoteStreamsInChannel.has(e.uid)||I.remoteStreamsInChannel.add(e.uid),void 0===I.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});t.peerMuteVideo=!0,I.remoteStreams[e.uid]=t;var i=Object(m.e)({type:"stream-added",stream:t});I.dispatchEvent(i);var n=I.remoteMuteState[e.uid];n&&n.audio&&(i=Object(m.a)({type:"mute-audio",uid:e.uid}),I.dispatchEvent(i)),n&&n.video&&(i=Object(m.a)({type:"mute-video",uid:e.uid}),I.dispatchEvent(i))}y.report.onAddAudioStream(I.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:I.uid})})),I.socket.on("on_update_stream",(function(e){var t=I.remoteStreams[e.uid];if(I.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&I._adjustPCMuteStatus(t);var i=Object(m.e)({type:"stream-updated",stream:t});I.dispatchEvent(i)}else v.default.debug("[".concat(I.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid));y.report.onUpdateStream(I.joinInfo.sid,{peerid:e.uint_id||e.uid,audio:e.audio,video:e.video,uid:I.uid})})),I.socket.on("on_add_video_stream",(function(e){if(v.default.info("[".concat(I.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),I.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),I.remoteStreamsInChannel.has(e.uid)||I.remoteStreamsInChannel.add(e.uid),void 0===I.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});I.remoteStreams[e.uid]=t;var i=Object(m.e)({type:"stream-added",stream:t});I.dispatchEvent(i);var n=I.remoteMuteState[e.uid];n&&n.audio&&(i=Object(m.a)({type:"mute-audio",uid:e.uid}),I.dispatchEvent(i)),n&&n.video&&(i=Object(m.a)({type:"mute-video",uid:e.uid}),I.dispatchEvent(i))}else{var s=I.remoteStreams[e.uid];if(s.video=!0,s.peerMuteVideo=!1,s.pc&&I._adjustPCMuteStatus(s),v.default.info("[".concat(I.clientId,"] Stream changed: enable video ").concat(e.uid)),void 0!==s.stream&&s.isPlaying()){var r=s.player.elementID;s.stop(),s.play(r,s.playOptions)}}y.report.onAddVideoStream(I.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:I.uid})})),I.socket.on("on_remove_stream",(function(e){I.remoteStreamsInChannel.has(e.uid)&&I.remoteStreamsInChannel.delete(e.uid);var t=I.remoteStreams[e.uid];if(t){delete I.remoteStreams[e.uid],delete I.remoteMuteState[e.uid];var i=Object(m.e)({type:"stream-removed",stream:t});I.dispatchEvent(i),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,I.p2ps.delete(t.p2pId)),y.report.onRemoveStream(I.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:I.uid})}else v.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)})),I.socket.on("on_publish_stream",(function(e){var t=I.localStreams[e.uid],i=Object(m.e)({type:"streamPublished",stream:t});I.dispatchEvent(i)})),I.socket.on("mute_audio",(function(e){v.default.info("[".concat(I.clientId,"] rcv peer mute audio: ").concat(e.uid)),I.remoteMuteState[e.uid]=I.remoteMuteState[e.uid]||{audio:!1,video:!1},I.remoteMuteState[e.uid].audio=!0;var t=Object(m.a)({type:"mute-audio",uid:e.uid}),i=I.remoteStreams[e.uid];i?(i.peerMuteAudio=!0,i.pc&&I._adjustPCMuteStatus(i),I.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),I.socket.on("unmute_audio",(function(e){v.default.info("[".concat(I.clientId,"] rcv peer unmute audio: ").concat(e.uid)),I.remoteMuteState[e.uid]=I.remoteMuteState[e.uid]||{audio:!1,video:!1},I.remoteMuteState[e.uid].audio=!1;var t=Object(m.a)({type:"unmute-audio",uid:e.uid}),i=I.remoteStreams[e.uid];i?(i.peerMuteAudio=!1,i.pc&&I._adjustPCMuteStatus(i),I.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),I.socket.on("mute_video",(function(e){v.default.info("[".concat(I.clientId,"] rcv peer mute video: ").concat(e.uid)),I.remoteMuteState[e.uid]=I.remoteMuteState[e.uid]||{audio:!1,video:!1},I.remoteMuteState[e.uid].video=!0;var t=Object(m.a)({type:"mute-video",uid:e.uid}),i=I.remoteStreams[e.uid];i?(i.peerMuteVideo=!0,i.pc&&I._adjustPCMuteStatus(i),I.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),I.socket.on("unmute_video",(function(e){v.default.info("[".concat(I.clientId,"] rcv peer unmute video: ").concat(e.uid)),I.remoteMuteState[e.uid]=I.remoteMuteState[e.uid]||{audio:!1,video:!1},I.remoteMuteState[e.uid].video=!1;var t=Object(m.a)({type:"unmute-video",uid:e.uid}),i=I.remoteStreams[e.uid];i?(i.peerMuteVideo=!1,i.pc&&I._adjustPCMuteStatus(i),I.dispatchEvent(t)):v.default.debug("Ignoring event ".concat(e.type),e)})),I.socket.on("on_crypt_error",(function(e){v.default.warning("[".concat(I.clientId,"] stream crypt error"));var t=Object(m.a)({type:"crypt-error",cryptType:e.crypt_type});I.dispatchEvent(t)})),I.socket.on("on_user_banned",(function(e){v.default.info("[".concat(I.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=Object(m.a)({type:"client-banned",uid:e.uid,attr:e.error_code});I.dispatchEvent(t),n=!0})),I.socket.on("on_stream_fallback_update",(function(e){v.default.info("[".concat(I.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=Object(m.a)({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});I.dispatchEvent(t)})),I.socket.on("stream_recover",(function(e){v.default.info("[".concat(I.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=Object(m.a)({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});I.dispatchEvent(t)})),I.socket.on("on_p2p_lost",(function(e){v.default.debug("[".concat(I.clientId,"] p2plost: "),e,"p2ps:",I.p2ps);var t,i="DTLS failed";(t=I.localStreams[e.uid]||I.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(i="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&y.report.publish(I.joinInfo.sid,{lts:t.publishLTS,succ:!1,audio:t.hasAudio(),video:t.hasVideo(),screenshare:t.hasScreen(),audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:i,publishRequestid:I.publishRequestId||0,p2pid:I.p2ps.get(t.getId())}),"subscribe"===e.event&&y.report.subscribe(I.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:i,subscribeRequestid:I.subscribeRequestId.get(t.getId())||0,p2pid:I.p2ps.get(t.getId())})):v.default.warning("P2PLost Stream Not found",e),v.default.debug("[".concat(I.clientId,"] p2plost:"),e.p2pid),(t=I.p2ps.get(e.p2pid))&&(I.p2ps.delete(e.p2pid),t.local?I.dispatchEvent(Object(m.a)({type:"pubP2PLost",stream:t,attr:i})):I.remoteStreams[t.getId()]&&I.dispatchEvent(Object(m.a)({type:"subP2PLost",stream:t,attr:i})))})),I.socket.on("on_token_privilege_will_expire",(function(e){v.default.debug("[".concat(I.clientId,"] Received Message onTokenPrivilegeWillExpire")),I.dispatchEvent(Object(m.a)({type:"onTokenPrivilegeWillExpire"}))})),I.socket.on("on_token_privilege_did_expire",(function(){v.default.warning("[".concat(I.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),I.closeGateway(),I.dispatchEvent(Object(m.a)({type:"onTokenPrivilegeDidExpire"}))})),I.socket.on("enable_local_video",(function(e){I.dispatchEvent(Object(m.a)({type:"enable-local-video",uid:e.uid}))})),I.socket.on("disable_local_video",(function(e){I.dispatchEvent(Object(m.a)({type:"disable-local-video",uid:e.uid}))})),I._doWithAction=function(e,t,i){"tryNext"===e?function(e,t){v.default.debug("[".concat(I.clientId,"] Connect next gateway")),I.state=u,I.socket.close(),F(),I.reconnectMode="tryNext",I.state=w,j(e,t)}(t,i):"retry"===e?function(e,t){v.default.debug("[".concat(I.clientId,"] Reconnect gateway")),I.state=u,I.socket.close(),F(),I.reconnectMode="retry",I.state=w,j(e,t)}(t,i):"quit"===e?(v.default.debug("[".concat(I.clientId,"] quit gateway")),I.state=u,I.socket.close(),F()):"recover"===e&&V()},I.socket.on("on_notification",(function(e){if(v.default.debug("[".concat(I.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===T.GatewayErrorCode[e.code])return I.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?I._doWithAction(A[T.GatewayErrorCode[e.code]]):e.action&&I._doWithAction(e.action)})),I.socket.on("on_user_offline",(function(e){var t=Object(m.a)({type:"peer-leave",uid:e.uid});if(I.remoteStreamsInChannel.has(e.uid)&&I.remoteStreamsInChannel.delete(e.uid),I.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=I.remoteStreams[e.uid]),t.reason=e.reason,I.dispatchEvent(t),I.remoteStreams.hasOwnProperty(e.uid)){v.default.info("[".concat(I.clientId,"] closing stream on peer leave"),e.uid);var i=I.remoteStreams[e.uid];i.close(),delete I.remoteStreams[e.uid],delete I.remoteMuteState[e.uid],y.report.onRemoveStream(I.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:I.uid}),void 0!==i.pc&&(i.pc.close(),i.pc=void 0,I.p2ps.delete(i.p2pId))}I.timers.hasOwnProperty(e.uid)&&(clearInterval(I.timers[e.uid]),clearInterval(I.timers[e.uid]+"_RelatedStats"),delete I.timers[e.uid]),null!=I.audioLevel[e.uid]&&delete I.audioLevel[e.uid],null!=I.timer_counter[e.uid]&&delete I.timer_counter[e.uid]})),I.socket.on("onUplinkStats",(function(e){})),I.socket.on("liveStreamingStarted",(function(e){var t=Object(m.c)({type:"liveStreamingStarted",url:e.url});I.dispatchEvent(t)})),I.socket.on("liveStreamingFailed",(function(e){var t=Object(m.c)({type:"liveStreamingFailed",url:e.url});I.dispatchEvent(t)})),I.socket.on("liveStreamingStopped",(function(e){var t=Object(m.c)({type:"liveStreamingStopped",url:e.url});I.dispatchEvent(t)})),I.socket.on("liveTranscodingUpdated",(function(e){var t=Object(m.c)({type:"liveTranscodingUpdated",reason:e.reason});I.dispatchEvent(t)})),I.socket.on("streamInjectedStatus",(function(e){var t=Object(m.c)({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});I.dispatchEvent(t)})),I.socket.on("on_user_online",(function(e){I.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID"),I.dispatchEvent({type:"peer-online",uid:e.uid})})),I.socket.on("receive_metadata",(function(e){I.joinInfo.stringUid&&"string"!=typeof e.uid&&v.default.error("StringUID is Mixed with UintUID");var t=decodeURIComponent(escape(window.atob(e.metadata)));v.default.debug("[".concat(I.clientId,"] received ").concat(e.uid," metadata: ").concat(t)),I.dispatchEvent({type:"receive-metadata",uid:e.uid,metadata:t})}))},U=function(e,t){if(void 0!==I.socket)try{I.socket.emitSimpleMessage(e,(function(e,i){t&&t(e,i)}))}catch(e){v.default.error("[".concat(I.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else v.default.error("[".concat(I.clientId,"] Error in sendSimpleSdp [socket not ready]"))},q=function(){for(var e in I.localStreams)if(void 0!==I.localStreams[e]){var t=I.localStreams[e];delete I.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},W=function(){for(var e in I.remoteStreamsInChannel.clear(),I.remoteStreams)if(I.remoteStreams.hasOwnProperty(e)){var t=I.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete I.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return I},B={_gatewayClients:{},register:function(e,t){if(!t.uid){var i="NO_UID_PROVIDED";return v.default.error("[".concat(e.clientId,"] "),i,t),i}return t.cname?this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e?(i="UID_CONFLICT",v.default.error("[".concat(e.clientId,"] "),i,t),i):(v.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null):(i="NO_CHANNEL_PROVIDED",v.default.error("[".concat(e.clientId,"] "),i,t),i)},unregister:function(e){var t=e&&e.uid,i=e.joinInfo&&e.joinInfo.cname;if(!t||!i){var n="INVALID_GATEWAYCLIENT";return v.default.error("[".concat(e.clientId,"] "),n),n}if(this._gatewayClients[i]&&this._gatewayClients[i][t])return this._gatewayClients[i][t]!==e?(n="GATEWAYCLIENT_UID_CONFLICT",v.default.error("[".concat(e.clientId,"] "),n),n):(v.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[i][t],null);n="GATEWEAY_CLIENT_UNREGISTERED",v.default.error("[".concat(e.clientId,"] "),n)}};V.DISCONNECTED=0,V.CONNECTING=1,V.CONNECTED=2,V.DISCONNECTING=3,V.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},i.a=V},function(e,t,i){e.exports=i(62)},function(e,t,i){"use strict";i.r(t),i.d(t,"post",(function(){return h})),i.d(t,"shouldUseHttps",(function(){return d})),i.d(t,"getHTTPSendBytes",(function(){return a})),i.d(t,"getHTTPRecvBytes",(function(){return l})),i.d(t,"resetHTTPByetsCount",(function(){return c}));var n=i(3),s=i(10),r=0,o=0,a=function(){return r},l=function(){return o},c=function(){r=0,o=0},h=function(e,t,i,a,l){var c=new XMLHttpRequest;if(c.timeout=t.timeout||Object(n.getParameter)("HTTP_CONNECT_TIMEOUT"),c.open("POST",e,!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),l)for(var h in l)"withCredentials"==h?c.withCredentials=!0:c.setRequestHeader(h,l[h]);c.onload=function(e){o+=Object(s.lengthInUtf8Bytes)(c.responseText),i&&i(c.responseText)},c.onerror=function(t){a&&a(t,e)},c.ontimeout=function(t){a&&a(t,e)};var d=JSON.stringify(t);r+=Object(s.lengthInUtf8Bytes)(d),c.send(d)},d=function(){return"https:"==document.location.protocol}},function(e,t,i){"use strict";i.r(t),i.d(t,"RTCPeerConnection",(function(){return _})),i.d(t,"getUserMedia",(function(){return o})),i.d(t,"attachMediaStream",(function(){return a})),i.d(t,"reattachMediaStream",(function(){return l})),i.d(t,"setSrcObject",(function(){return p})),i.d(t,"getSrcObject",(function(){return f})),i.d(t,"webrtcDetectedBrowser",(function(){return c})),i.d(t,"webrtcDetectedVersion",(function(){return h})),i.d(t,"webrtcMinimumVersion",(function(){return d})),i.d(t,"webrtcTesting",(function(){return E})),i.d(t,"webrtcUtils",(function(){return v}));var n=i(11),s=i.n(n),r=i(4),o=null,a=null,l=null,c=null,h=null,d=null,u=null,p=null,f=null,m=null,g={addStream:null},v={log:function(){},extractVersion:function(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i])}};if("object"==("undefined"==typeof window?"undefined":s()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(p=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},f=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}):(p=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),o=window.navigator&&window.navigator.getUserMedia):(p=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),a=function(e,t){p(e,t)},l=function(e,t){p(e,f(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var y in v.log("This appears to be Firefox"),c="firefox",h=v.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),d=31,m=mozRTCPeerConnection,g)g[y]=m.prototype[y];if(u=function(e,t){if(h<38&&e&&e.iceServers){for(var i=[],n=0;n<e.iceServers.length;n++){var s=e.iceServers[n];if(s.hasOwnProperty("urls"))for(var r=0;r<s.urls.length;r++){var o={url:s.urls[r]};0===s.urls[r].indexOf("turn")&&(o.username=s.username,o.credential=s.credential),i.push(o)}else i.push(e.iceServers[n])}e.iceServers=i}var a=new m(e,t);for(var l in g)a[l]=g[l];return a},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),o=function(e,t,i){var n=function(e){if("object"!==s()(e)||e.require)return e;var t=[];return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n=e[i]="object"===s()(e[i])?e[i]:{ideal:e[i]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(i),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[i]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var r={};r[i]="number"==typeof n.ideal?{min:n.ideal,max:n.ideal}:n.ideal,e.advanced.push(r),delete n.ideal,Object.keys(n).length||delete e[i]}}})),t.length&&(e.require=t),e};return h<38&&(v.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=n(e.audio)),e.video&&(e.video=n(e.video)),v.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,i)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:C,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},h<41){var b=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return b().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var y in v.log("This appears to be Chrome"),c="chrome",h=v.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),d=38,m=webkitRTCPeerConnection,g)g[y]=m.prototype[y];u=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var i=new m(e,t);for(var n in g)i[n]=g[n];var s=i.getStats.bind(i);return i.getStats=function(e,t,i){var n=arguments;n.length>0&&"function"==typeof e&&(t?(i=t,t=e,n=[e=null,t,i]):(t=e,n=[e=null,t]));var r=function(e){var t={};return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t};if(n.length>=2){var o=function(e){n[1](r(e))};return s.apply(this,[o,n[0]])}return s()},i},["createOffer","createAnswer"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===s()(arguments[0])){var i=1===arguments.length?arguments[0]:void 0;return new Promise((function(n,s){t.apply(e,[n,s,i])}))}return t.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,i=this;return new Promise((function(n,s){t.apply(i,[e[0],function(){n(),e.length>=2&&e[1].apply(null,[])},function(t){s(t),e.length>=3&&e[2].apply(null,[t])}])}))}}));var w=function(e){if("object"!==s()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"===s()(e[i])?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[r("min",i)]=n.ideal,t.optional.push(o),(o={})[r("max",i)]=n.ideal,t.optional.push(o)):(o[r("",i)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",i)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(o=function(e,t,i){return e.audio&&(e.audio=w(e.audio)),e.video&&(e.video=w(e.video)),v.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,i)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:C,enumerateDevices:function(){return new Promise((function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources((function(i){e(i.map((function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}})))}))}))}}),navigator.mediaDevices.getUserMedia){if((Object(r.getBrowserVersion)()?Number(Object(r.getBrowserVersion)().split(".")[0]):void 0)<46){var S=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return v.log("spec:   "+JSON.stringify(e)),e.audio=w(e.audio),e.video=w(e.video),v.log("chrome: "+JSON.stringify(e)),S(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return C(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){v.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){v.log("Dummy mediaDevices.removeEventListener called.")}),a=function(e,t){h>=43?p(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:v.log("Error attaching stream to element.")},l=function(e,t){h>=43?p(e,f(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(v.log("This appears to be Edge"),c="edge",h=v.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),d=12):v.log("Browser does not appear to be WebRTC-capable");else v.log("This does not appear to be a browser"),c="not a browser";function C(e){return new Promise((function(t,i){o(e,t,i)}))}var _,E={};try{Object.defineProperty(E,"version",{set:function(e){h=e}})}catch(e){}u?_=u:"undefined"!=typeof window&&(_=window.RTCPeerConnection)},function(e,t,i){"use strict";var n=i(13),s=i.n(n),r=i(17),o=i.n(r),a=i(49),l=i.n(a),c=i(4),h=i(1),d=i(2),u=i(0),p=(i(24),i(3),i(5),i(50)),f=i.n(p),m=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function g(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),i=t.length,n=e,s=n.length,r=new Uint8Array(s),o=new Uint8Array(256),a=0;a<256;a++)o[a]=a;for(var l=0,c=0;c<256;c++){var h=[o[l=(l+o[c]+t[c%i])%256],o[c]];o[c]=h[0],o[l]=h[1]}var d=0;l=0;for(var u=0;u<0+s;u++){var p=[o[l=(l+o[d=(d+1)%256])%256],o[d]];o[d]=p[0],o[l]=p[1],u>=0&&(r[u-0]=n[u-0]^o[(o[d]+o[l])%256])}var f=String.fromCharCode.apply(null,r);return Function("var winSize = 5; return `"+f+"`")()}function v(e,t){var i=g(t),n=f.a.createProgramFromSources(e,[g(m),i]),s=e.getAttribLocation(n,"a_position"),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(s);var o=2,a=e.FLOAT,l=!1,c=0,h=0;e.vertexAttribPointer(s,o,a,l,c,h);var d=e.getAttribLocation(n,"a_texCoord"),u=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(d),e.vertexAttribPointer(d,o=2,a=e.FLOAT,l=!1,c=0,h=0),n}var y=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function b(e,t,i){var n=e.gl;this.program=v(n,y),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY");n.uniform1f(e,1)}}var w=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function S(e,t,i){var n=e.gl,s=1/t,r=1/i,o=5;this.program=v(n,w),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY"),t=n.getUniformLocation(this.program,"u_singleStepOffset"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform2f(t,s,r),n.uniform1f(i,o),n.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){s=1/e,r=1/t}}var C=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function _(e,t,i){var n=e.gl,s=1/t,r=1/i,o=5;this.program=v(n,C),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY"),t=n.getUniformLocation(this.program,"u_singleStepOffset"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform2f(t,s,r),n.uniform1f(i,o),n.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){s=1/e,r=1/t}}var E=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function T(e,t,i){var n=e.gl,s=1/t,r=1/i,o=5;this.program=v(n,E),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY"),t=n.getUniformLocation(this.program,"u_singleStepOffset"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform2f(t,s,r),n.uniform1f(i,o),n.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){s=1/e,r=1/t}}var x=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function k(e,t,i){var n=e.gl,s=5,r=.1,o=.5,a=175/180*3.141593,l=115/180*3.141593,c=173/180*3.141593,h=116/180*3.141593,d=2.04203545,u=0,p=0,f=0,m=[],g=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],b=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=v(n,x),this.setUniforms=function(){var t=n.getUniformLocation(this.program,"u_flipY"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform1f(i,s),n.uniform1f(t,1);var g=n.getUniformLocation(this.program,"light");n.uniform1f(g,r);var v=n.getUniformLocation(this.program,"redness");n.uniform1f(v,o);var y=n.getUniformLocation(this.program,"skin_he_max"),b=n.getUniformLocation(this.program,"skin_he_min"),w=n.getUniformLocation(this.program,"skin_hc_max"),S=n.getUniformLocation(this.program,"skin_hc_min"),C=n.getUniformLocation(this.program,"skin_hc_axis"),_=n.getUniformLocation(this.program,"facts_rotate_c"),E=n.getUniformLocation(this.program,"facts_rotate_le"),T=n.getUniformLocation(this.program,"facts_rotate_ge");n.uniform1f(y,a),n.uniform1f(b,l),n.uniform1f(w,c),n.uniform1f(S,h),n.uniform1f(C,d),n.uniform1f(_,u),n.uniform1f(E,p),n.uniform1f(T,f);var x=n.getUniformLocation(this.program,"u_originImage");n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,e.inputTexture),n.uniform1i(x,2);for(var k=["lighten_lut"],A=[n.TEXTURE3],O=0;O<k.length;O++){var D=n.getUniformLocation(this.program,k[O]);n.activeTexture(A[O]),n.bindTexture(n.TEXTURE_2D,m[O]),n.uniform1i(D,O+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(s=e.denoiseLevel),void 0!==e.lightLevel&&(r=e.lightLevel),void 0!==e.rednessLevel&&this._updateRedness(o=e.rednessLevel),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,i,n=3.141593,s=e,r=s;s>1&&(s=1),s<0&&(s=0),r>1&&(r=1),r<0&&(r=0),u=.8*s,r<.8&&(r=0),(d=(117-4*r)/180*n)<(h=(116-4*r)/180*n)&&(d=h),h<n/2&&(h=n/2),d<n/2&&(d=n/2),(l=(115-4*r)/180*n)<n/2&&(l=n/2),(c=173/180*n)>n&&(c=n),d>n&&(d=n),(a=175/180*n)>n&&(a=n),i=c-d,f=(t=a-c)>.01?u*i/t:u,i=d-h,p=(t=h-l)>.01?u*i/t:u},this._updateLut=function(e){var t=null;0==e&&(t=y),1==e&&(t=b),2==e&&(t=g);for(var i=[new Uint8Array(t)],s=[256],r=[1],o=0;o<i.length;o++)n.bindTexture(n.TEXTURE_2D,m[o]),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,s[o],r[o],0,n.LUMINANCE,n.UNSIGNED_BYTE,i[o])},this._init=function(){for(var e=[new Uint8Array(y)],t=[256],i=[1],s=0;s<e.length;s++){var r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,t[s],i[s],0,n.LUMINANCE,n.UNSIGNED_BYTE,e[s]),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),m.push(r)}},this._init()}var A=!1;function O(){this.programs=[];var e=this,t=null,i=null;e.gl=null,e.inputTexture=null;var n=[],s=[],r=0,o=0;e._initGl=function(i,a){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var l=0;l<4;l++){var c=t.createTexture();t.bindTexture(t.TEXTURE_2D,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),l<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,a,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,a,i,0,t.RGBA,t.UNSIGNED_BYTE,null);var h=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,h),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,c,0),n.push(c),s.push(h)}t.viewport(0,0,i,a),r=i,o=a},e.render=function(a){if(t){var l=0;o==a.videoWidth&&r===a.videoHeight&&(l=2),t.viewport(0,0,a.videoWidth,a.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a);for(var c=A?e.programs.length-1:0,h=0;h<=c;h++){var d=e.programs[h].program;t.useProgram(d);var u=t.getUniformLocation(d,"u_image");e.programs[h].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,s[l+h%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n[l+h%2]),t.uniform1i(u,0)}t.useProgram(i);var p=t.getUniformLocation(i,"u_flipY");t.uniform1f(p,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){A=e},e.init=function(n,s,r){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=r.getContext("webgl"),e.gl=t,e._initGl(n,s),e.programs.push(new b(this,n,s)),e.programs.push(new S(this,n,s)),e.programs.push(new _(this,n,s)),e.programs.push(new T(this,n,s)),e.programs.push(new k(this,n,s)),i=e.programs[0].program},e.release=function(){e.gl=null,t=null,i=null,e.inputTexture=null,e.programs=[],n=[],s=[]},e.setDenoiseLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({denoiseLevel:t})}))},e.setLightLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lightLevel:t})}))},e.setRednessLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({rednessLevel:t})}))},e.setContrastLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})}))},e.setSize=function(t,i){e.programs.forEach((function(e){e.setSize&&e.setSize(t,i)}))}}O._instance=null,O.getInstance=function(){return O._instance||(O._instance=new O),O._instance},t.a={addVideoEffectCapability:function(e){e.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(e.videoEffect.fps=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(t){return new Promise((function(i){e.videoEffect.canvas||(e.videoEffect.canvas=document.createElement("canvas")),e.videoEffect.video||(e.videoEffect.video=document.createElement("video")),e.videoEffect.video.setAttribute("autoplay",""),e.videoEffect.video.setAttribute("muted",""),e.videoEffect.video.muted=!0,e.videoEffect.video.setAttribute("playsinline",""),e.videoEffect.video.setAttribute("style","display:none"),e.videoEffect.video.srcObject=t;var n=t.getVideoTracks()[0].getSettings(),s=n.width,r=n.height;console.log("Width: ".concat(s,", Height: ").concat(r)),e.videoEffect.canvas.setAttribute("width",s),e.videoEffect.canvas.setAttribute("height",r),e.videoEffect.video.setAttribute("width",s),e.videoEffect.video.setAttribute("height",r);var o=O.getInstance();o.init(e.videoEffect.video.width,e.videoEffect.video.height,e.videoEffect.canvas),o.setDenoiseLevel(e.videoEffect.denoiseLevel),o.setLightLevel(e.videoEffect.lightLevel),o.setRednessLevel(e.videoEffect.rednessLevel),o.setContrastLevel(e.videoEffect.lighteningContrastLevel),e.videoEffect.video.addEventListener("playing",(function t(){var n=e.videoEffect.canvas.captureStream(e.videoEffect.fps);e.videoEffect.video.removeEventListener("playing",t,!0),i([n.getVideoTracks()[0],e.videoEffect.video])}),!0),e.videoEffect.video.play()}))},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return u.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var i=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}));if(i&&i.replaceTrack&&t)return i.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=e.videoEffect.enableBeauty?e._disableEffect():Promise.resolve(),O.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then((function(t){var i=l()(t,2),n=i[1];e.videoEffect.canvasVideoTrack=i[0];var s=O.getInstance();return requestAnimationFrame((function t(){e.videoEffect.enableBeauty&&s.render(n),e.videoEffect.videoContextInited&&requestAnimationFrame(t)})),c.isChrome()&&document.addEventListener("visibilitychange",(function(){document,document.hidden?e.videoEffect.stopChromeBackgroundLoop=function(e,t){var i=1/t,n=new AudioContext,s=n.createGain();s.gain.value=0,s.connect(n.destination),function t(){var o=n.createOscillator();o.onended=t,o.connect(s),o.start(0),o.stop(n.currentTime+i),e(),r&&(o.onended=function(){n.close()})}();var r=!1;return function(){r=!0}}((function(){e.videoEffect.enableBeauty&&s.render(n)}),e.videoEffect.fps):e.videoEffect.stopChromeBackgroundLoop&&(e.videoEffect.stopChromeBackgroundLoop(),e.videoEffect.stopChromeBackgroundLoop=null)}),!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()})):(u.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(e.videoEffect.canvas),"video"===t.tagName.toLowerCase())){var i=t.getAttribute("style");e.videoEffect.canvas.setAttribute("style",i),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&e.videoEffect.enableBeauty&&e.videoEffect.canvas){e.player.div.removeChild(e.videoEffect.canvas);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(e.videoEffect.canvas.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;return e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}))),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack?t.replaceTrack(e.videoEffect.canvasVideoTrack):Promise.resolve()},e.setBeautyEffectOptions=function(){var t=o()(s.a.mark((function t(i,n){var r,o=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(d.checkValidBoolean)(i,"enabled"),r=O.getInstance(),e.videoEffect.enableBeauty==i){t.next=14;break}if(r.setEnableBeauty(i),!i){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:e.videoEffect.enableBeauty=i,h.report.reportApiInvoke(e.sid,{callback:null,options:o,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(i){t.next=16;break}return t.abrupt("return");case 16:if(!n){t.next=20;break}Object(d.checkValidObject)(n,"options"),t.next=21;break;case 20:return t.abrupt("return");case 21:if(void 0!==n.smoothnessLevel&&(Object(d.checkValidFloatNumber)(n.smoothnessLevel,"smoothnessLevel",0,1),e.videoEffect.denoiseLevel=10*n.smoothnessLevel,e.videoEffect.denoiseLevel<.1&&(e.videoEffect.denoiseLevel=.1),r.setDenoiseLevel(e.videoEffect.denoiseLevel)),void 0!==n.lighteningLevel&&(Object(d.checkValidFloatNumber)(n.lighteningLevel,"lighteningLevel",0,1),e.videoEffect.lightLevel=n.lighteningLevel/2,e.videoEffect.lightLevel<.01&&(e.videoEffect.lightLevel=.01),r.setLightLevel(e.videoEffect.lightLevel)),void 0!==n.rednessLevel&&(Object(d.checkValidFloatNumber)(n.rednessLevel,"rednessLevel",0,1),e.videoEffect.rednessLevel=n.rednessLevel,e.videoEffect.rednessLevel<.01&&(e.videoEffect.rednessLevel=.01),r.setRednessLevel(e.videoEffect.rednessLevel)),void 0===n.lighteningContrastLevel){t.next=29;break}if(0===n.lighteningContrastLevel||1===n.lighteningContrastLevel||2===n.lighteningContrastLevel){t.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:e.videoEffect.lighteningContrastLevel=parseFloat(n.lighteningContrastLevel),r.setContrastLevel(e.videoEffect.lighteningContrastLevel);case 29:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()},restoreVideoEffect:function(e){return e.videoEffect.enableBeauty?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){e.videoEffect.enableBeauty&&e.videoEffect.canvas&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){return e.videoEffect.enableBeauty?e._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(e){return!!(e.videoEffect.enableBeauty&&e.videoEffect&&e.videoEffect.videoContextInited)&&(u.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(e,t){function i(e,t,i,n,s,r,o){try{var a=e[r](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,s)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var o=e.apply(t,n);function a(e){i(o,s,r,a,l,"next",e)}function l(e){i(o,s,r,a,l,"throw",e)}a(void 0)}))}}},function(e,t,i){"use strict";var n=i(36),s=Object.prototype.toString;function r(e){return"[object Array]"===s.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function i(i,n){t[n]="object"==typeof t[n]&&"object"==typeof i?e(t[n],i):i}for(var n=0,s=arguments.length;n<s;n++)c(arguments[n],i);return t},deepMerge:function e(){var t={};function i(i,n){t[n]="object"==typeof t[n]&&"object"==typeof i?e(t[n],i):"object"==typeof i?e({},i):i}for(var n=0,s=arguments.length;n<s;n++)c(arguments[n],i);return t},extend:function(e,t,i){return c(t,(function(t,s){e[s]=i&&"function"==typeof t?n(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(7),s=i.n(n),r=i(8),o=i(0),a=i(5);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var c=new function(){var e=Object(r.b)();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,i){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo((function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()}),(function(t){o.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,i&&i(t)}))},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return o.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then((function(t){e&&setTimeout((function(){e(t)}),0)})).catch((function(e){t&&t(e)}))},e._reloadDevicesInfo=function(t,i){var n=[];e._enumerateDevices((function(i){var r=Date.now();for(var a in i.forEach((function(t){var i=e.devicesHistory[t.deviceId];if((i?i.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var s=i||{initAt:r};s.device=t,s.state=e.deviceStates.ACTIVE,n.push(s),e.devicesHistory[t.deviceId]=s}e.devicesHistory[t.deviceId].lastReloadAt=r})),e.devicesHistory){var l=e.devicesHistory[a];l&&l.state==e.deviceStates.ACTIVE&&l.lastReloadAt!==r&&(l.state=e.deviceStates.INACTIVE,n.push(l)),l.lastReloadAt=r}e.state==e.states.INITED&&n.forEach((function(t){var i=s()({},t);switch(t.device.kind){case"audioinput":i.type="recordingDeviceChanged";break;case"audiooutput":i.type="playoutDeviceChanged";break;case"videoinput":i.type="cameraChanged";break;default:o.default.warning("Unknown device change",i),i.type="unknownDeviceChanged"}e.dispatchEvent(i)})),t&&t()}),i)},e.getDeviceById=function(t,i,n){e.getDevices((function(e){for(var s=0;s<e.length;s++){var r=e[s];if(r&&r.deviceId===t)return i&&i(r)}return n&&n()}))},e.searchDeviceNameById=function(t){var i=e.devicesHistory[t];return i?i.device.label||i.device.deviceId:null},e.getDevices=function(t,i){e._enumerateDevices(t,(function(e){i&&i(e.name+": "+e.message)}))},e.getVideoCameraIdByLabel=function(t,i,n){e.getCameras((function(e){var s,r=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}(e);try{for(r.s();!(s=r.n()).done;){var o=s.value;if(o.label===t)return i&&i(o.deviceId)}}catch(e){r.e(e)}finally{r.f()}return n&&n(a.default.NOT_FIND_DEVICE_BY_LABEL)}),n)},e.getRecordingDevices=function(t,i){return e._enumerateDevices((function(e){var i=e.filter((function(e){return"audioinput"==e.kind}));t&&t(i)}),(function(e){i&&i(e)}))},e.getPlayoutDevices=function(t,i){return e._enumerateDevices((function(e){var i=e.filter((function(e){return"audiooutput"==e.kind}));t&&t(i)}),(function(e){i&&i(e)}))},e.getCameras=function(t,i){return e._enumerateDevices((function(e){var i=e.filter((function(e){return"videoinput"==e.kind}));t&&t(i)}),(function(e){i&&i(e)}))},e._init((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(function(){e._reloadDevicesInfo()})),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)})),e}},function(e,t,i){"use strict";i.r(t),i.d(t,"_getReconnectCSTimer",(function(){return C})),i.d(t,"_setClientConnectionStateRecord",(function(){return _})),i.d(t,"getGatewayList",(function(){return T})),i.d(t,"getUserAccount",(function(){return k}));var n=i(11),s=i.n(n),r=i(13),o=i.n(r),a=i(17),l=i.n(a),c=i(3),h=(i(4),i(0)),d=i(14),u=i(1),p=i(5),f=function(e,t){var i=!1,n=0,s={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:c.VERSION,seq:0,requestId:1};Object(c.getParameter)("PROXY_CS").map((function(r){var o=(new Date).getTime();m("https://"+r+"/api/v1",s,(function(s,a){if(s)return h.default.debug("["+e.clientId+"] Request proxy server failed: ",s),n++,u.report.requestProxyAppCenter(e.sid,{lts:o,succ:!1,APAddr:r,workerManagerList:null,ec:JSON.stringify(s),response:JSON.stringify({err:s,res:a})}),void(n>=Object(c.getParameter)("PROXY_CS").length&&t&&t("Get proxy server failed: request all failed"));if(!i)if((a=JSON.parse(a)).json_body){var l=JSON.parse(a.json_body);if(h.default.debug("["+e.clientId+"] App return:",l.servers),200!==l.code)h.default.debug("["+e.clientId+"] "+(s="Get proxy server failed: response code ["+l.code+"], reason [ "+l.reason+"]")),u.report.requestProxyAppCenter(e.sid,{lts:o,succ:!1,APAddr:r,workerManagerList:null,ec:s,response:JSON.stringify({err:s,res:a})});else{i=!0;var d=v(l.servers);u.report.requestProxyAppCenter(e.sid,{lts:o,succ:!0,APAddr:r,workerManagerList:JSON.stringify(d),ec:null,response:JSON.stringify({res:a})}),t&&t(null,d)}}else h.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),u.report.requestProxyAppCenter(e.sid,{lts:o,succ:!1,APAddr:r,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:a})})}))}))},m=function(e,t,i){var n={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(d.post)(e,n,(function(e){i&&i(null,e)}),(function(e){i&&i(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})},g=function(e,t,i){var n=!1,s=0,r={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map((function(o){var a=(new Date).getTime();!function(e,t,i){Object(d.post)(e,t,(function(e){i&&i(null,e)}),(function(e){i&&i(e)}))}("https://"+o+":4000/v2/machine",r,(function(r,l){if(r)return h.default.debug("["+e.clientId+"] Request worker manager failed: ",r),s++,u.report.requestProxyWorkerManager(e.sid,{lts:a,succ:!1,workerManagerAddr:o,ec:JSON.stringify(r),response:JSON.stringify({res:l})}),void(s>=t.length&&i&&i("requeet worker manager server failed: request failed"));if(!n){if(!(l=JSON.parse(l)).serverResponse)return i&&i("requeet worker manager server failed: serverResponse is undefined");n=!0,u.report.requestProxyWorkerManager(e.sid,{lts:a,succ:!0,workerManagerAddr:o,ec:JSON.stringify(r),response:JSON.stringify({res:l})}),i&&i(null,{address:o,serverResponse:l.serverResponse})}}))}))},v=function(e){if(!e||[]instanceof Array==0)return[];var t=[];return e.forEach((function(e){var i;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?i="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(h.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),i="".concat(e.address,":").concat(e.tcp)),t.push(i)):h.default.error("["+joinInfo.clientId+"] Invalid address format ",e)})),t},y=i(12),b=i(30),w={},S={},C=function(e){return w[e]},_=function(e,t){S[e]=t},E=function(e,t,i,n,s){var r=(new Date).getTime(),o=t,a="";t.multiIP&&t.multiIP.gateway_ip&&(a={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var l={opid:133,flag:4096,ts:+new Date,key:t.token,cname:t.cname,sid:t.sid,detail:{6:t.stringUid,11:s},uid:t.uid||0};a&&(l.detail[5]=JSON.stringify(a)),Object(d.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=wrtc_gateway"),l,(function(s){try{var a=JSON.parse(s);a.res&&(a=a.res);var l=a.code}catch(e){var d="requestChooseServer failed with unexpected body "+s;return h.default.error("["+o.clientId+"]",d),n(d)}if(l)return v=new RegExp(/10102\d{2}$/).test(l)?"NO_SERVICE_AVAILABLE":p.APErrorCode[a.code]||l,u.report.joinChooseServer(t.sid,{lts:r,succ:!1,csAddr:e,serverList:null,ec:v}),n("Get server node failed ["+v+"]",e,v);var f=[],m=Object(c.getParameter)("GATEWAY_DOMAINS"),g=0;if(e.indexOf(m[1])>-1&&(g=1),a.addresses.forEach((function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(m[g++%m.length],":").concat(e.port):(h.default.info("["+o.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),f.push(t)):h.default.error("["+o.clientId+"] Invalid address format ",e)})),!f.length){h.default.error("["+o.clientId+"] Empty Address response",a);var v="EMPTY_ADDRESS_RESPONSE";return u.report.joinChooseServer(t.sid,{lts:r,succ:!1,csAddr:e,serverList:null,ec:v}),n("Get server node failed ["+v+"]",e,v)}return i({gateway_addr:f,uid:a.uid,cid:a.cid,vid:a.detail&&a.detail[8],res:a,uni_lbs_ip:a.detail},e)}),(function(e,i){"timeout"===e.type?(u.report.joinChooseServer(t.sid,{lts:r,succ:!1,csAddr:i,serverList:null,ec:"timeout"}),n("Connect choose server timeout",i)):(u.report.joinChooseServer(t.sid,{lts:r,succ:!1,csAddr:i,serverList:null,ec:"server_wrong"}),n("Connect choose server error",i))}),{"X-Packet-Service-Type":0,"X-Packet-URI":69})},T=function(e,t,i){var n=!1,s=null,r=1,o=1,a=e.clientId,l=function t(o,l){if(!n){var d=[];!function(e,t,i){for(var n,s=(new Date).getTime(),r=!1,o=!0,a=0,l=Object(c.getParameter)("WEBCS_DOMAIN"),d=Object(c.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),f=function(i,n){if(r)u.report.joinChooseServer(e.sid,{lts:s,succ:!0,csAddr:n,serverList:i.gateway_addr,cid:i.cid+"",uid:i.uid+"",ec:null},!1);else{if(clearTimeout(S),r=!0,e.proxyServer)for(var o=i.gateway_addr,a=0;a<o.length;a++){var l=o[a].split(":");i.gateway_addr[a]=e.proxyServer+"/ws/?h="+l[0]+"&p="+l[1]}t(i),u.report.joinChooseServer(e.sid,{lts:s,succ:!0,csAddr:n,serverList:i.gateway_addr,cid:i.cid+"",uid:i.uid+"",ec:null},!0)}},m=function(t,s,r){a++,h.default.error("["+e.clientId+"]",t,s,r),r&&-1===p.JOIN_CS_RETRY_LIST.indexOf(r)&&(o=!1,n=r),a===l.length+d.length&&i(n)},g=0;g<l.length;++g){var v;if("string"==typeof l[g]){var y=l[g];v=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(y+"/api/v1"):"https://".concat(y,"/api/v1");var w=Object(b.getAreaCodeByWebCS)(y);h.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(v,", ").concat(w)),E(v,e,f,m,w)}else h.default.error("["+e.clientId+"] Invalid Host",l[g])}var S=setTimeout((function(){if(!r)for(var t=0;t<d.length;++t)if("string"==typeof d[t]){var i=d[t];v=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(i+"/api/v1"):"https://".concat(i,"/api/v1");var n=Object(b.getAreaCodeByWebCS)(i);h.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(v,", ").concat(n)),E(v,e,f,m,n)}else h.default.error("["+e.clientId+"] Invalid Host",d[t])}),1e3);setTimeout((function(){!r&&o&&i()}),Object(c.getParameter)("WEBCS_BACKUP_CONNECT_TIMEOUT"))}(e,(function(t){n=!0,d=t,clearTimeout(s),S[a]!==y.a.DISCONNECTED&&S[a]!==y.a.DISCONNECTING?l&&l(d,null):h.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(S[a]))}),(function(n){if(n)return h.default.info("["+e.clientId+"] Join failed: "+n),void(i&&i(n));if(S[a]===y.a.DISCONNECTED||S[a]===y.a.DISCONNECTING)return h.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(S[a])),void(i&&i("OPERATION_ABORT"));h.default.debug("["+e.clientId+"] Request gateway list will be restart in "+r+"s"),s=setTimeout((function(){t(o,l)}),1e3*r),w[a]=s;var d=Object(c.getParameter)("AP_BACKOFF_MAX_TIME");r=r>=d?d:2*r}))}},d=function i(){!function(e,t){f(e,(function(i,n){if(i)return t&&t(i);h.default.debug("["+e.clientId+"] getProxyServerList: ",n),g(e,n,t)}))}(e,(function(n,r){if(n){h.default.debug("["+e.clientId+"]",n),h.default.debug("["+e.clientId+"] Request proxy will be restart in "+o+"s"),s=setTimeout((function(){i()}),1e3*o),w[a]=s;var d=Object(c.getParameter)("AP_BACKOFF_MAX_TIME");o=o>=d?d:2*o}else{clearTimeout(s);var p=r.address;e.proxyServer=p;var f={mode:"manual",url:r.address,tcpport:r.serverResponse.tcpport||"3433",udpport:r.serverResponse.udpport||"3478",username:r.serverResponse.username||"test",credential:r.serverResponse.password||Object(c.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};f.tcpport+="",f.udpport+="",e.turnServers=[],e.turnServers.push(f),u.report.setProxyServer(p),h.default.setProxyServer(p),l(p,t)}}))};e.useProxyServer?1==e.proxyServerType?d():2==e.proxyServerType?function i(){!function(e,t){f(e,(function(i,n){return i?t&&t(i):(h.default.debug("["+e.clientId+"] getProxyServerList: ",n),t&&t(null,{address:n[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))}))}(e,(function(n,r){if(n)return h.default.debug("["+e.clientId+"]",n),h.default.debug("["+e.clientId+"] Request proxy will be restart in "+o+"s"),s=setTimeout((function(){i()}),1e3*o),w[a]=s,void(o=o>=3600?3600:2*o);clearTimeout(s);var d=Object(c.getParameter)("PROXY_SERVER_TYPE2");e.proxyServer=d;var p={mode:"manual",url:r.address,tcpport:r.serverResponse.tcpport||"3433",udpport:r.serverResponse.udpport||"3478",username:r.serverResponse.username||"test",credential:r.serverResponse.password||"111111",forceturn:!0};p.tcpport+="",p.udpport+="",e.turnServers=[],e.turnServers.push(p),u.report.setProxyServer(d),h.default.setProxyServer(d),l(d,t)}))}():d():l(null,t)},x=function(e,t,i,n){var s=Date.now(),r={sid:t.sid,opid:10,appid:t.appId,string_uid:n=n||t.stringUid};return new Promise((function(o,a){Object(d.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),r,(function(l){try{var c=JSON.parse(l),d=c.code}catch(o){var f="requestUserAccount failed with unexpected body "+l;return h.default.error("["+t.clientId+"]",f),a("UNEXPECTED_ERROR"),i&&i.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void u.report.reqUserAccount(r.sid,{lts:s,success:!1,serverAddress:e,stringUid:n,uid:null,extend:l,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(d){var m=p.StringUidErrorCode[c.code%1e4]||"REQ_ACCOUNT_ERR_".concat(d);return i&&i.dispatchEvent({type:"error",reason:m}),u.report.reqUserAccount(r.sid,{lts:s,success:!1,serverAddress:e,stringUid:n,uid:null,errorCode:m,extend:r}),f="Get String Uid Failed ["+m+"]",a(m)}var g=c.uid;if(!(g>0&&g<Math.pow(2,32)))return h.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(n," => ").concat(g),c),m="INVALID_UINT_UID_".concat(g),i&&i.dispatchEvent({type:"error",reason:m}),u.report.reqUserAccount(r.sid,{lts:s,success:!1,serverAddress:e,stringUid:n,uid:null,errorCode:m,extend:r}),a(m);o({uid:g,url:e}),u.report.reqUserAccount(r.sid,{lts:s,success:!0,serverAddress:e,stringUid:n,uid:g,errorCode:null,extend:r})}),(function(e,t){if("timeout"===e.type){var o="USER_ACCOUNT_TIMEOUT";i&&i.dispatchEvent({type:"error",reason:o}),u.report.reqUserAccount(r.sid,{lts:s,success:!1,serverAddress:t,stringUid:n,uid:null,errorCode:o,extend:r}),a(o)}else{var l="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);i&&i.dispatchEvent({type:"error",reason:l}),u.report.reqUserAccount(r.sid,{lts:s,success:!1,serverAddress:t,stringUid:n,uid:null,errorCode:l,extend:r}),a(l)}}),{"X-Packet-Service-Type":0,"X-Packet-URI":72})}))},k=function(e,t,i){Date.now();var n,r=Object(c.getParameter)("ACCOUNT_REGISTER"),a=!1,d=Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),u=null,p=null,f=new Promise(function(){var f=l()(o.a.mark((function l(f,m){var g,v,y;return o.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:u=f,p=m,n=0;case 3:if(!(n<Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){l.next=33;break}if(!a){l.next=6;break}return l.abrupt("return");case 6:return g=r[n%r.length],v=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(g+"/api/v1"):"https://".concat(g,"/api/v1"),l.prev=8,l.delegateYield(o.a.mark((function n(){var s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(v,e,t,i);case 2:if(s=n.sent,!a){n.next=5;break}return n.abrupt("return",{v:void 0});case 5:a=!0,setTimeout((function(){h.default.debug("Get UserAccount Successfully",s),u(s)}),0);case 7:case"end":return n.stop()}}),n)}))(),"t0",10);case 10:if(y=l.t0,"object"!==s()(y)){l.next=13;break}return l.abrupt("return",y.v);case 13:l.next=30;break;case 15:if(l.prev=15,l.t1=l.catch(8),!a){l.next=19;break}return l.abrupt("return");case 19:if(!l.t1.retryable){l.next=27;break}return(d=Math.ceil(d*Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(d=Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),h.default.error("".concat(l.t1.info," ").concat(l.t1.url," Will Fetch User Account in ").concat(d/1e3," seconds")),l.next=25,new Promise((function(e){setTimeout(e,d)}));case 25:l.next=30;break;case 27:h.default.error("Get UserAccount Error: ".concat(l.t1.info," ").concat(l.t1.url),l.t1.error),a=!0,p(l.t1);case 30:n++,l.next=3;break;case 33:case"end":return l.stop()}}),l,null,[[8,15]])})));return function(e,t){return f.apply(this,arguments)}}());return f.cancel=function(){a||(a=!0,p({info:"Request Cancelled",retryable:!1}))},f.isFinished=function(){return a},f}},function(e,t,i){"use strict";i.d(t,"a",(function(){return k})),i.d(t,"b",(function(){return A}));var n=i(7),s=i.n(n),r=i(4),o=i(8),a=function(e){var t=Object(o.b)(e);return t.url=".",t},l=i(0),c=i(15),h=i(5),d=i(3),u=i(1),p=0,f=function(e){var t=a({});t.id=e.id,t.playerId=p++,t.destroyed=!1,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.isFreeze=!1,t.freezeTimeCounterList=[],t.freezeCount=0,t.lastFreezeCount=0,t.lastTimeupdateTime=0,t.elementID=e.elementID,t.setAudioOutput=function(e,i,n){var s=t.video||t.audio;return s?s.setSinkId?void s.setSinkId(e).then((function(){return l.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),s==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()})).then((function(){return l.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),i&&i()})).catch((function(e){return l.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),n&&n(e)})):(l.default.error("["+t.id+"] ",h.default.WEB_API_NOT_SUPPORTED),n&&n(h.default.WEB_API_NOT_SUPPORTED)):(l.default.error("["+t.id+"] ",h.default.PLAYER_NOT_FOUND),n&&n(h.default.PLAYER_NOT_FOUND))},t.destroy=function(){l.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(c.setSrcObject)(t.video,null),Object(c.setSrcObject)(t.audio,null),t.video.pause(),t.freezeCheckInterval&&clearInterval(t.freezeCheckInterval),t.destroyed=!0,delete t.resizer,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.parentNode.removeChild(t.div),["video","audio"].forEach((function(i){var n=o[i];clearTimeout(n.playDeferTimeout),n.formerMediaState=null;var s={playerId:t.playerId,stateId:n.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};o[i]=s;var r={type:"player-status-change",playerId:t.playerId,mediaType:i,status:s.status,reason:s.reason,isErrorState:!1,streamId:t.id};l.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),r),e.stream.dispatchEvent(r),u.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:r,tag:"tracer"})()}))},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),t.div.setAttribute("style",e.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),t.video.setAttribute("style",e.stream.local&&!e.stream.screen?e.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";"):e.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";"):e.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var i={autoplay:!0,muted:!!e.stream.local||!(!r.isSafari()&&"iOS"!==r.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},n=s()({},i,e.options);!0!==n.muted||n.volume||(n.volume=0),t.video.setAttribute("autoplay",""),t.video.setAttribute("muted",""),t.video.muted=!0,t.video.autoplay=!0,n.playsinline&&t.video.setAttribute("playsinline",""),n.controls&&t.video.setAttribute("controls",""),n.contains&&(t.video.controls=!0),Number.isFinite(n.volume)&&(t.video.volume=n.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),!0===n.muted&&t.audio.setAttribute("muted",""),!0===n.muted&&(t.audio.muted=!0),n.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(n.volume)&&(t.audio.volume=n.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var o={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,i=0;i<Object(d.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;i++)t=t.parentNode;return!!t};var f=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},m=function(e,t,i){var n=f(e),s=!0;return"paused"===n?("audio"===t&&!0===i.muted&&(s=!1),i.autoplay||(s=!1)):"play"===n?"video"===t?s=!1:!0===i.muted?e.muted&&(s=!1):e.muted||(s=!1):"aborted"===n&&(s=!1),s},g=function(i){var s,r=this;if(r===t.video?s="video":r===t.audio&&(s="audio"),s){if(i.type||l.default.error("[".concat(t.id,"] Unexpected evt"),i),"video"===s&&r.muted&&r.paused)return l.default.debug("[".concat(t.id,"] auto resume video element")),void r.play();var a=f(r);clearTimeout(o[s].playDeferTimeout),o[s].playDeferTimeout=setTimeout((function(){o[s].playDeferTimeout=null;var c=o[s],h=f(r);if(a===h){var d={playerId:t.playerId,stateId:c.stateId+1,playDeferTimeout:null,error:m(r,s,n),status:f(r),reason:i.type,updatedAt:Date.now()};if(c.status!==d.status){o[s]=d;var p={type:"player-status-change",playerId:t.playerId,mediaType:s,status:d.status,reason:d.reason,isErrorState:d.error,streamId:t.id};l.default.debug("[".concat(t.id,"] Media Player Status Change"),p),e.stream.dispatchEvent(p),u.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:p,tag:"tracer"})()}}else l.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(s," Status ").concat(a,"=>").concat(h))}),Object(d.getParameter)("PLAYER_STATE_DEFER"))}else l.default.error("[".concat(t.id,"] Unknown media element"),r)};t.video.addEventListener("playing",(function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?l.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}));var v=0,y=0,b=0;t.freezeCheckInterval=setInterval((function(){Date.now()-t.lastTimeupdateTime>500?(t.isFreeze=!0,t.freezeCount+=1):t.isFreeze=!1}),500),t.video.addEventListener("playing",g),t.video.addEventListener("canplay",g),t.video.addEventListener("abort",g),t.video.addEventListener("onerror",g),t.video.addEventListener("suspend",g),t.video.addEventListener("stalled",g),t.video.addEventListener("pause",g),t.audio.addEventListener("playing",g),t.audio.addEventListener("canplay",g),t.audio.addEventListener("abort",g),t.audio.addEventListener("onerror",g),t.audio.addEventListener("suspend",g),t.audio.addEventListener("stalled",g),t.audio.addEventListener("pause",g);var w=t.audio,S="audio";if(e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),r.isEdge()?t.video.srcObject=e.stream.stream:(Object(c.attachMediaStream)(t.video,e.stream.stream),Object(c.attachMediaStream)(t.audio,e.stream.stream)),t.video.addEventListener("timeupdate",(function(){var e=Date.now();if((v+=1)<10)t.lastTimeupdateTime=e;else for(e-t.lastTimeupdateTime>500&&(y+=e-t.lastTimeupdateTime),b+=e-t.lastTimeupdateTime,t.lastTimeupdateTime=e;b>=6e3;)b-=6e3,t.freezeTimeCounterList.push(Math.min(6e3,y)),y-=6e3,y=Math.max(y,0)}));else{!1!==n.muted&&"video_element_muted"!==n.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.video.removeAttribute("autoplay"),t.video.autoplay=!1,t.div.appendChild(t.video),w=t.video,S="video";var C={playerId:t.playerId,stateId:o.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};o.audio=C;var _={type:"player-status-change",playerId:t.playerId,mediaType:"audio",status:C.status,reason:C.reason,isErrorState:C.error,streamId:t.id};if(l.default.debug("[".concat(t.id,"] Media Player Status Change"),_),Promise.resolve().then((function(){return e.stream.dispatchEvent(_)})),u.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:_,tag:"tracer"})(),window.MediaStream&&(r.isSafari()||"iOS"===r.getBrowserOS())){var E=new MediaStream(e.stream.stream.getAudioTracks());Object(c.setSrcObject)(t.video,E)}else Object(c.setSrcObject)(t.video,e.stream.stream)}if(n.autoplay&&w){var T=w.play();T&&T.catch&&T.catch((function(i){if(!t.destroyed&&w){var s=o[S],r={playerId:t.playerId,stateId:s.stateId+1,playDeferTimeout:null,error:m(w,S,n),status:f(w),reason:"error",updatedAt:Date.now()};if(s.status!==r.status){l.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," Status Changed Detected by promise error: ").concat(s.status,"=>").concat(r.status),i),o[S]=r;var a={type:"player-status-change",playerId:t.playerId,mediaType:S,status:r.status,reason:r.reason,isErrorState:r.error,streamId:t.id};l.default.debug("[".concat(t.id,"] Media Player Status Change"),a),e.stream.dispatchEvent(a),u.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:a,tag:"tracer"})()}}}))}return t.setAudioVolume=function(e){var i=parseInt(e)/100;isFinite(i)&&(i<0?i=0:i>1&&(i=1),t.video&&(t.video.volume=i),t.audio&&(t.audio.volume=i))},t},m=i(22),g=i(10),v=i(6),y=i(19),b=i(2),w=i(24),S=i(16),C=i(11),_=i.n(C),E=function(e){Object(b.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(b.checkValidEnum)(e,"profileName",Object.keys(d.SUPPORT_RESOLUTION_LIST));var t=d.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(d.getParameter)("DEFAULT_PROFILE"),t=d.SUPPORT_RESOLUTION_LIST[e]);var i={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&(i.video.frameRate=t[2]),t[6]&&t[7]&&(i.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),i},T=function(e){return Object.keys(d.SUPPORT_RESOLUTION_LIST).filter((function(t){var i=d.SUPPORT_RESOLUTION_LIST[t],n=["width","height","frameRate"];for(var s in n){var r=n[s];if(e[r]&&i[s]){if("number"==typeof e[r].max&&e[r].max<i[s])return!1;if("number"==typeof e[r].min&&e[r].min>i[s])return!1}}return!0})).reverse()},x=function(e){var t=d.AUDIO_PROFILE_SETTINGS[e]||d.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}},k=function(e){var t=Object(o.b)();if(t.params=s()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.uintId=e.uintUID||null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.optimizationMode=e.optimizationMode,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function i(){var e={};t.getVideoTrack()===this?(l.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(l.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):l.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,i){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:i,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,i,n){var s=u.report.reportApiInvoke(e.sid,{callback:n,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(b.checkValidString)(i,"url",1,1024,!1),Object(b.checkValidString)(t,"id",1,1024,!1);var r=function(t){l.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),s(h.default.LOAD_AUDIO_FAILED)},o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>400)r("".concat(o.status," ").concat(o.statusText));else{var i=o.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(i,(function(i){e.audioMixing.buffer[t]=i,s(null)}),(function(t){l.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),s(t)}))}},o.onerror=function(){return r("load error")},o.ontimeout=function(){return r("timeout")},o.send()},e.createAudioBufferSource=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var n=e.audioMixing.buffer[t.id],s=e.audioMixing.ctx.createBufferSource();s.buffer=n;var o=e.audioMixing.ctx.createGain();if(s.connect(o),o.connect(e.audioMixing.mediaStreamDest),s.gainNode=o,t.loop)s.loop=!0,s.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(r.isChrome)()){s.loop=!0;var a=t.cycle*n.duration*1e3-(t.playTime||0);s.start(0,t.playTime/1e3,a/1e3)}else l.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),s.start(0,t.playTime/1e3);else s.start(0,t.playTime/1e3);var c=e.audioMixing.sounds[t.soundId];return c.source=s,e._flushAudioMixingMuteStatus(),s.addEventListener("ended",(function(){s===c.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:s,sound:c})})),i(),s}var h="AUDIOBUFFER_NOT_FOUND";return l.default.error("[".concat(e.streamId,"] "),h,t.id),i(!1),!1},e.on("audioSourceEnded",(function(t){var i=t.source,n=t.sound;n&&n.state===e.audioMixing.states.BUSY&&!n.pauseAt&&(n.state=e.audioMixing.states.IDLE,n.startAt=null,n.startOffset=null,n.resumeAt=null,n.resumeOffset=null,i.gainNode&&i.gainNode.disconnect&&i.gainNode.disconnect(),i.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))})),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach((function(e){e.stop()}))},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(l.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(w.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._originStream=e.stream,e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var i=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"audio"==e.track.kind})),n=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];i&&i.replaceTrack&&n&&i.replaceTrack(n)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var i=e.audioMixing.sounds[t];i.state!==e.audioMixing.states.BUSY&&i.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return l.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var i in e.audioMixing.sounds){var n=e.audioMixing.sounds[i];n&&n.source&&!n.source.connectedToDestination&&(n.source.gainNode.connect(e.audioMixing.ctx.destination),n.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach((function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)}));case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var i=t.replace,n=e.createAudioBufferSource({soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0});return n.sound=e.audioMixing.sounds[t.soundId],n?(n.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),i&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),n):null},e._stopAudioMixingBufferSource=function(t){var i=e.audioMixing.sounds[t.soundId].source;return i?(i.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),i.stop(),i.gainNode&&i.gainNode.disconnect&&i.gainNode.disconnect(),i.buffer=null,i):null},e._flushAudioMixingMuteStatus=function(t){for(var i in e.audioMixing.sounds){var n=e.audioMixing.sounds[i];n&&(void 0!==t&&(n.muted=!!t),n.source&&(n.source.gainNode.gain.value=n.muted?0:n.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,i,n){var s=e.audioMixing.sounds[i.soundId],r=-1===i.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";l.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(r,", state is ").concat(s.state)),n&&n(r)},e._handleAudioMixingNoSourceError=function(t,i,n){e.audioMixing.sounds[i.soundId].state=e.audioMixing.states.IDLE;var s=-1===i.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";l.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(s)),n&&n(s)},e._getOneEffectStates=function(t){var i=e.audioMixing.sounds[t.soundId];return function(){return i?{state:i.state,startAt:i.startAt,resumeAt:i.resumeAt,pauseOffset:i.pauseOffset,pauseAt:i.pauseAt,resumeOffset:i.resumeOffset,stopAt:i.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(l.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,i){Object(b.checkValidObject)(t,"options");var n=t.soundId,s=t.cacheResource;if(Object(r.isSafari)()&&Object(r.getBrowserVersion)()<12){var o="BROWSER_NOT_SUPPORT";return l.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),o),i(o)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(n);var a=e.audioMixing.sounds[n];if(a.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return o="Invalid Parmeter cycle: "+t.cycle,l.default.error("[".concat(e.streamId,"] ").concat(n),o),i(o);if(Object(b.isEmpty)(s)&&(t.cacheResource=!0),a.state=e.audioMixing.states.STARTING,a.options=t,e.audioMixing.buffer[t.filePath]){var c=e._startAudioMixingBufferSource(t);if(c)return a.source=c,a.startAt=Date.now(),a.resumeAt=null,a.pauseOffset=null,a.pauseAt=null,a.resumeOffset=null,a.stopAt=null,a.startOffset=t.playTime||0,a.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),i(null);a.state=e.audioMixing.states.IDLE;var h="CREATE_BUFFERSOURCE_FAILED";if(i)return i(h);l.default.error("[".concat(e.streamId,"] "),h)}else e.loadAudioBuffer(t.filePath,t.filePath,(function(n){if(n)a.state=e.audioMixing.states.IDLE,i?i(n):l.default.error("[".concat(e.streamId,"] "),n);else{var s=e._startAudioMixingBufferSource(t);if(s)return a.source=s,a.startAt=Date.now(),a.resumeAt=null,a.pauseOffset=null,a.pauseAt=null,a.resumeOffset=null,a.stopAt=null,a.startOffset=t.playTime||0,a.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),i(null);if(a.state=e.audioMixing.states.IDLE,n="CREATE_BUFFERSOURCE_FAILED",i)return i(n);l.default.error("[".concat(e.streamId,"] "),n)}}))}else e._handleAudioMixingInvalidStateError("_playEffect",t,i)},e._stopOneEffect=function(t,i){var n=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?n.state===e.audioMixing.states.BUSY||n.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),n.stopAt=Date.now(),n.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[n.options.filePath]&&!n.options.cacheResource&&(l.default.debug("Recycled buffer ".concat(n.options.filePath)),delete e.audioMixing.buffer[n.options.filePath]),void(i&&i(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,i):i("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,i){var n=e.audioMixing.sounds[t.soundId];if(n.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(n.pauseAt=Date.now(),n.state=e.audioMixing.states.PAUSED,n.pauseOffset=n.resumeAt?n.pauseAt-n.resumeAt+n.resumeOffset:n.pauseAt-n.startAt+n.startOffset,i&&i(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,i);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,i)},e._resumeOneEffect=function(t,i){var n=e.audioMixing.sounds[t.soundId];if(n.state===e.audioMixing.states.PAUSED){var s=e._startAudioMixingBufferSource({soundId:t.soundId,filePath:n.options.filePath,cycle:n.options.cycle,loop:n.options.loop,playTime:n.pauseOffset,replace:n.options.replace});if(!s){var r="CREATE_BUFFERSOURCE_FAILED";return i(r),void l.default.error("[".concat(e.streamId,"] "),r)}n.source=s,n.resumeAt=Date.now(),n.resumeOffset=n.pauseOffset,n.state=e.audioMixing.states.BUSY,n.pauseAt=null,n.pauseOffset=null,i(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,i)},e._getOneEffectDuration=function(t){var i=e.audioMixing.sounds[t.soundId];return i.options&&i.options.filePath&&e.audioMixing.buffer[i.options.filePath]?1e3*e.audioMixing.buffer[i.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,i){var n=e.audioMixing.sounds[t.soundId];return n.state===e.audioMixing.states.PAUSED?n.pauseOffset%e._getOneEffectDuration(t):n.state===e.audioMixing.states.BUSY?n.resumeAt?(Date.now()-n.resumeAt+n.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-n.startAt+n.startOffset)%e._getOneEffectDuration(t):void(i&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,i,n){var s=e.audioMixing.sounds[t.soundId];if(s.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,n);var r=e._startAudioMixingBufferSource({soundId:t.soundId,filePath:s.options.filePath,loop:s.options.loop,cycle:s.options.cycle,playTime:i});if(!r){var o="CREATE_BUFFERSOURCE_FAILED";return n&&n(o),void l.default.error("[".concat(e.streamId,"] "),o)}s.source=r,s.startAt=Date.now(),s.startOffset=i,s.resumeAt=null,s.resumeOffset=null,s.pauseOffset=null,s.pauseAt=null}else{if(s.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,n);s.pauseOffset=i}n&&n(null)},e.startAudioMixing=function(t,i){var n=u.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return i&&i(t);e.dispatchEvent({type:"audioMixingPlayed"}),i&&i(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(b.checkValidObject)(t,"options");var r=t.filePath,o=t.cacheResource,a=t.cycle,l=t.loop,c=t.playTime,h=t.replace;Object(b.checkValidString)(r,"filePath",1,Object(d.getParameter)("FILEPATH_LENMAX"),!1),Object(b.checkValidNumber)(c,"playTime",0,1e8),!Object(b.isEmpty)(a)&&Object(b.checkValidNumber)(a,"cycle"),!Object(b.isEmpty)(l)&&Object(b.checkValidBoolean)(l,"loop"),!Object(b.isEmpty)(h)&&Object(b.checkValidBoolean)(h,"replace"),!Object(b.isEmpty)(o)&&Object(b.checkValidBoolean)(o,"cacheResource");var p=s()({soundId:-1},t);e._playOneEffect(p,n)},e.stopAudioMixing=function(t){var i=u.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},i)},e.pauseAudioMixing=function(t){var i=u.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},i)},e.resumeAudioMixing=function(t){var i=u.report.reportApiInvoke(e.sid,{callback:function(i,n){if(i)return t&&t(i);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},i)},e.adjustAudioMixingVolume=function(t){var i=u.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(b.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),i()},e.getAudioMixingDuration=function(){var t=u.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),i=e._getOneEffectDuration({soundId:-1});return t(null,i),i},e.getAudioMixingCurrentPosition=function(){var t=u.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),i=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,i),i},e.setAudioMixingPosition=function(t,i){var n=u.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(b.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,n)},e.playEffect=function(t,i){var n=u.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return i&&i(t);e.dispatchEvent({type:"effectPlayed"}),i&&i(null)},name:"Stream.playEffect",options:t});Object(b.checkValidObject)(t,"options");var s=t.soundId,r=t.filePath,o=t.cycle;Object(b.checkValidNumber)(s,"soundId",1,1e4),Object(b.checkValidString)(r,"filePath",0,Object(d.getParameter)("FILEPATH_LENMAX"),!1),!Object(b.isEmpty)(o)&&Object(b.checkValidNumber)(o,"cycle"),e._playOneEffect(t,n)},e.stopEffect=function(t,i){var n=u.report.reportApiInvoke(e.sid,{callback:i,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},n)},e.stopAllEffects=function(t){var i=u.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),n=!1,s=0,r=0,o=function(e){n||(e?(i(e),n=!0):s+=1,s===r&&(i(null),n=!0))};for(var a in e.audioMixing.sounds){var l=e.audioMixing.sounds[a];-1!==l.soundId&&(l.state!==e.audioMixing.states.BUSY&&l.state!==e.audioMixing.states.PAUSED||(r++,e._stopOneEffect({soundId:a},o)))}r||i(null)},e.preloadEffect=function(t,i,n){var s=u.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4),Object(b.checkValidString)(i,"filePath",1,Object(d.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,i),e.audioMixing.buffer[i]?s(null):e.loadAudioBuffer(i,i,s)},e.unloadEffect=function(t,i){var n=u.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4);var s=e.audioMixing.sounds[t];if(!s){var r="SOUND_NOT_EXISTS";return l.default.error(r,t),void n(r)}var o=s.options?s.options.filePath:s.filePath;if(o)delete e.audioMixing.buffer[o],delete e.audioMixing.sounds[t],n(null);else{var a="SOUND_BUFFER_NOT_FOUND";l.default.error(a,t),n(a)}},e.pauseEffect=function(t,i){var n=u.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},n)},e.pauseAllEffects=function(t){var i=u.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),n=!1,s=0,r=0,o=function(e){n||(e?(i(e),n=!0):s+=1,s===r&&(i(null),n=!0))};for(var a in e.audioMixing.sounds)"-1"!==a&&e.audioMixing.sounds[a].state===e.audioMixing.states.BUSY&&(r++,e._pauseOneEffect({soundId:a},o));r||i(null)},e.resumeEffect=function(t,i){Object(b.checkValidNumber)(t,"soundId",1,1e4);var n=u.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},n)},e.resumeAllEffects=function(t){var i=u.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),n=!1,s=0,r=0,o=function(e){n||(e?(i(e),n=!0):s+=1,s===r&&(i(null),n=!0))};for(var a in e.audioMixing.sounds)"-1"!==a&&e.audioMixing.sounds[a].state===e.audioMixing.states.PAUSED&&(r++,e._resumeOneEffect({soundId:a},o));r||i(null)},e.getEffectsVolume=function(){var t=[];for(var i in e.audioMixing.sounds){var n=e.audioMixing.sounds[i];n&&"-1"!==i&&t.push({soundId:parseInt(i),volume:n.volume})}return t},e.setEffectsVolume=function(t,i){var n=u.report.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:i});for(var s in Object(b.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var r=e.audioMixing.sounds[s];"-1"!==s&&(r.volume=t)}e._flushAudioMixingMuteStatus(),n(null)},e.setVolumeOfEffect=function(t,i,n){var s=u.report.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:n});Object(b.checkValidNumber)(t,"soundId",0,1e4),Object(b.checkValidNumber)(i,"volume",0,100),e._initSoundIfNotExists(t);var r=e.audioMixing.sounds[t];r.volume=i,e._flushAudioMixingMuteStatus(),s(null)}}(t),S.a.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(r.isLegacyChrome)()||(e.videoConstraint.frameRate=30),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(r.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(r.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(r.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(r.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(r.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(r.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(i){var n=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(i instanceof Array)){var r=E(i+="");return r&&r.video?(e.videoConstraint=s()(e.videoConstraint,{width:{ideal:r.video.width},height:{ideal:r.video.height}}),t.attributes.resolution=r.attributes.resolution,(o=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&o.applyConstraints?(l.default.debug("setVideoResolution applyConstraints",e.videoConstraint),o.applyConstraints(e.videoConstraint).then(n).catch(n)):n(),!0):(n("NO_PROFILE_".concat(i)),!1)}var o,a=i[0],c=i[1];e.videoConstraint=s()(e.videoConstraint,{width:{ideal:a},height:{ideal:c}}),t.attributes.resolution="".concat(a,"x").concat(c),(o=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&o.applyConstraints?(l.default.debug("setVideoResolution applyConstraints",e.videoConstraint),S.a.disableVideoEffect(e).then((function(){return o.applyConstraints(e.videoConstraint).then(n).catch(n)})).then((function(){return S.a.restoreVideoEffect(e)}))):n()},e.setVideoFrameRate=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(r.isFireFox)())return i("FIREFOX_NOT_SUPPORTED"),!1;if("object"===_()(t)&&t instanceof Array&&t.length>1){e.videoConstraint=s()(e.videoConstraint,{frameRate:t[0]}),e.attributes.minFrameRate=t[0],e.attributes.maxFrameRate=t[1];var n=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return n&&n.applyConstraints?(l.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),n.applyConstraints(e.videoConstraint).then(i).catch(i)):i(),!0}return i("INVALID_PARAM_".concat(JSON.stringify(t))),!1},e.setVideoBitRate=function(i){var n=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===_()(i)&&i instanceof Array&&i.length>1?(t.attributes.minVideoBW=i[0],t.attributes.maxVideoBW=i[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=i[0],e.connectionSpec.maxVideoBW=i[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),n(),!0):(n("INVALID_PARAM_".concat(JSON.stringify(i))),!1)},e.setScreenBitRate=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===_()(t)&&t instanceof Array&&t.length>1?(e.screenAttributes.minVideoBW=t[0],e.screenAttributes.maxVideoBW=t[1],i(),!0):(i("INVALID_PARAM_".concat(JSON.stringify(t))),!1)},e.setScreenProfile=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(b.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var n=E(t);return n&&n.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=n.screen.width,e.screenConstraint.mandatory.maxHeight=n.screen.height,n.screen.frameRate&&n.screen.frameRate.min&&n.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=n.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=n.screen.frameRate.max)):e.screenConstraint=s()(e.screenConstraint,n.screen),e.screenAttributes.width=n.screen.width,e.screenAttributes.height=n.screen.height,e.screenAttributes.minFr=n.screen.frameRate.min,e.screenAttributes.maxFr=n.screen.frameRate.max,i(),!0):(i("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),i()},e.setVideoProfileCustomPlus=function(i){var n=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution([i.width,i.height]),t.attributes.resolution="".concat(i.width,"x").concat(i.height),e.setVideoFrameRate([i.framerate,i.framerate]),e.setVideoBitRate([i.bitrate,i.bitrate]),n()},e.setVideoProfile=function(i){var n=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),o=E(i);if(!o){var a="Invalid Profile ".concat(i);throw new Error(a)}if(e.profile=i,o&&o.video){e.profile=o.profileName,e.videoConstraint=s()(e.videoConstraint,o.video),e.connectionSpec&&o.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=o.attributes.minVideoBW,e.connectionSpec.maxVideoBW=o.attributes.maxVideoBW),Object(r.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(r.isFireFox)()&&(e.videoConstraint.frameRate=30),t.attributes=s()(t.attributes,o.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var c=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return c&&c.applyConstraints?(l.default.debug("setVideoProfile applyConstraints",e.videoConstraint),S.a.disableVideoEffect(e).then((function(){return c.applyConstraints(e.videoConstraint)})).then((function(){return S.a.restoreVideoEffect(e)})).then((function(t){return new Promise((function(i,s){n(t),setTimeout((function(){Object(g.vsResHack)(e.stream,(function(t,n){e.videoWidth=t,e.videoHeight=n,i()}),(function(t){l.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),s()}))}),2500)}))})).catch(n)):n(),!0}return n("INVALID_VIDEO_PROFILE_".concat(i)),!1},e.setAudioProfile=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(b.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var n=x(t);return e.highQuality=n.highQuality,e.stereo=n.stereo,e.speech=n.speech,e.lowQuality=n.lowQuality,e.stereo&&Object(r.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),i(),!0},e.setVideoEncoderConfiguration=function(t){Object(b.checkValidObject)(t,"config");var i=u.report.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(b.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(b.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(b.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(b.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(b.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(b.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),i()},e.getSupportedProfile=function(t){var i=u.report.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var n="ONLY_LOCAL_STREAM_SUPPORTED";return l.default.error(n),i(n)}if(!e.stream)return l.default.error(n="STREAM_NOT_INIT"),i(n);if(!e.stream.getVideoTracks)return l.default.error(n="TRACK_NOT_SUPPORT"),i(n);var s=e.stream.getVideoTracks()[0];if(!s)return l.default.error(n="NO_VIDEO_TRACK_FOUND"),i(n);if(!s.getCapabilities)return l.default.error(n="GETCAPABILITY_NOT_SUPPORT"),i(n);var r=s.getCapabilities(),o=T(r);return i(null,o)}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(d.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(l.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(e){var i=u.report.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&l.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,i()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return!!t.audio},t.hasVideo=function(){return!!t.video},t.hasScreen=function(){return!!t.screen},t.hasScreenAudio=function(){return!!t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(n,s){var r=u.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return s&&s(e);n&&n(t)},name:"Stream.init",options:arguments,tag:"tracer"}),o=((new Date).getTime(),arguments[2]);if(void 0===o&&(o=2),!0===t.initialized)return r({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return r({type:"warning",msg:"STREAM_NOT_LOCAL"});var a=Math.random().toString().slice(3);t._streamInitID=a,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=y.a.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=y.a.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){l.default.debug("[".concat(t.streamId,"] Requested access to local media"));var c={streamId:t.streamId};e.videoSource?c.videoSource=e.videoSource:e.screen?c.screen=t.screenConstraint:e.video&&(c.video=t.videoConstraint),e.audioSource?c.audioSource=e.audioSource:e.screenAudio?c.screenAudio=e.screenAudio:e.audio&&(c.audio=t.audioConstraint),Object(m.b)(c,(function(n){if(c.screenAudio&&!n.getAudioTracks()[0]&&l.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),c.screen&&l.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(c.video||c.audio)&&l.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){n.getTracks().forEach((function(e){e.stop()}));var s={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return l.default.error(t.streamId,s.info),void r(s)}if(t._streamInitID!==a)return n.getTracks().forEach((function(e){e.stop()})),l.default.error(t.streamId,(s={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void r(s);t.dispatchEvent({type:"accessAllowed"}),t.stream=n,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(g.vsResHack)(n,(function(e,i){t.videoWidth=e,t.videoHeight=i}),(function(e){l.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)})),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach((function(n){n&&!n.onended&&(n.onended=i),"video"===n.kind&&e.optimizationMode&&(n.contentHint=e.optimizationMode,n.contentHint===e.optimizationMode&&l.default.debug("[".concat(t.streamId,"] set content hint to"),e.optimizationMode))})),r()}),(function(e){var i={type:"error",info:null};switch(e&&(i.msg=e.name||e.code||e,e.message&&(i.info=e.message),e.code&&(i.info?i.info+=". "+e.code:i.info=" "+e.code),e.constraint&&(i.info?i.info+=". Constraint: "+e.constraint:i.info="constraint: "+e.constraint)),i.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),o>0)return void setTimeout((function(){t.init((function(e){return r(e)}),r,o-1)}),1);i.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":i.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":i.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":i.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":i.msg="CONSTRAINT_NOT_SATISFIED";break;default:i.msg||(i.msg="UNDEFINED")}var n="Media access ".concat(i.msg).concat(i.info?": "+i.info:"");l.default.error("[".concat(t.streamId,"] "),n),r(i)}))}else r({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){l.default.error("[".concat(t.streamId,"] Stream init: "),e),r({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var i=t.stream.getAudioTracks()[0];i&&i.label&&(t.audioName=i.label)}}},t.close=function(){var e=u.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(l.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),t._originStream)try{t._originStream.getTracks().map((function(e){return e.stop()}))}catch(e){}if(void 0!==t.stream){var i=t.stream.getTracks();for(var n in i)i.hasOwnProperty(n)&&(i[n].stop(),i[n].onended=null);!t.isLowStream&&t.local?S.a.disableVideoEffect(t).then((function(){t.stream=void 0})):(t.stream&&t.stream.clean&&t.stream.clean(),t.stream=void 0)}if(t._originStream){for(var n in console.log("clear _originStream"),i=t._originStream.getTracks())i.hasOwnProperty(n)&&(i[n].stop(),i[n].onended=null,console.log("clear onended"));!t.isLowStream&&t.local?S.a.disableVideoEffect(t).then((function(){t._originStream=void 0})):(t._originStream&&t._originStream.clean&&t._originStream.clean(),t._originStream=void 0)}if(Object(r.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders){var s=t.pc.peerConnection.getSenders();s.forEach((function(e){e&&(l.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))}))}t.local&&(t.initialized=!1),t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),e()},t.enableAudio=function(){var e,i=u.report.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return l.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||l.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,i(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});l.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&l.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var i=t._muteAudio();return e(null,i),i},t.enableVideo=function(){var e,i=u.report.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return l.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||l.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),i(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});l.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&l.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var i=t._muteVideo();return e(null,i),i},t.unmuteAudio=function(){var e,i=u.report.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||l.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,i(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&l.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var i=t._muteAudio();return e(null,i),i},t.unmuteVideo=function(){var e,i=u.report.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||l.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),i(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&l.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var i=t._muteVideo();return e(null,i),i},t._unmuteAudio=function(){return l.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled||(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,0))},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return l.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&u.report.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return l.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled||(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),0))},t._muteVideo=function(){return l.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&u.report.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(n){var s=u.report.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(t.pc&&t.pc.addTrack(n,t.stream),"audio"==n.kind){t._cleanupAudioMixing();var r=new MediaStream;t.userMuteAudio&&(n.enabled=!1),r.addTrack(n);var o=t.stream.getVideoTracks()[0];o&&r.addTrack(o),t.audio=!0,e.audio=!0,t.stream=r,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(n.enabled=!1),t.stream.addTrack(n),t.video=!0,e.video=!0;n.onended||(n.onended=i),s()},t.removeTrack=function(i){var n=u.report.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});t.pc&&t.pc.removeTrack(i,t.stream),t.stream.removeTrack(i),t._cleanupAudioMixing(),"audio"===i.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==i.readyState&&(i.stop(),l.default.debug("[".concat(t.streamId,"] Track ").concat(i.kind," Stopped"))),n()},t.setAudioOutput=function(e,i,n){var s=u.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(b.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,(function(){return s()}),s):s()):(l.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),s(h.default.INVALID_PARAMETER))},t.play=function(e,i,n){"function"==typeof i&&(n=i,i=null),l.default.debug("[".concat(t.streamId,"] play()."),e,i);var s=u.report.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:n});if(Object(b.checkValidString)(e,"elementID"),Object(b.isEmpty)(i)||(Object(b.isEmpty)(i.fit)||Object(b.checkValidEnum)(i.fit,"fit",["cover","contain"]),Object(b.isEmpty)(i.muted)||Object(b.checkValidBoolean)(i.muted,"muted")),t.player)l.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then((function(){s(null)})).catch(s);else{t.elementID=e,t.playOptions=i,!t.local||t.video||t.screen?(t.player=new f({id:t.getId(),stream:t,elementID:e,options:i}),t.local&&S.a.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new f({id:t.getId(),stream:t,elementID:e,options:i}));var r={video:null,audio:null},o=function e(i){if(r[i.mediaType]=i,r.video&&r.audio)if(t.removeEventListener("player-status-change",e),r.video.isErrorState||r.audio.isErrorState){var n=r.video.isErrorState?r.video:r.audio;s({isErrorState:!0,status:n.status,reason:n.reason,video:r.video,audio:r.audio})}else s("aborted"===r.video.status&&"aborted"===r.audio.status?{status:"aborted",reason:"stop",video:r.video,audio:r.audio}:null)};t.on("player-status-change",o),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});l.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(S.a.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):l.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!(!t.player||!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video)||t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,i;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(i=t.player.audio.play()),i=i||Promise.resolve(),Promise.all([e,i])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var i=t.stream.getVideoTracks()[0];if(i)return l.default.info("[".concat(t.streamId,"] getVideoTrack"),i),e(),i}l.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=u.report.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var i=t.stream.getAudioTracks()[0];if(i)return l.default.info("[".concat(t.streamId,"] getAudioTracks"),i),e(),i}l.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,i,n){if(t.stream){if("video"==e.kind){if(r=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(r),t.stream.addTrack(e),l.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==r.readyState&&(r.stop(),l.default.debug("[".concat(t.streamId,"] Track ").concat(r.kind," Stopped"))),i&&i();var s="MEDIASTREAM_TRACK_NOT_FOUND";return l.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),n(s)}if("audio"==e.kind){var r;if(r=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var o=new MediaStream;o.addTrack(e);var a=t.stream&&t.stream.getVideoTracks()[0];return a&&o.addTrack(a),t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),l.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==r.readyState&&(r.stop(),l.default.debug("[".concat(t.streamId,"] Track ").concat(r.kind," Stopped"))),i&&i()}return s="MEDIASTREAM_TRACK_NOT_FOUND",l.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),n(s)}return s="INVALID_TRACK_TYPE",l.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(s," ").concat(e.kind)),n&&n(s)}return s="NO_STREAM_FOUND",l.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(s)),n&&n(s)},t.replaceTrack=function(e,n,s){var r=u.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return s&&s(e);n&&n(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return e&&e.kind?(t._cleanupAudioMixing(),e.onended||(e.onended=i),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,(function(){return l.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,(function(e){return r(null,e)}),r)}),(function(i){return l.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(i)),r(i)})):t._replaceMediaStreamTrack(e,(function(e){return r(null,e)}),r)):r("INVALID_TRACK")},t.setAudioVolume=function(e){var i=u.report.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(b.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),i()},t.getStats=function(e,i,n){var o=[];o.push(t._getPCStats(n)),o.push(new Promise((function(e){var i={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(v.b)(i,"videoReceiveResolutionHeight",t.videoHeight),Object(v.b)(i,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(r.isSafari)()||Object(r.isFireFox)())&&(Object(v.b)(i,"videoSendResolutionHeight",t.videoHeight),Object(v.b)(i,"videoSendResolutionWidth",t.videoWidth)),(Object(r.isSafari)()||Object(r.isFireFox)())&&t.uplinkStats&&Object(v.b)(i,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(i)}))),o.push(new Promise((function(e){var i={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(Object(v.b)(i,"accessDelay",t.traffic_stats.access_delay),Object(v.b)(i,"endToEndDelay",t.traffic_stats.e2e_delay),Object(v.b)(i,"videoReceiveDelay",t.traffic_stats.video_delay),Object(v.b)(i,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&Object(v.b)(i,"accessDelay",t.traffic_stats.access_delay),e(i)}))),Promise.all(o).then((function(i){for(var n={},r=i.length-1;r>=0;r--){var o=i[r];s()(n,o)}e&&setTimeout(e.bind(t,n),0)})).catch((function(e){i&&setTimeout(i.bind(t,e),0)}))},t._getPCStats=function(e){return new Promise((function(i,n){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return n("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats((function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return n("PEER_CONNECTION_STATE_CHANGE");var s=t.pc.isSubscriber?Object(v.c)(e):Object(v.a)(e);return i(s)}),e)})).then((function(e){return t.pc.isSubscriber?(Object(r.isFireFox)()||Object(r.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(Object(v.b)(e,"videoReceiveResolutionHeight",t.videoHeight),Object(v.b)(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(r.isSafari)()||Object(r.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(Object(v.b)(e,"videoSendResolutionHeight",t.videoHeight),Object(v.b)(e,"videoSendResolutionWidth",t.videoWidth))),(Object(r.isSafari)()||Object(r.isFireFox)())&&t.uplinkStats&&Object(v.b)(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)}))},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new g.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();l.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else l.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480p_1"),t._switchVideoDevice=function(e,i,n){if(e===t.cameraId)return i&&i();var o={video:s()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};l.default.debug("[".concat(t.streamId,"] ").concat(o)),Object(m.b)(o,(function(s){try{var o=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),S.a.restoreVideoEffect(t).then((function(){i&&i()}))};S.a.disableVideoEffect(t).then((function(){Object(r.isSafari)()?t.replaceTrack(s.getVideoTracks()[0],o,n):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(s.getVideoTracks()[0]),o())}))}catch(e){return n&&n(e)}}),(function(e){return n&&n(e)}))},t._switchAudioDevice=function(e,i,n){if(e===t.microphoneId)return i&&i();var o={video:!1,audio:s()({},t.audioConstraint,{deviceId:{exact:e}})};l.default.debug("[".concat(t.streamId,"] "),o),Object(m.b)(o,(function(s){var o=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},i&&i()};try{Object(r.isSafari)()?t.replaceTrack(s.getAudioTracks()[0],o,n):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(s.getAudioTracks()[0]),o())}catch(e){return n&&n(e)}}),(function(e){return n&&n(e)}))},t.switchDevice=function(e,i,n,s){var r=u.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return s&&s(e);n&&n(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(b.checkValidString)(i,"deviceId");var o=function(){return t.inSwitchDevice=!1,r()},a=function(e){t.inSwitchDevice=!1,l.default.error("[".concat(t.streamId,"] "),e),r(e)};if(t.inSwitchDevice)return r("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return a("Only the local stream can switch the device.");if(t.screen&&"video"===e)return a("The device cannot be switched during screen-sharing.");if(!t.video&&"video"===e)return a("Video track not exist.");if(!t.audio&&"audio"===e)return a("Audio track not exist.");if(t.videoSource||t.audioSource)return a("The device cannot be switched when using videoSource or audioSource.");var c=!1;for(var h in t.audioMixing.sounds){var d=t.audioMixing.sounds[h];if(d.state!==t.audioMixing.states.IDLE){c=!0;break}}var p=t.audioMixing.audioContextInited;if(p&&c)return a("The device cannot be switched when using audio Mixing.");y.a.getDeviceById(i,(function(){if("video"===e)t._switchVideoDevice(i,o,a);else{if("audio"!==e)return a("Invalid type.");t._switchAudioDevice(i,o,a)}}),(function(){return a("The device does not exist.")}))},t},A=function(e){var t=u.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:e&&e.audioSource?e.audioSource.enabled:null,videoTrackEnable:e&&e.videoSource?e.videoSource.enabled:null}}});Object(b.checkValidObject)(e,"StreamSpec");var i=e.streamID,n=e.audio,s=e.video,r=e.screen,o=e.screenAudio,a=e.cameraId,c=e.facingMode,h=e.microphoneId,d=e.mirror,p=e.extensionId,f=e.mediaSource,m=e.audioProcessing,v=e.optimizationMode;if(!Object(b.isEmpty)(i)&&!Object(g.is32Uint)(i)&&!Object(b.isValidString)(i,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(b.checkValidBoolean)(n,"audio"),Object(b.checkValidBoolean)(s,"video"),Object(b.isEmpty)(r)||Object(b.checkValidBoolean)(r,"screen"),Object(b.isEmpty)(o)||Object(b.checkValidBoolean)(o,"screenAudio"),Object(b.isEmpty)(a)||Object(b.checkValidString)(a,"cameraId",0,255,!1),Object(b.isEmpty)(c)||Object(b.checkValidEnum)(c,"facingMode",["user","environment","left","right"]),Object(b.isEmpty)(h)||Object(b.checkValidString)(h,"microphoneId",0,255,!1),Object(b.isEmpty)(p)||Object(b.checkValidString)(p,"extensionId"),Object(b.isEmpty)(f)||Object(b.checkValidEnum)(f,"mediaSource",["screen","application","window"]),Object(b.isEmpty)(d)||Object(b.checkValidBoolean)(d,"mirror"),!Object(b.isEmpty)(m)){var y=m.AGC,w=m.AEC,S=m.ANS;Object(b.isEmpty)(y)||Object(b.checkValidBoolean)(y,"AGC"),Object(b.isEmpty)(w)||Object(b.checkValidBoolean)(w,"AEC"),Object(b.isEmpty)(S)||Object(b.checkValidBoolean)(S,"ANS")}Object(b.isEmpty)(v)||Object(b.checkValidEnum)(v,"optimizationMode",["detail","motion"]),l.default.debug("Create stream"),!0===o&&!0===n&&l.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),e.screen&&!v&&(e.optimizationMode="detail");var C=k(e);return t(),C}},function(e,t,i){"use strict";i.d(t,"a",(function(){return S})),i.d(t,"b",(function(){return C}));var n=i(4),s=i(7),r=i.n(s),o=i(13),a=i.n(o),l=i(17),c=i.n(l),h=i(0),d=i(15),u=i(3);function p(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function m(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var v=i(48),y=i.n(v),b=i(25),w=(i(5),103),S=function(e){var t={};if(t.clientId=e.clientId,e.session_id=w+=1,"undefined"==typeof window||!window.navigator)throw h.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=function(e){var t={},i=(mozRTCPeerConnection,mozRTCSessionDescription),n=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map((function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})})):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):h.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new d.RTCPeerConnection(t.pc_config),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,h.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(u.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var i,n,s,r;n=(i=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),s=i.match(/a=candidate:.+typ\shost.+\r\n/),r=i.match(/a=candidate:.+typ\srelay.+\r\n/),null===n&&null===s&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),i=t[1].split("m=video");return t[0]+"m=video"+i[1]+"m=audio"+i[0]},t.processSignalingMessage=function(n){var s,r=JSON.parse(n);t.incomingMessage=r,"new"===t.state?"OFFER"===r.messageType?(r.sdp=v(r.sdp),t.peerConnection.setRemoteDescription(new i(s={sdp:r.sdp,type:"offer"}),(function(){h.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){h.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===r.messageType?(r.sdp=v(r.sdp),r.sdp=r.sdp.replace(/ generation 0/g,""),r.sdp=r.sdp.replace(/ udp /g," UDP "),-1!==r.sdp.indexOf("a=group:BUNDLE")?(r.sdp=r.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),r.sdp=r.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),r.sdp=r.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(r.sdp=r.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),r.sdp=r.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),s={sdp:r.sdp,type:"answer"},e.screen&&"detail"===e.optimizationMode&&(h.default.debug("[".concat(t.client,"] remove screen share abs ext")),r.sdp=y(s.sdp)),t.peerConnection.setRemoteDescription(new i(s),(function(){h.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){h.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)})),t.state="established"):"pr-answer"===r.messageType?t.peerConnection.setRemoteDescription(new i(s={sdp:r.sdp,type:"pr-answer"}),(function(){h.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){h.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})):t.error("offer"===r.messageType?"Not written yet":"Illegal message for this state: "+r.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===r.messageType?(t.peerConnection.setRemoteDescription(new i(s={sdp:r.sdp,type:"offer"}),(function(){h.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){h.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=c()(a.a.mark((function e(i){var n,s,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerConnection.getSenders(),s=n.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(r=s.getParameters()).degradationPreference=i,e.prev=6,h.default.debug("[".concat(t.clientId,"] setParameters"),r),e.next=10,s.setParameters(r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),h.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var s={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},r={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},o={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},l={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},p=0,f=0,g=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then((function(i){var n,s=m(i.values());try{for(s.s();!(n=s.n()).done;){var r=n.value;if(t.isSubscriber){if(("inbound-rtp"===r.type||"inboundrtp"===r.type)&&"video"===r.mediaType){if(!t.lastReport)return void(t.lastReport=r);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:Math.round(r.framerateMean)+"",frameRateDecoded:r.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:r.bytesReceived+"",packetsReceived:r.packetsReceived+"",packetsLost:r.packetsLost+""}),t.lastReport=r}}else if(("outbound-rtp"===r.type||"outboundrtp"===r.type)&&"video"===r.mediaType){if(!t.lastReport)return void(t.lastReport=r);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:Math.round(r.framerateMean)+"",frameRateSent:r.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=r}}}catch(e){s.e(e)}finally{s.f()}}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(i){var n,s=m(i.values());try{for(s.s();!(n=s.n()).done;){var r=n.value;t.isSubscriber&&("inbound-rtp"!==r.type&&"inboundrtp"!==r.type||"audio"!==r.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:r.packetsLost+"",frameReceived:r.packetsReceived+"",googJitterReceived:r.jitter+"",bytesReceived:r.bytesReceived+"",packetsReceived:r.packetsReceived+"",packetsLost:r.packetsLost+""}))}}catch(e){s.e(e)}finally{s.f()}}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){})),e(t)}))},t.getStats=function(e,i){i=(i=i||500)>500?500:i,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<i?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(i,n){t.filterStatsCache=i,t.originStatsCache=n,t.lastTimeGetStats=Date.now(),e&&e(i,n)}))},t._getStats=function(i){t.peerConnection.getStats().then((function(n){var a,c=[],h=m(n.values());try{for(h.s();!(a=h.n()).done;){var d=a.value;c.push(d),"outbound-rtp"!==d.type&&"outboundrtp"!==d.type||"video"!==d.mediaType||-1!==d.id.indexOf("rtcp")||(r.id=d.id,r.type=d.type,r.mediaType=d.mediaType,r.bytesSent=d.bytesSent?d.bytesSent+"":"0",r.packetsSent=d.packetsSent?d.packetsSent+"":"0",r.googPlisReceived=d.pliCount?d.pliCount+"":"0",r.googNacksReceived=d.nackCount?d.nackCount+"":"0",r.googFirsReceived=d.firCount?d.firCount+"":"0",r.googFrameRateSent=d.framerateMean?Math.round(d.framerateMean)+"":"0"),"outbound-rtp"!==d.type&&"outboundrtp"!==d.type||"audio"!==d.mediaType||-1!==d.id.indexOf("rtcp")||(s.id=d.id,s.type=d.type,s.mediaType=d.mediaType,s.bytesSent=d.bytesSent?d.bytesSent+"":"0",s.packetsSent=d.packetsSent?d.packetsSent+"":"0",e.agoraStream.local&&(s.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==d.type&&"inboundrtp"!==d.type||"audio"!==d.mediaType||d.isRemote||-1!==d.id.indexOf("rtcp")||(o.id=d.id,o.type=d.type,o.mediaType=d.mediaType,o.bytesReceived=d.bytesReceived?d.bytesReceived+"":"0",o.packetsLost=d.packetsLost?d.packetsLost+"":"0",o.packetsReceived=d.packetsReceived?d.packetsReceived+"":"0",o.googJitterReceived=d.jitter?d.jitter+"":"0",e.agoraStream.local||(o.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==d.type&&"inboundrtp"!==d.type||"video"!==d.mediaType||d.isRemote||-1!==d.id.indexOf("rtcp")||(l.id=d.id,l.type=d.type,l.mediaType=d.mediaType,l.bytesReceived=d.bytesReceived?d.bytesReceived+"":"0",l.googFrameRateReceived=d.framerateMean?Math.round(d.framerateMean)+"":"0",l.googFramesDecoded=d.framesDecoded?d.framesDecoded+"":"0",Date.now()-g>=1e3?(l.googFrameRateDecoded=(d.framesDecoded-p)/((Date.now()-g)/1e3),l.googFrameRateDecoded=Math.round(Math.max(0,l.googFrameRateDecoded)),g=Date.now(),f=l.googFrameRateDecoded,p=d.framesDecoded,l.googFrameRateDecoded=l.googFrameRateDecoded.toString()):l.googFrameRateDecoded=f.toString(),l.packetsLost=d.packetsLost?d.packetsLost+"":"0",l.packetsReceived=d.packetsReceived?d.packetsReceived+"":"0",l.googJitterBufferMs=d.jitter?d.jitter+"":"0",l.googNacksSent=d.nackCount?d.nackCount+"":"0",l.googPlisSent=d.pliCount?d.pliCount+"":"0",l.googFirsSent=d.firCount?d.firCount+"":"0"),-1!==d.id.indexOf("outbound_rtcp_video")&&(r.packetsLost=d.packetsLost?d.packetsLost+"":"0")}}catch(e){h.e(e)}finally{h.f()}var u=[r,s,o,l];u.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),i(u,c)}),(function(e){h.default.error("["+t.clientId+"]"+e)}))},t.addStream=function(e){n=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)n&&(t.mediaConstraints=void 0),t.peerConnection.createOffer((function(e){if(e.sdp=v(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();h.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){h.default.debug("["+t.clientId+"]Ups! create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(h.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(u.getParameter)("SHIM_CANDIDATE")?(h.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):h.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var i=new Date;h.default.debug("["+t.clientId+"]"+i.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(){h.default.debug("["+t.clientId+"]Ups! Something went wrong")}));else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;t.sendMessage("ANSWER",t.peerConnection.localDescription.sdp),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,i){var n={};n.messageType=e,n.sdp=i,"OFFER"===e?(n.offererSessionId=t.sessionId,n.answererSessionId=t.otherSessionId,n.seq=t.sequenceNumber+=1,n.tiebreaker=Math.floor(429496723*Math.random()+1)):(n.offererSessionId=t.incomingMessage.offererSessionId,n.answererSessionId=t.sessionId,n.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(n))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var i=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(i)return i}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,i,n){var s=t._getSender(e.kind);if(!s)return n("NO_SENDER_FOUND");try{s.replaceTrack(e)}catch(e){return n&&n(e)}setTimeout((function(){return i&&i()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var v=function(t){var i;if(e.video&&e.maxVideoBW&&(null==(i=t.match(/m=video.*\r\n/))&&(i=t.match(/m=video.*\n/)),i&&i.length>0)){var n=i[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(i[0],n)}return e.audio&&e.maxAudioBW&&(null==(i=t.match(/m=audio.*\r\n/))&&(i=t.match(/m=audio.*\n/)),i&&i.length>0)&&(t=t.replace(i[0],n=i[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n")),t},y=function(e){return(e=e.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)):"iOS"===n.getBrowserOS()||n.isSafari()?(h.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=function(e){var t={},i=d.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{urls:["stun:webcs.agora.io:3478","stun:stun.l.google.com:19302"]}],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):h.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new i(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new i(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(u.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var i,n,s,r;n=(i=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),s=i.match(/a=candidate:.+typ\shost.+\r\n/),r=i.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout((function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),1e3)),null===n&&null===s&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var n=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},s=function(i){var n;return(n=i.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(i=i.replace(n[0],n[0]+"b=AS:"+e.maxVideoBW+"\r\n"),h.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(n=i.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=i.replace(n[0],n[0]+"b=AS:"+e.maxAudioBW+"\r\n")),i};t.processSignalingMessage=function(i){var r,o=JSON.parse(i);t.incomingMessage=o,"new"===t.state?"OFFER"===o.messageType?(r={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===o.messageType?((r={sdp:o.sdp,type:"answer"}).sdp=n(r.sdp),r.sdp=s(r.sdp),r.sdp=r.sdp.replace(/a=x-google-flag:conference\r\n/g,""),e.screen&&"detail"===e.optimizationMode&&(h.default.debug("[".concat(t.client,"] remove screen share abs ext")),r.sdp=r.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)),t.state="established"):"pr-answer"===o.messageType?(r={sdp:o.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r))):t.error("offer"===o.messageType?"Not written yet":"Illegal message for this state: "+o.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===o.messageType?(r={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===o.messageType?((r={sdp:o.sdp,type:"answer"}).sdp=n(r.sdp),r.sdp=s(r.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r))):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=c()(a.a.mark((function e(i){var n,s,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerConnection.getSenders(),s=n.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(r=s.getParameters()).degradationPreference=i,e.prev=6,h.default.debug("[".concat(t.clientId,"] setParameters"),r),e.next=10,s.setParameters(r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),h.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var r={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},l={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},p={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},f={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},m=0,g=0,v=0;return t.isRemoteVideoStats=function(e){return!!(e.frameHeight&&e.frameWidth&&e.remoteSource)},t.getVideoRelatedStats=function(i){t.peerConnection.getStats().then((function(n){var s={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};n.forEach((function(n){if(t.isSubscriber){if("track"===n.type&&(~n.id.indexOf("video")||~n.trackIdentifier.indexOf("v")||t.isRemoteVideoStats(n))){if(!t.lastReport)return void(t.lastReport=n);s.frameRateReceived=n.framesReceived-t.lastReport.framesReceived+"",s.frameRateDecoded=n.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=n}"inbound-rtp"===n.type&&~n.id.indexOf("Video")&&(s.bytesReceived=n.bytesReceived+"",s.packetsReceived=n.packetsReceived+"",s.packetsLost=n.packetsLost+"")}else if("outbound-rtp"===n.type&&~n.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=n);i&&i({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:n.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=n}})),i&&i(s)}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(i){i.forEach((function(i){t.isSubscriber&&"inbound-rtp"===i.type&&~i.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:i.packetsLost+"",frameReceived:i.packetsReceived+"",googJitterReceived:i.jitter+"",bytesReceived:i.bytesReceived+"",packetsReceived:i.packetsReceived+"",packetsLost:i.packetsLost+""})}))}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=((e.googFramesEncoded-m)/3).toString(),m=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=((e.googFrameReceived-v)/3).toString(),v=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-g)/3).toString(),g=e.googFramesDecoded))})),e(t)}))},t.getStats=function(e,i){i=(i=i||500)>500?500:i,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<i?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(i,n){t.filterStatsCache=i,t.originStatsCache=n,t.lastTimeGetStats=Date.now(),e&&e(i,n)}))},t._getStats=function(i){var n=[];t.peerConnection.getStats().then((function(s){s.forEach((function(t){var i;n.push(t),"outbound-rtp"===t.type&&"audio"===t.mediaType&&(r.id=t.id,r.type=t.type,r.mediaType=t.mediaType,r.bytesSent=t.bytesSent?t.bytesSent+"":"0",r.packetsSent=t.packetsSent?t.packetsSent+"":"0",e.agoraStream.local&&(r.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===t.type&&"video"===t.mediaType&&(o.id=t.id,o.type=t.type,o.mediaType=t.mediaType,o.bytesSent=t.bytesSent?t.bytesSent+"":"0",o.packetsSent=t.packetsSent?t.packetsSent+"":"0",o.googPlisReceived=t.pliCount?t.pliCount+"":"0",o.googNacksReceived=t.nackCount?t.nackCount+"":"0",o.googFirsReceived=t.firCount?t.firCount+"":"0",o.googFramesEncoded=t.framesEncoded?t.framesEncoded+"":"0",(i=s.get(t.trackId))&&(o.googFrameHeightSent=i.frameHeight&&i.frameHeight.toString(),o.googFrameWidthSent=i.frameWidth&&i.frameWidth.toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("44444")&&"audio"!==t.mediaType||(l.id=t.id,l.type=t.type,l.mediaType="audio",l.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",l.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",l.packetsLost=t.packetsLost?t.packetsLost+"":"0",l.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",l.googJitterReceived=t.jitter?t.jitter+"":"0",(i=s.get(t.trackId))&&(l.audioOutputLevel=i.audioLevel&&Math.round(32767*i.audioLevel).toString()),e.agoraStream.local||l.audioOutputLevel||(l.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("55543")&&"video"!==t.mediaType||(p.id=t.id,p.type=t.type,p.mediaType="video",p.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",p.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",p.packetsLost=t.packetsLost?t.packetsLost+"":"0",p.googJitterBufferMs=t.jitter?t.jitter+"":"0",p.googNacksSent=t.nackCount?t.nackCount+"":"0",p.googPlisSent=t.pliCount?t.pliCount+"":"0",p.googFirsSent=t.firCount?t.firCount+"":"0",(i=s.get(t.trackId))&&(p.googFrameHeightReceived=i.frameHeight&&i.frameHeight.toString(),p.googFrameWidthReceived=i.frameWidth&&i.frameWidth.toString(),p.googFrameReceived=i.framesReceived&&i.framesReceived.toString(),p.googFramesDecdec=i.framesDecoded&&i.framesDecoded.toString())),"candidate-pair"===t.type&&(0==t.availableIncomingBitrate?f.googAvailableSendBandwidth=t.availableOutgoingBitrate+"":f.googAvailableReceiveBandwidth=t.availableIncomingBitrate+"")}));var a=[f,r,o,l,p];a.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),i(a,n)})).catch((function(e){h.default.error("["+t.clientId+"] ",e)}))},t.addTrack=function(e,i){t.peerConnection.addTrack(e,i)},t.removeTrack=function(e,i){var n=t.peerConnection.getSenders().find((function(t){return t.track==e}));n.replaceTrack(null),t.peerConnection.removeTrack(n)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach((function(i){return t.peerConnection.addTrack(i,e)})):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then((function(i){if(i.sdp=s(i.sdp),e.isSubscriber||(i.sdp=i.sdp.replace(/a=.*video-orientation\r\n/g,"")),i.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(i),t.state="preparing-offer",void t.markActionNeeded();h.default.debug("["+t.clientId+"]Not sending a new offer")})).catch((function(e){h.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(h.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(u.getParameter)("SHIM_CANDIDATE")?(h.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):h.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var i=new Date;h.default.debug("["+t.clientId+"]"+i.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){h.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;t.sendMessage("ANSWER",t.peerConnection.localDescription.sdp),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,i){var n={};n.messageType=e,n.sdp=i,"OFFER"===e?(n.offererSessionId=t.sessionId,n.answererSessionId=t.otherSessionId,n.seq=t.sequenceNumber+=1,n.tiebreaker=Math.floor(429496723*Math.random()+1)):(n.offererSessionId=t.incomingMessage.offererSessionId,n.answererSessionId=t.sessionId,n.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(n))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var i=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(i)return i}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,i,n){var s=t._getSender(e.kind);if(!s)return n("NO_SENDER_FOUND");try{s.replaceTrack(e)}catch(e){return n&&n(e)}setTimeout((function(){return i&&i()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){console.log("!!! ontrack, ",e.track.kind,e.track),t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=n(e.sdp),e.sdp=s(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){console.log("createOffer error: ",e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new y.a(e):(t=function(e){var t={},i=d.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{url:"stun:webcs.agora.io:3478"}]};var s={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},l={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},f={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},m={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):h.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new i(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new i(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,h.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(u.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var i,n,s,r;n=(i=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),s=i.match(/a=candidate:.+typ\shost.+\r\n/),r=i.match(/a=candidate:.+typ\srelay.+\r\n/),null===n&&null===s&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var g=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},v=function(i){var n,s;if((n=i.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){s=n[0]+"b=AS:"+e.maxVideoBW+"\r\n";var r=0,o=0;"h264"===e.codec?(r=i.search(/a=rtpmap:(\d+) H264\/90000\r\n/),o=i.search(/H264\/90000\r\n/)):"vp8"===e.codec&&(r=i.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),o=i.search(/VP8\/90000\r\n/)),-1!==r&&-1!==o&&o-r>10&&(s=s+"a=fmtp:"+i.slice(r+9,o-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),i=i.replace(n[0],s),h.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(n=i.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=i.replace(n[0],s=n[0]+"b=AS:"+e.maxAudioBW+"\r\n")),i};t.processSignalingMessage=function(i){var n,s=JSON.parse(i);t.incomingMessage=s,"new"===t.state?"OFFER"===s.messageType?(n={sdp:s.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===s.messageType?((n={sdp:s.sdp,type:"answer"}).sdp=g(n.sdp),n.sdp=v(n.sdp),e.screen&&"detail"===e.optimizationMode&&(h.default.debug("[".concat(t.client,"] remove screen share abs ext")),n.sdp=n.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),e.isSubscriber&&(n.sdp=n.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="established"):"pr-answer"===s.messageType?(n={sdp:s.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){}))):t.error("offer"===s.messageType?"Not written yet":"Illegal message for this state: "+s.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===s.messageType?(n={sdp:s.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):"ANSWER"===s.messageType?((n={sdp:s.sdp,type:"answer"}).sdp=g(n.sdp),n.sdp=v(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){}))):t.error("Illegal message for this state: "+s.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=c()(a.a.mark((function e(i){var n,s,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerConnection.getSenders(),console.log("senders",n),s=n.find((function(e){return"video"===e.track.kind}))){e.next=5;break}return e.abrupt("return");case 5:return(r=s.getParameters()).degradationPreference=i,e.prev=7,h.default.debug("[".concat(t.clientId,"] setParameters"),r),e.next=11,s.setParameters(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),h.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}();var y=0,b=0;return t.getVideoRelatedStats=function(e){t.getStats((function(i){i.forEach((function(i){if(t.isSubscriber){if("video"===i.mediaType&&i.id&&~i.id.indexOf("recv")){if(n.isChromeKernel()&&+n.getBrowserVersion()>=76){var s=+i.googFramesDecoded-b;t._setStat(f,"googFrameRateReceived",+i.googFramesReceived-y),t._setStat(f,"googFrameRateDecoded",s),t._setStat(f,"googFrameRateOutput",s),y=+i.googFramesReceived,b=+i.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:i.googFrameRateReceived,frameRateDecoded:i.googFrameRateDecoded,bytesReceived:i.bytesReceived,packetsReceived:i.packetsReceived,packetsLost:i.packetsLost})}}else"video"===i.mediaType&&i.id&&~i.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:i.googFrameRateInput,frameRateSent:i.googFrameRateSent,googRtt:i.googRtt})}))}))},t.getAudioRelatedStats=function(e){t.getStats((function(i){i.forEach((function(i){t.isSubscriber&&"audio"===i.mediaType&&i.id&&~i.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(i.googDecodingPLC)+parseInt(i.googDecodingPLCCNG)+"",frameReceived:i.googDecodingCTN,googJitterReceived:i.googJitterReceived,bytesReceived:i.bytesReceived,packetsReceived:i.packetsReceived,packetsLost:i.packetsLost})}))}))},t.getStatsRate=function(e){t.getStats((function(t){e(t)}))},t.getStats=function(e,i){i=(i=i||500)>500?500:i,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<i?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats((function(i,n){t.filterStatsCache=i,t.originStatsCache=n,e&&e(i,n)})))},t._setStat=function(e,t,i){e.hasOwnProperty(t)&&(null!=i&&i!==1/0&&i==i||(i=0),e[t]=i+"")},t._processGetStatsAfterChrome76=function(e){var i=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then((function(n){var a,c=[],h=[],d=new Map,u=new Date,g=p(n.values());try{for(g.s();!(a=g.n()).done;){var v=a.value;"codec"!=v.type?"candidate-pair"!=v.type?("inbound-rtp"===v.type&&"video"===v.mediaType&&d.set("inbound-video",v),"inbound-rtp"===v.type&&"audio"===v.mediaType&&d.set("inbound-audio",v),"outbound-rtp"===v.type&&"audio"===v.mediaType&&d.set("outbound-audio",v),"outbound-rtp"===v.type&&"video"===v.mediaType&&d.set("outbound-video",v),"track"===v.type&&"video"===v.kind&&v.remoteSource&&d.set("remote-video-track",v),"track"===v.type&&"audio"===v.kind&&v.remoteSource&&d.set("remote-audio-track",v),"remote-inbound-rtp"===v.type&&"video"===v.mediaType&&d.set("remote-inbound-video",v),"remote-inbound-rtp"===v.type&&"audio"===v.mediaType&&d.set("remote-inbound-audio",v),"track"!==v.type||"video"!==v.kind||v.remoteSource||d.set("local-video-track",v),"track"!==v.type||"audio"!==v.kind||v.remoteSource||d.set("local-audio-track",v),"media-source"===v.type&&"video"===v.kind&&d.set("media-source-video",v),"media-source"===v.type&&"audio"===v.kind&&d.set("media-source-audio",v)):h.push(v):c.push(v)}}catch(e){g.e(e)}finally{g.f()}d.set("codec",c),d.set("candidatePairs",h),d.set("timestamp",+u);var y=null,b=null;if(f.timestamp=u,l.timestamp=u,s.timestamp=u,s.timestamp=u,m.timestamp=u,i.isSubscriber)(y=d.get("inbound-video"))&&(t._setStat(f,"id","inbound_video_ssrc_recv"),t._setStat(f,"mediaType",y.mediaType),t._setStat(f,"packetsLost",y.packetsLost),t._setStat(f,"googDecodeMs",null),t._setStat(f,"googMaxDecodeMs",null),t._setStat(f,"googRenderDelayMs",null),t._setStat(f,"googMinPlayoutDelayMs",null),t._setStat(f,"googNacksSent",y.nackCount),t._setStat(f,"googPlisSent",y.pliCount),t._setStat(f,"googFirsSent",y.firCount),t._setStat(f,"bytesReceived",y.bytesReceived),t._setStat(f,"packetsReceived",y.packetsReceived)),(y=d.get("inbound-audio"))&&(t._setStat(l,"id","inbound_audio_ssrc_recv"),t._setStat(l,"mediaType",y.mediaType),t._setStat(l,"bytesReceived",y.bytesReceived),t._setStat(l,"packetsLost",y.packetsLost),t._setStat(l,"packetsReceived",y.packetsReceived),t._setStat(l,"googAccelerateRate",y.removedSamplesForAcceleration),t._setStat(l,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(l,"googDecodingCNG",null),t._setStat(l,"googDecodingCTN",null),t._setStat(l,"googDecodingCTSG",null),t._setStat(l,"googDecodingNormal",null),t._setStat(l,"googDecodingPLC",null),t._setStat(l,"googDecodingPLCCNG",null),t._setStat(l,"googJitterReceived",y.jitter),t._setStat(l,"googPreferredJitterBufferMs",null),t._setStat(l,"googSecondaryDecodedRate",null)),(y=d.get("remote-video-track"))&&(t._setStat(f,"googTargetDelayMs",y.jitterBufferDelay),t._setStat(f,"googFrameWidthReceived",y.frameWidth),t._setStat(f,"googFrameHeightReceived",y.frameHeight),t._setStat(f,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(f,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(f,"googFramesDecoded",y.framesDecoded),t._setStat(f,"googFramesReceived",y.framesReceived)),(y=d.get("remote-audio-track"))&&(t._setStat(l,"audioOutputLevel",32767*y.audioLevel),t._setStat(l,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(l,"googExpandRate",y.concealedSamples),t._setStat(l,"googPreemptiveExpandRate",y.insertedSamplesForDeceleration),t._setStat(l,"googSpeechExpandRate",y.silentConcealedSamples));else{var w=t.lastStats.get("timestamp"),S=t.lastStats.get("outbound-video");if((y=d.get("outbound-audio"))&&(t._setStat(s,"id","outbound_audio_ssrc_send"),t._setStat(s,"mediaType",y.mediaType),t._setStat(s,"aecDivergentFilterFraction",null),t._setStat(s,"bytesSent",y.bytesSent),t._setStat(s,"packetsSent",y.packetsSent),b=y.transportId),y=d.get("outbound-video")){if(t._setStat(o,"id","outbound_video_ssrc_send"),t._setStat(o,"mediaType",y.mediaType),t._setStat(o,"bytesSent",y.bytesSent),t._setStat(o,"packetsSent",y.packetsSent),t._setStat(o,"googAdaptationChanges",y.qualityLimitationDurations),t._setStat(o,"googAvgEncodeMs",null),t._setStat(o,"googEncodeUsagePercent",null),b=y.transportId,y.totalEncodedBytesTarget&&S&&S.totalEncodedBytesTarget){var C=(y.totalEncodedBytesTarget-S.totalEncodedBytesTarget)/(+new Date-w);t._setStat(m,"googTargetEncBitrate",Math.floor(8*C*1e3))}if(y.retransmittedBytesSent&&S&&S.retransmittedBytesSent){var _=(y.retransmittedBytesSent-S.retransmittedBytesSent)/(+new Date-w);t._setStat(m,"googRetransmitBitrate",Math.floor(8*_*1e3))}if(y.bytesSent&&S&&S.bytesSent){var E=(y.bytesSent-S.bytesSent)/(+new Date-w);t._setStat(m,"googTransmitBitrate",Math.floor(8*E*1e3)),t._setStat(m,"googActualEncBitrate",Math.floor(8*E*1e3))}if(y.totalPacketSendDelay&&S&&S.totalPacketSendDelay){var T=(y.totalPacketSendDelay-S.totalPacketSendDelay)/(+new Date-w);t._setStat(m,"googBucketDelay",Math.floor(1e3*T))}}if((y=d.get("remote-inbound-video"))&&(t._setStat(o,"packetsLost",y.packetsLost),t._setStat(o,"googRtt",y.roundTripTime)),(y=d.get("local-video-track"))&&(t._setStat(o,"googFrameHeightSent",y.frameHeight),t._setStat(o,"googFrameWidthSent",y.frameWidth),void 0!==y.framesPerSecond&&t._setStat(o,"googFrameRateSent",y.framesPerSecond)),(y=d.get("local-audio-track"))&&(t._setStat(s,"googEchoCancellationReturnLoss",y.echoReturnLoss),t._setStat(s,"googEchoCancellationReturnLossEnhancement",y.echoReturnLossEnhancement)),(y=d.get("media-source-video"))&&(t._setStat(o,"googFrameHeightInput",y.height),t._setStat(o,"googFrameWidthInput",y.width),t._setStat(o,"googFrameRateInput",y.framesPerSecond)),(y=d.get("media-source-audio"))&&t._setStat(s,"audioInputLevel",32767*y.totalAudioEnergy),(y=d.get("inbound-video"))&&(t._setStat(o,"googFirsReceived",y.firCount),t._setStat(o,"googNacksReceived",y.nackCount),t._setStat(o,"googPlisReceived",y.pliCount)),b)d.get("candidatePairs").map((function(e){b==e.transportId&&t._setStat(m,"googAvailableSendBandwidth",e.availableOutgoingBitrate)}));else{var x=d.get("candidatePairs")[0];x&&t._setStat(m,"googAvailableSendBandwidth",x.availableOutgoingBitrate)}}t.lastStats=d;var k=[r()({},o),r()({},s),r()({},f),r()({},l),r()({},m)];k.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(k)}))},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats((function(i){var n=[],a=[],c=null;Object.keys(i).forEach((function(e){var t=i[e];t&&(a.push(t),c=t.timestamp,"VideoBwe"===t.type?m=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?o=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?s=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?f=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(l=t))})),(n=[r()({},o),r()({},s),r()({},f),r()({},l),r()({},m)]).push({id:"time",startTime:t.connectedTime,timestamp:c||new Date}),e(n,a)}))},t._getStats=function(e){Object(u.getParameter)("CHROME_NEW_STATS")&&n.isChromeKernel()&&+n.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,i){t.peerConnection.addTrack(e,i)},t.removeTrack=function(e,i){t.peerConnection.removeTrack(t.peerConnection.getSenders().find((function(t){return t.track==e})))},t.addStream=function(e){t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer((function(i){if(i.sdp!==t.prevOffer)return e.isSubscriber&&(i.sdp=i.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setLocalDescription(i),t.state="preparing-offer",void t.markActionNeeded();h.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){h.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(h.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(u.getParameter)("SHIM_CANDIDATE")?(h.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):h.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var i=new Date;h.default.debug("["+t.clientId+"]"+i.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){h.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;t.sendMessage("ANSWER",t.peerConnection.localDescription.sdp),t.state="established"}else h.default.debug("[".concat(t.clientId,"] Dazed and confused in state ' + that.state + ', stopping here'"));t.actionNeeded=!1}},t.sendMessage=function(e,i){var n={};n.messageType=e,n.sdp=i,"OFFER"===e?(n.offererSessionId=t.sessionId,n.answererSessionId=t.otherSessionId,n.seq=t.sequenceNumber+=1,n.tiebreaker=Math.floor(429496723*Math.random()+1)):(n.offererSessionId=t.incomingMessage.offererSessionId,n.answererSessionId=t.sessionId,n.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(n))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var i=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(i)return i}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,i,n){var s=t._getSender(e.kind);if(!s)return n("NO_SENDER_FOUND");try{s.replaceTrack(e)}catch(e){return n&&n(e)}setTimeout((function(){return i&&i()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=g(e.sdp),e.sdp=v(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){console.log("createOffer error: ",e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t}(e)).browser="chrome-stable",t},C=function(e,t,i){var s={};s.config=e,s.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var r=0,o=1,a=!1,l=null,c=function(e){if(r++,l)if(l===e)h.default.debug("Using Video Source/ Audio Source");else{var i=l.getVideoTracks()[0],n=l.getAudioTracks()[0],s=e.getVideoTracks()[0],c=e.getAudioTracks()[0];s&&(i&&l.removeTrack(i),l.addTrack(s)),c&&(n&&l.removeTrack(n),l.addTrack(c))}else l=e;r!==o||a||(a=!0,setTimeout((function(){t(l)}),0))},d=function(e){h.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),r++,a||(a=!0,setTimeout((function(){i&&i(e)}),0))},u=function(){var t={video:e.video,audio:e.audio};if(h.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(c).catch(d);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,c,d);else{var n={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};h.default.error("["+s.streamId+"]"+n.message),i&&i(n)}};if((e.videoSource||e.audioSource)&&(l=new MediaStream,e.videoSource&&l.addTrack(e.videoSource),e.audioSource&&l.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio){if(!e.screen&&e.screenAudio)return i&&i({code:"Set screen to true before sharing the audio"});if(e.screen){if(b.a.isElectron())return e.screen.sourceId?b.a.getScreenStream(e.screen.sourceId,e.screen,(function(t,i){t?d(t):(e.audio&&(o++,u()),c(i))})):b.a.shareScreen(e.screen,(function(t,i){t?d(t):(e.audio&&(o++,u()),c(i))}));if(n.isFireFox()){if(h.default.debug("["+s.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(e.screen.mediaSource))return i&&i({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},(function(t){e.audio&&(o++,u()),c(t)}),d)}else if(n.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void i({code:"This browser does not support screen sharing"});h.default.debug("["+s.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},(function(t){void 0===t?(h.default.error("["+s.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),d({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},(function(t){e.audio&&(o++,u()),c(t)}),d))}))}catch(e){return h.default.debug("["+s.streamId+"]AgoraRTC screensharing plugin is not accessible"),void i({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var p={};return p.video="number"==typeof e.screen.width&&"number"==typeof e.screen.height?{width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:{width:e.screen.width,height:e.screen.height},p.video.frameRate=e.screen.frameRate&&e.screen.frameRate.min?{ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:e.screen.frameRate,e.screenAudio&&(p.audio=e.screenAudio),h.default.debug("use getDisplayMedia, constraints:",p),window.navigator.mediaDevices.getDisplayMedia(p).then((function(t){!e.screenAudio&&e.audio&&(o++,u()),c(t)})).catch(d)}h.default.error("["+s.streamId+"]This browser does not support screenSharing"),i({code:"This browser does not support screen sharing"})}}else u()}else c(l)}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(i(0)),r=function(){function e(e,t,i){void 0===t&&(t=""),this.name="AgoraRTCException",this.code=e,this.message="AgoraRTCError "+this.code+": "+t,this.data=i}return e.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},e.prototype.throw=function(){throw s.default.error(this.toString()),this},e}();t.AgoraRTCError=r,function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(t.AgoraRTCErrorCode||(t.AgoraRTCErrorCode={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(0),s=window.AudioContext||window.webkitAudioContext,r=i(3),o=r.getParameter,a=r.setParameter,l=function(){return o("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),a("AUDIO_CONTEXT",function(){if(s){var e=new s;return window.ctx=e,new Promise((function(e){document.body?e():window.addEventListener("load",e)})).then((function(){var t=function t(){"suspended"==e.state?(n.default.debug("AudioContext is suspended, auto resume"),e.resume().then((function(){n.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0)}))):(n.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0))};n.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",t,!0),document.body.addEventListener("mousedown",t,!0)})),e}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),o("AUDIO_CONTEXT")};l()},function(e,t,i){"use strict";var n=i(1),s=null,r=function(){try{s=window.require("electron")}catch(e){}return s},o=function(e){var t=n.report.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),i=r();if(!i)return t&&t("electron is null");try{var s=i.desktopCapturer.getSources({types:["window","screen"]})}catch(e){console.log(e)}s instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),s.then((function(e){return t&&t(null,e)})).catch((function(e){return t&&t(e)}))):s=i.desktopCapturer.getSources({types:["window","screen"]},(function(e,i){console.log("electron.desktopCapturer.getSources return type is callback"),t&&t(null,i)}))},a=function(e,t,i){t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:t.width,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}},navigator.webkitGetUserMedia(t,(function(e){i&&i(null,e)}),(function(e){i&&i(e)}))};t.a={isElectron:function(){return!!r()},getElectronInstance:r,getScreenSources:o,getScreenStream:a,shareScreen:function(e,t){o((function(i,n){if(i)return t&&t(i);!function(e,t){var i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var n=document.createElement("div");n.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var s=document.createElement("div");s.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",s.setAttribute("style","height: 12%;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var o=document.createElement("div");o.setAttribute("style","text-align: right; padding: 16px 0;");var a=document.createElement("button");a.innerHTML="cancel",a.setAttribute("style","width: 85px;"),a.onclick=function(){document.body.removeChild(l),t&&t("NotAllowedError")},o.appendChild(a),n.appendChild(s),n.appendChild(r),n.appendChild(o);var l=document.createElement("div");l.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),l.appendChild(i),l.appendChild(n),document.body.appendChild(l),e.map((function(e){if(e.id){var i=document.createElement("div");i.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;"),i.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+e.thumbnail.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name+"</span>",i.onclick=function(){document.body.removeChild(l),t&&t(null,e.id)},r.appendChild(i)}}))}(n,(function(i,n){if(i)return t&&t(i);a(n,e,t)}))}))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(t.LiveStreamingServiceMode||(t.LiveStreamingServiceMode={})),t.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},t.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},t.isLiveStreamingTranscodingConfig=function(e){return n.isEmpty(e.width)||n.checkValidNumber(e.width,"config.width",0),n.isEmpty(e.height)||n.checkValidNumber(e.height,"config.height",0),n.isEmpty(e.videoBitrate)||n.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e6),n.isEmpty(e.videoFramerate)||n.checkValidNumber(e.videoFramerate,"config.videoFramerate"),n.isEmpty(e.lowLatency)||n.checkValidBoolean(e.lowLatency,"config.lowLatency"),n.isEmpty(e.audioSampleRate)||n.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),n.isEmpty(e.audioBitrate)||n.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,128),n.isEmpty(e.audioChannels)||n.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),n.isEmpty(e.videoGop)||n.checkValidNumber(e.videoGop,"config.videoGop"),n.isEmpty(e.videoCodecProfile)||n.checkValidEnum(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),n.isEmpty(e.userCount)||n.checkValidNumber(e.userCount,"config.userCount",0,17),n.isEmpty(e.backgroundColor)||n.checkValidNumber(e.backgroundColor,"config.backgroundColor",0,16777215),e.transcodingUsers&&!n.isEmpty(e.transcodingUsers)&&(n.checkValidArray(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){n.checkValidUID(e.uid),n.isEmpty(e.x)||n.checkValidNumber(e.x,"transcodingUser["+t+"].x",0,1e4),n.isEmpty(e.y)||n.checkValidNumber(e.y,"transcodingUser["+t+"].y",0,1e4),n.isEmpty(e.width)||n.checkValidNumber(e.width,"transcodingUser["+t+"].width",0,1e4),n.isEmpty(e.height)||n.checkValidNumber(e.height,"transcodingUser["+t+"].height",0,1e4),n.isEmpty(e.zOrder)||n.checkValidNumber(e.zOrder-1,"transcodingUser["+t+"].zOrder",0,100),n.isEmpty(e.alpha)||n.checkValidFloatNumber(e.alpha,"transcodingUser["+t+"].alpha",0,1)}))),e.images&&!n.isEmpty(e.images)&&(n.checkValidArray(e.images,"config.images"),e.images.forEach((function(e,t){n.checkValidString(e.url,"images["+t+"].url",1,1e3,!1),n.isEmpty(e.x)||n.checkValidNumber(e.x,"images["+t+"].x",0,1e4),n.isEmpty(e.y)||n.checkValidNumber(e.y,"images["+t+"].y",0,1e4),n.isEmpty(e.width)||n.checkValidNumber(e.width,"images["+t+"].width",0,1e4),n.isEmpty(e.height)||n.checkValidNumber(e.height,"images["+t+"].height",0,1e4),n.isEmpty(e.zOrder)||n.checkValidNumber(e.zOrder,"images["+t+"].zOrder",0,255),n.isEmpty(e.alpha)||n.checkValidFloatNumber(e.alpha,"images["+t+"].alpha",0,1)}))),!0},t.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},t.isInjectStreamConfig=function(e){return n.isEmpty(e.audioVolume)||n.checkValidNumber(e.audioVolume,"config.audioVolume",0,1e3),n.isEmpty(e.audioBitrate)||n.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,1e4),n.isEmpty(e.audioChannels)||n.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2]),n.isEmpty(e.audioSampleRate)||n.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),n.isEmpty(e.width)||n.checkValidNumber(e.width,"config.width",0,1e4),n.isEmpty(e.height)||n.checkValidNumber(e.height,"config.height",0,1e4),n.isEmpty(e.videoBitrate)||n.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e4),n.isEmpty(e.videoFramerate)||n.checkValidNumber(e.videoFramerate,"config.videoFramerate",1,1e4),n.isEmpty(e.videoGop)||n.checkValidNumber(e.videoGop,"config.videoGop",1,1e4),!0},t.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(t.LiveStreamingUapSignalEvents||(t.LiveStreamingUapSignalEvents={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(t.LiveStreamingInternalEvents||(t.LiveStreamingInternalEvents={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(t.LIVE_STREAM_ERROR_CODE||(t.LIVE_STREAM_ERROR_CODE={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(t.WebSocketManagerEvents||(t.WebSocketManagerEvents={}))},function(e,t,i){var n=i(54),s=i(55);e.exports=function(e,t,i){var r=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[r+a]=o[a];return t||s(o)}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,r,o=n(i(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(s||(s={})),t.AREAS=s,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(r||(r={}));var a={ASIA:{CODE:r.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]},NORTH_AMERICA:{CODE:r.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]},EUROPE:{CODE:r.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]},JAPAN:{CODE:r.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]},INDIA:{CODE:r.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]},OVERSEA:{CODE:r.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]},GLOBAL:{CODE:r.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"]},OCEANIA:{CODE:r.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]},SOUTH_AMERICA:{CODE:r.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]},AFRICA:{CODE:r.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}};t.AREA_DOMAIN_MAP=a,a.CHINA={CODE:r.CHINA,WEBCS_DOMAIN:["webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["proxy-ap-web.agoraio.cn"],CDS_AP:["cds-ap-web-2.agoraio.cn","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-2.agoraio.cn","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-2.agoraio.cn","uap-ap-web-4.agoraio.cn"],EVENT_REPORT_DOMAIN:["statscollector-3.agoraio.cn"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-4.agoraio.cn"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(a),i=0;i<t.length;i++){var n=a[t[i]];if(n.WEBCS_DOMAIN.includes(e)||n.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return n.CODE===r.OVERSEA?r.ASIA+","+r.EUROPE+","+r.AFRICA+","+r.NORTH_AMERICA+","+r.SOUTH_AMERICA+","+r.OCEANIA:n.CODE}},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[]};return e.map((function(e){var i=a[e],n=Object.keys(i);n?n.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(i[e]))})):o.default.info(e+" is not exist")})),t}},function(e,t,i){var n=i(68),s=i(69),r=i(31),o=i(70);e.exports=function(e){return n(e)||s(e)||r(e)||o()}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,r,o=n(i(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(s||(s={})),t.AREAS=s,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(r||(r={}));var a={ASIA:{CODE:r.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]},NORTH_AMERICA:{CODE:r.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]},EUROPE:{CODE:r.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]},JAPAN:{CODE:r.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]},INDIA:{CODE:r.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]},OVERSEA:{CODE:r.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]},GLOBAL:{CODE:r.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"]},OCEANIA:{CODE:r.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]},SOUTH_AMERICA:{CODE:r.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]},AFRICA:{CODE:r.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}};t.AREA_DOMAIN_MAP=a,a.CHINA={CODE:r.CHINA,WEBCS_DOMAIN:["webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["proxy-ap-web.agoraio.cn"],CDS_AP:["cds-ap-web-2.agoraio.cn","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-2.agoraio.cn","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-2.agoraio.cn","uap-ap-web-4.agoraio.cn"],EVENT_REPORT_DOMAIN:["statscollector-3.agoraio.cn"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-4.agoraio.cn"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(a),i=0;i<t.length;i++){var n=a[t[i]];if(n.WEBCS_DOMAIN.includes(e)||n.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return n.CODE===r.OVERSEA?r.ASIA+","+r.EUROPE+","+r.AFRICA+","+r.NORTH_AMERICA+","+r.SOUTH_AMERICA+","+r.OCEANIA:n.CODE}},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[]};return e.map((function(e){var i=a[e],n=Object.keys(i);n?n.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(i[e]))})):o.default.info(e+" is not exist")})),t}},function(e,t,i){var n=i(32);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}},function(e,t,i){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)n[s]=r[o];return n};Object.defineProperty(t,"__esModule",{value:!0});var s=i(23),r=function(){function e(){this._events={},this.addListener=this.on}return e.prototype.getListeners=function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]},e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]);var i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!1})},e.prototype.once=function(e,t){this._events[e]||(this._events[e]=[]);var i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!0})},e.prototype.off=function(e,t){if(this._events[e]){var i=this._events[e],n=this._indexOfListener(i,t);-1!==n&&i.splice(n,1),0===this._events[e].length&&delete this._events[e]}},e.prototype.removeAllListeners=function(e){e?delete this._events[e]:this._events={}},e.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this._events[e]||(this._events[e]=[]);for(var n=this._events[e].map((function(e){return e})),s=0;s<n.length;s+=1){var r=n[s];r.once&&this.off(e,r.listener),r.listener.apply(this,t||[])}},e.prototype._indexOfListener=function(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1},e}();function o(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=null,a=null;if(e.emit.apply(e,n([t],i,[function(e){o=e},function(e){a=e}])),null!==a)throw a;if(null===o)throw new s.AgoraRTCError(s.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return o}t.EventEmitter=r,t.emitAsPromise=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return 0===e.getListeners(t).length?Promise.reject(new s.AgoraRTCError(s.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise((function(s,r){e.emit.apply(e,n([t],i,[s,r]))}))},t.emitAsInvokerNoResponse=function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return 0===e.getListeners(t).length?null:o.apply(void 0,n([e,t],i))},t.emitAsInvoker=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(3),l=o(i(35)),c=i(23),h=o(i(0)),d=i(1);function u(e){return new Promise((function(t){window.setTimeout(t,e)}))}function p(e,t){return new Promise((function(i,n){t.timeout=t.timeout||a.getParameter("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&(t.data=JSON.stringify(t.data)),t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t.method="POST",t.url=e,l.default.request(t).then((function(e){i(e.data)})).catch((function(e){l.default.isCancel(e)?n(new c.AgoraRTCError(c.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):n("ECONNABORTED"===e.code?new c.AgoraRTCError(c.AgoraRTCErrorCode.NETWORK_TIMEOUT,e.message):e.response?new c.AgoraRTCError(c.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,e.response.status):new c.AgoraRTCError(c.AgoraRTCErrorCode.NETWORK_ERROR,e.message))}))}))}function f(e,i,n,o){var a=this,l=Object.assign({},t.DEFAULT_RETRY_CONFIG,o),h=l.timeout,d=function(){return s(a,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,u(h)];case 1:return e.sent(),h*=l.timeoutFactor,h=Math.min(l.maxRetryTimeout,h),[2]}}))}))},p=!1,f=new Promise((function(t,o){return s(a,void 0,void 0,(function(){var s,a,h;return r(this,(function(r){switch(r.label){case 0:i=i||function(){return!1},n=n||function(){return!0},s=0,r.label=1;case 1:if(!(s<l.maxRetryCount))return[3,12];if(p)return[2,o(new c.AgoraRTCError(c.AgoraRTCErrorCode.OPERATION_ABORT))];r.label=2;case 2:return r.trys.push([2,7,,11]),[4,e()];case 3:return a=r.sent(),i(a,s)?s+1===l.maxRetryCount?[2,t(a)]:[4,d()]:[3,5];case 4:return r.sent(),[3,6];case 5:return[2,t(a)];case 6:return[3,11];case 7:return h=r.sent(),n(h,s)?s+1===l.maxRetryCount?[2,o(h)]:[4,d()]:[3,9];case 8:return r.sent(),[3,10];case 9:return[2,o(h)];case 10:return[3,11];case 11:return s+=1,[3,1];case 12:return[2]}}))}))}));return f.cancel=function(){return p=!0},f}function m(e,t){return{addressList:e.servers.map((function(e,i){return"wss://"+e.address.replace(/\./g,"-")+".edge."+(i%2==0?"agora.io":"agoraio.cn")+":"+e.wss+"?serviceName="+encodeURIComponent(t)})),workerToken:e.workerToken,vid:e.vid}}t.wait=u,t.post=p,t.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},t.getRetryWaitTime=function(e,t){var i=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,i)},t.retryable=f,t.liveStreamingServerResponseToResult=m;var g=1;function v(e,i,o,l,u){var v=this;void 0===u&&(u=t.DEFAULT_RETRY_CONFIG),g+=1;var y,b,w={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:g,requestId:g,version:a.VERSION,cname:o.cname},S={service_name:i,json_body:JSON.stringify(w)},C=e[0];return f((function(){return s(v,void 0,void 0,(function(){var e,t,s,o,d;return r(this,(function(r){switch(r.label){case 0:return y=Date.now(),[4,p(C,{data:S,cancelToken:l,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(e=r.sent(),b=Date.now()-y,0!==e.code)throw s=new c.AgoraRTCError(c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0}),h.default.error(s.toString()),s;if(200!==(t=JSON.parse(e.json_body)).code)throw s=new c.AgoraRTCError(c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+t.code+", reason: "+t.reason),h.default.error(s.toString()),s;if(!t.servers||0===t.servers.length)throw s=new c.AgoraRTCError(c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),h.default.error(s.toString()),s;if(o=m(t,i),a.getParameter("LIVE_STREAMING_ADDRESS"))try{d=JSON.parse(a.getParameter("LIVE_STREAMING_ADDRESS")),o.addressList=d}catch(e){o.addressList=[a.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,n(n({},o),{responseTime:b})]}}))}))}),(function(t,n){return d.report.requestApWorkerEvent(o.sid,{success:!0,sc:200,serviceName:i,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:b,serverIp:e[n%e.length]}),!1}),(function(t,n){return d.report.requestApWorkerEvent(o.sid,{success:!1,sc:t.data&&t.data.code||200,serviceName:i,responseTime:b,serverIp:e[n%e.length]}),!!(t.code!==c.AgoraRTCErrorCode.OPERATION_ABORT&&t.code!==c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(C=e[(n+1)%e.length],!0)}),u)}t.requestLiveStreamingWorkerManager=v,t.getLiveStreamingWorkerMangerResult=function(e,t,i){return s(this,void 0,void 0,(function(){var n,s;return r(this,(function(r){switch(r.label){case 0:n=a.getParameter("UAP_AP").map((function(e){return t.proxyServer?"https://"+t.proxyServer+"/ap/?url="+e+"/api/v1?action=uap":"https://"+e+"/api/v1?action=uap"})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,v(n,e,t,i)];case 2:return[2,r.sent()];case 3:throw s=r.sent(),d.report.requestApWorkerEvent(t.sid,{success:!1,sc:s.data&&s.data.code||200,serviceName:e,responseTime:s.data&&s.data.responseTime}),s;case 4:return[2]}}))}))}},function(e,t,i){e.exports=i(74)},function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},function(e,t,i){"use strict";var n=i(18);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(n.isURLSearchParams(t))r=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(s(t)+"="+s(e))})))})),r=o.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}},function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,i){"use strict";(function(t){var n=i(18),s=i(80),r={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=i(40)),a),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){l.headers[e]=n.merge(r)})),e.exports=l}).call(this,i(79))},function(e,t,i){"use strict";var n=i(18),s=i(81),r=i(37),o=i(83),a=i(86),l=i(87),c=i(41);e.exports=function(e){return new Promise((function(t,h){var d=e.data,u=e.headers;n.isFormData(d)&&delete u["Content-Type"];var p=new XMLHttpRequest;e.auth&&(u.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||"")));var f=o(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),r(f,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;s(t,h,{data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}},p.onabort=function(){p&&(h(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){h(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),h(c(t,e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var m=i(88),g=(e.withCredentials||l(f))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;g&&(u[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&n.forEach(u,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete u[t]:p.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),h(e),p=null)})),void 0===d&&(d=null),p.send(d)}))}},function(e,t,i){"use strict";var n=i(82);e.exports=function(e,t,i,s,r){var o=new Error(e);return n(o,t,i,s,r)}},function(e,t,i){"use strict";var n=i(18);e.exports=function(e,t){t=t||{};var i={},s=["url","method","params","data"],r=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(s,(function(e){void 0!==t[e]&&(i[e]=t[e])})),n.forEach(r,(function(s){n.isObject(t[s])?i[s]=n.deepMerge(e[s],t[s]):void 0!==t[s]?i[s]=t[s]:n.isObject(e[s])?i[s]=n.deepMerge(e[s]):void 0!==e[s]&&(i[s]=e[s])})),n.forEach(o,(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])}));var a=s.concat(r).concat(o),l=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return n.forEach(l,(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])})),i}},function(e,t,i){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(i(56)),l=o(i(60)),c=o(i(61)),h=r(i(0)),d=i(3),u=a.default.Root.fromJSON(c),p=function(){function e(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return e.prototype.setProxy=function(e){this.proxyServer=e},e.prototype.sendReportList=function(e){var t=this,i=this._dataConvert("ProtoRaws",{sendTs:Math.round(Date.now()/1e3),payloads:e.map((function(e){return{id:l[e.type],msg:t._dataConvert(e.type,e.data)}}))});this.send(i)},e.prototype._dataConvert=function(e,t){var i;try{i=u.lookupType("protobuf."+e)}catch(t){h.default.error("[send-proto] invalid proto name "+e)}var n=i.create(t);return i.encode(n).finish()},e.prototype.send=function(e){0==this.state?this._send(e):this.requestArray.push(e)},e.prototype._send=function(e){return n(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),this.state=1,[4,this.request(e)];case 1:return t.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return t.sent(),[4,f(this.retryBackoffCount++<2?200:1e4)];case 3:return t.sent(),this._send(e),[3,4];case 4:return[2]}}))}))},e.prototype.request=function(e){return n(this,void 0,void 0,(function(){var t,i;return s(this,(function(n){switch(n.label){case 0:t=this._getAddress(),i=this._getBackupAddress(),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,this._request(t,e)];case 2:return n.sent(),[3,5];case 3:return n.sent(),[4,this._request(i,e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},e.prototype._request=function(e,t){return this._post(e,t)},e.prototype._post=function(e,t){return new Promise((function(i,n){var s=new XMLHttpRequest;s.timeout=d.getParameter("HTTP_CONNECT_TIMEOUT"),s.open("POST",e,!0),s.setRequestHeader("Content-type","application/octet-stream"),s.onload=function(e){i(s.responseText)},s.onerror=function(e){n(e)},s.ontimeout=function(e){n(e)},s.send(t)}))},e.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+d.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+d.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},e.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+d.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+d.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},e}();t.default=p;var f=function(e){return new Promise((function(t){window.setTimeout(t,e)}))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(i(0)),l=i(15);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(o||(o={}));var c=function(){function e(e){this.candidate=null,this.state=o.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:"h264"===this.config.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setRtpSenderParameters=function(e){return n(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var i=[];this.config.isSubscriber?(i.push(this.receiveVideoStats),i.push(this.receiveAudioStats)):(i.push(this.sendAudioStats),i.push(this.sendVideoStats)),i.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(i)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,i=[];this.peerConnection.getStats(null).then((function(n){t.lastTimeGetStats=Date.now(),Object.keys(n).map((function(e){var i=n[e];t.config.isSubscriber?i.type&&"inboundrtp"===i.type&&i.mediaType&&"audio"===i.mediaType?(t.receiveAudioStats.id=i.id+"recv",t.receiveAudioStats.type=i.type+"",t.receiveAudioStats.mediaType=i.mediaType+"",t.receiveAudioStats.packetsReceived=i.packetsReceived+"",t.receiveAudioStats.bytesReceived=i.bytesReceived+"",t.receiveAudioStats.packetsLost=i.packetsLost+"",t.receiveAudioStats.googJitterReceived=i.jitter+""):i.type&&"inboundrtp"===i.type&&i.mediaType&&"video"===i.mediaType?(t.receiveVideoStats.id=i.id+"recv",t.receiveVideoStats.type=i.type+"",t.receiveVideoStats.mediaType=i.mediaType+"",t.receiveVideoStats.packetsReceived=i.packetsReceived+"",t.receiveVideoStats.bytesReceived=i.bytesReceived+"",t.receiveVideoStats.packetsLost=i.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=i.jitter+"",t.receiveVideoStats.googPlisSent=i.pliCount+"",t.receiveVideoStats.googFirsSent=i.firCount+"",t.receiveVideoStats.googNacksSent=i.nackCount+""):i.remoteSource&&i.type&&"track"===i.type&&i.trackIdentifier&&-1!==i.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=i.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=i.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=i.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=i.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=i.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=i.framesDecoded+"",t.receiveVideoStats.googFrameReceived=i.framesReceived+""):i.remoteSource&&i.type&&"track"===i.type&&i.trackIdentifier&&-1!==i.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=i.audioLevel+""):!i.isRemote&&i.type&&"outboundrtp"===i.type&&i.mediaType&&"audio"===i.mediaType?(t.sendAudioStats.id=i.id+"send",t.sendAudioStats.type=i.type+"",t.sendAudioStats.mediaType=i.mediaType+"",t.sendAudioStats.packetsSent=i.packetsSent+"",t.sendAudioStats.bytesSent=i.bytesSent+""):!i.isRemote&&i.type&&"outboundrtp"===i.type&&i.mediaType&&"video"===i.mediaType?(t.sendVideoStats.id=i.id+"send",t.sendVideoStats.type=i.type+"",t.sendVideoStats.mediaType=i.mediaType+"",t.sendVideoStats.packetsSent=i.packetsSent+"",t.sendVideoStats.bytesSent=i.bytesSent+"",t.sendVideoStats.googRtt=i.roundTripTime+"",t.sendVideoStats.googPlisReceived=i.pliCount+"",t.sendVideoStats.googFirsReceived=i.firCount+"",t.sendVideoStats.googNacksReceived=i.nackCount+""):!i.remoteSource&&i.type&&"track"===i.type&&i.framesSent&&0!==i.framesSent&&(t.sendVideoStats.googFrameHeightSent=i.frameHeight+"",t.sendVideoStats.googFrameHeightInput=i.frameHeight+"",t.sendVideoStats.googFrameWidthSent=i.frameWidth+"",t.sendVideoStats.googFrameWidthInput=i.frameWidth+"",t.sendVideoStats.googFramesEncoded=i.framesSent+"",t.sendVideoStats.googFrameRateSent=i.framesPerSecond+"")})),t.config.isSubscriber?(i.push(t.receiveVideoStats),i.push(t.receiveAudioStats)):(i.push(t.sendAudioStats),i.push(t.sendVideoStats)),i.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(i)}))},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,i=e.turnServer,n=e.iceServers;return this.pcConfig={iceServers:[{urls:"stun:webcs.agora.io:3478"}]},n instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map((function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})})):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),i&&(i instanceof Array?i.map((function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==i.mode&&"manual"!==i.mode||(i.udpport&&this.pcConfig.iceServers.push({username:i.username,credential:i.credential,credentialType:"password",urls:"turn:"+i.url+":"+i.udpport+"?transport=udp"}),"string"==typeof i.tcpport&&""!==i.tcpport&&this.pcConfig.iceServers.push({username:i.username,credential:i.credential,credentialType:"password",urls:"turn:"+i.url+":"+i.tcpport+"?transport=tcp"}),!0===i.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new l.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=o.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=o.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,i,n=this.config,s=n.codec,r=n.minVideoBW,o=n.maxVideoBW,l=n.maxAudioBW,c=n.clientId;if((t=e.match(/m=video.*\r\n/))&&r&&o){i=t[0]+"b=AS:"+o+"\r\n";var h=0,d=0;"h264"===s?(h=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),d=e.search(/H264\/90000\r\n/)):"vp8"===s&&(h=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),d=e.search(/VP8\/90000\r\n/)),-1!==h&&-1!==d&&d-h>10&&(i=i+"a=fmtp:"+e.slice(h+9,d-1)+" x-google-min-bitrate="+r+"\r\n"),e=e.replace(t[0],i),a.default.debug("["+c+"]Set Video Bitrate - min:"+r+" max:"+o)}return(t=e.match(/m=audio.*\r\n/))&&l&&(e=e.replace(t[0],i=t[0]+"b=AS:"+l+"\r\n")),e},e.prototype.reviseOpus=function(e){return(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=o.OFFER_SENT},e}();t.default=c},function(e,t,i){var n=i(63),s=i(64),r=i(31),o=i(65);e.exports=function(e,t){return n(e)||s(e,t)||r(e,t)||o()}},function(e,t,i){var n,s,r;s=this,r=function(){"use strict";var e,t=this;function i(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function n(e,t,n,s){var r=s||i,o=e.createShader(n);return e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(r("*** Error compiling shader '"+o+"':"+e.getShaderInfoLog(o)),e.deleteShader(o),null)}function s(e,t,n,s,r){var o=r||i,a=e.createProgram();return t.forEach((function(t){e.attachShader(a,t)})),n&&n.forEach((function(t,i){e.bindAttribLocation(a,s?s[i]:i,t)})),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(o("Error in program linking:"+e.getProgramInfoLog(a)),e.deleteProgram(a),null)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var r,o=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(r=HTMLCanvasElement.prototype.getContext,function(){var e=arguments,t=e[0];return"webgl"===t&&((e=[].slice.call(arguments))[0]="experimental-webgl"),r.apply(this,e)})),{createProgram:s,createProgramFromSources:function(e,t,i,r,a){for(var l=[],c=0;c<t.length;++c)l.push(n(e,t[c],e[o[c]],a));return s(e,l,i,r,a)}}},void 0===(n=(function(){return r.call(s)}).apply(t,[]))||(e.exports=n)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(66),a=i(4),l=r(i(0));t.getSupportedCodec=function(e){return n(void 0,void 0,void 0,(function(){var t,i,n,r;return s(this,(function(s){switch(s.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(l.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{i=o.createRTCPeerConnection({iceServers:[]})}catch(e){return l.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return i?[3,2]:(l.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(n={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},r=void 0,(a.isSafari()||a.isFireFox()||a.isWeChatBrowser())&&i.addTransceiver?(i.addTransceiver("audio"),i.addTransceiver("video"),[4,i.createOffer()]):[3,4]);case 3:return r=s.sent(),[3,6];case 4:return[4,new Promise((function(e,t){var s=setTimeout((function(){t("CREATEOFFER_TIMEOUT")}),3e3);i.createOffer((function(t){clearTimeout(s),e(t)}),(function(e){clearTimeout(s),t(e)}),n)}))];case 5:r=s.sent(),s.label=6;case 6:return i.close(),[2,c(r.sdp)];case 7:return e.stream.getTracks&&i.addTrack?e.stream.getTracks().forEach((function(t){i.addTrack(t,e.stream)})):i.addStream(e.stream),r=void 0,a.isSafari()||a.isFireFox()?[4,i.createOffer()]:[3,9];case 8:return r=s.sent(),[3,11];case 9:return[4,new Promise((function(e,t){i.createOffer(e,t)}))];case 10:r=s.sent(),s.label=11;case 11:return i.close(),[2,c(r.sdp)]}}))}))};var c=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(i(0)),a=i(71),l=i(23),c=i(1),h=i(26);t.addLiveStreamingCapability=function(e,t){var i=this,r=function(t){var i=t.type;if(!e.joinInfo)return new l.AgoraRTCError(l.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(i){case h.LiveStreamingServiceMode.INJECT:return e._injectStreamingClient||(e._injectStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._injectStreamingClient.onInjectStatusChange=function(t,i,n){e.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:n,status:t})}),e._injectStreamingClient;case h.LiveStreamingServiceMode.RAW:return e._liveRawStreamingClient||(e._liveRawStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveRawStreamingClient.onLiveStreamError=function(t,i){o.default.error("LIVE_STREAMING_ERROR",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:i.code})},e._liveRawStreamingClient.onLiveStreamWarning=function(t,i){o.default.warning("LIVE_STREAMING_WARNING",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:i.code})}),e._liveRawStreamingClient;case h.LiveStreamingServiceMode.TRANSCODE:return e._liveTranscodeStreamingClient||(e._liveTranscodeStreamingClient=new a.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveTranscodeStreamingClient.onLiveStreamError=function(t,i){o.default.error("LIVE_STREAMING_ERROR",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:i.code})},e._liveTranscodeStreamingClient.onLiveStreamWarning=function(t,i){o.default.warning("LIVE_STREAMING_WARNING",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:i.code})}),e._liveTranscodeStreamingClient}};e.gatewayClient.addEventListener("join",(function(t){e._injectStreamingClient&&e._injectStreamingClient.resetAllTask()})),e.gatewayClient.addEventListener("stream-unpublished",(function(t){t.options&&0===t.options.streamType&&(e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask(),e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask())})),e.gatewayClient.addEventListener("stream-published",(function(e){})),e.startLiveStreaming=function(i,n){o.default.debug("startLiveTranscoding");var s=c.report.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var r={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw s(r),r}var a=e._startLiveStreaming(i,n);return a.then((function(e){s(null,e)})).catch((function(t){o.default.error("LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:i,reason:t.code}),s(t)})),a},e._startLiveStreaming=function(a,c){return n(i,void 0,void 0,(function(){var i;return s(this,(function(n){switch(n.label){case 0:return c||("vp8"===t.codec&&o.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&o.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(e._liveRawStreamingClient&&e._liveRawStreamingClient.haveUrl(a)||e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.haveUrl(a))&&new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,r({type:i=c?h.LiveStreamingServiceMode.TRANSCODE:h.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(a,i)];case 1:return n.sent(),e.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:a}),[2]}}))}))},e.setLiveTranscoding=function(i){o.default.debug("setLiveTranscoding: "+JSON.stringify(i));var n=c.report.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),s=r({type:h.LiveStreamingServiceMode.TRANSCODE});return s.setTranscodingConfig(i).then((function(){e.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),n(null)})).catch((function(t){o.default.error("SET_LIVE_TRANSCODING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),n(t)}))},e.stopLiveStreaming=function(i){var n=c.report.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),s=e._stopLiveStreaming(i);return s.then((function(e){n(null,e)})).catch((function(t){o.default.error("STOP_LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),n(t)})),s},e._stopLiveStreaming=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,Promise.all([e._liveRawStreamingClient,e._liveTranscodeStreamingClient].map((function(e){return e&&e.haveUrl(t)&&e.stopLiveStreamingTask(t)})))];case 1:return i.sent(),[2]}}))}))},e.addInjectStreamUrl=function(i,n){var s=c.report.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:[i,n],tag:"tracer"});if("audience"===e.gatewayClient.role){var r={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw s(r),r}var a=e._addInjectStreamUrl(i,n);return a.then((function(e){s(null,e)})).catch((function(e){o.default.error("ADD_INJECT_STREAM_ERROR",e.toString()),s(e)})),a},e._addInjectStreamUrl=function(e,t){return n(i,void 0,void 0,(function(){var i;return s(this,(function(n){switch(n.label){case 0:return(i=r({type:h.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(t,0),[4,i.startLiveStreamingTask(e,h.LiveStreamingServiceMode.INJECT)];case 1:return n.sent(),[2]}}))}))},e.removeInjectStreamUrl=function(i){return n(this,void 0,void 0,(function(){var n,r;return s(this,(function(s){return n=c.report.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:[i],tag:"tracer"}),(r=e._removeInjectStreamUrl(i)).then((function(e){n(null,e)})).catch((function(e){o.default.error("REMOVE_INJECT_STREAM_ERROR",e.toString()),n(e)})),[2,r]}))}))},e._removeInjectStreamUrl=function(e){return n(i,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,r({type:h.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(e)];case 1:return t.sent(),[2]}}))}))}}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(i(5)),r=n(i(0)),o=i(10);t.default=function(e,t){void 0===t&&(t={width:160,height:120,framerate:15});var i=t.width,n=t.height,a=t.framerate,l=e.stream;if(!l)throw s.default.INVALID_LOCAL_STREAM;if(!l.getVideoTracks()[0])throw s.default.HIGH_STREAM_NOT_VIDEO_TRACE;var c=l.getVideoTracks()[0];r.default.debug("Start getLowStream");var h=document.createElement("video"),d=document.createElement("canvas");h.setAttribute("style","display:none"),h.setAttribute("muted",""),h.muted=!0,h.setAttribute("autoplay",""),h.autoplay=!0,h.setAttribute("playsinline",""),d.setAttribute("style","display:none"),d.setAttribute("width",i.toString()),d.setAttribute("height",n.toString());var u=d.getContext("2d");if(!u)throw new Error("not get canvas context");h.srcObject=l,document.body.append(h),document.body.append(d),h.play(),r.default.debug("Start render lowStream");var p=o.audioTimerLoop((function(){return function(){if(h.paused&&h.play(),h.videoHeight>2&&h.videoWidth>2){var t=d.width*(h.videoHeight/h.videoWidth);Math.abs(t-d.height)>=2&&(r.default.debug("adjust low stream resolution",d.width+"x"+d.height+" -> "+d.width+"x"+t),d.height=t)}u.drawImage(h,0,0,d.width,d.height);var i=e.stream;if(i){var n=i.getVideoTracks()[0];c!==n&&(r.default.debug("adjust low stream track"),h.srcObject=i,c=n)}}()}),a),f=d.captureStream(a),m=f.getVideoTracks()[0];return m.requestFrame&&m.requestFrame(),f.clean=function(){r.default.debug("Start clean lowStream"),p(),(h||h.parentNode||h.parentNode.removeChild)&&h.parentNode.removeChild(h),(d||d.parentNode||d.parentNode.removeChild)&&d.parentNode.removeChild(d),r.default.debug("Clean lowStream")},f}},function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);e.exports=function(){return i(n),n}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(undefined){"use strict";!function(e,t,i){var n=function i(n){var s=t[n];return s||e[n][0].call(s=t[n]={exports:{}},i,s,s.exports),s.exports}(16);n.util.global.protobuf=n,__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(59)],(__WEBPACK_AMD_DEFINE_RESULT__=(function(e){return e&&e.isLong&&(n.util.Long=e,n.configure()),n}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=n)}({1:[function(e,t,i){t.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,s=2,r=!0;s<arguments.length;)i[n++]=arguments[s++];return new Promise((function(s,o){i[n]=function(e){if(r)if(r=!1,e)o(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];s.apply(null,t)}};try{e.apply(t||null,i)}catch(e){r&&(r=!1,o(e))}}))}},{}],2:[function(e,t,i){var n=i;n.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var s=new Array(64),r=new Array(123),o=0;o<64;)r[s[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,i){for(var n,r=null,o=[],a=0,l=0;t<i;){var c=e[t++];switch(l){case 0:o[a++]=s[c>>2],n=(3&c)<<4,l=1;break;case 1:o[a++]=s[n|c>>4],n=(15&c)<<2,l=2;break;case 2:o[a++]=s[n|c>>6],o[a++]=s[63&c],l=0}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),a=0)}return l&&(o[a++]=s[n],o[a++]=61,1===l&&(o[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,o.slice(0,a))),r.join("")):String.fromCharCode.apply(String,o.slice(0,a))},n.decode=function(e,t,i){for(var n,s=i,o=0,a=0;a<e.length;){var l=e.charCodeAt(a++);if(61===l&&o>1)break;if((l=r[l])===undefined)throw Error("invalid encoding");switch(o){case 0:n=l,o=1;break;case 1:t[i++]=n<<2|(48&l)>>4,n=l,o=2;break;case 2:t[i++]=(15&n)<<4|(60&l)>>2,n=l,o=3;break;case 3:t[i++]=(3&n)<<6|l,o=0}}if(1===o)throw Error("invalid encoding");return i-s},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,i){function n(e,t){"string"==typeof e&&(t=e,e=undefined);var i=[];function s(e){if("string"!=typeof e){var t=r();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var o=Object.keys(e),a=new Array(o.length+1),l=new Array(o.length),c=0;c<o.length;)a[c]=o[c],l[c]=e[o[c++]];return a[c]=t,Function.apply(null,a).apply(null,l)}return Function(t)()}for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var i=h[d++];switch(t){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"})),d!==h.length)throw Error("parameter count mismatch");return i.push(e),s}function r(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+i.join("\n  ")+"\n}"}return s.toString=r,s}t.exports=n,n.verbose=!1},{}],4:[function(e,t,i){function n(){this._listeners={}}t.exports=n,n.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},n.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this}},{}],5:[function(e,t,i){t.exports=r;var n=e(1),s=e(7)("fs");function r(e,t,i){return"function"==typeof t?(i=t,t={}):t||(t={}),i?!t.xhr&&s&&s.readFile?s.readFile(e,(function(n,s){return n&&"undefined"!=typeof XMLHttpRequest?r.xhr(e,t,i):n?i(n):i(null,t.binary?s:s.toString("utf8"))})):r.xhr(e,t,i):n(r,this,e,t)}r.xhr=function(e,t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==n.readyState)return undefined;if(0!==n.status&&200!==n.status)return i(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var s=0;s<n.responseText.length;++s)e.push(255&n.responseText.charCodeAt(s))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return i(null,n.responseText)},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},{1:1,7:7}],6:[function(e,t,i){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),n=128===i[3];function s(e,n,s){t[0]=e,n[s]=i[0],n[s+1]=i[1],n[s+2]=i[2],n[s+3]=i[3]}function r(e,n,s){t[0]=e,n[s]=i[3],n[s+1]=i[2],n[s+2]=i[1],n[s+3]=i[0]}function o(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t[0]}function a(e,n){return i[3]=e[n],i[2]=e[n+1],i[1]=e[n+2],i[0]=e[n+3],t[0]}e.writeFloatLE=n?s:r,e.writeFloatBE=n?r:s,e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(e,t,i,n){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,i,n);else if(isNaN(t))e(2143289344,i,n);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,i,n);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,i,n);else{var r=Math.floor(Math.log(t)/Math.LN2);e((s<<31|r+127<<23|8388607&Math.round(t*Math.pow(2,-r)*8388608))>>>0,i,n)}}function i(e,t,i){var n=e(t,i),s=2*(n>>31)+1,r=n>>>23&255,o=8388607&n;return 255===r?o?NaN:s*(1/0):0===r?1401298464324817e-60*s*o:s*Math.pow(2,r-150)*(o+8388608)}e.writeFloatLE=t.bind(null,s),e.writeFloatBE=t.bind(null,r),e.readFloatLE=i.bind(null,o),e.readFloatBE=i.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),n=128===i[7];function s(e,n,s){t[0]=e,n[s]=i[0],n[s+1]=i[1],n[s+2]=i[2],n[s+3]=i[3],n[s+4]=i[4],n[s+5]=i[5],n[s+6]=i[6],n[s+7]=i[7]}function r(e,n,s){t[0]=e,n[s]=i[7],n[s+1]=i[6],n[s+2]=i[5],n[s+3]=i[4],n[s+4]=i[3],n[s+5]=i[2],n[s+6]=i[1],n[s+7]=i[0]}function o(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],i[4]=e[n+4],i[5]=e[n+5],i[6]=e[n+6],i[7]=e[n+7],t[0]}function a(e,n){return i[7]=e[n],i[6]=e[n+1],i[5]=e[n+2],i[4]=e[n+3],i[3]=e[n+4],i[2]=e[n+5],i[1]=e[n+6],i[0]=e[n+7],t[0]}e.writeDoubleLE=n?s:r,e.writeDoubleBE=n?r:s,e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(e,t,i,n,s,r){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,s,r+t),e(1/n>0?0:2147483648,s,r+i);else if(isNaN(n))e(0,s,r+t),e(2146959360,s,r+i);else if(n>17976931348623157e292)e(0,s,r+t),e((o<<31|2146435072)>>>0,s,r+i);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,s,r+t),e((o<<31|a/4294967296)>>>0,s,r+i);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,s,r+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,s,r+i)}}}function i(e,t,i,n,s){var r=e(n,s+t),o=e(n,s+i),a=2*(o>>31)+1,l=o>>>20&2047,c=4294967296*(1048575&o)+r;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,s,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=i.bind(null,o,0,4),e.readDoubleBE=i.bind(null,a,4,0)}(),e}function s(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function r(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],8:[function(e,t,i){var n=i,s=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},r=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=s(e),n="";i&&(n=t.shift()+"/");for(var r=0;r<t.length;)".."===t[r]?r>0&&".."!==t[r-1]?t.splice(--r,2):i?t.splice(r,1):++r:"."===t[r]?t.splice(r,1):++r;return n+t.join("/")};n.resolve=function(e,t,i){return i||(t=r(t)),s(t)?t:(i||(e=r(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?r(e+"/"+t):t)}},{}],9:[function(e,t,i){t.exports=function(e,t,i){var n=i||8192,s=n>>>1,r=null,o=n;return function(i){if(i<1||i>s)return e(i);o+i>n&&(r=e(n),o=0);var a=t.call(r,o,o+=i);return 7&o&&(o=1+(7|o)),a}}},{}],10:[function(e,t,i){var n=i;n.length=function(e){for(var t=0,i=0,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,i){if(i-t<1)return"";for(var n,s=null,r=[],o=0;t<i;)(n=e[t++])<128?r[o++]=n:n>191&&n<224?r[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,r[o++]=55296+(n>>10),r[o++]=56320+(1023&n)):r[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,r)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,r.slice(0,o))),s.join("")):String.fromCharCode.apply(String,r.slice(0,o))},n.write=function(e,t,i){for(var n,s,r=i,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(s=e.charCodeAt(o+1)))?(++o,t[i++]=(n=65536+((1023&n)<<10)+(1023&s))>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128);return i-r}},{}],11:[function(e,t,i){var n=i,s=e(14),r=e(33);function o(e,t,i,n){if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",n);for(var r=t.resolvedType.values,o=Object.keys(r),a=0;a<o.length;++a)t.repeated&&r[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",r[o[a]])("m%s=%j",n,r[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,i,n);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,i,n){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,i,n,n):e("d%s=types[%i].toObject(m%s,o)",n,i,n);else{var r=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,r?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,i=r.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return i("return new this.ctor");i("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),l=r.safeProp(a.name);a.map?(i("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),o(i,a,n,l+"[ks[i]]")("}")("}")):a.repeated?(i("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),o(i,a,n,l+"[i]")("}")("}")):(a.resolvedType instanceof s||i("if(d%s!=null){",l),o(i,a,n,l),a.resolvedType instanceof s||i("}"))}return i("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(r.compareFieldsById);if(!t.length)return r.codegen()("return {}");for(var i=r.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],l=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?n:t[c].map?o:l).push(t[c]);if(n.length){for(i("if(o.arrays||o.defaults){"),c=0;c<n.length;++c)i("d%s=[]",r.safeProp(n[c].name));i("}")}if(o.length){for(i("if(o.objects||o.defaults){"),c=0;c<o.length;++c)i("d%s={}",r.safeProp(o[c].name));i("}")}if(l.length){for(i("if(o.defaults){"),c=0;c<l.length;++c){var h=l[c],d=r.safeProp(h.name);if(h.resolvedType instanceof s)i("d%s=o.enums===String?%j:%j",d,h.resolvedType.valuesById[h.typeDefault],h.typeDefault);else if(h.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,h.typeDefault.toString(),h.typeDefault.toNumber());else if(h.bytes){var u="["+Array.prototype.slice.call(h.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,h.typeDefault))("else{")("d%s=%s",d,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else i("d%s=%j",d,h.typeDefault)}i("}")}var p=!1;for(c=0;c<t.length;++c){var f=e._fieldsArray.indexOf(h=t[c]);d=r.safeProp(h.name),h.map?(p||(p=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(i,h,f,d+"[ks2[j]]")("}")):h.repeated?(i("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(i,h,f,d+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",d,h.name),a(i,h,f,d),h.partOf&&i("if(o.oneofs)")("d%s=%j",r.safeProp(h.partOf.name),h.name)),i("}")}return i("return d")}},{14:14,33:33}],12:[function(e,t,i){t.exports=function(e){var t=r.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var i=0;i<e.fieldsArray.length;++i){var a=e._fieldsArray[i].resolve(),l=a.resolvedType instanceof n?"int32":a.type,c="m"+r.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),s.defaults[a.keyType]!==undefined?t("k=%j",s.defaults[a.keyType]):t("k=null"),s.defaults[l]!==undefined?t("value=%j",s.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),s.basic[l]===undefined?t("value=types[%i].decode(r,r.uint32())",i):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(s.long[a.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",c)):a.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),s.packed[l]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,l)("}else"),s.basic[l]===undefined?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,i):t("%s.push(r.%s())",c,l)):s.basic[l]===undefined?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,i):t("%s=r.%s()",c,l),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<e._fieldsArray.length;++i){var h=e._fieldsArray[i];h.required&&t("if(!m.hasOwnProperty(%j))",h.name)("throw util.ProtocolError(%j,{instance:m})",o(h))}return t("return m")};var n=e(14),s=e(32),r=e(33);function o(e){return"missing required '"+e.name+"'"}},{14:14,32:32,33:33}],13:[function(e,t,i){t.exports=function(e){for(var t,i=r.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(r.compareFieldsById),l=0;l<a.length;++l){var c=a[l].resolve(),h=e._fieldsArray.indexOf(c),d=c.resolvedType instanceof n?"int32":c.type,u=s.basic[d];t="m"+r.safeProp(c.name),c.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|s.mapKey[c.keyType],c.keyType),u===undefined?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",h,t):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,d,t),i("}")("}")):c.repeated?(i("if(%s!=null&&%s.length){",t,t),c.packed&&s.packed[d]!==undefined?i("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",t),u===undefined?o(i,c,h,t+"[i]"):i("w.uint32(%i).%s(%s[i])",(c.id<<3|u)>>>0,d,t)),i("}")):(c.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),u===undefined?o(i,c,h,t):i("w.uint32(%i).%s(%s)",(c.id<<3|u)>>>0,d,t))}return i("return w")};var n=e(14),s=e(32),r=e(33);function o(e,t,i,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,n,(t.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(e,t,i){t.exports=o;var n=e(22);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var s=e(21),r=e(33);function o(e,t,i,s,r){if(n.call(this,e,i),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=r||{},this.reserved=undefined,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var i=new o(e,t.values,t.options,t.comment,t.comments);return i.reserved=t.reserved,i},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return r.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},o.prototype.add=function(e,t,i){if(!r.isString(e))throw TypeError("name must be a string");if(!r.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=i||null,this},o.prototype.remove=function(e){if(!r.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}},{21:21,22:22,33:33}],15:[function(e,t,i){t.exports=c;var n=e(22);((c.prototype=Object.create(n.prototype)).constructor=c).className="Field";var s,r=e(14),o=e(32),a=e(33),l=/^required|optional|repeated$/;function c(e,t,i,s,r,c,h){if(a.isObject(s)?(h=r,c=s,s=r=undefined):a.isObject(r)&&(h=c,c=r,r=undefined),n.call(this,e,c),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(i))throw TypeError("type must be a string");if(s!==undefined&&!l.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(r!==undefined&&!a.isString(r))throw TypeError("extend must be a string");this.rule=s&&"optional"!==s?s:undefined,this.type=i,this.id=t,this.extend=r||undefined,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&o.long[i]!==undefined,this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=h}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,i){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,i)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},c.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=o.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof s?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof r)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.defaultValue=this.map?a.emptyObject:this.repeated?a.emptyArray:this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},c.d=function(e,t,i,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(s,r){a.decorateType(s.constructor).add(new c(r,e,t,i,{default:n}))}},c._configure=function(e){s=e}},{14:14,22:22,32:32,33:33}],16:[function(e,t,i){var n=t.exports=e(17);n.build="light",n.load=function(e,t,i){return"function"==typeof t?(i=t,t=new n.Root):t||(t=new n.Root),t.load(e,i)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=e(13),n.decoder=e(12),n.verifier=e(36),n.converter=e(11),n.ReflectionObject=e(22),n.Namespace=e(21),n.Root=e(26),n.Enum=e(14),n.Type=e(31),n.Field=e(15),n.OneOf=e(23),n.MapField=e(18),n.Service=e(30),n.Method=e(20),n.Message=e(19),n.wrappers=e(37),n.types=e(32),n.util=e(33),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(e,t,i){var n=i;function s(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e(38),n.BufferWriter=e(39),n.Reader=e(24),n.BufferReader=e(25),n.util=e(35),n.rpc=e(28),n.roots=e(27),n.configure=s,s()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(e,t,i){t.exports=o;var n=e(15);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var s=e(32),r=e(33);function o(e,t,i,s,o,a){if(n.call(this,e,t,s,undefined,undefined,o,a),!r.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){if(this.resolved)return this;if(s.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,i){return"function"==typeof i?i=r.decorateType(i).name:i&&"object"==typeof i&&(i=r.decorateEnum(i).name),function(n,s){r.decorateType(n.constructor).add(new o(s,e,t,i))}}},{15:15,32:32,33:33}],19:[function(e,t,i){t.exports=s;var n=e(35);function s(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)this[t[i]]=e[t[i]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},{35:35}],20:[function(e,t,i){t.exports=r;var n=e(22);((r.prototype=Object.create(n.prototype)).constructor=r).className="Method";var s=e(33);function r(e,t,i,r,o,a,l,c){if(s.isObject(o)?(l=o,o=a=undefined):s.isObject(a)&&(l=a,a=undefined),t!==undefined&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(i))throw TypeError("requestType must be a string");if(!s.isString(r))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=i,this.requestStream=!!o||undefined,this.responseType=r,this.responseStream=!!a||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c}r.fromJSON=function(e,t){return new r(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},r.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(e,t,i){t.exports=h;var n=e(22);((h.prototype=Object.create(n.prototype)).constructor=h).className="Namespace";var s,r,o,a=e(15),l=e(33);function c(e,t){if(!e||!e.length)return undefined;for(var i={},n=0;n<e.length;++n)i[e[n].name]=e[n].toJSON(t);return i}function h(e,t){n.call(this,e,t),this.nested=undefined,this._nestedArray=null}function d(e){return e._nestedArray=null,e}h.fromJSON=function(e,t){return new h(e,t.options).addJSON(t.nested)},h.arrayToJSON=c,h.isReservedId=function(e,t){if(e)for(var i=0;i<e.length;++i)if("string"!=typeof e[i]&&e[i][0]<=t&&e[i][1]>t)return!0;return!1},h.isReservedName=function(e,t){if(e)for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1},Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),h.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},h.prototype.addJSON=function(e){if(e)for(var t,i=Object.keys(e),n=0;n<i.length;++n)this.add(((t=e[i[n]]).fields!==undefined?s.fromJSON:t.values!==undefined?o.fromJSON:t.methods!==undefined?r.fromJSON:t.id!==undefined?a.fromJSON:h.fromJSON)(i[n],t));return this},h.prototype.get=function(e){return this.nested&&this.nested[e]||null},h.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},h.prototype.add=function(e){if(!(e instanceof a&&e.extend!==undefined||e instanceof s||e instanceof o||e instanceof r||e instanceof h))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof h&&e instanceof h)||t instanceof s||t instanceof r)throw Error("duplicate name '"+e.name+"' in "+this);for(var i=t.nestedArray,n=0;n<i.length;++n)e.add(i[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},h.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),d(this)},h.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var i=this;e.length>0;){var n=e.shift();if(i.nested&&i.nested[n]){if(!((i=i.nested[n])instanceof h))throw Error("path conflicts with non-namespace objects")}else i.add(i=new h(n))}return t&&i.addJSON(t),i},h.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof h?e[t++].resolveAll():e[t++].resolve();return this.resolve()},h.prototype.lookup=function(e,t,i){if("boolean"==typeof t?(i=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof h&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof h&&(n=this._nestedArray[s].lookup(e,t,!0)))return n;return null===this.parent||i?null:this.parent.lookup(e,t)},h.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},h.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},h.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},h.prototype.lookupService=function(e){var t=this.lookup(e,[r]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},h._configure=function(e,t,i){s=e,r=t,o=i}},{15:15,22:22,33:33}],22:[function(e,t,i){t.exports=r,r.className="ReflectionObject";var n,s=e(33);function r(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(r.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),r.prototype.toJSON=function(){throw Error()},r.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},r.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},r.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},r.prototype.getOption=function(e){return this.options?this.options[e]:undefined},r.prototype.setOption=function(e,t,i){return i&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},r.prototype.setParsedOption=function(e,t,i){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(i){var r=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));r?s.setProperty(r[e],i,t):((r={})[e]=s.setProperty({},i,t),n.push(r))}else{var o={};o[e]=t,n.push(o)}return this},r.prototype.setOptions=function(e,t){if(e)for(var i=Object.keys(e),n=0;n<i.length;++n)this.setOption(i[n],e[i[n]],t);return this},r.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},r._configure=function(e){n=e}},{33:33}],23:[function(e,t,i){t.exports=o;var n=e(22);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var s=e(15),r=e(33);function o(e,t,i,s){if(Array.isArray(t)||(i=t,t=undefined),n.call(this,e,i),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},o.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var i=e.get(this.oneof[t]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}a(this)},o.prototype.onRemove=function(e){for(var t,i=0;i<this.fieldsArray.length;++i)(t=this.fieldsArray[i]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,i){r.decorateType(t.constructor).add(new o(i,e)),Object.defineProperty(t,i,{get:r.oneOfGetter(e),set:r.oneOfSetter(e)})}}},{15:15,22:22,33:33}],24:[function(e,t,i){t.exports=l;var n,s=e(35),r=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return s.Buffer?function(e){return(l.create=function(e){return s.Buffer.isBuffer(e)?new n(e):h(e)})(e)}:h};function u(){var e=new r(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=d(),n._configure();var t=s.Long?"toLong":"toNumber";s.merge(l.prototype,{int64:function(){return u.call(this)[t](!1)},uint64:function(){return u.call(this)[t](!0)},sint64:function(){return u.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{35:35}],25:[function(e,t,i){t.exports=r;var n=e(24);(r.prototype=Object.create(n.prototype)).constructor=r;var s=e(35);function r(e){n.call(this,e)}r._configure=function(){s.Buffer&&(r.prototype._slice=s.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},r._configure()},{24:24,35:35}],26:[function(e,t,i){t.exports=d;var n=e(21);((d.prototype=Object.create(n.prototype)).constructor=d).className="Root";var s,r,o,a=e(15),l=e(14),c=e(23),h=e(33);function d(e){n.call(this,"",e),this.deferred=[],this.files=[]}function u(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=h.path.resolve,d.prototype.fetch=h.fetch,d.prototype.load=function e(t,i,n){"function"==typeof i&&(n=i,i=undefined);var s=this;if(!n)return h.asPromise(e,s,t,i);var a=n===u;function l(e,t){if(n){var i=n;if(n=null,a)throw e;i(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var i=e.substring(t);if(i in o)return i}return null}function d(e,t){try{if(h.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),h.isString(t)){r.filename=e;var n,o=r(t,s,i),d=0;if(o.imports)for(;d<o.imports.length;++d)(n=c(o.imports[d])||s.resolvePath(e,o.imports[d]))&&p(n);if(o.weakImports)for(d=0;d<o.weakImports.length;++d)(n=c(o.weakImports[d])||s.resolvePath(e,o.weakImports[d]))&&p(n,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}a||f||l(null,s)}function p(e,t){if(!(s.files.indexOf(e)>-1))if(s.files.push(e),e in o)a?d(e,o[e]):(++f,setTimeout((function(){--f,d(e,o[e])})));else if(a){var i;try{i=h.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||l(e))}d(e,i)}else++f,s.fetch(e,(function(i,r){--f,n&&(i?t?f||l(null,s):l(i):d(e,r))}))}var f=0;h.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=s.resolvePath("",t[g]))&&p(m);return a?s:(f||l(null,s),undefined)},d.prototype.loadSync=function(e,t){if(!h.isNode)throw Error("not supported");return this.load(e,t,u)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var i=t.parent.lookup(t.extend);if(i){var n=new a(t.fullName,t.id,t.type,t.rule,undefined,t.options);return n.declaringField=t,t.extensionField=n,i.add(n),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof l)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var i=0;i<e.nestedArray.length;++i)this._handleAdd(e._nestedArray[i]);p.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var i=0;i<e.nestedArray.length;++i)this._handleRemove(e._nestedArray[i]);p.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,i){s=e,r=t,o=i}},{14:14,15:15,21:21,23:23,33:33}],27:[function(e,t,i){t.exports={}},{}],28:[function(e,t,i){i.Service=e(29)},{29:29}],29:[function(e,t,i){t.exports=s;var n=e(35);function s(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(s.prototype=Object.create(n.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,i,s,r,o){if(!r)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,i,s,r);if(!a.rpcImpl)return setTimeout((function(){o(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,i[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),(function(e,i){if(e)return a.emit("error",e,t),o(e);if(null===i)return a.end(!0),undefined;if(!(i instanceof s))try{i=s[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",i,t),o(null,i)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){o(e)}),0),undefined}},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(e,t,i){t.exports=a;var n=e(21);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var s=e(20),r=e(33),o=e(28);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var i=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),r=0;r<n.length;++r)i.add(s.fromJSON(n[r],t.methods[n[r]]));return t.nested&&i.addJSON(t.nested),i.comment=t.comment,i},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return r.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",i?this.comment:undefined])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=r.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,i){for(var n,s=new o.Service(e,t,i),a=0;a<this.methodsArray.length;++a){var l=r.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[l]=r.codegen(["r","c"],r.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return s}},{20:20,21:21,28:28,33:33}],31:[function(e,t,i){t.exports=y;var n=e(21);((y.prototype=Object.create(n.prototype)).constructor=y).className="Type";var s=e(14),r=e(23),o=e(15),a=e(18),l=e(30),c=e(19),h=e(24),d=e(38),u=e(33),p=e(13),f=e(12),m=e(36),g=e(11),v=e(37);function y(e,t){n.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var i=this.fields[e[t]],n=i.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=i}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=u.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=u.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,u.merge(e.prototype,t)),e.$type=e.prototype.$type=this,u.merge(e,c,!0),this._ctor=e;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var n={};for(i=0;i<this.oneofsArray.length;++i)n[this._oneofsArray[i].resolve().name]={get:u.oneOfGetter(this._oneofsArray[i].oneof),set:u.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(e.prototype,n)}}}),y.generateConstructor=function(e){for(var t,i=u.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?i("this%s={}",u.safeProp(t.name)):t.repeated&&i("this%s=[]",u.safeProp(t.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var i=new y(e,t.options);i.extensions=t.extensions,i.reserved=t.reserved;for(var c=Object.keys(t.fields),h=0;h<c.length;++h)i.add((void 0!==t.fields[c[h]].keyType?a.fromJSON:o.fromJSON)(c[h],t.fields[c[h]]));if(t.oneofs)for(c=Object.keys(t.oneofs),h=0;h<c.length;++h)i.add(r.fromJSON(c[h],t.oneofs[c[h]]));if(t.nested)for(c=Object.keys(t.nested),h=0;h<c.length;++h){var d=t.nested[c[h]];i.add((d.id!==undefined?o.fromJSON:d.fields!==undefined?y.fromJSON:d.values!==undefined?s.fromJSON:d.methods!==undefined?l.fromJSON:n.fromJSON)(c[h],d))}return t.extensions&&t.extensions.length&&(i.extensions=t.extensions),t.reserved&&t.reserved.length&&(i.reserved=t.reserved),t.group&&(i.group=!0),t.comment&&(i.comment=t.comment),i},y.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return u.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",i?this.comment:undefined])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var i=this.oneofsArray;for(t=0;t<i.length;)i[t++].resolve();return n.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof r){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],i=0;i<this.fieldsArray.length;++i)t.push(this._fieldsArray[i].resolve().resolvedType);this.encode=p(this)({Writer:d,types:t,util:u}),this.decode=f(this)({Reader:h,types:t,util:u}),this.verify=m(this)({types:t,util:u}),this.fromObject=g.fromObject(this)({types:t,util:u}),this.toObject=g.toObject(this)({types:t,util:u});var n=v[e];if(n){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(s),s.toObject=this.toObject,this.toObject=n.toObject.bind(s)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof h||(e=h.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){u.decorateType(t,e)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(e,t,i){var n=i,s=e(33),r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var i=0,n={};for(t|=0;i<e.length;)n[r[i+t]]=e[i++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(e,t,i){var n,s,r=t.exports=e(35),o=e(27);r.codegen=e(3),r.fetch=e(5),r.path=e(8),r.fs=r.inquire("fs"),r.toArray=function(e){if(e){for(var t=Object.keys(e),i=new Array(t.length),n=0;n<t.length;)i[n]=e[t[n++]];return i}return[]},r.toObject=function(e){for(var t={},i=0;i<e.length;){var n=e[i++],s=e[i++];s!==undefined&&(t[n]=s)}return t};var a=/\\/g,l=/"/g;r.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},r.safeProp=function(e){return!/^[$\w_]+$/.test(e)||r.isReserved(e)?'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]':"."+e},r.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;r.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},r.compareFieldsById=function(e,t){return e.id-t.id},r.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(r.decorateRoot.remove(t.$type),t.$type.name=i,r.decorateRoot.add(t.$type)),t.$type;n||(n=e(31));var s=new n(i||t.name);return r.decorateRoot.add(s),s.ctor=t,Object.defineProperty(t,"$type",{value:s,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:s,enumerable:!1}),s};var h=0;r.decorateEnum=function(t){if(t.$type)return t.$type;s||(s=e(14));var i=new s("Enum"+h++,t);return r.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},r.setProperty=function(e,t,i){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,i,n){var s=i.shift();if(i.length>0)t[s]=e(t[s]||{},i,n);else{var r=t[s];r&&(n=[].concat(r).concat(n)),t[s]=n}return t}(e,t=t.split("."),i)},Object.defineProperty(r,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(e,t,i){t.exports=s;var n=e(35);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=s.zero=new s(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var o=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new s(i,n)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(n.isString(e)){if(!n.Long)return s.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):r},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;s.fromHash=function(e){return e===o?r:new s((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},{35:35}],35:[function(e,t,i){var n=i;function s(e,t,i){for(var n=Object.keys(t),s=0;s<n.length;++s)e[n[s]]!==undefined&&i||(e[n[s]]=t[n[s]]);return e}function r(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&s(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e(1),n.base64=e(2),n.EventEmitter=e(4),n.float=e(6),n.inquire=e(7),n.utf8=e(10),n.pool=e(9),n.LongBits=e(34),n.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=s,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=r,n.ProtocolError=r("ProtocolError"),n.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&this[e[i]]!==undefined&&null!==this[e[i]])return e[i]}},n.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(e,t,i){t.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i={};e.oneofsArray.length&&t("var p={}");for(var n=0;n<e.fieldsArray.length;++n){var l=e._fieldsArray[n].resolve(),c="m"+s.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,l.name),l.map)t("if(!util.isObject(%s))",c)("return%j",r(l,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),a(t,l,"k[i]"),o(t,l,n,c+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",c)("return%j",r(l,"array"))("for(var i=0;i<%s.length;++i){",c),o(t,l,n,c+"[i]")("}");else{if(l.partOf){var h=s.safeProp(l.partOf.name);1===i[l.partOf.name]&&t("if(p%s===1)",h)("return%j",l.partOf.name+": multiple values"),i[l.partOf.name]=1,t("p%s=1",h)}o(t,l,n,c)}l.optional&&t("}")}return t("return null")};var n=e(14),s=e(33);function r(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,i,s){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",s)("default:")("return%j",r(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",r(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",r(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",r(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",r(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",r(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",r(t,"buffer"))}return e}function a(e,t,i){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",i)("return%j",r(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",i)("return%j",r(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",i)("return%j",r(t,"boolean key"))}return e}},{14:14,33:33}],37:[function(e,t,i){var n=i,s=e(19);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),i=this.lookup(t);if(i){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:i.encode(i.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var i="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var r=this.lookup(n);r&&(e=r.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var o=e.$type.toObject(e,t);return""===i&&(i="type.googleapis.com/"),n=i+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}},{19:19}],38:[function(e,t,i){t.exports=d;var n,s=e(35),r=s.LongBits,o=s.base64,a=s.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=undefined,this.val=i}function c(){}function h(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var u=function(){return s.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function m(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function g(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=u(),d.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(d.alloc=s.pool(d.alloc,s.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},(f.prototype=Object.create(l.prototype)).fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,r.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.int64=d.prototype.uint64=function(e){var t=r.from(e);return this._push(m,t.length(),t)},d.prototype.sint64=function(e){var t=r.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.sfixed32=d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed64=d.prototype.fixed64=function(e){var t=r.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var v=s.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(s.isString(e)){var i=d.alloc(t=o.length(e));o.decode(e,i,0),e=i}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=u(),n._configure()}},{35:35}],39:[function(e,t,i){t.exports=r;var n=e(38);(r.prototype=Object.create(n.prototype)).constructor=r;var s=e(35);function r(){n.call(this)}function o(e,t,i){e.length<40?s.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}r._configure=function(){r.alloc=s._Buffer_allocUnsafe,r.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}},r.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(r.writeBytesBuffer,t,e),this},r.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},r._configure()},{35:35,38:38}]},{})}()}).call(this,__webpack_require__(57),__webpack_require__(58)(module))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=n;var i=null;try{i=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function s(e){return!0===(e&&e.__isLong__)}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=s;var r={},o={};function a(e,t){var i,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(i=c(e,(0|e)<0?-1:0,!0),s&&(o[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(n=r[e])?n:(i=c(e,e<0?-1:0,!1),s&&(r[e]=i),i)}function l(e,t){if(isNaN(e))return t?y:v;if(t){if(e<0)return y;if(e>=f)return _}else{if(e<=-m)return E;if(e+1>=m)return C}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,i){return new n(e,t,i)}n.fromInt=a,n.fromNumber=l,n.fromBits=c;var h=Math.pow;function d(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"==typeof t?(i=t,t=!1):t=!!t,(i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,i).neg();for(var s=l(h(i,8)),r=v,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+a),i);if(a<8){var u=l(h(i,a));r=r.mul(u).add(l(c))}else r=(r=r.mul(s)).add(l(c))}return r.unsigned=t,r}function u(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=d,n.fromValue=u;var p=4294967296,f=p*p,m=f/2,g=a(1<<24),v=a(0);n.ZERO=v;var y=a(0,!0);n.UZERO=y;var b=a(1);n.ONE=b;var w=a(1,!0);n.UONE=w;var S=a(-1);n.NEG_ONE=S;var C=c(-1,2147483647,!1);n.MAX_VALUE=C;var _=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var E=c(0,-2147483648,!1);n.MIN_VALUE=E;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=l(e),i=this.div(t),n=i.mul(t).sub(this);return i.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=l(h(e,6),this.unsigned),r=this,o="";;){var a=r.div(s),c=(r.sub(a.mul(s)).toInt()>>>0).toString(e);if((r=a).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return s(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(s(e)||(e=u(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(b)},T.neg=T.negate,T.add=function(e){s(e)||(e=u(e));var t=0,i=0,n=0,r=0;return n+=(r+=(65535&this.low)+(65535&e.low))>>>16,i+=(n+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(i+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),c((n&=65535)<<16|(r&=65535),(t&=65535)<<16|(i&=65535),this.unsigned)},T.subtract=function(e){return s(e)||(e=u(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return v;if(s(e)||(e=u(e)),i)return c(i.mul(this.low,this.high,e.low,e.high),i.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(E))return e.isOdd()?E:v;if(e.eq(E))return this.isOdd()?E:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=65535&this.high,n=this.low>>>16,r=65535&this.low,o=65535&e.high,a=e.low>>>16,h=65535&e.low,d=0,p=0,f=0,m=0;return f+=(m+=r*h)>>>16,p+=(f+=n*h)>>>16,f&=65535,p+=(f+=r*a)>>>16,d+=(p+=t*h)>>>16,p&=65535,d+=(p+=n*a)>>>16,p&=65535,d+=(p+=r*o)>>>16,d+=(this.high>>>16)*h+t*a+n*o+r*(e.high>>>16),c((f&=65535)<<16|(m&=65535),(d&=65535)<<16|(p&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(s(e)||(e=u(e)),e.isZero())throw Error("division by zero");var t,n,r;if(i)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?i.div_u:i.div_s)(this.low,this.high,e.low,e.high),i.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return w;r=y}else{if(this.eq(E))return e.eq(b)||e.eq(S)?E:e.eq(E)?b:(t=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?b:S:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(E))return this.unsigned?y:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=v}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:h(2,o-48),d=l(t),p=d.mul(e);p.isNegative()||p.gt(n);)p=(d=l(t-=a,this.unsigned)).mul(e);d.isZero()&&(d=b),r=r.add(d),n=n.sub(p)}return r},T.div=T.divide,T.modulo=function(e){return s(e)||(e=u(e)),i?c((this.unsigned?i.rem_u:i.rem_s)(this.low,this.high,e.low,e.high),i.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(e){return s(e)||(e=u(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return s(e)||(e=u(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return s(e)||(e=u(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return s(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return s(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(s(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,i){return i?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e){e.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156}')},function(e){e.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}}}}}}')},function(e,t,i){var n=function(e){"use strict";var t=Object.prototype,i=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function a(e,t,i,n){var s=Object.create((t&&t.prototype instanceof h?t:h).prototype),r=new C(n||[]);return s._invoke=function(e,t,i){var n="suspendedStart";return function(s,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw r;return{value:void 0,done:!0}}for(i.method=s,i.arg=r;;){var o=i.delegate;if(o){var a=b(o,i);if(a){if(a===c)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var h=l(e,t,i);if("normal"===h.type){if(n=i.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(n="completed",i.method="throw",i.arg=h.arg)}}}(e,i,r),s}function l(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var c={};function h(){}function d(){}function u(){}var p={};p[s]=function(){return this};var f=Object.getPrototypeOf,m=f&&f(f(_([])));m&&m!==t&&i.call(m,s)&&(p=m);var g=u.prototype=h.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var n;this._invoke=function(s,r){function o(){return new t((function(n,o){!function n(s,r,o,a){var c=l(e[s],e,r);if("throw"!==c.type){var h=c.arg,d=h.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(d).then((function(e){h.value=e,o(h)}),(function(e){return n("throw",e,o,a)}))}a(c.arg)}(s,r,n,o)}))}return n=n?n.then(o,o):o()}}function b(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=g.constructor=u,u.constructor=d,u[o]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),y.prototype[r]=function(){return this},e.AsyncIterator=y,e.async=function(t,i,n,s,r){void 0===r&&(r=Promise);var o=new y(a(t,i,n,s),r);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},v(g),g[o]="Generator",g[s]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return o.type="throw",o.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=i.call(r,"catchLoc"),l=i.call(r,"finallyLoc");if(a&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),S(i),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;S(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:_(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw r}}return i}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="object"==typeof window&&window.RTCPeerConnection,s="object"==typeof window&&window.webkitRTCPeerConnection,r="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=n||s||r;return t?new t(e):null}},function(e,t,i){var n;!function(t){"use strict";function s(){}var r=s.prototype,o=t.EventEmitter;function a(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function l(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp)for(i in t={},n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i]);else t=n[e]||(n[e]=[]);return t},r.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},r.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var i,n=this.getListenersAsObject(e),s="object"==typeof t;for(i in n)n.hasOwnProperty(i)&&-1===a(n[i],t)&&n[i].push(s?t:{listener:t,once:!1});return this},r.on=l("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=l("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var i,n,s=this.getListenersAsObject(e);for(n in s)s.hasOwnProperty(n)&&-1!==(i=a(s[n],t))&&s[n].splice(i,1);return this},r.off=l("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,i){var n,s,r=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)r.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(s=t[n])&&("function"==typeof s?r.call(this,n,s):o.call(this,n,s));return this},r.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},r.removeAllListeners=l("removeEvent"),r.emitEvent=function(e,t){var i,n,s,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(i=o[r].slice(0),s=0;s<i.length;s++)!0===(n=i[s]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=l("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return t.EventEmitter=o,s},void 0===(n=(function(){return s}).call(t,i,t,e))||(e.exports=n)}("undefined"!=typeof window?window:this||{})},function(e,t,i){var n=i(32);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(72),l=i(26),c=i(91),h=i(20),d=i(23),u=i(34),p=o(i(0)),f=o(i(35)),m=function(){function e(e){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new c.PromiseMutex,this.cancelToken=f.default.CancelToken.source(),this.injectConfig=n({},l.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=e}return Object.defineProperty(e.prototype,"isNeedReset",{get:function(){for(var e=this,t=0,i=Array.from(this.streamingTasks.values());t<i.length;t++){var n=i[t];if(n.mode===l.LiveStreamingServiceMode.INJECT)return!0;if(n.mode===l.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find((function(t){return t.uid===e.spec.uid})))return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.setTranscodingConfig=function(e){return s(this,void 0,void 0,(function(){var t,i,s,o,a,c=this;return r(this,(function(r){switch(r.label){case 0:(t=n(n({},l.DEFAULT_TRANSCODING_CONFIG),e)).transcodingUsers||(t.transcodingUsers=t.userConfigs),66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(p.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+t.videoCodecProfile+" -> 100"),t.videoCodecProfile=100),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((function(e){return n(n(n({},l.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),e),{zOrder:e.zOrder?e.zOrder+1:1})}))),t.images&&(t.images=t.images.map((function(e){return n(n({},l.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),e)})));try{l.isLiveStreamingTranscodingConfig(t)}catch(e){throw e}return t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((function(e){return n({},e)})),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers),i=(t.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Promise.resolve(e.uid):h.getUserAccount(c.spec,null,e.uid)})),[4,this.taskMutex.lock()];case 1:return s=r.sent(),[4,Promise.all(i)];case 2:if(r.sent().forEach((function(e,i){t.userConfigs&&t.userConfigs[i]&&(t.userConfigs[i].uid=e&&e.uid||e)})),this.transcodingConfig=t,!this.connection)return s(),[2];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map((function(e){return e.taskId})).join("#")})];case 4:return o=r.sent(),s(),p.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+o.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(a=r.sent(),s(),!a.data||!a.data.retry)throw a;return a.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(e){p.default.warning("["+c.spec.clientId+"] live streaming receive error",a.toString(),"try to republish",e.url),c.startLiveStreamingTask(e.url,e.mode,a).then((function(){p.default.debug("["+c.spec.clientId+"] live streaming republish "+e.url+" success")})).catch((function(t){p.default.error("["+c.spec.clientId+"] live streaming republish failed",e.url,t.toString()),c.onLiveStreamError&&c.onLiveStreamError(e.url,t)}))})),[3,6];case 6:return[2]}}))}))},e.prototype.setInjectStreamConfig=function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t},e.prototype.startLiveStreamingTask=function(e,t,i){return s(this,void 0,void 0,(function(){var s,o,a,c,h,f,m,g,v=this;return r(this,(function(r){switch(r.label){case 0:if(Array.from(this.streamingTasks.values()).find((function(e){return e.mode===l.LiveStreamingServiceMode.INJECT}))&&t===l.LiveStreamingServiceMode.INJECT)return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()];if(!this.transcodingConfig&&t===l.LiveStreamingServiceMode.TRANSCODE)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");return s={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:30},p.default.debug("["+this.spec.clientId+"] start live streaming "+e+", mode: "+t),[4,this.taskMutex.lock()];case 1:if(o=r.sent(),!this.connection&&i)return o(),[2];if(this.streamingTasks.get(e)&&!i)return[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&t===l.LiveStreamingServiceMode.TRANSCODE)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");r.label=2;case 2:return r.trys.push([2,5,,6]),this.connection?[3,4]:(a=this,[4,this.connect(t)]);case 3:a.connection=r.sent(),r.label=4;case 4:return[3,6];case 5:throw c=r.sent(),o(),c;case 6:switch(t){case l.LiveStreamingServiceMode.TRANSCODE:s.transcodingConfig=n({},this.transcodingConfig);break;case l.LiveStreamingServiceMode.RAW:break;case l.LiveStreamingServiceMode.INJECT:s={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(s.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,h=this.lastTaskId++,r.label=7;case 7:return r.trys.push([7,9,,14]),f=new Promise((function(t,n){u.wait(v.retryTimeout).then((function(){if(i)return n(i);var t=v.statusError.get(e);return t?(v.statusError.delete(e),n(t)):void 0}))})),[4,Promise.race([this.connection.request("request",{clientRequest:s},!0,{url:e,command:"PublishStream",workerType:t===l.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!i,tid:h.toString()}),f])];case 8:return m=r.sent(),this.isStartingStreamingTask=!1,p.default.debug("["+this.spec.clientId+"] live streaming started, code: "+m.code),this.streamingTasks.set(e,{clientRequest:s,mode:t,url:e,taskId:h}),o(),[3,14];case 9:if(g=r.sent(),o(),this.isStartingStreamingTask=!1,!g.data||!g.data.retry||i)throw g;return g.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(e,t,g)];case 10:return[2,r.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(e,t,g)];case 12:return[2,r.sent()];case 13:return[3,14];case 14:return[2]}}))}))},e.prototype.stopLiveStreamingTask=function(e){var t=this;return new Promise((function(i,n){var s=t.streamingTasks.get(e);if(!s||!t.connection)return new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var r=s.mode;s.abortTask=function(){p.default.debug("["+t.spec.clientId+"] stop live streaming success(worker exception)"),t.streamingTasks.delete(e),i()},t.connection.request("request",{clientRequest:{command:r===l.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:s.url}},!1,{url:e,command:"UnPublishStream",workerType:r===l.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(n){p.default.debug("["+t.spec.clientId+"] stop live streaming success, code: "+n.code),t.streamingTasks.delete(e),i()})).catch(n)}))},e.prototype.controlInjectStream=function(e,t,i,n){return s(this,void 0,void 0,(function(){var s;return r(this,(function(r){switch(r.label){case 0:if(!(s=this.streamingTasks.get(e))||!this.connection||s.mode!==l.LiveStreamingServiceMode.INJECT)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:i,position:n}})];case 1:return[2,r.sent().serverResponse]}}))}))},e.prototype.resetAllTask=function(){var e=this,t=Array.from(this.streamingTasks.values());this.terminate();for(var i=function(t){n.startLiveStreamingTask(t.url,t.mode).catch((function(i){e.onLiveStreamError&&e.onLiveStreamError(t.url,i)}))},n=this,s=0,r=t;s<r.length;s++)i(r[s])},e.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=f.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},e.prototype.connect=function(e){return s(this,void 0,void 0,(function(){var t,i=this;return r(this,(function(n){switch(n.label){case 0:if(this.connection)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,u.getLiveStreamingWorkerMangerResult(e,this.spec,this.cancelToken.token)];case 1:return t=n.sent(),this.uapResponse=t,this.connection=new a.AgoraLiveStreamingUapSignal(t.workerToken,this.spec,e),this.connection.on(l.LiveStreamingUapSignalEvents.WARNING,(function(e,t){return i.onLiveStreamWarning&&i.onLiveStreamWarning(t,e)})),this.connection.on(l.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,(function(e){return i.handlePublishStreamServer(e)})),this.connection.on(l.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,(function(e){return i.handleInjectStreamServerStatus(e)})),this.connection.on(l.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,(function(t,n){if(!i.connection)return n(new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));u.getLiveStreamingWorkerMangerResult(e,i.spec,i.cancelToken.token).then((function(e){i.uapResponse=e,t(e.addressList)})).catch(n)})),[4,this.connection.init(t.addressList)];case 2:return n.sent(),[2,this.connection]}}))}))},e.prototype.handlePublishStreamServer=function(e){var t=this,i=e.serverStatus.url,n=this.streamingTasks.get(i);switch(e.code){case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var s=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return p.default.error(s.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,s);if(!this.isStartingStreamingTask)return;this.statusError.set(i,s);case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var r=Array.from(this.streamingTasks.values()),o=function(i){if(i.abortTask)return i.abortTask(),"continue";p.default.warning("["+a.spec.clientId+"] publish stream status code",e.code,"try to republish",i.url),a.startLiveStreamingTask(i.url,i.mode,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){p.default.debug("["+t.spec.clientId+"] republish live stream success",i.url)})).catch((function(e){p.default.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(i.url,e)}))},a=this,c=0,h=r;c<h.length;c++)o(h[c]);return}},e.prototype.handleInjectStreamServerStatus=function(e){var t=Number(e.uid),i=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,i));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,i),void this.streamingTasks.delete(i);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,i),void this.streamingTasks.delete(i);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,i),void this.streamingTasks.delete(i);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,i),void this.streamingTasks.delete(i);default:return void p.default.debug("inject stream server status",e)}},e.prototype.haveUrl=function(e){return this.streamingTasks.has(e)||void 0},e}();t.AgoraRTCLiveStreamingClient=m},function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(26),h=i(73),d=i(33),u=i(23),p=i(3),f=l(i(0)),m=i(1),g=function(e){function t(t,i,n){var s=e.call(this)||this;return s.reconnectMode="retry",s.reqId=0,s.commandReqId=0,s.handleWebSocketOpen=function(){s.reconnectMode="retry",s.startPingPong()},s.handleWebSocketMessage=function(e){if(e.data){var t=JSON.parse(e.data);t.requestId?s.emit("@"+t.requestId+"-"+t.sid,t):s.serviceMode===c.LiveStreamingServiceMode.INJECT?s.emit(c.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,t):(m.report.requestWorkerEvent(s.spec.sid,{actionType:"status",serverCode:t.code,workerType:s.serviceMode===c.LiveStreamingServiceMode.TRANSCODE?1:2}),s.emit(c.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,t))}},s.spec=i,s.token=t,s.serviceMode=n,s.websocket=new h.AgoraWebSocketManager("live-streaming"),s.websocket.on(c.WebSocketManagerEvents.CONNECTED,s.handleWebSocketOpen),s.websocket.on(c.WebSocketManagerEvents.ON_MESSAGE,s.handleWebSocketMessage),s.websocket.on(c.WebSocketManagerEvents.REQUEST_NEW_URLS,(function(e,t){d.emitAsPromise(s,c.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(e).catch(t)})),s.websocket.on(c.WebSocketManagerEvents.RECONNECTING,(function(){s.websocket.reconnectMode=s.reconnectMode})),s}return s(t,e),t.prototype.init=function(e){return this.websocket.init(e)},t.prototype.request=function(e,t,i,n){return o(this,void 0,void 0,(function(){var s,o,l,h,d,f,g,v,y=this;return a(this,(function(a){switch(a.label){case 0:if(this.reqId+=1,s=this.reqId,"request"===e&&(this.commandReqId+=1),o=this.commandReqId,!s||!this.websocket)throw new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(l=r({command:e,sdkVersion:p.VERSION,seq:s,requestId:s,allocate:i,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t),"closed"===this.websocket.state)throw new u.AgoraRTCError(u.AgoraRTCErrorCode.WS_DISCONNECT);return h=function(){return new Promise((function(e,t){y.websocket.once(c.WebSocketManagerEvents.CLOSED,(function(){return t(new u.AgoraRTCError(u.AgoraRTCErrorCode.WS_ABORT))})),y.websocket.once(c.WebSocketManagerEvents.CONNECTED,e)}))},"connected"===this.websocket.state?[3,2]:[4,h()];case 1:a.sent(),a.label=2;case 2:l.clientRequest&&(l.clientRequest.workerToken=this.token),d=new Promise((function(e,t){var i=function(){t(new u.AgoraRTCError(u.AgoraRTCErrorCode.WS_ABORT))};y.websocket.once(c.WebSocketManagerEvents.RECONNECTING,i),y.websocket.once(c.WebSocketManagerEvents.CLOSED,i),y.once("@"+s+"-"+y.spec.sid,(function(t){e(t)}))})),n&&m.report.requestWorkerEvent(this.spec.sid,r(r({},n),{requestId:o,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0})),f=Date.now(),this.websocket.sendMessage(l),g=null,a.label=3;case 3:return a.trys.push([3,5,,8]),[4,d];case 4:return g=a.sent(),[3,8];case 5:if(v=a.sent(),"closed"===this.websocket.state)throw v;return[4,h()];case 6:return a.sent(),[4,this.request(e,t,i,n)];case 7:return[2,a.sent()];case 8:return n&&m.report.requestWorkerEvent(this.spec.sid,r(r({},n),{requestId:o,actionType:"response",payload:JSON.stringify(g.serverResponse),serverCode:g.code,success:200===g.code,responseTime:Date.now()-f})),200!==g.code&&this.handleResponseError(g),[2,g]}}))}))},t.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},t.prototype.close=function(){var e="__VERSION__"===p.VERSION?"0.0.1":p.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},t.prototype.handleResponseError=function(e){switch(e.code){case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void f.default.warning("live stream response already exists stream");case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(c.LiveStreamingUapSignalEvents.WARNING,t,e.serverResponse.url);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return t=new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),this.emit(c.LiveStreamingUapSignalEvents.WARNING,t,e.serverResponse.url);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return t=new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),this.emit(c.LiveStreamingUapSignalEvents.WARNING,t,e.serverResponse.url);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case c.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new u.AgoraRTCError(u.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}},t.prototype.startPingPong=function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch((function(){}))}),6e3)},t}(d.EventEmitter);t.AgoraLiveStreamingUapSignal=g},function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(23),c=i(33),h=i(34),d=i(26),u=a(i(0)),p=function(e){function t(t){var i=e.call(this)||this;return i.connectionID=0,i.currentURLIndex=0,i.reconnectMode="tryNext",i._state="closed",i.retryConfig=h.DEFAULT_RETRY_CONFIG,i.reconnectCount=0,i.name=t,i}return s(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(d.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(d.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(d.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(d.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;return new Promise((function(i,n){t.urls=e;var s=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(s).then(i).catch(n),t.once(d.WebSocketManagerEvents.CLOSED,(function(){return n(new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_DISCONNECT))})),t.once(d.WebSocketManagerEvents.CONNECTED,(function(){return i()}))}))},t.prototype.close=function(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var i=this.websocket;t?setTimeout((function(){return i.close()}),500):i.close(),this.websocket=void 0}this.state=e?"failed":"closed"},t.prototype.reconnect=function(e){if(this.websocket){void 0!==e&&(this.reconnectMode=e);var t=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),t&&t.bind(this.websocket)({code:9999})}else u.default.warning("["+this.name+"] can not reconnect, no websocket")},t.prototype.sendMessage=function(e){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var t=JSON.stringify(e);try{this.websocket.send(t)}catch(e){throw new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+e.toString())}},t.prototype.createWebSocketConnection=function(e){return r(this,void 0,void 0,(function(){var t,i=this;return o(this,(function(n){return this.connectionID+=1,t=this.connectionID,[2,new Promise((function(n,s){i.websocket&&(i.websocket.onclose=null,i.websocket.close()),u.default.debug("["+i.name+"] start connect, url: "+e);try{i.websocket=new WebSocket(e),i.websocket.binaryType="arraybuffer"}catch(e){var a=new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+e.toString());return u.default.error("["+i.name+"]"+a),void s(a)}h.wait(5e3).then((function(){t===i.connectionID&&i.websocket&&i.websocket.readyState!==WebSocket.OPEN&&i.websocket&&i.websocket.close()})),i.websocket.onopen=function(){u.default.debug("["+i.name+"] websockect opened:",e),i.reconnectMode="retry",i.state="connected",i.reconnectCount=0,n()},i.websocket.onclose=function(e){return r(i,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:return u.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+e.code+", reason: "+e.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),t=c.emitAsInvokerNoResponse(this,d.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(t)]):[3,2];case 1:return i=r.sent(),"closed"===this.state?(u.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):i?(n(),[3,3]):(s(new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+e.code)),this.close(!0),[2]);case 2:s(new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+e.code)),this.close(),r.label=3;case 3:return[2]}}))}))},i.websocket.onmessage=function(e){i.emit(d.WebSocketManagerEvents.ON_MESSAGE,e)}}))]}))}))},t.prototype.reconnectWithAction=function(e,t){return r(this,void 0,void 0,(function(){var i,n,s;return o(this,(function(r){switch(r.label){case 0:return!t&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(i=h.getRetryWaitTime(this.reconnectCount,this.retryConfig),u.default.debug("["+this.name+"] wait "+i+"ms to reconnect websocket, mode: "+e),[4,h.wait(i)]):[2,!1];case 1:if(r.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,r.label=2;case 2:return r.trys.push([2,12,,14]),"retry"!==e?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return r.sent(),[3,11];case 4:return"tryNext"!==e?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,r.sent()];case 6:return u.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return r.sent(),[3,11];case 8:return"recover"!==e?[3,11]:(u.default.debug("["+this.name+"] request new urls"),n=this,[4,c.emitAsPromise(this,d.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return n.urls=r.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:r.sent(),r.label=11;case 11:return[2,!0];case 12:return s=r.sent(),u.default.error("["+this.name+"] reconnect failed",s.toString()),[4,this.reconnectWithAction(e)];case 13:return[2,r.sent()];case 14:return[2]}}))}))},t}(c.EventEmitter);t.AgoraWebSocketManager=p},function(e,t,i){"use strict";var n=i(18),s=i(36),r=i(75),o=i(42);function a(e){var t=new r(e),i=s(r.prototype.request,t);return n.extend(i,r.prototype,t),n.extend(i,t),i}var l=a(i(39));l.Axios=r,l.create=function(e){return a(o(l.defaults,e))},l.Cancel=i(43),l.CancelToken=i(89),l.isCancel=i(38),l.all=function(e){return Promise.all(e)},l.spread=i(90),e.exports=l,e.exports.default=l},function(e,t,i){"use strict";var n=i(18),s=i(37),r=i(76),o=i(77),a=i(42);function l(e){this.defaults=e,this.interceptors={request:new r,response:new r}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},e.method=(e=a(this.defaults,e)).method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=[o,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},l.prototype.getUri=function(e){return e=a(this.defaults,e),s(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,i){return this.request(n.merge(i||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,i,s){return this.request(n.merge(s||{},{method:e,url:t,data:i}))}})),e.exports=l},function(e,t,i){"use strict";var n=i(18);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},function(e,t,i){"use strict";var n=i(18),s=i(78),r=i(38),o=i(39);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return a(e),t.data=s(t.data,t.headers,e.transformResponse),t}),(function(t){return r(t)||(a(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,i){"use strict";var n=i(18);e.exports=function(e,t,i){return n.forEach(i,(function(i){e=i(e,t)})),e}},function(e,t){var i,n,s=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l,c=[],h=!1,d=-1;function u(){h&&l&&(h=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!h){var e=a(u);h=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new f(e,t)),1!==c.length||h||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,i){"use strict";var n=i(18);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},function(e,t,i){"use strict";var n=i(41);e.exports=function(e,t,i){var s=i.config.validateStatus;!s||s(i.status)?e(i):t(n("Request failed with status code "+i.status,i.config,null,i.request,i))}},function(e,t,i){"use strict";e.exports=function(e,t,i,n,s){return e.config=t,i&&(e.code=i),e.request=n,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,i){"use strict";var n=i(84),s=i(85);e.exports=function(e,t){return e&&!n(t)?s(e,t):t}},function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,i){"use strict";var n=i(18),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,r,o={};return e?(n.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=n.trim(e.substr(0,r)).toLowerCase(),i=n.trim(e.substr(r+1)),t){if(o[t]&&s.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([i]):o[t]?o[t]+", "+i:i}})),o):o}},function(e,t,i){"use strict";var n=i(18);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function s(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=s(window.location.href),function(t){var i=n.isString(t)?s(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},function(e,t,i){"use strict";var n=i(18);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,s,r,o){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(s)&&a.push("path="+s),n.isString(r)&&a.push("domain="+r),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";var n=i(43);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.lockingPromise=Promise.resolve(),this.locks=0}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1;var i=new Promise((function(i){e=function(){t.locks-=1,i()}})),n=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return i})),n},e}();t.PromiseMutex=n},function(e,t,i){"use strict";i.r(t);var n=i(3),s=i(0),r=i(1),o=i(8),a=i(4),l=function(){};l.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var c=new function(){var e=Object(o.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,i){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then((function(i){e.batteryManager=i,t&&setTimeout((function(){t()}),0)})).catch((function(e){s.default.debug("navigator.getBattery is disabled",e),t&&t()})):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return t.BatteryLevel=e.batteryManager&&e.batteryManager.level?Math.floor(100*e.batteryManager.level):"UNSUPPORTED",t},e.getStats=function(t,i){var n=new l,s=e._getBatteryStats();s&&s.BatteryLevel&&n.set("BatteryLevel",s.BatteryLevel),t&&t(n)},e._init(),e},h=i(21),d=i(19),u=i(25),p=i(51),f=i(9),m=["live","rtc","web","interop","h264_interop","web-only"],g=["vp8","h264"],v=["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb"],y=i(11),b=i.n(y),w=i(7),S=i.n(w),C=i(12),_=i(5),E=i(10),T=i(20),x=i(6),k=i(14),A={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},O={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},D=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var i=parseInt(t.attributes.maxFrameRate),n=parseInt(e.googFrameRateInput);return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,i,n,s,r){n[e]||(n[e]={isPrevNormal:!0,record:[]});var o=n[e],a=t["check"+e](i,r);if(o.record.push(a),o.record.length>=5){o.isCurNormal=-1!==o.record.indexOf(!0);var l=O[e];o.isPrevNormal&&!o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:l,msg:A[l],uid:s}),!o.isPrevNormal&&o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:l+2e3,msg:A[l+2e3],uid:s}),o.isPrevNormal=o.isCurNormal,o.record=[]}},t.setLocalStats=function(e){var i={};Object.keys(e).map((function(n){var s=e[n],r=t.gatewayClient.localStreams[parseInt(n)],o=t.localStreamStorage[n]||{};r&&r.hasVideo()&&(t.record("SendVideoBitrate",s.videoStats,o,n),t.record("FramerateInput",s.videoStats,o,n,r),t.record("FramerateSent",s.videoStats,o,n)),r&&r.hasAudio()&&(t.record("AudioIntputLevel",s.audioStats,o,n),t.record("SendAudioBitrate",s.audioStats,o,n)),i[n]=o})),t.localStreamStorage=i},t.setRemoteStats=function(i){var n={};Object.keys(i).map((function(s){var r=i[s],o=e.remoteStreams[s],a=t.remoteStreamStorage[s]||{};o&&o.hasVideo()&&o.isPlaying()&&t.record("VideoDecode",r.videoStats,a,s),o&&o.hasAudio()&&o.isPlaying()&&(t.record("AudioOutputLevel",r.audioStats,a,s),t.record("AudioDecode",r.audioStats,a,s)),n[s]=a})),t.remoteStreamStorage=n},t};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var R=i(2),P=new function(){var e=Object(o.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,i){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var n=e._getNetworkInfo();e.type=n&&n.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,i&&i("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),i=t&&t.type||"UNSUPPORTED",n=Date.now();i!==e.type&&(e.lastTypeChangedAt=n,"none"==i?e.lastDisconnectedAt=n:"none"==e.type&&(e.lastConnectedAt=n),e.type=i,e.dispatchEvent({type:"networkTypeChanged",networkType:i}))},e.getStats=function(t,i){var n={},s=e._getNetworkInfo();s&&(n.NetworkType=s.type||"UNSUPPORTED"),setTimeout((function(){t(n)}),0)},e._init((function(){navigator.connection.addEventListener("change",(function(){e._reloadNetworkInfo()})),e.networkChangeTimer=setInterval((function(){e._reloadNetworkInfo()}),5e3)}),(function(e){})),e},M=i(52),L=i(16),N=i(53),V=i.n(N),B=i(28),F="host",j=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1};if(t.mode=e.mode,t.codec=e.codec,t.clientId=Object(E.generateSessionId)().slice(0,5),t.uintUid=null,t.customReportCount=0,e=S()({},e),t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(i,n){var s=r.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(i instanceof f.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var o=i.getSrcChannelMediaInfo(),a=i.getDestChannelMediaInfos();if(Object(R.isEmpty)(o))throw"srcChannelMediaInfo should not be empty";if(Object(R.isEmpty)(a)||0===a.length)throw"destChannelMediaInfos should not be empty";if(!Object(E.is32Uint)(o.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(R.isValidChannelName)(o.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(o.token&&!Object(R.isValidToken)(o.token))throw"Invalid token in srcChannelMediaInfo";if(a.forEach((function(e){if(!Object(E.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(R.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(R.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==C.a.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(i).then((function(){s&&s()})).catch((function(e){s&&s(e)}))},t.updateChannelMediaRelay=function(i,n){var s=r.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(i instanceof f.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var o=i.getSrcChannelMediaInfo(),a=i.getDestChannelMediaInfos();if(Object(R.isEmpty)(o))throw"srcChannelMediaInfo should not be empty";if(Object(R.isEmpty)(a)||0===a.length)throw"destChannelMediaInfos should not be empty";if(!Object(E.is32Uint)(o.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(R.isValidChannelName)(o.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(o.token&&!Object(R.isValidToken)(o.token))throw"Invalid token in srcChannelMediaInfo";if(a.forEach((function(e){if(!Object(E.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(R.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(R.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==C.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(i).then((function(){s&&s()})).catch((function(e){s&&s(e)}))},t.stopChannelMediaRelay=function(i){var n=r.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return i&&i(e);i&&i()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then((function(){n&&n()})).catch((function(e){n&&n(e)}))},t.getConnectionState=function(){var i=r.report.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),n=C.a.connetionStateMap[t.gatewayClient.state];return i(),n},t.setClientRole=function(i,n){var o=r.report.reportApiInvoke(e.sessionId,{callback:n,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(R.checkValidEnum)(i,"setClientRole",[F,"audience"]),"rtc"===t.mode){var a="RTC mode can not use setClientRole";return s.default.warning("[".concat(t.clientId,"] ").concat(a)),o&&o(a)}t.gatewayClient&&t.gatewayClient.state===C.a.CONNECTED?("audience"===i&&(0===this.highStreamState?this._unpublish(this.highStream,(function(){o&&o(null,{role:i})}),(function(e){o&&o(e)})):t.gatewayClient.setClientRole("audience",o)),i===F&&t.gatewayClient.setClientRole(F,o)):(t.gatewayClient.role=i,o&&o(null,{role:i}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==C.a.CONNECTED){var i="Client is not in connected state";return s.default.error("[".concat(t.clientId,"] ").concat(i)),void e(i)}t.gatewayClient.getGatewayInfo((function(t){e(null,t)}),e)},t.renewToken=function(i,n,o){var a=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return s.default.error("Failed to renew token ".concat(e),t),o&&o(e);n&&n(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(R.isValidToken)(i))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=i,void t.gatewayClient.renewToken(i,(function(e){return a(null,e)}),a)):(s.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),a(_.default.INVALID_OPERATION)):(s.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),a(_.default.INVALID_OPERATION))},t.setLowStreamParameter=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(R.checkValidObject)(i,"param");var o=i.width,a=i.height,l=i.framerate,c=i.bitrate;Object(R.isEmpty)(o)||Object(R.checkValidNumber)(o,"width"),Object(R.isEmpty)(a)||Object(R.checkValidNumber)(a,"height"),Object(R.isEmpty)(l)||Object(R.checkValidNumber)(l,"framerate"),Object(R.isEmpty)(c)||Object(R.checkValidNumber)(c,"bitrate",1,1e7),(!o&&a||o&&!a)&&s.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=i,n()},t.init=function(t,i,n){var s=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(R.checkValidString)(t),Object(a.isChromeKernel)()&&Object(a.getChromeKernelVersion)()<=48?n?s(_.default.BAD_ENVIRONMENT):Object(E.popBanTip)():(e.appId=t,e.sessionId=Object(E.generateSessionId)(),s())},t.setTurnServer=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==C.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");i instanceof Array||(i=[i]);var o=[];i.map((function(e,i){Object(R.checkValidObject)(e,"turnServer");var n=e.turnServerURL,r=e.username,a=e.password,l=e.udpport,c=e.forceturn,h=e.tcpport;if(Object(R.checkValidString)(n,"turnServerURL"),Object(R.checkValidString)(r,"username"),Object(R.checkValidString)(a,"password"),Object(R.checkValidString)(l,"udpport"),0===parseInt(l))throw new Error("udpport should not be ".concat(l));Object(R.isEmpty)(c)||Object(R.checkValidBoolean)(c,"forceturn");var d={mode:"manual"};if(d.url=n,d.udpport=l,d.username=r,d.credential=a,d.forceturn=c||!1,!Object(R.isEmpty)(h)){if(Object(R.checkValidString)(h,"tcpport"),0===parseInt(h))throw new Error("tcpport should not be ".concat(h));d.tcpport=h,s.default.info("[".concat(t.clientId,"] Set turnserver[").concat(i,"] tcpurl. ").concat(d.url,":").concat(d.tcpport))}s.default.info("[".concat(t.clientId,"] Set turnserver[").concat(i,"] udpurl. ").concat(d.url,":").concat(d.udpport,",username: ").concat(d.username)),o.push(d)})),t.turnServers=o,n()},t.setProxyServer=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==C.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!i)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");Object(R.checkValidString)(i,"proxyServer"),t.proxyServer=i,r.report.setProxyServer(i),s.default.setProxyServer(i),n()},t.startProxyServer=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==C.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer)throw new Error("You have already set the proxy");t.useProxyServer=!0,t.proxyServerType=i||1,n()},t.stopProxyServer=function(){var i=r.report.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==C.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");r.report.setProxyServer(),s.default.setProxyServer(),t.turnServers=[],t.proxyServer=null,t.useProxyServer=!1,t.proxyServerType=null,i()},t.setEncryptionSecret=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(R.checkValidString)(i,"password"),t.aespassword=i,n()},t.setEncryptionMode=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(R.checkValidString)(i,"encryptionMode"),-1===v.indexOf(i))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb"');t.aesmode=i,n()},t.configPublisher=function(i){var n=r.report.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(R.checkValidObject)(i,"config");var s=i.width,o=i.height,a=i.framerate,l=i.bitrate,c=i.publisherUrl;Object(R.checkValidNumber)(s,"width"),Object(R.checkValidNumber)(o,"height"),Object(R.checkValidNumber)(a,"framerate"),Object(R.checkValidNumber)(l,"bitrate",1,1e7),c&&Object(R.checkValidString)(c,"publisherUrl"),t.gatewayClient.configPublisher(i),n()},t.enableDualStream=function(i,n){var o=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(a.getBrowserOS)()?(r.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),o(_.default.IOS_NOT_SUPPORT)):Object(a.isWeChatBrowser)()?(r.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),o(_.default.WECHAT_NOT_SUPPORT)):(r.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream((function(e){return o(null,e)}),(function(e){s.default.warning("[".concat(t.clientId,"]"),e),o(_.default.ENABLE_DUALSTREAM_FAILED)})):o(1===t.highStreamState?_.default.STILL_ON_PUBLISHING:null)))},t.disableDualStream=function(i,n){var o=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});r.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream((function(){t.highStream.lowStream=null,o()}),(function(e){s.default.warning("[".concat(t.clientId,"]"),e),o(_.default.DISABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?o(_.default.STILL_ON_PUBLISHING):o()},t._getLowStream=function(e,i){t.lowStream?e(t.lowStream):t._createLowStream((function(i){t.lowStream=i,e(t.lowStream)}),i)},t._createLowStream=function(e,i){if(t.highStream&&t.highStream.stream){var n=S()({},t.highStream.params);if(n.streamID+=1,n.audio=!1,n.video)if(t.highStream.stream.getVideoTracks()[0]){var s=new h.a(n);if(s.isLowStream=!0,s.streamId=t.highStream.getId()+1,t.lowStreamParameter){var r=S()({},t.lowStreamParameter);r.width&&r.height||(r.width=160,r.height=120),r.framerate=r.framerate||15,r.bitrate=r.bitrate||50,s.setVideoProfileCustomPlus(r)}else s.setVideoProfileCustom(function(e){var t;switch(e){case"120p":case"120p_1":t=["120p_1","120p_1","120p_1"];break;case"120p_3":t=["120p_3","120p_3","120p_3"];break;case"180p":case"180p_1":t=["90p_1","90p_1","180p_1"];break;case"180p_3":t=["120p_3","120p_3","180p_3"];break;case"180p_4":t=["120p_1","120p_1","180p_4"];break;case"240p":case"240p_1":t=["120p_1","120p_1","240p_1"];break;case"240p_3":t=["120p_3","120p_3","240p_3"];break;case"240p_4":t=["120p_4","120p_4","240p_4"];break;case"360p":case"360p_1":case"360p_4":case"360p_9":case"360p_10":case"360p_11":t=["90p_1","90p_1","360p_1"];break;case"360p_3":case"360p_6":t=["120p_3","120p_3","360p_3"];break;case"360p_7":case"360p_8":t=["120p_1","120p_1","360p_7"];break;case"480p":case"480p_1":case"480p_2":case"480p_4":case"480p_10":t=["120p_1","120p_1","480p_1"];break;case"480p_3":case"480p_6":t=["120p_3","120p_3","480p_3"];break;case"480p_8":case"480p_9":t=["120p_4","120p_4","480p_8"];break;case"720p":case"720p_1":case"720p_2":case"720p_3":t=["90p_1","90p_1","720p_1"];break;case"720p_5":case"720p_6":t=["120p_1","120p_1","720p_5"];break;case"1080p":case"1080p_1":case"1080p_2":case"1080p_3":case"1080p_5":t=["90p_1","90p_1","1080p_1"];break;case"1440p":case"1440p_1":case"1440p_2":t=["90p_1","90p_1","1440p_1"];break;case"4k":case"4k_1":case"4k_3":t=["90p_1","90p_1","4k_1"];break;default:t=["120p_1","120p_1","360p_7"]}return Object(a.isOpera)()?[e,15,50]:Object(a.isFireFox)()?[t[1],15,100]:Object(a.isSafari)()?[t[2],15,50]:[t[0],15,50]}(t.highStream.profile));try{console.log(s.videoConstraint);var o=V()(t.highStream,{width:s.videoConstraint.width.ideal,height:s.videoConstraint.height.ideal,framerate:s.videoConstraint.frameRate});return s.stream=o,t.highStream.lowStream=s,t.highStream.userMuteVideo&&s.muteVideo(),e&&e(s)}catch(e){return i&&i(e)}}else i&&i(_.default.HIGH_STREAM_NOT_VIDEO_TRACE);else i&&i(_.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else i&&i(_.default.HIGH_STREAM_NOT_VIDEO_TRACE)},t._publishLowStream=function(e,i){return 2!==t.lowStreamState?i&&i(_.default.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?i&&i(_.default.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream((function(n){t.lowStreamState=1,t.gatewayClient.publish(n,{streamType:1},(function(){t.lowStreamState=0,e&&e()}),(function(e){1===t.lowStreamState&&(t.lowStreamState=2),s.default.debug("[".concat(t.clientId,"] publish low stream failed")),i&&i(e)}))}),i)},t._unpublishLowStream=function(e,i){if(0!==t.lowStreamState)return i&&i(_.default.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},(function(){}),(function(e){s.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),i&&i(e)})),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(i,n,o,a,l,c){a&&"function"==typeof a&&(c=l,l=a,a=null);var h=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return c&&c(e);l&&l(t)},name:"Client.join",options:arguments,tag:"tracer"});if(i&&!Object(R.isValidToken)(i))return s.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),h(_.default.INVALID_PARAMETER);if(!Object(R.isValidChannelName)(n))return s.default.error("Invalid Channel Name ".concat(n)),s.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),h(_.default.INVALID_PARAMETER);if("string"==typeof n&&""===n)return s.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),h(_.default.INVALID_PARAMETER);if(a&&!Object(R.isValidString)(a))return s.default.warning("[".concat(t.clientId,"] optionalInfo should be string")),h(_.default.INVALID_PARAMETER);if(o&&!Object(E.is32Uint)(o)&&!Object(R.isValidString)(o,1,255))return s.default.error("Invalid UID ".concat(o," ").concat(b()(o))),s.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")),h(_.default.INVALID_PARAMETER);if("string"==typeof o&&0==o.length)return s.default.warning("[".concat(t.clientId,"] String uid should not be empty")),h(_.default.INVALID_PARAMETER);if("string"==typeof o&&o.length>256)return s.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),h(_.default.INVALID_PARAMETER);t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var d=Date.now(),u=setTimeout((function(){if(1!=t.gatewayClient.hasJoined){s.default.debug("[".concat(t.clientId,"] The time to join the channel is greater than 5 seconds "));var i=Date.now();r.report.joinChannelTimeOut({lts:i,sid:e.sessionId,cname:n,cid:p.cid,uid:p.uid||("string"==typeof o?void 0:o),elapse:i-d,timeout:5})}}),5e3),p={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:n,uid:o,turnServers:t.turnServers.concat(),proxyServer:t.proxyServer,token:i||e.appId,useProxyServer:t.useProxyServer,proxyServerType:t.proxyServerType,optionalInfo:a};if("string"==typeof o&&(p.stringUid=o,t.uintUid?(p.uid=t.uintUid,delete t.uintUid):p.uid=0),t.aespassword&&"none"!==t.aesmode&&S()(p,{aespassword:t.aespassword,aesmode:t.aesmode}),r.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:n,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){clearTimeout(u),t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,h(null,e)},t.onFailure=function(e){return h(e)},t.channel=n,t.gatewayClient.state!==C.a.DISCONNECTED)return s.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),h(_.default.INVALID_OPERATION),void r.report.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:_.default.INVALID_OPERATION,addr:null});t.gatewayClient.state=C.a.CONNECTING;var f=function(r,o){s.default.info("[".concat(t.clientId,"] Joining channel: ").concat(n)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:o,joinInfo:p}),t.key=i||e.appId,p.cid=r.cid,p.uid||(p.uid=r.uid),p.vid=r.vid,p.clientId=t.clientId,p.apResponse=r.res,r.uni_lbs_ip&&r.uni_lbs_ip[1]&&(p.uni_lbs_ip=r.uni_lbs_ip[1]),p.gatewayAddr=r.gateway_addr,t.joinInfo=p,t.gatewayClient.join(p,t.key,(function(e){s.default.info("[".concat(t.clientId,"] Join channel ").concat(n," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),h(null,e)}),(function(e){return h(e)}))};p.stringUid&&!p.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(T.getUserAccount)(p,t.gatewayClient),t.userAccountReq.then((function(e){s.default.debug("getUserAccount Success ".concat(e.url," ").concat(p.stringUid," => ").concat(e.uid)),p.uid=e.uid,Object(T.getGatewayList)(p,f,(function(e){return h(e)}))})).catch((function(e){s.default.error("getUserAccount rejected",e),h(e)}))):Object(T.getGatewayList)(p,f,(function(e){return h(e)}))},t.renewChannelKey=function(i,n,o){var a=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o&&o(e);n&&n(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(R.checkValidString)(i,"key",1,2047),void 0===t.key?(s.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),a(_.default.INVALID_OPERATION)):(t.key=i,t.gatewayClient.joinInfo.token=i,t.gatewayClient.key=i,t.gatewayClient.recover(),a())},t.leave=function(i,o){t.gatewayClient.isFirstSuccess=!0,t.gatewayClient.hasInvokeLeave=!0;var a=!1,l=r.report.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return o&&o(e);t.gatewayClient.reconnectingCS=!1,t.gatewayClient.state=C.a.DISCONNECTED,clearTimeout(Object(T._getReconnectCSTimer)(t.clientId)),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),i&&i(n)},name:"Client.leave",options:arguments,tag:"tracer"});s.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===C.a.CONNECTING&&(t.gatewayClient.state=C.a.DISCONNECTED)),t.gatewayClient.leave((function(e){a=!0,l(null,e)}),l),setTimeout((function(){a||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=C.a.DISCONNECTED,l(null,"LEAVE_MSG_TIMEOUT"))}),Object(n.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var i=Object(E.generateSessionId)();if(s.default.debug("renewSession ".concat(e.sessionId," => ").concat(i)),e.sessionId=i,t.gatewayClient.peerPublishDurationMap.clear(),t.joinInfo&&(t.joinInfo.sid=i),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=i),t.gatewayClient.localStreams))for(var n in t.gatewayClient.localStreams){var r=t.gatewayClient.localStreams[n];r&&(r.sid=i)}},t._publish=function(i,r,o,a){if(2!==t.highStreamState)return s.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(i.getId())),o&&o(_.default.STREAM_ALREADY_PUBLISHED);if(0===t.turnServers.length&&Object(n.getParameter)("FORCE_TURN")&&!Object(n.getParameter)("TURN_ENABLE_TCP")&&!Object(n.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");s.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(i.getId())),t.highStream=i,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var l=function(i,n,r){t.gatewayClient.publish(i,{streamType:0},(function(){i.sid=e.sessionId,t.highStreamState=0,s.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(i.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream((function(){n&&n()}),(function(e){s.default.warning("[".concat(t.clientId,"] "),e),L.a.replaceWithCanvasTrack(i).then((function(){n&&n()}))})):L.a.replaceWithCanvasTrack(i).then((function(){n&&n()}))}),r)};"audience"!==t.gatewayClient.role||"live"!==t.mode||a?l(i,r,o):t.gatewayClient.setClientRole(F,(function(e){if(e)return o&&o(e);l(i,r,o)}))},t._unpublish=function(e,i,n,r){if(0!==t.highStreamState)return s.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),n&&n(_.default.STREAM_NOT_YET_PUBLISHED);s.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var o=function(e,i,n){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,n),t.gatewayClient.unpublish(e,{streamType:0},(function(){t.highStreamState=2,s.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),i&&i()}),(function(i){s.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),n&&n(i)}))};t.gatewayClient.role!==F||"live"!==t.mode||r?o(e,i,n):t.gatewayClient.setClientRole("audience",(function(t){if(t)return n&&n(t);o(e,i,n)}))},t.publish=function(i,n){var s=r.report.reportApiInvoke(e.sessionId,{callback:function(e,i){if(e)return 1===t.highStreamState&&(t.highStreamState=2),n&&n(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!n}});2===t.highStreamState?i._hasVideoTracks()||i._hasAudioTracks()?(t.gatewayClient.publishRequestId=Object(E.generateId)(),t._publish(i,(function(e){return s(null,e)}),(function(e){return s(e)}))):s(_.default.NO_TRACK_IN_STREAM):s(_.default.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(i,n,s){var o=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);s&&s(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!n}});0===t.highStreamState?(t.gatewayClient.publishRequestId=null,t._unpublish(i,(function(e){return o(null,e)}),(function(e){return o(e)}))):o(_.default.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(i,n,o){var l=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o&&o(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:n,onFailure:!!o}});"function"==typeof n&&(o=n,n=null),Object(R.checkValidObject)(i,"stream"),Object(R.isEmpty)(n)||(Object(R.checkValidObject)(n,"options"),Object(R.isEmpty)(n.video)||Object(R.checkValidBoolean)(n.video,"options.video"),Object(R.isEmpty)(n.audio)||Object(R.checkValidBoolean)(n.audio,"options.audio"));var c={video:!0,audio:!0};if(!Object(R.isEmpty)(n)){if(Object(a.isSafari)()&&(!n.video||!n.audio)){var h="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return s.default.error("[".concat(t.clientId,"] "),h),void l(h)}if(!Object(R.isEmpty)(n.video)&&!Object(R.isValidBoolean)(n.video)||!Object(R.isEmpty)(n.audio)&&!Object(R.isValidBoolean)(n.audio)||!1===n.audio&&!1===n.video)return h="INVALID_PARAMETER ".concat(JSON.stringify(n)),s.default.error("[".concat(t.clientId,"] "),h),void l(h)}i.subscribeOptions?(S()(i.subscribeOptions,c,n),t.gatewayClient.subscribeChange(i,(function(e){return l(null,e)}),l)):(t.gatewayClient.subscribeRequestId.set(i.getId(),Object(E.generateId)()),i.subscribeOptions=S()({},c,n),t.gatewayClient.subscribe(i,(function(e){return l(null,e)}),l))},t.unsubscribe=function(i,n){var o=r.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!n}});s.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(i.getId())),t.gatewayClient.subscribeRequestId.delete(i.getId()),t.gatewayClient.unsubscribe(i,(function(e){return o(null,e)}),o)},t.setRemoteVideoStreamType=function(i,n){var s=r.report.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:n}});Object(R.checkValidEnum)(n,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(i,n),s()},t.setStreamFallbackOption=function(i,n){var s=r.report.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:n}});Object(R.checkValidEnum)(n,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(i,n),s()},t.enableAudioVolumeIndicator=function(i,n){var o=r.report.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});i=i||2e3,n=n||3,Object(R.checkValidNumber)(n,"smooth",1,100),Object(R.checkValidNumber)(i,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=i,t.audioVolumeIndication.smooth=n,t.audioVolumeIndication={interval:i,smooth:n},s.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(i," smooth ").concat(n)),t.gatewayClient.enableAudioVolumeIndicator(i,n),o()},t.getNetworkStats=function(e,i){return s.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),P.getStats(e,i)},t.getSystemStats=function(e,t){return c.getStats(e,t)},t.getRecordingDevices=function(e,t){return d.a.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return d.a.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return d.a.getCameras(e,t)},t.getRemoteAudioStats=function(e,i){return t.rtcStatsCollector.getRemoteAudioStats(e,i)},t.getLocalAudioStats=function(e,i){return t.rtcStatsCollector.getLocalAudioStats(e,i)},t.getRemoteVideoStats=function(e,i){return t.rtcStatsCollector.getRemoteVideoStats(e,i)},t.getLocalVideoStats=function(e,i){return t.rtcStatsCollector.getLocalVideoStats(e,i)},t._getRemoteVideoQualityStats=function(e,i){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,i)},t._getRemoteAudioQualityStats=function(e,i){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,i)},t.getTransportStats=function(e,i){return t.rtcStatsCollector.getTransportStats((function(t){return P.getStats((function(i){var n=S()({},t,i);e&&e(n)}),i)}),i)},t.getSessionStats=function(e,i){return t.rtcStatsCollector.getSessionStats(e,i)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},t.sendMetadata=function(i,n){var s=r.report.reportApiInvoke(e.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(e){if(e)return n&&n(e);n&&n()}});t.gatewayClient.sendMetadata(i,s)},t.sendCustomReportMessage=function(i,o,a,l,c,h){Object(n.getParameter)("CR")?t.customReportCount>Object(n.getParameter)("CRL")?h&&h("REPORT_LIMITED"):(t.gatewayClient.hasJoined||(s.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),h&&h("REPORT_BEFORE_JOINED")),t.customReportTimer||(t.customReportTimer=setInterval((function(){t.customReportCount=0}),Object(n.getParameter)("CRI"))),Object(R.checkValidString)(i,"reportId",0,100,!1),Object(R.checkValidString)(o,"category",0,100,!1),Object(R.checkValidString)(a,"event",0,100,!1),Object(R.checkValidString)(l,"label",0,100,!1),Object(R.checkValidNumber)(c,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),t.customReportCount++,r.report.sendCustomReportMessage(e.sessionId,{reportId:i,category:o,event:a,label:l,value:c,lts:Date.now()},(function(e){e?h&&h("REPORT_FAILED"):h&&h()}))):h&&h("REPORT_FORBIDDEN")},e.clientId=t.clientId,t.gatewayClient=Object(C.a)(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,i){t.gatewayClient.on(e,i),t.listenerLoggerCache.push("".concat(e).concat(i.name?":"+i.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):s.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout((function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,s.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])}),0)},t.off=function(e,i){s.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,i)},t.rtcStatsCollector=function(e){var t=Object(o.b)();return t.gatewayClient=e,t.exceptionMonitor=new D(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var i=t.gatewayClient.traffic_stats,n={};for(var s in t.remoteStats){var r={},o=t.remoteStats[s];if(Object(x.b)(r,"End2EndDelay",o.peer_delay&&o.peer_delay.audio_delay),Object(x.b)(r,"TransportDelay",o.peer_delay&&o.peer_delay.e2e_delay),Object(x.b)(r,"PacketLossRate",o.peer_delay&&o.peer_delay.e2e_audio_lost_ratio_400ms),Object(x.b)(r,"RecvLevel",o.audioStats&&o.audioStats.audioOutputLevel),Object(x.b)(r,"RecvBitrate",o.audioRecvBitrate),Object(x.b)(r,"CodecType",o.audioStats&&o.audioStats.googCodecName),Object(x.b)(r,"MuteState",o.audioDisabled),Object(x.b)(r,"TotalFreezeTime",o.audioStats&&o.audioStats.audioTotalFreezeTime),Object(x.b)(r,"TotalPlayDuration",o.audioStats&&o.audioStats.audioTotalPlayDuration),i&&i.peer_delay){var a=i.peer_delay.find((function(e){return e.peer_uid==s}));if(a){var l=a.peer_publish_audio_duration+(Date.now()-i.timestamp);Object(x.b)(r,"AudioPublishDuration",l)}else Object(x.b)(r,"AudioPublishDuration",-1)}n[s]=r}e&&e(n)},t.getLocalAudioStats=function(e){var i={};for(var n in t.localStats){var s={},r=t.localStats[n];Object(x.b)(s,"RecordingLevel",r.audioStats&&r.audioStats.audioInputLevel),Object(x.b)(s,"SendLevel",r.audioStats&&r.audioStats.totalAudioEnergy),Object(x.b)(s,"SamplingRate",r.audioStats&&r.audioStats.totalSamplesDuration),Object(x.b)(s,"SendBitrate",r.audioSendBitrate),Object(x.b)(s,"CodecType",r.audioStats&&r.audioStats.googCodecName),Object(x.b)(s,"MuteState",r.audioDisabled),Object(x.b)(s,"audioSendPacketsLost",r.audioStats&&r.audioStats.packetsLost);var o=t.gatewayClient.localStreams[n];o&&o.isPlaying()&&Object(x.b)(s,"MuteState",o.userMuteAudio?"1":"0"),i[n]=s}e&&e(i)},t.getRemoteVideoStats=function(e){var i=t.gatewayClient.traffic_stats,n={};for(var s in t.remoteStats){var r={},o=t.remoteStats[s];if(Object(x.b)(r,"End2EndDelay",o.peer_delay&&o.peer_delay.video_delay),Object(x.b)(r,"TransportDelay",o.peer_delay&&o.peer_delay.e2e_delay),Object(x.b)(r,"PacketLossRate",o.peer_delay&&o.peer_delay.e2e_video_lost_ratio_400ms),Object(x.b)(r,"RecvBitrate",o.videoRecvBitrate),Object(x.b)(r,"RecvResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthReceived),Object(x.b)(r,"RecvResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightReceived),Object(x.b)(r,"RenderResolutionWidth",o.videoStats&&o.videoStats.renderRemoteWidth),Object(x.b)(r,"RenderResolutionHeight",o.videoStats&&o.videoStats.renderRemoteHeight),Object(x.b)(r,"RenderFrameRate",o.videoStats&&o.videoStats.googFrameRateOutput),Object(x.b)(r,"MuteState",o.videoDisabled),Object(x.b)(r,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),Object(x.b)(r,"TotalPlayDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),i&&i.peer_delay){var a=i.peer_delay.find((function(e){return e.peer_uid==s}));if(a){var l=a.peer_publish_video_duration+(Date.now()-i.timestamp);Object(x.b)(r,"VideoPublishDuration",l)}else Object(x.b)(r,"VideoPublishDuration",-1)}n[s]=r}e&&e(n)},t.getLocalVideoStats=function(e){var i={};for(var n in t.localStats){var s={},r=t.localStats[n];Object(x.b)(s,"TargetSendBitrate",r.videoTargetSendBitrate),Object(x.b)(s,"SendFrameRate",r.videoStats&&r.videoStats.googFrameRateSent),Object(x.b)(s,"SendBitrate",r.videoSendBitrate),Object(x.b)(s,"SendResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthSent),Object(x.b)(s,"SendResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightSent),Object(x.b)(s,"CaptureResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthInput),Object(x.b)(s,"CaptureResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightInput),Object(x.b)(s,"EncodeDelay",r.videoStats&&r.videoStats.googAvgEncodeMs),Object(x.b)(s,"MuteState",r.videoDisabled),Object(x.b)(s,"TotalFreezeTime",r.videoStats&&r.videoStats.videoTotalFreezeTime),Object(x.b)(s,"TotalDuration",r.videoStats&&r.videoStats.videoTotalPlayDuration),Object(x.b)(s,"CaptureFrameRate",r.videoStats&&r.videoStats.googFrameRateSent),Object(x.b)(s,"videoSendPacketsLost",r.videoStats&&r.videoStats.packetsLost),r.videoStats&&!r.videoStats.googFrameWidthInput&&Object(x.b)(s,"CaptureResolutionWidth",r.videoStats&&r.videoStats.renderLocalWidth),r.videoStats&&!r.videoStats.googFrameHeightInput&&Object(x.b)(s,"CaptureResolutionHeight",r.videoStats&&r.videoStats.renderLocalHeight),i[n]=s}e&&e(i)},t.getRemoteVideoQualityStats=function(e){var i={};for(var n in t.remoteStats){var s={},r=t.remoteStats[n];Object(x.b)(s,"videoReceiveDelay",r.videoStats&&r.videoStats.googCurrentDelayMs),Object(x.b)(s,"VideoFreezeRate",r.videoStats&&r.videoStats.videoFreezeRate),Object(x.b)(s,"FirstFrameTime",r.firstFrameTime),i[n]=s}e&&e(i)},t.getRemoteAudioQualityStats=function(e){var i={};for(var n in t.remoteStats){var s={},r=t.remoteStats[n];Object(x.b)(s,"audioReceiveDelay",r.audioStats&&r.audioStats.googCurrentDelayMs),Object(x.b)(s,"AudioFreezeRate",r.videoStats&&r.videoStats.videoFreezeRate),i[n]=s}e&&e(i)},t.getTransportStats=function(e){var i={},n={},s=t.gatewayClient.traffic_stats,r=s.peer_delay;if(Object(x.b)(i,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(x.b)(i,"RTT",s&&2*s.access_delay),r){var o,a=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}(r);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.downlink_estimate_bandwidth&&(n[l.peer_uid]=l.downlink_estimate_bandwidth/1e3+"")}}catch(e){a.e(e)}finally{a.f()}}i.IncomingAvailableBandwidth=n,e&&e(i)},t.getSessionStats=function(e){var i={},n=t.gatewayClient.traffic_stats,s=t.gatewayClient.socket,r=0,o=0;for(var a in t.remoteStats)(l=t.remoteStats[a])&&l.videoStats&&l.videoStats.videoRecvBytesDelta&&(o+=parseInt(l.videoStats.videoRecvBytesDelta)),l&&l.audioStats&&l.audioStats.audioRecvBytesDelta&&(o+=parseInt(l.audioStats.audioRecvBytesDelta));for(var a in t.localStats){var l;(l=t.localStats[a])&&l.videoStats&&l.videoStats.videoSendBytesDelta&&(r+=parseInt(l.videoStats.videoSendBytesDelta)),l&&l.audioStats&&l.audioStats.audioSendBytesDelta&&(r+=parseInt(l.audioStats.audioSendBytesDelta))}var c=r+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,h=o+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,d=t.session.sendBytes+Object(k.getHTTPSendBytes)(),u=t.session.recvBytes+Object(k.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(d+=s.getSendBytes(),u+=s.getRecvBytes());var p=1;n.peer_delay&&(p=n.peer_delay.length,p+=1),Object(x.b)(i,"Duration",s.getDuration()),Object(x.b)(i,"UserCount",p),Object(x.b)(i,"SendBytes",d),Object(x.b)(i,"RecvBytes",u),Object(x.b)(i,"SendBitrate",8*c/1e3),Object(x.b)(i,"RecvBitrate",8*h/1e3),e&&e(i)},t.isLocalVideoFreeze=function(e,t){var i=0,n=0;if(!e||!t)return!1;if(Object(a.isChrome)()||Object(a.isOpera)())i=e.googFrameRateInput,n=e.googFrameRateSent;else if(Object(a.isSafari)())i=parseInt(e.framerateMean),n=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(a.isFireFox)())return!1;i=parseInt(e.framerateMean),n=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return i>5&&n<3},t.isRemoteVideoFreeze=function(e,t){var i=0,n=0;if(!e||!t)return!1;if(Object(a.isChrome)()||Object(a.isOpera)())i=e.googFrameRateReceived,n=e.googFrameRateDecoded;else if(Object(a.isSafari)())i=e.framerateMean,n=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(a.isFireFox)())return!1;i=parseInt(e.framesReceived)-parseInt(t.framesReceived),n=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return i>5&&i<10&&n<3||i>10&&i<20&&n<4||i>20&&n<5},t.isAudioFreeze=function(e){if(Object(a.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(a.isSafari)()||Object(a.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(a.isChrome)()||Object(a.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval((function(){if(t.gatewayClient.state!==C.a.CONNECTED)t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0});else{var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}}),2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval((function(){var e=t.gatewayClient.traffic_stats,i=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var n={};Object.keys(t.gatewayClient.remoteStreams).forEach((function(s){var r=t.gatewayClient.remoteStreams[s],o=t.remoteStats[s],a={id:s,updatedAt:i};n[s]=a,a.firstFrameTime=r.firstFrameTime,o?(a.audioTotalPlayDuration=o.audioTotalPlayDuration+1,a.audioTotalFreezeTime=o.audioTotalFreezeTime,a.isAudioFreeze=!1,a.isAudioDecodeFailed=!1,a.videoTotalPlayDuration=o.videoTotalPlayDuration+1,a.videoTotalFreezeTime=o.videoTotalFreezeTime,a.isVideoFreeze=!1):(a.audioTotalPlayDuration=1,a.audioTotalFreezeTime=0,a.videoTotalPlayDuration=1,a.videoTotalFreezeTime=0);var l=e&&e.peer_delay&&e.peer_delay.find((function(e){return e.peer_uid==s}));l&&(a.peer_delay=l),r&&(r.isPlaying()&&(a.audioDisabled=r.userMuteAudio||r.peerMuteAudio?"1":"0",a.videoDisabled=r.userMuteVideo||r.peerMuteVideo?"1":"0"),o&&o.peer_delay&&l&&o.peer_delay.stream_type!==l.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:s,streamType:l.stream_type}),r.pc&&"established"==r.pc.state&&r.pc.getStats((function(e){if(a.pcStats=e,a.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),a.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),o&&o.audioStats&&a.audioStats){var i=parseInt(a.audioStats.bytesReceived)-parseInt(o.audioStats.bytesReceived),n=parseInt(a.audioStats.googDecodingNormal)-parseInt(o.audioStats.googDecodingNormal);if(a.audioStats.audioRecvBytesDelta=i,a.audioStats.audioDecodingNormalDelta=n,t.session.recvBytes+=i,isFinite(i)&&a.audioStats.timestamp){var s=a.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();a.audioRecvBitrate=Math.floor(8*i/s)}t.isAudioFreeze(a.audioStats)&&a.audioTotalPlayDuration>10&&(a.audioTotalFreezeTime++,a.isAudioFreeze=!0),t.isAudioDecodeFailed(a.audioStats)&&a.audioTotalPlayDuration>10&&(a.isAudioDecodeFailed=!0),a.audioStats.audioTotalFreezeTime=a.audioTotalFreezeTime,a.audioStats.audioTotalPlayDuration=a.audioTotalPlayDuration,a.audioStats.audioFreezeRate=Math.ceil(100*a.audioTotalFreezeTime/a.audioTotalPlayDuration)}if(o&&o.videoStats&&a.videoStats){var l=parseInt(a.videoStats.bytesReceived)-parseInt(o.videoStats.bytesReceived);a.videoStats.videoRecvBytesDelta=l,t.session.recvBytes+=l,isFinite(l)&&a.videoStats.timestamp&&(s=a.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),a.videoRecvBitrate=Math.floor(8*l/s)),t.isRemoteVideoFreeze(a.videoStats,o.videoStats)&&(a.videoTotalFreezeTime++,a.isVideoFreeze=!0),a.videoStats.videoTotalFreezeTime=a.videoTotalFreezeTime,a.videoStats.videoTotalPlayDuration=a.videoTotalPlayDuration,a.videoStats.videoFreezeRate=Math.ceil(100*a.videoTotalFreezeTime/a.videoTotalPlayDuration),r.player&&r.player.video&&r.player.video.videoWidth&&r.player.video.videoHeight?(a.videoStats.renderRemoteWidth=r.player.video.videoWidth,a.videoStats.renderRemoteHeight=r.player.video.videoHeight):(a.videoStats.renderRemoteWidth=r.videoWidth||a.videoStats.googFrameWidthReceived,a.videoStats.renderRemoteHeight=r.videoHeight||a.videoStats.googFrameHeightReceived)}})))})),t.remoteStats=n;var s={};if(Object.keys(t.gatewayClient.localStreams).forEach((function(e){var n=t.gatewayClient.localStreams[e],r=t.localStats[e],o={id:e,updatedAt:i};s[e]=o,r?(o.videoTotalPlayDuration=r.videoTotalPlayDuration+1,o.videoTotalFreezeTime=r.videoTotalFreezeTime,o.isVideoFreeze=!1):(o.videoTotalPlayDuration=1,o.videoTotalFreezeTime=0),n&&(n.isPlaying()&&(o.audioDisabled=n.userMuteAudio?"1":"0",o.videoDisabled=n.userMuteVideo?"1":"0"),n.video&&n.attributes.maxVideoBW?o.videoTargetSendBitrate=n.attributes.maxVideoBW:n.video&&n.screenAttributes&&(o.videoTargetSendBitrate=n.screenAttributes.maxVideoBW),n.pc&&"established"==n.pc.state&&n.pc.getStats((function(e){if(o.pcStats=e.reverse(),o.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),o.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),o.audioStats&&r&&r.audioStats){var i=parseInt(o.audioStats.bytesSent)-parseInt(r.audioStats.bytesSent);if(o.audioStats.audioSendBytesDelta=i,t.session.sendBytes+=i,isFinite(i)&&o.audioStats.timestamp){var s=o.audioStats.timestamp.getTime()-r.audioStats.timestamp.getTime();o.audioSendBitrate=Math.floor(8*i/s)}}if(o.videoStats&&r&&r.videoStats){var a=parseInt(o.videoStats.bytesSent)-parseInt(r.videoStats.bytesSent);o.videoStats.videoSendBytesDelta=a,t.session.sendBytes+=a,isFinite(a)&&o.videoStats.timestamp&&(s=o.videoStats.timestamp.getTime()-r.videoStats.timestamp.getTime(),o.videoSendBitrate=Math.floor(8*a/s)),t.isLocalVideoFreeze(o.videoStats,r.videoStats)&&(o.videoTotalFreezeTime++,o.isVideoFreeze=!0),o.videoStats.videoTotalFreezeTime=o.videoTotalFreezeTime,o.videoStats.videoTotalPlayDuration=o.videoTotalPlayDuration,o.videoStats.videoFreezeRate=Math.ceil(100*o.videoTotalFreezeTime/o.videoTotalPlayDuration),o.videoStats.renderLocalWidth=n.videoWidth||o.videoStats.googFrameWidthSent,o.videoStats.renderLocalHeight=n.videoHeight||o.videoStats.googFrameHeightSent}})))})),t.localStats=s,t.session.HTTPSendBytesDelta=Object(k.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(k.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(k.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(k.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var r=t.gatewayClient.socket;t.session.WSSendBytesDelta=r.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=r.getSendBytes(),t.session.WSRecvBytesDelta=r.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=r.getRecvBytes()}}),1e3),t.gatewayClient.on("join",(function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}})),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",(function(i){var o=i.joinInfo,a=i.config;if(a){Object(R.isEmpty)(a.uploadLog)||(Object(n.setParameter)("UPLOAD_LOG",a.uploadLog),r.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:a.uploadLog}})()),Object(R.isEmpty)(a.dualStream)||(e.isDualStream=a.dualStream,r.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"dualStream",value:a.dualStream}})()),Object(R.isEmpty)(a.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",(function(e){var i=e.stream;i?(t.client.gatewayClient.setStreamFallbackOption(i,a.streamFallbackOption),r.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:i.getId()}})()):r.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:i.getId(),err:"invalid stream"}})()}));try{s.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(a))),Object.keys(a).map((function(e){return Object(n.setParameter)(e,a[e])}))}catch(t){s.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(a)))}}})),t}(t),Object(M.addLiveStreamingCapability)(t,e),e.areaCode){var i=Object(B.getAreaDomainConfig)(e.areaCode);Object.keys(i).map((function(e){"LOG_UPLOAD_SERVER"==e||"EVENT_REPORT_DOMAIN"==e||"EVENT_REPORT_BACKUP_DOMAIN"==e?Object(n.setParameter)(e,i[e][0]):Object(n.setParameter)(e,i[e])}))}return Object(R.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(R.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role=F),t.gatewayClient.on("onMultiIP",(function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=C.a.CONNECTING;var i=function(e){s.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,(function(e){s.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var i=t.onSuccess;t.onSuccess=null,t.onFailure=null,i(e)}),t.onFailure):(t.gatewayClient.joinInfo=S()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(T.getUserAccount)(joinInfo,t.gatewayClient),t.userAccountReq.then((function(e){s.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,Object(T.getGatewayList)(t.joinInfo,i,t.onFailure)})).catch((function(e){s.default.error("getUserAccount rejected",e),t.onFailure(e)}))):Object(T.getGatewayList)(t.joinInfo,i,t.onFailure)})),t.gatewayClient.on("rejoin-start",(function(){t._renewSession(),r.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("recover",(function(){t._renewSession(),console.log("recover",e.sessionId),r.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("rejoin",(function(){var e=t.highStreamState;if(s.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var i=t.onSuccess;t.onSuccess=null,t.onFailure=null,i(t.joinInfo.uid)}!t.highStream||0!==e&&1!==e||(s.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,(function(e){e&&s.default.info("[".concat(t.clientId,"] "),e)})))})),t.gatewayClient.on("streamPublished",(function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent(Object(o.e)({type:"stream-published",stream:e.stream})))})),t.gatewayClient.on("pubP2PLost",(function(e){s.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,(function(){t._publish(t.highStream,(function(){s.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})}),(function(e){s.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)}),(function(e){s.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)})),t.gatewayClient.on("subP2PLost",(function(e){s.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var i=e.stream.subscribeOptions;console.log("Re-subscribe stream",i,e.stream),t.gatewayClient.unsubscribe(e.stream,(function(){e.stream.subscribeOptions=i,t.gatewayClient.subscribe(e.stream,(function(){s.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!0,reason:""})}),(function(i){s.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),i),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:i})}))}),(function(i){s.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),i),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:i})}))})),P.on("networkTypeChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=S()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(i)})),d.a.on("recordingDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=S()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(i)})),d.a.on("playoutDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=S()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(i)})),d.a.on("cameraChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=S()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(i)})),t.gatewayClient.on("streamTypeChange",(function(i){var n=S()({},i,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(n),r.report.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(i))})),t},H=function(e){switch(e){case"h264_interop":return"h264";default:return"vp8"}},U=function(e){return-1===m.indexOf(e.mode)?_.default.INVALID_CLIENT_MODE:-1===g.indexOf(e.codec)?_.default.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&_.default.CLIENT_MODE_CODEC_MISMATCH},q=function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}},W=d.a.getDevices,z=u.a.getScreenSources,G=JSON.parse(JSON.stringify(n.SUPPORT_RESOLUTION_LIST));t.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(e){var t=r.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=S()({},e||{})).codec||(e.codec=H(e.mode));var i=U(e);if(i)throw s.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(i)),t(i),new Error(i);return s.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),q(e),t(null,e),j(e)},createStream:h.b,Logger:s.default,report:r.report,getDevices:W,getScreenSources:z,getParameter:n.getParameter,setParameter:n.setParameter,checkSystemRequirements:function(){var e=r.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,i=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket,o=!!t&&!!i&&!!n,l=!1;a.isChrome()&&a.getBrowserVersion()>=58&&"iOS"!==a.getBrowserOS()&&(l=!0),a.isFireFox()&&a.getBrowserVersion()>=56&&(l=!0),a.isOpera()&&a.getBrowserVersion()>=45&&(l=!0),a.isSafari()&&a.getBrowserVersion()>=11&&(l=!0),a.isEdge()&&(l=!0),(a.isWeChatBrowser()||a.isQQBrowser())&&"iOS"!==a.getBrowserOS()&&(l=!0),a.isSupportedPC()||a.isSupportedMobile()||(l=!1),s.default.debug(a.getBrowserInfo(),"isAPISupport: "+o+", isVendorAndVersionSupport: "+l);var c=o&&l;return e(null,c),c},getSupportedCodec:p.getSupportedCodec,ChannelMediaRelayConfiguration:f.ChannelMediaRelayConfiguration,VERSION:n.VERSION,BUILD:n.BUILD,PROFILE_TABLE:G,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:B.AREAS,AREA_VERSION:"global"}}]).default},module.exports=t()},aUWK:function(e,t,i){"use strict";e.exports=[i("OX/4"),i("Ph6G"),i("sYUk"),i("e03l"),i("JuP+")(i("e03l")),i("QLKV"),i("JuP+")(i("QLKV")),i("4rNY"),i("5Vaj"),i("JuP+")(i("4rNY")),i("+Ewk")]},c6pU:function(e,t,i){"use strict";var n=i("P7XM"),s=i("2Naf");function r(e,t,i){s.call(this,e,t,i,{noCredentials:!0})}n(r,s),r.enabled=s.enabled,e.exports=r},dNE1:function(e,t,i){var n=i("SMEb"),s=i("hCs2");e.exports=n.Stomp,e.exports.overTCP=s.overTCP,e.exports.overWS=s.overWS},dXd4:function(e,t,i){"use strict";var n=i("P7XM"),s=i("Yh+D"),r=i("96lO");function o(e,t,i,n){r.call(this,e,t,function(e){return function(t,i,n){var r={};"string"==typeof i&&(r.headers={"Content-type":"text/plain"});var o=s.addPath(t,"/xhr_send"),a=new e("POST",o,i,r);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return n(new Error("http status "+e));n()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,n(e)}}}(n),i,n)}n(o,r),e.exports=o},dyV1:function(t,i,n){"use strict";var s,r=Array.prototype,o=Object.prototype,a=Function.prototype,l=String.prototype,c=r.slice,h=o.toString,d=function(e){return"[object Function]"===o.toString.call(e)},u=function(e){return"[object String]"===h.call(e)},p=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();s=p?function(e,t,i,n){!n&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(e,t,i,n){!n&&t in e||(e[t]=i)};var f=function(e,t,i){for(var n in t)o.hasOwnProperty.call(t,n)&&s(e,n,t[n],i)},m=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function g(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function v(){}f(a,{bind:function(e){var t=this;if(!d(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var i=c.call(arguments,1),n=function(){if(this instanceof a){var n=t.apply(this,i.concat(c.call(arguments)));return Object(n)===n?n:this}return t.apply(e,i.concat(c.call(arguments)))},s=Math.max(0,t.length-i.length),r=[],o=0;o<s;o++)r.push("$"+o);var a=Function("binder","return function ("+r.join(",")+"){ return binder.apply(this, arguments); }")(n);return t.prototype&&(v.prototype=t.prototype,a.prototype=new v,v.prototype=null),a}}),f(Array,{isArray:function(e){return"[object Array]"===h.call(e)}});var y,b,w,S=Object("a"),C="a"!==S[0]||!(0 in S);f(r,{forEach:function(e){var t=m(this),i=C&&u(this)?this.split(""):t,n=arguments[1],s=-1,r=i.length>>>0;if(!d(e))throw new TypeError;for(;++s<r;)s in i&&e.call(n,i[s],s,t)}},(b=!0,w=!0,(y=r.forEach)&&(y.call("foo",(function(e,t,i){"object"!=typeof i&&(b=!1)})),y.call([1],(function(){w="string"==typeof this}),"x")),!(y&&b&&w)));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);f(r,{indexOf:function(e){var t=C&&u(this)?this.split(""):m(this),i=t.length>>>0;if(!i)return-1;var n=0;for(arguments.length>1&&(n=g(arguments[1])),n=n>=0?n:Math.max(0,i+n);n<i;n++)if(n in t&&t[n]===e)return n;return-1}},_);var E,T=l.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(E=void 0===/()??/.exec("")[1],l.split=function(e,t){var i=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==h.call(e))return T.call(this,e,t);var n,s,o,a,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,c+"g"),i+="",E||(n=new RegExp("^"+e.source+"$(?!\\s)",c)),t=void 0===t?-1>>>0:t>>>0;(s=e.exec(i))&&!((o=s.index+s[0].length)>d&&(l.push(i.slice(d,s.index)),!E&&s.length>1&&s[0].replace(n,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)})),s.length>1&&s.index<i.length&&r.push.apply(l,s.slice(1)),a=s[0].length,d=o,l.length>=t));)e.lastIndex===s.index&&e.lastIndex++;return d===i.length?!a&&e.test("")||l.push(""):l.push(i.slice(d)),l.length>t?l.slice(0,t):l}):"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:T.call(this,e,t)});var x=l.substr;f(l,{substr:function(e,t){return x.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},e03l:function(e,t,i){"use strict";var n=i("P7XM"),s=i("dXd4"),r=i("+R4f"),o=i("3wkl"),a=i("yjSe");function l(e){if(!l.enabled())throw new Error("Transport created when disabled");s.call(this,e,"/eventsource",r,o)}n(l,s),l.enabled=function(){return!!a},l.transportName="eventsource",l.roundTrips=2,e.exports=l},evrj:function(e,t,i){var n=i("m4GZ");e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(n(e).replace(/(.)/g,(function(e,t){var i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(i){return n(t)}}},fCBv:function(t,i,n){"use strict";var s=n("raCH").EventEmitter,r=n("P7XM"),o=n("kwwM"),a=n("woL0"),l=n("nzop"),c=n("xSnx");function h(t,i){var n=this;s.call(this);var r=function(){var s=n.ifr=new l(c.transportName,i,t);s.once("message",(function(t){if(t){var i;try{i=o.parse(t)}catch(e){return n.emit("finish"),void n.close()}n.emit("finish",i[0],i[1])}n.close()})),s.once("close",(function(){n.emit("finish"),n.close()}))};global.document.body?r():a.attachEvent("load",r)}r(h,s),h.enabled=function(){return l.enabled()},h.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=h},fjyx:function(e,t,i){var n;try{n=i("Z4fQ")}catch(a){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var s=n.WebSocket||n.MozWebSocket,r=i("EWj0");function o(e,t){return t?new s(e,t):new s(e)}s&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return s[e]}})})),e.exports={w3cwebsocket:s?o:null,version:r}},hCs2:function(e,t,i){(function(){var e,n,s,r,o;e=i("SMEb"),n=i("RUQ2"),e.Stomp.setInterval=function(e,t){return setInterval(t,e)},e.Stomp.clearInterval=function(e){return clearInterval(e)},r=function(e,t){var i,s;return i=null,s={url:"tcp:// "+t+":"+e,send:function(e){return i.write(e)},close:function(){return i.end()}},(i=n.connect(e,t,(function(e){return s.onopen()}))).on("error",(function(e){return"function"==typeof s.onclose?s.onclose(e):void 0})),i.on("close",(function(e){return"function"==typeof s.onclose?s.onclose(e):void 0})),i.on("data",(function(e){var t;return t={data:e.toString()},s.onmessage(t)})),s},o=function(e){var t,n,s,r;return t=i("fjyx").client,n=null,r={url:e,send:function(e){return n.sendUTF(e)},close:function(){return n.close()}},(s=new t).on("connect",(function(e){return n=e,r.onopen(),n.on("error",(function(e){return"function"==typeof r.onclose?r.onclose(e):void 0})),n.on("close",(function(){return"function"==typeof r.onclose?r.onclose():void 0})),n.on("message",(function(e){if("utf8"===e.type)return r.onmessage({data:e.utf8Data})}))})),s.connect(e),r},s=function(t){var i;return i=o(t),e.Stomp.over(i)},t.overTCP=function(t,i){var n;return n=r(i,t),e.Stomp.over(n)},t.overWS=s}).call(this)},hPxs:function(e,t,i){"use strict";var n,s=i("kwwM"),r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=s.stringify(e);return r.lastIndex=0,r.test(t)?(n||(n=function(e){var t,i={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,(function(e){return i[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,i}(r)),t.replace(r,(function(e){return n[e]}))):t}}},ibx3:function(t,i,n){"use strict";var s=n("raCH").EventEmitter,r=n("P7XM"),o=n("kwwM"),a=n("1eVo");function l(t,i){s.call(this);var n=this,r=+new Date;this.xo=new i("GET",t),this.xo.once("finish",(function(t,i){var s,l;if(200===t){if(l=+new Date-r,i)try{s=o.parse(i)}catch(e){}a.isObject(s)||(s={})}n.emit("finish",s,l),n.removeAllListeners()}))}r(l,s),l.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=l},kwwM:function(e,t,i){(function(e){var n;(function(){var s=i("PDX0"),r={function:!0,object:!0},o=r[typeof t]&&t&&!t.nodeType&&t,a=r[typeof window]&&window||this,l=o&&r[typeof e]&&e&&!e.nodeType&&"object"==typeof global&&global;function c(e,t){e||(e=a.Object()),t||(t=a.Object());var i=e.Number||a.Number,n=e.String||a.String,s=e.Object||a.Object,o=e.Date||a.Date,l=e.SyntaxError||a.SyntaxError,h=e.TypeError||a.TypeError,d=e.Math||a.Math,u=e.JSON||a.JSON;"object"==typeof u&&u&&(t.stringify=u.stringify,t.parse=u.parse);var p=s.prototype,f=p.toString,m=p.hasOwnProperty;function g(e,t){try{e()}catch(i){t&&t()}}var v=new o(-0xc782b5b800cec);function y(e){if(null!=y[e])return y[e];var s;if("bug-string-char-index"==e)s="a"!="a"[0];else if("json"==e)s=y("json-stringify")&&y("date-serialization")&&y("json-parse");else if("date-serialization"==e){if(s=y("json-stringify")&&v){var r=t.stringify;g((function(){s='"-271821-04-20T00:00:00.000Z"'==r(new o(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new o(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new o(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new o(-1))}))}}else{var a,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c="function"==typeof(r=t.stringify);c&&((a=function(){return 1}).toJSON=a,g((function(){c="0"===r(0)&&"0"===r(new i)&&'""'==r(new n)&&void 0===r(f)&&void 0===r(void 0)&&void 0===r()&&"1"===r(a)&&"[1]"==r([a])&&"[null]"==r([void 0])&&"null"==r(null)&&"[null,null,null]"==r([void 0,f,null])&&r({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===r(null,a)&&"[\n 1,\n 2\n]"==r([1,2],null,1)}),(function(){c=!1}))),s=c}if("json-parse"==e){var h,d=t.parse;"function"==typeof d&&g((function(){0!==d("0")||d(!1)||(a=d(l),(h=5==a.a.length&&1===a.a[0])&&(g((function(){h=!d('"\t"')})),h&&g((function(){h=1!==d("01")})),h&&g((function(){h=1!==d("1.")}))))}),(function(){h=!1})),s=h}}return y[e]=!!s}if(g((function(){v=-109252==v.getUTCFullYear()&&0===v.getUTCMonth()&&1===v.getUTCDate()&&10==v.getUTCHours()&&37==v.getUTCMinutes()&&6==v.getUTCSeconds()&&708==v.getUTCMilliseconds()})),y["bug-string-char-index"]=y["date-serialization"]=y.json=y["json-stringify"]=y["json-parse"]=null,!y("json")){var b=y("bug-string-char-index"),w=function(e,t){var i,n,s,o=0;for(s in(i=function(){this.valueOf=0}).prototype.valueOf=0,n=new i)m.call(n,s)&&o++;return i=n=null,o?w=function(e,t){var i,n,s="[object Function]"==f.call(e);for(i in e)s&&"prototype"==i||!m.call(e,i)||(n="constructor"===i)||t(i);(n||m.call(e,i="constructor"))&&t(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],w=function(e,t){var i,s,o="[object Function]"==f.call(e),a=!o&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||m;for(i in e)o&&"prototype"==i||!a.call(e,i)||t(i);for(s=n.length;i=n[--s];)a.call(e,i)&&t(i)}),w(e,t)};if(!y("json-stringify")&&!y("date-serialization")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(e,t){return("000000"+(t||0)).slice(-e)},_=function(e){var t,i,n,s,r,o,a,l,c;if(v)t=function(e){i=e.getUTCFullYear(),n=e.getUTCMonth(),s=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),l=e.getUTCSeconds(),c=e.getUTCMilliseconds()};else{var h=d.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return u[t]+365*(e-1970)+h((e-1969+(t=+(t>1)))/4)-h((e-1901+t)/100)+h((e-1601+t)/400)};t=function(e){for(s=h(e/864e5),i=h(s/365.2425)+1970-1;p(i+1,0)<=s;i++);for(n=h((s-p(i,0))/30.42);p(i,n+1)<=s;n++);s=1+s-p(i,n),o=h((r=(e%864e5+864e5)%864e5)/36e5)%24,a=h(r/6e4)%60,l=h(r/1e3)%60,c=r%1e3}}return(_=function(e){return e>-1/0&&e<1/0?(t(e),e=(i<=0||i>=1e4?(i<0?"-":"+")+C(6,i<0?-i:i):C(4,i))+"-"+C(2,n+1)+"-"+C(2,s)+"T"+C(2,o)+":"+C(2,a)+":"+C(2,l)+"."+C(3,c)+"Z",i=n=s=o=a=l=c=null):e=null,e})(e)};if(y("json-stringify")&&!y("date-serialization")){function E(e){return _(this)}var T=t.stringify;t.stringify=function(e,t,i){var n=o.prototype.toJSON;o.prototype.toJSON=E;var s=T(e,t,i);return o.prototype.toJSON=n,s}}else{var x=function(e){var t=e.charCodeAt(0);return S[t]||"\\u00"+C(2,t.toString(16))},k=/[\x00-\x1f\x22\x5c]/g,A=function(e){return k.lastIndex=0,'"'+(k.test(e)?e.replace(k,x):e)+'"'},O=function(e,t,i,n,s,r,a){var l,c,d,u,p,m,v,y,b;if(g((function(){l=t[e]})),"object"==typeof l&&l&&(l.getUTCFullYear&&"[object Date]"==f.call(l)&&l.toJSON===o.prototype.toJSON?l=_(l):"function"==typeof l.toJSON&&(l=l.toJSON(e))),i&&(l=i.call(t,e,l)),null==l)return void 0===l?l:"null";switch("object"==(c=typeof l)&&(d=f.call(l)),d||c){case"boolean":case"[object Boolean]":return""+l;case"number":case"[object Number]":return l>-1/0&&l<1/0?""+l:"null";case"string":case"[object String]":return A(""+l)}if("object"==typeof l){for(v=a.length;v--;)if(a[v]===l)throw h();if(a.push(l),u=[],y=r,r+=s,"[object Array]"==d){for(m=0,v=l.length;m<v;m++)p=O(m,l,i,n,s,r,a),u.push(void 0===p?"null":p);b=u.length?s?"[\n"+r+u.join(",\n"+r)+"\n"+y+"]":"["+u.join(",")+"]":"[]"}else w(n||l,(function(e){var t=O(e,l,i,n,s,r,a);void 0!==t&&u.push(A(e)+":"+(s?" ":"")+t)})),b=u.length?s?"{\n"+r+u.join(",\n"+r)+"\n"+y+"}":"{"+u.join(",")+"}":"{}";return a.pop(),b}};t.stringify=function(e,t,i){var n,s,o,a;if(r[typeof t]&&t)if("[object Function]"==(a=f.call(t)))s=t;else if("[object Array]"==a){o={};for(var l,c=0,h=t.length;c<h;)l=t[c++],"[object String]"!=(a=f.call(l))&&"[object Number]"!=a||(o[l]=1)}if(i)if("[object Number]"==(a=f.call(i))){if((i-=i%1)>0)for(i>10&&(i=10),n="";n.length<i;)n+=" "}else"[object String]"==a&&(n=i.length<=10?i:i.slice(0,10));return O("",((l={})[""]=e,l),s,o,n,"",[])}}}if(!y("json-parse")){var D,I,R=n.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw D=I=null,l()},L=function(){for(var e,t,i,n,s,r=I,o=r.length;D<o;)switch(s=r.charCodeAt(D)){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?r.charAt(D):r[D],D++,e;case 34:for(e="@",D++;D<o;)if((s=r.charCodeAt(D))<32)M();else if(92==s)switch(s=r.charCodeAt(++D)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[s],D++;break;case 117:for(t=++D,i=D+4;D<i;D++)(s=r.charCodeAt(D))>=48&&s<=57||s>=97&&s<=102||s>=65&&s<=70||M();e+=R("0x"+r.slice(t,D));break;default:M()}else{if(34==s)break;for(s=r.charCodeAt(D),t=D;s>=32&&92!=s&&34!=s;)s=r.charCodeAt(++D);e+=r.slice(t,D)}if(34==r.charCodeAt(D))return D++,e;M();default:if(t=D,45==s&&(n=!0,s=r.charCodeAt(++D)),s>=48&&s<=57){for(48==s&&(s=r.charCodeAt(D+1))>=48&&s<=57&&M(),n=!1;D<o&&(s=r.charCodeAt(D))>=48&&s<=57;D++);if(46==r.charCodeAt(D)){for(i=++D;i<o&&!((s=r.charCodeAt(i))<48||s>57);i++);i==D&&M(),D=i}if(101==(s=r.charCodeAt(D))||69==s){for(43!=(s=r.charCodeAt(++D))&&45!=s||D++,i=D;i<o&&!((s=r.charCodeAt(i))<48||s>57);i++);i==D&&M(),D=i}return+r.slice(t,D)}n&&M();var a=r.slice(D,D+4);if("true"==a)return D+=4,!0;if("fals"==a&&101==r.charCodeAt(D+4))return D+=5,!1;if("null"==a)return D+=4,null;M()}return"$"},N=function(e){var t,i;if("$"==e&&M(),"string"==typeof e){if("@"==(b?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=L());)i?","==e?"]"==(e=L())&&M():M():i=!0,","==e&&M(),t.push(N(e));return t}if("{"==e){for(t={};"}"!=(e=L());)i?","==e?"}"==(e=L())&&M():M():i=!0,","!=e&&"string"==typeof e&&"@"==(b?e.charAt(0):e[0])&&":"==L()||M(),t[e.slice(1)]=N(L());return t}M()}return e},V=function(e,t,i){var n=B(e,t,i);void 0===n?delete e[t]:e[t]=n},B=function(e,t,i){var n,s=e[t];if("object"==typeof s&&s)if("[object Array]"==f.call(s))for(n=s.length;n--;)V(f,w,s);else w(s,(function(e){V(s,e,i)}));return i.call(e,t,s)};t.parse=function(e,t){var i,n;return D=0,I=""+e,i=N(L()),"$"!=L()&&M(),D=I=null,t&&"[object Function]"==f.call(t)?B(((n={})[""]=i,n),"",t):i}}}return t.runInContext=c,t}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(a=l),o&&!s)c(a,o);else{var h=a.JSON,d=a.JSON3,u=!1,p=c(a,a.JSON3={noConflict:function(){return u||(u=!0,a.JSON=h,a.JSON3=d,h=d=null),p}});a.JSON={parse:p.parse,stringify:p.stringify}}s&&(void 0===(n=(function(){return p}).call(t,i,t,e))||(e.exports=n))}).call(this)}).call(this,i("YuTi")(e))},l6Lj:function(e,t,i){"use strict";function n(){this._listeners={}}n.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===i.indexOf(t)&&(i=i.concat([t])),this._listeners[e]=i},n.prototype.removeEventListener=function(e,t){var i=this._listeners[e];if(i){var n=i.indexOf(t);-1===n||(i.length>1?this._listeners[e]=i.slice(0,n).concat(i.slice(n+1)):delete this._listeners[e])}},n.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,i=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,i),t in this._listeners)for(var n=this._listeners[t],s=0;s<n.length;s++)n[s].apply(this,i)},e.exports=n},m4GZ:function(e,t){function i(e){this.message=e}(i.prototype=new Error).name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,s,r=0,o=0,a="";s=t.charAt(o++);~s&&(n=r%4?64*n+s:s,r++%4)?a+=String.fromCharCode(255&n>>(-2*r&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return a}},moM4:function(e,t,i){"use strict";function n(e){this.type=e}n.prototype.initEvent=function(e,t,i){return this.type=e,this.bubbles=t,this.cancelable=i,this.timeStamp=+new Date,this},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,e.exports=n},mrSG:function(t,i,n){"use strict";n.r(i),n.d(i,"__extends",(function(){return r})),n.d(i,"__assign",(function(){return o})),n.d(i,"__rest",(function(){return a})),n.d(i,"__decorate",(function(){return l})),n.d(i,"__param",(function(){return c})),n.d(i,"__metadata",(function(){return h})),n.d(i,"__awaiter",(function(){return d})),n.d(i,"__generator",(function(){return u})),n.d(i,"__createBinding",(function(){return p})),n.d(i,"__exportStar",(function(){return f})),n.d(i,"__values",(function(){return m})),n.d(i,"__read",(function(){return g})),n.d(i,"__spread",(function(){return v})),n.d(i,"__spreadArrays",(function(){return y})),n.d(i,"__await",(function(){return b})),n.d(i,"__asyncGenerator",(function(){return w})),n.d(i,"__asyncDelegator",(function(){return S})),n.d(i,"__asyncValues",(function(){return C})),n.d(i,"__makeTemplateObject",(function(){return _})),n.d(i,"__importStar",(function(){return E})),n.d(i,"__importDefault",(function(){return T})),n.d(i,"__classPrivateFieldGet",(function(){return x})),n.d(i,"__classPrivateFieldSet",(function(){return k}));var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function r(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function a(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i}function l(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}function c(e,t){return function(i,n){t(i,n,e)}}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(t,i,n,s){return new(n||(n=Promise))((function(r,o){function a(t){try{c(s.next(t))}catch(e){o(e)}}function l(t){try{c(s.throw(t))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}c((s=s.apply(t,i||[])).next())}))}function u(t,i){var n,s,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&o[0]?s.return:o[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,o[1])).done)return r;switch(s=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=i.call(t,a)}catch(e){o=[6,e],s=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function p(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}function f(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||(t[i]=e[i])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,r=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return o}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)n[s]=r[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(t,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(t,i||[]),o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(e){r[e]&&(s[e]=function(t){return new Promise((function(i,n){o.push([e,t,i,n])>1||l(e,t)}))})}function l(t,i){try{(n=r[t](i)).value instanceof b?Promise.resolve(n.value.v).then(c,h):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function c(e){l("next",e)}function h(e){l("throw",e)}function d(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}function S(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(i=!i)?{value:b(e[n](t)),done:"return"===n}:s?s(t):t}:s}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=m(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){!function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}(n,s,(t=e[i](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function k(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},n6ct:function(e,t,i){"use strict";var n=i("Yh+D"),s=i("woL0"),r=i("kwwM"),o=i("uzES"),a=i("xSnx"),l=i("8fj+"),c=i("oOIF");e.exports=function(e,t){var i,h={};t.forEach((function(e){e.facadeTransport&&(h[e.facadeTransport.transportName]=e.facadeTransport)})),h[a.transportName]=a,e.bootstrap_iframe=function(){var t;l.currentWindowId=c.hash.slice(1),s.attachEvent("message",(function(s){if(s.source===parent&&(void 0===i&&(i=s.origin),s.origin===i)){var a;try{a=r.parse(s.data)}catch(g){return}if(a.windowId===l.currentWindowId)switch(a.type){case"s":var d;try{d=r.parse(a.data)}catch(g){break}var u=d[0],p=d[1],f=d[2],m=d[3];if(u!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+e.version+'".');if(!n.isOriginEqual(f,c.href)||!n.isOriginEqual(m,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+f+", "+m+")");t=new o(new h[p](f,m));break;case"m":t._send(a.data);break;case"c":t&&t._close(),t=null}}})),l.postMessage("s")}}},nFlj:function(t,i,n){"use strict";var s=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function o(t){try{return encodeURIComponent(t)}catch(e){return null}}i.stringify=function(e,t){t=t||"";var i,n,r=[];for(n in"string"!=typeof t&&(t="?"),e)if(s.call(e,n)){if((i=e[n])||null!=i&&!isNaN(i)||(i=""),n=o(n),i=o(i),null===n||null===i)continue;r.push(n+"="+i)}return r.length?t+r.join("&"):""},i.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,n={};t=i.exec(e);){var s=r(t[1]),o=r(t[2]);null===s||null===o||s in n||(n[s]=o)}return n}},nX0T:function(e,t,i){"use strict";var n=i("raCH").EventEmitter,s=i("P7XM"),r=i("woL0"),o=i("JqAl"),a=i("Yh+D");function l(e,t,i){var s=this;n.call(this),setTimeout((function(){s._start(e,t,i)}),0)}s(l,n),l.prototype._start=function(e,t,i){var n=this,s=new global.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),s.onerror=function(){n._error()},s.ontimeout=function(){n._error()},s.onprogress=function(){n.emit("chunk",200,s.responseText)},s.onload=function(){n.emit("finish",200,s.responseText),n._cleanup(!1)},this.xdr=s,this.unloadRef=r.unloadAdd((function(){n._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(i)}catch(o){this._error()}},l.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},l.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},l.prototype.close=function(){this._cleanup(!0)},l.enabled=!(!global.XDomainRequest||!o.hasDomain()),e.exports=l},nzop:function(e,t,i){"use strict";var n=i("P7XM"),s=i("kwwM"),r=i("raCH").EventEmitter,o=i("EBWB"),a=i("Yh+D"),l=i("8fj+"),c=i("woL0"),h=i("JYLm");function d(e,t,i){if(!d.enabled())throw new Error("Transport created when disabled");r.call(this);var n=this;this.origin=a.getOrigin(i),this.baseUrl=i,this.transUrl=t,this.transport=e,this.windowId=h.string(8);var s=a.addPath(i,"/iframe.html")+"#"+this.windowId;this.iframeObj=l.createIframe(s,(function(e){n.emit("close",1006,"Unable to load an iframe ("+e+")"),n.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}n(d,r),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(a.isOriginEqual(e.origin,this.origin)){var t;try{t=s.parse(e.data)}catch(n){return}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",s.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var i;try{i=s.parse(t.data)}catch(n){return}this.emit("close",i[0],i[1]),this.close()}}},d.prototype.postMessage=function(e,t){this.iframeObj.post(s.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){this.postMessage("m",e)},d.enabled=function(){return l.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},oOIF:function(e,t,i){"use strict";e.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},"q/0M":function(e,t,i){"use strict";function n(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)n[s]=r[o];return n}var s;i.r(t),i.d(t,"LogLevel",(function(){return o})),i.d(t,"Logger",(function(){return d})),i.d(t,"setLogLevel",(function(){return u})),i.d(t,"setUserLogHandler",(function(){return p}));var r=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},l=o.INFO,c=((s={})[o.DEBUG]="log",s[o.VERBOSE]="log",s[o.INFO]="info",s[o.WARN]="warn",s[o.ERROR]="error",s),h=function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(!(t<e.logLevel)){var r=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,n(["["+r+"]  "+e.name+":"],i))}},d=function(){function e(e){this.name=e,this._logLevel=l,this._logHandler=h,this._userLogHandler=null,r.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.DEBUG],e)),this._logHandler.apply(this,n([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.VERBOSE],e)),this._logHandler.apply(this,n([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.INFO],e)),this._logHandler.apply(this,n([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.WARN],e)),this._logHandler.apply(this,n([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.ERROR],e)),this._logHandler.apply(this,n([this,o.ERROR],e))},e}();function u(e){r.forEach((function(t){t.setLogLevel(e)}))}function p(e,t){for(var i=function(i){var n=null;t&&t.level&&(n=a[t.level]),i.userLogHandler=null===e?null:function(t,i){for(var s=[],r=2;r<arguments.length;r++)s[r-2]=arguments[r];var a=s.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");i>=(null!=n?n:t.logLevel)&&e({level:o[i].toLowerCase(),message:a,args:s,type:t.name})}},n=0,s=r;n<s.length;n++)i(s[n])}},raCH:function(e,t,i){"use strict";var n=i("P7XM"),s=i("l6Lj");function r(){s.call(this)}n(r,s),r.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},r.prototype.once=function(e,t){var i=this,n=!1;this.on(e,(function s(){i.removeListener(e,s),n||(n=!0,t.apply(this,arguments))}))},r.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var i=arguments.length,n=new Array(i-1),s=1;s<i;s++)n[s-1]=arguments[s];for(var r=0;r<t.length;r++)t[r].apply(this,n)}},r.prototype.on=r.prototype.addListener=s.prototype.addEventListener,r.prototype.removeListener=s.prototype.removeEventListener,e.exports.EventEmitter=r},sYUk:function(e,t,i){"use strict";var n=i("P7XM"),s=i("dXd4"),r=i("FUii"),o=i("nX0T");function a(e){if(!o.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/xhr_streaming",r,o)}n(a,s),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&o.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},uajq:function(e,t,i){"use strict";var n=i("raCH").EventEmitter,s=i("P7XM"),r=i("Yh+D"),o=i("nX0T"),a=i("3wkl"),l=i("c6pU"),c=i("9wH6"),h=i("fCBv"),d=i("ibx3");function u(e,t){var i=this;n.call(this),setTimeout((function(){i.doXhr(e,t)}),0)}s(u,n),u._getReceiver=function(e,t,i){return i.sameOrigin?new d(t,l):a.enabled?new d(t,a):o.enabled&&i.sameScheme?new d(t,o):h.enabled()?new h(e,t):new d(t,c)},u.prototype.doXhr=function(e,t){var i=this,n=r.addPath(e,"/info");this.xo=u._getReceiver(e,n,t),this.timeoutRef=setTimeout((function(){i._cleanup(!1),i.emit("finish")}),u.timeout),this.xo.once("finish",(function(e,t){i._cleanup(!0),i.emit("finish",e,t)}))},u.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},u.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},u.timeout=8e3,e.exports=u},ugx8:function(e){e.exports=JSON.parse('{"_args":[["websocket@1.0.32","C:\\\\Users\\\\drnic\\\\Desktop\\\\fellow Genius\\\\fellowGenius\\\\fellowGenius\\\\fellowGenius-angular"]],"_from":"websocket@1.0.32","_id":"websocket@1.0.32","_inBundle":false,"_integrity":"sha512-i4yhcllSP4wrpoPMU2N0TQ/q0O94LRG/eUQjEAamRltjQ1oT1PFFKOG4i877OlJgCG8rw6LrrowJp+TYCEWF7Q==","_location":"/websocket","_optional":true,"_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"websocket@1.0.32","name":"websocket","escapedName":"websocket","rawSpec":"1.0.32","saveSpec":null,"fetchSpec":"1.0.32"},"_requiredBy":["/stompjs"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.32.tgz","_spec":"1.0.32","_where":"C:\\\\Users\\\\drnic\\\\Desktop\\\\fellow Genius\\\\fellowGenius\\\\fellowGenius\\\\fellowGenius-angular","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"config":{"verbose":false},"contributors":[{"name":"I\xf1aki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=4.0.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","test":"tape test/unit/*.js"},"version":"1.0.32"}')},urRO:function(e,t,i){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l="undefined"!=typeof window&&void 0!==window.document,c=l?window:{},h=!(!l||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,d=!!l&&"PointerEvent"in c,u="".concat("cropper","-crop"),p="".concat("cropper","-disabled"),f="".concat("cropper","-hidden"),m="".concat("cropper","-hide"),g="".concat("cropper","-invisible"),v="".concat("cropper","-modal"),y="".concat("cropper","-move"),b="".concat("cropper","Action"),w="".concat("cropper","Preview"),S=d?"pointerdown":h?"touchstart":"mousedown",C=d?"pointermove":h?"touchmove":"mousemove",_=d?"pointerup pointercancel":h?"touchend touchcancel":"mouseup",E=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,T=/^data:/,x=/^data:image\/jpeg;base64,/,k=/^img|canvas$/i,A={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},O=Number.isNaN||c.isNaN;function D(e){return"number"==typeof e&&!O(e)}var I=function(e){return e>0&&e<1/0};function R(e){return void 0===e}function P(t){return"object"===e(t)&&null!==t}var M=Object.prototype.hasOwnProperty;function L(e){if(!P(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&M.call(i,"isPrototypeOf")}catch(n){return!1}}function N(e){return"function"==typeof e}var V=Array.prototype.slice;function B(e){return Array.from?Array.from(e):V.call(e)}function F(e,t){return e&&N(t)&&(Array.isArray(e)||D(e.length)?B(e).forEach((function(i,n){t.call(e,i,n,e)})):P(e)&&Object.keys(e).forEach((function(i){t.call(e,e[i],i,e)}))),e}var j=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return P(e)&&i.length>0&&i.forEach((function(t){P(t)&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},H=/\.\d*(?:0|9){12}\d*$/;function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return H.test(e)?Math.round(e*t)/t:e}var q=/^width|height|left|top|marginLeft|marginTop$/;function W(e,t){var i=e.style;F(t,(function(e,t){q.test(t)&&D(e)&&(e="".concat(e,"px")),i[t]=e}))}function z(e,t){if(t)if(D(e.length))F(e,(function(e){z(e,t)}));else if(e.classList)e.classList.add(t);else{var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function G(e,t){t&&(D(e.length)?F(e,(function(e){G(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Y(e,t,i){t&&(D(e.length)?F(e,(function(e){Y(e,t,i)})):i?z(e,t):G(e,t))}var $=/([a-z\d])([A-Z])/g;function K(e){return e.replace($,"$1-$2").toLowerCase()}function X(e,t){return P(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(K(t)))}function J(e,t,i){P(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(K(t)),i)}var Q=/\s\s*/,Z=function(){var e=!1;if(l){var t=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});c.addEventListener("test",i,n),c.removeEventListener("test",i,n)}return e}();function ee(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=i;t.trim().split(Q).forEach((function(t){if(!Z){var r=e.listeners;r&&r[t]&&r[t][i]&&(s=r[t][i],delete r[t][i],0===Object.keys(r[t]).length&&delete r[t],0===Object.keys(r).length&&delete e.listeners)}e.removeEventListener(t,s,n)}))}function te(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=i;t.trim().split(Q).forEach((function(t){if(n.once&&!Z){var r=e.listeners,o=void 0===r?{}:r;s=function(){delete o[t][i],e.removeEventListener(t,s,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];i.apply(e,a)},o[t]||(o[t]={}),o[t][i]&&e.removeEventListener(t,o[t][i],n),o[t][i]=s,e.listeners=o}e.addEventListener(t,s,n)}))}function ie(e,t,i){var n;return N(Event)&&N(CustomEvent)?n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(n)}function ne(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var se=c.location,re=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function oe(e){var t=e.match(re);return null!==t&&(t[1]!==se.protocol||t[2]!==se.hostname||t[3]!==se.port)}function ae(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function le(e){var t=e.rotate,i=e.scaleX,n=e.scaleY,s=e.translateX,r=e.translateY,o=[];D(s)&&0!==s&&o.push("translateX(".concat(s,"px)")),D(r)&&0!==r&&o.push("translateY(".concat(r,"px)")),D(t)&&0!==t&&o.push("rotate(".concat(t,"deg)")),D(i)&&1!==i&&o.push("scaleX(".concat(i,")")),D(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var a=o.length?o.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function ce(e,t){var i=e.pageX,n=e.pageY,s={endX:i,endY:n};return t?s:r({startX:i,startY:n},s)}function he(e){var t=e.aspectRatio,i=e.height,n=e.width,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=I(n),o=I(i);if(r&&o){var a=i*t;"contain"===s&&a>n||"cover"===s&&a<n?i=n/t:n=i*t}else r?i=n/t:o&&(n=i*t);return{width:n,height:i}}function de(e,t,i,n){var s=t.aspectRatio,r=t.naturalWidth,a=t.naturalHeight,l=t.rotate,c=void 0===l?0:l,h=t.scaleX,d=void 0===h?1:h,u=t.scaleY,p=void 0===u?1:u,f=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,v=n.fillColor,y=void 0===v?"transparent":v,b=n.imageSmoothingEnabled,w=void 0===b||b,S=n.imageSmoothingQuality,C=void 0===S?"low":S,_=n.maxWidth,E=void 0===_?1/0:_,T=n.maxHeight,x=void 0===T?1/0:T,k=n.minWidth,A=void 0===k?0:k,O=n.minHeight,D=void 0===O?0:O,I=document.createElement("canvas"),R=I.getContext("2d"),P=he({aspectRatio:f,width:E,height:x}),M=he({aspectRatio:f,width:A,height:D},"cover"),L=Math.min(P.width,Math.max(M.width,m)),N=Math.min(P.height,Math.max(M.height,g)),V=he({aspectRatio:s,width:E,height:x}),B=he({aspectRatio:s,width:A,height:D},"cover"),F=Math.min(V.width,Math.max(B.width,r)),j=Math.min(V.height,Math.max(B.height,a)),H=[-F/2,-j/2,F,j];return I.width=U(L),I.height=U(N),R.fillStyle=y,R.fillRect(0,0,L,N),R.save(),R.translate(L/2,N/2),R.rotate(c*Math.PI/180),R.scale(d,p),R.imageSmoothingEnabled=w,R.imageSmoothingQuality=C,R.drawImage.apply(R,[e].concat(o(H.map((function(e){return Math.floor(U(e))}))))),R.restore(),I}var ue=String.fromCharCode,pe=/^data:.*,/,fe={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,n=this.cropper,s=Number(t.minContainerWidth),r=Number(t.minContainerHeight);z(n,f),G(e,f);var o={width:Math.max(i.offsetWidth,s>=0?s:200),height:Math.max(i.offsetHeight,r>=0?r:100)};this.containerData=o,W(n,{width:o.width,height:o.height}),z(e,f),G(n,f)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,n=Math.abs(t.rotate)%180==90,s=n?t.naturalHeight:t.naturalWidth,r=n?t.naturalWidth:t.naturalHeight,o=s/r,a=e.width,l=e.height;e.height*o>e.width?3===i?a=e.height*o:l=e.width/o:3===i?l=e.width/o:a=e.height*o;var c={aspectRatio:o,naturalWidth:s,naturalHeight:r,width:a,height:l};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(e.width-c.width)/2,c.top=(e.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=j({},c)},limitCanvas:function(e,t){var i=this.options,n=this.containerData,s=this.canvasData,r=this.cropBoxData,o=i.viewMode,a=s.aspectRatio,l=this.cropped&&r;if(e){var c=Number(i.minCanvasWidth)||0,h=Number(i.minCanvasHeight)||0;o>1?(c=Math.max(c,n.width),h=Math.max(h,n.height),3===o&&(h*a>c?c=h*a:h=c/a)):o>0&&(c?c=Math.max(c,l?r.width:0):h?h=Math.max(h,l?r.height:0):l&&((h=r.height)*a>(c=r.width)?c=h*a:h=c/a));var d=he({aspectRatio:a,width:c,height:h});h=d.height,s.minWidth=c=d.width,s.minHeight=h,s.maxWidth=1/0,s.maxHeight=1/0}if(t)if(o>(l?0:1)){var u=n.width-s.width,p=n.height-s.height;s.minLeft=Math.min(0,u),s.minTop=Math.min(0,p),s.maxLeft=Math.max(0,u),s.maxTop=Math.max(0,p),l&&this.limited&&(s.minLeft=Math.min(r.left,r.left+(r.width-s.width)),s.minTop=Math.min(r.top,r.top+(r.height-s.height)),s.maxLeft=r.left,s.maxTop=r.top,2===o&&(s.width>=n.width&&(s.minLeft=Math.min(0,u),s.maxLeft=Math.max(0,u)),s.height>=n.height&&(s.minTop=Math.min(0,p),s.maxTop=Math.max(0,p))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=n.width,s.maxTop=n.height},renderCanvas:function(e,t){var i=this.canvasData,n=this.imageData;if(t){var s=function(e){var t=e.width,i=e.height,n=e.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:t};var s=n%90*Math.PI/180,r=Math.sin(s),o=Math.cos(s),a=t*o+i*r,l=t*r+i*o;return n>90?{width:l,height:a}:{width:a,height:l}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=s.width,o=s.height,a=i.width*(r/i.naturalWidth),l=i.height*(o/i.naturalHeight);i.left-=(a-i.width)/2,i.top-=(l-i.height)/2,i.width=a,i.height=l,i.aspectRatio=r/o,i.naturalWidth=r,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,W(this.canvas,j({width:i.width,height:i.height},le({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,n=i.naturalWidth*(t.width/t.naturalWidth),s=i.naturalHeight*(t.height/t.naturalHeight);j(i,{width:n,height:s,left:(t.width-n)/2,top:(t.height-s)/2}),W(this.image,j({width:i.width,height:i.height},le(j({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,s={width:t.width,height:t.height};i&&(t.height*i>t.width?s.height=s.width/i:s.width=s.height*i),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*n),s.height=Math.max(s.minHeight,s.height*n),s.left=t.left+(t.width-s.width)/2,s.top=t.top+(t.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=j({},s)},limitCropBox:function(e,t){var i=this.options,n=this.containerData,s=this.canvasData,r=this.cropBoxData,o=this.limited,a=i.aspectRatio;if(e){var l=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,h=o?Math.min(n.width,s.width,s.width+s.left,n.width-s.left):n.width,d=o?Math.min(n.height,s.height,s.height+s.top,n.height-s.top):n.height;l=Math.min(l,n.width),c=Math.min(c,n.height),a&&(l&&c?c*a>l?c=l/a:l=c*a:l?c=l/a:c&&(l=c*a),d*a>h?d=h/a:h=d*a),r.minWidth=Math.min(l,h),r.minHeight=Math.min(c,d),r.maxWidth=h,r.maxHeight=d}t&&(o?(r.minLeft=Math.max(0,s.left),r.minTop=Math.max(0,s.top),r.maxLeft=Math.min(n.width,s.left+s.width)-r.width,r.maxTop=Math.min(n.height,s.top+s.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&J(this.face,b,i.width>=t.width&&i.height>=t.height?"move":"all"),W(this.cropBox,j({width:i.width,height:i.height},le({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ie(this.element,"crop",this.getData())}},me={initPreview:function(){var e=this.element,t=this.crossOrigin,i=this.options.preview,n=t?this.crossOriginUrl:this.url,s=e.alt||"The image to preview",r=document.createElement("img");if(t&&(r.crossOrigin=t),r.src=n,r.alt=s,this.viewBox.appendChild(r),this.viewBoxImage=r,i){var o=i;"string"==typeof i?o=e.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,F(o,(function(e){var i=document.createElement("img");J(e,w,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(i.crossOrigin=t),i.src=n,i.alt=s,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(i)}))}},resetPreview:function(){F(this.previews,(function(e){var t=X(e,w);W(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(e,t){if(P(e[t]))try{delete e[t]}catch(i){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(i){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(K(t)))}(e,w)}))},preview:function(){var e=this.imageData,t=this.canvasData,i=this.cropBoxData,n=i.width,s=i.height,r=e.width,o=e.height,a=i.left-t.left-e.left,l=i.top-t.top-e.top;this.cropped&&!this.disabled&&(W(this.viewBoxImage,j({width:r,height:o},le(j({translateX:-a,translateY:-l},e)))),F(this.previews,(function(t){var i=X(t,w),c=i.width,h=i.height,d=c,u=h,p=1;n&&(u=s*(p=c/n)),s&&u>h&&(d=n*(p=h/s),u=h),W(t,{width:d,height:u}),W(t.getElementsByTagName("img")[0],j({width:r*p,height:o*p},le(j({translateX:-a*p,translateY:-l*p},e))))})))}},ge={bind:function(){var e=this.element,t=this.options,i=this.cropper;N(t.cropstart)&&te(e,"cropstart",t.cropstart),N(t.cropmove)&&te(e,"cropmove",t.cropmove),N(t.cropend)&&te(e,"cropend",t.cropend),N(t.crop)&&te(e,"crop",t.crop),N(t.zoom)&&te(e,"zoom",t.zoom),te(i,S,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&te(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&te(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),te(e.ownerDocument,C,this.onCropMove=this.cropMove.bind(this)),te(e.ownerDocument,_,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&te(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;N(t.cropstart)&&ee(e,"cropstart",t.cropstart),N(t.cropmove)&&ee(e,"cropmove",t.cropmove),N(t.cropend)&&ee(e,"cropend",t.cropend),N(t.crop)&&ee(e,"crop",t.crop),N(t.zoom)&&ee(e,"zoom",t.zoom),ee(i,S,this.onCropStart),t.zoomable&&t.zoomOnWheel&&ee(i,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ee(i,"dblclick",this.onDblclick),ee(e.ownerDocument,C,this.onCropMove),ee(e.ownerDocument,_,this.onCropEnd),t.responsive&&ee(window,"resize",this.onResize)}},ve={resize:function(){if(!this.disabled){var e,t,i=this.options,n=this.container,s=this.containerData,r=n.offsetWidth/s.width;1===r&&n.offsetHeight===s.height||(i.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(F(e,(function(t,i){e[i]=t*r}))),this.setCropBoxData(F(t,(function(e,i){t[i]=e*r})))))}},dblclick:function(){var e,t;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=u,((e=this.dragBox).classList?e.classList.contains(t):e.className.indexOf(t)>-1)?"move":"crop"))},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(D(t)&&1!==t||D(i)&&0!==i||e.ctrlKey))){var n,s=this.options,r=this.pointers;e.changedTouches?F(e.changedTouches,(function(e){r[e.identifier]=ce(e)})):r[e.pointerId||0]=ce(e),n=Object.keys(r).length>1&&s.zoomable&&s.zoomOnTouch?"zoom":X(e.target,b),E.test(n)&&!1!==ie(this.element,"cropstart",{originalEvent:e,action:n})&&(e.preventDefault(),this.action=n,this.cropping=!1,"crop"===n&&(this.cropping=!0,z(this.dragBox,v)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var i=this.pointers;e.preventDefault(),!1!==ie(this.element,"cropmove",{originalEvent:e,action:t})&&(e.changedTouches?F(e.changedTouches,(function(e){j(i[e.identifier]||{},ce(e,!0))})):j(i[e.pointerId||0]||{},ce(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?F(e.changedTouches,(function(e){delete i[e.identifier]})):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Y(this.dragBox,v,this.cropped&&this.options.modal)),ie(this.element,"cropend",{originalEvent:e,action:t}))}}},ye={change:function(e){var t,i=this.canvasData,n=this.containerData,s=this.cropBoxData,o=this.pointers,a=this.action,l=this.options.aspectRatio,c=s.left,h=s.top,d=s.width,u=s.height,p=c+d,m=h+u,g=0,v=0,y=n.width,b=n.height,w=!0;!l&&e.shiftKey&&(l=d&&u?d/u:1),this.limited&&(v=s.minTop,y=(g=s.minLeft)+Math.min(n.width,i.width,i.left+i.width),b=v+Math.min(n.height,i.height,i.top+i.height));var S=o[Object.keys(o)[0]],C={x:S.endX-S.startX,y:S.endY-S.startY},_=function(e){switch(e){case"e":p+C.x>y&&(C.x=y-p);break;case"w":c+C.x<g&&(C.x=g-c);break;case"n":h+C.y<v&&(C.y=v-h);break;case"s":m+C.y>b&&(C.y=b-m)}};switch(a){case"all":c+=C.x,h+=C.y;break;case"e":if(C.x>=0&&(p>=y||l&&(h<=v||m>=b))){w=!1;break}_("e"),(d+=C.x)<0&&(a="w",c-=d=-d),l&&(h+=(s.height-(u=d/l))/2);break;case"n":if(C.y<=0&&(h<=v||l&&(c<=g||p>=y))){w=!1;break}_("n"),h+=C.y,(u-=C.y)<0&&(a="s",h-=u=-u),l&&(c+=(s.width-(d=u*l))/2);break;case"w":if(C.x<=0&&(c<=g||l&&(h<=v||m>=b))){w=!1;break}_("w"),c+=C.x,(d-=C.x)<0&&(a="e",c-=d=-d),l&&(h+=(s.height-(u=d/l))/2);break;case"s":if(C.y>=0&&(m>=b||l&&(c<=g||p>=y))){w=!1;break}_("s"),(u+=C.y)<0&&(a="n",h-=u=-u),l&&(c+=(s.width-(d=u*l))/2);break;case"ne":if(l){if(C.y<=0&&(h<=v||p>=y)){w=!1;break}_("n"),h+=C.y,d=(u-=C.y)*l}else _("n"),_("e"),C.x>=0?p<y?d+=C.x:C.y<=0&&h<=v&&(w=!1):d+=C.x,C.y<=0?h>v&&(u-=C.y,h+=C.y):(u-=C.y,h+=C.y);d<0&&u<0?(a="sw",h-=u=-u,c-=d=-d):d<0?(a="nw",c-=d=-d):u<0&&(a="se",h-=u=-u);break;case"nw":if(l){if(C.y<=0&&(h<=v||c<=g)){w=!1;break}_("n"),h+=C.y,c+=s.width-(d=(u-=C.y)*l)}else _("n"),_("w"),C.x<=0?c>g?(d-=C.x,c+=C.x):C.y<=0&&h<=v&&(w=!1):(d-=C.x,c+=C.x),C.y<=0?h>v&&(u-=C.y,h+=C.y):(u-=C.y,h+=C.y);d<0&&u<0?(a="se",h-=u=-u,c-=d=-d):d<0?(a="ne",c-=d=-d):u<0&&(a="sw",h-=u=-u);break;case"sw":if(l){if(C.x<=0&&(c<=g||m>=b)){w=!1;break}_("w"),c+=C.x,u=(d-=C.x)/l}else _("s"),_("w"),C.x<=0?c>g?(d-=C.x,c+=C.x):C.y>=0&&m>=b&&(w=!1):(d-=C.x,c+=C.x),C.y>=0?m<b&&(u+=C.y):u+=C.y;d<0&&u<0?(a="ne",h-=u=-u,c-=d=-d):d<0?(a="se",c-=d=-d):u<0&&(a="nw",h-=u=-u);break;case"se":if(l){if(C.x>=0&&(p>=y||m>=b)){w=!1;break}_("e"),u=(d+=C.x)/l}else _("s"),_("e"),C.x>=0?p<y?d+=C.x:C.y>=0&&m>=b&&(w=!1):d+=C.x,C.y>=0?m<b&&(u+=C.y):u+=C.y;d<0&&u<0?(a="nw",h-=u=-u,c-=d=-d):d<0?(a="sw",c-=d=-d):u<0&&(a="ne",h-=u=-u);break;case"move":this.move(C.x,C.y),w=!1;break;case"zoom":this.zoom(function(e){var t=r({},e),i=0;return F(e,(function(e,n){delete t[n],F(t,(function(t){var n=Math.abs(e.startX-t.startX),s=Math.abs(e.startY-t.startY),r=Math.abs(e.endX-t.endX),o=Math.abs(e.endY-t.endY),a=Math.sqrt(n*n+s*s),l=(Math.sqrt(r*r+o*o)-a)/a;Math.abs(l)>Math.abs(i)&&(i=l)}))})),i}(o),e),w=!1;break;case"crop":if(!C.x||!C.y){w=!1;break}t=ne(this.cropper),c=S.startX-t.left,h=S.startY-t.top,d=s.minWidth,u=s.minHeight,C.x>0?a=C.y>0?"se":"ne":C.x<0&&(c-=d,a=C.y>0?"sw":"nw"),C.y<0&&(h-=u),this.cropped||(G(this.cropBox,f),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(s.width=d,s.height=u,s.left=c,s.top=h,this.action=a,this.renderCropBox()),F(o,(function(e){e.startX=e.endX,e.startY=e.endY}))}},be={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&z(this.dragBox,v),G(this.cropBox,f),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),G(this.dragBox,v),z(this.cropBox,f)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,F(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,G(this.cropper,p)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,z(this.cropper,p)),this},destroy:function(){var e=this.element;return e.cropper?(e.cropper=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,n=i.left,s=i.top;return this.moveTo(R(e)?e:n+Number(e),R(t)?t:s+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(D(e)&&(i.left=e,n=!0),D(t)&&(i.top=t,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=Number(e),this.zoomTo(i.width*(e=e<0?1/(1-e):1+e)/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var n=this.options,s=this.canvasData,r=s.width,o=s.height,a=s.naturalWidth,l=s.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&n.zoomable){var c=a*e,h=l*e;if(!1===ie(this.element,"zoom",{ratio:e,oldRatio:r/a,originalEvent:i}))return this;if(i){var d=this.pointers,u=ne(this.cropper),p=d&&Object.keys(d).length?function(e){var t=0,i=0,n=0;return F(e,(function(e){t+=e.startX,i+=e.startY,n+=1})),{pageX:t/=n,pageY:i/=n}}(d):{pageX:i.pageX,pageY:i.pageY};s.left-=(p.pageX-u.left-s.left)/r*(c-r),s.top-=(p.pageY-u.top-s.top)/o*(h-o)}else L(t)&&D(t.x)&&D(t.y)?(s.left-=(t.x-s.left)/r*(c-r),s.top-=(t.y-s.top)/o*(h-o)):(s.left-=(c-r)/2,s.top-=(h-o)/2);s.width=c,s.height=h,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return D(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,D(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(D(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.imageData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(D(e)&&(i.scaleX=e,n=!0),D(t)&&(i.scaleY=t,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,s=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){var o=n.width/n.naturalWidth;if(F(e={x:r.left-s.left,y:r.top-s.top,width:r.width,height:r.height},(function(t,i){e[i]=t/o})),t){var a=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=a-e.y}}else e={x:0,y:0,width:0,height:0};return i.rotatable&&(e.rotate=n.rotate||0),i.scalable&&(e.scaleX=n.scaleX||1,e.scaleY=n.scaleY||1),e},setData:function(e){var t=this.options,i=this.imageData,n=this.canvasData,s={};if(this.ready&&!this.disabled&&L(e)){var r=!1;t.rotatable&&D(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,r=!0),t.scalable&&(D(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,r=!0),D(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;D(e.x)&&(s.left=e.x*o+n.left),D(e.y)&&(s.top=e.y*o+n.top),D(e.width)&&(s.width=e.width*o),D(e.height)&&(s.height=e.height*o),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&F(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){t[i]=e[i]})),t},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&L(e)&&(D(e.left)&&(t.left=e.left),D(e.top)&&(t.top=e.top),D(e.width)?(t.width=e.width,t.height=e.width/i):D(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,i,n=this.cropBoxData,s=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&L(e)&&(D(e.left)&&(n.left=e.left),D(e.top)&&(n.top=e.top),D(e.width)&&e.width!==n.width&&(t=!0,n.width=e.width),D(e.height)&&e.height!==n.height&&(i=!0,n.height=e.height),s&&(t?n.height=n.width/s:i&&(n.width=n.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=de(this.image,this.imageData,t,e);if(!this.cropped)return i;var n=this.getData(),s=n.x,r=n.y,a=n.width,l=n.height,c=i.width/Math.floor(t.naturalWidth);1!==c&&(s*=c,r*=c,a*=c,l*=c);var h=a/l,d=he({aspectRatio:h,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),u=he({aspectRatio:h,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=he({aspectRatio:h,width:e.width||(1!==c?i.width:a),height:e.height||(1!==c?i.height:l)}),f=p.width,m=p.height;f=Math.min(d.width,Math.max(u.width,f)),m=Math.min(d.height,Math.max(u.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=U(f),g.height=U(m),v.fillStyle=e.fillColor||"transparent",v.fillRect(0,0,f,m);var y=e.imageSmoothingEnabled,b=void 0===y||y,w=e.imageSmoothingQuality;v.imageSmoothingEnabled=b,w&&(v.imageSmoothingQuality=w);var S,C,_,E,T,x,k=i.width,A=i.height,O=s,D=r;O<=-a||O>k?(O=0,S=0,_=0,T=0):O<=0?(_=-O,O=0,T=S=Math.min(k,a+O)):O<=k&&(_=0,T=S=Math.min(a,k-O)),S<=0||D<=-l||D>A?(D=0,C=0,E=0,x=0):D<=0?(E=-D,D=0,x=C=Math.min(A,l+D)):D<=A&&(E=0,x=C=Math.min(l,A-D));var I=[O,D,S,C];if(T>0&&x>0){var R=f/a;I.push(_*R,E*R,T*R,x*R)}return v.drawImage.apply(v,[i].concat(o(I.map((function(e){return Math.floor(U(e))}))))),g},setAspectRatio:function(e){var t=this.options;return this.disabled||R(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var s="crop"===e,r=t.movable&&"move"===e;t.dragMode=e=s||r?e:"none",J(i,b,e),Y(i,u,s),Y(i,y,r),t.cropBoxMovable||(J(n,b,e),Y(n,u,s),Y(n,y,r))}return this}},we=c.Cropper,Se=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,e),!i||!k.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=j({},A,L(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var n,s,r;return n=e,r=[{key:"noConflict",value:function(){return window.Cropper=we,e}},{key:"setDefaults",value:function(e){j(A,L(e)&&e)}}],(s=[{key:"init",value:function(){var e,t=this.element,i=t.tagName.toLowerCase();if(!t.cropper){if(t.cropper=this,"img"===i){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(T.test(e))x.test(e)?this.read((s=e.replace(pe,""),r=atob(s),o=new ArrayBuffer(r.length),F(a=new Uint8Array(o),(function(e,t){a[t]=r.charCodeAt(t)})),o)):this.clone();else{var s,r,o,a,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){"image/jpeg"!==l.getResponseHeader("content-type")&&l.abort()},l.onload=function(){t.read(l.response)},l.onloadend=function(){t.reloading=!1,t.xhr=null},n.checkCrossOrigin&&oe(e)&&i.crossOrigin&&(e=ae(e)),l.open("GET",e),l.responseType="arraybuffer",l.withCredentials="use-credentials"===i.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,i=this.imageData,n=function(e){var t,i=new DataView(e);try{var n,s,r;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,a=2;a+1<o;){if(255===i.getUint8(a)&&225===i.getUint8(a+1)){s=a;break}a+=1}if(s){var l=s+10;if("Exif"===function(e,t,i){var n="";i+=t;for(var s=t;s<i;s+=1)n+=ue(e.getUint8(s));return n}(i,s+4,4)){var c=i.getUint16(l);if(((n=18761===c)||19789===c)&&42===i.getUint16(l+2,n)){var h=i.getUint32(l+4,n);h>=8&&(r=l+h)}}}if(r){var d,u,p=i.getUint16(r,n);for(u=0;u<p;u+=1)if(274===i.getUint16(d=r+12*u+2,n)){t=i.getUint16(d+=8,n),i.setUint16(d,1,n);break}}}catch(f){t=1}return t}(e),s=0,r=1,o=1;if(n>1){this.url=function(e,t){for(var i=[],n=new Uint8Array(e);n.length>0;)i.push(ue.apply(null,B(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(i.join("")))}(e);var a=function(e){var t=0,i=1,n=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:n}}(n);s=a.rotate,r=a.scaleX,o=a.scaleY}t.rotatable&&(i.rotate=s),t.scalable&&(i.scaleX=r,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,i=e.crossOrigin,n=t;this.options.checkCrossOrigin&&oe(t)&&(i||(i="anonymous"),n=ae(t)),this.crossOrigin=i,this.crossOriginUrl=n;var s=document.createElement("img");i&&(s.crossOrigin=i),s.src=n||t,s.alt=e.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),z(s,m),e.parentNode.insertBefore(s,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var i=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),n=function(t,i){j(e.imageData,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),e.initialImageData=j({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||i){var s=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){n(s.width,s.height),i||r.removeChild(s)},s.src=t.src,i||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(s))}else n(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,i=this.image,n=e.parentNode,s=document.createElement("div");s.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=s.querySelector(".".concat("cropper","-container")),o=r.querySelector(".".concat("cropper","-canvas")),a=r.querySelector(".".concat("cropper","-drag-box")),l=r.querySelector(".".concat("cropper","-crop-box")),c=l.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=r,this.canvas=o,this.dragBox=a,this.cropBox=l,this.viewBox=r.querySelector(".".concat("cropper","-view-box")),this.face=c,o.appendChild(i),z(e,f),n.insertBefore(r,e.nextSibling),this.isImg||G(i,m),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,z(l,f),t.guides||z(l.getElementsByClassName("".concat("cropper","-dashed")),f),t.center||z(l.getElementsByClassName("".concat("cropper","-center")),f),t.background&&z(r,"".concat("cropper","-bg")),t.highlight||z(c,g),t.cropBoxMovable&&(z(c,y),J(c,b,"all")),t.cropBoxResizable||(z(l.getElementsByClassName("".concat("cropper","-line")),f),z(l.getElementsByClassName("".concat("cropper","-point")),f)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),N(t.ready)&&te(e,"ready",t.ready,{once:!0}),ie(e,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),G(this.element,f))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&i(n.prototype,s),r&&i(n,r),e}();return j(Se.prototype,fe,me,ge,ve,ye,be),Se}()},uzES:function(e,t,i){"use strict";var n=i("kwwM"),s=i("8fj+");function r(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}r.prototype._transportClose=function(e,t){s.postMessage("c",n.stringify([e,t]))},r.prototype._transportMessage=function(e){s.postMessage("t",e)},r.prototype._send=function(e){this._transport.send(e)},r.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=r},v0om:function(t,i,n){"use strict";var s,r,o=n("JYLm"),a=n("Yh+D");t.exports=function(t,i,n){s||((s=global.document.createElement("form")).style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",(r=global.document.createElement("textarea")).name="d",s.appendChild(r),global.document.body.appendChild(s));var l="a"+o.string(8);s.target=l,s.action=a.addQuery(a.addPath(t,"/jsonp_send"),"i="+l);var c=function(e){try{return global.document.createElement('<iframe name="'+e+'">')}catch(i){var t=global.document.createElement("iframe");return t.name=e,t}}(l);c.id=l,c.style.display="none",s.appendChild(c);try{r.value=i}catch(e){}s.submit();var h=function(e){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,setTimeout((function(){c.parentNode.removeChild(c),c=null}),500),r.value="",n(e))};return c.onerror=function(){h()},c.onload=function(){h()},c.onreadystatechange=function(e){"complete"===c.readyState&&h()},function(){h(new Error("Aborted"))}}},wj3C:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s,r,o=n("mrSG"),a=n("zVF4"),l=n("S+S0"),c=n("q/0M"),h=((s={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",s["bad-app-name"]="Illegal App name: '{$appName}",s["duplicate-app"]="Firebase App named '{$appName}' already exists",s["app-deleted"]="Firebase App named '{$appName}' already deleted",s["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",s["invalid-log-argument"]="First argument to `onLog` must be null or a function.",s),d=new a.ErrorFactory("app","Firebase",h),u=((r={})["@firebase/app"]="fire-core",r["@firebase/analytics"]="fire-analytics",r["@firebase/auth"]="fire-auth",r["@firebase/database"]="fire-rtdb",r["@firebase/functions"]="fire-fn",r["@firebase/installations"]="fire-iid",r["@firebase/messaging"]="fire-fcm",r["@firebase/performance"]="fire-perf",r["@firebase/remote-config"]="fire-rc",r["@firebase/storage"]="fire-gcs",r["@firebase/firestore"]="fire-fst",r["fire-js"]="fire-js",r["firebase-wrapper"]="fire-js-all",r),p=new c.Logger("@firebase/app"),f=function(){function t(e,t,i){var n,s,r=this;this.firebase_=i,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new l.ComponentContainer(t.name),this._addComponent(new l.Component("app",(function(){return r}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next())this._addComponent(h.value)}catch(d){n={error:d}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},t.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},t.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw d.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},i=new Map,n={__esModule:!0,initializeApp:function(i,s){void 0===s&&(s={}),"object"==typeof s&&null!==s||(s={name:s});var r=s;void 0===r.name&&(r.name="[DEFAULT]");var o=r.name;if("string"!=typeof o||!o)throw d.create("bad-app-name",{appName:String(o)});if(a.contains(t,o))throw d.create("duplicate-app",{appName:o});var l=new e(i,r,n);return t[o]=l,l},app:s,registerVersion:function(e,t,i){var n,s=null!==(n=u[e])&&void 0!==n?n:e;i&&(s+="-"+i);var o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+s+'" with version "'+t+'":'];return o&&c.push('library name "'+s+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}r(new l.Component(s+"-version",(function(){return{library:s,version:t}}),"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw d.create("invalid-log-argument",{appName:name});c.setUserLogHandler(e,t)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:r,removeApp:function(e){delete t[e]},components:i,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function s(e){if(!a.contains(t,e=e||"[DEFAULT]"))throw d.create("no-app",{appName:e});return t[e]}function r(r){var l,c,h=r.name;if(i.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===r.type?n[h]:null;if(i.set(h,r),"PUBLIC"===r.type){var u=function(e){if(void 0===e&&(e=s()),"function"!=typeof e[h])throw d.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==r.serviceProps&&a.deepExtend(u,r.serviceProps),n[h]=u,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this._getService.bind(this,h);return i.apply(this,r.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),m=f.next();!m.done;m=f.next())t[m.value]._addComponent(r)}catch(g){l={error:g}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}return"PUBLIC"===r.type?n[h]:null}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),s.App=e,n}(f);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(a.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var b=m;!function(e,t){e.INTERNAL.registerComponent(new l.Component("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion("@firebase/app","0.6.11",void 0),e.registerVersion("fire-js","")}(b),i.default=b,i.firebase=b},woL0:function(e,t,i){"use strict";var n=i("JYLm"),s={},r=!1,o=global.chrome&&global.chrome.app&&global.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==global.addEventListener?global.addEventListener(e,t,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+e,t),global.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==global.addEventListener?global.removeEventListener(e,t,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+e,t),global.detachEvent("on"+e,t))},unloadAdd:function(e){if(o)return null;var t=n.string(8);return s[t]=e,r&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in s&&delete s[e]},triggerUnloadCallbacks:function(){for(var e in s)s[e](),delete s[e]}},o||e.exports.attachEvent("unload",(function(){r||(r=!0,e.exports.triggerUnloadCallbacks())}))},xSnx:function(e,t,i){"use strict";var n=i("P7XM"),s=i("raCH").EventEmitter,r=i("kwwM"),o=i("c6pU"),a=i("ibx3");function l(e){var t=this;s.call(this),this.ir=new a(e,o),this.ir.once("finish",(function(e,i){t.ir=null,t.emit("message",r.stringify([e,i]))}))}n(l,s),l.transportName="iframe-info-receiver",l.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=l},yjSe:function(e,t){e.exports=global.EventSource},"z+YZ":function(e,t,i){"use strict";e.exports.randomBytes=global.crypto&&global.crypto.getRandomValues?function(e){var t=new Uint8Array(e);return global.crypto.getRandomValues(t),t}:function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=Math.floor(256*Math.random());return t}},zH15:function(e,t,i){"use strict";var n=i("aUWK");e.exports=i("SGzc")(n),"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)},zUnb:function(t,i,n){"use strict";function s(e){return"function"==typeof e}n.r(i);let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function a(e){setTimeout(()=>{throw e},0)}const l={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function h(e){return null!==e&&"object"==typeof e}const d=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let u=(()=>{class t{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let i;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(s(r))try{r.call(this)}catch(e){i=e instanceof d?p(e.errors):[e]}if(c(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(h(n))try{n.unsubscribe()}catch(e){i=i||[],e instanceof d?i=i.concat(p(e.errors)):i.push(e)}}}if(i)throw new d(i)}add(e){let i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){const e=i;i=new t,i._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=i;if(null===n)i._parentOrParents=this;else if(n instanceof t){if(n===this)return i;i._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return i;n.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[i]:s.push(i),i}remove(e){const t=this._subscriptions;if(t){const i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}return t.EMPTY=function(e){return e.closed=!0,e}(new t),t})();function p(e){return e.reduce((e,t)=>e.concat(t instanceof d?t.errors:t),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class m extends u{constructor(e,t,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!e){this.destination=l;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,i)}}[f](){return this}static create(e,t,i){const n=new m(e,t,i);return n.syncErrorThrowable=!1,n}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends m{constructor(e,t,i,n){let r;super(),this._parentSubscriber=e;let o=this;s(t)?r=t:t&&(r=t.next,i=t.error,n=t.complete,t!==l&&(o=Object.create(t),s(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=r,this._error=i,this._complete=n}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:i}=o;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;a(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw i;a(i)}}__tryOrSetError(e,t,i){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(n){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(a(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const v=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}function b(...e){return w(e)}function w(e){return 0===e.length?y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}let S=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(e,t,i){const{operator:n}=this,s=function(e,t,i){if(e){if(e instanceof m)return e;if(e[f])return e[f]()}return e||t||i?new m(e,t,i):new m(l)}(e,t,i);if(s.add(n?n.call(s,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),o.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:i,isStopped:n}=e;if(t||n)return!1;e=i&&i instanceof m?i:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=C(t))((t,i)=>{let n;n=this.subscribe(t=>{try{e(t)}catch(s){i(s),n&&n.unsubscribe()}},i,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[v](){return this}pipe(...e){return 0===e.length?this:w(e)(this)}toPromise(e){return new(e=C(e))((e,t)=>{let i;this.subscribe(e=>i=e,e=>t(e),()=>e(i))})}}return e.create=t=>new e(t),e})();function C(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const _=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class E extends u{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}class T extends m{constructor(e){super(e),this.destination=e}}let x=(()=>{class e extends S{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new T(this)}lift(e){const t=new k(this,this);return t.operator=e,t}next(e){if(this.closed)throw new _;if(!this.isStopped){const{observers:t}=this,i=t.length,n=t.slice();for(let s=0;s<i;s++)n[s].next(e)}}error(e){if(this.closed)throw new _;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,i=t.length,n=t.slice();for(let s=0;s<i;s++)n[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:e}=this,t=e.length,i=e.slice();for(let n=0;n<t;n++)i[n].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new _;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new _;return this.hasError?(e.error(this.thrownError),u.EMPTY):this.isStopped?(e.complete(),u.EMPTY):(this.observers.push(e),new E(this,e))}asObservable(){const e=new S;return e.source=this,e}}return e.create=(e,t)=>new k(e,t),e})();class k extends x{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):u.EMPTY}}function A(e){return e&&"function"==typeof e.schedule}class O extends m{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const D=e=>t=>{for(let i=0,n=e.length;i<n&&!t.closed;i++)t.next(e[i]);t.complete()};function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=I(),P=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function M(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const L=e=>{if(e&&"function"==typeof e[v])return n=e,e=>{const t=n[v]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(P(e))return D(e);if(M(e))return i=e,e=>(i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,a),e);if(e&&"function"==typeof e[R])return t=e,e=>{const i=t[R]();for(;;){const t=i.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof i.return&&e.add(()=>{i.return&&i.return()}),e};{const t=h(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,i,n};function N(e,t,i,n,s=new O(e,i,n)){if(!s.closed)return t instanceof S?t.subscribe(s):L(t)(s)}class V extends m{notifyNext(e,t,i,n,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function B(e,t){return function(i){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new F(e,t))}}class F{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new j(e,this.project,this.thisArg))}}class j extends m{constructor(e,t,i){super(e),this.project=t,this.count=0,this.thisArg=i||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}function H(e,t){return new S(i=>{const n=new u;let s=0;return n.add(t.schedule((function(){s!==e.length?(i.next(e[s++]),i.closed||n.add(this.schedule())):i.complete()}))),n})}function U(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[v]}(e))return function(e,t){return new S(i=>{const n=new u;return n.add(t.schedule(()=>{const s=e[v]();n.add(s.subscribe({next(e){n.add(t.schedule(()=>i.next(e)))},error(e){n.add(t.schedule(()=>i.error(e)))},complete(){n.add(t.schedule(()=>i.complete()))}}))})),n})}(e,t);if(M(e))return function(e,t){return new S(i=>{const n=new u;return n.add(t.schedule(()=>e.then(e=>{n.add(t.schedule(()=>{i.next(e),n.add(t.schedule(()=>i.complete()))}))},e=>{n.add(t.schedule(()=>i.error(e)))}))),n})}(e,t);if(P(e))return H(e,t);if(function(e){return e&&"function"==typeof e[R]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new S(i=>{const n=new u;let s;return n.add(()=>{s&&"function"==typeof s.return&&s.return()}),n.add(t.schedule(()=>{s=e[R](),n.add(t.schedule((function(){if(i.closed)return;let e,t;try{const i=s.next();e=i.value,t=i.done}catch(n){return void i.error(n)}t?i.complete():(i.next(e),this.schedule())})))})),n})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof S?e:new S(L(e))}function q(e,t,i=Number.POSITIVE_INFINITY){return"function"==typeof t?n=>n.pipe(q((i,n)=>U(e(i,n)).pipe(B((e,s)=>t(i,e,n,s))),i)):("number"==typeof t&&(i=t),t=>t.lift(new W(e,i)))}class W{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new z(e,this.project,this.concurrent))}}class z extends V{constructor(e,t,i=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,i)}_innerSub(e,t,i){const n=new O(this,t,i),s=this.destination;s.add(n);const r=N(this,e,void 0,void 0,n);r!==n&&s.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,i,n,s){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function G(e=Number.POSITIVE_INFINITY){return q(y,e)}function Y(e,t){return t?H(e,t):new S(D(e))}function K(...e){let t=Number.POSITIVE_INFINITY,i=null,n=e[e.length-1];return A(n)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof n&&(t=e.pop()),null===i&&1===e.length&&e[0]instanceof S?e[0]:G(t)(Y(e,i))}function X(){return function(e){return e.lift(new J(e))}}class J{constructor(e){this.connectable=e}call(e,t){const{connectable:i}=this;i._refCount++;const n=new Q(e,i),s=t.subscribe(n);return n.closed||(n.connection=i.connect()),s}}class Q extends m{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:i}=this,n=e._connection;this.connection=null,!n||i&&n!==i||n.unsubscribe()}}class Z extends S{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new u,e.add(this.source.subscribe(new te(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.EMPTY)),e}refCount(){return X()(this)}}const ee=(()=>{const e=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class te extends T{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function ie(){return new x}function ne(e){return{toString:e}.toString()}function se(e,t,i){return ne(()=>{const n=function(e){return function(...t){if(e){const i=e(...t);for(const e in i)this[e]=i[e]}}}(t);function s(...e){if(this instanceof s)return n.apply(this,e),this;const t=new s(...e);return i.annotation=t,i;function i(e,i,n){const s=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;s.length<=n;)s.push(null);return(s[n]=s[n]||[]).push(t),e}}return i&&(s.prototype=Object.create(i.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}const re=se("Inject",e=>({token:e})),oe=se("Optional"),ae=se("Self"),le=se("SkipSelf");var ce=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function he(e){for(let t in e)if(e[t]===he)return t;throw Error("Could not find renamed property on target object.")}function de(e,t){for(const i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}const pe=ue;function fe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function me(e){return ge(e,e[ye])||ge(e,e[Se])}function ge(e,t){return t&&t.token===e?t:null}function ve(e){return e&&(e.hasOwnProperty(be)||e.hasOwnProperty(Ce))?e[be]:null}const ye=he({"\u0275prov":he}),be=he({"\u0275inj":he}),we=he({"\u0275provFallback":he}),Se=he({ngInjectableDef:he}),Ce=he({ngInjectorDef:he});function _e(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(_e).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;const t=e.toString();if(null==t)return""+t;const i=t.indexOf("\n");return-1===i?t:t.substring(0,i)}function Ee(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Te=he({__forward_ref__:he});function xe(e){return e.__forward_ref__=xe,e.toString=function(){return _e(this())},e}function ke(e){return Ae(e)?e():e}function Ae(e){return"function"==typeof e&&e.hasOwnProperty(Te)&&e.__forward_ref__===xe}const Oe="undefined"!=typeof globalThis&&globalThis,De="undefined"!=typeof window&&window,Ie="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Re="undefined"!=typeof global&&global,Pe=Oe||Re||De||Ie,Me=he({"\u0275cmp":he}),Le=he({"\u0275dir":he}),Ne=he({"\u0275pipe":he}),Ve=he({"\u0275mod":he}),Be=he({"\u0275loc":he}),Fe=he({"\u0275fac":he}),je=he({__NG_ELEMENT_ID__:he});class He{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return"InjectionToken "+this._desc}}const Ue=new He("INJECTOR",-1),qe={},We=/\n/gm,ze=he({provide:String,useValue:he});let Ge,Ye=void 0;function $e(e){const t=Ye;return Ye=e,t}function Ke(e){const t=Ge;return Ge=e,t}function Xe(e,t=ce.Default){if(void 0===Ye)throw new Error("inject() must be called from an injection context");return null===Ye?Ze(e,void 0,t):Ye.get(e,t&ce.Optional?null:void 0,t)}function Je(e,t=ce.Default){return(Ge||Xe)(ke(e),t)}const Qe=Je;function Ze(e,t,i){const n=me(e);if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(i&ce.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${_e(e)}]`)}function et(e){const t=[];for(let i=0;i<e.length;i++){const n=ke(e[i]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let e=void 0,i=ce.Default;for(let t=0;t<n.length;t++){const s=n[t];s instanceof oe||"Optional"===s.ngMetadataName||s===oe?i|=ce.Optional:s instanceof le||"SkipSelf"===s.ngMetadataName||s===le?i|=ce.SkipSelf:s instanceof ae||"Self"===s.ngMetadataName||s===ae?i|=ce.Self:e=s instanceof re||s===re?s.token:s}t.push(Je(e,i))}else t.push(Je(n))}return t}class tt{get(e,t=qe){if(t===qe){const t=new Error(`NullInjectorError: No provider for ${_e(e)}!`);throw t.name="NullInjectorError",t}return t}}class it{}class nt{}function st(e,t){e.forEach(e=>Array.isArray(e)?st(e,t):t(e))}function rt(e,t,i){t>=e.length?e.push(i):e.splice(t,0,i)}function ot(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function at(e,t){const i=[];for(let n=0;n<e;n++)i.push(t);return i}function lt(e,t,i){let n=ht(e,t);return n>=0?e[1|n]=i:(n=~n,function(e,t,i,n){let s=e.length;if(s==t)e.push(i,n);else if(1===s)e.push(n,e[0]),e[0]=i;else{for(s--,e.push(e[s-1],e[s]);s>t;)e[s]=e[s-2],s--;e[t]=i,e[t+1]=n}}(e,n,t,i)),n}function ct(e,t){const i=ht(e,t);if(i>=0)return e[1|i]}function ht(e,t){return function(e,t,i){let n=0,s=e.length>>1;for(;s!==n;){const i=n+(s-n>>1),r=e[i<<1];if(t===r)return i<<1;r>t?s=i:n=i+1}return~(s<<1)}(e,t)}const dt=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),ut=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),pt={},ft=[];let mt=0;function gt(e){return ne(()=>{const t=e.type,i=t.prototype,n={},s={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:i.ngOnInit||null,doCheck:i.ngDoCheck||null,afterContentInit:i.ngAfterContentInit||null,afterContentChecked:i.ngAfterContentChecked||null,afterViewInit:i.ngAfterViewInit||null,afterViewChecked:i.ngAfterViewChecked||null,onDestroy:i.ngOnDestroy||null,onPush:e.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ft,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ut.Emulated,id:"c",styles:e.styles||ft,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,o=e.features,a=e.pipes;return s.id+=mt++,s.inputs=St(e.inputs,n),s.outputs=St(e.outputs),o&&o.forEach(e=>e(s)),s.directiveDefs=r?()=>("function"==typeof r?r():r).map(vt):null,s.pipeDefs=a?()=>("function"==typeof a?a():a).map(yt):null,s})}function vt(e){return Et(e)||function(e){return e[Le]||null}(e)}function yt(e){return function(e){return e[Ne]||null}(e)}const bt={};function wt(e){const t={type:e.type,bootstrap:e.bootstrap||ft,declarations:e.declarations||ft,imports:e.imports||ft,exports:e.exports||ft,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&ne(()=>{bt[e.id]=e.type}),t}function St(e,t){if(null==e)return pt;const i={};for(const n in e)if(e.hasOwnProperty(n)){let s=e[n],r=s;Array.isArray(s)&&(r=s[1],s=s[0]),i[s]=n,t&&(t[s]=r)}return i}const Ct=gt;function _t(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Et(e){return e[Me]||null}function Tt(e,t){return e.hasOwnProperty(Fe)?e[Fe]:null}function xt(e,t){const i=e[Ve]||null;if(!i&&!0===t)throw new Error(`Type ${_e(e)} does not have '\u0275mod' property.`);return i}function kt(e){return Array.isArray(e)&&"object"==typeof e[1]}function At(e){return Array.isArray(e)&&!0===e[1]}function Ot(e){return 0!=(8&e.flags)}function Dt(e){return 2==(2&e.flags)}function It(e){return 1==(1&e.flags)}function Rt(e){return null!==e.template}function Pt(e){return 0!=(512&e[2])}let Mt=void 0;function Lt(){return void 0!==Mt?Mt:"undefined"!=typeof document?document:void 0}function Nt(e){return!!e.listen}const Vt={createRenderer:(e,t)=>Lt()};function Bt(e){for(;Array.isArray(e);)e=e[0];return e}function Ft(e,t){return Bt(t[e+20])}function jt(e,t){return Bt(t[e.index])}function Ht(e,t){return e.data[t+20]}function Ut(e,t){return e[t+20]}function qt(e,t){const i=t[e];return kt(i)?i:i[0]}function Wt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function zt(e){return 4==(4&e[2])}function Gt(e){return 128==(128&e[2])}function Yt(e,t){return null===e||null==t?null:e[t]}function $t(e){e[18]=0}function Kt(e,t){e[5]+=t;let i=e,n=e[3];for(;null!==n&&(1===t&&1===i[5]||-1===t&&0===i[5]);)n[5]+=t,i=n,n=n[3]}const Xt={lFrame:bi(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Jt(){return Xt.bindingsEnabled}function Qt(){return Xt.lFrame.lView}function Zt(){return Xt.lFrame.tView}function ei(e){Xt.lFrame.contextLView=e}function ti(){return Xt.lFrame.previousOrParentTNode}function ii(e,t){Xt.lFrame.previousOrParentTNode=e,Xt.lFrame.isParent=t}function ni(){return Xt.lFrame.isParent}function si(){Xt.lFrame.isParent=!1}function ri(){return Xt.checkNoChangesMode}function oi(e){Xt.checkNoChangesMode=e}function ai(){const e=Xt.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function li(){return Xt.lFrame.bindingIndex}function ci(){return Xt.lFrame.bindingIndex++}function hi(e){const t=Xt.lFrame,i=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,i}function di(e,t){const i=Xt.lFrame;i.bindingIndex=i.bindingRootIndex=e,ui(t)}function ui(e){Xt.lFrame.currentDirectiveIndex=e}function pi(e){const t=Xt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function fi(){return Xt.lFrame.currentQueryIndex}function mi(e){Xt.lFrame.currentQueryIndex=e}function gi(e,t){const i=yi();Xt.lFrame=i,i.previousOrParentTNode=t,i.lView=e}function vi(e,t){const i=yi(),n=e[1];Xt.lFrame=i,i.previousOrParentTNode=t,i.lView=e,i.tView=n,i.contextLView=e,i.bindingIndex=n.bindingStartIndex}function yi(){const e=Xt.lFrame,t=null===e?null:e.child;return null===t?bi(e):t}function bi(e){const t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function wi(){const e=Xt.lFrame;return Xt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}const Si=wi;function Ci(){const e=wi();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function _i(){return Xt.lFrame.selectedIndex}function Ei(e){Xt.lFrame.selectedIndex=e}function Ti(){const e=Xt.lFrame;return Ht(e.tView,e.selectedIndex)}function xi(e,t){for(let i=t.directiveStart,n=t.directiveEnd;i<n;i++){const t=e.data[i];t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-i,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(i,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(i,t.afterContentChecked)),t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-i,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(i,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(i,t.afterViewChecked)),null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(i,t.onDestroy)}}function ki(e,t,i){Di(e,t,3,i)}function Ai(e,t,i,n){(3&e[2])===i&&Di(e,t,i,n)}function Oi(e,t){let i=e[2];(3&i)===t&&(i&=2047,i+=1,e[2]=i)}function Di(e,t,i,n){const s=null!=n?n:-1;let r=0;for(let o=void 0!==n?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(r=t[o],null!=n&&r>=n)break}else t[o]<0&&(e[18]+=65536),(r<s||-1==s)&&(Ii(e,i,t,o),e[18]=(4294901760&e[18])+o+2),o++}function Ii(e,t,i,n){const s=i[n]<0,r=i[n+1],o=e[s?-i[n]:i[n]];s?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,r.call(o)):r.call(o)}class Ri{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Pi(e,t,i){const n=Nt(e);let s=0;for(;s<i.length;){const r=i[s];if("number"==typeof r){if(0!==r)break;s++;const o=i[s++],a=i[s++],l=i[s++];n?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=r,a=i[++s];Li(o)?n&&e.setProperty(t,o,a):n?e.setAttribute(t,o,a):t.setAttribute(o,a),s++}}return s}function Mi(e){return 3===e||4===e||6===e}function Li(e){return 64===e.charCodeAt(0)}function Ni(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let i=-1;for(let n=0;n<t.length;n++){const s=t[n];"number"==typeof s?i=s:0===i||Vi(e,i,s,null,-1===i||2===i?t[++n]:null)}}return e}function Vi(e,t,i,n,s){let r=0,o=e.length;if(-1===t)o=-1;else for(;r<e.length;){const i=e[r++];if("number"==typeof i){if(i===t){o=-1;break}if(i>t){o=r-1;break}}}for(;r<e.length;){const t=e[r];if("number"==typeof t)break;if(t===i){if(null===n)return void(null!==s&&(e[r+1]=s));if(n===e[r+1])return void(e[r+2]=s)}r++,null!==n&&r++,null!==s&&r++}-1!==o&&(e.splice(o,0,t),r=o+1),e.splice(r++,0,i),null!==n&&e.splice(r++,0,n),null!==s&&e.splice(r++,0,s)}function Bi(e){return-1!==e}function Fi(e){return 32767&e}function ji(e){return e>>16}function Hi(e,t){let i=ji(e),n=t;for(;i>0;)n=n[15],i--;return n}function Ui(e){return"string"==typeof e?e:null==e?"":""+e}function qi(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ui(e)}const Wi=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pe))();function zi(e){return{name:"window",target:e.ownerDocument.defaultView}}function Gi(e){return e instanceof Function?e():e}let Yi=!0;function $i(e){const t=Yi;return Yi=e,t}let Ki=0;function Xi(e,t){const i=Qi(e,t);if(-1!==i)return i;const n=t[1];n.firstCreatePass&&(e.injectorIndex=t.length,Ji(n.data,e),Ji(t,null),Ji(n.blueprint,null));const s=Zi(e,t),r=e.injectorIndex;if(Bi(s)){const e=Fi(s),i=Hi(s,t),n=i[1].data;for(let s=0;s<8;s++)t[r+s]=i[e+s]|n[e+s]}return t[r+8]=s,r}function Ji(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Qi(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Zi(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=t[6],n=1;for(;i&&-1===i.injectorIndex;)i=(t=t[15])?t[6]:null,n++;return i?i.injectorIndex|n<<16:-1}function en(e,t,i){!function(e,t,i){let n="string"!=typeof i?i[je]:i.charCodeAt(0)||0;null==n&&(n=i[je]=Ki++);const s=255&n,r=1<<s,o=64&s,a=32&s,l=t.data;128&s?o?a?l[e+7]|=r:l[e+6]|=r:a?l[e+5]|=r:l[e+4]|=r:o?a?l[e+3]|=r:l[e+2]|=r:a?l[e+1]|=r:l[e]|=r}(e,t,i)}function tn(e,t,i,n=ce.Default,s){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e[je];return"number"==typeof t&&t>0?255&t:t}(i);if("function"==typeof s){gi(t,e);try{const e=s();if(null!=e||n&ce.Optional)return e;throw new Error(`No provider for ${qi(i)}!`)}finally{Si()}}else if("number"==typeof s){if(-1===s)return new cn(e,t);let r=null,o=Qi(e,t),a=-1,l=n&ce.Host?t[16][6]:null;for((-1===o||n&ce.SkipSelf)&&(a=-1===o?Zi(e,t):t[o+8],ln(n,!1)?(r=t[1],o=Fi(a),t=Hi(a,t)):o=-1);-1!==o;){a=t[o+8];const e=t[1];if(an(s,o,e.data)){const e=sn(o,t,i,r,n,l);if(e!==nn)return e}ln(n,t[1].data[o+8]===l)&&an(s,o,t)?(r=e,o=Fi(a),t=Hi(a,t)):o=-1}}}if(n&ce.Optional&&void 0===s&&(s=null),0==(n&(ce.Self|ce.Host))){const e=t[9],r=Ke(void 0);try{return e?e.get(i,s,n&ce.Optional):Ze(i,s,n&ce.Optional)}finally{Ke(r)}}if(n&ce.Optional)return s;throw new Error(`NodeInjector: NOT_FOUND [${qi(i)}]`)}const nn={};function sn(e,t,i,n,s,r){const o=t[1],a=o.data[e+8],l=rn(a,o,i,null==n?Dt(a)&&Yi:n!=o&&3===a.type,s&ce.Host&&r===a);return null!==l?on(t,o,l,a):nn}function rn(e,t,i,n,s){const r=e.providerIndexes,o=t.data,a=65535&r,l=e.directiveStart,c=r>>16,h=s?a+c:e.directiveEnd;for(let d=n?a:a+c;d<h;d++){const e=o[d];if(d<l&&i===e||d>=l&&e.type===i)return d}if(s){const e=o[l];if(e&&Rt(e)&&e.type===i)return l}return null}function on(e,t,i,n){let s=e[i];const r=t.data;if(s instanceof Ri){const o=s;if(o.resolving)throw new Error("Circular dep for "+qi(r[i]));const a=$i(o.canSeeViewProviders);let l;o.resolving=!0,o.injectImpl&&(l=Ke(o.injectImpl)),gi(e,n);try{s=e[i]=o.factory(void 0,r,e,n),t.firstCreatePass&&i>=n.directiveStart&&function(e,t,i){const{onChanges:n,onInit:s,doCheck:r}=t;n&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e,n),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e,n)),s&&(i.preOrderHooks||(i.preOrderHooks=[])).push(-e,s),r&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e,r),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e,r))}(i,r[i],t)}finally{o.injectImpl&&Ke(l),$i(a),o.resolving=!1,Si()}}return s}function an(e,t,i){const n=64&e,s=32&e;let r;return r=128&e?n?s?i[t+7]:i[t+6]:s?i[t+5]:i[t+4]:n?s?i[t+3]:i[t+2]:s?i[t+1]:i[t],!!(r&1<<e)}function ln(e,t){return!(e&ce.Self||e&ce.Host&&t)}class cn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return tn(this._tNode,this._lView,e,void 0,t)}}function hn(e){const t=e;if(Ae(e))return()=>{const e=hn(ke(t));return e?e():null};let i=Tt(t);if(null===i){const e=ve(t);i=e&&e.factory}return i||null}function dn(e){return ne(()=>{const t=e.prototype.constructor,i=t[Fe]||hn(t),n=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==n;){const e=s[Fe]||hn(s);if(e&&e!==i)return e;s=Object.getPrototypeOf(s)}return e=>new e})}function un(e){return e.ngDebugContext}function pn(e){return e.ngOriginalError}function fn(e,...t){e.error(...t)}class mn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),n=function(e){return e.ngErrorLogger||fn}(e);n(this._console,"ERROR",e),t&&n(this._console,"ORIGINAL ERROR",t),i&&n(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?un(e)?un(e):this._findContext(pn(e)):null}_findOriginalError(e){let t=pn(e);for(;t&&pn(t);)t=pn(t);return t}}class gn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class vn extends gn{getTypeName(){return"HTML"}}class yn extends gn{getTypeName(){return"Style"}}class bn extends gn{getTypeName(){return"Script"}}class wn extends gn{getTypeName(){return"URL"}}class Sn extends gn{getTypeName(){return"ResourceURL"}}function Cn(e){return e instanceof gn?e.changingThisBreaksApplicationSecurity:e}function _n(e,t){const i=En(e);if(null!=i&&i!==t){if("ResourceURL"===i&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${i} (see http://g.co/ng/security#xss)`)}return i===t}function En(e){return e instanceof gn&&e.getTypeName()||null}let Tn=!0,xn=!1;function kn(){return xn=!0,Tn}class An{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let t=this.inertDocument.body;if(null==t){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),t=this.inertDocument.createElement("body"),e.appendChild(t)}t.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!t.querySelector||t.querySelector("svg")?(t.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=t.querySelector&&t.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(n){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const i=t.response.body;return i.removeChild(i.firstChild),i}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=e,t;const i=this.inertDocument.createElement("body");return i.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let n=t.length-1;0<n;n--){const i=t.item(n).name;"xmlns:ns1"!==i&&0!==i.indexOf("ns1:")||e.removeAttribute(i)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const On=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Dn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function In(e){return(e=String(e)).match(On)||e.match(Dn)?e:(kn()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function Rn(e){const t={};for(const i of e.split(","))t[i]=!0;return t}function Pn(...e){const t={};for(const i of e)for(const e in i)i.hasOwnProperty(e)&&(t[e]=!0);return t}const Mn=Rn("area,br,col,hr,img,wbr"),Ln=Rn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nn=Rn("rp,rt"),Vn=Pn(Nn,Ln),Bn=Pn(Mn,Pn(Ln,Rn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pn(Nn,Rn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vn),Fn=Rn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jn=Rn("srcset"),Hn=Pn(Fn,jn,Rn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Rn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Un=Rn("script,style,template");class qn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Bn.hasOwnProperty(t))return this.sanitizedSomething=!0,!Un.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let s=0;s<i.length;s++){const e=i.item(s),t=e.name,r=t.toLowerCase();if(!Hn.hasOwnProperty(r)){this.sanitizedSomething=!0;continue}let o=e.value;Fn[r]&&(o=In(o)),jn[r]&&(n=o,o=(n=String(n)).split(",").map(e=>In(e.trim())).join(", ")),this.buf.push(" ",t,'="',Gn(o),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Bn.hasOwnProperty(t)&&!Mn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Gn(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t}}const Wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zn=/([^\#-~ |!])/g;function Gn(e){return e.replace(/&/g,"&amp;").replace(Wn,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(zn,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yn;function $n(e,t){let i=null;try{Yn=Yn||new An(e);let n=t?String(t):"";i=Yn.getInertBodyElement(n);let s=5,r=n;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,n=r,r=i.innerHTML,i=Yn.getInertBodyElement(n)}while(n!==r);const o=new qn,a=o.sanitizeChildren(Kn(i)||i);return kn()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(i){const e=Kn(i)||i;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function Kn(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const Xn=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),Jn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Qn=/^url\(([^)]+)\)$/;function Zn(e){const t=ts();return t?t.sanitize(Xn.HTML,e)||"":_n(e,"HTML")?Cn(e):$n(Lt(),Ui(e))}function es(e){const t=ts();return t?t.sanitize(Xn.URL,e)||"":_n(e,"URL")?Cn(e):In(Ui(e))}function ts(){const e=Qt();return e&&e[12]}function is(e,t){e.__ngContext__=t}function ns(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function ss(){throw new Error("Cannot mix multi providers and regular providers")}function rs(e,t,i){let n=e.length;for(;;){const s=e.indexOf(t,i);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const i=t.length;if(s+i===n||e.charCodeAt(s+i)<=32)return s}i=s+1}}function os(e,t,i){let n=0;for(;n<e.length;){let s=e[n++];if(i&&"class"===s){if(s=e[n],-1!==rs(s.toLowerCase(),t,0))return!0}else if(1===s){for(;n<e.length&&"string"==typeof(s=e[n++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function as(e){return 0===e.type&&"ng-template"!==e.tagName}function ls(e,t,i){return t===(0!==e.type||i?e.tagName:"ng-template")}function cs(e,t,i){let n=4;const s=e.attrs||[],r=function(e){for(let t=0;t<e.length;t++)if(Mi(e[t]))return t;return e.length}(s);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!ls(e,l,i)||""===l&&1===t.length){if(hs(n))return!1;o=!0}}else{const c=8&n?l:t[++a];if(8&n&&null!==e.attrs){if(!os(e.attrs,c,i)){if(hs(n))return!1;o=!0}continue}const h=ds(8&n?"class":l,s,as(e),i);if(-1===h){if(hs(n))return!1;o=!0;continue}if(""!==c){let e;e=h>r?"":s[h+1].toLowerCase();const t=8&n?e:null;if(t&&-1!==rs(t,c,0)||2&n&&c!==e){if(hs(n))return!1;o=!0}}}}else{if(!o&&!hs(n)&&!hs(l))return!1;if(o&&hs(l))continue;o=!1,n=l|1&n}}return hs(n)||o}function hs(e){return 0==(1&e)}function ds(e,t,i,n){if(null===t)return-1;let s=0;if(n||!i){let i=!1;for(;s<t.length;){const n=t[s];if(n===e)return s;if(3===n||6===n)i=!0;else{if(1===n||2===n){let e=t[++s];for(;"string"==typeof e;)e=t[++s];continue}if(4===n)break;if(0===n){s+=4;continue}}s+=i?1:2}return-1}return function(e,t){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const n=e[i];if("number"==typeof n)return-1;if(n===t)return i;i++}return-1}(t,e)}function us(e,t,i=!1){for(let n=0;n<t.length;n++)if(cs(e,t[n],i))return!0;return!1}function ps(e,t){e:for(let i=0;i<t.length;i++){const n=t[i];if(e.length===n.length){for(let t=0;t<e.length;t++)if(e[t]!==n[t])continue e;return!0}}return!1}function fs(e,t){return e?":not("+t.trim()+")":t}function ms(e){let t=e[0],i=1,n=2,s="",r=!1;for(;i<e.length;){let o=e[i];if("string"==typeof o)if(2&n){const t=e[++i];s+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&n?s+="."+o:4&n&&(s+=" "+o);else""===s||hs(o)||(t+=fs(r,s),s=""),n=o,r=r||!hs(n);i++}return""!==s&&(t+=fs(r,s)),t}const gs={};function vs(e){const t=e[3];return At(t)?t[3]:t}function ys(e){return ws(e[13])}function bs(e){return ws(e[4])}function ws(e){for(;null!==e&&!At(e);)e=e[4];return e}function Ss(e){Cs(Zt(),Qt(),_i()+e,ri())}function Cs(e,t,i,n){if(!n)if(3==(3&t[2])){const n=e.preOrderCheckHooks;null!==n&&ki(t,n,i)}else{const n=e.preOrderHooks;null!==n&&Ai(t,n,0,i)}Ei(i)}function _s(e,t){return e<<17|t<<2}function Es(e){return e>>17&32767}function Ts(e){return 2|e}function xs(e){return(131068&e)>>2}function ks(e,t){return-131069&e|t<<2}function As(e){return 1|e}function Os(e,t){const i=e.contentQueries;if(null!==i)for(let n=0;n<i.length;n+=2){const s=i[n],r=i[n+1];if(-1!==r){const i=e.data[r];mi(s),i.contentQueries(2,t[r],r)}}}function Ds(e,t,i){return Nt(t)?t.createElement(e,i):null===i?t.createElement(e):t.createElementNS(i,e)}function Is(e,t,i,n,s,r,o,a,l,c){const h=t.blueprint.slice();return h[0]=s,h[2]=140|n,$t(h),h[3]=h[15]=e,h[8]=i,h[10]=o||e&&e[10],h[11]=a||e&&e[11],h[12]=l||e&&e[12]||null,h[9]=c||e&&e[9]||null,h[6]=r,h[16]=2==t.type?e[16]:h,h}function Rs(e,t,i,n,s,r){const o=i+20,a=e.data[o]||function(e,t,i,n,s,r){const o=ti(),a=ni(),l=a?o:o&&o.parent,c=e.data[i]=Us(0,l&&l!==t?l:null,n,i,s,r);return null===e.firstChild&&(e.firstChild=c),o&&(!a||null!=o.child||null===c.parent&&2!==o.type?a||(o.next=c):o.child=c),c}(e,t,o,n,s,r);return ii(a,!0),a}function Ps(e,t,i){vi(t,t[6]);try{const n=e.viewQuery;null!==n&&hr(1,n,i);const s=e.template;null!==s&&Ns(e,t,s,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Os(e,t),e.staticViewQueries&&hr(2,e.viewQuery,i);const r=e.components;null!==r&&function(e,t){for(let i=0;i<t.length;i++)rr(e,t[i])}(t,r)}catch(n){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),n}finally{t[2]&=-5,Ci()}}function Ms(e,t,i,n){const s=t[2];if(256==(256&s))return;vi(t,t[6]);const r=ri();try{$t(t),Xt.lFrame.bindingIndex=e.bindingStartIndex,null!==i&&Ns(e,t,i,2,n);const o=3==(3&s);if(!r)if(o){const i=e.preOrderCheckHooks;null!==i&&ki(t,i,null)}else{const i=e.preOrderHooks;null!==i&&Ai(t,i,0,null),Oi(t,0)}if(function(e){for(let t=ys(e);null!==t;t=bs(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const i=e[t],n=i[3];0==(1024&i[2])&&Kt(n,1),i[2]|=1024}}}(t),function(e){for(let t=ys(e);null!==t;t=bs(t))for(let e=10;e<t.length;e++){const i=t[e],n=i[1];Gt(i)&&Ms(n,i,n.template,i[8])}}(t),null!==e.contentQueries&&Os(e,t),!r)if(o){const i=e.contentCheckHooks;null!==i&&ki(t,i)}else{const i=e.contentHooks;null!==i&&Ai(t,i,1),Oi(t,1)}!function(e,t){try{const i=e.expandoInstructions;if(null!==i){let n=e.expandoStartIndex,s=-1,r=-1;for(let e=0;e<i.length;e++){const o=i[e];"number"==typeof o?o<=0?(r=0-o,Ei(r),n+=9+i[++e],s=n):n+=o:(null!==o&&(di(n,s),o(2,t[s])),s++)}}}finally{Ei(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let i=0;i<t.length;i++)sr(e,t[i])}(t,a);const l=e.viewQuery;if(null!==l&&hr(2,l,n),!r)if(o){const i=e.viewCheckHooks;null!==i&&ki(t,i)}else{const i=e.viewHooks;null!==i&&Ai(t,i,2),Oi(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),r||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Kt(t[3],-1))}finally{Ci()}}function Ls(e,t,i,n){const s=t[10],r=!ri(),o=zt(t);try{r&&!o&&s.begin&&s.begin(),o&&Ps(e,t,n),Ms(e,t,i,n)}finally{r&&!o&&s.end&&s.end()}}function Ns(e,t,i,n,s){const r=_i();try{Ei(-1),2&n&&t.length>20&&Cs(e,t,0,ri()),i(n,s)}finally{Ei(r)}}function Vs(e,t,i){if(Ot(t)){const n=t.directiveEnd;for(let s=t.directiveStart;s<n;s++){const t=e.data[s];t.contentQueries&&t.contentQueries(1,i[s],s)}}}function Bs(e,t,i){Jt()&&(function(e,t,i,n){const s=i.directiveStart,r=i.directiveEnd;e.firstCreatePass||Xi(i,t),is(n,t);const o=i.initialInputs;for(let a=s;a<r;a++){const n=e.data[a],r=Rt(n);r&&er(t,i,n);const l=on(t,e,a,i);is(l,t),null!==o&&tr(0,a-s,l,n,0,o),r&&(qt(i.index,t)[8]=l)}}(e,t,i,jt(i,t)),128==(128&i.flags)&&function(e,t,i){const n=i.directiveStart,s=i.directiveEnd,r=e.expandoInstructions,o=e.firstCreatePass,a=i.index-20,l=Xt.lFrame.currentDirectiveIndex;try{Ei(a);for(let i=n;i<s;i++){const n=e.data[i],s=t[i];ui(i),null!==n.hostBindings||0!==n.hostVars||null!==n.hostAttrs?$s(n,s):o&&r.push(null)}}finally{Ei(-1),ui(l)}}(e,t,i))}function Fs(e,t,i=jt){const n=t.localNames;if(null!==n){let s=t.index+1;for(let r=0;r<n.length;r+=2){const o=n[r+1],a=-1===o?i(t,e):e[o];e[s++]=a}}}function js(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Hs(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Hs(e,t,i,n,s,r,o,a,l,c){const h=20+n,d=h+s,u=function(e,t){const i=[];for(let n=0;n<t;n++)i.push(n<e?null:gs);return i}(h,d);return u[1]={type:e,id:t,blueprint:u,template:i,queries:null,viewQuery:a,node:null,data:u.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:c,incompleteFirstPass:!1}}function Us(e,t,i,n,s,r){return{type:i,index:n,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qs(e,t,i){for(let n in e)if(e.hasOwnProperty(n)){const s=e[n];(i=null===i?{}:i).hasOwnProperty(n)?i[n].push(t,s):i[n]=[t,s]}return i}function Ws(e,t,i,n,s,r,o,a){const l=jt(t,i);let c,h=t.inputs;!a&&null!=h&&(c=h[n])?(gr(e,i,c,n,s),Dt(t)&&function(e,t){const i=qt(t,e);16&i[2]||(i[2]|=64)}(i,t.index)):3===t.type&&(n=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(n),s=null!=o?o(s,t.tagName||"",n):s,Nt(r)?r.setProperty(l,n,s):Li(n)||(l.setProperty?l.setProperty(n,s):l[n]=s))}function zs(e,t,i,n){let s=!1;if(Jt()){const r=function(e,t,i){const n=e.directiveRegistry;let s=null;if(n)for(let r=0;r<n.length;r++){const o=n[r];us(i,o.selectors,!1)&&(s||(s=[]),en(Xi(i,t),e,o.type),Rt(o)?(2&i.flags&&ns(i),Xs(e,i),s.unshift(o)):s.push(o))}return s}(e,t,i),o=null===n?null:{"":-1};if(null!==r){let n=0;s=!0,Qs(i,e.data.length,r.length);for(let e=0;e<r.length;e++){const t=r[e];t.providersResolver&&t.providersResolver(t)}Ks(e,i,r.length);let a=!1,l=!1;for(let s=0;s<r.length;s++){const c=r[s];i.mergedAttrs=Ni(i.mergedAttrs,c.hostAttrs),Zs(e,t,c),Js(e.data.length-1,c,o),null!==c.contentQueries&&(i.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(i.flags|=128),!a&&(c.onChanges||c.onInit||c.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i.index-20),a=!0),l||!c.onChanges&&!c.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i.index-20),l=!0),Gs(e,c),n+=c.hostVars}!function(e,t){const i=t.directiveEnd,n=e.data,s=t.attrs,r=[];let o=null,a=null;for(let l=t.directiveStart;l<i;l++){const e=n[l],i=e.inputs,c=null===s||as(t)?null:ir(i,s);r.push(c),o=qs(i,l,o),a=qs(e.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=r,t.inputs=o,t.outputs=a}(e,i),Ys(e,t,n)}o&&function(e,t,i){if(t){const n=e.localNames=[];for(let e=0;e<t.length;e+=2){const s=i[t[e+1]];if(null==s)throw new Error(`Export of name '${t[e+1]}' not found!`);n.push(t[e],s)}}}(i,n,o)}return i.mergedAttrs=Ni(i.mergedAttrs,i.attrs),s}function Gs(e,t){const i=e.expandoInstructions;i.push(t.hostBindings),0!==t.hostVars&&i.push(t.hostVars)}function Ys(e,t,i){for(let n=0;n<i;n++)t.push(gs),e.blueprint.push(gs),e.data.push(null)}function $s(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ks(e,t,i){const n=20-t.index,s=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(n,s,i)}function Xs(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Js(e,t,i){if(i){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)i[t.exportAs[n]]=e;Rt(t)&&(i[""]=e)}}function Qs(e,t,i){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+i,e.providerIndexes=t}function Zs(e,t,i){e.data.push(i);const n=i.factory||(i.factory=Tt(i.type)),s=new Ri(n,Rt(i),null);e.blueprint.push(s),t.push(s)}function er(e,t,i){const n=jt(t,e),s=js(i),r=e[10],o=or(e,Is(e,s,null,i.onPush?64:16,n,t,r,r.createRenderer(n,i)));e[t.index]=o}function tr(e,t,i,n,s,r){const o=r[t];if(null!==o){const e=n.setInput;for(let t=0;t<o.length;){const s=o[t++],r=o[t++],a=o[t++];null!==e?n.setInput(i,a,s,r):i[r]=a}}}function ir(e,t){let i=null,n=0;for(;n<t.length;){const s=t[n];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===i&&(i=[]),i.push(s,e[s],t[n+1])),n+=2}else n+=2;else n+=4}return i}function nr(e,t,i,n){return new Array(e,!0,!1,t,null,0,n,i,null,null)}function sr(e,t){const i=qt(t,e);if(Gt(i)){const e=i[1];80&i[2]?Ms(e,i,e.template,i[8]):i[5]>0&&function e(t){for(let n=ys(t);null!==n;n=bs(n))for(let t=10;t<n.length;t++){const i=n[t];if(1024&i[2]){const e=i[1];Ms(e,i,e.template,i[8])}else i[5]>0&&e(i)}const i=t[1].components;if(null!==i)for(let n=0;n<i.length;n++){const s=qt(i[n],t);Gt(s)&&s[5]>0&&e(s)}}(i)}}function rr(e,t){const i=qt(t,e),n=i[1];!function(e,t){for(let i=t.length;i<e.blueprint.length;i++)t.push(e.blueprint[i])}(n,i),Ps(n,i,i[8])}function or(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ar(e){for(;e;){e[2]|=64;const t=vs(e);if(Pt(e)&&!t)return e;e=t}return null}function lr(e,t,i){const n=t[10];n.begin&&n.begin();try{Ms(e,t,e.template,i)}catch(s){throw mr(t,s),s}finally{n.end&&n.end()}}function cr(e){!function(e){for(let t=0;t<e.components.length;t++){const i=e.components[t],n=Wt(i),s=n[1];Ls(s,n,s.template,i)}}(e[8])}function hr(e,t,i){mi(0),t(e,i)}const dr=(()=>Promise.resolve(null))();function ur(e){return e[7]||(e[7]=[])}function pr(e){return e.cleanup||(e.cleanup=[])}function fr(e,t,i){return(null===e||Rt(e))&&(i=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(i[t.index])),i[11]}function mr(e,t){const i=e[9],n=i?i.get(mn,null):null;n&&n.handleError(t)}function gr(e,t,i,n,s){for(let r=0;r<i.length;){const o=i[r++],a=i[r++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,s,n,a):l[a]=s}}function vr(e,t,i){const n=Ft(t,e),s=e[11];Nt(s)?s.setValue(n,i):n.textContent=i}function yr(e,t){const i=t[3];return-1===e.index?At(i)?i:null:i}function br(e,t){const i=yr(e,t);return i?Ir(t[11],i[7]):null}function wr(e,t,i,n,s){if(null!=n){let r,o=!1;At(n)?r=n:kt(n)&&(o=!0,n=n[0]);const a=Bt(n);0===e&&null!==i?null==s?Or(t,i,a):Ar(t,i,a,s||null):1===e&&null!==i?Ar(t,i,a,s||null):2===e?function(e,t,i){const n=Ir(e,t);n&&function(e,t,i,n){Nt(e)?e.removeChild(t,i,n):t.removeChild(i)}(e,n,t,i)}(t,a,o):3===e&&t.destroyNode(a),null!=r&&function(e,t,i,n,s){const r=i[7];r!==Bt(i)&&wr(t,e,n,r,s);for(let o=10;o<i.length;o++){const s=i[o];Nr(s[1],s,e,t,n,r)}}(t,e,r,i,s)}}function Sr(e,t,i,n){const s=br(e.node,t);s&&Nr(e,t,t[11],i?1:2,s,n)}function Cr(e,t){const i=e[9],n=i.indexOf(t);1024&t[2]&&Kt(t[3],-1),i.splice(n,1)}function _r(e,t){if(e.length<=10)return;const i=10+t,n=e[i];if(n){const s=n[17];null!==s&&s!==e&&Cr(s,n),t>0&&(e[i-1][4]=n[4]);const r=ot(e,10+t);Sr(n[1],n,!1,null);const o=r[19];null!==o&&o.detachView(r[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function Er(e,t){if(!(256&t[2])){const i=t[11];Nt(i)&&i.destroyNode&&Nr(e,t,i,3,null,null),function(e){let t=e[13];if(!t)return xr(e[1],e);for(;t;){let i=null;if(kt(t))i=t[13];else{const e=t[10];e&&(i=e)}if(!i){for(;t&&!t[4]&&t!==e;)kt(t)&&xr(t[1],t),t=Tr(t,e);null===t&&(t=e),kt(t)&&xr(t[1],t),i=t&&t[4]}t=i}}(t)}}function Tr(e,t){let i;return kt(e)&&(i=e[6])&&2===i.type?yr(i,e):e[3]===t?null:e[3]}function xr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let n=0;n<i.length;n+=2){const e=t[i[n]];if(!(e instanceof Ri)){const t=i[n+1];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)t[i+1].call(e[t[i]]);else t.call(e)}}}(e,t),function(e,t){const i=e.cleanup;if(null!==i){const e=t[7];for(let n=0;n<i.length-1;n+=2)if("string"==typeof i[n]){const s=i[n+1],r="function"==typeof s?s(t):Bt(t[s]),o=e[i[n+2]],a=i[n+3];"boolean"==typeof a?r.removeEventListener(i[n],o,a):a>=0?e[a]():e[-a].unsubscribe(),n+=2}else i[n].call(e[i[n+1]]);t[7]=null}}(e,t);const i=t[6];i&&3===i.type&&Nt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&At(t[3])){n!==t[3]&&Cr(n,t);const i=t[19];null!==i&&i.detachView(e)}}}function kr(e,t,i){let n=t.parent;for(;null!=n&&(4===n.type||5===n.type);)n=(t=n).parent;if(null==n){const e=i[6];return 2===e.type?br(e,i):i[0]}if(t&&5===t.type&&4&t.flags)return jt(t,i).parentNode;if(2&n.flags){const t=e.data,i=t[t[n.index].directiveStart].encapsulation;if(i!==ut.ShadowDom&&i!==ut.Native)return null}return jt(n,i)}function Ar(e,t,i,n){Nt(e)?e.insertBefore(t,i,n):t.insertBefore(i,n,!0)}function Or(e,t,i){Nt(e)?e.appendChild(t,i):t.appendChild(i)}function Dr(e,t,i,n){null!==n?Ar(e,t,i,n):Or(e,t,i)}function Ir(e,t){return Nt(e)?e.parentNode(t):t.parentNode}function Rr(e,t){if(2===e.type){const i=yr(e,t);return null===i?null:Mr(i.indexOf(t,10)-10,i)}return 4===e.type||5===e.type?jt(e,t):null}function Pr(e,t,i,n){const s=kr(e,n,t);if(null!=s){const e=t[11],r=Rr(n.parent||t[6],t);if(Array.isArray(i))for(let t=0;t<i.length;t++)Dr(e,s,i[t],r);else Dr(e,s,i,r)}}function Mr(e,t){const i=10+e+1;if(i<t.length){const e=t[i],n=e[1].firstChild;if(null!==n)return function e(t,i){if(null!==i){const n=i.type;if(3===n)return jt(i,t);if(0===n)return Mr(-1,t[i.index]);if(4===n||5===n){const n=i.child;if(null!==n)return e(t,n);{const e=t[i.index];return At(e)?Mr(-1,e):Bt(e)}}{const n=t[16],s=n[6],r=vs(n),o=s.projection[i.projection];return null!=o?e(r,o):e(t,i.next)}}return null}(e,n)}return t[7]}function Lr(e,t,i,n,s,r,o){for(;null!=i;){const a=n[i.index],l=i.type;o&&0===t&&(a&&is(Bt(a),n),i.flags|=4),64!=(64&i.flags)&&(4===l||5===l?(Lr(e,t,i.child,n,s,r,!1),wr(t,e,s,a,r)):1===l?Vr(e,t,n,i,s,r):wr(t,e,s,a,r)),i=o?i.projectionNext:i.next}}function Nr(e,t,i,n,s,r){Lr(i,n,e.node.child,t,s,r,!1)}function Vr(e,t,i,n,s,r){const o=i[16],a=o[6].projection[n.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)wr(t,e,s,a[l],r);else Lr(e,t,a,o[3],s,r,!0)}function Br(e,t,i){Nt(e)?e.setAttribute(t,"style",i):t.style.cssText=i}function Fr(e,t,i){Nt(e)?""===i?e.removeAttribute(t,"class"):e.setAttribute(t,"class",i):t.className=i}class jr{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const e=this._lView;return null==e[0]?function e(t,i,n,s,r=!1){for(;null!==n;){const o=i[n.index];if(null!==o&&s.push(Bt(o)),At(o))for(let t=10;t<o.length;t++){const i=o[t],n=i[1].firstChild;null!==n&&e(i[1],i,n,s)}const a=n.type;if(4===a||5===a)e(t,i,n.child,s);else if(1===a){const t=i[16],r=t[6].projection[n.projection];if(Array.isArray(r))s.push(...r);else{const i=vs(t);e(i[1],i,r,s,!0)}}n=r?n.projectionNext:n.next}return s}(e[1],e,e[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Er(this._lView[1],this._lView)}onDestroy(e){var t,i,n;t=this._lView[1],n=e,ur(i=this._lView).push(n),t.firstCreatePass&&pr(t).push(i[7].length-1,null)}markForCheck(){ar(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,i){oi(!0);try{lr(e,t,i)}finally{oi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,Nr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Hr extends jr{constructor(e){super(e),this._view=e}detectChanges(){cr(this._view)}checkNoChanges(){!function(e){oi(!0);try{cr(e)}finally{oi(!1)}}(this._view)}get context(){return null}}let Ur,qr,Wr;function zr(e,t,i){return Ur||(Ur=class extends e{}),new Ur(jt(t,i))}function Gr(e,t,i,n){return qr||(qr=class extends e{constructor(e,t,i){super(),this._declarationView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Is(this._declarationView,t,e,16,null,t.node);i[17]=this._declarationView[this._declarationTContainer.index];const n=this._declarationView[19];return null!==n&&(i[19]=n.createEmbeddedView(t)),Ps(t,i,e),new jr(i)}}),0===i.type?new qr(n,i,zr(t,i,n)):null}function Yr(e,t,i,n){let s;Wr||(Wr=class extends e{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostView=i}get element(){return zr(t,this._hostTNode,this._hostView)}get injector(){return new cn(this._hostTNode,this._hostView)}get parentInjector(){const e=Zi(this._hostTNode,this._hostView),t=Hi(e,this._hostView),i=function(e,t,i){if(i.parent&&-1!==i.parent.injectorIndex){const e=i.parent.injectorIndex;let t=i.parent;for(;null!=t.parent&&e==t.parent.injectorIndex;)t=t.parent;return t}let n=ji(e),s=t,r=t[6];for(;n>1;)s=s[15],r=s[6],n--;return r}(e,this._hostView,this._hostTNode);return Bi(e)&&null!=i?new cn(i,t):new cn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const n=e.createEmbeddedView(t||{});return this.insert(n,i),n}createComponent(e,t,i,n,s){const r=i||this.parentInjector;if(!s&&null==e.ngModule&&r){const e=r.get(it,null);e&&(s=e)}const o=e.create(r,n,void 0,s);return this.insert(o.hostView,t),o}insert(e,t){const i=e._lView,n=i[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),At(i[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=i[3],n=new Wr(t,t[6],t[3]);n.detach(n.indexOf(e))}}const s=this._adjustIndex(t);return function(e,t,i,n){const s=10+n,r=i.length;n>0&&(i[s-1][4]=t),n<r-10?(t[4]=i[s],rt(i,10+n,t)):(i.push(t),t[4]=null),t[3]=i;const o=t[17];null!==o&&i!==o&&function(e,t){const i=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===i?e[9]=[t]:i.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(n,i,this._lContainer,s),Sr(n,i,!0,Mr(s,this._lContainer)),e.attachToViewContainerRef(this),rt(this._lContainer[8],s,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1);!function(e,t){const i=_r(e,t);i&&Er(i[1],i)}(this._lContainer,t),ot(this._lContainer[8],t)}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),i=_r(this._lContainer,t);return i&&null!=ot(this._lContainer[8],t)?new jr(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const r=n[i.index];if(At(r))s=r;else{let e;if(4===i.type)e=Bt(r);else if(e=n[11].createComment(""),Pt(n)){const t=n[11],s=jt(i,n);Ar(t,Ir(t,s),e,function(e,t){return Nt(e)?e.nextSibling(t):t.nextSibling}(t,s))}else Pr(n[1],n,e,i);n[i.index]=s=nr(r,n,e,i),or(n,s)}return new Wr(s,i,n)}function $r(e=!1){return function(e,t,i){if(!i&&Dt(e)){const i=qt(e.index,t);return new jr(i,i)}return 3===e.type||0===e.type||4===e.type||5===e.type?new jr(t[16],t):null}(ti(),Qt(),e)}let Kr=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Xr(),e})();const Xr=$r,Jr=new He("Set Injector scope."),Qr={},Zr={},eo=[];let to=void 0;function io(){return void 0===to&&(to=new tt),to}function no(e,t=null,i=null,n){return new so(e,i,t||io(),n)}class so{constructor(e,t,i,n=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&st(t,i=>this.processProvider(i,e,t)),st([e],e=>this.processInjectorType(e,[],s)),this.records.set(Ue,ao(void 0,this));const r=this.records.get(Jr);this.scope=null!=r?r.value:null,this.source=n||("object"==typeof e?null:_e(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,i=qe,n=ce.Default){this.assertNotDestroyed();const s=$e(this);try{if(!(n&ce.SkipSelf)){let e=this.records.get(t);if(void 0===e){const i=("function"==typeof(r=t)||"object"==typeof r&&r instanceof He)&&me(t);e=i&&this.injectableDefInScope(i)?ao(ro(t),Qr):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ce.Self?io():this.parent).get(t,i=n&ce.Optional&&i===qe?null:i)}catch(e){if("NullInjectorError"===e.name){if((e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(_e(t)),s)throw e;return function(e,t,i,n){const s=e.ngTempTokenPath;throw t.__source&&s.unshift(t.__source),e.message=function(e,t,i,n=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let s=_e(t);if(Array.isArray(t))s=t.map(_e).join(" -> ");else if("object"==typeof t){let e=[];for(let i in t)if(t.hasOwnProperty(i)){let n=t[i];e.push(i+":"+("string"==typeof n?JSON.stringify(n):_e(n)))}s=`{${e.join(", ")}}`}return`${i}${n?"("+n+")":""}[${s}]: ${e.replace(We,"\n  ")}`}("\n"+e.message,s,i,n),e.ngTokenPath=s,e.ngTempTokenPath=null,e}(e,t,"R3InjectorError",this.source)}throw e}finally{$e(s)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,i)=>e.push(_e(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=ke(e)))return!1;let n=ve(e);const s=null==n&&e.ngModule||void 0,r=void 0===s?e:s,o=-1!==i.indexOf(r);if(void 0!==s&&(n=ve(s)),null==n)return!1;if(null!=n.imports&&!o){let e;i.push(r);try{st(n.imports,n=>{this.processInjectorType(n,t,i)&&(void 0===e&&(e=[]),e.push(n))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:i,providers:n}=e[t];st(n,e=>this.processProvider(e,i,n||eo))}}this.injectorDefTypes.add(r),this.records.set(r,ao(n.factory,Qr));const a=n.providers;if(null!=a&&!o){const t=e;st(a,e=>this.processProvider(e,t,a))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,i){let n=co(e=ke(e))?e:ke(e&&e.provide);const s=function(e,t,i){return lo(e)?ao(void 0,e.useValue):ao(oo(e,t,i),Qr)}(e,t,i);if(co(e)||!0!==e.multi){const e=this.records.get(n);e&&void 0!==e.multi&&ss()}else{let t=this.records.get(n);t?void 0===t.multi&&ss():(t=ao(void 0,Qr,!0),t.factory=()=>et(t.multi),this.records.set(n,t)),n=e,t.multi.push(e)}this.records.set(n,s)}hydrate(e,t){var i;return t.value===Zr?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(_e(e)):t.value===Qr&&(t.value=Zr,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(i=t.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function ro(e){const t=me(e),i=null!==t?t.factory:Tt(e);if(null!==i)return i;const n=ve(e);if(null!==n)return n.factory;if(e instanceof He)throw new Error(`Token ${_e(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const i=at(t,"?");throw new Error(`Can't resolve all parameters for ${_e(e)}: (${i.join(", ")}).`)}const i=function(e){const t=e&&(e[ye]||e[Se]||e[we]&&e[we]());if(t){const i=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${i}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${i}" class.`),t}return null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new Error("unreachable")}function oo(e,t,i){let n=void 0;if(co(e)){const t=ke(e);return Tt(t)||ro(t)}if(lo(e))n=()=>ke(e.useValue);else if((s=e)&&s.useFactory)n=()=>e.useFactory(...et(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))n=()=>Je(ke(e.useExisting));else{const s=ke(e&&(e.useClass||e.provide));if(s||function(e,t,i){let n="";throw e&&t&&(n=` - only instances of Provider and Type are allowed, got: [${t.map(e=>e==i?"?"+i+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${_e(e)}'`+n)}(t,i,e),!function(e){return!!e.deps}(e))return Tt(s)||ro(s);n=()=>new s(...et(e.deps))}var s;return n}function ao(e,t,i=!1){return{factory:e,value:t,multi:i?[]:void 0}}function lo(e){return null!==e&&"object"==typeof e&&ze in e}function co(e){return"function"==typeof e}const ho=function(e,t,i){return function(e,t=null,i=null,n){const s=no(e,t,i,n);return s._resolveInjectorDefTypes(),s}({name:i},t,e,i)};let uo=(()=>{class e{static create(e,t){return Array.isArray(e)?ho(e,t,""):ho(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=qe,e.NULL=new tt,e.\u0275prov=ue({token:e,providedIn:"any",factory:()=>Je(Ue)}),e.__NG_ELEMENT_ID__=-1,e})();const po=new He("AnalyzeForEntryComponents");let fo=new Map;const mo=new Set;function go(e){return"string"==typeof e?e:e.text()}function vo(e,t,i){let n=i?e.styles:null,s=i?e.classes:null,r=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?r=e:1==r?s=Ee(s,e):2==r&&(n=Ee(n,e+": "+t[++o]+";"))}i?e.styles=n:e.stylesWithoutHost=n,i?e.classes=s:e.classesWithoutHost=s}let yo=null;function bo(){if(!yo){const e=Pe.Symbol;if(e&&e.iterator)yo=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(yo=i)}}}return yo}function wo(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}class So{constructor(e){this.wrapped=e}static wrap(e){return new So(e)}static unwrap(e){return So.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof So}}function Co(e){return!!_o(e)&&(Array.isArray(e)||!(e instanceof Map)&&bo()in e)}function _o(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Eo(e,t,i){return e[t]=i}function To(e,t,i){return!Object.is(e[t],i)&&(e[t]=i,!0)}function xo(e,t,i,n){const s=To(e,t,i);return To(e,t+1,n)||s}function ko(e,t,i,n){const s=Qt();return To(s,ci(),t)&&(Zt(),function(e,t,i,n,s,r){const o=jt(e,t),a=t[11];if(null==n)Nt(a)?a.removeAttribute(o,i,r):o.removeAttribute(i);else{const t=null==s?Ui(n):s(n,e.tagName||"",i);Nt(a)?a.setAttribute(o,i,t,r):r?o.setAttributeNS(r,i,t):o.setAttribute(i,t)}}(Ti(),s,e,t,i,n)),ko}function Ao(e,t,i,n){return To(e,ci(),i)?t+Ui(i)+n:gs}function Oo(e,t,i,n,s,r,o,a){const l=Qt(),c=Zt(),h=e+20,d=c.firstCreatePass?function(e,t,i,n,s,r,o,a,l){const c=t.consts,h=Rs(t,i[6],e,0,o||null,Yt(c,a));zs(t,i,h,Yt(c,l)),xi(t,h);const d=h.tViews=Hs(2,-1,n,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c),u=Us(0,null,2,-1,null,null);return u.injectorIndex=h.injectorIndex,d.node=u,null!==t.queries&&(t.queries.template(t,h),d.queries=t.queries.embeddedTView(h)),h}(e,c,l,t,i,n,s,r,o):c.data[h];ii(d,!1);const u=l[11].createComment("");Pr(c,l,u,d),is(u,l),or(l,l[h]=nr(u,l,u,d)),It(d)&&Bs(c,l,d),null!=o&&Fs(l,d,a)}function Do(e){return Ut(Xt.lFrame.contextLView,e)}function Io(e,t=ce.Default){const i=Qt();return null==i?Je(e,t):tn(ti(),i,ke(e),t)}function Ro(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const i=e.attrs;if(i){const e=i.length;let n=0;for(;n<e;){const s=i[n];if(Mi(s))break;if(0===s)n+=2;else if("number"==typeof s)for(n++;n<e&&"string"==typeof i[n];)n++;else{if(s===t)return i[n+1];n+=2}}}return null}(ti(),e)}function Po(){throw new Error("invalid")}function Mo(e,t,i){const n=Qt();return To(n,ci(),t)&&Ws(Zt(),Ti(),n,e,t,n[11],i,!1),Mo}function Lo(e,t,i,n,s){const r=s?"class":"style";gr(e,i,t.inputs[r],r,n)}function No(e,t,i,n){const s=Qt(),r=Zt(),o=20+e,a=s[11],l=s[o]=Ds(t,a,Xt.lFrame.currentNamespace),c=r.firstCreatePass?function(e,t,i,n,s,r,o){const a=t.consts,l=Yt(a,r),c=Rs(t,i[6],e,3,s,l);return zs(t,i,c,Yt(a,o)),null!==c.attrs&&vo(c,c.attrs,!1),null!==c.mergedAttrs&&vo(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(e,r,s,0,t,i,n):r.data[o];ii(c,!0);const h=c.mergedAttrs;null!==h&&Pi(a,l,h);const d=c.classes;null!==d&&Fr(a,l,d);const u=c.styles;null!==u&&Br(a,l,u),Pr(r,s,l,c),0===Xt.lFrame.elementDepthCount&&is(l,s),Xt.lFrame.elementDepthCount++,It(c)&&(Bs(r,s,c),Vs(r,c,s)),null!==n&&Fs(s,c)}function Vo(){let e=ti();ni()?si():(e=e.parent,ii(e,!1));const t=e;Xt.lFrame.elementDepthCount--;const i=Zt();i.firstCreatePass&&(xi(i,e),Ot(e)&&i.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Lo(i,t,Qt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Lo(i,t,Qt(),t.stylesWithoutHost,!1)}function Bo(e,t,i,n){No(e,t,i,n),Vo()}function Fo(e,t,i){const n=Qt(),s=Zt(),r=e+20,o=s.firstCreatePass?function(e,t,i,n,s){const r=t.consts,o=Yt(r,n),a=Rs(t,i[6],e,4,"ng-container",o);return null!==o&&vo(a,o,!0),zs(t,i,a,Yt(r,s)),null!==t.queries&&t.queries.elementStart(t,a),a}(e,s,n,t,i):s.data[r];ii(o,!0);const a=n[r]=n[11].createComment("");Pr(s,n,a,o),is(a,n),It(o)&&(Bs(s,n,o),Vs(s,o,n)),null!=i&&Fs(n,o)}function jo(){let e=ti();const t=Zt();ni()?si():(e=e.parent,ii(e,!1)),t.firstCreatePass&&(xi(t,e),Ot(e)&&t.queries.elementEnd(e))}function Ho(){return Qt()}function Uo(e){return!!e&&"function"==typeof e.then}function qo(e){return!!e&&"function"==typeof e.subscribe}function Wo(e,t,i=!1,n){const s=Qt(),r=Zt(),o=ti();return Go(r,s,s[11],o,e,t,i,n),Wo}function zo(e,t,i=!1,n){const s=ti(),r=Qt(),o=Zt();return Go(o,r,fr(pi(o.data),s,r),s,e,t,i,n),zo}function Go(e,t,i,n,s,r,o=!1,a){const l=It(n),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),h=ur(t);let d=!0;if(3===n.type){const u=jt(n,t),p=a?a(u):pt,f=p.target||u,m=h.length,g=a?e=>a(Bt(e[n.index])).target:n.index;if(Nt(i)){let o=null;if(!a&&l&&(o=function(e,t,i,n){const s=e.cleanup;if(null!=s)for(let r=0;r<s.length-1;r+=2){const e=s[r];if(e===i&&s[r+1]===n){const e=t[7],i=s[r+2];return e.length>i?e[i]:null}"string"==typeof e&&(r+=2)}return null}(e,t,s,n.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=r,o.__ngLastListenerFn__=r,d=!1;else{r=$o(n,t,r,!1);const e=i.listen(p.name||f,s,r);h.push(r,e),c&&c.push(s,g,m,m+1)}}else r=$o(n,t,r,!0),f.addEventListener(s,r,o),h.push(r),c&&c.push(s,g,m,o)}const u=n.outputs;let p;if(d&&null!==u&&(p=u[s])){const e=p.length;if(e)for(let i=0;i<e;i+=2){const e=t[p[i]][p[i+1]].subscribe(r),o=h.length;h.push(r,e),c&&c.push(s,n.index,o,-(o+1))}}}function Yo(e,t,i){try{return!1!==t(i)}catch(n){return mr(e,n),!1}}function $o(e,t,i,n){return function s(r){if(r===Function)return i;const o=2&e.flags?qt(e.index,t):t;0==(32&t[2])&&ar(o);let a=Yo(t,i,r),l=s.__ngNextListenerFn__;for(;l;)a=Yo(t,l,r)&&a,l=l.__ngNextListenerFn__;return n&&!1===a&&(r.preventDefault(),r.returnValue=!1),a}}function Ko(e=1){return function(e){return(Xt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Xt.lFrame.contextLView))[8]}(e)}function Xo(e,t){let i=null;const n=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let s=0;s<t.length;s++){const r=t[s];if("*"!==r){if(null===n?us(e,r,!0):ps(n,r))return s}else i=s}return i}function Jo(e){const t=Qt()[16][6];if(!t.projection){const i=t.projection=at(e?e.length:1,null),n=i.slice();let s=t.child;for(;null!==s;){const t=e?Xo(s,e):0;null!==t&&(n[t]?n[t].projectionNext=s:i[t]=s,n[t]=s),s=s.next}}}function Qo(e,t=0,i){const n=Qt(),s=Zt(),r=Rs(s,n[6],e,1,null,i||null);null===r.projection&&(r.projection=t),si(),function(e,t,i){Vr(t[11],0,t,i,kr(e,i,t),Rr(i.parent||t[6],t))}(s,n,r)}const Zo=[];function ea(e,t,i,n,s){const r=e[i+1],o=null===t;let a=n?Es(r):xs(r),l=!1;for(;0!==a&&(!1===l||o);){const i=e[a+1];ta(e[a],t)&&(l=!0,e[a+1]=n?As(i):Ts(i)),a=n?Es(i):xs(i)}l&&(e[i+1]=n?Ts(r):As(r))}function ta(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ht(e,t)>=0}const ia={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function na(e){return e.substring(ia.key,ia.keyEnd)}function sa(e,t){const i=ia.textEnd;return i===t?-1:(t=ia.keyEnd=function(e,t,i){for(;t<i&&e.charCodeAt(t)>32;)t++;return t}(e,ia.key=t,i),ra(e,t,i))}function ra(e,t,i){for(;t<i&&e.charCodeAt(t)<=32;)t++;return t}function oa(e,t,i){return ha(e,t,i,!1),oa}function aa(e,t){return ha(e,t,null,!0),aa}function la(e){da(lt,ca,e,!0)}function ca(e,t){for(let i=function(e){return function(e){ia.key=0,ia.keyEnd=0,ia.value=0,ia.valueEnd=0,ia.textEnd=e.length}(e),sa(e,ra(e,0,ia.textEnd))}(t);i>=0;i=sa(t,i))lt(e,na(t),!0)}function ha(e,t,i,n){const s=Qt(),r=Zt(),o=hi(2);if(r.firstUpdatePass&&pa(r,e,o,n),t!==gs&&To(s,o,t)){let a;null==i&&(a=function(){const e=Xt.lFrame;return null===e?null:e.currentSanitizer}())&&(i=a),ga(r,r.data[_i()+20],s,s[11],e,s[o+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=_e(Cn(e)))),e}(t,i),n,o)}}function da(e,t,i,n){const s=Zt(),r=hi(2);s.firstUpdatePass&&pa(s,null,r,n);const o=Qt();if(i!==gs&&To(o,r,i)){const a=s.data[_i()+20];if(ba(a,n)&&!ua(s,r)){let e=n?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(i=Ee(e,i||"")),Lo(s,a,o,i,n)}else!function(e,t,i,n,s,r,o,a){s===gs&&(s=Zo);let l=0,c=0,h=0<s.length?s[0]:null,d=0<r.length?r[0]:null;for(;null!==h||null!==d;){const u=l<s.length?s[l+1]:void 0,p=c<r.length?r[c+1]:void 0;let f=null,m=void 0;h===d?(l+=2,c+=2,u!==p&&(f=d,m=p)):null===d||null!==h&&h<d?(l+=2,f=h):(c+=2,f=d,m=p),null!==f&&ga(e,t,i,n,f,m,o,a),h=l<s.length?s[l]:null,d=c<r.length?r[c]:null}}(s,a,o,o[11],o[r+1],o[r+1]=function(e,t,i){if(null==i||""===i)return Zo;const n=[],s=Cn(i);if(Array.isArray(s))for(let r=0;r<s.length;r++)e(n,s[r],!0);else if("object"==typeof s)for(const r in s)s.hasOwnProperty(r)&&e(n,r,s[r]);else"string"==typeof s&&t(n,s);return n}(e,t,i),n,r)}}function ua(e,t){return t>=e.expandoStartIndex}function pa(e,t,i,n){const s=e.data;if(null===s[i+1]){const r=s[_i()+20],o=ua(e,i);ba(r,n)&&null===t&&!o&&(t=!1),t=function(e,t,i,n){const s=pi(e);let r=n?t.residualClasses:t.residualStyles;if(null===s)0===(n?t.classBindings:t.styleBindings)&&(i=ma(i=fa(null,e,t,i,n),t.attrs,n),r=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==s)if(i=fa(s,e,t,i,n),null===r){let i=function(e,t,i){const n=i?t.classBindings:t.styleBindings;if(0!==xs(n))return e[Es(n)]}(e,t,n);void 0!==i&&Array.isArray(i)&&(i=fa(null,e,t,i[1],n),i=ma(i,t.attrs,n),function(e,t,i,n){e[Es(i?t.classBindings:t.styleBindings)]=n}(e,t,n,i))}else r=function(e,t,i){let n=void 0;const s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++)n=ma(n,e[r].hostAttrs,i);return ma(n,t.attrs,i)}(e,t,n)}return void 0!==r&&(n?t.residualClasses=r:t.residualStyles=r),i}(s,r,t,n),function(e,t,i,n,s,r){let o=r?t.classBindings:t.styleBindings,a=Es(o),l=xs(o);e[n]=i;let c,h=!1;if(Array.isArray(i)){const e=i;c=e[1],(null===c||ht(e,c)>0)&&(h=!0)}else c=i;if(s)if(0!==l){const t=Es(e[a+1]);e[n+1]=_s(t,a),0!==t&&(e[t+1]=ks(e[t+1],n)),e[a+1]=131071&e[a+1]|n<<17}else e[n+1]=_s(a,0),0!==a&&(e[a+1]=ks(e[a+1],n)),a=n;else e[n+1]=_s(l,0),0===a?a=n:e[l+1]=ks(e[l+1],n),l=n;h&&(e[n+1]=Ts(e[n+1])),ea(e,c,n,!0),ea(e,c,n,!1),function(e,t,i,n,s){const r=s?e.residualClasses:e.residualStyles;null!=r&&"string"==typeof t&&ht(r,t)>=0&&(i[n+1]=As(i[n+1]))}(t,c,e,n,r),o=_s(a,l),r?t.classBindings=o:t.styleBindings=o}(s,r,t,i,o,n)}}function fa(e,t,i,n,s){let r=null;const o=i.directiveEnd;let a=i.directiveStylingLast;for(-1===a?a=i.directiveStart:a++;a<o&&(r=t[a],n=ma(n,r.hostAttrs,s),r!==e);)a++;return null!==e&&(i.directiveStylingLast=a),n}function ma(e,t,i){const n=i?1:2;let s=-1;if(null!==t)for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?s=o:s===n&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),lt(e,o,!!i||t[++r]))}return void 0===e?null:e}function ga(e,t,i,n,s,r,o,a){if(3!==t.type)return;const l=e.data,c=l[a+1];ya(1==(1&c)?va(l,t,i,s,xs(c),o):void 0)||(ya(r)||function(e){return 2==(2&e)}(c)&&(r=va(l,null,i,s,a,o)),function(e,t,i,n,s){const r=Nt(e);if(t)s?r?e.addClass(i,n):i.classList.add(n):r?e.removeClass(i,n):i.classList.remove(n);else{const t=-1==n.indexOf("-")?void 0:2;null==s?r?e.removeStyle(i,n,t):i.style.removeProperty(n):r?e.setStyle(i,n,s,t):i.style.setProperty(n,s)}}(n,o,Ft(_i(),i),s,r))}function va(e,t,i,n,s,r){const o=null===t;let a=void 0;for(;s>0;){const t=e[s],r=Array.isArray(t),l=r?t[1]:t,c=null===l;let h=i[s+1];h===gs&&(h=c?Zo:void 0);let d=c?ct(h,n):l===n?h:void 0;if(r&&!ya(d)&&(d=ct(t,n)),ya(d)&&(a=d,o))return a;const u=e[s+1];s=o?Es(u):xs(u)}if(null!==t){let e=r?t.residualClasses:t.residualStyles;null!=e&&(a=ct(e,n))}return a}function ya(e){return void 0!==e}function ba(e,t){return 0!=(e.flags&(t?16:32))}function wa(e,t=""){const i=Qt(),n=Zt(),s=e+20,r=n.firstCreatePass?Rs(n,i[6],e,3,null,null):n.data[s],o=i[s]=function(e,t){return Nt(t)?t.createText(e):t.createTextNode(e)}(t,i[11]);Pr(n,i,o,r),ii(r,!1)}function Sa(e){return Ca("",e,""),Sa}function Ca(e,t,i){const n=Qt(),s=Ao(n,e,t,i);return s!==gs&&vr(n,_i(),s),Ca}function _a(e,t,i,n,s){const r=Qt(),o=function(e,t,i,n,s,r){const o=xo(e,li(),i,s);return hi(2),o?t+Ui(i)+n+Ui(s)+r:gs}(r,e,t,i,n,s);return o!==gs&&vr(r,_i(),o),_a}function Ea(e,t,i,n,s,r,o){const a=Qt(),l=function(e,t,i,n,s,r,o,a){const l=function(e,t,i,n,s){const r=xo(e,t,i,n);return To(e,t+2,s)||r}(e,li(),i,s,o);return hi(3),l?t+Ui(i)+n+Ui(s)+r+Ui(o)+a:gs}(a,e,t,i,n,s,r,o);return l!==gs&&vr(a,_i(),l),Ea}function Ta(e,t,i,n,s,r,o,a,l,c,h){const d=Qt(),u=function(e,t,i,n,s,r,o,a,l,c,h,d){const u=li();let p=function(e,t,i,n,s,r){const o=xo(e,t,i,n);return xo(e,t+2,s,r)||o}(e,u,i,s,o,l);return p=To(e,u+4,h)||p,hi(5),p?t+Ui(i)+n+Ui(s)+r+Ui(o)+a+Ui(l)+c+Ui(h)+d:gs}(d,e,t,i,n,s,r,o,a,l,c,h);return u!==gs&&vr(d,_i(),u),Ta}function xa(e,t,i){const n=Qt();return To(n,ci(),t)&&Ws(Zt(),Ti(),n,e,t,n[11],i,!0),xa}function ka(e,t,i){const n=Qt();if(To(n,ci(),t)){const s=Zt(),r=Ti();Ws(s,r,n,e,t,fr(pi(s.data),r,n),i,!0)}return ka}function Aa(e,t){const i=Wt(e)[1],n=i.data.length-1;xi(i,{directiveStart:n,directiveEnd:n+1})}function Oa(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,i=!0;const n=[e];for(;t;){let s=void 0;if(Rt(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");s=t.\u0275dir}if(s){if(i){n.push(s);const t=e;t.inputs=Da(e.inputs),t.declaredInputs=Da(e.declaredInputs),t.outputs=Da(e.outputs);const i=s.hostBindings;i&&Pa(e,i);const r=s.viewQuery,o=s.contentQueries;if(r&&Ia(e,r),o&&Ra(e,o),de(e.inputs,s.inputs),de(e.declaredInputs,s.declaredInputs),de(e.outputs,s.outputs),Rt(s)&&s.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(s.data.animation)}t.afterContentChecked=t.afterContentChecked||s.afterContentChecked,t.afterContentInit=e.afterContentInit||s.afterContentInit,t.afterViewChecked=e.afterViewChecked||s.afterViewChecked,t.afterViewInit=e.afterViewInit||s.afterViewInit,t.doCheck=e.doCheck||s.doCheck,t.onDestroy=e.onDestroy||s.onDestroy,t.onInit=e.onInit||s.onInit}const t=s.features;if(t)for(let n=0;n<t.length;n++){const s=t[n];s&&s.ngInherit&&s(e),s===Oa&&(i=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,i=null;for(let n=e.length-1;n>=0;n--){const s=e[n];s.hostVars=t+=s.hostVars,s.hostAttrs=Ni(s.hostAttrs,i=Ni(i,s.hostAttrs))}}(n)}function Da(e){return e===pt?{}:e===ft?[]:e}function Ia(e,t){const i=e.viewQuery;e.viewQuery=i?(e,n)=>{t(e,n),i(e,n)}:t}function Ra(e,t){const i=e.contentQueries;e.contentQueries=i?(e,n,s)=>{t(e,n,s),i(e,n,s)}:t}function Pa(e,t){const i=e.hostBindings;e.hostBindings=i?(e,n)=>{t(e,n),i(e,n)}:t}class Ma{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function La(e){e.type.prototype.ngOnChanges&&(e.setInput=Na,e.onChanges=function(){const e=Va(this),t=e&&e.current;if(t){const i=e.previous;if(i===pt)e.previous=t;else for(let e in t)i[e]=t[e];e.current=null,this.ngOnChanges(t)}})}function Na(e,t,i,n){const s=Va(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:pt,current:null}),r=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[i],l=o[a];r[a]=new Ma(l&&l.currentValue,t,o===pt),e[n]=t}function Va(e){return e.__ngSimpleChanges__||null}function Ba(e,t,i,n,s){if(e=ke(e),Array.isArray(e))for(let r=0;r<e.length;r++)Ba(e[r],t,i,n,s);else{const r=Zt(),o=Qt();let a=co(e)?e:ke(e.provide),l=oo(e);const c=ti(),h=65535&c.providerIndexes,d=c.directiveStart,u=c.providerIndexes>>16;if(co(e)||!e.multi){const n=new Ri(l,s,Io),p=Ha(a,t,s?h:h+u,d);-1===p?(en(Xi(c,o),r,a),Fa(r,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=65536),i.push(n),o.push(n)):(i[p]=n,o[p]=n)}else{const p=Ha(a,t,h+u,d),f=Ha(a,t,h,h+u),m=p>=0&&i[p],g=f>=0&&i[f];if(s&&!g||!s&&!m){en(Xi(c,o),r,a);const h=function(e,t,i,n,s){const r=new Ri(e,i,Io);return r.multi=[],r.index=t,r.componentProviders=0,ja(r,s,n&&!i),r}(s?qa:Ua,i.length,s,n,l);!s&&g&&(i[f].providerFactory=h),Fa(r,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,s&&(c.providerIndexes+=65536),i.push(h),o.push(h)}else Fa(r,e,p>-1?p:f,ja(i[s?f:p],l,!s&&n));!s&&n&&g&&i[f].componentProviders++}}}function Fa(e,t,i,n){const s=co(t);if(s||t.useClass){const r=(t.useClass||t).prototype.ngOnDestroy;if(r){const o=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){const e=o.indexOf(i);-1===e?o.push(i,[n,r]):o[e+1].push(n,r)}else o.push(i,r)}}}function ja(e,t,i){return i&&e.componentProviders++,e.multi.push(t)-1}function Ha(e,t,i,n){for(let s=i;s<n;s++)if(t[s]===e)return s;return-1}function Ua(e,t,i,n){return Wa(this.multi,[])}function qa(e,t,i,n){const s=this.multi;let r;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=on(i,i[1],this.providerFactory.index,n);r=t.slice(0,e),Wa(s,r);for(let i=e;i<t.length;i++)r.push(t[i])}else r=[],Wa(s,r);return r}function Wa(e,t){for(let i=0;i<e.length;i++)t.push((0,e[i])());return t}function za(e,t=[]){return i=>{i.providersResolver=(i,n)=>function(e,t,i){const n=Zt();if(n.firstCreatePass){const s=Rt(e);Ba(i,n.data,n.blueprint,s,!0),Ba(t,n.data,n.blueprint,s,!1)}}(i,n?n(e):e,t)}}La.ngInherit=!0;class Ga{}class Ya{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${_e(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let $a=(()=>{class e{}return e.NULL=new Ya,e})(),Ka=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Xa(e),e})();const Xa=function(e){return zr(e,ti(),Qt())};class Ja{}const Qa=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let Za=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>el(),e})();const el=function(){const e=Qt(),t=qt(ti().index,e);return function(e){const t=e[11];if(Nt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(kt(t)?t:e)};let tl=(()=>{class e{}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>null}),e})();class il{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const nl=new il("9.1.12");class sl{constructor(){}supports(e){return Co(e)}create(e){return new ol(e)}}const rl=(e,t)=>t;class ol{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rl}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,n=0,s=null;for(;t||i;){const r=!i||t&&t.currentIndex<hl(i,n,s)?t:i,o=hl(r,n,s),a=r.currentIndex;if(r===i)n--,i=i._nextRemoved;else if(t=t._next,null==r.previousIndex)n++;else{s||(s=[]);const e=o-n,t=a-n;if(e!=t){for(let i=0;i<e;i++){const n=i<s.length?s[i]:s[i]=0,r=n+i;t<=r&&r<e&&(s[i]=n+1)}s[r.previousIndex]=t-e}}o!==a&&e(r,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Co(e))throw new Error(`Error trying to diff '${_e(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,i,n,s=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)i=e[t],n=this._trackByFn(t,i),null!==s&&wo(s.trackById,n)?(r&&(s=this._verifyReinsertion(s,i,n,t)),wo(s.item,i)||this._addIdentityChange(s,i)):(s=this._mismatch(s,i,n,t),r=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let i=0;i<e.length;i++)t(e[i]);else{const i=e[bo()]();let n;for(;!(n=i.next()).done;)t(n.value)}}(e,e=>{n=this._trackByFn(t,e),null!==s&&wo(s.trackById,n)?(r&&(s=this._verifyReinsertion(s,e,n,t)),wo(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,n,t),r=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,n){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,n))?(wo(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,n)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(wo(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,n)):e=this._addAfter(new al(t,i),s,n),e}_verifyReinsertion(e,t,i,n){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,n):e.currentIndex!=n&&(e.currentIndex=n,this._addToMoves(e,n)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const n=e._prevRemoved,s=e._nextRemoved;return null===n?this._removalsHead=s:n._nextRemoved=s,null===s?this._removalsTail=n:s._prevRemoved=n,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const n=null===t?this._itHead:t._next;return e._next=n,e._prev=t,null===n?this._itTail=e:n._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new cl),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class al{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ll{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&wo(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class cl{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new ll,this.map.set(t,i)),i.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hl(e,t,i){const n=e.previousIndex;if(null===n)return n;let s=0;return i&&n<i.length&&(s=i[n]),n+t+s}class dl{constructor(){}supports(e){return e instanceof Map||_o(e)}create(){return new ul}}class ul{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||_o(e)))throw new Error(`Error trying to diff '${_e(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const n=this._getOrCreateRecordForKey(i,e);t=this._insertBeforeOrAppend(t,n)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const n=i._prev,s=i._next;return n&&(n._next=s),s&&(s._prev=n),i._next=null,i._prev=null,i}const i=new pl(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){wo(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class pl{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let fl=(()=>{class e{constructor(e){this.factories=e}static create(t,i){if(null!=i){const e=i.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>{if(!i)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,i)},deps:[[e,new le,new oe]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${i=e,i.name||typeof i}'`);var i}}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e([new sl])}),e})(),ml=(()=>{class e{constructor(e){this.factories=e}static create(t,i){if(i){const e=i.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>{if(!i)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,i)},deps:[[e,new le,new oe]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e([new dl])}),e})();const gl=[new dl],vl=new fl([new sl]),yl=new ml(gl);let bl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>wl(e,Ka),e})();const wl=function(e,t){return Gr(e,t,ti(),Qt())};let Sl=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Cl(e,Ka),e})();const Cl=function(e,t){return Yr(e,t,ti(),Qt())},_l={};class El extends $a{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Et(e);return new kl(t,this.ngModule)}}function Tl(e){const t=[];for(let i in e)e.hasOwnProperty(i)&&t.push({propName:e[i],templateName:i});return t}const xl=new He("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Wi});class kl extends Ga{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(ms).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Tl(this.componentDef.inputs)}get outputs(){return Tl(this.componentDef.outputs)}create(e,t,i,n){const s=(n=n||this.ngModule)?function(e,t){return{get:(i,n,s)=>{const r=e.get(i,_l,s);return r!==_l||n===_l?r:t.get(i,n,s)}}}(e,n.injector):e,r=s.get(Ja,Vt),o=s.get(tl,null),a=r.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=i?function(e,t,i){if(Nt(e))return e.selectRootElement(t,i===ut.ShadowDom);let n="string"==typeof t?e.querySelector(t):t;return n.textContent="",n}(a,i,this.componentDef.encapsulation):Ds(l,r.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,d="string"==typeof i&&/^#root-ng-internal-isolated-\d+/.test(i),u={components:[],scheduler:Wi,clean:dr,playerHandler:null,flags:0},p=Hs(0,-1,null,1,0,null,null,null,null,null),f=Is(null,p,u,h,null,null,r,a,o,s);let m,g;vi(f,null);try{const e=function(e,t,i,n,s,r){const o=i[1];i[20]=e;const a=Rs(o,null,0,3,null,null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(vo(a,l,!0),null!==e&&(Pi(s,e,l),null!==a.classes&&Fr(s,e,a.classes),null!==a.styles&&Br(s,e,a.styles)));const c=n.createRenderer(e,t),h=Is(i,js(t),null,t.onPush?64:16,i[20],a,n,c,void 0);return o.firstCreatePass&&(en(Xi(a,i),o,t.type),Xs(o,a),Qs(a,i.length,1)),or(i,h),i[20]=h}(c,this.componentDef,f,r,a);if(c)if(i)Pi(a,c,["ng-version",nl.full]);else{const{attrs:e,classes:t}=function(e){const t=[],i=[];let n=1,s=2;for(;n<e.length;){let r=e[n];if("string"==typeof r)2===s?""!==r&&t.push(r,e[++n]):8===s&&i.push(r);else{if(!hs(s))break;s=r}n++}return{attrs:t,classes:i}}(this.componentDef.selectors[0]);e&&Pi(a,c,e),t&&t.length>0&&Fr(a,c,t.join(" "))}if(g=Ht(p,0),void 0!==t){const e=g.projection=[];for(let i=0;i<this.ngContentSelectors.length;i++){const n=t[i];e.push(null!=n?Array.from(n):null)}}m=function(e,t,i,n,s){const r=i[1],o=function(e,t,i){const n=ti();e.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Ks(e,n,1),Zs(e,t,i));const s=on(t,e,t.length-1,n);is(s,t);const r=jt(n,t);return r&&is(r,t),s}(r,i,t);n.components.push(o),e[8]=o,s&&s.forEach(e=>e(o,t)),t.contentQueries&&t.contentQueries(1,o,i.length-1);const a=ti();if(r.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Ei(a.index-20);const e=i[1];Gs(e,t),Ys(e,i,t.hostVars),$s(t,o)}return o}(e,this.componentDef,f,u,[Aa]),Ps(p,f,null)}finally{Ci()}const v=new Al(this.componentType,m,zr(Ka,g,f),f,g);return i&&!d||(p.node.child=g),v}}class Al extends class{}{constructor(e,t,i,n,s){super(),this.location=i,this._rootLView=n,this._tNode=s,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new Hr(n),function(e,t,i,n){let s=e.node;null==s&&(e.node=s=Us(0,null,2,-1,null,null)),n[6]=s}(n[1],0,0,n),this.componentType=e}get injector(){return new cn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}var Ol=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Dl={};function Il(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=Rl(t);if(i)return i;const n=t.split("-")[0];if(i=Rl(n),i)return i;if("en"===n)return Ol;throw new Error(`Missing locale data for the locale "${e}".`)}function Rl(e){return e in Dl||(Dl[e]=Pe.ng&&Pe.ng.common&&Pe.ng.common.locales&&Pe.ng.common.locales[e]),Dl[e]}const Pl=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();let Ml="en-US";function Ll(e){var t,i;i="Expected localeId to be defined",null==(t=e)&&function(e,t,i,n){throw new Error("ASSERTION ERROR: "+e+` [Expected=> null != ${t} <=Actual]`)}(i,t),"string"==typeof e&&(Ml=e.toLowerCase().replace(/_/g,"-"))}const Nl=new Map;class Vl extends it{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new El(this);const i=xt(e),n=e[Be]||null;n&&Ll(n),this._bootstrapComponents=Gi(i.bootstrap),this._r3Injector=no(e,t,[{provide:it,useValue:this},{provide:$a,useValue:this.componentFactoryResolver}],_e(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=uo.THROW_IF_NOT_FOUND,i=ce.Default){return e===uo||e===it||e===Ue?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Bl extends nt{constructor(e){super(),this.moduleType=e,null!==xt(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,i){if(t&&t!==i)throw new Error(`Duplicate module registered for ${e} - ${_e(t)} vs ${_e(t.name)}`)})(e,Nl.get(e),t),Nl.set(e,t)}let i=t.\u0275mod.imports;i instanceof Function&&(i=i()),i&&i.forEach(t=>e(t))}(e)}create(e){return new Vl(this.moduleType,e)}}function Fl(e,t,i){const n=ai()+e,s=Qt();return s[n]===gs?Eo(s,n,i?t.call(i):t()):function(e,t){return e[t]}(s,n)}function jl(e,t,i,n){return Ul(Qt(),ai(),e,t,i,n)}function Hl(e,t){const i=e[t];return i===gs?void 0:i}function Ul(e,t,i,n,s,r){const o=t+i;return To(e,o,s)?Eo(e,o+1,r?n.call(r,s):n(s)):Hl(e,o+1)}function ql(e,t){const i=Zt();let n;const s=e+20;i.firstCreatePass?(n=function(e,t){if(t)for(let i=t.length-1;i>=0;i--){const n=t[i];if(e===n.name)return n}throw new Error(`The pipe '${e}' could not be found!`)}(t,i.pipeRegistry),i.data[s]=n,n.onDestroy&&(i.destroyHooks||(i.destroyHooks=[])).push(s,n.onDestroy)):n=i.data[s];const r=n.factory||(n.factory=Tt(n.type)),o=Ke(Io),a=$i(!1),l=r();return $i(a),Ke(o),function(e,t,i,n){const s=i+20;s>=e.data.length&&(e.data[s]=null,e.blueprint[s]=null),t[s]=n}(i,Qt(),e,l),l}function Wl(e,t,i){const n=Qt(),s=Ut(n,e);return Yl(n,Gl(n,e)?Ul(n,ai(),t,s.transform,i,s):s.transform(i))}function zl(e,t,i,n){const s=Qt(),r=Ut(s,e);return Yl(s,Gl(s,e)?function(e,t,i,n,s,r,o){const a=t+i;return xo(e,a,s,r)?Eo(e,a+2,o?n.call(o,s,r):n(s,r)):Hl(e,a+2)}(s,ai(),t,r.transform,i,n,r):r.transform(i,n))}function Gl(e,t){return e[1].data[t+20].pure}function Yl(e,t){return So.isWrapped(t)&&(t=So.unwrap(t),e[li()]=gs),t}class $l extends x{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let n,s=e=>null,r=()=>null;e&&"object"==typeof e?(n=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(s=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(r=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(n=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(s=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),i&&(r=this.__isAsync?()=>{setTimeout(()=>i())}:()=>{i()}));const o=super.subscribe(n,s,r);return e instanceof u&&e.add(o),o}}function Kl(){return this._results[bo()]()}class Xl{constructor(){this.dirty=!0,this._results=[],this.changes=new $l,this.length=0;const e=bo(),t=Xl.prototype;t[e]||(t[e]=Kl)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,i){void 0===i&&(i=t);for(let n=0;n<t.length;n++){let s=t[n];Array.isArray(s)?(i===t&&(i=t.slice(0,n)),e(s,i)):i!==t&&i.push(s)}return i}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Jl{constructor(e){this.queryList=e,this.matches=null}clone(){return new Jl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ql{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,n=[];for(let e=0;e<i;e++){const i=t.getByIndex(e);n.push(this.queries[i.indexInDeclarationView].clone())}return new Ql(n)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==mc(e,t).matches&&this.queries[t].setDirty()}}class Zl{constructor(e,t,i,n=null){this.predicate=e,this.descendants=t,this.isStatic=i,this.read=n}}class ec{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const n=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,n);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new ec(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tc{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new tc(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&4===i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){if(Array.isArray(this.metadata.predicate)){const i=this.metadata.predicate;for(let n=0;n<i.length;n++)this.matchTNodeWithReadOption(e,t,ic(t,i[n]))}else{const i=this.metadata.predicate;i===bl?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,rn(t,e,i,!1,!1))}}matchTNodeWithReadOption(e,t,i){if(null!==i){const n=this.metadata.read;if(null!==n)if(n===Ka||n===Sl||n===bl&&0===t.type)this.addMatch(t.index,-2);else{const i=rn(t,e,n,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function ic(e,t){const i=e.localNames;if(null!==i)for(let n=0;n<i.length;n+=2)if(i[n]===t)return i[n+1];return null}function nc(e,t,i,n){return-1===i?function(e,t){return 3===e.type||4===e.type?zr(Ka,e,t):0===e.type?Gr(bl,Ka,e,t):null}(t,e):-2===i?function(e,t,i){return i===Ka?zr(Ka,t,e):i===bl?Gr(bl,Ka,t,e):i===Sl?Yr(Sl,Ka,t,e):void 0}(e,t,n):on(e,e[1],i,t)}function sc(e,t,i,n){const s=t[19].queries[n];if(null===s.matches){const n=e.data,r=i.matches,o=[];for(let e=0;e<r.length;e+=2){const s=r[e];o.push(s<0?null:nc(t,n[s],r[e+1],i.metadata.read))}s.matches=o}return s.matches}function rc(e){const t=Qt(),i=Zt(),n=fi();mi(n+1);const s=mc(i,n);if(e.dirty&&zt(t)===s.metadata.isStatic){if(null===s.matches)e.reset([]);else{const r=s.crossesNgTemplate?function e(t,i,n,s){const r=t.queries.getByIndex(n),o=r.matches;if(null!==o){const a=sc(t,i,r,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)s.push(a[t/2]);else{const r=o[t+1],a=i[-n];for(let t=10;t<a.length;t++){const i=a[t];i[17]===i[3]&&e(i[1],i,r,s)}if(null!==a[9]){const t=a[9];for(let i=0;i<t.length;i++){const n=t[i];e(n[1],n,r,s)}}}}}return s}(i,t,n,[]):sc(i,t,s,n);e.reset(r),e.notifyOnChanges()}return!0}return!1}function oc(e,t,i){lc(Zt(),Qt(),e,t,i,!0)}function ac(e,t,i){lc(Zt(),Qt(),e,t,i,!1)}function lc(e,t,i,n,s,r){e.firstCreatePass&&(fc(e,new Zl(i,n,r,s),-1),r&&(e.staticViewQueries=!0)),pc(e,t)}function cc(e,t,i,n){dc(Zt(),Qt(),t,i,n,!1,ti(),e)}function hc(e,t,i,n){dc(Zt(),Qt(),t,i,n,!0,ti(),e)}function dc(e,t,i,n,s,r,o,a){e.firstCreatePass&&(fc(e,new Zl(i,n,r,s),o.index),function(e,t){const i=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,t)}(e,a),r&&(e.staticContentQueries=!0)),pc(e,t)}function uc(){return e=Qt(),t=fi(),e[19].queries[t].queryList;var e,t}function pc(e,t){const i=new Xl;!function(e,t,i,n){const s=ur(t);s.push(i),e.firstCreatePass&&pr(e).push(n,s.length-1)}(e,t,i,i.destroy),null===t[19]&&(t[19]=new Ql),t[19].queries.push(new Jl(i))}function fc(e,t,i){null===e.queries&&(e.queries=new ec),e.queries.track(new tc(t,i))}function mc(e,t){return e.queries.getByIndex(t)}const gc=new He("Application Initializer");let vc=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const t=this.appInits[i]();Uo(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Je(gc,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const yc=new He("AppId"),bc={provide:yc,useFactory:function(){return`${wc()}${wc()}${wc()}`},deps:[]};function wc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sc=new He("Platform Initializer"),Cc=new He("Platform ID"),_c=new He("appBootstrapListener");let Ec=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Tc=new He("LocaleId"),xc=new He("DefaultCurrencyCode");class kc{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ac=function(e){return new Bl(e)},Oc=Ac,Dc=function(e){return Promise.resolve(Ac(e))},Ic=function(e){const t=Ac(e),i=Gi(xt(e).declarations).reduce((e,t)=>{const i=Et(t);return i&&e.push(new kl(i)),e},[]);return new kc(t,i)},Rc=Ic,Pc=function(e){return Promise.resolve(Ic(e))};let Mc=(()=>{class e{constructor(){this.compileModuleSync=Oc,this.compileModuleAsync=Dc,this.compileModuleAndAllComponentsSync=Rc,this.compileModuleAndAllComponentsAsync=Pc}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Lc=new He("compilerOptions"),Nc=(()=>Promise.resolve(0))();function Vc(e){"undefined"==typeof Zone?Nc.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Bc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $l(!1),this.onMicrotaskEmpty=new $l(!1),this.onStable=new $l(!1),this.onError=new $l(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=t,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Pe.requestAnimationFrame,t=Pe.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Pe,()=>{e.lastRequestAnimationFrameId=-1,Uc(e),Hc(e)}),Uc(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(i,n,s,r,o,a)=>{try{return qc(e),i.invokeTask(s,r,o,a)}finally{t&&"eventTask"===r.type&&t(),Wc(e)}},onInvoke:(t,i,n,s,r,o,a)=>{try{return qc(e),t.invoke(n,s,r,o,a)}finally{Wc(e)}},onHasTask:(t,i,n,s)=>{t.hasTask(n,s),i===n&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Uc(e),Hc(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,n,s)=>(t.handleError(n,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Bc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,n){const s=this._inner,r=s.scheduleEventTask("NgZoneEvent: "+n,e,jc,Fc,Fc);try{return s.runTask(r,t,i)}finally{s.cancelTask(r)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}function Fc(){}const jc={};function Hc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Uc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function qc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Wc(e){e._nesting--,Hc(e)}class zc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $l,this.onMicrotaskEmpty=new $l,this.onStable=new $l,this.onError=new $l}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,n){return e.apply(t,i)}}let Gc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bc.assertNotInAngularZone(),Vc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vc(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,i){let n=-1;t&&t>0&&(n=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==n),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:n,updateCb:i})}whenStable(e,t,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Je(Bc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Yc=(()=>{class e{constructor(){this._applications=new Map,Xc.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Xc.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class $c{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Kc,Xc=new $c,Jc=function(e,t,i){const n=e.get(Lc,[]).concat(t),s=new Bl(i);if(0===fo.size)return Promise.resolve(s);const r=function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(n.map(e=>e.providers));if(0===r.length)return Promise.resolve(s);const o=function(){const e=Pe.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),a=uo.create({providers:r}).get(o.ResourceLoader);return function(e){const t=[],i=new Map;function n(e){let t=i.get(e);if(!t){const n=(e=>Promise.resolve(a.get(e)))(e);i.set(e,t=n.then(go))}return t}return fo.forEach((e,i)=>{const s=[];e.templateUrl&&s.push(n(e.templateUrl).then(t=>{e.template=t}));const r=e.styleUrls,o=e.styles||(e.styles=[]),a=e.styles.length;r&&r.forEach((t,i)=>{o.push(""),s.push(n(t).then(n=>{o[a+i]=n,r.splice(r.indexOf(t),1),0==r.length&&(e.styleUrls=void 0)}))});const l=Promise.all(s).then(()=>function(e){mo.delete(e)}(i));t.push(l)}),fo=new Map,Promise.all(t).then(()=>{})}().then(()=>s)};const Qc=new He("AllowMultipleToken");class Zc{constructor(e,t){this.name=e,this.token=t}}function eh(e,t,i=[]){const n="Platform: "+t,s=new He(n);return(t=[])=>{let r=th();if(!r||r.injector.get(Qc,!1))if(e)e(i.concat(t).concat({provide:s,useValue:!0}));else{const e=i.concat(t).concat({provide:s,useValue:!0},{provide:Jr,useValue:"platform"});!function(e){if(Kc&&!Kc.destroyed&&!Kc.injector.get(Qc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Kc=e.get(ih);const t=e.get(Sc,null);t&&t.forEach(e=>e())}(uo.create({providers:e,name:n}))}return function(e){const t=th();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function th(){return Kc&&!Kc.destroyed?Kc:null}let ih=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const n=function(e,t){let i;return i="noop"===e?new zc:("zone.js"===e?void 0:e)||new Bc({enableLongStackTrace:kn(),shouldCoalesceEventChangeDetection:t}),i}(i?i.ngZone:void 0,i&&i.ngZoneEventCoalescing||!1),s=[{provide:Bc,useValue:n}];return n.run(()=>{const i=uo.create({providers:s,parent:this.injector,name:t.moduleType.name}),r=t.create(i),o=r.injector.get(mn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>rh(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(t,i,n){try{const e=n();return Uo(e)?e.catch(e=>{throw i.runOutsideAngular(()=>t.handleError(e)),e}):e}catch(e){throw i.runOutsideAngular(()=>t.handleError(e)),e}}(o,n,()=>{const e=r.injector.get(vc);return e.runInitializers(),e.donePromise.then(()=>(Ll(r.injector.get(Tc,"en-US")||"en-US"),this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const i=nh({},t);return Jc(this.injector,i,e).then(e=>this.bootstrapModuleFactory(e,i))}_moduleDoBootstrap(e){const t=e.injector.get(sh);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${_e(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Je(uo))},t.\u0275prov=ue({token:t,factory:t.\u0275fac}),t})();function nh(e,t){return Array.isArray(t)?t.reduce(nh,e):Object.assign(Object.assign({},e),t)}let sh=(()=>{class t{constructor(e,t,i,n,s,r){this._zone=e,this._console=t,this._injector=i,this._exceptionHandler=n,this._componentFactoryResolver=s,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=kn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new S(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new S(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Bc.assertNotInAngularZone(),Vc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const i=this._zone.onUnstable.subscribe(()=>{Bc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),i.unsubscribe()}});this.isStable=K(o,a.pipe(e=>{return X()((t=ie,function(e){let i;i="function"==typeof t?t:function(){return t};const n=Object.create(e,ee);return n.source=e,n.subjectFactory=i,n})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=e instanceof Ga?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(i.componentType);const n=i.isBoundToModule?void 0:this._injector.get(it),s=i.create(uo.NULL,[],t||i.selector,n);s.onDestroy(()=>{this._unloadComponent(s)});const r=s.injector.get(Gc,null);return r&&s.injector.get(Yc).registerApplication(s.location.nativeElement,r),this._loadComponent(s),kn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;rh(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(_c,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),rh(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Je(Bc),Je(Ec),Je(uo),Je(mn),Je($a),Je(vc))},t.\u0275prov=ue({token:t,factory:t.\u0275fac}),t})();function rh(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}class oh{}class ah{}const lh={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ch=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||lh}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,i]=e.split("#");return void 0===i&&(i="default"),n("zn8P")(t).then(e=>e[i]).then(e=>hh(e,t,i)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,i]=e.split("#"),s="NgFactory";return void 0===i&&(i="default",s=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[i+s]).then(e=>hh(e,t,i))}}return e.\u0275fac=function(t){return new(t||e)(Je(Mc),Je(ah,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function hh(e,t,i){if(!e)throw new Error(`Cannot find '${i}' in '${t}'`);return e}const dh=eh(null,"core",[{provide:Cc,useValue:"unknown"},{provide:ih,deps:[uo]},{provide:Yc,deps:[]},{provide:Ec,deps:[]}]),uh=[{provide:sh,useClass:sh,deps:[Bc,Ec,uo,mn,$a,vc]},{provide:xl,deps:[Bc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:vc,useClass:vc,deps:[[new oe,gc]]},{provide:Mc,useClass:Mc,deps:[]},bc,{provide:fl,useFactory:function(){return vl},deps:[]},{provide:ml,useFactory:function(){return yl},deps:[]},{provide:Tc,useFactory:function(e){return Ll(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new re(Tc),new oe,new le]]},{provide:xc,useValue:"USD"}];let ph=(()=>{class e{constructor(e){}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(sh))},providers:uh}),e})();const fh={apiKey:"AIzaSyCltKxu01z70siY0DplpPBcaTXXL2VCHSQ",authDomain:"fellowgenius-8606c.firebaseapp.com",databaseURL:"https://fellowgenius-8606c.firebaseio.com",projectId:"fellowgenius-8606c",storageBucket:"fellowgenius-8606c.appspot.com",messagingSenderId:"284007218397",appId:"1:284007218397:web:246d802f5758e9ffcbef34",measurementId:"G-ZDRYSC5RL4"};let mh=null;function gh(){return mh}const vh=new He("DocumentToken");let yh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:bh,token:e,providedIn:"platform"}),e})();function bh(){return Je(Sh)}const wh=new He("Location Initialized");let Sh=(()=>{class e extends yh{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=gh().getLocation(),this._history=gh().getHistory()}getBaseHrefFromDOM(){return gh().getBaseHref(this._doc)}onPopState(e){gh().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){gh().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,i){Ch()?this._history.pushState(e,t,i):this.location.hash=i}replaceState(e,t,i){Ch()?this._history.replaceState(e,t,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Je(vh))},e.\u0275prov=ue({factory:_h,token:e,providedIn:"platform"}),e})();function Ch(){return!!window.history.pushState}function _h(){return new Sh(Je(vh))}function Eh(e,t){if(0==e.length)return t;if(0==t.length)return e;let i=0;return e.endsWith("/")&&i++,t.startsWith("/")&&i++,2==i?e+t.substring(1):1==i?e+t:e+"/"+t}function Th(e){const t=e.match(/#|\?|$/),i=t&&t.index||e.length;return e.slice(0,i-("/"===e[i-1]?1:0))+e.slice(i)}function xh(e){return e&&"?"!==e[0]?"?"+e:e}let kh=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:Ah,token:e,providedIn:"root"}),e})();function Ah(e){const t=Je(vh).location;return new Dh(Je(yh),t&&t.origin||"")}const Oh=new He("appBaseHref");let Dh=(()=>{class e extends kh{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Eh(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+xh(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${t}${i}`:t}pushState(e,t,i,n){const s=this.prepareExternalUrl(i+xh(n));this._platformLocation.pushState(e,t,s)}replaceState(e,t,i,n){const s=this.prepareExternalUrl(i+xh(n));this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Je(yh),Je(Oh,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Ih=(()=>{class e extends kh{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Eh(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,i,n){let s=this.prepareExternalUrl(i+xh(n));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,t,s)}replaceState(e,t,i,n){let s=this.prepareExternalUrl(i+xh(n));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Je(yh),Je(Oh,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Rh=(()=>{class e{constructor(e,t){this._subject=new $l,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Th(Mh(i)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+xh(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Mh(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",i=null){this._platformStrategy.pushState(i,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xh(t)),i)}replaceState(e,t="",i=null){this._platformStrategy.replaceState(i,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+xh(t)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(i=>i(e,t))}subscribe(e,t,i){return this._subject.subscribe({next:e,error:t,complete:i})}}return e.\u0275fac=function(t){return new(t||e)(Je(kh),Je(yh))},e.normalizeQueryParams=xh,e.joinWithSlash=Eh,e.stripTrailingSlash=Th,e.\u0275prov=ue({factory:Ph,token:e,providedIn:"root"}),e})();function Ph(){return new Rh(Je(kh),Je(yh))}function Mh(e){return e.replace(/\/index.html$/,"")}const Lh=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Nh=function(){var e={Format:0,Standalone:1};return e[e.Format]="Format",e[e.Standalone]="Standalone",e}(),Vh=function(){var e={Narrow:0,Abbreviated:1,Wide:2,Short:3};return e[e.Narrow]="Narrow",e[e.Abbreviated]="Abbreviated",e[e.Wide]="Wide",e[e.Short]="Short",e}(),Bh=function(){var e={Short:0,Medium:1,Long:2,Full:3};return e[e.Short]="Short",e[e.Medium]="Medium",e[e.Long]="Long",e[e.Full]="Full",e}(),Fh=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function jh(e,t){return zh(Il(e)[Pl.DateFormat],t)}function Hh(e,t){return zh(Il(e)[Pl.TimeFormat],t)}function Uh(e,t){return zh(Il(e)[Pl.DateTimeFormat],t)}function qh(e,t){const i=Il(e),n=i[Pl.NumberSymbols][t];if(void 0===n){if(t===Fh.CurrencyDecimal)return i[Pl.NumberSymbols][Fh.Decimal];if(t===Fh.CurrencyGroup)return i[Pl.NumberSymbols][Fh.Group]}return n}function Wh(e){if(!e[Pl.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Pl.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function zh(e,t){for(let i=t;i>-1;i--)if(void 0!==e[i])return e[i];throw new Error("Locale data API: locale data undefined")}function Gh(e){const[t,i]=e.split(":");return{hours:+t,minutes:+i}}const Yh=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$h={},Kh=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Xh=function(){var e={Short:0,ShortGMT:1,Long:2,Extended:3};return e[e.Short]="Short",e[e.ShortGMT]="ShortGMT",e[e.Long]="Long",e[e.Extended]="Extended",e}(),Jh=function(){var e={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return e[e.FullYear]="FullYear",e[e.Month]="Month",e[e.Date]="Date",e[e.Hours]="Hours",e[e.Minutes]="Minutes",e[e.Seconds]="Seconds",e[e.FractionalSeconds]="FractionalSeconds",e[e.Day]="Day",e}(),Qh=function(){var e={DayPeriods:0,Days:1,Months:2,Eras:3};return e[e.DayPeriods]="DayPeriods",e[e.Days]="Days",e[e.Months]="Months",e[e.Eras]="Eras",e}();function Zh(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,i){return null!=t&&i in t?t[i]:e}))),e}function ed(e,t,i="-",n,s){let r="";(e<0||s&&e<=0)&&(s?e=1-e:(e=-e,r=i));let o=String(e);for(;o.length<t;)o="0"+o;return n&&(o=o.substr(o.length-t)),r+o}function td(e,t,i=0,n=!1,s=!1){return function(r,o){let a=function(e,t){switch(e){case Jh.FullYear:return t.getFullYear();case Jh.Month:return t.getMonth();case Jh.Date:return t.getDate();case Jh.Hours:return t.getHours();case Jh.Minutes:return t.getMinutes();case Jh.Seconds:return t.getSeconds();case Jh.FractionalSeconds:return t.getMilliseconds();case Jh.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,r);if((i>0||a>-i)&&(a+=i),e===Jh.Hours)0===a&&-12===i&&(a=12);else if(e===Jh.FractionalSeconds)return l=t,ed(a,3).substr(0,l);var l;const c=qh(o,Fh.MinusSign);return ed(a,t,c,n,s)}}function id(e,t,i=Nh.Format,n=!1){return function(s,r){return function(e,t,i,n,s,r){switch(i){case Qh.Months:return function(e,t,i){const n=Il(e),s=zh([n[Pl.MonthsFormat],n[Pl.MonthsStandalone]],t);return zh(s,i)}(t,s,n)[e.getMonth()];case Qh.Days:return function(e,t,i){const n=Il(e),s=zh([n[Pl.DaysFormat],n[Pl.DaysStandalone]],t);return zh(s,i)}(t,s,n)[e.getDay()];case Qh.DayPeriods:const o=e.getHours(),a=e.getMinutes();if(r){const e=function(e){const t=Il(e);return Wh(t),(t[Pl.ExtraData][2]||[]).map(e=>"string"==typeof e?Gh(e):[Gh(e[0]),Gh(e[1])])}(t),i=function(e,t,i){const n=Il(e);Wh(n);const s=zh([n[Pl.ExtraData][0],n[Pl.ExtraData][1]],t)||[];return zh(s,i)||[]}(t,s,n);let r;if(e.forEach((e,t)=>{if(Array.isArray(e)){const{hours:n,minutes:s}=e[0],{hours:l,minutes:c}=e[1];o>=n&&a>=s&&(o<l||o===l&&a<c)&&(r=i[t])}else{const{hours:n,minutes:s}=e;n===o&&s===a&&(r=i[t])}}),r)return r}return function(e,t,i){const n=Il(e),s=zh([n[Pl.DayPeriodsFormat],n[Pl.DayPeriodsStandalone]],t);return zh(s,i)}(t,s,n)[o<12?0:1];case Qh.Eras:return function(e,t){return zh(Il(e)[Pl.Eras],t)}(t,n)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+i)}}(s,r,e,t,i,n)}}function nd(e){return function(t,i,n){const s=-1*n,r=qh(i,Fh.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(e){case Xh.Short:return(s>=0?"+":"")+ed(o,2,r)+ed(Math.abs(s%60),2,r);case Xh.ShortGMT:return"GMT"+(s>=0?"+":"")+ed(o,1,r);case Xh.Long:return"GMT"+(s>=0?"+":"")+ed(o,2,r)+":"+ed(Math.abs(s%60),2,r);case Xh.Extended:return 0===n?"Z":(s>=0?"+":"")+ed(o,2,r)+":"+ed(Math.abs(s%60),2,r);default:throw new Error(`Unknown zone width "${e}"`)}}}function sd(e,t=!1){return function(i,n){let s;if(t){const e=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,t=i.getDate();s=1+Math.floor((t+e)/7)}else{const e=function(e){const t=new Date(e,0,1).getDay();return new Date(e,0,1+(t<=4?4:11)-t)}(i.getFullYear()),t=(r=i,new Date(r.getFullYear(),r.getMonth(),r.getDate()+(4-r.getDay()))).getTime()-e.getTime();s=1+Math.round(t/6048e5)}var r;return ed(s,e,qh(n,Fh.MinusSign))}}const rd={};function od(e,t){e=e.replace(/:/g,"");const i=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(i)?t:i}function ad(e){return e instanceof Date&&!isNaN(e.valueOf())}class ld{}let cd=(()=>{class e extends ld{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return Il(e)[Pl.PluralCase]}(t||this.locale)(e)){case Lh.Zero:return"zero";case Lh.One:return"one";case Lh.Two:return"two";case Lh.Few:return"few";case Lh.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Je(Tc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function hd(e,t){t=encodeURIComponent(t);for(const i of e.split(";")){const e=i.indexOf("="),[n,s]=-1==e?[i,""]:[i.slice(0,e),i.slice(e+1)];if(n.trim()===t)return decodeURIComponent(s)}return null}let dd=(()=>{class e{constructor(e,t,i,n){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=i,this._renderer=n,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Co(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+_e(e.item));this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(Io(fl),Io(ml),Io(Ka),Io(Za))},e.\u0275dir=Ct({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class ud{constructor(e,t,i,n){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=n}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pd=(()=>{class e{constructor(e,t,i){this._viewContainer=e,this._template=t,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){kn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;if(!this._differ&&i)try{this._differ=this._differs.find(i).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${i}' of type '${e=i,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,i,n)=>{if(null==e.previousIndex){const i=this._viewContainer.createEmbeddedView(this._template,new ud(null,this._ngForOf,-1,-1),null===n?void 0:n),s=new fd(e,i);t.push(s)}else if(null==n)this._viewContainer.remove(null===i?void 0:i);else if(null!==i){const s=this._viewContainer.get(i);this._viewContainer.move(s,n);const r=new fd(e,s);t.push(r)}});for(let i=0;i<t.length;i++)this._perViewChange(t[i].view,t[i].record);for(let i=0,n=this._viewContainer.length;i<n;i++){const e=this._viewContainer.get(i);e.context.index=i,e.context.count=n,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl),Io(bl),Io(fl))},e.\u0275dir=Ct({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class fd{constructor(e,t){this.record=e,this.view=t}}let md=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new gd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){vd("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){vd("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl),Io(bl))},e.\u0275dir=Ct({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class gd{constructor(){this.$implicit=null,this.ngIf=null}}function vd(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${_e(t)}'.`)}class yd{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let bd=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),e})(),wd=(()=>{class e{constructor(e,t,i){this.ngSwitch=i,i._addCase(),this._view=new yd(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl),Io(bl),Io(bd,1))},e.\u0275dir=Ct({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),e})(),Sd=(()=>{class e{constructor(e,t,i){i._addDefault(new yd(e,t))}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl),Io(bl),Io(bd,1))},e.\u0275dir=Ct({type:e,selectors:[["","ngSwitchDefault",""]]}),e})(),Cd=(()=>{class e{constructor(e,t,i){this._ngEl=e,this._differs=t,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){const[i,n]=e.split(".");null!=(t=null!=t&&n?`${t}${n}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,i,t):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(ml),Io(Za))},e.\u0275dir=Ct({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})();function _d(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${_e(e)}'`)}class Ed{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Td{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const xd=new Td,kd=new Ed;let Ad=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):wo(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,So.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(Uo(t))return xd;if(qo(t))return kd;throw _d(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(function(e=ce.Default){const t=$r(!0);if(null!=t||e&ce.Optional)return t;throw new Error("No provider for ChangeDetectorRef!")}())},e.\u0275pipe=_t({name:"async",type:e,pure:!1}),e})(),Od=(()=>{class e{transform(t){if(!t)return t;if("string"!=typeof t)throw _d(e,t);return t.toUpperCase()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_t({name:"uppercase",type:e,pure:!0}),e})(),Dd=(()=>{class e{constructor(e){this.locale=e}transform(t,i="mediumDate",n,s){if(null==t||""===t||t!=t)return null;try{return function(e,t,i,n){let s=function(e){if(ad(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){const[t,i,n]=e.split("-").map(e=>+e);return new Date(t,i-1,n)}let i;if(i=e.match(Yh))return function(e){const t=new Date(0);let i=0,n=0;const s=e[8]?t.setUTCFullYear:t.setFullYear,r=e[8]?t.setUTCHours:t.setHours;e[9]&&(i=Number(e[9]+e[10]),n=Number(e[9]+e[11])),s.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const o=Number(e[4]||0)-i,a=Number(e[5]||0)-n,l=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return r.call(t,o,a,l,c),t}(i)}const t=new Date(e);if(!ad(t))throw new Error(`Unable to convert "${e}" into a date`);return t}(e);t=function e(t,i){const n=function(e){return Il(e)[Pl.LocaleId]}(t);if($h[n]=$h[n]||{},$h[n][i])return $h[n][i];let s="";switch(i){case"shortDate":s=jh(t,Bh.Short);break;case"mediumDate":s=jh(t,Bh.Medium);break;case"longDate":s=jh(t,Bh.Long);break;case"fullDate":s=jh(t,Bh.Full);break;case"shortTime":s=Hh(t,Bh.Short);break;case"mediumTime":s=Hh(t,Bh.Medium);break;case"longTime":s=Hh(t,Bh.Long);break;case"fullTime":s=Hh(t,Bh.Full);break;case"short":const i=e(t,"shortTime"),n=e(t,"shortDate");s=Zh(Uh(t,Bh.Short),[i,n]);break;case"medium":const r=e(t,"mediumTime"),o=e(t,"mediumDate");s=Zh(Uh(t,Bh.Medium),[r,o]);break;case"long":const a=e(t,"longTime"),l=e(t,"longDate");s=Zh(Uh(t,Bh.Long),[a,l]);break;case"full":const c=e(t,"fullTime"),h=e(t,"fullDate");s=Zh(Uh(t,Bh.Full),[c,h])}return s&&($h[n][i]=s),s}(i,t)||t;let r,o=[];for(;t;){if(r=Kh.exec(t),!r){o.push(t);break}{o=o.concat(r.slice(1));const e=o.pop();if(!e)break;t=e}}let a=s.getTimezoneOffset();n&&(a=od(n,a),s=function(e,t,i){const n=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(od(t,n)-n))}(s,n));let l="";return o.forEach(e=>{const t=function(e){if(rd[e])return rd[e];let t;switch(e){case"G":case"GG":case"GGG":t=id(Qh.Eras,Vh.Abbreviated);break;case"GGGG":t=id(Qh.Eras,Vh.Wide);break;case"GGGGG":t=id(Qh.Eras,Vh.Narrow);break;case"y":t=td(Jh.FullYear,1,0,!1,!0);break;case"yy":t=td(Jh.FullYear,2,0,!0,!0);break;case"yyy":t=td(Jh.FullYear,3,0,!1,!0);break;case"yyyy":t=td(Jh.FullYear,4,0,!1,!0);break;case"M":case"L":t=td(Jh.Month,1,1);break;case"MM":case"LL":t=td(Jh.Month,2,1);break;case"MMM":t=id(Qh.Months,Vh.Abbreviated);break;case"MMMM":t=id(Qh.Months,Vh.Wide);break;case"MMMMM":t=id(Qh.Months,Vh.Narrow);break;case"LLL":t=id(Qh.Months,Vh.Abbreviated,Nh.Standalone);break;case"LLLL":t=id(Qh.Months,Vh.Wide,Nh.Standalone);break;case"LLLLL":t=id(Qh.Months,Vh.Narrow,Nh.Standalone);break;case"w":t=sd(1);break;case"ww":t=sd(2);break;case"W":t=sd(1,!0);break;case"d":t=td(Jh.Date,1);break;case"dd":t=td(Jh.Date,2);break;case"E":case"EE":case"EEE":t=id(Qh.Days,Vh.Abbreviated);break;case"EEEE":t=id(Qh.Days,Vh.Wide);break;case"EEEEE":t=id(Qh.Days,Vh.Narrow);break;case"EEEEEE":t=id(Qh.Days,Vh.Short);break;case"a":case"aa":case"aaa":t=id(Qh.DayPeriods,Vh.Abbreviated);break;case"aaaa":t=id(Qh.DayPeriods,Vh.Wide);break;case"aaaaa":t=id(Qh.DayPeriods,Vh.Narrow);break;case"b":case"bb":case"bbb":t=id(Qh.DayPeriods,Vh.Abbreviated,Nh.Standalone,!0);break;case"bbbb":t=id(Qh.DayPeriods,Vh.Wide,Nh.Standalone,!0);break;case"bbbbb":t=id(Qh.DayPeriods,Vh.Narrow,Nh.Standalone,!0);break;case"B":case"BB":case"BBB":t=id(Qh.DayPeriods,Vh.Abbreviated,Nh.Format,!0);break;case"BBBB":t=id(Qh.DayPeriods,Vh.Wide,Nh.Format,!0);break;case"BBBBB":t=id(Qh.DayPeriods,Vh.Narrow,Nh.Format,!0);break;case"h":t=td(Jh.Hours,1,-12);break;case"hh":t=td(Jh.Hours,2,-12);break;case"H":t=td(Jh.Hours,1);break;case"HH":t=td(Jh.Hours,2);break;case"m":t=td(Jh.Minutes,1);break;case"mm":t=td(Jh.Minutes,2);break;case"s":t=td(Jh.Seconds,1);break;case"ss":t=td(Jh.Seconds,2);break;case"S":t=td(Jh.FractionalSeconds,1);break;case"SS":t=td(Jh.FractionalSeconds,2);break;case"SSS":t=td(Jh.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=nd(Xh.Short);break;case"ZZZZZ":t=nd(Xh.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=nd(Xh.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=nd(Xh.Long);break;default:return null}return rd[e]=t,t}(e);l+=t?t(s,i,a):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}(t,i,s||this.locale,n)}catch(r){throw _d(e,r.message)}}}return e.\u0275fac=function(t){return new(t||e)(Io(Tc))},e.\u0275pipe=_t({name:"date",type:e,pure:!0}),e})(),Id=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[{provide:ld,useClass:cd}]}),e})();function Rd(e){return"browser"===e}let Pd=(()=>{class e{}return e.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new Md(Je(vh),window,Je(mn))}),e})();class Md{constructor(e,t,i){this.document=e,this.window=t,this.errorHandler=i,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);const i=this.document.querySelector(`[name='${t}']`);if(i)return void this.scrollToElement(i)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,n=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],n-s[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}class Ld extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new Ld,mh||(mh=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Vd||(Vd=document.querySelector("base"),Vd)?Vd.getAttribute("href"):null;return null==t?null:(i=t,Nd||(Nd=document.createElement("a")),Nd.setAttribute("href",i),"/"===Nd.pathname.charAt(0)?Nd.pathname:"/"+Nd.pathname);var i}resetBaseElement(){Vd=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return hd(document.cookie,e)}}let Nd,Vd=null;const Bd=new He("TRANSITION_ID"),Fd=[{provide:gc,useFactory:function(e,t,i){return()=>{i.get(vc).donePromise.then(()=>{const i=gh();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>i.remove(e))})}},deps:[Bd,vh,uo],multi:!0}];class jd{static init(){!function(e){Xc=e}(new jd)}addToWindow(e){Pe.getAngularTestability=(t,i=!0)=>{const n=e.findTestabilityInTree(t,i);if(null==n)throw new Error("Could not find testability for element.");return n},Pe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Pe.getAllAngularRootElements=()=>e.getAllRootElements(),Pe.frameworkStabilizers||(Pe.frameworkStabilizers=[]),Pe.frameworkStabilizers.push(e=>{const t=Pe.getAllAngularTestabilities();let i=t.length,n=!1;const s=function(t){n=n||t,i--,0==i&&e(n)};t.forEach((function(e){e.whenStable(s)}))})}findTestabilityInTree(e,t,i){if(null==t)return null;const n=e.getTestability(t);return null!=n?n:i?gh().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const Hd=new He("EventManagerPlugins");let Ud=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,i){return this._findPluginFor(t).addEventListener(e,t,i)}addGlobalEventListener(e,t,i){return this._findPluginFor(t).addGlobalEventListener(e,t,i)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const i=this._plugins;for(let n=0;n<i.length;n++){const t=i[n];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error("No event manager plugin found for event "+e)}}return e.\u0275fac=function(t){return new(t||e)(Je(Hd),Je(Bc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class qd{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const n=gh().getGlobalEventTarget(this._doc,e);if(!n)throw new Error(`Unsupported event target ${n} for event ${t}`);return this.addEventListener(n,t,i)}}let Wd=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),zd=(()=>{class e extends Wd{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const i=this._doc.createElement("style");i.textContent=e,this._styleNodes.add(t.appendChild(i))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>gh().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(Je(vh))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Gd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Yd=/%COMP%/g;function $d(e,t,i){for(let n=0;n<t.length;n++){let s=t[n];Array.isArray(s)?$d(e,s,i):(s=s.replace(Yd,e),i.push(s))}return i}function Kd(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Xd=(()=>{class e{constructor(e,t,i){this.eventManager=e,this.sharedStylesHost=t,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jd(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ut.Emulated:{let i=this.rendererByCompId.get(t.id);return i||(i=new Qd(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,i)),i.applyToHost(e),i}case ut.Native:case ut.ShadowDom:return new Zd(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=$d(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Je(Ud),Je(zd),Je(yc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class Jd{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Gd[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,n){if(n){t=n+":"+t;const s=Gd[n];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const n=Gd[i];n?e.removeAttributeNS(n,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,n){n&Qa.DashCase?e.style.setProperty(t,i,n&Qa.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Qa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kd(i)):this.eventManager.addEventListener(e,t,Kd(i))}}class Qd extends Jd{constructor(e,t,i,n){super(e),this.component=i;const s=$d(n+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(Yd,n+"-"+i.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(Yd,e)}(n+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Zd extends Jd{constructor(e,t,i,n){super(e),this.sharedStylesHost=t,this.hostEl=i,this.component=n,this.shadowRoot=n.encapsulation===ut.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=$d(n.id,n.styles,[]);for(let r=0;r<s.length;r++){const e=document.createElement("style");e.textContent=s[r],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let eu=(()=>{class e extends qd{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,i){return e.addEventListener(t,i,!1),()=>this.removeEventListener(e,t,i)}removeEventListener(e,t,i){return e.removeEventListener(t,i)}}return e.\u0275fac=function(t){return new(t||e)(Je(vh))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const tu=["alt","control","meta","shift"],iu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},su={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ru=(()=>{class e extends qd{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,n){const s=e.parseEventName(i),r=e.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gh().onAndCancel(t,s.domEventName,r))}static parseEventName(t){const i=t.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const s=e._normalizeKey(i.pop());let r="";if(tu.forEach(e=>{const t=i.indexOf(e);t>-1&&(i.splice(t,1),r+=e+".")}),r+=s,0!=i.length||0===s.length)return null;const o={};return o.domEventName=n,o.fullKey=r,o}static getEventFullKey(e){let t="",i=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&nu.hasOwnProperty(t)&&(t=nu[t]))}return iu[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tu.forEach(n=>{n!=i&&(0,su[n])(e)&&(t+=n+".")}),t+=i,t}static eventCallback(t,i,n){return s=>{e.getEventFullKey(s)===t&&n.runGuarded(()=>i(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Je(vh))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),ou=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:function(){return Je(au)},token:e,providedIn:"root"}),e})(),au=(()=>{class e extends ou{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case Xn.NONE:return t;case Xn.HTML:return _n(t,"HTML")?Cn(t):$n(this._doc,String(t));case Xn.STYLE:return _n(t,"Style")?Cn(t):function(e){if(!(e=String(e).trim()))return"";const t=e.match(Qn);return t&&In(t[1])===t[1]||e.match(Jn)&&function(e){let t=!0,i=!0;for(let n=0;n<e.length;n++){const s=e.charAt(n);"'"===s&&i?t=!t:'"'===s&&t&&(i=!i)}return t&&i}(e)?e:(kn()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t);case Xn.SCRIPT:if(_n(t,"Script"))return Cn(t);throw new Error("unsafe value used in a script context");case Xn.URL:return En(t),_n(t,"URL")?Cn(t):In(String(t));case Xn.RESOURCE_URL:if(_n(t,"ResourceURL"))return Cn(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return new vn(e)}bypassSecurityTrustStyle(e){return new yn(e)}bypassSecurityTrustScript(e){return new bn(e)}bypassSecurityTrustUrl(e){return new wn(e)}bypassSecurityTrustResourceUrl(e){return new Sn(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(vh))},e.\u0275prov=ue({factory:function(){return e=Je(Ue),new au(e.get(vh));var e},token:e,providedIn:"root"}),e})();const lu=eh(dh,"browser",[{provide:Cc,useValue:"browser"},{provide:Sc,useValue:function(){Ld.makeCurrent(),jd.init()},multi:!0},{provide:vh,useFactory:function(){return function(e){Mt=e}(document),document},deps:[]}]),cu=[[],{provide:Jr,useValue:"root"},{provide:mn,useFactory:function(){return new mn},deps:[]},{provide:Hd,useClass:eu,multi:!0,deps:[vh,Bc,Cc]},{provide:Hd,useClass:ru,multi:!0,deps:[vh]},[],{provide:Xd,useClass:Xd,deps:[Ud,zd,yc]},{provide:Ja,useExisting:Xd},{provide:Wd,useExisting:zd},{provide:zd,useClass:zd,deps:[vh]},{provide:Gc,useClass:Gc,deps:[Bc]},{provide:Ud,useClass:Ud,deps:[Hd,Bc]},[]];let hu=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:yc,useValue:t.appId},{provide:Bd,useExisting:yc},Fd]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(e,12))},providers:cu,imports:[Id,ph]}),e})();function du(...e){let t=e[e.length-1];return A(t)?(e.pop(),H(e,t)):Y(e)}"undefined"!=typeof window&&window;class uu extends x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(e){super.next(this._value=e)}}const pu=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),fu={};function mu(...e){let t=null,i=null;return A(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),Y(e,i).lift(new gu(t))}class gu{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new vu(e,this.resultSelector))}}class vu extends V{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(fu),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++){const t=e[i];this.add(N(this,t,t,i))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i,n,s){const r=this.values,o=this.toRespond?r[i]===fu?--this.toRespond:this.toRespond:0;r[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const yu=new S(e=>e.complete());function bu(e){return e?function(e){return new S(t=>e.schedule(()=>t.complete()))}(e):yu}function wu(e){return new S(t=>{let i;try{i=e()}catch(n){return void t.error(n)}return(i?U(i):bu()).subscribe(t)})}function Su(){return G(1)}function Cu(e,t){return function(i){return i.lift(new _u(e,t))}}class _u{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Eu(e,this.predicate,this.thisArg))}}class Eu extends m{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}const Tu=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function xu(e){return function(t){return 0===e?bu():t.lift(new ku(e))}}class ku{constructor(e){if(this.total=e,this.total<0)throw new Tu}call(e,t){return t.subscribe(new Au(e,this.total))}}class Au extends m{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,n=this.count++;t.length<i?t.push(e):t[n%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,n=this.ring;for(let s=0;s<i;s++){const s=t++%i;e.next(n[s])}}e.complete()}}function Ou(e=Ru){return t=>t.lift(new Du(e))}class Du{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Iu(e,this.errorFactory))}}class Iu extends m{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Ru(){return new pu}function Pu(e=null){return t=>t.lift(new Mu(e))}class Mu{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Lu(e,this.defaultValue))}}class Lu extends m{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Nu(e,t){const i=arguments.length>=2;return n=>n.pipe(e?Cu((t,i)=>e(t,i,n)):y,xu(1),i?Pu(t):Ou(()=>new pu))}function Vu(e){return function(t){const i=new Bu(e),n=t.lift(i);return i.caught=n}}class Bu{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Fu(e,this.selector,this.caught))}}class Fu extends V{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let i;try{i=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const n=new O(this,void 0,void 0);this.add(n);const s=N(this,i,void 0,void 0,n);s!==n&&this.add(s)}}}function ju(e){return t=>0===e?bu():t.lift(new Hu(e))}class Hu{constructor(e){if(this.total=e,this.total<0)throw new Tu}call(e,t){return t.subscribe(new Uu(e,this.total))}}class Uu extends m{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function qu(e,t){const i=arguments.length>=2;return n=>n.pipe(e?Cu((t,i)=>e(t,i,n)):y,ju(1),i?Pu(t):Ou(()=>new pu))}class Wu{constructor(e,t,i){this.predicate=e,this.thisArg=t,this.source=i}call(e,t){return t.subscribe(new zu(e,this.predicate,this.thisArg,this.source))}}class zu extends m{constructor(e,t,i,n){super(e),this.predicate=t,this.thisArg=i,this.source=n,this.index=0,this.thisArg=i||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(i){return void this.destination.error(i)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Gu(e,t){return"function"==typeof t?i=>i.pipe(Gu((i,n)=>U(e(i,n)).pipe(B((e,s)=>t(i,e,n,s))))):t=>t.lift(new Yu(e))}class Yu{constructor(e){this.project=e}call(e,t){return t.subscribe(new $u(e,this.project))}}class $u extends V{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(n){return void this.destination.error(n)}this._innerSub(t,e,i)}_innerSub(e,t,i){const n=this.innerSubscription;n&&n.unsubscribe();const s=new O(this,t,i),r=this.destination;r.add(s),this.innerSubscription=N(this,e,void 0,void 0,s),this.innerSubscription!==s&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,i,n,s){this.destination.next(t)}}function Ku(...e){return Su()(du(...e))}function Xu(...e){const t=e[e.length-1];return A(t)?(e.pop(),i=>Ku(e,i,t)):t=>Ku(e,t)}function Ju(e,t){let i=!1;return arguments.length>=2&&(i=!0),function(n){return n.lift(new Qu(e,t,i))}}class Qu{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new Zu(e,this.accumulator,this.seed,this.hasSeed))}}class Zu extends m{constructor(e,t,i,n){super(e),this.accumulator=t,this._seed=i,this.hasSeed=n,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(n){this.destination.error(n)}this.seed=i,this.destination.next(i)}}function ep(e,t){return q(e,t,1)}function tp(){}function ip(e,t,i){return function(n){return n.lift(new np(e,t,i))}}class np{constructor(e,t,i){this.nextOrObserver=e,this.error=t,this.complete=i}call(e,t){return t.subscribe(new sp(e,this.nextOrObserver,this.error,this.complete))}}class sp extends m{constructor(e,t,i,n){super(e),this._tapNext=tp,this._tapError=tp,this._tapComplete=tp,this._tapError=i||tp,this._tapComplete=n||tp,s(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||tp,this._tapError=t.error||tp,this._tapComplete=t.complete||tp)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function rp(e){return t=>t.lift(new op(e))}class op{constructor(e){this.callback=e}call(e,t){return t.subscribe(new ap(e,this.callback))}}class ap extends m{constructor(e,t){super(e),this.add(new u(t))}}class lp{constructor(e,t){this.id=e,this.url=t}}class cp extends lp{constructor(e,t,i="imperative",n=null){super(e,t),this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hp extends lp{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dp extends lp{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class up extends lp{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pp extends lp{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fp extends lp{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mp extends lp{constructor(e,t,i,n,s){super(e,t),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gp extends lp{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vp extends lp{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yp{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bp{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wp{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sp{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cp{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _p{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ep{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Tp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Bo(0,"router-outlet")},directives:function(){return[Im]},encapsulation:2}),e})();class xp{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function kp(e){return new xp(e)}function Ap(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Op(e,t,i){const n=i.path.split("/");if(n.length>e.length)return null;if("full"===i.pathMatch&&(t.hasChildren()||n.length<e.length))return null;const s={};for(let r=0;r<n.length;r++){const t=n[r],i=e[r];if(t.startsWith(":"))s[t.substring(1)]=i;else if(t!==i.path)return null}return{consumed:e.slice(0,n.length),posParams:s}}class Dp{constructor(e,t){this.routes=e,this.module=t}}function Ip(e,t=""){for(let i=0;i<e.length;i++){const n=e[i];Rp(n,Pp(t,n))}}function Rp(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Ip(e.children,t)}function Pp(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Mp(e){const t=e.children&&e.children.map(Mp),i=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!i.component&&(t||i.loadChildren)&&i.outlet&&"primary"!==i.outlet&&(i.component=Tp),i}function Lp(e,t){const i=Object.keys(e),n=Object.keys(t);if(!i||!n||i.length!=n.length)return!1;let s;for(let r=0;r<i.length;r++)if(s=i[r],!Np(e[s],t[s]))return!1;return!0}function Np(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every(e=>t.indexOf(e)>-1):e===t}function Vp(e){return Array.prototype.concat.apply([],e)}function Bp(e){return e.length>0?e[e.length-1]:null}function Fp(e,t){for(const i in e)e.hasOwnProperty(i)&&t(e[i],i)}function jp(e){return qo(e)?e:Uo(e)?U(Promise.resolve(e)):du(e)}function Hp(e,t,i){return i?function(e,t){return Lp(e,t)}(e.queryParams,t.queryParams)&&function e(t,i){if(!zp(t.segments,i.segments))return!1;if(t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children){if(!t.children[n])return!1;if(!e(t.children[n],i.children[n]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>Np(e[i],t[i]))}(e.queryParams,t.queryParams)&&function e(t,i){return function t(i,n,s){if(i.segments.length>s.length)return!!zp(i.segments.slice(0,s.length),s)&&!n.hasChildren();if(i.segments.length===s.length){if(!zp(i.segments,s))return!1;for(const t in n.children){if(!i.children[t])return!1;if(!e(i.children[t],n.children[t]))return!1}return!0}{const e=s.slice(0,i.segments.length),r=s.slice(i.segments.length);return!!zp(i.segments,e)&&!!i.children.primary&&t(i.children.primary,n,r)}}(t,i,i.segments)}(e.root,t.root)}class Up{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kp(this.queryParams)),this._queryParamMap}toString(){return Kp.serialize(this)}}class qp{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fp(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xp(this)}}class Wp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=kp(this.parameters)),this._parameterMap}toString(){return nf(this)}}function zp(e,t){return e.length===t.length&&e.every((e,i)=>e.path===t[i].path)}function Gp(e,t){let i=[];return Fp(e.children,(e,n)=>{"primary"===n&&(i=i.concat(t(e,n)))}),Fp(e.children,(e,n)=>{"primary"!==n&&(i=i.concat(t(e,n)))}),i}class Yp{}class $p{parse(e){const t=new lf(e);return new Up(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${"/"+function e(t,i){if(!t.hasChildren())return Xp(t);if(i){const i=t.children.primary?e(t.children.primary,!1):"",n=[];return Fp(t.children,(t,i)=>{"primary"!==i&&n.push(`${i}:${e(t,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}{const i=Gp(t,(i,n)=>"primary"===n?[e(t.children.primary,!1)]:[`${n}:${e(i,!1)}`]);return`${Xp(t)}/(${i.join("//")})`}}(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(e=>`${Qp(t)}=${Qp(e)}`).join("&"):`${Qp(t)}=${Qp(i)}`});return t.length?"?"+t.join("&"):""}(e.queryParams)}${"string"==typeof e.fragment?"#"+encodeURI(e.fragment):""}`}}const Kp=new $p;function Xp(e){return e.segments.map(e=>nf(e)).join("/")}function Jp(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qp(e){return Jp(e).replace(/%3B/gi,";")}function Zp(e){return Jp(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ef(e){return decodeURIComponent(e)}function tf(e){return ef(e.replace(/\+/g,"%20"))}function nf(e){return`${Zp(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Zp(e)}=${Zp(t[e])}`).join("")}`;var t}const sf=/^[^\/()?;=#]+/;function rf(e){const t=e.match(sf);return t?t[0]:""}const of=/^[^=?&#]+/,af=/^[^?&#]+/;class lf{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qp([],{}):new qp([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i.primary=new qp(e,t)),i}parseSegment(){const e=rf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Wp(ef(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rf(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const e=rf(this.remaining);e&&(i=e,this.capture(i))}e[ef(t)]=ef(i)}parseQueryParam(e){const t=function(e){const t=e.match(of);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(af);return t?t[0]:""}(this.remaining);e&&(i=e,this.capture(i))}const n=tf(t),s=tf(i);if(e.hasOwnProperty(n)){let t=e[n];Array.isArray(t)||(t=[t],e[n]=t),t.push(s)}else e[n]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=rf(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error(`Cannot parse url '${this.url}'`);let s=void 0;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s="primary");const r=this.parseChildren();t[s]=1===Object.keys(r).length?r.primary:new qp([],r),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class cf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hf(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=hf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=df(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return df(e,this._root).map(e=>e.value)}}function hf(e,t){if(e===t.value)return t;for(const i of t.children){const t=hf(e,i);if(t)return t}return null}function df(e,t){if(e===t.value)return[t];for(const i of t.children){const n=df(e,i);if(n.length)return n.unshift(t),n}return[]}class uf{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pf(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class ff extends cf{constructor(e,t){super(e),this.snapshot=t,wf(this,e)}toString(){return this.snapshot.toString()}}function mf(e,t){const i=function(e,t){const i=new yf([],{},{},"",{},"primary",t,null,e.root,-1,{});return new bf("",new uf(i,[]))}(e,t),n=new uu([new Wp("",{})]),s=new uu({}),r=new uu({}),o=new uu({}),a=new uu(""),l=new gf(n,s,o,a,r,"primary",t,i.root);return l.snapshot=i.root,new ff(new uf(l,[]),i)}class gf{constructor(e,t,i,n,s,r,o,a){this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=r,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>kp(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>kp(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vf(e,t="emptyOnly"){const i=e.pathFromRoot;let n=0;if("always"!==t)for(n=i.length-1;n>=1;){const e=i[n],t=i[n-1];if(e.routeConfig&&""===e.routeConfig.path)n--;else{if(t.component)break;n--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(i.slice(n))}class yf{constructor(e,t,i,n,s,r,o,a,l,c,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=r,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bf extends cf{constructor(e,t){super(t),this.url=e,wf(this,t)}toString(){return Sf(this._root)}}function wf(e,t){t.value._routerState=e,t.children.forEach(t=>wf(e,t))}function Sf(e){const t=e.children.length>0?` { ${e.children.map(Sf).join(", ")} } `:"";return`${e.value}${t}`}function Cf(e){if(e.snapshot){const t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,Lp(t.queryParams,i.queryParams)||e.queryParams.next(i.queryParams),t.fragment!==i.fragment&&e.fragment.next(i.fragment),Lp(t.params,i.params)||e.params.next(i.params),function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Lp(e[i],t[i]))return!1;return!0}(t.url,i.url)||e.url.next(i.url),Lp(t.data,i.data)||e.data.next(i.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function _f(e,t){var i,n;return Lp(e.params,t.params)&&zp(i=e.url,n=t.url)&&i.every((e,t)=>Lp(e.parameters,n[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||_f(e.parent,t.parent))}function Ef(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Tf(e,t,i,n,s){let r={};return n&&Fp(n,(e,t)=>{r[t]=Array.isArray(e)?e.map(e=>""+e):""+e}),new Up(i.root===e?t:function e(t,i,n){const s={};return Fp(t.children,(t,r)=>{s[r]=t===i?n:e(t,i,n)}),new qp(t.segments,s)}(i.root,e,t),r,s)}class xf{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ef(i[0]))throw new Error("Root segment cannot have matrix parameters");const n=i.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(n&&n!==Bp(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kf{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Af(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function Of(e,t,i){if(e||(e=new qp([],{})),0===e.segments.length&&e.hasChildren())return Df(e,t,i);const n=function(e,t,i){let n=0,s=t;const r={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(n>=i.length)return r;const t=e.segments[s],o=Af(i[n]),a=n<i.length-1?i[n+1]:null;if(s>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!Mf(o,a,t))return r;n+=2}else{if(!Mf(o,{},t))return r;n++}s++}return{match:!0,pathIndex:s,commandIndex:n}}(e,t,i),s=i.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){const t=new qp(e.segments.slice(0,n.pathIndex),{});return t.children.primary=new qp(e.segments.slice(n.pathIndex),e.children),Df(t,0,s)}return n.match&&0===s.length?new qp(e.segments,{}):n.match&&!e.hasChildren()?If(e,t,i):n.match?Df(e,0,s):If(e,t,i)}function Df(e,t,i){if(0===i.length)return new qp(e.segments,{});{const n=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(i),s={};return Fp(n,(i,n)=>{null!==i&&(s[n]=Of(e.children[n],t,i))}),Fp(e.children,(e,t)=>{void 0===n[t]&&(s[t]=e)}),new qp(e.segments,s)}}function If(e,t,i){const n=e.segments.slice(0,t);let s=0;for(;s<i.length;){if("object"==typeof i[s]&&void 0!==i[s].outlets){const e=Rf(i[s].outlets);return new qp(n,e)}if(0===s&&Ef(i[0])){n.push(new Wp(e.segments[t].path,i[0])),s++;continue}const r=Af(i[s]),o=s<i.length-1?i[s+1]:null;r&&o&&Ef(o)?(n.push(new Wp(r,Pf(o))),s+=2):(n.push(new Wp(r,{})),s++)}return new qp(n,{})}function Rf(e){const t={};return Fp(e,(e,i)=>{null!==e&&(t[i]=If(new qp([],{}),0,e))}),t}function Pf(e){const t={};return Fp(e,(e,i)=>t[i]=""+e),t}function Mf(e,t,i){return e==i.path&&Lp(t,i.parameters)}class Lf{constructor(e,t,i,n){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=n}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Cf(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const n=pf(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,n[t],i),delete n[t]}),Fp(n,(e,t)=>{this.deactivateRouteAndItsChildren(e,i)})}deactivateRoutes(e,t,i){const n=e.value,s=t?t.value:null;if(n===s)if(n.component){const s=i.getContext(n.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet);if(i&&i.outlet){const t=i.outlet.detach(),n=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:n})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet);if(i){const n=pf(e),s=e.value.component?i.children:t;Fp(n,(e,t)=>this.deactivateRouteAndItsChildren(e,s)),i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated())}}activateChildRoutes(e,t,i){const n=pf(t);e.children.forEach(e=>{this.activateRoutes(e,n[e.value.outlet],i),this.forwardEvent(new _p(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Sp(e.value.snapshot))}activateRoutes(e,t,i){const n=e.value,s=t?t.value:null;if(Cf(n),n===s)if(n.component){const s=i.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(n.component){const t=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const e=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Nf(e.route)}else{const i=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(n.snapshot),s=i?i.module.componentFactoryResolver:null;t.attachRef=null,t.route=n,t.resolver=s,t.outlet&&t.outlet.activateWith(n,s),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,i)}}function Nf(e){Cf(e.value),e.children.forEach(Nf)}function Vf(e){return"function"==typeof e}function Bf(e){return e instanceof Up}class Ff{constructor(e){this.segmentGroup=e||null}}class jf{constructor(e){this.urlTree=e}}function Hf(e){return new S(t=>t.error(new Ff(e)))}function Uf(e){return new S(t=>t.error(new jf(e)))}function qf(e){return new S(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Wf{constructor(e,t,i,n,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=n,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(it)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(B(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vu(e=>{if(e instanceof jf)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Ff)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(B(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(Vu(e=>{if(e instanceof Ff)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const n=e.segments.length>0?new qp([],{primary:e}):e;return new Up(n,t,i)}expandSegmentGroup(e,t,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(B(e=>new qp([],e))):this.expandSegment(e,i,t,i.segments,n,!0)}expandChildren(e,t,i){return function(e,t){if(0===Object.keys(e).length)return du({});const i=[],n=[],s={};return Fp(e,(e,r)=>{const o=t(r,e).pipe(B(e=>s[r]=e));"primary"===r?i.push(o):n.push(o)}),du.apply(null,i.concat(n)).pipe(Su(),Nu(),B(()=>s))}(i.children,(i,n)=>this.expandSegmentGroup(e,t,n,i))}expandSegment(e,t,i,n,s,r){return du(...i).pipe(B(o=>this.expandSegmentAgainstRoute(e,t,i,o,n,s,r).pipe(Vu(e=>{if(e instanceof Ff)return du(null);throw e}))),Su(),qu(e=>!!e),Vu((e,i)=>{if(e instanceof pu||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,n,s))return du(new qp([],{}));throw new Ff(t)}throw e}))}noLeftoversInUrl(e,t,i){return 0===t.length&&!e.children[i]}expandSegmentAgainstRoute(e,t,i,n,s,r,o){return $f(n)!==r?Hf(t):void 0===n.redirectTo?this.matchSegmentAgainstRoute(e,t,n,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,n,s,r):Hf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,n,s,r){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,n,r):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,n,s,r)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,n){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Uf(s):this.lineralizeSegments(i,s).pipe(q(i=>{const s=new qp(i,{});return this.expandSegment(e,s,t,i,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,n,s,r){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=zf(t,n,s);if(!o)return Hf(t);const h=this.applyRedirectCommands(a,n.redirectTo,c);return n.redirectTo.startsWith("/")?Uf(h):this.lineralizeSegments(n,h).pipe(q(n=>this.expandSegment(e,t,i,n.concat(s.slice(l)),r,!1)))}matchSegmentAgainstRoute(e,t,i,n){if("**"===i.path)return i.loadChildren?this.configLoader.load(e.injector,i).pipe(B(e=>(i._loadedConfig=e,new qp(n,{})))):du(new qp(n,{}));const{matched:s,consumedSegments:r,lastChild:o}=zf(t,i,n);if(!s)return Hf(t);const a=n.slice(o);return this.getChildConfig(e,i,n).pipe(q(e=>{const i=e.module,n=e.routes,{segmentGroup:s,slicedSegments:o}=function(e,t,i,n){return i.length>0&&function(e,t,i){return i.some(i=>Yf(e,t,i)&&"primary"!==$f(i))}(e,i,n)?{segmentGroup:Gf(new qp(t,function(e,t){const i={};i.primary=t;for(const n of e)""===n.path&&"primary"!==$f(n)&&(i[$f(n)]=new qp([],{}));return i}(n,new qp(i,e.children)))),slicedSegments:[]}:0===i.length&&function(e,t,i){return i.some(i=>Yf(e,t,i))}(e,i,n)?{segmentGroup:Gf(new qp(e.segments,function(e,t,i,n){const s={};for(const r of i)Yf(e,t,r)&&!n[$f(r)]&&(s[$f(r)]=new qp([],{}));return Object.assign(Object.assign({},n),s)}(e,i,n,e.children))),slicedSegments:i}:{segmentGroup:e,slicedSegments:i}}(t,r,a,n);return 0===o.length&&s.hasChildren()?this.expandChildren(i,n,s).pipe(B(e=>new qp(r,e))):0===n.length&&0===o.length?du(new qp(r,{})):this.expandSegment(i,s,n,o,"primary",!0).pipe(B(e=>new qp(r.concat(e.segments),e.children)))}))}getChildConfig(e,t,i){return t.children?du(new Dp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?du(t._loadedConfig):function(e,t,i){const n=t.canLoad;return n&&0!==n.length?U(n).pipe(B(n=>{const s=e.get(n);let r;if(function(e){return e&&Vf(e.canLoad)}(s))r=s.canLoad(t,i);else{if(!Vf(s))throw new Error("Invalid CanLoad guard");r=s(t,i)}return jp(r)})).pipe(Su(),(s=e=>!0===e,e=>e.lift(new Wu(s,void 0,e)))):du(!0);var s}(e.injector,t,i).pipe(q(i=>i?this.configLoader.load(e.injector,t).pipe(B(e=>(t._loadedConfig=e,e))):function(e){return new S(t=>t.error(Ap(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):du(new Dp([],e))}lineralizeSegments(e,t){let i=[],n=t.root;for(;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return du(i);if(n.numberOfChildren>1||!n.children.primary)return qf(e.redirectTo);n=n.children.primary}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,n){const s=this.createSegmentGroup(e,t.root,i,n);return new Up(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Fp(e,(e,n)=>{if("string"==typeof e&&e.startsWith(":")){const s=e.substring(1);i[n]=t[s]}else i[n]=e}),i}createSegmentGroup(e,t,i,n){const s=this.createSegments(e,t.segments,i,n);let r={};return Fp(t.children,(t,s)=>{r[s]=this.createSegmentGroup(e,t,i,n)}),new qp(s,r)}createSegments(e,t,i,n){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,n):this.findOrReturn(t,i))}findPosParam(e,t,i){const n=i[t.path.substring(1)];if(!n)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return n}findOrReturn(e,t){let i=0;for(const n of t){if(n.path===e.path)return t.splice(i),n;i++}return e}}function zf(e,t,i){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||i.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const n=(t.matcher||Op)(i,e,t);return n?{matched:!0,consumedSegments:n.consumed,lastChild:n.consumed.length,positionalParamSegments:n.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Gf(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new qp(e.segments.concat(t.segments),t.children)}return e}function Yf(e,t,i){return(!(e.hasChildren()||t.length>0)||"full"!==i.pathMatch)&&""===i.path&&void 0!==i.redirectTo}function $f(e){return e.outlet||"primary"}class Kf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xf{constructor(e,t){this.component=e,this.route=t}}function Jf(e,t,i){const n=e._root;return function e(t,i,n,s,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=pf(i);return t.children.forEach(t=>{!function(t,i,n,s,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,a=i?i.value:null,l=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const c=function(e,t,i){if("function"==typeof i)return i(e,t);switch(i){case"pathParamsChange":return!zp(e.url,t.url);case"pathParamsOrQueryParamsChange":return!zp(e.url,t.url)||!Lp(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_f(e,t)||!Lp(e.queryParams,t.queryParams);case"paramsChange":default:return!_f(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Kf(s)):(o.data=a.data,o._resolvedData=a._resolvedData),e(t,i,o.component?l?l.children:null:n,s,r),c&&r.canDeactivateChecks.push(new Xf(l&&l.outlet&&l.outlet.component||null,a))}else a&&Zf(i,l,r),r.canActivateChecks.push(new Kf(s)),e(t,null,o.component?l?l.children:null:n,s,r)}(t,o[t.value.outlet],n,s.concat([t.value]),r),delete o[t.value.outlet]}),Fp(o,(e,t)=>Zf(e,n.getContext(t),r)),r}(n,t?t._root:null,i,[n.value])}function Qf(e,t,i){const n=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(n?n.module.injector:i).get(e)}function Zf(e,t,i){const n=pf(e),s=e.value;Fp(n,(e,n)=>{Zf(e,s.component?t?t.children.getContext(n):null:t,i)}),i.canDeactivateChecks.push(new Xf(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}const em=Symbol("INITIAL_VALUE");function tm(){return Gu(e=>mu(...e.map(e=>e.pipe(ju(1),Xu(em)))).pipe(Ju((e,t)=>{let i=!1;return t.reduce((e,n,s)=>{if(e!==em)return e;if(n===em&&(i=!0),!i){if(!1===n)return n;if(s===t.length-1||Bf(n))return n}return e},e)},em),Cu(e=>e!==em),B(e=>Bf(e)?e:!0===e),ju(1)))}function im(e,t){return null!==e&&t&&t(new Cp(e)),du(!0)}function nm(e,t){return null!==e&&t&&t(new wp(e)),du(!0)}function sm(e,t,i){const n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?du(n.map(n=>wu(()=>{const s=Qf(n,t,i);let r;if(function(e){return e&&Vf(e.canActivate)}(s))r=jp(s.canActivate(t,e));else{if(!Vf(s))throw new Error("Invalid CanActivate guard");r=jp(s(t,e))}return r.pipe(qu())}))).pipe(tm()):du(!0)}function rm(e,t,i){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>wu(()=>du(t.guards.map(s=>{const r=Qf(s,t.node,i);let o;if(function(e){return e&&Vf(e.canActivateChild)}(r))o=jp(r.canActivateChild(n,e));else{if(!Vf(r))throw new Error("Invalid CanActivateChild guard");o=jp(r(n,e))}return o.pipe(qu())})).pipe(tm())));return du(s).pipe(tm())}class om{}class am{constructor(e,t,i,n,s,r){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=n,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=r}recognize(){try{const e=hm(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),i=new yf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),n=new uf(i,t),s=new bf(this.url,n);return this.inheritParamsAndData(s._root),du(s)}catch(e){return new S(i=>i.error(e))}}inheritParamsAndData(e){const t=e.value,i=vf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=Gp(t,(t,i)=>this.processSegmentGroup(e,t,i));return function(e){const t={};e.forEach(e=>{const i=t[e.value.outlet];if(i){const t=i.url.map(e=>e.toString()).join("/"),n=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${n}'.`)}t[e.value.outlet]=e.value})}(i),i.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(t,i,n,s){for(const r of t)try{return this.processSegmentAgainstRoute(r,i,n,s)}catch(e){if(!(e instanceof om))throw e}if(this.noLeftoversInUrl(i,n,s))return[];throw new om}noLeftoversInUrl(e,t,i){return 0===t.length&&!e.children[i]}processSegmentAgainstRoute(e,t,i,n){if(e.redirectTo)throw new om;if((e.outlet||"primary")!==n)throw new om;let s,r=[],o=[];if("**"===e.path){const r=i.length>0?Bp(i).parameters:{};s=new yf(i,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pm(e),n,e.component,e,lm(t),cm(t)+i.length,fm(e))}else{const a=function(e,t,i){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||i.length>0))throw new om;return{consumedSegments:[],lastChild:0,parameters:{}}}const n=(t.matcher||Op)(i,e,t);if(!n)throw new om;const s={};Fp(n.posParams,(e,t)=>{s[t]=e.path});const r=n.consumed.length>0?Object.assign(Object.assign({},s),n.consumed[n.consumed.length-1].parameters):s;return{consumedSegments:n.consumed,lastChild:n.consumed.length,parameters:r}}(t,e,i);r=a.consumedSegments,o=i.slice(a.lastChild),s=new yf(r,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pm(e),n,e.component,e,lm(t),cm(t)+r.length,fm(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:c}=hm(t,r,o,a,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const e=this.processChildren(a,l);return[new uf(s,e)]}if(0===a.length&&0===c.length)return[new uf(s,[])];const h=this.processSegment(a,l,c,"primary");return[new uf(s,h)]}}function lm(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function cm(e){let t=e,i=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,i+=t._segmentIndexShift?t._segmentIndexShift:0;return i-1}function hm(e,t,i,n,s){if(i.length>0&&function(e,t,i){return i.some(i=>dm(e,t,i)&&"primary"!==um(i))}(e,i,n)){const s=new qp(t,function(e,t,i,n){const s={};s.primary=n,n._sourceSegment=e,n._segmentIndexShift=t.length;for(const r of i)if(""===r.path&&"primary"!==um(r)){const i=new qp([],{});i._sourceSegment=e,i._segmentIndexShift=t.length,s[um(r)]=i}return s}(e,t,n,new qp(i,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===i.length&&function(e,t,i){return i.some(i=>dm(e,t,i))}(e,i,n)){const r=new qp(e.segments,function(e,t,i,n,s,r){const o={};for(const a of n)if(dm(e,i,a)&&!s[um(a)]){const i=new qp([],{});i._sourceSegment=e,i._segmentIndexShift="legacy"===r?e.segments.length:t.length,o[um(a)]=i}return Object.assign(Object.assign({},s),o)}(e,t,i,n,e.children,s));return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:i}}const r=new qp(e.segments,e.children);return r._sourceSegment=e,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:i}}function dm(e,t,i){return(!(e.hasChildren()||t.length>0)||"full"!==i.pathMatch)&&""===i.path&&void 0===i.redirectTo}function um(e){return e.outlet||"primary"}function pm(e){return e.data||{}}function fm(e){return e.resolve||{}}function mm(e,t,i,n){const s=Qf(e,t,n);return jp(s.resolve?s.resolve(t,i):s(t,i))}function gm(e){return function(t){return t.pipe(Gu(t=>{const i=e(t);return i?U(i).pipe(B(()=>t)):U([t])}))}}class vm{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const ym=new He("ROUTES");class bm{constructor(e,t,i,n){this.loader=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=n}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B(i=>{this.onLoadEndListener&&this.onLoadEndListener(t);const n=i.create(e);return new Dp(Vp(n.injector.get(ym)).map(Mp),n)}))}loadModuleFactory(e){return"string"==typeof e?U(this.loader.load(e)):jp(e()).pipe(q(e=>e instanceof nt?du(e):U(this.compiler.compileModuleAsync(e))))}}class wm{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Sm(e){throw e}function Cm(e,t,i){return t.parse("/")}function _m(e,t){return du(null)}let Em=(()=>{class t{constructor(e,t,i,n,s,r,o,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=i,this.location=n,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=Sm,this.malformedUriErrorHandler=Cm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_m,afterPreactivation:_m},this.urlHandlingStrategy=new wm,this.routeReuseStrategy=new vm,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(it),this.console=s.get(Ec);const l=s.get(Bc);this.isNgZoneEnabled=l instanceof Bc,this.resetConfig(a),this.currentUrlTree=new Up(new qp([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bm(r,o,e=>this.triggerEvent(new yp(e)),e=>this.triggerEvent(new bp(e))),this.routerState=mf(this.currentUrlTree,this.rootComponentType),this.transitions=new uu({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Cu(e=>0!==e.id),B(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Gu(e=>{let i=!1,n=!1;return du(e).pipe(ip(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gu(e=>{const i=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||i)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return du(e).pipe(Gu(e=>{const i=this.transitions.getValue();return t.next(new cp(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),i!==this.transitions.getValue()?yu:[e]}),Gu(e=>Promise.resolve(e)),(n=this.ngModule.injector,s=this.configLoader,r=this.urlSerializer,o=this.config,function(e){return e.pipe(Gu(e=>function(e,t,i,n,s){return new Wf(e,t,i,n,s).apply()}(n,s,r,e.extractedUrl,o).pipe(B(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),ip(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,i,n,s){return function(r){return r.pipe(q(r=>function(e,t,i,n,s="emptyOnly",r="legacy"){return new am(e,t,i,n,s,r).recognize()}(e,t,r.urlAfterRedirects,i(r.urlAfterRedirects),n,s).pipe(B(e=>Object.assign(Object.assign({},r),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),ip(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),ip(e=>{const i=new pp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(i)}));var n,s,r,o;if(i&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:i,extractedUrl:n,source:s,restoredState:r,extras:o}=e,a=new cp(i,this.serializeUrl(n),s,r);t.next(a);const l=mf(n,this.rootComponentType).snapshot;return du(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:n,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),yu}),gm(e=>{const{targetSnapshot:t,id:i,extractedUrl:n,rawUrl:s,extras:{skipLocationChange:r,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:i,appliedUrlTree:n,rawUrlTree:s,skipLocationChange:!!r,replaceUrl:!!o})}),ip(e=>{const t=new fp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),B(e=>Object.assign(Object.assign({},e),{guards:Jf(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(i){return i.pipe(q(i=>{const{targetSnapshot:n,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=i;return 0===o.length&&0===r.length?du(Object.assign(Object.assign({},i),{guardsResult:!0})):function(e,t,i,n){return U(e).pipe(q(e=>function(e,t,i,n,s){const r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return r&&0!==r.length?du(r.map(r=>{const o=Qf(r,t,s);let a;if(function(e){return e&&Vf(e.canDeactivate)}(o))a=jp(o.canDeactivate(e,t,i,n));else{if(!Vf(o))throw new Error("Invalid CanDeactivate guard");a=jp(o(e,t,i,n))}return a.pipe(qu())})).pipe(tm()):du(!0)}(e.component,e.route,i,t,n)),qu(e=>!0!==e,!0))}(o,n,s,e).pipe(q(i=>i&&"boolean"==typeof i?function(e,t,i,n){return U(t).pipe(ep(t=>U([nm(t.route.parent,n),im(t.route,n),rm(e,t.path,i),sm(e,t.route,i)]).pipe(Su(),qu(e=>!0!==e,!0))),qu(e=>!0!==e,!0))}(n,r,e,t):du(i)),B(e=>Object.assign(Object.assign({},i),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),ip(e=>{if(Bf(e.guardsResult)){const t=Ap(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),ip(e=>{const t=new mp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Cu(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const i=new dp(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(i),e.resolve(!1),!1}return!0}),gm(e=>{if(e.guards.canActivateChecks.length)return du(e).pipe(ip(e=>{const t=new gp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(t=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(e){return e.pipe(q(e=>{const{targetSnapshot:n,guards:{canActivateChecks:s}}=e;return s.length?U(s).pipe(ep(e=>function(e,t,i,n){return function(e,t,i,n){const s=Object.keys(e);if(0===s.length)return du({});if(1===s.length){const r=s[0];return mm(e[r],t,i,n).pipe(B(e=>({[r]:e})))}const r={};return U(s).pipe(q(s=>mm(e[s],t,i,n).pipe(B(e=>(r[s]=e,e))))).pipe(Nu(),B(()=>r))}(e._resolve,e,t,n).pipe(B(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),vf(e,i).resolve),null)))}(e.route,n,t,i)),function(e,t){return arguments.length>=2?function(i){return b(Ju(e,t),xu(1),Pu(t))(i)}:function(t){return b(Ju((t,i,n)=>e(t,i,n+1)),xu(1))(t)}}((e,t)=>e),B(t=>e)):du(e)}))}),ip(e=>{const t=new vp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}));var t,i}),gm(e=>{const{targetSnapshot:t,id:i,extractedUrl:n,rawUrl:s,extras:{skipLocationChange:r,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:i,appliedUrlTree:n,rawUrlTree:s,skipLocationChange:!!r,replaceUrl:!!o})}),B(e=>{const t=function(e,t,i){const n=function e(t,i,n){if(n&&t.shouldReuseRoute(i.value,n.value.snapshot)){const s=n.value;s._futureSnapshot=i.value;const r=function(t,i,n){return i.children.map(i=>{for(const s of n.children)if(t.shouldReuseRoute(s.value.snapshot,i.value))return e(t,i,s);return e(t,i)})}(t,i,n);return new uf(s,r)}{const n=t.retrieve(i.value);if(n){const e=n.route;return function e(t,i){if(t.value.routeConfig!==i.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==i.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");i.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)e(t.children[n],i.children[n])}(i,e),e}{const n=new gf(new uu((s=i.value).url),new uu(s.params),new uu(s.queryParams),new uu(s.fragment),new uu(s.data),s.outlet,s.component,s),r=i.children.map(i=>e(t,i));return new uf(n,r)}}var s}(e,t._root,i?i._root:void 0);return new ff(n,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),ip(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,r=this.routeReuseStrategy,o=e=>this.triggerEvent(e),B(e=>(new Lf(r,e.targetRouterState,e.currentRouterState,o).activate(s),e))),ip({next(){i=!0},complete(){i=!0}}),rp(()=>{if(!i&&!n){this.resetUrlToCurrentUrlTree();const i=new dp(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(i),e.resolve(!1)}this.currentNavigation=null}),Vu(i=>{if(n=!0,(s=i)&&s.ngNavigationCancelingError){const n=Bf(i.url);n||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const s=new dp(e.id,this.serializeUrl(e.extractedUrl),i.message);t.next(s),n?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(i.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const n=new up(e.id,this.serializeUrl(e.extractedUrl),i);t.next(n);try{e.resolve(this.errorHandler(i))}catch(r){e.reject(r)}}var s;return yu}));var s,r,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const i="popstate"===e.type?"popstate":"hashchange",n=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,i,n,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ip(e),this.config=e.map(Mp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:i,queryParams:n,fragment:s,preserveQueryParams:r,queryParamsHandling:o,preserveFragment:a}=t;kn()&&r&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=i||this.routerState.root,c=a?this.currentUrlTree.fragment:s;let h=null;if(o)switch(o){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=n||null}else h=r?this.currentUrlTree.queryParams:n||null;return null!==h&&(h=this.removeEmptyProps(h)),function(e,t,i,n,s){if(0===i.length)return Tf(t.root,t.root,t,n,s);const r=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new xf(!0,0,e);let t=0,i=!1;const n=e.reduce((e,n,s)=>{if("object"==typeof n&&null!=n){if(n.outlets){const t={};return Fp(n.outlets,(e,i)=>{t[i]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(n.segmentPath)return[...e,n.segmentPath]}return"string"!=typeof n?[...e,n]:0===s?(n.split("/").forEach((n,s)=>{0==s&&"."===n||(0==s&&""===n?i=!0:".."===n?t++:""!=n&&e.push(n))}),e):[...e,n]},[]);return new xf(i,t,n)}(i);if(r.toRoot())return Tf(t.root,new qp([],{}),t,n,s);const o=function(e,t,i){if(e.isAbsolute)return new kf(t.root,!0,0);if(-1===i.snapshot._lastPathIndex)return new kf(i.snapshot._urlSegment,!0,0);const n=Ef(e.commands[0])?0:1;return function(e,t,i){let n=e,s=t,r=i;for(;r>s;){if(r-=s,n=n.parent,!n)throw new Error("Invalid number of '../'");s=n.segments.length}return new kf(n,!1,s-r)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+n,e.numberOfDoubleDots)}(r,t,e),a=o.processChildren?Df(o.segmentGroup,o.index,r.commands):Of(o.segmentGroup,o.index,r.commands);return Tf(o.segmentGroup,a,t,n,s)}(l,this.currentUrlTree,e,h,c)}navigateByUrl(e,t={skipLocationChange:!1}){kn()&&this.isNgZoneEnabled&&!Bc.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const i=Bf(e)?e:this.parseUrl(e),n=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const i=e[t];if(null==i)throw new Error(`The requested path contains ${i} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(e){i=this.malformedUriErrorHandler(e,this.urlSerializer,t)}return i}isActive(e,t){if(Bf(e))return Hp(this.currentUrlTree,e,t);const i=this.parseUrl(e);return Hp(this.currentUrlTree,i,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,i)=>{const n=e[i];return null!=n&&(t[i]=n),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new hp(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,i,n,s){const r=this.getTransition();if(r&&"imperative"!==t&&"imperative"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(r&&"hashchange"==t&&"popstate"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(r&&"popstate"==t&&"hashchange"===r.source&&r.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o,a,l;s?(o=s.resolve,a=s.reject,l=s.promise):l=new Promise((e,t)=>{o=e,a=t});const c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:n,resolve:o,reject:a,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,i,n){const s=this.urlSerializer.serialize(e);n=n||{},this.location.isCurrentPathEqualTo(s)||t?this.location.replaceState(s,"",Object.assign(Object.assign({},n),{navigationId:i})):this.location.go(s,"",Object.assign(Object.assign({},n),{navigationId:i}))}resetStateAndUrl(e,t,i){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){Po()},t.\u0275dir=Ct({type:t}),t})(),Tm=(()=>{class e{constructor(e,t,i,n,s){this.router=e,this.route=t,this.commands=[],null==i&&n.setAttribute(s.nativeElement,"tabindex","0")}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){kn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}onClick(){const e={skipLocationChange:km(this.skipLocationChange),replaceUrl:km(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:km(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:km(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(gf),Ro("tabindex"),Io(Za),Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&Wo("click",(function(){return t.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),e})(),xm=(()=>{class e{constructor(e,t,i){this.router=e,this.route=t,this.locationStrategy=i,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof hp&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){kn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,i,n){if(0!==e||t||i||n)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:km(this.skipLocationChange),replaceUrl:km(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:km(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:km(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(gf),Io(kh))},e.\u0275dir=Ct({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Wo("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(xa("href",t.href,es),ko("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[La]}),e})();function km(e){return""===e||!!e}let Am=(()=>{class e{constructor(e,t,i,n,s){this.router=e,this.element=t,this.renderer=i,this.link=n,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=e.events.subscribe(e=>{e instanceof hp&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(e=>this.update()),this.linksWithHrefs.changes.subscribe(e=>this.update()),this.update()}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){return t=>e.isActive(t.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(Ka),Io(Za),Io(Tm,8),Io(xm,8))},e.\u0275dir=Ct({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,i){var n;1&e&&(cc(i,Tm,!0),cc(i,xm,!0)),2&e&&(rc(n=uc())&&(t.links=n),rc(n=uc())&&(t.linksWithHrefs=n))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[La]}),e})();class Om{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dm,this.attachRef=null}}class Dm{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Om,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Im=(()=>{class e{constructor(e,t,i,n,s){this.parentContexts=e,this.location=t,this.resolver=i,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new $l,this.deactivateEvents=new $l,this.name=n||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const i=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,s=new Rm(e,n,this.location.injector);this.activated=this.location.createComponent(i,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Io(Dm),Io(Sl),Io($a),Ro("name"),Io(Kr))},e.\u0275dir=Ct({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Rm{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===gf?this.route:e===Dm?this.childContexts:this.parent.get(e,t)}}class Pm{}class Mm{preload(e,t){return du(null)}}let Lm=(()=>{class e{constructor(e,t,i,n,s){this.router=e,this.injector=n,this.preloadingStrategy=s,this.loader=new bm(t,i,t=>e.triggerEvent(new yp(t)),t=>e.triggerEvent(new bp(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Cu(e=>e instanceof hp),ep(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(it);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const i=[];for(const n of t)if(n.loadChildren&&!n.canLoad&&n._loadedConfig){const e=n._loadedConfig;i.push(this.processRoutes(e.module,e.routes))}else n.loadChildren&&!n.canLoad?i.push(this.preloadConfig(e,n)):n.children&&i.push(this.processRoutes(e,n.children));return U(i).pipe(G(),B(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(q(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Je(Em),Je(oh),Je(Mc),Je(uo),Je(Pm))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Nm=(()=>{class e{constructor(e,t,i={}){this.router=e,this.viewportScroller=t,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof cp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof hp&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ep&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Ep(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(e){Po()},e.\u0275dir=Ct({type:e}),e})();const Vm=new He("ROUTER_CONFIGURATION"),Bm=new He("ROUTER_FORROOT_GUARD"),Fm=[Rh,{provide:Yp,useClass:$p},{provide:Em,useFactory:function(e,t,i,n,s,r,o,a={},l,c){const h=new Em(null,e,t,i,n,s,r,Vp(o));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),a.errorHandler&&(h.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(h.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const e=gh();h.events.subscribe(t=>{e.logGroup("Router Event: "+t.constructor.name),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return a.onSameUrlNavigation&&(h.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(h.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(h.relativeLinkResolution=a.relativeLinkResolution),h},deps:[Yp,Dm,Rh,uo,oh,Mc,ym,Vm,[class{},new oe],[class{},new oe]]},Dm,{provide:gf,useFactory:function(e){return e.routerState.root},deps:[Em]},{provide:oh,useClass:ch},Lm,Mm,class{preload(e,t){return t().pipe(Vu(()=>du(null)))}},{provide:Vm,useValue:{enableTracing:!1}}];function jm(){return new Zc("Router",Em)}let Hm=(()=>{class e{constructor(e,t){}static forRoot(t,i){return{ngModule:e,providers:[Fm,zm(t),{provide:Bm,useFactory:Wm,deps:[[Em,new oe,new le]]},{provide:Vm,useValue:i||{}},{provide:kh,useFactory:qm,deps:[yh,[new re(Oh),new oe],Vm]},{provide:Nm,useFactory:Um,deps:[Em,Pd,Vm]},{provide:Pm,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Mm},{provide:Zc,multi:!0,useFactory:jm},[Gm,{provide:gc,multi:!0,useFactory:Ym,deps:[Gm]},{provide:Km,useFactory:$m,deps:[Gm]},{provide:_c,multi:!0,useExisting:Km}]]}}static forChild(t){return{ngModule:e,providers:[zm(t)]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(Bm,8),Je(Em,8))}}),e})();function Um(e,t,i){return i.scrollOffset&&t.setOffset(i.scrollOffset),new Nm(e,t,i)}function qm(e,t,i={}){return i.useHash?new Ih(e,t):new Dh(e,t)}function Wm(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function zm(e){return[{provide:po,multi:!0,useValue:e},{provide:ym,multi:!0,useValue:e}]}let Gm=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new x}appInitializer(){return this.injector.get(wh,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),i=this.injector.get(Em),n=this.injector.get(Vm);if(this.isLegacyDisabled(n)||this.isLegacyEnabled(n))e(!0);else if("disabled"===n.initialNavigation)i.setUpLocationChangeListener(),e(!0);else{if("enabled"!==n.initialNavigation)throw new Error(`Invalid initialNavigation options: '${n.initialNavigation}'`);i.hooks.afterPreactivation=()=>this.initNavigation?du(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),i.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(Vm),i=this.injector.get(Lm),n=this.injector.get(Nm),s=this.injector.get(Em),r=this.injector.get(sh);e===r.components[0]&&(this.isLegacyEnabled(t)?s.initialNavigation():this.isLegacyDisabled(t)&&s.setUpLocationChangeListener(),i.setUpPreloading(),n.init(),s.resetRootComponentType(r.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(Je(uo))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();function Ym(e){return e.appInitializer.bind(e)}function $m(e){return e.bootstrapListener.bind(e)}const Km=new He("Router Initializer");let Xm=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-admin-portal"]],decls:1,vars:0,template:function(e,t){1&e&&Bo(0,"router-outlet")},directives:[Im],styles:[""]}),e})();class Jm{}class Qm{}class Zm{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const i=e.slice(0,t),n=i.toLowerCase(),s=e.slice(t+1).trim();this.maybeSetNormalizedName(i,n),this.headers.has(n)?this.headers.get(n).push(s):this.headers.set(n,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const n=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(n,i),this.maybeSetNormalizedName(t,n))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Zm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Zm;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Zm?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const n=("a"===e.op?this.headers.get(t):void 0)||[];n.push(...i),this.headers.set(t,n);break;case"d":const s=e.value;if(s){let e=this.headers.get(t);if(!e)return;e=e.filter(e=>-1===s.indexOf(e)),0===e.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class eg{encodeKey(e){return tg(e)}encodeValue(e){return tg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function tg(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class ig{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new eg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const i=new Map;return e.length>0&&e.split("&").forEach(e=>{const n=e.indexOf("="),[s,r]=-1==n?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,n)),t.decodeValue(e.slice(n+1))],o=i.get(s)||[];o.push(r),i.set(s,o)}),i}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ig({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const i=t.indexOf(e.value);-1!==i&&t.splice(i,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function ng(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function sg(e){return"undefined"!=typeof Blob&&e instanceof Blob}function rg(e){return"undefined"!=typeof FormData&&e instanceof FormData}class og{constructor(e,t,i,n){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==i?i:null,s=n):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new Zm),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const i=t.indexOf("?");this.urlWithParams=t+(-1===i?"?":i<t.length-1?"&":"")+e}}else this.params=new ig,this.urlWithParams=t}serializeBody(){return null===this.body?null:ng(this.body)||sg(this.body)||rg(this.body)||"string"==typeof this.body?this.body:this.body instanceof ig?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rg(this.body)?null:sg(this.body)?this.body.type||null:ng(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ig?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,n=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,r=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,i)=>t.set(i,e.setHeaders[i]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,i)=>t.set(i,e.setParams[i]),l)),new og(t,i,s,{params:l,headers:a,reportProgress:o,responseType:n,withCredentials:r})}}const ag=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class lg{constructor(e,t=200,i="OK"){this.headers=e.headers||new Zm,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class cg extends lg{constructor(e={}){super(e),this.type=ag.ResponseHeader}clone(e={}){return new cg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hg extends lg{constructor(e={}){super(e),this.type=ag.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class dg extends lg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ug(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let pg=(()=>{class e{constructor(e){this.handler=e}request(e,t,i={}){let n;if(e instanceof og)n=e;else{let s=void 0;s=i.headers instanceof Zm?i.headers:new Zm(i.headers);let r=void 0;i.params&&(r=i.params instanceof ig?i.params:new ig({fromObject:i.params})),n=new og(e,t,void 0!==i.body?i.body:null,{headers:s,params:r,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=du(n).pipe(ep(e=>this.handler.handle(e)));if(e instanceof og||"events"===i.observe)return s;const r=s.pipe(Cu(e=>e instanceof hg));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return r.pipe(B(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return r.pipe(B(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return r.pipe(B(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return r.pipe(B(e=>e.body))}case"response":return r;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new ig).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,i={}){return this.request("PATCH",e,ug(i,t))}post(e,t,i={}){return this.request("POST",e,ug(i,t))}put(e,t,i={}){return this.request("PUT",e,ug(i,t))}}return e.\u0275fac=function(t){return new(t||e)(Je(Jm))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class fg{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const mg=new He("HTTP_INTERCEPTORS");let gg=(()=>{class e{intercept(e,t){return t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const vg=/^\)\]\}',?\n/;class yg{}let bg=(()=>{class e{constructor(){}build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),wg=(()=>{class e{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new S(t=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((e,t)=>i.setRequestHeader(e,t.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const t=e.detectContentTypeHeader();null!==t&&i.setRequestHeader("Content-Type",t)}if(e.responseType){const t=e.responseType.toLowerCase();i.responseType="json"!==t?t:"text"}const n=e.serializeBody();let s=null;const r=()=>{if(null!==s)return s;const t=1223===i.status?204:i.status,n=i.statusText||"OK",r=new Zm(i.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||e.url;return s=new cg({headers:r,status:t,statusText:n,url:o}),s},o=()=>{let{headers:n,status:s,statusText:o,url:a}=r(),l=null;204!==s&&(l=void 0===i.response?i.responseText:i.response),0===s&&(s=l?200:0);let c=s>=200&&s<300;if("json"===e.responseType&&"string"==typeof l){const e=l;l=l.replace(vg,"");try{l=""!==l?JSON.parse(l):null}catch(h){l=e,c&&(c=!1,l={error:h,text:l})}}c?(t.next(new hg({body:l,headers:n,status:s,statusText:o,url:a||void 0})),t.complete()):t.error(new dg({error:l,headers:n,status:s,statusText:o,url:a||void 0}))},a=e=>{const{url:n}=r(),s=new dg({error:e,status:i.status||0,statusText:i.statusText||"Unknown Error",url:n||void 0});t.error(s)};let l=!1;const c=n=>{l||(t.next(r()),l=!0);let s={type:ag.DownloadProgress,loaded:n.loaded};n.lengthComputable&&(s.total=n.total),"text"===e.responseType&&i.responseText&&(s.partialText=i.responseText),t.next(s)},h=e=>{let i={type:ag.UploadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),t.next(i)};return i.addEventListener("load",o),i.addEventListener("error",a),e.reportProgress&&(i.addEventListener("progress",c),null!==n&&i.upload&&i.upload.addEventListener("progress",h)),i.send(n),t.next({type:ag.Sent}),()=>{i.removeEventListener("error",a),i.removeEventListener("load",o),e.reportProgress&&(i.removeEventListener("progress",c),null!==n&&i.upload&&i.upload.removeEventListener("progress",h)),i.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Je(yg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Sg=new He("XSRF_COOKIE_NAME"),Cg=new He("XSRF_HEADER_NAME");class _g{}let Eg=(()=>{class e{constructor(e,t,i){this.doc=e,this.platform=t,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=hd(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Je(vh),Je(Cc),Je(Sg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),Tg=(()=>{class e{constructor(e,t){this.tokenService=e,this.headerName=t}intercept(e,t){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return t.handle(e);const n=this.tokenService.getToken();return null===n||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,n)})),t.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(_g),Je(Cg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),xg=(()=>{class e{constructor(e,t){this.backend=e,this.injector=t,this.chain=null}handle(e){if(null===this.chain){const e=this.injector.get(mg,[]);this.chain=e.reduceRight((e,t)=>new fg(e,t),this.backend)}return this.chain.handle(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(Qm),Je(uo))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),kg=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:Tg,useClass:gg}]}}static withOptions(t={}){return{ngModule:e,providers:[t.cookieName?{provide:Sg,useValue:t.cookieName}:[],t.headerName?{provide:Cg,useValue:t.headerName}:[]]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[Tg,{provide:mg,useExisting:Tg,multi:!0},{provide:_g,useClass:Eg},{provide:Sg,useValue:"XSRF-TOKEN"},{provide:Cg,useValue:"X-XSRF-TOKEN"}]}),e})(),Ag=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[pg,{provide:Jm,useClass:xg},wg,{provide:Qm,useExisting:wg},bg,{provide:yg,useExisting:bg}],imports:[[kg.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e})(),Og=(()=>{class e{constructor(e){this.http=e,this.backendUrl="https://backend.fellowgenius.com"}updatePassword(e,t){let i={userId:e.toString(),password:t};return this.http.post(this.backendUrl+"/fellowGenius/updatePassword",i)}resetPasswordLink(e){return this.http.get(this.backendUrl+"/fellowGenius/sendResetLink",{params:{email:e}})}checkUser(e){return this.http.get(this.backendUrl+"/fellowGenius/userExists",{params:{email:e}})}applyFilters(e){return this.http.post(this.backendUrl+"/fellowGenius/filtersApplied",e)}fetchPendingReviewsList(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/fetchPendingReviewsList",{params:{sid:e.toString()}})}fetchExpertRecentReviews(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/expertRecentReviews",{params:{tid:e.toString()}})}giveFeedback(e,t,i,n){return this.http.get(this.backendUrl+"/fellowGenius/meeting/saveTutorRatings",{params:{meetingId:e,rating:t.toString(),reviewText:i,tid:n.toString()}})}registerUser(e){return this.http.post(this.backendUrl+"/fellowGenius/registerUser",e)}verifyEmail(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/sendEmail",{params:{email:e}})}updateStudentProfile(e){return this.http.post(this.backendUrl+"/fellowGenius/updateStudentProfile",e)}checkLogin(e){return this.http.post(this.backendUrl+"/authenticate",{email:e.email,password:e.password,method:e.method})}getStudentDetails(e){return this.http.get(this.backendUrl+"/fellowGenius/getStudentDetails",{params:{userId:e.toString()}})}saveTutorProfile(e){return this.http.post(this.backendUrl+"/fellowGenius/registerTutor",e)}updateTutorProfile(e){return this.http.post(this.backendUrl+"/fellowGenius/updateTutorBasicInfo",e)}fetchAllLinkedTutors(e){return this.http.get(this.backendUrl+"/fellowGenius/fetchAllLinkedTutors",{params:{userId:e.toString()}})}updateTutorProfileDetails(e){return this.http.post(this.backendUrl+"/fellowGenius/updateTutor",e)}updateTutorVerification(e){return this.http.post(this.backendUrl+"/fellowGenius/updateTutorVerification",e)}checkTutorLogin(e){return this.http.post(this.backendUrl+"/authenticateTutor",{email:e.email,password:e.password})}getTutorDetails(e){return this.http.get(this.backendUrl+"/fellowGenius/getTutorDetails",{params:{userId:e.toString()}})}getTutorList(e){return this.http.get(this.backendUrl+"/fellowGenius/fetchTutorList",{params:{subject:e.toString()}})}fetchTopTutors(e){return this.http.get(this.backendUrl+"/fellowGenius/fetchTopTutorList",{params:{subject:e}})}updateBookingStatus(e,t){return this.http.get(this.backendUrl+"/fellowGenius/meeting/updateBookingStatus",{params:{bid:e.toString(),approvalStatus:t}})}fetchBookingStatus(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/fetchBookingStatus",{params:{bid:e.toString()}})}getTutorProfileDetails(e){return this.http.get(this.backendUrl+"/fellowGenius/getTutorProfileDetails",{params:{tid:e.toString()}})}saveBooking(e){return this.http.post(this.backendUrl+"/fellowGenius/meeting/saveMeeting",e)}getTutorBookings(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/findTutorBookings",{params:{tid:e.toString()}})}findStudentBookings(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/findStudentBookings",{params:{studentid:e.toString()}})}deleteMyBooking(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/deleteMyBooking",{params:{bid:e.toString()}})}deleteBookingFromUrl(e,t){return this.http.get(this.backendUrl+"/fellowGenius/meeting/deleteBookingFromUrl",{params:{token:e,bid:t.toString()}})}canRescheduleBooking(e,t){return this.http.get(this.backendUrl+"/fellowGenius/meeting/rescheduleMyBooking",{params:{token:e,bid:t.toString()}})}rescheduleBooking(e){return this.http.post(this.backendUrl+"/fellowGenius/meeting/updateRescheduledBooking",e)}requestToReschedule(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/requestToReschedule",{params:{bid:e.toString()}})}fetchApprovedMeetings(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/fetchApprovedList",{params:{studentid:e.toString()}})}fetchApprovedMeetingsTutor(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/fetchApprovedListTutor",{params:{tutorId:e.toString()}})}fetchLiveMeetingsTutor(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/fetchLiveMeetingListTutor",{params:{tutorId:e.toString()}})}fetchLiveMeetingsStudent(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/fetchLiveMeetingListStudent",{params:{sid:e.toString()}})}saveSocialLogin(e){return this.http.post(this.backendUrl+"/fellowGenius/registerSocialLogin",e)}checkSocialLogin(e){return this.http.get(this.backendUrl+"/fellowGenius/ckeckSocialLogin",{params:{email:e}})}editTutorProfileDetails(e){return this.http.post(this.backendUrl+"/fellowGenius/editTutorProfileDetails",e)}editBasicInfo(e){return this.http.post(this.backendUrl+"/fellowGenius/editTutorBasicInfo",e)}editBasicProfile(e){return this.http.post(this.backendUrl+"/fellowGenius/editTutorBasicInfo",e)}saveScheduleData(e){return this.http.post(this.backendUrl+"/fellowGenius/meeting/saveSchedule",e)}getScheduleData(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/getSchedule",{params:{tid:e.toString()}})}getTutorTimeAvailabilityTimeArray(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/getTutorTimeArray",{params:{tid:e.toString()}})}changeAvailabilityStatus(e,t){return this.http.get(this.backendUrl+"/fellowGenius/changeAvailabilityStatus",{params:{tid:e.toString(),isAavailable:t}})}getStudentSchedule(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/getStudentSchedule",{params:{sid:e.toString()}})}getTutorIsAvailable(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/getTutorIsAvailable",{params:{bookingId:e.toString()}})}isBookingValid(e){return this.http.get(this.backendUrl+"/fellowGenius/meeting/isBookingValid",{params:{sh:e.startTimeHour.toString(),sm:e.startTimeMinute.toString(),eh:e.endTimeHour.toString(),em:e.endTimeMinute.toString(),tid:e.tutorId.toString(),date:e.dateOfMeeting}})}subtractArea(e,t,i){return this.http.get(this.backendUrl+"/fellowGenius/subtractArea",{params:{userId:e.toString(),role:t,subject:i}})}fetchTutorProfileDetails(e){return this.http.get(this.backendUrl+"/fellowGenius/fetchTutorProfileDetails",{params:{tid:e.toString()}})}fetchBookingTutorProfileDetails(e){return this.http.get(this.backendUrl+"/fellowGenius/fetchBookingTutorProfileDetails",{params:{bookingId:e.toString()}})}addNewCategory(e){return this.http.post(this.backendUrl+"/fellowGenius/addCategories",{category:e.category,subCategory:e.subCategory})}getAllCategories(){return this.http.get(this.backendUrl+"/fellowGenius/getAllCategories")}addNewSubCategory(e){return this.http.post(this.backendUrl+"/fellowGenius/addSubCategories",{category:e.category,subCategory:e.subCategory})}getSubCategories(e){return this.http.get(this.backendUrl+"/fellowGenius/getSubCategories",{params:{category:e}})}getAllSubCategories(){return this.http.get(this.backendUrl+"/fellowGenius/getAllSubCategories")}fetchNotifications(e){return this.http.get(this.backendUrl+"/fellowGenius/fetchNotifications",{params:{userId:e}})}getEarningAppInfo(){return this.http.get(this.backendUrl+"/fellowGenius/getEarningsAppInfo")}randomApi(){return this.http.get(this.backendUrl+"/fellowGenius/randomapi")}fetchUserAnalytics(){return this.http.get(this.backendUrl+"/fellowGenius/fetchUserDataAnalytics")}}return e.\u0275fac=function(t){return new(t||e)(Je(pg))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Dg=(()=>{class e{constructor(e){this.httpService=e}ngOnInit(){this.fetchAnalytics()}fetchAnalytics(){this.httpService.fetchUserAnalytics().subscribe(e=>{this.userAnalytics=e,console.log(this.userAnalytics)})}}return e.\u0275fac=function(t){return new(t||e)(Io(Og))},e.\u0275cmp=gt({type:e,selectors:[["app-analytics"]],decls:31,vars:10,consts:[[2,"margin-bottom","10px"]],template:function(e,t){1&e&&(No(0,"div"),No(1,"div",0),No(2,"h1"),wa(3),Vo(),Vo(),No(4,"div",0),No(5,"h1"),wa(6),Vo(),Vo(),No(7,"div",0),No(8,"h1"),wa(9),Vo(),Vo(),No(10,"div",0),No(11,"h1"),wa(12),Vo(),Vo(),No(13,"div",0),No(14,"h1"),wa(15),Vo(),Vo(),No(16,"div",0),No(17,"h1"),wa(18),Vo(),Vo(),No(19,"div",0),No(20,"h1"),wa(21),Vo(),Vo(),No(22,"div",0),No(23,"h1"),wa(24),Vo(),Vo(),No(25,"div",0),No(26,"h1"),wa(27),Vo(),Vo(),No(28,"div",0),No(29,"h1"),wa(30),Vo(),Vo(),Vo()),2&e&&(Ss(3),Ca("Users count : ",t.userAnalytics.usersCount,""),Ss(3),Ca("Daily Login : ",t.userAnalytics.dailyLoginCount,""),Ss(3),Ca("Weekly Login : ",t.userAnalytics.weeklyLoginCount,""),Ss(3),Ca("Monthly Login : ",t.userAnalytics.monthlyLoginCount,""),Ss(3),Ca("Daily SignUp : ",t.userAnalytics.dailySignUpCount,""),Ss(3),Ca("Weekly SignUp : ",t.userAnalytics.weeklySignUpCount,""),Ss(3),Ca("Monthly SignUp : ",t.userAnalytics.monthlySignUpCount,""),Ss(3),Ca("Daily Meetings Setup : ",t.userAnalytics.dailyMeetingsSetup,""),Ss(3),Ca("Weekly Meetings Setup : ",t.userAnalytics.weeklyMeetingSetup,""),Ss(3),Ca("Monthly Meetings Setup : ",t.userAnalytics.monthlyMeetingSetup,""))},styles:[""]}),e})();class Ig{}function Rg(e,t){return new S(i=>{const n=e.length;if(0===n)return void i.complete();const s=new Array(n);let r=0,o=0;for(let a=0;a<n;a++){const l=U(e[a]);let c=!1;i.add(l.subscribe({next:e=>{c||(c=!0,o++),s[a]=e},error:e=>i.error(e),complete:()=>{r++,r!==n&&c||(o===n&&i.next(t?t.reduce((e,t,i)=>(e[t]=s[i],e),{}):s),i.complete())}}))}})}const Pg=new He("NgValueAccessor"),Mg={provide:Pg,useExisting:xe(()=>Lg),multi:!0};let Lg=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Wo("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[za([Mg])]}),e})();const Ng={provide:Pg,useExisting:xe(()=>Bg),multi:!0},Vg=new He("CompositionEventMode");let Bg=(()=>{class e{constructor(e,t,i){this._renderer=e,this._elementRef=t,this._compositionMode=i,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=gh()?gh().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka),Io(Vg,8))},e.\u0275dir=Ct({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Wo("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[za([Ng])]}),e})(),Fg=(()=>{class e{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e}),e})(),jg=(()=>{class e extends Fg{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Hg(t||e)},e.\u0275dir=Ct({type:e,features:[Oa]}),e})();const Hg=dn(jg);function Ug(){throw new Error("unimplemented")}class qg extends Fg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Ug()}get asyncValidator(){return Ug()}}class Wg{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let zg=(()=>{class e extends Wg{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Io(qg,2))},e.\u0275dir=Ct({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&aa("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Oa]}),e})(),Gg=(()=>{class e extends Wg{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Io(jg,2))},e.\u0275dir=Ct({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&aa("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Oa]}),e})();function Yg(e){return null==e||0===e.length}const $g=new He("NgValidators"),Kg=new He("NgAsyncValidators"),Xg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Jg{static min(e){return t=>{if(Yg(t.value)||Yg(e))return null;const i=parseFloat(t.value);return!isNaN(i)&&i<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Yg(t.value)||Yg(e))return null;const i=parseFloat(t.value);return!isNaN(i)&&i>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Yg(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Yg(e.value)||Xg.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Yg(t.value))return null;const i=t.value?t.value.length:0;return i<e?{minlength:{requiredLength:e,actualLength:i}}:null}}static maxLength(e){return t=>{const i=t.value?t.value.length:0;return i>e?{maxlength:{requiredLength:e,actualLength:i}}:null}}static pattern(e){if(!e)return Jg.nullValidator;let t,i;return"string"==typeof e?(i="","^"!==e.charAt(0)&&(i+="^"),i+=e,"$"!==e.charAt(e.length-1)&&(i+="$"),t=new RegExp(i)):(i=e.toString(),t=e),e=>{if(Yg(e.value))return null;const n=e.value;return t.test(n)?null:{pattern:{requiredPattern:i,actualValue:n}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Qg);return 0==t.length?null:function(e){return ev(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(Qg);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(c(t))return Rg(t,null);if(h(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Rg(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Rg(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(B(e=>t(...e)))}return Rg(e,null)}(function(e,t){return t.map(t=>t(e))}(e,t).map(Zg)).pipe(B(ev))}}}function Qg(e){return null!=e}function Zg(e){const t=Uo(e)?U(e):e;if(!qo(t))throw new Error("Expected validator to return Promise or Observable.");return t}function ev(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function tv(e){return e.validate?t=>e.validate(t):e}function iv(e){return e.validate?t=>e.validate(t):e}const nv={provide:Pg,useExisting:xe(()=>sv),multi:!0};let sv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Wo("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[za([nv])]}),e})();const rv={provide:Pg,useExisting:xe(()=>av),multi:!0};let ov=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),av=(()=>{class e{constructor(e,t,i,n){this._renderer=e,this._elementRef=t,this._registry=i,this._injector=n,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(qg),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka),Io(ov),Io(uo))},e.\u0275dir=Ct({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Wo("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[za([rv])]}),e})();const lv={provide:Pg,useExisting:xe(()=>cv),multi:!0};let cv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Wo("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[za([lv])]}),e})();const hv='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',dv='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',uv='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class pv{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+hv)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${dv}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${uv}`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+hv)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+dv)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const fv={provide:Pg,useExisting:xe(()=>gv),multi:!0};function mv(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let gv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=wo}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const i=mv(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",i)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Wo("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[za([fv])]}),e})(),vv=(()=>{class e{constructor(e,t,i){this._element=e,this._renderer=t,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(mv(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Za),Io(gv,9))},e.\u0275dir=Ct({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const yv={provide:Pg,useExisting:xe(()=>wv),multi:!0};function bv(e,t){return null==e?""+t:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let wv=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=wo}set compareWith(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const i=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(i.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const i=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const n=e.item(t),s=this._getOptionValue(n.value);i.push(s)}}else{const e=t.options;for(let t=0;t<e.length;t++){const n=e.item(t);if(n.selected){const e=this._getOptionValue(n.value);i.push(e)}}}this.value=i,e(i)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(Io(Za),Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Wo("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[za([yv])]}),e})(),Sv=(()=>{class e{constructor(e,t,i){this._element=e,this._renderer=t,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(bv(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(bv(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Za),Io(wv,9))},e.\u0275dir=Ct({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();function Cv(e,t){return[...t.path,e]}function _v(e,t){e||kv(t,"Cannot find control with"),t.valueAccessor||kv(t,"No value accessor for form control with"),e.validator=Jg.compose([e.validator,t.validator]),e.asyncValidator=Jg.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(i=>{e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ev(e,t)})}(e,t),function(e,t){e.registerOnChange((e,i)=>{t.valueAccessor.writeValue(e),i&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ev(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Ev(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Tv(e,t){null==e&&kv(t,"Cannot find control with"),e.validator=Jg.compose([e.validator,t.validator]),e.asyncValidator=Jg.composeAsync([e.asyncValidator,t.asyncValidator])}function xv(e){return kv(e,"There is no FormControl instance attached to form control element with")}function kv(e,t){let i;throw i=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${i}`)}function Av(e){return null!=e?Jg.compose(e.map(tv)):null}function Ov(e){return null!=e?Jg.composeAsync(e.map(iv)):null}function Dv(e,t){if(!e.hasOwnProperty("model"))return!1;const i=e.model;return!!i.isFirstChange()||!wo(t,i.currentValue)}const Iv=[Lg,cv,sv,gv,wv,av];function Rv(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Pv(e,t){if(!t)return null;Array.isArray(t)||kv(e,"Value accessor was not provided as an array for form control with");let i=void 0,n=void 0,s=void 0;return t.forEach(t=>{var r;t.constructor===Bg?i=t:(r=t,Iv.some(e=>r.constructor===e)?(n&&kv(e,"More than one built-in value accessor matches form control with"),n=t):(s&&kv(e,"More than one custom value accessor matches form control with"),s=t))}),s||n||i||(kv(e,"No valid value accessor for form control with"),null)}function Mv(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}function Lv(e){const t=Vv(e)?e.validators:e;return Array.isArray(t)?Av(t):t||null}function Nv(e,t){const i=Vv(t)?t.asyncValidators:e;return Array.isArray(i)?Ov(i):i||null}function Vv(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Bv{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Lv(e)}setAsyncValidators(e){this.asyncValidator=Nv(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING";const t=Zg(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,i){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let n=e;return t.forEach(e=>{n=n instanceof jv?n.controls.hasOwnProperty(e)?n.controls[e]:null:n instanceof Hv&&n.at(e)||null}),n}(this,e)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new $l,this.statusChanges=new $l}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Fv extends Bv{constructor(e=null,t,i){super(Lv(t),Nv(i,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class jv extends Bv{constructor(e,t,i){super(Lv(t),Nv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((i,n)=>{i.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t instanceof Fv?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((i,n)=>{t=t||this.contains(n)&&e(i)}),t}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((e,n)=>{i=t(i,e,n)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class Hv extends Bv{constructor(e,t,i){super(Lv(t),Nv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,i)=>{this.at(i)&&this.at(i).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((i,n)=>{i.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Fv?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Uv={provide:jg,useExisting:xe(()=>Wv)},qv=(()=>Promise.resolve(null))();let Wv=(()=>{class e extends jg{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new $l,this.form=new jv({},Av(e),Ov(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){qv.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),_v(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){qv.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),Mv(this._directives,e)})}addFormGroup(e){qv.then(()=>{const t=this._findContainer(e.path),i=new jv({});Tv(i,e),t.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){qv.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){qv.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Rv(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(Io($g,10),Io(Kg,10))},e.\u0275dir=Ct({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Wo("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[za([Uv]),Oa]}),e})(),zv=(()=>{class e extends jg{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Cv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Av(this._validators)}get asyncValidator(){return Ov(this._asyncValidators)}_checkParentType(){}}return e.\u0275fac=function(t){return Gv(t||e)},e.\u0275dir=Ct({type:e,features:[Oa]}),e})();const Gv=dn(zv);class Yv{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${hv}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${dv}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${uv}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${dv}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${uv}`)}}const $v={provide:jg,useExisting:xe(()=>Kv)};let Kv=(()=>{class e extends zv{constructor(e,t,i){super(),this._parent=e,this._validators=t,this._asyncValidators=i}_checkParentType(){this._parent instanceof e||this._parent instanceof Wv||Yv.modelGroupParentException()}}return e.\u0275fac=function(t){return new(t||e)(Io(jg,5),Io($g,10),Io(Kg,10))},e.\u0275dir=Ct({type:e,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[za([$v]),Oa]}),e})();const Xv={provide:qg,useExisting:xe(()=>Qv)},Jv=(()=>Promise.resolve(null))();let Qv=(()=>{class e extends qg{constructor(e,t,i,n){super(),this.control=new Fv,this._registered=!1,this.update=new $l,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=i||[],this.valueAccessor=Pv(this,n)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Dv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Cv(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Av(this._rawValidators)}get asyncValidator(){return Ov(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_v(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Kv)&&this._parent instanceof zv?Yv.formGroupNameException():this._parent instanceof Kv||this._parent instanceof Wv||Yv.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Yv.missingNameException()}_updateValue(e){Jv.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,i=""===t||t&&"false"!==t;Jv.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(Io(jg,9),Io($g,10),Io(Kg,10),Io(Pg,10))},e.\u0275dir=Ct({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[za([Xv]),Oa,La]}),e})(),Zv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const ey=new He("NgModelWithFormControlWarning"),ty={provide:qg,useExisting:xe(()=>iy)};let iy=(()=>{class e extends qg{constructor(e,t,i,n){super(),this._ngModelWarningConfig=n,this.update=new $l,this._ngModelWarningSent=!1,this._rawValidators=e||[],this._rawAsyncValidators=t||[],this.valueAccessor=Pv(this,i)}set isDisabled(e){pv.disabledAttrWarning()}ngOnChanges(t){this._isControlChanged(t)&&(_v(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Dv(t,this.viewModel)&&(function(e,t,i,n){kn()&&"never"!==n&&((null!==n&&"once"!==n||t._ngModelWarningSentOnce)&&("always"!==n||i._ngModelWarningSent)||(pv.ngModelWarning("formControl"),t._ngModelWarningSentOnce=!0,i._ngModelWarningSent=!0))}(0,e,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return Av(this._rawValidators)}get asyncValidator(){return Ov(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return e.\u0275fac=function(t){return new(t||e)(Io($g,10),Io(Kg,10),Io(Pg,10),Io(ey,8))},e.\u0275dir=Ct({type:e,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[za([ty]),Oa,La]}),e._ngModelWarningSentOnce=!1,e})();const ny={provide:jg,useExisting:xe(()=>sy)};let sy=(()=>{class e extends jg{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new $l}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return _v(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Mv(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);Tv(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);Tv(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,Rv(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>xv(t)),t.valueAccessor.registerOnTouched(()=>xv(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&_v(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=Av(this._validators);this.form.validator=Jg.compose([this.form.validator,e]);const t=Ov(this._asyncValidators);this.form.asyncValidator=Jg.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||pv.missingFormException()}}return e.\u0275fac=function(t){return new(t||e)(Io($g,10),Io(Kg,10))},e.\u0275dir=Ct({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&Wo("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[za([ny]),Oa,La]}),e})();const ry={provide:$g,useExisting:xe(()=>oy),multi:!0};let oy=(()=>{class e{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}validate(e){return this.required?Jg.required(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&ko("required",t.required?"":null)},inputs:{required:"required"},features:[za([ry])]}),e})();const ay={provide:$g,useExisting:xe(()=>ly),multi:!0};let ly=(()=>{class e{set email(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()}validate(e){return this._enabled?Jg.email(e):null}registerOnValidatorChange(e){this._onChange=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[za([ay])]}),e})();const cy={provide:$g,useExisting:xe(()=>hy),multi:!0};let hy=(()=>{class e{ngOnChanges(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null==this.minlength?null:this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Jg.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ko("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[za([cy]),La]}),e})();const dy={provide:$g,useExisting:xe(()=>uy),multi:!0};let uy=(()=>{class e{ngOnChanges(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null!=this.maxlength?this._validator(e):null}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Jg.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ko("maxlength",t.maxlength?t.maxlength:null)},inputs:{maxlength:"maxlength"},features:[za([dy]),La]}),e})();const py={provide:$g,useExisting:xe(()=>fy),multi:!0};let fy=(()=>{class e{ngOnChanges(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=Jg.pattern(this.pattern)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&ko("pattern",t.pattern?t.pattern:null)},inputs:{pattern:"pattern"},features:[za([py]),La]}),e})(),my=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})(),gy=(()=>{class e{group(e,t=null){const i=this._reduceControls(e);let n=null,s=null,r=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(n=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(n=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new jv(i,{asyncValidators:s,updateOn:r,validators:n})}control(e,t,i){return new Fv(e,t,i)}array(e,t,i){const n=e.map(e=>this._createControl(e));return new Hv(n,t,i)}_reduceControls(e){const t={};return Object.keys(e).forEach(i=>{t[i]=this._createControl(e[i])}),t}_createControl(e){return e instanceof Fv||e instanceof jv||e instanceof Hv?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),vy=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[ov],imports:[my]}),e})(),yy=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:ey,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[gy,ov],imports:[my]}),e})();function by(e,t){if(1&e&&(No(0,"p",17),wa(1),Vo()),2&e){const e=Ko().$implicit;Ss(1),Ca(" ",e.subCategory," ")}}function wy(e,t){if(1&e&&(No(0,"div"),Oo(1,by,2,1,"p",16),Vo()),2&e){const e=t.$implicit,i=Ko().$implicit;Ss(1),Mo("ngIf",e.category==i.category)}}function Sy(e,t){if(1&e&&(No(0,"div"),No(1,"p",15),wa(2),Vo(),Oo(3,wy,2,1,"div",2),Vo()),2&e){const e=t.$implicit,i=Ko();Ss(2),Sa(e.category),Ss(1),Mo("ngForOf",i.subCategories)}}function Cy(e,t){if(1&e&&(No(0,"option",18),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e.category),Ss(1),Ca(" ",e.category," ")}}let _y=(()=>{class e{constructor(e){this.httpService=e,this.categories=[],this.subCategories=[]}ngOnInit(){this.getAllCategories()}addCategory(e){let t=new Ig;t.category=e.value.categoryName,this.httpService.addNewCategory(t).subscribe(e=>{1==e&&(this.categories.push(t),this.categoryInput="")})}addSubCategory(e){let t=new Ig;t.category=e.value.categoryName,t.subCategory=e.value.subCategoryName,this.httpService.addNewSubCategory(t).subscribe(e=>{1==e&&(this.subCategories.push(t),this.subCategoryInput="")})}getAllCategories(){this.httpService.getAllCategories().subscribe(e=>{let t=e;if(t.length>0)for(var i=0;i<t.length;i++){let e=new Ig;e.category=t[i].category,this.categories.push(e),this.selectedValue=this.categories[0].category}this.httpService.getAllSubCategories().subscribe(e=>{this.subCategories=e})})}}return e.\u0275fac=function(t){return new(t||e)(Io(Og))},e.\u0275cmp=gt({type:e,selectors:[["app-categories"]],decls:29,vars:7,consts:[[1,"container"],[1,"box"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["c","ngForm"],[1,"form-group"],["for","categoryInput"],["type","text","id","categoryInput","name","categoryName","ngModel","","required","","placeholder","Enter Category Name",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled"],["sc","ngForm"],["for","chooseCategory"],["id","chooseCategory","name","categoryName","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","subCategoryInput"],["type","text","id","subCategoryInput","name","subCategoryName","ngModel","","required","","placeholder","Enter Sub Category Name",1,"form-control",3,"ngModel","ngModelChange"],[2,"margin-left","1rem"],["style","margin-left: 2rem",4,"ngIf"],[2,"margin-left","2rem"],[3,"value"]],template:function(e,t){if(1&e){const e=Ho();No(0,"div",0),No(1,"div",1),No(2,"h3"),wa(3,"Categories"),Vo(),Bo(4,"br"),Oo(5,Sy,4,2,"div",2),Vo(),No(6,"div",1),No(7,"form",3,4),Wo("ngSubmit",(function(){ei(e);const i=Do(8);return t.addCategory(i)})),No(9,"div",5),No(10,"label",6),wa(11,"Category Name"),Vo(),No(12,"input",7),Wo("ngModelChange",(function(e){return t.categoryInput=e})),Vo(),Vo(),No(13,"button",8),wa(14," Submit "),Vo(),Vo(),Vo(),No(15,"div",1),No(16,"form",3,9),Wo("ngSubmit",(function(){ei(e);const i=Do(17);return t.addSubCategory(i)})),No(18,"div",5),No(19,"label",10),wa(20,"Choose category"),Vo(),No(21,"select",11),Wo("ngModelChange",(function(e){return t.selectedValue=e})),Oo(22,Cy,2,2,"option",12),Vo(),Vo(),No(23,"div",5),No(24,"label",13),wa(25,"Sub Category Name"),Vo(),No(26,"input",14),Wo("ngModelChange",(function(e){return t.subCategoryInput=e})),Vo(),Vo(),No(27,"button",8),wa(28," Submit "),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(8),i=Do(17);Ss(5),Mo("ngForOf",t.categories),Ss(7),Mo("ngModel",t.categoryInput),Ss(1),Mo("disabled",!e.form.valid),Ss(8),Mo("ngModel",t.selectedValue),Ss(1),Mo("ngForOf",t.categories),Ss(4),Mo("ngModel",t.subCategoryInput),Ss(1),Mo("disabled",!i.form.valid)}},directives:[pd,Zv,Gg,Wv,Bg,zg,Qv,oy,gv,md,vv,Sv],styles:[".container[_ngcontent-%COMP%]{margin-top:2vh}.box[_ngcontent-%COMP%]{background:#fff;border:1px solid #3f023f;box-shadow:0 2px 34px 0 rgba(0,0,0,.09);border-radius:12px;width:400px;padding:10px;position:relative;float:left;margin-right:20px;margin-bottom:20px}"]}),e})(),Ey=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-loading"]],decls:9,vars:0,consts:[[1,"lds-roller"]],template:function(e,t){1&e&&(No(0,"div",0),Bo(1,"div"),Bo(2,"div"),Bo(3,"div"),Bo(4,"div"),Bo(5,"div"),Bo(6,"div"),Bo(7,"div"),Bo(8,"div"),Vo())},styles:['.lds-roller[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:40px 40px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;width:7px;height:7px;border-radius:50%;background:#8dc73f;margin:-4px 0 0 -4px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{-webkit-animation-delay:-36ms;animation-delay:-36ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child:after{top:63px;left:63px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2):after{top:68px;left:56px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.108s;animation-delay:-.108s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3):after{top:71px;left:48px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:-.144s;animation-delay:-.144s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4):after{top:72px;left:40px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5):after{top:71px;left:32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-delay:-.216s;animation-delay:-.216s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6):after{top:68px;left:24px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-delay:-.252s;animation-delay:-.252s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7):after{top:63px;left:17px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-delay:-.288s;animation-delay:-.288s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8):after{top:56px;left:12px}@-webkit-keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}']}),e})();function Ty(e,t){1&e&&(No(0,"div",11),Bo(1,"app-loading"),Vo())}function xy(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div"),No(2,"p",12),wa(3,"Are you sure you want to cancel the booking ?"),Vo(),Vo(),No(4,"div"),No(5,"button",13),Wo("click",(function(){return ei(e),Ko().close()})),wa(6,"No"),Vo(),No(7,"button",14),Wo("click",(function(){return ei(e),Ko().deleteBooking()})),wa(8,"Yes"),Vo(),Vo(),Vo()}}function ky(e,t){1&e&&(No(0,"div",16),Bo(1,"img",17),No(2,"h5"),wa(3,"Your meeting has been cancelled successfully !"),Vo(),No(4,"h5"),wa(5,"Refund corresponding to Meeting has been processed !"),Vo(),Vo())}function Ay(e,t){if(1&e&&(No(0,"div",16),Bo(1,"img",18),No(2,"h5"),wa(3,"Oops !"),Vo(),No(4,"h5"),wa(5),Vo(),Vo()),2&e){const e=Ko(2);Ss(5),Sa(e.errorText)}}function Oy(e,t){if(1&e&&(No(0,"div"),Oo(1,ky,6,0,"div",15),Oo(2,Ay,6,1,"div",15),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",e.cancelledStatus),Ss(1),Mo("ngIf",!e.cancelledStatus)}}let Dy=(()=>{class e{constructor(e,t,i){this.activatedRoute=e,this.httpService=t,this.router=i,this.isLoading=!1,this.isDeleted=!1,this.cancelledStatus=!1,this.errorText=""}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.token=e.token,this.bid=e.bid})}close(){this.router.navigate([""])}deleteBooking(){this.isDeleted=!0,this.cancelledStatus=!0,this.isLoading=!0,this.httpService.fetchBookingStatus(this.bid).subscribe(e=>{console.log(e.status),"Pending"==e.status?this.httpService.deleteBookingFromUrl(this.token,this.bid).subscribe(e=>{"booking deleted successfully"==e.response?(this.isLoading=!1,this.cancelledStatus=!0):"booking can't be cancelled"==e.response?(this.isLoading=!1,this.cancelledStatus=!1,this.errorText="Booking can't be cancelled !"):"delete time has been exceeded"==e.response&&(this.isLoading=!1,this.cancelledStatus=!0,this.errorText="Cancelling time has been exceeded !")}):(this.isLoading=!1,this.cancelledStatus=!1,this.errorText="Booking can't be cancelled !")})}toLoginPage(){this.router.navigate([""])}}return e.\u0275fac=function(t){return new(t||e)(Io(gf),Io(Og),Io(Em))},e.\u0275cmp=gt({type:e,selectors:[["app-delete-meeting"]],decls:16,vars:5,consts:[["style","\n    text-align: center;\n    margin-top: 20%;\n    margin-left: auto;\n    margin-right: auto;\n  ",4,"ngIf"],[1,"signup-container"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[1,"signup-header"],[1,"header-container",2,"margin-bottom","10px"],[1,"header-primary"],[1,"header-container-secondary"],[1,"logo","hide"],[1,"info-class"],[1,"signup-parameter-container"],[4,"ngIf"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],[2,"font-size","larger"],[1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[1,"btn","btn-primary",3,"click"],["style","text-align: center",4,"ngIf"],[2,"text-align","center"],["src","../../assets/images/check.svg","alt","",2,"width","100px","height","100px","margin","20px"],["src","../../assets/images/close.png","alt","",2,"width","100px","height","100px","margin","20px"]],template:function(e,t){1&e&&(Oo(0,Ty,2,0,"div",0),No(1,"div",1),No(2,"span",2),Wo("click",(function(){return t.toLoginPage()})),wa(3," close "),Vo(),No(4,"div",3),No(5,"div",4),No(6,"span",5),wa(7,"Cancel"),Vo(),Bo(8,"br"),No(9,"span",6),wa(10,"Your Meeting"),Vo(),Vo(),Bo(11,"div",7),Bo(12,"div",8),Vo(),No(13,"div",9),Oo(14,xy,9,0,"div",10),Oo(15,Oy,3,2,"div",10),Vo(),Vo()),2&e&&(Mo("ngIf",t.isLoading),Ss(1),la(t.isLoading?"hideBlock":""),Ss(13),Mo("ngIf",!t.isDeleted),Ss(1),Mo("ngIf",t.isDeleted))},directives:[md,Ey],styles:[".signup-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;display:block;padding:10px;margin:50px auto 0;height:700px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:90px;height:60px;display:inline-block;float:right;margin-right:70px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),e})();class Iy{constructor(){this.educationalQualifications=[],this.previousOrganisations=[],this.areaOfExpertise=[]}}class Ry{}class Py{}class My{constructor(){this.approvalStatus="Pending",this.isLive=!1,this.timeLeft=""}}class Ly{constructor(){this.isStartDate=!1,this.isEndDate=!1}}let Ny=(()=>{class e{constructor(){this.viewProfile=new Iy}setProfile(e){this.viewProfile=e}getProfile(){return this.viewProfile}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Vy=(()=>{class e{constructor(){this.cancelBooking=new My,this.meeting=new Py}setBooking(e){this.bookingDetails=e}getBooking(){return this.bookingDetails}setMeeting(e){this.meeting.role=e.role,this.meeting.roomId=e.roomId,this.meeting.roomName=e.roomName,this.meeting.userName=e.userName,this.meeting.userId=e.userId}getMeeting(){return this.meeting}setDeleteBooking(e){this.cancelBooking=e}getDeleteBooking(){return this.cancelBooking}refreshBookingList(e){this.deleteBooking=e}getNewBookingList(){return this.deleteBooking}studentPendingRequests(e){this.pendingRequests=e}getStudentPendingRequests(){return this.pendingRequests}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class By{constructor(){this.learningAreas=[]}}class Fy{}let jy=(()=>{class e{constructor(){this.studentLoginModel=new Fy}setLoginType(e){this.loginType=e}getLoginType(){return this.loginType}setUserId(e){this.userId=e}getUserId(){return this.userId}setTrType(e){this.trType=e}getTrType(){return this.trType}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Hy=(()=>{class e{constructor(e,t){this.httpService=e,this.loginService=t,this.studentProfile=new By,this.bookingList=[],this.approvedList=[],this.liveMeetingList=[],this.approvedBookingsChanged=new x,this.bookingsChanged=new x,this.liveMeetingsChanged=new x}setPendingBookings(e){this.bookingList=e,this.bookingsChanged.next(this.bookingList.slice())}getPendingBookings(){return this.bookingList.slice()}setApprovedBookings(e){this.approvedList=e,this.approvedBookingsChanged.next(this.approvedList.slice())}getApprovedBookings(){return this.approvedList.slice()}setLiveBookings(e){this.liveMeetingList=e,this.liveMeetingsChanged.next(this.liveMeetingList.slice())}getLiveBookings(){return this.liveMeetingList.slice()}setProfileCompleted(e){this.profileCompleted=e}getProfileCompleted(){return this.profileCompleted}setEditFuntion(e){this.editVariable=e}getEditFunction(){return this.editVariable}setStudentProfileDetails(e){this.studentProfile=e}getStudentProfileDetails(){return this.studentProfile}setStudentBookings(e){this.studentBookings=e,this.manipulateMeetingSchedule()}getStudentBookings(){return this.studentBookings}manipulateMeetingSchedule(){for(let i of this.studentBookings){var e=new Date(i.StartTime.toString()),t=new Date(i.EndTime.toString());i.StartTime=e.toString(),i.EndTime=t.toString(),i.Type="booking"}}fetchStudentPendingBookings(){"Learner"==this.loginService.getLoginType()&&this.studentProfile.sid&&this.httpService.findStudentBookings(this.studentProfile.sid).subscribe(e=>{this.setPendingBookings(e)})}fetchApprovedStudentMeetings(){"Learner"==this.loginService.getLoginType()&&this.studentProfile.sid&&this.httpService.fetchApprovedMeetings(this.studentProfile.sid).subscribe(e=>{this.setApprovedBookings(e)})}fetchLiveMeetings(){"Learner"==this.loginService.getLoginType()&&this.studentProfile.sid&&this.httpService.fetchLiveMeetingsStudent(this.studentProfile.sid).subscribe(e=>{this.setLiveBookings(e)})}}return e.\u0275fac=function(t){return new(t||e)(Je(Og),Je(jy))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Uy(e){return null!=e&&""+e!="false"}function qy(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function Wy(e){return Array.isArray(e)?e:[e]}function zy(e){return null==e?"":"string"==typeof e?e:e+"px"}function Gy(e){return e instanceof Ka?e.nativeElement:e}function Yy(e,t,i,n){return s(i)&&(n=i,i=void 0),n?Yy(e,t,i).pipe(B(e=>c(e)?n(...e):n(e))):new S(n=>{!function e(t,i,n,s,r){let o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(i,n,r),o=()=>e.removeEventListener(i,n,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(i,n),o=()=>e.off(i,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(i,n),o=()=>e.removeListener(i,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)e(t[o],i,n,s,r)}s.add(o)}(e,t,(function(e){n.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),n,i)})}class $y extends u{constructor(e,t){super()}schedule(e,t=0){return this}}class Ky extends $y{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this}requestAsyncId(e,t,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,i){let n=!1,s=void 0;try{this.work(t)}catch(e){n=!0,s=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),s}_unsubscribe(){const e=this.id,t=this.scheduler,i=t.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}let Xy=(()=>{class e{constructor(t,i=e.now){this.SchedulerAction=t,this.now=i}schedule(e,t=0,i){return new this.SchedulerAction(this,e).schedule(i,t)}}return e.now=()=>Date.now(),e})();class Jy extends Xy{constructor(e,t=Xy.now){super(e,()=>Jy.delegate&&Jy.delegate!==this?Jy.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,i){return Jy.delegate&&Jy.delegate!==this?Jy.delegate.schedule(e,t,i):super.schedule(e,t,i)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}let Qy=1;const Zy=(()=>Promise.resolve())(),eb={};function tb(e){return e in eb&&(delete eb[e],!0)}const ib={setImmediate(e){const t=Qy++;return eb[t]=!0,Zy.then(()=>tb(t)&&e()),t},clearImmediate(e){tb(e)}};class nb extends Ky{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=ib.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(ib.clearImmediate(t),e.scheduled=void 0)}}class sb extends Jy{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,n=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++n<s&&(e=t.shift()));if(this.active=!1,i){for(;++n<s&&(e=t.shift());)e.unsubscribe();throw i}}}const rb=new sb(nb);class ob{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new ab(e,this.compare,this.keySelector))}}class ab extends m{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(n){return this.destination.error(n)}let i=!1;if(this.hasKey)try{const{compare:e}=this;i=e(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}const lb=new Jy(Ky);class cb{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new hb(e,this.durationSelector))}}class hb extends V{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:t}=this;i=t(e)}catch(t){return this.destination.error(t)}const n=N(this,i);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,i,n){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function db(e){return!c(e)&&e-parseFloat(e)+1>=0}function ub(e=0,t,i){let n=-1;return db(t)?n=Number(t)<1?1:Number(t):A(t)&&(i=t),A(i)||(i=lb),new S(t=>{const s=db(e)?e:+e-i.now();return i.schedule(pb,s,{index:0,period:n,subscriber:t})})}function pb(e){const{index:t,period:i,subscriber:n}=e;if(n.next(t),!n.closed){if(-1===i)return n.complete();e.index=t+1,this.schedule(e,i)}}function fb(e,t=lb){return i=()=>ub(e,t),function(e){return e.lift(new cb(i))};var i}function mb(e){return t=>t.lift(new gb(e))}class gb{constructor(e){this.notifier=e}call(e,t){const i=new vb(e),n=N(i,this.notifier);return n&&!i.seenValue?(i.add(n),t.subscribe(i)):i}}class vb extends V{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,i,n,s){this.seenValue=!0,this.complete()}notifyComplete(){}}class yb{call(e,t){return t.subscribe(new bb(e))}}class bb extends m{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class wb extends Ky{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}class Sb extends Jy{}const Cb=new Sb(wb);let _b,Eb=(()=>{class e{constructor(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}accept(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}toObservable(){switch(this.kind){case"N":return du(this.value);case"E":return e=this.error,new S(t=>t.error(e));case"C":return bu()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function Tb(e,t=0){return function(i){return i.lift(new xb(e,t))}}class xb{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new kb(e,this.scheduler,this.delay))}}class kb extends m{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(kb.dispatch,this.delay,new Ab(e,this.destination)))}_next(e){this.scheduleMessage(Eb.createNext(e))}_error(e){this.scheduleMessage(Eb.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(Eb.createComplete()),this.unsubscribe()}}class Ab{constructor(e,t){this.notification=e,this.destination=t}}class Ob extends x{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new Db(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,s=i.length;let r;if(this.closed)throw new _;if(this.isStopped||this.hasError?r=u.EMPTY:(this.observers.push(e),r=new E(this,e)),n&&e.add(e=new kb(e,n)),t)for(let o=0;o<s&&!e.closed;o++)e.next(i[o]);else for(let o=0;o<s&&!e.closed;o++)e.next(i[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r}_getNow(){return(this.scheduler||Cb).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,n=this._events,s=n.length;let r=0;for(;r<s&&!(e-n[r].time<i);)r++;return s>t&&(r=Math.max(r,s-t)),r>0&&n.splice(0,r),n}}class Db{constructor(e,t){this.time=e,this.value=t}}try{_b="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(v$){_b=!1}let Ib,Rb,Pb=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Rd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!_b)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(Je(Cc,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Cc,8))},token:e,providedIn:"root"}),e})(),Mb=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();function Lb(e){return function(){if(null==Ib&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ib=!0}))}finally{Ib=Ib||!1}return Ib}()?e:!!e.capture}function Nb(e){if(function(){if(null==Rb){const e="undefined"!=typeof document?document.head:null;Rb=!(!e||!e.createShadowRoot&&!e.attachShadow)}return Rb}()){const t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}const Vb=new He("cdk-dir-doc",{providedIn:"root",factory:function(){return Qe(vh)}});let Bb=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new $l,e){const t=e.documentElement?e.documentElement.dir:null,i=(e.body?e.body.dir:null)||t;this.value="ltr"===i||"rtl"===i?i:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(Je(Vb,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Vb,8))},token:e,providedIn:"root"}),e})(),Fb=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();class jb{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new x,t&&t.length&&(e?t.forEach(e=>this._markSelected(e)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){if(e.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}}let Hb=(()=>{class e{constructor(){this._listeners=[]}notify(e,t){for(let i of this._listeners)i(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Ub=(()=>{class e{constructor(e,t,i){this._ngZone=e,this._platform=t,this._scrolled=new x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new S(t=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(fb(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):du()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Cu(e=>!e||i.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((i,n)=>{this._scrollableContainsElement(n,e)&&t.push(n)}),t}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(e,t){let i=t.nativeElement,n=e.getElementRef().nativeElement;do{if(i==n)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Yy(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(Je(Bc),Je(Pb),Je(vh,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Bc),Je(Pb),Je(vh,8))},token:e,providedIn:"root"}),e})(),qb=(()=>{class e{constructor(e,t,i){this._platform=e,this._document=i,t.runOutsideAngular(()=>{const t=this._getWindow();this._change=e.isBrowser?K(Yy(t,"resize"),Yy(t,"orientationchange")):du(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._getDocument(),t=this._getWindow(),i=e.documentElement,n=i.getBoundingClientRect();return{top:-n.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,left:-n.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(fb(e)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(Je(Pb),Je(Bc),Je(vh,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Pb),Je(Bc),Je(vh,8))},token:e,providedIn:"root"}),e})(),Wb=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})(),zb=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Fb,Mb,Wb],Fb,Wb]}),e})();function Gb(){throw Error("Host already has a portal attached")}class Yb{attach(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&Gb(),this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class $b extends Yb{constructor(e,t,i,n){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=n}}class Kb extends Yb{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Xb extends Yb{constructor(e){super(),this.element=e instanceof Ka?e.nativeElement:e}}class Jb{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&Gb(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof $b?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Kb?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Xb?(this._attachedPortal=e,this.attachDomPortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Qb extends Jb{constructor(e,t,i,n,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=n,this.attachDomPortal=e=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");const i=this._document.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})},this._document=s}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=t.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),i}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.detectChanges(),i.rootNodes.forEach(e=>this.outletElement.appendChild(e)),this.setDisposeFn(()=>{let e=t.indexOf(i);-1!==e&&t.remove(e)}),i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Zb=(()=>{class e extends Jb{constructor(e,t,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new $l,this.attachDomPortal=e=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");const i=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(i,t),this._getRootNode().appendChild(t),super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),n=t.createComponent(i,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(Io($a),Io(Sl),Io(vh))},e.\u0275dir=Ct({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Oa]}),e})(),ew=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();class tw{constructor(e,t){this._parentInjector=e,this._customTokens=t}get(e,t){const i=this._customTokens.get(e);return void 0!==i?i:this._parentInjector.get(e,t)}}function iw(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}class nw{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=zy(-this._previousScrollPosition.left),e.style.top=zy(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,i=this._document.body.style,n=t.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=i.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=n,i.scrollBehavior=s}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}function sw(){return Error("Scroll strategy has already been attached.")}class rw{constructor(e,t,i,n){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=n,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){if(this._overlayRef)throw sw();this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ow{enable(){}disable(){}attach(){}}function aw(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function lw(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class cw{constructor(e,t,i,n){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=n,this._scrollSubscription=null}attach(e){if(this._overlayRef)throw sw();this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:i}=this._viewportRuler.getViewportSize();aw(e,[{width:t,height:i,bottom:i,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let hw=(()=>{class e{constructor(e,t,i,n){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this.noop=()=>new ow,this.close=e=>new rw(this._scrollDispatcher,this._ngZone,this._viewportRuler,e),this.block=()=>new nw(this._viewportRuler,this._document),this.reposition=e=>new cw(this._scrollDispatcher,this._viewportRuler,this._ngZone,e),this._document=n}}return e.\u0275fac=function(t){return new(t||e)(Je(Ub),Je(qb),Je(Bc),Je(vh))},e.\u0275prov=ue({factory:function(){return new e(Je(Ub),Je(qb),Je(Bc),Je(vh))},token:e,providedIn:"root"}),e})();class dw{constructor(e){if(this.scrollStrategy=new ow,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class uw{constructor(e,t,i,n,s){this.offsetX=i,this.offsetY=n,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class pw{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}function fw(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". Expected "top", "bottom" or "center".`)}function mw(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". Expected "start", "end" or "center".`)}let gw=(()=>{class e{constructor(e){this._attachedOverlays=[],this._keydownListener=e=>{const t=this._attachedOverlays;for(let i=t.length-1;i>-1;i--)if(t[i]._keydownEvents.observers.length>0){t[i]._keydownEvents.next(e);break}},this._document=e}ngOnDestroy(){this._detach()}add(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(Je(vh))},e.\u0275prov=ue({factory:function(){return new e(Je(vh))},token:e,providedIn:"root"}),e})();const vw=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let yw=(()=>{class e{constructor(e,t){this._platform=t,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(e||vw){const e=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),vw?t.setAttribute("platform","test"):e||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return e.\u0275fac=function(t){return new(t||e)(Je(vh),Je(Pb))},e.\u0275prov=ue({factory:function(){return new e(Je(vh),Je(Pb))},token:e,providedIn:"root"}),e})();class bw{constructor(e,t,i,n,s,r,o,a){this._portalOutlet=e,this._host=t,this._pane=i,this._config=n,this._ngZone=s,this._keyboardDispatcher=r,this._document=o,this._location=a,this._backdropElement=null,this._backdropClick=new x,this._attachments=new x,this._detachments=new x,this._locationChanges=u.EMPTY,this._backdropClickHandler=e=>this._backdropClick.next(e),this._keydownEvents=new x,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(ju(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEvents.asObservable()}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=zy(this._config.width),e.height=zy(this._config.height),e.minWidth=zy(this._config.minWidth),e.minHeight=zy(this._config.minHeight),e.maxWidth=zy(this._config.maxWidth),e.maxHeight=zy(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let i=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",i),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",i)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const n=e.classList;Wy(t).forEach(e=>{e&&(i?n.add(e):n.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.asObservable().pipe(mb(K(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const ww=/([A-Za-z%]+)$/;class Sw{constructor(e,t,i,n,s){this._viewportRuler=t,this._document=i,this._platform=n,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new x,this._resizeSubscription=u.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,n=[];let s;for(let r of this._preferredPositions){let o=this._getOriginPoint(e,r),a=this._getOverlayPoint(o,t,r),l=this._getOverlayFit(a,t,i,r);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(r,o);this._canFitWithFlexibleDimensions(l,a,i)?n.push({position:r,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,r)}):(!s||s.overlayFit.visibleArea<l.visibleArea)&&(s={overlayFit:l,overlayPoint:a,originPoint:o,position:r,overlayRect:t})}if(n.length){let e=null,t=-1;for(const i of n){const n=i.boundingBoxRect.width*i.boundingBoxRect.height*(i.position.weight||1);n>t&&(t=n,e=i)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cw(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,n;if("center"==t.originX)i=e.left+e.width/2;else{const n=this._isRtl()?e.right:e.left,s=this._isRtl()?e.left:e.right;i="start"==t.originX?n:s}return n="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:n}}_getOverlayPoint(e,t,i){let n,s;return n="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+n,y:e.y+s}}_getOverlayFit(e,t,i,n){let{x:s,y:r}=e,o=this._getOffset(n,"x"),a=this._getOffset(n,"y");o&&(s+=o),a&&(r+=a);let l=0-r,c=r+t.height-i.height,h=this._subtractOverflows(t.width,0-s,s+t.width-i.width),d=this._subtractOverflows(t.height,l,c),u=h*d;return{visibleArea:u,isCompletelyWithinViewport:t.width*t.height===u,fitsInViewportVertically:d===t.height,fitsInViewportHorizontally:h==t.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const n=i.bottom-t.y,s=i.right-t.x,r=_w(this._overlayRef.getConfig().minHeight),o=_w(this._overlayRef.getConfig().minWidth),a=e.fitsInViewportHorizontally||null!=o&&o<=s;return(e.fitsInViewportVertically||null!=r&&r<=n)&&a}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const n=this._viewportRect,s=Math.max(e.x+t.width-n.right,0),r=Math.max(e.y+t.height-n.bottom,0),o=Math.max(n.top-i.top-e.y,0),a=Math.max(n.left-i.left-e.x,0);let l=0,c=0;return l=t.width<=n.width?a||-s:e.x<this._viewportMargin?n.left-i.left-e.x:0,c=t.height<=n.height?o||-r:e.y<this._viewportMargin?n.top-i.top-e.y:0,this._previousPushAmount={x:l,y:c},{x:e.x+l,y:e.y+c}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),i=new pw(e,t);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,n=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,n=this._isRtl();let s,r,o,a,l,c;if("top"===t.overlayY)r=e.y,s=i.height-r+this._viewportMargin;else if("bottom"===t.overlayY)o=i.height-e.y+2*this._viewportMargin,s=i.height-o+this._viewportMargin;else{const t=Math.min(i.bottom-e.y+i.top,e.y),n=this._lastBoundingBoxSize.height;s=2*t,r=e.y-t,s>n&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-n/2)}if("end"===t.overlayX&&!n||"start"===t.overlayX&&n)c=i.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!n||"end"===t.overlayX&&n)l=e.x,a=i.right-e.x;else{const t=Math.min(i.right-e.x+i.left,e.x),n=this._lastBoundingBoxSize.width;a=2*t,l=e.x-t,a>n&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-n/2)}return{top:r,left:l,bottom:o,right:c,width:a,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;n.height=zy(i.height),n.top=zy(i.top),n.bottom=zy(i.bottom),n.width=zy(i.width),n.left=zy(i.left),n.right=zy(i.right),n.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",n.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(n.maxHeight=zy(e)),s&&(n.maxWidth=zy(s))}this._lastBoundingBoxSize=i,Cw(this._boundingBox.style,n)}_resetBoundingBoxStyles(){Cw(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cw(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},n=this._hasExactPosition(),s=this._hasFlexibleDimensions,r=this._overlayRef.getConfig();if(n){const n=this._viewportRuler.getViewportScrollPosition();Cw(i,this._getExactOverlayY(t,e,n)),Cw(i,this._getExactOverlayX(t,e,n))}else i.position="static";let o="",a=this._getOffset(t,"x"),l=this._getOffset(t,"y");a&&(o+=`translateX(${a}px) `),l&&(o+=`translateY(${l}px)`),i.transform=o.trim(),r.maxHeight&&(n?i.maxHeight=zy(r.maxHeight):s&&(i.maxHeight="")),r.maxWidth&&(n?i.maxWidth=zy(r.maxWidth):s&&(i.maxWidth="")),Cw(this._pane.style,i)}_getExactOverlayY(e,t,i){let n={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let r=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=r,"bottom"===e.overlayY?n.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":n.top=zy(s.y),n}_getExactOverlayX(e,t,i){let n,s={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),n=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===n?s.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":s.left=zy(r.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:lw(e,i),isOriginOutsideView:aw(e,i),isOverlayClipped:lw(t,i),isOverlayOutsideView:aw(t,i)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(e=>{mw("originX",e.originX),fw("originY",e.originY),mw("overlayX",e.overlayX),fw("overlayY",e.overlayY)})}_addPanelClasses(e){this._pane&&Wy(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Ka)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Cw(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function _w(e){if("number"!=typeof e&&null!=e){const[t,i]=e.split(ww);return i&&"px"!==i?null:parseFloat(t)}return e||null}class Ew{constructor(e,t,i,n,s,r,o){this._preferredPositions=[],this._positionStrategy=new Sw(i,n,s,r,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,i,n){const s=new uw(e,t,i,n);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}class Tw{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:s,maxWidth:r,maxHeight:o}=i,a=!("100%"!==n&&"100vw"!==n||r&&"100%"!==r&&"100vw"!==r),l=!("100%"!==s&&"100vh"!==s||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=a?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,a?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove("cdk-global-overlay-wrapper"),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let xw=(()=>{class e{constructor(e,t,i,n){this._viewportRuler=e,this._document=t,this._platform=i,this._overlayContainer=n}global(){return new Tw}connectedTo(e,t,i){return new Ew(t,i,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new Sw(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(Je(qb),Je(vh),Je(Pb),Je(yw))},e.\u0275prov=ue({factory:function(){return new e(Je(qb),Je(vh),Je(Pb),Je(yw))},token:e,providedIn:"root"}),e})(),kw=0,Aw=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=i,this._positionBuilder=n,this._keyboardDispatcher=s,this._injector=r,this._ngZone=o,this._document=a,this._directionality=l,this._location=c}create(e){const t=this._createHostElement(),i=this._createPaneElement(t),n=this._createPortalOutlet(i),s=new dw(e);return s.direction=s.direction||this._directionality.value,new bw(n,t,i,s,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id="cdk-overlay-"+kw++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(sh)),new Qb(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(Je(hw),Je(yw),Je($a),Je(xw),Je(gw),Je(uo),Je(Bc),Je(vh),Je(Bb),Je(Rh,8))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const Ow=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Dw=new He("cdk-connected-overlay-scroll-strategy");let Iw=(()=>{class e{constructor(e){this.elementRef=e}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka))},e.\u0275dir=Ct({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),Rw=(()=>{class e{constructor(e,t,i,n,s){this._overlay=e,this._dir=s,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=u.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new $l,this.positionChange=new $l,this.attach=new $l,this.detach=new $l,this.overlayKeydown=new $l,this._templatePortal=new Kb(t,i),this._scrollStrategyFactory=n,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Uy(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Uy(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Uy(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Uy(e)}get push(){return this._push}set push(e){this._push=Uy(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=Ow),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe(e=>{this.overlayKeydown.next(e),27!==e.keyCode||iw(e)||(e.preventDefault(),this._detachOverlay())})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new dw({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){const t=this.positions.map(e=>({originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||this.offsetX,offsetY:e.offsetY||this.offsetY,panelClass:e.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e.positionChanges.subscribe(e=>this.positionChange.emit(e)),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe()}_detachOverlay(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Io(Aw),Io(bl),Io(Sl),Io(Dw),Io(Bb,8))},e.\u0275dir=Ct({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown"},exportAs:["cdkConnectedOverlay"],features:[La]}),e})();const Pw={provide:Dw,deps:[Aw],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};let Mw=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[Aw,Pw],imports:[[Fb,ew,zb],zb]}),e})();function Lw(e,t=lb){return i=>i.lift(new Nw(e,t))}class Nw{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new Vw(e,this.dueTime,this.scheduler))}}class Vw extends m{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Bw,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Bw(e){e.debouncedNext()}let Fw=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:function(){return new e},token:e,providedIn:"root"}),e})(),jw=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=Gy(e);return new S(e=>{const i=this._observeElement(t).subscribe(e);return()=>{i.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new x,i=this._mutationObserverFactory.create(e=>t.next(e));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:i}=this._observedElements.get(e);t&&t.disconnect(),i.complete(),this._observedElements.delete(e)}}}return e.\u0275fac=function(t){return new(t||e)(Je(Fw))},e.\u0275prov=ue({factory:function(){return new e(Je(Fw))},token:e,providedIn:"root"}),e})(),Hw=(()=>{class e{constructor(e,t,i){this._contentObserver=e,this._elementRef=t,this._ngZone=i,this.event=new $l,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Uy(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=qy(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Lw(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Io(jw),Io(Ka),Io(Bc))},e.\u0275dir=Ct({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),Uw=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[Fw]}),e})();class qw extends class{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new x,this._typeaheadSubscription=u.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new x,this.change=new x,e instanceof Xl&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){if(this._items.length&&this._items.some(e=>"function"!=typeof e.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ip(e=>this._pressedLetters.push(e)),Lw(e),Cu(()=>this._pressedLetters.length>0),B(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let i=1;i<t.length+1;i++){const n=(this._activeItemIndex+i)%t.length,s=t[n];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(n);break}}this._pressedLetters=[]}),this}setActiveItem(e){const t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((i||iw(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),n=t[i];this._activeItem=null==n?null:n,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const n=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[n]))return void this.setActiveItem(n)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Xl?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let Ww=(()=>{class e{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function(e){try{return e.frameElement}catch(v$){return null}}((i=e).ownerDocument&&i.ownerDocument.defaultView||window);var i;if(t){const e=t&&t.nodeName.toLowerCase();if(-1===Gw(t))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===e)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(t))return!1}let n=e.nodeName.toLowerCase(),s=Gw(e);if(e.hasAttribute("contenteditable"))return-1!==s;if("iframe"===n)return!1;if("audio"===n){if(!e.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===n){if(!e.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==n||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){let t=e.nodeName.toLowerCase(),i="input"===t&&e.type;return"text"===i||"password"===i||"select"===t||"textarea"===t}(e))&&e.tabIndex>=0}isFocusable(e){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){let t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||zw(e))}(e)&&!this.isDisabled(e)&&this.isVisible(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(Pb))},e.\u0275prov=ue({factory:function(){return new e(Je(Pb))},token:e,providedIn:"root"}),e})();function zw(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function Gw(e){if(!zw(e))return null;const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Yw{constructor(e,t,i,n,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=n,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute("cdk-focus-"+e)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute("cdk-focus-region-"+e)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return e?(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),kn()&&!this._checker.isFocusable(e)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",e),e.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=0;i<t.length;i++){let e=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(e)return e}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=t.length-1;i>=0;i--){let e=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(e)return e}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(ju(1)).subscribe(e)}}let $w=(()=>{class e{constructor(e,t,i){this._checker=e,this._ngZone=t,this._document=i}create(e,t=!1){return new Yw(e,this._checker,this._ngZone,this._document,t)}}return e.\u0275fac=function(t){return new(t||e)(Je(Ww),Je(Bc),Je(vh))},e.\u0275prov=ue({factory:function(){return new e(Je(Ww),Je(Bc),Je(vh))},token:e,providedIn:"root"}),e})();"undefined"!=typeof Element&&Element;const Kw=new He("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Xw=new He("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Jw=(()=>{class e{constructor(e,t,i,n){this._ngZone=t,this._defaultOptions=n,this._document=i,this._liveElement=e||this._createLiveElement()}announce(e,...t){const i=this._defaultOptions;let n,s;return 1===t.length&&"number"==typeof t[0]?s=t[0]:[n,s]=t,this.clear(),clearTimeout(this._previousTimeout),n||(n=i&&i.politeness?i.politeness:"polite"),null==s&&i&&(s=i.duration),this._liveElement.setAttribute("aria-live",n),this._ngZone.runOutsideAngular(()=>new Promise(t=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,t(),"number"==typeof s&&(this._previousTimeout=setTimeout(()=>this.clear(),s))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div");for(let i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}return e.\u0275fac=function(t){return new(t||e)(Je(Kw,8),Je(Bc),Je(vh),Je(Xw,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Kw,8),Je(Bc),Je(vh),Je(Xw,8))},token:e,providedIn:"root"}),e})();function Qw(e){return 0===e.buttons}const Zw=new He("cdk-focus-monitor-default-options"),eS=Lb({passive:!0,capture:!0});let tS=(()=>{class e{constructor(e,t,i,n){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=e=>{if(!this._lastTouchTarget){const t=Qw(e)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=e=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=iS(e),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=e=>{const t=iS(e),i="focus"===e.type?this._onFocus:this._onBlur;for(let n=t;n;n=n.parentElement)i.call(this,e,n)},this._document=i,this._detectionMode=(null==n?void 0:n.detectionMode)||0}monitor(e,t=!1){if(!this._platform.isBrowser)return du(null);const i=Gy(e),n=Nb(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return t&&(s.checkChildren=!0),s.subject.asObservable();const r={checkChildren:t,subject:new x,rootNode:n};return this._elementInfo.set(i,r),this._registerGlobalListeners(r),r.subject.asObservable()}stopMonitoring(e){const t=Gy(e),i=this._elementInfo.get(t);i&&(i.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(i))}focusVia(e,t,i){const n=Gy(e);this._setOriginForCurrentEventQueue(t),"function"==typeof n.focus&&n.focus(i)}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,i){i?e.classList.add(t):e.classList.remove(t)}_getFocusOrigin(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}_setClasses(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(e){const t=iS(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const i=this._elementInfo.get(t);if(!i||!i.checkChildren&&t!==iS(e))return;const n=this._getFocusOrigin(e);this._setClasses(t,n),this._emitOrigin(i.subject,n),this._lastFocusOrigin=n}_onBlur(e,t){const i=this._elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(i.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const t=e.rootNode,i=this._rootNodeFocusListenerCount.get(t)||0;i||this._ngZone.runOutsideAngular(()=>{t.addEventListener("focus",this._rootNodeFocusAndBlurListener,eS),t.addEventListener("blur",this._rootNodeFocusAndBlurListener,eS)}),this._rootNodeFocusListenerCount.set(t,i+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const e=this._getDocument(),t=this._getWindow();e.addEventListener("keydown",this._documentKeydownListener,eS),e.addEventListener("mousedown",this._documentMousedownListener,eS),e.addEventListener("touchstart",this._documentTouchstartListener,eS),t.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(e){const t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){const e=this._rootNodeFocusListenerCount.get(t);e>1?this._rootNodeFocusListenerCount.set(t,e-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,eS),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,eS),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){const e=this._getDocument(),t=this._getWindow();e.removeEventListener("keydown",this._documentKeydownListener,eS),e.removeEventListener("mousedown",this._documentMousedownListener,eS),e.removeEventListener("touchstart",this._documentTouchstartListener,eS),t.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return e.\u0275fac=function(t){return new(t||e)(Je(Bc),Je(Pb),Je(vh,8),Je(Zw,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Bc),Je(Pb),Je(vh,8),Je(Zw,8))},token:e,providedIn:"root"}),e})();function iS(e){return e.composedPath?e.composedPath()[0]:e.target}let nS=(()=>{class e{constructor(e,t){this._platform=e,this._document=t}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const t=this._document.defaultView||window,i=t&&t.getComputedStyle?t.getComputedStyle(e):null,n=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),n){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");const t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}return e.\u0275fac=function(t){return new(t||e)(Je(Pb),Je(vh))},e.\u0275prov=ue({factory:function(){return new e(Je(Pb),Je(vh))},token:e,providedIn:"root"}),e})();const sS=new il("9.2.4");class rS{}function oS(e,t){return{type:7,name:e,definitions:t,options:{}}}function aS(e,t=null){return{type:4,styles:t,timings:e}}function lS(e,t=null){return{type:2,steps:e,options:t}}function cS(e){return{type:6,styles:e,offset:null}}function hS(e,t,i){return{type:0,name:e,styles:t,options:i}}function dS(e,t,i=null){return{type:1,expr:e,animation:t,options:i}}function uS(e=null){return{type:9,options:e}}function pS(e,t,i=null){return{type:11,selector:e,animation:t,options:i}}function fS(e){Promise.resolve(null).then(e)}class mS{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class gS{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,n=0;const s=this.players.length;0==s?fS(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==s&&this._onFinish()}),e.onDestroy(()=>{++i==s&&this._onDestroy()}),e.onStart(()=>{++n==s&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const i=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(i)})}getPosition(){let e=0;return this.players.forEach(t=>{const i=t.getPosition();e=Math.min(i,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}function vS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yS(e){switch(e.length){case 0:return new mS;case 1:return e[0];default:return new gS(e)}}function bS(e,t,i,n,s={},r={}){const o=[],a=[];let l=-1,c=null;if(n.forEach(e=>{const i=e.offset,n=i==l,h=n&&c||{};Object.keys(e).forEach(i=>{let n=i,a=e[i];if("offset"!==i)switch(n=t.normalizePropertyName(n,o),a){case"!":a=s[i];break;case"*":a=r[i];break;default:a=t.normalizeStyleValue(i,n,a,o)}h[n]=a}),n||a.push(h),c=h,l=i}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function wS(e,t,i,n){switch(t){case"start":e.onStart(()=>n(i&&SS(i,"start",e)));break;case"done":e.onDone(()=>n(i&&SS(i,"done",e)));break;case"destroy":e.onDestroy(()=>n(i&&SS(i,"destroy",e)))}}function SS(e,t,i){const n=i.totalTime,s=CS(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==n?e.totalTime:n,!!i.disabled),r=e._data;return null!=r&&(s._data=r),s}function CS(e,t,i,n,s="",r=0,o){return{element:e,triggerName:t,fromState:i,toState:n,phaseName:s,totalTime:r,disabled:!!o}}function _S(e,t,i){let n;return e instanceof Map?(n=e.get(t),n||e.set(t,n=i)):(n=e[t],n||(n=e[t]=i)),n}function ES(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let TS=(e,t)=>!1,xS=(e,t)=>!1,kS=(e,t,i)=>[];const AS=vS();(AS||"undefined"!=typeof Element)&&(TS=(e,t)=>e.contains(t),xS=(()=>{if(AS||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,i)=>t.apply(e,[i]):xS}})(),kS=(e,t,i)=>{let n=[];if(i)n.push(...e.querySelectorAll(t));else{const i=e.querySelector(t);i&&n.push(i)}return n});let OS=null,DS=!1;function IS(e){OS||(OS=("undefined"!=typeof document?document.body:null)||{},DS=!!OS.style&&"WebkitAppearance"in OS.style);let t=!0;return OS.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in OS.style,!t&&DS)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in OS.style),t}const RS=xS,PS=TS,MS=kS;function LS(e){const t={};return Object.keys(e).forEach(i=>{const n=i.replace(/([a-z])([A-Z])/g,"$1-$2");t[n]=e[i]}),t}let NS=(()=>{class e{validateStyleProperty(e){return IS(e)}matchesElement(e,t){return RS(e,t)}containsElement(e,t){return PS(e,t)}query(e,t,i){return MS(e,t,i)}computeStyle(e,t,i){return i||""}animate(e,t,i,n,s,r=[],o){return new mS(i,n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),VS=(()=>{class e{}return e.NOOP=new NS,e})();function BS(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:FS(parseFloat(t[1]),t[2])}function FS(e,t){switch(t){case"s":return 1e3*e;default:return e}}function jS(e,t,i){return e.hasOwnProperty("duration")?e:function(e,t,i){let n,s=0,r="";if("string"==typeof e){const i=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===i)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};n=FS(parseFloat(i[1]),i[2]);const o=i[3];null!=o&&(s=FS(parseFloat(o),i[4]));const a=i[5];a&&(r=a)}else n=e;if(!i){let i=!1,r=t.length;n<0&&(t.push("Duration values below 0 are not allowed for this animation step."),i=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),i=!0),i&&t.splice(r,0,`The provided timing value "${e}" is invalid.`)}return{duration:n,delay:s,easing:r}}(e,t,i)}function HS(e,t={}){return Object.keys(e).forEach(i=>{t[i]=e[i]}),t}function US(e,t,i={}){if(t)for(let n in e)i[n]=e[n];else HS(e,i);return i}function qS(e,t,i){return i?t+":"+i+";":""}function WS(e){let t="";for(let i=0;i<e.style.length;i++){const n=e.style.item(i);t+=qS(0,n,e.style.getPropertyValue(n))}for(const i in e.style)e.style.hasOwnProperty(i)&&!i.startsWith("_")&&(t+=qS(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[i]));e.setAttribute("style",t)}function zS(e,t,i){e.style&&(Object.keys(t).forEach(n=>{const s=ZS(n);i&&!i.hasOwnProperty(n)&&(i[n]=e.style[s]),e.style[s]=t[n]}),vS()&&WS(e))}function GS(e,t){e.style&&(Object.keys(t).forEach(t=>{const i=ZS(t);e.style[i]=""}),vS()&&WS(e))}function YS(e){return Array.isArray(e)?1==e.length?e[0]:lS(e):e}const $S=new RegExp("{{\\s*(.+?)\\s*}}","g");function KS(e){let t=[];if("string"==typeof e){let i;for(;i=$S.exec(e);)t.push(i[1]);$S.lastIndex=0}return t}function XS(e,t,i){const n=e.toString(),s=n.replace($S,(e,n)=>{let s=t[n];return t.hasOwnProperty(n)||(i.push("Please provide a value for the animation param "+n),s=""),s.toString()});return s==n?e:s}function JS(e){const t=[];let i=e.next();for(;!i.done;)t.push(i.value),i=e.next();return t}const QS=/-+([a-z0-9])/g;function ZS(e){return e.replace(QS,(...e)=>e[1].toUpperCase())}function eC(e,t){return 0===e||0===t}function tC(e,t,i){const n=Object.keys(i);if(n.length&&t.length){let r=t[0],o=[];if(n.forEach(e=>{r.hasOwnProperty(e)||o.push(e),r[e]=i[e]}),o.length)for(var s=1;s<t.length;s++){let i=t[s];o.forEach((function(t){i[t]=nC(e,t)}))}}return t}function iC(e,t,i){switch(t.type){case 7:return e.visitTrigger(t,i);case 0:return e.visitState(t,i);case 1:return e.visitTransition(t,i);case 2:return e.visitSequence(t,i);case 3:return e.visitGroup(t,i);case 4:return e.visitAnimate(t,i);case 5:return e.visitKeyframes(t,i);case 6:return e.visitStyle(t,i);case 8:return e.visitReference(t,i);case 9:return e.visitAnimateChild(t,i);case 10:return e.visitAnimateRef(t,i);case 11:return e.visitQuery(t,i);case 12:return e.visitStagger(t,i);default:throw new Error("Unable to resolve animation metadata node #"+t.type)}}function nC(e,t){return window.getComputedStyle(e)[t]}function sC(e,t){const i=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,i){if(":"==e[0]){const n=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,i);if("function"==typeof n)return void t.push(n);e=n}const n=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return i.push(`The provided transition expression "${e}" is not supported`),t;const s=n[1],r=n[2],o=n[3];t.push(aC(s,o)),"<"!=r[0]||"*"==s&&"*"==o||t.push(aC(o,s))}(e,i,t)):i.push(e),i}const rC=new Set(["true","1"]),oC=new Set(["false","0"]);function aC(e,t){const i=rC.has(e)||oC.has(e),n=rC.has(t)||oC.has(t);return(s,r)=>{let o="*"==e||e==s,a="*"==t||t==r;return!o&&i&&"boolean"==typeof s&&(o=s?rC.has(e):oC.has(e)),!a&&n&&"boolean"==typeof r&&(a=r?rC.has(t):oC.has(t)),o&&a}}const lC=new RegExp("s*:selfs*,?","g");function cC(e,t,i){return new hC(e).build(t,i)}class hC{constructor(e){this._driver=e}build(e,t){const i=new dC(t);return this._resetContextStyleTimingState(i),iC(this,YS(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,n=t.depCount=0;const s=[],r=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const i=e,n=i.name;n.toString().split(/\s*,\s*/).forEach(e=>{i.name=e,s.push(this.visitState(i,t))}),i.name=n}else if(1==e.type){const s=this.visitTransition(e,t);i+=s.queryCount,n+=s.depCount,r.push(s)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:r,queryCount:i,depCount:n,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),n=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,r=n||{};if(i.styles.forEach(e=>{if(uC(e)){const t=e;Object.keys(t).forEach(e=>{KS(t[e]).forEach(e=>{r.hasOwnProperty(e)||s.add(e)})})}}),s.size){const i=JS(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${i.join(", ")}`)}}return{type:0,name:e.name,style:i,options:n?{params:n}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=iC(this,YS(e.animation),t);return{type:1,matchers:sC(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:pC(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>iC(this,e,t)),options:pC(e.options)}}visitGroup(e,t){const i=t.currentTime;let n=0;const s=e.steps.map(e=>{t.currentTime=i;const s=iC(this,e,t);return n=Math.max(n,t.currentTime),s});return t.currentTime=n,{type:3,steps:s,options:pC(e.options)}}visitAnimate(e,t){const i=function(e,t){let i=null;if(e.hasOwnProperty("duration"))i=e;else if("number"==typeof e)return fC(jS(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=fC(0,0,"");return e.dynamic=!0,e.strValue=n,e}return i=i||jS(n,t),fC(i.duration,i.delay,i.easing)}(e.timings,t.errors);let n;t.currentAnimateTimings=i;let s=e.styles?e.styles:cS({});if(5==s.type)n=this.visitKeyframes(s,t);else{let s=e.styles,r=!1;if(!s){r=!0;const e={};i.easing&&(e.easing=i.easing),s=cS(e)}t.currentTime+=i.duration+i.delay;const o=this.visitStyle(s,t);o.isEmptyStep=r,n=o}return t.currentAnimateTimings=null,{type:4,timings:i,style:n,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?"*"==e?i.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):i.push(e)}):i.push(e.styles);let n=!1,s=null;return i.forEach(e=>{if(uC(e)){const t=e,i=t.easing;if(i&&(s=i,delete t.easing),!n)for(let e in t)if(t[e].toString().indexOf("{{")>=0){n=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:n,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let n=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(i=>{if(!this._driver.validateStyleProperty(i))return void t.errors.push(`The provided animation property "${i}" is not a supported CSS property for animations`);const r=t.collectedStyles[t.currentQuerySelector],o=r[i];let a=!0;o&&(s!=n&&s>=o.startTime&&n<=o.endTime&&(t.errors.push(`The CSS property "${i}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${n}ms"`),a=!1),s=o.startTime),a&&(r[i]={startTime:s,endTime:n}),t.options&&function(e,t,i){const n=t.params||{},s=KS(e);s.length&&s.forEach(e=>{n.hasOwnProperty(e)||i.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[i],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let n=0;const s=[];let r=!1,o=!1,a=0;const l=e.steps.map(e=>{const i=this._makeStyleAst(e,t);let l=null!=i.offset?i.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(uC(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(uC(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}return t}(i.styles),c=0;return null!=l&&(n++,c=i.offset=l),o=o||c<0||c>1,r=r||c<a,a=c,s.push(c),i});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),r&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let h=0;n>0&&n<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==n&&(h=1/(c-1));const d=c-1,u=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,n)=>{const r=h>0?n==d?1:h*n:s[n],o=r*f;t.currentTime=u+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=r,i.styles.push(e)}),i}visitReference(e,t){return{type:8,animation:iC(this,YS(e.animation),t),options:pC(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:pC(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:pC(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,n=e.options||{};t.queryCount++,t.currentQuery=e;const[s,r]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(lC,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,".ng-animating"),t]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,_S(t.collectedStyles,t.currentQuerySelector,{});const o=iC(this,YS(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:n.limit||0,optional:!!n.optional,includeSelf:r,animation:o,originalSelector:e.selector,options:pC(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:jS(e.timings,t.errors,!0);return{type:12,animation:iC(this,YS(e.animation),t),timings:i,options:null}}}class dC{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function uC(e){return!Array.isArray(e)&&"object"==typeof e}function pC(e){var t;return e?(e=HS(e)).params&&(e.params=(t=e.params)?HS(t):null):e={},e}function fC(e,t,i){return{duration:e,delay:t,easing:i}}function mC(e,t,i,n,s,r,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:i,postStyleProps:n,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class gC{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vC=new RegExp(":enter","g"),yC=new RegExp(":leave","g");function bC(e,t,i,n,s,r={},o={},a,l,c=[]){return(new wC).buildKeyframes(e,t,i,n,s,r,o,a,l,c)}class wC{buildKeyframes(e,t,i,n,s,r,o,a,l,c=[]){l=l||new gC;const h=new CC(e,t,l,n,s,c,[]);h.options=a,h.currentTimeline.setStyles([r],null,h.errors,a),iC(this,i,h);const d=h.timelines.filter(e=>e.containsAnimation());if(d.length&&Object.keys(o).length){const e=d[d.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,h.errors,a)}return d.length?d.map(e=>e.buildKeyframes()):[mC(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const n=t.createSubContext(e.options),s=t.currentTimeline.currentTime,r=this._visitSubInstructions(i,n,n.options);s!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let n=t.currentTimeline.currentTime;const s=null!=i.duration?BS(i.duration):null,r=null!=i.delay?BS(i.delay):null;return 0!==s&&e.forEach(e=>{const i=t.appendInstructionToTimeline(e,s,r);n=Math.max(n,i.duration+i.delay)}),n}visitReference(e,t){t.updateOptions(e.options,!0),iC(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let n=t;const s=e.options;if(s&&(s.params||s.delay)&&(n=t.createSubContext(s),n.transformIntoNewTimeline(),null!=s.delay)){6==n.previousNode.type&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=SC);const e=BS(s.delay);n.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>iC(this,e,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>i&&n.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let n=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?BS(e.options.delay):0;e.steps.forEach(r=>{const o=t.createSubContext(e.options);s&&o.delayNextStep(s),iC(this,r,o),n=Math.max(n,o.currentTimeline.currentTime),i.push(o.currentTimeline)}),i.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(n),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return jS(t.params?XS(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),n=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),n.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),n.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,n=t.currentAnimateTimings;!n&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=n&&n.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,n=t.currentTimeline.duration,s=i.duration,r=t.createSubContext().currentTimeline;r.easing=i.easing,e.styles.forEach(e=>{r.forwardTime((e.offset||0)*s),r.setStyles(e.styles,e.easing,t.errors,t.options),r.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(r),t.transformIntoNewTimeline(n+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,n=e.options||{},s=n.delay?BS(n.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=SC);let r=i;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!n.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((i,n)=>{t.currentQueryIndex=n;const o=t.createSubContext(e.options,i);s&&o.delayNextStep(s),i===t.element&&(a=o.currentTimeline),iC(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),r=Math.max(r,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(r),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,n=t.currentTimeline,s=e.timings,r=Math.abs(s.duration),o=r*(t.currentQueryTotal-1);let a=r*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":a=o-a;break;case"full":a=i.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;iC(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=n.currentTime-c+(n.startTime-i.currentTimeline.startTime)}}const SC={};class CC{constructor(e,t,i,n,s,r,o,a){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=n,this._leaveClassName=s,this.errors=r,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=SC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new _C(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let n=this.options;null!=i.duration&&(n.duration=BS(i.duration)),null!=i.delay&&(n.delay=BS(i.delay));const s=i.params;if(s){let e=n.params;e||(e=this.options.params={}),Object.keys(s).forEach(i=>{t&&e.hasOwnProperty(i)||(e[i]=XS(s[i],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(e=>{i[e]=t[e]})}}return e}createSubContext(e=null,t,i){const n=t||this.element,s=new CC(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=SC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const n={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new EC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,n,e.stretchStartingKeyframe);return this.timelines.push(s),n}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,n,s,r){let o=[];if(n&&o.push(this.element),e.length>0){e=(e=e.replace(vC,"."+this._enterClassName)).replace(yC,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=i);0!==i&&(t=i<0?t.slice(t.length+i,t.length):t.slice(0,i)),o.push(...t)}return s||0!=o.length||r.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class _C{constructor(e,t,i,n){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=n,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new _C(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||"*",this._currentKeyframe[e]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,n){t&&(this._previousKeyframe.easing=t);const s=n&&n.params||{},r=function(e,t){const i={};let n;return e.forEach(e=>{"*"===e?(n=n||Object.keys(t),n.forEach(e=>{i[e]="*"})):US(e,!1,i)}),i}(e,this._globalTimelineStyles);Object.keys(r).forEach(e=>{const t=XS(r[e],s,i);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:"*"),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],n=e._styleSummary[t];(!i||n.time>i.time)&&this._updateStyle(t,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let n=[];this._keyframes.forEach((s,r)=>{const o=US(s,!0);Object.keys(o).forEach(i=>{const n=o[i];"!"==n?e.add(i):"*"==n&&t.add(i)}),i||(o.offset=r/this.duration),n.push(o)});const s=e.size?JS(e.values()):[],r=t.size?JS(t.values()):[];if(i){const e=n[0],t=HS(e);e.offset=0,t.offset=1,n=[e,t]}return mC(this.element,n,s,r,this.duration,this.startTime,this.easing,!1)}}class EC extends _C{constructor(e,t,i,n,s,r,o=!1){super(e,t,r.delay),this.element=t,this.keyframes=i,this.preStyleProps=n,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:n}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],r=i+t,o=t/r,a=US(e[0],!1);a.offset=0,s.push(a);const l=US(e[0],!1);l.offset=TC(o),s.push(l);const c=e.length-1;for(let n=1;n<=c;n++){let o=US(e[n],!1);o.offset=TC((t+o.offset*i)/r),s.push(o)}i=r,t=0,n="",e=s}return mC(this.element,e,this.preStyleProps,this.postStyleProps,i,t,n,!0)}}function TC(e,t=3){const i=Math.pow(10,t-1);return Math.round(e*i)/i}class xC{}class kC extends xC{normalizePropertyName(e,t){return ZS(e)}normalizeStyleValue(e,t,i,n){let s="";const r=i.toString().trim();if(AC[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const t=i.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&n.push(`Please provide a CSS unit value for ${e}:${i}`)}return r+s}}const AC=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function OC(e,t,i,n,s,r,o,a,l,c,h,d,u){return{type:0,element:e,triggerName:t,isRemovalTransition:s,fromState:i,fromStyles:r,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:d,errors:u}}const DC={};class IC{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,n){return function(e,t,i,n,s){return e.some(e=>e(t,i,n,s))}(this.ast.matchers,e,t,i,n)}buildStyles(e,t,i){const n=this._stateStyles["*"],s=this._stateStyles[e],r=n?n.buildStyles(t,i):{};return s?s.buildStyles(t,i):r}build(e,t,i,n,s,r,o,a,l,c){const h=[],d=this.ast.options&&this.ast.options.params||DC,u=this.buildStyles(i,o&&o.params||DC,h),p=a&&a.params||DC,f=this.buildStyles(n,p,h),m=new Set,g=new Map,v=new Map,y="void"===n,b={params:Object.assign(Object.assign({},d),p)},w=c?[]:bC(e,t,this.ast.animation,s,r,u,f,b,l,h);let S=0;if(w.forEach(e=>{S=Math.max(e.duration+e.delay,S)}),h.length)return OC(t,this._triggerName,i,n,y,u,f,[],[],g,v,S,h);w.forEach(e=>{const i=e.element,n=_S(g,i,{});e.preStyleProps.forEach(e=>n[e]=!0);const s=_S(v,i,{});e.postStyleProps.forEach(e=>s[e]=!0),i!==t&&m.add(i)});const C=JS(m.values());return OC(t,this._triggerName,i,n,y,u,f,w,C,g,v,S)}}class RC{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const i={},n=HS(this.defaultParams);return Object.keys(e).forEach(t=>{const i=e[t];null!=i&&(n[t]=i)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const s=e;Object.keys(s).forEach(e=>{let r=s[e];r.length>1&&(r=XS(r,n,t)),i[e]=r})}}),i}}class PC{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new RC(e.style,e.options&&e.options.params||{})}),MC(this.states,"true","1"),MC(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new IC(e,t,this.states))}),this.fallbackTransition=new IC(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,n){return this.transitionFactories.find(s=>s.match(e,t,i,n))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function MC(e,t,i){e.hasOwnProperty(t)?e.hasOwnProperty(i)||(e[i]=e[t]):e.hasOwnProperty(i)&&(e[t]=e[i])}const LC=new gC;class NC{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],n=cC(this._driver,t,i);if(i.length)throw new Error("Unable to build the animation due to the following errors: "+i.join("\n"));this._animations[e]=n}_buildPlayer(e,t,i){const n=e.element,s=bS(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(n,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const n=[],s=this._animations[e];let r;const o=new Map;if(s?(r=bC(this._driver,t,s,"ng-enter","ng-leave",{},{},i,LC,n),r.forEach(e=>{const t=_S(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(n.push("The requested animation doesn't exist or has already been destroyed"),r=[]),n.length)throw new Error("Unable to create the animation due to the following errors: "+n.join("\n"));o.forEach((e,t)=>{Object.keys(e).forEach(i=>{e[i]=this._driver.computeStyle(t,i,"*")})});const a=yS(r.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by "+e);return t}listen(e,t,i,n){const s=CS(t,"","","");return wS(this._getPlayer(e),i,s,n),()=>{}}command(e,t,i,n){if("register"==i)return void this.register(e,n[0]);if("create"==i)return void this.create(e,t,n[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(e)}}}const VC=[],BC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},FC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class jC{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=null!=(n=i?e.value:e)?n:null,i){const t=HS(e);delete t.value,this.options=t}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(i=>{null==e[i]&&(e[i]=t[i])})}}}const HC=new jC("void");class UC{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,KC(t,this._hostClassName)}listen(e,t,i,n){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(s=i)&&"done"!=s)throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);var s;const r=_S(this._elementListeners,e,[]),o={name:t,phase:i,callback:n};r.push(o);const a=_S(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(KC(e,"ng-trigger"),KC(e,"ng-trigger-"+t),a[t]=HC),()=>{this._engine.afterFlush(()=>{const e=r.indexOf(o);e>=0&&r.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,n=!0){const s=this._getTrigger(t),r=new WC(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(KC(e,"ng-trigger"),KC(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new jC(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=HC),"void"!==l.value&&a.value===l.value){if(!function(e,t){const i=Object.keys(e),n=Object.keys(t);if(i.length!=n.length)return!1;for(let s=0;s<i.length;s++){const n=i[s];if(!t.hasOwnProperty(n)||e[n]!==t[n])return!1}return!0}(a.params,l.params)){const t=[],i=s.matchStyles(a.value,a.params,t),n=s.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{GS(e,i),zS(e,n)})}return}const c=_S(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let h=s.matchTransition(a.value,l.value,e,l.params),d=!1;if(!h){if(!n)return;h=s.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:a,toState:l,player:r,isFallbackTransition:d}),d||(KC(e,"ng-animate-queued"),r.onStart(()=>{XC(e,"ng-animate-queued")})),r.onDone(()=>{let t=this.players.indexOf(r);t>=0&&this.players.splice(t,1);const i=this._engine.playersByElement.get(e);if(i){let e=i.indexOf(r);e>=0&&i.splice(e,1)}}),this.players.push(r),c.push(r),r}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,".ng-trigger",!0);i.forEach(e=>{if(e.__ng_removed)return;const i=this._engine.fetchNamespacesByElement(e);i.size?i.forEach(i=>i.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,i,n){const s=this._engine.statesByElement.get(e);if(s){const r=[];if(Object.keys(s).forEach(t=>{if(this._triggers[t]){const i=this.trigger(e,t,"void",n);i&&r.push(i)}}),r.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&yS(r).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e);if(t){const i=new Set;t.forEach(t=>{const n=t.name;if(i.has(n))return;i.add(n);const s=this._triggers[n].fallbackTransition,r=this._engine.statesByElement.get(e)[n]||HC,o=new jC("void"),a=new WC(this.id,n,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:s,fromState:r,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let n=!1;if(i.totalAnimations){const t=i.players.length?i.playersByQueriedElement.get(e):[];if(t&&t.length)n=!0;else{let t=e;for(;t=t.parentNode;)if(i.statesByElement.get(t)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(e),n)i.markElementAsRemoved(this.id,e,!1,t);else{const n=e.__ng_removed;n&&n!==BC||(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){KC(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const n=i.player;if(n.destroyed)return;const s=i.element,r=this._elementListeners.get(s);r&&r.forEach(t=>{if(t.name==i.triggerName){const n=CS(s,i.triggerName,i.fromState.value,i.toState.value);n._data=e,wS(i.player,t.phase,n,t.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):t.push(i)}),this._queue=[],t.sort((e,t)=>{const i=e.transition.ast.depCount,n=t.transition.ast.depCount;return 0==i||0==n?i-n:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class qC{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const i=new UC(e,t,this);return t.parentNode?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let n=!1;for(let s=i;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),n=!0;break}n||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let n=this._namespaceLookup[e];n&&n.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(i);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const e=Object.keys(i);for(let n=0;n<e.length;n++){const s=i[e[n]].namespaceId;if(s){const e=this._fetchNamespace(s);e&&t.add(e)}}}return t}trigger(e,t,i,n){if(zC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,n),!0}return!1}insertNode(e,t,i,n){if(!zC(t))return;const s=t.__ng_removed;if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const n=this._fetchNamespace(e);n&&n.insertNode(t,i)}n&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),KC(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),XC(e,"ng-animate-disabled"))}removeNode(e,t,i,n){if(zC(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n),i){const i=this.namespacesByHostElement.get(t);i&&i.id!==e&&i.removeNode(t,n)}}else this._onRemovalComplete(t,n)}markElementAsRemoved(e,t,i,n){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:n,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,n,s){return zC(t)?this._fetchNamespace(e).listen(t,i,n,s):()=>{}}_buildInstruction(e,t,i,n,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,n,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,".ng-trigger",!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,".ng-animating",!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yS(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=BC,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)KC(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let e=0;e<i.length;e++)i[e]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?yS(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))}_flushAnimations(e,t){const i=new gC,n=[],s=new Map,r=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let i=0;i<t.length;i++)c.add(t[i])});const h=this.bodyNode,d=Array.from(this.statesByElement.keys()),u=$C(d,this.collectedEnterElements),p=new Map;let f=0;u.forEach((e,t)=>{const i="ng-enter"+f++;p.set(t,i),e.forEach(e=>KC(e,i))});const m=[],g=new Set,v=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const e=this.collectedLeaveElements[D],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):v.add(e))}const y=new Map,b=$C(d,Array.from(g));b.forEach((e,t)=>{const i="ng-leave"+f++;y.set(t,i),e.forEach(e=>KC(e,i))}),e.push(()=>{u.forEach((e,t)=>{const i=p.get(t);e.forEach(e=>XC(e,i))}),b.forEach((e,t)=>{const i=y.get(t);e.forEach(e=>XC(e,i))}),m.forEach(e=>{this.processLeaveNode(e)})});const w=[],S=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(t).forEach(e=>{const t=e.player,s=e.element;if(w.push(t),this.collectedEnterElements.length){const e=s.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const c=!h||!this.driver.containsElement(h,s),d=y.get(s),u=p.get(s),f=this._buildInstruction(e,i,u,d,c);if(f.errors&&f.errors.length)S.push(f);else{if(c)return t.onStart(()=>GS(s,f.fromStyles)),t.onDestroy(()=>zS(s,f.toStyles)),void n.push(t);if(e.isFallbackTransition)return t.onStart(()=>GS(s,f.fromStyles)),t.onDestroy(()=>zS(s,f.toStyles)),void n.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),i.append(s,f.timelines),r.push({instruction:f,player:t,element:s}),f.queriedElements.forEach(e=>_S(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const i=Object.keys(e);if(i.length){let e=a.get(t);e||a.set(t,e=new Set),i.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const i=Object.keys(e);let n=l.get(t);n||l.set(t,n=new Set),i.forEach(e=>n.add(e))})}});if(S.length){const e=[];S.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const C=new Map,_=new Map;r.forEach(e=>{const t=e.element;i.has(t)&&(_.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,C))}),n.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{_S(C,t,[]).push(e),e.destroy()})});const E=m.filter(e=>QC(e,a,l)),T=new Map;YC(T,this.driver,v,l,"*").forEach(e=>{QC(e,a,l)&&E.push(e)});const x=new Map;u.forEach((e,t)=>{YC(x,this.driver,new Set(e),a,"!")}),E.forEach(e=>{const t=T.get(e),i=x.get(e);T.set(e,Object.assign(Object.assign({},t),i))});const k=[],A=[],O={};r.forEach(e=>{const{element:t,player:r,instruction:o}=e;if(i.has(t)){if(c.has(t))return r.onDestroy(()=>zS(t,o.toStyles)),r.disabled=!0,r.overrideTotalTime(o.totalTime),void n.push(r);let e=O;if(_.size>1){let i=t;const n=[];for(;i=i.parentNode;){const t=_.get(i);if(t){e=t;break}n.push(i)}n.forEach(t=>_.set(t,e))}const i=this._buildAnimation(r.namespaceId,o,C,s,x,T);if(r.setRealPlayer(i),e===O)k.push(r);else{const t=this.playersByElement.get(e);t&&t.length&&(r.parentPlayer=yS(t)),n.push(r)}}else GS(t,o.fromStyles),r.onDestroy(()=>zS(t,o.toStyles)),A.push(r),c.has(t)&&n.push(r)}),A.forEach(e=>{const t=s.get(e.element);if(t&&t.length){const i=yS(t);e.setRealPlayer(i)}}),n.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let D=0;D<m.length;D++){const e=m[D],t=e.__ng_removed;if(XC(e,"ng-leave"),t&&t.hasAnimation)continue;let i=[];if(o.size){let t=o.get(e);t&&t.length&&i.push(...t);let n=this.driver.query(e,".ng-animating",!0);for(let e=0;e<n.length;e++){let t=o.get(n[e]);t&&t.length&&i.push(...t)}}const n=i.filter(e=>!e.destroyed);n.length?JC(this,e,n):this.processLeaveNode(e)}return m.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let i=!1;const n=t.__ng_removed;return n&&n.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,n,s){let r=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(r=t)}else{const t=this.playersByElement.get(e);if(t){const e=!s||"void"==s;t.forEach(t=>{t.queued||(e||t.triggerName==n)&&r.push(t)})}}return(i||n)&&(r=r.filter(e=>!(i&&i!=e.namespaceId||n&&n!=e.triggerName))),r}_beforeAnimationBuild(e,t,i){const n=t.element,s=t.isRemovalTransition?void 0:e,r=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==n,l=_S(i,e,[]);this._getPreviousPlayers(e,a,s,r,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}GS(n,t.fromStyles)}_buildAnimation(e,t,i,n,s,r){const o=t.triggerName,a=t.element,l=[],c=new Set,h=new Set,d=t.timelines.map(t=>{const d=t.element;c.add(d);const u=d.__ng_removed;if(u&&u.removedBeforeQueried)return new mS(t.duration,t.delay);const p=d!==a,f=function(e){const t=[];return function e(t,i){for(let n=0;n<t.length;n++){const s=t[n];s instanceof gS?e(s.players,i):i.push(s)}}(e,t),t}((i.get(d)||VC).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===d),m=s.get(d),g=r.get(d),v=bS(0,this._normalizer,0,t.keyframes,m,g),y=this._buildPlayer(t,v,f);if(t.subTimeline&&n&&h.add(d),p){const t=new WC(e,o,d);t.setRealPlayer(y),l.push(t)}return y});l.forEach(e=>{_S(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,i){let n;if(e instanceof Map){if(n=e.get(t),n){if(n.length){const e=n.indexOf(i);n.splice(e,1)}0==n.length&&e.delete(t)}}else if(n=e[t],n){if(n.length){const e=n.indexOf(i);n.splice(e,1)}0==n.length&&delete e[t]}return n}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>KC(e,"ng-animating"));const u=yS(d);return u.onDestroy(()=>{c.forEach(e=>XC(e,"ng-animating")),zS(a,t.toStyles)}),h.forEach(e=>{_S(n,e,[]).push(u)}),u}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new mS(e.duration,e.delay)}}class WC{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new mS,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>wS(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_S(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function zC(e){return e&&1===e.nodeType}function GC(e,t){const i=e.style.display;return e.style.display=null!=t?t:"none",i}function YC(e,t,i,n,s){const r=[];i.forEach(e=>r.push(GC(e)));const o=[];n.forEach((i,n)=>{const r={};i.forEach(e=>{const i=r[e]=t.computeStyle(n,e,s);i&&0!=i.length||(n.__ng_removed=FC,o.push(n))}),e.set(n,r)});let a=0;return i.forEach(e=>GC(e,r[a++])),o}function $C(e,t){const i=new Map;if(e.forEach(e=>i.set(e,[])),0==t.length)return i;const n=new Set(t),s=new Map;return t.forEach(e=>{const t=function e(t){if(!t)return 1;let r=s.get(t);if(r)return r;const o=t.parentNode;return r=i.has(o)?o:n.has(o)?1:e(o),s.set(t,r),r}(e);1!==t&&i.get(t).push(e)}),i}function KC(e,t){if(e.classList)e.classList.add(t);else{let i=e.$$classes;i||(i=e.$$classes={}),i[t]=!0}}function XC(e,t){if(e.classList)e.classList.remove(t);else{let i=e.$$classes;i&&delete i[t]}}function JC(e,t,i){yS(i).onDone(()=>e.processLeaveNode(t))}function QC(e,t,i){const n=i.get(e);if(!n)return!1;let s=t.get(e);return s?n.forEach(e=>s.add(e)):t.set(e,n),i.delete(e),!0}class ZC{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new qC(e,t,i),this._timelineEngine=new NC(e,t,i),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,i,n,s){const r=e+"-"+n;let o=this._triggerCache[r];if(!o){const e=[],t=cC(this._driver,s,e);if(e.length)throw new Error(`The animation trigger "${n}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t){return new PC(e,t)}(n,t),this._triggerCache[r]=o}this._transitionEngine.registerTrigger(t,n,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,n){this._transitionEngine.insertNode(e,t,i,n)}onRemove(e,t,i,n){this._transitionEngine.removeNode(e,t,n||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,n){if("@"==i.charAt(0)){const[e,s]=ES(i);this._timelineEngine.command(e,t,s,n)}else this._transitionEngine.trigger(e,t,i,n)}listen(e,t,i,n,s){if("@"==i.charAt(0)){const[e,n]=ES(i);return this._timelineEngine.listen(e,t,n,s)}return this._transitionEngine.listen(e,t,i,n,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function e_(e,t){let i=null,n=null;return Array.isArray(t)&&t.length?(i=i_(t[0]),t.length>1&&(n=i_(t[t.length-1]))):t&&(i=i_(t)),i||n?new t_(e,i,n):null}let t_=(()=>{class e{constructor(t,i,n){this._element=t,this._startStyles=i,this._endStyles=n,this._state=0;let s=e.initialStylesByElement.get(t);s||e.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&zS(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zS(this._element,this._initialStyles),this._endStyles&&(zS(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(GS(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(GS(this._element,this._endStyles),this._endStyles=null),zS(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function i_(e){let t=null;const i=Object.keys(e);for(let n=0;n<i.length;n++){const s=i[n];n_(s)&&(t=t||{},t[s]=e[s])}return t}function n_(e){return"display"===e||"position"===e}class s_{constructor(e,t,i,n,s,r,o){this._element=e,this._name=t,this._duration=i,this._delay=n,this._easing=s,this._fillMode=r,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const i=h_(e,"").trim();i.length&&(function(e,t){let i=0;for(let n=0;n<e.length;n++)","===e.charAt(n)&&i++}(i),t=`${i}, ${t}`),c_(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),l_(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){r_(this._element,this._name,"paused")}resume(){r_(this._element,this._name,"running")}setPosition(e){const t=o_(this._element,this._name);this._position=e*this._duration,c_(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),l_(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const i=h_(e,"").split(","),n=a_(i,t);n>=0&&(i.splice(n,1),c_(e,"",i.join(",")))}(this._element,this._name))}}function r_(e,t,i){c_(e,"PlayState",i,o_(e,t))}function o_(e,t){const i=h_(e,"");return i.indexOf(",")>0?a_(i.split(","),t):a_([i],t)}function a_(e,t){for(let i=0;i<e.length;i++)if(e[i].indexOf(t)>=0)return i;return-1}function l_(e,t,i){i?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function c_(e,t,i,n){const s="animation"+t;if(null!=n){const t=e.style[s];if(t.length){const e=t.split(",");e[n]=i,i=e.join(",")}}e.style[s]=i}function h_(e,t){return e.style["animation"+t]}class d_{constructor(e,t,i,n,s,r,o,a){this.element=e,this.keyframes=t,this.animationName=i,this._duration=n,this._delay=s,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=r||"linear",this.totalTime=n+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new s_(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:nC(this.element,i))})}this.currentSnapshot=e}}class u_ extends mS{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=LS(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class p_{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(e){return IS(e)}matchesElement(e,t){return RS(e,t)}containsElement(e,t){return PS(e,t)}query(e,t,i){return MS(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(e=>LS(e));let n=`@keyframes ${t} {\n`,s="";i.forEach(e=>{s=" ";const t=parseFloat(e.offset);n+=`${s}${100*t}% {\n`,s+=" ",Object.keys(e).forEach(t=>{const i=e[t];switch(t){case"offset":return;case"easing":return void(i&&(n+=`${s}animation-timing-function: ${i};\n`));default:return void(n+=`${s}${t}: ${i};\n`)}}),n+=s+"}\n"}),n+="}\n";const r=document.createElement("style");return r.innerHTML=n,r}animate(e,t,i,n,s,r=[],o){o&&this._notifyFaultyScrubber();const a=r.filter(e=>e instanceof d_),l={};eC(i,n)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(i=>{"offset"!=i&&"easing"!=i&&(t[i]=e[i])})}),t}(t=tC(e,t,l));if(0==i)return new u_(e,c);const h="gen_css_kf_"+this._count++,d=this.buildKeyframeElement(e,h,t);document.querySelector("head").appendChild(d);const u=e_(e,t),p=new d_(e,t,h,i,n,s,c,u);return p.onDestroy(()=>{var e;(e=d).parentNode.removeChild(e)}),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class f_{constructor(e,t,i,n){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:nC(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class m_{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(g_().toString()),this._cssKeyframesDriver=new p_}validateStyleProperty(e){return IS(e)}matchesElement(e,t){return RS(e,t)}containsElement(e,t){return PS(e,t)}query(e,t,i){return MS(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,n,s,r=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,n,s,r);const a={duration:i,delay:n,fill:0==n?"both":"forwards"};s&&(a.easing=s);const l={},c=r.filter(e=>e instanceof f_);eC(i,n)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const h=e_(e,t=tC(e,t=t.map(e=>US(e,!1)),l));return new f_(e,t,a,h)}}function g_(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let v_=(()=>{class e extends rS{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:ut.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?lS(e):e;return w_(this._renderer,null,t,"register",[i]),new y_(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(Je(Ja),Je(vh))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class y_ extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new b_(this._id,e,t||{},this._renderer)}}class b_{constructor(e,t,i,n){this.id=e,this.element=t,this._renderer=n,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return w_(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function w_(e,t,i,n,s){return e.setProperty(t,`@@${i}:${n}`,s)}let S_=(()=>{class e{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(i);return e||(e=new C_("",i,this.engine),this._rendererCache.set(i,e)),e}const n=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);const r=t=>{Array.isArray(t)?t.forEach(r):this.engine.registerTrigger(n,s,e,t.name,t)};return t.data.animation.forEach(r),new __(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){e>=0&&e<this._microtaskId?this._zone.run(()=>t(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,i]=e;t(i)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(Je(Ja),Je(ZC),Je(Bc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();class C_{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,!0)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,n){this.delegate.setAttribute(e,t,i,n)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,n){this.delegate.setStyle(e,t,i,n)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class __ extends C_{constructor(e,t,i,n){super(t,i,n),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const n=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let s=t.substr(1),r="";return"@"!=s.charAt(0)&&([s,r]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,n,s,r,e=>{this.factory.scheduleListenerCallback(e._data||-1,i,e)})}return this.delegate.listen(e,t,i)}}let E_=(()=>{class e extends ZC{constructor(e,t,i){super(e.body,t,i)}}return e.\u0275fac=function(t){return new(t||e)(Je(vh),Je(VS),Je(xC))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const T_=new He("AnimationModuleType"),x_=[{provide:rS,useClass:v_},{provide:xC,useFactory:function(){return new kC}},{provide:ZC,useClass:E_},{provide:Ja,useFactory:function(e,t,i){return new S_(e,t,i)},deps:[Xd,ZC,Bc]}],k_=[{provide:VS,useFactory:function(){return"function"==typeof g_()?new m_:new p_}},{provide:T_,useValue:"BrowserAnimations"},...x_],A_=[{provide:VS,useClass:NS},{provide:T_,useValue:"NoopAnimations"},...x_];let O_=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:k_,imports:[hu]}),e})(),D_=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:A_,imports:[hu]}),e})();const I_=["*",[["mat-option"],["ng-container"]]],R_=["*","mat-option, ng-container"];function P_(e,t){if(1&e&&Bo(0,"mat-pseudo-checkbox",3),2&e){const e=Ko();Mo("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}const M_=["*"],L_=new il("9.2.4"),N_=new He("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let V_,B_=(()=>{class e{constructor(e,t,i){this._hasDoneGlobalChecks=!1,this._document=i,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=t,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const e=this._document||document;return"object"==typeof e&&e?e:null}_getWindow(){const e=this._getDocument(),t=(null==e?void 0:e.defaultView)||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return kn()&&!this._isTestEnv()}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){const e=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),t=this._getDocument();e&&t&&!t.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const e=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,t=this._getDocument();if(e||!t||!t.body||"function"!=typeof getComputedStyle)return;const i=t.createElement("div");i.classList.add("mat-theme-loaded-marker"),t.body.appendChild(i);const n=getComputedStyle(i);n&&"none"!==n.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.body.removeChild(i)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&L_.full!==sS.full&&console.warn("The Angular Material version ("+L_.full+") does not match the Angular CDK version ("+sS.full+").\nPlease ensure the versions of these two packages exactly match.")}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(nS),Je(N_,8),Je(vh,8))},imports:[[Fb],Fb]}),e})();function F_(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Uy(e)}}}function j_(e,t){return class extends e{constructor(...e){super(...e),this.color=t}get color(){return this._color}set color(e){const i=e||t;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),i&&this._elementRef.nativeElement.classList.add("mat-"+i),this._color=i)}}}function H_(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Uy(e)}}}function U_(e,t=0){return class extends e{constructor(...e){super(...e),this._tabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?e:t}}}function q_(e){return class extends e{constructor(...e){super(...e),this.errorState=!1,this.stateChanges=new x}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}}try{V_="undefined"!=typeof Intl}catch(v$){V_=!1}let W_=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({factory:function(){return new e},token:e,providedIn:"root"}),e})();class z_{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const G_={enterDuration:450,exitDuration:400},Y_=Lb({passive:!0}),$_=["mousedown","touchstart"],K_=["mouseup","mouseleave","touchend","touchcancel"];class X_{constructor(e,t,i,n){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,n.isBrowser&&(this._containerElement=Gy(i))}fadeInRipple(e,t,i={}){const n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},G_),i.animation);i.centered&&(e=n.left+n.width/2,t=n.top+n.height/2);const r=i.radius||function(e,t,i){const n=Math.max(Math.abs(e-i.left),Math.abs(e-i.right)),s=Math.max(Math.abs(t-i.top),Math.abs(t-i.bottom));return Math.sqrt(n*n+s*s)}(e,t,n),o=e-n.left,a=t-n.top,l=s.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-r+"px",c.style.top=a-r+"px",c.style.height=2*r+"px",c.style.width=2*r+"px",null!=i.color&&(c.style.backgroundColor=i.color),c.style.transitionDuration=l+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const h=new z_(this,c,i);return h.state=0,this._activeRipples.add(h),i.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const e=h===this._mostRecentTransientRipple;h.state=1,i.persistent||e&&this._isPointerDown||h.fadeOut()},l),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,n=Object.assign(Object.assign({},G_),e.config.animation);i.style.transitionDuration=n.exitDuration+"ms",i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.parentNode.removeChild(i)},n.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}setupTriggerEvents(e){const t=Gy(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents($_))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(K_),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=Qw(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||i||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(e=>{this._triggerElement.addEventListener(e,this,Y_)})})}_removeTriggerEvents(){this._triggerElement&&($_.forEach(e=>{this._triggerElement.removeEventListener(e,this,Y_)}),this._pointerUpEventsRegistered&&K_.forEach(e=>{this._triggerElement.removeEventListener(e,this,Y_)}))}}const J_=new He("mat-ripple-global-options");let Q_=(()=>{class e{constructor(e,t,i,n,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=n||{},this._rippleRenderer=new X_(this,t,e,i)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Bc),Io(Pb),Io(J_,8),Io(T_,8))},e.\u0275dir=Ct({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&aa("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),e})(),Z_=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[B_,Mb],B_]}),e})(),eE=(()=>{class e{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(Io(T_,8))},e.\u0275cmp=gt({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&aa("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),e})(),tE=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();class iE{}const nE=F_(iE);let sE=0,rE=(()=>{class e extends nE{constructor(){super(...arguments),this._labelId="mat-optgroup-label-"+sE++}}return e.\u0275fac=function(t){return oE(t||e)},e.\u0275cmp=gt({type:e,selectors:[["mat-optgroup"]],hostAttrs:["role","group",1,"mat-optgroup"],hostVars:4,hostBindings:function(e,t){2&e&&(ko("aria-disabled",t.disabled.toString())("aria-labelledby",t._labelId),aa("mat-optgroup-disabled",t.disabled))},inputs:{disabled:"disabled",label:"label"},exportAs:["matOptgroup"],features:[Oa],ngContentSelectors:R_,decls:4,vars:2,consts:[[1,"mat-optgroup-label",3,"id"]],template:function(e,t){1&e&&(Jo(I_),No(0,"label",0),wa(1),Qo(2),Vo(),Qo(3,1)),2&e&&(Mo("id",t._labelId),Ss(1),Ca("",t.label," "))},styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px;vertical-align:middle}.mat-optgroup-label .mat-icon svg{vertical-align:top}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e})();const oE=dn(rE);let aE=0;class lE{constructor(e,t=!1){this.source=e,this.isUserInput=t}}const cE=new He("MAT_OPTION_PARENT_COMPONENT");let hE=(()=>{class e{constructor(e,t,i,n){this._element=e,this._changeDetectorRef=t,this._parent=i,this.group=n,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+aE++,this.onSelectionChange=new $l,this._stateChanges=new x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Uy(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,t){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){13!==e.keyCode&&32!==e.keyCode||iw(e)||(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new lE(this,e))}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Kr),Io(cE,8),Io(rE,8))},e.\u0275cmp=gt({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&Wo("click",(function(){return t._selectViaInteraction()}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&(xa("id",t.id),ko("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),aa("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:M_,decls:4,vars:3,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"]],template:function(e,t){1&e&&(Jo(),Oo(0,P_,1,2,"mat-pseudo-checkbox",0),No(1,"span",1),Qo(2),Vo(),Bo(3,"div",2)),2&e&&(Mo("ngIf",t.multiple),Ss(3),Mo("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[md,Q_,eE],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.cdk-high-contrast-active .mat-option .mat-option-ripple{opacity:.5}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),e})();function dE(e,t,i){if(i.length){let n=t.toArray(),s=i.toArray(),r=0;for(let t=0;t<e+1;t++)n[t].group&&n[t].group===s[r]&&r++;return r}return 0}function uE(e,t,i,n){const s=e*t;return s<i?s:s+t>i+n?Math.max(0,s-n+t):i}let pE=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Z_,Id,tE]]}),e})();const fE=new He("mat-label-global-options"),mE=["mat-button",""],gE=["*"],vE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class yE{constructor(e){this._elementRef=e}}const bE=j_(F_(H_(yE)));let wE=(()=>{class e extends bE{constructor(e,t,i){super(e),this._focusMonitor=t,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const n of vE)this._hasHostAttributes(n)&&this._getHostElement().classList.add(n);e.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color="accent")}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",t){this._focusMonitor.focusVia(this._getHostElement(),e,t)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(e=>this._getHostElement().hasAttribute(e))}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(tS),Io(T_,8))},e.\u0275cmp=gt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){var i;1&e&&ac(Q_,!0),2&e&&rc(i=uc())&&(t.ripple=i.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:3,hostBindings:function(e,t){2&e&&(ko("disabled",t.disabled||null),aa("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Oa],attrs:mE,ngContentSelectors:gE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(Jo(),No(0,"span",0),Qo(1),Vo(),Bo(2,"div",1),Bo(3,"div",2)),2&e&&(Ss(2),aa("mat-button-ripple-round",t.isRoundButton||t.isIconButton),Mo("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[Q_],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),e})(),SE=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Z_,B_],B_]}),e})();class CE{constructor(e){this.total=e}call(e,t){return t.subscribe(new _E(e,this.total))}}class _E extends m{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}let EE=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();const TE=new Set;let xE,kE=(()=>{class t{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):AE}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!TE.has(t))try{xE||(xE=document.createElement("style"),xE.setAttribute("type","text/css"),document.head.appendChild(xE)),xE.sheet&&(xE.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),TE.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(Je(Pb))},t.\u0275prov=ue({factory:function(){return new t(Je(Pb))},token:t,providedIn:"root"}),t})();function AE(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let OE=(()=>{class e{constructor(e,t){this._mediaMatcher=e,this._zone=t,this._queries=new Map,this._destroySubject=new x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return DE(Wy(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){let t=mu(DE(Wy(e)).map(e=>this._registerQuery(e).observable));return t=Ku(t.pipe(ju(1)),t.pipe((1,e=>e.lift(new CE(1))),Lw(0))),t.pipe(B(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(e=>{t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this._mediaMatcher.matchMedia(e),i={observable:new S(e=>{const i=t=>this._zone.run(()=>e.next(t));return t.addListener(i),()=>{t.removeListener(i)}}).pipe(Xu(t),B(t=>({query:e,matches:t.matches})),mb(this._destroySubject)),mql:t};return this._queries.set(e,i),i}}return e.\u0275fac=function(t){return new(t||e)(Je(kE),Je(Bc))},e.\u0275prov=ue({factory:function(){return new e(Je(kE),Je(Bc))},token:e,providedIn:"root"}),e})();function DE(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function IE(e,t){if(1&e){const e=Ho();No(0,"div",1),No(1,"button",2),Wo("click",(function(){return ei(e),Ko().action()})),wa(2),Vo(),Vo()}if(2&e){const e=Ko();Ss(2),Sa(e.data.action)}}function RE(e,t){}const PE=Math.pow(2,31)-1;class ME{constructor(e,t){this._overlayRef=t,this._afterDismissed=new x,this._afterOpened=new x,this._onAction=new x,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,PE))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed.asObservable()}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction.asObservable()}}const LE=new He("MatSnackBarData");class NE{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let VE=(()=>{class e{constructor(e,t){this.snackBarRef=e,this.data=t}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return e.\u0275fac=function(t){return new(t||e)(Io(ME),Io(LE))},e.\u0275cmp=gt({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(No(0,"span"),wa(1),Vo(),Oo(2,IE,3,1,"div",0)),2&e&&(Ss(1),Sa(t.data.message),Ss(1),Mo("ngIf",t.hasAction))},directives:[md,wE],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),e})();const BE={snackBarState:oS("state",[hS("void, hidden",cS({transform:"scale(0.8)",opacity:0})),hS("visible",cS({transform:"scale(1)",opacity:1})),dS("* => visible",aS("150ms cubic-bezier(0, 0, 0.2, 1)")),dS("* => void, * => hidden",aS("75ms cubic-bezier(0.4, 0.0, 1, 1)",cS({opacity:0})))])};let FE=(()=>{class e extends Jb{constructor(e,t,i,n){super(),this._ngZone=e,this._elementRef=t,this._changeDetectorRef=i,this.snackBarConfig=n,this._destroyed=!1,this._onExit=new x,this._onEnter=new x,this._animationState="void",this.attachDomPortal=e=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(e)),this._role="assertive"!==n.politeness||n.announcementMessage?"off"===n.politeness?null:"status":"alert"}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:t,toState:i}=e;if(("void"===i&&"void"!==t||"hidden"===i)&&this._completeExit(),"visible"===i){const e=this._onEnter;this._ngZone.run(()=>{e.next(),e.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.asObservable().pipe(ju(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach(t=>e.classList.add(t)):e.classList.add(t)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}return e.\u0275fac=function(t){return new(t||e)(Io(Bc),Io(Ka),Io(Kr),Io(NE))},e.\u0275cmp=gt({type:e,selectors:[["snack-bar-container"]],viewQuery:function(e,t){var i;1&e&&oc(Zb,!0),2&e&&rc(i=uc())&&(t._portalOutlet=i.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(e,t){1&e&&zo("@state.done",(function(e){return t.onAnimationEnd(e)})),2&e&&(ko("role",t._role),ka("@state",t._animationState))},features:[Oa],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&Oo(0,RE,0,0,"ng-template",0)},directives:[Zb],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[BE.snackBarState]}}),e})(),jE=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Mw,ew,Id,SE,B_],B_]}),e})();const HE=new He("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new NE}});let UE=(()=>{class e{constructor(e,t,i,n,s,r){this._overlay=e,this._live=t,this._injector=i,this._breakpointObserver=n,this._parentSnackBar=s,this._defaultConfig=r,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,t){return this._attach(e,t)}openFromTemplate(e,t){return this._attach(e,t)}open(e,t="",i){const n=Object.assign(Object.assign({},this._defaultConfig),i);return n.data={message:e,action:t},n.announcementMessage||(n.announcementMessage=e),this.openFromComponent(VE,n)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,t){const i=new tw(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[NE,t]])),n=new $b(FE,t.viewContainerRef,i),s=e.attach(n);return s.instance.snackBarConfig=t,s.instance}_attach(e,t){const i=Object.assign(Object.assign(Object.assign({},new NE),this._defaultConfig),t),n=this._createOverlay(i),s=this._attachSnackBarContainer(n,i),r=new ME(s,n);if(e instanceof bl){const t=new Kb(e,null,{$implicit:i.data,snackBarRef:r});r.instance=s.attachTemplatePortal(t)}else{const t=this._createInjector(i,r),n=new $b(e,void 0,t),o=s.attachComponentPortal(n);r.instance=o.instance}return this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait)").pipe(mb(n.detachments())).subscribe(e=>{const t=n.overlayElement.classList;e.matches?t.add("mat-snack-bar-handset"):t.remove("mat-snack-bar-handset")}),this._animateSnackBar(r,i),this._openedSnackBarRef=r,this._openedSnackBarRef}_animateSnackBar(e,t){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),t.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),t.duration&&t.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(t.duration)),t.announcementMessage&&this._live.announce(t.announcementMessage,t.politeness)}_createOverlay(e){const t=new dw;t.direction=e.direction;let i=this._overlay.position().global();const n="rtl"===e.direction,s="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!n||"end"===e.horizontalPosition&&n,r=!s&&"center"!==e.horizontalPosition;return s?i.left("0"):r?i.right("0"):i.centerHorizontally(),"top"===e.verticalPosition?i.top("0"):i.bottom("0"),t.positionStrategy=i,this._overlay.create(t)}_createInjector(e,t){return new tw(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[ME,t],[LE,e.data]]))}}return e.\u0275fac=function(t){return new(t||e)(Je(Aw),Je(Jw),Je(uo),Je(OE),Je(e,12),Je(HE))},e.\u0275prov=ue({factory:function(){return new e(Je(Aw),Je(Jw),Je(Ue),Je(OE),Je(e,12),Je(HE))},token:e,providedIn:jE}),e})();function qE(e,t){}class WE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const zE={dialogContainer:oS("dialogContainer",[hS("void, exit",cS({opacity:0,transform:"scale(0.7)"})),hS("enter",cS({transform:"none"})),dS("* => enter",aS("150ms cubic-bezier(0, 0, 0.2, 1)",cS({transform:"none",opacity:1}))),dS("* => void, * => exit",aS("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",cS({opacity:0})))])};function GE(){throw Error("Attempting to attach dialog content after content is already attached")}let YE=(()=>{class e extends Jb{constructor(e,t,i,n,s){super(),this._elementRef=e,this._focusTrapFactory=t,this._changeDetectorRef=i,this._config=s,this._elementFocusedBeforeDialogWasOpened=null,this._state="enter",this._animationStateChanged=new $l,this.attachDomPortal=e=>(this._portalOutlet.hasAttached()&&GE(),this._setupFocusTrap(),this._portalOutlet.attachDomPortal(e)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=n}attachComponentPortal(e){return this._portalOutlet.hasAttached()&&GE(),this._setupFocusTrap(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached()&&GE(),this._setupFocusTrap(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._focusTrap.focusInitialElement()||this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const t=this._document.activeElement,i=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==i&&!i.contains(t)||e.focus()}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_containsFocus(){const e=this._elementRef.nativeElement,t=this._document.activeElement;return e===t||e.contains(t)}_onAnimationDone(e){"enter"===e.toState?this._trapFocus():"exit"===e.toState&&this._restoreFocus(),this._animationStateChanged.emit(e)}_onAnimationStart(e){this._animationStateChanged.emit(e)}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io($w),Io(Kr),Io(vh,8),Io(WE))},e.\u0275cmp=gt({type:e,selectors:[["mat-dialog-container"]],viewQuery:function(e,t){var i;1&e&&oc(Zb,!0),2&e&&rc(i=uc())&&(t._portalOutlet=i.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,t){1&e&&zo("@dialogContainer.start",(function(e){return t._onAnimationStart(e)}))("@dialogContainer.done",(function(e){return t._onAnimationDone(e)})),2&e&&(ko("id",t._id)("role",t._config.role)("aria-labelledby",t._config.ariaLabel?null:t._ariaLabelledBy)("aria-label",t._config.ariaLabel)("aria-describedby",t._config.ariaDescribedBy||null),ka("@dialogContainer",t._state))},features:[Oa],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&Oo(0,qE,0,0,"ng-template",0)},directives:[Zb],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[zE.dialogContainer]}}),e})(),$E=0;class KE{constructor(e,t,i="mat-dialog-"+$E++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new x,this._afterClosed=new x,this._beforeClosed=new x,this._state=0,t._id=i,t._animationStateChanged.pipe(Cu(e=>"done"===e.phaseName&&"enter"===e.toState),ju(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Cu(e=>"done"===e.phaseName&&"exit"===e.toState),ju(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Cu(e=>27===e.keyCode&&!this.disableClose&&!iw(e))).subscribe(e=>{e.preventDefault(),this.close()}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():this.close()})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Cu(e=>"start"===e.phaseName),ju(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._containerInstance._startExitAnimation(),this._state=1}afterOpened(){return this._afterOpened.asObservable()}afterClosed(){return this._afterClosed.asObservable()}beforeClosed(){return this._beforeClosed.asObservable()}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._getPositionStrategy().width(e).height(t),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}const XE=new He("MatDialogData"),JE=new He("mat-dialog-default-options"),QE=new He("mat-dialog-scroll-strategy"),ZE={provide:QE,deps:[Aw],useFactory:function(e){return()=>e.scrollStrategies.block()}};let eT=(()=>{class e{constructor(e,t,i,n,s,r,o){this._overlay=e,this._injector=t,this._defaultOptions=n,this._parentDialog=r,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new x,this._afterOpenedAtThisLevel=new x,this._ariaHiddenElements=new Map,this.afterAllClosed=wu(()=>this.openDialogs.length?this._afterAllClosed:this._afterAllClosed.pipe(Xu(void 0))),this._scrollStrategy=s}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}get _afterAllClosed(){const e=this._parentDialog;return e?e._afterAllClosed:this._afterAllClosedAtThisLevel}open(e,t){if((t=function(e,t){return Object.assign(Object.assign({},t),e)}(t,this._defaultOptions||new WE)).id&&this.getDialogById(t.id))throw Error(`Dialog with id "${t.id}" exists already. The dialog id must be unique.`);const i=this._createOverlay(t),n=this._attachDialogContainer(i,t),s=this._attachDialogContent(e,n,i,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const t=this._getOverlayConfig(e);return this._overlay.create(t)}_getOverlayConfig(e){const t=new dw({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachDialogContainer(e,t){const i=uo.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:WE,useValue:t}]}),n=new $b(YE,t.viewContainerRef,i,t.componentFactoryResolver);return e.attach(n).instance}_attachDialogContent(e,t,i,n){const s=new KE(i,t,n.id);if(e instanceof bl)t.attachTemplatePortal(new Kb(e,null,{$implicit:n.data,dialogRef:s}));else{const i=this._createInjector(n,s,t),r=t.attachComponentPortal(new $b(e,n.viewContainerRef,i));s.componentInstance=r.instance}return s.updateSize(n.width,n.height).updatePosition(n.position),s}_createInjector(e,t,i){const n=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:YE,useValue:i},{provide:XE,useValue:e.data},{provide:KE,useValue:t}];return!e.direction||n&&n.get(Bb,null)||s.push({provide:Bb,useValue:{value:e.direction,change:du()}}),uo.create({parent:n||this._injector,providers:s})}_removeOpenDialog(e){const t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const t=e.parentElement.children;for(let i=t.length-1;i>-1;i--){let n=t[i];n===e||"SCRIPT"===n.nodeName||"STYLE"===n.nodeName||n.hasAttribute("aria-live")||(this._ariaHiddenElements.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}}return e.\u0275fac=function(t){return new(t||e)(Je(Aw),Je(uo),Je(Rh,8),Je(JE,8),Je(QE),Je(e,12),Je(yw))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),tT=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[eT,ZE],imports:[[Mw,ew,B_],B_]}),e})(),iT=(()=>{class e{get nativeWindow(){return window}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var nT=n("dNE1"),sT=n("zH15");class rT{}class oT{}let aT=(()=>{class e{constructor(e,t){this.loginService=e,this.httpService=t,this.tutorProfileDetails=new Iy,this.tutorProfile=new oT,this.tutorLogin=new rT,this.bookingList=[],this.pendingRequestsCount=0,this.bookingRequestMessage="",this.bookingsChanged=new x}setTutorLogin(e){this.tutorLogin=e}getTutorLogin(){return this.tutorLogin}setTutorDetails(e){this.tutorProfile=e}getTutorDetials(){return this.tutorProfile}setTutorProfileDetails(e){this.tutorProfileDetails=e}getTutorProfileDetails(){return this.tutorProfileDetails}setEditFuntion(e){this.editVariable=e}getEditFunction(){return this.editVariable}setPersonalAvailabilitySchedule(e){this.personalAvailablitySchedule=e,this.manipulateMeetingSchedule()}getPersonalAvailabilitySchedule(){return this.personalAvailablitySchedule}getBookings(){return this.bookingList.slice()}setBookings(e){this.bookingList=e,this.bookingsChanged.next(this.bookingList.slice())}manipulateMeetingSchedule(){for(let i of this.getPersonalAvailabilitySchedule().allMeetingsSchedule){var e=new Date(i.StartTime.toString()),t=new Date(i.EndTime.toString());i.StartTime=e.toString(),i.EndTime=t.toString(),i.Subject=i.Subject.concat(" : ",i.Description.split("=")[0])}for(let i of this.getPersonalAvailabilitySchedule().allAvailabilitySchedule)i.Type="availability"}fetchTutorPendingBookings(){"Expert"==this.loginService.getLoginType()&&this.httpService.getTutorBookings(this.getTutorDetials().bookingId).subscribe(e=>{this.setBookings(e)})}}return e.\u0275fac=function(t){return new(t||e)(Je(jy),Je(Og))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),lT=(()=>{class e{constructor(){this.chat=[]}getIdSelected(){return this.idSelected}setIdSelected(e){this.idSelected=e}getChat(){return this.chat}setChat(e){this.chat.push(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),cT=(()=>{class e{constructor(e,t,i,n){this.loginService=e,this.tutorService=t,this.studentService=i,this.httpService=n,this.notificationCount=0,this.notificationList=[],this.notificationsChanged=new x}increaseNotificationCount(e){this.notificationCount+=e}getNotificationCount(){return this.notificationCount}getNotifications(){return this.notificationList.slice()}setNotification(e){this.notificationList=e,this.notificationCount=0;let t=0;this.notificationList.forEach((function(e){0==e.readStatus&&t++})),this.increaseNotificationCount(t),this.notificationsChanged.next(this.notificationList.slice())}fetchNotification(){let e=this.loginService.getLoginType();e&&"Expert"==e?this.userId=this.tutorService.getTutorDetials().bookingId:e&&"Learner"==e&&(this.userId=this.studentService.getStudentProfileDetails().sid),this.userId&&this.httpService.fetchNotifications(this.userId).subscribe(e=>{this.setNotification(e)})}}return e.\u0275fac=function(t){return new(t||e)(Je(jy),Je(aT),Je(Hy),Je(Og))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),hT=(()=>{class e{constructor(e,t,i,n,s,r){this.loginService=e,this.tutorService=t,this.studentService=i,this.chatService=n,this.notificationService=s,this.zone=r,this.greetings=[],this.backendUrl="https://backend.fellowgenius.com"}connectToUserWebSocket(e){let t=new sT(this.backendUrl+"/fellowGenius");this.ws=nT.over(t);let i=this;this.ws.connect({},t=>{this.loginType=this.loginService.getLoginType(),i.ws.subscribe("/errors",e=>{alert("Error "+e.body)}),i.ws.subscribe("/user/Notifications/"+e,e=>{"updateNotification"==e.body&&(this.loginType&&"Expert"==this.loginType&&null!=this.tutorService.getTutorDetials().tid?(this.notificationService.fetchNotification(),this.tutorService.fetchTutorPendingBookings()):this.loginType&&"Learner"==this.loginType&&null!=this.studentService.getStudentProfileDetails().sid&&(this.notificationService.fetchNotification(),this.studentService.fetchStudentPendingBookings(),this.studentService.fetchApprovedStudentMeetings()))})},t=>{e&&(console.log("re initiating the connection !"),setTimeout(()=>{this.connectToUserWebSocket(e)},5e3))})}sendAppointmentNotfication(e,t){this.ws.send("/sendNotification/"+t,{},e)}}return e.\u0275fac=function(t){return new(t||e)(Je(jy),Je(aT),Je(Hy),Je(lT),Je(cT),Je(Bc))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const dT=["underline"],uT=["connectionContainer"],pT=["inputContainer"],fT=["label"];function mT(e,t){1&e&&(Fo(0),No(1,"div",14),Bo(2,"div",15),Bo(3,"div",16),Bo(4,"div",17),Vo(),No(5,"div",18),Bo(6,"div",15),Bo(7,"div",16),Bo(8,"div",17),Vo(),jo())}function gT(e,t){1&e&&(No(0,"div",19),Qo(1,1),Vo())}function vT(e,t){if(1&e&&(Fo(0),Qo(1,2),No(2,"span"),wa(3),Vo(),jo()),2&e){const e=Ko(2);Ss(3),Sa(e._control.placeholder)}}function yT(e,t){1&e&&Qo(0,3,["*ngSwitchCase","true"])}function bT(e,t){1&e&&(No(0,"span",23),wa(1," *"),Vo())}function wT(e,t){if(1&e){const e=Ho();No(0,"label",20,21),Wo("cdkObserveContent",(function(){return ei(e),Ko().updateOutlineGap()})),Oo(2,vT,4,1,"ng-container",12),Oo(3,yT,1,0,void 0,12),Oo(4,bT,2,0,"span",22),Vo()}if(2&e){const e=Ko();aa("mat-empty",e._control.empty&&!e._shouldAlwaysFloat)("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),Mo("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),ko("for",e._control.id)("aria-owns",e._control.id),Ss(2),Mo("ngSwitchCase",!1),Ss(1),Mo("ngSwitchCase",!0),Ss(1),Mo("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function ST(e,t){1&e&&(No(0,"div",24),Qo(1,4),Vo())}function CT(e,t){if(1&e&&(No(0,"div",25,26),Bo(2,"span",27),Vo()),2&e){const e=Ko();Ss(2),aa("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function _T(e,t){1&e&&(No(0,"div"),Qo(1,5),Vo()),2&e&&Mo("@transitionMessages",Ko()._subscriptAnimationState)}function ET(e,t){if(1&e&&(No(0,"div",31),wa(1),Vo()),2&e){const e=Ko(2);Mo("id",e._hintLabelId),Ss(1),Sa(e.hintLabel)}}function TT(e,t){if(1&e&&(No(0,"div",28),Oo(1,ET,2,2,"div",29),Qo(2,6),Bo(3,"div",30),Qo(4,7),Vo()),2&e){const e=Ko();Mo("@transitionMessages",e._subscriptAnimationState),Ss(1),Mo("ngIf",e.hintLabel)}}const xT=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],kT=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let AT=0,OT=(()=>{class e{constructor(){this.id="mat-error-"+AT++}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(e,t){2&e&&ko("id",t.id)},inputs:{id:"id"}}),e})();const DT={transitionMessages:oS("transitionMessages",[hS("enter",cS({opacity:1,transform:"translateY(0%)"})),dS("void => enter",[cS({opacity:0,transform:"translateY(-100%)"}),aS("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let IT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e}),e})();function RT(e){return Error(`A hint was already declared for 'align="${e}"'.`)}let PT=0,MT=(()=>{class e{constructor(){this.align="start",this.id="mat-hint-"+PT++}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,t){2&e&&(ko("id",t.id)("align",null),aa("mat-right","end"==t.align))},inputs:{align:"align",id:"id"}}),e})(),LT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["mat-label"]]}),e})(),NT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["mat-placeholder"]]}),e})(),VT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","matPrefix",""]]}),e})(),BT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","matSuffix",""]]}),e})(),FT=0;class jT{constructor(e){this._elementRef=e}}const HT=j_(jT,"primary"),UT=new He("MAT_FORM_FIELD_DEFAULT_OPTIONS"),qT=new He("MatFormField");let WT=(()=>{class e extends HT{constructor(e,t,i,n,s,r,o,a){super(e),this._elementRef=e,this._changeDetectorRef=t,this._dir=n,this._defaults=s,this._platform=r,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+FT++,this._labelId="mat-form-field-label-"+FT++,this._labelOptions=i||{},this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Uy(e)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+e.controlType),e.stateChanges.pipe(Xu(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(mb(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(mb(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),K(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Xu(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Xu(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(mb(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const t=this._control?this._control.ngControl:null;return t&&t[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Yy(this._label.nativeElement,"transitionend").pipe(ju(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let e,t;this._hintChildren.forEach(i=>{if("start"===i.align){if(e||this.hintLabel)throw RT("start");e=i}else if("end"===i.align){if(t)throw RT("end");t=i}})}}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if("hint"===this._getDisplayedMessages()){const t=this._hintChildren?this._hintChildren.find(e=>"start"===e.align):null,i=this._hintChildren?this._hintChildren.find(e=>"end"===e.align):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&(e=this._errorChildren.map(e=>e.id));this._control.setDescribedByIds(e)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!e||!e.children.length||!e.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let t=0,i=0;const n=this._connectionContainerRef.nativeElement,s=n.querySelectorAll(".mat-form-field-outline-start"),r=n.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const s=n.getBoundingClientRect();if(0===s.width&&0===s.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const r=this._getStartEnd(s),o=this._getStartEnd(e.children[0].getBoundingClientRect());let a=0;for(const t of e.children)a+=t.offsetWidth;t=Math.abs(o-r)-5,i=a>0?.75*a+10:0}for(let o=0;o<s.length;o++)s[o].style.width=t+"px";for(let o=0;o<r.length;o++)r[o].style.width=i+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Kr),Io(fE,8),Io(Bb,8),Io(UT,8),Io(Pb),Io(Bc),Io(T_,8))},e.\u0275cmp=gt({type:e,selectors:[["mat-form-field"]],contentQueries:function(e,t,i){var n;1&e&&(cc(i,IT,!0),hc(i,IT,!0),cc(i,LT,!0),hc(i,LT,!0),cc(i,NT,!0),cc(i,OT,!0),cc(i,MT,!0),cc(i,VT,!0),cc(i,BT,!0)),2&e&&(rc(n=uc())&&(t._controlNonStatic=n.first),rc(n=uc())&&(t._controlStatic=n.first),rc(n=uc())&&(t._labelChildNonStatic=n.first),rc(n=uc())&&(t._labelChildStatic=n.first),rc(n=uc())&&(t._placeholderChild=n.first),rc(n=uc())&&(t._errorChildren=n),rc(n=uc())&&(t._hintChildren=n),rc(n=uc())&&(t._prefixChildren=n),rc(n=uc())&&(t._suffixChildren=n))},viewQuery:function(e,t){var i;1&e&&(ac(dT,!0),oc(uT,!0),ac(pT,!0),ac(fT,!0)),2&e&&(rc(i=uc())&&(t.underlineRef=i.first),rc(i=uc())&&(t._connectionContainerRef=i.first),rc(i=uc())&&(t._inputContainerRef=i.first),rc(i=uc())&&(t._label=i.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(e,t){2&e&&aa("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat)("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[za([{provide:qT,useExisting:e}]),Oa],ngContentSelectors:kT,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(Jo(xT),No(0,"div",0),No(1,"div",1,2),Wo("click",(function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)})),Oo(3,mT,9,0,"ng-container",3),Oo(4,gT,2,0,"div",4),No(5,"div",5,6),Qo(7),No(8,"span",7),Oo(9,wT,5,16,"label",8),Vo(),Vo(),Oo(10,ST,2,0,"div",9),Vo(),Oo(11,CT,3,4,"div",10),No(12,"div",11),Oo(13,_T,2,1,"div",12),Oo(14,TT,5,2,"div",13),Vo(),Vo()),2&e&&(Ss(3),Mo("ngIf","outline"==t.appearance),Ss(1),Mo("ngIf",t._prefixChildren.length),Ss(5),Mo("ngIf",t._hasFloatingLabel()),Ss(1),Mo("ngIf",t._suffixChildren.length),Ss(1),Mo("ngIf","outline"!=t.appearance),Ss(1),Mo("ngSwitch",t._getDisplayedMessages()),Ss(1),Mo("ngSwitchCase","error"),Ss(1),Mo("ngSwitchCase","hint"))},directives:[md,bd,wd,Hw],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[DT.transitionMessages]},changeDetection:0}),e})(),zT=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Id,B_,Uw],B_]}),e})();const GT=["trigger"],YT=["panel"];function $T(e,t){if(1&e&&(No(0,"span",8),wa(1),Vo()),2&e){const e=Ko();Ss(1),Sa(e.placeholder||"\xa0")}}function KT(e,t){if(1&e&&(No(0,"span"),wa(1),Vo()),2&e){const e=Ko(2);Ss(1),Sa(e.triggerValue||"\xa0")}}function XT(e,t){1&e&&Qo(0,0,["*ngSwitchCase","true"])}function JT(e,t){1&e&&(No(0,"span",9),Oo(1,KT,2,1,"span",10),Oo(2,XT,1,0,void 0,11),Vo()),2&e&&(Mo("ngSwitch",!!Ko().customTrigger),Ss(2),Mo("ngSwitchCase",!0))}function QT(e,t){if(1&e){const e=Ho();No(0,"div",12),No(1,"div",13,14),Wo("@transformPanel.done",(function(t){return ei(e),Ko()._panelDoneAnimatingStream.next(t.toState)}))("keydown",(function(t){return ei(e),Ko()._handleKeydown(t)})),Qo(3,1),Vo(),Vo()}if(2&e){const e=Ko();Mo("@transformPanelWrap",void 0),Ss(1),"mat-select-panel ",i=e._getPanelTheme(),"",da(lt,ca,Ao(Qt(),"mat-select-panel ",i,""),!0),oa("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),Mo("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),ko("id",e.id+"-panel")}var i}const ZT=[[["mat-select-trigger"]],"*"],ex=["mat-select-trigger","*"],tx={transformPanelWrap:oS("transformPanelWrap",[dS("* => void",pS("@transformPanel",[uS()],{optional:!0}))]),transformPanel:oS("transformPanel",[hS("void",cS({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),hS("showing",cS({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),hS("showing-multiple",cS({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),dS("void => *",aS("120ms cubic-bezier(0, 0, 0.2, 1)")),dS("* => void",aS("100ms 25ms linear",cS({opacity:0})))])};let ix=0;const nx=new He("mat-select-scroll-strategy"),sx=new He("MAT_SELECT_CONFIG"),rx={provide:nx,deps:[Aw],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};class ox{constructor(e,t){this.source=e,this.value=t}}class ax{constructor(e,t,i,n,s){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=i,this._parentFormGroup=n,this.ngControl=s}}const lx=H_(U_(F_(q_(ax))));let cx=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["mat-select-trigger"]]}),e})(),hx=(()=>{class e extends lx{constructor(e,t,i,n,s,r,o,a,l,c,h,d,u,p){super(s,n,o,a,c),this._viewportRuler=e,this._changeDetectorRef=t,this._ngZone=i,this._dir=r,this._parentFormField=l,this.ngControl=c,this._liveAnnouncer=u,this._panelOpen=!1,this._required=!1,this._scrollTop=0,this._multiple=!1,this._compareWith=(e,t)=>e===t,this._uid="mat-select-"+ix++,this._destroy=new x,this._triggerFontSize=0,this._onChange=()=>{},this._onTouched=()=>{},this._optionIds="",this._transformOrigin="top",this._panelDoneAnimatingStream=new x,this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this._disableOptionCentering=!1,this._focused=!1,this.controlType="mat-select",this.ariaLabel="",this.optionSelectionChanges=wu(()=>{const e=this.options;return e?e.changes.pipe(Xu(e),Gu(()=>K(...e.map(e=>e.onSelectionChange)))):this._ngZone.onStable.asObservable().pipe(ju(1),Gu(()=>this.optionSelectionChanges))}),this.openedChange=new $l,this._openedStream=this.openedChange.pipe(Cu(e=>e),B(()=>{})),this._closedStream=this.openedChange.pipe(Cu(e=>!e),B(()=>{})),this.selectionChange=new $l,this.valueChange=new $l,this.ngControl&&(this.ngControl.valueAccessor=this),this._scrollStrategyFactory=d,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id,p&&(null!=p.disableOptionCentering&&(this.disableOptionCentering=p.disableOptionCentering),null!=p.typeaheadDebounceInterval&&(this.typeaheadDebounceInterval=p.typeaheadDebounceInterval))}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=Uy(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=Uy(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Uy(e)}get compareWith(){return this._compareWith}set compareWith(e){if("function"!=typeof e)throw Error("`compareWith` must be a function.");this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){e!==this._value&&(this.writeValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=qy(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new jb(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(e=>e.lift(new ob(void 0,void 0)),mb(this._destroy)).subscribe(()=>{this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())}),this._viewportRuler.change().pipe(mb(this._destroy)).subscribe(()=>{this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(mb(this._destroy)).subscribe(e=>{e.added.forEach(e=>e.select()),e.removed.forEach(e=>e.deselect())}),this.options.changes.pipe(Xu(null),mb(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(ju(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=this._triggerFontSize+"px")}))}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.options&&this._setSelectionByValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(e=>e.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const t=e.keyCode,i=40===t||38===t||37===t||39===t,n=13===t||32===t,s=this._keyManager;if(!s.isTyping()&&n&&!iw(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const i=this.selected;36===t||35===t?(36===t?s.setFirstItemActive():s.setLastItemActive(),e.preventDefault()):s.onKeydown(e);const n=this.selected;n&&i!==n&&this._liveAnnouncer.announce(n.viewValue,1e4)}}_handleOpenKeydown(e){const t=this._keyManager,i=e.keyCode,n=40===i||38===i,s=t.isTyping();if(36===i||35===i)e.preventDefault(),36===i?t.setFirstItemActive():t.setLastItemActive();else if(n&&e.altKey)e.preventDefault(),this.close();else if(s||13!==i&&32!==i||!t.activeItem||iw(e))if(!s&&this._multiple&&65===i&&e.ctrlKey){e.preventDefault();const t=this.options.some(e=>!e.disabled&&!e.selected);this.options.forEach(e=>{e.disabled||(t?e.select():e.deselect())})}else{const i=t.activeItemIndex;t.onKeydown(e),this._multiple&&n&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==i&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(ju(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop})}_getPanelTheme(){return this._parentFormField?"mat-"+this._parentFormField.color:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.multiple&&e){if(!Array.isArray(e))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),e.forEach(e=>this._selectValue(e)),this._sortValues()}else{this._selectionModel.clear();const t=this._selectValue(e);t?this._keyManager.setActiveItem(t):this.panelOpen||this._keyManager.setActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const t=this.options.find(t=>{try{return null!=t.value&&this._compareWith(t.value,e)}catch(i){return kn()&&console.warn(i),!1}});return t&&this._selectionModel.select(t),t}_initKeyManager(){this._keyManager=new qw(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(mb(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(mb(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollActiveOptionIntoView():this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=K(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(mb(e)).subscribe(e=>{this._onSelect(e.source,e.isUserInput),e.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),K(...this.options.map(e=>e._stateChanges)).pipe(mb(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()}),this._setOptionIds()}_onSelect(e,t){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((t,i)=>this.sortComparator?this.sortComparator(t,i,e):e.indexOf(t)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let t=null;t=this.multiple?this.selected.map(e=>e.value):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(new ox(this,t)),this._changeDetectorRef.markForCheck()}_setOptionIds(){this._optionIds=this.options.map(e=>e.id).join(" ")}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_scrollActiveOptionIntoView(){const e=this._keyManager.activeItemIndex||0,t=dE(e,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=uE(e+t,this._getItemHeight(),this.panel.nativeElement.scrollTop,256)}focus(e){this._elementRef.nativeElement.focus(e)}_getOptionIndex(e){return this.options.reduce((t,i,n)=>void 0!==t?t:e===i?n:void 0,void 0)}_calculateOverlayPosition(){const e=this._getItemHeight(),t=this._getItemCount(),i=Math.min(t*e,256),n=t*e-i;let s=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);s+=dE(s,this.options,this.optionGroups);const r=i/2;this._scrollTop=this._calculateOverlayScroll(s,r,n),this._offsetY=this._calculateOverlayOffsetY(s,r,n),this._checkOverlayWithinViewport(n)}_calculateOverlayScroll(e,t,i){const n=this._getItemHeight();return Math.min(Math.max(0,n*e-t+n/2),i)}_getAriaLabel(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}_getAriaLabelledby(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),t=this._viewportRuler.getViewportSize(),i=this._isRtl(),n=this.multiple?56:32;let s;if(this.multiple)s=40;else{let e=this._selectionModel.selected[0]||this.options.first;s=e&&e.group?32:16}i||(s*=-1);const r=0-(e.left+s-(i?n:0)),o=e.right+s-t.width+(i?0:n);r>0?s+=r+8:o>0&&(s-=o+8),this.overlayDir.offsetX=Math.round(s),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,t,i){const n=this._getItemHeight(),s=(n-this._triggerRect.height)/2,r=Math.floor(256/n);let o;return this._disableOptionCentering?0:(o=0===this._scrollTop?e*n:this._scrollTop===i?(e-(this._getItemCount()-r))*n+(n-(this._getItemCount()*n-256)%n):t-n/2,Math.round(-1*o-s))}_checkOverlayWithinViewport(e){const t=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),n=this._triggerRect.top-8,s=i.height-this._triggerRect.bottom-8,r=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-r-this._triggerRect.height;o>s?this._adjustPanelUp(o,s):r>n?this._adjustPanelDown(r,n,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,t){const i=Math.round(e-t);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,t,i){const n=Math.round(e-t);if(this._scrollTop+=n,this._offsetY+=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_getOriginBasedOnOption(){const e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-t+e/2}px 0px`}_getItemCount(){return this.options.length+this.optionGroups.length}_getItemHeight(){return 3*this._triggerFontSize}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty}}return e.\u0275fac=function(t){return new(t||e)(Io(qb),Io(Kr),Io(Bc),Io(W_),Io(Ka),Io(Bb,8),Io(Wv,8),Io(sy,8),Io(qT,8),Io(qg,10),Ro("tabindex"),Io(nx),Io(Jw),Io(sx,8))},e.\u0275cmp=gt({type:e,selectors:[["mat-select"]],contentQueries:function(e,t,i){var n;1&e&&(cc(i,cx,!0),cc(i,hE,!0),cc(i,rE,!0)),2&e&&(rc(n=uc())&&(t.customTrigger=n.first),rc(n=uc())&&(t.options=n),rc(n=uc())&&(t.optionGroups=n))},viewQuery:function(e,t){var i;1&e&&(ac(GT,!0),ac(YT,!0),ac(Rw,!0)),2&e&&(rc(i=uc())&&(t.trigger=i.first),rc(i=uc())&&(t.panel=i.first),rc(i=uc())&&(t.overlayDir=i.first))},hostAttrs:["role","listbox",1,"mat-select"],hostVars:19,hostBindings:function(e,t){1&e&&Wo("keydown",(function(e){return t._handleKeydown(e)}))("focus",(function(){return t._onFocus()}))("blur",(function(){return t._onBlur()})),2&e&&(ko("id",t.id)("tabindex",t.tabIndex)("aria-label",t._getAriaLabel())("aria-labelledby",t._getAriaLabelledby())("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-owns",t.panelOpen?t._optionIds:null)("aria-multiselectable",t.multiple)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),aa("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",disableOptionCentering:"disableOptionCentering",typeaheadDebounceInterval:"typeaheadDebounceInterval",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[za([{provide:IT,useExisting:e},{provide:cE,useExisting:e}]),Oa,La],ngContentSelectors:ex,decls:9,vars:9,consts:[["cdk-overlay-origin","","aria-hidden","true",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder"],[1,"mat-select-value-text",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-panel-wrap"],[3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(Jo(ZT),No(0,"div",0,1),Wo("click",(function(){return t.toggle()})),No(3,"div",2),Oo(4,$T,2,1,"span",3),Oo(5,JT,3,2,"span",4),Vo(),No(6,"div",5),Bo(7,"div",6),Vo(),Vo(),Oo(8,QT,4,11,"ng-template",7),Wo("backdropClick",(function(){return t.close()}))("attach",(function(){return t._onAttached()}))("detach",(function(){return t.close()}))),2&e){const e=Do(1);Ss(3),Mo("ngSwitch",t.empty),Ss(1),Mo("ngSwitchCase",!0),Ss(1),Mo("ngSwitchCase",!1),Ss(3),Mo("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[Iw,bd,wd,Rw,Sd,dd],styles:[".mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}\n"],encapsulation:2,data:{animation:[tx.transformPanelWrap,tx.transformPanel]},changeDetection:0}),e})(),dx=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[rx],imports:[[Id,Mw,pE,B_],Wb,zT,pE,B_]}),e})(),ux=(()=>{class e{transform(e){return e<=12?e:e-12}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_t({name:"timeConverter",type:e,pure:!0}),e})(),px=(()=>{class e{transform(e){return 0==e?0+e.toString():e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_t({name:"zero",type:e,pure:!0}),e})(),fx=(()=>{class e{transform(e){return e<12?"AM":"PM"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_t({name:"timeMedian",type:e,pure:!0}),e})();function mx(e,t){1&e&&(No(0,"div",3),Bo(1,"app-loading"),No(2,"p",4),wa(3,"Booking Meeting.."),Vo(),Vo())}function gx(e,t){if(1&e){const e=Ho();No(0,"span",5),Wo("click",(function(){return ei(e),Ko().closeNav()})),wa(1," close "),Vo()}}function vx(e,t){1&e&&(No(0,"div",7),No(1,"div",8),No(2,"h1"),wa(3,"Expert is not available right now"),Vo(),No(4,"h2"),wa(5,"Check Back Later"),Vo(),Vo(),Vo())}function yx(e,t){if(1&e&&(No(0,"option",34),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e.subCategory),Ss(1),Ca(" ",e.subCategory," ")}}function bx(e,t){if(1&e&&(No(0,"mat-option",34),wa(1),ql(2,"date"),Vo()),2&e){const e=t.$implicit,i=t.index,n=Ko(3);Mo("value",e),Ss(1),Ca(" ",zl(2,2,n.fullDate[i],"fullDate")," ")}}function wx(e,t){1&e&&(No(0,"div"),No(1,"span",35),wa(2," No available schedules"),Vo(),Vo())}function Sx(e,t){if(1&e&&(No(0,"span"),wa(1),ql(2,"timeConverter"),ql(3,"zero"),ql(4,"timeMedian"),Vo()),2&e){const e=Ko().$implicit;Ss(1),Ea("",Wl(2,3,e.hours),":",Wl(3,5,e.minutes)," ",Wl(4,7,e.hours),"")}}function Cx(e,t){if(1&e&&(No(0,"mat-option",34),Oo(1,Sx,5,9,"span",2),Vo()),2&e){const e=t.$implicit,i=t.index,n=Ko(4);Mo("value",i),Ss(1),Mo("ngIf",n.selectedDate.date==e.date)}}function _x(e,t){if(1&e&&(No(0,"span"),wa(1),ql(2,"timeConverter"),ql(3,"zero"),ql(4,"timeMedian"),Vo()),2&e){const e=Ko().$implicit;Ss(1),Ea("",Wl(2,3,e.hours),":",Wl(3,5,e.minutes)," ",Wl(4,7,e.hours),"")}}function Ex(e,t){if(1&e&&(No(0,"mat-option",34),Oo(1,_x,5,9,"span",2),Vo()),2&e){const e=t.$implicit,i=t.index,n=Ko(4);Mo("value",i),Ss(1),Mo("ngIf",n.selectedDate.date==e.date)}}function Tx(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"mat-form-field",36),No(2,"mat-label"),wa(3,"Start"),Vo(),No(4,"mat-select",30),Wo("valueChange",(function(t){return ei(e),Ko(3).startTimeValue=t}))("selectionChange",(function(){return ei(e),Ko(3).startSlotChange()})),Oo(5,Cx,2,2,"mat-option",18),Vo(),Vo(),No(6,"span",37),wa(7,"\xa0-\xa0"),Vo(),No(8,"mat-form-field",36),No(9,"mat-label"),wa(10,"End"),Vo(),No(11,"mat-select",38),Wo("valueChange",(function(t){return ei(e),Ko(3).endTimeValue=t})),Oo(12,Ex,2,2,"mat-option",18),Vo(),Vo(),Vo()}if(2&e){const e=Ko(3);Ss(4),Mo("value",e.startTimeValue),Ss(1),Mo("ngForOf",e.startSlots),Ss(6),Mo("value",e.endTimeValue),Ss(1),Mo("ngForOf",e.endSlots)}}function xx(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",9),No(2,"div",10),No(3,"div",11),No(4,"h1",12),wa(5,"Book Meeting"),Vo(),Vo(),Vo(),No(6,"div"),No(7,"div",13),No(8,"div",14),No(9,"div",15),No(10,"label",16),wa(11,"Choose Subject"),No(12,"sup"),wa(13,"*"),Vo(),Vo(),No(14,"select",17),Wo("ngModelChange",(function(t){return ei(e),Ko(2).bookingDetails.subject=t})),Oo(15,yx,2,2,"option",18),Vo(),Vo(),Vo(),Vo(),No(16,"div",13),No(17,"div",14),No(18,"div",15),No(19,"label",19),wa(20,"Description"),Vo(),No(21,"textarea",20,21),Wo("ngModelChange",(function(t){return ei(e),Ko(2).bookingDetails.description=t})),Vo(),No(23,"span",22),wa(24),Vo(),Vo(),Vo(),Vo(),Vo(),No(25,"div",23),Bo(26,"hr"),No(27,"div"),No(28,"label",24),wa(29,"Choose Time"),No(30,"sup"),wa(31,"*"),Vo(),Vo(),Bo(32,"p",25),No(33,"div",26),wa(34),Vo(),Vo(),No(35,"div"),No(36,"div",27),No(37,"div",28),No(38,"div"),No(39,"mat-form-field",29),No(40,"mat-label"),wa(41,"Choose Date"),Vo(),No(42,"mat-select",30),Wo("valueChange",(function(t){return ei(e),Ko(2).selectedDate=t}))("selectionChange",(function(){return ei(e),Ko(2).dateChange()})),Oo(43,bx,3,5,"mat-option",18),Vo(),Vo(),Vo(),Vo(),No(44,"div",28),Oo(45,wx,3,0,"div",2),Oo(46,Tx,13,4,"div",2),Vo(),Vo(),Vo(),Vo(),No(47,"div",31),No(48,"div",32),No(49,"button",33),Wo("click",(function(){return ei(e),Ko(2).onBooking()})),wa(50," Submit "),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(22),t=Ko(2);Ss(14),Mo("ngModel",t.bookingDetails.subject),Ss(1),Mo("ngForOf",t.areaOfExpertises),Ss(6),Mo("ngModel",t.bookingDetails.description),Ss(3),Ca("",e.value.length,"/100"),Ss(10),Sa(t.errorMessage),Ss(8),Mo("value",t.selectedDate),Ss(1),Mo("ngForOf",t.scheduleDates),Ss(2),Mo("ngIf",t.noSchedule),Ss(1),Mo("ngIf",!t.noSchedule),Ss(3),Mo("disabled",!t.bookingDetails.subject)}}function kx(e,t){if(1&e&&(No(0,"div"),Oo(1,vx,6,0,"div",6),Oo(2,xx,51,10,"div",2),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",!e.isTutorAvailable),Ss(1),Mo("ngIf",e.isTutorAvailable)}}let Ax=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c,h,d,u){this.profileService=e,this.meetingSevice=t,this.studentService=i,this.httpService=n,this.snackBar=s,this.router=r,this.dialogRef=o,this.activatedRoute=a,this.loginService=l,this.dialog=c,this.zone=h,this.winRef=d,this.webSocket=u,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]},this.areaOfExpertises=[],this.noSchedule=!1,this.isLoading=!1,this.teacherProfile=new Iy,this.meetingDetails=new Py,this.bookingDetails=new My,this.startTimeString="Start Time",this.endTimeString="End Time",this.errorMessage="",this.endSelect=-1,this.startSelect=-1,this.paymentSuccessful=!1,this.tempArray=new Ly,this.time={hour:13,minute:30},this.endTime={hour:0,minute:0},this.st={sh:-1,sm:-1},this.et={eh:-1,em:-1},this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,this.dates=[],this.scheduleDates=[],this.meridian=!0,this.date=new Date,this.settings={bigBanner:!0,timePicker:!0,format:"dd-MM-yyyy hh:mm a",defaultOpen:!1,closeOnSelect:!1},this.ScheduleTime=[],this.startSlots=[],this.startSlotsCopy=[],this.endSlots=[],this.fullDate=[],this.profilePictureUrl="../../assets/images/default-user-image.png",this.totalPrice=0,this.payableAmount=0,this.paymentResponse={},this.timeFrom=e=>{for(let t=0;t<Math.abs(e);t++)this.fullDate.push(new Date((new Date).getTime()-24*(e>=0?t:t-t-t)*60*60*1e3))},this.timeFrom2=e=>{for(let i=0;i<Math.abs(e);i++){var t=new Ox;t.date=new Date((new Date).getTime()-24*(e>=0?i:i-i-i)*60*60*1e3).toLocaleDateString("en-GB"),this.scheduleDates.push(t)}}}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.userId=e.page,this.httpService.fetchBookingTutorProfileDetails(this.userId).subscribe(e=>{this.teacherProfile=e,this.amount=parseInt(this.teacherProfile.price1),this.profilePictureUrl=this.teacherProfile.profilePictureUrl,this.areaOfExpertises=this.teacherProfile.areaOfExpertise})}),this.startDisabled=!0,this.endDisabled=!0,this.teacherProfile=this.profileService.getProfile(),"Learner"==this.loginService.getLoginType()&&this.httpService.getTutorIsAvailable(this.userId).subscribe(e=>{1==e?(this.isTutorAvailable=!0,this.timeFrom(-7),this.timeFrom2(-7),this.httpService.getTutorTimeAvailabilityTimeArray(this.userId).subscribe(e=>{this.ScheduleTime=e,this.selectedDate=this.scheduleDates[0],setTimeout(()=>{this.dateChange()},1e3),this.manipulateTimeSlots()})):0==e&&(this.isTutorAvailable=!1)})}dateChange(){0==this.selectedDate.hasElements?this.noSchedule=!0:1==this.selectedDate.hasElements&&(this.noSchedule=!1,this.fillSlots("start"))}startSlotChange(){var e;for(this.endSlots=[],e=this.startTimeValue+1;e<this.startSlotsCopy.length;e++)this.endSlots.push(this.startSlotsCopy[e])}fillSlots(e){if("start"==e){this.startSlots=[],this.endSlots=[],this.startSlotsCopy=[];for(let e of this.ScheduleTime)e.date==this.selectedDate.date&&this.startSlots.push(e);for(let e of this.ScheduleTime)e.date==this.selectedDate.date&&this.startSlotsCopy.push(e);var t;for(t=1;t<this.startSlotsCopy.length;t++)this.endSlots.push(this.startSlotsCopy[t]);this.startTimeValue=0,this.endTimeValue=0,this.startSlots.pop()}}initPay(){this.rzp=new this.winRef.nativeWindow.Razorpay(this.preparePaymentDetails()),this.rzp.open()}preparePaymentDetails(){var e=this;return{key:"rzp_live_MhUQ4PE6mDs80d",amount:(100*e.payableAmount).toString(),name:"Pay "+e.teacherProfile.fullName,image:this.teacherProfile.profilePictureUrl,handler:function(t){e.paymentHandler(t)},modal:{ondismiss:()=>{this.zone.run(()=>{console.log("payment failed"),this.closeNav()})}},prefill:{name:"FellowGenius",email:""},theme:{color:"#2874f0"}}}paymentHandler(e){this.zone.run(()=>{this.paymentSuccessful=!0,this.createBooking(e)})}calculatePrice(e){var t;for(let i of this.teacherProfile.areaOfExpertise)i.subCategory==e&&(t=i.price);this.payableAmount=this.bookingDetails.duration/60*t}createBooking(e){this.paymentSuccessful&&(this.bookingDetails.razorpay_payment_id=e.razorpay_payment_id,this.bookingDetails.razorpay_order_id=e.razorpay_order_id,this.bookingDetails.razorpay_signature=e.razorpay_signature,this.bookingDetails.amount=this.payableAmount,this.httpService.saveBooking(this.bookingDetails).subscribe(e=>{if(1==e){this.isLoading=!1;let e=JSON.stringify({entityType:"1",entityTypeId:"11",actorId:this.bookingDetails.studentId,notifierId:this.bookingDetails.tutorId,pictureUrl:this.studentService.studentProfile.profilePictureUrl,readStatus:!1});this.webSocket.sendAppointmentNotfication(e,this.bookingDetails.tutorId.toString()),this.snackBar.open("Booking submitted successfully !","close",this.config),this.dialogRef.closeAll(),this.router.navigate(["home/student-dashboard"])}}))}onBooking(){var e,t;e=this.ScheduleTime.indexOf(this.startSlots[this.startTimeValue]),t=this.ScheduleTime.indexOf(this.endSlots[this.endTimeValue]),this.timeSelector(this.startSlots[this.startTimeValue],e),this.timeSelector(this.endSlots[this.endTimeValue],t),this.bookingDetails.startTimeHour=this.st.sh,this.bookingDetails.startTimeMinute=this.st.sm,this.bookingDetails.dateOfMeeting=this.startDate,this.bookingDetails.duration=this.findDuration(this.st.sh,this.st.sm,this.et.eh,this.et.em),this.bookingDetails.endTimeHour=this.et.eh,this.bookingDetails.endTimeMinute=this.et.em,this.bookingDetails.meetingId=this.onGenerateString(10),this.bookingDetails.tutorId=this.teacherProfile.bookingId,this.bookingDetails.studentName=this.studentService.getStudentProfileDetails().fullName,this.bookingDetails.tutorName=this.teacherProfile.fullName,this.bookingDetails.tutorProfilePictureUrl=this.teacherProfile.profilePictureUrl,this.bookingDetails.studentId=this.studentService.getStudentProfileDetails().sid,this.calculatePrice(this.bookingDetails.subject),this.processingPayment=!1,this.httpService.isBookingValid(this.bookingDetails).subscribe(e=>{e?(this.isLoading=!0,this.initPay()):e||(this.errorMessage="Tutor is busy in between your selected time slots !")})}closeNav(){this.dialogRef.closeAll()}openConnectPage(){this.dialog.open(e)}timeSelector(e,t){if(this.clickedIndex=t,-1==this.st.sh&&-1==this.st.sm&&-1==this.et.eh&&-1==this.et.em)this.clickedIndex1=t,this.startDisabled=!1,this.startDate=e.date,this.st.sh=e.hours,this.st.sm=e.minutes,e.isStartDate=!0,this.startSelect=this.clickedIndex,this.startTimeString=0==this.st.sm?this.st.sh+":0"+this.st.sm:this.st.sh+":"+this.st.sm,this.errorMessage="",null!=this.tempArray.clickIndex1||null!=this.tempArray.clickIndex2||this.clickedIndex-1!=-1&&this.ScheduleTime[this.clickedIndex-1].date==e.date?null==this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex-1].date==e.date&&(this.tempArray.clickIndex1=t,this.case2a=!0,this.case4a=!0,this.case5a=!0):(this.tempArray.clickIndex1=t,this.case1a=!0,this.case3a=!0);else if(-1!=this.st.sh&&-1!=this.st.sm&&-1==this.et.eh&&-1==this.et.em)if(this.clickedIndex2=t,this.startDate==e.date)if(this.clickedIndex2-this.clickedIndex1<=6)if(this.et.eh=e.hours,this.et.em=e.minutes,60*this.et.eh+this.et.em>60*this.st.sh+this.st.sm)if(this.endDisabled=!1,e.isEndDate=!0,this.endSelect=this.clickedIndex,this.endTimeString=0==this.et.em?this.et.eh+":0"+this.et.em:this.et.eh+":"+this.et.em,this.errorMessage="",null!=this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex].date==e.date){this.tempArray.clickIndex2=t,this.case1b=!0,this.case4b=!0,this.case5b=!0,this.case1a&&this.case1b&&(this.bookingDetails.bookingCase=1);var i=t-this.tempArray.clickIndex1;1==i&&this.case4a&&this.case4b?this.bookingDetails.bookingCase=4:1!=i&&this.case5a&&this.case5b&&(this.bookingDetails.bookingCase=5)}else null!=this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex+1].date!=e.date&&(this.tempArray.clickIndex2=t,this.case2b=!0,this.case3b=!0,this.case2a&&this.case2b?this.bookingDetails.bookingCase=2:this.case3a&&this.case3b&&(this.bookingDetails.bookingCase=3));else 60*this.et.eh+this.et.em<=60*this.st.sh+this.st.sm&&(this.startDisabled=!0,this.endDisabled=!0,this.startSelect=-1,this.endSelect=-1,e.isEndDate=!1,e.isStartDate=!1,this.et.eh=-1,this.et.em=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.endTimeString="End Time",this.errorMessage="End time should be after Start time, Reset !",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1);else this.errorMessage="You can't book a tutor for more than 3 hours",this.startDisabled=!0,this.endDisabled=!0,e.isStartDate=!1,this.startSelect=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1;else this.errorMessage="Start date and End date should be same",this.startDisabled=!0,this.endDisabled=!0,e.isStartDate=!1,this.startSelect=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1;else-1!=this.st.sh&&-1!=this.st.sm&&-1!=this.et.eh&&-1!=this.et.em&&(this.endDisabled=!0,this.startDisabled=!1,this.startSelect=this.clickedIndex,this.endSelect=-1,this.startDate=e.date,this.st.sh=e.hours,this.st.sm=e.minutes,this.et.eh=-1,this.et.em=-1,e.isEndDate=!1,this.startTimeString=0==this.st.sm?this.st.sh+":0"+this.st.sm:this.st.sh+":"+this.st.sm,this.endTimeString="End Time",this.errorMessage="",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,null!=this.tempArray.clickIndex1||null!=this.tempArray.clickIndex2||this.clickedIndex-1!=-1&&this.ScheduleTime[this.clickedIndex-1].date==e.date?null==this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex-1].date==e.date&&(this.tempArray.clickIndex1=t,this.case2a=!0,this.case4a=!0,this.case5a=!0):(this.tempArray.clickIndex1=t,this.case1a=!0,this.case3a=!0))}manipulateTimeSlots(){for(let t of this.scheduleDates){var e=0;for(let i of this.ScheduleTime)if(i.date==t.date){e=1;break}1==e&&(t.hasElements=!0)}}toggleMeridian(){this.meridian=!this.meridian}findDuration(e,t,i,n){return 60*i+n-(60*e+t)}onGenerateString(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}calculateEndTime(e,t){var i;i=t%1*60;var n=e.minute;if(this.endTime.hour=e.hour+(t-t%1),this.endTime.minute=n+i,this.endTime.minute>=60){var s=this.endTime.minute-60;this.endTime.hour++,this.endTime.minute=s}return this.endTime.hour=Math.trunc(this.endTime.hour),this.endTime.minute=Math.trunc(this.endTime.minute),this.endTime}}return e.\u0275fac=function(t){return new(t||e)(Io(Ny),Io(Vy),Io(Hy),Io(Og),Io(UE),Io(Em),Io(eT),Io(gf),Io(jy),Io(eT),Io(Bc),Io(iT),Io(hT))},e.\u0275cmp=gt({type:e,selectors:[["app-connect"]],decls:4,vars:3,consts:[["style","\n      text-align: center;\n      margin-top: 27%;\n      z-index: 5;\n      height: 40vh;\n      width: 50vw;\n    ",4,"ngIf"],["class","material-icons close","style","cursor: pointer",3,"click",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","margin-top","27%","z-index","5","height","40vh","width","50vw"],[2,"margin","1rem","font-size","large"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],["style","padding: 40px",4,"ngIf"],[2,"padding","40px"],[2,"text-align","center"],[1,"connect-container"],[1,"connect-header"],[2,"margin-bottom","15px"],[2,"margin","0","color","#7d0f7d"],[1,"row"],[1,"col-md-8"],[1,"form-group"],["for","subject",2,"margin-bottom","10px"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","description",2,"margin-bottom","10px"],["id","description","rows","2","name","description","maxlength","100","ngModel","","placeholder","Enter description","required","",1,"form-control",2,"padding-top","5px",3,"ngModel","ngModelChange"],["desc",""],[1,"setLength",2,"float","right"],[1,"connect-body"],[2,"margin-bottom","10px"],[2,"font-weight","500","margin-top","5px","color","#892687","display","inline","margin-left","10px"],[1,"errorMessage"],[1,"row",2,"width","510px"],[1,"col-sm-6"],["appearance","fill"],[3,"value","valueChange","selectionChange"],[1,"connect-footer"],[2,"float","right"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[2,"font-size","large"],["appearance","fill",2,"width","95px"],[2,"font-size","25px","margin","5px"],[3,"value","valueChange"]],template:function(e,t){1&e&&(No(0,"body"),Oo(1,mx,4,0,"div",0),Oo(2,gx,2,0,"span",1),Oo(3,kx,3,2,"div",2),Vo()),2&e&&(Ss(1),Mo("ngIf",t.isLoading),Ss(1),Mo("ngIf",!t.isLoading),Ss(1),Mo("ngIf",!t.isLoading))},directives:[md,Ey,gv,zg,Qv,pd,Bg,uy,oy,WT,LT,hx,vv,Sv,hE],pipes:[Dd,ux,px,fx],styles:['.image[_ngcontent-%COMP%]{width:50vw;height:17vh}img[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%}.boxShadow[_ngcontent-%COMP%]{box-shadow:0 0 5px rgba(199,203,217,.7)}.font19[_ngcontent-%COMP%]{font-size:19px}.marginZero[_ngcontent-%COMP%]{margin:0}.paddingZero[_ngcontent-%COMP%]{padding:0}.stars-outer[_ngcontent-%COMP%]{position:relative;display:inline-block}.stars-inner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;white-space:nowrap;overflow:hidden;width:0}.stars-outer[_ngcontent-%COMP%]:before{color:#ccc}.stars-inner[_ngcontent-%COMP%]:before, .stars-outer[_ngcontent-%COMP%]:before{content:"\\f005 \\f005 \\f005 \\f005 \\f005";font-family:Font Awesome\\ 5 Free;font-weight:900}.stars-inner[_ngcontent-%COMP%]:before{color:#f8ce0b}.lessonCompleted[_ngcontent-%COMP%]{margin-top:1px;background-color:teal;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding-left:4px;padding-right:4px;color:#fff;border-radius:4px}.messageBar[_ngcontent-%COMP%]{z-index:3;width:100%;height:10vh;background-color:red}.closeButton[_ngcontent-%COMP%]{background:none;border:none;outline:none}.timeSlots[_ngcontent-%COMP%]{float:left;margin-right:10px;height:30px;border:1px solid #e30084;border-radius:25px;margin-bottom:3px;cursor:pointer!important;padding:5px 16px;line-height:20px}.selectedTimeSlots[_ngcontent-%COMP%]{float:left;z-index:2}.selectedTimeSlots[_ngcontent-%COMP%], .selectedTimeSlots[_ngcontent-%COMP%]:hover, .timeSlots[_ngcontent-%COMP%]:hover{color:#fff;background-color:#e30084}.timeSlots[_ngcontent-%COMP%]:hover{cursor:default}.timeBoxHr[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:1rem;border:0;border-top:1px solid rgba(0,0,0,.1)}.endClass[_ngcontent-%COMP%], .startClass[_ngcontent-%COMP%]{background-color:#e30084;color:#fff;z-index:2}.closeIconButton[_ngcontent-%COMP%]{background-color:#fff;border:none;position:absolute;width:30px;height:30px;top:15px;right:20px;font-size:larger;cursor:pointer;color:#8d89aa;outline:none}.closeIconButton[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:50%;color:#000}.form-group[_ngcontent-%COMP%]{position:relative}.form-control-placeholder[_ngcontent-%COMP%]{position:absolute;top:5px;left:11px;padding-left:5px;padding-right:5px;transition:all .5s;opacity:1}.form-control[_ngcontent-%COMP%]:focus + .form-control-placeholder[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:valid + .form-control-placeholder[_ngcontent-%COMP%]{font-size:90%;transform:translate3d(0,-75%,0)}label[_ngcontent-%COMP%]{background-color:#fff;margin:0}.errorMessage[_ngcontent-%COMP%]{color:red}.mat-snack-bar-container[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.connect-footer[_ngcontent-%COMP%]{margin-top:20px}.dayColumn[_ngcontent-%COMP%]{width:110px;position:inline;padding:10px;margin-right:20px;font-size:13px}@media only screen and (min-device-width:320px) and (max-device-width:812px){.dayColumn[_ngcontent-%COMP%]{width:100%}}']}),e})();class Ox{constructor(){this.hasElements=!1}}let Dx=(()=>{let e=class{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=Rd(this.platformId)}check(e){return!!this.documentIsAccessible&&(e=encodeURIComponent(e),this.getCookieRegExp(e).test(this.document.cookie))}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);const t=this.getCookieRegExp(e).exec(this.document.cookie);return this.safeDecodeURIComponent(t[1])}return""}getAll(){if(!this.documentIsAccessible)return{};const e={},t=this.document;return t.cookie&&""!==t.cookie&&t.cookie.split(";").forEach(t=>{const[i,n]=t.split("=");e[this.safeDecodeURIComponent(i.replace(/^ /,""))]=this.safeDecodeURIComponent(n)}),e}set(e,t,i,n,s,r,o="Lax"){if(!this.documentIsAccessible)return;let a=encodeURIComponent(e)+"="+encodeURIComponent(t)+";";i&&(a+="number"==typeof i?"expires="+new Date((new Date).getTime()+1e3*i*60*60*24).toUTCString()+";":"expires="+i.toUTCString()+";"),n&&(a+="path="+n+";"),s&&(a+="domain="+s+";"),!1===r&&"None"===o&&(r=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),r&&(a+="secure;"),a+="sameSite="+o+";",this.document.cookie=a}delete(e,t,i,n,s="Lax"){this.documentIsAccessible&&this.set(e,"",new Date("Thu, 01 Jan 1970 00:00:01 GMT"),t,i,n,s)}deleteAll(e,t,i,n="Lax"){if(!this.documentIsAccessible)return;const s=this.getAll();for(const r in s)s.hasOwnProperty(r)&&this.delete(r,e,t,i,n)}getCookieRegExp(e){const t=e.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch(v$){return e}}};return e.\u0275fac=function(t){return new(t||e)(Je(vh),Je(Cc))},e.\u0275prov=ue({factory:function(){return new e(Je(vh),Je(Cc))},token:e,providedIn:"root"}),e})();function Ix(e,t){if(1&e){const e=Ho();No(0,"div",8),No(1,"a",9),No(2,"span",10),Bo(3,"img",11),Vo(),No(4,"span",12),wa(5,"Become an Expert"),Vo(),Vo(),No(6,"a",13),Wo("click",(function(){return ei(e),Ko().toLoginPage()})),Bo(7,"img",14),No(8,"small"),wa(9,"Login"),Vo(),Vo(),No(10,"a",15),Wo("click",(function(){return ei(e),Ko().onSignUp()})),Bo(11,"img",16),No(12,"small"),wa(13,"Sign Up"),Vo(),Vo(),Vo()}}function Rx(e,t){if(1&e&&(No(0,"a",25),Bo(1,"i",26),wa(2),Vo()),2&e){const e=Ko(2);Ss(2),Ca("",e.studentService.getStudentProfileDetails().fullName," ")}}function Px(e,t){if(1&e&&(No(0,"a",25),Bo(1,"i",27),wa(2),Vo()),2&e){const e=Ko(2);Ss(2),Ca("",e.tutorService.getTutorDetials().fullName," ")}}function Mx(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div"),No(2,"a",17),Bo(3,"i",18),Vo(),No(4,"ul",19),No(5,"li"),Oo(6,Rx,3,1,"a",20),Vo(),No(7,"li"),Oo(8,Px,3,1,"a",20),Vo(),No(9,"li"),No(10,"a",21),Wo("click",(function(){return ei(e),Ko().toDashboard()})),Bo(11,"i",22),wa(12," Dashboard"),Vo(),Vo(),No(13,"li"),No(14,"a",23),Wo("click",(function(){return ei(e),Ko().onSignOut()})),Bo(15,"i",24),wa(16," Log Out"),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Ko();Ss(6),Mo("ngIf","Learner"==e.loginService.getLoginType()),Ss(2),Mo("ngIf","Expert"==e.loginService.getLoginType())}}let Lx=(()=>{class e{constructor(e,t,i,n,s,r){this.router=e,this.route=t,this.loginService=i,this.cookieService=n,this.studentService=s,this.tutorService=r,this.allOptions=["Tools","Marketing","Content","Project Management","Sales","E-comm","Industry Consulation","Strategy","Finance","HR","Operations","IT Support"],this.selectedOptions=["Tools","Marketing","Content","Project Management","Sales","E-comm"],this.moreOptions=["Industry Consulation","Strategy","Finance","HR","Operations","IT Support"]}ngOnInit(){this.stickyNavBar(),this.loginType=this.loginService.getLoginType(),console.log(this.loginType),"Learner"==this.loginType?this.studentProfile=this.studentService.getStudentProfileDetails():"Expert"==this.loginType&&(this.tutorProfile=this.tutorService.getTutorDetials())}stickyNavBar(){$(window).scroll((function(){$(window).scrollTop()>0?$(".navbar").addClass("sticky"):$(".navbar").removeClass("sticky")}))}toFacade(){this.router.navigate([""])}onSignUp(){this.router.navigate(["sign-up"])}toLoginPage(){this.router.navigate(["login"])}toDashboard(){"Learner"==this.loginService.getLoginType()?this.router.navigate(["home/student-dashboard"]):"Expert"==this.loginService.getLoginType()&&this.router.navigate(["home/tutor-dashboard"])}displaySelectedSubjects(e){console.log(e),null!=e&&this.router.navigate(["search-results"],{queryParams:{subject:e}})}onSignOut(){let e=this.route.snapshot.routeConfig.component.name;this.cookieService.delete("token"),this.cookieService.delete("userId"),this.loginService.setLoginType(null),this.loginService.setTrType(null),"ExpertProfileComponent"!=e&&this.router.navigate([""])}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(gf),Io(jy),Io(Dx),Io(Hy),Io(aT))},e.\u0275cmp=gt({type:e,selectors:[["app-nav-bar"]],decls:9,vars:2,consts:[[1,"header"],[1,"navbar","navbar-dark"],[1,"container"],["href","index.html",1,"navbar-brand"],["src","../../assets/images/fellow genius logo.svg","alt","logo"],[1,"nav","navbar-nav"],["style","display: flex;",4,"ngIf"],[4,"ngIf"],[2,"display","flex"],["href","",1,"expert_btn","hdr_btn"],[1,"btn_icon"],["src","../../assets/images/expert-icon.svg","alt","#"],[1,"btn_txt"],["href","javascript:;","data-bs-toggle","tooltip","data-placement","bottom","title","Login",1,"login_btn","hdr_btn",3,"click"],["src","../../assets/images/header-icon-1.svg","alt","#"],["href","javascript:;","data-bs-toggle","tooltip","data-placement","bottom","title","Sign Up",1,"register_btn","hdr_btn",3,"click"],["src","../../assets/images/header-icon-2.svg","alt","#"],["data-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","user_profile"],[1,"fas","fa-user-circle"],["aria-labelledby","settingDropdown",1,"dropdown-menu"],["class","dropdown-item",4,"ngIf"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"fas","fa-tachometer-alt"],["href","#",1,"dropdown-item",3,"click"],[1,"fas","fa-sign-out-alt","fa-fw"],[1,"dropdown-item"],[1,"far","fa-user-circle",2,"margin-right","5px"],[1,"far","fa-user-circle"]],template:function(e,t){1&e&&(No(0,"body"),No(1,"header",0),No(2,"nav",1),No(3,"div",2),No(4,"a",3),Bo(5,"img",4),Vo(),No(6,"ul",5),Oo(7,Ix,14,0,"div",6),Oo(8,Mx,17,2,"div",7),Vo(),Vo(),Vo(),Vo(),Vo()),2&e&&(Ss(7),Mo("ngIf",null==t.loginService.getLoginType()),Ss(1),Mo("ngIf",null!=t.loginService.getLoginType()))},directives:[md],styles:[""]}),e})(),Nx=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-footer"]],decls:57,vars:0,consts:[[1,"wi_full","py_5"],[1,"container"],[1,"row"],[1,"col-12","col-lg-5"],[1,"ftr_logo"],["src","../../assets/images/footer-logo.svg","alt","#",1,"btm_logo"],[1,"col-12","col-md-7","col-lg-4"],[1,"ftr_nav"],["href","javascript:;","routerLink","/about-us"],["href","javascript:;","routerLink","/contact-us"],["href","javascript:;","routerLink","/faq"],["href","javascript:;","routerLink","/terms-and-conditions"],["href","javascript:;","routerLink","/privacy-policy"],[1,"col-12","col-md-5","col-lg-3"],["href","javascript:;","routerLink","/blogs"],["href","javascript:;","routerLink","/resource-videos"],["href","javascript:;","routerLink","/resource-events"],[1,"social_links"],["href",""],["src","../../assets/images/Linkedin.svg","alt","#"],["src","../../assets/images/Twitter.svg","alt","#"],["src","../../assets/images/Youtube.svg","alt","#"],["src","../../assets/images/instagram.svg","alt","#"],[1,"col-12","text-center"],[1,"cpyrgt_txt"],["href","https://cresttechnosoft.com/","target","_blank"]],template:function(e,t){1&e&&(No(0,"body"),No(1,"footer",0),No(2,"div",1),No(3,"div",2),No(4,"div",3),No(5,"div",4),Bo(6,"img",5),No(7,"p"),wa(8,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum"),Vo(),Vo(),Vo(),No(9,"div",6),No(10,"div",7),No(11,"h5"),wa(12,"Company"),Vo(),No(13,"ul"),No(14,"li"),No(15,"a",8),wa(16,"About us"),Vo(),Vo(),No(17,"li"),No(18,"a",9),wa(19,"Contact us"),Vo(),Vo(),No(20,"li"),No(21,"a",10),wa(22,"FAQ"),Vo(),Vo(),No(23,"li"),No(24,"a",11),wa(25,"Terms and Conditions"),Vo(),Vo(),No(26,"li"),No(27,"a",12),wa(28,"Privacy Policy"),Vo(),Vo(),Vo(),Vo(),Vo(),No(29,"div",13),No(30,"div",7),No(31,"h5"),wa(32,"Resources"),Vo(),No(33,"ul"),No(34,"li"),No(35,"a",14),wa(36,"Blogs"),Vo(),Vo(),No(37,"li"),No(38,"a",15),wa(39,"Video"),Vo(),Vo(),No(40,"li"),No(41,"a",16),wa(42,"Events"),Vo(),Vo(),Vo(),No(43,"div",17),No(44,"a",18),Bo(45,"img",19),Vo(),No(46,"a",18),Bo(47,"img",20),Vo(),No(48,"a",18),Bo(49,"img",21),Vo(),No(50,"a",18),Bo(51,"img",22),Vo(),Vo(),Vo(),Vo(),No(52,"div",23),No(53,"div",24),wa(54,"\xa9 Copyright 2021 | Designed by "),No(55,"a",25),wa(56,"Cresttechnosoft"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo())},directives:[xm],styles:["a[_ngcontent-%COMP%]{color:#fff}"]}),e})(),Vx=(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-terms-and-conditions"]],decls:225,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","privacy_sec"],[1,"container"],[1,"row"],[1,"col-12","col-md-4","col-lg-3"],[1,"policy_Left_s"],[1,"MenusNav_Style"],[1,""],["routerLink","/privacy-policy",1,"Link_Styled"],[1,"active"],["routerLink","/terms-and-conditions",1,"Link_Styled"],["routerLink","/refund-policy",1,"Link_Styled"],[1,"col-12","col-md-8","col-lg-9"],[1,"policy_Right_s"],[1,"terms_wrapper"],["href","fellowgeniuscc@gmail.com"],["href","mafellowgeniuscc@gmail.com"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"ul",6),No(9,"li",7),No(10,"a",8),No(11,"span"),wa(12,"Privacy Policy"),Vo(),Vo(),Vo(),No(13,"li",9),No(14,"a",10),No(15,"span"),wa(16,"Terms and Conditions"),Vo(),Vo(),Vo(),No(17,"li",7),No(18,"a",11),No(19,"span"),wa(20,"Refund Policy"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(21,"div",12),No(22,"div",13),No(23,"div",14),No(24,"h2"),wa(25,"Terms & Conditions"),Vo(),No(26,"p"),wa(27,"These Terms & Conditions (\u201cTerms\u201d) of (a) use of our website www.fellowgenius.com (\u201cWebsite\u201d), our applications (\u201cApplication\u201d) or any products or services in connection with the Application/, Website/products (\u201cServices\u201d) or (b) any modes of registrations or usage of products, including through SD cards, tablets or other storage/transmitting device are between Think & Learn Private Limited (\u201cCompany/We/Us/Our\u201d) and its users (\u201cUser/You/Your\u201d)."),Vo(),No(28,"p"),wa(29,"These Terms constitute an electronic record in accordance with the provisions of the Information Technology Act, 2000 and the Information Technology (Intermediaries guidelines) Rules, 2011 thereunder, as amended from time to time."),Vo(),No(30,"p"),wa(31,"Please read the Terms and the privacy policy of the Company (\u201cPrivacy Policy\u201d) with respect to registration with us, the use of the Application, Website, Services and products carefully before using the Application, Website, Services or products. In the event of any discrepancy between the Terms and any other policies with respect to the Application or Website or Services or products, the provisions of the Terms shall prevail."),Vo(),No(32,"p"),wa(33,"Your use/access/browsing of the Application or Website or the Services or products or registration (with or without payment/with or without subscription) through any means shall signify Your acceptance of the Terms and Your agreement to be legally bound by the same."),Vo(),No(34,"p"),wa(35,"If you do not agree with the Terms or the Privacy Policy, please do not use the Application or Website or avail the Services or products. Any access to our Services/Application/products through registrations/subscription is non-transferable."),Vo(),No(36,"ul"),No(37,"li"),No(38,"span"),wa(39,"Except as mentioned below, all information, content, material, trademarks, services marks, trade names, and trade secrets including but not limited to the software, text, images, graphics, video, script and audio, contained in the Application, Website, Services and products are proprietary property of the Company (\u201cProprietary Information\u201d). No Proprietary Information may be copied, downloaded, reproduced, modified, republished, uploaded, posted, transmitted or distributed in any way without obtaining prior written permission from the Company and nothing on this Application or Website or Services shall be or products deemed to confer a license of or any other right, interest or title to or in any of the intellectual property rights belonging to the Company, to the User. You may own the medium on which the information, content or materials resides, but the Company shall always retain full and complete title to the information, content or materials and all intellectual property rights inserted by the Company on such medium. Certain contents on the Website may belong to third parties. Such contents have been reproduced after taking prior consent from said party and all rights relating to such content will remain with such third party. Further, you recognize and acknowledge that the ownership of all trademarks, copyright, logos, service marks and other intellectual property owned by any third party shall continue to vest with such party and You are not permitted to use the same without the consent of the respective third party."),Vo(),Vo(),No(40,"li"),No(41,"span"),wa(42,"Your use of our products, Website, Application and Services is solely for Your personal and non-commercial use. Any use of the Application, Website, Services or products or their contents other than for personal purposes is prohibited. Your personal and non-commercial use of this Application, Website, products and / or our Services shall be subjected to the following restrictions:"),Vo(),Vo(),No(43,"ol"),No(44,"li"),wa(45,"You may not decompile, reverse engineer, or disassemble the contents of the Application and / or our Website and/or Services/ products or modify, copy, distribute, transmit, display, perform, reproduce, publish, license, create derivative works from, transfer, or sell any information or software obtained from the Application and / or our Website and/or Services/products, or remove any copyright, trademark registration, or other proprietary notices from the contents of the Application and / or and / or our Website and/or Services/products."),Vo(),No(46,"li"),wa(47,"You will not (a) use this Application and / or our Website and/or any of our product/s or Service/s for commercial purposes of any kind, or (b) advertise or sell the Application or any products, Services or domain names or otherwise (whether or not for profit), or solicit others (including, without limitation, solicitations for contributions or donations) or use any public forum for commercial purposes of any kind, or (c) use the Application and / or Website/our products and Services in any way that is unlawful, or harms the Company or any other person or entity as determined by the Company."),Vo(),No(48,"li"),wa(49,"No User shall be permitted to perform any of the following prohibited activities while availing our Services:"),Vo(),No(50,"ul"),No(51,"li"),No(52,"span"),wa(53,"Making available any content that is misleading, unlawful, harmful, threatening, abusive, tortious, defamatory, libellous, vulgar, obscene, child-pornographic, lewd, lascivious, profane, invasive of another's privacy, hateful, or racially, ethnically or otherwise objectionable."),Vo(),Vo(),No(54,"li"),No(55,"span"),wa(56,"Stalking, intimidating and/or harassing another and/or inciting other to commit violence."),Vo(),Vo(),No(57,"li"),No(58,"span"),wa(59,"Transmitting material that encourages anyone to commit a criminal offence, that results in civil liability or otherwise breaches any relevant laws, regulations or code of practice."),Vo(),Vo(),No(60,"li"),No(61,"span"),wa(62,"Interfering with any other person's use or enjoyment of the Application/Website/Services."),Vo(),Vo(),No(63,"li"),No(64,"span"),wa(65,"Making, transmitting or storing electronic copies of materials protected by copyright without the permission of the owner, committing any act that amounts to the infringement of intellectual property or making available any material that infringes any intellectual property rights or other proprietary rights of anyone else."),Vo(),Vo(),No(66,"li"),No(67,"span"),wa(68,"Make available any content or material that You do not have a right to make available under any law or contractual or fiduciary relationship unless You own or control the rights thereto or have received all necessary consents for such use of the content."),Vo(),Vo(),No(69,"li"),No(70,"span"),wa(71,"Impersonate any person or entity, or falsely state or otherwise misrepresent Your affiliation with a person or entity."),Vo(),Vo(),No(72,"li"),No(73,"span"),wa(74,"Post, transmit or make available any material that contains viruses, trojan horses, worms, spyware, time bombs, cancelbots, or other computer programming routines, code, files or such other programs that may harm the Application/services, interests or rights of other users or limit the functionality of any computer software, hardware or telecommunications, or that may harvest or collect any data or personal information about other Users without their consent."),Vo(),Vo(),No(75,"li"),No(76,"span"),wa(77,"Access or use the Application/Website/Services/products in any manner that could damage, disable, overburden or impair any of the Application's/Website's servers or the networks connected to any of the servers on which the Application/Website is hosted."),Vo(),Vo(),No(78,"li"),No(79,"span"),wa(80,"Intentionally or unintentionally interfere with or disrupt the services or violate any applicable laws related to the access to or use of the Application/Website/Services/products, violate any requirements, procedures, policies or regulations of networks connected to the Application/Website/Services/products, or engage in any activity prohibited by these Terms."),Vo(),Vo(),No(81,"li"),No(82,"span"),wa(83,"Disrupt or interfere with the security of, or otherwise cause harm to, the Application/Website/Services/products, materials, systems resources, or gain unauthorized access to user accounts, passwords, servers or networks connected to or accessible through the Application/Website/Services/products or any affiliated or linked sites."),Vo(),Vo(),No(84,"li"),No(85,"span"),wa(86,"Interfere with or inhibit any user from using and enjoying access to the Application/Website/ Services/products, or other affiliated sites, or engage in disruptive attacks such as denial of service attack on the Application/Website/Services/products."),Vo(),Vo(),No(87,"li"),No(88,"span"),wa(89,"Use deep-links, page-scrape, robot, spider or other automatic device, program, algorithm or methodology, or any similar or equivalent manual process, to increase traffic to the Application/Website/Services/products, to access, acquire, copy or monitor any portion of the Application /Website/Services/products, or in any way reproduce or circumvent the navigational structure or presentation of the Application, or any content, to obtain or attempt to obtain any content, documents or information through any means not specifically made available through the Application/ Website/Services/products;"),Vo(),Vo(),No(90,"li"),No(91,"span"),wa(92,"Alter or modify any part of the Services."),Vo(),Vo(),No(93,"li"),No(94,"span"),wa(95,"Use the Services for purposes that are not permitted by: (I) these Terms; and (ii) any applicable law, regulation or generally accepted practices or guidelines in the relevant jurisdiction; or"),Vo(),Vo(),No(96,"li"),No(97,"span"),wa(98,"Violate any of the terms specified under the Terms for the use of the Application /Website/Services/products."),Vo(),Vo(),Vo(),Vo(),No(99,"li"),No(100,"span"),wa(101,"By submitting content on or through the Services (your \u201cMaterial\u201d), you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, copy, reproduce, process, adapt, modify, publish, transmit, display and distribute such Material in any and all media or distribution methods (now known or later developed) and to associate your Material with you, except as described below. You agree that others may use Your Material in the same way as any other content available through the Services. Other users of the Services may fork, tweak and repurpose your Material in accordance with these Terms. If you delete your user account, your Material and name may remain available through the Services."),Vo(),Vo(),No(102,"li"),No(103,"span"),wa(104,"In the preparation of the Application/Website/Services/products and contents therein, every effort has been made to offer the most current, correct, and clearly expressed information possible. Nevertheless, inadvertent errors may occur. But without limiting anything here, the Company disclaims any responsibility for any errors and accuracy of the information that may be contained in the Application. Any feedback from User is most welcome to make the Application and contents thereof error free and user friendly. Company also reserves the right and discretion to make any changes/corrections or withdraw/add contents at any time without notice. Neither the Company nor any third parties provide any warranty or guarantee as to the accuracy, timeliness, performance, completeness or suitability of the information and materials found or offered on Application/Website/Services/products for any particular purpose. You acknowledge that such information and materials may contain inaccuracies or errors and we expressly exclude liability for any such inaccuracies or errors to the fullest extent permitted by law."),Vo(),Vo(),No(105,"li"),No(106,"span"),wa(107,"Our website provides Users with access to compiled educational information and related sources. Such information is provided on an As Is basis and We assume no liability for the accuracy or completeness or use or non-obsolescence of such information. We shall not be liable to update or ensure continuity of such information contained on the Website. We would not be responsible for any errors, which might appear in such information, which is compiled from third party sources or for any unavailability of such information. From time to time the Website may also include links to other websites. These links are provided for your convenience to provide further information. They do not signify that we endorse the website(s). We have no responsibility for the content of the linked website(s). You may not create a link to the Website from another website or document without the Company's prior written consent."),Vo(),Vo(),No(108,"li"),No(109,"span"),wa(110,"The contents of the Application/Services/products are developed on the concepts covered in the structured curriculum syllabus prescribed for students of various courses. The usage of the Application/Services/products is not endorsed as a substitution to the curriculum-based education provided by the educational institutions but is intended to supplement the same by explaining and presenting the concepts in a manner enabling easy understanding. The basic definitions and formulae of the subject matter would remain the same. The Company acknowledges that there are various means of delivering structured curriculum pedagogy and inclusion of methods in the Application/Services/products does not imply endorsement of any method nor exclusion imply disapproval. Subscription to the Application or usage of our Services/Website/products does not in any manner guarantee admission to any educational institutions or passing of any exams or achievement of any specified percentage of marks in any examinations."),Vo(),Vo(),No(111,"li"),No(112,"span"),wa(113,"Certain contents in the Application/Services/Website/products (relating to assistance in preparations for administrative services) may contain opinions and views. The Company shall not be responsible for such opinions or any claims resulting from them. Further, the Company makes no warranties or representations whatsoever regarding the quality, content, completeness, or adequacy of such information and data."),Vo(),Vo(),No(114,"li"),No(115,"span"),wa(116,"Some parts of the Services are interactive, and we encourage contributions by Users, which may or may not be subject to editorial control prior to being posted. The Company accepts no responsibility or liability for any material communicated by third parties in this way. The Company reserves the right at its sole discretion to remove, review, edit or delete any content. Similarly, we will not be responsible or liable for any content uploaded by Users directly on the Website, irrespective of whether We have certified any answer uploaded by the User. We would not be responsible to verify whether such questions/answers or contents placed by any User contain infringing materials or not."),Vo(),Vo(),No(117,"li"),No(118,"span"),wa(119,"The Company (including but not limited to its subsidiaries/affiliates) may, based on any form of access to the Application (including free download/trials) or Services or Website or registrations through any source whatsoever, contact the User through SMS, email and call, to give information about their offerings and products as well as notifications on various important updates and/or to seek permission for demonstration of its products. The User expressly grants such permission to contact him/her through telephone, SMS, e-mail and holds the Company (including but not limited to its subsidiaries/affiliates) indemnified against any liabilities including financial penalties, damages, expenses in case the User's mobile number is registered with Do not Call (DNC) database. By registering yourself, you agree to make your contact details available to Our employees, associates, subsidiaries, affiliates and partners so that you may be contacted for education information, offerings and promotions through telephone, SMS, email etc."),Vo(),Vo(),No(120,"li"),No(121,"span"),wa(122,"While the Company may, based on the User's confirmation, facilitate the demonstration of its products at the location sought by the User, the User acknowledges that he/she has not been induced by any statements or representations of any person with respect to the quality or conditions of the products and that User has relied solely on the investigations, examinations and inspections as the User has chosen to make and that the Company has afforded the User the opportunity for full and complete investigations, examinations and inspections."),Vo(),Vo(),No(123,"li"),No(124,"span"),wa(125,"Upon registration through any means whatsoever, the Company may contact You through the registered mobile number or e-mail or any other mobile number or contact number or email provided by You to enable effective provision of Services. The User expressly permits the Company to contact him/her and the student utilising the Services, through the above mentioned means at any time post registration. .-. Further, the Company shall have the right to monitor the download and usage of the Application/Services/products and the contents thereof by the User/student, to analyse such usage and discuss the same with the User/student to enable effective and efficient usage of the Services. The User expressly permits the Company to clear the doubts of the student using the Application/Services/online portal by answering the questions placed before it, providing study plans, informing of the progress, providing feedback, communicating with the student and mentoring the student through telephone or e-mail on express consent of the legal guardian/parent of the User or through any other forum."),Vo(),Vo(),No(126,"li"),No(127,"span"),wa(128,"While the Company has made efforts to train the personnel engaged in the sales and services relating to its products to enable quality control, it makes no warranties or representations whatsoever regarding the quality and competence of such personnel and would not be responsible for any deviant behaviour of any such personnel. Any feedback from User relating to the same is most welcome and Company reserves the right and discretion to take any action in this regard."),Vo(),Vo(),No(129,"li"),No(130,"span"),wa(131,"Access to certain elements of the Services including doubt clearance, mentoring services etc may be subject to separate terms, conditions and fair usage policy. The Company reserves the right to determine the criteria for provision of various elements of Services to the different categories of Users based on its policies. Hence, subscription to the Application/products or registrations do not automatically entitle the User to all elements of Services provided by the Company and the Company shall be entitled to exercise its discretion while providing access to and determining continuity of certain elements of Services. We reserve the right to extend, cancel, discontinue, prematurely withdraw or modify any of Our Services at Our discretion."),Vo(),Vo(),No(132,"li"),No(133,"span"),wa(134,"The Company's products and / or Services, including the Application and content, are compatible only with certain devices/tablets/instruments/hardware. The Company shall not be obligated to provide workable products and / or services for any instruments that are not recognized by the Company or those instruments that may be purchased from any third party which are not compatible with the Company's products and Services The company reserves the right to upgrade the table/ type of compatible devices as required from time to time."),Vo(),Vo(),No(135,"li"),No(136,"span"),wa(137,"The Company shall have no responsibility for any loss or damage caused to tablet or any other hardware and / or software and/or instrument, including loss of data or effect on the processing speed, resulting from Your use of our products and Services."),Vo(),Vo(),No(138,"li"),No(139,"span"),wa(140,"You must specify the address to which the shipment has to be made at the time of purchase. All product(s) shall be delivered directly to the address as specified at the point of ordering and You cannot, under any circumstances whatsoever, change the address after the order is processed. In case of any change in the address, you need to specify the same to us in writing well in advance to the shipping date. Any inconsistencies in name or address will result in non-delivery of the product(s)."),Vo(),Vo(),No(141,"li"),No(142,"span"),wa(143,"You acknowledge that the Company is not the manufacturer of the instrument/medium/hardware and hence, any defect relating to the same shall be reported to the manufacturer whose details shall be specified on the packaging and the Company shall not be in any manner responsible for the same. The Company does not provide any guarantee or warranty relating to the instrument/medium/hardware."),Vo(),Vo(),No(144,"li"),No(145,"span"),wa(146,"To access the Services and to avail the use of the Application/products, you shall be required to register yourself with the Application/Services/products and maintain an account with the Application/Services/products. You will be required to furnish certain information and details, including Your name, mobile number, e-mail address, residential address, grade/class of the student, school name, payment information (credit/debit card details) if required, and any other information deemed necessary by the Application. With respect to the provision of information, the following may be noted: -"),Vo(),Vo(),No(147,"li"),No(148,"span"),wa(149,"It is Your sole responsibility to ensure that the account information provided by You is accurate, complete and latest."),Vo(),Vo(),No(150,"li"),No(151,"span"),wa(152,"You shall be responsible for maintaining the confidentiality of the account information and for all activities that occur under Your account. You agree to (a) ensure that You successfully log out from Your account at the end of each session; and (b) immediately notify the Company of any unauthorized use of Your account. If there is reason to believe that there is likely to be a breach of security or misuse of Your account, we may request You to change the password or we may suspend Your account without any liability to the Company, for such period as we deem appropriate in the circumstances. We shall not be liable for any loss or damage arising from Your failure to comply with this provision."),Vo(),Vo(),No(153,"li"),No(154,"span"),wa(155,"You acknowledge that Your ability to use Your account is dependent upon external factors such as internet service providers and internet network availability and the Company cannot guarantee accessibility to the Application at all times. In addition to the disclaimers set forth in the Terms, the Company shall not be liable to You for any damages arising from Your inability to log into Your account and access the services of the Application at any time."),Vo(),Vo(),No(156,"li"),No(157,"span"),wa(158,'Persons who are "competent/capable" of contracting within the meaning of the Indian Contract Act, 1872 shall be eligible to register for the Application and all Our products or Services. Persons who are minors, un-discharged insolvents etc. are not eligible to register for Our products or Services. As a minor if You wish to use Our products or Services, such use shall be made available to You by Your legal guardian or parents, who has agreed to these Terms. In the event a minor utilizes the Application/Website/Services, it is assumed that he/she has obtained the consent of the legal guardian or parents and such use is made available by the legal guardian or parents. The Company will not be responsible for any consequence that arises as a result of misuse of any kind of Our Application or any of Our products or Services that may occur by virtue of any person including a minor registering for the Services/products provided. By using the products or Services You warrant that all the data provided by You is accurate and complete and that student using the Application has obtained the consent of parent/legal guardian (in case of minors). The Company reserves the right to terminate Your subscription and / or refuse to provide You with access to the products or Services if it is discovered that You are under the age of 18 (eighteen) years and the consent to use the products or Services is not made by Your parent/legal guardian or any information provided by You is inaccurate. You acknowledge that the Company does not have the responsibility to ensure that You conform to the aforesaid eligibility criteria. It shall be Your sole responsibility to ensure that You meet the required qualification. Any persons under the age of 18 (eighteen) should seek the consent of their parents/legal guardians before providing any Information about themselves or their parents and other family members on the Application.'),Vo(),Vo(),No(159,"li"),No(160,"span"),wa(161,"You agree to defend, indemnify and hold harmless the Company, its officers, directors, employees and agents, from and against any and all claims, damages, obligations, losses, liabilities, costs or debt, and expenses (including but not limited to attorney's fees) arising from: (I) Your use of and access of the Application/Website/Services; (ii) Your violation of any term of these Terms or any other policy of the Company; (iii) Your violation of any third party right, including without limitation, any copyright, property, or privacy right; or (iv) any claim that Your use of the Application/Website/Services has caused damage to a third party. This defence and indemnification obligation will survive these Terms."),Vo(),Vo(),No(162,"li"),No(163,"span"),wa(164,"In no event shall the Company, its officers, directors, employees, partners or agents be liable to You or any third party for any special, incidental, indirect, consequential or punitive damages whatsoever, including those resulting from loss of use, data or profits or any other claim arising out, of or in connection with, Your use of, or access to, the Application."),Vo(),Vo(),No(165,"li"),No(166,"span"),wa(167,"In the event of Your breach of these Terms, you agree that the Company will be irreparably harmed and may not have an adequate remedy in money or damages. The Company, therefore, shall be entitled in such event to obtain an injunction against such a breach from any court of competent jurisdiction. The Company's right to obtain such relief shall not limit its right to obtain other remedies."),Vo(),Vo(),No(168,"li"),No(169,"span"),wa(170,"Any violation by You of the terms of this Clause may result in immediate suspension or termination of Your Accounts apart from any legal remedy that the Company can avail. In such instances, the Company may also disclose Your Account Information if required by any Governmental or legal authority. You understand that the violation of these Terms could also result in civil or criminal liability under applicable laws."),Vo(),Vo(),No(171,"li"),No(172,"span"),wa(173,"The Terms shall be governed by and construed in accordance with the laws of India, without regard to conflict of law principles. Further, the Terms shall be subject to the exclusive jurisdiction of the competent courts located in Bangalore and You hereby accede to and accept the jurisdiction of such courts."),Vo(),Vo(),No(174,"li"),No(175,"span"),wa(176,"The Company has the right to change modify, suspend, or discontinue and/or eliminate any aspect(s), features or functionality of the Application or the Services as it deems fit at any time without notice. Further, the Company has the right to amend these Terms from time to time without prior notice to you. The Company makes no commitment, express or implied, to maintain or continue any aspect of the Application. You agree that the Company shall not be liable to You or any third party for any modification, suspension or discontinuance of the Application/Services. All prices are subject to change without notice."),Vo(),Vo(),No(177,"li"),No(178,"span"),wa(179,'DISCLAIMER: THIS WEBSITE, THE APPLICATION AND THE SERVICES ARE PROVIDED ON AN "AS IS" BASIS WITH ALL FAULTS AND WITHOUT ANY WARRANTY OF ANY KIND. THE COMPANY HEREBY DISCLAIMS ALL WARRANTIES AND CONDITIONS WITH REGARD TO THE WEBSITE, APPLICATION/PRODUCTS AND THE SERVICES, INCLUDING WITHOUT LIMITATION, ALL IMPLIED WARRANTIES AND CONDITIONS OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, ACCURACY, TIMELINESS. PERFORMANCE, COMPLETENESS, SUITABILITY AND NON-INFRINGEMENT. ADDITIONALLY, THE COMPANY SHALL NOT BE LIABLE FOR ANY DAMAGES ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SITE, OR THE APPLICATION OR THE SERVICES. YOUR USE OF ANY INFORMATION OR MATERIALS ON THIS WEBSITE/APPLICATION/SERVICES/PRODUCTS IS ENTIRELY AT YOUR OWN RISK, FOR WHICH WE SHALL NOT BE LIABLE. IT SHALL BE YOUR OWN RESPONSIBILITY TO ENSURE THAT SERVICES PROVIDED BY US MEET YOUR SPECIFIC REQUIREMENTS.'),Vo(),Vo(),Vo(),No(180,"h3"),wa(181,"General Provisions:"),Vo(),No(182,"ol"),No(183,"li"),No(184,"strong"),wa(185,"Notice:"),Vo(),wa(186," All notices served by the Company shall be provided via email to Your account or as a general notification on the Application. Any notice to be provided to the Company should be sent to "),No(187,"a",15),wa(188,"fellowgeniuscc@gmail.com"),Vo(),Vo(),No(189,"li"),No(190,"strong"),wa(191,"Entire Agreement:"),Vo(),wa(192," The Terms, along with the Privacy Policy, and any other guidelines made applicable to the Application from time to time, constitute the entire agreement between the Company and You with respect to Your access to or use of the Application, Website and the Services thereof."),Vo(),No(193,"li"),No(194,"strong"),wa(195,"Assignment:"),Vo(),wa(196," You cannot assign or otherwise transfer Your obligations under the Terms, or any right granted hereunder to any third party. The Company's rights under the Terms are freely transferable by the Company to any third parties without the requirement of seeking Your consent."),Vo(),No(197,"li"),No(198,"strong"),wa(199,"Severability:"),Vo(),wa(200," If, for any reason, a court of competent jurisdiction finds any provision of the Terms, or portion thereof, to be unenforceable, that provision shall be enforced to the maximum extent permissible to give effect to the intent of the parties as reflected by that provision, and the remainder of the Terms shall continue in full force and effect."),Vo(),No(201,"li"),No(202,"strong"),wa(203,"Waiver:"),Vo(),wa(204," Any failure by the Company to enforce or exercise any provision of the Terms, or any related right, shall not constitute a waiver by the Company of that provision or right."),Vo(),No(205,"li"),No(206,"strong"),wa(207,"Relationship:"),Vo(),wa(208," You acknowledge that Your participation on the Application, does not make You an employee or agency or partnership or joint venture or franchise of the Company."),Vo(),No(209,"li"),wa(210,"The Company provides these Terms so that You are aware of the terms that apply to your use of the Website/Application and Services. You acknowledge that, the Company has given You a reasonable opportunity to review these Terms and that You have agreed to them."),Vo(),Vo(),No(211,"h3"),wa(212,"Feedback:"),Vo(),No(213,"ol"),No(214,"li"),wa(215,"Any feedback You provide with respect to the Application shall be deemed to be non-confidential. The Application shall be free to use such information on an unrestricted basis. Further, by submitting the feedback, You represent and warrant that (I) Your feedback does not contain confidential or proprietary information of You or of third parties; (ii) the Company is not under any obligation of confidentiality, express or implied, with respect to the feedback; (iii) the Application may have something similar to the feedback already under consideration or in development; and (iv) You are not entitled to any compensation or reimbursement of any kind from the Company for the feedback under any circumstances, unless specified."),Vo(),No(216,"li"),wa(217,"Under no circumstances shall the Company be held responsible in any manner for any content provided by other users even such content is offensive, hurtful or offensive. Please exercise caution while accessing the Application."),Vo(),Vo(),No(218,"h3"),wa(219,"Customer Care:"),Vo(),No(220,"p"),wa(221,"We make all best endeavours to provide You with a pleasant experience. In the unlikely event that You face any issues, please contact us at "),No(222,"a",16),wa(223,"fellowgeniuscc@gmail.com"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(224,"app-footer"),Vo())},directives:[Lx,xm,Nx],styles:[""]}),e})();var Bx=n("J5zx");class Fx{}class jx{}class Hx{}class Ux{constructor(e){this.name=e}}let qx=(()=>{class e{constructor(){}setSocialDetails(e){this.socialDetails=e}getSocialDetails(){return this.socialDetails}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Wx=["input"],zx=function(){return{enterDuration:150}},Gx=["*"],Yx=new He("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let $x=0;const Kx={provide:Pg,useExisting:xe(()=>Jx),multi:!0};class Xx{constructor(e,t){this.source=e,this.value=t}}let Jx=(()=>{class e{constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+$x++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new $l}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=Uy(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=Uy(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(e=>{e.checked=this.value===e.value,e.checked&&(this._selected=e)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Xx(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(Io(Kr))},e.\u0275dir=Ct({type:e,selectors:[["mat-radio-group"]],contentQueries:function(e,t,i){var n;1&e&&cc(i,tk,!0),2&e&&rc(n=uc())&&(t._radios=n)},hostAttrs:["role","radiogroup",1,"mat-radio-group"],inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[za([Kx])]}),e})();class Qx{constructor(e){this._elementRef=e}}const Zx=H_(U_(Qx));let ek=(()=>{class e extends Zx{constructor(e,t,i,n,s,r,o){super(t),this._changeDetector=i,this._focusMonitor=n,this._radioDispatcher=s,this._animationMode=r,this._providerOverride=o,this._uniqueId="mat-radio-"+ ++$x,this.id=this._uniqueId,this.change=new $l,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=e,this._removeUniqueSelectionListener=s.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const t=Uy(e);this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(Uy(e))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=Uy(e)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return(this.id||this._uniqueId)+"-input"}focus(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Xx(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputChange(e){e.stopPropagation();const t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(Io(Jx,8),Io(Ka),Io(Kr),Io(tS),Io(Hb),Io(T_,8),Io(Yx,8))},e.\u0275dir=Ct({type:e,viewQuery:function(e,t){var i;1&e&&ac(Wx,!0),2&e&&rc(i=uc())&&(t._inputElement=i.first)},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[Oa]}),e})(),tk=(()=>{class e extends ek{}return e.\u0275fac=function(t){return ik(t||e)},e.\u0275cmp=gt({type:e,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(e,t){1&e&&Wo("focus",(function(){return t._inputElement.nativeElement.focus()})),2&e&&(ko("tabindex",-1)("id",t.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),aa("mat-radio-checked",t.checked)("mat-radio-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-primary","primary"===t.color)("mat-accent","accent"===t.color)("mat-warn","warn"===t.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[Oa],ngContentSelectors:Gx,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(e,t){if(1&e&&(Jo(),No(0,"label",0,1),No(2,"div",2),Bo(3,"div",3),Bo(4,"div",4),No(5,"input",5,6),Wo("change",(function(e){return t._onInputChange(e)}))("click",(function(e){return t._onInputClick(e)})),Vo(),No(7,"div",7),Bo(8,"div",8),Vo(),Vo(),No(9,"div",9),No(10,"span",10),wa(11,"\xa0"),Vo(),Qo(12),Vo(),Vo()),2&e){const e=Do(1);ko("for",t.inputId),Ss(5),Mo("id",t.inputId)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex)("required",t.required),ko("name",t.name)("value",t.value)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby)("aria-describedby",t.ariaDescribedby),Ss(2),Mo("matRippleTrigger",e)("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Fl(18,zx)),Ss(2),aa("mat-radio-label-before","before"==t.labelPosition)}},directives:[Q_],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(0.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5)}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),e})();const ik=dn(tk);let nk=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Z_,B_],B_]}),e})();function sk(e,t){if(1&e&&(No(0,"span",9),wa(1),Vo()),2&e){const e=Ko(2);Ss(1),Sa(e.studentProfile.fullName)}}function rk(e,t){if(1&e&&(No(0,"span",9),wa(1),Vo()),2&e){const e=Ko(2);Ss(1),Sa(e.tutorProfile.fullName)}}function ok(e,t){if(1&e&&(No(0,"span",7),wa(1,"Hey , "),Oo(2,sk,2,1,"span",8),Oo(3,rk,2,1,"span",8),Vo()),2&e){const e=Ko();Ss(2),Mo("ngIf","Learner"==e.loginType),Ss(1),Mo("ngIf","Expert"==e.loginType)}}function ak(e,t){if(1&e&&(No(0,"span",10),No(1,"span",9),wa(2),Vo(),Vo()),2&e){const e=Ko();Ss(2),Ca("Hey, ",e.socialLoginName,"")}}function lk(e,t){if(1&e){const e=Ho();No(0,"span"),wa(1,"Your registration is almost complete. Please update your profile now by visiting your Dashboard. "),Bo(2,"br"),No(3,"div",11),No(4,"button",12),Wo("click",(function(){return ei(e),Ko().continue()})),wa(5," Go to Dashboard "),Vo(),Vo(),Vo()}}function ck(e,t){1&e&&(No(0,"span"),wa(1,"Your registration is almost complete. Please select your role and enter a password below to get proceed. "),Vo())}function hk(e,t){1&e&&(No(0,"span",23),wa(1,"Your password must be a minimum of 8 characters long. Your PW must contain at least one uppercase letter (A-Z), one lowercase (a-z), one number (0-9), and one special character (@, #,&, %)."),Vo())}function dk(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"button",24),Wo("click",(function(){return ei(e),Ko(2).toDashboard()})),wa(2," Continue "),Vo(),Vo()}if(2&e){Ko();const e=Do(14);Ss(1),Mo("disabled",!e.valid)}}function uk(e,t){if(1&e){const e=Ho();No(0,"div",13),No(1,"div",14),No(2,"label",15),wa(3,"Choose Role"),Vo(),No(4,"div"),No(5,"mat-radio-group",16),Wo("ngModelChange",(function(t){return ei(e),Ko().role=t})),No(6,"mat-radio-button",17),wa(7,"Learner"),Vo(),No(8,"mat-radio-button",18),wa(9,"Expert"),Vo(),Vo(),Vo(),Vo(),No(10,"div",14),No(11,"label",19),wa(12,"Password"),Vo(),No(13,"input",20,21),Wo("ngModelChange",(function(t){return ei(e),Ko().data.name=t})),Vo(),Oo(15,hk,2,0,"span",22),Vo(),Oo(16,dk,3,1,"div",5),Vo()}if(2&e){const e=Do(14),t=Ko();Ss(5),Mo("ngModel",t.role),Ss(8),Mo("ngModel",t.data.name)("pattern",t.passwordPattern),Ss(2),Mo("ngIf",e.invalid&&(e.dirty||e.touched)),Ss(1),Mo("ngIf",!t.loginType)}}const pk=function(){return{height:"330px"}};let fk=(()=>{class e{constructor(e,t,i,n,s,r,o){this.tutorService=e,this.studentService=t,this.loginService=i,this.dialog=n,this.socialService=s,this.dialogRef=r,this.tutorProfile=new oT,this.tutorProfileDetails=new Iy,this.studentProfile=new By,this.login=!1,this.socialLogin=!1,this.role="Learner",this.hide=!0,this.password=" ",this.data=new Ux(""),this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.login=!0}ngOnInit(){this.loginService.getLoginType()?(this.loginType=this.loginService.getLoginType(),this.login=!0,"Learner"==this.loginType?this.studentProfile=this.studentService.getStudentProfileDetails():"Expert"==this.loginType&&(this.tutorProfile=this.tutorService.getTutorDetials())):(this.socialLogin=!0,this.socialLoginName=this.socialService.getSocialDetails().fullName)}chooseRole(e){this.role=e}continue(){this.dialog.closeAll()}toDashboard(){console.log(this.role),console.log(this.data.name),"Learner"!=this.role&&"Expert"!=this.role||null==this.data.name||this.dialogRef.close({role:this.role,password:this.data.name})}}return e.\u0275fac=function(t){return new(t||e)(Io(aT),Io(Hy),Io(jy),Io(eT),Io(qx),Io(KE),Io(XE))},e.\u0275cmp=gt({type:e,selectors:[["app-welcome"]],decls:10,vars:7,consts:[[1,"bg-thankyou-container",3,"ngStyle"],[1,"thankyou-container"],["class","user-name-container","style","font-size: larger",4,"ngIf"],["class","user-name-container",4,"ngIf"],[1,"greet"],[4,"ngIf"],["style","margin-top: 10px",4,"ngIf"],[1,"user-name-container",2,"font-size","larger"],["class","user-name",4,"ngIf"],[1,"user-name"],[1,"user-name-container"],[1,"goToDashboard-margin"],["type","button",1,"btn","btn-primary",3,"click"],[2,"margin-top","10px"],[1,"form-group"],["for","role",1,"form-control-placeholder"],["ngDefaultControl","",3,"ngModel","ngModelChange"],["value","Learner",1,"example-margin"],["value","Expert",1,"example-margin"],["for","password",1,"form-control-placeholder"],["type","password","name","password","required","","minlength","8","maxlength","20",1,"form-control",3,"ngModel","pattern","ngModelChange"],["password","ngModel"],["class","help-block",4,"ngIf"],[1,"help-block"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(No(0,"body"),No(1,"div",0),No(2,"div",1),Oo(3,ok,4,2,"span",2),Oo(4,ak,3,1,"span",3),No(5,"span",4),wa(6,"Thank you"),Vo(),Oo(7,lk,6,0,"span",5),Oo(8,ck,2,0,"span",5),Oo(9,uk,17,5,"div",6),Vo(),Vo(),Vo()),2&e&&(Ss(1),Mo("ngStyle",t.loginType&&Fl(6,pk)),Ss(2),Mo("ngIf",t.loginType),Ss(1),Mo("ngIf",!t.loginType),Ss(3),Mo("ngIf",t.loginType),Ss(1),Mo("ngIf",!t.loginType),Ss(1),Mo("ngIf",!t.loginType))},directives:[Cd,md,Jx,Bg,zg,Qv,tk,oy,hy,uy,fy],styles:["img[_ngcontent-%COMP%]{width:40vw;height:40vh;margin:auto}.width100[_ngcontent-%COMP%]{width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}.goToDashboard-margin[_ngcontent-%COMP%]{margin-top:2rem}"]}),e})();var mk=n("BOF4");class gk{}let vk=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.router=e,this.loginDetailsService=t,this.httpService=i,this.studentService=n,this.tutorService=s,this.cookieService=r,this.webSocketService=o,this.notificationService=a,this.authStatusListener=new x,this.socialLogin=new Hx,this.isLoading=!1,this.hideSocialLogin="hideBlock",this.hide=!0,this.hideContainer="",this.studentLoginDetails=new Fy,this.tutorLoginDetails=new rT,this.tutorAvailabilitySchedule=new gk,this.incorrectLoginDetails=!1,this.loginModel=new jx}getUserId(){return this.userId}isTokenValid(){return!(!this.cookieService.get("token")||this.isTokenExpired())||(this.cookieService.delete("token"),this.cookieService.delete("userId"),!1)}isTokenExpired(e){if(e||(e=this.getToken()),!e)return!0;const t=this.getTokenExpirationDate(e);return void 0!==t&&!(t.valueOf()>(new Date).valueOf())}getTokenExpirationDate(e){const t=mk(e);if(void 0===t.exp)return null;const i=new Date(0);return i.setUTCSeconds(t.exp),i}getToken(){return this.cookieService.get("token")}toFacade(){this.router.navigate([""])}getAuthStatusListener(){return this.authStatusListener.asObservable()}getIsAuth(){return this.isAuthenticated}autoAuthUser(){console.log("called"),this.userId=this.cookieService.get("userId"),mk(this.cookieService.get("token")).sub==this.userId&&("Learner"==mk(this.cookieService.get("token")).ROLE?(this.loginType="Learner",this.loginDetailsService.setTrType("login"),this.loginDetailsService.setLoginType(this.loginType),this.httpService.getStudentDetails(this.userId).subscribe(e=>{this.studentProfile=e,this.studentService.setStudentProfileDetails(this.studentProfile),this.httpService.getStudentSchedule(this.userId).subscribe(e=>{this.studentService.setStudentBookings(e),this.isAuthenticated=!0,this.webSocketService.connectToUserWebSocket(this.userId),this.notificationService.fetchNotification()})})):"Expert"==mk(this.cookieService.get("token")).ROLE&&(this.loginType="Expert",this.loginDetailsService.setTrType("login"),this.loginDetailsService.setLoginType(this.loginType),this.httpService.getTutorDetails(this.userId).subscribe(e=>{this.tutorProfile=e,this.tutorService.setTutorDetails(this.tutorProfile),this.httpService.getTutorProfileDetails(this.userId).subscribe(e=>{this.tutorProfileDetails=e,this.tutorService.setTutorProfileDetails(e),this.httpService.getScheduleData(this.tutorProfileDetails.bookingId).subscribe(e=>{this.tutorService.setPersonalAvailabilitySchedule(e),this.isAuthenticated=!0,this.webSocketService.connectToUserWebSocket(this.tutorProfile.bookingId),this.notificationService.fetchNotification()})})})))}onLogin(e){this.httpService.checkLogin(e).subscribe(e=>{if(console.log(e),"false"!=e.response){this.cookieService.set("token",e.response),this.cookieService.set("userId",mk(e.response).sub);var t=mk(e.response).ROLE;this.userId=this.cookieService.get("userId"),"Learner"==t?this.httpService.getStudentDetails(this.userId).subscribe(e=>{this.studentProfile=e,this.studentService.setStudentProfileDetails(this.studentProfile),this.loginDetailsService.setTrType("login"),this.loginDetailsService.setLoginType("Learner"),this.httpService.getStudentSchedule(this.studentProfile.sid).subscribe(e=>{this.studentService.setStudentBookings(e),this.isLoading=!1,this.webSocketService.connectToUserWebSocket(this.userId),this.isAuthenticated=!0,this.authStatusListener.next(!0),this.notificationService.fetchNotification()})}):"Expert"==t&&this.httpService.getTutorDetails(this.userId).subscribe(e=>{this.tutorProfile=e,this.tutorService.setTutorDetails(this.tutorProfile),this.httpService.getTutorProfileDetails(this.tutorProfile.tid).subscribe(e=>{this.tutorProfileDetails=e,this.tutorService.setTutorProfileDetails(this.tutorProfileDetails),this.httpService.getScheduleData(this.tutorProfile.bookingId).subscribe(e=>{this.tutorAvailabilitySchedule=e,this.tutorService.setPersonalAvailabilitySchedule(this.tutorAvailabilitySchedule),this.loginDetailsService.setTrType("login"),this.loginDetailsService.setLoginType("Expert"),this.isLoading=!1,this.isAuthenticated=!0,this.authStatusListener.next(!0),this.webSocketService.connectToUserWebSocket(this.tutorProfile.bookingId),this.notificationService.fetchNotification()})})})}else this.authStatusListener.next(!1),this.isAuthenticated=!1})}onSignUp(e){this.httpService.registerUser(e).subscribe(t=>{1==t?(this.loginModel.email=e.email,this.loginModel.password=e.password,this.loginModel.method=Bx.hashSync("manual",1),this.httpService.checkLogin(this.loginModel).subscribe(t=>{this.cookieService.set("token",t.response),this.cookieService.set("userId",mk(t.response).sub),this.userId=this.cookieService.get("userId"),"Learner"==e.role?this.httpService.getStudentDetails(this.userId).subscribe(e=>{this.studentProfile=e,this.studentService.setStudentProfileDetails(this.studentProfile),this.loginDetailsService.setLoginType("Learner"),this.loginDetailsService.setTrType("signUp"),this.isAuthenticated=!0,this.authStatusListener.next(!0),this.webSocketService.connectToUserWebSocket(this.userId),this.notificationService.fetchNotification()}):"Expert"==e.role&&this.httpService.getTutorDetails(this.userId).subscribe(e=>{this.tutorProfile=e,this.tutorService.setTutorDetails(this.tutorProfile),this.httpService.getTutorProfileDetails(this.tutorProfile.tid).subscribe(e=>{this.tutorService.setTutorProfileDetails(e),this.httpService.getScheduleData(this.tutorProfile.bookingId).subscribe(e=>{this.tutorAvailabilitySchedule=e,this.tutorService.setPersonalAvailabilitySchedule(this.tutorAvailabilitySchedule),this.loginDetailsService.setLoginType("Expert"),this.loginDetailsService.setTrType("signUp"),this.isAuthenticated=!0,this.authStatusListener.next(!0),this.webSocketService.connectToUserWebSocket(this.tutorProfile.bookingId),this.notificationService.fetchNotification()})})})})):0==t&&(this.authStatusListener.next(!1),this.isAuthenticated=!1)})}saveSocialLogin(e){console.log(e),this.httpService.registerUser(e).subscribe(t=>{1==t?(console.log(t),this.loginModel.email=e.email,this.loginModel.password=e.socialId,this.loginModel.method=Bx.hashSync("social",1),this.httpService.checkLogin(this.loginModel).subscribe(t=>{console.log(t),this.cookieService.set("token",t.response),this.cookieService.set("userId",mk(t.response).sub),this.userId=this.cookieService.get("userId"),"Learner"==e.role?this.httpService.getStudentDetails(this.userId).subscribe(e=>{this.studentProfile=e,this.studentService.setStudentProfileDetails(this.studentProfile),this.loginDetailsService.setLoginType("Learner"),this.loginDetailsService.setTrType("signUp"),this.isAuthenticated=!0,this.authStatusListener.next(!0),this.webSocketService.connectToUserWebSocket(this.userId),this.notificationService.fetchNotification()}):"Expert"==e.role&&this.httpService.getTutorDetails(this.userId).subscribe(e=>{this.tutorProfile=e,this.tutorService.setTutorDetails(this.tutorProfile),this.httpService.getTutorProfileDetails(this.tutorProfile.tid).subscribe(e=>{this.tutorService.setTutorProfileDetails(e),this.httpService.getScheduleData(this.tutorProfile.bookingId).subscribe(e=>{this.tutorAvailabilitySchedule=e,this.tutorService.setPersonalAvailabilitySchedule(this.tutorAvailabilitySchedule),this.loginDetailsService.setLoginType("Expert"),this.loginDetailsService.setTrType("signUp"),this.isAuthenticated=!0,this.authStatusListener.next(!0),this.webSocketService.connectToUserWebSocket(this.tutorProfile.bookingId),this.notificationService.fetchNotification()})})})})):(console.log(t),this.isAuthenticated=!1,this.authStatusListener.next(!1))})}}return e.\u0275fac=function(t){return new(t||e)(Je(Em),Je(jy),Je(Og),Je(Hy),Je(aT),Je(Dx),Je(hT),Je(cT))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const yk=["loginRef"],bk=["googleSignUp"],wk=["googleLogIn"];function Sk(e,t){if(1&e){const e=Ho();No(0,"span",24),Wo("click",(function(){return ei(e),Ko().closeNav()})),wa(1," close\n"),Vo()}}function Ck(e,t){if(1&e&&(No(0,"p",25),wa(1),Vo()),2&e){const e=Ko();Ss(1),Sa(e.errorText)}}function _k(e,t){1&e&&(No(0,"div",26),Bo(1,"app-loading"),Vo())}function Ek(e,t){1&e&&(No(0,"div",42),No(1,"p",43),wa(2,"User Already registered ! go to Login"),Vo(),Vo())}function Tk(e,t){1&e&&(No(0,"span",48),wa(1,"Invalid Name"),Vo())}function xk(e,t){if(1&e&&(No(0,"div",6),No(1,"label",44),wa(2,"Full Name"),Vo(),Bo(3,"input",45,46),Oo(5,Tk,2,0,"span",47),Vo()),2&e){const e=Do(4);Ss(5),Mo("ngIf",!e.valid&&e.touched)}}function kk(e,t){1&e&&(No(0,"span",48),wa(1,"Invalid email"),Vo())}function Ak(e,t){if(1&e&&(No(0,"div",6),No(1,"label",7),wa(2,"Email Address"),Vo(),Bo(3,"input",49,50),Oo(5,kk,2,0,"span",47),Vo()),2&e){const e=Do(4),t=Ko(2);Ss(5),Mo("ngIf",!e.valid&&e.touched||t.emailValid)}}function Ok(e,t){1&e&&(No(0,"span",48),wa(1,"Your password must be a minimum of 8 characters long. Your PW must contain at least one uppercase letter (A-Z), one lowercase (a-z), one number (0-9), and one special character (@, #,&, %)."),Vo())}function Dk(e,t){if(1&e&&(No(0,"div",6),No(1,"label",10),wa(2,"Password"),Vo(),Bo(3,"input",51,52),Oo(5,Ok,2,0,"span",47),Vo()),2&e){const e=Do(4),t=Ko(2);Ss(3),Mo("type",t.hide?"password":"text")("pattern",t.passwordPattern),Ss(2),Mo("ngIf",e.invalid&&(e.dirty||e.touched))}}function Ik(e,t){1&e&&(No(0,"span",48),wa(1,"Invalid contact"),Vo())}function Rk(e,t){if(1&e&&(No(0,"div",6),No(1,"label",53),wa(2,"Mobile Number"),Vo(),Bo(3,"input",54,55),Oo(5,Ik,2,0,"span",47),Vo()),2&e){const e=Do(4),t=Ko(2);Ss(3),Mo("pattern",t.mobNumberPattern),Ss(2),Mo("ngIf",!e.valid&&e.touched)}}function Pk(e,t){1&e&&(No(0,"div",6),No(1,"label",56),wa(2,"Role"),Vo(),No(3,"select",57),No(4,"option"),wa(5,"Learner"),Vo(),No(6,"option"),wa(7,"Expert"),Vo(),Vo(),Vo())}function Mk(e,t){1&e&&(No(0,"p",58),wa(1," Your Verification Code has been sent to your Email, Please verify your account by signing in to your email. "),Vo())}function Lk(e,t){1&e&&(No(0,"span",48),wa(1,"Invalid OTP"),Vo())}function Nk(e,t){if(1&e&&(No(0,"div",6),No(1,"label",59),wa(2,"One Time Password"),Vo(),Bo(3,"input",60,61),Oo(5,Lk,2,0,"span",47),Vo()),2&e){const e=Ko(2);Ss(5),Mo("ngIf",e.wrongOtp)}}function Vk(e,t){if(1&e){const e=Ho();No(0,"div",62),wa(1," By clicking on Next, you agree to our "),No(2,"a",63),Wo("click",(function(){return ei(e),Ko(2).openTermsAndConditions()})),wa(3,"Terms and Conditions"),Vo(),Vo()}}function Bk(e,t){if(1&e){const e=Ho();No(0,"a",64),Wo("click",(function(){return ei(e),Ko(2).toSignUp()})),wa(1," Already have an account? "),Vo()}}const Fk=function(e){return{"margin-bottom":e}};function jk(e,t){if(1&e){const e=Ho();No(0,"div",27),No(1,"div",28),No(2,"div",29),No(3,"span",30),wa(4,"Create"),Vo(),Bo(5,"br"),No(6,"span",31),wa(7,"Your Account"),Vo(),Vo(),Vo(),Oo(8,Ek,3,0,"div",32),No(9,"div",33),No(10,"form",34,35),Wo("ngSubmit",(function(){ei(e);const t=Do(11);return Ko().onSignUp(t)})),Oo(12,xk,6,1,"div",36),Oo(13,Ak,6,1,"div",36),Oo(14,Dk,6,3,"div",36),Oo(15,Rk,6,2,"div",36),Oo(16,Pk,8,0,"div",36),Oo(17,Mk,2,0,"p",37),Oo(18,Nk,6,1,"div",36),Oo(19,Vk,4,0,"div",38),No(20,"div",39),Oo(21,Bk,2,0,"a",40),No(22,"button",15),wa(23," Next "),Vo(),No(24,"a",41),wa(25," Cancel "),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(11),t=Ko();Ss(8),Mo("ngIf",t.incorrectLoginDetails),Ss(4),Mo("ngIf",t.showInput),Ss(1),Mo("ngIf",t.showInput),Ss(1),Mo("ngIf",t.showInput),Ss(1),Mo("ngIf",t.showInput),Ss(1),Mo("ngIf",t.showInput),Ss(1),Mo("ngIf",t.verifyEmail),Ss(1),Mo("ngIf",t.verifyEmail),Ss(1),Mo("ngIf",t.showInput),Ss(1),Mo("ngStyle",jl(12,Fk,t.verifyEmail?"35vh":"")),Ss(1),Mo("ngIf",!t.verifyEmail),Ss(1),Mo("disabled",!e.valid)}}function Hk(e,t){1&e&&(No(0,"p",65),wa(1," Login Using Google "),Vo())}function Uk(e,t){1&e&&(No(0,"p",65),wa(1," Sign up Using Google "),Vo())}function qk(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"span"),wa(2," New to FellowGenius? "),Vo(),No(3,"a",14),Wo("click",(function(){return ei(e),Ko().toSignUp()})),wa(4,"Sign up"),Vo(),Vo()}}let Wk=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.router=e,this.httpClient=t,this.snackBar=i,this.dialogRef=n,this.socialService=s,this.authService=r,this.loginService=o,this.zone=a,this.login=!0,this.wrongOtp=!1,this.showInput=!0,this.verifyEmail=!1,this.incorrectLoginDetails=!1,this.termsAndConditionsChecked=!1,this.emailValid=!1,this.hide=!0,this.timeOut=!0,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.registrationModel=new Fx,this.loginModel=new jx,this.studentProfile=new By,this.socialLogin=new Hx,this.tutorProfile=new oT,this.config={duration:3e3,horizontalPosition:"center",verticalPosition:"top"},this.hideSocialLogin="hideBlock",this.hideContainer="",this.studentLoginDetails=new Fy}ngOnInit(){this.googleSDK()}toSignUp(){this.login=!this.login}closeNav(){this.dialogRef.closeAll()}openTermsAndConditions(){this.dialogRef.open(Vx,{width:"auto",height:"auto"})}toResetPassword(){this.dialogRef.closeAll(),this.router.navigate(["reset-password"])}openConnectPage(){null!=this.loginService.getLoginType()&&"Learner"==this.loginService.getLoginType()?this.dialogRef.open(Ax,{height:"auto",width:"auto"}):this.dialogRef.open(e,{width:"auto",height:"auto"})}onLogin(e){this.isLoading=!0,this.hideContainer="hideBlock",this.loginModel.email=e.value.email,this.loginModel.password=e.value.password,this.authService.onLogin(this.loginModel),this.authService.getAuthStatusListener().subscribe(e=>{0==e?(this.errorText="Incorrect email or password",this.isLoading=!1,this.hideContainer="",this.incorrectLoginDetails=!0):1==e&&(this.isLoading=!1,this.snackBar.open("Logged in successfully","close",this.config),console.log("here"),this.dialogRef.closeAll(),this.openConnectPage())})}openThankYouPage(){const e=new WE;e.disableClose=!0,this.dialogRef.open(fk,e).afterClosed().subscribe(e=>{this.role=e.role,this.registrationModel.role=e.role,this.registrationModel.password=e.password,this.authService.saveSocialLogin(this.registrationModel),this.authService.getAuthStatusListener().subscribe(e=>{1==e&&(this.isLoading=!1,this.snackBar.open("Logged in successfully","close",this.config),this.dialogRef.closeAll(),this.openConnectPage())})})}prepareLoginButton(){null==this.auth2&&location.reload(),this.auth2.attachClickHandler(this.googleLogIn.nativeElement,{},e=>{let t=e.getBasicProfile();this.socialLogin.id=t.getId(),this.socialLogin.fullName=t.getName(),this.socialLogin.email=t.getEmail(),this.socialService.setSocialDetails(this.socialLogin),this.zone.run(()=>{this.hideContainer="hideBlock",this.loginModel.email=this.socialLogin.email,this.loginModel.password=this.socialLogin.id,this.authService.onLogin(this.loginModel),this.authService.getAuthStatusListener().subscribe(e=>{0==e?this.httpClient.checkUser(this.socialLogin.email).subscribe(e=>{e?(this.isLoading=!1,this.snackBar.open("login not successful","close",this.config)):this.zone.run(()=>{this.registrationModel.fullName=this.socialLogin.fullName,this.registrationModel.email=this.socialLogin.email,this.registrationModel.password=this.socialLogin.id,this.openThankYouPage()})}):1==e&&(this.isLoading=!1,this.snackBar.open("Logged in successfully","close",this.config),console.log("here"),this.dialogRef.closeAll(),this.openConnectPage())})})},e=>{})}onSignUp(e){0==this.verifyEmail?(this.isLoading=!0,this.registrationModel.fullName=e.value.fullName,this.registrationModel.email=e.value.email,this.registrationModel.password=e.value.password,this.registrationModel.contact=e.value.contact,this.registrationModel.role=e.value.role,this.httpClient.checkUser(this.registrationModel.email).subscribe(e=>{1==!e?(setTimeout(()=>{1==this.timeOut&&(this.emailValid=!0,this.isLoading=!1,this.showInput=!0)},25e3),this.httpClient.verifyEmail(this.registrationModel.email).subscribe(e=>{this.verificationOtp=e.response,this.timeOut=!1,this.verifyEmail=!0,this.isLoading=!1,this.showInput=!1})):(this.timeOut=!1,this.isLoading=!1,this.snackBar.open("You are already registered. Please Login.","close",this.config),this.login=!0)})):Bx.compareSync(e.value.otp,this.verificationOtp)?(this.authService.onSignUp(this.registrationModel),this.authService.getAuthStatusListener().subscribe(e=>{console.log("got the result !",e),0==e?(this.snackBar.open("registration not successful ! email already exists !","close",this.config),this.incorrectLoginDetails=!0,this.dialogRef.closeAll()):1==e&&(console.log("res is true"),this.isLoading=!1,this.snackBar.open("Logged in successfully","close",this.config),this.dialogRef.closeAll(),console.log("oppenining connect page"),this.openConnectPage())})):this.wrongOtp=!0}googleSDK(){var e,t,i,n;window.googleSDKLoaded=()=>{window.gapi.load("auth2",()=>{this.auth2=window.gapi.auth2.init({client_id:"254899928533-k6lru4oe7sbmpe22ns0m11rvtbokk3qk.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),this.prepareLoginButton()})},t="google-jssdk",n=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((i=e.createElement("script")).id=t,i.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",n.parentNode.insertBefore(i,n))}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(Og),Io(UE),Io(eT),Io(qx),Io(vk),Io(jy),Io(Bc))},e.\u0275cmp=gt({type:e,selectors:[["app-login-dialog"]],viewQuery:function(e,t){var i;1&e&&(oc(yk,!0),oc(bk,!0),oc(wk,!0)),2&e&&(rc(i=uc())&&(t.loginElement=i.first),rc(i=uc())&&(t.googleSignUp=i.first),rc(i=uc())&&(t.googleLogIn=i.first))},decls:34,vars:15,consts:[["class","material-icons close","style","cursor: pointer",3,"click",4,"ngIf"],[1,"login-container"],[1,"login-parameter-container"],["style","color: red",4,"ngIf"],[3,"ngSubmit"],["l","ngForm"],[1,"form-group"],["for","email",1,"form-control-placeholder"],["type","email","id","email","ngModel","","name","email","required","","maxlength","64",1,"form-control"],["loginEmail",""],["for","password",1,"form-control-placeholder"],["type","password","id","password","name","password","ngModel","","required","","maxlength","40",1,"form-control",3,"type"],["loginPassword","ngModel"],[1,"form-group","button-container"],["href","javascript:;",1,"forgot-password",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["style","\n      text-align: center;\n      margin-top: 20%;\n      margin-left: auto;\n      margin-right: auto;\n    ",4,"ngIf"],["class","signup-container",4,"ngIf"],[1,"login-instead"],[1,"btn","btn-secondary",3,"click"],["googleLogIn",""],[1,"fa","fa-google","social-icons",2,"margin-right","5px"],["style","display: inline; font-size: larger",4,"ngIf"],[4,"ngIf"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[2,"color","red"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],[1,"signup-container"],[1,"signup-header"],[1,"header-container"],[1,"header-primary"],[1,"header-container-secondary"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"signup-parameter-container"],[1,"form-group-container",3,"ngSubmit"],["t","ngForm"],["class","form-group",4,"ngIf"],["style","color: rgba(0, 0, 0, 0.8); width: 75%",4,"ngIf"],["class","form-group agree-disagree",4,"ngIf"],[1,"form-group","button-container",3,"ngStyle"],["href","javascript:;","class","forgot-password","style","color: #007bff",3,"click",4,"ngIf"],["href","#",1,"forgot-password",2,"float","right","margin-right","20px"],["role","alert",1,"alert","alert-danger"],[2,"text-align","center"],["for","fullName",1,"form-control-placeholder"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control"],["fullName","ngModel"],["class","help-block",4,"ngIf"],[1,"help-block"],["type","email","id","email","name","email","ngModel","","required","","email","","maxlength","64","pattern","[a-zA-Z0-9_.+-]{1,20}@(?:(?:[a-zA-Z0-9-]+\\.)?[a-zA-Z]+\\.)?(gmail|piet|yahoo|hotmail|rediffmail|apple|microsoft)\\.([a-z]{2,4})(\\.[a-z]{2,4})?$",1,"form-control"],["email","ngModel"],["type","password","id","password","name","password","ngModel","","required","","minlength","8","maxlength","20",1,"form-control",3,"type","pattern"],["password","ngModel"],["for","contact",1,"form-control-placeholder"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control",3,"pattern"],["contact","ngModel"],["for","role",1,"form-control-placeholder"],["ngModel","","name","role","required","",1,"form-control"],[2,"color","rgba(0, 0, 0, 0.8)","width","75%"],["for","otp",1,"form-control-placeholder"],["type","text","id","otp","name","otp","ngModel","","required","",1,"form-control"],["otp",""],[1,"form-group","agree-disagree"],["role","button",1,"termsLink",3,"click"],["href","javascript:;",1,"forgot-password",2,"color","#007bff",3,"click"],[2,"display","inline","font-size","larger"]],template:function(e,t){if(1&e){const e=Ho();Oo(0,Sk,2,0,"span",0),No(1,"div"),No(2,"div",1),No(3,"div",2),Oo(4,Ck,2,1,"p",3),No(5,"form",4,5),Wo("ngSubmit",(function(){ei(e);const i=Do(6);return t.onLogin(i)})),No(7,"div",6),No(8,"label",7),wa(9,"Email Address"),Vo(),Bo(10,"input",8,9),Vo(),No(12,"div",6),No(13,"label",10),wa(14,"Password"),Vo(),Bo(15,"input",11,12),Vo(),No(17,"div",13),No(18,"a",14),Wo("click",(function(){return t.toResetPassword()})),wa(19," Forgot-Password "),Vo(),No(20,"button",15),wa(21," Sign in "),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(22,"div"),Oo(23,_k,2,0,"div",16),Oo(24,jk,26,14,"div",17),Vo(),No(25,"div",18),No(26,"span"),wa(27,"or"),Vo(),No(28,"button",19,20),Wo("click",(function(){return t.prepareLoginButton()})),Bo(30,"i",21),Oo(31,Hk,2,0,"p",22),Oo(32,Uk,2,0,"p",22),Vo(),Oo(33,qk,5,0,"div",23),Vo()}if(2&e){const e=Do(6);Mo("ngIf",!t.isLoading),Ss(1),aa("hideBlock",!t.login),Ss(3),Mo("ngIf",t.incorrectLoginDetails),Ss(11),Mo("type",t.hide?"password":"text"),Ss(5),Mo("disabled",!e.valid),Ss(2),aa("hideBlock",t.login),Ss(1),Mo("ngIf",t.isLoading),Ss(1),Mo("ngIf",!t.isLoading),Ss(1),aa("hideBlock",t.isLoading||t.verifyEmail),Ss(6),Mo("ngIf",t.login),Ss(1),Mo("ngIf",!t.login),Ss(1),Mo("ngIf",t.login)}},directives:[md,Zv,Gg,Wv,Bg,zg,Qv,oy,uy,Ey,Cd,ly,fy,hy,gv,vv,Sv],styles:[".login-container[_ngcontent-%COMP%]{width:400px;margin:0 auto;display:block;padding:10px}.login-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-100px;right:-150px}.login-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;font-size:22px;width:100%;display:flex;align-items:center;margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:325px;position:relative}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.login-instead[_ngcontent-%COMP%]{float:left;margin-top:20px}.login-instead[_ngcontent-%COMP%], .login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}.login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.login-instead[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.hideBlock[_ngcontent-%COMP%]{display:none}.signup-container[_ngcontent-%COMP%]{width:325px;margin:0 auto;display:block;padding:10px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px;margin-bottom:10px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]}),e})();function zk(e,t){if(1&e){const e=Ho();No(0,"div",31),No(1,"button",32),Wo("click",(function(){return ei(e),Ko().openConnectPage()})),wa(2," Connect "),Vo(),Vo()}}function Gk(e,t){if(1&e&&(No(0,"span",33),wa(1),Vo()),2&e){const e=Ko();Ss(1),Ca("\u20b9 ",e.teacherProfile.price1," /hr")}}function Yk(e,t){if(1&e&&(No(0,"span",33),wa(1),Vo()),2&e){const e=Ko();Ss(1),Ca("\u20b9 ",e.teacherProfile.price1,"/hr")}}function $k(e,t){if(1&e&&(No(0,"span"),wa(1),Vo()),2&e){const e=t.$implicit;Ss(1),Sa(e)}}function Kk(e,t){if(1&e&&(No(0,"span"),wa(1),Vo()),2&e){const e=t.$implicit;Ss(1),Ea("",e.subCategory," : ",e.category," - \u20b9 ",e.price,"/hour")}}function Xk(e,t){if(1&e&&(No(0,"span"),wa(1),Vo()),2&e){const e=Ko();Ss(1),Ca("Years of Experience - ",e.teacherProfile.yearsOfExperience,"")}}function Jk(e,t){if(1&e&&(No(0,"span"),wa(1),Vo()),2&e){const e=Ko();Ss(1),Ca("Current Organization - ",e.teacherProfile.currentOrganisation,"")}}function Qk(e,t){if(1&e&&(No(0,"p"),wa(1),Vo()),2&e){const e=t.$implicit;Ss(1),Ca(" ",e," ")}}function Zk(e,t){if(1&e&&(No(0,"span"),wa(1,"Previous Organization - "),Oo(2,Qk,2,1,"p",27),Vo()),2&e){const e=Ko();Ss(2),Mo("ngForOf",e.teacherProfile.previousOrganisations)}}function eA(e,t){1&e&&(No(0,"span"),wa(1,"No Reviews"),Vo())}function tA(e,t){if(1&e&&(No(0,"tr"),Bo(1,"td",34),No(2,"td"),No(3,"div",35),Bo(4,"div",15),Vo(),Vo(),Vo()),2&e){const e=t.$implicit;Ss(1),Mo("innerHTML",e.studentName,Zn),Ss(3),oa("width",e.rating,"%")}}const iA=function(e){return{"background-image":e}};let nA=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c){this.profileService=e,this.meetingSevice=t,this.studentService=i,this.httpService=n,this.snackBar=s,this.router=r,this.dialogRef=o,this.activatedRoute=a,this.loginService=l,this.dialog=c,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]},this.isLoading=!1,this.teacherProfile=new Iy,this.meetingDetails=new Py,this.bookingDetails=new My,this.reviewList=[],this.startTimeString="Start Time",this.endTimeString="End Time",this.errorMessage="",this.endSelect=-1,this.startSelect=-1,this.tempArray=new Ly,this.time={hour:13,minute:30},this.endTime={hour:0,minute:0},this.st={sh:-1,sm:-1},this.et={eh:-1,em:-1},this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,this.dates=[],this.scheduleDates=[],this.meridian=!0,this.date=new Date,this.settings={bigBanner:!0,timePicker:!0,format:"dd-MM-yyyy hh:mm a",defaultOpen:!1,closeOnSelect:!1},this.ScheduleTime=[],this.fullDate=[],this.profilePictureUrl="../../assets/images/default-user-image.png"}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.userId=e.page,this.httpService.fetchBookingTutorProfileDetails(this.userId).subscribe(e=>{this.teacherProfile=e,this.profilePictureUrl=this.teacherProfile.profilePictureUrl,this.fetchExpertReviews()})}),this.startDisabled=!0,this.endDisabled=!0,this.teacherProfile=this.profileService.getProfile()}openConnectPage(){null!=this.loginService.getLoginType()?this.dialog.open(Ax,{height:"auto",width:"auto"}):this.dialog.open(Wk,{width:"auto",height:"auto"})}fetchExpertReviews(){this.httpService.fetchExpertRecentReviews(this.teacherProfile.bookingId).subscribe(e=>{this.reviewList=e})}}return e.\u0275fac=function(t){return new(t||e)(Io(Ny),Io(Vy),Io(Hy),Io(Og),Io(UE),Io(Em),Io(eT),Io(gf),Io(jy),Io(eT))},e.\u0275cmp=gt({type:e,selectors:[["app-expert-profile"]],decls:95,vars:23,consts:[[1,"content-container",2,"background-color","black"],[1,"expert-profile-container-connect",2,"margin-top","90px"],[1,"breadcrumb-container",2,"width","max-content"],[1,"breadcrumb",2,"font-size","15px"],["routerLink","../facade"],["routerLink","../search-results"],[1,"active"],["class","connect-button-container",4,"ngIf"],[1,"expert-profile-container"],[1,"expert-profile-header"],["default","../../assets/images/default-user-image.png",1,"list-thumbnail",3,"ngStyle"],[1,"basic-information"],[1,"profile-name"],[1,"profile-skills"],[1,"stars-outer"],[1,"stars-inner"],[1,"price-stamp"],["class","price",4,"ngIf"],[1,"numbers-container"],[1,"number"],[1,"info"],[1,"separtor"],[1,"expert-profile-description"],[1,"row"],[1,"col-md-6"],[1,"description-header"],[1,"description-label"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-12"],[1,"content-container"],[1,"connect-button-container"],["type","button",1,"btn","btn-primary",3,"click"],[1,"price"],[3,"innerHTML"],[1,"stars-outer",2,"position","relative","margin-left","10px"]],template:function(e,t){1&e&&(Bo(0,"app-nav-bar"),No(1,"div",0),No(2,"div",1),No(3,"div",2),No(4,"ol",3),No(5,"li"),No(6,"a",4),wa(7,"Home"),Vo(),Vo(),No(8,"li"),No(9,"a",5),wa(10,"Search Results"),Vo(),Vo(),No(11,"li",6),wa(12,"Profile"),Vo(),Vo(),Vo(),Oo(13,zk,3,0,"div",7),No(14,"div",8),No(15,"div",9),Bo(16,"div",10),No(17,"div",11),No(18,"span",12),wa(19),Vo(),No(20,"span",13),wa(21),Vo(),No(22,"span",13),wa(23),Vo(),No(24,"div",14),Bo(25,"div",15),Vo(),Vo(),No(26,"div",16),Oo(27,Gk,2,1,"span",17),Oo(28,Yk,2,1,"span",17),Vo(),No(29,"div",18),No(30,"div"),No(31,"span",19),wa(32),Vo(),No(33,"span",20),wa(34,"Reviews"),Vo(),Vo(),Bo(35,"div",21),No(36,"div"),No(37,"span",19),wa(38),Vo(),No(39,"span",20),wa(40,"Sessions"),Vo(),Vo(),Vo(),Vo(),No(41,"div",22),No(42,"div",23),No(43,"div",24),No(44,"div",25),wa(45,"Description"),Vo(),No(46,"div",26),wa(47),Vo(),Vo(),No(48,"div",24),No(49,"div",25),wa(50,"Speciality"),Vo(),No(51,"div",26),wa(52),Vo(),Vo(),Vo(),No(53,"div",23),No(54,"div",24),No(55,"div",25),wa(56," Education Qualification & Certificates "),Vo(),No(57,"div",26),Oo(58,$k,2,1,"span",27),Vo(),Vo(),No(59,"div",24),No(60,"div",25),wa(61,"Profession Skills"),Vo(),No(62,"div",26),No(63,"span"),wa(64),Vo(),Vo(),Vo(),Vo(),No(65,"div",23),No(66,"div",24),No(67,"div",25),wa(68,"Area of Expertise"),Vo(),No(69,"div",26),Oo(70,Kk,2,3,"span",27),Vo(),Vo(),No(71,"div",24),No(72,"div",25),wa(73,"Professional Background"),Vo(),No(74,"div",26),Oo(75,Xk,2,1,"span",28),Oo(76,Jk,2,1,"span",28),Oo(77,Zk,3,1,"span",28),Vo(),Vo(),Vo(),No(78,"div",23),No(79,"div",29),No(80,"div",25),wa(81,"Reviews"),Vo(),No(82,"div",30),Oo(83,eA,2,0,"span",28),No(84,"table"),Oo(85,tA,5,3,"tr",27),Vo(),Vo(),Vo(),Bo(86,"br"),Bo(87,"br"),Bo(88,"br"),Bo(89,"br"),Bo(90,"br"),Bo(91,"br"),Bo(92,"br"),Bo(93,"br"),Bo(94,"br"),Vo(),Vo(),Vo(),Vo(),Vo()),2&e&&(Ss(13),Mo("ngIf","Expert"!=t.loginService.getLoginType()),Ss(3),Mo("ngStyle",jl(21,iA,"url("+t.profilePictureUrl+")")),Ss(3),Sa(t.teacherProfile.fullName),Ss(2),Sa(t.teacherProfile.institute),Ss(2),Sa(t.teacherProfile.professionalSkills),Ss(2),oa("width",t.teacherProfile.rating,"%"),Ss(2),Mo("ngIf",t.teacherProfile.price1!=t.teacherProfile.price2),Ss(1),Mo("ngIf",t.teacherProfile.price1==t.teacherProfile.price2),Ss(4),Sa(t.teacherProfile.reviewCount),Ss(6),Sa(t.teacherProfile.lessonCompleted),Ss(9),Ca(" ",t.teacherProfile.description," "),Ss(5),Ca(" ",t.teacherProfile.speciality," "),Ss(6),Mo("ngForOf",t.teacherProfile.educationalQualifications),Ss(6),Sa(t.teacherProfile.professionalSkills),Ss(6),Mo("ngForOf",t.teacherProfile.areaOfExpertise),Ss(5),Mo("ngIf",t.teacherProfile.yearsOfExperience),Ss(1),Mo("ngIf",t.teacherProfile.currentOrganisation),Ss(1),Mo("ngIf",t.teacherProfile.previousOrganisations),Ss(6),Mo("ngIf",0==t.reviewList.length),Ss(2),Mo("ngForOf",t.reviewList))},directives:[Lx,xm,md,Cd,pd],styles:[""]}),e})();class sA{constructor(){this.hasElements=!1}}let rA=(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-about-us"]],decls:32,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","about_banner"],[1,"container"],[1,"row","align-items-center"],[1,"col-12"],[1,"banner_content"],["src","../../../assets/images/About-us-img.svg","alt","#",1,"about_icon"],[1,"wi_full","vision_sec"],[1,"row"],[1,"content_box"],[1,"tag_line"],[1,"wi_full","py_5","demand_sec"],[1,"col-12","col-lg-10","mx-auto"],[1,"sec_content","text-center"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"h1"),wa(9,"About Fellow Genius"),Vo(),Bo(10,"img",6),Vo(),Vo(),Vo(),Vo(),Vo(),No(11,"section",7),No(12,"div",2),No(13,"div",8),No(14,"div",4),No(15,"div",9),No(16,"h2"),wa(17,"Our Vision"),Vo(),No(18,"div",10),wa(19,"Facilitate a world-class knowledge experience for everyone regardless of their geographic location."),Vo(),No(20,"p"),wa(21,"We help people access the best instructors and help instructors find students through our groundbreaking online learning technology. Our vision is to provide people with tools to help transfer knowledge in a transparent manner."),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(22,"section",11),No(23,"div",2),No(24,"div",8),No(25,"div",12),No(26,"div",13),No(27,"h2"),wa(28,"Learning On-demand!"),Vo(),No(29,"p"),wa(30,"In an age of emerging technologies, access to the internet and devices is easy today. This connectivity opens a superhighway of information for people to learn and progress from anywhere. fellowGenius offers an easy to use online hub for anyone who wants to learn or teach something. Founded in 2020, fellowGenius is a New Delhi (India) based company that promotes the peer-to-peer learning platform. It is a convenient and simple technology for students, young professionals, or anyone who wants to find an instructor instantly. That\u2019s why we are home to more than 4500 learners and 1000+ instructors and have already rolled-out almost 12000 sessions successfully."),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(31,"app-footer"),Vo())},directives:[Lx,Nx],styles:["p[_ngcontent-%COMP%]{display:block;font-size:medium}h2[_ngcontent-%COMP%]{margin-bottom:20px!important;color:#e30084;margin:auto}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:600}h1[_ngcontent-%COMP%]{color:#892687;text-align:center}"]}),e})();n("QJpz"),n("DjPg");class oA{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new aA(e,this.delay,this.scheduler))}}class aA extends m{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,n=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const t=Math.max(0,i[0].time-n.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(aA.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new lA(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(Eb.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(Eb.createComplete()),this.unsubscribe()}}class lA{constructor(e,t){this.time=e,this.notification=t}}const cA=["panel"];function hA(e,t){if(1&e&&(No(0,"div",0,1),Qo(2),Vo()),2&e){const e=Ko();Mo("id",e.id)("ngClass",e._classList)}}const dA=["*"];let uA=0;class pA{constructor(e,t){this.source=e,this.option=t}}class fA{}const mA=H_(fA),gA=new He("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let vA=(()=>{class e extends mA{constructor(e,t,i){super(),this._changeDetectorRef=e,this._elementRef=t,this._activeOptionChanges=u.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new $l,this.opened=new $l,this.closed=new $l,this.optionActivated=new $l,this._classList={},this.id="mat-autocomplete-"+uA++,this._autoActiveFirstOption=!!i.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=Uy(e)}set classList(e){this._classList=e&&e.length?e.split(" ").reduce((e,t)=>(e[t.trim()]=!0,e),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new qw(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const t=new pA(this,e);this.optionSelected.emit(t)}_setVisibilityClasses(e){e["mat-autocomplete-visible"]=this.showPanel,e["mat-autocomplete-hidden"]=!this.showPanel}}return e.\u0275fac=function(t){return new(t||e)(Io(Kr),Io(Ka),Io(gA))},e.\u0275cmp=gt({type:e,selectors:[["mat-autocomplete"]],contentQueries:function(e,t,i){var n;1&e&&(cc(i,hE,!0),cc(i,rE,!0)),2&e&&(rc(n=uc())&&(t.options=n),rc(n=uc())&&(t.optionGroups=n))},viewQuery:function(e,t){var i;1&e&&(oc(bl,!0),ac(cA,!0)),2&e&&(rc(i=uc())&&(t.template=i.first),rc(i=uc())&&(t.panel=i.first))},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple",displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",classList:["class","classList"],panelWidth:"panelWidth"},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[za([{provide:cE,useExisting:e}]),Oa],ngContentSelectors:dA,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,t){1&e&&(Jo(),Oo(0,hA,3,2,"ng-template"))},directives:[dd],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),e})();const yA=new He("mat-autocomplete-scroll-strategy"),bA={provide:yA,deps:[Aw],useFactory:function(e){return()=>e.scrollStrategies.reposition()}},wA={provide:Pg,useExisting:xe(()=>SA),multi:!0};let SA=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c){this._element=e,this._overlay=t,this._viewContainerRef=i,this._zone=n,this._changeDetectorRef=s,this._dir=o,this._formField=a,this._document=l,this._viewportRuler=c,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=u.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=wu(()=>this.autocomplete&&this.autocomplete.options?K(...this.autocomplete.options.map(e=>e.onSelectionChange)):this._zone.onStable.asObservable().pipe(ju(1),Gu(()=>this.optionSelections))),this._scrollStrategy=r}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=Uy(e)}ngAfterViewInit(){const e=this._getWindow();void 0!==e&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return K(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Cu(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Cu(()=>this._overlayAttached)):du()).pipe(B(e=>e instanceof lE?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return K(Yy(this._document,"click"),Yy(this._document,"touchend")).pipe(Cu(e=>{const t=this._isInsideShadowRoot&&e.composedPath?e.composedPath()[0]:e.target,i=this._formField?this._formField._elementRef.nativeElement:null;return this._overlayAttached&&t!==this._element.nativeElement&&(!i||!i.contains(t))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(t)}))}writeValue(e){Promise.resolve(null).then(()=>this._setTriggerValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const t=e.keyCode;if(27===t&&e.preventDefault(),this.activeOption&&13===t&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const i=this.autocomplete._keyManager.activeItem,n=38===t||40===t;this.panelOpen||9===t?this.autocomplete._keyManager.onKeydown(e):n&&this._canOpen()&&this.openPanel(),(n||this.autocomplete._keyManager.activeItem!==i)&&this._scrollToOption()}}_handleInput(e){let t=e.target,i=t.value;"number"===t.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i&&(this._previousValue=i,this._onChange(i),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_scrollToOption(){const e=this.autocomplete._keyManager.activeItemIndex||0,t=dE(e,this.autocomplete.options,this.autocomplete.optionGroups);if(0===e&&1===t)this.autocomplete._setScrollTop(0);else{const i=uE(e+t,48,this.autocomplete._getScrollTop(),256);this.autocomplete._setScrollTop(i)}}_subscribeToClosingActions(){return K(this._zone.onStable.asObservable().pipe(ju(1)),this.autocomplete.options.changes.pipe(ip(()=>this._positionStrategy.reapplyLastPosition()),function(e,t=lb){var i;const n=(i=e)instanceof Date&&!isNaN(+i)?+e-t.now():Math.abs(e);return e=>e.lift(new oA(n,t))}(0))).pipe(Gu(()=>{const e=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),e!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),ju(1)).subscribe(e=>this._setValueAndClose(e))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(e){const t=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,i=null!=t?t:"";this._formField?this._formField._control.value=i:this._element.nativeElement.value=i,this._previousValue=i}_setValueAndClose(e){e&&e.source&&(this._clearPreviousSelectedOption(e.source),this._setTriggerValue(e.source.value),this._onChange(e.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(e.source)),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(t=>{t!=e&&t.selected&&t.deselect()})}_attachOverlay(){if(!this.autocomplete)throw Error("Attempting to open an undefined instance of `mat-autocomplete`. Make sure that the id passed to the `matAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.");null==this._isInsideShadowRoot&&(this._isInsideShadowRoot=!!Nb(this._element.nativeElement));let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new Kb(this.autocomplete.template,this._viewContainerRef),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,e.keydownEvents().subscribe(e=>{(27===e.keyCode||38===e.keyCode&&e.altKey)&&(this._resetActiveItem(),this._closeKeyEventStream.next(),e.stopPropagation(),e.preventDefault())}),this._viewportRuler&&(this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})}))),e&&!e.hasAttached()&&(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const t=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&t!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new dw({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"}];let n;n="above"===this.position?i:"below"===this.position?t:[...t,...i],e.withPositions(n)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){this.autocomplete._keyManager.setActiveItem(this.autocomplete.autoActiveFirstOption?0:-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Aw),Io(Sl),Io(Bc),Io(Kr),Io(yA),Io(Bb,8),Io(qT,9),Io(vh,8),Io(qb))},e.\u0275dir=Ct({type:e,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,t){1&e&&Wo("focusin",(function(){return t._handleFocus()}))("blur",(function(){return t._onTouched()}))("input",(function(e){return t._handleInput(e)}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&ko("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-owns",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",!t.autocompleteDisabled)},inputs:{position:["matAutocompletePosition","position"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"],autocomplete:["matAutocomplete","autocomplete"],connectedTo:["matAutocompleteConnectedTo","connectedTo"]},exportAs:["matAutocompleteTrigger"],features:[za([wA]),La]}),e})(),CA=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[bA],imports:[[pE,Mw,B_,Id],Wb,pE,B_]}),e})();function _A(e,t){if(1&e&&(No(0,"mat-option",76),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e),Ss(1),Ca(" ",e," ")}}function EA(e,t){if(1&e&&(No(0,"div",32),No(1,"div",77),Bo(2,"img",78),No(3,"h5"),wa(4),Vo(),No(5,"small"),wa(6),Vo(),No(7,"p"),wa(8),Vo(),Vo(),Vo()),2&e){const e=t.$implicit;Ss(2),Mo("src",e.imageUrl,es),Ss(2),Sa(e.name),Ss(2),Sa(e.domain),Ss(2),Sa(e.review)}}let TA=(()=>{class e{constructor(e,t,i,n,s){this.router=e,this.loginDetailsService=t,this.breakpointObserver=i,this.httpService=n,this.webSocketService=s,this.switchView=!1,this.showContainer=!1,this.reviewsView=!0,this.firstName="shubham",this.lastName="sharma",this.myControl=new Fv,this.options=["Tools","Marketing","Content","Project Management","Sales","E-comm","Industry Consulation","Strategy","Finance","HR","Operations","IT Support"],this.customOptions={autoWidth:!1,stagePadding:0,autoplayTimeout:9e3,smartSpeed:1e3,items:1,loop:!0,autoplay:!0,margin:0,dots:!0,touchDrag:!1,mouseDrag:!1,nav:!1},this.expertOptions={autoWidth:!1,stagePadding:0,autoplayTimeout:9e3,smartSpeed:1e3,items:3,loop:!1,autoplay:!1,margin:10,dots:!1,touchDrag:!1,mouseDrag:!1,nav:!0,navText:["<img src='../../assets/images/slider-left-arrow.svg'>","<img src='../../assets/images/slider-right-arrow.svg'>"],responsive:{0:{items:1},480:{items:1},768:{items:2,loop:!1},992:{items:3,loop:!1},1199:{items:4,loop:!1}}},this.slidesStore=[{id:1,imageUrl:"../../assets/images/expert-2.png",name:"Suyash Kejriwal",specialisation:"PIET - B.tech[CSE]",domain:"Finance",studentsCount:50,sessionsCount:98,rating:85,review:"Its beautiful user interface make Experts and learner feel at home."},{id:2,imageUrl:"../../assets/images/vaibhav.jpeg",name:"Vaibhav Vishal Jha",domain:"Tools",specialisation:"PIET - B.tech[CSE]",review:"As an expert, it was an awesome experience being part of this platform. ",studentsCount:30,sessionsCount:46,rating:90},{id:3,imageUrl:"../../assets/images/ajayVerma.jpg",name:"Ajay Verma",domain:"Marketing",specialisation:"PIET - B.tech[CSE]",review:"I really loved the experience of teaching here and the quality functionality.",studentsCount:21,sessionsCount:53,rating:100},{id:4,imageUrl:"../../assets/images/amanGarg.jpg",name:"Aman garg",domain:"Marketing",specialisation:"PIET - B.tech[CSE]",review:"I really loved the experience of teaching here and the quality functionality.",studentsCount:21,sessionsCount:53,rating:100},{id:5,imageUrl:"../../assets/images/expert-4.png",name:"Himanshu Goyal",domain:"Sales",specialisation:"PIET - B.tech[CSE]",review:"I really loved the experience of teaching here and the quality functionality.",studentsCount:21,sessionsCount:53,rating:100},{id:6,imageUrl:"../../assets/images/expert-3.png",name:"Vir chauhan",domain:"Tools",specialisation:"PIET - B.tech[CSE]",review:"I really loved the experience of teaching here and the quality functionality.",studentsCount:21,sessionsCount:53,rating:100}]}ngAfterViewInit(){$(window).scroll((function(){$(window).scrollTop()>0?$(".navbar").addClass("sticky"):$(".navbar").removeClass("sticky")})),$(document).ready((function(){$(".expert-carousel").owlCarousel({autoWidth:!1,stagePadding:0,autoplayTimeout:9e3,smartSpeed:1e3,items:3,singleItem:!0,loop:!1,autoplay:!1,margin:10,dots:!1,touchDrag:!1,mouseDrag:!1,nav:!0,navText:["<img src='../../assets/images/slider-left-arrow.svg'>","<img src='../../assets/images/slider-right-arrow.svg'>"],responsiveClass:!0,responsive:{0:{items:1},480:{items:1},768:{items:2,loop:!1},992:{items:3,loop:!1},1199:{items:4,loop:!1}}}),$(".expert-carousel .owl-dots").addClass("container")})),$(document).ready((function(){$(".video-carousel").owlCarousel({autoWidth:!1,stagePadding:0,autoplayTimeout:9e3,smartSpeed:1e3,items:1,singleItem:!0,loop:!0,autoplay:!0,margin:0,dots:!0,touchDrag:!1,mouseDrag:!1,nav:!1}),$(".video-carousel .owl-dots").addClass("container")})),$(window).scroll((function(){$(this).scrollTop()>=100?$("#return-to-top").fadeIn(200):$("#return-to-top").fadeOut(200)})),$("#return-to-top").click((function(){$("body,html").animate({scrollTop:0},500)})),$((function(){$("[data-bs-toggle=tooltip").tooltip()})),$("#Table_Nav li a").on("click",(function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},2e3)})),$((function(){const e=document.getElementById("real-file"),t=document.getElementById("custom-button"),i=document.getElementById("custom-text");t&&t.addEventListener("click",(function(){e.click()})),e&&e.addEventListener("change",(function(){i.innerHTML=e.value?e.value.match(/[\/\\]([\w\d\s\.\-\(\)]+)$/)[1]:"No file chosen, yet."}))}))}ngOnInit(){this.filteredOptions=this.myControl.valueChanges.pipe(Xu(""),B(e=>this._filter(e)))}sendData(){this.httpService.randomApi().subscribe(e=>{})}getAllCategories(){this.httpService.getAllCategories().subscribe(e=>{let t=e;if(t.length>0)for(var i=0;i<t.length;i++)this.options.push(t[i].category)})}switchReviewsView(){this.reviewsView=!this.reviewsView}_filter(e){const t=e.toLowerCase();return this.options.filter(e=>e.toLowerCase().includes(t))}displaySelectedSubjects(){this.selectedSubject&&this.router.navigate(["search-results"],{queryParams:{subject:this.selectedSubject}})}displayFromTiles(e){console.log(e),null!=e&&this.router.navigate(["search-results"],{queryParams:{subject:e}})}toTermsPage(e){this.router.navigate(["terms-and-conditions"],{queryParams:{section:e}})}onSignUp(){this.router.navigate(["sign-up"])}toLoginPage(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(jy),Io(OE),Io(Og),Io(hT))},e.\u0275cmp=gt({type:e,selectors:[["app-facade"]],decls:217,vars:7,consts:[[1,"page-content"],[1,"wi_full","py_5","banner_sec"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-lg-7"],[1,"banner_content"],[3,"ngSubmit"],[1,"serach_field"],["type","search","placeholder","Search by Domain",1,"form-control","domain_srch",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-lg-5"],[1,"banner_image"],["src","../../assets/images/header-image.png","alt","#"],[1,"wi_full","py_5","help_sec"],[1,"content_box"],[1,"help_list"],[1,"list_wrapper"],[1,"help_icon"],["src","../../assets/images/curated-experts.svg","alt","#"],[1,"help_text"],["src","../../assets/images/innovative-consulting.svg","alt","#"],["src","../../assets/images/personal-learning.svg","alt","#"],[1,"wi_full","py_5","how_works_sec"],[1,"col-12","col-lg-7","mx-auto"],[1,"sec_title"],[1,"btn_block"],["href","javascript:;",1,"button","signUp_btn",3,"click"],[1,"how_works_steps"],[1,"hw_video_sec"],[1,"video-carousel","owl-carousel","owl-theme"],[1,"item"],[1,"video_box"],["src","../../assets/images/video-thumb.png",1,"w-100"],["data-toggle","modal","data-target","#videoPopup1",1,"video_btn"],["src","../../assets/images/play-button.svg"],["data-toggle","modal","data-target","#videoPopup2",1,"video_btn"],[1,"step_wrapper","wi_full","py_5"],[1,"row"],[1,"col-12","col-lg-10","mx-auto"],[1,"list_item"],[1,"img_box"],["src","../../assets/images/start-register.svg","alt","#"],[1,"item_count"],["src","../../assets/images/start-search.svg","alt","#"],["src","../../assets/images/start-learning.svg","alt","#"],[1,"consultaion_sec"],[1,"col-12"],[1,"consultaion_list"],[1,"list_item",3,"click"],[1,"data_wrap"],[1,"list_icon"],["src","../../assets/images/tools.svg","alt","#"],[1,"list_txt"],["src","../../assets/images/marketing.svg","alt","#"],["src","../../assets/images/content.svg","alt","#"],["src","../../assets/images/sales.svg","alt","#"],["src","../../assets/images/E-comm.svg","alt","#"],["src","../../assets/images/strategy.svg","alt","#"],["src","../../assets/images/finance.svg","alt","#"],["src","../../assets/images/HR.svg","alt","#"],["src","../../assets/images/opeartion.svg","alt","#"],["src","../../assets/images/IT-support.svg","alt","#"],[1,"expert_sec"],[1,"carousel_sec"],[1,"expert-carousel","owl-carousel","owl-theme"],["class","item",4,"ngFor","ngForOf"],["id","videoPopup1","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","border-0","bg-transparent"],[1,"modal-body","p-0"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["width","560","height","315","src","https://www.youtube.com/embed/eWgqzTKO61Y?controls=0","frameborder","0","allowfullscreen",""],["id","videoPopup2","tabindex","-1","aria-hidden","true",1,"modal","fade"],[3,"value"],[1,"item_wrap"],["alt","#",3,"src"]],template:function(e,t){if(1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"h1"),wa(9,"On Demand Consulting Platform"),Vo(),No(10,"p"),wa(11," Interact with experts from your domain in just a click !!"),Vo(),No(12,"form",6),Wo("ngSubmit",(function(){return t.displaySelectedSubjects()})),No(13,"div",7),No(14,"input",8),Wo("ngModelChange",(function(e){return t.selectedSubject=e})),Vo(),No(15,"mat-autocomplete",9,10),Oo(17,_A,2,2,"mat-option",11),ql(18,"async"),Vo(),Vo(),Vo(),Vo(),Vo(),No(19,"div",12),No(20,"div",13),Bo(21,"img",14),Vo(),Vo(),Vo(),Vo(),Vo(),No(22,"section",15),No(23,"div",2),No(24,"div",3),No(25,"div",12),No(26,"div",16),No(27,"h2"),wa(28,"How Fellow Genius can help"),Vo(),No(29,"p"),wa(30,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum."),Vo(),Vo(),Vo(),No(31,"div",4),No(32,"div",17),No(33,"ul"),No(34,"li"),No(35,"div",18),No(36,"div",19),Bo(37,"img",20),Vo(),No(38,"div",21),No(39,"h5"),wa(40,"Curated Set of Experts"),Vo(),No(41,"p"),wa(42," Connect with professionals with years of hands-on experience to optimize your workplace efficiency."),Vo(),Vo(),Vo(),Vo(),No(43,"li"),No(44,"div",18),No(45,"div",19),Bo(46,"img",22),Vo(),No(47,"div",21),No(48,"h5"),wa(49,"Innovative Consulting"),Vo(),No(50,"p"),wa(51,"One-stop consulting platform for working professionals and individuals."),Vo(),Vo(),Vo(),Vo(),No(52,"li"),No(53,"div",18),No(54,"div",19),Bo(55,"img",23),Vo(),No(56,"div",21),No(57,"h5"),wa(58,"Personalised Learning "),Vo(),No(59,"p"),wa(60," Live video interaction with the expert from your chosen domain."),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(61,"section",24),No(62,"div",2),No(63,"div",3),No(64,"div",25),No(65,"div",26),No(66,"h2"),wa(67,"How it Works?"),Vo(),No(68,"p"),wa(69,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum."),Vo(),No(70,"div",27),No(71,"a",28),Wo("click",(function(){return t.onSignUp()})),wa(72,"Sign Up"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(73,"div",29),No(74,"div",2),No(75,"div",30),No(76,"div",31),No(77,"div",32),No(78,"div",33),Bo(79,"img",34),No(80,"button",35),Bo(81,"img",36),Vo(),Vo(),Vo(),No(82,"div",32),No(83,"div",33),Bo(84,"img",34),No(85,"button",37),Bo(86,"img",36),Vo(),Vo(),Vo(),Vo(),Vo(),No(87,"div",38),No(88,"div",39),No(89,"div",40),No(90,"div",41),No(91,"div",42),Bo(92,"img",43),Vo(),No(93,"div",16),No(94,"div",44),wa(95,"01"),Vo(),No(96,"h3"),wa(97,"Register"),Vo(),No(98,"p"),wa(99,"Create your account in few easy steps. Verify."),Vo(),Vo(),Vo(),No(100,"div",41),No(101,"div",42),Bo(102,"img",45),Vo(),No(103,"div",16),No(104,"div",44),wa(105,"02"),Vo(),No(106,"h3"),wa(107,"Search"),Vo(),No(108,"p"),wa(109,"Find an Expert. Send a request to schedule a class. "),Vo(),Vo(),Vo(),No(110,"div",41),No(111,"div",42),Bo(112,"img",46),Vo(),No(113,"div",16),No(114,"div",44),wa(115,"03"),Vo(),No(116,"h3"),wa(117,"Start Learning"),Vo(),No(118,"p"),wa(119,"Pay the fee and start your classes immediately."),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(120,"section",15),No(121,"div",2),No(122,"div",47),No(123,"div",39),No(124,"div",48),No(125,"div",26),No(126,"h2"),wa(127,"Key Consultation Areas"),Vo(),Vo(),No(128,"div",49),No(129,"div",50),Wo("click",(function(){return t.displayFromTiles("Tools")})),No(130,"div",51),No(131,"span",52),Bo(132,"img",53),Vo(),No(133,"span",54),wa(134,"Tools"),Vo(),Vo(),Vo(),No(135,"div",50),Wo("click",(function(){return t.displayFromTiles("Marketing")})),No(136,"div",51),No(137,"span",52),Bo(138,"img",55),Vo(),No(139,"span",54),wa(140,"Marketing"),Vo(),Vo(),Vo(),No(141,"div",50),Wo("click",(function(){return t.displayFromTiles("Content")})),No(142,"div",51),No(143,"span",52),Bo(144,"img",56),Vo(),No(145,"span",54),wa(146,"Content"),Vo(),Vo(),Vo(),No(147,"div",50),Wo("click",(function(){return t.displayFromTiles("Sales")})),No(148,"div",51),No(149,"span",52),Bo(150,"img",57),Vo(),No(151,"span",54),wa(152,"Sales"),Vo(),Vo(),Vo(),No(153,"div",50),Wo("click",(function(){return t.displayFromTiles("E-comm")})),No(154,"div",51),No(155,"span",52),Bo(156,"img",58),Vo(),No(157,"span",54),wa(158,"E-comm"),Vo(),Vo(),Vo(),No(159,"div",50),Wo("click",(function(){return t.displayFromTiles("Strategy")})),No(160,"div",51),No(161,"span",52),Bo(162,"img",59),Vo(),No(163,"span",54),wa(164,"Strategy"),Vo(),Vo(),Vo(),No(165,"div",50),Wo("click",(function(){return t.displayFromTiles("Finance")})),No(166,"div",51),No(167,"span",52),Bo(168,"img",60),Vo(),No(169,"span",54),wa(170,"Finance"),Vo(),Vo(),Vo(),No(171,"div",50),Wo("click",(function(){return t.displayFromTiles("HR")})),No(172,"div",51),No(173,"span",52),Bo(174,"img",61),Vo(),No(175,"span",54),wa(176,"HR"),Vo(),Vo(),Vo(),No(177,"div",50),Wo("click",(function(){return t.displayFromTiles("Operations")})),No(178,"div",51),No(179,"span",52),Bo(180,"img",62),Vo(),No(181,"span",54),wa(182,"Operations"),Vo(),Vo(),Vo(),No(183,"div",50),Wo("click",(function(){return t.displayFromTiles("IT Support")})),No(184,"div",51),No(185,"span",52),Bo(186,"img",63),Vo(),No(187,"span",54),wa(188,"IT Support"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(189,"div",64),No(190,"div",39),No(191,"div",48),No(192,"div",26),No(193,"h2"),wa(194,"Meet our Experts"),Vo(),Vo(),No(195,"div",65),No(196,"div",66),Oo(197,EA,9,4,"div",67),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(198,"app-footer"),No(199,"div",68),No(200,"div",69),No(201,"div",70),No(202,"div",71),No(203,"button",72),No(204,"span",73),wa(205,"\xd7"),Vo(),Vo(),No(206,"div",33),Bo(207,"iframe",74),Vo(),Vo(),Vo(),Vo(),Vo(),No(208,"div",75),No(209,"div",69),No(210,"div",70),No(211,"div",71),No(212,"button",72),No(213,"span",73),wa(214,"\xd7"),Vo(),Vo(),No(215,"div",33),Bo(216,"iframe",74),Vo(),Vo(),Vo(),Vo(),Vo(),Vo()),2&e){const e=Do(16);Ss(14),Mo("formControl",t.myControl)("matAutocomplete",e)("ngModel",t.selectedSubject),Ss(3),Mo("ngForOf",Wl(18,5,t.filteredOptions)),Ss(180),Mo("ngForOf",t.slidesStore)}},directives:[Lx,Zv,Gg,Wv,Bg,SA,zg,iy,vA,pd,Nx,hE],pipes:[Ad],styles:[".owl-dot.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#68ab0c!important}.owl-dot[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:15px!important;height:15px!important;border-radius:50%!important;background:#ddd!important;display:inline-block!important;margin:3px!important}"]}),e})(),xA=(()=>{class e{constructor(){this.panelExpanded=!0}ngOnInit(){window.scroll(0,0)}toggleExpanded(e){console.log("clicked"),this.panelExpanded=!this.panelExpanded}handleClick(e){e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-faq"]],decls:128,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","faq_banner"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-lg-6"],[1,"banner_content"],[1,"banner_image"],["src","../../../assets/images/faq-img.svg","alt","#"],[1,"wi_full","py_5","pb-0","faqaccrdn_sec"],[1,"row"],[1,"col-12"],[1,"accordion_wrapper"],["id","accordion1","role","tablist","aria-multiselectable","true",1,"accordion"],[1,"card"],["role","tab","id","generalOne",1,"card-header","p-0"],["data-toggle","collapse","href","#colGenOne","role","button","aria-expanded","true","aria-controls","colGenOne",1,"collapsed"],["id","colGenOne","role","tabpanel","aria-labelledby","generalOne","data-parent","#accordion1",1,"collapse"],[1,"card-body"],["role","tab","id","generalTwo",1,"card-header","p-0"],["data-toggle","collapse","href","#colGenTwo","role","button","aria-expanded","false","aria-controls","colGenTwo",1,"collapsed"],["id","colGenTwo","role","tabpanel","aria-labelledby","generalTwo","data-parent","#accordion1",1,"collapse"],["role","tab","id","generalThree",1,"card-header","p-0"],["data-toggle","collapse","href","#colGenThree","role","button","aria-expanded","false","aria-controls","colGenThree",1,"collapsed"],["id","colGenThree","role","tabpanel","aria-labelledby","generalThree","data-parent","#accordion1",1,"collapse"],["id","accordion2","role","tablist","aria-multiselectable","true",1,"accordion"],["role","tab","id","learnerOne",1,"card-header","p-0"],["data-toggle","collapse","href","#colLrnOne","role","button","aria-expanded","true","aria-controls","colLrnOne",1,"collapsed"],["id","colLrnOne","role","tabpanel","aria-labelledby","learnerOne","data-parent","#accordion2",1,"collapse"],["role","tab","id","learnerTwo",1,"card-header","p-0"],["data-toggle","collapse","href","#colLrnTwo","role","button","aria-expanded","false","aria-controls","colLrnTwo",1,"collapsed"],["id","colLrnTwo","role","tabpanel","aria-labelledby","learnerTwo","data-parent","#accordion2",1,"collapse"],["role","tab","id","learnerThree",1,"card-header","p-0"],["data-toggle","collapse","href","#colLrnThree","role","button","aria-expanded","false","aria-controls","colLrnThree",1,"collapsed"],["id","colLrnThree","role","tabpanel","aria-labelledby","learnerThree","data-parent","#accordion2",1,"collapse"],["role","tab","id","learnerFour",1,"card-header","p-0"],["data-toggle","collapse","href","#colLrnFour","role","button","aria-expanded","false","aria-controls","colLrnFour",1,"collapsed"],["id","colLrnFour","role","tabpanel","aria-labelledby","learnerFour","data-parent","#accordion2",1,"collapse"],["role","tab","id","learnerFive",1,"card-header","p-0"],["data-toggle","collapse","href","#colLrnFive","role","button","aria-expanded","false","aria-controls","colLrnFive",1,"collapsed"],["id","colLrnFive","role","tabpanel","aria-labelledby","learnerFive","data-parent","#accordion2",1,"collapse"],["role","tab","id","learnerSix",1,"card-header","p-0"],["data-toggle","collapse","href","#colLrnSix","role","button","aria-expanded","false","aria-controls","colLrnSix",1,"collapsed"],["id","colLrnSix","role","tabpanel","aria-labelledby","learnerSix","data-parent","#accordion2",1,"collapse"],["id","accordion3","role","tablist","aria-multiselectable","true",1,"accordion"],["role","tab","id","expertOne",1,"card-header","p-0"],["data-toggle","collapse","href","#colExpOne","role","button","aria-expanded","true","aria-controls","colExpOne",1,"collapsed"],["id","colExpOne","role","tabpanel","aria-labelledby","expertOne","data-parent","#accordion3",1,"collapse"],["role","tab","id","expertTwo",1,"card-header","p-0"],["data-toggle","collapse","href","#colExpTwo","role","button","aria-expanded","false","aria-controls","colExpTwo",1,"collapsed"],["id","colExpTwo","role","tabpanel","aria-labelledby","expertTwo","data-parent","#accordion3",1,"collapse"],["role","tab","id","expertThree",1,"card-header","p-0"],["data-toggle","collapse","href","#colExpThree","role","button","aria-expanded","false","aria-controls","colExpThree",1,"collapsed"],["id","colExpThree","role","tabpanel","aria-labelledby","expertThree","data-parent","#accordion3",1,"collapse"],["role","tab","id","expertFour",1,"card-header","p-0"],["data-toggle","collapse","href","#colExpFour","role","button","aria-expanded","false","aria-controls","colExpFour",1,"collapsed"],["id","colExpFour","role","tabpanel","aria-labelledby","expertFour","data-parent","#accordion3",1,"collapse"],["role","tab","id","expertFive",1,"card-header","p-0"],["data-toggle","collapse","href","#colExpFive","role","button","aria-expanded","false","aria-controls","colExpFive",1,"collapsed"],["id","colExpFive","role","tabpanel","aria-labelledby","expertFive","data-parent","#accordion3",1,"collapse"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"h1"),wa(9,"Frequently Asked Questions"),Vo(),No(10,"p"),wa(11,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum."),Vo(),Vo(),Vo(),No(12,"div",4),No(13,"div",6),Bo(14,"img",7),Vo(),Vo(),Vo(),Vo(),Vo(),No(15,"section",8),No(16,"div",2),No(17,"div",9),No(18,"div",10),No(19,"div",11),No(20,"h2"),wa(21,"General"),Vo(),No(22,"div",12),No(23,"div",13),No(24,"div",14),No(25,"a",15),wa(26,"Where can I complete my profile? Can I change/edit profile information once I have submitted it?"),Vo(),Vo(),No(27,"div",16),No(28,"div",17),wa(29,"We can complete our profile percentage wise by clicking on the completing profile hyperlink and navigating to profile page. We can also view and edit our profile by navigating to profile page by clicking your name (or profile picture) in navigation bar."),Vo(),Vo(),Vo(),No(30,"div",13),No(31,"div",18),No(32,"a",19),wa(33,"How easy is it to book a classroom session?"),Vo(),Vo(),No(34,"div",20),No(35,"div",17),wa(36,"It is easy to book a class. Simply search for the Expert with the required subject expertise. Then select the Expert you find appropriate and send him/her the request to book a classroom session as per their availability published on platform. Once accepted your session would start as per the mutually agreed timeslot."),Vo(),Vo(),Vo(),No(37,"div",13),No(38,"div",21),No(39,"a",22),wa(40,"How much does it cost to use FellowGenius?"),Vo(),Vo(),No(41,"div",23),No(42,"div",17),wa(43,"The platform is FREE to join. The cost of the class is based on charges of the instructor. To take a class, you need to pay part of the fee as per the defined charges."),Vo(),Vo(),Vo(),Vo(),No(44,"h2"),wa(45,"Learners"),Vo(),No(46,"div",24),No(47,"div",13),No(48,"div",25),No(49,"a",26),wa(50,"How to find an expert on Fellow Genius?"),Vo(),Vo(),No(51,"div",27),No(52,"div",17),wa(53,"To find an expert, Go to \u201cSearch bar\u201d and select the subject/specialty and click search. You will immediately view a list of all the matching instructors suitable for your search criteria."),Vo(),Vo(),Vo(),No(54,"div",13),No(55,"div",28),No(56,"a",29),wa(57,"Can I cancel or reschedule my session?"),Vo(),Vo(),No(58,"div",30),No(59,"div",17),wa(60,"Yes, you can cancel a session anytime you want. Thereafter you can reschedule the session by getting in touch with your expert."),Vo(),Vo(),Vo(),No(61,"div",13),No(62,"div",31),No(63,"a",32),wa(64,"What are the payment methods?"),Vo(),Vo(),No(65,"div",33),No(66,"div",17),wa(67,"You can pay the fee online through a Debit/Credit card. Other options include UPI, online banking, and Paypal."),Vo(),Vo(),Vo(),No(68,"div",13),No(69,"div",34),No(70,"a",35),wa(71,"Can I view my earlier taken sessions on Platform?"),Vo(),Vo(),No(72,"div",36),No(73,"div",17),wa(74,"Yes, you can view the previous taken sessions in calendar of the bookings page. You can visit the bookings page using navigation bar"),Vo(),Vo(),Vo(),No(75,"div",13),No(76,"div",37),No(77,"a",38),wa(78,"How can I review an expert?"),Vo(),Vo(),No(79,"div",39),No(80,"div",17),wa(81,"Once the session is completed, you can review the expert as a learner from pending reviews section on dashboard. You can rate the expert by clicking on the stars."),Vo(),Vo(),Vo(),No(82,"div",13),No(83,"div",40),No(84,"a",41),wa(85,"Would I get an reminder on start of the session?"),Vo(),Vo(),No(86,"div",42),No(87,"div",17),wa(88,"Yes, as a learner you will receive a notification on your registered email whenever the expert initiates the session"),Vo(),Vo(),Vo(),Vo(),No(89,"h2"),wa(90,"Expert"),Vo(),No(91,"div",43),No(92,"div",13),No(93,"div",44),No(94,"a",45),wa(95,"How much fellowGenius charge for registration?"),Vo(),Vo(),No(96,"div",46),No(97,"div",17),wa(98,"There is NO charge to join the fellowGenius teaching program. You register for FREE and immediately start earning once your profile is registered and your availability is set. "),Vo(),Vo(),Vo(),No(99,"div",13),No(100,"div",47),No(101,"a",48),wa(102,"How much time does it take for an expert to get students?"),Vo(),Vo(),No(103,"div",49),No(104,"div",17),wa(105,"Most of the experts find prospective students within a week after joining our program. "),Vo(),Vo(),Vo(),No(106,"div",13),No(107,"div",50),No(108,"a",51),wa(109,"How much can I earn as an instructor? Where do I set my Session fees?"),Vo(),Vo(),No(110,"div",52),No(111,"div",17),wa(112,"There is simply no marker to ascertain that. What you earn entirely depends on the fee you charge and how many classes you take."),Vo(),Vo(),Vo(),No(113,"div",13),No(114,"div",53),No(115,"a",54),wa(116,"Is it important to fill all information and give my Linked In Profile link?"),Vo(),Vo(),No(117,"div",55),No(118,"div",17),wa(119,"While filling the form, all the fields marked with * are mandatory.Filling the complete form might improve your learner booking frequency."),Vo(),Vo(),Vo(),No(120,"div",13),No(121,"div",56),No(122,"a",57),wa(123,"Can I view my earlier taken sessions on Platform?"),Vo(),Vo(),No(124,"div",58),No(125,"div",17),wa(126,"Yes, you can view the previous taken sessions in calendar of the bookings page. You can visit the bookings page using navigation bar."),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(127,"app-footer"),Vo())},directives:[Lx,Nx],styles:["p[_ngcontent-%COMP%]{display:block;font-size:medium}h2[_ngcontent-%COMP%]{margin-bottom:20px!important;color:#e30084;margin:auto}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:600}h1[_ngcontent-%COMP%]{color:#892687;text-align:center}"]}),e})(),kA=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-how-it-works"]],decls:55,vars:0,consts:[[2,"padding-top","100px","padding-bottom","20px"],[1,"container"],[2,"margin-bottom","30px","text-align","center"],[1,"row",2,"margin","20px"]],template:function(e,t){1&e&&(Bo(0,"app-nav-bar"),No(1,"body",0),No(2,"div",1),No(3,"h1",2),wa(4," How the Platform works "),Vo(),No(5,"div",3),No(6,"h4"),wa(7," To use Fellow Genius is very simple. Just follow the steps below to get started. It takes just a couple of minutes to register. "),Vo(),No(8,"h2"),wa(9,"For Learner"),Vo(),No(10,"div"),No(11,"p"),No(12,"b"),wa(13,"Step 1 - Register"),Vo(),Vo(),No(14,"p"),wa(15," To make the full use of Fellow Genius, learners must create an account here by providing their basic details like name, email ID, and phone number (required for OTP verification). The platform is SSO enabled with Google and you can sing up using ur Google credentials as well. "),Vo(),No(16,"p"),No(17,"strong"),wa(18,"Step 2 - Find an Expert"),Vo(),Vo(),No(19,"p"),wa(20," Once registered, the learner can search for instructors they need based on specialization and subject. A detailed profile of the Expert is provided to view their skills and qualification. After selecting the instructor just send a request to conduct a class. "),Vo(),No(21,"p"),No(22,"strong"),wa(23,"Step 3 - Pay fee"),Vo(),Vo(),No(24,"p"),wa(25," After selecting the preferred instructor, a learner or the student can proceed by paying the fee as requested by the instructor. The fee can be paid through Debit/Credit card, UPI, Netbanking, and Paypal. 50% of the fees is to be paid before taking the class. "),Vo(),No(26,"p"),No(27,"strong"),wa(28,"Step 4 - Start learning"),Vo(),Vo(),No(29,"p"),wa(30," Once the fee is paid, the learner and the Expert can collaborate together. Based on the availability and convenience of the Expert, finalize the classroom schedule and start learning. "),Vo(),Vo(),Vo(),No(31,"div",3),No(32,"h2"),wa(33,"For Expert"),Vo(),No(34,"div"),No(35,"p"),No(36,"strong"),wa(37,"Step 1 - Register"),Vo(),Vo(),No(38,"p"),wa(39," All the experts must register on Fellow Genius to get started. Go to our Sign up page and create an account with details like name, email ID, and phone number (required for OTP verification). It is simple to register and only takes a few minutes. The platform is SSO enabled with Google and you can sing up using ur Google credentials as well. "),Vo(),No(40,"p"),No(41,"strong"),wa(42,"Step 2 - Complete your profile"),Vo(),Vo(),No(43,"p"),wa(44," All the experts must complete their profile on Fellow Genius to get started. Go to our Profile completion Page and provide information. Please ensure to make it as relevant and comprehensive as possible since basis this only learner would reach out to you for the learning demands. "),Vo(),No(45,"p"),No(46,"strong"),wa(47,"Step 3 - Schedule your availability"),Vo(),Vo(),No(48,"p"),wa(49," As a next step, you need to schedule your availability by clicking on the Schedule tab on the left panel; To schedule the same; click on the timeslots you want to publish as available slots which would be visible to the learner and he/she can request to book your calendar. Also you can set it up one time or recurring as required. "),Vo(),No(50,"p"),No(51,"strong"),wa(52,"Step 4 - Start Mentoring"),Vo(),Vo(),No(53,"p"),wa(54," Once the profile is completed and availability is set you would be part of the Expert community at Fellow genius and then learners can search you and request for sessions. "),Vo(),Vo(),Vo(),Vo(),Vo())},directives:[Lx],styles:["p[_ngcontent-%COMP%]{display:block;font-size:medium}h2[_ngcontent-%COMP%]{color:#e30084;margin:auto;margin-top:10px!important;margin-bottom:10px!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:600}h1[_ngcontent-%COMP%]{color:#892687}h4[_ngcontent-%COMP%]{font-weight:600}"]}),e})();const AA=["googleSignUp"];function OA(e,t){1&e&&(No(0,"div",30),Bo(1,"app-loading"),No(2,"p",31),wa(3,"Signing in.."),Vo(),Vo())}function DA(e,t){if(1&e&&(No(0,"p",32),wa(1),Vo()),2&e){const e=Ko();Ss(1),Sa(e.errorText)}}let IA=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.router=e,this.loginDetailsService=t,this.httpService=i,this.snackBar=n,this.socialService=s,this.zone=r,this.dialogRef=o,this.authService=a,this.socialLogin=new Hx,this.isLoading=!1,this.hideSocialLogin="hideBlock",this.hide=!0,this.hideContainer="",this.studentLoginDetails=new Fy,this.tutorLoginDetails=new rT,this.tutorAvailabilitySchedule=new gk,this.incorrectLoginDetails=!1,this.loginModel=new jx,this.registrationModel=new Fx,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top"}}ngOnInit(){this.googleSDK()}toFacade(){this.router.navigate([""])}onLogin(e){setTimeout(()=>{this.isLoading=!1,this.hideContainer=""},2e4),this.isLoading=!0,this.hideContainer="hideBlock",this.loginModel.email=e.value.email,this.loginModel.password=e.value.password,this.loginModel.method=Bx.hashSync("manual",1),console.log(this.loginModel),this.authService.onLogin(this.loginModel),this.authService.getAuthStatusListener().subscribe(e=>{0==e?(this.errorText="Incorrect email or password",this.isLoading=!1,this.hideContainer="",this.incorrectLoginDetails=!0):1==e&&("Learner"==this.loginDetailsService.getLoginType()?this.toFacade():"Expert"==this.loginDetailsService.getLoginType()&&this.toHome())})}toSignUp(){this.router.navigate(["sign-up"])}toHome(){this.router.navigate(["home"])}toResetPassword(){this.router.navigate(["reset-password"])}openThankYouPage(){const e=new WE;e.disableClose=!0,this.dialogRef.open(fk,e).afterClosed().subscribe(e=>{this.role=e,this.registrationModel.role=e.role,this.registrationModel.password=e.password,this.authService.saveSocialLogin(this.registrationModel),this.authService.getAuthStatusListener().subscribe(e=>{1==e&&("Learner"==this.loginDetailsService.getLoginType()?this.toFacade():"Expert"==this.loginDetailsService.getLoginType()&&this.toHome())})})}openTermsAndConditions(){this.dialogRef.open(Vx,{width:"auto",height:"auto"})}prepareLoginButton(){null==this.auth2&&location.reload(),this.incorrectLoginDetails=!1,this.auth2.attachClickHandler(this.googleSignUp.nativeElement,{},e=>{let t=e.getBasicProfile();this.socialLogin.id=t.getId(),this.socialLogin.fullName=t.getName(),this.socialLogin.email=t.getEmail(),this.socialService.setSocialDetails(this.socialLogin),this.registrationModel.fullName=this.socialLogin.fullName,this.registrationModel.email=this.socialLogin.email,this.registrationModel.socialId=this.socialLogin.id,this.zone.run(()=>{setTimeout(()=>{this.isLoading=!1,this.hideContainer=""},2e4),this.isLoading=!0,this.hideContainer="hideBlock",this.loginModel.email=this.socialLogin.email,this.loginModel.password=this.socialLogin.id,this.loginModel.method=Bx.hashSync("social",1),console.log(this.loginModel),this.authService.onLogin(this.loginModel),this.authService.getAuthStatusListener().subscribe(e=>{0==e?this.httpService.checkUser(this.socialLogin.email).subscribe(e=>{e?(this.isLoading=!1,this.hideContainer=""):this.zone.run(()=>{this.openThankYouPage()})}):1==e&&("Learner"==this.loginDetailsService.getLoginType()?this.toFacade():"Expert"==this.loginDetailsService.getLoginType()&&this.toHome())})})},e=>{})}googleSDK(){var e,t,i,n;window.googleSDKLoaded=()=>{window.gapi.load("auth2",()=>{this.auth2=window.gapi.auth2.init({client_id:"254899928533-k6lru4oe7sbmpe22ns0m11rvtbokk3qk.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),this.prepareLoginButton()})},t="google-jssdk",n=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((i=e.createElement("script")).id=t,i.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",n.parentNode.insertBefore(i,n))}openForgotPassword(){}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(jy),Io(Og),Io(UE),Io(qx),Io(Bc),Io(eT),Io(vk))},e.\u0275cmp=gt({type:e,selectors:[["app-login"]],viewQuery:function(e,t){var i;1&e&&oc(AA,!0),2&e&&rc(i=uc())&&(t.googleSignUp=i.first)},decls:43,vars:6,consts:[["style","width: max-content; margin: auto; padding-top: 35vh;text-align: center;",4,"ngIf"],[1,"access_page","wi_full"],[1,"container"],[1,"page_wrapper"],[1,"access_icon_box"],["src","../../../assets/images/login-clip.svg","alt","#",1,"graphic_style"],[1,"access_field_box"],[1,"access_header"],["href","",1,"accs_logo"],["src","../../../assets/images/fellow genius logo.svg","alt","#"],[1,"access_data"],[1,"content_wrapper"],[1,"tagline"],["style","color: red",4,"ngIf"],[3,"ngSubmit"],["l","ngForm"],[1,"form-group"],[1,""],["type","email","id","email","ngModel","","name","email","required","","email","","maxlength","64",1,"form-control"],["email","ngModel"],["type","password","id","password","name","password","ngModel","","required","","maxLength","40",1,"form-control",3,"type"],["password","ngModel"],["routerLink","/reset-password",1,"frgt_pwd",3,"click"],["type","submit",1,"button","form_Btn",3,"disabled"],[1,"sepratr_login"],["type","button",1,"button","google_Btn",3,"click"],["googleSignUp",""],[1,"fab","fa-google"],[1,"access_footer"],["href","javascript:;","routerLink","/sign-up"],[2,"width","max-content","margin","auto","padding-top","35vh","text-align","center"],[2,"margin","1rem","font-size","large"],[2,"color","red"]],template:function(e,t){if(1&e){const e=Ho();Oo(0,OA,4,0,"div",0),No(1,"div",1),No(2,"div",2),No(3,"div",3),No(4,"div",4),Bo(5,"img",5),Vo(),No(6,"div",6),No(7,"div",7),No(8,"a",8),Bo(9,"img",9),Vo(),Vo(),No(10,"div",10),No(11,"div",11),No(12,"h2"),wa(13,"Log in"),Vo(),Bo(14,"div",12),Oo(15,DA,2,1,"p",13),No(16,"form",14,15),Wo("ngSubmit",(function(){ei(e);const i=Do(17);return t.onLogin(i)})),No(18,"div",16),No(19,"label",17),wa(20,"E-Mail"),Vo(),Bo(21,"input",18,19),Vo(),No(23,"div",16),No(24,"label",17),wa(25,"Password"),Vo(),Bo(26,"input",20,21),No(28,"a",22),Wo("click",(function(){return t.toResetPassword()})),wa(29,"Forgot Password ?"),Vo(),Vo(),No(30,"button",23),wa(31,"Login"),Vo(),No(32,"div",24),wa(33,"Easy login with"),Vo(),No(34,"button",25,26),Wo("click",(function(){return t.prepareLoginButton()})),Bo(36,"i",27),wa(37,"Google"),Vo(),Vo(),Vo(),Vo(),No(38,"div",28),No(39,"p"),wa(40,"Don't have an account yet? "),No(41,"a",29),wa(42,"Create an account"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(17);Mo("ngIf",t.isLoading),Ss(1),la(t.hideContainer),Ss(14),Mo("ngIf",t.incorrectLoginDetails),Ss(11),Mo("type",t.hide?"password":"text"),Ss(4),Mo("disabled",!e.valid)}},directives:[md,Zv,Gg,Wv,Bg,zg,Qv,oy,ly,uy,xm,Ey],styles:[".login-container[_ngcontent-%COMP%]{width:480px;display:block;padding:10px;margin:150px auto 0}.login-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-100px;right:-150px}.login-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;font-size:22px;width:100%;display:flex;align-items:center;margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:325px;position:relative}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{float:left}.login-instead[_ngcontent-%COMP%]{float:left;margin-top:20px}.login-instead[_ngcontent-%COMP%], .login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}.login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.login-instead[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),e})(),RA=(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-contact-us-info"]],decls:56,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","contact_banner"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-md-6"],[1,"banner_content"],[1,"contact_addrs"],[1,"icon_box"],["src","../../../assets/images/location.svg","alt","#"],["src","../../../assets/images/call.svg","alt","#"],["href","tel: 9899197950"],["src","../../../assets/images/email.svg","alt","#"],["href","mailto: fellowgeniuscc@gmail.com"],[1,"banner_image"],["src","../../../assets/images/contact-img.svg","alt","#"],[1,"wi_full","py_5","form_sec"],[1,"row"],[1,"col-12","col-lg-10","mx-auto"],[1,"sec_title","text-center"],[1,"col-12","col-lg-6"],[1,"form-group"],["type","text","name","name","placeholder","Your Name",1,"form-control"],["type","email","name","email","placeholder","Your E-Mail",1,"form-control"],["type","text","name","phone","placeholder","Your Phone Number",1,"form-control"],["cols","3","placeholder","Your Message",1,"form-control"],["type","submit","name","Submit","value","Submit",1,"submit_btn"]],template:function(e,t){1&e&&(Bo(0,"app-nav-bar"),No(1,"body"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"h1"),wa(9,"Contact us"),Vo(),No(10,"div",6),No(11,"ul"),No(12,"li"),No(13,"span",7),Bo(14,"img",8),Vo(),No(15,"span"),wa(16,"Flat No. 11 "),Bo(17,"br"),wa(18,"Dharam Kunj Apartment"),Bo(19,"br"),wa(20," Sector 9 Rohini, Delhi "),Vo(),Vo(),No(21,"li"),No(22,"span",7),Bo(23,"img",9),Vo(),No(24,"a",10),wa(25,"9899197950"),Vo(),Vo(),No(26,"li"),No(27,"span",7),Bo(28,"img",11),Vo(),No(29,"a",12),wa(30,"fellowgeniuscc@gmail.com"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(31,"div",4),No(32,"div",13),Bo(33,"img",14),Vo(),Vo(),Vo(),Vo(),Vo(),No(34,"section",15),No(35,"div",2),No(36,"div",16),No(37,"div",17),No(38,"div",18),No(39,"h2"),wa(40,"Send Us a Message"),Vo(),Vo(),No(41,"form"),No(42,"div",16),No(43,"div",19),No(44,"div",20),Bo(45,"input",21),Vo(),No(46,"div",20),Bo(47,"input",22),Vo(),No(48,"div",20),Bo(49,"input",23),Vo(),Vo(),No(50,"div",19),No(51,"div",20),Bo(52,"textarea",24),Vo(),No(53,"div",20),Bo(54,"input",25),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(55,"app-footer"),Vo())},directives:[Lx,Zv,Gg,Wv,Nx],styles:['@font-face{font-family:Wingdings;panose-1:5 0 0 0 0 0 0 0 0 0}@font-face{font-family:Cambria Math;panose-1:2 4 5 3 5 4 6 3 2 4}@font-face{font-family:Calibri;panose-1:2 15 5 2 2 2 4 3 2 4}@font-face{font-family:Quattrocento Sans;panose-1:0 0 0 0 0 0 0 0 0 0}.sub-heading[_ngcontent-%COMP%]{color:#e30084}.heading[_ngcontent-%COMP%]{color:#892687}.logo[_ngcontent-%COMP%]{width:100px;height:8vh;float:right}div.MsoNormal[_ngcontent-%COMP%], li.MsoNormal[_ngcontent-%COMP%], p.MsoNormal[_ngcontent-%COMP%]{margin:0 0 8pt;line-height:107%;font-size:11pt;font-family:Calibri,sans-serif}div.MsoCommentText[_ngcontent-%COMP%], li.MsoCommentText[_ngcontent-%COMP%], p.MsoCommentText[_ngcontent-%COMP%]{mso-style-link:"Comment Text Char";margin:0 0 8pt;font-size:10pt;font-family:Calibri,sans-serif}span.CommentTextChar[_ngcontent-%COMP%]{mso-style-name:"Comment Text Char";mso-style-link:"Comment Text"}span.msoIns[_ngcontent-%COMP%]{mso-style-name:"";text-decoration:underline;color:teal}span.msoDel[_ngcontent-%COMP%]{mso-style-name:"";text-decoration:line-through;color:red}.MsoChpDefault[_ngcontent-%COMP%]{font-family:Calibri,sans-serif}.MsoPapDefault[_ngcontent-%COMP%]{margin-bottom:8pt;line-height:107%}@page WordSection1{size[_ngcontent-%COMP%]:595.3pt   841.9pt[_ngcontent-%COMP%];margin:1in 1in 1in 1in}div.WordSection1[_ngcontent-%COMP%]{page:WordSection1}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{margin-bottom:0}']}),e})();const PA=["loginRef"],MA=["googleSignUp"];function LA(e,t){1&e&&(No(0,"div",50),Bo(1,"app-loading"),No(2,"p",51),wa(3,"Signing you up.."),Vo(),Vo())}function NA(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid Name"),Vo())}function VA(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid email"),Vo())}function BA(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid number"),Vo())}function FA(e,t){1&e&&(No(0,"span",53),wa(1,"Your password must be a minimum of 8 characters long. Your PW must contain at least one uppercase letter (A-Z), one lowercase (a-z), one number (0-9), and one special character (@, #,&, %)."),Vo())}function jA(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid OTP"),Vo())}let HA=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c,h){this.router=e,this.httpClient=t,this.studentService=i,this.tutorService=n,this.loginService=s,this.snackBar=r,this.dialogRef=o,this.cookieService=a,this.socialService=l,this.zone=c,this.authService=h,this.wrongOtp=!1,this.showInput=!0,this.verifyEmail=!1,this.incorrectLoginDetails=!1,this.termsAndConditionsChecked=!1,this.emailValid=!1,this.hide=!0,this.timeOut=!0,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.registrationModel=new Fx,this.loginModel=new jx,this.studentProfile=new By,this.socialLogin=new Hx,this.tutorProfile=new oT,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top"}}ngOnInit(){this.googleSDK(),this.seePassword()}otpChange(){console.log("input changes")}seePassword(){$(".toggle-password").each((function(e){$(this).on("click",(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$($(this).attr("toggle"));"password"==e.attr("type")?e.attr("type","text"):e.attr("type","password")}))}))}toSignUpPage(){this.router.navigate(["sign-up"])}toFacadePage(){this.router.navigate([""])}toHome(){this.router.navigate(["home"])}openThankYouPage(){const e=new WE;e.disableClose=!0,this.dialogRef.open(fk,e).afterClosed().subscribe(e=>{this.role=e.role,this.registrationModel.role="Learner",this.registrationModel.password=e.password,this.authService.saveSocialLogin(this.registrationModel),this.authService.getAuthStatusListener().subscribe(e=>{1==e&&("Learner"==this.loginService.getLoginType()?this.toFacadePage():"Expert"==this.loginService.getLoginType()&&this.toHome())})})}openTermsAndConditions(){this.dialogRef.open(Vx,{width:"auto",height:"auto"})}appendOtp(e){console.log(e);let t="";if(!(e.value.otp_1digit&&e.value.otp_2digit&&e.value.otp_3digit&&e.value.otp_4digit&&e.value.otp_5digit&&e.value.otp_6digit))return null;let i=e.value.otp_2digit,n=e.value.otp_3digit,s=e.value.otp_4digit,r=e.value.otp_5digit,o=e.value.otp_6digit;return t+=e.value.otp_1digit.toString(),t+=i.toString(),t+=n.toString(),t+=s.toString(),t+=r.toString(),t+=o.toString(),console.log(t),t}onSignUp(e){if(0==this.verifyEmail)this.isLoading=!0,this.registrationModel.fullName=e.value.fullName,this.registrationModel.email=e.value.email,this.registrationModel.password=e.value.password,this.registrationModel.contact=e.value.contact,this.registrationModel.role="Learner",this.httpClient.checkUser(this.registrationModel.email).subscribe(e=>{1==!e?(setTimeout(()=>{1==this.timeOut&&(this.emailValid=!0,this.isLoading=!1,this.showInput=!0)},25e3),this.httpClient.verifyEmail(this.registrationModel.email).subscribe(e=>{this.verificationOtp=e.response,this.timeOut=!1,this.verifyEmail=!0,this.isLoading=!1,this.showInput=!1})):(this.timeOut=!1,this.isLoading=!1,this.snackBar.open("You are already registered. Please Login.","close",this.config),this.router.navigate(["login"]))});else{console.log("in otp region");let t=this.appendOtp(e);console.log(t),null==t?this.wrongOtp=!0:(console.log(t,this.verificationOtp),Bx.compareSync(t,this.verificationOtp)?(console.log("otp matched !"),this.authService.onSignUp(this.registrationModel),this.authService.getAuthStatusListener().subscribe(e=>{0==e?(this.snackBar.open("registration not successful ! email already exists !","close",this.config),this.incorrectLoginDetails=!0,this.dialogRef.closeAll()):1==e&&("Learner"==this.loginService.getLoginType()?this.toFacadePage():"Expert"==this.loginService.getLoginType()&&this.toHome())})):this.wrongOtp=!0)}}prepareLoginButton(){console.log("called"),null==this.auth2&&location.reload(),this.auth2.attachClickHandler(this.googleSignUp.nativeElement,{},e=>{let t=e.getBasicProfile();this.socialLogin.id=t.getId(),this.socialLogin.fullName=t.getName(),this.socialLogin.email=t.getEmail(),this.socialService.setSocialDetails(this.socialLogin),this.registrationModel.fullName=this.socialLogin.fullName,this.registrationModel.email=this.socialLogin.email,this.registrationModel.socialId=this.socialLogin.id,this.httpClient.checkUser(this.socialLogin.email).subscribe(e=>{e?(this.isLoading=!1,this.snackBar.open("You are already registered. Please Login","close",this.config),this.router.navigate(["login"])):this.zone.run(()=>{this.openThankYouPage()})})},e=>{console.log(e),console.log("google pop up closed by the user")})}googleSDK(){var e,t,i,n;window.googleSDKLoaded=()=>{window.gapi.load("auth2",()=>{this.auth2=window.gapi.auth2.init({client_id:"254899928533-k6lru4oe7sbmpe22ns0m11rvtbokk3qk.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),this.prepareLoginButton()})},t="google-jssdk",n=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((i=e.createElement("script")).id=t,i.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",n.parentNode.insertBefore(i,n))}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(Og),Io(Hy),Io(aT),Io(jy),Io(UE),Io(eT),Io(Dx),Io(qx),Io(Bc),Io(vk))},e.\u0275cmp=gt({type:e,selectors:[["app-sign-up"]],viewQuery:function(e,t){var i;1&e&&(oc(PA,!0),oc(MA,!0)),2&e&&(rc(i=uc())&&(t.loginElement=i.first),rc(i=uc())&&(t.googleSignUp=i.first))},decls:99,vars:17,consts:[["style","\n      text-align: center;\n      margin-top: 20%;\n      margin-left: auto;\n      margin-right: auto;\n    ",4,"ngIf"],[1,"access_page","wi_full"],[1,"container"],[1,"page_wrapper"],[1,"access_icon_box"],["src","../../../assets/images/signup-clip.svg","alt","#",1,"graphic_style"],[1,"access_field_box"],[1,"access_header"],["href","",1,"back_button"],["src","../../../assets/images/arrow-grey.svg","alt","#"],["href","",1,"accs_logo"],["src","../../../assets/images/fellow genius logo.svg","alt","#"],[1,"access_data"],[1,"content_wrapper"],[1,"tagline"],[3,"ngSubmit"],["t","ngForm"],[1,"row"],[1,"col-12"],[1,"form-group"],[1,""],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","placeholder","Enter Full Name",1,"form-control"],["fullName","ngModel"],["class","help-block",4,"ngIf"],["type","email","id","email","name","email","ngModel","","required","","email","","maxlength","64","pattern","[a-zA-Z0-9_.+-]{1,20}@(?:(?:[a-zA-Z0-9-]+\\.)?[a-zA-Z]+\\.)?(gmail|piet|yahoo|hotmail|rediffmail|apple|microsoft)\\.([a-z]{2,4})(\\.[a-z]{2,4})?$","placeholder","Enter Email",1,"form-control"],["email","ngModel"],["type","text","id","contact","ngModel","","name","contact","required","","placeholder","Enter phone number",1,"form-control",3,"pattern"],["contact","ngModel"],[1,"password_wrap"],["id","password-field","type","password","name","password","ngModel","","required","","minlength","8","maxlength","20","placeholder","Enter password",1,"form-control",3,"type","pattern"],["password","ngModel"],["toggle","#password-field",1,"fa","fa-fw","fa-eye","field-icon","toggle-password"],[1,"col-12",2,"margin-bottom","10px"],["class","help-block","style","\n                        color: grey;\n                        font-size: smaller;\n                        margin-bottom: 10px;\n                      ",4,"ngIf"],["type","submit",1,"button","form_Btn",3,"disabled"],[1,"sepratr_login"],["type","button",1,"button","google_Btn",3,"click"],["googleSignUp",""],[1,"fab","fa-google"],[1,"access_footer"],["href",""],["src","../../../assets/images/email-verification-clip.svg","alt","#",1,"graphic_style"],["o","ngForm"],[1,"eml_vrfctn","form-group"],["type","number","id","otp_1digit","name","otp_1digit","ngModel","","maxlength","1","placeholder","_","required","",1,"verfcn_box"],["type","number","id","otp_2digit","name","otp_2digit","ngModel","","maxlength","1","placeholder","_","required","",1,"verfcn_box"],["type","number","id","otp_3digit","name","otp_3digit","ngModel","","maxlength","1","placeholder","_","required","",1,"verfcn_box"],["type","number","id","otp_4digit","name","otp_4digit","ngModel","","maxlength","1","placeholder","_","required","",1,"verfcn_box"],["type","number","id","otp_5digit","name","otp_5digit","ngModel","","maxlength","1","placeholder","_","required","",1,"verfcn_box"],["type","number","id","otp_6digit","name","otp_6digit","ngModel","","maxlength","1","placeholder","_","required","",1,"verfcn_box"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],[2,"margin","1rem","font-size","large"],[1,"help-block"],[1,"help-block",2,"color","grey","font-size","smaller","margin-bottom","10px"]],template:function(e,t){if(1&e){const e=Ho();No(0,"body"),Oo(1,LA,4,0,"div",0),No(2,"div",1),No(3,"div",2),No(4,"div",3),No(5,"div",4),Bo(6,"img",5),Vo(),No(7,"div",6),No(8,"div",7),No(9,"a",8),Bo(10,"img",9),Vo(),No(11,"a",10),Bo(12,"img",11),Vo(),Vo(),No(13,"div",12),No(14,"div",13),No(15,"h2"),wa(16,"Create account"),Vo(),Bo(17,"div",14),No(18,"form",15,16),Wo("ngSubmit",(function(){ei(e);const i=Do(19);return t.onSignUp(i)})),No(20,"div",17),No(21,"div",18),No(22,"div",19),No(23,"label",20),wa(24,"Full Name"),Vo(),Bo(25,"input",21,22),Oo(27,NA,2,0,"span",23),Vo(),Vo(),No(28,"div",18),No(29,"div",19),No(30,"label",20),wa(31,"E-Mail"),Vo(),Bo(32,"input",24,25),Oo(34,VA,2,0,"span",23),Vo(),Vo(),No(35,"div",18),No(36,"div",19),No(37,"label",20),wa(38,"Phone Number"),Vo(),Bo(39,"input",26,27),Oo(41,BA,2,0,"span",23),Vo(),Vo(),No(42,"div",18),No(43,"div",19),No(44,"label",20),wa(45,"Password"),Vo(),No(46,"div",28),Bo(47,"input",29,30),Bo(49,"span",31),Vo(),Vo(),Vo(),No(50,"div",32),Oo(51,FA,2,0,"span",33),Vo(),Vo(),No(52,"button",34),wa(53," Sign up "),Vo(),No(54,"div",35),wa(55,"Easy Sign up with"),Vo(),No(56,"button",36,37),Wo("click",(function(){return t.prepareLoginButton()})),Bo(58,"i",38),wa(59,"Google "),Vo(),Vo(),Vo(),Vo(),No(60,"div",39),No(61,"p"),wa(62," Already have an Account ? "),No(63,"a",40),wa(64,"Log in"),Vo(),No(65,"span"),wa(66,"or"),Vo(),wa(67,"Sign up as an expert "),Vo(),Vo(),Vo(),Vo(),Vo(),No(68,"div",2),No(69,"div",3),No(70,"div",4),Bo(71,"img",41),Vo(),No(72,"div",6),No(73,"div",7),No(74,"a",10),Bo(75,"img",11),Vo(),Vo(),No(76,"div",12),No(77,"div",13),No(78,"h2"),wa(79,"Email Verification"),Vo(),No(80,"div",14),wa(81,"Enter the verification code sent to your email address"),Vo(),Oo(82,jA,2,0,"span",23),No(83,"form",15,42),Wo("ngSubmit",(function(){ei(e);const i=Do(84);return t.onSignUp(i)})),No(85,"div",43),Bo(86,"input",44),Bo(87,"input",45),Bo(88,"input",46),Bo(89,"input",47),Bo(90,"input",48),Bo(91,"input",49),Vo(),No(92,"button",34),wa(93,"Verify Account"),Vo(),Vo(),Vo(),Vo(),No(94,"div",39),No(95,"p"),wa(96,"Didn't receive code? "),No(97,"a",40),wa(98,"Resend"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(19),i=Do(26),n=Do(33),s=Do(40),r=Do(48),o=Do(84);Ss(1),Mo("ngIf",t.isLoading),Ss(1),la(t.isLoading?"hideBlock":""),Ss(1),la(t.verifyEmail?"hideBlock":""),Ss(24),Mo("ngIf",!i.valid&&i.touched),Ss(7),Mo("ngIf",!n.valid&&n.touched||t.emailValid),Ss(5),Mo("pattern",t.mobNumberPattern),Ss(2),Mo("ngIf",!s.valid&&s.touched),Ss(6),Mo("type",t.hide?"password":"text")("pattern",t.passwordPattern),Ss(4),Mo("ngIf",r.invalid&&(r.dirty||r.touched)),Ss(1),Mo("disabled",!e.valid),Ss(16),la(t.verifyEmail?"":"hideBlock"),Ss(14),Mo("ngIf",t.wrongOtp),Ss(10),Mo("disabled",o.invalid)}},directives:[md,Zv,Gg,Wv,Bg,zg,Qv,oy,uy,ly,fy,hy,sv,Ey],styles:[""]}),e})(),UA=0;function qA(e,t){let i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function WA(e,t){let i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split(".");for(let s=0;s<n.length&&!JA(i);s++)i=i[n[s]];return i}function zA(e,t,i){let n,s,r=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=i||{},a=o,l=r.length;for(n=0;n<l;n++)s=r[n],n+1===l?a[s]=void 0===t?{}:t:XA(a[s])&&(a[s]={}),a=a[s];return o}function GA(e,t){delete e[t]}function YA(e){return!XA(e)&&e.constructor==={}.constructor}function $A(e,t){if(!XA(t)){let i=e,n=t,s=Object.keys(t),r="deepMerge";for(let e of s)XA(i[r])||-1===i[r].indexOf(e)||!YA(n[e])&&!Array.isArray(n[e])?i[e]=n[e]:KA(i[e],i[e],n[e],!0)}}function KA(e,t,i,n){let s=e&&"object"==typeof e?e:{},r=arguments.length;n&&(r-=1);for(let o=1;o<r;o++){if(!arguments[o])continue;let e=arguments[o];Object.keys(e).forEach(t=>{let i,r=s[t],o=e[t];Array.isArray(o)&&Array.isArray(r);n&&(YA(o)||Array.isArray(o))?YA(o)?(i=r||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?KA(i,{},o,n):s[t]=KA(i,{},o,n)):(i=r||[],s[t]=KA([],i,o,n)):s[t]=o})}return s}function XA(e){return null==e}function JA(e){return void 0===e}function QA(e){return e+"_"+UA++}function ZA(e,t){return e===t||!(e===document||!e)&&ZA(e.parentNode,t)}function eO(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}}function tO(e){let t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function iO(){return!1}function nO(e){return Node,e}function sO(e,t){let i="string"==typeof e?document.querySelector(e):e;if(i.ej2_instances)for(let n of i.ej2_instances)if(n instanceof t)return n;return null}const rO={latn:{_digits:"0123456789",_type:"numeric"}},oO={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},aO=[0,1,2,3,4,5,6,7,8,9];let lO=(()=>{class e{static getMainObject(e,t){return WA("main."+t,e)}static getNumberingSystem(e){return WA("supplemental.numberingSystems",e)||this.numberingSystems}static reverseObject(e,t){let i=t||Object.keys(e),n={};for(let s of i)n.hasOwnProperty(e[s])||(n[e[s]]=s);return n}static getSymbolRegex(e){let t=e.map(e=>e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")).join("|");return new RegExp(t,"g")}static getSymbolMatch(e){let t=Object.keys(oO),i={};for(let n of t)i[e[n]]=oO[n];return i}static constructRegex(e){let t=e.length,i="";for(let n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i}static convertValueParts(e,t,i){return e.replace(t,e=>i[e])}static getDefaultNumberingSystem(e){let t={};return t.obj=WA("numbers",e),t.nSystem=WA("defaultNumberingSystem",t.obj),t}static getCurrentNumericOptions(e,t,i,n){let s={},r=this.getDefaultNumberingSystem(e);if(!JA(r.nSystem)||n){let e=n?WA("obj.mapperDigits",r):WA(r.nSystem+"._digits",t);JA(e)||(s.numericPair=this.reverseObject(e,aO),s.numberParseRegex=new RegExp(this.constructRegex(e),"g"),s.numericRegex="["+e[0]+"-"+e[9]+"]",i&&(s.numericRegex=e[0]+"-"+e[9],s.symbolNumberSystem=WA(n?"numberSymbols":"symbols-numberSystem-"+r.nSystem,r.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=r.nSystem))}return s}static getNumberMapper(e,t,i){let n={mapper:{}},s=this.getDefaultNumberingSystem(e);if(!JA(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=WA("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=WA("timeSeparator",n.numberSymbols);let e=WA(s.nSystem+"._digits",t);if(!JA(e))for(let t of aO)n.mapper[t]=e[t]}return n}}return e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=rO,e})();const cO={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};var hO;!function(e){const t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){let i=e.getDate(),n=e.getMonth(),s=e.getFullYear(),r=n+1,o=s;r<3&&(o-=1,r+=12);let a=Math.floor(o/100),l=a-Math.floor(a/4)-2,c=Math.floor(365.25*(o+4716))+Math.floor(30.6001*(r+1))+i-l-1524;a=Math.floor((c-1867216.25)/36524.25),l=a-Math.floor(a/4)+1;let h=c+l+1524,d=Math.floor((h-122.1)/365.25),u=Math.floor(365.25*d),p=Math.floor((h-u)/30.6001);i=h-u-Math.floor(30.6001*p),n=Math.floor((h-u)/20.6001),n>13&&(d+=1,n-=12),n-=1,s=d-4716;let f=c-24e5,m=c-1948084,g=Math.floor(m/10631);m-=10631*g;let v=Math.floor((m-.1335)/(10631/30)),y=30*g+v;m-=Math.floor(v*(10631/30)+.1335);let b=Math.floor((m+28.5001)/29.5);13===b&&(b=12);let w=m-Math.floor(29.5001*b-29),S=0;for(;S<t.length&&!(t[S]>f);S++);let C=S+16260,_=Math.floor((C-1)/12),E=_+1,T=C-12*_,x=f-t[S-1]+1;return(x+"").length>2&&(x=w,T=b,E=y),{year:E,month:T,date:x}},e.toGregorian=function(e,i,n){let s=Math.floor(n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5+.5),r=Math.floor((s-1867216.25)/36524.25);r=s+1+r-Math.floor(r/4);let o=r+1524,a=Math.floor((o-122.1)/365.25),l=Math.floor(365.25*a),c=Math.floor((o-l)/30.6001),h=o-l-Math.floor(30.6001*c),d=c-(c>13.5?13:1),u=a-(d>2.5?4716:4715);return u<=0&&d--,new Date(u+"/"+d+"/"+h)}}(hO||(hO={}));const dO=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,uO=["sun","mon","tue","wed","thu","fri","sat"],pO={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},fO={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"};class mO{static dateFormat(e,t,i){let n=PO.getDependables(i,e,t.calendar),s=(WA("parserObject.numbers",n),n.dateObject),r={isIslamic:PO.islamicRegex.test(t.calendar)},o=t.format||PO.getResultantPattern(t.skeleton,n.dateObject,t.type,!1,"");if(r.dateSeperator=PO.getDateSeparator(n.dateObject),JA(o))eO("Format options or type given must be invalid");else{o=PO.ConvertDateToWeekFormat(o),r.pattern=o,r.numMapper=lO.getNumberMapper(n.parserObject,lO.getNumberingSystem(i));let e=o.match(dO)||[];for(let t of e){let e=t.length,i=t[0];switch("K"===i&&(i="h"),i){case"E":case"c":r.weekday=n.dateObject[PO.days]["stand-alone"][PO.monthIndex[e]];break;case"M":case"L":r.month=n.dateObject[PO.month]["stand-alone"][PO.monthIndex[e]];break;case"a":r.designator=WA("dayPeriods.format.wide",s);break;case"G":r.era=WA("eras."+(e<=3?"eraAbbr":4===e?"eraNames":"eraNarrow"),n.dateObject);break;case"z":r.timeZone=WA("dates.timeZoneNames",n.parserObject)}}}return e=>isNaN(e.getDate())?null:this.intDateFormatter(e,r)}static intDateFormatter(e,t){let i="",n=t.pattern.match(PO.dateParseRegex),s=this.getCurrentDateValue(e,t.isIslamic);for(let r of n){let n,o=r.length,a=r[0];"K"===a&&(a="h");let l,c,h="",d="";switch(a){case"M":case"L":n=s.month,o>2?i+=t.month[n]:l=!0;break;case"E":case"c":i+=t.weekday[uO[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(l=!0,"d"===a)n=s.date;else if("f"===a){l=!1,c=!0,h=e[pO[a]]().toString(),h=h.substring(0,o);let t=h.length;if(o!==t){if(o>3)continue;for(let e=0;e<o-t;e++)h="0"+h.toString()}d+=h}else n=e[pO[a]]();"h"===a&&(n=n%12||12);break;case"y":c=!0,d+=s.year,2===o&&(d=d.substr(d.length-2));break;case"a":let u=e.getHours()<12?"am":"pm";i+=t.designator[u];break;case"G":let p=e.getFullYear()<0?0:1,f=t.era[p];XA(f)&&(f=t.era[p?0:1]),i+=f||"";break;case"'":i+="''"===r?"'":r.replace(/\'/g,"");break;case"z":let m=e.getTimezoneOffset(),g=o<4?"+H;-H":t.timeZone.hourFormat;g=g.replace(/:/g,t.numMapper.timeSeparator),0===m?i+=t.timeZone.gmtZeroFormat:(c=!0,d=this.getTimeZoneValue(m,g)),d=t.timeZone.gmtFormat.replace(/\{0\}/,d);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;case"W":l=!0,n=PO.getWeekOfYear(e);break;default:i+=r}l&&(c=!0,d=this.checkTwodigitNumber(n,o)),c&&(i+=lO.convertValueParts(d,PO.latnParseRegex,t.numMapper.mapper))}return i}static getCurrentDateValue(e,t){return t?hO.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}static checkTwodigitNumber(e,t){let i=e+"";return 2===t&&2!==i.length?"0"+i:i}static getTimeZoneValue(e,t){let i=t.split(";")[e>0?1:0],n=Math.abs(e);return i.replace(/HH?|mm/g,e=>{let t=e.length,i=-1!==e.indexOf("H");return this.checkTwodigitNumber(Math.floor(i?n/60:n%60),t)})}}const gO={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},vO=["infinity","nan","group","decimal","exponential"];class yO{static numberFormatter(e,t,i){let n,s=KA({},t),r={},o={},a=PO.getDependables(i,e,"",!0);o.numberMapper=lO.getNumberMapper(a.parserObject,lO.getNumberingSystem(i),!0),o.currencySymbol=PO.getCurrencySymbol(a.numericObject,s.currency||kO,t.altSymbol),o.percentSymbol=o.numberMapper.numberSymbols.percentSign,o.minusSymbol=o.numberMapper.numberSymbols.minusSign;let l=o.numberMapper.numberSymbols;if(t.format&&!PO.formatRegex.test(t.format))r=PO.customFormat(t.format,o,a.numericObject);else{KA(s,PO.getProperNumericSkeleton(t.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,n=PO.getSymbolPattern(s.type,o.numberMapper.numberSystem,a.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),JA(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),JA(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(n=n.replace(/\u00A4/g,PO.defaultCurrency));{let e=n.split(";");r.nData=PO.getFormatData(e[1]||"-"+e[0],!0,o.currencySymbol),r.pData=PO.getFormatData(e[0],!1,o.currencySymbol),s.useGrouping&&(s.groupSeparator=l[vO[2]],s.groupData=this.getGroupingDetails(e[0]))}if(JA(s.minimumFractionDigits)&&(s.minimumFractionDigits=r.nData.minimumFraction),JA(s.maximumFractionDigits)){let e=r.nData.maximumFraction;s.maximumFractionDigits=JA(e)&&s.isPercent?0:e}let e=s.minimumFractionDigits,i=s.maximumFractionDigits;JA(e)||JA(i)||e>i&&(s.maximumFractionDigits=e)}return KA(r.nData,s),KA(r.pData,s),e=>isNaN(e)?l[vO[1]]:isFinite(e)?this.intNumberFormatter(e,r,o):l[vO[0]]}static getGroupingDetails(e){let t={},i=e.match(PO.negativeDataRegex);if(i&&i[4]){let e=i[4],n=e.lastIndexOf(",");if(-1!==n){let i=e.split(".")[0];t.primary=i.length-n-1;let s=e.lastIndexOf(",",n-1);-1!==s&&(t.secondary=n-1-s)}}return t}static checkValueRange(e,t,i,n){let s=n?"f":"s",r=0,o=gO["l"+s],a=gO["m"+s];if(JA(e)||(this.checkRange(e,o,n),r++),JA(t)||(this.checkRange(t,a,n),r++),2===r){if(!(e<t))return!0;eO(a+"specified must be less than the"+o)}else i&&1===r&&eO("Both"+a+"and"+a+"must be present");return!1}static checkRange(e,t,i){let n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&eO(t+"value must be within the range"+n[0]+"to"+n[1])}static intNumberFormatter(e,t,i){let n;if(!JA(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;let s="";return n.isPercent&&(e*=100),n.groupOne?s=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(s=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(s=this.processMinimumIntegers(s,n.minimumIntegerDigits))),"scientific"===n.type&&(s=e.toExponential(n.maximumFractionDigits),s=s.replace("e",i.numberMapper.numberSymbols[vO[4]])),s=s.replace(".",i.numberMapper.numberSymbols[vO[3]]),n.useGrouping&&(s=this.groupNumbers(s,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[vO[3]]||".",n.groupData.secondary)),s=lO.convertValueParts(s,PO.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+s+n.nend}}static processSignificantDigits(e,t,i){let n,s=e+"";return s.length<t?e.toPrecision(t):(s=e.toPrecision(i),n=+s,n+"")}static groupNumbers(e,t,i,n,s){let r=!XA(s)&&0!==s,o=e.split(n),a=o[0],l=a.length,c="";for(;l>t;)c=a.slice(l-t,l)+(c.length?i+c:""),l-=t,r&&(t=s,r=!1);return o[0]=a.slice(0,l)+(c.length?i:"")+c,o.join(n)}static processFraction(e,t,i){let n=(e+"").split(".")[1],s=n?n.length:0;if(t&&s<t){let i="";if(0!==s){i+=e;for(let e=0;e<t-s;e++)i+="0";return i}return i=e.toFixed(t),e.toFixed(t)}return!XA(i)&&(s>i||0===i)?e.toFixed(i):e+""}static processMinimumIntegers(e,t){let i=e.split("."),n=i[0],s=n.length;if(s<t){for(let e=0;e<t-s;e++)n="0"+n;i[0]=n}return i.join(".")}}const bO=/^[0-9]*$/,wO={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},SO=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,CO=/,/g,_O=["minusSign","infinity"];class EO{constructor(e){this.ranArray=[],this.boundedEvents={},XA(e)||(this.context=e)}on(e,t,i,n){if(XA(t))return;let s=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:s}]:XA(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:s,id:n}))}off(e,t,i){if(this.notExist(e))return;let n=WA(e,this.boundedEvents);if(t){for(let e=0;e<n.length;e++)if(i){if(n[e].id===i){n.splice(e,1);let t=this.ranArray.indexOf(i);-1!==t&&this.ranArray.splice(t,1);break}}else if(t===n[e].handler){n.splice(e,1);break}}else delete this.boundedEvents[e]}notify(e,t,i,n){if(this.notExist(e))return void(i&&i.call(this,t));t&&(t.name=e);let s=WA(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(s,t,i,n,0);for(let r of s)r.handler.call(r.context,t);i&&i.call(this,t)}blazorCallback(e,t,i,n,s){let r=s===e.length-1;if(s<e.length){let o=e[s],a=o.handler.call(o.context,t);if(a&&"function"==typeof a.then){if(!i)return a;a.then(a=>{if(a="string"==typeof a&&this.isJson(a)?JSON.parse(a,this.dateReviver):a,KA(t,t,a,!0),!i||!r)return this.blazorCallback(e,t,i,n,s+1);i.call(o.context,t)}).catch(e=>{n&&n.call(o.context,"string"==typeof e&&this.isJson(e)?JSON.parse(e,this.dateReviver):e)})}else{if(!i||!r)return this.blazorCallback(e,t,i,n,s+1);i.call(o.context,t)}}}dateReviver(e,t){return iO&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t}isJson(t){try{JSON.parse(t)}catch(e){return!1}return!0}destroy(){this.boundedEvents=this.context=void 0}notExist(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0}isHandlerPresent(e,t){for(let i of e)if(i.handler===t)return!0;return!1}}let TO=new EO,xO={},kO="USD";const AO=["numericObject","dateObject"];class OO{constructor(e){e&&(this.culture=e)}getDateFormat(e){return mO.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},xO)}getNumberFormat(e){return e&&!e.currency&&(e.currency=kO),yO.numberFormatter(this.getCulture(),e||{},xO)}getDateParser(e){return class{static dateParser(e,t,i){let n,s=PO.getDependables(i,e,t.calendar),r=lO.getCurrentNumericOptions(s.parserObject,lO.getNumberingSystem(i),!1,!1),o={},a=t.format||PO.getResultantPattern(t.skeleton,s.dateObject,t.type,!1,""),l="";if(JA(a))eO("Format options or type given must be invalid");else{a=PO.ConvertDateToWeekFormat(a),o={isIslamic:PO.islamicRegex.test(t.calendar),pattern:a,evalposition:{},culture:e};let c=a.match(PO.dateParseRegex)||[],h=c.length,d=0,u=0,p=!1,f=r.numericRegex,m=lO.getNumberMapper(s.parserObject,lO.getNumberingSystem(i));for(let e=0;e<h;e++){let t,i,r=c[e],a=r.length,g="K"===r[0]?"h":r[0],v=fO[g],y=2===a?"":"?";switch(p&&(d=u,p=!1),g){case"E":case"c":let e;e=s.dateObject[PO.days]["stand-alone"][PO.monthIndex[a]];let c=lO.reverseObject(e);l+="("+Object.keys(c).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(i=!0,("M"===g||"L"===g)&&a>2){let e;e=s.dateObject.months["stand-alone"][PO.monthIndex[a]],o[v]=lO.reverseObject(e),l+="("+Object.keys(o[v]).join("|")+")"}else if("f"===g){if(a>3)continue;t=!0,l+="("+f+f+"?"+f+"?)"}else t=!0,l+="("+f+f+y+")";"h"===g&&(o.hour12=!0);break;case"W":l+="("+f+(1===a?"?":"")+f+")";break;case"y":i=t=!0,l+=2===a?"("+f+f+")":"("+f+"{"+a+",})";break;case"a":i=!0;let h=WA("dayPeriods.format.wide",s.dateObject);o[v]=lO.reverseObject(h),l+="("+Object.keys(o[v]).join("|")+")";break;case"G":i=!0,o[v]=lO.reverseObject(WA("eras."+(a<=3?"eraAbbr":4===a?"eraNames":"eraNarrow"),s.dateObject)),l+="("+Object.keys(o[v]).join("|")+"?)";break;case"z":i=0!==(new Date).getTimezoneOffset(),o[v]=WA("dates.timeZoneNames",s.parserObject);let d=o[v];n=a<4;let b=n?"+H;-H":d.hourFormat;b=b.replace(/:/g,m.timeSeparator),l+="("+this.parseTimeZoneRegx(b,d,f)+")?",p=!0,u=n?6:12;break;case"'":l+="("+r.replace(/\'/g,"")+")?";break;default:l+="([\\D])"}i&&(o.evalposition[v]={isNumber:t,pos:e+1+d,hourOnly:n}),e!==h-1||XA(l)||(o.parserRegex=new RegExp("^"+l+"$","i"))}}return e=>{let t=this.internalDateParse(e,o,r);if(XA(t)||!Object.keys(t).length)return null;if(o.isIslamic){let e={},i=t.year,n=t.day,s=t.month,r=i?i+"":"",o=2===r.length;i&&s&&n&&!o||(e=hO.getHijriDate(new Date)),o&&(i=parseInt((e.year+"").slice(0,2)+r,10));let a=hO.toGregorian(i||e.year,s||e.month,n||e.date);t.year=a.getFullYear(),t.month=a.getMonth()+1,t.day=a.getDate()}return this.getDateObject(t)}}static getDateObject(e,t){let i=t||new Date;i.setMilliseconds(0);let n=["hour","minute","second","milliseconds","month","day"],s=e.year,r=e.designator,o=e.timeZone;JA(s)||((s+"").length<=2&&(s+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(s));for(let a of n){let t=e[a];if(JA(t)&&"day"===a&&i.setDate(1),!JA(t))if("month"===a){if(t-=1,t<0||t>11)return new Date("invalid");let e=i.getDate();i.setDate(1),i[wO[a]](t);let n=new Date(i.getFullYear(),t+1,0).getDate();i.setDate(e<n?e:n)}else{if("day"===a){let e=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(t<1||t>e)return null}i[wO[a]](t)}}if(!JA(r)){let e=i.getHours();"pm"===r?i.setHours(e+(12===e?0:12)):12===e&&i.setHours(0)}if(!JA(o)){let e=o-i.getTimezoneOffset();0!==e&&i.setMinutes(i.getMinutes()+e)}return i}static internalDateParse(e,t,i){let n=e.match(t.parserRegex),s={hour:0,minute:0,second:0};if(XA(n))return null;{let e=Object.keys(t.evalposition);for(let r of e){let e=t.evalposition[r],o=n[e.pos];if(e.isNumber)s[r]=this.internalNumberParser(o,i);else if("timeZone"!==r||JA(o))o="month"!==r||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?o:o[0].toUpperCase()+o.substring(1).toLowerCase(),s[r]=t[r][o];else{let t,o=e.pos,a=n[o+1],l=!JA(a);e.hourOnly?t=60*this.getZoneValue(l,a,n[o+4],i):(t=60*this.getZoneValue(l,a,n[o+7],i),t+=this.getZoneValue(l,n[o+4],n[o+10],i)),XA(t)||(s[r]=t)}}t.hour12&&(s.hour12=!0)}return s}static internalNumberParser(e,t){return e=lO.convertValueParts(e,t.numberParseRegex,t.numericPair),bO.test(e)?+e:null}static parseTimeZoneRegx(e,t,i){let n,s,r=t.gmtFormat,o="("+i+")("+i+")";return n=e.replace("+","\\+"),n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+o+")"):n.replace(/H|m/g,"("+o+"?)"),s=n.split(";").map(e=>r.replace("{0}",e)),n=s.join("|")+"|"+t.gmtZeroFormat,n}static getZoneValue(e,t,i,n){let s=e?t:i;if(!s)return 0;let r=this.internalNumberParser(s,n);return e?-r:r}}.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},xO)}getNumberParser(e){return class{static numberParser(e,t,i){let n,s,r=PO.getDependables(i,e,"",!0),o={custom:!0};if(PO.formatRegex.test(t.format)||!t.format?(KA(o,PO.getProperNumericSkeleton(t.format||"N")),o.custom=!1):KA(o,PO.customFormat(t.format,null,null)),WA("numbers",r.parserObject),n=lO.getCurrentNumericOptions(r.parserObject,lO.getNumberingSystem(i),!0,!1),o.symbolRegex=lO.getSymbolRegex(Object.keys(n.symbolMatch)),o.infinity=n.symbolNumberSystem[_O[1]],s=PO.getSymbolPattern(o.type,n.numberSystem,r.numericObject,o.isAccount),s){s=s.replace(/\u00A4/g,PO.defaultCurrency);let e=s.split(";");o.nData=PO.getFormatData(e[1]||"-"+e[0],!0,""),o.pData=PO.getFormatData(e[0],!0,"")}return e=>this.getParsedNumber(e,o,n)}static getParsedNumber(e,t,i){let n,s,r,o,a,l;if(-1!==e.indexOf(t.infinity))return 1/0;{e=lO.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=lO.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);let c=e.match(SO);if(XA(c))return NaN;o=c[1],r=c[2];let h=c[5];return a=c[6],n=t.custom?o===t.nData.nlead&&a===t.nData.nend:-1!==o.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend),s=n?t.nData.isPercent:t.pData.isPercent,r=r.replace(CO,""),h&&(r+=h),l=+r,("percent"===t.type||s)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l}}}.numberParser(this.getCulture(),e||{format:"N"},xO)}formatNumber(e,t){return this.getNumberFormat(t)(e)}formatDate(e,t){return this.getDateFormat(t)(e)}parseDate(e,t){return this.getDateParser(t)(e)}parseNumber(e,t){return this.getNumberParser(t)(e)}getDatePattern(e,t){return PO.getActualDateTimeFormat(this.getCulture(),e,xO,t)}getNumberPattern(e,t){return PO.getActualNumberFormat(this.getCulture(),e,xO,t)}getFirstDayOfWeek(){return PO.getWeekData(this.getCulture(),xO)}getCulture(){return this.culture||"en-US"}}function DO(e,t){let i=PO.getDependables(xO,e,"",!0)[AO[0]],n=PO.getDependables(xO,e,"")[AO[1]],s=WA("defaultNumberingSystem",i),r=WA("symbols-numberSystem-"+s,i),o=PO.getSymbolPattern(t||"decimal",s,i,!1);return KA(r,PO.getFormatData(o,!0,"",!0),{dateSeparator:PO.getDateSeparator(n)})}function IO(e){return PO.getDependables(xO,"",e,!1)[AO[1]]}const RO={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};var PO;!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;const t=/[0-9]/g;e.defaultCurrency="$";const i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,s={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi,e.islamicRegex=/^islamic/;const r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;const o={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function a(t,i,n,s,r){let o,a=n||"date";if(r)o=d({skeleton:t},r).format||d({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(o=WA(a+"Formats."+t,i),"dateTime"===a){let e=WA("dateFormats."+t,i),n=WA("timeFormats."+t,i);o=o.replace("{1}",e).replace("{0}",n)}}else o=WA("dateTimeFormats.availableFormats."+t,i);JA(o)&&"yMd"===t&&(o="M/d/y")}return o}function l(t,i,n,s){let r={},o=n||"gregorian";return r.parserObject=lO.getMainObject(t,i)||e.defaultObject,s?r.numericObject=WA("numbers",r.parserObject):r.dateObject=WA("dates.calendars."+o,r.parserObject),r}function c(e,t,i,n){return WA(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?WA(e+"Formats-numberSystem-"+t+".standard",i):"")}function h(t){return t.match(e.dateConverterMapper),t}function d(e,t){let i=e.format||e.skeleton,n=WA((t||"en-US")+"."+i,RO);return n||(n=WA("en-US."+i,RO)),n&&(n=h(n),e.format=n.replace(/tt/,"a")),e}function u(t){let i=t.match(e.formatRegex),n={},s=i[1].toUpperCase();return n.isAccount="A"===s,n.type=e.patternMatcher[s],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function p(i,n,s,r){let o=r?{}:{nlead:"",nend:""},a=i.match(e.customRegex);if(a){r||(o.nlead=f(a[1],s),o.nend=f(a[10],s),o.groupPattern=a[4]);let e=a[7];if(e&&n){let i=e.match(t);o.minimumFraction=XA(i)?0:i.length,o.maximumFraction=e.length-1}}return o}function f(t,i){return t?t.replace(e.defaultCurrency,i):""}function m(e,t,i){return WA("currencies."+t+(i?"."+i:".symbol"),e)||WA("currencies."+t+".symbol-alt-narrow",e)||"$"}function g(t,n,s){let r={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},o=t.match(e.customRegex);if(XA(o)||""===o[5]&&"N/A"!==t)return r.type=void 0,r;r.nlead=o[1],r.nend=o[10];let a=o[6];r.useGrouping=-1!==a.indexOf(","),a=a.replace(/,/g,"");let l=o[7];if(-1!==a.indexOf("0")&&(r.minimumIntegerDigits=a.length-a.indexOf("0")),XA(l)||(r.minimumFractionDigits=l.lastIndexOf("0"),r.maximumFractionDigits=l.lastIndexOf("#"),-1===r.minimumFractionDigits&&(r.minimumFractionDigits=0),(-1===r.maximumFractionDigits||r.maximumFractionDigits<r.minimumFractionDigits)&&(r.maximumFractionDigits=r.minimumFractionDigits)),XA(n)?KA(r,v([r.nlead,r.nend],"%","%")):(KA(r,v([r.nlead,r.nend],"$",n.currencySymbol)),r.isCurrency||KA(r,v([r.nlead,r.nend],"%",n.percentSymbol))),!XA(s)){let e=c(r.type,n.numberMapper.numberSystem,s,!1);r.useGrouping&&(r.groupSeparator=n.numberMapper.numberSymbols[i[2]],r.groupData=yO.getGroupingDetails(e.split(";")[0])),r.nlead=r.nlead.replace(/\'/g,""),r.nend=r.nend.replace(/\'/g,"")}return r}function v(e,t,i){let n={nlead:e[0],nend:e[1]};for(let s=0;s<2;s++){let r=e[s],a=r.indexOf(t);if(-1!==a&&(a<r.indexOf("'")||a>r.lastIndexOf("'"))){n[o[s]]=r.substr(0,a)+i+r.substr(a+1),n[o[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=a,e.getDependables=l,e.getSymbolPattern=c,e.ConvertDateToWeekFormat=h,e.compareBlazorDateFormats=d,e.getProperNumericSkeleton=u,e.getFormatData=p,e.getCurrencySymbol=m,e.customFormat=function(e,t,i){let n={},s=e.split(";"),r=["pData","nData","zeroData"];for(let o=0;o<s.length;o++)n[r[o]]=g(s[o],t,i);return XA(n.nData)&&(n.nData=KA({},n.pData),n.nData.nlead=XA(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=v,e.getDateSeparator=function(e){let t=(WA("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,r){let o=l(i,e,t.calendar),c=t.format||a(t.skeleton,o.dateObject,t.type);if(r){if(c=c.replace(n,e=>s[e]),-1!==c.indexOf("z")){let e,t=c.match(/z/g).length,n={timeZone:{}};n.numMapper=lO.getNumberMapper(o.parserObject,lO.getNumberingSystem(i)),n.timeZone=WA("dates.timeZoneNames",o.parserObject);let s=(new Date).getTimezoneOffset(),r=t<4?"+H;-H":n.timeZone.hourFormat;r=r.replace(/:/g,n.numMapper.timeSeparator),0===s?e=n.timeZone.gmtZeroFormat:(e=mO.getTimeZoneValue(s,r),e=n.timeZone.gmtFormat.replace(/\{0\}/,e)),c=c.replace(/[z]+/,'"'+e+'"')}c=c.replace(/ $/,"")}return c},e.getActualNumberFormat=function(t,i,n,s){let r,o,a=l(n,t,"",!0),h={custom:!0},d={},f=(i.format||"").match(e.currencyFormatRegex),g=(e.formatRegex.test(i.format)&&u(i.format||"N"),{});if(f){g.numberMapper=lO.getNumberMapper(a.parserObject,lO.getNumberingSystem(n),!0);let e=m(a.numericObject,i.currency||kO,i.altSymbol),t=c("currency",g.numberMapper.numberSystem,a.numericObject,/a/i.test(i.format));t=t.replace(/\u00A4/g,e);let s=t.split(";");d.hasNegativePattern=s.length>1,d.nData=p(s[1]||"-"+s[0],!0,e),d.pData=p(s[0],!1,e),f[2]||i.minimumFractionDigits||i.maximumFractionDigits||(r=p(t.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(KA(h,u(i.format||"N")),h.custom=!1,o="###0",h.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||r){let e=0;h.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=h.fractionDigits),o=function(e,t,i){e+=".";for(let n=0;n<t;n++)e+="0";if(t<i){let n=i-t;for(let t=0;t<n;t++)e+="#"}return e}(o,r||h.fractionDigits||i.minimumFractionDigits||e,i.maximumFractionDigits||e)}if(i.minimumIntegerDigits&&(o=function(e,t){let i=e.split("."),n="";for(let s=0;s<t;s++)n+="0";return i[1]?n+"."+i[1]:n}(o,i.minimumIntegerDigits)),i.useGrouping&&(o=function(e){let t=e.split("."),i=t[0],n=3-i.length%3;i=(n&&1===n?"#":2===n?"##":"")+i,e="";for(let s=i.length-1;s>0;s-=3)e=","+i[s-2]+i[s-1]+i[s]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(o)),"currency"===h.type){let e=o;o=d.pData.nlead+e+d.pData.nend,d.hasNegativePattern&&(o+=";"+d.nData.nlead+e+d.nData.nend)}"percent"!==h.type||(o+=" %")}else o=i.format.replace(/\'/g,'"');return Object.keys(g).length>0&&(o=s?o:function(e,t){if(-1!==e.indexOf(",")){let i=e.split(",");e=i[0]+WA("numberMapper.numberSymbols.group",t)+i[1].replace(".",WA("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",WA("numberMapper.numberSymbols.decimal",t));return e}(o,g)),o},e.getWeekData=function(e,t){let i="sun",n=WA("supplemental.weekData.firstDay",t),s=e;return/en-/.test(s)&&(s=s.slice(3)),s=s.slice(0,2).toUpperCase()+s.substr(2),n&&(i=n[s]||"sun"),r[i]},e.replaceBlazorCurrency=function(e,t,i){let n=WA(i||"",cO);if(t!==n)for(let s of e)s.nend=s.nend.replace(t,n),s.nlead=s.nlead.replace(t,n)},e.getWeekOfYear=function(e){let t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;let s=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if(t=Math.floor((s+n-1)/7)+1,t>52){let e=new Date(this.getFullYear()+1,0,1).getDay();e=e>=0?e:e+7,t=e<4?1:53}}else t=Math.floor((s+n-1)/7);return t}}(PO||(PO={}));const MO=/^(.*?):[ \t]*([^\r\n]*)$/gm;class LO{constructor(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!XA(i)||i):"object"==typeof e&&(this.options=e,$A(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}send(e){this.data=XA(e)?this.data:e;let t={cancel:!1,httpRequest:null};return new Promise((e,i)=>{this.httpRequest=new XMLHttpRequest,this.httpRequest.onreadystatechange=()=>{this.stateChange(e,i)},XA(this.onLoad)||(this.httpRequest.onload=this.onLoad),XA(this.onProgress)||(this.httpRequest.onprogress=this.onProgress),XA(this.onAbort)||(this.httpRequest.onabort=this.onAbort),XA(this.onError)||(this.httpRequest.onerror=this.onError),XA(this.onUploadProgress)||(this.httpRequest.upload.onprogress=this.onUploadProgress),this.httpRequest.open(this.type,this.url,this.mode),XA(this.data)||null===this.contentType||this.httpRequest.setRequestHeader("Content-Type",this.contentType||"application/json; charset=utf-8"),this.beforeSend&&(t.httpRequest=this.httpRequest,this.beforeSend(t)),t.cancel||this.httpRequest.send(XA(this.data)?null:this.data)})}successHandler(e){return this.onSuccess&&this.onSuccess(e,this),e}failureHandler(e){return this.onFailure&&this.onFailure(this.httpRequest),e}stateChange(e,t){let i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())}getResponseHeader(e){let t,i;t={};let n=MO.exec(this.httpRequest.getAllResponseHeaders());for(;n;)t[n[1].toLowerCase()]=n[2],n=MO.exec(this.httpRequest.getAllResponseHeaders());return i=t[e.toLowerCase()],XA(i)?null:i}}const NO=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,VO=/msie|trident/i,BO=/Trident\/7\./,FO=/(ipad|iphone|ipod touch)/i,jO=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,HO=/android/i,UO=/trident|windows phone|edge/i,qO=/(version)[ \/]([\w.]+)/i,WO={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});let zO=(()=>{class e{static extractBrowserDetail(){let t={culture:{}},i=Object.keys(WO),n=[];for(let s of i)if(n=e.userAgent.match(WO[s]),n){if(t.name="opr"===n[1].toLowerCase()?"opera":n[1].toLowerCase(),t.name="crios"===n[1].toLowerCase()?"chrome":t.name,t.version=n[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(BO)){t.name="msie";break}let i=e.userAgent.match(qO);"safari"===t.name&&i&&(t.version=i[2]);break}return t}static getEvent(t){let i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice}static getTouchStartEvent(){return e.getEvent("start")}static getTouchEndEvent(){return e.getEvent("end")}static getTouchMoveEvent(){return e.getEvent("move")}static getTouchCancelEvent(){return e.getEvent("cancel")}static getValue(t,i){let n=window.browserDetails;return void 0===n[t]?n[t]=i.test(e.userAgent):n[t]}static set userAgent(t){e.uA=t,window.browserDetails={}}static get userAgent(){return e.uA}static get info(){return JA(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info}static get isIE(){return e.getValue("isIE",VO)}static get isTouch(){return JA(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch}static get isPointer(){return JA(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer}static get isMSPointer(){return JA(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer}static get isDevice(){return e.getValue("isDevice",NO)}static get isIos(){return e.getValue("isIos",FO)}static get isIos7(){return e.getValue("isIos7",jO)}static get isAndroid(){return e.getValue("isAndroid",HO)}static get isWebView(){return JA(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(JA(window.cordova)&&JA(window.PhoneGap)&&JA(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView}static get isWindows(){return e.getValue("isWindows",UO)}static get touchStartEvent(){return JA(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent}static get touchMoveEvent(){return JA(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent}static get touchEndEvent(){return JA(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent}static get touchCancelEvent(){return JA(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent}}return e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e})();class GO{static addOrGetEventData(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])}static add(e,t,i,n,s){let r,o=GO.addOrGetEventData(e);r=s?function(e,t){let i;return function(){let n=arguments,s=()=>(i=null,e.apply(this,n));clearTimeout(i),i=setTimeout(s,t)}}(i,s):i,n&&(r=r.bind(n));let a=t.split(" ");for(let l=0;l<a.length;l++)o.push({name:a[l],listener:i,debounce:r}),zO.isIE?e.addEventListener(a[l],r):e.addEventListener(a[l],r,{passive:!1});return r}static remove(e,t,i){let n=GO.addOrGetEventData(e),s=t.split(" ");for(let r=0;r<s.length;r++){let t,o=-1;n&&0!==n.length&&n.some((e,n)=>e.name===s[r]&&e.listener===i&&(o=n,t=e.debounce,!0)),-1!==o&&n.splice(o,1),t&&e.removeEventListener(s[r],t)}}static clearEvents(e){let t,i;t=GO.addOrGetEventData(e),i=KA([],i,t);for(let n=0;n<i.length;n++)e.removeEventListener(i[n].name,i[n].debounce),t.shift()}static trigger(e,t,i){let n=GO.addOrGetEventData(e);for(let s of n)s.name===t&&s.debounce.call(this,i)}}const YO=new RegExp("\\n|\\r|\\s\\s+","g"),$O=new RegExp(/'|"/g),KO=new RegExp("if ?\\("),XO=new RegExp("else if ?\\("),JO=new RegExp("else"),QO=new RegExp("for ?\\("),ZO=new RegExp("(/if|/for)"),eD=new RegExp("\\((.*)\\)",""),tD=new RegExp("^[0-9]+$","g"),iD=new RegExp("[\\w\"'.\\s+]+","g"),nD=new RegExp('"(.*?)"',"g"),sD=new RegExp("[\\w\"'@#$.\\s+]+","g");let rD=new RegExp("\\${([^}]*)}","g"),oD=/^\..*/gm,aD=/\\/gi,lD=/\\\\/gi;const cD=new RegExp("[\\w\"'@#$.\\s+]+","g"),hD=/\window\./gm;function dD(e,t,i,n){return t&&!tD.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}function uD(e,t,i,n){return t&&!tD.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function pD(e){return e.match(lD)?e:e.replace(aD,"\\\\")}function fD(e,t,i){if(e=e.trim(),/\window\./gm.test(e))return e;{let n=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=uD(e,-1===i.indexOf(e),t,i)+'"]'),oD.test(e)?function(e,t,i,n){return!t||tD.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):dD(e,!n.test(e)&&-1===i.indexOf(e),t,i)}}const mD=/^[\n\r.]+\<tr|^\<tr/,gD=/^[\n\r.]+\<svg|^\<path|^\<g/;let vD={};function yD(){return"-"+Math.random().toString(36).substr(2,5)}function bD(e,t){let i=SD.compile(e,t);return(e,t,n,s,r,o)=>{let a=i(e,t,n);return"string"==typeof a?gD.test(a)?FD("svg",{innerHTML:a}).childNodes:FD(mD.test(a)?"table":"div",{innerHTML:a}).childNodes:a}}function wD(e,t,i){let n=document.getElementById(e);if(n){let e=n.getElementsByClassName("blazor-inner-template");for(let t=0;t<e.length;t++){let n=" ";n=XA(i)?e[t].getAttribute("data-templateId"):e[i].getAttribute("data-templateId");let s=document.getElementById(n);if(s){let n=s.childNodes.length;for(let r=0;r<n;r++)XA(i)?e[t].appendChild(s.childNodes[0]):(e[i].appendChild(s.childNodes[0]),t=e.length)}}}}let SD={compile:(new class{compile(e,t={}){return function(e,t){let i=function(e,t,i){let n=0,s=[],r=e.match(/class="([^\"]+|)\s{2}/g),o="";return r&&r.forEach(t=>{o=t.replace(/\s\s+/g," "),e=e.replace(t,o)}),e.replace(YO,"").replace(nD,"'$1'").replace(rD,(e,t,r,o)=>{let a=t.match(eD);if(a){let e=a[1];if(XO.test(t))t='";} '+t.replace(a[1],e.replace(iD,e=>dD(e=e.trim(),!$O.test(e)&&-1===s.indexOf(e),"data",s)))+'{ \n str = str + "';else if(KO.test(t))t='"; '+t.replace(a[1],e.replace(sD,e=>fD(e,"data",s)))+'{ \n str = str + "';else if(QO.test(t)){let e=a[1].split(" of ");t='"; '+t.replace(a[1],t=>(s.push(e[0]),s.push(e[0]+"Index"),n+=1,"var i"+n+"=0; i"+n+" < "+dD(e[1],!0,"data",s)+".length; i"+n+"++"))+"{ \n "+e[0]+"= "+dD(e[1],!0,"data",s)+"[i"+n+"]; \n var "+e[0]+"Index=i"+n+'; \n str = str + "'}else{let n=t.split("("),r=i&&i.hasOwnProperty(n[0])?"this.":"global";r=/\./.test(n[0])?"":r;let o=a[1].split(",");0===a[1].length||/data/.test(o[0])||/window./.test(o[0])||(a[1]="global"===r?"data."+a[1]:a[1]);let l=/\@|\$|\#/gm,c=/\]\./gm;hD.test(t)&&c.test(t)||l.test(t)?/\@|\$|\#|\]\./gm.test(t)&&(t='"+ '+("global"===r?"":r)+t.replace(a[1],e.replace(cD,e=>fD(e,"data",s)))+'+ "'):t='" + '+("global"===r?"":r)+t.replace(e,dD(a[1].replace(/,( |)data.|,/gi,",data.").replace(/,( |)data.window/gi,",window"),"global"!==r,"data",s))+'+"'}}else JO.test(t)?t='"; '+t.replace(JO,'} else { \n str = str + "'):t.match(ZO)?t=t.replace(ZO,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(t)?(t.match(aD)&&(t=pD(t)),t='"+'+uD(t,-1===s.indexOf(t),"data",s)+'"]+"'):t=t.match(aD)?'"+'+uD(t=pD(t),-1===s.indexOf(t),"data",s)+'"]+"':'"+'+dD(t.replace(/\,/gi,"+data."),-1===s.indexOf(t),"data",s)+'+"';return t})}(e,0,t);return new Function("data",`var str="${i}"; return str;`).bind(t)}(e,t)}}).compile};const CD=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_D=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,ED=/^(\.|#)/,TD={".":"className","#":"id"},xD={className:"attributes.className",id:"attributes.id",tagName:"tagName"},kD=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],AD=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],OD=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],DD=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],ID=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],RD=["Script","style"],PD={tabindex:"tabIndex"},MD=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,LD=/^<\/([-A-Za-z0-9_]+)[^>]*>/,ND=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;var VD;!function(e){function t(e,t){t&&e&&e.forEach(e=>(YA(e)&&(e.parent&&i(e),e.parent=t),e))}function i(e){let t=e.parent;if(t){let i=t.children.indexOf(e);-1!==i&&t.children.splice(i)}return t}function n(e,t){let i=e.match(ED),n={};if(i){let s=TD[i[0]];if("className"===s){let i=t.filter(e=>e.hasOwnProperty("className"))[0],n=!1;i||(n=!0,i={}),i[s]=(i[s]||"")+"(?=.*?\\b{value}\\b)".replace("{value}",e.replace(".","")),n&&t.push(i)}else n[s]=e.replace(i[0],""),t.push(n)}else t.push({tagName:e})}function s(e,t,i,n){if(e.children){let r=e.children.filter((function(e){if("string"!=typeof e){let i=!0;for(let n of t){let t=Object.keys(n)[0],s=n[t],r=WA(xD[t],e);if("className"===t){if(!new RegExp("^"+s+".*$").test(r)){i=!1;break}}else if(r!==s){i=!1;break}}return i}return!1}));return n||r.length&&!i||e.children.forEach(e=>{YA(e)&&(r=r.concat(s(e,t,i)))}),r}return[]}function r(e){let t,i=[],n=[],s=[];for(;e;){t=!0;let i=o(n);if(i&&a(RD,i))e=e.replace(new RegExp("([\\s\\S]*?)</"+o(s)+"[^>]*>"),(e,t)=>(c(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),"")),l(0,o(n));else{if(0===e.indexOf("</")){let i=e.match(LD);i&&(e=e.substring(i[0].length),i[0].replace(LD,l)),t=!1}else if(0===e.indexOf("<")){let i=e.match(MD);i&&(e=e.substring(i[0].length),i[0].replace(MD,r)),t=!1}if(t){let t=e.indexOf("<"),i=t<0?e:e.substring(0,t);e=t<0?"":e.substring(t),c(i)}}}function r(e,t,r){if(t=t.toLowerCase(),a(AD,t))for(;o(n)&&a(OD,o(n));)l(0,o(n));a(DD,t)&&o(n)&&l(0,t);let c=a(kD,t);c||n.push(t);let h={};r.replace(ND,(function(e,t,...i){let n=i[2]?i[2]:i[3]?i[3]:i[4]?i[4]:a(ID,t)?t:"";if("style"===t){let e=n.split(";"),t={};for(let i=0,n=e.length;i<n;i++){let n=e[i].split(":");t[n[0]]=n[1]}n=t}h[t=PD[t]||t]=n})),h["data-id"]=yD();let d={tagName:t,attributes:h};if(c){let e=s[0]||i;void 0===e.children&&(e.children=[]),d.parent=e,e.children.push(d)}else s.unshift(d)}function l(e,t){let r;if(t)for(r=n.length-1;r>=0&&n[r]!==t;r--);else r=0;if(r>=0){for(let e=s.length-1;e>=r;e--){let e=s.shift();if(0===s.length)i.push(e);else{let t=s[0];void 0===t.children&&(t.children=[]),e.parent=t,t.children.push(e)}}n.length=r}}function c(e){if(0===s.length)i.push(e);else{let t=s[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return i}function o(e){return e[e.length-1]}function a(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){let i=[],n=KA({},{},t,!0);if(!XA(t)&&Object.keys(t).length&&(n.innerHTML&&(i=r(n.innerHTML),delete n.innerHTML),n.attrs&&(KA(n,n.attrs),delete n.attrs),n.styles)){let e=n.styles.split(";"),t={};for(let i=0,n=e.length;i<n;i++){let n=e[i].split(":");t[n[0]]=n[1]}delete n.styles,n.style=t}return{tagName:e,attributes:n||{},children:i}},e.assignParent=t,e.append=function(e,i){t(e,i),i.children=i.children?i.children.concat(e):[].concat(e)},e.prepend=function(e,i){if(t(e,i),i.children&&i.children.length)for(let t=e.length-1;t>=0;t--)i.children.unshift(e[t]);else i.children=[],i.children.concat(e)},e.detach=i,e.vDomSelector=function e({ele:t,selector:i,selectAll:r,immediateParent:o}){let a=i.split(" "),l=t;for(let c=0,h=a.length;c<h;c++){let i=!1,h=l,d=a[c],u=[];if(CD.test(d))n(d,u);else if(-1===d.indexOf(">")){let e=d.match(_D);for(let t of e)n(t,u)}else if(-1!==d.indexOf(">")){i=!0;let n,s=d.split(">"),o=t,a=0;for(let t of s){if(!o)break;if(o.length){let i=[];for(let n of o)i=i.concat(e({ele:n,selector:t,selectAll:r,immediateParent:!!a}));n=i}else n=e({ele:o,selector:t,selectAll:r,immediateParent:!!a});a++,o=n}n&&(l=n)}if(!i)if(h.length){let e=[];for(let t of h)e=e.concat(s(t,u,r,o));l=e}else l=s(h,u,r,o)}return r?l:l[0]||null},e.accessElement=s,e.ConvertHTMLToJSon=r,e.cloneNode=function(e,t){return YA(e)?t?KA({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style=KA(e.attributes.style?{}:e.attributes.style,t)}}(VD||(VD={}));const BD=/^svg|^path|^g/;function FD(e,t){let i=BD.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&KD(i,t.attrs)),i}function jD(e,t){let i=UD(t);for(let n of e)for(let e of i)if(YA(n)){let t=WA("attributes.className",n);XA(t)?zA("attributes.className",e,n):new RegExp("\\b"+e+"\\b","i").test(t)||zA("attributes.className",t+" "+e,n)}else n.classList.contains(e)||n.classList.add(e);return e}function HD(e,t){let i=UD(t);for(let n of e){let e=YA(n);if(e?WA("attributes.className",n):""!==n.className)for(let t of i)if(e){let e=WA("attributes.className",n).split(" "),i=e.indexOf(t);-1!==i&&e.splice(i,1),zA("attributes.className",e.join(" "),n)}else n.classList.remove(t)}return e}function UD(e){let t=[];return"string"==typeof e?t.push(e):t=e,t}function qD(e){return""===e.style.visibility&&e.offsetWidth>0}function WD(e,t,i){if(YA(t))VD.prepend(e,t);else{let n=document.createDocumentFragment();for(let t of e)n.appendChild(t);t.insertBefore(n,t.firstElementChild),i&&GD(t)}return e}function zD(e,t,i){if(YA(t))VD.append(e,t);else{let n=document.createDocumentFragment();for(let t of e)n.appendChild(t);t.appendChild(n),i&&GD(t)}return e}function GD(e){e.querySelectorAll("script").forEach(e=>{let t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),YD(t)})}function YD(e){return YA(e)?VD.detach(e):e.parentNode.removeChild(e)}function $D(e){if(YA(e))VD.detach(e);else{let t=e.parentNode;GO.clearEvents(e),t.removeChild(e)}}function KD(e,t){let i=Object.keys(t),n=e;for(let s of i)if(YA(n)){let e=s;"tabindex"===s&&(e="tabIndex"),n.attributes[e]=t[s]}else n.setAttribute(s,t[s]);return n}function XD(e,t=document,i){return YA(t)&&i?VD.vDomSelector({ele:t,selector:e,selectAll:!1}):t.querySelector(e)}function JD(e,t=document,i){return YA(t)&&!i?VD.vDomSelector({ele:t,selector:e,selectAll:!0}):t.querySelectorAll(e)}function QD(e,t){let i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(tI(i,t))return i;i=i.parentNode}return null}function ZD(e,t){void 0!==t&&(YA(e)?VD.setStyleAttribute(e,t):Object.keys(t).forEach(i=>{e.style[i]=t[i]}))}function eI(e,t,i){jD([e],t),HD([e],i)}function tI(e,t){let i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}const iI=new RegExp("]");class nI{constructor(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=()=>{},this.childChangedProperties={},this.modelObserver=new EO(this),JA(t)||(this.element="string"==typeof t?document.querySelector(t):t,XA(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),JA(e)||this.setProperties(e,!0),this.isDestroyed=!1}setProperties(e,t){let i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,$A(this,e),!0!==t&&($A(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i}static callChildDataBind(e,t){let i=Object.keys(e);for(let n of i)if(t[n]instanceof Array)for(let e of t[n])void 0!==e.dataBind&&e.dataBind();else t[n].dataBind()}clearChanges(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}}dataBind(){if(nI.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){let e=this.isProtectedOnChange,t=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(t,i),this.isProtectedOnChange=e}}serverDataBind(e){}saveChanges(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){let t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);let n="ej2"+function(e){let t="";for(let i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),s=i=>{i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),t=()=>{window.removeEventListener("message",s),e=s=n=void 0}}(this.dataBind.bind(this)))}addEventListener(e,t){this.modelObserver.on(e,t)}removeEventListener(e,t){this.modelObserver.off(e,t)}trigger(e,t,i,n){if(!0!==this.isDestroyed){let s=this.isProtectedOnChange;this.isProtectedOnChange=!1;let r=this.modelObserver.notify(e,t,i,n);if(iI.test(e)){let s=WA(e,this);if(s)if(window.Blazor){let e=s.call(this,t);e&&"function"==typeof e.then?i?e.then(e=>{i&&(e="string"==typeof e&&this.modelObserver.isJson(e)?JSON.parse(e):e,i.call(this,e))}).catch(e=>{n&&(e="string"==typeof e&&this.modelObserver.isJson(e)?JSON.parse(e):e,n.call(this,e))}):r=e:i&&i.call(this,t)}else s.call(this,t),i&&i.call(this,t);else i&&i.call(this,t)}return this.isProtectedOnChange=s,r}}addInstance(){let e="e-"+this.getModuleName().toLowerCase();jD([this.element],["e-lib",e]),XA(this.element.ej2_instances)?zA("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)}destroy(){this.element.ej2_instances=this.element.ej2_instances.filter(e=>e!==this),HD([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&HD([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0}}function sI(e,t){let i,n,s="string"==typeof e?document.getElementById(e):e;for(n=0;n<s.ej2_instances.length;n++)if(i=s.ej2_instances[n],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}function rI(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=qA(n,[e,t,i])),e.properties[t]}function oI(e,t,i,n,s,r){let o=[],a=i?i.length:0;for(let l=0;l<a;l++){let a=n;if(r&&(a=n(i[l],e)),s){let n=qA(a,[e,t,{},!0]);n.setProperties(i[l],!0),o.push(n)}else o.push(qA(a,[e,t,i[l],!1]))}return o}function aI(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function lI(e,t){return function(i){if(this.properties[t]!==i){let n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function cI(e,t,i){return function(){return rI(this,t,e,i)}}function hI(e,t,i){return function(n){rI(this,t,e,i).setProperties(n)}}function dI(e,t,i){return function(){if(!this.properties.hasOwnProperty(t)){let n=oI(this,t,e,i,!1);this.properties[t]=n}let n=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||n||["push","pop"].forEach(e=>{let i={value:pI(e,t,0,this.properties[t]).bind(this),configurable:!0};Object.defineProperty(this.properties[t],e,i)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function uI(e,t,i){return function(n){this.isComplexArraySetter=!0;let s=oI(this,t,e,i,!1),r=oI(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,r,s),this.properties[t]=r}}function pI(e,t,i,n){return function(...i){let s=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(let r=0;r<i.length;r++){Array.prototype[e].apply(n,[i[r]]);let t=fI(s+(n.length-1),i[r],!this.controlParent,e);this.serverDataBind(t,i[r],!1,e)}break;case"pop":Array.prototype[e].apply(n);let t=fI(s+n.length,null,!this.controlParent,e);this.serverDataBind(t,{ejsAction:"pop"},!1,e)}return n}}function fI(e,t,i,n){let s=e;return i&&(s={},s[e]=t,t&&"object"==typeof t)&&(s[e].ejsAction=n),s}function mI(e){return(t,i)=>{let n={set:lI(e,i),get:aI(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),wI(t,i,"prop",e)}}function gI(e,t){return(i,n)=>{let s={set:hI(e,n,t),get:cI(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),wI(i,n,"complexProp",e,t)}}function vI(e,t){return(i,n)=>{let s={set:uI(e,n,t),get:dI(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),wI(i,n,"colProp",e,t)}}function yI(){return(e,t)=>{let i={set:function(e){let i=this.properties[t];if(i!==e){let n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};{let n=WA("propName",t);return n&&(i=n+"-"+i),e(WA("parentObj",t),i)}}(this,t);!1===JA(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:aI(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),wI(e,t,"event")}}function bI(e){}function wI(e,t,i,n,s){JA(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:s}),e.propList[i+"Names"].push(t)}var SI,CI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let _I=(()=>{let t=SI=class extends nI{constructor(e){super(e,void 0),this.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"}}animate(e,t){let i=this.getModel(t=t||{});if("string"==typeof e){let t=Array.prototype.slice.call(JD(e,document));for(let e of t)i.element=e,SI.delayAnimation(i)}else i.element=e,SI.delayAnimation(i)}static stop(e,t){e.style.animation="",e.removeAttribute("e-animate");let i=e.getAttribute("e-animation-id");if(i){let t=parseInt(i,10);cancelAnimationFrame(t),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)}static delayAnimation(e){e.delay?setTimeout(()=>{SI.applyAnimation(e)},e.delay):SI.applyAnimation(e)}static applyAnimation(t){t.timeStamp=0;let i=0,n=0,s=0,r=0,o=t.duration;t.element.setAttribute("e-animate","true");let a=l=>{try{if(l){r=0===r?l:r,t.timeStamp=l+t.timeStamp-r,r=l,!i&&t.begin&&t.begin.call(this,t),i+=1;let e=t.timeStamp/i;t.timeStamp<o&&t.timeStamp+e<o&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(this,t),requestAnimationFrame(a)):(cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(this,t))}else s=performance.now(),n=requestAnimationFrame(a),t.element.setAttribute("e-animation-id",n.toString())}catch(e){cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(this,e)}};a()}getModel(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}}onPropertyChanged(e,t){}getModuleName(){return"animation"}destroy(){}};return CI([mI("FadeIn")],t.prototype,"name",void 0),CI([mI(400)],t.prototype,"duration",void 0),CI([mI("ease")],t.prototype,"timingFunction",void 0),CI([mI(0)],t.prototype,"delay",void 0),CI([yI()],t.prototype,"progress",void 0),CI([yI()],t.prototype,"begin",void 0),CI([yI()],t.prototype,"end",void 0),CI([yI()],t.prototype,"fail",void 0),t=SI=CI([bI],t),t})();function EI(e,t,i){let n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!OI?Function:(e.setAttribute("data-ripple","true"),GO.add(e,"mousedown",TI,{parent:e,rippleOptions:n}),GO.add(e,"mouseup",xI,{parent:e,rippleOptions:n,done:i}),GO.add(e,"mouseleave",kI,{parent:e,rippleOptions:n}),zO.isPointer&&GO.add(e,"transitionend",kI,{parent:e,rippleOptions:n}),()=>{e.removeAttribute("data-ripple"),GO.remove(e,"mousedown",TI),GO.remove(e,"mouseup",xI),GO.remove(e,"mouseleave",kI),GO.remove(e,"transitionend",kI)})}function TI(e){let t=e.target,i=this.rippleOptions.selector,n=i?QD(t,i):t;if(!n||this.rippleOptions&&QD(t,this.rippleOptions.ignore))return;let s=n.getBoundingClientRect(),r=e.pageX-document.body.scrollLeft,o=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(r-s.left),Math.abs(r-s.right)),l=Math.max(Math.abs(o-s.top),Math.abs(o-s.bottom)),c=Math.sqrt(a*a+l*l),h=2*c+"px",d=r-s.left-c,u=o-s.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,u=0,h="100%"),n.classList.add("e-ripple");let p=FD("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+d+"px;top: "+u+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(p),window.getComputedStyle(p).getPropertyValue("opacity"),p.style.transform="scale(1)",n!==this.parent&&GO.add(n,"mouseleave",kI,{parent:this.parent,rippleOptions:this.rippleOptions})}function xI(e){AI(e,this)}function kI(e){AI(e,this)}function AI(e,t){let i=t.rippleOptions.duration,n=e.target,s=t.rippleOptions.selector,r=s?QD(n,s):n;if(!r||r&&-1===r.className.indexOf("e-ripple"))return;let o=JD(".e-ripple-element",r),a=o[o.length-1];a&&(a.style.opacity="0.5"),t.parent!==r&&GO.remove(r,"mouseleave",kI),setTimeout(()=>{a&&a.parentNode&&a.parentNode.removeChild(a),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),t.done&&t.done(e)},i)}let OI=!1;class DI{constructor(e){this.loadedModules=[],this.parent=e}inject(e,t){let i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(let n=0;n<i;n++){let i=e[n];for(let e of t){let t=i.member;if(e.prototype.getModuleName()===i.member&&!this.isModuleLoaded(t)){let n=qA(e,i.args),s=this.getMemberName(t);zA(s,i.isProperty?e:n,this.parent);let r=i;r.member=s,this.loadedModules.push(r)}}}}else this.clean()}clean(){for(let e of this.loadedModules)e.isProperty||WA(e.member,this.parent).destroy();this.loadedModules=[]}clearUnusedModule(e){let t=e.map(e=>this.getMemberName(e.member)),i=this.loadedModules.filter(e=>-1===t.indexOf(e.member));for(let n of i)n.isProperty||WA(n.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(n),1),GA(this.parent,n.member)}getMemberName(e){return e[0].toLowerCase()+e.substring(1)+"Module"}isModuleLoaded(e){for(let t of this.loadedModules)if(t.member===this.getMemberName(e))return!0;return!1}}class II{constructor(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=()=>{},this.callChildDataBind=WA("callChildDataBind",nI),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}updateChange(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)}updateTimeOut(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{let e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=()=>{clearTimeout(e)}}}clearChanges(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}}setProperties(e,t){!0===t?($A(this,e),this.updateChange(!1,this.propName),this.clearChanges()):$A(this,e)}dataBind(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){let e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(zA(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),zA(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()}saveChanges(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())}serverDataBind(e,t,i,n){}getParentKey(e){let t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);let n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,t=-1!==t?"-"+t:"-"+n,i+=t}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i}}var RI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let PI,MI=0,LI=0,NI=(()=>{let e=class extends nI{constructor(e,t){super(e,t),this.randomId=function(){if("undefined"==typeof window)return;let e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}(),this.isStringTemplate=!1,this.needsID=!1,this.isReactHybrid=!1,XA(this.enableRtl)&&this.setProperties({enableRtl:!1},!0),XA(this.locale)&&this.setProperties({locale:"en-US"},!0),this.moduleLoader=new DI(this),this.localObserver=new EO(this),TO.on("notifyExternalChange",this.detectFunction,this,this.randomId),JA(t)||this.appendTo()}requiredModules(){return[]}destroy(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(HD([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),super.destroy(),this.moduleLoader.clean(),TO.off("notifyExternalChange",this.detectFunction,this.randomId)))}refresh(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new EO(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1}accessMount(){this.mount&&!this.isReactHybrid&&this.mount()}getRootElement(){return this.isReactHybrid?this.actualElement:this.element}appendTo(e){if(XA(e)||"string"!=typeof e?XA(e)||(this.element=e):this.element=document.querySelector(e),!XA(this.element)){let e="e-"+this.getModuleName().toLowerCase();jD([this.element],["e-control",e]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));let t=WA("ej2_instances",this.element);t&&-1!==t.indexOf(this)||super.addInstance(),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}}renderComplete(e){this.isRendered=!0}dataBind(){this.injectModules(),super.dataBind()}on(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(let n of e)this.localObserver.on(n.event,n.handler,n.context)}off(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(let i of e)this.localObserver.off(i.event,i.handler)}notify(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)}getInjectedModules(){return this.injectedModules}static Inject(...e){this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(let t=0;t<e.length;t++)-1===this.prototype.injectedModules.indexOf(e[t])&&this.prototype.injectedModules.push(e[t])}createElement(e,t,i){return i&&this.isReactHybrid?(t&&(t={}),t["data-id"]=yD(),VD.createElement(e,t)):FD(e,t)}triggerStateChange(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})}injectModules(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)}detectFunction(e){let t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])}mergePersistData(){let e=window.localStorage.getItem(this.getModuleName()+this.element.id);XA(e)||""===e||this.setProperties(JSON.parse(e),!0)}setPersistData(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())}clearTemplate(e,t){}getUniqueID(e){return this.isHistoryChanged()&&(MI=0),PI=this.pageID(location.href),LI=history.length,e+"_"+PI+"_"+MI++}pageID(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}isHistoryChanged(){return PI!==this.pageID(location.href)||LI!==history.length}addOnPersist(e){let t={};for(let i of e){let e;e=WA(i,this),JA(e)||zA(i,this.getActualProperties(e),t)}return JSON.stringify(t,(e,t)=>this.getActualProperties(t))}getActualProperties(e){return e instanceof II?WA("properties",e):e}ignoreOnPersist(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))}iterateJsonProperties(e,t){let i={};for(let n of Object.keys(e))if(-1===t.indexOf(n)){let s=e[n];if("object"!=typeof s||s instanceof Array)i[n]=s;else{let e=t.filter(e=>new RegExp(n+".").test(e)).map(e=>e.replace(n+".",""));i[n]=this.iterateJsonProperties(this.getActualProperties(s),e)}}return i}};return RI([mI(!1)],e.prototype,"enablePersistence",void 0),RI([mI()],e.prototype,"enableRtl",void 0),RI([mI()],e.prototype,"locale",void 0),e=RI([bI],e),e})();"undefined"!=typeof window&&window.addEventListener("popstate",()=>{MI=0});var VI,BI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const FI={left:0,top:0,bottom:0,right:0},jI={isDragged:!1};let HI=(()=>{class e extends II{}return BI([mI(0)],e.prototype,"left",void 0),BI([mI(0)],e.prototype,"top",void 0),e})(),UI=(()=>{let e=VI=class extends nI{constructor(e,t){super(t,e),this.dragLimit=VI.getDefaultPosition(),this.borderWidth=VI.getDefaultPosition(),this.padding=VI.getDefaultPosition(),this.diffX=0,this.prevLeft=0,this.prevTop=0,this.dragProcessStarted=!1,this.tapHoldTimer=0,this.externalInitialize=!1,this.diffY=0,this.parentScrollX=0,this.parentScrollY=0,this.droppables={},this.bind()}bind(){this.toggleEvents(),zO.isIE&&jD([this.element],"e-block-touch"),this.droppables[this.scope]={}}static getDefaultPosition(){return KA({},FI)}toggleEvents(e){let t;JA(this.handle)||(t=XD(this.handle,this.element));let i=this.enableTapHold&&zO.isDevice&&zO.isTouch?this.mobileInitialize:this.initialize;e?GO.remove(t||this.element,zO.touchStartEvent,i):GO.add(t||this.element,zO.touchStartEvent,i,this)}mobileInitialize(e){let t=e.currentTarget;this.tapHoldTimer=setTimeout(()=>{this.externalInitialize=!0,this.removeTapholdTimer(),this.initialize(e,t)},this.tapHoldThreshold),GO.add(document,zO.touchMoveEvent,this.removeTapholdTimer,this),GO.add(document,zO.touchEndEvent,this.removeTapholdTimer,this)}removeTapholdTimer(){clearTimeout(this.tapHoldTimer),GO.remove(document,zO.touchMoveEvent,this.removeTapholdTimer),GO.remove(document,zO.touchEndEvent,this.removeTapholdTimer)}getScrollableParent(e,t){return XA(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),XA(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)}getScrollableValues(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")}initialize(e,t){if(this.currentStateTarget=e.target,this.isDragStarted())return;if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){let t=this.abort;"string"==typeof t&&(t=[t]);for(let i=0;i<t.length;i++)if(!XA(QD(e.target,t[i])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!JA(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");let i=this.getCoordinates(e);if(this.initialPosition={x:i.pageX,y:i.pageY},!this.clone){let t=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=i.pageX-(t.left+this.parentScrollX),this.relativeYPosition=i.pageY-(t.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(GO.add(document,zO.touchMoveEvent,this.intDragStart,this),GO.add(document,zO.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,GO.trigger(document.documentElement,zO.touchStartEvent,e)}intDragStart(e){this.removeTapholdTimer();let t=!JA(e.changedTouches);if(t&&1!==e.changedTouches.length)return;t&&e.preventDefault();let i,n=this.getCoordinates(e),s=getComputedStyle(this.element);this.margin={left:parseInt(s.marginLeft,10),top:parseInt(s.marginTop,10),right:parseInt(s.marginRight,10),bottom:parseInt(s.marginBottom,10)};let r=this.element;if(this.clone&&this.dragTarget){let t=QD(e.target,this.dragTarget);XA(t)||(r=t)}this.offset=this.calculateParentPosition(r),this.position=this.getMousePosition(e,this.isDragScroll);let o=this.initialPosition.x-n.pageX,a=this.initialPosition.y-n.pageY;if(Math.sqrt(o*o+a*a)>=this.distance||this.externalInitialize){let t=this.getHelperElement(e);if(!t||XA(t))return;let n=this.helperElement=t;if(this.parentClientRect=this.calculateParentPosition(n.offsetParent),this.dragStart){let t={event:e,element:r,target:this.getProperTargetElement(e),bindEvents:null,dragElement:n};this.trigger("dragStart",t)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();let s=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},ZD(n,this.getDragPosition({position:"absolute",left:s.left,top:s.top})),GO.remove(document,zO.touchMoveEvent,this.intDragStart),GO.remove(document,zO.touchEndEvent,this.intDestroy),this.bindDragEvents(n)}}bindDragEvents(e){qD(e)?(GO.add(document,zO.touchMoveEvent,this.intDrag,this),GO.add(document,zO.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}elementInViewport(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth}getProcessedPositionValue(e){return this.queryPositionInfo?this.queryPositionInfo(e):e}calculateParentPosition(e){if(XA(e))return{left:0,top:0};let t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}}intDrag(e){if(!JA(e.changedTouches)&&1!==e.changedTouches.length)return;let t,i;this.position=this.getMousePosition(e,this.isDragScroll);let n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);let s=this.getDocumentWidthHeight("Width");if(s<this.position.left&&(this.position.left=s),this.drag){let t=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:t})}let r=this.checkTargetElement(e);if(r.target&&r.instance){let t=!0;this.hoverObject&&(this.hoverObject.instance!==r.instance?this.triggerOutFunction(e,r):t=!1),t&&(r.instance.dragData[this.scope]=this.droppables[this.scope],r.instance.intOver(e,r.target),this.hoverObject=r)}else this.hoverObject&&this.triggerOutFunction(e,r);let o=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);let a=this.parentClientRect.left,l=this.parentClientRect.top,c=this.getCoordinates(e),h=c.pageX,d=c.pageY,u=this.position.left-this.diffX,p=this.position.top-this.diffY;if(this.dragArea){let e=getComputedStyle(o);if(this.pageX!==h||this.skipDistanceCheck){let i=o.offsetWidth+(parseFloat(e.marginLeft)+parseFloat(e.marginRight));t=this.dragLimit.left>u&&u>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<u+i&&u>0?u-(u-this.dragLimit.right)+window.pageXOffset-i:u<0?this.dragLimit.left:u}if(this.pageY!==d||this.skipDistanceCheck){let t=o.offsetHeight+(parseFloat(e.marginTop)+parseFloat(e.marginBottom));i=this.dragLimit.top>p&&p>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<p+t&&p>0?p-(p-this.dragLimit.bottom)+window.pageYOffset-t:p<0?this.dragLimit.top:p}}else t=u,i=p;let f,m,g=l+this.borderWidth.top,v=a+this.borderWidth.left;this.dragProcessStarted&&(XA(i)&&(i=this.prevTop),XA(t)&&(t=this.prevLeft)),this.dragArea?(f=i-g<0?this.dragLimit.top:i-g,m=t-v<0?this.dragElePosition.left:t-v):(f=i-g,m=t-v);let y=this.getProcessedPositionValue({top:f+"px",left:m+"px"});ZD(o,this.getDragPosition(y)),!this.elementInViewport(o)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=h,this.pageY=d}triggerOutFunction(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null}getDragPosition(e){let t=KA({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t}getDocumentWidthHeight(e){let t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])}intDragStop(e){if(this.dragProcessStarted=!1,!JA(e.changedTouches)&&1!==e.changedTouches.length)return;if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){let t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");let t=this.checkTargetElement(e);t.target&&t.instance&&(t.instance.dragStopCalled=!0,t.instance.dragData[this.scope]=this.droppables[this.scope],t.instance.intDrop(e,t.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}intDestroy(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),GO.remove(document,zO.touchMoveEvent,this.intDragStart),GO.remove(document,zO.touchEndEvent,this.intDragStop),GO.remove(document,zO.touchEndEvent,this.intDestroy),GO.remove(document,zO.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)}onPropertyChanged(e,t){}getModuleName(){return"draggable"}isDragStarted(e){return e&&(jI.isDragged=!jI.isDragged),jI.isDragged}setDragArea(){let e,t,i,n=0,s=0;if(i="string"==typeof this.dragArea?XD(this.dragArea):this.dragArea,i){let r=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:r.right-r.left,t=i.scrollHeight?i.scrollHeight:r.bottom-r.top;let o=["Top","Left","Bottom","Right"],a=getComputedStyle(i);for(let e=0;e<o.length;e++){let t=o[e],i=a["border"+t+"Width"],n=a["padding"+t],s=t.toLowerCase();this.borderWidth[s]=isNaN(parseFloat(i))?0:parseFloat(i),this.padding[s]=isNaN(parseFloat(n))?0:parseFloat(n)}n=r.top,s=r.left,this.dragLimit.left=s+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=s+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}}getProperTargetElement(e){let t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return ZA(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t}getMousePosition(e,t){let i,n,s=void 0!==e.srcElement?e.srcElement:e.target,r=this.getCoordinates(e),o=XA(s.offsetParent);return t?(i=this.clone?r.pageX:r.pageX+(o?0:s.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?r.pageY:r.pageY+(o?0:s.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?r.pageX:r.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?r.pageY:r.pageY+window.pageYOffset-this.relativeYPosition),{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}}getCoordinates(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e}getHelperElement(e){let t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=FD("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t}setGlobalDroppables(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}}checkTargetElement(e){let t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!XA(t.parentNode)){let e=QD(t.parentNode,".e-droppable")||t.parentElement;e&&(i=this.getDropInstance(e))}return{target:t,instance:i}}getDropInstance(e){let t,i=e&&e.ej2_instances;if(i)for(let n of i)if("droppable"===n.getModuleName()){t=n;break}return t}destroy(){this.toggleEvents(!0),super.destroy()}};return BI([gI({},HI)],e.prototype,"cursorAt",void 0),BI([mI(!0)],e.prototype,"clone",void 0),BI([mI()],e.prototype,"dragArea",void 0),BI([mI()],e.prototype,"isDragScroll",void 0),BI([yI()],e.prototype,"drag",void 0),BI([yI()],e.prototype,"dragStart",void 0),BI([yI()],e.prototype,"dragStop",void 0),BI([mI(1)],e.prototype,"distance",void 0),BI([mI()],e.prototype,"handle",void 0),BI([mI()],e.prototype,"abort",void 0),BI([mI()],e.prototype,"helper",void 0),BI([mI("default")],e.prototype,"scope",void 0),BI([mI("")],e.prototype,"dragTarget",void 0),BI([mI()],e.prototype,"axis",void 0),BI([mI()],e.prototype,"queryPositionInfo",void 0),BI([mI(!1)],e.prototype,"enableTailMode",void 0),BI([mI(!1)],e.prototype,"skipDistanceCheck",void 0),BI([mI(!0)],e.prototype,"preventDefault",void 0),BI([mI(!1)],e.prototype,"enableAutoScroll",void 0),BI([mI(!1)],e.prototype,"enableTapHold",void 0),BI([mI(750)],e.prototype,"tapHoldThreshold",void 0),e=VI=BI([bI],e),e})();var qI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let WI=(()=>{let e=class extends nI{constructor(e,t){super(t,e),this.mouseOver=!1,this.dragData={},this.dragStopCalled=!1,this.bind()}bind(){this.wireEvents()}wireEvents(){GO.add(this.element,zO.touchEndEvent,this.intDrop,this)}onPropertyChanged(e,t){}getModuleName(){return"droppable"}intOver(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)}intOut(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)}intDrop(e,t){if(!this.dragStopCalled)return;this.dragStopCalled=!1;let i,n=!0,s=this.dragData[this.scope],r=!!s&&s.helper&&qD(s.helper);r&&(i=this.isDropArea(e,s.helper,t),this.accept&&(n=tI(s.helper,this.accept))),r&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}isDropArea(e,t,i){let n={canDrop:!0,target:i||e.target},s="touchend"===e.type;if(s||n.target===t){t.style.display="none";let i=s?e.changedTouches[0]:e,r=document.elementFromPoint(i.clientX,i.clientY);n.canDrop=!1,n.canDrop=ZA(r,this.element),n.canDrop&&(n.target=r),t.style.display=""}return n}destroy(){GO.remove(this.element,zO.touchEndEvent,this.intDrop),super.destroy()}};return qI([mI()],e.prototype,"accept",void 0),qI([mI("default")],e.prototype,"scope",void 0),qI([yI()],e.prototype,"drop",void 0),qI([yI()],e.prototype,"over",void 0),qI([yI()],e.prototype,"out",void 0),e=qI([bI],e),e})();var zI,GI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let YI={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},$I=(()=>{let e=zI=class extends nI{constructor(e,t){super(t,e),this.keyPressHandler=e=>{let t=e.altKey,i=e.ctrlKey,n=e.shiftKey,s=e.which,r=Object.keys(this.keyConfigs);for(let o of r){let r=this.keyConfigs[o].split(",");for(let a of r){let r=zI.getKeyConfigData(a.trim());t===r.altKey&&i===r.ctrlKey&&n===r.shiftKey&&s===r.keyCode&&(e.action=o,this.keyAction&&this.keyAction(e))}}},this.bind()}destroy(){this.unwireEvents(),super.destroy()}onPropertyChanged(e,t){}bind(){this.wireEvents()}getModuleName(){return"keyboard"}wireEvents(){this.element.addEventListener(this.eventName,this.keyPressHandler)}unwireEvents(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}static getKeyConfigData(e){if(e in this.configCache)return this.configCache[e];let t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):zI.getKeyCode(t[t.length-1]),zI.configCache[e]=i,i}static getKeyCode(e){return YI[e]||e.toUpperCase().charCodeAt(0)}};return e.configCache={},GI([mI({})],e.prototype,"keyConfigs",void 0),GI([mI("keyup")],e.prototype,"eventName",void 0),GI([yI()],e.prototype,"keyAction",void 0),e=zI=GI([bI],e),e})(),KI=(()=>{class e{constructor(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||"en-US")}setLocale(t){let i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings}static load(e){this.locale=KA(this.locale,e,{},!0)}getConstant(e){return XA(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]}intGetControlConstant(e,t){return e[t]?e[t][this.controlName]:null}}return e.locale={},e})();var XI=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let JI=(()=>{class e extends II{}return XI([mI(50)],e.prototype,"swipeThresholdDistance",void 0),e})();const QI=/(Up|Down)/;let ZI=(()=>{let e=class extends nI{constructor(e,t){super(t,e),this.touchAction=!0,this.tapCount=0,this.startEvent=e=>{if(!0===this.touchAction){let t=this.updateChangeTouches(e);void 0!==e.changedTouches&&(this.touchAction=!1),this.isTouchMoved=!1,this.movedDirection="",this.startPoint=this.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},this.startEventData=t,this.hScrollLocked=this.vScrollLocked=!1,this.tStampStart=Date.now(),this.timeOutTapHold=setTimeout(()=>{this.tapHoldEvent(e)},this.tapHoldThreshold),GO.add(this.element,zO.touchMoveEvent,this.moveEvent,this),GO.add(this.element,zO.touchEndEvent,this.endEvent,this),GO.add(this.element,zO.touchCancelEvent,this.cancelEvent,this)}},this.moveEvent=e=>{let t=this.updateChangeTouches(e);this.movedPoint=t,this.isTouchMoved=!(t.clientX===this.startPoint.clientX&&t.clientY===this.startPoint.clientY);let i={};this.isTouchMoved&&(clearTimeout(this.timeOutTapHold),this.calcScrollPoints(e),i=KA(i,{},{startEvents:this.startEventData,originalEvent:e,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,scrollDirection:this.scrollDirection,velocity:this.getVelocity(t)}),this.trigger("scroll",i),this.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},this.cancelEvent=e=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap),this.tapCount=0,this.swipeFn(e),GO.remove(this.element,zO.touchCancelEvent,this.cancelEvent)},this.endEvent=e=>{this.swipeFn(e),this.isTouchMoved||"function"==typeof this.tap&&(this.trigger("tap",{originalEvent:e,tapCount:++this.tapCount}),this.timeOutTap=setTimeout(()=>{this.tapCount=0},this.tapThreshold)),this.modeclear()},this.swipeFn=e=>{clearTimeout(this.timeOutTapHold),clearTimeout(this.timeOutTap);let t=this.updateChangeTouches(e),i=t.clientX-this.startPoint.clientX,n=t.clientY-this.startPoint.clientY;i=Math.floor(i<0?-1*i:i),n=Math.floor(n<0?-1*n:i),this.isTouchMoved=i>1||n>1,this.endPoint=t,this.calcPoints(e);let s={originalEvent:e,startEvents:this.startEventData,startX:this.startPoint.clientX,startY:this.startPoint.clientY,distanceX:this.distanceX,distanceY:this.distanceY,swipeDirection:this.movedDirection,velocity:this.getVelocity(t)};if(this.isTouchMoved){let e,t=this.swipeSettings.swipeThresholdDistance;e=KA(e,this.defaultArgs,s);let i=!1,n=this.element,r=this.isScrollable(n),o=QI.test(this.movedDirection);(t<this.distanceX&&!o||t<this.distanceY&&o)&&(i=!r||this.checkSwipe(n,o)),i&&this.trigger("swipe",e)}this.modeclear()},this.modeclear=()=>{this.modeClear=setTimeout(()=>{this.touchAction=!0},"function"!=typeof this.tap?0:20),this.lastTapTime=(new Date).getTime(),GO.remove(this.element,zO.touchMoveEvent,this.moveEvent),GO.remove(this.element,zO.touchEndEvent,this.endEvent),GO.remove(this.element,zO.touchCancelEvent,this.cancelEvent)},this.bind()}onPropertyChanged(e,t){}bind(){this.wireEvents(),zO.isIE&&this.element.classList.add("e-block-touch")}destroy(){this.unwireEvents(),super.destroy()}wireEvents(){GO.add(this.element,zO.touchStartEvent,this.startEvent,this)}unwireEvents(){GO.remove(this.element,zO.touchStartEvent,this.startEvent)}getModuleName(){return"touch"}isScrollable(e){let t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}tapHoldEvent(e){let t;this.tapCount=0,this.touchAction=!0,GO.remove(this.element,zO.touchMoveEvent,this.moveEvent),GO.remove(this.element,zO.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),GO.remove(this.element,zO.touchCancelEvent,this.cancelEvent)}calcPoints(e){let t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"}calcScrollPoints(e){let t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)}getVelocity(e){let t=e.clientX,i=e.clientY,n=Date.now(),s=t-this.startPoint.clientX,r=i-this.startPoint.clientX,o=n-this.tStampStart;return Math.sqrt(s*s+r*r)/o}checkSwipe(e,t){let i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]]}updateChangeTouches(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e}};return XI([yI()],e.prototype,"tap",void 0),XI([yI()],e.prototype,"tapHold",void 0),XI([yI()],e.prototype,"swipe",void 0),XI([yI()],e.prototype,"scroll",void 0),XI([mI(350)],e.prototype,"tapThreshold",void 0),XI([mI(750)],e.prototype,"tapHoldThreshold",void 0),XI([gI({},JI)],e.prototype,"swipeSettings",void 0),e=XI([bI],e),e})();const eR=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],tR=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],iR=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"];class nR{static beforeSanitize(){return{selectors:{tags:eR,attributes:tR}}}static sanitize(e){let t=this.beforeSanitize();return this.serializeValue(t,e)}static serializeValue(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();let i=this.wrapElement.innerHTML;return this.removeElement(),i}static removeElement(){let e=this.wrapElement.children;for(let t=0;t<e.length;t++){let i=e[t].attributes;for(let e=0;e<i.length;e++)this.wrapElement.children[t].removeAttribute(i[e].localName)}}static removeXssTags(){let e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach(e=>{YD(e)})}static removeJsEvents(){let e=this.wrapElement.querySelectorAll("["+iR.join("],[")+"]");e.length>0&&e.forEach(e=>{iR.forEach(t=>{e.hasAttribute(t)&&e.removeAttribute(t)})})}static removeXssAttrs(){this.removeAttrs.forEach((e,t)=>{let i=this.wrapElement.querySelectorAll(e.selector);i.length>0&&i.forEach(t=>{t.removeAttribute(e.attribute)})})}}function sR(e,t,i){var n={};if(e&&e.length){for(var s=0,r=e;s<r.length;s++){var o=r[s];!0===i?(t.propCollection[o]=new $l(!1),t[o]=t.propCollection[o]):n[o]=new $l(!1)}!0!==i&&t.setProperties(n,!0)}}function rR(e,t,i){var n=Object.keys(e.registeredTemplate);if(n.length)for(var s=t&&t.filter((function(e){return!/\./g.test(e)})),r=0,o=s&&s||n;r<o.length;r++){var a=o[r];if(i&&i.length)for(var l=0;l<i.length;l++)for(var c=0;c<e.registeredTemplate.template.length;c++)e.registeredTemplate.template[c].rootNodes[0]===i[l]&&(u=e.registeredTemplate[a])[c].destroy();else for(var h=0,d=e.registeredTemplate[a];h<d.length;h++){var u;if(!(u=d[h]).destroyed){if(u._view){var p=u._view.renderer.parentNode(u.rootNodes[0]);if(!XA(p))for(c=0;c<u.rootNodes.length;c++)p.appendChild(u.rootNodes[c])}u.destroy()}}delete e.registeredTemplate[a]}for(var f=function(e){e.instance&&e.instance.clearTemplate(t&&t.filter((function(t){return!!new RegExp(e.name).test(t)})))},m=0,g=e.tagObjects;m<g.length;m++)f(g[m])}function oR(e,t,i){for(var n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=i||{},r=0;r<n.length;r++){var o=n[r];r+1===n.length?s[o]=void 0===t?{}:t:void 0===s[o]&&(s[o]={}),s=s[o]}return s}var aR=function(){function e(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return e.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],n=WA("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var s=Object.keys(this),r=0,o=s=s.filter((function(e){return/Ref$/i.test(e)}));r<o.length;r++){var a=o[r].replace("Ref","");zA(a.replace("_","."),WA(a,this),this.propCollection)}var l=Object.keys(this);if(this.directivePropList){for(var c=0;c<this.directivePropList.length;c++){var h=this.directivePropList[c];-1!==l.indexOf(h)&&zA(h,WA(h,this),this.propCollection)}this.hasChanges=!0}},e.prototype.registerEvents=function(e){sR(e,this,!0)},e.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];this.propCollection[n]=e[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},e.prototype.clearTemplate=function(e){rR(this,e)},e.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},e.prototype.isChanged=function(){for(var e=this.hasChanges,t=0,i=this.tagObjects;t<i.length;t++)e=e||i[t].instance.hasChanges;return e},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=Object.keys(this),t=0,i=e=e.filter((function(e){return/Ref$/i.test(e)}));t<i.length;t++){var n=i[t].replace("Ref","");zA(n.replace("_","."),WA(n,this),this.propCollection)}},e.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},e}(),lR=function(){function e(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return e.prototype.ngOnInit=function(){this.isInitChanges=!0},e.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map((function(i){return i.index=t++,i.property=e.propertyName,i})),this.hasChanges=!0},e.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},e.prototype.isChanged=function(){var e=this,t=!1,i=0,n=!1,s=this.children.map((function(e){return e}));if(this.list.length===this.children.length)for(var r=0;r<this.list.length;r++){var o=Object.keys(this.list[r]);if(this.list[r].directivePropList)for(var a=0;a<this.list[r].directivePropList.length;a++){var l=this.list[r].directivePropList[a];if(-1!==o.indexOf(l)){var c=this.list[r];JSON.stringify(c[l])!==JSON.stringify(c.propCollection[l])&&(zA(l,WA(l,this.list[r]),this.list[r].propCollection),this.list[r].hasChanges=!0,this.list[r].isUpdated=!1)}}if(this.list[r].propCollection.dataSource)this.list[r].dataSource&&this.list[r].propCollection.dataSource!==this.list[r].dataSource&&(this.list[r].propCollection.dataSource=this.list[r].dataSource,this.list[r].hasChanges=!0),n=JSON.stringify(this.list[r].propCollection.dataSource)!==JSON.stringify(s[r].propCollection.dataSource);else for(var h=Object.keys(this.list[r].propCollection),d=0;d<h.length;d++)if(this.list[r].propCollection[h[d]]&&"TemplateRef_"===this.list[r].propCollection[h[d]].constructor.name){n=!0;break}}this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map((function(t){return t.index=i++,t.property=e.propertyName,t})));for(var u=0,p=this.list;u<p.length;u++)t=t||p[u].hasChanges;return!!this.list.length&&t},e.prototype.clearTemplate=function(e){for(var t=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(e&&e.map((function(e){return new RegExp(t.propertyName).test(e)?e.replace(t.propertyName+".",""):e})))},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)this.list[e].isUpdated=!0},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e}(),cR=function(){function e(){this.isProtectedOnChange=!0}return e.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},e.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(e,i){var n=t.srenderer?t.srenderer.createElement(e):FD(e);return void 0===i||(n.innerHTML=i.innerHTML?i.innerHTML:"",void 0!==i.className&&(n.className=i.className),void 0!==i.id&&(n.id=i.id),void 0!==i.styles&&n.setAttribute("style",i.styles),void 0!==t.ngAttr&&n.setAttribute(t.ngAttr,""),void 0!==i.attrs&&KD(n,i.attrs)),n};for(var i=0,n=t.tags;i<n.length;i++){var s=n[i],r={instance:WA("child"+s.substring(0,1).toUpperCase()+s.substring(1),t),name:s};t.tagObjects.push(r)}for(var o=Object.keys(t),a=0,l=o=o.filter((function(e){return/Ref$/i.test(e)&&/\_/i.test(e)}));a<l.length;a++){var c=l[a].replace("Ref",""),h={};zA(c.replace("_","."),WA(c,t),h),t.setProperties(h,!0)}},e.prototype.getAngularAttr=function(e){for(var t,i=e.attributes,n=i.length,s=0;s<n;s++)/_ngcontent/g.test(i[s].name)&&(t=i[s].name);return t},e.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var i=Object.keys(t),n=0,s=i=i.filter((function(e){return/Ref$/i.test(e)}));n<s.length;n++){var r=s[n].replace("Ref","");zA(r.replace("_","."),WA(r+"Ref",t),t)}setTimeout((function(){"undefined"!=typeof window&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")}))},e.prototype.ngOnDestroy=function(e){var t=e||this;"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null))},e.prototype.clearTemplate=function(e,t){rR(this,e,t)},e.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,n=t.tagObjects;i<n.length;i++){var s=n[i];if(!JA(s.instance)&&(s.instance.isInitChanges||s.instance.hasChanges||s.instance.hasNewChildren))if(s.instance.isInitChanges){var r={},o=void 0;(C=WA("instance.list",s))&&C.length&&(o=C[0].directivePropList);var a=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(a=!1),o&&a&&-1===o.indexOf(s.instance.propertyName))for(var l=Object.keys(s.instance.list[0].propCollection),c=0;c<s.instance.list.length;c++){s.instance.list[c].propCollection[s.instance.propertyName]=[];for(var h={},d=0;d<l.length;d++){var u=l[d];h[u]=s.instance.list[c].propCollection[u]}for(var p=0;p<s.instance.list[c].tags.length;p++){var f=s.instance.list[c].tags[p],m=WA("child"+f.substring(0,1).toUpperCase()+f.substring(1),s.instance.list[c]);if(m){var g=s.instance.list[c]["child"+f.substring(0,1).toUpperCase()+f.substring(1)];if(g)for(var v=0;v<g.list.length;v++){var y=g.list[0].tags[0];if(y){var b=WA("child"+y.substring(0,1).toUpperCase()+y.substring(1),g.list[v]);b&&g.list[v].tagObjects.push({instance:b,name:y})}}s.instance.list[c].tagObjects.push({instance:m,name:f})}}s.instance.list[c].propCollection[s.instance.propertyName].push(h)}r[s.name]=s.instance.getProperties(),t.setProperties(r,s.instance.isInitChanges)}else{t[s.name].length!==s.instance.list.length&&(t[s.name]=s.instance.list);for(var w=0,S=s.instance.list;w<S.length;w++){var C,_=s.instance.list.indexOf(C=S[w]),E=WA(s.name,t)[_];void 0!==E&&void 0!==E.setProperties&&("DashboardLayout"===t.getModuleName()?E.setProperties(C.getProperties(),!0):E.setProperties(C.getProperties())),C.isUpdated=!0}}}},e.prototype.registerEvents=function(e){sR(e,this)},e.prototype.twoWaySetter=function(e,t){var i=WA(t,this.properties);i!==e&&(this.saveChanges(t,e,i),zA(t,XA(e)?null:e,this.properties),WA(t+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var t=this,i=function(e){WA(e,n),Object.defineProperty(n,e,{get:function(){return WA(e,t.properties)},set:function(i){return t.twoWaySetter(i,e)}}),zA(e+"Change",new $l,n)},n=this,s=0,r=e;s<r.length;s++)i(r[s])},e.prototype.addEventListener=function(e,t){var i=WA(e,this);JA(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},e.prototype.removeEventListener=function(e,t){JA(WA(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},e.prototype.trigger=function(e,t,i){var n=WA(e,this),s=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),JA(n)||n.next(t);var r=WA("local"+e.charAt(0).toUpperCase()+e.slice(1),this);JA(r)||r.call(this,t),this.isProtectedOnChange=s,i&&i.call(this,t)},e}(),hR=SD.compile;function dR(e){return function(t,i){var n={set:uR(i),get:pR(i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n)}}function uR(e){return function(t){void 0!==t&&(zA(e+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,t,void 0),this.dataBind()))}}function pR(e,t){return function(){return WA(e+"Ref",this)||t}}function fR(e,t,i,n,s,r){let o=n;if(n.tagName===t){let t=WA("ej2_instances",n);o=e("input",{attrs:{type:i}});let a=["change","cssClass","label","labelPosition","id"];for(let e=0,i=n.attributes.length;e<i;e++)-1===a.indexOf(n.attributes[e].nodeName)&&o.setAttribute(n.attributes[e].nodeName,n.attributes[e].nodeValue);KD(n,{class:s,role:r,"aria-checked":"false"}),n.appendChild(o),zA("ej2_instances",t,o),GA(n,"ej2_instances")}return o}function mR(e){let t,i=e.childNodes;for(let n=0;n<i.length;n++)if(t=i[n],3===t.nodeType)return t;return null}function gR(e,t=!1,i={}){let n=e("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&jD([n],i.cssClass.split(" ")),i.enableRtl&&n.classList.add("e-rtl"),t){let t=e("span",{className:"e-ripple-container"});EI(t,{isCenterRipple:!0,duration:400}),n.appendChild(t)}let s=e("span",{className:"e-frame e-icons"});if(i.checked&&s.classList.add("e-check"),n.appendChild(s),i.label){let t=e("span",{className:"e-label",innerHTML:i.label});n.appendChild(t)}return n}function vR(e,t){if(t){let i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}}SD.compile=function(e,t){if("string"==typeof e)return hR(e,t);var i=e.elementRef.nativeElement._viewContainerRef,n=e.elementRef.nativeElement.propName;return function(t,s,r){var o=i||s.viewContainerRef,a=o.createEmbeddedView(e,{$implicit:t});a.markForCheck();var l=s?s.registeredTemplate:WA("currentInstance.registeredTemplate",o);return void 0===l[r=r||n]&&(l[r]=[]),l[r].push(a),a.rootNodes}};var yR=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let bR=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}preRender(){}render(){this.initialize(),this.removeRippleEffect=EI(this.element,{selector:".e-btn"}),this.renderComplete()}initialize(){if(this.cssClass&&jD([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){let e=this.enableHtmlSanitizer?nR.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents()}controlStatus(e){this.element.disabled=e}setIconCss(){if(this.iconCss){let e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");let t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}}wireEvents(){this.isToggle&&GO.add(this.element,"click",this.btnClickHandler,this)}unWireEvents(){this.isToggle&&GO.remove(this.element,"click",this.btnClickHandler)}btnClickHandler(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")}destroy(){{let e,t=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),super.destroy(),HD([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),e=this.element.querySelector("span.e-btn-icon"),e&&YD(e)}this.unWireEvents(),OI&&this.removeRippleEffect()}getModuleName(){return"btn"}getPersistData(){return this.addOnPersist([])}static Inject(){}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":let i=this.element.querySelector("span.e-btn-icon");i?e.iconCss?(i.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&i.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):YD(i):this.setIconCss();break;case"iconPosition":HD([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),i=this.element.querySelector("span.e-btn-icon"),i&&YD(i),this.setIconCss();break;case"cssClass":t.cssClass&&HD([this.element],t.cssClass.split(" ")),e.cssClass&&jD([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":mR(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=nR.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?GO.add(this.element,"click",this.btnClickHandler,this):(GO.remove(this.element,"click",this.btnClickHandler),HD([this.element],["e-active"]))}}click(){this.element.click()}focusIn(){this.element.focus()}};return yR([mI("Left")],e.prototype,"iconPosition",void 0),yR([mI("")],e.prototype,"iconCss",void 0),yR([mI(!1)],e.prototype,"disabled",void 0),yR([mI(!1)],e.prototype,"isPrimary",void 0),yR([mI("")],e.prototype,"cssClass",void 0),yR([mI("")],e.prototype,"content",void 0),yR([mI(!1)],e.prototype,"isToggle",void 0),yR([mI()],e.prototype,"locale",void 0),yR([mI(!1)],e.prototype,"enableHtmlSanitizer",void 0),yR([yI()],e.prototype,"created",void 0),e=yR([bI],e),e})();var wR=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const SR="e-frame",CR="e-ripple-container",_R=["title","class","style","disabled","readonly","name","value"];let ER=(()=>{let e=class extends NI{constructor(e,t){super(e,t),this.isFocused=!1,this.isMouseClick=!1}changeState(e){let t,i,n=this.getWrapper().getElementsByClassName(SR)[0];OI&&(i=this.getWrapper().getElementsByClassName(CR)[0]),"check"===e?(n.classList.remove("e-stop"),n.classList.add("e-check"),i&&(i.classList.remove("e-ripple-stop"),i.classList.add("e-ripple-check")),t="true",this.element.checked=!0):"uncheck"===e?(HD([n],["e-check","e-stop"]),i&&HD([i],["e-ripple-check","e-ripple-stop"]),t="false",this.element.checked=!1):(n.classList.remove("e-check"),n.classList.add("e-stop"),i&&(i.classList.remove("e-ripple-check"),i.classList.add("e-ripple-stop")),t="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",t)}clickHandler(e){this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0),this.trigger("change",{checked:this.element.checked,event:e})}destroy(){let e=this.getWrapper();this.wrapper&&(e=this.wrapper,super.destroy(),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&e.parentNode.insertBefore(this.element,e),YD(e),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(e=>{this.element.removeAttribute(e)})):(["role","aria-checked","class"].forEach(t=>{e.removeAttribute(t)}),e.innerHTML=""))}focusHandler(){this.isFocused=!0}focusOutHandler(){this.getWrapper().classList.remove("e-focus"),this.isFocused=!1}getModuleName(){return"checkbox"}getPersistData(){return this.addOnPersist(["checked","indeterminate"])}getWrapper(){return this.element.parentElement?this.element.parentElement.parentElement:null}initialize(){XA(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()}initWrapper(){let e=this.element.parentElement;e.classList.contains("e-checkbox-wrapper")||(e=this.createElement("div",{className:"e-checkbox-wrapper",attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));let t=this.createElement("label",{attrs:{for:this.element.id}}),i=this.createElement("span",{className:"e-icons "+SR});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&jD([e],this.cssClass.split(" ")),e.appendChild(t),t.appendChild(this.element),s=t,(n=this).element.getAttribute("ejs-for")&&s.appendChild(n.createElement("input",{attrs:{name:n.name||n.element.name,value:"false",type:"hidden"}})),t.appendChild(i),OI){let e=this.createElement("span",{className:CR});"Before"===this.labelPosition?t.appendChild(e):t.insertBefore(e,i),EI(e,{duration:400,isCenterRipple:!0})}var n,s;this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getWrapper().classList.add("e-focus")}labelMouseHandler(e){this.isMouseClick=!0,vR(e,this.getWrapper().getElementsByClassName(CR)[0])}onPropertyChanged(e,t){let i=this.getWrapper();for(let n of Object.keys(e))switch(n){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove("e-checkbox-disabled"),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&HD([i],t.cssClass.split(" ")),e.cssClass&&jD([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":let n=i.getElementsByClassName("e-label")[0],s=i.getElementsByTagName("label")[0];YD(n),"After"===e.labelPosition?s.appendChild(n):s.insertBefore(n,i.getElementsByClassName(SR)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}preRender(){let e=this.element;this.formElement=QD(this.element,"form"),this.tagName=this.element.tagName,e=fR(this.createElement,"EJS-CHECKBOX","checkbox",e,"e-checkbox-wrapper","checkbox"),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=QA("e-"+this.getModuleName()))}render(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.renderComplete(),this.wrapper=this.getWrapper()}setDisabled(){let e=this.getWrapper();this.element.disabled=!0,e.classList.add("e-checkbox-disabled"),e.setAttribute("aria-disabled","true")}setText(e){let t=this.getWrapper().getElementsByClassName("e-label")[0];if(t)t.textContent=e;else{e=this.enableHtmlSanitizer?nR.sanitize(e):e,t=this.createElement("span",{className:"e-label",innerHTML:e});let i=this.getWrapper().getElementsByTagName("label")[0];"Before"===this.labelPosition?i.insertBefore(t,this.getWrapper().getElementsByClassName(SR)[0]):i.appendChild(t)}}changeHandler(e){e.stopPropagation()}formResetHandler(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue}unWireEvents(){let e=this.wrapper;GO.remove(this.element,"click",this.clickHandler),GO.remove(this.element,"keyup",this.keyUpHandler),GO.remove(this.element,"focus",this.focusHandler),GO.remove(this.element,"focusout",this.focusOutHandler);let t=e.getElementsByTagName("label")[0];GO.remove(t,"mousedown",this.labelMouseHandler),GO.remove(t,"mouseup",this.labelMouseHandler),this.formElement&&GO.remove(this.formElement,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&GO.remove(this.element,"change",this.changeHandler)}wireEvents(){let e=this.getWrapper();GO.add(this.element,"click",this.clickHandler,this),GO.add(this.element,"keyup",this.keyUpHandler,this),GO.add(this.element,"focus",this.focusHandler,this),GO.add(this.element,"focusout",this.focusOutHandler,this);let t=e.getElementsByTagName("label")[0];GO.add(t,"mousedown",this.labelMouseHandler,this),GO.add(t,"mouseup",this.labelMouseHandler,this),this.formElement&&GO.add(this.formElement,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&GO.add(this.element,"change",this.changeHandler,this)}updateHtmlAttributeToWrapper(){if(!XA(this.htmlAttributes))for(let e of Object.keys(this.htmlAttributes))if(_R.indexOf(e)>-1){let t=this.getWrapper();"class"===e?jD([t],this.htmlAttributes[e].split(" ")):"title"===e?t.setAttribute(e,this.htmlAttributes[e]):"style"===e?this.getWrapper().getElementsByClassName(SR)[0].setAttribute(e,this.htmlAttributes[e]):this.element.setAttribute(e,this.htmlAttributes[e])}}click(){this.element.click()}focusIn(){this.element.focus()}};return wR([yI()],e.prototype,"change",void 0),wR([yI()],e.prototype,"created",void 0),wR([mI(!1)],e.prototype,"checked",void 0),wR([mI("")],e.prototype,"cssClass",void 0),wR([mI(!1)],e.prototype,"disabled",void 0),wR([mI(!1)],e.prototype,"indeterminate",void 0),wR([mI("")],e.prototype,"label",void 0),wR([mI("After")],e.prototype,"labelPosition",void 0),wR([mI("")],e.prototype,"name",void 0),wR([mI("")],e.prototype,"value",void 0),wR([mI(!1)],e.prototype,"enableHtmlSanitizer",void 0),wR([mI({})],e.prototype,"htmlAttributes",void 0),e=wR([bI],e),e})();var TR,xR=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let kR,AR,OR,DR,IR,RR,PR=(()=>{let e=TR=class extends NI{constructor(e,t){super(e,t),this.isFocused=!1}changeHandler(e){this.checked=!0,this.dataBind(),this.trigger("change",{value:this.value,event:e}),"EJS-RADIOBUTTON"===this.tagName&&e.stopPropagation()}updateChange(e){let t,i,n=this.getRadioGroup();for(let s=0;s<n.length;s++)t=n[s],t!==this.element&&(i=sO(t,TR),i.checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(i.angularValue=this.value))}destroy(){{let e=this.element.parentElement;super.destroy(),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(e.parentNode.insertBefore(this.element,e),YD(e),this.element.checked=!1,["name","value","disabled"].forEach(e=>{this.element.removeAttribute(e)})):(["role","aria-checked","class"].forEach(t=>{e.removeAttribute(t)}),e.innerHTML="")}}focusHandler(){this.isFocused=!0}focusOutHandler(){this.getLabel().classList.remove("e-focus")}getModuleName(){return"radio"}getSelectedValue(){let e,t=this.getRadioGroup();for(let i=0,n=t.length;i<n;i++)if(e=t[i],e.checked)return e.value;return""}getRadioGroup(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')}getPersistData(){return this.addOnPersist(["checked"])}getLabel(){return this.element.nextElementSibling}initialize(){XA(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()}initWrapper(){let e,t=this.element.parentElement;t.classList.contains("e-radio-wrapper")||(t=this.createElement("div",{className:"e-radio-wrapper"}),this.element.parentNode.insertBefore(t,this.element));let i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),OI&&(e=this.createElement("span",{className:"e-ripple-container"}),i.appendChild(e),EI(e,{duration:400,isCenterRipple:!0})),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add("e-rtl"),this.cssClass&&jD([i],this.cssClass.split(" ")),this.label&&this.setText(this.label)}keyUpHandler(){this.isFocused&&this.getLabel().classList.add("e-focus")}labelRippleHandler(e){vR(e,this.getLabel().getElementsByClassName("e-ripple-container")[0])}formResetHandler(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&KD(this.element,{checked:"true"})}onPropertyChanged(e,t){let i=this.getLabel();for(let n of Object.keys(e))switch(n){case"checked":e.checked&&this.updateChange(e.checked),this.element.checked=e.checked;break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":t.cssClass&&HD([i],t.cssClass.split(" ")),e.cssClass&&jD([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":"Before"===e.labelPosition?i.classList.add("e-right"):i.classList.remove("e-right");break;case"name":this.element.setAttribute("name",e.name);break;case"value":this.element.setAttribute("value",e.value)}}preRender(){let e=this.element;if(this.formElement=QD(this.element,"form"),this.tagName=this.element.tagName,e=fR(this.createElement,"EJS-RADIOBUTTON","radio",e,"e-radio-wrapper","radio"),this.element=e,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=QA("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){let e=this.element.getAttribute("formcontrolname");e&&(this.setProperties({name:e},!0),this.element.setAttribute("name",e))}}render(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}setDisabled(){this.element.disabled=!0}setText(e){let t=this.getLabel(),i=t.getElementsByClassName("e-label")[0];i?i.textContent=e:(e=this.enableHtmlSanitizer?nR.sanitize(e):e,i=this.createElement("span",{className:"e-label",innerHTML:e}),t.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")}unWireEvents(){let e=this.getLabel();GO.remove(this.element,"change",this.changeHandler),GO.remove(this.element,"focus",this.focusHandler),GO.remove(this.element,"focusout",this.focusOutHandler),GO.remove(this.element,"keyup",this.keyUpHandler);let t=e.getElementsByClassName("e-label")[0];t&&(GO.remove(t,"mousedown",this.labelRippleHandler),GO.remove(t,"mouseup",this.labelRippleHandler)),this.formElement&&GO.remove(this.formElement,"reset",this.formResetHandler)}wireEvents(){let e=this.getLabel();GO.add(this.element,"change",this.changeHandler,this),GO.add(this.element,"keyup",this.keyUpHandler,this),GO.add(this.element,"focus",this.focusHandler,this),GO.add(this.element,"focusout",this.focusOutHandler,this);let t=e.getElementsByClassName("e-label")[0];t&&(GO.add(t,"mousedown",this.labelRippleHandler,this),GO.add(t,"mouseup",this.labelRippleHandler,this)),this.formElement&&GO.add(this.formElement,"reset",this.formResetHandler,this)}click(){this.element.click()}focusIn(){this.element.focus()}};return xR([yI()],e.prototype,"change",void 0),xR([yI()],e.prototype,"created",void 0),xR([mI(!1)],e.prototype,"checked",void 0),xR([mI("")],e.prototype,"cssClass",void 0),xR([mI(!1)],e.prototype,"disabled",void 0),xR([mI("")],e.prototype,"label",void 0),xR([mI("After")],e.prototype,"labelPosition",void 0),xR([mI("")],e.prototype,"name",void 0),xR([mI("")],e.prototype,"value",void 0),xR([mI(!1)],e.prototype,"enableHtmlSanitizer",void 0),e=TR=xR([bI],e),e})(),MR=!1;function LR(e,t,i,n,s){return AR=i+t==="topright"?void 0:s,AR=s,MR=!!n,e?(t||(t="left"),i||(i="top"),DR=e.ownerDocument,OR=e,function(e,t,i){switch(kR=OR.getBoundingClientRect(),t+e){case"topcenter":NR(zR(),i),VR(UR(),i);break;case"topright":NR(WR(),i),VR(UR(),i);break;case"centercenter":NR(zR(),i),VR(HR(),i);break;case"centerright":NR(WR(),i),VR(HR(),i);break;case"centerleft":NR(qR(),i),VR(HR(),i);break;case"bottomcenter":NR(zR(),i),VR(jR(),i);break;case"bottomright":NR(WR(),i),VR(jR(),i);break;case"bottomleft":NR(qR(),i),VR(jR(),i);break;default:case"topleft":NR(qR(),i),VR(UR(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function NR(e,t){t.left=e}function VR(e,t){t.top=e}function BR(){return DR.documentElement.scrollTop||DR.body.scrollTop}function FR(){return DR.documentElement.scrollLeft||DR.body.scrollLeft}function jR(){return MR?kR.bottom:kR.bottom+BR()}function HR(){return UR()+kR.height/2}function UR(){return MR?kR.top:kR.top+BR()}function qR(){return kR.left+FR()}function WR(){return kR.right+FR()-(AR?AR.width:0)}function zR(){return qR()+kR.width/2}function GR(e,t=null,i={X:!1,Y:!1},n){if(!i.Y&&!i.X)return{left:0,top:0};let s=e.getBoundingClientRect();if(RR=t,IR=e.ownerDocument,n||(n=LR(e,"left","top")),i.X){let e=RR?JR():lP(),t=iP(),i=nP(),r=t-n.left,o=n.left+s.width-i;s.width>e?n.left=r>0&&o<=0?i-s.width:o>0&&r<=0?t:r>o?i-s.width:t:r>0?n.left+=r:o>0&&(n.left-=o)}if(i.Y){let e=RR?QR():aP(),t=tP(),i=sP(),r=t-n.top,o=n.top+s.height-i;s.height>e?n.top=r>0&&o<=0?i-s.height:o>0&&r<=0?t:r>o?i-s.height:t:r>0?n.top+=r:o>0&&(n.top-=o)}return n}function YR(e,t=null,i,n){let s=LR(e,"left","top");i&&(s.left=i),n&&(s.top=n);let r=[];RR=t,IR=e.ownerDocument;let o=e.getBoundingClientRect(),a=s.left,l=s.left+o.width,c=XR(s.top,s.top+o.height),h=KR(a,l);return c.topSide&&r.push("top"),h.rightSide&&r.push("right"),h.leftSide&&r.push("left"),c.bottomSide&&r.push("bottom"),r}function $R(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function KR(e,t){let i=!1,n=!1;return e-oP()<iP()&&(i=!0),t>nP()&&(n=!0),{leftSide:i,rightSide:n}}function XR(e,t){let i=!1,n=!1;return e-rP()<tP()&&(i=!0),t>sP()&&(n=!0),{topSide:i,bottomSide:n}}function JR(){return RR.getBoundingClientRect().width}function QR(){return RR.getBoundingClientRect().height}function ZR(){return RR.getBoundingClientRect().left}function eP(){return RR.getBoundingClientRect().top}function tP(){return RR?eP():0}function iP(){return RR?ZR():0}function nP(){return RR?oP()+ZR()+JR():oP()+lP()}function sP(){return RR?rP()+eP()+QR():rP()+aP()}function rP(){return IR.documentElement.scrollTop||IR.body.scrollTop}function oP(){return IR.documentElement.scrollLeft||IR.body.scrollLeft}function aP(){return window.innerHeight}function lP(){let e=window.innerWidth;return e-(e-(XA(document.documentElement)?0:document.documentElement.offsetWidth))}var cP=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let hP=(()=>{class e extends II{}return cP([mI("left")],e.prototype,"X",void 0),cP([mI("top")],e.prototype,"Y",void 0),e})(),dP=(()=>{let e=class extends NI{constructor(e,t){super(t,e)}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"width":ZD(this.element,{width:tO(e.width)});break;case"height":ZD(this.element,{height:tO(e.height)});break;case"zIndex":ZD(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let i=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+i).toString()+"px";break;case"offsetY":let n=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+n).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove("e-popup","e-rtl","e-popup-open","e-popup-close"),this.unwireEvents(),super.destroy()}render(){this.element.classList.add("e-popup");let e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=tO(this.width)),"auto"!==this.height&&(e.height=tO(this.height)),ZD(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){zO.isDevice&&GO.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(let e of this.getScrollableParent(this.getRelateToElement()))GO.add(e,"scroll",this.scrollRefresh,this)}unwireEvents(){zO.isDevice&&GO.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(let e of this.getScrollableParent(this.getRelateToElement()))GO.remove(e,"scroll",this.scrollRefresh)}getRelateToElement(){let e=""===this.relateTo||XA(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){let t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(e,t){let i=this.getScrollableParent(e);for(let n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0}isElementVisible(e,t){let i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(XA(this.checkGetBoundingClientRect(t))){let t=window,n={top:t.scrollY,left:t.scrollX,right:t.scrollX+t.outerWidth,bottom:t.scrollY+t.outerHeight},s=LR(e),r={top:s.top,left:s.left,right:s.left+i.width,bottom:s.top+i.height},o={top:n.bottom-r.top,left:n.right-r.left,bottom:r.bottom-n.top,right:r.right-n.left};return o.top>0&&o.left>0&&o.right>0&&o.bottom>0}{let e=t.getBoundingClientRect();return!(i.bottom<e.top||i.bottom>e.bottom||i.right>e.right||i.left<e.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}setContent(){XA(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(e,t){XA(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()}reposition(){let e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let n,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){let t=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=t}else e={left:0,top:0};XA(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")}checkGetBoundingClientRect(e){let t;try{return t=e.getBoundingClientRect(),t}catch(i){return null}}getAnchorPosition(e,t,i,n,s){let r=this.checkGetBoundingClientRect(t),o=this.checkGetBoundingClientRect(e);if(XA(r)||XA(o))return null;let a=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=LR(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(t=t.parentElement),l=function(e,t){let i=!1,n={left:0,top:0},s=e;if(!e||!t)return n;for(XA(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=s;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(a,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-r.width/2:l.left+="container"===this.targetType?o.width/2-r.width/2:o.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-r.width:l.left+="container"===this.targetType?o.width-r.width:o.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-r.height/2:l.top+="container"===this.targetType?o.height/2-r.height/2:o.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-r.height:l.top+="container"===this.targetType?o.height-r.height:o.height}return l.left+=n,l.top+=s,l}callFlip(e){let t=this.getRelateToElement();!function(e,t,i,n,s,r,o=null,a={X:!0,Y:!0},l){if(!(t&&e&&s&&r&&(a.X||a.Y)))return;let c={TL:null,TR:null,BL:null,BR:null},h={TL:null,TR:null,BL:null,BR:null},d=e.getBoundingClientRect(),u={posX:s,posY:r,offsetX:i,offsetY:n,position:{left:0,top:0}};RR=o,IR=t.ownerDocument,function(e,t,i,n,s){i.position=LR(e,i.posX,i.posY,n,s),t.TL=LR(e,"left","top",n,s),t.TR=LR(e,"right","top",n,s),t.BR=LR(e,"left","bottom",n,s),t.BL=LR(e,"right","bottom",n,s)}(t,c,u,l,d),$R(h,u,d),a.X&&function e(t,i,n,s,r,o){let a=KR(i.TL.left,i.TR.left);n.TL.left-oP()<=iP()&&(a.leftSide=!1),n.TR.left>=nP()&&(a.rightSide=!1),(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&(s.posX="right"===s.posX?"left":"right",s.offsetX=s.offsetX+r.width,s.offsetX=-1*s.offsetX,s.position=LR(t,s.posX,s.posY,!1),$R(i,s,r),o&&e(t,i,n,s,r,!1))}(t,h,c,u,d,!0),a.Y&&c.TL.top>-1&&function e(t,i,n,s,r,o){let a=XR(i.TL.top,i.BL.top);n.TL.top-rP()<=tP()&&(a.topSide=!1),n.BL.top>=sP()&&(a.bottomSide=!1),(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&(s.posY="top"===s.posY?"bottom":"top",s.offsetY=s.offsetY+r.height,s.offsetY=-1*s.offsetY,s.position=LR(t,s.posX,s.posY,!1,r),$R(i,s,r),o&&e(t,i,n,s,r,!1))}(t,h,c,u,d,!0),function(e,t,i){let n=0,s=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){let t=LR(e.offsetParent,"left","top",!1,i);n=t.left,s=t.top}e.style.top=t.position.top+t.offsetY-s+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,u,d)}(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)}callFit(e){if(0!==YR(this.element,this.viewPortElement).length)if(XA(this.viewPortElement)){let t=GR(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{let t=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement);if(XA(t)||XA(i))return null;e&&!0===e.Y&&(i.top>t.top?this.element.style.top="0px":i.bottom<t.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(t.bottom-i.bottom)+"px")),e&&!0===e.X&&(i.right<t.right?this.element.style.left=parseInt(this.element.style.left,10)-(t.right-i.right)+"px":i.left>t.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-t.left)+"px"))}}checkCollision(){let e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))}show(e,t){if(this.wireEvents(),1e3===this.zIndex||!XA(t)){let e=XA(t)?this.element:t;this.zIndex=uP(e),ZD(this.element,{zIndex:this.zIndex})}e=XA(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(HD([this.element],"e-popup-close"),jD([this.element],"e-popup-open"),this.checkCollision(),HD([this.element],"e-popup-open"),jD([this.element],"e-popup-close")),XA(e)?(HD([this.element],"e-popup-close"),jD([this.element],"e-popup-open"),this.trigger("open")):(e.begin=()=>{this.isDestroyed||(HD([this.element],"e-popup-close"),jD([this.element],"e-popup-open"))},e.end=()=>{this.isDestroyed||this.trigger("open")},new _I(e).animate(this.element))}hide(e){e=XA(e)||"object"!=typeof e?this.hideAnimation:e,XA(e)?(HD([this.element],"e-popup-open"),jD([this.element],"e-popup-close"),this.trigger("close")):(e.end=()=>{this.isDestroyed||(HD([this.element],"e-popup-open"),jD([this.element],"e-popup-close"),this.trigger("close"))},new _I(e).animate(this.element)),this.unwireEvents()}getScrollableParent(e){return this.checkFixedParent(e),function(e,t){let i=getComputedStyle(e),n=[],s=/(auto|scroll)/,r=e.parentElement;for(;r&&"HTML"!==r.tagName;){let e=getComputedStyle(r);"absolute"===i.position&&"static"===e.position||!s.test(e.overflow+e.overflowY+e.overflowX)||n.push(r),r=r.parentElement}return t||n.push(document),n}(e,this.fixedParent)}checkFixedParent(e){let t=e.parentElement;for(;t&&"HTML"!==t.tagName;){let e=getComputedStyle(t);"fixed"===e.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,XA(this.element.offsetParent)&&"fixed"===e.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return cP([mI("auto")],e.prototype,"height",void 0),cP([mI("auto")],e.prototype,"width",void 0),cP([mI(null)],e.prototype,"content",void 0),cP([mI("container")],e.prototype,"targetType",void 0),cP([mI(null)],e.prototype,"viewPortElement",void 0),cP([mI({X:"none",Y:"none"})],e.prototype,"collision",void 0),cP([mI("")],e.prototype,"relateTo",void 0),cP([gI({},hP)],e.prototype,"position",void 0),cP([mI(0)],e.prototype,"offsetX",void 0),cP([mI(0)],e.prototype,"offsetY",void 0),cP([mI(1e3)],e.prototype,"zIndex",void 0),cP([mI(!1)],e.prototype,"enableRtl",void 0),cP([mI("reposition")],e.prototype,"actionOnScroll",void 0),cP([mI(null)],e.prototype,"showAnimation",void 0),cP([mI(null)],e.prototype,"hideAnimation",void 0),cP([yI()],e.prototype,"open",void 0),cP([yI()],e.prototype,"close",void 0),cP([yI()],e.prototype,"targetExitViewport",void 0),e=cP([bI],e),e})();function uP(e){let t=e.parentElement,i=[];for(;t&&"BODY"!==t.tagName;){let e=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==e&&"static"!==n&&i.push(e),t=t.parentElement}let n=[];for(let a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){let e=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),t=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==e&&"static"!==t&&n.push(e)}n.push("999");let s=[];if(!XA(e.parentElement)&&"BODY"!==e.parentElement.tagName){let t=[].slice.call(e.parentElement.children);for(let e=0;e<t.length;e++){let i=document.defaultView.getComputedStyle(t[e],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t[e],null).getPropertyValue("position");"auto"!==i&&"static"!==n&&s.push(i)}}let r=i.concat(n,s),o=Math.max.apply(Math,r)+1;return o>2147483647?2147483647:o}let pP,fP,mP,gP,vP,yP,bP,wP,SP,CP=["north-west","north","north-east","west","east","south-west","south","south-east"],_P=0,EP=0,TP=0,xP=0,kP=0,AP=0,OP=["e-restrict-left"],DP=null,IP=null,RP=null,PP=!0,MP=0,LP=!0;function NP(e){let t;return XA(e)||(t="string"==typeof e?document.querySelector(e):e),t}function VP(e){XA(e)&&(e=this);let t=pP.querySelectorAll(".e-resize-handle");for(let i=0;i<t.length;i++)fP=t[i],GO.add(fP,"mousedown",FP,e),GO.add(fP,"msie"===zO.info.name?"pointerdown":"touchstart",UP,e)}function BP(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function FP(e){if(e.preventDefault(),pP=e.target.parentElement,HP(),kP=e.pageX,AP=e.pageY,e.target.classList.add("e-focused-handle"),!XA(DP)&&(SP=this,!0===DP(e,SP)))return;let t=XA(bP)?document:bP;GO.add(t,"mousemove",qP,this),GO.add(document,"mouseup",jP,this);for(let i=0;i<OP.length;i++)PP=!pP.classList.contains(OP[i])}function jP(e){let t="msie"===zO.info.name?"pointermove":"touchmove",i="msie"===zO.info.name?"pointerup":"touchend",n=XA(bP)?document:bP;GO.remove(n,"mousemove",qP),GO.remove(n,t,qP),GO.remove(n,"msie"===zO.info.name?"pointerdown":"touchstart",qP),XA(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),XA(RP)||(SP=this,RP(e,SP)),GO.remove(document,"mouseup",jP),GO.remove(document,i,jP)}function HP(){_P=parseFloat(getComputedStyle(pP,null).getPropertyValue("width").replace("px","")),EP=parseFloat(getComputedStyle(pP,null).getPropertyValue("height").replace("px","")),TP=pP.getBoundingClientRect().left,xP=pP.getBoundingClientRect().top}function UP(e){pP=e.target.parentElement,HP();let t=e.touches?e.changedTouches[0]:e;if(kP=t.pageX,AP=t.pageY,!XA(DP)&&(SP=this,!0===DP(e,SP)))return;let i="msie"===zO.info.name?"pointermove":"touchmove",n="msie"===zO.info.name?"pointerup":"touchend",s=XA(bP)?document:bP;GO.add(s,i,qP,this),GO.add(document,n,jP)}function qP(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?fP=e.target:XA(document.body.querySelector(".e-focused-handle"))||(fP=document.body.querySelector(".e-focused-handle")),!XA(fP)){let t="";for(let e=0;e<CP.length;e++)fP.classList.contains("e-"+CP[e])&&(t=CP[e]);switch(XA(IP)||(SP=this,IP(e,SP)),t){case"south":zP(e);break;case"north":GP(e);break;case"west":YP(e);break;case"east":$P(e);break;case"south-east":zP(e),$P(e);break;case"south-west":zP(e),YP(e);break;case"north-east":GP(e),$P(e);break;case"north-west":GP(e),YP(e)}}}function WP(e){return e.getBoundingClientRect()}function zP(e){let t,i=document.documentElement.clientHeight,n=!1,s=(e.touches?e.changedTouches[0]:e).pageY,r=WP(pP);XA(bP)||(t=WP(bP)),XA(bP)?XA(bP)&&(i-s>=0||r.top<0)&&(n=!0):n=!0;let o=EP+(s-AP);o=o>mP?o:mP;let a=0;XA(bP)||(a=t.top);let l=XA(bP)?0:bP.offsetHeight-bP.clientHeight,c=r.top-a-l/2;if(c=c<0?0:c,r.top>0&&c+o>gP){if(n=!1,pP.classList.contains("e-resize-viewport"))return;return void(pP.style.height=gP-parseInt(c.toString(),10)+"px")}let h=0;if(n){r.top<0&&i+(r.height+r.top)>0&&(h=r.top,o+h<=30&&(o=r.height-(r.height+r.top)+30)),o+r.top>=gP&&(pP.style.height=r.height+(i-(r.height+r.top))+"px");let e=XA(bP)?h:c;o>=mP&&o+e<=gP&&(pP.style.height=o+"px")}}function GP(e){let t,i=!1,n="mouse"===BP(e.type)?e.pageY:e.touches[0].pageY,s=WP(pP);XA(bP)||(t=WP(bP)),(!XA(bP)&&s.top-t.top>0||XA(bP)&&n>0)&&(i=!0);let r=EP-(n-AP);if(WP(pP).bottom+r>gP&&(i=!1,pP.style.height=gP-WP(pP).bottom+"px"),i&&r>=mP&&r<=gP){let e=0;XA(bP)||(e=t.top);let i=xP-e+(n-AP);i=i>0?i:1,pP.style.height=r+"px",pP.style.top=i+"px"}}function YP(e){let t,i=document.documentElement.clientWidth,n=!1;XA(bP)||(t=WP(bP));let s="mouse"===BP(e.type)?e.pageX:e.touches[0].pageX,r=WP(pP),o=XA(bP)?0:bP.offsetWidth-bP.clientWidth,a=XA(bP)?0:t.left,l=XA(bP)?0:t.width;XA(wP)&&(XA(bP)?wP=i:(wP=r.left-a-o/2+r.width,wP+=l-o-wP)),(!XA(bP)&&r.left-t.left+r.width+(t.right-r.right)-o<=yP||XA(bP)&&s>=0)&&(n=!0);let c=_P-(s-kP);if(PP&&(c=c>wP?wP:c),n&&c>=vP&&c<=yP){let e=0;XA(bP)||(e=t.left);let i=TP-e+(s-kP);i=i>0?i:1,c!==MP&&LP&&(pP.style.width=c+"px"),PP&&(pP.style.left=i+"px",LP=1!==i)}MP=c}function $P(e){let t,i=document.documentElement.clientWidth,n=!1;XA(bP)||(t=WP(bP));let s=(e.touches?e.changedTouches[0]:e).pageX,r=WP(pP);(!XA(bP)&&(r.left-t.left+r.width<yP||r.right-t.left>r.width)||XA(bP)&&i-s>0)&&(n=!0);let o=_P+(s-kP),a=0;if(XA(bP)||(a=t.left),r.left-a+o>yP){if(n=!1,pP.classList.contains("e-resize-viewport"))return;pP.style.width=yP-(r.left-a)+"px"}n&&o>=vP&&o<=yP&&(pP.style.width=o+"px")}function KP(){let e=pP.querySelectorAll(".e-resize-handle");for(let t=0;t<e.length;t++)YD(e[t])}var XP=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let JP=(()=>{class e extends II{}return XP([mI()],e.prototype,"buttonModel",void 0),XP([mI("Button")],e.prototype,"type",void 0),XP([yI()],e.prototype,"click",void 0),e})(),QP=(()=>{class e extends II{}return XP([mI("Fade")],e.prototype,"effect",void 0),XP([mI(400)],e.prototype,"duration",void 0),XP([mI(0)],e.prototype,"delay",void 0),e})();const ZP="e-dialog",eM="e-dlg-target",tM="e-scroll-disabled",iM="e-dlg-fullscreen";let nM=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=e=>{this.hide(e)},this.dlgOverlayClickEventHandler=e=>{this.trigger("overlayClick",e),this.focusContent()},this.l10n=new KI("dialog",{close:"Close"},this.locale),this.checkPositionData(),XA(this.target)){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}}isNumberValue(e){return/^[-+]?\d*\.?\d+$/.test(e)}checkPositionData(){if(!XA(this.position)){if(!XA(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!XA(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}}getEle(e,t){let i=void 0;for(let n=0;n<e.length;n++)if(e[n].classList.contains(t)){i=e[n];break}return i}getMinHeight(){let e="0px",t="0px";XA(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);let i=this.getEle(this.element.children,"e-footer-content");XA(i)||(t=getComputedStyle(i).height);let n=parseInt(e.slice(0,e.indexOf("p")),10),s=parseInt(t.slice(0,t.indexOf("p")),10);return mP=n+30+s,n+30+s}onResizeStart(e,t){return t.trigger("resizeStart",e),e.cancel}onResizing(e,t){t.trigger("resizing",e)}onResizeComplete(e,t){t.trigger("resizeStop",e)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");let e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,i=this.enableRtl?"south-west":"south-east";this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){DP=e.resizeBegin,IP=e.resizing,RP=e.resizeComplete,pP=NP(e.element),bP=NP(e.boundary);let t=e.direction.split(" ");for(let i=0;i<t.length;i++){let e=FD("div",{className:"e-icons e-resize-handle e-"+t[i]});pP.appendChild(e)}mP=e.minHeight,vP=e.minWidth,yP=e.maxWidth,gP=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?VP(e.proxy):VP()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this})}else KP(),this.element.classList.remove(this.isModal?"e-restrict-left":"e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")}keyDown(e){if(9===e.keyCode&&this.isModal){let t;if(XA(this.btnObj)||(t=this.btnObj[this.btnObj.length-1]),XA(this.btnObj)&&!XA(this.ftrTemplateContent)){let e=this.ftrTemplateContent.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');t={element:e[e.length-1]}}XA(t)||document.activeElement!==t.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),XA(t)||t.element.focus())}let t=document.activeElement,i=["input","textarea"].indexOf(t.tagName.toLowerCase())>-1,n=!1;if(i||(n=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),13===e.keyCode&&!e.ctrlKey&&"textarea"!==t.tagName.toLowerCase()&&i&&!XA(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===t.tagName.toLowerCase()||n)&&!XA(this.primaryButtonEle)){let t;this.buttons.some((e,i)=>{t=i;let n=e.buttonModel;return!XA(n)&&!0===n.isPrimary})&&"function"==typeof this.buttons[t].click&&setTimeout(()=>{this.buttons[t].click.call(this,e)})}}initialize(){XA(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||jD([this.element],ZP),zO.isDevice&&jD([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||KD(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&XA(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&XA(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||XA(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||XA(this.footerTemplate)?XA(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(XA(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!XA(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(KD(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&XA(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let e=0,t=this.dlgContainer.children;e<t.length;e++)t[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=t[e])}if(!0!==this.element.classList.contains("e-alert-dialog")&&!0!==this.element.classList.contains("e-confirm-dialog")&&!XA(this.element.parentElement)){let e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}XA(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new dP(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:e=>{let t={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",t,e=>{e.preventFocus||this.focusContent()})},close:e=>{this.isModal&&jD([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);let t=document.activeElement;XA(t)||XA(t.blur)||t.blur(),XA(this.storeActiveElement)||XA(this.storeActiveElement.focus)||this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(jD([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){let e=this.getMinHeight();if(this.targetEle.offsetHeight<e){let t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));XA(t)||(t.style.bottom="-"+e.toString()+"px")}}setOverlayZindex(e){let t;t=XA(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new UI(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:e=>{this.trigger("dragStart",e,e=>{})},dragStop:e=>{this.isModal&&(XA(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",e),this.element.classList.remove("e-restrict-left")},drag:e=>{this.trigger("drag",e)}}),XA(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let e=0;e<this.buttons.length;e++){let t=XA(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}let e;for(let t=0,i=this.element.children;t<i.length;t++)i[t].classList.contains("e-footer-content")&&(e=i[t].querySelectorAll("button"));for(let t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new bR(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!XA(this.ftrTemplateContent)&&"function"==typeof this.buttons[t].click&&e.length>0&&GO.add(e[t],"click",this.buttons[t].click,this),this.isBlazorServerRender()||XA(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}setContent(){KD(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(XA(this.content)||""===this.content)&&this.initialRender||("string"!=typeof this.content?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),XA(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!zO.isIE||""!==this.element.style.width||XA(this.width)||(this.element.style.width=tO(this.width)),this.setMaxHeight())}setTemplate(e,t){let i,n,s;n=t.classList.contains("e-dlg-header")?this.element.id+"header":t.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",XA(e.outerHTML)?"string"!=typeof e?(i=bD(e),s=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);let r=[];if(!XA(i)){let e=!0;for(let t of i({},null,null,n,e))r.push(t);zD([].slice.call(r),t)}}sanitizeHelper(e){if(this.enableHtmlSanitizer){let t=nR.beforeSanitize();KA(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!XA(t.helper)?e=t.helper(e):t.cancel||(e=nR.serializeValue(t,e))}return e}setMaxHeight(){if(!this.allowMaxHeight)return;let e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!XA(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,zO.isIE&&"auto"===this.height&&!XA(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?jD([this.element],"e-rtl"):HD([this.element],"e-rtl")),XA(this.element.querySelector(".e-resize-handle"))||(KP(),this.setResize())}setTargetContent(){if(XA(this.content)||""===this.content){let e=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(e=>{8!==e.nodeType&&this.innerContentElement.appendChild(e)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle),KD(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||XA(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){XA(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))}renderCloseIcon(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new bR({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),XA(this.headerContent)?(this.createHeaderContent(),WD([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):WD([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)}closeIconTitle(){this.l10n.setLocale(this.locale);let e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}setCSSClass(e){this.cssClass&&jD([this.element],this.cssClass.split(" ")),e&&HD([this.element],e.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),jD([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(e){let t;for(let i=0;i<e.length;i++)if(t=e[i],(t.clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;return t}focusableElements(e){if(!XA(e)){let t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null}getAutoFocusNode(e){let t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(XA(n)){if(n=this.focusableElements(this.contentEle),!XA(n))return n;if(!XA(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t}disableElement(e,t){let i=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}focusContent(){let e=this.getAutoFocusNode(this.element);(XA(e)?this.element:e).focus(),this.bindEvent(this.element)}bindEvent(e){GO.add(e,"keydown",this.keyDown,this)}unBindEvent(e){GO.remove(e,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return!1}getModuleName(){return"dialog"}onPropertyChanged(e,t){if(this.element.classList.contains(ZP))for(let i of Object.keys(e))switch(i){case"content":XA(this.content)||""===this.content?XA(this.contentEle)||(YD(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),XA(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||XA(this.header)?this.headerEle&&(YD(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||XA(this.footerTemplate)){if(!this.ftrTemplateContent)return;YD(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!XA(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():YD(this.closeIcon):(YD(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":ZD(this.element,{height:tO(e.height)});break;case"width":ZD(this.element,{width:tO(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":let i=this.buttons.length;XA(this.ftrTemplateContent)||this.isBlazorServerRender()||(YD(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let e=0;e<i;e++)XA(this.buttons[e].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!XA(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){let e=XA(t.position.X)?this.position.X:t.position.X,i=XA(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+e+"-"+i)&&this.dlgContainer.classList.remove("e-dlg-"+e+"-"+i)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",XA(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(HD([this.element],"e-dlg-modal"),HD([document.body],[eM,tM]),YD(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&GO.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(e,t){let i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=uP(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;let e=["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left",iM,"e-device"],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(HD([this.targetEle],[eM,tM]),this.element.classList.contains(iM)&&HD([document.body],[eM,tM]),this.isModal&&HD([XA(this.targetEle)?document.body:this.targetEle],tM),this.unWireEvents(),!XA(this.btnObj))for(let i=0;i<this.btnObj.length;i++)this.btnObj[i].destroy();if(XA(this.dragObj)||this.dragObj.destroy(),this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),HD([this.element],e),XA(this.cssClass)||""===this.cssClass||HD([this.element],this.cssClass.split(" ")),XA(this.refElement)||XA(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),YD(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(YD(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),YD(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!XA(this.element.children))for(let i=0;i<=this.element.children.length;i++)i-=i,YD(this.element.children[i]);for(let i=0;i<t.length;i++)this.element.removeAttribute(t[i]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy()}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&GO.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&GO.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&GO.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&GO.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!XA(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&GO.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}refreshPosition(){this.popupObj.refreshPosition()}show(e){if(this.element.classList.contains(ZP)&&(!this.element.classList.contains("e-popup-open")||!XA(e))){XA(e)||this.fullScreen(e);let t={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",t,e=>{if(!e.cancel){this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!XA(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",HD([this.dlgOverlay],"e-fade"),XA(this.targetEle)?jD([document.body],[eM,tM]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",jD([this.targetEle],[eM,tM])));let e={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},i=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(i,!0),ZD(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(e),this.dialogOpen=!0;let n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=n}})}}hide(e){if(this.element.classList.contains(ZP)&&this.preventVisibility){let t={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};this.closeArgs=t,this.trigger("beforeClose",t,e=>{if(!e.cancel){this.isModal&&(XA(this.targetEle)?HD([document.body],[eM,tM]):HD([this.targetEle],[eM,tM]));let e={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(e),this.dialogOpen=!1;let t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=t}})}}fullScreen(e){if(e){jD([this.element],iM);let e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=XA(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,jD([document.body],[eM,tM]),this.allowDragging&&!XA(this.dragObj)&&this.dragObj.destroy()}else HD([this.element],iM),HD([document.body],[eM,tM]),this.allowDragging&&!XA(this.headerContent)&&this.setAllowDragging();return e}getButtons(e){return XA(e)?this.btnObj:this.btnObj[e]}};return XP([mI("")],e.prototype,"content",void 0),XP([mI(!0)],e.prototype,"enableHtmlSanitizer",void 0),XP([mI(!1)],e.prototype,"showCloseIcon",void 0),XP([mI(!1)],e.prototype,"isModal",void 0),XP([mI("")],e.prototype,"header",void 0),XP([mI(!0)],e.prototype,"visible",void 0),XP([mI(!1)],e.prototype,"enableResize",void 0),XP([mI("auto")],e.prototype,"height",void 0),XP([mI("")],e.prototype,"minHeight",void 0),XP([mI("100%")],e.prototype,"width",void 0),XP([mI("")],e.prototype,"cssClass",void 0),XP([mI(1e3)],e.prototype,"zIndex",void 0),XP([mI(null)],e.prototype,"target",void 0),XP([mI("")],e.prototype,"footerTemplate",void 0),XP([mI(!1)],e.prototype,"allowDragging",void 0),XP([vI([{}],JP)],e.prototype,"buttons",void 0),XP([mI(!0)],e.prototype,"closeOnEscape",void 0),XP([gI({},QP)],e.prototype,"animationSettings",void 0),XP([gI({X:"center",Y:"center"},hP)],e.prototype,"position",void 0),XP([yI()],e.prototype,"created",void 0),XP([yI()],e.prototype,"open",void 0),XP([yI()],e.prototype,"beforeSanitizeHtml",void 0),XP([yI()],e.prototype,"beforeOpen",void 0),XP([yI()],e.prototype,"close",void 0),XP([yI()],e.prototype,"beforeClose",void 0),XP([yI()],e.prototype,"dragStart",void 0),XP([yI()],e.prototype,"dragStop",void 0),XP([yI()],e.prototype,"drag",void 0),XP([yI()],e.prototype,"overlayClick",void 0),XP([yI()],e.prototype,"resizeStart",void 0),XP([yI()],e.prototype,"resizing",void 0),XP([yI()],e.prototype,"resizeStop",void 0),XP([yI()],e.prototype,"destroyed",void 0),e=XP([bI],e),e})();var sM;!function(e){function t(e,t){let i=new nM(e);return i.appendTo(t),i}function i(e,t){return e.header=XA(t.title)?"Information":t.title,e.content=XA(t.content)?"":t.content,e.isModal=!!XA(t.isModal)||t.isModal,e.showCloseIcon=!XA(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!XA(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!XA(t.closeOnEscape)&&t.closeOnEscape,e.position=XA(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=XA(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=XA(t.cssClass)?"":t.cssClass,e.zIndex=XA(t.zIndex)?1e3:t.zIndex,e.open=XA(t.open)?null:t.open,e}function n(e,t,i){let n=i;return XA(t.text)||(n.buttonModel.content=t.text),XA(t.icon)||(n.buttonModel.iconCss=t.icon),XA(t.cssClass)||(n.buttonModel.cssClass=t.cssClass),XA(t.click)||(n.click=t.click),n}e.alert=function(e){let s,r=FD("div",{className:"e-alert-dialog"});return document.body.appendChild(r),s=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){let i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return XA(t.okButton)?e.buttons=i:e.buttons[0]=n(0,t.okButton,i[0]),e}(t,e),t}(e),r),s.close=()=>{e&&e.close&&e.close.apply(s),s.destroy(),s.element.classList.contains("e-dlg-modal")?(s.element.parentElement.remove(),s.target.classList.remove("e-scroll-disabled")):s.element.remove()},s},e.confirm=function(e){let s,r=FD("div",{className:"e-confirm-dialog"});return document.body.appendChild(r),s=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){let i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},s={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=XA(t.okButton)?i:n(0,t.okButton,i),e.buttons[1]=XA(t.cancelButton)?s:n(0,t.cancelButton,s),e}(t,e),t}(e),r),s.close=()=>{e&&e.close&&e.close.apply(s),s.destroy(),s.element.classList.contains("e-dlg-modal")?(s.element.parentElement.remove(),s.target.classList.remove("e-scroll-disabled")):s.element.remove()},s}}(sM||(sM={}));var rM=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let oM=(()=>{class e extends II{}return rM([mI({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),rM([mI({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e})(),aM=(()=>{let e=class extends NI{constructor(e,t){super(e,t),this.isBlazorTooltip=!1,this.contentTargetValue=null,this.contentEvent=null,this.contentAnimation=null}initialize(){this.formatPosition(),this.isServerRender()||jD([this.element],"e-tooltip")}isServerRender(){return!1}formatPosition(){0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?[this.tooltipPositionY,this.tooltipPositionX]=this.position.split(/(?=[A-Z])/):[this.tooltipPositionX,this.tooltipPositionY]=this.position.split(/(?=[A-Z])/)}renderArrow(){if(this.setTipClass(this.position),this.isServerRender()){let e=this.tooltipEle.querySelector(".e-arrow-tip");jD([e.querySelector(".e-arrow-tip-outer")],this.tipClass),jD([e.querySelector(".e-arrow-tip-inner")],this.tipClass),this.tooltipEle.appendChild(e)}else{let e=this.createElement("div",{className:"e-arrow-tip "+this.tipClass});e.appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e)}}setTipClass(e){this.tipClass=0===e.indexOf("Right")?"e-tip-left":0===e.indexOf("Bottom")?"e-tip-top":0===e.indexOf("Left")?"e-tip-right":"e-tip-bottom"}renderPopup(e){let t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new dP(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}getTooltipPosition(e){this.tooltipEle.style.display="block";let t=LR(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",n}reposition(e){let t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}openPopupHandler(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}closePopupHandler(){wD(this.element.id+"content"),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}calculateTooltipOffset(e){let t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,s=this.tooltipEle.querySelector(".e-arrow-tip"),r=s?s.offsetWidth:0,o=s?s.offsetHeight:0,a=this.showTipPointer?0:8,l=o/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=r/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(a+=2),e){case"RightTop":t.left+=r+a,t.top-=n-l;break;case"RightCenter":t.left+=r+a,t.top-=n/2;break;case"RightBottom":t.left+=r+a,t.top-=l;break;case"BottomRight":t.top+=o+a,t.left-=c;break;case"BottomCenter":t.top+=o+a,t.left-=i/2;break;case"BottomLeft":t.top+=o+a,t.left-=i-c;break;case"LeftBottom":t.left-=r+i+a,t.top-=l;break;case"LeftCenter":t.left-=r+i+a,t.top-=n/2;break;case"LeftTop":t.left-=r+i+a,t.top-=n-l;break;case"TopLeft":t.top-=n+o+a,t.left-=i-c;break;case"TopRight":t.top-=n+o+a,t.left-=c;break;default:t.top-=n+o+a,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t}updateTipPosition(e){let t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");HD(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),jD(t,this.tipClass)}adjustArrow(e,t,i,n){if(!1===this.showTipPointer)return;let s,r;this.updateTipPosition(t),this.tooltipEle.style.display="block";let o=this.tooltipEle.clientWidth,a=this.tooltipEle.clientHeight,l=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),h=l.offsetWidth,d=l.offsetHeight;if(this.tooltipEle.style.display="","e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(r="99.9%",c.style.top="-"+(d-2)+"px"):(r=-(d-1)+"px",c.style.top="-"+(d-6)+"px"),e){let t="Center"!==i||o>e.offsetWidth||this.mouseTrail;s=t&&"Left"===i||!t&&"End"===this.tipPointerPosition?o-h-2+"px":t&&"Right"===i||!t&&"Start"===this.tipPointerPosition?"2px":o/2-h/2+"px"}}else{"e-tip-right"===this.tipClass?(s="99.9%",c.style.left="-"+(h-2)+"px"):(s=-(h-1)+"px",c.style.left=h-2-h+"px");let t="Center"!==n||a>e.offsetHeight||this.mouseTrail;r=t&&"Top"===n||!t&&"End"===this.tipPointerPosition?a-d-2+"px":t&&"Bottom"===n||!t&&"Start"===this.tipPointerPosition?"2px":a/2-d/2+"px"}l.style.top=r,l.style.left=s}renderContent(e){let t=this.tooltipEle.querySelector(".e-tip-content");this.cssClass&&jD([this.tooltipEle],this.cssClass.split(" ")),e&&!XA(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),XA(this.content)?e&&!XA(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content")):!this.isBlazorTooltip&&this.isServerRender()||(t.innerHTML="",this.content instanceof HTMLElement?t.appendChild(this.content):"string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0?(this.enableHtmlSanitizer&&this.setProperties({content:nR.sanitize(this.content)},!0),t.innerHTML=this.content):(zD(bD(this.content)({},null,null,this.element.id+"content"),t),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0)))}renderCloseIcon(){if(!this.isSticky)return;let e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),GO.add(e,zO.touchStartEvent,this.onStickyClose,this)}addDescribedBy(e,t){let i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),KD(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})}removeDescribedBy(e){let t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");let s=i.join(" ").trim();s?e.setAttribute("aria-describedby",s):e.removeAttribute("aria-describedby")}tapHoldHandler(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)}touchEndHandler(e){this.isSticky||(this.autoCloseTimer=setTimeout(()=>{this.close()},1500))}targetClick(e){let t;t=this.target?QD(e.target,this.target):this.element,XA(t)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))}targetHover(e){let t;if(t=this.target?QD(e.target,this.target):this.element,XA(t)||null!==t.getAttribute("data-tooltip-id"))return;let i=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));for(let n of i)this.restoreElement(n);this.showTooltip(t,this.animation.open,e)}showTooltip(e,t,i){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!XA(i)},this.trigger("beforeRender",this.tooltipEventArgs,(n=>{this.beforeRenderCallback(n,e,i,t)}).bind(this))}beforeRenderCallback(e,t,i,n){let s=!1;e.cancel?(this.isHidden=!0,this.clear()):(this.isHidden=!1,XA(this.tooltipEle)?(this.isServerRender()?(this.contentTargetValue=t,this.contentEvent=i,this.contentAnimation=n,this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),s=!0):(this.ctrlId=this.element.getAttribute("id")?QA(this.element.getAttribute("id")):QA("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+tO(this.width)+";height:"+tO(this.height)+";position:absolute;"}),this.beforeRenderBlazor(t,this)),s||this.afterRenderBlazor(t,i,n,this)):(this.isServerRender()&&(jD([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(t)),t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),_I.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,i,n,this))))}contentUpdated(e){XA(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+tO(this.width)+";height:"+tO(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))}beforeRenderBlazor(e,t){e&&(zO.isDevice&&jD([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=tO(t.width)),this.isServerRender()||t.tooltipEle.appendChild(t.createElement("div",{className:"e-tip-content"})),document.body.appendChild(t.tooltipEle),HD([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),jD([t.tooltipEle],"e-popup-open"),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),_I.stop(t.tooltipEle),t.reposition(e))}afterRenderBlazor(e,t,i,n){if(e){HD([n.tooltipEle],"e-popup-open"),jD([n.tooltipEle],"e-popup-close"),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:n.tooltipEle,isInteracted:!XA(t)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");const s=s=>{n.beforeOpenCallback(s,e,i,t)};n.trigger("beforeOpen",n.tooltipEventArgs,s.bind(n))}}beforeOpenCallback(e,t,i,n){if(e.cancel)this.isHidden=!0,this.clear(),this.restoreElement(t);else{let e={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};"None"===i.effect&&(e=void 0),this.openDelay>0?this.showTimer=setTimeout(()=>{this.popupObj&&this.popupObj.show(e,t)},this.openDelay):this.popupObj&&this.popupObj.show(e,t)}n&&this.wireMouseEvents(n,t)}needTemplateReposition(){return!XA(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate}checkCollision(e,t,i){let n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=YR(this.tooltipEle,this.target?this.element:null,t,i);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n}collisionFlipFit(e,t,i){let n=this.checkCollision(e,t,i),s=n.position;if(this.tooltipPositionY!==n.vertical&&(s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===s.indexOf("Left")&&(n.vertical="LeftTop"===s||"LeftCenter"===s?"Top":"Bottom",s=n.vertical+"Left"),0===s.indexOf("Right")&&(n.vertical="RightTop"===s||"RightCenter"===s?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:s},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==s){let t=LR(e,n.horizontal,n.vertical);this.adjustArrow(e,s,n.horizontal,n.vertical);let i=this.calculateTooltipOffset(s);i.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(s.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,i.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(s.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=s,n.left=t.left+i.left,n.top=t.top+i.top}else this.adjustArrow(e,s,n.horizontal,n.vertical);let r={left:n.left,top:n.top},o=GR(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},r).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===s.indexOf("Bottom")||0===s.indexOf("Top"))){let e=this.tooltipEle.querySelector(".e-arrow-tip"),t=parseInt(e.style.left,10)-(o-n.left);t<0?t=0:t+e.offsetWidth>this.tooltipEle.clientWidth&&(t=this.tooltipEle.clientWidth-e.offsetWidth),e.style.left=t.toString()+"px"}return this.tooltipEle.style.display="",r.left=o,r}hideTooltip(e,t,i){let n;n=t?this.target?i||t.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:n,event:t||null,element:this.tooltipEle,isInteracted:!XA(t)},this.trigger("beforeClose",this.tooltipEventArgs,t=>{t.cancel?this.isHidden=!1:this.isServerRender()?this.blazorHide(e,n):this.popupHide(e,n)})}blazorHide(e,t){let i=this;this.popupObj?this.popupHide(e,t):setTimeout(()=>{i.popupHide(e,t)},200)}popupHide(e,t){this.clearTemplate(),t&&this.restoreElement(t),this.isHidden=!0;let i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.closeDelay>0?this.hideTimer=setTimeout(()=>{this.popupObj&&this.popupObj.hide(i)},this.closeDelay):this.popupObj&&this.popupObj.hide(i)}restoreElement(e){this.unwireMouseEvents(e),XA(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)}clear(){this.tooltipEle&&(HD([this.tooltipEle],"e-popup-close"),jD([this.tooltipEle],"e-popup-open")),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle?(this.tooltipEle.style.display="none",this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),$D(this.tooltipEle)):this.tooltipEle&&$D(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}onMouseOut(e){const t=e.relatedTarget;if(t&&!this.mouseTrail){const i=QD(t,".e-tooltip-wrap.e-lib.e-popup");i?(GO.add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(e.target)):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()}tooltipElementMouseOut(e){this.hideTooltip(this.animation.close,e,this.findTarget()),GO.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}onStickyClose(e){this.close()}onMouseMove(e){let t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),_I.stop(this.tooltipEle),HD([this.tooltipEle],"e-popup-close"),jD([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);let n=this.calculateTooltipOffset(this.position),s=this.checkCollision(e.target,t+n.left+this.offsetX,i+n.top+this.offsetY);if(this.tooltipPositionX!==s.horizontal||this.tooltipPositionY!==s.vertical){let n=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+s.horizontal:s.horizontal+s.vertical;s.position=n,this.adjustArrow(e.target,s.position,s.horizontal,s.vertical);let r=this.calculateTooltipOffset(s.position);s.left=t+r.left-this.offsetX,s.top=i+r.top-this.offsetY}this.tooltipEle.style.left=s.left+"px",this.tooltipEle.style.top=s.top+"px"}keyDown(e){this.tooltipEle&&27===e.keyCode&&this.close()}touchEnd(e){this.tooltipEle&&null===QD(e.target,".e-tooltip")&&this.close()}scrollHandler(e){this.tooltipEle&&(QD(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())}render(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}preRender(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}wireEvents(e){let t=this.getTriggerList(e);for(let i of t){if("Custom"===i)return;"Focus"===i&&this.wireFocusEvents(),"Click"===i&&GO.add(this.element,zO.touchStartEvent,this.targetClick,this),"Hover"===i&&(zO.isDevice?(this.touchModule=new ZI(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),GO.add(this.element,zO.touchEndEvent,this.touchEndHandler,this)):(GO.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&GO.add(this.element,"mouseleave",this.onMouseOut,this)))}GO.add(document,"touchend",this.touchEnd,this),GO.add(document,"scroll wheel",this.scrollHandler,this),GO.add(document,"keydown",this.keyDown,this)}getTriggerList(e){return"Auto"===e&&(e=zO.isDevice?"Hover":"Hover Focus"),e.split(" ")}wireFocusEvents(){if(XA(this.target))GO.add(this.element,"focus",this.targetHover,this);else{let e=[].slice.call(this.element.querySelectorAll(this.target));for(let t of e)GO.add(t,"focus",this.targetHover,this)}}wireMouseEvents(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&GO.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&(this.isServerRender()||GO.add(t,"mouseleave",this.onMouseOut,this))),this.mouseTrail&&GO.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))}unwireEvents(e){let t=this.getTriggerList(e);for(let i of t){if("Custom"===i)return;"Focus"===i&&this.unwireFocusEvents(),"Click"===i&&GO.remove(this.element,zO.touchStartEvent,this.targetClick),"Hover"===i&&(zO.isDevice?(this.touchModule&&this.touchModule.destroy(),GO.remove(this.element,zO.touchEndEvent,this.touchEndHandler)):(GO.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&GO.remove(this.element,"mouseleave",this.onMouseOut)))}GO.remove(document,"touchend",this.touchEnd),GO.remove(document,"scroll wheel",this.scrollHandler),GO.remove(document,"keydown",this.keyDown)}unwireFocusEvents(){if(XA(this.target))GO.remove(this.element,"focus",this.targetHover);else{let e=[].slice.call(this.element.querySelectorAll(this.target));for(let t of e)GO.remove(t,"focus",this.targetHover)}}unwireMouseEvents(e){if(!this.isSticky){let t=this.getTriggerList(this.opensOn);for(let i of t)"Focus"===i&&GO.remove(e,"blur",this.onMouseOut),"Hover"!==i||zO.isDevice||this.isServerRender()||GO.remove(e,"mouseleave",this.onMouseOut)}this.mouseTrail&&GO.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)}findTarget(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")}getModuleName(){return"tooltip"}getPersistData(){return this.addOnPersist([])}onPropertyChanged(e,t){let i=this.findTarget();for(let n of Object.keys(e))switch(n){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=tO(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=tO(e.height),this.reposition(i));break;case"content":this.tooltipEle?(this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent()):this.isServerRender()&&this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{content:e.content});break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){let e=this.tooltipEle.querySelector(".e-arrow-tip-inner");e.style.top=e.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){let i=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+i).toString()+"px"}break;case"offsetY":if(this.tooltipEle){let i=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+i).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&HD([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&jD([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?jD([this.tooltipEle],"e-rtl"):HD([this.tooltipEle],"e-rtl"))}}open(e,t){XA(t)&&(t=this.animation.open),XA(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)}close(e){e||(e=this.animation.close),this.hideTooltip(e)}refresh(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)}destroy(){if(this.isServerRender()||(super.destroy(),this.tooltipEle&&$D(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){let e=document.querySelector("#"+this.ctrlId+"_content_placeholder");e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),HD([this.element],"e-tooltip"),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}};return rM([mI("auto")],e.prototype,"width",void 0),rM([mI("auto")],e.prototype,"height",void 0),rM([mI()],e.prototype,"content",void 0),rM([mI()],e.prototype,"target",void 0),rM([mI("TopCenter")],e.prototype,"position",void 0),rM([mI(0)],e.prototype,"offsetX",void 0),rM([mI(0)],e.prototype,"offsetY",void 0),rM([mI(!0)],e.prototype,"showTipPointer",void 0),rM([mI("Auto")],e.prototype,"tipPointerPosition",void 0),rM([mI("Auto")],e.prototype,"opensOn",void 0),rM([mI(!1)],e.prototype,"mouseTrail",void 0),rM([mI(!1)],e.prototype,"isSticky",void 0),rM([gI({},oM)],e.prototype,"animation",void 0),rM([mI(0)],e.prototype,"openDelay",void 0),rM([mI(0)],e.prototype,"closeDelay",void 0),rM([mI()],e.prototype,"cssClass",void 0),rM([mI(!1)],e.prototype,"enableHtmlSanitizer",void 0),rM([yI()],e.prototype,"beforeRender",void 0),rM([yI()],e.prototype,"beforeOpen",void 0),rM([yI()],e.prototype,"afterOpen",void 0),rM([yI()],e.prototype,"beforeClose",void 0),rM([yI()],e.prototype,"afterClose",void 0),rM([yI()],e.prototype,"beforeCollision",void 0),rM([yI()],e.prototype,"created",void 0),rM([yI()],e.prototype,"destroyed",void 0),e=rM([bI],e),e})(),lM={};function cM(e,t){if(!e.target)return;let i,n=XA(t)?FD:t,s=function(e,t){let i=t("div",{});i.classList.add("e-spinner-pane");let n=t("div",{});return n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,n);if(XA(e.cssClass)||s.wrap.classList.add(e.cssClass),XA(e.template)&&XA(null)){let t=XA(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(s.wrap):e.type;i=function(e,t){let i;switch(t){case"Material":case"Fabric":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(XA(e.width)?void 0:e.width,t),function(e,t,i,n){let s=t.querySelector(".e-spinner-inner"),r=s.querySelector("svg");switch(XA(r)||s.removeChild(r),e){case"Material":!function(e,t,i){let n=dM();lM[n]={timeOut:0,type:"Material",radius:t},pM(e,n,0,"e-spin-material"),fM(t,e,"Material","e-spin-material")}(s,i);break;case"Fabric":!function(e,t,i){let n=dM();lM[n]={timeOut:0,type:"Fabric",radius:t},uM(e,n,"e-spin-fabric"),yM(t,e,"e-spin-fabric")}(s,i);break;case"Bootstrap":!function(e,t,i){let n=dM();lM[n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(let s=0;s<=7;s++){let e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("class","e-path-circle_"+s),e.setAttribute("r","2"),e.setAttribute("transform","translate(32,32)"),n.appendChild(e)}}(e,n),function(e,t){let i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";let n=90;for(let s=0;s<=7;s++){let e=bM(0,0,24,n),t=i.querySelector(".e-path-circle_"+s);t.setAttribute("cx",e.x+""),t.setAttribute("cy",e.y+""),n=n>=360?0:n,n+=45}}(e,t)}(s,i);break;case"HighContrast":!function(e,t,i){let n=dM();lM[n]={timeOut:0,type:"HighContrast",radius:t},uM(e,n,"e-spin-high-contrast"),yM(t,e,"e-spin-high-contrast")}(s,i);break;case"Bootstrap4":!function(e,t,i){let n=dM();lM[n]={timeOut:0,type:"Bootstrap4",radius:t},pM(e,n,0,"e-spin-bootstrap4"),fM(t,e,"Bootstrap4","e-spin-bootstrap4")}(s,i)}}(t,s.wrap,i),XA(e.label)||function(e,t,i){let n=i("div",{});n.classList.add("e-spin-label"),n.textContent=t,e.appendChild(n)}(s.inner_wrap,e.label,n)}else{let t=XA(e.template)?null:e.template;s.wrap.classList.add("e-spin-template"),function(e,t,i){XA(null)||e.classList.add(null),e.querySelector(".e-spinner-inner").innerHTML=t}(s.wrap,t)}s.wrap.classList.add("e-spin-hide"),s=null}function hM(e,t){let i=[],n=e,s=t,r=!1,o=1;return function e(t){i.push(t),(t!==s||1===o)&&(t<=n&&t>1&&!r?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),r=!0):t<8&&r?8===(t=parseFloat((t+.2).toFixed(2)))&&(r=!1):t<=8&&!r&&(t=parseFloat((t-.2).toFixed(2))),++o,e(t))}(n),i}function dM(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function uM(e,t,i,n){let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",i);let r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-circle");let o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),e.insertBefore(s,e.firstChild),s.appendChild(r),s.appendChild(o)}function pM(e,t,i,n){let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("class",n),s.setAttribute("id",t);let r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-circle"),e.insertBefore(s,e.firstChild),s.appendChild(r)}function fM(e,t,i,n){let s=2*e,r=t.querySelector("svg."+n),o=r.querySelector("path.e-path-circle"),a=mM(s),l=s/2+"px";r.setAttribute("viewBox","0 0 "+s+" "+s),r.style.width=r.style.height=s+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function(e,t){let i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"===i&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",gM(s,a,1,75)+""))}function mM(e){return.1*e}function gM(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function vM(e,t,i,n){let s=(e/=n)*e,r=s*e;return t+i*(6*r*s+-15*s*s+10*r)}function yM(e,t,i){let n=e,s=e,r=2*e,o=t.querySelector("."+i),a=o.querySelector(".e-path-circle"),l=o.querySelector(".e-path-arc"),c=r/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,s,e)),l.setAttribute("d",function(e,t,i,n,s){let r=bM(e,t,i,45),o=bM(e,t,i,315);return["M",r.x,r.y,"A",i,i,0,0,0,o.x,o.y].join(" ")}(n,s,e)),o.setAttribute("viewBox","0 0 "+r+" "+r),o.style.transformOrigin=c+" "+c+" "+c,o.style.width=o.style.height=r+"px"}function bM(e,t,i,n){let s=(n-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function wM(e){SM(e,!1),e=null}function SM(e,t){let i;if(e&&(i=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&i){let n,s=i.querySelector(".e-spinner-inner");if(n=t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show"),n){let e=i.querySelector("svg");if(XA(e))return;let n=e.getAttribute("id");switch(lM[n].isAnimate=!t,lM[n].type){case"Material":t?clearTimeout(lM[n].timeOut):function(e,t,i){let n={};lM[t].timeOut=0,n[t]=function(e,t,i,n){return{radius:t,count:0,previousId:0}}(0,i),function e(t){!function(t,i,n,s,r,o,a){let l=++a.globalInfo[a.uniqueID].previousId,c=(new Date).getTime(),h=parseFloat(2*a.globalInfo[a.uniqueID].radius+""),d=mM(h),u=-90*(a.globalInfo[a.uniqueID].count||0);!function t(i){let s=Math.max(0,Math.min((new Date).getTime()-c,1333));!function(e,t){if(!XA(t.querySelector("svg.e-spin-material"))&&!XA(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){let i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",gM(h,d,e,75)+""),i.setAttribute("transform","rotate("+u+" "+h/2+" "+h/2+")")}}(n(s,1,148,1333),i.container),l===i.globalInfo[i.uniqueID].previousId&&s<1333?lM[i.uniqueID].timeOut=setTimeout(t.bind(null,i),1):e(i)}(a)}(0,0,vM,0,0,0,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(s,n,lM[n].radius);break;case"Bootstrap":t?clearTimeout(lM[n].timeOut):function(e){let t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let n=1;n<=8;n++)i(e.getElementsByClassName("e-path-circle_"+(8===n?0:n))[0],n,0,hM(n,n),t);function i(e,t,i,n,s){let r=0;!function t(i){lM[s].isAnimate&&(++r,e.setAttribute("r",i+""),r>=n.length&&(r=0),lM[s].timeOut=setTimeout(t.bind(null,n[r]),18))}(t)}}(s)}}t?eI(i,["e-spin-hide"],["e-spin-show"]):eI(i,["e-spin-show"],["e-spin-hide"]),e=null}}function CM(e){SM(e,!0),e=null}class _M{constructor(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}setKey(e){return this.key=e,this}using(e){return this.dataManager=e,this}execute(e,t,i,n){return(e=e||this.dataManager)?e.executeQuery(this,t,i,n):TM.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')}executeLocal(e){return(e=e||this.dataManager)?e.executeLocal(this):TM.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')}clone(){let e=new _M;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e}from(e){return this.fromTable=e,this}addParams(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this}distinct(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this}expand(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this}where(e,t,i,n,s){t=t?t.toLowerCase():null;let r=null;return"string"==typeof e?r=new EM(e,t,i,n,s):e instanceof EM&&(r=e),this.queries.push({fn:"onWhere",e:r}),this}search(e,t,i,n,s){return"string"==typeof t&&(t=[t]),i&&"none"!==i||(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:n,ignoreAccent:s,comparer:TM.fnOperators[i]}}),this}sortBy(e,t,i){let n,s,r="ascending";if("string"==typeof e&&TM.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),t="descending"),t&&"string"!=typeof t||(r=t?t.toLowerCase():"ascending",t=TM.fnSort(t)),i){n=_M.filterQueries(this.queries,"onSortBy");for(let t=0;t<n.length;t++)if(s=n[t].e.fieldName,"string"==typeof s){if(s===e)return this}else if(s instanceof Array)for(let i=0;i<s.length;i++)if(s[i]===e||e.toLowerCase()===s[i]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:r}}),this}sortByDesc(e){return this.sortBy(e,"descending")}group(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this}page(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this}range(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this}take(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this}skip(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this}select(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this}hierarchy(e,t){return this.subQuerySelector=t,this.subQuery=e,this}foreignKey(e){return this.fKey=e,this}requiresCount(){return this.isCountRequired=!0,this}aggregate(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this}static filterQueries(e,t){return e.filter(e=>e.fn===t)}static filterQueryLists(e,t){let i=e.filter(e=>-1!==t.indexOf(e.fn)),n={};for(let s=0;s<i.length;s++)n[i[s].fn]||(n[i[s].fn]=i[s].e);return n}}class EM{constructor(e,t,i,n=!1,s){return this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=t.toLowerCase(),this.value=i,this.ignoreCase=n,this.ignoreAccent=s,this.isComplex=!1,this.comparer=TM.fnOperators.processOperator(this.operator)):(e instanceof EM&&i instanceof EM||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}static and(...e){return EM.combinePredicates([].slice.call(e,0),"and")}and(e,t,i,n,s){return EM.combine(this,e,t,i,"and",n,s)}static or(...e){return EM.combinePredicates([].slice.call(e,0),"or")}or(e,t,i,n,s){return EM.combine(this,e,t,i,"or",n,s)}static fromJson(e){if(e instanceof Array){let t=[];for(let i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}return this.fromJSONData(e)}validate(e){let t,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,TM.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(let s=0;s<n.length;s++)if(i=n[s].validate(e),t){if(!i)return!1}else if(i)return!0;return t}toJson(){let e,t;if(this.isComplex){e=[],t=this.predicates;for(let i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}}static combinePredicates(e,t){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new EM(e[0],t,e.slice(1))}static combine(e,t,i,n,s,r,o){return t instanceof EM?EM[s](e,t):"string"==typeof t?EM[s](e,new EM(t,i,n,r,o)):TM.throwError("Predicate - "+s+" : invalid arguments")}static fromJSONData(e){let t,i=e.predicates||[],n=i.length,s=[];for(let r=0;r<n;r++)s.push(this.fromJSONData(i[r]));return t=e.isComplex?new EM(s[0],e.condition,s.slice(1)):new EM(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent),t}}let TM=(()=>{class t{static getValue(e,t){return"function"==typeof e?e.call(t||{}):e}static endsWith(e,t){return e.slice&&e.slice(-t.length)===t}static startsWith(e,t){return e.slice(0,t.length)===t}static fnSort(e){return"ascending"===(e=e?t.toLowerCase(e):"ascending")?this.fnAscending:this.fnDescending}static fnAscending(e,t){return XA(e)&&XA(t)||null==t?-1:"string"==typeof e?e.localeCompare(t):null==e?1:e-t}static fnDescending(e,t){return XA(e)&&XA(t)?-1:null==t?1:"string"==typeof e?-1*e.localeCompare(t):null==e?-1:t-e}static extractFields(e,t){let i={};for(let n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i}static select(e,t){let i=[];for(let n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i}static group(e,i,n,s,r,o){s=s||1;let a=e;if("{271bbba0-1ee7}"===a.GroupGuid){for(let e=0;e<a.length;e++)if(XA(r))a[e].items=this.group(a[e].items,i,n,a.level+1,null,o),a[e].count=a[e].items.length;else{let t=-1,s=r.filter(t=>t.key===a[e].key);t=r.indexOf(s[0]),a[e].items=this.group(a[e].items,i,n,a.level+1,r[t].items,o),a[e].count=r[t].count}return a.childLevels+=1,a}let l={},c=[];c.GroupGuid="{271bbba0-1ee7}",c.level=s,c.childLevels=0,c.records=a;for(let t=0;t<a.length;t++){let e=this.getVal(a,t,i);if(XA(o)||(e=o(e,i)),!l[e]&&(l[e]={key:e,count:0,items:[],aggregates:{},field:i},c.push(l[e]),!XA(r))){let t=r.filter(t=>t.key===l[e].key);l[e].count=t[0].count}l[e].count=XA(r)?l[e].count+=1:l[e].count,l[e].items.push(a[t])}if(n&&n.length)for(let h=0;h<c.length;h++){let e,i={},s=n;for(let o=0;o<n.length;o++)if(e=t.aggregates[n[o].type],XA(r))e&&(i[s[o].field+" - "+s[o].type]=e(c[h].items,s[o].field));else{let t=r.filter(e=>e.key===c[h].key);e&&(i[s[o].field+" - "+s[o].type]=e(t[0].items,s[o].field))}c[h].aggregates=i}return a.length&&c||a}static buildHierarchy(e,t,i,n,s){let r,o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),r=0;r<n.length;r++){let t=this.getObject(e,n[r]);o=a[t]||(a[t]=[]),o.push(n[r])}for(r=0;r<i.length;r++){let n=this.getObject(s||e,i[r]);i[r][t]=a[n]}}static getFieldList(e,t,i){if(void 0===i&&(i=""),null==t)return this.getFieldList(e,[],i);let n=e,s=Object.keys(e);for(let r of s)"object"!=typeof n[r]||n[r]instanceof Array?t.push(i+r):this.getFieldList(n[r],t,i+r+".");return t}static getObject(e,t){if(!e)return t;if(!t)return;if(-1===e.indexOf("."))return t[e];let i=t,n=e.split(".");for(let s=0;s<n.length&&null!=i;s++)i=i[n[s]];return i}static setValue(e,t,i){let n,s,r=e.toString().split("."),o=i||{},a=o,l=r.length;for(n=0;n<l;n++)s=r[n],n+1===l?a[s]=void 0===t?void 0:t:XA(a[s])&&(a[s]={}),a=a[s];return o}static sort(e,t,i){if(e.length<=1)return e;let n=parseInt((e.length/2).toString(),10),s=e.slice(0,n),r=e.slice(n);return s=this.sort(s,t,i),r=this.sort(r,t,i),this.merge(s,r,t,i)}static ignoreDiacritics(e){return"string"!=typeof e?e:e.split("").map(e=>e in t.diacritics?t.diacritics[e]:e).join("")}static merge(e,t,i,n){let s,r=[];for(;e.length>0||t.length>0;)s=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,r.push(s.shift());return r}static getVal(e,t,i){return i?this.getObject(i,e[t]):e[t]}static toLowerCase(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""}static callAdaptorFunction(e,t,i,n){if(t in e){let s=e[t](i,n);XA(s)||(i=s)}return i}static getAddParams(e,i,n){let s={};return t.callAdaptorFunction(e,"addParams",{dm:i,query:n,params:n.params,reqParams:s}),s}static isPlainObject(e){return!!e&&e.constructor===Object}static isCors(){let t=null;try{t=new window.XMLHttpRequest}catch(e){}return!!t&&"withCredentials"in t}static getGuid(e){let t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(e,i)=>{if("crypto"in window&&"getRandomValues"in crypto){let e=new Uint8Array(1);window.crypto.getRandomValues(e),t=e[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})}static isNull(e){return null==e}static getItemFromComparer(e,i,n){let s,r,o,a=0,l="string"==typeof t.getVal(e,0,i);if(e.length)for(;XA(s)&&a<e.length;)s=t.getVal(e,a,i),o=e[a++];for(;a<e.length;a++)r=t.getVal(e,a,i),XA(r)||(l&&(s=+s,r=+r),n(s,r)>0&&(s=r,o=e[a]));return o}static distinct(e,i,n){n=!XA(n)&&n;let s,r=[],o={};return e.forEach((a,l)=>{s="object"==typeof e[l]?t.getVal(e,l,i):e[l],s in o||(r.push(n?e[l]:s),o[s]=1)}),r}}return t.serverTimezoneOffset=null,t.timeZoneHandling=!0,t.throwError=t=>{try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},t.aggregates={sum:(e,i)=>{let n,s=0,r="number"!=typeof t.getVal(e,0,i);for(let o=0;o<e.length;o++)n=t.getVal(e,o,i),isNaN(n)||null===n||(r&&(n=+n),s+=n);return s},average:(e,i)=>t.aggregates.sum(e,i)/e.length,min:(e,i)=>{let n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnAscending))},max:(e,i)=>{let n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnDescending))},truecount:(e,t)=>new RM(e).executeLocal((new _M).where(t,"equal",!0,!0)).length,falsecount:(e,t)=>new RM(e).executeLocal((new _M).where(t,"equal",!1,!0)).length,count:(e,t)=>e.length},t.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},t.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},t.fnOperators={equal:(e,i,n,s)=>(s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?t.toLowerCase(e)===t.toLowerCase(i):e===i),notequal:(e,i,n,s)=>(s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),!t.fnOperators.equal(e,i,n)),lessthan:(e,i,n)=>n?t.toLowerCase(e)<t.toLowerCase(i):e<i,greaterthan:(e,i,n)=>n?t.toLowerCase(e)>t.toLowerCase(i):e>i,lessthanorequal:(e,i,n)=>n?t.toLowerCase(e)<=t.toLowerCase(i):e<=i,greaterthanorequal:(e,i,n)=>n?t.toLowerCase(e)>=t.toLowerCase(i):e>=i,contains:(e,i,n,s)=>(s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?!XA(e)&&!XA(i)&&-1!==t.toLowerCase(e).indexOf(t.toLowerCase(i)):!XA(e)&&!XA(i)&&-1!==e.toString().indexOf(i)),notnull:e=>null!==e,isnull:e=>null===e,startswith:(e,i,n,s)=>(s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.startsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.startsWith(e,i)),endswith:(e,i,n,s)=>(s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.endsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.endsWith(e,i)),processSymbols:e=>{let i=t.operatorSymbols[e];return i?t.fnOperators[i]:t.throwError("Query - Process Operator : Invalid operator")},processOperator:e=>t.fnOperators[e]||t.fnOperators.processSymbols(e)},t.parse={parseJson:e=>("string"==typeof e?e=JSON.parse(e,t.parse.jsonReviver):e instanceof Array?t.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&t.parse.iterateAndReviveJson(e),e),iterateAndReviveArray:e=>{for(let i=0;i<e.length;i++)"object"==typeof e[i]&&null!==e[i]?t.parse.iterateAndReviveJson(e[i]):e[i]="string"!=typeof e[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[i])?t.parse.parseJson(e[i]):t.parse.jsonReviver("",e[i])},iterateAndReviveJson:e=>{let i,n=Object.keys(e);for(let s of n)t.startsWith(s,"__")||(i=e[s],"object"==typeof i?i instanceof Array?t.parse.iterateAndReviveArray(i):i&&t.parse.iterateAndReviveJson(i):e[s]=t.parse.jsonReviver(e[s],i))},jsonReviver:(e,i)=>{if("string"==typeof i){let e=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),n=t.timeZoneHandling?t.serverTimezoneOffset:null;if(e)return t.dateParse.toTimeZone(new Date(parseInt(e[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){let e=i.indexOf("Z")>-1||i.indexOf("z")>-1,n=i.split(/[^0-9.]/);if(e)i=t.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),t.serverTimezoneOffset,!1);else{let e=new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),s=parseInt(n[6],10),r=parseInt(n[7],10);if(isNaN(s)&&isNaN(r))return e;i.indexOf("+")>-1?e.setHours(e.getHours()-s,e.getMinutes()-r):e.setHours(e.getHours()+s,e.getMinutes()+r),i=t.dateParse.toTimeZone(e,t.serverTimezoneOffset,!1)}null==t.serverTimezoneOffset&&(i=t.dateParse.addSelfOffset(i))}}return i},isJson:e=>"string"==typeof e[0]?e:t.parse.parseJson(e),isGuid:e=>null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e),replacer:(e,i)=>t.isPlainObject(e)?t.parse.jsonReplacer(e,i):e instanceof Array?t.parse.arrayReplacer(e):e instanceof Date?t.parse.jsonReplacer({val:e},i).val:e,jsonReplacer:(e,i)=>{let n,s=Object.keys(e);for(let r of s){if(n=e[r],!(n instanceof Date))continue;let i=n;null==t.serverTimezoneOffset?e[r]=t.dateParse.toTimeZone(i,null).toJSON():(i=new Date(+i+36e5*t.serverTimezoneOffset),e[r]=t.dateParse.toTimeZone(t.dateParse.addSelfOffset(i),null).toJSON())}return e},arrayReplacer:e=>{for(let i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=t.parse.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=t.parse.jsonReplacer({date:e[i]}).date);return e},jsonDateReplacer:(e,i)=>{if("value"===e&&i){if("string"==typeof i){let e=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(e)i=t.dateParse.toTimeZone(new Date(parseInt(e[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){let e=i.split(/[^0-9]/);i=t.dateParse.toTimeZone(new Date(parseInt(e[0],10),parseInt(e[1],10)-1,parseInt(e[2],10),parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10)),null,!0)}}if(i instanceof Date)return i=t.dateParse.addSelfOffset(i),null===t.serverTimezoneOffset?t.dateParse.toTimeZone(t.dateParse.addSelfOffset(i),null).toJSON():(i=t.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-t.serverTimezoneOffset,!1)).toJSON()}return i}},t.dateParse={addSelfOffset:e=>new Date(+e-6e4*e.getTimezoneOffset()),toUTC:e=>new Date(+e+6e4*e.getTimezoneOffset()),toTimeZone:(e,i,n)=>{if(null===i)return e;let s=n?t.dateParse.toUTC(e):e;return new Date(+s-36e5*i)},toLocalTime:e=>{let t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",s=e=>{let t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+s(t.getMonth()+1)+"-"+s(t.getDate())+"T"+s(t.getHours())+":"+s(t.getMinutes())+":"+s(t.getSeconds())+n+s(i/60)+":"+s(i%60)}},t})();class xM{constructor(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=xM,this.dataSource=e,this.pvt={}}processResponse(e,t,i,n){return e}}class kM extends xM{processQuery(e,t){let i,n,s=e.dataSource.json.slice(0),r=s.length,o=!0,a={};for(let l=0;l<t.queries.length;l++)n=t.queries[l],i=this[n.fn].call(this,s,n.e,t),"onAggregates"===n.fn?a[n.e.field+" - "+n.e.type]=i:s=void 0!==i?i:s,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(o=!1),o&&(r=s.length);return t.isCountRequired&&(s={result:s,count:r,aggregates:a}),s}batchRequest(e,t,i){let n,s=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,i.key,t.changedRecords[n]);for(n=0;n<s;n++)this.remove(e,i.key,t.deletedRecords[n]);return t}onWhere(e,t){return e&&e.length?e.filter(e=>{if(t)return t.validate(e)}):e}onAggregates(e,t){let i=TM.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null}onSearch(e,t){return e&&e.length?(0===t.fieldNames.length&&TM.getFieldList(e[0],t.fieldNames),e.filter(e=>{for(let i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,TM.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1})):e}onSortBy(e,t,i){if(!e||!e.length)return e;let n,s=TM.getValue(t.fieldName,i);if(!s)return e.sort(t.comparer);if(s instanceof Array){s=s.slice(0);for(let i=s.length-1;i>=0;i--)s[i]&&(n=t.comparer,TM.endsWith(s[i]," desc")&&(n=TM.fnSort("descending"),s[i]=s[i].replace(" desc","")),e=TM.sort(e,s[i],n));return e}return TM.sort(e,s,t.comparer)}onGroup(e,t,i){if(!e||!e.length)return e;let n=_M.filterQueries(i.queries,"onAggregates"),s=[];if(n.length){let e;for(let t=0;t<n.length;t++)e=n[t].e,s.push({type:e.type,field:TM.getValue(e.field,i)})}return TM.group(e,TM.getValue(t.fieldName,i),s,null,null,t.comparer)}onPage(e,t,i){let n=TM.getValue(t.pageSize,i),s=(TM.getValue(t.pageIndex,i)-1)*n;return e&&e.length?e.slice(s,s+n):e}onRange(e,t){return e&&e.length?e.slice(TM.getValue(t.start),TM.getValue(t.end)):e}onTake(e,t){return e&&e.length?e.slice(0,TM.getValue(t.nos)):e}onSkip(e,t){return e&&e.length?e.slice(TM.getValue(t.nos)):e}onSelect(e,t){return e&&e.length?TM.select(e,TM.getValue(t.fieldNames)):e}insert(e,t,i,n,s){return XA(s)?e.dataSource.json.push(t):e.dataSource.json.splice(s,0,t)}remove(e,t,i,n){let s,r=e.dataSource.json;for("object"!=typeof i||i instanceof Date||(i=TM.getObject(t,i)),s=0;s<r.length&&TM.getObject(t,r[s])!==i;s++);return s!==r.length?r.splice(s,1):null}update(e,t,i,n){let s,r,o=e.dataSource.json;for(XA(t)||(r=WA(t,i)),s=0;s<o.length&&(XA(t)||WA(t,o[s])!==r);s++);return s<o.length?$A(o[s],i):null}}class AM extends xM{processQuery(e,t,i){let n,s,r=this.getQueryRequest(t),o=_M.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=t.params,l=e.dataSource.url,c=null,h=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?(n=o.onPage,s=TM.getValue(n.pageIndex,t),c=TM.getValue(n.pageSize,t),s=(s-1)*c):"onRange"in o&&(n=o.onRange,s=n.start,c=n.end-n.start);for(let m=0;m<r.sorts.length;m++)n=TM.getValue(r.sorts[m].e.fieldName,t),d.sorts.push(TM.callAdaptorFunction(this,"onEachSort",{name:n,direction:r.sorts[m].e.direction},t));i&&(n=this.getFiltersFrom(i,t),n&&d.filters.push(TM.callAdaptorFunction(this,"onEachWhere",n.toJson(),t)));for(let m=0;m<r.filters.length;m++){d.filters.push(TM.callAdaptorFunction(this,"onEachWhere",r.filters[m].e.toJson(),t));let e="object"==typeof d.filters[m]?Object.keys(d.filters[m]):[];for(let t of e)TM.isNull(d[t])&&delete d[t]}for(let m=0;m<r.searches.length;m++)n=r.searches[m].e,d.searches.push(TM.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(let m=0;m<r.groups.length;m++)d.groups.push(TM.getValue(r.groups[m].e.fieldName,t));for(let m=0;m<r.aggregates.length;m++)n=r.aggregates[m].e,d.aggregates.push({type:n.type,field:TM.getValue(n.field,t)});let u={};this.getRequestQuery(h,t,o,d,u),TM.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:a,reqParams:u});let p=Object.keys(u);for(let m of p)(TM.isNull(u[m])||""===u[m]||0===u[m].length)&&delete u[m];h.skip in u&&h.take in u||null===c||(u[h.skip]=TM.callAdaptorFunction(this,"onSkip",s,t),u[h.take]=TM.callAdaptorFunction(this,"onTake",c,t));let f=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(u,TM.parse.jsonDateReplacer),url:l,pvtData:f,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(u,t,e),n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n,{type:"GET",url:n.length?l.replace(/\/*$/,n):l,pvtData:f})}getRequestQuery(e,t,i,n,s){let r=s;r[e.from]=t.fromTable,e.apply&&t.distincts.length&&(r[e.apply]="onDistinct"in this?TM.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(r[e.expand]="onExpand"in this&&"onSelect"in i?TM.callAdaptorFunction(this,"onExpand",{selects:TM.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),r[e.select]="onSelect"in i&&!t.distincts.length?TM.callAdaptorFunction(this,"onSelect",TM.getValue(i.onSelect.fieldNames,t),t):"",r[e.count]=t.isCountRequired?TM.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",r[e.search]=n.searches.length?TM.callAdaptorFunction(this,"onSearch",n.searches,t):"",r[e.skip]="onSkip"in i?TM.callAdaptorFunction(this,"onSkip",TM.getValue(i.onSkip.nos,t),t):"",r[e.take]="onTake"in i?TM.callAdaptorFunction(this,"onTake",TM.getValue(i.onTake.nos,t),t):"",r[e.where]=n.filters.length||n.searches.length?TM.callAdaptorFunction(this,"onWhere",n.filters,t):"",r[e.sortBy]=n.sorts.length?TM.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",r[e.group]=n.groups.length?TM.callAdaptorFunction(this,"onGroup",n.groups,t):"",r[e.aggregates]=n.aggregates.length?TM.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",r.param=[]}convertToQueryString(e,t,i){return""}processResponse(e,t,i,n,s,r){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){let i=TM.timeZoneHandling;t&&!t.timeZoneHandling&&(TM.timeZoneHandling=!1),e=TM.parse.parseJson(e),TM.timeZoneHandling=i}let o=s,a=o.pvtData||{},l=e?e.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];let c=JSON.parse(o.data);if(c&&"batch"===c.action&&e&&e.addedRecords)return r.addedRecords=e.addedRecords,r;e&&e.d&&(e=e.d);let h={};return e&&"count"in e&&(h.count=e.count),h.result=e&&e.result?e.result:e,this.getAggregateResult(a,e,h,l,i),TM.isNull(h.count)?h.result:{result:h.result,count:h.count,aggregates:h.aggregates}}onGroup(e){return this.pvt.groups=e,e}onAggregates(e){this.pvt.aggregates=e}batchRequest(e,t,i,n,s){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(KA({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},TM.getAddParams(this,e,n)))}}beforeSend(e,t){}insert(e,t,i,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(KA({},{value:t,table:i,action:"insert"},TM.getAddParams(this,e,n)))}}remove(e,t,i,n,s){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(KA({},{key:i,keyColumn:t,table:n,action:"remove"},TM.getAddParams(this,e,s)))}}update(e,t,i,n,s){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(KA({},{value:i,action:"update",keyColumn:t,key:TM.getObject(t,i),table:n},TM.getAddParams(this,e,s)))}}getFiltersFrom(e,t){let i,n=t.fKey,s=n,r=t.key,o=[];"object"!=typeof e[0]&&(s=null);for(let a=0;a<e.length;a++)i="object"==typeof e[0]?TM.getObject(r||s,e[a]):e[a],o.push(new EM(n,"equal",i));return EM.or(o)}getAggregateResult(e,t,i,n,s){let r=t;if(t&&t.result&&(r=t.result),e&&e.aggregates&&e.aggregates.length){let n,s=e.aggregates,o=r,a={};t.aggregate&&(o=t.aggregate);for(let e=0;e<s.length;e++)n=TM.aggregates[s[e].type],n&&(a[s[e].field+" - "+s[e].type]=n(o,s[e].field));i.aggregates=a}if(e&&e.groups&&e.groups.length){let t=e.groups;for(let i=0;i<t.length;i++){let o=null;XA(n)||(n=TM.group(n,t[i]));let a=_M.filterQueries(s.queries,"onGroup")[i].e;r=TM.group(r,t[i],e.aggregates,o,n,a.comparer)}i.result=r}return i}getQueryRequest(e){let t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=_M.filterQueries(e.queries,"onSortBy"),t.groups=_M.filterQueries(e.queries,"onGroup"),t.filters=_M.filterQueries(e.queries,"onWhere"),t.searches=_M.filterQueries(e.queries,"onSearch"),t.aggregates=_M.filterQueries(e.queries,"onAggregates"),t}addParams(e){let t=e.reqParams;e.params.length&&(t.params={});for(let i of e.params){if(t[i.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[i.key]=i.value,i.fn&&(t[i.key]=i.fn.call(e.query,i.key,e.query,e.dm)),t.params[i.key]=t[i.key]}}}class OM extends AM{constructor(e){super(),this.options=KA({},this.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),KA(this.options,e||{})}getModuleName(){return"ODataAdaptor"}onPredicate(e,t,i){let n,s,r="",o=e.value,a=typeof o,l=e.field?OM.getField(e.field):null;if(o instanceof Date&&(o="datetime'"+TM.parse.replacer(o)+"'"),"string"===a&&(o=encodeURIComponent(o),o="'"+o+"'",i&&(l="cast("+l+", 'Edm.String')"),TM.parse.isGuid(o)&&(s="guid"),e.ignoreCase&&(s||(l="tolower("+l+")"),o=o.toLowerCase())),n=TM.odBiOperator[e.operator],n)return r+=l,r+=n,s&&(r+=s),r+o;if(n=XA(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?TM.odUniOperator[e.operator]:TM.odv4UniOperator[e.operator],"substringof"===n){let e=o;o=l,l=e}return r+=n+"(",r+=l+",",s&&(r+=s),r+=o+")",r}addParams(e){super.addParams(e),delete e.reqParams.params}onComplexPredicate(e,t,i){let n=[];for(let s=0;s<e.predicates.length;s++)n.push("("+this.onEachWhere(e.predicates[s],t,i)+")");return n.join(" "+e.condition+" ")}onEachWhere(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)}onWhere(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")}onEachSearch(e){e.fields&&0===e.fields.length&&TM.throwError("Query() - Search : oData search requires list of field names to search");let t=this.pvt.search||[];for(let i=0;i<e.fields.length;i++)t.push(new EM(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t}onSearch(e){return this.pvt.search=EM.or(this.pvt.search),""}onEachSort(e){let t=[];if(e.name instanceof Array)for(let i=0;i<e.name.length;i++)t.push(OM.getField(e.name[i])+("descending"===e.direction?" desc":""));else t.push(OM.getField(e.name)+("descending"===e.direction?" desc":""));return t.join(",")}onSortBy(e){return e.reverse().join(",")}onGroup(e){return this.pvt.groups=e,[]}onSelect(e){for(let t=0;t<e.length;t++)e[t]=OM.getField(e[t]);return e.join(",")}onAggregates(e){return this.pvt.aggregates=e,""}onCount(e){return!0===e?"allpages":""}beforeSend(e,t,i){TM.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")}processResponse(e,t,i,n,s,r){if(s&&"GET"===s.type&&!this.rootUrl&&e["odata.metadata"]){let t=e["odata.metadata"].split("/$metadata#");this.rootUrl=t[0],this.resourceTableName=t[1]}if(!XA(e.d)){let t=i&&i.isCountRequired?e.d.results:e.d,n="__metadata";if(!XA(t))for(let e=0;e<t.length;e++)XA(t[e][n])||delete t[e][n]}let o=s&&s.pvtData,a=this.processBatchResponse(e,i,n,s,r);if(a)return a;let l=n&&s.getResponseHeader("DataServiceVersion"),c=null,h=l&&parseInt(l,10)||2;if(i&&i.isCountRequired){let t="__count";(e[t]||e["odata.count"])&&(c=e[t]||e["odata.count"]),e.d&&(e=e.d),(e[t]||e["odata.count"])&&(c=e[t]||e["odata.count"])}3===h&&e.value&&(e=e.value),e.d&&(e=e.d),h<3&&e.results&&(e=e.results);let d={};return d.count=c,d.result=e,this.getAggregateResult(o,e,d,null,i),TM.isNull(c)?d.result:{result:d.result,count:d.count,aggregates:d.aggregates}}convertToQueryString(e,t,i){let n=[],s=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");let r=Object.keys(e);for(let o of r)n.push(o+"="+e[o]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!s?n:n.length?s+"?"+n:s||""}localTimeReplacer(e,t){for(let i of XA(t)?[]:Object.keys(t))t[i]instanceof Date&&(t[i]=TM.dateParse.toLocalTime(t[i]));return t}insert(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}}remove(e,t,i,n){let s;return s="string"!=typeof i||TM.parse.isGuid(i)?`(${i})`:`('${i}')`,{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s}}update(e,t,i,n,s,r){let o;return"PATCH"!==this.options.updateType||XA(r)||(i=this.compareAndRemove(i,r,t)),o="string"!=typeof i[t]||TM.parse.isGuid(i[t])?`(${i[t]})`:`('${i[t]}')`,{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}}batchRequest(e,t,i,n,s){let r=i.guid=TM.getGuid(this.options.batchPre),o=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;let a={url:i.url,key:i.key,cid:1,cSet:TM.getGuid(this.options.changeSet)},l="--"+r+"\n";return l+="Content-Type: multipart/mixed; boundary="+a.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,a,e),l+=this.generateUpdateRequest(t.changedRecords,a,e,s?s.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,a,e),l+=a.cSet+"--\n",l+="--"+r+"--",{type:"POST",url:o,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+r,data:l}}generateDeleteRequest(e,t,i){if(!e)return"";let n="";return n=this.generateBodyContent(e,t,{method:"DELETE ",url:(e,t,i)=>{let n=TM.getObject(i,e[t]);return"number"==typeof n||TM.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][i].toJSON()+")":`('${n}')`},data:(e,t)=>""},i),n+"\n"}generateInsertRequest(e,t,i){if(!e)return"";let n="";return n=this.generateBodyContent(e,t,{method:"POST ",url:(e,t,i)=>"",data:(e,t)=>JSON.stringify(e[t])+"\n\n"},i),n}generateUpdateRequest(e,t,i,n){if(!e)return"";let s="";return e.forEach(e=>e=this.compareAndRemove(e,n.filter(i=>TM.getObject(t.key,i)===TM.getObject(t.key,e))[0],t.key)),s=this.generateBodyContent(e,t,{method:this.options.updateType+" ",url:(e,t,i)=>"number"==typeof e[t][i]||TM.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":`('${e[t][i]}')`,data:(e,t)=>JSON.stringify(e[t])+"\n\n"},i),s}static getField(e){return e.replace(/\./g,"/")}generateBodyContent(e,t,i,n){let s="";for(let r=0;r<e.length;r++)s+="\n"+t.cSet+"\n",s+=this.options.changeSetContent+"\n\n",s+=i.method,"POST "===i.method?s+=(n.dataSource.insertUrl||n.dataSource.crudUrl||t.url)+i.url(e,r,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?s+=(n.dataSource.updateUrl||n.dataSource.crudUrl||t.url)+i.url(e,r,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(s+=(n.dataSource.removeUrl||n.dataSource.crudUrl||t.url)+i.url(e,r,t.key)+" HTTP/1.1\n"),s+="Accept: "+this.options.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=this.options.batchChangeSetContentType+"\n",XA(e[r]["@odata.etag"])?s+="\n":(s+="If-Match: "+e[r]["@odata.etag"]+"\n\n",delete e[r]["@odata.etag"]),s+=i.data(e,r);return s}processBatchResponse(e,t,i,n,s){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&TM.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){let t,n,r=i.getResponseHeader("Content-Type"),o=e+"";if(r=r.substring(r.indexOf("=batchresponse")+1),o=o.split(r),o.length<2)return{};o=o[1];let a=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(o);a&&o.replace(a[0],""),o=o.split(a?a[1]:"");for(let e=o.length;e>-1;e--)/\bContent-ID:/i.test(o[e])&&/\bHTTP.+201/.test(o[e])&&(t=parseInt(/\bContent-ID: (\d+)/i.exec(o[e])[1],10),s.addedRecords[t]&&(n=TM.parse.parseJson(/^\{.+\}/m.exec(o[e])[0]),KA({},s.addedRecords[t],this.processResponse(n))));return s}return null}compareAndRemove(e,t,i){return XA(t)||Object.keys(e).forEach(n=>{n!==i&&"@odata.etag"!==n&&(TM.isPlainObject(e[n])?(this.compareAndRemove(e[n],t[n]),0===Object.keys(e[n]).filter(e=>"@odata.etag"!==e).length&&delete e[n]):(e[n]===t[n]||e[n]&&t[n]&&e[n].valueOf()===t[n].valueOf())&&delete e[n])}),e}}class DM extends kM{constructor(){super(),zA("beforeSend",AM.prototype.beforeSend,this)}insert(e,t,i,n,s){return this.pvt.position=s,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(KA({},{value:t,table:i,action:"insert"},TM.getAddParams(this,e,n)))}}remove(e,t,i,n,s){return super.remove(e,t,i),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(KA({},{key:i,keyColumn:t,table:n,action:"remove"},TM.getAddParams(this,e,s)))}}update(e,t,i,n,s){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(KA({},{value:i,action:"update",keyColumn:t,key:i[t],table:n},TM.getAddParams(this,e,s)))}}processResponse(e,t,i,n,s,r,o){let a;if("add"===this.updateType&&super.insert(t,e,null,null,this.pvt.position),"update"===this.updateType&&super.update(t,this.updateKey,e),this.updateType=void 0,e.added)for(a=0;a<e.added.length;a++)super.insert(t,e.added[a]);if(e.changed)for(a=0;a<e.changed.length;a++)super.update(t,o.key,e.changed[a]);if(e.deleted)for(a=0;a<e.deleted.length;a++)super.remove(t,o.key,e.deleted[a]);return e}batchRequest(e,t,i,n,s){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(KA({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},TM.getAddParams(this,e,n)))}}addParams(e){(new AM).addParams(e)}}class IM extends AM{constructor(e,t,i){super(),this.isCrudAction=!1,this.isInsertAction=!1,XA(e)||(this.cacheAdaptor=e),this.pageSize=i,this.guidId=TM.getGuid("cacheAdaptor"),window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));let n=this.guidId;XA(t)||setInterval(()=>{let e;e=TM.parse.parseJson(window.localStorage.getItem(n));let i=[];for(let n=0;n<e.results.length;n++){let s=+new Date,r=+new Date(e.results[n].timeStamp);e.results[n].timeStamp=s-r,s-r>t&&i.push(n)}for(let t=0;t<i.length;t++)e.results.splice(i[t],1),e.keys.splice(i[t],1);window.localStorage.removeItem(n),window.localStorage.setItem(n,JSON.stringify(e))},t)}generateKey(e,t){let i=this.getQueryRequest(t),n=_M.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=e;"onPage"in n&&(s+=n.onPage.pageIndex),i.sorts.forEach(e=>{s+=e.e.direction+e.e.fieldName}),i.groups.forEach(e=>{s+=e.e.fieldName}),i.searches.forEach(e=>{s+=e.e.searchKey});for(let r=0;r<i.filters.length;r++){let n=i.filters[r];if(n.e.isComplex){let i=t.clone();i.queries=[];for(let e=0;e<n.e.predicates.length;e++)i.queries.push({fn:"onWhere",e:n.e.predicates[e],filter:t.queries.filter});s+=n.e.condition+this.generateKey(e,i)}else s+=n.e.field+n.e.operator+n.e.value}return s}processQuery(e,t,i){let n,s=this.generateKey(e.dataSource.url,t);n=TM.parse.parseJson(window.localStorage.getItem(this.guidId));let r=n?n.results[n.keys.indexOf(s)]:null;return null==r||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):r}processResponse(e,t,i,n,s,r){if(this.isInsertAction||s&&this.cacheAdaptor.options.batch&&TM.endsWith(s.url,this.cacheAdaptor.options.batch)&&"post"===s.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,n,s,r);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));let o=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,a={};a=TM.parse.parseJson(window.localStorage.getItem(this.guidId));let l=a.keys.indexOf(o);for(-1!==l&&(a.results.splice(l,1),a.keys.splice(l,1)),a.results[a.keys.push(o)-1]={keys:o,result:e.result,timeStamp:new Date,count:e.count};a.results.length>this.pageSize;)a.results.splice(0,1),a.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(a)),e}beforeSend(e,t,i){!XA(this.cacheAdaptor.options.batch)&&TM.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)}update(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,n)}insert(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)}remove(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,n)}batchRequest(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}}class RM{constructor(e,t,i){let n;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?n={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof DM||e.url),requiresFormat:e.requiresFormat}):TM.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||TM.isCors()||(n.requiresFormat=!!XA(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=t,n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new OM,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new _M),this.ready.then(e=>{this.dataSource.offline=!0,this.isDataAvailable=!0,n.json=e.result,this.adaptor=new kM})):this.adaptor=n.offline?new kM:new OM,!n.jsonp&&this.adaptor instanceof OM&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new IM(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}setDefaultQuery(e){return this.defaultQuery=e,this}executeLocal(e){this.defaultQuery||e instanceof _M||TM.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||TM.throwError("DataManager - executeLocal() : Json data is required to execute");let t=this.adaptor.processQuery(this,e=e||this.defaultQuery);if(e.subQuery){let i=e.subQuery.fromTable,n=e.subQuery.lookups,s=e.isCountRequired?t.result:t;n&&n instanceof Array&&TM.buildHierarchy(e.subQuery.fKey,i,s,n,e.subQuery.key);for(let t=0;t<s.length;t++)s[t][i]instanceof Array&&(s[t]=KA({},{},s[t]),s[t][i]=this.adaptor.processResponse(e.subQuery.using(new RM(s[t][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)}executeQuery(e,t,i,n){"function"==typeof e&&(n=i,i=t,t=e,e=null),e||(e=this.defaultQuery),e instanceof _M||TM.throwError("DataManager - executeQuery() : A query is required to execute");let s=new PM,r={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!XA(this.adaptor.makeRequest)){let t=this.adaptor.processQuery(this,e);XA(this.adaptor.makeRequest)?XA(t.url)?(r=RM.getDeferedArgs(e,t,r),s.resolve(r)):this.makeRequest(t,s,r,e):this.adaptor.makeRequest(t,s,r,e)}else RM.nextTick(()=>{let t=this.executeLocal(e);r=RM.getDeferedArgs(e,t,r),s.resolve(r)});return(t||i)&&s.promise.then(t,i),n&&s.promise.then(n,n),s.promise}static getDeferedArgs(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i}static nextTick(e){(window.setImmediate||window.setTimeout)(e,0)}extendRequest(e,t,i){return KA({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)}makeRequest(e,t,i,n){let s=!!n.subQuerySelector,r=e=>{i.error=e,t.reject(i)},o=(e,n,s,r,o,a,l)=>{i.xhr=s,i.count=n?parseInt(n.toString(),10):0,i.result=e,i.request=r,i.aggregates=a,i.actual=o,i.virtualSelectRecords=l,t.resolve(i)},a=(e,t)=>{let a=new PM,l={parent:i};n.subQuery.isChild=!0;let c=this.adaptor.processQuery(this,n.subQuery,e?this.adaptor.processResponse(e):t),h=this.makeRequest(c,a,l,n.subQuery);return s||a.then(t=>{e&&(TM.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,e,t,n.subQuery.key),o(e,t.count,t.xhr))},r),h},l=this.extendRequest(e,(e,t)=>{-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&this.dateParse&&(e=TM.parse.parseJson(e));let i=this.adaptor.processResponse(e,this,n,t.httpRequest,t),r=0,l=null,c=e.virtualSelectRecords;n.isCountRequired&&(r=i.count,l=i.aggregates,i=i.result),n.subQuery?s||a(i,t):o(i,r,t.httpRequest,t.type,e,l,c)},r),c=new LO(l);if(c.beforeSend=()=>{this.beforeSend(c.httpRequest,c)},l=c.send(),l.catch(e=>!0),this.requests.push(c),s){let e,t=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});t&&t.length?(e=Promise.all([l,a(null,t)]),e.then((...e)=>{let t=e[0],i=this.adaptor.processResponse(t[0],this,n,this.requests[0].httpRequest,this.requests[0]),r=0;n.isCountRequired&&(r=i.count,i=i.result);let a=this.adaptor.processResponse(t[1],this,n.subQuery,this.requests[1].httpRequest,this.requests[1]);r=0,n.subQuery.isCountRequired&&(r=a.count,a=a.result),TM.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,i,a,n.subQuery.key),s=!1,o(i,r,this.requests[0].httpRequest)})):s=!1}return l}beforeSend(e,t){this.adaptor.beforeSend(this,e,t);let i,n=this.dataSource.headers;for(let s=0;n&&s<n.length;s++){i=[];let t=Object.keys(n[s]);for(let r of t)i.push(r),e.setRequestHeader(r,n[s][r])}}saveChanges(e,t,i,n,s){i instanceof _M&&(n=i,i=null);let r={url:i,key:t||this.dataSource.key},o=this.adaptor.batchRequest(this,e,r,n||new _M,s);if(this.dataSource.offline)return o;if(XA(this.adaptor.doAjaxRequest)){let t=new PM,i=new LO(o);return i.beforeSend=()=>{this.beforeSend(i.httpRequest,i)},i.onSuccess=(i,n)=>{t.resolve(this.adaptor.processResponse(i,this,null,n.httpRequest,n,e,r))},i.onFailure=e=>{t.reject([{error:e}])},i.send().catch(e=>!0),t.promise}return this.adaptor.doAjaxRequest(o)}insert(e,t,i,n){t instanceof _M&&(i=t,t=null);let s=this.adaptor.insert(this,e,t,i,n);return this.dataSource.offline?s:XA(this.adaptor.doAjaxRequest)?this.doAjaxRequest(s):this.adaptor.doAjaxRequest(s)}remove(e,t,i,n){"object"==typeof t&&(t=TM.getObject(e,t)),i instanceof _M&&(n=i,i=null);let s=this.adaptor.remove(this,e,t,i,n);return this.dataSource.offline?s:XA(this.adaptor.doAjaxRequest)?this.doAjaxRequest(s):this.adaptor.doAjaxRequest(s)}update(e,t,i,n,s){i instanceof _M&&(n=i,i=null);let r=this.adaptor.update(this,e,t,i,n,s);return this.dataSource.offline?r:XA(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)}doAjaxRequest(t){let i=new PM;t=KA({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t);let n=new LO(t);return n.beforeSend=()=>{this.beforeSend(n.httpRequest,n)},n.onSuccess=(t,n)=>{try{TM.parse.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(TM.parse.parseJson(t),this,null,n.httpRequest,n),i.resolve(t)},n.onFailure=e=>{i.reject([{error:e}])},n.send().catch(e=>!0),i.promise}}class PM{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}let MM={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};var LM;function NM(e,t){let i={};if(XA(e)||"string"==typeof e||"number"==typeof e||!XA(e.isHeader))return e;for(let n of Object.keys(t)){let s=t[n],r=XA(s)||"string"!=typeof s?void 0:WA(s,e);XA(r)||(i[s]=r)}return i}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};let t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(e,t,i,n){return b(e,s(e,t,i,n),null,n)}function s(e,t,n,s){let r=[],o=KA({},i,s);MM=g(o.moduleName);let a=p();for(let i=0;i<t.length;i++){if(XA(t[i]))continue;let l;o.itemCreating&&"function"==typeof o.itemCreating&&o.itemCreating({dataSource:t,curData:t[i],text:t[i],options:o}),l=n?m(e,t[i],void 0,null,null,[],null,a,i,s):y(e,t[i],void 0,null,null,s),o.itemCreated&&"function"==typeof o.itemCreated&&o.itemCreated({dataSource:t,curData:t[i],text:t[i],item:l,options:o}),r.push(l)}return r}function r(n,s,r,o,a){let l=KA({},i,r);MM=g(l.moduleName);let c,u=KA({},e.defaultMappedFields,l.fields),v=KA({},t,l.ariaAttributes),b=[];o&&(v.level=o);let w,S,C=[];s&&s.length&&!XA(h(s).item)&&!h(s).item.hasOwnProperty(u.id)&&(c=p());for(let e=0;e<s.length;e++){let t=NM(s[e],u);if(XA(s[e]))continue;l.itemCreating&&"function"==typeof l.itemCreating&&l.itemCreating({dataSource:s,curData:s[e],text:t[u.text],options:l,fields:u});let i=s[e];l.itemCreating&&"function"==typeof l.itemCreating&&(t=NM(s[e],u)),t.hasOwnProperty(u.id)&&!XA(t[u.id])&&(c=t[u.id]);let o=[];if(l.showCheckBox&&(l.itemNavigable&&(t[u.url]||t[u.urlAttributes])?b.push(n("input",{className:MM.check,attrs:{type:"checkbox"}})):o.push(n("input",{className:MM.check,attrs:{type:"checkbox"}}))),!0===a)l.showIcon&&t.hasOwnProperty(u.iconCss)&&!XA(t[u.iconCss])&&o.push(n("span",{className:MM.icon+" "+t[u.iconCss]})),w=m(n,i,t,u,l.itemClass,o,!(!i.hasOwnProperty("isHeader")||!i.isHeader),c,e,r),S=w.querySelector("."+MM.anchorWrap),l.itemNavigable&&b.length&&WD(b,w.firstElementChild);else{if(w=y(n,i,t,u,l.itemClass,r),w.classList.add(MM.level+"-"+v.level),w.setAttribute("aria-level",v.level.toString()),S=w.querySelector("."+MM.anchorWrap),t.hasOwnProperty(u.tooltip)&&w.setAttribute("title",t[u.tooltip]),t.hasOwnProperty(u.htmlAttributes)&&t[u.htmlAttributes]&&d(w,t[u.htmlAttributes]),t.hasOwnProperty(u.enabled)&&!1===t[u.enabled]&&w.classList.add(MM.disabled),t.hasOwnProperty(u.isVisible)&&!1===t[u.isVisible]&&(w.style.display="none"),t.hasOwnProperty(u.imageUrl)&&!XA(t[u.imageUrl])&&!l.template){let e={src:t[u.imageUrl]};$A(e,t[u.imageAttributes]);let i=n("img",{className:MM.image,attrs:e});S?S.insertAdjacentElement("afterbegin",i):WD([i],w.firstElementChild)}if(l.showIcon&&t.hasOwnProperty(u.iconCss)&&!XA(t[u.iconCss])&&!l.template){let e;e=n("div",{className:MM.icon+" "+t[u.iconCss]}),S?S.insertAdjacentElement("afterbegin",e):WD([e],w.firstElementChild)}o.length&&WD(o,w.firstElementChild),l.itemNavigable&&b.length&&WD(b,w.firstElementChild),f(n,t,u,0,l,w,v.level)}S&&jD([w],[MM.navigable]),l.itemCreated&&"function"==typeof l.itemCreated&&l.itemCreated({dataSource:s,curData:s[e],text:t[u.text],item:w,options:l,fields:u}),b=[],C.push(w)}return C}function o(e,t,n,s,o){let a=KA({},i,n);return b(e,r(e,t,n,s,o),a.listClass,n)}function a(e,t){if(t&&e){let i=t;return i=Array.prototype.slice.call(t),i.indexOf(e)}}function l(e,t,i=new _M){if("Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(let n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function c(e,t){return new RM(e).executeLocal(t)}function h(e){for(let t=0;t<e.length;t++)if(!XA(e[t]))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}function d(e,t){let i={};$A(i,t),i.class&&(jD([e],i.class.split(" ")),delete i.class),KD(e,i)}function u(e){let t={},i=e.attributes;for(let n=0;n<i.length;n++)t[i[n].nodeName]=i[n].nodeValue;return t}function p(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function f(e,t,i,n,s,r,a){let l=t[i.child]||[],c=t[i.hasChildren];if(l.length&&(c=!0,r.classList.add(MM.hasChild),s.processSubChild)){let t=o(e,l,s,++a);r.appendChild(t)}s.expandCollapse&&c&&!s.template&&(r.firstElementChild.classList.add(MM.iconWrapper),("Left"===s.expandIconPosition?WD:zD)([e("div",{className:"e-icons "+s.expandIconClass})],r.querySelector("."+MM.textContent)))}function m(e,n,s,r,o,a,l,c,h,u){let p,f,m=KA({},i,u),g=KA({},t,m.ariaAttributes),y=n,b=n;"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&(p=n,y="boolean"==typeof s[r.text]||"number"==typeof s[r.text]?s[r.text]:s[r.text]||"",b=s[r.value]),f=XA(p)||XA(s[r.id])||""===s[r.id]?c+"-"+h:c;let w=e("li",{className:(!0===l?MM.group:MM.li)+" "+(XA(o)?"":o),id:f,attrs:""!==g.groupItemRole&&""!==g.itemRole?{role:!0===l?g.groupItemRole:g.itemRole}:{}});return p&&s.hasOwnProperty(r.enabled)&&"false"===s[r.enabled].toString()&&w.classList.add(MM.disabled),l?w.innerText=y:(w.setAttribute("data-value",XA(b)?"null":b),w.setAttribute("role","option"),p&&s.hasOwnProperty(r.htmlAttributes)&&s[r.htmlAttributes]&&d(w,s[r.htmlAttributes]),a.length&&!m.itemNavigable&&zD(a,w),p&&(s[r.url]||s[r.urlAttributes]&&s[r.urlAttributes].href)?w.appendChild(v(e,p,r,y,a,m.itemNavigable)):(a.length&&m.itemNavigable&&zD(a,w),w.appendChild(document.createTextNode(y)))),w}function g(e){return{li:`e-${e}-item`,ul:`e-${e}-parent e-ul`,group:`e-${e}-group-item`,icon:`e-${e}-icon`,text:`e-${e}-text`,check:`e-${e}-check`,checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:`e-${e}-url`,collapsible:"e-icon-collapsible",disabled:"e-disabled",image:`e-${e}-img`,iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function v(e,t,i,n,s,r){let o,a=NM(t,i),l={href:a[i.url]};if(a.hasOwnProperty(i.urlAttributes)&&a[i.urlAttributes]&&($A(l,a[i.urlAttributes]),l.href=a[i.url]?a[i.url]:a[i.urlAttributes].href),r){o=e("a",{className:MM.text+" "+MM.url});let t=e("div",{className:MM.anchorWrap});s&&s.length&&zD(s,t),t.appendChild(document.createTextNode(n)),zD([t],o)}else o=e("a",{className:MM.text+" "+MM.url,innerHTML:n});return d(o,l),o}function y(e,n,s,r,o,a){let l,c,h,d=KA({},i,a),u=KA({},t,d.ariaAttributes),f=n;"string"!=typeof n&&"number"!=typeof n&&(h=n,f=s[r.text]||"",l=XA(s._id)?s[r.id]:s._id,c=!(!n.hasOwnProperty("isHeader")||!n.isHeader)),a&&a.enableHtmlSanitizer&&(f=nR.sanitize(f));let m=e("li",{className:(!0===c?MM.group:MM.li)+" "+(XA(o)?"":o),attrs:""!==u.groupItemRole&&""!==u.itemRole?{role:!0===c?u.groupItemRole:u.itemRole}:{}});if(XA(l)?m.setAttribute("data-uid",p()):m.setAttribute("data-uid",l),a&&a.removeBlazorID&&"object"==typeof n&&n.hasOwnProperty("BlazId")&&delete n.BlazId,c&&a&&a.groupTemplate)zD(bD(a.groupTemplate)(n,a,"groupTemplate",d.groupTemplateID,!!d.isStringTemplate),m);else if(!c&&a&&a.template)zD(bD(a.template)(n,a,"template",d.templateID,!!d.isStringTemplate),m);else{let t=e("div",{className:MM.textContent,attrs:""!==u.wrapperRole?{role:u.wrapperRole}:{}});if(h&&(s[r.url]||s[r.urlAttributes]&&s[r.urlAttributes].href))t.appendChild(v(e,h,r,f,null,d.itemNavigable));else{let i=e("span",{className:MM.text,attrs:""!==u.itemText?{role:u.itemText}:{}});a&&a.enableHtmlSanitizer?i.innerText=nR.sanitize(f):i.innerHTML=f,t.appendChild(i)}m.appendChild(t)}return m}function b(e,n,s,r){let o=KA({},i,r),a=KA({},t,o.ariaAttributes);MM=g(o.moduleName);let l=e("ul",{className:MM.ul+" "+(XA(s)?"":s),attrs:""!==a.listRole?{role:a.listRole}:{}});return zD(n,l),l}e.createList=function(e,s,r,a){let l=KA({},i,r),c=KA({},t,l.ariaAttributes),d=h(s).typeof;return"string"===d||"number"===d?n(e,s,a,r):o(e,s,r,c.level,a)},e.createListFromArray=n,e.createListItemFromArray=s,e.createListItemFromJson=r,e.createListFromJson=o,e.getSiblingLI=function(e,t,n){if(MM=g(i.moduleName),!e||!e.length)return;let s,r,o=Array.prototype.slice.call(e);for(r=t?a(t,o):!0===n?o.length:-1,s=o[r+(!0===n?-1:1)];s&&(!qD(s)||s.classList.contains(MM.disabled));)r+=!0===n?-1:1,s=o[r];return s},e.indexOf=a,e.groupDataSource=function(t,i,n="None"){let s=KA({},e.defaultMappedFields,i),r=(new _M).group(s.groupBy);r=l(n,"key",r);let o=c(t,r);t=[];for(let e=0;e<o.length;e++){let i=o[e].items,n={},r="isHeader";n[s.text]=o[e].key,n[r]=!0;let a=s.text;"id"===a&&(a="text",n[a]=o[e].key),n._id="group-list-item-"+(o[e].key?o[e].key.toString().trim():"undefined"),n.items=i,t.push(n);for(let e=0;e<i.length;e++)t.push(i[e])}return t},e.addSorting=l,e.getDataSource=c,e.createJsonFromElement=function t(n,s){let r=KA({},i,s),o=KA({},e.defaultMappedFields,r.fields),a=n.cloneNode(!0),l=[];a.classList.add("json-parent");let c=a.querySelectorAll(".json-parent>li");a.classList.remove("json-parent");for(let e=0;e<c.length;e++){let i=c[e],n=i.querySelector("a"),r=i.querySelector("ul"),a={},h=n?n.childNodes:i.childNodes,d=Object.keys(h);for(let e=0;e<h.length;e++)h[Number(d[e])].hasChildNodes()||(a[o.text]=h[Number(d[e])].textContent);let f=u(i);f.id?(a[o.id]=f.id,delete f.id):a[o.id]=p(),Object.keys(f).length&&(a[o.htmlAttributes]=f),n&&(f=u(n),Object.keys(f).length&&(a[o.urlAttributes]=f)),r&&(a[o.child]=t(r,s)),l.push(a)}return l},e.renderContentTemplate=function(t,n,s,r,o,a){MM=g(i.moduleName);let l=t("ul",{className:MM.ul,attrs:{role:"presentation"}}),c=KA({},i,o),h=KA({},e.defaultMappedFields,r),d=bD(n),u=[],f=p();for(let e=0;e<s.length;e++){let i=NM(s[e],h),n=s[e],r=n.isHeader,a=i[h.value];c.itemCreating&&"function"==typeof c.itemCreating&&c.itemCreating({dataSource:s,curData:n,text:a,options:c,fields:h}),c.itemCreating&&"function"==typeof c.itemCreating&&(i=NM(s[e],h),a=i[h.value]);let l=t("li",{id:f+"-"+e,className:r?MM.group:MM.li,attrs:{role:"presentation"}});r?l.innerText=i[h.text]:(zD(d(n,o,r?"groupTemplate":"template",r?c.groupTemplateID:c.templateID,!!c.isStringTemplate),l),l.setAttribute("data-value",XA(a)?"null":a),l.setAttribute("role","option")),c.itemCreated&&"function"==typeof c.itemCreated&&c.itemCreated({dataSource:s,curData:n,text:a,item:l,options:c,fields:h}),u.push(l)}return zD(u,l),l},e.renderGroupTemplate=function(t,n,s,r,o){let a=bD(t),l=KA({},e.defaultMappedFields,s),c=KA({},i,o),h=l.groupBy;for(let e of r){let t={};t[h]=e.textContent,e.innerHTML="",zD(a(t,o,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate),e)}return r},e.generateId=p,e.generateUL=b,e.generateIcon=function(e,t,n,s){let r=KA({},i,s);return MM=g(r.moduleName),("Left"===r.expandIconPosition?WD:zD)([e("div",{className:"e-icons "+r.expandIconClass+" "+(XA(n)?"":n)})],t.querySelector("."+MM.textContent)),t}}(LM||(LM={}));var VM=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const BM={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},FM={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},jM={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"};class HM extends II{}VM([mI("id")],HM.prototype,"id",void 0),VM([mI("text")],HM.prototype,"text",void 0),VM([mI("isChecked")],HM.prototype,"isChecked",void 0),VM([mI("isVisible")],HM.prototype,"isVisible",void 0),VM([mI("enabled")],HM.prototype,"enabled",void 0),VM([mI("iconCss")],HM.prototype,"iconCss",void 0),VM([mI("child")],HM.prototype,"child",void 0),VM([mI("tooltip")],HM.prototype,"tooltip",void 0),VM([mI("groupBy")],HM.prototype,"groupBy",void 0),VM([mI("text")],HM.prototype,"sortBy",void 0),VM([mI("htmlAttributes")],HM.prototype,"htmlAttributes",void 0),VM([mI("tableName")],HM.prototype,"tableName",void 0);let UM=class extends NI{constructor(e,t){super(e,t),this.itemReRender=!1,this.previousSelectedItems=[],this.hiddenItems=[],this.enabledItems=[],this.disabledItems=[]}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":XA(this.contentContainer)||YD(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"sortOrder":case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}setHTMLAttribute(){Object.keys(this.htmlAttributes).length&&KD(this.element,this.htmlAttributes)}setCSSClass(e){this.cssClass&&jD([this.element],this.cssClass.split(" ").filter(e=>e)),e&&HD([this.element],e.split(" ").filter(e=>e))}setSize(){this.element.style.height=tO(this.height),this.element.style.width=tO(this.width),this.isWindow=!this.element.clientHeight}setEnable(){this.enableElement(this.element,this.enable)}setEnableRTL(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}enableElement(e,t){t?e.classList.remove(jM.disable):e.classList.add(jM.disable)}header(e,t,i){if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:nR.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:jM.header});let e=this.createElement("span",{className:jM.headerText,innerHTML:this.headerTitle}),t=this.createElement("div",{className:jM.text,innerHTML:e.outerHTML}),n=this.createElement("div",{className:jM.icon+" "+jM.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(n),this.headerEle.appendChild(t),this.headerTemplate){let e=bD(this.headerTemplate),t=this.createElement("div",{className:jM.headerTemplateText});zD(e({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID),t),zD([t],this.headerEle),this.updateBlazorTemplates(!1,!0,!0)}this.headerTemplate&&this.headerTitle&&t.classList.add("header"),this.element.classList.add("e-has-header"),WD([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";let i=this.headerEle.querySelector("."+jM.headerText),n=this.headerEle.querySelector("."+jM.backIcon);this.enableHtmlSanitizer&&(e=nR.sanitize(e)),i.innerHTML=e,this.headerTemplate&&t&&(i.parentElement.classList.remove("header"),this.headerEle.querySelector("."+jM.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(i.parentElement.classList.add("header"),this.headerEle.querySelector("."+jM.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+jM.headerTemplateText).classList.add("header")),n.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"}switchView(e,t,i){if(e&&t){let n,s=e.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");let o=this.animation.duration;this.animation.effect?n=this.enableRtl?FM[this.animation.effect]:BM[this.animation.effect]:(n=BM.SlideLeft,i=this.enableRtl,o=0),this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?n[0]:n[1],duration:o,timingFunction:this.animation.easing,end:t=>{e.style.display="none",this.element.style.overflow=r,e.style.position=s,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?n[2]:n[3],duration:o,timingFunction:this.animation.easing,end:()=>{this.trigger("actionComplete")}}),this.curUL=t}}preRender(){this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"option",listRole:"presentation",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer,removeBlazorID:!0},this.initialization()}updateLiElementHeight(){let e=this.element.querySelector("."+jM.virtualElementContainer);e.children[0]&&(this.liElementHeight=e.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight))}initialization(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new _I(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0}renderCheckbox(e){if(e.item.classList.contains(jM.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){let t,i;t=gR(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:jM.listviewCheckbox}),t.setAttribute("role","checkbox");let n=t.querySelector("."+jM.checkboxIcon);e.item.classList.add(jM.itemCheckList),e.item.firstElementChild.classList.add(jM.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?(i=NM(e.curData,this.listBaseOption.fields),i[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,t)):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,t),t.setAttribute("aria-checked",n.classList.contains(jM.checked)?"true":"false"),"Left"===this.checkBoxPosition?(t.classList.add(jM.checkboxLeft),e.item.firstElementChild.classList.add(jM.checkboxLeft),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0])):(t.classList.add(jM.checkboxRight),e.item.firstElementChild.classList.add(jM.checkboxRight),e.item.firstElementChild.appendChild(t)),this.currentLiElements.push(e.item),this.virtualCheckBox="Left"===this.checkBoxPosition?e.item.firstElementChild.children[0]:e.item.firstElementChild.lastElementChild}}checkInternally(e,t){e.item.classList.add(jM.selected),e.item.setAttribute("aria-selected","true"),t.querySelector("."+jM.checkboxIcon).classList.add(jM.checked),t.setAttribute("aria-checked","true")}checkItem(e){this.toggleCheckBase(e,!0)}toggleCheckBase(e,t){if(this.showCheckBox){let i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!XA(i)){let e=i.querySelector("."+jM.checkboxIcon);t?i.classList.add(jM.selected):i.classList.remove(jM.selected),i.setAttribute("aria-selected",t?"true":"false"),t?e.classList.add(jM.checked):e.classList.remove(jM.checked),e.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i)}}uncheckItem(e){this.toggleCheckBase(e,!1)}checkAllItems(){this.toggleAllCheckBase(!0)}uncheckAllItems(){this.toggleAllCheckBase(!1)}toggleAllCheckBase(e){if(this.showCheckBox){for(let t=0;t<this.liCollection.length;t++){let i=this.liCollection[t].querySelector("."+jM.checkboxIcon);i&&(e?i.classList.contains(jM.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(jM.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e)}}setCheckbox(){if(this.showCheckBox){let e=Array.prototype.slice.call(this.element.querySelectorAll("."+jM.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""};for(let i=0;i<e.length;i++){let n=e[i];t.item=n,t.curData=this.getItemData(n),n.querySelector("."+jM.checkboxWrapper)&&this.removeElement(n.querySelector("."+jM.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(jM.selected)&&this.checkInternally(t,t.item.querySelector("."+jM.checkboxWrapper))}}else{let e=Array.prototype.slice.call(this.element.querySelectorAll("."+jM.itemCheckList));for(let t=0;t<e.length;t++){let i=e[t];i.classList.remove(jM.selected),i.firstElementChild.classList.remove(jM.checkbox),this.removeElement(i.querySelector("."+jM.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(jM.selected)}}refreshItemHeight(){this.virtualizationModule.refreshItemHeight()}clickHandler(e){let t,i=e.target,n=i.classList;if(n.contains(jM.backIcon)||n.contains(jM.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{let n=QD(i.parentNode,"."+jM.listItem);if(null===n&&(n=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(n))if(e.target.classList.contains(jM.checkboxIcon)){if(n.classList.add(jM.focused),XA(n.querySelector("."+jM.checked))){let e={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:n};this.checkInternally(e,e.item.querySelector("."+jM.checkboxWrapper))}else this.uncheckItem(n),n.classList.add(jM.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(n,e),e){let t=this.selectEventData(n,e);$A(t,{isChecked:n.querySelector("."+jM.checkboxIcon).classList.contains(jM.checked)}),this.trigger("select",t)}}else n.classList.contains(jM.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(n),this.setSelectLI(n,e),n.classList.remove(jM.selected)):this.setCheckboxLI(n,e);else this.setSelectLI(n,e);t=QD(e.target,"li"),XA(t)||t.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&t.classList.add(jM.disable)}}removeElement(e){return e&&e.parentNode&&e.parentNode.removeChild(e)}hoverHandler(e){let t=QD(e.target.parentNode,"."+jM.listItem);this.setHoverLI(t)}leaveHandler(e){this.removeHover()}homeKeyHandler(e,t){if(Object.keys(this.dataSource).length&&this.curUL){this.selectedItems&&this.selectedItems.item.setAttribute("aria-selected","false");let i=this.curUL.querySelectorAll("."+jM.listItem),n=this.curUL.querySelector("."+jM.focused)||this.curUL.querySelector("."+jM.selected);n&&(n.classList.remove(jM.focused),this.showCheckBox||n.classList.remove(jM.selected));let s=t?i.length-1:0;i[s].classList.contains(jM.hasChild)||this.showCheckBox?i[s].classList.add(jM.focused):this.setSelectLI(i[s],e),i[s]?this.element.setAttribute("aria-activedescendant",i[s].id.toString()):this.element.removeAttribute("aria-activedescendant")}}onArrowKeyDown(e,t){let i,n;return!XA(this.curUL.querySelector("."+jM.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+jM.focused)||this.curUL.querySelector("."+jM.selected),i=LM.getSiblingLI(this.curUL.querySelectorAll("."+jM.listItem),n,t),XA(i)||(n&&(n.classList.remove(jM.focused),this.showCheckBox||n.classList.remove(jM.selected)),i.classList.contains(jM.hasChild)||this.showCheckBox?i.classList.add(jM.focused):this.setSelectLI(i,e))):(n=this.curUL.querySelector("."+jM.selected),i=LM.getSiblingLI(this.curUL.querySelectorAll("."+jM.listItem),n,t),this.setSelectLI(i,e)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i}arrowKeyHandler(e,t){if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){let i,n,s=this.onArrowKeyDown(e,t),r=this.element.getBoundingClientRect().top,o=this.element.getBoundingClientRect().height,a=this.curUL.querySelector("."+jM.listItem).getBoundingClientRect();if(this.fields.groupBy&&(n=this.curUL.querySelector("."+jM.groupListItem).getBoundingClientRect()),s){let e=s.getBoundingClientRect().top,n=s.getBoundingClientRect().height;if(t)i=this.isWindow?e:e-r,i<0&&(this.isWindow?window.scroll(0,pageYOffset+i):this.element.scrollTop=this.element.scrollTop+i);else{let t=this.isWindow?window.innerHeight:o;i=this.isWindow?e+n:e-r+n,i>t&&(this.isWindow?window.scroll(0,pageYOffset+(i-t)):this.element.scrollTop=this.element.scrollTop+(i-t))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=()=>{this.onArrowKeyDown(e,t),this.onUIScrolled=void 0},i=this.virtualizationModule.listItemHeight,this.isWindow?window.scroll(0,pageYOffset-i):this.element.scrollTop=this.element.scrollTop-i;else if(t)if(this.showHeader&&this.headerEle){let e=n?n.top:a.top,t=this.headerEle.getBoundingClientRect();i=t.top<0?t.height-e:0,this.isWindow?window.scroll(0,pageYOffset-i):this.element.scrollTop=0}else this.fields.groupBy&&(i=this.isWindow?n.top<0?n.top:0:r-a.top+n.height,this.isWindow?window.scroll(0,pageYOffset+i):this.element.scrollTop=this.element.scrollTop-i)}}enterKeyHandler(e){if(Object.keys(this.dataSource).length&&this.curUL){let t=!XA(this.curUL.querySelector("."+jM.hasChild)),i=this.curUL.querySelector("."+jM.focused);t&&i&&(i.classList.remove(jM.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}}spaceKeyHandler(e){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){let e=this.curUL.querySelector("."+jM.focused);if(!XA(e)&&XA(e.querySelector("."+jM.checked))){let t={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:e};this.checkInternally(t,t.item.querySelector("."+jM.checkboxWrapper))}else this.uncheckItem(e)}}keyActionHandler(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(e)}}swipeActionHandler(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())}focusout(){if(Object.keys(this.dataSource).length&&this.curUL){let e=this.curUL.querySelector("."+jM.focused),t=this.curUL.querySelector("[aria-selected = true]");e&&(e.classList.remove(jM.focused),t&&!this.showCheckBox&&t.classList.add(jM.selected))}}wireEvents(){GO.add(this.element,"keydown",this.keyActionHandler,this),GO.add(this.element,"click",this.clickHandler,this),this.enableVirtualization||(GO.add(this.element,"mouseover",this.hoverHandler,this),GO.add(this.element,"mouseout",this.leaveHandler,this)),GO.add(this.element,"focusout",this.focusout,this),this.touchModule=new ZI(this.element,{swipe:this.swipeActionHandler.bind(this)})}unWireEvents(){GO.remove(this.element,"click",this.clickHandler),this.enableVirtualization||(GO.remove(this.element,"mouseover",this.hoverHandler),GO.remove(this.element,"mouseout",this.leaveHandler)),GO.remove(this.element,"mouseover",this.hoverHandler),GO.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()}removeFocus(){let e=this.element.querySelectorAll("."+jM.focused);for(let t of e)t.classList.remove(jM.focused)}removeHover(){let e=this.element.querySelector("."+jM.hover);e&&e.classList.remove(jM.hover)}removeSelect(e){if(XA(e)){let e=this.element.querySelectorAll("."+jM.selected);for(let t of e)this.showCheckBox&&t.querySelector("."+jM.checked)||(t.setAttribute("aria-selected","false"),t.classList.remove(jM.selected))}else e.classList.remove(jM.selected),e.setAttribute("aria-selected","false")}isValidLI(e){return e&&e.classList.contains(jM.listItem)&&!e.classList.contains(jM.groupListItem)&&!e.classList.contains(jM.disable)}setCheckboxLI(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+jM.focused)&&this.curUL.querySelector("."+jM.focused).classList.remove(jM.focused),e.classList.add(jM.focused);let i=e.querySelector("."+jM.checkboxWrapper),n=i.querySelector("."+jM.checkboxIcon+"."+jM.icon);this.removeHover(),n.classList.contains(jM.checked)?(n.classList.remove(jM.checked),e.classList.remove(jM.selected),e.setAttribute("aria-selected","false")):(n.classList.add(jM.checked),e.classList.add(jM.selected),e.setAttribute("aria-selected","true")),i.setAttribute("aria-checked",n.classList.contains(jM.checked)?"true":"false");let s=this.selectEventData(e,t);$A(s,{isChecked:n.classList.contains(jM.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",s),this.setSelectedItemData(e),this.renderSubList(e)}}selectEventData(e,t){let i,n=this.getItemData(e),s=NM(n,this.listBaseOption.fields);i=!XA(n)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:s&&s[this.listBaseOption.fields.text],data:n};let r={};return $A(r,i),t&&$A(r,{isInteracted:!0,event:t,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),r}setSelectedItemData(e){let t=this.getItemData(e),i=NM(t,this.listBaseOption.fields);this.selectedItems=XA(t)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?{item:e,text:i&&i[this.listBaseOption.fields.text],data:t}:{item:e,text:e&&e.innerText.trim(),data:this.dataSource}}setSelectLI(e,t){if(this.isValidLI(e)&&!e.classList.contains(jM.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(jM.selected),e.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);let i=this.selectEventData(e,t);this.trigger("select",i),this.selectedLI=e,this.renderSubList(e)}}setHoverLI(e){if(this.isValidLI(e)&&!e.classList.contains(jM.hover)&&this.enable){let t=this.element.querySelectorAll("."+jM.hover);t&&t.length&&HD(t,jM.hover),e.classList.contains(jM.selected)&&!this.showCheckBox||e.classList.add(jM.hover)}}getSubDS(){let e=this.curDSLevel;if(e.length){let t=this.localData;for(let i of e){let e={};e[this.fields.id]=i,this.curDSJSON=this.findItemFromDS(t,e);let n=NM(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?n[this.fields.child]:t}return t}return this.localData}getItemData(e){let t,i=this.dataSource instanceof RM?this.localData:this.dataSource,n=this.getElementUID(e);return t=XA(this.element.querySelector("."+jM.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,n)}findItemFromDS(e,t,i){let n;return e&&e.length&&t?e.some(s=>{let r=NM(s,this.listBaseOption.fields);if(!t[this.fields.id]&&!t[this.fields.text]||t[this.fields.id]&&(!XA(r[this.fields.id])&&r[this.fields.id].toString())!==t[this.fields.id].toString()||t[this.fields.text]&&r[this.fields.text]!==t[this.fields.text])if("object"!=typeof s&&-1!==e.indexOf(s))n=i?e:s;else if(!XA(t[this.fields.id])&&XA(r[this.fields.id])){let e=this.element.querySelector('[data-uid="'+t[this.fields.id]+'"]');e&&e.innerText.trim()===r[this.fields.text]&&(n=s)}else r.hasOwnProperty(this.fields.child)&&r[this.fields.child].length&&(n=this.findItemFromDS(r[this.fields.child],t,i));else n=i?e:s;return!!n}):n=e,n}getQuery(){let e=[],t=this.query?this.query:new _M;if(!this.query){for(let t of Object.keys(this.fields.properties))"tableName"!==t&&this.fields[t]&&this.fields[t]!==LM.defaultMappedFields[t]&&-1===e.indexOf(this.fields[t])&&e.push(this.fields[t]);t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t}setViewDataSource(e=this.localData){this.curViewDS=e&&this.fields.groupBy?LM.groupDataSource("None"!==this.sortOrder?LM.getDataSource(e,LM.addSorting(this.sortOrder,this.fields.sortBy)):e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?LM.getDataSource(e,LM.addSorting(this.sortOrder,this.fields.sortBy)):e}isInAnimation(){return this.curUL.classList.contains(".e-animate")}setLocalData(){this.trigger("actionBegin");let e=this;if(this.dataSource instanceof RM)this.dataSource.executeQuery(this.getQuery()).then(t=>{this.isDestroyed||(this.localData=t.result,e.removeElement(e.contentContainer),this.renderList(),this.trigger("actionComplete",t))}).catch(e=>{this.isDestroyed||this.trigger("actionFailure",e)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{let e=this.element.querySelector("ul");e&&($D(e),this.setProperties({dataSource:LM.createJsonFromElement(e)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}}reRender(){this.resetBlazorTemplates(),this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()}resetCurrentList(){this.resetBlazorTemplates(),this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)}setAttributes(e){for(let t=0;t<e.length;t++){let i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("aria-selected","false"),i.setAttribute("tabindex","-1"))}}createList(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=LM.createList(this.createElement,this.curViewDS,this.listBaseOption),this.liCollection=this.curUL.querySelectorAll("."+jM.listItem),this.setAttributes(this.liCollection),this.updateBlazorTemplates(!0)}resetBlazorTemplates(){let e=vD;this.template&&(e[this.LISTVIEW_TEMPLATE_ID]=[],wD(this.LISTVIEW_TEMPLATE_ID)),this.groupTemplate&&(e[this.LISTVIEW_GROUPTEMPLATE_ID]=[],wD(this.LISTVIEW_GROUPTEMPLATE_ID)),this.headerTemplate&&wD(this.LISTVIEW_HEADERTEMPLATE_ID)}updateBlazorTemplates(e=!1,t=!1,i=!1){}exceptionEvent(e){this.trigger("actionFailure",e)}UpdateCurrentUL(){this.ulElement=this.curUL=this.element.querySelector("."+jM.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+jM.listItem))}removeActiveClass(){let e=this;setTimeout(()=>{let t=e.element.querySelector("."+jM.virtualElementContainer);for(let i=0;i<t.childElementCount;i++){let n,s,r=t.children[i];if(e.showCheckBox)if(e.previousSelectedItems.length>0)for(let t=0;t<e.previousSelectedItems.length;t++)r.getAttribute("data-uid")===e.previousSelectedItems[t]?(r.classList.add("e-active"),r.setAttribute("aria-selected","true"),r.querySelector(".e-frame.e-icons")&&r.querySelector(".e-frame.e-icons").classList.add("e-check"),n=i):n!==i&&(r.classList.remove("e-active"),r.removeAttribute("aria-selected"),r.querySelector(".e-check")&&r.querySelector(".e-check").classList.remove("e-check"));else r.classList.remove("e-active"),r.removeAttribute("aria-selected"),r.querySelector(".e-check")&&r.querySelector(".e-check").classList.remove("e-check");else r.getAttribute("data-uid")===e.previousSelectedItems[0]?(r.classList.add("e-active"),r.setAttribute("aria-selected","true")):(r.classList.remove("e-active"),r.removeAttribute("aria-selected"));if(e.hiddenItems.length>0)for(let t=0;t<e.hiddenItems.length;t++)r.getAttribute("data-uid")===e.previousSelectedItems[t]?(r.style.display="none",s=i):s!==i&&(r.style.display=null);if(e.enabledItems.length>0)for(let t=0;t<e.enabledItems.length;t++)r.getAttribute("data-uid")===e.enabledItems[t]&&r.classList.contains("e-disabled")&&r.classList.remove("e-disabled");if(e.disabledItems.length>0)for(let t=0;t<e.disabledItems.length;t++)r.getAttribute("data-uid")===e.disabledItems[t]&&(r.classList.contains("e-disabled")||r.classList.add("e-disabled"))}},200)}renderingNestedList(){let e=QD(this.liElement.parentNode,"."+jM.parentItem),t=document.getElementById(this.element.id),i=t.getElementsByTagName("UL")[t.getElementsByTagName("UL").length-1];this.switchView(e,i),this.liElement=null}renderSubList(e){this.liElement=e;let t=e.getAttribute("data-uid");if(e.classList.contains(jM.hasChild)&&t){let i=QD(e.parentNode,"."+jM.parentItem),n=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!n){{n=LM.createListFromJson(this.createElement,this.curViewDS,this.listBaseOption,this.curDSLevel.length);let e=n.querySelectorAll("."+jM.listItem);this.setAttributes(e),n.setAttribute("pID",t),n.style.display="none",this.renderIntoDom(n),this.updateBlazorTemplates(!0)}}if(this.switchView(i,n),this.liCollection=this.curUL.querySelectorAll("."+jM.listItem),this.selectedItems){let e=NM(this.selectedItems.data,this.listBaseOption.fields);this.header(e[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}}renderIntoDom(e){this.contentContainer.appendChild(e)}renderList(e){this.setViewDataSource(e),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:jM.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement))}getElementUID(e){let t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t}render(){this.element.classList.add(jM.root),KD(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=EI(this.element,{selector:"."+jM.listItem}),this.renderComplete()}initBlazor(e){null===e&&(e=!1),this.setLocalData(),this.setViewDataSource(this.localData),this.contentContainer=this.element.querySelector("."+jM.content),e&&this.wireEvents()}destroy(){this.resetBlazorTemplates(),this.unWireEvents();let e=[jM.root,jM.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter(e=>e));HD([this.element],e),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",super.destroy()}back(){let e=this.curDSLevel[this.curDSLevel.length-1];if(void 0===e||this.isInAnimation())return;this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());let t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);let n=NM(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();let s=this.element.querySelector("[data-uid='"+e+"']");s.classList.remove(jM.disable),s.classList.add(jM.focused),this.showCheckBox&&s.querySelector("."+jM.checkboxIcon).classList.contains(jM.checked)?s.setAttribute("aria-selected","true"):(s.classList.remove(jM.selected),s.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+jM.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:nR.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length,"header")}selectItem(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):XA(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))}getLiFromObjOrElement(e){let t,i=this.dataSource instanceof RM?this.localData:this.dataSource;if(!XA(e))if("string"==typeof i[0]||"number"==typeof i[0])if(e instanceof Element){let i=e.getAttribute("data-uid").toString();for(let e=0;e<this.liCollection.length;e++)if(this.liCollection[e].getAttribute("data-uid").toString()===i){t=this.liCollection[e];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+jM.listItem),i=>i.innerText.trim()===e.toString()&&(t=i,!0));else{let i=this.getItemData(e),n=NM(i,this.listBaseOption.fields);if(i&&(t=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]'),!this.enableVirtualization&&XA(t))){let e=this.element.querySelectorAll("."+jM.listItem);for(let i=0;i<e.length;i++)e[i].innerText.trim()===n[this.fields.text]&&(t=e[i])}}return t}selectMultipleItems(e){if(!XA(e))for(let t=0;t<e.length;t++)XA(e[t])||this.selectItem(e[t])}getParentId(){let e=[];if(this.isNestedList)for(let t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e}getSelectedItems(){let e,t=!1;this.selectedId=[];let i=this.dataSource instanceof RM?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){let n=this.curUL.getElementsByClassName(jM.selected),s=[],r=[];this.selectedId=[];let o=[];for(let e=0;e<n.length;e++)if("string"==typeof i[0]||"number"==typeof i[0])s.push(n[e].innerText.trim());else{let t=this.getItemData(n[e]),i=NM(t,this.listBaseOption.fields);this.isNestedList?o.push({data:t,parentId:this.getParentId()}):r.push(t),i?(s.push(i[this.listBaseOption.fields.text]),this.selectedId.push(i[this.listBaseOption.fields.id])):(s.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||t||(e={item:n,data:i,text:s},t=!0),this.isNestedList&&!t?(e={item:n,data:o,text:s},t=!0):t||(e={item:n,data:r,text:s},t=!0)}else if(!t){let n=this.element.getElementsByClassName(jM.selected)[0],s=NM(this.getItemData(n),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||t?t||(XA(s)||XA(n)?(e=void 0,t=!0):(this.selectedId.push(s[this.listBaseOption.fields.id]),e={text:s[this.listBaseOption.fields.text],item:n,data:this.getItemData(n)},t=!0)):(e=XA(n)?void 0:{item:n,data:i,text:n.innerText.trim()},t=!0)}return e}blazorGetSelectedItems(e){let t={data:[],index:[],parentId:[],text:[]};if(!XA(e)){if(!XA(e.data))if(this.showCheckBox&&this.isNestedList){for(let i=0;i<e.data.length;i++)t.data.push(e.data[i].data);XA(e.data[0])||XA(e.data[0].parentId)||(t.parentId=e.data[0].parentId)}else t.data=this.convertItemsToArray(e.data);XA(e.text)||(t.text=this.convertItemsToArray(e.text)),XA(e.index)||(t.index=this.convertItemsToArray(e.index))}return t}convertItemsToArray(e){return Array.isArray(e)?[...e]:[e]}findItem(e){return this.getItemData(e)}enableItem(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)}disableItem(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)}setItemState(e,t){let i=this.getItemData(e),n=NM(i,this.listBaseOption.fields);if(i){let e=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');t?(e&&e.classList.remove(jM.disable),delete i[this.fields.enabled]):t||(e&&e.classList.add(jM.disable),i[this.fields.enabled]=!1)}}showItem(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)}hideItem(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)}showHideItem(e,t,i){let n=this.getItemData(e),s=NM(n,this.listBaseOption.fields);if(n){let e=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]');e&&(e.style.display=i),t?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}}addItem(e,t){this.addItemInternally(e,t,this.dataSource instanceof RM?this.localData:this.dataSource)}addItemInternally(e,t,i){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,i);else{const n=this.findItemFromDS(i,t);let s;if(n&&(s=NM(n,this.listBaseOption.fields)[this.fields.child],s||(s=[]),s=s.concat(e)),n instanceof Array){for(let t=0;t<e.length;t++){i.push(e[t]),this.setViewDataSource(i);const n=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&n?this.addItemIntoDom(e[t],n,this.curViewDS):this.reRender()}this.curUL&&this.updateBlazorTemplates(!0),this.liCollection=this.curUL.querySelectorAll("."+jM.listItem)}else n&&(n[this.fields.child]=s,this.addItemInNestedList(n,e))}}addItemInNestedList(e,t){const i=e[this.fields.id],n=e[this.fields.child],s=this.element.querySelector("[pid='"+i+"']"),r=this.element.querySelector("[data-uid='"+i+"']"),o=s||(r?QD(r,"ul"):null),a=s?n:[e];let l=!1;if(r&&!r.classList.contains(jM.hasChild)){const e=LM.createListItemFromJson(this.createElement,a,this.listBaseOption);this.setAttributes(e),o.insertBefore(e[0],r),YD(r),l=!0}if(s&&t){for(let e=0;e<t.length;e++)a.push(t[e]),this.addItemIntoDom(t[e],o,a);l=!0}l&&this.updateBlazorTemplates(!0)}addItemIntoDom(e,t,i){let n=i.indexOf(e);this.addListItem(e,n,t,i);let s=i[n-1];s&&s.isHeader&&1===s.items.length&&this.addListItem(s,n-1,t,i)}addListItem(e,t,i,n){let s=this.getLiFromObjOrElement(n[t+1])||this.getLiFromObjOrElement(n[t+2])||null,r=LM.createListItemFromJson(this.createElement,[e],this.listBaseOption);this.setAttributes(r),i.insertBefore(r[0],s)}removeItem(e){const t=this.dataSource instanceof RM?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):(this.removeItemFromList(e,t),this.updateBlazorTemplates(!0))}removeItemFromList(e,t){const i=this.curViewDS;let n,s=e instanceof Element?this.getElementUID(e):e;if(n=this.findItemFromDS(t,s,!0),n){let r;r=this.findItemFromDS(n,s);let o,a=i.indexOf(r),l=this.getLiFromObjOrElement(e);this.validateNestedView(l),this.fields.groupBy&&this.curViewDS[a-1]&&i[a-1].isHeader&&1===i[a-1].items.length&&l&&l.previousElementSibling.classList.contains(jM.groupListItem)&&(XA(l.nextElementSibling)||l.nextElementSibling&&l.nextElementSibling.classList.contains(jM.groupListItem))&&(o=l.previousElementSibling),l&&YD(l),o&&YD(o);const c=n.length-1<=0?this.findParent(this.localData,this.fields.id,e=>e===r[this.fields.id],null):null;let h=n.indexOf(r);if(n.splice(h,1),this.setViewDataSource(t),c&&c.parent&&Array.isArray(c.parent[this.fields.child])&&c.parent[this.fields.child].length<=0){const e=this.getLiFromObjOrElement(c.parent);if(e){let t=LM.createListItemFromJson(this.createElement,[c.parent],this.listBaseOption);this.setAttributes(t),e.parentElement.insertBefore(t[0],e),e.parentElement.removeChild(e)}}n.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+jM.listItem))}}validateNestedView(e){const t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(e=>e.toString().toLowerCase()===t);)this.back()}removeMultipleItems(e){if(e.length){for(let t=0;t<e.length;t++)this.removeItem(e[t]);this.updateBlazorTemplates(!0)}}findParent(e,t,i,n){if(e.hasOwnProperty(t)&&!0===i(e[t]))return KA({},e);for(let s=0;s<Object.keys(e).length;s++)if(e[Object.keys(e)[s]]&&"object"==typeof e[Object.keys(e)[s]]){let r=this.findParent(e[Object.keys(e)[s]],t,i,e);if(null!=r)return r.parent||(r.parent=n),r}return null}getModuleName(){return"listview"}requiredModules(){let e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e}getPersistData(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])}};VM([mI("")],UM.prototype,"cssClass",void 0),VM([mI(!1)],UM.prototype,"enableVirtualization",void 0),VM([mI({})],UM.prototype,"htmlAttributes",void 0),VM([mI(!0)],UM.prototype,"enable",void 0),VM([mI([])],UM.prototype,"dataSource",void 0),VM([mI()],UM.prototype,"query",void 0),VM([gI(LM.defaultMappedFields,HM)],UM.prototype,"fields",void 0),VM([mI({effect:"SlideLeft",duration:400,easing:"ease"})],UM.prototype,"animation",void 0),VM([mI("None")],UM.prototype,"sortOrder",void 0),VM([mI(!1)],UM.prototype,"showIcon",void 0),VM([mI(!1)],UM.prototype,"showCheckBox",void 0),VM([mI("Left")],UM.prototype,"checkBoxPosition",void 0),VM([mI("")],UM.prototype,"headerTitle",void 0),VM([mI(!1)],UM.prototype,"showHeader",void 0),VM([mI(!1)],UM.prototype,"enableHtmlSanitizer",void 0),VM([mI("")],UM.prototype,"height",void 0),VM([mI("")],UM.prototype,"width",void 0),VM([mI(null)],UM.prototype,"template",void 0),VM([mI(null)],UM.prototype,"headerTemplate",void 0),VM([mI(null)],UM.prototype,"groupTemplate",void 0),VM([yI()],UM.prototype,"select",void 0),VM([yI()],UM.prototype,"actionBegin",void 0),VM([yI()],UM.prototype,"actionComplete",void 0),VM([yI()],UM.prototype,"actionFailure",void 0),UM=VM([bI],UM);var qM,WM=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let zM,GM,YM,$M,KM=qM=class extends nI{constructor(e,t){super(t,e),this.getHelper=e=>{let t,i=this.getSortableElement(e.sender.target);return!!this.isValidTarget(i,this)&&(this.helper?t=this.helper({sender:i,element:e.element}):(t=i.cloneNode(!0),t.style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),jD([t],["e-sortableclone"]),document.body.appendChild(t),t)},this.onDrag=e=>{this.trigger("drag",{event:e.event,element:this.element,target:e.target});let t=this.getSortableInstance(e.target),i=this.getSortableElement(e.target,t);if((this.isValidTarget(i,t)||e.target.className.indexOf("e-list-group-item")>-1)&&this.curTarget!==i&&(!t.placeHolderElement||t.placeHolderElement!==e.target)){e.target.className.indexOf("e-list-group-item")>-1&&(i=e.target),this.curTarget=i;let n=this.getIndex(t.placeHolderElement,t);n=XA(n)?this.getIndex(this.target):this.getIndex(i,t)<n||!n?n:n-1,t.placeHolderElement=this.getPlaceHolder(i,t);let s=this.getIndex(i,t),r=t.element!==this.element?s:n<s?s+1:s;t.placeHolderElement?(e.target.className.indexOf("e-list-group-item")>-1?t.element.insertBefore(t.placeHolderElement,t.element.children[s]):t.element!==this.element&&r===t.element.childElementCount-1?t.element.appendChild(t.placeHolderElement):t.element.insertBefore(t.placeHolderElement,t.element.children[r]),this.refreshDisabled(n,s,t)):(this.updateItemClass(t),t.element.insertBefore(this.target,t.element.children[r]),this.refreshDisabled(n,s,t),this.curTarget=this.target,this.trigger("drop",{droppedElement:this.target,element:t.element,previousIndex:n,currentIndex:s,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:this.scope}))}if(t=this.getSortableInstance(this.curTarget),XA(i)&&e.target!==t.placeHolderElement)this.isPlaceHolderPresent(t)&&this.removePlaceHolder(t);else{let e;[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(i=>{e=this.getSortableInstance(i),e.element&&e!==t&&this.removePlaceHolder(e)})}},this.onDragStart=e=>{this.target=this.getSortableElement(e.target);let t=!1;this.target.classList.add("e-grabbed"),this.curTarget=this.target,e.helper=document.getElementsByClassName("e-sortableclone")[0],this.trigger("beforeDragStart",{cancel:!1,element:this.element,target:this.target},i=>{i.cancel&&(t=i.cancel,this.onDragStop(e))}),t||this.trigger("dragStart",iO?{event:e.event,element:this.element,target:this.target,bindEvents:e.bindEvents,dragElement:e.dragElement}:{event:e.event,element:this.element,target:this.target})},this.onDragStop=e=>{let t,i,n,s=this.getSortableInstance(this.curTarget);if(t=this.getIndex(this.target),this.isPlaceHolderPresent(s)){let i=this.getIndex(s.placeHolderElement,s);this.trigger("beforeDrop",{previousIndex:t,currentIndex:i,target:e.target,droppedElement:this.target,helper:e.helper,cancel:!1,handled:!1},i=>{if(!i.cancel){if(n=i.handled,this.updateItemClass(s),i.handled){let e=this.target.cloneNode(!0);this.target.classList.remove("e-grabbed"),this.target=e}s.element.insertBefore(this.target,s.placeHolderElement);let r=this.getIndex(this.target,s);t=this===s&&t-r>1?t-1:t,this.trigger("drop",{event:e.event,element:s.element,previousIndex:t,currentIndex:r,target:e.target,helper:e.helper,droppedElement:this.target,scopeName:this.scope,handled:n})}$D(s.placeHolderElement)})}s=this.getSortableInstance(e.target),i=s.element.childElementCount,t=this.getIndex(this.target),s.element===e.target&&this.trigger("beforeDrop",{previousIndex:t,currentIndex:i,target:e.target,droppedElement:this.target,helper:e.helper,cancel:!1},n=>{n.cancel||(this.updateItemClass(s),s.element.appendChild(this.target),this.trigger("drop",{event:e.event,element:s.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:this.target,scopeName:this.scope}))}),this.target.classList.remove("e-grabbed"),this.target=null,this.curTarget=null,$D(e.helper),sI(this.element,UI).intDestroy(e.event)},this.bind()}bind(){this.element.id||(this.element.id=QA("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()}initializeDraggable(){new UI(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo})}getPlaceHolder(e,t){return t.placeHolder?(this.isPlaceHolderPresent(t)&&$D(t.placeHolderElement),t.placeHolderElement=t.placeHolder({element:t.element,grabbedElement:this.target,target:e}),t.placeHolderElement.classList.add("e-sortable-placeholder"),t.placeHolderElement):null}isValidTarget(e,t){return e&&ZA(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")}removePlaceHolder(e){$D(e.placeHolderElement),e.placeHolderElement=null}updateItemClass(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))}getSortableInstance(e){if(e=QD(e,".e-"+this.getModuleName())){let t=sI(e,qM);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this}refreshDisabled(e,t,i){if(i===this){let i,n,s=e<t,r=s?e:t,o=s?t:e;for(;r<=o;)i=this.element.children[r],i.classList.contains("e-disabled")?(n=this.getIndex(i),this.element.insertBefore(i,this.element.children[s?n+2:n-1]),r=s?n+2:n+1):r++}}getIndex(e,t=this){let i;return[].slice.call(t.element.children).forEach((t,n)=>{t===e&&(i=n)}),i}getSortableElement(e,t=this){return QD(e,"."+t.itemClass)}queryPositionInfo(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e}isPlaceHolderPresent(e){return e.placeHolderElement&&!!QD(e.placeHolderElement,"#"+e.element.id)}moveTo(e,t,i){!function(e,t,i,n){let s=[];if(t||(t=e),i&&i.length?i.forEach(t=>{s.push(e.children[t])}):s=[].slice.call(e.children),XA(n))s.forEach(e=>{t.appendChild(e)});else{let e=t.children[n];s.forEach(i=>{t.insertBefore(i,e)})}}(this.element,e,t,i)}destroy(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),sI(this.element,UI).destroy(),super.destroy()}getModuleName(){return"sortable"}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"itemClass":[].slice.call(this.element.children).forEach(i=>{i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)})}}};WM([mI(!1)],KM.prototype,"enableAnimation",void 0),WM([mI(null)],KM.prototype,"itemClass",void 0),WM([mI(null)],KM.prototype,"scope",void 0),WM([mI()],KM.prototype,"helper",void 0),WM([mI()],KM.prototype,"placeHolder",void 0),WM([yI()],KM.prototype,"drag",void 0),WM([yI()],KM.prototype,"beforeDragStart",void 0),WM([yI()],KM.prototype,"dragStart",void 0),WM([yI()],KM.prototype,"beforeDrop",void 0),WM([yI()],KM.prototype,"drop",void 0),KM=qM=WM([bI],KM);let XM,JM,QM=!1;function ZM(e,t,i,n,s){return GM=i+t==="topright"?void 0:s,GM=s,QM=!!n,e?(t||(t="left"),i||(i="top"),$M=e.ownerDocument,YM=e,function(e,t,i){switch(zM=YM.getBoundingClientRect(),t+e){case"topcenter":eL(cL(),i),tL(oL(),i);break;case"topright":eL(lL(),i),tL(oL(),i);break;case"centercenter":eL(cL(),i),tL(rL(),i);break;case"centerright":eL(lL(),i),tL(rL(),i);break;case"centerleft":eL(aL(),i),tL(rL(),i);break;case"bottomcenter":eL(cL(),i),tL(sL(),i);break;case"bottomright":eL(lL(),i),tL(sL(),i);break;case"bottomleft":eL(aL(),i),tL(sL(),i);break;default:case"topleft":eL(aL(),i),tL(oL(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function eL(e,t){t.left=e}function tL(e,t){t.top=e}function iL(){return $M.documentElement.scrollTop||$M.body.scrollTop}function nL(){return $M.documentElement.scrollLeft||$M.body.scrollLeft}function sL(){return QM?zM.bottom:zM.bottom+iL()}function rL(){return oL()+zM.height/2}function oL(){return QM?zM.top:zM.top+iL()}function aL(){return zM.left+nL()}function lL(){return zM.right+nL()-(GM?GM.width:0)}function cL(){return aL()+zM.width/2}function hL(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function dL(e,t){let i=!1,n=!1;return e-CL()<yL()&&(i=!0),t>bL()&&(n=!0),{leftSide:i,rightSide:n}}function uL(e,t){let i=!1,n=!1;return e-SL()<vL()&&(i=!0),t>wL()&&(n=!0),{topSide:i,bottomSide:n}}function pL(){return JM.getBoundingClientRect().width}function fL(){return JM.getBoundingClientRect().height}function mL(){return JM.getBoundingClientRect().left}function gL(){return JM.getBoundingClientRect().top}function vL(){return JM?gL():0}function yL(){return JM?mL():0}function bL(){return JM?CL()+mL()+pL():CL()+EL()}function wL(){return JM?SL()+gL()+fL():SL()+_L()}function SL(){return XM.documentElement.scrollTop||XM.body.scrollTop}function CL(){return XM.documentElement.scrollLeft||XM.body.scrollLeft}function _L(){return window.innerHeight}function EL(){let e=window.innerWidth;return e-(e-(XA(document.documentElement)?0:document.documentElement.offsetWidth))}var TL=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let xL=(()=>{class e extends II{}return TL([mI("left")],e.prototype,"X",void 0),TL([mI("top")],e.prototype,"Y",void 0),e})(),kL=(()=>{let e=class extends NI{constructor(e,t){super(t,e)}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"width":ZD(this.element,{width:tO(e.width)});break;case"height":ZD(this.element,{height:tO(e.height)});break;case"zIndex":ZD(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":let i=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+i).toString()+"px";break;case"offsetY":let n=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+n).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}getModuleName(){return"popup"}resolveCollision(){this.checkCollision()}getPersistData(){return this.addOnPersist([])}destroy(){this.element.classList.remove("e-popup","e-rtl","e-popup-open","e-popup-close"),this.unwireEvents(),super.destroy()}render(){this.element.classList.add("e-popup");let e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=tO(this.width)),"auto"!==this.height&&(e.height=tO(this.height)),ZD(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}wireEvents(){zO.isDevice&&GO.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}wireScrollEvents(){if(this.getRelateToElement())for(let e of this.getScrollableParent(this.getRelateToElement()))GO.add(e,"scroll",this.scrollRefresh,this)}unwireEvents(){zO.isDevice&&GO.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}unwireScrollEvents(){if(this.getRelateToElement())for(let e of this.getScrollableParent(this.getRelateToElement()))GO.remove(e,"scroll",this.scrollRefresh)}getRelateToElement(){let e=""===this.relateTo||XA(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}scrollRefresh(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){let t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}isElementOnViewport(e,t){let i=this.getScrollableParent(e);for(let n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0}isElementVisible(e,t){let i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(XA(this.checkGetBoundingClientRect(t))){let t=window,n={top:t.scrollY,left:t.scrollX,right:t.scrollX+t.outerWidth,bottom:t.scrollY+t.outerHeight},s=ZM(e),r={top:s.top,left:s.left,right:s.left+i.width,bottom:s.top+i.height},o={top:n.bottom-r.top,left:n.right-r.left,bottom:r.bottom-n.top,right:r.right-n.left};return o.top>0&&o.left>0&&o.right>0&&o.bottom>0}{let e=t.getBoundingClientRect();return!(i.bottom<e.top||i.bottom>e.bottom||i.right>e.right||i.left<e.left)}}preRender(){}setEnableRtl(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}setContent(){XA(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))}orientationOnChange(){setTimeout(()=>{this.refreshPosition()},200)}refreshPosition(e,t){XA(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()}reposition(){let e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){let n,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){let t=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=t}else e={left:0,top:0};XA(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")}checkGetBoundingClientRect(e){let t;try{return t=e.getBoundingClientRect(),t}catch(i){return null}}getAnchorPosition(e,t,i,n,s){let r=this.checkGetBoundingClientRect(t),o=this.checkGetBoundingClientRect(e);if(XA(r)||XA(o))return null;let a=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=ZM(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(t=t.parentElement),l=function(e,t){let i=!1,n={left:0,top:0},s=e;if(!e||!t)return n;for(XA(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=s;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(a,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-r.width/2:l.left+="container"===this.targetType?o.width/2-r.width/2:o.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-r.width:l.left+="container"===this.targetType?o.width-r.width:o.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-r.height/2:l.top+="container"===this.targetType?o.height/2-r.height/2:o.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-r.height:l.top+="container"===this.targetType?o.height-r.height:o.height}return l.left+=n,l.top+=s,l}callFlip(e){let t=this.getRelateToElement();!function(e,t,i,n,s,r,o=null,a={X:!0,Y:!0},l){if(!(t&&e&&s&&r&&(a.X||a.Y)))return;let c={TL:null,TR:null,BL:null,BR:null},h={TL:null,TR:null,BL:null,BR:null},d=e.getBoundingClientRect(),u={posX:s,posY:r,offsetX:i,offsetY:n,position:{left:0,top:0}};JM=o,XM=t.ownerDocument,function(e,t,i,n,s){i.position=ZM(e,i.posX,i.posY,n,s),t.TL=ZM(e,"left","top",n,s),t.TR=ZM(e,"right","top",n,s),t.BR=ZM(e,"left","bottom",n,s),t.BL=ZM(e,"right","bottom",n,s)}(t,c,u,l,d),hL(h,u,d),a.X&&function e(t,i,n,s,r,o){let a=dL(i.TL.left,i.TR.left);n.TL.left-CL()<=yL()&&(a.leftSide=!1),n.TR.left>=bL()&&(a.rightSide=!1),(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&(s.posX="right"===s.posX?"left":"right",s.offsetX=s.offsetX+r.width,s.offsetX=-1*s.offsetX,s.position=ZM(t,s.posX,s.posY,!1),hL(i,s,r),o&&e(t,i,n,s,r,!1))}(t,h,c,u,d,!0),a.Y&&c.TL.top>-1&&function e(t,i,n,s,r,o){let a=uL(i.TL.top,i.BL.top);n.TL.top-SL()<=vL()&&(a.topSide=!1),n.BL.top>=wL()&&(a.bottomSide=!1),(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&(s.posY="top"===s.posY?"bottom":"top",s.offsetY=s.offsetY+r.height,s.offsetY=-1*s.offsetY,s.position=ZM(t,s.posX,s.posY,!1,r),hL(i,s,r),o&&e(t,i,n,s,r,!1))}(t,h,c,u,d,!0),function(e,t,i){let n=0,s=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){let t=ZM(e.offsetParent,"left","top",!1,i);n=t.left,s=t.top}e.style.top=t.position.top+t.offsetY-s+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,u,d)}(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)}callFit(e){if(0!==function(e,t=null,i,n){let s=ZM(e,"left","top");i&&(s.left=i),n&&(s.top=n);let r=[];JM=t,XM=e.ownerDocument;let o=e.getBoundingClientRect(),a=s.left,l=s.left+o.width,c=uL(s.top,s.top+o.height),h=dL(a,l);return c.topSide&&r.push("top"),h.rightSide&&r.push("right"),h.leftSide&&r.push("left"),c.bottomSide&&r.push("bottom"),r}(this.element,this.viewPortElement).length)if(XA(this.viewPortElement)){let t=function(e,t=null,i={X:!1,Y:!1},n){if(!i.Y&&!i.X)return{left:0,top:0};let s=e.getBoundingClientRect();if(JM=t,XM=e.ownerDocument,n||(n=ZM(e,"left","top")),i.X){let e=JM?pL():EL(),t=yL(),i=bL(),r=t-n.left,o=n.left+s.width-i;s.width>e?n.left=r>0&&o<=0?i-s.width:o>0&&r<=0?t:r>o?i-s.width:t:r>0?n.left+=r:o>0&&(n.left-=o)}if(i.Y){let e=JM?fL():_L(),t=vL(),i=wL(),r=t-n.top,o=n.top+s.height-i;s.height>e?n.top=r>0&&o<=0?i-s.height:o>0&&r<=0?t:r>o?i-s.height:t:r>0?n.top+=r:o>0&&(n.top-=o)}return n}(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{let t=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement);if(XA(t)||XA(i))return null;e&&!0===e.Y&&(i.top>t.top?this.element.style.top="0px":i.bottom<t.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(t.bottom-i.bottom)+"px")),e&&!0===e.X&&(i.right<t.right?this.element.style.left=parseInt(this.element.style.left,10)-(t.right-i.right)+"px":i.left>t.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-t.left)+"px"))}}checkCollision(){let e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))}show(e,t){if(this.wireEvents(),1e3===this.zIndex||!XA(t)){let e=XA(t)?this.element:t;this.zIndex=AL(e),ZD(this.element,{zIndex:this.zIndex})}e=XA(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(HD([this.element],"e-popup-close"),jD([this.element],"e-popup-open"),this.checkCollision(),HD([this.element],"e-popup-open"),jD([this.element],"e-popup-close")),XA(e)?(HD([this.element],"e-popup-close"),jD([this.element],"e-popup-open"),this.trigger("open")):(e.begin=()=>{this.isDestroyed||(HD([this.element],"e-popup-close"),jD([this.element],"e-popup-open"))},e.end=()=>{this.isDestroyed||this.trigger("open")},new _I(e).animate(this.element))}hide(e){e=XA(e)||"object"!=typeof e?this.hideAnimation:e,XA(e)?(HD([this.element],"e-popup-open"),jD([this.element],"e-popup-close"),this.trigger("close")):(e.end=()=>{this.isDestroyed||(HD([this.element],"e-popup-open"),jD([this.element],"e-popup-close"),this.trigger("close"))},new _I(e).animate(this.element)),this.unwireEvents()}getScrollableParent(e){return this.checkFixedParent(e),function(e,t){let i=getComputedStyle(e),n=[],s=/(auto|scroll)/,r=e.parentElement;for(;r&&"HTML"!==r.tagName;){let e=getComputedStyle(r);"absolute"===i.position&&"static"===e.position||!s.test(e.overflow+e.overflowY+e.overflowX)||n.push(r),r=r.parentElement}return t||n.push(document),n}(e,this.fixedParent)}checkFixedParent(e){let t=e.parentElement;for(;t&&"HTML"!==t.tagName;){let e=getComputedStyle(t);"fixed"===e.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,XA(this.element.offsetParent)&&"fixed"===e.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}};return TL([mI("auto")],e.prototype,"height",void 0),TL([mI("auto")],e.prototype,"width",void 0),TL([mI(null)],e.prototype,"content",void 0),TL([mI("container")],e.prototype,"targetType",void 0),TL([mI(null)],e.prototype,"viewPortElement",void 0),TL([mI({X:"none",Y:"none"})],e.prototype,"collision",void 0),TL([mI("")],e.prototype,"relateTo",void 0),TL([gI({},xL)],e.prototype,"position",void 0),TL([mI(0)],e.prototype,"offsetX",void 0),TL([mI(0)],e.prototype,"offsetY",void 0),TL([mI(1e3)],e.prototype,"zIndex",void 0),TL([mI(!1)],e.prototype,"enableRtl",void 0),TL([mI("reposition")],e.prototype,"actionOnScroll",void 0),TL([mI(null)],e.prototype,"showAnimation",void 0),TL([mI(null)],e.prototype,"hideAnimation",void 0),TL([yI()],e.prototype,"open",void 0),TL([yI()],e.prototype,"close",void 0),TL([yI()],e.prototype,"targetExitViewport",void 0),e=TL([bI],e),e})();function AL(e){let t=e.parentElement,i=[];for(;t&&"BODY"!==t.tagName;){let e=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==e&&"static"!==n&&i.push(e),t=t.parentElement}let n=[];for(let a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){let e=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),t=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==e&&"static"!==t&&n.push(e)}n.push("999");let s=[];if(!XA(e.parentElement)&&"BODY"!==e.parentElement.tagName){let t=[].slice.call(e.parentElement.children);for(let e=0;e<t.length;e++){let i=document.defaultView.getComputedStyle(t[e],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t[e],null).getPropertyValue("position");"auto"!==i&&"static"!==n&&s.push(i)}}let r=i.concat(n,s),o=Math.max.apply(Math,r)+1;return o>2147483647?2147483647:o}let OL,DL,IL,RL,PL,ML,LL,NL,VL,BL=["north-west","north","north-east","west","east","south-west","south","south-east"],FL=0,jL=0,HL=0,UL=0,qL=0,WL=0,zL=["e-restrict-left"],GL=null,YL=null,$L=null,KL=!0,XL=0,JL=!0;function QL(e){let t;return XA(e)||(t="string"==typeof e?document.querySelector(e):e),t}function ZL(e){XA(e)&&(e=this);let t=OL.querySelectorAll(".e-resize-handle");for(let i=0;i<t.length;i++)DL=t[i],GO.add(DL,"mousedown",tN,e),GO.add(DL,"msie"===zO.info.name?"pointerdown":"touchstart",sN,e)}function eN(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function tN(e){if(e.preventDefault(),OL=e.target.parentElement,nN(),qL=e.pageX,WL=e.pageY,e.target.classList.add("e-focused-handle"),!XA(GL)&&(VL=this,!0===GL(e,VL)))return;let t=XA(LL)?document:LL;GO.add(t,"mousemove",rN,this),GO.add(document,"mouseup",iN,this);for(let i=0;i<zL.length;i++)KL=!OL.classList.contains(zL[i])}function iN(e){let t="msie"===zO.info.name?"pointermove":"touchmove",i="msie"===zO.info.name?"pointerup":"touchend",n=XA(LL)?document:LL;GO.remove(n,"mousemove",rN),GO.remove(n,t,rN),GO.remove(n,"msie"===zO.info.name?"pointerdown":"touchstart",rN),XA(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),XA($L)||(VL=this,$L(e,VL)),GO.remove(document,"mouseup",iN),GO.remove(document,i,iN)}function nN(){FL=parseFloat(getComputedStyle(OL,null).getPropertyValue("width").replace("px","")),jL=parseFloat(getComputedStyle(OL,null).getPropertyValue("height").replace("px","")),HL=OL.getBoundingClientRect().left,UL=OL.getBoundingClientRect().top}function sN(e){OL=e.target.parentElement,nN();let t=e.touches?e.changedTouches[0]:e;if(qL=t.pageX,WL=t.pageY,!XA(GL)&&(VL=this,!0===GL(e,VL)))return;let i="msie"===zO.info.name?"pointermove":"touchmove",n="msie"===zO.info.name?"pointerup":"touchend",s=XA(LL)?document:LL;GO.add(s,i,rN,this),GO.add(document,n,iN)}function rN(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?DL=e.target:XA(document.body.querySelector(".e-focused-handle"))||(DL=document.body.querySelector(".e-focused-handle")),!XA(DL)){let t="";for(let e=0;e<BL.length;e++)DL.classList.contains("e-"+BL[e])&&(t=BL[e]);switch(XA(YL)||(VL=this,YL(e,VL)),t){case"south":aN(e);break;case"north":lN(e);break;case"west":cN(e);break;case"east":hN(e);break;case"south-east":aN(e),hN(e);break;case"south-west":aN(e),cN(e);break;case"north-east":lN(e),hN(e);break;case"north-west":lN(e),cN(e)}}}function oN(e){return e.getBoundingClientRect()}function aN(e){let t,i=document.documentElement.clientHeight,n=!1,s=(e.touches?e.changedTouches[0]:e).pageY,r=oN(OL);XA(LL)||(t=oN(LL)),XA(LL)?XA(LL)&&(i-s>=0||r.top<0)&&(n=!0):n=!0;let o=jL+(s-WL);o=o>IL?o:IL;let a=0;XA(LL)||(a=t.top);let l=XA(LL)?0:LL.offsetHeight-LL.clientHeight,c=r.top-a-l/2;if(c=c<0?0:c,r.top>0&&c+o>RL){if(n=!1,OL.classList.contains("e-resize-viewport"))return;return void(OL.style.height=RL-parseInt(c.toString(),10)+"px")}let h=0;if(n){r.top<0&&i+(r.height+r.top)>0&&(h=r.top,o+h<=30&&(o=r.height-(r.height+r.top)+30)),o+r.top>=RL&&(OL.style.height=r.height+(i-(r.height+r.top))+"px");let e=XA(LL)?h:c;o>=IL&&o+e<=RL&&(OL.style.height=o+"px")}}function lN(e){let t,i=!1,n="mouse"===eN(e.type)?e.pageY:e.touches[0].pageY,s=oN(OL);XA(LL)||(t=oN(LL)),(!XA(LL)&&s.top-t.top>0||XA(LL)&&n>0)&&(i=!0);let r=jL-(n-WL);if(oN(OL).bottom+r>RL&&(i=!1,OL.style.height=RL-oN(OL).bottom+"px"),i&&r>=IL&&r<=RL){let e=0;XA(LL)||(e=t.top);let i=UL-e+(n-WL);i=i>0?i:1,OL.style.height=r+"px",OL.style.top=i+"px"}}function cN(e){let t,i=document.documentElement.clientWidth,n=!1;XA(LL)||(t=oN(LL));let s="mouse"===eN(e.type)?e.pageX:e.touches[0].pageX,r=oN(OL),o=XA(LL)?0:LL.offsetWidth-LL.clientWidth,a=XA(LL)?0:t.left,l=XA(LL)?0:t.width;XA(NL)&&(XA(LL)?NL=i:(NL=r.left-a-o/2+r.width,NL+=l-o-NL)),(!XA(LL)&&r.left-t.left+r.width+(t.right-r.right)-o<=ML||XA(LL)&&s>=0)&&(n=!0);let c=FL-(s-qL);if(KL&&(c=c>NL?NL:c),n&&c>=PL&&c<=ML){let e=0;XA(LL)||(e=t.left);let i=HL-e+(s-qL);i=i>0?i:1,c!==XL&&JL&&(OL.style.width=c+"px"),KL&&(OL.style.left=i+"px",JL=1!==i)}XL=c}function hN(e){let t,i=document.documentElement.clientWidth,n=!1;XA(LL)||(t=oN(LL));let s=(e.touches?e.changedTouches[0]:e).pageX,r=oN(OL);(!XA(LL)&&(r.left-t.left+r.width<ML||r.right-t.left>r.width)||XA(LL)&&i-s>0)&&(n=!0);let o=FL+(s-qL),a=0;if(XA(LL)||(a=t.left),r.left-a+o>ML){if(n=!1,OL.classList.contains("e-resize-viewport"))return;OL.style.width=ML-(r.left-a)+"px"}n&&o>=PL&&o<=ML&&(OL.style.width=o+"px")}function dN(){let e=OL.querySelectorAll(".e-resize-handle");for(let t=0;t<e.length;t++)YD(e[t])}var uN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let pN=(()=>{class e extends II{}return uN([mI()],e.prototype,"buttonModel",void 0),uN([mI("Button")],e.prototype,"type",void 0),uN([yI()],e.prototype,"click",void 0),e})(),fN=(()=>{class e extends II{}return uN([mI("Fade")],e.prototype,"effect",void 0),uN([mI(400)],e.prototype,"duration",void 0),uN([mI(0)],e.prototype,"delay",void 0),e})(),mN=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}render(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}preRender(){if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=e=>{this.hide(e)},this.dlgOverlayClickEventHandler=e=>{this.trigger("overlayClick",e),this.focusContent()},this.l10n=new KI("dialog",{close:"Close"},this.locale),this.checkPositionData(),XA(this.target)){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}}isNumberValue(e){return/^[-+]?\d*\.?\d+$/.test(e)}checkPositionData(){if(!XA(this.position)){if(!XA(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!XA(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}}getEle(e,t){let i=void 0;for(let n=0;n<e.length;n++)if(e[n].classList.contains(t)){i=e[n];break}return i}getMinHeight(){let e="0px",t="0px";XA(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);let i=this.getEle(this.element.children,"e-footer-content");XA(i)||(t=getComputedStyle(i).height);let n=parseInt(e.slice(0,e.indexOf("p")),10),s=parseInt(t.slice(0,t.indexOf("p")),10);return IL=n+30+s,n+30+s}onResizeStart(e,t){return t.trigger("resizeStart",e),e.cancel}onResizing(e,t){t.trigger("resizing",e)}onResizeComplete(e,t){t.trigger("resizeStop",e)}setResize(){if(this.enableResize){if(this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");let e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,i=this.enableRtl?"south-west":"south-east";this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){GL=e.resizeBegin,YL=e.resizing,$L=e.resizeComplete,OL=QL(e.element),LL=QL(e.boundary);let t=e.direction.split(" ");for(let i=0;i<t.length;i++){let e=FD("div",{className:"e-icons e-resize-handle e-"+t[i]});OL.appendChild(e)}IL=e.minHeight,PL=e.minWidth,ML=e.maxWidth,RL=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?ZL(e.proxy):ZL()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this})}else dN(),this.element.classList.remove(this.isModal?"e-restrict-left":"e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")}keyDown(e){if(9===e.keyCode&&this.isModal){let t;if(XA(this.btnObj)||(t=this.btnObj[this.btnObj.length-1]),XA(this.btnObj)&&!XA(this.ftrTemplateContent)){let e=this.ftrTemplateContent.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');t={element:e[e.length-1]}}XA(t)||document.activeElement!==t.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),XA(t)||t.element.focus())}let t=document.activeElement,i=["input","textarea"].indexOf(t.tagName.toLowerCase())>-1,n=!1;if(i||(n=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),13===e.keyCode&&!e.ctrlKey&&"textarea"!==t.tagName.toLowerCase()&&i&&!XA(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===t.tagName.toLowerCase()||n)&&!XA(this.primaryButtonEle)){let t;this.buttons.some((e,i)=>{t=i;let n=e.buttonModel;return!XA(n)&&!0===n.isPrimary})&&"function"==typeof this.buttons[t].click&&setTimeout(()=>{this.buttons[t].click.call(this,e)})}}initialize(){XA(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||jD([this.element],"e-dialog"),zO.isDevice&&jD([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}initRender(){if(this.initialRender=!0,this.isBlazorServerRender()||KD(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&XA(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&XA(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||XA(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||XA(this.footerTemplate)?XA(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(XA(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!XA(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(KD(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&XA(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(let e=0,t=this.dlgContainer.children;e<t.length;e++)t[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=t[e])}if(!0!==this.element.classList.contains("e-alert-dialog")&&!0!==this.element.classList.contains("e-confirm-dialog")&&!XA(this.element.parentElement)){let e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}XA(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new kL(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:e=>{let t={container:this.isModal?this.dlgContainer:this.element,element:this.element,target:this.target,preventFocus:!1};this.enableResize&&this.resetResizeIcon(),this.trigger("open",t,e=>{e.preventFocus||this.focusContent()})},close:e=>{this.isModal&&jD([this.dlgOverlay],"e-fade"),this.unBindEvent(this.element),this.isModal&&(this.dlgContainer.style.display="none"),this.trigger("close",this.closeArgs);let t=document.activeElement;XA(t)||XA(t.blur)||t.blur(),XA(this.storeActiveElement)||XA(this.storeActiveElement.focus)||this.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(jD([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}resetResizeIcon(){let e=this.getMinHeight();if(this.targetEle.offsetHeight<e){let t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));XA(t)||(t.style.bottom="-"+e.toString()+"px")}}setOverlayZindex(e){let t;t=XA(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}positionChange(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}setPopupPosition(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}setAllowDragging(){this.dragObj=new UI(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:e=>{this.trigger("dragStart",e,e=>{})},dragStop:e=>{this.isModal&&(XA(this.position)||this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.element.style.position="relative"),this.trigger("dragStop",e),this.element.classList.remove("e-restrict-left")},drag:e=>{this.trigger("drag",e)}}),XA(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}setButton(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(let e=0;e<this.buttons.length;e++){let t=XA(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}let e;for(let t=0,i=this.element.children;t<i.length;t++)i[t].classList.contains("e-footer-content")&&(e=i[t].querySelectorAll("button"));for(let t=0;t<this.buttons.length;t++)this.isBlazorServerRender()||(this.btnObj[t]=new bR(this.buttons[t].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!XA(this.ftrTemplateContent)&&"function"==typeof this.buttons[t].click&&e.length>0&&GO.add(e[t],"click",this.buttons[t].click,this),this.isBlazorServerRender()||XA(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}setContent(){KD(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(XA(this.content)||""===this.content)&&this.initialRender||("string"!=typeof this.content?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),XA(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!zO.isIE||""!==this.element.style.width||XA(this.width)||(this.element.style.width=tO(this.width)),this.setMaxHeight())}setTemplate(e,t){let i,n,s;n=t.classList.contains("e-dlg-header")?this.element.id+"header":t.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",XA(e.outerHTML)?"string"!=typeof e?(i=bD(e),s=e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);let r=[];if(!XA(i)){let e=!0;for(let t of i({},null,null,n,e))r.push(t);zD([].slice.call(r),t)}}sanitizeHelper(e){if(this.enableHtmlSanitizer){let t=nR.beforeSanitize();KA(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!XA(t.helper)?e=t.helper(e):t.cancel||(e=nR.serializeValue(t,e))}return e}setMaxHeight(){if(!this.allowMaxHeight)return;let e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!XA(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,zO.isIE&&"auto"===this.height&&!XA(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}setEnableRTL(){this.isBlazorServerRender()||(this.enableRtl?jD([this.element],"e-rtl"):HD([this.element],"e-rtl")),XA(this.element.querySelector(".e-resize-handle"))||(dN(),this.setResize())}setTargetContent(){if(XA(this.content)||""===this.content){let e=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(e=>{8!==e.nodeType&&this.innerContentElement.appendChild(e)}))}}setHeader(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle),KD(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])}setFooterTemplate(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||XA(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent),this.element.appendChild(this.ftrTemplateContent)}createHeaderContent(){XA(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))}renderCloseIcon(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new bR({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),XA(this.headerContent)?(this.createHeaderContent(),WD([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):WD([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)}closeIconTitle(){this.l10n.setLocale(this.locale);let e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}setCSSClass(e){this.cssClass&&jD([this.element],this.cssClass.split(" ")),e&&HD([this.element],e.split(" "))}setIsModal(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),jD([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}getValidFocusNode(e){let t;for(let i=0;i<e.length;i++)if(t=e[i],(t.clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;return t}focusableElements(e){if(!XA(e)){let t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null}getAutoFocusNode(e){let t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(XA(n)){if(n=this.focusableElements(this.contentEle),!XA(n))return n;if(!XA(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t}disableElement(e,t){let i=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}focusContent(){let e=this.getAutoFocusNode(this.element);(XA(e)?this.element:e).focus(),this.bindEvent(this.element)}bindEvent(e){GO.add(e,"keydown",this.keyDown,this)}unBindEvent(e){GO.remove(e,"keydown",this.keyDown)}updateSanitizeContent(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}isBlazorServerRender(){return!1}getModuleName(){return"dialog"}onPropertyChanged(e,t){if(this.element.classList.contains("e-dialog"))for(let i of Object.keys(e))switch(i){case"content":XA(this.content)||""===this.content?XA(this.contentEle)||(YD(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),XA(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||XA(this.header)?this.headerEle&&(YD(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||XA(this.footerTemplate)){if(!this.ftrTemplateContent)return;YD(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!XA(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!XA(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():YD(this.closeIcon):(YD(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":ZD(this.element,{height:tO(e.height)});break;case"width":ZD(this.element,{width:tO(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":let i=this.buttons.length;XA(this.ftrTemplateContent)||this.isBlazorServerRender()||(YD(this.ftrTemplateContent),this.ftrTemplateContent=null);for(let e=0;e<i;e++)XA(this.buttons[e].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!XA(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){let e=XA(t.position.X)?this.position.X:t.position.X,i=XA(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+e+"-"+i)&&this.dlgContainer.classList.remove("e-dlg-"+e+"-"+i)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}setTarget(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}updateIsModal(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",XA(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(HD([this.element],"e-dlg-modal"),HD([document.body],["e-dlg-target","e-scroll-disabled"]),YD(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&GO.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}setzIndex(e,t){let i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=AL(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}getPersistData(){return this.addOnPersist([])}destroy(){if(this.isDestroyed)return;let e=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(HD([this.targetEle],["e-dlg-target","e-scroll-disabled"]),this.element.classList.contains("e-dlg-fullscreen")&&HD([document.body],["e-dlg-target","e-scroll-disabled"]),this.isModal&&HD([XA(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.unWireEvents(),!XA(this.btnObj))for(let t=0;t<this.btnObj.length;t++)this.btnObj[t].destroy();if(XA(this.dragObj)||this.dragObj.destroy(),this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),HD([this.element],["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left","e-dlg-fullscreen","e-device"]),XA(this.cssClass)||""===this.cssClass||HD([this.element],this.cssClass.split(" ")),XA(this.refElement)||XA(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),YD(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(YD(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),YD(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!XA(this.element.children))for(let t=0;t<=this.element.children.length;t++)t-=t,YD(this.element.children[t]);for(let t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.isBlazorServerRender()?this.isDestroyed=!0:super.destroy()}wireEvents(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&GO.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&GO.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}unWireEvents(){if(this.showCloseIcon&&GO.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&GO.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!XA(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(let e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&GO.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}refreshPosition(){this.popupObj.refreshPosition()}show(e){if(this.element.classList.contains("e-dialog")&&(!this.element.classList.contains("e-popup-open")||!XA(e))){XA(e)||this.fullScreen(e);let t={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",t,e=>{if(!e.cancel){this.element.style.maxHeight!==t.maxHeight&&(this.allowMaxHeight=!1,this.element.style.maxHeight=t.maxHeight),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&!XA(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",HD([this.dlgOverlay],"e-fade"),XA(this.targetEle)?jD([document.body],["e-dlg-target","e-scroll-disabled"]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",jD([this.targetEle],["e-dlg-target","e-scroll-disabled"])));let e={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},i=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(i,!0),ZD(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(e),this.dialogOpen=!0;let n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!0,this.preventVisibility=!0,this.isProtectedOnChange=n}})}}hide(e){if(this.element.classList.contains("e-dialog")&&this.preventVisibility){let t={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};this.closeArgs=t,this.trigger("beforeClose",t,e=>{if(!e.cancel){this.isModal&&(XA(this.targetEle)?HD([document.body],["e-dlg-target","e-scroll-disabled"]):HD([this.targetEle],["e-dlg-target","e-scroll-disabled"]));let e={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(e),this.dialogOpen=!1;let t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.visible=!1,this.preventVisibility=!1,this.isProtectedOnChange=t}})}}fullScreen(e){if(e){jD([this.element],"e-dlg-fullscreen");let e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=XA(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,jD([document.body],["e-dlg-target","e-scroll-disabled"]),this.allowDragging&&!XA(this.dragObj)&&this.dragObj.destroy()}else HD([this.element],"e-dlg-fullscreen"),HD([document.body],["e-dlg-target","e-scroll-disabled"]),this.allowDragging&&!XA(this.headerContent)&&this.setAllowDragging();return e}getButtons(e){return XA(e)?this.btnObj:this.btnObj[e]}};return uN([mI("")],e.prototype,"content",void 0),uN([mI(!0)],e.prototype,"enableHtmlSanitizer",void 0),uN([mI(!1)],e.prototype,"showCloseIcon",void 0),uN([mI(!1)],e.prototype,"isModal",void 0),uN([mI("")],e.prototype,"header",void 0),uN([mI(!0)],e.prototype,"visible",void 0),uN([mI(!1)],e.prototype,"enableResize",void 0),uN([mI("auto")],e.prototype,"height",void 0),uN([mI("")],e.prototype,"minHeight",void 0),uN([mI("100%")],e.prototype,"width",void 0),uN([mI("")],e.prototype,"cssClass",void 0),uN([mI(1e3)],e.prototype,"zIndex",void 0),uN([mI(null)],e.prototype,"target",void 0),uN([mI("")],e.prototype,"footerTemplate",void 0),uN([mI(!1)],e.prototype,"allowDragging",void 0),uN([vI([{}],pN)],e.prototype,"buttons",void 0),uN([mI(!0)],e.prototype,"closeOnEscape",void 0),uN([gI({},fN)],e.prototype,"animationSettings",void 0),uN([gI({X:"center",Y:"center"},xL)],e.prototype,"position",void 0),uN([yI()],e.prototype,"created",void 0),uN([yI()],e.prototype,"open",void 0),uN([yI()],e.prototype,"beforeSanitizeHtml",void 0),uN([yI()],e.prototype,"beforeOpen",void 0),uN([yI()],e.prototype,"close",void 0),uN([yI()],e.prototype,"beforeClose",void 0),uN([yI()],e.prototype,"dragStart",void 0),uN([yI()],e.prototype,"dragStop",void 0),uN([yI()],e.prototype,"drag",void 0),uN([yI()],e.prototype,"overlayClick",void 0),uN([yI()],e.prototype,"resizeStart",void 0),uN([yI()],e.prototype,"resizing",void 0),uN([yI()],e.prototype,"resizeStop",void 0),uN([yI()],e.prototype,"destroyed",void 0),e=uN([bI],e),e})();var gN;!function(e){function t(e,t){let i=new mN(e);return i.appendTo(t),i}function i(e,t){return e.header=XA(t.title)?"Information":t.title,e.content=XA(t.content)?"":t.content,e.isModal=!!XA(t.isModal)||t.isModal,e.showCloseIcon=!XA(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!XA(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!XA(t.closeOnEscape)&&t.closeOnEscape,e.position=XA(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=XA(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=XA(t.cssClass)?"":t.cssClass,e.zIndex=XA(t.zIndex)?1e3:t.zIndex,e.open=XA(t.open)?null:t.open,e}function n(e,t,i){let n=i;return XA(t.text)||(n.buttonModel.content=t.text),XA(t.icon)||(n.buttonModel.iconCss=t.icon),XA(t.cssClass)||(n.buttonModel.cssClass=t.cssClass),XA(t.click)||(n.click=t.click),n}e.alert=function(e){let s,r=FD("div",{className:"e-alert-dialog"});return document.body.appendChild(r),s=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){let i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return XA(t.okButton)?e.buttons=i:e.buttons[0]=n(0,t.okButton,i[0]),e}(t,e),t}(e),r),s.close=()=>{e&&e.close&&e.close.apply(s),s.destroy(),s.element.classList.contains("e-dlg-modal")?(s.element.parentElement.remove(),s.target.classList.remove("e-scroll-disabled")):s.element.remove()},s},e.confirm=function(e){let s,r=FD("div",{className:"e-confirm-dialog"});return document.body.appendChild(r),s=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e){let t={buttons:[]};return t=i(t,e),t=function(e,t){let i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},s={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=XA(t.okButton)?i:n(0,t.okButton,i),e.buttons[1]=XA(t.cancelButton)?s:n(0,t.cancelButton,s),e}(t,e),t}(e),r),s.close=()=>{e&&e.close&&e.close.apply(s),s.destroy(),s.element.classList.contains("e-dlg-modal")?(s.element.parentElement.remove(),s.target.classList.remove("e-scroll-disabled")):s.element.remove()},s}}(gN||(gN={}));let vN={};function yN(e,t){let i=[],n=e,s=t,r=!1,o=1;return function e(t){i.push(t),(t!==s||1===o)&&(t<=n&&t>1&&!r?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),r=!0):t<8&&r?8===(t=parseFloat((t+.2).toFixed(2)))&&(r=!1):t<=8&&!r&&(t=parseFloat((t-.2).toFixed(2))),++o,e(t))}(n),i}function bN(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function wN(e,t,i,n){let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",i);let r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-circle");let o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),e.insertBefore(s,e.firstChild),s.appendChild(r),s.appendChild(o)}function SN(e,t,i,n){let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("class",n),s.setAttribute("id",t);let r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-circle"),e.insertBefore(s,e.firstChild),s.appendChild(r)}function CN(e,t,i,n){let s=2*e,r=t.querySelector("svg."+n),o=r.querySelector("path.e-path-circle"),a=_N(s),l=s/2+"px";r.setAttribute("viewBox","0 0 "+s+" "+s),r.style.width=r.style.height=s+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function(e,t){let i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"===i&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",EN(s,a,1,75)+""))}function _N(e){return.1*e}function EN(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function TN(e,t,i,n){let s=(e/=n)*e,r=s*e;return t+i*(6*r*s+-15*s*s+10*r)}function xN(e,t,i){let n=e,s=e,r=2*e,o=t.querySelector("."+i),a=o.querySelector(".e-path-circle"),l=o.querySelector(".e-path-arc"),c=r/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,s,e)),l.setAttribute("d",function(e,t,i,n,s){let r=kN(e,t,i,45),o=kN(e,t,i,315);return["M",r.x,r.y,"A",i,i,0,0,0,o.x,o.y].join(" ")}(n,s,e)),o.setAttribute("viewBox","0 0 "+r+" "+r),o.style.transformOrigin=c+" "+c+" "+c,o.style.width=o.style.height=r+"px"}function kN(e,t,i,n){let s=(n-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function AN(e,t){let i;if(e&&(i=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&i){let n,s=i.querySelector(".e-spinner-inner");if(n=t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show"),n){let e=i.querySelector("svg");if(XA(e))return;let n=e.getAttribute("id");switch(vN[n].isAnimate=!t,vN[n].type){case"Material":t?clearTimeout(vN[n].timeOut):function(e,t,i){let n={};vN[t].timeOut=0,n[t]=function(e,t,i,n){return{radius:t,count:0,previousId:0}}(0,i),function e(t){!function(t,i,n,s,r,o,a){let l=++a.globalInfo[a.uniqueID].previousId,c=(new Date).getTime(),h=parseFloat(2*a.globalInfo[a.uniqueID].radius+""),d=_N(h),u=-90*(a.globalInfo[a.uniqueID].count||0);!function t(i){let s=Math.max(0,Math.min((new Date).getTime()-c,1333));!function(e,t){if(!XA(t.querySelector("svg.e-spin-material"))&&!XA(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){let i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",EN(h,d,e,75)+""),i.setAttribute("transform","rotate("+u+" "+h/2+" "+h/2+")")}}(n(s,1,148,1333),i.container),l===i.globalInfo[i.uniqueID].previousId&&s<1333?vN[i.uniqueID].timeOut=setTimeout(t.bind(null,i),1):e(i)}(a)}(0,0,TN,0,0,0,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(s,n,vN[n].radius);break;case"Bootstrap":t?clearTimeout(vN[n].timeOut):function(e){let t=e.querySelector("svg.e-spin-bootstrap").getAttribute("id");for(let n=1;n<=8;n++)i(e.getElementsByClassName("e-path-circle_"+(8===n?0:n))[0],n,0,yN(n,n),t);function i(e,t,i,n,s){let r=0;!function t(i){vN[s].isAnimate&&(++r,e.setAttribute("r",i+""),r>=n.length&&(r=0),vN[s].timeOut=setTimeout(t.bind(null,n[r]),18))}(t)}}(s)}}t?eI(i,["e-spin-hide"],["e-spin-show"]):eI(i,["e-spin-show"],["e-spin-hide"]),e=null}}var ON;!function(e){let t;function i(e){n(e.floatLabelType,e.element),e.element.addEventListener("focus",(function(){let e=d(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.add("e-input-focus")})),e.element.addEventListener("blur",(function(){let e=d(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.remove("e-input-focus")})),e.element.addEventListener("input",()=>{n(t,e.element)})}function n(e,t){let i=t.value;""===i||XA(i)?"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input"):t.parentElement.classList.add("e-valid-input")}function s(){let e=d(this).getElementsByClassName("e-float-text")[0];XA(e)||(jD([e],"e-label-top"),e.classList.contains("e-label-bottom")&&HD([e],"e-label-bottom"))}function r(){let e=d(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){let t=e.getElementsByClassName("e-float-text")[0];XA(t)||(t.classList.contains("e-label-top")&&HD([t],"e-label-top"),jD([t],"e-label-bottom"))}}function o(e){e.addEventListener("focus",s),e.addEventListener("blur",r)}function a(e,t,i){let n,s,r=XA(i)?FD:i;if("Auto"===e.floatLabelType&&o(e.element),XA(t.container)?(t.container=f(e,"e-float-input","e-float-custom-tag","div",r),e.element.parentNode.insertBefore(t.container,e.element)):(XA(e.customTag)||t.container.classList.add("e-float-custom-tag"),t.container.classList.add("e-float-input")),n=r("span",{className:"e-float-line"}),s=r("label",{className:"e-float-text"}),XA(e.element.id)||""===e.element.id||(s.id="label_"+e.element.id.replace(/ /g,"_"),KD(e.element,{"aria-labelledby":s.id})),XA(e.element.placeholder)||""===e.element.placeholder||(s.innerText=m(e.element.placeholder),e.element.removeAttribute("placeholder")),XA(e.properties)||XA(e.properties.placeholder)||""===e.properties.placeholder||(s.innerText=m(e.properties.placeholder)),s.innerText||t.container.classList.add("e-no-float-label"),t.container.classList.contains("e-float-icon-left")){let i=t.container.querySelector(".e-input-in-wrap");i.appendChild(e.element),i.appendChild(n),i.appendChild(s)}else t.container.appendChild(e.element),t.container.appendChild(n),t.container.appendChild(s);h(e.element.value,s),"Always"===e.floatLabelType&&(s.classList.contains("e-label-bottom")&&HD([s],"e-label-bottom"),jD([s],"e-label-top")),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",t=>{h(e.element.value,s)}),e.element.addEventListener("blur",t=>{h(e.element.value,s)})),XA(e.element.getAttribute("id"))||s.setAttribute("for",e.element.getAttribute("id"))}function l(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function c(e,t){e?HD([t],"e-clear-icon-hide"):jD([t],"e-clear-icon-hide")}function h(e,t){e?(jD([t],"e-label-top"),t.classList.contains("e-label-bottom")&&HD([t],"e-label-bottom")):(t.classList.contains("e-label-top")&&HD([t],"e-label-top"),jD([t],"e-label-bottom"))}function d(e){let t=XA(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function u(e,t,i){t.addEventListener("click",i=>{e.classList.contains("e-disabled")||e.readOnly||(i.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",jD([t],"e-clear-icon-hide"))}),e.addEventListener("input",i=>{c(e.value,t)}),e.addEventListener("focus",i=>{c(e.value,t)}),e.addEventListener("blur",e=>{setTimeout(()=>{jD([t],"e-clear-icon-hide")},200)})}function p(e,t){if(d(e).classList.contains("e-float-input")&&"Auto"===t){let t=d(e).getElementsByClassName("e-float-text")[0];h(e.value,t)}}function f(e,t,i,n,s){let r,o=XA(s)?FD:s;return XA(e.customTag)?r=o(n,{className:t}):(r=o(e.customTag,{className:t}),r.classList.add(i)),r.classList.add("e-control-wrapper"),r}function m(e){let t="";if(!XA(e)&&""!==e){let i=document.createElement("span");i.innerHTML='<input  placeholder="'+e+'"/>',t=i.children[0].placeholder}return t}function g(e,t,i){XA(i)||""===i||HD(t,i.split(" ")),XA(e)||""===e||jD(t,e.split(" "))}function v(e,t){let i;e=m(e),i=d(t),i.classList.contains("e-float-input")?XA(e)||""===e?(i.classList.add("e-no-float-label"),i.getElementsByClassName("e-float-text")[0].textContent=""):(i.getElementsByClassName("e-float-text")[0].textContent=e,i.classList.remove("e-no-float-label"),t.removeAttribute("placeholder")):XA(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):KD(t,{placeholder:e,"aria-placeholder":e})}function y(e,t,i){e?KD(t,{readonly:""}):t.removeAttribute("readonly"),XA(i)||p(t,i)}function b(e,t){e?jD(t,"e-rtl"):HD(t,"e-rtl")}function w(e,t,i,n){let s={disabled:"disabled","aria-disabled":"true"},r=!XA(n);e?(t.classList.remove("e-disabled"),C(s,t),r&&HD([n],"e-disabled")):(t.classList.add("e-disabled"),_(s,t),r&&jD([n],"e-disabled")),XA(i)||p(t,i)}function S(e,t,i,n,s){let r=XA(s)?FD:s;e?i.clearButton=function(e,t,i,n){let s=(XA(n)?FD:n)("span",{className:"e-clear-icon"}),r=t.container;return XA(i)?(t.container.classList.contains("e-float-input")?t.container.querySelector(".e-float-text"):e).insertAdjacentElement("afterend",s):r.appendChild(s),!XA(r)&&r.classList.contains("e-float-input")&&jD([r],"e-input-group"),jD([s],"e-clear-icon-hide"),u(e,s),s.setAttribute("aria-label","close"),s}(t,i,n,r):(i.clearButton.remove(),i.clearButton=null)}function C(e,t){for(let i of Object.keys(e)){let e;e=d(t),"disabled"===i&&t.classList.remove("e-disabled"),"disabled"===i&&e.classList.contains("e-input-group")&&e.classList.remove("e-disabled"),"placeholder"===i&&e.classList.contains("e-float-input")?e.getElementsByClassName("e-float-text")[0].textContent="":t.removeAttribute(i)}}function _(e,t){for(let i of Object.keys(e)){let n;n=d(t),"disabled"===i&&t.classList.add("e-disabled"),"disabled"===i&&n.classList.contains("e-input-group")&&n.classList.add("e-disabled"),"placeholder"===i&&n.classList.contains("e-float-input")?n.getElementsByClassName("e-float-text")[0].textContent=e[i]:t.setAttribute(i,e[i])}}function E(e,t,i){let n=[];n.push(i);let s=XA(i)?t.querySelectorAll(".e-input-group-icon"):n;if(e&&s.length>0)for(let r=0;r<s.length;r++)s[r].addEventListener("mousedown",T,!1),s[r].addEventListener("mouseup",x,!1);else if(s.length>0)for(let r=0;r<s.length;r++)s[r].removeEventListener("mousedown",T,this),s[r].removeEventListener("mouseup",x,this)}function T(){let e=this.parentElement;for(;!e.classList.contains("e-input-group");)e=e.parentElement;var t;(t=e).classList.contains("e-disabled")||t.querySelector("input").readOnly||this.classList.add("e-input-btn-ripple")}function x(){let e=this;setTimeout(()=>{e.classList.remove("e-input-btn-ripple")},500)}function k(e,t){let i=t("span",{className:e});return i.classList.add("e-input-group-icon"),i}function A(e,t,i,n){let s=XA(n)?FD:n,r=k(e,s);t.classList.add("e-float-icon-left");let o=t.querySelector(".e-input-in-wrap");if(XA(o)){o=s("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(o,i);let e=t.querySelectorAll(i.tagName+" ~ *");o.appendChild(i);for(let t=0;t<e.length;t++)o.appendChild(e[t])}return o.parentNode.insertBefore(r,o),t.classList.contains("e-input-group")||t.classList.add("e-input-group"),E(!0,t,r),r}function O(e,t,i){let n=k(e,XA(i)?FD:i);return t.classList.contains("e-input-group")||t.classList.add("e-input-group"),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(n),E(!0,t,n),n}e.createInput=function(e,n){let s=XA(n)?FD:n,r={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,XA(e.floatLabelType)||"Never"===e.floatLabelType?(r.container=f(e,"e-input-group","e-input-custom-tag","span",s),e.element.parentNode.insertBefore(r.container,e.element),jD([e.element],"e-input"),r.container.appendChild(e.element)):a(e,r,s),i(e),XA(e.properties)||XA(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(S(e.properties.showClearButton,e.element,r,!0,s),r.clearButton.setAttribute("role","button"),r.container.classList.contains("e-float-input")&&jD([r.container],"e-input-group")),!XA(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(let t=0;t<e.buttons.length;t++)r.buttons.push(O(e.buttons[t],r.container,s));return XA(e.element)||"TEXTAREA"!==e.element.tagName||jD([r.container],"e-multi-line-input"),r=function(e,t){if(!XA(e.properties))for(let i of Object.keys(e.properties))switch(i){case"cssClass":g(e.properties.cssClass,[t.container]),l(e.floatLabelType,t.container);break;case"enabled":w(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":b(e.properties.enableRtl,[t.container]);break;case"placeholder":v(e.properties.placeholder,e.element);break;case"readonly":y(e.properties.readonly,e.element)}return t}(e,r),r},e.bindInitialEvent=i,e.wireFloatingEvents=o,e.wireClearBtnEvents=u,e.setValue=function(e,t,i,s){if(t.value=e,XA(i)||"Auto"!==i||p(t,i),!XA(s)&&s){let e=d(t);if(!XA(e)){let i=e.getElementsByClassName("e-clear-icon")[0];t.value&&e.classList.contains("e-input-focus")?HD([i],"e-clear-icon-hide"):jD([i],"e-clear-icon-hide")}}n(i,t)},e.setCssClass=g,e.setWidth=function(e,t){"number"==typeof e?t.style.width=tO(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:tO(e))},e.setPlaceholder=v,e.setReadonly=y,e.setEnableRtl=b,e.setEnabled=w,e.setClearButton=S,e.removeAttributes=C,e.addAttributes=_,e.removeFloating=function(e){let t=e.container;if(!XA(t)&&t.classList.contains("e-float-input")){let e=t.querySelector("textarea")?t.querySelector("textarea"):t.querySelector("input"),n=t.querySelector(".e-float-text").textContent,o=null!==t.querySelector(".e-clear-icon");YD(t.querySelector(".e-float-line")),YD(t.querySelector(".e-float-text")),eI(t,["e-input-group"],["e-float-input"]),(i=e).removeEventListener("focus",s),i.removeEventListener("blur",r),KD(e,{placeholder:n}),e.classList.add("e-input"),o||"INPUT"!==e.tagName||e.removeAttribute("required")}var i},e.addFloating=function(e,i,n,s){let r=XA(s)?FD:s,o=QD(e,".e-input-group");if(t=i,"Never"!==i){let t=o.tagName;t="DIV"!==t&&"SPAN"!==t?t:null;let s={element:e,floatLabelType:i,customTag:t,properties:{placeholder:n}},l=o.querySelector(".e-clear-icon"),c={container:o};e.classList.remove("e-input"),a(s,c,r);let h=o.classList.contains("e-float-icon-left");if(XA(l)&&(l=h?o.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):o.querySelector(".e-input-group-icon")),XA(l))h&&(l=o.querySelector(".e-input-group-icon")),XA(l)&&o.classList.remove("e-input-group");else{let t=o.querySelector(".e-float-line"),i=o.querySelector(".e-float-text"),n=h?o.querySelector(".e-input-in-wrap"):o;n.insertBefore(e,l),n.insertBefore(t,l),n.insertBefore(i,l)}}l(i,e.parentElement)},e.setRipple=function(e,t){for(let i=0;i<t.length;i++)E(e,t[i].container)},e.addIcon=function(e,t,i,n,s){let r="string"==typeof t?t.split(","):t;if("append"===e.toLowerCase())for(let o of r)O(o,i,s);else for(let o of r)A(o,i,n,s)},e.prependSpan=A,e.appendSpan=O}(ON||(ON={}));var DN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const IN="e-input-group-icon",RN=new RegExp("^(-)?(\\d*)$"),PN=["title","style","class"];let MN=(()=>{let e=class extends NI{constructor(e,t){super(e,t),this.isVue=!1,this.preventChange=!1,this.numericOptions=e}preRender(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;let e=WA("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),HD([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=QD(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;let t=this.createElement("input"),i=0;for(;i<this.element.attributes.length;i++)"id"!==this.element.attributes[i].nodeName&&(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,zA("ej2_instances",e,this.element)}KD(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new KI("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null!==this.placeholder||this.updatePlaceholder()}render(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.renderComplete())}checkAttributes(e){let t=e?XA(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];for(let i of t)if(!XA(this.element.getAttribute(i)))switch(i){case"disabled":if(XA(this.numericOptions)||void 0===this.numericOptions.enabled||e){let t="disabled"!==this.element.getAttribute(i)&&""!==this.element.getAttribute(i)&&"true"!==this.element.getAttribute(i);this.setProperties({enabled:t},!e)}break;case"readonly":if(XA(this.numericOptions)||void 0===this.numericOptions.readonly||e){let t="readonly"===this.element.getAttribute(i)||""===this.element.getAttribute(i)||"true"===this.element.getAttribute(i);this.setProperties({readonly:t},!e)}break;case"placeholder":(XA(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(XA(this.numericOptions)||void 0===this.numericOptions.value||e){let t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));this.setProperties(zA(i,t,{}),!e)}break;case"min":if(XA(this.numericOptions)||void 0===this.numericOptions.min||e){let t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(zA(i,t,{}),!e)}break;case"max":if(XA(this.numericOptions)||void 0===this.numericOptions.max||e){let t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(zA(i,t,{}),!e)}break;case"step":if(XA(this.numericOptions)||void 0===this.numericOptions.step||e){let t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));null===t||isNaN(t)||this.setProperties(zA(i,t,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(i);break;case"name":this.inputName=this.element.getAttribute(i);break;default:let t=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(i));(null!==t&&!isNaN(t)||"value"===i)&&this.setProperties(zA(i,t,{}),!0)}}updatePlaceholder(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}initCultureFunc(){this.instance=new OO(this.locale)}initCultureInfo(){this.cultureInfo.format=this.format,null!==WA("currency",this)&&(zA("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}createWrapper(){let e=this.cssClass;XA(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));let t=ON.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&KD(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),KD(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&KD(this.container,{style:this.inputStyle})}updateDataAttribute(e){let t={};if(e)t=this.htmlAttributes;else for(let i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(let i of Object.keys(t))0===i.indexOf("data")&&this.hiddenInput.setAttribute(i,t[i])}updateHTMLAttrToElement(){if(!XA(this.htmlAttributes))for(let e of Object.keys(this.htmlAttributes))PN.indexOf(e)<0&&this.element.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){ON.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))}getNumericValidClassList(e){let t=e;return XA(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t}updateHTMLAttrToWrapper(){if(!XA(this.htmlAttributes))for(let e of Object.keys(this.htmlAttributes))if(PN.indexOf(e)>-1)if("class"===e){let t=this.getNumericValidClassList(this.htmlAttributes[e]);""!==t&&jD([this.container],t.split(" "))}else if("style"===e){let t=this.container.getAttribute(e);t=XA(t)?this.htmlAttributes[e]:t+this.htmlAttributes[e],this.container.setAttribute(e,t)}else this.container.setAttribute(e,this.htmlAttributes[e])}setElementWidth(e){XA(e)||("number"==typeof e?this.container.style.width=tO(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:tO(e)))}spinBtnCreation(){this.spinDown=ON.appendSpan(IN+" e-spin-down",this.container,this.createElement),KD(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=ON.appendSpan(IN+" e-spin-up",this.container,this.createElement),KD(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}validateMinMax(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),KD(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}formattedValue(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)}validateStep(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}action(e,t){this.isInteract=!0;let i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)}checkErrorClass(){this.isValidState?HD([this.container],"e-error"):jD([this.container],"e-error"),KD(this.element,{"aria-invalid":this.isValidState?"false":"true"})}bindClearEvent(){this.showClearButton&&GO.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)}clear(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",QD(this.element,"form")){let e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}resetFormHandler(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}setSpinButton(){XA(this.spinDown)||KD(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),XA(this.spinUp)||KD(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}wireEvents(){GO.add(this.element,"focus",this.focusHandler,this),GO.add(this.element,"blur",this.focusOutHandler,this),GO.add(this.element,"keydown",this.keyDownHandler,this),GO.add(this.element,"keyup",this.keyUpHandler,this),GO.add(this.element,"input",this.inputHandler,this),GO.add(this.element,"keypress",this.keyPressHandler,this),GO.add(this.element,"change",this.changeHandler,this),GO.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&GO.add(this.formEle,"reset",this.resetFormHandler,this))}wireSpinBtnEvents(){GO.add(this.spinUp,zO.touchStartEvent,this.mouseDownOnSpinner,this),GO.add(this.spinDown,zO.touchStartEvent,this.mouseDownOnSpinner,this),GO.add(this.spinUp,zO.touchEndEvent,this.mouseUpOnSpinner,this),GO.add(this.spinDown,zO.touchEndEvent,this.mouseUpOnSpinner,this),GO.add(this.spinUp,zO.touchMoveEvent,this.touchMoveOnSpinner,this),GO.add(this.spinDown,zO.touchMoveEvent,this.touchMoveOnSpinner,this)}unwireEvents(){GO.remove(this.element,"focus",this.focusHandler),GO.remove(this.element,"blur",this.focusOutHandler),GO.remove(this.element,"keyup",this.keyUpHandler),GO.remove(this.element,"input",this.inputHandler),GO.remove(this.element,"keydown",this.keyDownHandler),GO.remove(this.element,"keypress",this.keyPressHandler),GO.remove(this.element,"change",this.changeHandler),GO.remove(this.element,"paste",this.pasteHandler),this.formEle&&GO.remove(this.formEle,"reset",this.resetFormHandler)}unwireSpinBtnEvents(){GO.remove(this.spinUp,zO.touchStartEvent,this.mouseDownOnSpinner),GO.remove(this.spinDown,zO.touchStartEvent,this.mouseDownOnSpinner),GO.remove(this.spinUp,zO.touchEndEvent,this.mouseUpOnSpinner),GO.remove(this.spinDown,zO.touchEndEvent,this.mouseUpOnSpinner),GO.remove(this.spinUp,zO.touchMoveEvent,this.touchMoveOnSpinner),GO.remove(this.spinDown,zO.touchMoveEvent,this.touchMoveOnSpinner)}changeHandler(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);let t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)}raiseChangeEvent(e){if(this.prevValue!==this.value){let t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),$A(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}}pasteHandler(){if(!this.enabled||this.readonly)return;let e=this.element.value;setTimeout(()=>{this.numericRegex().test(this.element.value)||this.setElementValue(e)})}preventHandler(){let e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(()=>{if(this.element.selectionStart>0){let t,i=this.element.selectionStart,n=this.element.selectionStart-1,s=0,r=this.element.value.split("");t=WA("decimal",DO(this.locale)).charCodeAt(0)," "===this.element.value[n]&&this.element.selectionStart>0&&!e?(XA(this.prevVal)?this.element.value=this.element.value.trim():0!==n?this.element.value=this.prevVal:0===n&&(this.element.value=this.element.value.trim()),this.element.setSelectionRange(n,n)):isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&45!==this.element.value[this.element.selectionStart-1].charCodeAt(0)?(r.indexOf(this.element.value[this.element.selectionStart-1])!==r.lastIndexOf(this.element.value[this.element.selectionStart-1])&&this.element.value[this.element.selectionStart-1].charCodeAt(0)===t||this.element.value[this.element.selectionStart-1].charCodeAt(0)!==t)&&(this.element.value=this.element.value.substring(0,n)+this.element.value.substring(i,this.element.value.length),this.element.setSelectionRange(n,n),isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&this.element.selectionStart>0&&this.element.value.length&&this.preventHandler()):isNaN(parseFloat(this.element.value[this.element.selectionStart-2]))&&this.element.selectionStart>1&&45!==this.element.value[this.element.selectionStart-2].charCodeAt(0)&&(r.indexOf(this.element.value[this.element.selectionStart-2])!==r.lastIndexOf(this.element.value[this.element.selectionStart-2])&&this.element.value[this.element.selectionStart-2].charCodeAt(0)===t||this.element.value[this.element.selectionStart-2].charCodeAt(0)!==t)&&(this.element.setSelectionRange(n,n),this.nextEle=this.element.value[this.element.selectionStart],this.cursorPosChanged=!0,this.preventHandler()),!0===this.cursorPosChanged&&this.element.value[this.element.selectionStart]===this.nextEle&&isNaN(parseFloat(this.element.value[this.element.selectionStart-1]))&&(this.element.setSelectionRange(this.element.selectionStart+1,this.element.selectionStart+1),this.cursorPosChanged=!1,this.nextEle=null),""===this.element.value.trim()&&this.element.setSelectionRange(s,s),this.element.selectionStart>0&&45===this.element.value[this.element.selectionStart-1].charCodeAt(0)&&this.element.selectionStart>1&&(this.element.value=XA(this.prevVal)?this.element.value:this.prevVal,this.element.setSelectionRange(this.element.selectionStart,this.element.selectionStart)),this.prevVal=this.element.value}})}keyUpHandler(e){if(!this.enabled||this.readonly)return;(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&zO.isDevice&&this.preventHandler();let t=this.instance.getNumberParser({format:"n"})(this.element.value);if(t=null===t||isNaN(t)?null:t,this.hiddenInput.value=t||0===t?t.toString():null,QD(this.element,"form")){let e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}inputHandler(e){if(!this.enabled||this.readonly)return;let t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||t)&&zO.isDevice&&this.preventHandler(),this.isVue){let t=this.instance.getNumberParser({format:"n"})(this.element.value),i=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),n={event:e,value:null===t||isNaN(t)?null:t,previousValue:null===i||isNaN(i)?null:i};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",n)}}keyDownHandler(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action("increment",e);break;case 40:e.preventDefault(),this.action("decrement",e)}}performAction(e,t,i){(null===e||isNaN(e))&&(e=0);let n="increment"===i?e+t:e-t;return n=this.correctRounding(e,t,n),this.strictMode?this.trimValue(n):n}correctRounding(e,t,i){let n=new RegExp("[,.](.*)"),s=(e.toString(),t.toString(),n.test(e.toString())),r=n.test(t.toString());if(s||r){let o=s?n.exec(e.toString())[0].length:0,a=r?n.exec(t.toString())[0].length:0,l=Math.max(o,a);return this.roundValue(i,l)}return i}roundValue(e,t){t=t||0;let i=Math.pow(10,t);return Math.round(e*=i)/i}updateValue(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),(!this.isVue||this.isVue&&!this.preventChange)&&this.raiseChangeEvent(t)}updateCurrency(e,t){zA(e,t,this.cultureInfo),this.updateValue(this.value)}changeValue(e){if(e||0===e){let t;t=this.getNumberOfDecimals(e),this.setProperties({value:this.roundNumber(e,t)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()}modifyText(){if(this.value||0===this.value){let e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),KD(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}setElementValue(e,t){ON.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}validateState(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}getNumberOfDecimals(e){let t,i=new RegExp("[eE][-+]?([0-9]+)"),n=e.toString();if(i.test(n)){let t=i.exec(n);XA(t)||(n=e.toFixed(Math.min(parseInt(t[1],10),20)))}let s=n.split(".")[1];return t=s&&s.length?s.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t}formatNumber(){let e;return e=this.getNumberOfDecimals(this.value),this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)}trimValue(e){return e>this.max?this.max:e<this.min?this.min:e}roundNumber(e,t){let i=e,n=t||0,s=i.toString().split("e");i=Math.round(Number(s[0]+"e"+(s[1]?Number(s[1])+n:n)));let r=i.toString().split("e");return i=Number(r[0]+"e"+(r[1]?Number(r[1])-n:-n)),Number(i.toFixed(n))}cancelEvent(e){return e.preventDefault(),!1}keyPressHandler(e){if(!this.enabled||this.readonly)return!0;if(!zO.isDevice&&"11.0"===zO.info.version&&13===e.keyCode){let t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;let t=String.fromCharCode(e.which),i=this.element.value;return i=i.substring(0,this.element.selectionStart)+t+i.substring(this.element.selectionEnd),!!this.numericRegex().test(i)||(e.preventDefault(),e.stopPropagation(),!1)}numericRegex(){let e=WA("decimal",DO(this.locale)),t="*";return"."===e&&(e="\\"+e),0===this.decimals&&this.validateDecimalOnType?RN:(this.decimals&&this.validateDecimalOnType&&(t="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+e+"\\d"+t+")?)|("+e+"\\d"+t+")))?$"))}mouseWheel(e){let t;e.preventDefault(),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t>0?this.action("increment",e):t<0&&this.action("decrement",e),this.cancelEvent(e)}focusHandler(e){if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,HD([this.container],"e-error"),this.prevValue=this.value,this.value||0===this.value){let e=this.formatNumber();this.setElementValue(e),this.isPrevFocused||(zO.isDevice||"11.0"!==zO.info.version?setTimeout(()=>{this.element.setSelectionRange(0,e.length)},zO.isDevice&&zO.isIos?600:0):this.element.setSelectionRange(0,e.length))}zO.isDevice||GO.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}focusOutHandler(e){if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),zO.isDevice){let e=this.element.value;this.element.focus(),this.isPrevFocused=!1;let t=this.element;setTimeout(()=>{this.setElementValue(e,t)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);let e=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(e),zO.isDevice||GO.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(QD(this.element,"form")){let e=this.element.nextElementSibling,t=document.createEvent("FocusEvent");t.initEvent("focusout",!1,!0),e.dispatchEvent(t)}}}mouseDownOnSpinner(e){if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!this.getElementData(e))return;this.getElementData(e);let t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";GO.add(t,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(()=>{this.isCalled=!0,this.action(i,e)},150),GO.add(document,"mouseup",this.mouseUpClick,this)}touchMoveOnSpinner(e){document.elementFromPoint(e.clientX,e.clientY).classList.contains(IN)||clearInterval(this.timeOut)}mouseUpOnSpinner(e){if(this.isPrevFocused&&(this.element.focus(),zO.isDevice||(this.isPrevFocused=!1)),zO.isDevice||e.preventDefault(),!this.getElementData(e))return;let t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";if(GO.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,GO.remove(document,"mouseup",this.mouseUpClick),QD(this.element,"form")){let e=this.element.nextElementSibling,t=document.createEvent("KeyboardEvent");t.initEvent("keyup",!1,!0),e.dispatchEvent(t)}}getElementData(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}floatLabelTypeUpdate(){ON.removeFloating(this.inputWrapper);let e=this.hiddenInput;this.hiddenInput.remove(),ON.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])}mouseUpClick(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,GO.remove(this.spinUp,"mouseleave",this.mouseUpClick),GO.remove(this.spinDown,"mouseleave",this.mouseUpClick)}increment(e=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"increment")),this.raiseChangeEvent()}decrement(e=this.step){this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"decrement")),this.raiseChangeEvent()}destroy(){this.unwireEvents();{YD(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),YD(this.spinUp),YD(this.spinDown));let e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"];for(let t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),YD(this.container),super.destroy()}}getText(){return this.element.value}focusIn(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),jD([this.container],["e-input-focus"]))}focusOut(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),HD([this.container],["e-input-focus"]))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"width":this.setElementWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":ON.setEnabled(e.enabled,this.element);break;case"enableRtl":ON.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":ON.setReadonly(e.readonly,this.element),this.readonly?KD(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0);break;case"placeholder":ON.setPlaceholder(e.placeholder,this.element);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.updateValue(e.value),this.isVue&&this.preventChange&&(this.preventChange=!1);break;case"min":case"max":zA(i,WA(i,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ON.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":let n=WA(i,e);this.setProperties({currencyCode:n},!0),this.updateCurrency(i,n);break;case"currencyCode":let s=WA(i,e);this.setProperties({currency:s},!0),this.updateCurrency("currency",s);break;case"format":zA(i,WA(i,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}updateClearButton(e){ON.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}updateSpinButton(e){e.showSpinButton?this.spinBtnCreation():(YD(this.spinUp),YD(this.spinDown))}getModuleName(){return"numerictextbox"}};return DN([mI("")],e.prototype,"cssClass",void 0),DN([mI(null)],e.prototype,"value",void 0),DN([mI(-Number.MAX_VALUE)],e.prototype,"min",void 0),DN([mI(Number.MAX_VALUE)],e.prototype,"max",void 0),DN([mI(1)],e.prototype,"step",void 0),DN([mI(null)],e.prototype,"width",void 0),DN([mI(null)],e.prototype,"placeholder",void 0),DN([mI({})],e.prototype,"htmlAttributes",void 0),DN([mI(!0)],e.prototype,"showSpinButton",void 0),DN([mI(!1)],e.prototype,"readonly",void 0),DN([mI(!0)],e.prototype,"enabled",void 0),DN([mI(!1)],e.prototype,"showClearButton",void 0),DN([mI(!1)],e.prototype,"enablePersistence",void 0),DN([mI("n2")],e.prototype,"format",void 0),DN([mI(null)],e.prototype,"decimals",void 0),DN([mI(null)],e.prototype,"currency",void 0),DN([mI(null)],e.prototype,"currencyCode",void 0),DN([mI(!0)],e.prototype,"strictMode",void 0),DN([mI(!1)],e.prototype,"validateDecimalOnType",void 0),DN([mI("Never")],e.prototype,"floatLabelType",void 0),DN([yI()],e.prototype,"created",void 0),DN([yI()],e.prototype,"destroyed",void 0),DN([yI()],e.prototype,"change",void 0),DN([yI()],e.prototype,"focus",void 0),DN([yI()],e.prototype,"blur",void 0),e=DN([bI],e),e})();var LN,NN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let VN={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};var BN=function(e){return e[e.Message=0]="Message",e[e.Label=1]="Label",e}({});let FN=(()=>{let e=LN=class extends nI{constructor(e,t){super(t,e),this.validated=[],this.errorRules=[],this.allowSubmit=!1,this.required="required",this.infoElement=null,this.inputElement=null,this.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",this.localyMessage={},this.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===this.rules&&(this.rules={}),this.l10n=new KI("formValidator",this.defaultMessages,this.locale),this.locale&&this.localeFunc(),TO.on("notifyExternalChange",this.afterLocalization,this),e="string"==typeof e?XD(e,document):e,null!=this.element&&(this.element.setAttribute("novalidate",""),this.inputElements=JD(this.selectQuery,this.element),this.createHTML5Rules(),this.wireEvents())}addRules(e,t){e&&(this.rules.hasOwnProperty(e)?KA(this.rules[e],t,{}):this.rules[e]=t)}removeRules(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(XA(this.rules[e]&&t))return;for(let i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}}validate(e){let t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter(t=>t.name===e).length;this.errorRules=[];for(let i of t)this.validateRules(i);return 0===this.errorRules.length}reset(){this.element.reset(),this.clearForm()}getInputElement(e){return this.inputElement=XD('[name="'+e+'"]',this.element),this.inputElement}destroy(){this.reset(),this.unwireEvents(),this.rules={};let e=JD("."+this.errorClass+", ."+this.validClass,this.element);for(let t of e)YD(t);super.destroy(),TO.off("notifyExternalChange",this.afterLocalization)}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"locale":this.localeFunc()}}localeFunc(){for(let e of Object.keys(this.defaultMessages)){this.l10n.setLocale(this.locale);let t=this.l10n.getConstant(e);this.localyMessage[e]=t}}getModuleName(){return"formValidator"}afterLocalization(e){this.locale=e.locale,this.localeFunc()}refresh(){this.unwireEvents(),this.inputElements=JD(this.selectQuery,this.element),this.wireEvents()}clearForm(){this.errorRules=[],this.validated=[];let e=JD(this.selectQuery,this.element);for(let t of e){let e=t;e.removeAttribute("aria-invalid"),e.classList.remove(this.errorClass),e.name.length>0&&(this.getInputElement(e.name),this.getErrorElement(e.name),this.hideMessage(e.name)),e.classList.remove(this.validClass)}}createHTML5Rules(){let e=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],t=["hidden","email","url","date","number","tel"];for(let i of this.inputElements){let n={};for(let s of e)if(null!==i.getAttribute(s))switch(s){case"required":this.defRule(i,n,s,i.required);break;case"data-validation":s=i.getAttribute(s),this.defRule(i,n,s,!0);break;case"type":-1!==t.indexOf(i.type)&&this.defRule(i,n,i.type,!0);break;case"rangeLength":case"range":this.defRule(i,n,s,JSON.parse(i.getAttribute(s)));break;case"equalTo":let e=i.getAttribute(s);this.defRule(i,n,s,e);break;default:"true"===i.getAttribute("data-val")?this.annotationRule(i,n,s,i.getAttribute(s)):this.defRule(i,n,s,i.getAttribute(s))}0!==Object.keys(n).length&&this.addRules(i.name,n)}}annotationRule(e,t,i,n){let s=i.split("-"),r=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],o=s[s.length-1],a=s[s.length-2];if(-1!==r.indexOf(o))switch(o){case"required":this.defRule(e,t,"required",n);break;case"creditcard":this.defRule(e,t,"creditcard",n);break;case"phone":this.defRule(e,t,"tel",n)}else if(-1!==r.indexOf(a))switch(a){case"maxlength":this.defRule(e,t,"maxLength",n);break;case"minlength":this.defRule(e,t,"minLength",n);break;case"range":let s=e.getAttribute("data-val-range-min"),r=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[s,r]);break;case"equalto":let o=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",o[o.length-1]);break;case"regex":this.defRule(e,t,"regex",n)}}defRule(e,t,i,n){let s,r=e.getAttribute("data-"+i+"-message"),o=e.getAttribute("data-val-"+i);this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),s=this.getErrorMessage(this.rules[e.name][i],i)),r?n=[n,r]:o?n=[n,o]:s&&(n=[n,s]),t[i]=n}wireEvents(){for(let e of this.inputElements)LN.isCheckable(e)?GO.add(e,"click",this.clickHandler,this):"SELECT"===e.tagName?GO.add(e,"change",this.changeHandler,this):(GO.add(e,"focusout",this.focusOutHandler,this),GO.add(e,"keyup",this.keyUpHandler,this));GO.add(this.element,"submit",this.submitHandler,this),GO.add(this.element,"reset",this.resetHandler,this)}unwireEvents(){for(let e of this.inputElements)GO.clearEvents(e);GO.remove(this.element,"submit",this.submitHandler),GO.remove(this.element,"reset",this.resetHandler)}focusOutHandler(e){this.trigger("focusout",e);let t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))}keyUpHandler(e){this.trigger("keyup",e);let t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)}clickHandler(e){this.trigger("click",e);let t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}changeHandler(e){this.trigger("change",e),this.validate(e.target.name)}submitHandler(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()}resetHandler(){this.clearForm()}validateRules(e){if(!this.rules[e])return;let t=Object.keys(this.rules[e]),i=!1,n=!1,s=t.indexOf("validateHidden"),r=t.indexOf("hidden");if(this.getInputElement(e),-1!==r&&(i=!0),-1!==s&&(n=!0),!i||i&&n){-1!==s&&t.splice(s,1),-1!==r&&t.splice(r-1,1),this.getErrorElement(e);for(let i of t){let t=this.getErrorMessage(this.rules[e][i],i),n={name:e,message:t},s={inputName:e,element:this.inputElement,message:t};if(!this.isValid(e,i)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(n),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(n):this.createErrorElement(e,n.message,this.inputElement),s.errorElement=this.infoElement,s.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,s),this.trigger("validationComplete",s),"required"===i&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),s.status="success",this.trigger("validationComplete",s)}}}optionalValidationStatus(e,t){this.rules[e][this.required]||this.inputElement.value.length||XA(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))}isValid(e,t){let i=this.rules[e][t],n=this.rules[e][t],s={value:this.inputElement.value,param:i instanceof Array&&"string"==typeof i[1]?i[0]:i,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",s),n&&"function"==typeof n[0]?n[0].call(this,{element:this.inputElement,value:this.inputElement.value}):LN.isCheckable(this.inputElement)?"required"!==t||JD("input[name="+e+"]:checked",this.element).length>0:LN.checkValidator[t](s)}getErrorMessage(e,t){let i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t],n=i.match(/{(\d)}/g);if(!XA(n))for(let s=0;s<n.length;s++)i=i.replace(n[s],e instanceof Array?e[s]:e);return i}createErrorElement(e,t,i){let n=FD(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});if(this.errorOption===BN.Message&&(n.classList.remove(this.errorClass),n.classList.add("e-message"),n=FD(this.errorContainer,{className:this.errorClass,innerHTML:n.outerHTML})),n.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(n);else if(!0===i.hasAttribute("data-msg-containerid")){let e=i.getAttribute("data-msg-containerid");this.element.querySelector("#"+e).appendChild(n)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,n):this.inputElement.parentNode.insertBefore(n,this.inputElement.nextSibling);n.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)}getErrorElement(e){return this.infoElement=XD(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=XD(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement}removeErrorRules(e){for(let t=0;t<this.errorRules.length;t++)this.errorRules[t].name===e&&this.errorRules.splice(t,1)}showMessage(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)}hideMessage(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}checkRequired(e){this.rules[e][this.required]||this.inputElement.value.length||XA(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))}static isCheckable(e){let t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)}};return e.checkValidator={required:e=>isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime()),email:e=>VN.EMAIL.test(e.value),url:e=>VN.URL.test(e.value),dateIso:e=>VN.DATE_ISO.test(e.value),tel:e=>VN.PHONE.test(e.value),creditcard:e=>VN.CREDITCARD.test(e.value),number:e=>!isNaN(Number(e.value))&&-1===e.value.indexOf(" "),digits:e=>VN.DIGITS.test(e.value),maxLength:e=>e.value.length<=e.param,minLength:e=>e.value.length>=e.param,rangeLength:e=>{let t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:e=>{let t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:e=>!isNaN(new Date(e.value).getTime()),max:e=>isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param,min:e=>{if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){let t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:e=>new RegExp(e.param).test(e.value),equalTo:e=>{let t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},NN([mI("")],e.prototype,"locale",void 0),NN([mI("e-hidden")],e.prototype,"ignore",void 0),NN([mI()],e.prototype,"rules",void 0),NN([mI("e-error")],e.prototype,"errorClass",void 0),NN([mI("e-valid")],e.prototype,"validClass",void 0),NN([mI("label")],e.prototype,"errorElement",void 0),NN([mI("div")],e.prototype,"errorContainer",void 0),NN([mI(BN.Label)],e.prototype,"errorOption",void 0),NN([yI()],e.prototype,"focusout",void 0),NN([yI()],e.prototype,"keyup",void 0),NN([yI()],e.prototype,"click",void 0),NN([yI()],e.prototype,"change",void 0),NN([yI()],e.prototype,"submit",void 0),NN([yI()],e.prototype,"validationBegin",void 0),NN([yI()],e.prototype,"validationComplete",void 0),NN([yI()],e.prototype,"customPlacement",void 0),e=LN=NN([bI],e),e})();var jN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let HN=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}preRender(){this.browser=zO.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=zO.isDevice,this.customStep=!0;let e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=QA("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")}render(){this.touchModule=new ZI(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),GO.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}setScrollState(){XA(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}initialize(){let e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");let i=this.element,n=[].slice.call(i.children);for(let s of n)e.appendChild(s);t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"hScroll"}destroy(){let e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove("e-scroll-device");let t=JD(".e-"+e.id+"_nav.e-scroll-nav",e),i=JD(".e-scroll-overlay",e);[].slice.call(i).forEach(e=>{YD(e)});for(let n of[].slice.call(this.scrollItems.children))e.appendChild(n);this.uniqueId&&this.element.removeAttribute("id"),YD(this.scrollEle),t.length>0&&(YD(t[0]),XA(t[1])||YD(t[1])),GO.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){let t=JD(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(t=>{t.setAttribute("tabindex",e?"-1":"0")})}createOverlay(e){let t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s=this.createElement("div",{id:t.concat("_right"),className:n}),r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});s.appendChild(r);let o=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(s),e.insertBefore(o,e.firstChild),this.eventBinding([s])}createNavIcon(e){let t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");let s=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),o=this.createElement("div",{id:t.concat("_left"),className:r+" e-overlay"});o.setAttribute("aria-disabled","true");let a=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});o.appendChild(a),n.appendChild(s),e.appendChild(n),e.insertBefore(o,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),o.classList.add("e-ie-align")),this.eventBinding([n,o])}onKeyPress(e){if("Enter"===e.key){let t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(e=>{new ZI(e,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),e.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("keyup",this.onKeyUp.bind(this)),e.addEventListener("mouseup",this.repeatScroll.bind(this)),e.addEventListener("touchend",this.repeatScroll.bind(this)),e.addEventListener("contextmenu",e=>{e.preventDefault()}),GO.add(e,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,"e-scroll-nav")?t.firstElementChild:t;let i=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{i()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){let n=this.element,s=t.classList;s.contains("e-scroll-nav")&&(s=t.querySelector(".e-nav-arrow").classList),this.contains(n,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?s.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):s.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}swipeHandler(e){let t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;let n=.5,s=()=>{let r=Math.sin(n);r<=0?window.cancelAnimationFrame(r):("Left"===e.swipeDirection?i.scrollLeft+=t*r:"Right"===e.swipeDirection&&(i.scrollLeft-=t*r),n-=.5,window.requestAnimationFrame(s))};s()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call(JD(".e-scroll-overlay",this.element)).forEach(t=>{e-=t.offsetWidth});let n=()=>{let i,s;this.contains(this.element,"e-rtl")&&this.browserCheck?(i=-e,s=-10):(i=e,s=10),i<10?window.cancelAnimationFrame(s):(this.scrollUpdating(s,t),e-=s,window.requestAnimationFrame(n))};n()}touchHandler(e){let t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)}arrowDisabling(e,t){if(this.isDevice){let i=(XA(e)?t:e).querySelector(".e-nav-arrow");XA(e)?eI(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):eI(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollHandler(e){let t=e.target,i=t.offsetWidth,n=this.element,s=this.element.querySelector(".e-scroll-left-nav"),r=this.element.querySelector(".e-scroll-right-nav"),o=this.element.querySelector(".e-scroll-left-overlay"),a=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector(".e-scroll-right-overlay"),a=this.element.querySelector(".e-scroll-left-overlay")),o.style.width=l<40?l+"px":"40px",a.style.width=t.scrollWidth-Math.ceil(i+l)<40?t.scrollWidth-Math.ceil(i+l)+"px":"40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(s,r):this.arrowDisabling(r,s);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,s):this.arrowDisabling(s,r);else{let e=this.element.querySelector(".e-scroll-nav.e-overlay");e&&(e.classList.remove("e-overlay"),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}};return jN([mI(null)],e.prototype,"scrollStep",void 0),e=jN([bI],e),e})();var UN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let qN=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}preRender(){this.browser=zO.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=zO.isDevice,this.customStep=!0;let e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=QA("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")}render(){this.touchModule=new ZI(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),GO.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),GO.add(this.element,"wheel",this.wheelEventHandler,this)}setScrollState(){XA(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}initialize(){let e=FD("div",{className:"e-vscroll-content"}),t=FD("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");let i=this.element,n=[].slice.call(i.children);for(let s of n)e.appendChild(s);t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e}getPersistData(){return this.addOnPersist(["scrollStep"])}getModuleName(){return"vScroll"}destroy(){let e=this.element;e.style.display="",HD([this.element],["e-vscroll","e-scroll-device"]);let t=JD(".e-"+e.id+"_nav.e-scroll-nav",e),i=JD(".e-scroll-overlay",e);[].slice.call(i).forEach(e=>{YD(e)});for(let n of[].slice.call(this.scrollItems.children))e.appendChild(n);this.uniqueId&&this.element.removeAttribute("id"),YD(this.scrollEle),t.length>0&&(YD(t[0]),XA(t[1])||YD(t[1])),GO.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,super.destroy()}disable(e){let t=JD(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach(t=>{t.setAttribute("tabindex",e?"-1":"0")})}createOverlayElement(e){let t=e.id.concat("_nav"),i=FD("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=FD("div",{id:t.concat("down"),className:n}),r=FD("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});s.appendChild(r);let o=FD("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(s),e.insertBefore(o,e.firstChild),this.eventBinding([s])}createNavIcon(e){let t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=FD("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");let s=FD("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),o=FD("div",{id:t.concat("_up"),className:r+" e-overlay"});o.setAttribute("aria-disabled","true");let a=FD("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});o.appendChild(a),n.appendChild(s),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(o,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),o.classList.add("e-ie-align")),this.eventBinding([n,o])}onKeyPress(e){if("Enter"===e.key){let t=()=>{this.keyTimeout=!0,this.eleScrolling(10,e.target,!0)};this.keyTimer=window.setTimeout(()=>{t()},100)}}onKeyUp(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}eventBinding(e){[].slice.call(e).forEach(e=>{new ZI(e,{tapHold:this.tabHoldHandler.bind(this),tapHoldThreshold:500}),e.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("keyup",this.onKeyUp.bind(this)),e.addEventListener("mouseup",this.repeatScroll.bind(this)),e.addEventListener("touchend",this.repeatScroll.bind(this)),e.addEventListener("contextmenu",e=>{e.preventDefault()}),GO.add(e,"click",this.clickEventHandler,this)})}repeatScroll(){clearInterval(this.timeout)}tabHoldHandler(e){let t=e.originalEvent.target;t=this.contains(t,"e-scroll-nav")?t.firstElementChild:t;let i=()=>{this.eleScrolling(10,t,!0)};this.timeout=window.setInterval(()=>{i()},50)}contains(e,t){return e.classList.contains(t)}eleScrolling(e,t,i){let n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)}clickEventHandler(e){this.eleScrolling(this.scrollStep,e.target,!1)}wheelEventHandler(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)}swipeHandler(e){let t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;let n=.5,s=()=>{let r=Math.sin(n);r<=0?window.cancelAnimationFrame(r):("Up"===e.swipeDirection?i.scrollTop+=t*r:"Down"===e.swipeDirection&&(i.scrollTop-=t*r),n-=.02,window.requestAnimationFrame(s))};s()}scrollUpdating(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e}frameScrollRequest(e,t,i){if(i)return void this.scrollUpdating(e,t);this.customStep||[].slice.call(JD(".e-scroll-overlay",this.element)).forEach(t=>{e-=t.offsetHeight});let n=()=>{e<10?window.cancelAnimationFrame(10):(this.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(n))};n()}touchHandler(e){let t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)}arrowDisabling(e,t){if(this.isDevice){let i=(XA(e)?t:e).querySelector(".e-nav-arrow");XA(e)?eI(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):eI(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}scrollEventHandler(e){let t=e.target,i=t.offsetHeight,n=this.element.querySelector(".e-scroll-up-nav"),s=this.element.querySelector(".e-scroll-down-nav"),r=this.element.querySelector(".e-scroll-up-overlay"),o=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(r.style.height=a<40?a+"px":"40px",o.style.height=t.scrollHeight-Math.ceil(i+a)<40?t.scrollHeight-Math.ceil(i+a)+"px":"40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=t.scrollHeight)this.arrowDisabling(s,n);else{let e=this.element.querySelector(".e-scroll-nav.e-overlay");e&&(e.classList.remove("e-overlay"),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"))}}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}};return UN([mI(null)],e.prototype,"scrollStep",void 0),e=UN([bI],e),e})();var WN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const zN="e-toolbar-items",GN="e-blazor-toolbar-items",YN="e-toolbar-item",$N="e-toolbar-popup";let KN=(()=>{class e extends II{}return WN([mI("")],e.prototype,"id",void 0),WN([mI("")],e.prototype,"text",void 0),WN([mI("auto")],e.prototype,"width",void 0),WN([mI("")],e.prototype,"cssClass",void 0),WN([mI(!1)],e.prototype,"showAlwaysInPopup",void 0),WN([mI(!1)],e.prototype,"disabled",void 0),WN([mI("")],e.prototype,"prefixIcon",void 0),WN([mI("")],e.prototype,"suffixIcon",void 0),WN([mI(!0)],e.prototype,"visible",void 0),WN([mI("None")],e.prototype,"overflow",void 0),WN([mI("")],e.prototype,"template",void 0),WN([mI("Button")],e.prototype,"type",void 0),WN([mI("Both")],e.prototype,"showTextOn",void 0),WN([mI(null)],e.prototype,"htmlAttributes",void 0),WN([mI("")],e.prototype,"tooltipText",void 0),WN([mI("Left")],e.prototype,"align",void 0),WN([yI()],e.prototype,"click",void 0),e})(),XN=(()=>{let t=class extends NI{constructor(e,t){super(e,t),this.resizeContext=this.resize.bind(this),this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"}}destroy(){super.destroy(),this.unwireEvents(),this.tempId.forEach(e=>{XA(this.element.querySelector(e))||(document.body.appendChild(this.element.querySelector(e)).style.display="none")});{let e=this.element.querySelectorAll(".e-control");[].slice.call(e).forEach(e=>{let t=e.ej2_instances;if(t){let e=t[0];e&&e.destroy()}})}for(;this.element.lastElementChild&&!this.element.lastElementChild.classList.contains(GN);)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&this.element.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&HD([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(e=>this.element.removeAttribute(e))}preRender(){let e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")}wireEvents(){GO.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}wireKeyboardEvent(){this.keyModule=new $I(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),GO.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}unwireKeyboardEvent(){this.keyModule&&(GO.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}docKeyDown(e){if("INPUT"===e.target.tagName)return;let t=!XA(this.popObj)&&qD(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}unwireEvents(){GO.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),GO.remove(document,"scroll",this.docEvent),GO.remove(document,"click",this.docEvent)}clearProperty(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}docEvent(e){let t=QD(e.target,".e-popup");this.popObj&&qD(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}destroyScroll(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)}destroyItems(){[].slice.call(this.element.querySelectorAll("."+YN)).forEach(e=>{YD(e)});let e=this.element.querySelector("."+zN);this.tbarAlign&&([].slice.call(e.children).forEach(e=>{YD(e)}),this.tbarAlign=!1,this.remove(e,"e-tbar-pos")),this.clearProperty()}destroyMode(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,"e-tbar-extended"),this.remove(this.element,"e-extended-toolbar");let e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)}add(e,t){e.classList.add(t)}remove(e,t){e.classList.remove(t)}elementFocus(e){let t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()}clstElement(e,t){let i;return i=e&&this.popObj&&qD(this.popObj.element)?this.popObj.element.querySelector("."+YN):this.element===t||e?this.element.querySelector("."+YN+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):QD(t,"."+YN),i}keyHandling(e,t,i,n,s){let r=this.popObj,o=this.element,a={name:"FadeOut",duration:100};switch(t.action){case"moveRight":if(this.isVertical)return;o===i?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":let l,c;if(e){let i=QD(e,".e-popup");i?qD(this.popObj.element)&&(c=[].slice.call(i.children),l="home"===t.action?c[0]:c[c.length-1]):(c=this.element.querySelectorAll("."+zN+" ."+YN),l="home"===t.action?c[0]:c[c.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":let h="moveUp"===t.action?"previous":"next";if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(r&&QD(i,".e-popup")){let t=r.element,i=t.firstElementChild;if("previous"===h&&i===e||"next"===h&&t.lastElementChild===e)return;this.eleFocus(e,h)}else"moveDown"===t.action&&r&&qD(r.element)&&this.elementFocus(e);break;case"tab":if(!s&&!n){let t=e.firstElementChild;o===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(t),t.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":r&&"Extended"!==this.overflowMode&&r.hide(a);break;case"popupOpen":if(!n)return;r&&!qD(r.element)?(r.element.style.top=o.offsetHeight+"px",r.show({name:"FadeIn",duration:100})):r.hide(a)}}keyActionHandler(e){let t,i=e.target;if("INPUT"===i.tagName||"TEXTAREA"===i.tagName||this.element.classList.contains("e-overlay"))return;e.preventDefault();let n=i.classList.contains("e-hor-nav"),s=i.classList.contains("e-scroll-nav");t=this.clstElement(n,i),(t||s)&&this.keyHandling(t,e,i,n,s)}disable(e){let t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(qD(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))}eleContains(e){return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!qD(e)}eleFocus(e,t){let i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){let i=Object(e.parentElement)[t+"ElementSibling"];if(XA(i)||0!==i.children.length||(i=Object(i)[t+"ElementSibling"]),!XA(i)&&i.children.length>0)if("next"===t){let e=i.querySelector("."+YN);this.eleContains(e)?this.eleFocus(e,t):(e.firstElementChild.focus(),this.activeEleSwitch(e))}else{let e=i.lastElementChild;this.eleContains(e)?this.eleFocus(e,t):this.elementFocus(e)}}}clickHandler(e){let t,i=e.target,n=i.classList,s=this.element,r=!XA(QD(i,".e-toolbar-pop")),o=QD(i,".e-hor-nav");o||(o=i),s.children[0].classList.contains("e-hscroll")||s.children[0].classList.contains("e-vscroll")||!n.contains("e-hor-nav")||(n=i.querySelector(".e-icons").classList),(n.contains("e-popup-up-icon")||n.contains("e-popup-down-icon"))&&this.popupClickHandler(s,o,"e-rtl");let a=QD(e.target,"."+YN);if((XA(a)||a.classList.contains("e-overlay"))&&!o.classList.contains("e-hor-nav"))return;if(a){t=this.items[this.tbarEle.indexOf(a)]}let l={originalEvent:e,item:t};t&&!XA(t.click)&&this.trigger("items["+this.tbarEle.indexOf(a)+"].click",l),l.cancel||this.trigger("clicked",l,e=>{!XA(this.popObj)&&r&&!e.cancel&&"Popup"===this.overflowMode&&e.item&&"Input"!==e.item.type&&this.popObj.hide({name:"FadeOut",duration:100})})}popupClickHandler(e,t,i){let n=this.popObj;qD(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))}render(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}initialize(){let e=tO(this.width),t=tO(this.height);"msie"===zO.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||ZD(this.element,{height:t}),ZD(this.element,{width:e}),KD(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&jD([this.element],this.cssClass.split(" "))}renderControl(){let e=this.element;this.trgtEle=e.children.length>0&&!this.isServerRendered?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}renderLayout(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}itemsAlign(e,t){let i,n;this.tbarEle||(this.tbarEle=[]);for(let s=0;s<e.length;s++)i=this.renderSubComponent(e[s],s),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[s],t,s),n=t.querySelector(".e-toolbar-"+e[s].align.toLowerCase()),n?(e[s].showAlwaysInPopup&&"Show"!==e[s].overflow||this.tbarAlgEle[(e[s].align+"s").toLowerCase()].push(i),n.appendChild(i)):t.appendChild(i)}serverItemsRerender(){this.destroyMode(),this.resetServerItems(),this.serverItemsRefresh()}serverItemsRefresh(){this.element.querySelector("."+GN).children.length>0&&(this.itemsAlign(this.items,this.element.querySelector("."+zN)),this.renderLayout(),this.refreshOverflow())}resetServerItems(){let e=this.element.querySelector("."+GN);zD([].slice.call(JD("."+zN+" ."+YN,this.element)),e),this.clearProperty()}changeOrientation(){let e=this.element;this.isVertical?(e.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add("e-vertical"),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),ZD(this.element,{height:tO(this.height),width:tO(this.width)})),this.destroyMode(),this.refreshOverflow()}initScroll(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+zN+" .e-toolbar-center").removeAttribute("style"),this.scrollModule=this.isVertical?new qN({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new HN({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,"e-tbar-pos"),ZD(this.element,{overflow:"hidden"}))}itemWidthCal(e){let t,i=0;return[].slice.call(JD("."+YN,e)).forEach(e=>{qD(e)&&(t=window.getComputedStyle(e),i+=this.isVertical?e.offsetHeight:e.offsetWidth,i+=parseFloat(this.isVertical?t.marginTop:t.marginRight),i+=parseFloat(this.isVertical?t.marginBottom:t.marginLeft))}),i}getScrollCntEle(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}checkOverflow(e,t){if(XA(e)||XA(t)||!qD(e))return!1;let i=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));let s=e.querySelector(".e-hor-nav"),r=e.querySelector(".e-scroll-nav"),o=0;return s?o=this.isVertical?s.offsetHeight:s.offsetWidth:r&&(o=this.isVertical?2*r.offsetHeight:2*r.offsetWidth),n>i-o}refreshOverflow(){this.resize()}toolbarAlign(e){this.tbarAlign&&(this.add(e,"e-tbar-pos"),this.itemPositioning())}renderOverflowMode(){let e=this.element,t=e.querySelector("."+zN),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===zO.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":XA(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(zN)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,"e-toolbar-multirow"),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,"e-multirow-pos")),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==zO.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}}setOverflowAttributes(e){this.createPopupEle(e,[].slice.call(JD("."+zN+" ."+YN,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")}separator(){let e,t=this.element,i=[].slice.call(t.querySelectorAll(".e-separator")),n=t.querySelector(".e-multirow-separator"),s=t.querySelector(".e-extended-separator");e="MultiRow"===this.overflowMode?n:s,null!==e&&("MultiRow"===this.overflowMode?e.classList.remove("e-multirow-separator"):"Extended"===this.overflowMode&&e.classList.remove("e-extended-separator"));for(let r=0;r<=i.length-1;r++)i[r].offsetLeft<30&&0!==i[r].offsetLeft&&("MultiRow"===this.overflowMode?i[r].classList.add("e-multirow-separator"):"Extended"===this.overflowMode&&i[r].classList.add("e-extended-separator"))}createPopupEle(e,t){let i=e.querySelector(".e-hor-nav"),n=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");let s=(n?e.offsetHeight:e.offsetWidth)-(n?i.offsetHeight:i.offsetWidth);this.element.classList.remove("e-rtl"),ZD(this.element,{direction:"initial"}),this.checkPriority(e,t,s,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}pushingPoppedEle(e,t,i,n,s){let r=e.element,o=JD(".e-overflow-show",i),a=0,l=[].slice.call(JD("."+$N,r.querySelector("."+zN))),c=0;l.forEach((r,l)=>{o=JD(".e-overflow-show",i),r.classList.contains("e-overflow-show")&&o.length>0?e.tbResize&&o.length>l?(i.insertBefore(r,o[l]),++c):(i.insertBefore(r,i.children[o.length]),++c):r.classList.contains("e-overflow-show")||e.tbResize&&r.classList.contains("e-overflow-hide")&&i.children.length>0&&0===o.length?(i.insertBefore(r,i.firstChild),++c):r.classList.contains("e-overflow-hide")?t.push(r):e.tbResize?(i.insertBefore(r,i.childNodes[a+c]),++a):i.appendChild(r),r.classList.contains("e-separator")?ZD(r,{display:"",height:s+"px"}):ZD(r,{display:"",height:n+"px"})}),t.forEach(e=>{i.appendChild(e)});let h=JD("."+YN,r.querySelector("."+zN));for(let d=h.length-1;d>=0;d--){let e=h[d];if(!e.classList.contains("e-separator")||"Extended"===this.overflowMode)break;ZD(e,{display:"none"})}}createPopup(){let e,t,i,n,s,r=this.element;if("Extended"===this.overflowMode&&(n=r.querySelector(".e-separator:not(."+$N+")"),i="auto"===r.style.height||""===r.style.height?null:n.offsetHeight),t=r.querySelector("."+YN+":not(.e-separator):not(."+$N+")"),e="auto"===r.style.height||""===r.style.height?null:t&&t.offsetHeight,r.querySelector("#"+r.id+"_popup.e-toolbar-pop"))s=r.querySelector("#"+r.id+"_popup.e-toolbar-pop");else{let e=this.createElement("div",{id:r.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),t=this.createElement("div",{id:r.id+"_popup",className:"e-toolbar-pop"});s="Extended"===this.overflowMode?e:t}this.pushingPoppedEle(this,[],s,e,i),this.popupInit(r,s)}getElementOffsetY(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}popupInit(e,t){if(this.popObj){let e=this.popObj.element;ZD(e,{maxHeight:"",display:"block"}),ZD(e,{maxHeight:e.offsetHeight+"px",display:""})}else{e.appendChild(t),ZD(this.element,{overflow:""});let i=window.getComputedStyle(this.element),n=new kL(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(n.appendTo(t),"Extended"===this.overflowMode&&(n.width=parseFloat(i.width)+2*parseFloat(i.borderRightWidth),n.offsetX=0),GO.add(document,"scroll",this.docEvent.bind(this)),GO.add(document,"click ",this.docEvent.bind(this)),n.element.style.maxHeight=n.element.offsetHeight+"px",this.isVertical&&(n.element.style.visibility="hidden"),this.isExtendedOpen){let e=this.element.querySelector(".e-hor-nav");e.classList.add("e-nav-active"),eI(e.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else n.hide();this.popObj=n,this.element.setAttribute("aria-haspopup","true")}}tbarPopupHandler(e){"Extended"===this.overflowMode&&(e?this.add(this.element,"e-tbar-extended"):this.remove(this.element,"e-tbar-extended"))}popupOpen(e){let t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());let i=this.popObj.element,n=this.popObj.element.parentElement,s=n.querySelector(".e-hor-nav");ZD(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");let r=i.offsetTop+i.offsetHeight+ZM(n).top,o=s.firstElementChild;s.classList.add("e-nav-active"),eI(o,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);let a=XA(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+a<r&&this.element.offsetTop<i.offsetHeight){let e=i.offsetHeight-(r-window.innerHeight-a+5);t.height=e+"px";for(let t=0;t<=i.childElementCount;t++){let n=i.children[t];if(n.offsetTop+n.offsetHeight>e){e=n.offsetTop;break}}ZD(t.element,{maxHeight:e+"px"})}else if(this.isVertical){let e=this.element.getBoundingClientRect();ZD(t.element,{maxHeight:e.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}t&&t.refreshPosition()}popupClose(e){let t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove("e-nav-active"),eI(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)}checkPriority(e,t,i,n){let s,r,o=this.popupPriCount>0,a=i,l=0,c=0,h=0,d=(e,t)=>{let i=!1;return t.forEach(t=>{e.classList.contains(t)&&(i=!0)}),i};for(let u=t.length-1;u>=0;u--){let e,a=window.getComputedStyle(t[u]);this.isVertical?(e=parseFloat(a.marginTop),e+=parseFloat(a.marginBottom)):(e=parseFloat(a.marginRight),e+=parseFloat(a.marginLeft));let p=t[u]===this.tbarEle[0];p&&(this.tbarEleMrgn=e),s=this.isVertical?t[u].offsetHeight:t[u].offsetWidth;let f=p?s+e:s;if(d(t[u],["e-popup-alone"])&&o&&(t[u].classList.add($N),ZD(t[u],this.isVertical?{display:"none",minHeight:f+"px"}:{display:"none",minWidth:f+"px"}),h++),r=this.isVertical?t[u].offsetTop+t[u].offsetHeight+e>i:t[u].offsetLeft+t[u].offsetWidth+e>i,r){if(t[u].classList.contains("e-separator")){if("Extended"===this.overflowMode)c===h&&d(t[u],["e-separator","e-ignore"])&&(t[u].classList.add($N),h++),c++;else if("Popup"===this.overflowMode){if(l>0&&c===h){let e=t[u+c+(l-1)];d(e,["e-separator","e-ignore"])&&ZD(e,{display:"none"})}l++,c=0,h=0}}else c++;t[u].classList.contains("e-overflow-show")&&n||d(t[u],["e-separator","e-ignore"])?i-=(this.isVertical?t[u].offsetHeight:t[u].offsetWidth)+e:(t[u].classList.add($N),ZD(t[u],this.isVertical?{display:"none",minHeight:f+"px"}:{display:"none",minWidth:f+"px"}),h++)}}if(n){let t=JD("."+YN+":not(."+$N+")",this.element);this.checkPriority(e,t,a,!1)}}createPopupIcon(e){let t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;let n=this.createElement("div",{id:t,className:i});"msie"!==zO.info.name&&"edge"!==zO.info.name||n.classList.add("e-ie-align");let s=this.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(s),n.setAttribute("tabindex","0"),n.setAttribute("role","list"),e.appendChild(n)}tbarPriRef(e,t,i,n,s,r,o,a){let l=a,c=JD("."+$N+":not(.e-overflow-show)",this.popObj.element).length,h=(e,t)=>e.classList.contains(t);if(0===JD(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){let a=e.children[t-(t-i)-1],c=!XA(a)&&h(a,"e-ignore");if(!XA(a)&&h(a,"e-separator")&&!qD(a)||c){let c="none";a.style.display="inherit";let h=a.offsetWidth+2*parseFloat(window.getComputedStyle(a).marginRight),d=a.previousElementSibling;r+h<o||s?(e.insertBefore(n,e.children[t+l-(t-i)]),XA(d)||(d.style.display="")):d.classList.contains("e-separator")&&(d.style.display=c),a.style.display=""}else e.insertBefore(n,e.children[t+l-(t-i)])}else e.insertBefore(n,e.children[t+l-c])}popupRefresh(e,t){let i,n=this.element,s=this.isVertical,r=n.querySelector(".e-hor-nav"),o=n.querySelector("."+zN);if(XA(r))return;o.removeAttribute("style"),e.style.display="block",i=s?n.offsetHeight-(r.offsetHeight+o.offsetHeight):n.offsetWidth-(r.offsetWidth+o.offsetWidth);let a=0;[].slice.call(e.children).forEach(e=>{a+=this.popupEleWidth(e),ZD(e,{position:""})}),i+(s?r.offsetHeight:r.offsetWidth)>a&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(i,e,t),e.style.display="",0===e.children.length&&r&&this.popObj&&(YD(r),r=null,this.popObj.destroy(),YD(this.popObj.element),this.popObj=null,n.setAttribute("aria-haspopup","false"))}ignoreEleFetch(e,t){let i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],s=0;return i.length>0?(i.forEach(e=>{n.push([].slice.call(t.children).indexOf(e))}),n.forEach(t=>{t<=e&&s++}),s):0}checkPopupRefresh(e,t){t.style.display="block";let i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");let n=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,s=e.querySelector("."+zN).offsetWidth;return t.style.removeProperty("display"),n>i+s}popupEleWidth(e){e.style.position="absolute";let t=this.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){let n=e.children[0];!XA(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!XA(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",XA(i)||(i.style.display="")}return t}popupEleRefresh(e,t,i){let n,s,r,o=this.popupPriCount>0,a=this.tbarEle,l=this.element.querySelector("."+zN),c=0;for(let h of[].slice.call(t.children)){if(h.classList.contains("e-popup-alone")&&o&&!i)continue;let t=this.popupEleWidth(h);if(h===this.tbarEle[0]&&(t+=this.tbarEleMrgn),h.style.position="",!(t<e||i))break;{if(ZD(h,{minWidth:"",height:"",minHeight:""}),h.classList.contains("e-overflow-hide")||h.classList.remove($N),s=this.tbarEle.indexOf(h),this.tbarAlign){let e=this.items[s].align;s=this.tbarAlgEle[(e+"s").toLowerCase()].indexOf(h),a=this.tbarAlgEle[(e+"s").toLowerCase()],l=this.element.querySelector("."+zN+" .e-toolbar-"+e.toLowerCase())}let r=0;"Extended"!==this.overflowMode&&a.slice(0,s).forEach(t=>{(t.classList.contains("e-overflow-show")||t.classList.contains("e-separator"))&&(t.classList.contains("e-separator")&&(t.style.display="",e-=t.offsetWidth),r++)}),c=this.ignoreEleFetch(s,l),h.classList.contains("e-overflow-show")?(this.tbarPriRef(l,s,r,h,i,t,e,c),e-=h.offsetWidth):0===s?(l.insertBefore(h,l.firstChild),e-=h.offsetWidth):(n=JD(".e-overflow-show",this.popObj.element).length,l.insertBefore(h,l.children[s+c-n]),e-=h.offsetWidth),h.style.height=""}}r=this.checkOverflow(this.element,this.element.getElementsByClassName(zN)[0]),r&&!i&&this.renderOverflowMode()}removePositioning(){let e=this.element.querySelector("."+zN);if(XA(e)||!e.classList.contains("e-tbar-pos"))return;this.remove(e,"e-tbar-pos");let t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}refreshPositioning(){let e=this.element.querySelector("."+zN);this.add(e,"e-tbar-pos"),this.itemPositioning()}itemPositioning(){let e,t=this.element.querySelector("."+zN);if(XA(t)||!t.classList.contains("e-tbar-pos"))return;let i,n=this.element.querySelector(".e-hor-nav");i=[].slice.call(this.scrollModule?t.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:t.childNodes),e=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;let s=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){s-=this.isVertical?n.offsetHeight:n.offsetWidth;let e=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=e:i[2].style.bottom=e:this.enableRtl?i[2].style.left=e:i[2].style.right=e}if(s<=e)return;let r=(s-e-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");let o=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+r+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=o:i[1].style.marginTop=o:this.enableRtl?i[1].style.marginRight=o:i[1].style.marginLeft=o}tbarItemAlign(e,t,i){if(e.showAlwaysInPopup&&"Show"!==e.overflow)return;let n=[];if(n.push(this.createElement("div",{className:"e-toolbar-left"})),n.push(this.createElement("div",{className:"e-toolbar-center"})),n.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)n.forEach(e=>{t.appendChild(e)}),this.tbarAlign=!0,this.add(t,"e-tbar-pos");else if("Left"!==e.align){let e=n[0];[].slice.call(t.childNodes).forEach(t=>{this.tbarAlgEle.lefts.push(t),e.appendChild(t)}),t.appendChild(e),t.appendChild(n[1]),t.appendChild(n[2]),this.tbarAlign=!0,this.add(t,"e-tbar-pos")}}ctrlTemplate(){this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,zN),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(e=>{"DIV"===e.tagName&&(this.tbarEle.push(e),e.setAttribute("aria-disabled","false"),this.add(e,YN))})}renderItems(){let e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){let i;e&&e.children.length>0&&(i=e.querySelector("."+zN)),i||(i=this.createElement("div",{className:zN})),this.itemsAlign(t,i),e.appendChild(i)}}setAttr(e,t){let i,n=Object.keys(e);for(let s=0;s<n.length;s++)i=n[s],"class"===i?this.add(t,e[i]):t.setAttribute(i,e[i])}enableItems(e,t){let i,n=e,s=n.length;XA(t)&&(t=!0);let r=(e,t)=>{e?(t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false")):(t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"))};if(!XA(s)&&s>=1){for(let e=0,o=[].slice.call(n);e<s;e++){let s=o[e];if("number"==typeof s){if(i=this.getElementByIndex(s),XA(i))return;n[e]=i}else i=s;r(t,i)}t?HD(n,"e-overlay"):jD(n,"e-overlay")}else{if("number"==typeof n){if(i=this.getElementByIndex(n),XA(i))return}else i=e;r(t,i)}}getElementByIndex(e){return this.tbarEle[e]?this.tbarEle[e]:null}addItems(e,t){let i;this.extendedOpen();let n,s=this.element.querySelector("."+zN);if(XA(s))return void this.itemsRerender(e);let r="Left";XA(t)&&(t=0),e.forEach(e=>{XA(e.align)||"Left"===e.align||"Left"!==r||(r=e.align)});for(let o of e)if(XA(o.type)&&(o.type="Button"),i=JD("."+YN,this.element),o.align=r,n=this.renderSubComponent(o,t),this.tbarEle.length>=t&&i.length>=0){XA(this.scrollModule)&&this.destroyMode();let e,a="L"===o.align[0]?0:"C"===o.align[0]?1:2;this.tbarAlign||"Left"===r?this.tbarAlign?(e=QD(i[0],"."+zN).children[a],e.insertBefore(n,e.children[t]),this.tbarAlgEle[(o.align+"s").toLowerCase()].splice(t,0,n),this.refreshPositioning()):0===i.length?(i=JD("."+zN,this.element),i[0].appendChild(n)):i[0].parentNode.insertBefore(n,i[t]):(this.tbarItemAlign(o,s,1),this.tbarAlign=!0,e=QD(i[0],"."+zN).children[a],e.appendChild(n),this.tbarAlgEle[(o.align+"s").toLowerCase()].push(n),this.refreshPositioning()),this.items.splice(t,0,o),this.tbarEle.splice(t,0,n),t++,this.offsetWid=s.offsetWidth}s.style.width="",this.renderOverflowMode()}removeItems(e){let t,i=e,n=[].slice.call(JD("."+YN,this.element));if("number"==typeof i)t=parseInt(e.toString(),10),this.removeItemByIndex(t,n);else if(i&&i.length>1)for(let s of[].slice.call(i))t=this.tbarEle.indexOf(s),this.removeItemByIndex(t,n),n=JD("."+YN,this.element);else t=n.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(t,n);this.resize()}removeItemByIndex(e,t){if(this.tbarEle[e]&&t[e]){let i=this.tbarEle.indexOf(t[e]);if(this.tbarAlign){let e;e=this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].indexOf(this.tbarEle[i]),this.tbarAlgEle[(this.items[i].align+"s").toLowerCase()].splice(e,1)}YD(t[e]),this.items.splice(i,1),this.tbarEle.splice(i,1)}}templateRender(t,i,n,s){let r,o=t;if("object"==typeof t&&(r="function"==typeof o.appendTo),"string"!=typeof t&&r){if("Input"===n.type){let e=this.createElement("input");e.id=n.id?n.id:QA("tbr-ipt"),i.appendChild(e),o.appendTo(e)}}else{let n,r,o=t;o="string"==typeof t?t.trim():t;try{if("object"!=typeof t||XA(t.tagName)){if(document.querySelectorAll(o).length){let e=document.querySelector(o),t=e.outerHTML.trim();i.appendChild(e),e.style.display="",XA(t)||this.tempId.push(o)}}else i.appendChild(t)}catch(e){n=bD(o)}XA(n)||(r=n({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!XA(r)&&r.length>0&&[].slice.call(r).forEach(e=>{XA(e.tagName)||(e.style.display=""),i.appendChild(e)})}this.add(i,"e-template"),this.tbarEle.push(i)}buttonRendering(e,t){let i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");let n,s,r=e.text;i.id=e.id?e.id:QA("e-tbr-btn");let o=this.createElement("span",{className:"e-tbar-btn-text"});r?(o.innerHTML=this.enableHtmlSanitizer?nR.sanitize(r):r,i.appendChild(o),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",s="Left"):(n=e.suffixIcon+" e-icons",s="Right"));let a=new bR({iconCss:n,iconPosition:s});return a.createElement=this.createElement,a.appendTo(i),e.width&&ZD(i,{width:tO(e.width)}),i}renderSubComponent(e,t){let i,n;i=this.createElement("div",{className:YN}),i.setAttribute("aria-disabled","false");let s=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?nR.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,i),e.tooltipText&&i.setAttribute("title",s.textContent),e.cssClass&&(i.className=i.className+" "+e.cssClass),e.template)this.templateRender(e.template,i,e,t);else switch(e.type){case"Button":n=this.buttonRendering(e,i),n.setAttribute("tabindex","-1"),n.setAttribute("aria-label",e.text||e.tooltipText),i.appendChild(n),i.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(i,"e-separator")}if(e.showTextOn){let t=e.showTextOn;"Toolbar"===t?(this.add(i,"e-toolbar-text"),this.add(i,"e-tbtn-align")):"Overflow"===t&&this.add(i,"e-popup-text")}if(e.overflow){let t=e.overflow;"Show"===t?this.add(i,"e-overflow-show"):"Hide"===t&&(i.classList.contains("e-separator")||this.add(i,"e-overflow-hide"))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!i.classList.contains("e-separator")&&(this.add(i,"e-popup-alone"),this.popupPriCount++),e.disabled&&this.add(i,"e-overlay"),!1===e.visible&&this.add(i,"e-hidden"),i}itemClick(e){this.activeEleSwitch(e.currentTarget)}activeEleSwitch(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()}activeEleRemove(e){XA(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,XA(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}getPersistData(){return this.addOnPersist([])}getModuleName(){return"toolbar"}itemsRerender(e){this.items=this.tbarItemsCol,this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode()}resize(){let e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();let t=this.checkOverflow(e,e.getElementsByClassName(zN)[0]);if(!t){this.destroyScroll();let t=e.querySelector("."+zN);XA(t)||(this.remove(t,"e-multirow-pos"),this.tbarAlign&&this.add(t,"e-tbar-pos"))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){let e=window.getComputedStyle(this.element);this.popObj.width=parseFloat(e.width)+2*parseFloat(e.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}}extendedOpen(){let e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))}onPropertyChanged(e,t){let i=this.element;this.extendedOpen();for(let n of Object.keys(e))switch(n){case"items":if(e.items instanceof Array&&t.items instanceof Array||this.isServerRendered)this.itemsRerender(e.items);else{let t=Object.keys(e.items);for(let n=0;n<t.length;n++){let t=parseInt(Object.keys(e.items)[n],10),s=Object.keys(e.items[t])[0],r=Object(e.items[t])[s];if(this.tbarAlign||"align"===s){this.refresh(),this.trigger("created");break}let o="overflow"===s&&0!==this.popupPriCount;("showAlwaysInPopup"===s&&!r||this.items[t].showAlwaysInPopup&&o)&&--this.popupPriCount,XA(this.scrollModule)&&this.destroyMode(),YD([].slice.call(JD("."+zN+" ."+YN,i))[t]),this.tbarEle.splice(t,1),this.addItems([this.items[t]],t),this.items.splice(t,1),this.items[t].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":let n=i.offsetWidth;ZD(i,{width:tO(e.width)}),this.renderOverflowMode(),this.popObj&&n<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":ZD(this.element,{height:tO(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,"e-rtl"),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl"),XA(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),XA(this.popObj)||(e.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&HD([this.element],t.cssClass.split(" ")),e.cssClass&&jD([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}hideItem(e,t){let i,n,s="object"==typeof e,r=e,o=[].slice.call(JD("."+YN,this.element));if(s?n=e:this.tbarEle[r]&&(n=[].slice.call(JD("."+YN,this.element))[r]),n){if(t?n.classList.add("e-hidden"):n.classList.remove("e-hidden"),t&&XA(this.element.getAttribute("tabindex"))&&!n.classList.contains("e-separator")){if(XA(n.firstElementChild.getAttribute("tabindex"))){n.firstElementChild.setAttribute("tabindex","-1");let e=[].slice.call(JD("."+YN,this.element));s&&(r=e.indexOf(n));let t=e[++r];for(;t;){if(!this.eleContains(t)){t.firstElementChild.removeAttribute("tabindex");break}t=e[++r]}}}else if(XA(this.element.getAttribute("tabindex"))&&!n.classList.contains("e-separator")){i=0;let e=!1,t=!1,n=o[i];for(;n;)if(n.classList.contains("e-separator"))n=o[++i];else if(XA(n.firstElementChild.getAttribute("tabindex")))n.firstElementChild.setAttribute("tabindex","-1"),e=!0;else{if(e&&t)break;this.eleContains(n)||(n.firstElementChild.removeAttribute("tabindex"),t=!0),n=o[++i]}}this.refreshOverflow()}}};return WN([vI([],KN)],t.prototype,"items",void 0),WN([mI("auto")],t.prototype,"width",void 0),WN([mI("auto")],t.prototype,"height",void 0),WN([mI("")],t.prototype,"cssClass",void 0),WN([mI("Scrollable")],t.prototype,"overflowMode",void 0),WN([mI()],t.prototype,"scrollStep",void 0),WN([mI(!0)],t.prototype,"enableCollision",void 0),WN([mI(!0)],t.prototype,"enableHtmlSanitizer",void 0),WN([mI(!0)],t.prototype,"allowKeyboard",void 0),WN([yI()],t.prototype,"clicked",void 0),WN([yI()],t.prototype,"created",void 0),WN([yI()],t.prototype,"destroyed",void 0),WN([yI()],t.prototype,"beforeCreate",void 0),t=WN([bI],t),t})();var JN,QN=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const ZN="e-icon-collapsible",eV="e-icon-expandable",tV="e-list-item",iV="e-list-text",nV="e-list-parent",sV="e-hover",rV="e-icons-spinner",oV="e-process",aV="e-text-content",lV="e-sibling",cV="e-drop-next",hV="e-checkbox-wrapper",dV="e-node-focus",uV={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""};let pV=(()=>{class e extends II{}return QN([mI("child")],e.prototype,"child",void 0),QN([mI([])],e.prototype,"dataSource",void 0),QN([mI("expanded")],e.prototype,"expanded",void 0),QN([mI("hasChildren")],e.prototype,"hasChildren",void 0),QN([mI("htmlAttributes")],e.prototype,"htmlAttributes",void 0),QN([mI("iconCss")],e.prototype,"iconCss",void 0),QN([mI("id")],e.prototype,"id",void 0),QN([mI("imageUrl")],e.prototype,"imageUrl",void 0),QN([mI("isChecked")],e.prototype,"isChecked",void 0),QN([mI("parentID")],e.prototype,"parentID",void 0),QN([mI(null)],e.prototype,"query",void 0),QN([mI("selected")],e.prototype,"selected",void 0),QN([mI(null)],e.prototype,"tableName",void 0),QN([mI("text")],e.prototype,"text",void 0),QN([mI("tooltip")],e.prototype,"tooltip",void 0),QN([mI("navigateUrl")],e.prototype,"navigateUrl",void 0),e})(),fV=(()=>{class e extends II{}return QN([mI("SlideDown")],e.prototype,"effect",void 0),QN([mI(400)],e.prototype,"duration",void 0),QN([mI("linear")],e.prototype,"easing",void 0),e})(),mV=(()=>{class e extends II{}return QN([gI({effect:"SlideUp",duration:400,easing:"linear"},fV)],e.prototype,"collapse",void 0),QN([gI({effect:"SlideDown",duration:400,easing:"linear"},fV)],e.prototype,"expand",void 0),e})(),gV=(()=>{let t=JN=class extends NI{constructor(e,t){super(e,t),this.isRefreshed=!1,this.preventExpand=!1,this.checkedElement=[],this.disableNode=[],this.validArr=[],this.expandChildren=[],this.isFieldChange=!1,this.changeDataSource=!1,this.isBlazorExpandedNodes=[],this.mouseDownStatus=!1}getModuleName(){return"treeview"}preRender(){this.isBlazorPlatform=!1,this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:eV,ariaAttributes:uV,expandIconPosition:"Left",itemCreated:e=>{this.beforeNodeCreate(e)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new _I({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),XA(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),XA(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),XA(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0}getPersistData(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])}render(){this.initialRender=!0,this.blazorInitialRender=!1,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.isBlazorPlatform||(this.initialRender=!1),this.renderComplete()}initialize(){this.isBlazorPlatform||(this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect)),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)}setDisabledMode(){this.disabled?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")}setEnableRtl(){this.enableRtl?jD([this.element],"e-rtl"):HD([this.element],"e-rtl")}setRipple(){this.rippleFn=EI(this.element,{selector:".e-fullrow,.e-text-content",ignore:"."+aV+" > .e-icons,.e-input-group,.e-input, ."+hV}),this.rippleIconFn=EI(this.element,{selector:"."+aV+" > .e-icons",isCenterRipple:!0})}setFullRow(e){e?jD([this.element],"e-fullrow-wrap"):HD([this.element],"e-fullrow-wrap")}setMultiSelect(e){let t=XD("."+nV,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")}templateComplier(t){if(t)try{if(document.querySelectorAll(t).length)return bD(document.querySelector(t).innerHTML.trim())}catch(e){return bD(t)}}setDataBinding(e){this.treeList.push("false"),this.fields.dataSource instanceof RM?(this.isOffline=this.isBlazorPlatform?this.fields.dataSource.offline:this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(e=>{this.isOffline=this.isBlazorPlatform?this.fields.dataSource.offline:this.fields.dataSource.dataSource.offline,this.fields.dataSource instanceof RM&&this.isOffline&&(this.treeList.pop(),this.treeData=e.result,this.isNumberTypeId=this.getType(),this.setRootData(),this.renderItems(!0),0!==this.treeList.length||this.isLoaded||this.finalize())}).catch(e=>{this.trigger("actionFailure",{error:e})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(t=>{this.treeList.pop(),this.treeData=t.result,this.isNumberTypeId=this.getType(),this.setRootData(),e&&(this.changeDataSource=!0),this.renderItems(!0),this.changeDataSource=!1,0!==this.treeList.length||this.isLoaded||this.finalize()}).catch(e=>{this.trigger("actionFailure",{error:e})})):(this.treeList.pop(),XA(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()}getQuery(e,t=null){let i,n=[];if(e.query)i=e.query.clone();else{i=new _M;let t=this.getActualProperties(e);for(let i of Object.keys(t))"dataSource"!==i&&"tableName"!==i&&"child"!==i&&e[i]&&"url"!==i&&-1===n.indexOf(e[i])&&n.push(e[i]);i.select(n),t.hasOwnProperty("tableName")&&i.from(e.tableName)}return LM.addSorting(this.sortOrder,e.text,i),XA(t)||XA(e.parentID)||i.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),i}getType(){return!!this.treeData[0]&&"number"==typeof WA(this.fields.id,this.treeData[0])}setRootData(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);let e=this.getChildNodes(this.treeData,void 0,!0);this.rootData=XA(e)?[]:e}else this.rootData=this.treeData}renderItems(e){if(!this.isBlazorPlatform||this.isBlazorPlatform&&this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName||this.changeDataSource){this.listBaseOption.ariaAttributes.level=1;let t=this.getSortedData(this.rootData);this.ulElement=LM.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);let i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand){let e=0;for(;e<i.length;)this.renderChildNodes(i[e],!0,null,!0),e++}(1===JD("."+nV,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element)}this.updateTemplateForBlazor(),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()}updateTemplateForBlazor(){this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate()}updateCheckedStateFromDS(e){if(this.treeData&&this.showCheckBox)if(1===this.dataType){let e=this.fields,t=new RM(this.treeData).executeLocal((new _M).where(e.isChecked,"equal",!0,!1));for(let i=0;i<t.length;i++){let n=t[i][this.fields.id]?t[i][this.fields.id].toString():null;if(t[i][this.fields.parentID]&&t[i][this.fields.parentID].toString(),-1!==this.checkedNodes.indexOf(n)||this.isLoaded||this.checkedNodes.push(n),t[i][this.fields.hasChildren]){let n=t[i][this.fields.id],s=new RM(this.treeData).executeLocal((new _M).where(e.parentID,"equal",n,!1));for(let e=0;e<s.length;e++){let t=s[e][this.fields.id]?s[e][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(t)&&this.autoCheck&&this.checkedNodes.push(t)}}}for(let i=0;i<this.checkedNodes.length;i++){let e=this.fields,t=new RM(this.treeData).executeLocal((new _M).where(e.id,"equal",this.checkedNodes[i],!0));t[0]&&this.autoCheck&&(this.getCheckedNodeDetails(e,t),this.checkIndeterminateState(t[0]));let n=new RM(this.treeData).executeLocal((new _M).where(e.parentID,"equal",this.checkedNodes[i],!0));for(let i=0;i<n.length;i++){let e=n[i][this.fields.id]?n[i][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(e)&&this.autoCheck&&this.checkedNodes.push(e)}}}else if(2===this.dataType||this.fields.dataSource instanceof RM&&this.isOffline)for(let t=0;t<this.treeData.length;t++){let e=this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():"";this.treeData[t][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(e)&&this.checkedNodes.push(e);let i=WA(this.fields.child.toString(),this.treeData[t]);i&&this.updateChildCheckState(i,this.treeData[t])}}getCheckedNodeDetails(e,t){let i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,n=0,s=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),r=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(s||r)r&&(XD(".e-check",r)||this.changeState(r,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);let t=this.getChildNodes(this.treeData,i);for(let e=0;e<t.length;e++){let s=t[e][this.fields.id]?t[e][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(s)&&n++,n===t.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}let s=new RM(this.treeData).executeLocal((new _M).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,s)}}updateParentCheckState(){let e,t=JD(".e-stop",this.element);for(let i=0;i<t.length;i++){let n=QD(t[i],"."+tV),s=n.getAttribute("data-uid").toString();e=1===this.dataType?new RM(this.treeData).executeLocal((new _M).where(this.fields.parentID,"equal",s,!0)):this.getChildNodes(this.treeData,s);let r=0;if(e){for(let t=0;t<e.length;t++){let i=e[t][this.fields.id].toString();-1!==this.checkedNodes.indexOf(i)&&r++}if(r===e.length){let e=n.getAttribute("data-uid");-1===this.checkedNodes.indexOf(e)&&this.checkedNodes.push(e),this.changeState(n,"check",null,!0,!0)}else 0===r&&0===this.checkedNodes.length&&this.changeState(n,"uncheck",null,!0,!0)}}}checkIndeterminateState(e){let t;t=this.element.querySelector(1===this.dataType?'[data-uid="'+e[this.fields.parentID]+'"]':'[data-uid="'+e[this.fields.id]+'"]'),t?"true"!==t.querySelector("."+hV).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}updateChildCheckState(e,t){let i=0,n=t[this.fields.id]?t[this.fields.id].toString():"";for(let s=0;s<e.length;s++){let r=e[s][this.fields.id]?e[s][this.fields.id].toString():"";e[s][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r),-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)&&this.autoCheck&&this.checkedNodes.push(r),-1!==this.checkedNodes.indexOf(r)&&this.autoCheck&&i++;let o=WA(this.fields.child.toString(),e[s]);o&&(this.parentCheckData.push(t),this.updateChildCheckState(o,e[s])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(let e=0;e<this.parentCheckData.length;e++)t!==this.parentCheckData[e]&&this.parentCheckData[e]&&this.checkIndeterminateState(this.parentCheckData[e])}this.parentCheckData=[]}beforeNodeCreate(e){if(this.showCheckBox){let t=gR(this.createElement,!0,{cssClass:this.touchClass});t.setAttribute("role","checkbox");let i=XD("div.e-icons",e.item),n=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(t,e.item.childNodes[0].childNodes[XA(i)?0:1]);let s=WA(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(n)>-1?(XD(".e-frame",t).classList.add("e-check"),t.setAttribute("aria-checked","true"),this.addCheck(e.item)):XA(s)||"true"!==s.toString()?t.setAttribute("aria-checked","false"):(XD(".e-frame",t).classList.add("e-check"),t.setAttribute("aria-checked","true"),this.addCheck(e.item));let r=XD(".e-frame",t);GO.add(r,"mousedown",this.frameMouseHandler,this),GO.add(r,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains("e-selected")&&e.item.setAttribute("aria-selected","false");let t=e.fields;if(this.addActionClass(e,t.selected,"e-selected"),this.addActionClass(e,t.expanded,"e-expanded"),!XA(this.nodeTemplateFn)){let t=e.item.querySelector("."+iV);t.innerHTML="";let i=this.nodeTemplateFn(e.curData,void 0,void 0,this.element.id+"nodeTemplate",this.isStringTemplate);i=Array.prototype.slice.call(i),zD(i,t)}this.isRefreshed||this.trigger("drawNode",{node:e.item,nodeData:e.curData,text:e.text})}frameMouseHandler(e){vR(e,XD(".e-ripple-container",e.target.parentElement))}addActionClass(e,t,i){let n=WA(t,e.curData);XA(n)||"false"===n.toString()||e.item.classList.add(i)}getDataType(e,t){if(this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName){for(let i=0;i<e.length;i++)if(this.isOffline){if("string"==typeof t.child&&XA(WA(t.child,e[i]))&&!XA(WA(t.parentID,e[i])))return 1}else if("string"==typeof t.child&&XA(WA(t.child,e[i])))return 1;return 2}for(let i=0,n=e.length;i<n;i++){if("string"==typeof t.child&&!XA(WA(t.child,e[i])))return 2;if(!XA(WA(t.parentID,e[i]))||!XA(WA(t.hasChildren,e[i])))return 1}return 1}getGroupedData(e,t){let i=(new _M).group(t),n=LM.getDataSource(e,i),s=[];for(let r=0;r<n.length;r++)s.push(n[r].items);return s}getSortedData(e){return e&&"None"!==this.sortOrder&&(e=LM.getDataSource(e,LM.addSorting(this.sortOrder,this.fields.text))),e}finalizeNode(e){let t=JD(".e-list-img",e);for(let s=0;s<t.length;s++)t[s].setAttribute("alt","e-list-img");if(this.isLoaded){let t=JD(".e-selected",e);for(let e=0;e<t.length;e++){this.selectNode(t[e],null);break}HD(t,"e-selected")}let i=JD("."+tV+":not(.e-expanded)",e);for(let s=0;s<i.length;s++){let e=XD("div.e-icons",i[s]);e&&e.classList.contains(eV)&&this.disableExpandAttr(i[s])}let n=JD(".e-expanded",e);if(!this.isInitalExpand)for(let s=0;s<n.length;s++)this.renderChildNodes(n[s]);HD(n,"e-expanded"),this.updateList(),this.isLoaded&&this.updateCheckedProp()}updateCheckedProp(){if(this.showCheckBox){let e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}}ensureIndeterminate(){if(this.autoCheck){let e,t=JD("li",this.element);for(let i=0;i<t.length;i++)t[i].classList.contains(tV)&&(e=XD("."+nV,t[i]),e?this.ensureParentCheckState(t[i]):this.ensureChildCheckState(t[i]))}else{let e=JD(".e-stop",this.element);for(let t=0;t<e.length;t++)e[t].classList.remove("e-stop")}}ensureParentCheckState(e){if(!XA(e)){if(e.classList.contains("e-treeview"))return;let t=e;e.classList.contains(tV)&&(t=XD("."+nV,e));let i=JD(".e-check",t),n=JD(".e-stop",t),s=JD("."+tV,t),r=e.getElementsByClassName(hV)[0];s.length===i.length?this.changeState(r,"check",null,!0,!0):i.length>0||n.length>0?this.changeState(r,"indeterminate",null,!0,!0):0===i.length&&this.changeState(r,"uncheck",null,!0,!0);let o=QD(e,"."+nV);if(!XA(o)){let e=QD(o,"."+tV);this.ensureParentCheckState(e)}}}ensureChildCheckState(e,t){if(!XA(e)){let i,n=XD("."+nV,e);if(!XA(n)){i=JD("."+hV,n);let s,r=e.getElementsByClassName("e-frame")[0].classList.contains("e-check"),o=e.getElementsByClassName("e-frame")[0].classList.contains("e-stop"),a=n.querySelectorAll("li");n.parentElement.getAttribute("aria-expanded");for(let e=0;e<i.length;e++){let n=a[e].getAttribute("data-uid");if(XA(this.currentLoadData)||XA(WA(this.fields.isChecked,this.currentLoadData[e]))){let t=i[e].getElementsByClassName("e-frame")[0].classList.contains("e-check");r||t&&!this.isLoaded||-1!==this.checkedNodes.indexOf(n)&&this.isLoaded&&(o||r)?s="check":a[e].classList.contains("e-has-child")&&!JA(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(n)||1===this.dataType&&!JA(this.parentNodeCheck)&&this.autoCheck&&(r||o)&&-1!==this.parentNodeCheck.indexOf(n)?(s="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n),1)):s="uncheck"}else s=WA(this.fields.isChecked,this.currentLoadData[e])?"check":"uncheck",-1!==this.ele&&(s=r?"check":"uncheck"),"uncheck"===s&&!JA(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(n)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n),1),s="indeterminate");this.changeState(i[e],s,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}}doCheckBoxAction(e,t){if(JD("."+tV,this.element),XA(e)){let e=JD("."+hV,this.element);if(this.loadOnDemand)for(let i=0;i<e.length;i++)this.updateFieldChecked(e[i],t),this.changeState(e[i],t?"check":"uncheck",null,null,null,t);else for(let i=0;i<e.length;i++)this.updateFieldChecked(e[i],t),this.changeState(e[i],t?"check":"uncheck")}else for(let i=e.length;i>=0;i--){let n;if(n=this.getElement(1===e.length?e[i-1]:e[i]),XA(n)){let n;if(n=e[i-e.length]?e[i-e.length].toString():e[i]?e[i].toString():null,""!==n&&t&&n)this.setValidCheckedNode(n),this.dynamicCheckState(n,t);else if(-1!==this.checkedNodes.indexOf(n)&&""!==n&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(n),1);let e=this.getChildNodes(this.treeData,n);if(e){for(let t=0;t<e.length;t++){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(i)&&this.checkedNodes.splice(this.checkedNodes.indexOf(i),1)}-1!==this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n),1)}n&&this.dynamicCheckState(n,t),this.updateField(this.treeData,this.fields,n,"isChecked",null)}continue}let s=XD("."+nV+" ."+hV,n);this.validateCheckNode(s,!t,n,null)}if(e)for(let i=0;i<e.length;i++){let n=e[i]?e[i].toString():"";t||this.updateField(this.treeData,this.fields,n,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()}updateFieldChecked(e,t){let i=QD(e,"."+tV),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||t||this.updateField(this.treeData,this.fields,n,"isChecked",null)}dynamicCheckState(e,t){if(1===this.dataType){let i=0,n=new RM(this.treeData).executeLocal((new _M).where(this.fields.id,"equal",e,!0));if(n[0]){let s=n[0][this.fields.id]?n[0][this.fields.id].toString():null,r=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=this.element.querySelector('[data-uid="'+r+'"]'),a=(o&&XD(".e-stop",o),o&&XD(".e-check",o),this.element.querySelector('[data-uid="'+s+'"]')),l=this.getChildNodes(this.treeData,r);if(l)for(let e=0;e<l.length;e++){let t=l[e][this.fields.id]?l[e][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(t)&&i++}-1!==this.checkedNodes.indexOf(e)&&o&&s===e&&this.autoCheck?this.changeState(o,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&a&&s===e&&!t?this.changeState(a,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&a&&s===e&&t?this.changeState(a,"check",null):-1===this.checkedNodes.indexOf(e)&&!a&&o&&s===e&&this.autoCheck&&0!==i?this.changeState(o,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!a&&o&&s===e&&this.autoCheck&&0===i?this.changeState(o,"uncheck",null):a||o||s!==e||!this.autoCheck||this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof RM&&this.isOffline){let i,n,s;for(let r=0;r<this.treeData.length;r++){i=this.treeData[r][this.fields.id]?this.treeData[r][this.fields.id].toString():"",n=this.element.querySelector('[data-uid="'+i+'"]'),s=n?XD(".e-check",n):null,-1===this.checkedNodes.indexOf(i)&&n&&s&&!t&&this.changeState(n,"uncheck",null);let o=WA(this.fields.child.toString(),this.treeData[r]);o&&this.updateChildIndeterminate(o,i,e,t,i)}}}updateIndeterminate(e,t){let i,n=this.getTreeData(e),s=0;1===this.dataType&&(i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);let r=this.getChildNodes(this.treeData,i);if(r)for(let a=0;a<r.length;a++){let e=r[a][this.fields.id]?r[a][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(e)&&s++}let o=this.element.querySelector('[data-uid="'+i+'"]');o&&t||!t&&o&&-1===this.parentNodeCheck.indexOf(i)&&0!==s?this.changeState(o,"indeterminate",null):!t&&o&&-1===this.parentNodeCheck.indexOf(i)&&0===s?this.changeState(o,"uncheck",null):o||(t||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?t&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):t||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===s||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,t),-1===this.checkedNodes.indexOf(i)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))}updateChildIndeterminate(e,t,i,n,s){let r=0;for(let o=0;o<e.length;o++){let a=e[o][this.fields.id]?e[o][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(a)&&r++;let l=this.element.querySelector('[data-uid="'+t+'"]'),c=l?XD(".e-stop",l):null,h=l?XD(".e-check",l):null,d=this.element.querySelector('[data-uid="'+a+'"]'),u=d?XD(".e-check",d):null;if(-1!==this.checkedNodes.indexOf(i)&&l&&a===i&&this.autoCheck)this.changeState(l,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!l||d||a!==i||n){if(-1===this.checkedNodes.indexOf(i)&&d&&a===i&&!n)this.changeState(d,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&c&&a===i&&this.autoCheck&&0===r&&!n)c.classList.remove("e-stop");else if(-1===this.checkedNodes.indexOf(i)&&!d&&h&&a===i&&0===r)this.changeState(l,"uncheck",null);else if(-1===this.checkedNodes.indexOf(a)&&d&&u&&0===r)this.changeState(d,"uncheck",null);else if(!d&&!l&&a===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){let i=this.element.querySelector('[data-uid="'+s+'"]');n&&0!==r?this.changeState(i,"indeterminate",null):n&&r===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):n||0!==r||-1===this.parentNodeCheck.indexOf(t)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.changeState(l,this.autoCheck?"uncheck":0!==r?"indeterminate":"uncheck",null);let p=WA(this.fields.child.toString(),e[o]);p&&this.updateChildIndeterminate(p,a,i,n,s)}}changeState(e,t,i,n,s,r){let o,a=QD(e,"."+tV);n?this.nodeCheckAction(e,t,a,o,i,n,s,r):(this.checkActionNodes=[],o=this.getCheckEvent(a,t,i),this.trigger("nodeChecking",o,o=>{o.cancel||this.nodeCheckAction(e,t,a,o,i,n,s,r)}))}nodeCheckAction(e,t,i,n,s,r,o,a){let l,c=e.getElementsByClassName("e-frame")[0];if("check"!==t||c.classList.contains("e-check")?"uncheck"===t&&(c.classList.contains("e-check")||c.classList.contains("e-stop"))?(HD([c],["e-check","e-stop"]),this.removeCheck(i),l="false"):"indeterminate"===t&&!c.classList.contains("e-stop")&&this.autoCheck&&(c.classList.remove("e-check"),c.classList.add("e-stop"),this.removeCheck(i),l="mixed"):(c.classList.remove("e-stop"),c.classList.add("e-check"),this.addCheck(i),l="true"),l="check"===t?"true":"uncheck"===t?"false":l,XA(l)||e.setAttribute("aria-checked",l),o){let e=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,t,s),JA(r)&&(n.data=e)}void 0!==a&&this.ensureStateChange(i,a),r||XA(l)||(e.setAttribute("aria-checked",l),this.allowServerDataBinding=!0,this.updateServerProperties("check"),this.allowServerDataBinding=!1,n.data[0].checked=l,this.trigger("nodeChecked",n),this.checkActionNodes=[])}addCheck(e){let t=e.getAttribute("data-uid");XA(t)||-1!==this.checkedNodes.indexOf(t)||this.checkedNodes.push(t)}removeCheck(e){let t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)}getCheckEvent(e,t,i){this.checkActionNodes.push(this.getNodeData(e));let n=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!XA(i),node:e,data:n}}finalize(){let e=XD("."+nV,this.element);if(!XA(e)){e.setAttribute("role",uV.treeRole),this.setMultiSelect(this.allowMultiSelection);let t=XD("."+tV,this.element);t&&(jD([t],dV),this.updateIdAttr(null,t)),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}}doExpandAction(){let e=this.expandedNodes;if(this.isInitalExpand&&e.length>0){if(this.setProperties({expandedNodes:[]},!0),this.isBlazorPlatform&&!this.initialRender)return;if(this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName)this.expandGivenNodes(e);else{for(let t=0;t<e.length;t++){let i=XD('[data-uid="'+e[t]+'"]',this.element);if(XA(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{let e=XD("."+eV,XD("."+aV,i));XA(e)||this.expandAction(i,e,null)}}this.afterFinalized()}}else this.afterFinalized()}expandGivenNodes(e){let t=this;this.expandCallback(e[this.index],()=>{t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()})}expandCallback(e,t){let i=XD('[data-uid="'+e+'"]',this.element);if(XA(i))t();else{let e=XD("."+eV,XD("."+aV,i));XA(e)?t():this.expandAction(i,e,null,!1,t)}}afterFinalized(){(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender)&&this.doSelectionAction(),this.updateCheckedProp(),this.isBlazorPlatform&&(this.initialRender&&this.setCheckedNodes(this.checkedNodes),this.updateInstance(),this.initialRender=!1),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0}doSelectionAction(){let e=JD(".e-selected",this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(let e=0;e<t.length;e++){let i=XD('[data-uid="'+t[e]+'"]',this.element);if(i&&!i.classList.contains("e-active")?this.selectNode(i,null,!0):this.selectedNodes.push(t[e]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);HD(e,"e-selected")}selectGivenNodes(e){for(let t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);}clickHandler(e){let t=e.originalEvent.target;if(GO.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){let i=t.classList,n=QD(t,"."+tV);if(!n)return;if(3!==e.originalEvent.which){let s=XD(".e-ripple-element",n),r=XD(".e-icons",n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){let i=QD(t,"."+hV);if(!XA(i)){let t=XD(".e-frame",i);return this.validateCheckNode(i,t.classList.contains("e-check"),n,e.originalEvent),void this.triggerClickEvent(e.originalEvent,n)}}i.contains(eV)?this.expandAction(n,t,e):i.contains(ZN)?this.collapseNode(n,t,e):s&&r?r.classList.contains("e-ripple")&&r.classList.contains(eV)?this.expandAction(n,r,e):r.classList.contains("e-ripple")&&r.classList.contains(ZN)?this.collapseNode(n,r,e):i.contains(nV)||i.contains(tV)||this.toggleSelect(n,e.originalEvent,!1):i.contains(nV)||i.contains(tV)||this.toggleSelect(n,e.originalEvent,!1)}this.triggerClickEvent(e.originalEvent,n)}}nodeCheckedEvent(e,t,i){QD(e,"."+tV);let n=this.getCheckEvent(e,t?"uncheck":"check",i);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)}triggerClickEvent(e,t){this.trigger("nodeClicked",{event:e,node:t})}expandNode(e,t,i){if(t.classList.contains(rV)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){HD([t],eV),jD([t],ZN);let i=0,n=0,s=this,r=XD("."+nV,e),o=e;this.setHeight(o,r);let a=XD("."+tV+".e-active",e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(r,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:t=>{o.style.overflow="hidden",!XA(a)&&a instanceof HTMLElement&&a.classList.add("e-animation-active"),i=o.offsetHeight,n=XD("."+aV,e).offsetHeight},progress:e=>{e.element.style.display="block",s.animateHeight(e,i,n)},end:e=>{e.element.style.display="block",!XA(a)&&a instanceof HTMLElement&&a.classList.remove("e-animation-active"),this.expandedNode(o,r,t)}}):this.expandedNode(o,r,t)}}else XD("."+nV,e).style.display="none",this.fields.dataSource instanceof RM==1&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")}expandedNode(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",HD([i],oV),this.addExpand(e),this.allowServerDataBinding=!0,this.updateServerProperties("expand"),this.allowServerDataBinding=!1,this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))}addExpand(e){e.setAttribute("aria-expanded","true"),HD([e],"e-node-collapsed");let t=e.getAttribute("data-uid");XA(t)||-1!==this.expandedNodes.indexOf(t)||this.expandedNodes.push(t)}collapseNode(e,t,i){if(t.classList.contains(oV))return;let n;jD([t],oV),this.isLoaded?(n=this.getExpandEvent(e,i),this.trigger("nodeCollapsing",n,i=>{i.cancel?HD([t],oV):this.nodeCollapseAction(e,t,i)})):this.nodeCollapseAction(e,t,n)}nodeCollapseAction(e,t,i){HD([t],ZN),jD([t],eV);let n=0,s=0,r=this,o=XD("."+nV,e),a=e,l=XD("."+tV+".e-active",e);this.isAnimate?this.aniObj.animate(o,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:t=>{a.style.overflow="hidden",!XA(l)&&l instanceof HTMLElement&&l.classList.add("e-animation-active"),n=XD("."+aV,e).offsetHeight,s=a.offsetHeight},progress:e=>{r.animateHeight(e,n,s)},end:e=>{e.element.style.display="none",!XA(l)&&l instanceof HTMLElement&&l.classList.remove("e-animation-active"),this.collapsedNode(a,o,t,i)}}):this.collapsedNode(a,o,t,i)}collapsedNode(e,t,i,n){t.style.display="none",e.style.overflow="",e.style.height="",HD([i],oV),this.allowServerDataBinding=!0,this.updateServerProperties("expand"),this.allowServerDataBinding=!1,this.removeExpand(e),this.isLoaded&&this.trigger("nodeCollapsed",n)}removeExpand(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);let i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)}disableExpandAttr(e){e.setAttribute("aria-expanded","false"),jD([e],"e-node-collapsed")}setHeight(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""}animateHeight(e,t,i){e.element.parentElement.style.height=(e.duration-e.timeStamp)/e.duration*(i-t)+t+"px"}renderChildNodes(e,t,i,n){let s,r=XD("div.e-icons",e);if(!XA(r))if(this.showSpinner(r),this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName){let o=this.parents(e,"."+nV).length,a=this.getChildFields(this.fields,o,1);if(XA(a)||XA(a.dataSource))return YD(r),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof RM&&this.isOffline?(this.treeList.pop(),s=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(s,a,r,e,t,i,n),this.updateTemplateForBlazor()):a.dataSource.executeQuery(this.getQuery(a,e.getAttribute("data-uid"))).then(o=>{this.treeList.pop(),s=o.result,1===this.dataType&&(this.dataType=2),this.loadChild(s,a,r,e,t,i,n),this.updateTemplateForBlazor()}).catch(e=>{this.trigger("actionFailure",{error:e})})}else{if(s=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=s,XA(s)||0===s.length)return YD(r),void this.removeExpand(e,!0);this.isBlazorPlatform&&this.initialRender||(this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(LM.createList(this.createElement,this.getSortedData(s),this.listBaseOption))),this.expandNode(e,r,n),this.setSelectionForChildNodes(s),this.ensureCheckNode(e),this.finalizeNode(e),this.loadOnDemand&&this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate(),this.disableTreeNodes(s),this.renderSubChild(e,t,n)}}loadChild(e,t,i,n,s,r,o){if(this.currentLoadData=e,XA(e)||0===e.length)YD(i),this.removeExpand(n,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof RM&&!this.isOffline){let t=n.getAttribute("data-uid");zA("child",e,this.getNodeObject(t))}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(LM.createList(this.createElement,e,this.listBaseOption)),this.expandNode(n,i,o),this.setSelectionForChildNodes(e),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(e),this.renderSubChild(n,s,o)}r&&r(),0!==this.treeList.length||this.isLoaded||this.finalize()}disableTreeNodes(e){let t=0;for(;t<e.length;){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}}setSelectionForChildNodes(e){let t;for(t=0;t<e.length;t++){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}}ensureCheckNode(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null}getFields(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)}getChildFields(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)}getChildMapper(e){return"string"==typeof e.child||XA(e.child)?e:e.child}getChildNodes(e,t,i=!1){let n;if(XA(e))return n;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,i);if("string"==typeof this.fields.child)for(let s=0,r=e.length;s<r;s++){let i=WA(this.fields.id,e[s]);if(i&&i.toString()===t)return WA(this.fields.child,e[s]);if(!XA(WA(this.fields.child,e[s]))&&(n=this.getChildNodes(WA(this.fields.child,e[s]),t),void 0!==n))break}return n}getChildGroup(e,t,i){if(!XA(e))for(let n=0,s=e.length;n<s;n++){if(XA(e[n][0])||XA(WA(this.fields.parentID,e[n][0])))return i?e[n]:[];if(WA(this.fields.parentID,e[n][0]).toString()===t)return e[n]}}renderSubChild(e,t,i){if(t){let n=JD("."+eV,e);for(let s=0,r=n.length;s<r;s++){let r=n[s];if(e.querySelector(".e-icons")!==n[s]){let e=QD(r,"."+tV);this.expandArgs=this.getExpandEvent(e,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(e,t,null,i)}}}}toggleSelect(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))}isActive(e){return!!e.classList.contains("e-active")}selectNode(e,t,i){if(XA(e)||!this.allowMultiSelection&&this.isActive(e)&&!XA(t))return void this.setFocusElement(e);let n;this.isLoaded?(n=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",n,n=>{n.cancel||this.nodeSelectAction(e,t,n,i)})):this.nodeSelectAction(e,t,n,i)}nodeSelectAction(e,t,i,n){if(this.allowMultiSelection&&(n||t&&(!t||t.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);let t=this.liList.indexOf(this.startNode),i=this.liList.indexOf(e);if(t>i){let e=t;t=i,i=e}for(let e=t;e<=i;e++){let t=this.liList[e];qD(t)&&!t.classList.contains("e-disable")&&this.addSelect(t)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))}unselectNode(e,t){let i;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,t=>{t.cancel||(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,this.nodeUnselectAction(e,t))})):this.nodeUnselectAction(e,i)}nodeUnselectAction(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))}setFocusElement(e){if(!XA(e)){let t=this.getFocusedNode();t&&HD([t],dV),jD([e],dV),this.updateIdAttr(t,e)}}addSelect(e){e.setAttribute("aria-selected","true"),jD([e],"e-active");let t=e.getAttribute("data-uid");XA(t)||-1!==this.selectedNodes.indexOf(t)||this.selectedNodes.push(t)}removeSelect(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),HD([e],"e-active");let t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)}removeSelectAll(){let e=this.element.querySelectorAll(".e-active");for(let t of e)this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected");HD(e,"e-active"),this.setProperties({selectedNodes:[]},!0)}getSelectEvent(e,t,i){let n=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!XA(i),node:e,nodeData:n}}setExpandOnType(){this.expandOnType="Auto"===this.expandOn?zO.isDevice?"Click":"DblClick":this.expandOn}expandHandler(e){let t=e.originalEvent.target;!t||t.classList.contains("e-input")||t.classList.contains("e-treeview")||t.classList.contains(nV)||t.classList.contains(tV)||t.classList.contains("e-icons")||this.showCheckBox&&QD(t,"."+hV)||this.expandCollapseAction(QD(t,"."+tV),e)}expandCollapseAction(e,t){let i=XD("div.e-icons",e);if(i&&!i.classList.contains(oV)){let n=i.classList;n.contains(eV)?this.expandAction(e,i,t):n.contains(ZN)&&this.collapseNode(e,i,t)}}expandAction(e,t,i,n,s){t.classList.contains(oV)||(jD([t],oV),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.trigger("nodeExpanding",this.expandArgs,i=>{i.cancel?HD([t],oV):this.nodeExpandAction(e,t,n,s)})):this.nodeExpandAction(e,t,n,s))}nodeExpandAction(e,t,i,n){let s=XD("."+nV,e);if(s&&"UL"===s.nodeName)this.expandNode(e,t);else{this.renderChildNodes(e,i,n);let t=JD("."+tV,e);for(let e=0;e<t.length;e++){let i=this.getId(t[e]);if(-1!==this.expandChildren.indexOf(i)&&void 0!==this.expandChildren){let n=XD("."+eV,XD("."+aV,t[e]));XA(n)||this.expandAction(t[e],n,null),this.expandChildren.splice(this.expandChildren.indexOf(i),1)}}}}keyActionHandler(e){let t=e.target,i=this.getFocusedNode();if(t&&t.classList.contains("e-input")){let n=t;"enter"===e.action?(n.blur(),this.element.focus(),jD([i],sV)):"escape"===e.action&&(n.value=this.oldText,n.blur(),this.element.focus(),jD([i],sV))}else e.preventDefault(),this.trigger("keyPress",{cancel:!1,event:e,node:i},t=>{if(!t.cancel)switch(e.action){case"space":this.showCheckBox&&this.checkNode(e);break;case"moveRight":this.openNode(!this.enableRtl,e);break;case"moveLeft":this.openNode(!!this.enableRtl,e);break;case"shiftDown":this.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(i,e);break;case"f2":this.allowEditing&&!i.classList.contains("e-disable")&&this.createTextbox(i,e);break;case"ctrlA":if(this.allowMultiSelection){let e=JD("."+tV+":not(.e-active)",this.element);this.selectGivenNodes(e)}}})}navigateToFocus(e){let t=this.getFocusedNode().querySelector("."+aV),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!XA(n)){let e=n.getBoundingClientRect();i.bottom>e.bottom?n.scrollTop+=i.bottom-e.bottom:i.top<e.top&&(n.scrollTop-=e.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)}isVisibleInViewport(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}getScrollParent(e){return XA(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)}shiftKeySelect(e,t){if(this.allowMultiSelection){let i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)}checkNode(e){let t=this.getFocusedNode(),i=XD("."+hV,t),n=XD(" .e-frame",i).classList.contains("e-check");t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,t,e)}validateCheckNode(e,t,i,n){let s=QD(e,"."+tV);this.checkActionNodes=[];let r=t?"false":"true";XA(r)||e.setAttribute("aria-checked",r);let o=this.getCheckEvent(s,t?"uncheck":"check",n);this.trigger("nodeChecking",o,s=>{s.cancel||this.nodeCheckingAction(e,t,i,s,n)})}nodeCheckingAction(e,t,i,n,s){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))){this.checkedElement.push(i.getAttribute("data-uid"));let e=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==e?this.allCheckNode(e,this.checkedElement,null,null,!1):e=null}if(this.changeState(e,t?"uncheck":"check",s,!0),this.autoCheck){let e;this.ensureChildCheckState(i),this.ensureParentCheckState(QD(QD(i,"."+nV),"."+tV)),"check"===n.action?e=!0:"uncheck"===n.action&&(e=!1),this.ensureStateChange(i,e)}this.allowServerDataBinding=!0,this.updateServerProperties("check"),this.allowServerDataBinding=!1,this.nodeCheckedEvent(e,t,s)}ensureStateChange(e,t){let i=XD("."+nV,e),n=e.getAttribute("data-uid"),s=this.fields;if(1===this.dataType&&this.autoCheck){let e=new RM(this.treeData).executeLocal((new _M).where(s.parentID,"equal",n,!0));for(let s=0;s<e.length;s++){let r=e[s][this.fields.id]?e[s][this.fields.id].toString():null,o=e[s][this.fields.isChecked]?e[s][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)){this.checkedNodes.push(r);let e=this.getChildNodes(this.treeData,r);this.getChildItems(e,t),-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)}else if(-1===this.checkedNodes.indexOf(n)&&null===i&&-1!==this.checkedNodes.indexOf(r)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(r),1),"true"===o&&this.updateField(this.treeData,this.fields,r,"isChecked",null),-1===this.checkedNodes.indexOf(n)&&null===i||-1!==this.parentNodeCheck.indexOf(r)){let e=this.getChildNodes(this.treeData,r);this.getChildItems(e,t),-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)}}else{let e=this.getChildNodes(this.treeData,r);this.getChildItems(e,t)}}}else if(1!==this.dataType||this.autoCheck){let e=this.getChildNodes(this.treeData,n);e&&this.childStateChange(e,n,i,t)}else if(t)for(let r=0;r<this.treeData.length;r++){let e=this.treeData[r][this.fields.id]?this.treeData[r][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(e)&&this.checkedNodes.push(e)}else{let e=new RM(this.treeData).executeLocal((new _M).where(s.isChecked,"equal",!0,!1));for(let t=0;t<e.length;t++){let i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(i)&&this.checkedNodes.splice(this.checkedNodes.indexOf(i),1),this.updateField(this.treeData,this.fields,i,"isChecked",null)}this.checkedNodes=[]}}getChildItems(e,t){for(let i=0;i<e.length;i++){let n=e[i][this.fields.id]?e[i][this.fields.id].toString():null,s=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(n)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),-1===this.checkedNodes.indexOf(n)&&t&&this.checkedNodes.push(n),"true"!==s||t||this.updateField(this.treeData,this.fields,n,"isChecked",null);let r=this.getChildNodes(this.treeData,n);r.length>0&&this.getChildItems(r,t)}}childStateChange(e,t,i,n){for(let s=0;s<e.length;s++){let r=e[s][this.fields.id]?e[s][this.fields.id].toString():"",o=e[s][this.fields.isChecked]?e[s][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(r)?(this.checkedNodes.push(r),-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)):-1!==this.checkedNodes.indexOf(t)||-1===this.checkedNodes.indexOf(r)||n||(this.checkedNodes.splice(this.checkedNodes.indexOf(r),1),"true"===o&&this.updateField(this.treeData,this.fields,r,"isChecked",null)):this.autoCheck||(n?-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r):(-1!==this.checkedNodes.indexOf(r)&&this.checkedNodes.splice(this.checkedNodes.indexOf(r),1),this.updateField(this.treeData,this.fields,r,"isChecked",null),this.checkedNodes=[]));let a=this.getChildNodes([e[s]],r);a&&this.childStateChange(a,t,i,n)}}allCheckNode(e,t,i,n,s){if(e)for(let r=0;r<e.length;r++){let o=WA(this.fields.id,e[r]),a=this.element.querySelector('[data-uid="'+o+'"]');if(!1!==s&&-1===this.checkedElement.indexOf(o.toString())&&(null===a&&!XA(e[r][this.fields.isChecked])&&-1===t.indexOf(o.toString())||0===n||2===i)&&(!1!==e[r][this.fields.isChecked]||2===i?t.push(o.toString()):n=null,n=!1!==e[r][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(o.toString())&&XA(i)&&t.push(o.toString()),!0===WA(this.fields.hasChildren,e[r])||WA(this.fields.child.toString(),e[r])){let o=WA(this.fields.id,e[r]),a=this.getChildNodes(this.treeData,o.toString());a&&(XA(s)?this.allCheckNode(a,t,i,n):this.allCheckNode(a,t,i,n,s),n=null)}n=null}}openNode(e,t){let i=this.getFocusedNode(),n=XD("div.e-icons",i);if(e){if(!n)return;n.classList.contains(eV)?this.expandAction(i,n,t):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(ZN))this.collapseNode(i,n,t);else{let e=QD(QD(i,"."+nV),"."+tV);if(!e)return;e.classList.contains("e-disable")||(this.setFocus(i,e),this.navigateToFocus(!0))}}navigateNode(e){let t=this.getFocusedNode();this.focusNextNode(t,e)}navigateRootNode(e){let t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))}getFocusedNode(){let e,t=XD("."+tV+"."+dV,this.element);return XA(t)&&(e=XD("."+tV,this.element)),XA(t)?XA(e)?this.element.firstElementChild:e:t}focusNextNode(e,t){let i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){let e=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&e.classList.contains("e-text-content")?this.focusNextNode(i,!1):this.focusNextNode(i,t)}}getNextNode(e){let t,i=this.liList.indexOf(e);do{if(i++,t=this.liList[i],XA(t))return e}while(!qD(t));return t}getPrevNode(e){let t,i=this.liList.indexOf(e);do{if(i--,t=this.liList[i],XA(t))return e}while(!qD(t));return t}getRootNode(){let e,t=0;do{e=this.liList[t],t++}while(!qD(e));return e}getEndNode(){let e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!qD(e));return e}setFocus(e,t){HD([e],[sV,dV]),t.classList.contains("e-disable")||(jD([t],[sV,dV]),this.updateIdAttr(e,t))}updateIdAttr(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")}focusIn(){this.mouseDownStatus||jD([this.getFocusedNode()],sV),this.mouseDownStatus=!1}focusOut(){HD([this.getFocusedNode()],sV)}onMouseOver(e){let t=e.target,i=t.classList,n=QD(t,"."+tV);!n||i.contains(nV)||i.contains(tV)?this.removeHover():n&&!n.classList.contains("e-disable")&&this.setHover(n)}setHover(e){e.classList.contains(sV)||(this.removeHover(),jD([e],sV))}onMouseLeave(e){this.removeHover()}removeHover(){let e=JD("."+sV,this.element);e&&e.length&&HD(e,sV)}getNodeData(e,t){if(!XA(e)&&e.classList.contains(tV)&&!XA(QD(e,".e-control"))&&QD(e,".e-control").classList.contains("e-treeview")){let i=e.getAttribute("data-uid"),n=this.getText(e,t),s=QD(e.parentNode,"."+tV),r=s?s.getAttribute("data-uid"):null,o=e.classList.contains("e-active"),a="true"===e.getAttribute("aria-expanded"),l=null!==e.getAttribute("aria-expanded");this.isBlazorPlatform&&(l="true"===e.getAttribute("aria-expanded")||null!=(e.querySelector(".e-icon-expandable")||e.querySelector(".e-icon-collapsible")));let c=null;return this.showCheckBox&&(c=XD("."+hV,e).getAttribute("aria-checked")),{id:i,text:n,parentID:r,selected:o,expanded:a,isChecked:c,hasChildren:l}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}}getText(e,t){if(t){let t=this.getNodeObject(e.getAttribute("data-uid")),i=parseFloat(e.getAttribute("aria-level"));return WA(this.getFields(this.fields,i,1).text,t)}return XD("."+iV,e).textContent}getExpandEvent(e,t){let i=this.getNodeData(e);return{cancel:!1,isInteracted:!XA(t),node:e,nodeData:i,event:t}}destroyTemplate(e){this.clearTemplate(["nodeTemplate"])}reRenderNodes(){this.updateListProp(this.fields),wD(this.element.id+"nodeTemplate"),this.isBlazorPlatform?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",XA(this.nodeTemplateFn)||this.destroyTemplate(this.nodeTemplate),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)}setCssClass(e,t){XA(e)||""===e||HD([this.element],e.split(" ")),XA(t)||""===t||jD([this.element],t.split(" "))}editingHandler(e){let t=e.target;if(!(!t||t.classList.contains("e-treeview")||t.classList.contains(nV)||t.classList.contains(tV)||t.classList.contains("e-icons")||t.classList.contains("e-input")||t.classList.contains("e-input-group"))){let i=QD(t,"."+tV);this.createTextbox(i,e)}}createTextbox(e,t){let i=XD(".e-tree-input",this.element);i&&i.blur();let n=XD("."+iV,e);this.updateOldText(e);let s=this.createElement("input",{className:"e-tree-input",attrs:{value:this.oldText}}),r=this.getEditEvent(e,null,s.outerHTML);this.trigger("nodeEditing",r,t=>{if(!t.cancel){let t="width:"+(n.offsetWidth+5)+"px";jD([e],"e-editing"),n.innerHTML=r.innerHtml;let i=XD(".e-tree-input",n);this.inputObj=ON.createInput({element:i,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",t),i.focus(),i.setSelectionRange(0,i.value.length),this.wireInputEvents(i)}})}updateOldText(e){let t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);let i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=WA(this.editFields.text,this.editData)}inputFocusOut(e){if(!XD(".e-tree-input",this.element))return;let t=e.target,i=t.value,n=QD(t,"."+iV),s=QD(t,"."+tV);YD(this.inputObj.container),this.fields.dataSource instanceof RM&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("update",null,s,i,null,null,!0):this.appendNewText(s,n,i,!0)}appendNewText(e,t,i,n){let s=this.getEditEvent(e,i,null);this.trigger("nodeEdited",s,s=>{this.updateText(e,t,i=s.cancel?s.oldText:s.newText,n),s.oldText!==i&&this.triggerEvent()})}updateText(e,t,i,n){let s=zA(this.editFields.text,i,this.editData);if(XA(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";let e=this.nodeTemplateFn(s,void 0,void 0,this.element.id+"nodeTemplate",this.isStringTemplate);e=Array.prototype.slice.call(e),zD(e,t),this.updateBlazorTemplate()}n&&(HD([e],"e-editing"),t.focus())}getElement(e){return XA(e)?null:"string"==typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"==typeof e?nO(e):null}getId(e){return XA(e)?null:"string"==typeof e?e:"object"==typeof e?nO(e).getAttribute("data-uid"):null}getEditEvent(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}}getNodeObject(e){if(!XA(e)){if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(let t=0,i=this.treeData.length;t<i;t++){let i=WA(this.fields.id,this.treeData[t]);if(!XA(this.treeData[t])&&!XA(i)&&i.toString()===e)return this.treeData[t]}}}getChildNodeObject(e,t,i){let n;if(XA(e))return n;for(let s=0,r=e.length;s<r;s++){let r=WA(t.id,e[s]);if(e[s]&&r&&r.toString()===i)return e[s];if("string"!=typeof t.child||XA(WA(t.child,e[s]))){if(this.fields.dataSource instanceof RM&&!XA(WA("child",e[s]))&&(n=this.getChildNodeObject(WA("child",e[s]),this.getChildMapper(t),i),void 0!==n))break}else{let r=WA(t.child,e[s]);if(n=this.getChildNodeObject(r,this.getChildMapper(t),i),void 0!==n)break}}return n}setDragAndDrop(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()}initializeDrag(){let e,t=this;this.dragObj=new UI(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+aV,helper:i=>{this.dragTarget=i.sender.target;let n=QD(this.dragTarget,".e-treeview"),s=QD(this.dragTarget,"."+aV);if(this.dragLi=QD(this.dragTarget,"."+tV),this.fullRowSelect&&!s&&this.dragTarget.classList.contains("e-fullrow")&&(s=this.dragTarget.nextElementSibling),!this.dragTarget||!i.element.isSameNode(n)||!s||this.dragTarget.classList.contains("e-treeview")||this.dragTarget.classList.contains(nV)||this.dragTarget.classList.contains(tV)||this.dragLi.classList.contains("e-disable"))return!1;let r=s.cloneNode(!0);if(XA(XD("div.e-icons",r))){let e=t.createElement("div",{className:"e-icons "+eV});r.insertBefore(e,r.children[0])}e=t.createElement("div",{className:"e-drag-item e-treeview "+this.cssClass+" "+(this.enableRtl?"e-rtl":"")}),e.appendChild(r);let o=this.selectedNodes.length;if(o>1&&this.allowMultiSelection&&this.dragLi.classList.contains("e-active")){let i=t.createElement("span",{className:"e-drop-count",innerHTML:""+o});e.appendChild(i)}return document.body.appendChild(e),document.body.style.cursor="",this.dragData=this.getNodeData(this.dragLi),e},dragStart:t=>{jD([this.element],"e-dragging");let i,n=QD(t.target,".e-list-item");n&&(i=parseInt(n.getAttribute("aria-level"),10));let s=this.getDragEvent(t.event,this,null,t.target,null,e,i);s.draggedNode.classList.contains("e-editing")?(this.dragObj.intDestroy(t.event),this.dragCancelAction(e)):this.trigger("nodeDragStart",s,i=>{i.cancel?(this.dragObj.intDestroy(t.event),this.dragCancelAction(e)):this.dragStartAction=!0})},drag:t=>{this.dragObj.setProperties({cursorAt:{top:!XA(t.event.targetTouches)||zO.isDevice?60:-20}}),this.dragAction(t,e)},dragStop:e=>{HD([this.element],"e-dragging"),this.removeVirtualEle();let t=e.target,i=QD(t,".e-droppable"),n=!0;t&&i||(YD(e.helper),document.body.style.cursor="",n=!1);let s,r=QD(t,".e-list-item");r&&(s=parseInt(r.getAttribute("aria-level"),10));let o=this.getDragEvent(e.event,this,t,t,null,e.helper,s);o.preventTargetExpand=!1,(this.isBlazorPlatform&&this.dragStartAction||!this.isBlazorPlatform)&&this.trigger("nodeDragStop",o,t=>{this.dragParent=t.draggedParentNode,this.preventExpand=t.preventTargetExpand,t.cancel&&(e.helper.parentNode&&YD(e.helper),document.body.style.cursor="",n=!1),this.dragStartAction=!1,this.isBlazorPlatform&&n&&this.dropAction(e,!0)})}}),this.dropObj=new WI(this.element,{out:e=>{XA(e)||e.target.classList.contains(lV)||(document.body.style.cursor="not-allowed")},over:e=>{document.body.style.cursor=""},drop:e=>{this.isBlazorPlatform||this.dropAction(e)}})}dragCancelAction(e){YD(e),HD([this.element],"e-dragging"),this.dragStartAction=!1}dragAction(e,t){let i=QD(e.target,".e-droppable"),n=QD(e.target,"."+aV),s=XD("div.e-icons",t);HD([s],["e-drop-in",cV,"e-drop-out","e-no-drop"]),this.removeVirtualEle(),document.body.style.cursor="";let r=e.target.classList;if(this.fullRowSelect&&!n&&!XA(r)&&r.contains("e-fullrow")&&(n=e.target.nextElementSibling),i){let t=QD(e.target,"."+tV),r=QD(e.target,"."+hV),o=QD(e.target,"."+ZN),a=QD(e.target,"."+eV);if(!i.classList.contains("e-treeview")||n&&!t.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,t))if(t&&e&&!a&&!o&&e.event.offsetY<7&&!r||a&&e.event.offsetY<5||o&&e.event.offsetX<3){jD([s],cV);let e=this.createElement("div",{className:lV});t.insertBefore(e,t.children[this.fullRowSelect?1:0])}else if(t&&e&&!a&&!o&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!r||a&&e.event.offsetY>19||o&&e.event.offsetX>19){jD([s],cV);let e=this.createElement("div",{className:lV});t.insertBefore(e,t.children[this.fullRowSelect?2:1])}else jD([s],"e-drop-in");else"LI"!==e.target.nodeName||t.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,t)?e.target.classList.contains(lV)?jD([s],cV):jD([s],"e-drop-out"):(jD([s],cV),this.renderVirtualEle(e))}else jD([s],"e-no-drop"),document.body.style.cursor="not-allowed";let o,a=QD(e.target,".e-list-item");a&&(o=parseInt(a.getAttribute("aria-level"),10));let l=this.getDragEvent(e.event,this,e.target,e.target,null,t,o);l.dropIndicator&&HD([s],l.dropIndicator),this.trigger("nodeDragging",l),l.dropIndicator&&jD([s],l.dropIndicator)}dropAction(e,t){let i,n,s,r=e.event.offsetY,o=e.target,a=!1;s=t?e.element:e.dragData.draggable;for(let l=0;l<s.ej2_instances.length;l++)if(s.ej2_instances[l]instanceof JN){i=s.ej2_instances[l];break}if(i&&i.dragTarget){let s=QD(i.dragTarget,"."+tV),l=QD(o,"."+tV);if(null==l&&o.classList.contains("e-treeview")&&(l=o.firstElementChild),YD(t?e.helper:e.droppedElement),document.body.style.cursor="",!l||l.isSameNode(s)||this.isDescendant(s,l))return void(this.fields.dataSource instanceof RM==0&&(this.preventExpand=!1));if(i.allowMultiSelection&&s.classList.contains("e-active")){let t=JD(".e-active",i.element);if(e.target.offsetHeight<=33&&r>e.target.offsetHeight-10&&r>6)for(let n=t.length-1;n>=0;n--)l.isSameNode(t[n])||this.isDescendant(t[n],l)||this.appendNode(o,t[n],l,e,i,r);else for(let n=0;n<t.length;n++)l.isSameNode(t[n])||this.isDescendant(t[n],l)||this.appendNode(o,t[n],l,e,i,r)}else this.appendNode(o,s,l,e,i,r);n=parseInt(s.getAttribute("aria-level"),10),a=!0}this.fields.dataSource instanceof RM==0&&(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(e.event,i,o,e.target,t?e.element:e.dragData.draggedElement,null,n,a)),this.triggerEvent()}appendNode(e,t,i,n,s,r){let o=QD(e,"."+hV),a=QD(n.target,"."+ZN),l=QD(n.target,"."+eV);t.classList.contains("e-disable")||o||!(l&&n.event.offsetY<5||a&&n.event.offsetX<3||l&&n.event.offsetY>19||a&&n.event.offsetX>19||!l&&!a)?this.dropAsChildNode(t,i,s,null,n,r,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,n,s):e.firstElementChild&&e.classList.contains("e-treeview")?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,n,s):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,n,s):this.dropAsChildNode(t,i,s,null,n,r)}dropAsSiblingNode(e,t,i,n){let s,r=QD(t,"."+nV),o=QD(e,"."+nV),a=QD(o,"."+tV);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?s=!1:i.event.offsetY<2?s=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?s=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(s=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){let t=i.target.closest("li");r.insertBefore(e,s?t:t.nextElementSibling)}else r.insertBefore(e,s?i.target:i.target.nextElementSibling);this.moveData(e,t,r,s,n),this.updateElement(o,a),this.updateAriaLevel(e),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())}dropAsChildNode(e,t,i,n,s,r,o){let a=QD(e,"."+nV),l=QD(a,"."+tV),c=QD(t,"."+nV);if(s&&r<7&&!o)c.insertBefore(e,t),this.moveData(e,t,c,!0,i);else if(s&&s.target.offsetHeight>0&&r>s.target.offsetHeight-10&&!o)c.insertBefore(e,t.nextElementSibling),this.moveData(e,t,c,!1,i);else{let s=this.expandParent(t),r=s.childNodes[n];s.insertBefore(e,r),this.moveData(e,r,s,!0,i)}this.updateElement(a,l),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())}moveData(e,t,i,n,s){let r=QD(i,"."+tV),o=this.getId(e),a=s.updateChildField(s.treeData,s.fields,o,null,null,!0),l=this.getId(t),c=this.getDataPos(this.treeData,this.fields,l),h=this.getId(r);if(1===this.dataType){this.updateField(this.treeData,this.fields,h,"hasChildren",!0);let e=XA(c)?this.treeData.length:n?c:c+1;if(XA(h)&&!this.hasPid)delete a[0][this.fields.parentID];else{let e=this.isNumberTypeId?parseFloat(h):h;zA(this.fields.parentID,e,a[0])}if(this.treeData.splice(e,0,a[0]),s.element.id!==this.element.id){let t=s.removeChildNodes(o);e++;for(let i=0,n=t.length;i<n;i++)this.treeData.splice(e,0,t[i]),e++;s.groupedData=s.getGroupedData(s.treeData,s.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,h,a,n?c:c+1)}expandParent(e){let t=XD("div.e-icons",e);t&&t.classList.contains(eV)&&!0!==this.preventExpand&&this.expandAction(e,t,null);let i=XD("."+nV,e);if(!0===this.preventExpand&&!i&&t&&this.renderChildNodes(e),i=XD("."+nV,e),XA(i)||!0!==this.preventExpand||(i.style.display="none"),XA(i)||!1!==this.preventExpand||(i.style.display="block"),XA(i)&&!0===this.preventExpand){XA(t)&&LM.generateIcon(this.createElement,e,eV,this.listBaseOption);let n=XD("div.e-icons",e);n&&n.classList.add("e-icon-expandable"),i=LM.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),n?HD([n],ZN):LM.generateIcon(this.createElement,e,eV,this.listBaseOption),e.setAttribute("aria-expanded","false"),i.style.display="none"}if(XA(i)){this.trigger("nodeExpanding",this.getExpandEvent(e,null)),XA(t)&&LM.generateIcon(this.createElement,e,ZN,this.listBaseOption);let n=XD("div.e-icons",e);n||(LM.generateIcon(this.createElement,e,ZN,this.listBaseOption),n=XD("div.e-icons",e)),HD([n],eV),i=LM.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null))}return i}updateElement(e,t){if(t&&0===e.childElementCount){let i=XD("div.e-icons",t);YD(e),YD(i);let n=this.getId(t);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(t,!0)}}updateAriaLevel(e){let t=this.parents(e,"."+nV).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(XD("."+nV,e),t+1)}updateChildAriaLevel(e,t){if(!XA(e)){let i=e.childNodes;for(let e=0,n=i.length;e<n;e++){let n=i[e];n.setAttribute("aria-level",""+t),this.updateChildAriaLevel(XD("."+nV,n),t+1)}}}renderVirtualEle(e){let t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);let i=this.createElement("div",{className:lV});e.target.insertBefore(i,e.target.children[this.fullRowSelect?t?1:2:t?0:1])}removeVirtualEle(){let e=XD("."+lV);e&&YD(e)}destroyDrag(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())}getDragEvent(e,t,i,n,s,r,o,a){let l=i?QD(i,"."+tV):null,c=l?this.getNodeData(l):null,h=t?t.dragLi:s,d=t?t.dragData:null,u=i?this.parents(i,"."+tV):null,p=t.dragLi.parentElement,f=t.dragLi?QD(p,"."+tV):null,m=null,g=null,v=[cV,"e-drop-in","e-drop-out","e-no-drop"],y=null,b=!0===a?h:l,w=b?QD(b,".e-list-parent"):null,S=0;if(f=t.dragLi&&null===f?QD(p,".e-treeview"):f,f=!0===a?this.dragParent:f,r)for(;S<4;){if(XD(".e-icons",r).classList.contains(v[S])){y=v[S];break}S++}if(w){let t=0;for(S=0;S<w.childElementCount;S++){if(t=!0!==a&&w.children[S]===h&&l!==h?++t:t,!0!==a&&w.children[S].classList.contains("e-hover")){g=e.offsetY>=23?S+1:S;break}if(w.children[S]===b){g=S;break}}g=0!==t?--g:g}if(i&&(m=0===u.length?null:i.classList.contains(tV)?u[0]:u[1]),l===h&&(m=l),i&&n.offsetHeight<=33&&e.offsetY<n.offsetHeight-10&&e.offsetY>6&&(m=l,!0!==a)){o=++o;let e=m?XD(".e-list-parent",m):null;if(g=e?e.children.length:0,!(this.fields.dataSource instanceof RM)&&null===e&&m){let e=m.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,m.getAttribute("data-uid").toString()):null;g=e?e.length:0}}return{cancel:!1,clonedNode:r,event:e,draggedNode:h,draggedNodeData:d,droppedNode:l,droppedNodeData:c,dropIndex:g,dropLevel:o,draggedParentNode:f,dropTarget:m,dropIndicator:y,target:n}}addFullRow(e){let t=this.liList.length;if(e)for(let i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(let i=0;i<t;i++)YD(XD(".e-fullrow",this.liList[i]))}createFullRow(e){let t=this.createElement("div",{className:"e-fullrow"});e.insertBefore(t,e.childNodes[0])}addMultiSelect(e){if(e){let e=JD("."+tV+':not([aria-selected="true"])',this.element);for(let t of e)t.setAttribute("aria-selected","false")}else{let e=JD("."+tV+'[aria-selected="false"]',this.element);for(let t of e)t.removeAttribute("aria-selected")}}collapseByLevel(e,t,i){if(t>0&&!XA(e)){let n=this.getVisibleNodes(i,e.childNodes);for(let e=0,s=n.length;e<s;e++){let s=n[e],r=XD("."+ZN,XD("."+aV,s));XA(r)||this.collapseNode(s,r,null),this.collapseByLevel(XD("."+nV,s),t-1,i)}}}collapseAllNodes(e){let t=this.getVisibleNodes(e,JD("."+ZN,this.element));for(let i=0,n=t.length;i<n;i++){let e=t[i],n=QD(e,"."+tV);this.collapseNode(n,e,null)}}expandByLevel(e,t,i){if(t>0&&!XA(e)){let n=this.getVisibleNodes(i,e.childNodes);for(let e=0,s=n.length;e<s;e++){let s=n[e],r=XD("."+eV,XD("."+aV,s));XA(r)||this.expandAction(s,r,null),this.expandByLevel(XD("."+nV,s),t-1,i)}}}expandAllNodes(e){let t=this.getVisibleNodes(e,JD("."+eV,this.element));for(let i=0,n=t.length;i<n;i++){let e=t[i],n=QD(e,"."+tV);this.expandAction(n,e,null,!0)}}getVisibleNodes(e,t){let i=Array.prototype.slice.call(t);if(e)for(let n=0;n<i.length;n++)qD(i[n])||(i.splice(n,1),n--);return i}removeNode(e){let t=QD(e,"."+nV),i=QD(t,"."+tV);YD(e),this.updateElement(t,i),this.updateInstance(),this.removeData(e)}updateInstance(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes(),this.allowServerDataBinding=!1,this.updateServerProperties("expand"),this.updateServerProperties("check"),this.updateServerProperties("select"),this.allowServerDataBinding=!0}updateServerProperties(e){this.isBlazorPlatform&&("expand"==e?(this.isBlazorExpandedNodes=this.expandedNodes,this.setProperties({expandedNodes:[]},!0)):this.setProperties("check"==e?{checkedNodes:this.checkedNodes}:{selectedNodes:this.selectedNodes},!0))}updateList(){this.liList=Array.prototype.slice.call(JD("."+tV,this.element))}updateSelectedNodes(){if(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender){this.setProperties({selectedNodes:[]},!0);let e=JD(".e-active",this.element);this.selectGivenNodes(e)}else if(this.isBlazorPlatform&&this.initialRender){let e=JD(".e-active",this.element);for(let t=0;t<e.length;t++){let i=e[t].getAttribute("data-uid").toString();XA(i)||-1!==this.selectedNodes.indexOf(i)||this.selectedNodes.push(i)}}}updateExpandedNodes(){if(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender){this.setProperties({expandedNodes:[]},!0);let e=JD('[aria-expanded="true"]',this.element);for(let t=0,i=e.length;t<i;t++)this.addExpand(e[t])}else if(this.isBlazorPlatform&&this.initialRender){let e=JD('[aria-expanded="true"]',this.element);for(let t=0;t<e.length;t++){let i=e[t].getAttribute("data-uid").toString();XA(i)||-1!==this.expandedNodes.indexOf(i)||this.expandedNodes.push(i)}}}removeData(e){if(1===this.dataType){let t=new RM(this.treeData),i=this.getId(e),n={},s=this.isNumberTypeId?parseFloat(i):i;n[this.fields.id]=s,t.remove(this.fields.id,n),this.removeChildNodes(i)}else{let t=this.getId(e);this.updateChildField(this.treeData,this.fields,t,null,null,!0)}}removeChildNodes(e){let t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(let n=0,s=t.length;n<s;n++){let e=new RM(this.treeData),s=WA(this.fields.id,t[n]).toString(),r={},o=this.isNumberTypeId?parseFloat(s):s;r[this.fields.id]=o;let a=e.remove(this.fields.id,r);i.push(a[0]),this.removeChildNodes(s)}return i}doGivenAction(e,t,i){for(let n=0,s=e.length;n<s;n++){let s=this.getElement(e[n]);if(XA(s))continue;let r=XD("."+t,XD("."+aV,s));XA(r)||(i?this.expandAction(s,r,null):this.collapseNode(s,r,null))}}addGivenNodes(e,t,i,n,s){if(0===e.length)return;let r=this.getSortedData(e),o=t?parseFloat(t.getAttribute("aria-level"))+1:1;n&&this.updateMapper(o);let a,l=LM.createListItemFromJson(this.createElement,r,this.listBaseOption,o);a=s||(t?this.expandParent(t):XD("."+nV,this.element));let c=a.childNodes[i];for(let d=0;d<l.length;d++)a.insertBefore(l[d],c);this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate();let h=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,h,"hasChildren",!0);let t=this.getId(c),i=XA(t)?this.treeData.length:this.getDataPos(this.treeData,this.fields,t);for(let n=0;n<e.length;n++){if(!XA(h)){let t=this.isNumberTypeId?parseFloat(h):h;zA(this.fields.parentID,t,e[n])}this.treeData.splice(i,0,e[n]),i++}}else this.addChildData(this.treeData,this.fields,h,e,i);this.finalizeNode(a)}updateMapper(e){let t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)}updateListProp(e){let t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"}getDataPos(e,t,i){let n=null;for(let s=0,r=e.length;s<r;s++){let r=WA(t.id,e[s]);if(e[s]&&r&&r.toString()===i)return s;if("string"!=typeof t.child||XA(WA(t.child,e[s]))){if(this.fields.dataSource instanceof RM&&!XA(WA("child",e[s]))){let r=WA("child",e[s]);if(n=this.getDataPos(r,this.getChildMapper(t),i),null!==n)break}}else{let r=WA(t.child,e[s]);if(n=this.getDataPos(r,this.getChildMapper(t),i),null!==n)break}}return n}addChildData(e,t,i,n,s){let r;if(XA(i)){s=XA(s)?e.length:s;for(let t=0,i=n.length;t<i;t++)e.splice(s,0,n[t]),s++;return r}for(let o=0,a=e.length;o<a;o++){let a=WA(t.id,e[o]);if(e[o]&&a&&a.toString()===i){if("string"==typeof t.child&&e[o].hasOwnProperty(t.child)&&null!==e[o][t.child]||this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName&&e[o].hasOwnProperty("child")){let i=WA("string"==typeof t.child?t.child:"child",e[o]);XA(i)&&(i=[]),s=XA(s)?i.length:s;for(let e=0,t=n.length;e<t;e++)i.splice(s,0,n[e]),s++}else e[o]["string"==typeof t.child?t.child:"child"]=n;return!0}if("string"!=typeof t.child||XA(WA(t.child,e[o]))){if(this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName&&!XA(WA("child",e[o]))){let a=WA("child",e[o]);if(r=this.addChildData(a,this.getChildMapper(t),i,n,s),void 0!==r)break}}else{let a=WA(t.child,e[o]);if(r=this.addChildData(a,this.getChildMapper(t),i,n,s),void 0!==r)break}}return r}doDisableAction(e){let t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(let n=0,s=i.length;n<s;n++){let e=i[n][this.fields.id].toString();e&&-1===this.disableNode.indexOf(e)&&this.disableNode.push(e);let t=this.getElement(e);t&&(t.setAttribute("aria-disabled","true"),jD([t],"e-disable"))}}doEnableAction(e){let t=this.nodeType(e);for(let i=0,n=t.length;i<n;i++){let e=this.getElement(t[i]),n=t[i];n&&-1!==this.disableNode.indexOf(n)&&this.disableNode.splice(this.disableNode.indexOf(n),1),e&&(e.removeAttribute("aria-disabled"),HD([e],"e-disable"))}}nodeType(e){let t=[];for(let i=0,n=e.length;i<n;i++){let n;"string"==typeof e[i]?n=e[i]?e[i].toString():null:"object"==typeof e[i]&&(n=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(n)&&t.push(n)}return t}checkValidId(e){if(1===this.dataType)this.validArr=this.treeData.filter(t=>-1!==e.indexOf(t[this.fields.id]?t[this.fields.id].toString():null));else if(2===this.dataType)for(let t=0;t<this.treeData.length;t++){let i=this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():null;-1!==e.indexOf(i)&&this.validArr.push(this.treeData[t]);let n=WA(this.fields.child.toString(),this.treeData[t]);n&&this.filterNestedChild(n,e)}return this.validArr}filterNestedChild(e,t){for(let i=0;i<e.length;i++){let n=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(n)&&this.validArr.push(e[i]);let s=WA(this.fields.child.toString(),e[i]);s&&this.filterNestedChild(s,t)}}setTouchClass(){let e=QD(this.element,".e-bigger");this.touchClass=XA(e)?"":"e-small"}updatePersistProp(){this.removeField(this.treeData,this.fields,["selected","expanded"]);let e=this.selectedNodes;for(let i=0,n=e.length;i<n;i++)this.updateField(this.treeData,this.fields,e[i],"selected",!0);let t=this.expandedNodes;this.isBlazorPlatform&&(t=this.isBlazorExpandedNodes);for(let i=0,n=t.length;i<n;i++)this.updateField(this.treeData,this.fields,t[i],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);let e=this.checkedNodes;for(let t=0,i=e.length;t<i;t++)this.updateField(this.treeData,this.fields,e[t],"isChecked",!0)}}removeField(e,t,i){if(!XA(e)&&!XA(t))for(let n=0,s=e.length;n<s;n++){for(let s=0;s<i.length;s++){let r=this.getMapperProp(t,i[s]);XA(e[n][r])||delete e[n][r]}"string"!=typeof t.child||XA(WA(t.child,e[n]))?this.fields.dataSource instanceof RM&&!XA(WA("child",e[n]))&&this.removeField(WA("child",e[n]),this.getChildMapper(t),i):this.removeField(WA(t.child,e[n]),this.getChildMapper(t),i)}}getMapperProp(e,t){switch(t){case"selected":return XA(e.selected)?"selected":e.selected;case"expanded":return XA(e.expanded)?"expanded":e.expanded;case"isChecked":return XA(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return XA(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}}updateField(e,t,i,n,s){if(!XA(i))if(1===this.dataType){let e=this.isNumberTypeId?parseFloat(i):i,r=new RM(this.treeData).executeLocal((new _M).where(t.id,"equal",e,!1));zA(this.getMapperProp(t,n),s,r[0])}else this.updateChildField(e,t,i,n,s)}updateChildField(e,t,i,n,s,r){let o;if(XA(e))return o;for(let a=0,l=e.length;a<l;a++){let l=WA(t.id,e[a]);if(e[a]&&l&&l.toString()===i)return r?o=e.splice(a,1):(zA(this.getMapperProp(t,n),s,e[a]),o=[]),o;if("string"!=typeof t.child||XA(WA(t.child,e[a]))){if(this.fields.dataSource instanceof RM&&!XA(WA("child",e[a]))){let l=WA("child",e[a]);if(o=this.updateChildField(l,this.getChildMapper(t),i,n,s,r),void 0!==o)break}}else{let l=WA(t.child,e[a]);if(o=this.updateChildField(l,this.getChildMapper(t),i,n,s,r),void 0!==o)break}}return o}triggerEvent(){this.updateTemplateForBlazor(),this.trigger("dataSourceChanged",{data:this.treeData})}updateBlazorTemplate(){}clientUpdateInitial(){this.blazorInitialRender=!0}wireInputEvents(e){GO.add(e,"blur",this.inputFocusOut,this)}wireEditingEvents(e){if(e&&!this.disabled){let e=this;this.touchEditObj=new ZI(this.element,{tap:t=>{2===t.tapCount&&(t.originalEvent.preventDefault(),e.editingHandler(t.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()}wireClickEvent(e){if(e){let e=this;this.touchClickObj=new ZI(this.element,{tap:t=>{e.clickHandler(t)}})}else this.touchClickObj&&this.touchClickObj.destroy()}wireExpandOnEvent(e){if(e){let e=this;this.touchExpandObj=new ZI(this.element,{tap:t=>{("Click"===this.expandOnType||"DblClick"===this.expandOnType&&2===t.tapCount)&&3!==t.originalEvent.which&&e.expandHandler(t)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()}mouseDownHandler(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&GO.add(this.element,"contextmenu",this.preventContextMenu,this)}preventContextMenu(e){e.preventDefault()}wireEvents(){GO.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),GO.add(this.element,"focus",this.focusIn,this),GO.add(this.element,"blur",this.focusOut,this),GO.add(this.element,"mouseover",this.onMouseOver,this),GO.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new $I(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}unWireEvents(){GO.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),GO.remove(this.element,"focus",this.focusIn),GO.remove(this.element,"blur",this.focusOut),GO.remove(this.element,"mouseover",this.onMouseOver),GO.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()}parents(e,t){let i=[],n=e.parentNode;for(;!XA(n);)tI(n,t)&&i.push(n),n=n.parentNode;return i}isDescendant(e,t){let i=t.parentNode;for(;!XA(i);){if(i===e)return!0;i=i.parentNode}return!1}showSpinner(e){jD([e],rV),function(e,t){if(!e.target)return;let i,n=XA(t)?FD:t,s=function(e,t){let i=t("div",{});i.classList.add("e-spinner-pane");let n=t("div",{});return n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,n);if(XA(e.cssClass)||s.wrap.classList.add(e.cssClass),XA(e.template)&&XA(null)){let t=XA(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(s.wrap):e.type;i=function(e,t){let i;switch(t){case"Material":case"Fabric":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(XA(e.width)?void 0:e.width,t),function(e,t,i,n){let s=t.querySelector(".e-spinner-inner"),r=s.querySelector("svg");switch(XA(r)||s.removeChild(r),e){case"Material":!function(e,t,i){let n=bN();vN[n]={timeOut:0,type:"Material",radius:t},SN(e,n,0,"e-spin-material"),CN(t,e,"Material","e-spin-material")}(s,i);break;case"Fabric":!function(e,t,i){let n=bN();vN[n]={timeOut:0,type:"Fabric",radius:t},wN(e,n,"e-spin-fabric"),xN(t,e,"e-spin-fabric")}(s,i);break;case"Bootstrap":!function(e,t,i){let n=bN();vN[n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(let s=0;s<=7;s++){let e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("class","e-path-circle_"+s),e.setAttribute("r","2"),e.setAttribute("transform","translate(32,32)"),n.appendChild(e)}}(e,n),function(e,t){let i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";let n=90;for(let s=0;s<=7;s++){let e=kN(0,0,24,n),t=i.querySelector(".e-path-circle_"+s);t.setAttribute("cx",e.x+""),t.setAttribute("cy",e.y+""),n=n>=360?0:n,n+=45}}(e,t)}(s,i);break;case"HighContrast":!function(e,t,i){let n=bN();vN[n]={timeOut:0,type:"HighContrast",radius:t},wN(e,n,"e-spin-high-contrast"),xN(t,e,"e-spin-high-contrast")}(s,i);break;case"Bootstrap4":!function(e,t,i){let n=bN();vN[n]={timeOut:0,type:"Bootstrap4",radius:t},SN(e,n,0,"e-spin-bootstrap4"),CN(t,e,"Bootstrap4","e-spin-bootstrap4")}(s,i)}}(t,s.wrap,i),XA(e.label)||function(e,t,i){let n=i("div",{});n.classList.add("e-spin-label"),n.textContent=t,e.appendChild(n)}(s.inner_wrap,e.label,n)}else{let t=XA(e.template)?null:e.template;s.wrap.classList.add("e-spin-template"),function(e,t,i){XA(null)||e.classList.add(null),e.querySelector(".e-spinner-inner").innerHTML=t}(s.wrap,t)}s.wrap.classList.add("e-spin-hide"),s=null}({target:e,width:zO.isDevice?16:14},this.createElement),AN(e,!1)}hideSpinner(e){AN(e,!0),e.innerHTML="",HD([e],rV)}setCheckedNodes(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)}setValidCheckedNode(e){if(1===this.dataType){let t=this.fields,i=new RM(this.treeData).executeLocal((new _M).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){let e=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,t=this.getChildNodes(this.treeData,e),n=0;for(let i=0;i<t.length;i++){let e=t[i][this.fields.id].toString();-1!==this.checkedNodes.indexOf(e)&&n++}n===t.length&&-1===this.checkedNodes.indexOf(e)&&e&&this.checkedNodes.push(e)}}else if(2===this.dataType)for(let t=0;t<this.treeData.length;t++){if((this.treeData[t][this.fields.id]?this.treeData[t][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}let i=WA(this.fields.child.toString(),this.treeData[t]);i&&this.setChildCheckState(i,e,this.treeData[t])}}setChildCheckState(e,t,i){let n,s=0;if(1===this.dataType){i&&(n=i[this.fields.id]?i[this.fields.id].toString():null);for(let s=0;s<e.length;s++){let r=e[s][this.fields.id]?e[s][this.fields.id].toString():null;i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r),r===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);let o=this.getChildNodes(this.treeData,r);o&&this.setChildCheckState(o,t,i)}}else{i&&(n=i[this.fields.id]?i[this.fields.id].toString():"");for(let r=0;r<e.length;r++){let o=e[r][this.fields.id]?e[r][this.fields.id].toString():"";i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),o===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);let a=WA(this.fields.child.toString(),e[r]);a&&this.setChildCheckState(a,t,e[r]),-1!==this.checkedNodes.indexOf(o)&&this.autoCheck&&s++,s===e.length&&-1===this.checkedNodes.indexOf(n)&&this.autoCheck&&this.checkedNodes.push(n)}}}setIndeterminate(e){for(let t=0;t<e.length;t++)this.setValidCheckedNode(e[t])}updatePosition(e,t,i,n){if(1===this.dataType){let s=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(s,1,t),i){this.removeChildNodes(e);for(let e=0;e<n.length;e++)this.treeData.splice(s,0,n[e]),s++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)}updateChildPosition(e,t,i,n,s){let r;for(let o=0,a=e.length;o<a;o++){let a=WA(t.id,e[o]);if(e[o]&&a&&a.toString()===i)return e[o]=n[0],!0;if("string"!=typeof t.child||XA(WA(t.child,e[o]))){if(this.fields.dataSource instanceof RM&&!XA(WA("child",e[o]))){let a=WA("child",e[o]);if(r=this.updateChildPosition(a,this.getChildMapper(t),i,n,s),void 0!==r)break}}else{let a=WA(t.child,e[o]);if(r=this.updateChildPosition(a,this.getChildMapper(t),i,n,s),void 0!==r)break}}return r}dynamicState(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())}crudOperation(e,t,i,n,s,r,o){let a,l=this.fields.dataSource,c=[],h=this.getQuery(this.fields),d=this.fields.id,u={addedRecords:[],deletedRecords:[],changedRecords:[]},p=[];t?p=this.nodeType(t):i&&("string"==typeof i?p[0]=i.toString():"object"==typeof i&&(p[0]=i.getAttribute("data-uid").toString()));for(let f=0,m=p.length;f<m;f++){if(XA(this.getElement(p[f])))continue;let e=this.getNodeObject(p[f]);c.push(e)}switch(e){case"delete":1==t.length?a=l.remove(d,c[0],h.fromTable,h):(u.deletedRecords=c,a=l.saveChanges(u,d,h.fromTable,h)),a.then(e=>this.deleteSuccess(p)).catch(e=>this.dmFailure(e));break;case"update":c[0][this.fields.text]=n,a=l.update(d,c[0],h.fromTable,h),a.then(e=>this.editSucess(i,n,o)).catch(e=>this.dmFailure(e,i,o));break;case"insert":if(1==s.length)a=l.insert(s[0],h.fromTable,h);else{let e=[];for(let t=0,i=s.length;t<i;t++)e.push(s[t]);u.addedRecords=e,a=l.saveChanges(u,d,h.fromTable,h)}a.then(e=>{let t=this.getElement(i);this.addSuccess(s,t,r),this.preventExpand=!1}).catch(e=>this.dmFailure(e))}}deleteSuccess(e){for(let t=0,i=e.length;t<i;t++){let i=this.getElement(e[t]);XA(i)||this.removeNode(i)}1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()}editSucess(e,t,i){let n=this.getElement(e),s=XD("."+iV,n);this.appendNewText(n,s,t,i)}addSuccess(e,t,i){let n,s=t?t.querySelector(".e-icons"):null,r=this;t&&s&&s.classList.contains(eV)&&null===t.querySelector("."+nV)?r.renderChildNodes(t,null,()=>{n=t.querySelector("."+nV),r.addGivenNodes(e,t,i,!0,n),r.triggerEvent()}):(this.addGivenNodes(e,t,i,!0),this.triggerEvent())}dmFailure(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})}updatePreviousText(e,t){let i=this.getElement(e),n=XD("."+iV,i);this.updateText(i,n,this.oldText,t)}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){let e=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(e,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.isBlazorPlatform||this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.isBlazorPlatform||this.setProperties({expandedNodes:XA(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.blazorInitialRender||this.reRenderNodes(),this.blazorInitialRender=!1,this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect);break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){let e=this.element.querySelectorAll("li"),t=0;for(;t<e.length;)"true"!==e[t].getAttribute("aria-expanded")&&this.renderChildNodes(e[t],!0,null,!0),t++;this.onLoaded=!0}break;case"nodeTemplate":this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}destroy(){wD(this.element.id+"nodeTemplate"),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.isBlazorPlatform&&(this.ulElement=this.element.querySelector(".e-list-parent.e-ul")),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.isBlazorPlatform||super.destroy()}addNodes(e,t,i,n){if(XA(e))return;e=JSON.parse(JSON.stringify(e));let s=this.getElement(t);if(this.preventExpand=n,this.fields.dataSource instanceof RM&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName)this.isOffline?this.addSuccess(e,s,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,s,i);else{if(s)this.addGivenNodes(e,s,i);else{e=this.getSortedData(e);for(let t=0;t<e.length;t++){let n=WA(this.fields.parentID,e[t]);s=n?this.getElement(n.toString()):n,this.addGivenNodes([e[t]],s,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.showCheckBox&&s&&this.ensureParentCheckState(s),(this.fields.dataSource instanceof RM==0||this.fields.dataSource instanceof RM&&"BlazorAdaptor"===this.fields.dataSource.adaptorName)&&(this.preventExpand=!1,this.triggerEvent())}beginEdit(e){let t=this.getElement(e);XA(t)||this.disabled||this.createTextbox(t,null)}checkAll(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)}collapseAll(e,t,i){XA(e)?t>0?this.collapseByLevel(XD("."+nV,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,ZN,!1)}disableNodes(e){XA(e)||this.doDisableAction(e)}enableNodes(e){XA(e)||this.doEnableAction(e)}ensureVisible(e){let t=this.getElement(e);if(XA(t))return;let i=this.parents(t,"."+tV);this.expandAll(i),setTimeout(()=>{t.scrollIntoView(!0)},450)}expandAll(e,t,i){XA(e)?t>0?this.expandByLevel(XD("."+nV,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,eV,!0)}getAllCheckedNodes(){return this.checkedNodes}getDisabledNodes(){return this.disableNode}getNode(e){let t=this.getElement(e);return this.getNodeData(t,!0)}getTreeData(e){let t=this.getId(e);if(this.updatePersistProp(),XA(t))return this.treeData;{let e=this.getNodeObject(t);return XA(e)?[]:[e]}}moveNodes(e,t,i,n){let s=this.getElement(t);if(!XA(s)){for(let t=0;t<e.length;t++){let r=this.getElement(e[t]);XA(r)||s.isSameNode(r)||this.isDescendant(r,s)||(this.preventExpand=n,this.dropAsChildNode(r,s,this,i))}this.fields.dataSource instanceof RM==0&&(this.preventExpand=!1),this.triggerEvent()}}refreshNode(e,t){if(XA(e)||XA(t))return;let i,n=!1;1==this.dataType&&t.length>1?n=!0:2==this.dataType&&1===t.length&&(XA(WA(this.fields.child.toString(),t[0]))||(n=!0));let s,r,o=this.getElement(e);if(i=o?o.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&n){for(let e=0;e<t.length;e++)if(XA(t[e][this.fields.parentID])){r=t[e],t.splice(e,1);break}s=KA({},this.refreshData,r)}else s=KA({},this.refreshData,t[0]);if(XA(o))return void this.updatePosition(i,s,n,t);this.isRefreshed=!0;let a=parseFloat(o.getAttribute("aria-level")),l=LM.createListItemFromJson(this.createElement,[s],this.listBaseOption,a),c=XD("."+nV,o),h=WA(this.fields.child.toString(),s);if(n&&c||n&&!XA(h))o.innerHTML=l[0].innerHTML,this.updatePosition(i,s,n,t),n&&c&&this.expandAll([i]);else{let e=XD("."+aV,o),r=XD("."+aV,l[0]),a=XD("div.e-icons",e),c=XD("div.e-icons",r);a&&c&&(c.classList.contains(eV)&&a.classList.contains(ZN)?(HD([c],eV),jD([c],ZN)):c.classList.contains(ZN)&&a.classList.contains(eV)?(HD([c],ZN),jD([c],eV)):a.classList.contains("interaction")&&jD([c],"interaction")),e.innerHTML=r.innerHTML,this.updatePosition(i,s,n,t)}if(s[this.fields.tooltip]&&o.setAttribute("title",s[this.fields.tooltip]),s.hasOwnProperty(this.fields.htmlAttributes)&&s[this.fields.htmlAttributes]){let e={};$A(e,s[this.fields.htmlAttributes]),e.class?(jD([o],e.class.split(" ")),delete e.class):KD(o,e)}this.isRefreshed=!1,this.triggerEvent()}removeNodes(e){XA(e)||(this.fields.dataSource instanceof RM&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("delete",e):this.deleteSuccess(e))}updateNode(e,t){if(XA(e)||XA(t)||!this.allowEditing)return;let i=this.getElement(e);if(XA(i))return;let n=XD("."+iV,i);this.updateOldText(i);let s=this.getEditEvent(i,null,null);this.trigger("nodeEditing",s,s=>{s.cancel||(this.fields.dataSource instanceof RM&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("update",null,e,t,null,null,!1):this.appendNewText(i,n,t,!1))})}uncheckAll(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)}};return QN([mI(!1)],t.prototype,"allowDragAndDrop",void 0),QN([mI(!1)],t.prototype,"allowEditing",void 0),QN([mI(!1)],t.prototype,"allowMultiSelection",void 0),QN([gI({},mV)],t.prototype,"animation",void 0),QN([mI()],t.prototype,"checkedNodes",void 0),QN([mI("")],t.prototype,"cssClass",void 0),QN([mI(!1)],t.prototype,"disabled",void 0),QN([mI(null)],t.prototype,"dragArea",void 0),QN([mI(!1)],t.prototype,"enableHtmlSanitizer",void 0),QN([mI(!1)],t.prototype,"enablePersistence",void 0),QN([mI()],t.prototype,"expandedNodes",void 0),QN([mI("Auto")],t.prototype,"expandOn",void 0),QN([gI({},pV)],t.prototype,"fields",void 0),QN([mI(!0)],t.prototype,"fullRowSelect",void 0),QN([mI(!0)],t.prototype,"loadOnDemand",void 0),QN([mI()],t.prototype,"locale",void 0),QN([mI()],t.prototype,"nodeTemplate",void 0),QN([mI()],t.prototype,"selectedNodes",void 0),QN([mI("None")],t.prototype,"sortOrder",void 0),QN([mI(!1)],t.prototype,"showCheckBox",void 0),QN([mI(!0)],t.prototype,"autoCheck",void 0),QN([mI(!1)],t.prototype,"fullRowNavigable",void 0),QN([yI()],t.prototype,"actionFailure",void 0),QN([yI()],t.prototype,"created",void 0),QN([yI()],t.prototype,"dataBound",void 0),QN([yI()],t.prototype,"dataSourceChanged",void 0),QN([yI()],t.prototype,"drawNode",void 0),QN([yI()],t.prototype,"destroyed",void 0),QN([yI()],t.prototype,"keyPress",void 0),QN([yI()],t.prototype,"nodeChecked",void 0),QN([yI()],t.prototype,"nodeChecking",void 0),QN([yI()],t.prototype,"nodeClicked",void 0),QN([yI()],t.prototype,"nodeCollapsed",void 0),QN([yI()],t.prototype,"nodeCollapsing",void 0),QN([yI()],t.prototype,"nodeDragging",void 0),QN([yI()],t.prototype,"nodeDragStart",void 0),QN([yI()],t.prototype,"nodeDragStop",void 0),QN([yI()],t.prototype,"nodeDropped",void 0),QN([yI()],t.prototype,"nodeEdited",void 0),QN([yI()],t.prototype,"nodeEditing",void 0),QN([yI()],t.prototype,"nodeExpanded",void 0),QN([yI()],t.prototype,"nodeExpanding",void 0),QN([yI()],t.prototype,"nodeSelected",void 0),QN([yI()],t.prototype,"nodeSelecting",void 0),t=JN=QN([bI],t),t})();var vV=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const yV="e-other-month",bV="e-overlay",wV="e-focused-date";let SV=(()=>{let e=class extends NI{constructor(e,t){super(e,t),this.effect="",this.isPopupClicked=!1,this.isDateSelected=!0}render(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new OO(this.locale),(XA(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add("e-calendar"),this.enableRtl&&this.element.classList.add("e-rtl"),zO.isDevice&&this.element.classList.add("e-device"),KD(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add("e-calendar"),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),zO.isDevice&&this.calendarElement.classList.add("e-device"),KD(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()}rangeValidation(e,t){XA(e)&&this.setProperties({min:new Date(1900,0,1)},!0),XA(t)&&this.setProperties({max:new Date(2099,11,31)},!0)}getDefaultKeyConfig(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs}validateDate(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!XA(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))}setOverlayIndex(e,t,i,n){if(n&&!XA(t)&&!XA(i)&&!XA(e)){let n=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}}minMaxUpdate(e){+this.min<=+this.max?HD([this.element],bV):(this.setProperties({min:this.min},!0),jD([this.element],bV)),this.min=XA(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=XA(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))}createHeader(){this.headerElement=this.createElement("div",{className:"e-header"});let e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),EI(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),KD(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),EI(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),KD(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),KD(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()}createContent(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()}getCultureValues(){let e,t=[],i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();e="en"===this.locale||"en-US"===this.locale?WA(i,IO()):this.getCultureObjects(xO,""+this.locale);for(let n of Object.keys(e))t.push(WA(n,e));return t}toCapitalize(e){return!XA(e)&&e.length?e[0].toUpperCase()+e.slice(1):e}createContentHeader(){"calendar"===this.getModuleName()?XA(this.element.querySelectorAll(".e-content .e-week-header")[0])||YD(this.element.querySelectorAll(".e-content .e-week-header")[0]):XA(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||YD(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);let e,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(t+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?jD([this.element],"e-week-number"):jD([this.calendarElement],"e-week-number")),e=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(let i=0;i<=6;i++)t+='<th  class="">'+this.toCapitalize(e[i])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)}createContentBody(){switch("calendar"===this.getModuleName()?XA(this.element.querySelectorAll(".e-content tbody")[0])||YD(this.element.querySelectorAll(".e-content tbody")[0]):XA(this.calendarElement.querySelectorAll(".e-content tbody")[0])||YD(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}}updateFooter(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))}createContentFooter(){if(this.showTodayButton){let e=new Date(+this.min),t=new Date(+this.max),i={today:"Today"};this.globalize=new OO(this.locale),this.l10=new KI(this.getModuleName(),i,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),EI(this.todayElement),this.updateFooter(),jD([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||jD([this.todayElement],"e-disabled"),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains("e-disabled")||GO.add(this.todayElement,"click",this.todayButtonClick,this)}}wireEvents(e,t,i,n){GO.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=KA(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new $I(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new $I(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}dateWireEvents(e,t,i,n){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=KA(this.defaultKeyConfigs,i),this.blazorRef=t,this.serverModuleName=n}todayButtonClick(e){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(e))):this.navigateTo("Month",new Date(this.checkValue(e))))}checkDeviceMode(e){}keyActionHandle(e,t,i){let n,s=this.tableBodyElement.querySelector("tr td.e-focused-date");n=i?XA(s)||+t!==parseInt(s.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):s:this.tableBodyElement.querySelector("tr td.e-selected");{let i=this.getViewNumber(this.currentView()),r=this.getViewNumber(this.depth),o=i===r&&this.getViewNumber(this.start)>=r;switch(this.effect="",e.action){case"moveLeft":this.KeyboardNavigate(-1,i,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.KeyboardNavigate(1,i,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.KeyboardNavigate(0===i?-7:-4,i,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.KeyboardNavigate(0===i?7:4,i,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(t);else{let r=XA(s)?n:s;if(!XA(r)&&!r.classList.contains("e-disabled"))if(o){let t=new Date(parseInt(""+r.id,0));this.selectDate(e,t,r)}else this.contentClick(null,--i,r,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":XA(s)&&(XA(n)||o)||this.contentClick(null,--i,s||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),YD(this.tableBodyElement),0===i?this.renderMonths(e):1===i?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,i),YD(this.tableBodyElement),0===i?this.renderMonths(e):1===i?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}}KeyboardNavigate(e,t,i,n,s){let r=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(YD(this.tableBodyElement),this.renderDecades(i)):this.currentDate=r;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(YD(this.tableBodyElement),this.renderYears(i)):this.currentDate=r;break;case 0:this.addDay(this.currentDate,e,i,n,s),this.isMinMaxRange(this.currentDate)?(YD(this.tableBodyElement),this.renderMonths(i)):this.currentDate=r}}preRender(e){this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=e=>{this.triggerNavigate(e)}}minMaxDate(e){let t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),n=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+n||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e}renderMonths(e,t){let i,n=this.weekNumber?8:7;i="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,e,t):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(i,n,"e-month",e,t):this.islamicModule.islamicRenderTemplate(i,n,"e-month",e,t)}renderDays(e,t,i,n,s){let r,o=[],a=new Date(this.checkValue(e)),l=a.getMonth();this.titleUpdate(e,"days");let c=a;for(a=new Date(c.getFullYear(),c.getMonth(),0,c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());a.getDay()!==this.firstDayOfWeek;)this.setStartDate(a,-864e5);for(let h=0;h<42;++h){let t=this.createElement("td",{className:"e-cell"}),c=this.createElement("span");h%7==0&&this.weekNumber&&(c.textContent=""+this.getWeek(a),t.appendChild(c),jD([t],"e-week-number"),o.push(t)),r=new Date(+a),a=this.minMaxDate(a);let d={type:"dateTime",skeleton:"full"},u=this.globalize.parseDate(this.globalize.formatDate(a,d),d),p=this.dayCell(a),f=this.globalize.formatDate(a,{type:"date",skeleton:"full"}),m=this.createElement("span");m.textContent=this.globalize.formatDate(a,{format:"d",type:"date",skeleton:"yMd"});let g=this.min>a||this.max<a;g?(jD([p],"e-disabled"),jD([p],bV)):m.setAttribute("title",""+f),l!==a.getMonth()&&jD([p],yV),0!==a.getDay()&&6!==a.getDay()||jD([p],"e-weekend"),p.appendChild(m),this.renderDayCellArgs={date:a,isDisabled:!1,element:p,isOutOfRange:g};let v=this.renderDayCellArgs;if(this.renderDayCellEvent(v),v.isDisabled){let e=new Date(this.checkValue(i)),t=new Date(this.checkValue(v.date));if(n){if(!XA(s)&&s.length>0)for(let e=0;e<s.length;e++)+new Date(this.globalize.formatDate(v.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(s[e],{type:"date",skeleton:"yMd"}))&&(s.splice(e,1),e=-1)}else e&&+e==+t&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!p.classList.contains("e-selected")&&(jD([p],"e-disabled"),jD([p],bV),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));let y=p.classList.contains(yV),b=p.classList.contains("e-disabled");if(b||GO.add(p,"click",this.clickHandler,this),!n||XA(s)||b)!b&&this.getDateVal(a,i)?jD([p],"e-selected"):this.updateFocus(y,b,a,p,e);else{for(let t=0;t<s.length;t++){let n="Gregorian"===this.calendarMode?"gregorian":"islamic",r={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:n};this.globalize.formatDate(a,r)===this.globalize.formatDate(s[t],r)&&this.getDateVal(a,s[t])||this.getDateVal(a,i)?jD([p],"e-selected"):this.updateFocus(y,b,a,p,e)}s.length<=0&&this.updateFocus(y,b,a,p,e)}u.getMonth()===(new Date).getMonth()&&u.getDate()===(new Date).getDate()&&u.getFullYear()===(new Date).getFullYear()&&jD([p],"e-today"),o.push(this.renderDayCellArgs.element),a=new Date(+r),this.addDay(a,1,null,this.max,this.min)}return o}updateFocus(e,t,i,n,s){s.getDate()!==i.getDate()||e||t?(s>=this.max&&parseInt(n.id,0)===+this.max&&!e&&!t&&jD([n],wV),s<=this.min&&parseInt(n.id,0)===+this.min&&!e&&!t&&jD([n],wV)):jD([n],wV)}renderYears(e,t){this.removeTableHeadElement();let i=[],n=XA(t),s=new Date(this.checkValue(this.currentDate)),r=s.getMonth(),o=s.getFullYear(),a=s,l=a.getFullYear(),c=new Date(this.checkValue(this.min)).getFullYear(),h=new Date(this.checkValue(this.min)).getMonth(),d=new Date(this.checkValue(this.max)).getFullYear(),u=new Date(this.checkValue(this.max)).getMonth();a.setMonth(0),this.titleUpdate(this.currentDate,"months"),a.setDate(1);for(let p=0;p<12;++p){let e=this.dayCell(a),s=this.createElement("span"),f=t&&t.getMonth()===a.getMonth(),m=t&&t.getFullYear()===o&&f;s.textContent=this.toCapitalize(this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(l<c||p<h&&l===c)||this.max&&(l>d||p>u&&l>=d)?jD([e],"e-disabled"):!n&&m?jD([e],"e-selected"):a.getMonth()===r&&this.currentDate.getMonth()===r&&jD([e],wV),a.setDate(1),a.setMonth(a.getMonth()+1),e.classList.contains("e-disabled")||GO.add(e,"click",this.clickHandler,this),e.appendChild(s),i.push(e)}this.renderTemplate(i,4,"e-year",e,t)}renderDecades(e,t){this.removeTableHeadElement();let i=[],n=new Date(this.checkValue(this.currentDate));n.setMonth(0),n.setDate(1);let s=n.getFullYear(),r=new Date(n.setFullYear(s-s%10)),o=new Date(n.setFullYear(s-s%10+9)),a=r.getFullYear(),l=o.getFullYear(),c=this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"y"}),h=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=c+" - "+h;let d=new Date(s-s%10-1,0,1).getFullYear();for(let u=0;u<12;++u){let e=d+u;n.setFullYear(e);let s=this.dayCell(n);KD(s,{role:"gridcell"});let r=this.createElement("span");r.textContent=this.globalize.formatDate(n,{format:null,type:"dateTime",skeleton:"y"}),e<a||e>l?(jD([s],"e-other-year"),XA(t)||n.getFullYear()!==t.getFullYear()||jD([s],"e-selected"),(e<new Date(this.checkValue(this.min)).getFullYear()||e>new Date(this.checkValue(this.max)).getFullYear())&&jD([s],"e-disabled")):e<new Date(this.checkValue(this.min)).getFullYear()||e>new Date(this.checkValue(this.max)).getFullYear()?jD([s],"e-disabled"):XA(t)||n.getFullYear()!==t.getFullYear()?n.getFullYear()!==this.currentDate.getFullYear()||s.classList.contains("e-disabled")||jD([s],wV):jD([s],"e-selected"),s.classList.contains("e-disabled")||GO.add(s,"click",this.clickHandler,this),s.appendChild(r),i.push(s)}this.renderTemplate(i,4,"e-decade",e,t)}dayCell(e){let t={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},i={className:"e-cell",attrs:{id:""+QA(""+this.globalize.parseDate(this.globalize.formatDate(e,t),t).valueOf()),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",i)}firstDay(e){let t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+yV):this.tableBodyElement.querySelectorAll("td:not(.e-other-year");if(t.length)for(let i=0;i<t.length;i++)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e}lastDay(e,t){let i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){let t=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return t&&i.setHours(this.firstDay(e).getHours()+t/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))}checkDateValue(e){return!XA(e)&&e instanceof Date&&!isNaN(+e)?e:null}findLastDay(e){let t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(.e-other-year"):this.tableBodyElement.querySelectorAll("td:not(."+yV);if(t.length)for(let i=t.length-1;i>=0;i--)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e}removeTableHeadElement(){"calendar"===this.getModuleName()?XA(this.element.querySelectorAll(".e-content table thead")[0])||YD(this.tableHeadElement):XA(this.calendarElement.querySelectorAll(".e-content table thead")[0])||YD(this.tableHeadElement)}renderTemplate(e,t,i,n,s){let r,o=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),HD([this.contentElement,this.headerElement],["e-month","e-decade","e-year"]),jD([this.contentElement,this.headerElement],[i]);let a=t,l=0;for(let c=0;c<e.length/t;++c){for(r=this.createElement("tr",{attrs:{role:"row"}}),l=0+l;l<a;l++)e[l].classList.contains("e-week-number")||XA(e[l].children[0])||(jD([e[l].children[0]],["e-day"]),EI(e[l].children[0],{duration:600,isCenterRipple:!0})),r.appendChild(e[l]),this.weekNumber&&7===l&&e[7].classList.contains(yV)&&jD([r],"e-month-hide"),!this.weekNumber&&6===l&&e[6].classList.contains(yV)&&jD([r],"e-month-hide"),this.weekNumber?41===l&&e[41].classList.contains(yV)&&jD([r],"e-month-hide"):35===l&&e[35].classList.contains(yV)&&jD([r],"e-month-hide");a+=t,l+=0,this.tableBodyElement.appendChild(r)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||0===o&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(n),this.setAriaActiveDescendant()}clickHandler(e,t){this.clickEventEmitter(e);let i=e.currentTarget,n=this.getViewNumber(this.currentView());i.classList.contains(yV)?this.contentClick(e,0,null,t):n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===n?this.contentClick(e,1,null,t):i.classList.contains(yV)||0!==n?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()}clickEventEmitter(e){e.preventDefault()}contentClick(e,t,i,n){let s=this.getViewNumber(this.currentView()),r=this.getIdValue(e,i);switch(t){case 0:s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(YD(this.tableBodyElement),this.currentDate=r,this.effect="e-zoomin",this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(r.getMonth()),r.getMonth()>0&&this.currentDate.getMonth()!==r.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(r.getFullYear())):this.currentDate=r,this.effect="e-zoomin",YD(this.tableBodyElement),this.renderMonths(e));break;case 1:if(s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,r,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(r.getFullYear());else{let e=this.islamicModule.getIslamicDate(r);this.currentDate=this.islamicModule.toGregorian(e.year,e.month,1)}this.effect="e-zoomin",YD(this.tableBodyElement),this.renderYears(e)}}}switchView(e,t,i){switch(e){case 0:YD(this.tableBodyElement),this.renderMonths(t),i&&!XA(this.tableBodyElement.querySelectorAll("."+wV)[0])&&this.tableBodyElement.querySelectorAll("."+wV)[0].classList.remove(wV);break;case 1:YD(this.tableBodyElement),this.renderYears(t);break;case 2:YD(this.tableBodyElement),this.renderDecades(t)}}getModuleName(){return"calendar"}requiredModules(){let e=[];return this&&e.push({args:[this],member:"islamic"}),e}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t,i,n){this.effect="";for(let s of Object.keys(e))switch(s){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===s?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),YD(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,n),this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(YD(this.todayElement),YD(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(HD([this.todayElement],"e-disabled"),YD(this.todayElement),YD(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":this.checkView(),this.createContentHeader(),this.createContentBody();break;case"locale":this.globalize=new OO(this.locale),this.createContentHeader(),this.createContentBody(),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():XA(this.todayElement)||XA(this.footer)||(YD(this.todayElement),YD(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}validateValues(e,t){if(e&&!XA(t)&&t.length>0){let e=this.copyValues(t);for(let t=0;t<e.length;t++){let i,n="Gregorian"===this.calendarMode?"gregorian":"islamic";i=this.globalize.formatDate(e[t],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});let s=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:n}),r=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:n});(+new Date(i)<+new Date(s)||+new Date(i)>+new Date(r))&&(e.splice(t,1),t=-1)}this.setProperties({values:e},!0)}}setValueUpdate(){XA(this.tableBodyElement)||(YD(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())}copyValues(e){let t=[];if(!XA(e)&&e.length>0)for(let i=0;i<e.length;i++)t.push(new Date(+e[i]));return t}titleUpdate(e,t){let i,n,s=new OO(this.locale),r="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(i=s.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:r}),n=s.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:r})):(i=s.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:r}),n=s.formatDate(e,{type:"dateTime",format:"y",calendar:r})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(i);break;case"months":this.headerTitleElement.textContent=n}}setActiveDescendant(){let e,t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),s="Gregorian"===this.calendarMode?"gregorian":"islamic",r=this.currentView();return t=this.globalize.formatDate(this.currentDate,"Month"===r?{type:"date",skeleton:"full",calendar:s}:"Year"===r?"islamic"!==s?{type:"date",skeleton:"yMMMM",calendar:s}:{type:"date",skeleton:"GyMMM",calendar:s}:{format:null,type:"date",skeleton:"y",calendar:s}),(n||i)&&(XA(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",t),e=(i||n).getAttribute("id")),e}iconHandler(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}}destroy(){("calendar"===this.getModuleName()||this.calendarElement)&&HD([this.element],["e-calendar"]),"calendar"===this.getModuleName()&&(GO.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&GO.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),XA(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element.innerHTML="",super.destroy()}title(e){let t=this.getViewNumber(this.currentView());this.effect="e-zoomin",this.switchView(++t,e)}getViewNumber(e){return"Month"===e?0:"Year"===e?1:2}navigateTitle(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()}previous(){this.effect="";let e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}}navigatePrevious(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}next(){this.effect="";let e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}}navigateNext(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}navigateTo(e,t){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e))}currentView(){return this.contentElement.classList.contains("e-year")?"Year":this.contentElement.classList.contains("e-decade")?"Decade":"Month"}getDateVal(e,t){return!XA(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}getCultureObjects(e,t){let i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),n=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return WA("Gregorian"===this.calendarMode?"main."+this.locale+i:"main."+this.locale+n,e)}getWeek(e){let t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil(((t-i)/864e5+new Date(i).getDay()+1)/7)}setStartDate(e,t){let i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),s=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*s)}addMonths(e,t){if("Gregorian"===this.calendarMode){let i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{let i=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(i.year,i.month+t,1)}}addYears(e,t){if("Gregorian"===this.calendarMode){let i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{let i=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(i.year+t,i.month,1)}}getIdValue(e,t){let i;i=e?e.currentTarget:t;let n={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},s=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),n),r=this.globalize.parseDate(s,n),o=r.valueOf()-r.valueOf()%1e3;return new Date(o)}adjustLongHeaderSize(){HD([this.element],"e-calendar-day-header-lg"),"Wide"===this.dayHeaderFormat&&jD(["calendar"===this.getModuleName()?this.element:this.calendarElement],"e-calendar-day-header-lg")}selectDate(e,t,i,n,s){let r=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(n&&!this.checkPresentDate(t,s)){let e=this.copyValues(s);!XA(s)&&e.length>0?(e.push(new Date(this.checkValue(t))),this.setProperties({values:e},!0),this.setProperties({value:s[s.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}let o=QD(r,".e-calendar");if(XA(o)&&(o=this.tableBodyElement),n||XA(o.querySelector(".e-selected"))||HD([o.querySelector(".e-selected")],"e-selected"),n||XA(o.querySelector("."+wV))||HD([o.querySelector("."+wV)],wV),n){let e=this.copyValues(s),i=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td"));for(let t=0;t<i.length;t++){let e=o.querySelectorAll("td."+wV)[0],n=o.querySelectorAll("td.e-selected")[0];i[t]===e&&HD([i[t]],wV),i[t]!==n||this.checkPresentDate(new Date(parseInt(n.getAttribute("id").split("_")[0],10)),s)||HD([i[t]],"e-selected")}if(r.classList.contains("e-selected")){HD([r],"e-selected");for(let i=0;i<e.length;i++){let n="Gregorian"===this.calendarMode?"gregorian":"islamic",s={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:n};if(this.globalize.formatDate(t,s)===this.globalize.formatDate(e[i],s)){let t=e.indexOf(e[i]);e.splice(t,1),jD([r],wV)}}this.setProperties({values:e},!0)}else jD([r],"e-selected")}else jD([r],"e-selected");this.isDateSelected=!0}getFromatStringValue(){return null}checkPresentDate(e,t){let i=!1;if(!XA(t))for(let n=0;n<t.length;n++){let s="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:s})===this.globalize.formatDate(t[n],{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:s})&&(i=!0)}return i}setAriaActiveDescendant(){KD(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})}previousIconHandler(e){e?(GO.remove(this.previousIcon,"click",this.navigatePreviousHandler),jD([this.previousIcon],"e-disabled"),jD([this.previousIcon],""+bV),this.previousIcon.setAttribute("aria-disabled","true")):(GO.add(this.previousIcon,"click",this.navigatePreviousHandler),HD([this.previousIcon],"e-disabled"),HD([this.previousIcon],""+bV),this.previousIcon.setAttribute("aria-disabled","false"))}renderDayCellEvent(e){KA(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)}navigatedEvent(e){KA(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)}triggerNavigate(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)}nextIconHandler(e){e?(GO.remove(this.nextIcon,"click",this.navigateNextHandler),jD([this.nextIcon],"e-disabled"),jD([this.nextIcon],bV),this.nextIcon.setAttribute("aria-disabled","true")):(GO.add(this.nextIcon,"click",this.navigateNextHandler),HD([this.nextIcon],"e-disabled"),HD([this.nextIcon],bV),this.nextIcon.setAttribute("aria-disabled","false"))}compare(e,t,i){let n,s,r=t.getFullYear();return n=r,s=0,i&&(r-=r%i,n=r-r%i+i-1),e.getFullYear()>n?s=1:e.getFullYear()<r&&(s=-1),s}isMinMaxRange(e){return+e>=+this.min&&+e<=+this.max}isMonthYearRange(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();{let t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year}}compareYear(e,t){return this.compare(e,t,0)}compareDecade(e,t){return this.compare(e,t,10)}shiftArray(e,t){return e.slice(t).concat(e.slice(0,t))}addDay(e,t,i,n,s){let r=t,o=new Date(+e);if(!XA(this.tableBodyElement)&&!XA(i)){for(;this.findNextTD(new Date(+e),r,n,s);)r+=t;let i=new Date(o.setDate(o.getDate()+r));r=+i>+n||+i<+s?r===t?t-t:t:r}e.setDate(e.getDate()+r)}findNextTD(e,t,i,n){let s=new Date(e.setDate(e.getDate()+t)),r=[],o=!1;if((!XA(s)&&s.getMonth())===(!XA(this.currentDate)&&this.currentDate.getMonth())){let e;e="Gregorian"===this.calendarMode?this.renderDays(s,null):this.islamicModule.islamicRenderDays(this.currentDate,s),r=e.filter(e=>e.classList.contains("e-disabled"))}else r=this.tableBodyElement.querySelectorAll("td.e-disabled");if(+s<=+i&&+s>=+n&&r.length)for(let a=0;a<r.length&&(o=+s==+new Date(parseInt(r[a].id,0)),!o);a++);return o}getMaxDays(e){let t,i,n=new Date(this.checkValue(e));for(t=28,i=n.getMonth();n.getMonth()===i;)++t,n.setDate(t);return t-1}setDateDecade(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)}setDateYear(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)}compareMonth(e,t){let i;return i=e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1,i}checkValue(e){return e instanceof Date?e.toUTCString():""+e}checkView(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)}};return vV([mI(new Date(1900,0,1))],e.prototype,"min",void 0),vV([mI(new Date(2099,11,31))],e.prototype,"max",void 0),vV([mI(null)],e.prototype,"firstDayOfWeek",void 0),vV([mI("Gregorian")],e.prototype,"calendarMode",void 0),vV([mI("Month")],e.prototype,"start",void 0),vV([mI("Month")],e.prototype,"depth",void 0),vV([mI(!1)],e.prototype,"weekNumber",void 0),vV([mI(!0)],e.prototype,"showTodayButton",void 0),vV([mI("Short")],e.prototype,"dayHeaderFormat",void 0),vV([mI(!1)],e.prototype,"enablePersistence",void 0),vV([mI(null)],e.prototype,"keyConfigs",void 0),vV([mI(null)],e.prototype,"serverTimezoneOffset",void 0),vV([yI()],e.prototype,"created",void 0),vV([yI()],e.prototype,"destroyed",void 0),vV([yI()],e.prototype,"navigated",void 0),vV([yI()],e.prototype,"renderDayCell",void 0),e=vV([bI],e),e})(),CV=(()=>{let e=class extends SV{constructor(e,t){super(e,t)}render(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&eO("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!XA(this.values)&&this.values.length>0){let e=[],t=[];for(let i=0;i<this.values.length;i++)-1===e.indexOf(+this.values[i])&&(e.push(+this.values[i]),t.push(this.values[i]));this.setProperties({values:t},!0);for(let i=0;i<this.values.length;i++)if(!this.checkDateValue(this.values[i]))if("string"==typeof this.values[i]&&this.checkDateValue(new Date(this.checkValue(this.values[i])))){let e=new Date(this.checkValue(this.values[i]));this.values.splice(i,1),this.values.splice(i,0,e)}else this.values.splice(i,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),super.render(),"calendar"===this.getModuleName()){let e=QD(this.element,"form");e&&GO.add(e,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()}isDayLightSaving(){let e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)}setTimeZone(e){if(!XA(this.serverTimezoneOffset)&&this.value){let t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}}formResetHandler(){this.setProperties({value:null},!0)}validateDate(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),super.validateDate(this.value),!XA(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)}minMaxUpdate(){"calendar"===this.getModuleName()&&(!XA(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!XA(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||XA(this.value)?super.minMaxUpdate(this.value):!XA(this.value)&&this.value<this.min&&this.min<=this.max?super.minMaxUpdate(this.min):!XA(this.value)&&this.value>this.max&&this.min<=this.max&&super.minMaxUpdate(this.max)}generateTodayVal(e){let t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t}todayButtonClick(){if(this.showTodayButton){let e=this.generateTodayVal(this.value);if(this.setProperties({value:e},!0),this.isMultiSelection){let t=this.copyValues(this.values);super.checkPresentDate(e,this.values)||(t.push(e),this.setProperties({values:t}))}super.todayButtonClick(new Date(+this.value))}}keyActionHandle(e){super.keyActionHandle(e,this.value,this.isMultiSelection)}preRender(){this.changeHandler=e=>{this.triggerChange(e)},this.checkView(),super.preRender(this.value)}createContent(){this.previousDate=this.value,this.previousDateTime=this.value,super.createContent()}minMaxDate(e){return super.minMaxDate(e)}renderMonths(e){super.renderMonths(e,this.value)}renderDays(e,t){let i=super.renderDays(e,t,this.value,this.isMultiSelection,this.values);return this.isMultiSelection&&super.validateValues(this.isMultiSelection,this.values),i}renderYears(e){"Gregorian"===this.calendarMode?super.renderYears(e,this.value):this.islamicModule.islamicRenderYears(e,this.value)}renderDecades(e){"Gregorian"===this.calendarMode?super.renderDecades(e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)}renderTemplate(e,t,i,n){"Gregorian"===this.calendarMode?super.renderTemplate(e,t,i,n,this.value):this.islamicModule.islamicRenderTemplate(e,t,i,n,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}clickHandler(e){let t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(yV))if(this.isMultiSelection){let t=this.copyValues(this.values);t.push(this.getIdValue(e,null)),this.setProperties({values:t},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(e,null)},!0);let i=this.currentView();super.clickHandler(e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!XA(this.tableBodyElement.querySelectorAll("."+wV)[0])&&"Year"===i&&this.tableBodyElement.querySelectorAll("."+wV)[0].classList.remove(wV)}switchView(e,t){super.switchView(e,t,this.isMultiSelection)}getModuleName(){return super.getModuleName(),"calendar"}getPersistData(){return super.getPersistData(),this.addOnPersist(["value","values"])}onPropertyChanged(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(let i of Object.keys(e))switch(i){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{let t=this.copyValues(this.values);for(let e=0;e<t.length;e++){let i=t[e];this.checkDateValue(i)&&!super.checkPresentDate(i,t)&&t.push(i)}this.setProperties({values:t},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;default:super.onPropertyChanged(e,t,this.isMultiSelection,this.values)}}destroy(){if(super.destroy(),"calendar"===this.getModuleName()){let e=QD(this.element,"form");e&&GO.remove(e,"reset",this.formResetHandler.bind(this))}}navigateTo(e,t){this.minMaxUpdate(),super.navigateTo(e,t)}currentView(){return super.currentView()}addDate(e){if("string"!=typeof e&&"number"!=typeof e){let t=this.copyValues(this.values);if("object"==typeof e&&e.length>0){let i=e;for(let e=0;e<i.length;e++)this.checkDateValue(i[e])&&!super.checkPresentDate(i[e],t)&&(!XA(t)&&t.length>0?t.push(i[e]):t=[new Date(+i[e])])}else this.checkDateValue(e)&&!super.checkPresentDate(e,t)&&(!XA(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}removeDate(e){if("string"!=typeof e&&"number"!=typeof e&&!XA(this.values)&&this.values.length>0){let t=this.copyValues(this.values);if("object"==typeof e&&e.length>0){let i=e;for(let e=0;e<i.length;e++)for(let n=0;n<t.length;n++)+t[n]==+i[e]&&t.splice(n,1)}else for(let i=0;i<t.length;i++)+t[i]==+e&&t.splice(i,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}update(){this.validateDate(),this.minMaxUpdate(),super.setValueUpdate()}selectDate(e,t,i){super.selectDate(e,t,i,this.isMultiSelection,this.values),this.isMultiSelection&&!XA(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)}changeEvent(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))}triggerChange(e){this.changedArgs.event=e||null,this.changedArgs.isInteracted=!XA(e),XA(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?XA(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)}};return vV([mI(null)],e.prototype,"value",void 0),vV([mI(null)],e.prototype,"values",void 0),vV([mI(!1)],e.prototype,"isMultiSelection",void 0),vV([yI()],e.prototype,"change",void 0),e=vV([bI],e),e})();var _V=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const EV=["title","class","style"];let TV=(()=>{let e=class extends CV{constructor(e,t){super(e,t),this.previousElementValue="",this.isDateIconClicked=!1,this.isAltKeyPressed=!1,this.isInteracted=!0,this.isBlazorServer=!1,this.invalidValueString=null,this.checkPreviousValue=null,this.datepickerOptions=e}render(){this.initialize(),this.bindEvents(),this.renderComplete(),this.isBlazorServer||this.setTimeZone(this.serverTimezoneOffset)}setTimeZone(e){if(!XA(this.serverTimezoneOffset)&&this.value){let t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}}isDayLightSaving(){let e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)}setAllowEdit(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):KD(this.inputElement,{readonly:""}),this.updateIconState()}updateIconState(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&HD([this.inputWrapper.container],["e-non-edit"]):""===this.inputElement.value?HD([this.inputWrapper.container],["e-non-edit"]):jD([this.inputWrapper.container],["e-non-edit"])}initialize(){if(this.isBlazorServer){let e=this.element.parentElement;this.inputWrapper={container:e,clearButton:e.querySelector(".e-clear-icon"),buttons:[e.querySelector(".e-date-icon")]},ON.bindInitialEvent({element:this.inputElement,floatLabelType:this.floatLabelType}),this.showClearButton&&this.inputWrapper.clearButton&&ON.wireClearBtnEvents(this.inputElement,this.inputWrapper.clearButton,this.inputWrapper.container),this.setAllowEdit()}else this.checkInvalidValue(this.value),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput();this.previousElementValue=this.inputElement.value,this.previousDate=XA(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value}createInput(){let e={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){let e={placeholder:this.placeholder};this.globalize=new OO(this.locale),this.l10n=new KI("datepicker",e,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}let t=this.cssClass;XA(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ON.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),KD(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),ON.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),jD([this.inputWrapper.container],"e-date-wrapper")}updateInput(){let e;if(this.value&&!this.isCalendar()&&(this.isBlazorServer||this.disabledDates()),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(super.validateDate(),this.minMaxUpdates(),super.minMaxUpdate()),!XA(this.value)){let t,i=this.value,n=XA(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?t=this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:n,type:"dateTime",skeleton:"yMd"}:{format:n,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(e="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.value,e)),+i<=+this.max&&+i>=+this.min)this.updateInputValue(t);else{let e=+i>=+this.max||!+this.value||!+this.value||+i<=+this.min;!this.strictMode&&e&&this.updateInputValue(t)}}XA(this.value)&&this.strictMode&&this.updateInputValue(""),!this.strictMode&&XA(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()}minMaxUpdates(){!XA(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!XA(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})}checkStringValue(e){let t=null,i=null,n=null;if("datetimepicker"===this.getModuleName()){let e=new OO(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},n={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(e,i)),XA(t)&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,n))),t}checkInvalidValue(e){if(!(e instanceof Date||XA(e))){let t=null,i=e;"number"==typeof e&&(i=e.toString());let n=null,s=null;if("datetimepicker"===this.getModuleName()){let e=new OO(this.locale);"Gregorian"===this.calendarMode?(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:e.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};let r=!1;if("string"!=typeof i)i=null,r=!0;else if("string"==typeof i&&(i=i.trim()),t=this.checkStringValue(i),!t){let e=null,n=null;e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,n=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!e.test(i)&&!n.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?r=!0:t=new Date(i)}r?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}}bindInputEvent(){XA(this.formatString)||(-1===this.formatString.indexOf("y")?GO.add(this.inputElement,"input",this.inputHandler,this):GO.remove(this.inputElement,"input",this.inputHandler))}bindEvents(){this.enabled?(GO.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler,this),GO.add(this.inputElement,"focus",this.inputFocusHandler,this),GO.add(this.inputElement,"blur",this.inputBlurHandler,this),this.bindInputEvent(),GO.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&GO.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&GO.add(this.formElement,"reset",this.resetFormHandler,this)):(GO.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler),GO.remove(this.inputElement,"focus",this.inputFocusHandler),GO.remove(this.inputElement,"blur",this.inputBlurHandler),GO.remove(this.inputElement,"change",this.inputChangeHandler),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&GO.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&GO.remove(this.formElement,"reset",this.resetFormHandler)),this.defaultKeyConfigs=KA(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new $I(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}resetFormHandler(){if(!this.inputElement.disabled){let e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.isBlazorServer||(this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass()))}}restoreValue(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=XA(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})}inputChangeHandler(e){e.stopPropagation()}bindClearEvent(){this.showClearButton&&this.inputWrapper.clearButton&&GO.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}resetHandler(e){e.preventDefault(),this.clear(e)}clear(e){this.isBlazorServer||this.setProperties({value:null},!0),this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.isBlazorServer||(this.updateInput(),this.popupUpdate(),this.changeEvent(e)),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnValueCleared")}preventEventBubbling(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")}updateInputValue(e){ON.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)}dateIconHandler(e){zO.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),this.isBlazorServer||e.preventDefault(),this.readonly||(this.isCalendar()&&!this.isBlazorServer?this.hide(e):(!this.isBlazorServer||this.isBlazorServer&&this.inputWrapper.container.nextElementSibling)&&(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),jD([this.inputWrapper.container],["e-input-focus"]),jD(this.inputWrapper.buttons,"e-active")))}updateHtmlAttributeToWrapper(){if(!XA(this.htmlAttributes))for(let e of Object.keys(this.htmlAttributes))if(!XA(this.htmlAttributes[e])&&EV.indexOf(e)>-1)if("class"===e){let t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&jD([this.inputWrapper.container],t.split(" "))}else if("style"===e){let t=this.inputWrapper.container.getAttribute(e);XA(t)?t=this.htmlAttributes[e]:";"===t.charAt(t.length-1)?t+=this.htmlAttributes[e]:t=t+";"+this.htmlAttributes[e],this.inputWrapper.container.setAttribute(e,t)}else this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}updateHtmlAttributeToElement(){if(!XA(this.htmlAttributes))for(let e of Object.keys(this.htmlAttributes))EV.indexOf(e)<0&&this.inputElement.setAttribute(e,this.htmlAttributes[e])}updateCssClass(e,t){XA(t)||(t=t.replace(/\s+/g," ").trim()),XA(e)||(e=e.replace(/\s+/g," ").trim()),ON.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&ON.setCssClass(e,[this.popupWrapper],t)}CalendarKeyActionHandle(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}}inputFocusHandler(){let e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&this.show()}inputHandler(e){this.isPopupClicked=!1}inputBlurHandler(e){this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),""===this.inputElement.value&&XA(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=KA(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new $I(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.CalendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}documentHandler(e){!XA(this.popupObj)&&(this.inputWrapper.container.contains(e.target)||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();let t=e.target;QD(t,".e-datepicker.e-popup-wrapper")||QD(t,".e-input-group")===this.inputWrapper.container||t.classList.contains("e-day")?QD(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!XA(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&QD(t,".e-content")&&QD(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())||QD(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+super.generateTodayVal(this.value)&&!this.isBlazorServer)&&this.hide(e):(this.hide(e),this.focusOut())}inputKeyActionHandle(e){let t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e)),"datepicker"===this.getModuleName()&&(this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnPopupHide",!0):this.show(null,e));break;case"escape":this.hide(e);break;case"enter":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}}defaultAction(e){this.previousDate=!XA(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(super.keyActionHandle(e),this.isBlazorServer||KD(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))}popupUpdate(){if((XA(this.value)&&!XA(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll(".e-selected").length>0&&HD(this.popupObj.element.querySelectorAll(".e-selected"),["e-selected"]),!XA(this.value)&&!this.isBlazorServer&&+this.value>=+this.min&&+this.value<=+this.max)){let e=new Date(this.checkValue(this.value));super.navigateTo("Month",e)}}strictModeUpdate(){let e,t,i,n;e="datetimepicker"===this.getModuleName()?XA(this.formatString)?this.dateTimeFormat:this.formatString:XA(this.formatString)?this.formatString:this.formatString.replace("dd","d"),XA(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),"datetimepicker"===this.getModuleName()?i="Gregorian"===this.calendarMode?{format:XA(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:XA(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=t),"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?n=this.globalize.parseDate(this.inputElement.value,i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.parseDate(this.inputElement.value,t)):(n=this.globalize.parseDate(this.inputElement.value,i),!XA(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&n.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&n&&n.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&n?(this.updateInputValue(this.globalize.formatDate(n,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0),this.strictMode&&!n&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),XA(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))}createCalendar(){this.isBlazorServer?(this.popupWrapper=this.inputWrapper.container.nextElementSibling,this.calendarElement=this.popupWrapper.firstElementChild,this.tableBodyElement=XD("tbody",this.calendarElement),this.contentElement=XD(".e-content",this.calendarElement)):(this.popupWrapper=this.createElement("div",{className:"e-datepicker e-popup-wrapper"}),XA(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass)),zO.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className="e-datepicker e-date-modal",document.body.className+=" e-date-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new dP(this.popupWrapper,{content:this.isBlazorServer?null:this.calendarElement,relateTo:zO.isDevice?document.body:this.inputWrapper.container,position:zO.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:zO.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:()=>{"datetimepicker"!==this.getModuleName()&&document.activeElement!==this.inputElement&&(this.defaultKeyConfigs=KA(this.defaultKeyConfigs,this.keyConfigs),this.calendarElement.children[1].firstElementChild.focus(),this.calendarKeyboardModules=new $I(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.CalendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.calendarKeyboardModules=new $I(this.inputWrapper.container.children[this.index],{eventName:"keydown",keyAction:this.CalendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}))},close:()=>{this.isDateIconClicked&&this.inputWrapper.container.children[this.index].focus(),this.value&&!this.isBlazorServer&&this.disabledDates(),this.popupObj&&this.popupObj.destroy(),YD(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.setAriaAttributes()},targetExitViewport:()=>{zO.isDevice||this.hide()}}),this.isBlazorServer||(this.popupObj.element.className+=" "+this.cssClass),this.setAriaAttributes()}setAriaDisabled(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)}modelHeader(){let e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),n=this.createElement("div"),s=this.createElement("span",{className:"e-model-day"}),r=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},s.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},r.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),n.appendChild(s),n.appendChild(r),t.appendChild(n),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)}changeTrigger(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!XA(e),this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)}navigatedEvent(){this.trigger("navigated",this.navigatedArgs)}changeEvent(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())}requiredModules(){let e=[];return this&&e.push({args:[this],member:"islamic"}),e}selectCalendar(e){let t,i,n;i="datetimepicker"===this.getModuleName()&&XA(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(n="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n)):(n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n))),XA(t)||this.updateInputValue(t)}isCalendar(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-popup-wrapper"))}setWidth(e){this.inputWrapper.container.style.width="number"==typeof e?tO(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:tO(this.width):"100%"}show(e,t){if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){let e,i=!0;XA(this.value)||+this.value>=+this.min&&+this.value<=+this.max?e=this.value||null:(e=new Date(this.checkValue(this.value)),this.isBlazorServer||this.setProperties({value:null},!0)),this.isCalendar()||(this.isBlazorServer||(super.render(),this.setProperties({value:e||null},!0)),this.previousDate=e,this.createCalendar()),zO.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:()=>{i=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:zO.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,e=>{this.preventArgs=e,i&&!this.preventArgs.cancel?(this.isBlazorServer&&(this.popupWrapper.style.visibility="",this.popupWrapper.style.width="auto",this.popupWrapper.style.height="auto"),jD(this.inputWrapper.buttons,"e-active"),this.preventArgs.appendTo.appendChild(this.popupWrapper),this.popupObj.refreshPosition(this.inputElement),this.popupObj.show(new _I({name:"FadeIn",duration:zO.isDevice?0:300}),1e3===this.zIndex?this.element:null),this.isBlazorServer||super.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,zO.isDevice),this.setAriaAttributes()):(this.popupObj.destroy(),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),this.popupWrapper=this.popupObj=null),XA(this.inputElement)||""!==this.inputElement.value||!XA(this.tableBodyElement)&&this.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(jD([this.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),HD(this.tableBodyElement.querySelectorAll("td.e-selected"),"e-selected")),GO.add(document,"mousedown touchstart",this.documentHandler,this)})}}hide(e){if(XA(this.popupWrapper))zO.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{let t=!0;this.preventArgs={preventDefault:()=>{t=!1},popup:this.popupObj,event:e||null,cancel:!1},HD(this.inputWrapper.buttons,"e-active"),HD([document.body],"e-date-overflow");let i=this.preventArgs;this.isCalendar()?this.trigger("close",i,e=>{this.closeEventCallback(t,e)}):this.closeEventCallback(t,i)}}closeEventCallback(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.isBlazorServer?(this.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),this.isAltKeyPressed=!1,this.popupWrapper=this.popupObj=null):(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy()),HD(this.inputWrapper.buttons,"e-active")),this.setAriaAttributes(),zO.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),zO.isDevice&&(XA(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),GO.remove(document,"mousedown touchstart",this.documentHandler),zO.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}focusIn(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),jD([this.inputWrapper.container],["e-input-focus"]))}focusOut(){document.activeElement===this.inputElement&&(HD([this.inputWrapper.container],["e-input-focus"]),this.inputElement.blur())}currentView(){let e;return this.calendarElement&&(e=super.currentView()),e}navigateTo(e,t){this.calendarElement&&super.navigateTo(e,t)}destroy(){this.isBlazorServer||(super.destroy(),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&super.destroy()),this.inputElement&&(ON.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),XA(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),GO.remove(this.inputElement,"blur",this.inputBlurHandler),GO.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&YD(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.isBlazorServer||this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),HD([this.inputElement],["e-input"])),HD([this.element],["e-datepicker"]),YD(this.inputWrapper.container)),this.formElement&&GO.remove(this.formElement,"reset",this.resetFormHandler)}ensureInputAttribute(){let e=[];for(let t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(let t=0;t<e.length;t++)XA(this.inputElementCopy.getAttribute(e[t]))?("value"===e[t].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):("value"===e[t].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))}preRender(){this.inputElementCopy=this.element.cloneNode(!0),HD([this.inputElementCopy],["e-datepicker","e-control","e-lib"]),this.inputElement=this.element,this.formElement=QD(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.isBlazorServer=!1,this.isBlazorServer||(this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=QA("ej2-datetimepicker"),null!==this.ngTag&&KD(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=QA("ej2-datepicker"),null!==this.ngTag&&KD(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement()),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.isBlazorServer||(this.element.removeAttribute("tabindex"),super.preRender())}getDefaultKeyConfig(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs}validationAttribute(e,t){let i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");let n=["required","aria-required","form"];for(let s=0;s<n.length;s++){if(XA(e.getAttribute(n[s])))continue;let i=e.getAttribute(n[s]);t.setAttribute(n[s],i),e.removeAttribute(n[s])}}checkFormat(){let e=new OO(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||XA(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{let t=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:t,type:"dateTime"}):e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null}checkHtmlAttributes(e){this.globalize=new OO(this.locale),this.checkFormat(),this.checkView();let t,i=e?XA(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];t="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:XA(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:XA(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(let n of i)if(!XA(this.inputElement.getAttribute(n)))switch(n){case"disabled":if((XA(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e)&&!this.isBlazorServer){let t="disabled"!==this.inputElement.getAttribute(n)&&""!==this.inputElement.getAttribute(n)&&"true"!==this.inputElement.getAttribute(n);this.setProperties({enabled:t},!e)}break;case"readonly":if((XA(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e)&&!this.isBlazorServer){let t="readonly"===this.inputElement.getAttribute(n)||""===this.inputElement.getAttribute(n)||"true"===this.inputElement.getAttribute(n);this.setProperties({readonly:t},!e)}break;case"placeholder":!XA(this.datepickerOptions)&&void 0!==this.datepickerOptions.placeholder&&!e||this.isBlazorServer||(this.inputElement.getAttribute(n),this.setProperties({placeholder:this.inputElement.getAttribute(n)},!e));break;case"style":this.isBlazorServer||this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(n));break;case"name":this.isBlazorServer||this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(n));break;case"value":if((XA(this.datepickerOptions)||void 0===this.datepickerOptions.value||e)&&!this.isBlazorServer){let i=this.inputElement.getAttribute(n);this.setProperties(zA(n,this.globalize.parseDate(i,t),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){let t=this.inputElement.getAttribute(n);this.setProperties(zA(n,this.globalize.parseDate(t),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){let t=this.inputElement.getAttribute(n);this.setProperties(zA(n,this.globalize.parseDate(t),{}),!e)}break;case"type":"text"===this.inputElement.getAttribute(n)||this.isBlazorServer||this.inputElement.setAttribute("type","text")}}getModuleName(){return"datepicker"}disabledDates(){let e,t,i;e=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value));let n=this.previousDate;this.minMaxUpdates(),this.isBlazorServer||super.render(),this.previousDate=n;let s,r='*[id^="/id"]'.replace("/id",""+(e&&+e));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+e)&&this.setProperties({value:e},!0),XA(this.calendarElement.querySelectorAll(r)[0])||this.calendarElement.querySelectorAll(r)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?(i=this.globalize.formatDate(e,"Gregorian"===this.calendarMode?{format:XA(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:XA(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),s=i):(t="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.formatDate(e,t)),this.popupObj||this.updateInputValue(s)}setAriaAttributes(){if(this.isBlazorServer)if(this.isCalendar()){let e=this.tableBodyElement.querySelector("tr td.e-focused-date"),t=this.tableBodyElement.querySelector("tr td.e-selected"),i=e||t?(e||t).getAttribute("id"):"null";KD(this.inputElement,{"aria-activedescendant":""+i})}else KD(this.inputElement,{"aria-activedescendant":"null"});else this.isCalendar()?(ON.addAttributes({"aria-expanded":"true"},this.inputElement),KD(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(ON.addAttributes({"aria-expanded":"false"},this.inputElement),KD(this.inputElement,{"aria-activedescendant":"null"}))}errorClass(){let e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!XA(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&XA(this.value)||t?(jD([this.inputWrapper.container],"e-error"),KD(this.inputElement,{"aria-invalid":"true"})):(HD([this.inputWrapper.container],"e-error"),KD(this.inputElement,{"aria-invalid":"false"}))}onPropertyChanged(e,t){let i;i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(let n of Object.keys(e)){switch(n){case"value":this.isInteracted=!1,this.invalidValueString=null,this.isBlazorServer||this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,this.isBlazorServer||(XA(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(),+this.previousDate!=+this.value&&this.changeTrigger(null)),this.isInteracted=!0;break;case"format":this.checkFormat(),this.bindInputEvent(),this.isBlazorServer||this.updateInput();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":ON.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":ON.setReadonly(this.readonly,this.inputElement);break;case"enabled":ON.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled(),this.bindEvents();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new OO(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ON.setPlaceholder(this.placeholder,this.inputElement),this.isBlazorServer||this.updateInput();break;case"enableRtl":ON.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&!this.isBlazorServer&&super.onPropertyChanged(e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":ON.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.isBlazorServer||this.updateInput();break;case"width":this.setWidth(e.width);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ON.removeFloating(this.inputWrapper),ON.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;default:this.calendarElement&&!this.isBlazorServer&&super.onPropertyChanged(e,t)}this.hide(null)}}};return _V([mI(null)],e.prototype,"width",void 0),_V([mI(null)],e.prototype,"value",void 0),_V([mI(null)],e.prototype,"cssClass",void 0),_V([mI(!1)],e.prototype,"strictMode",void 0),_V([mI(null)],e.prototype,"format",void 0),_V([mI(!0)],e.prototype,"enabled",void 0),_V([mI({})],e.prototype,"htmlAttributes",void 0),_V([mI(null)],e.prototype,"values",void 0),_V([mI(!1)],e.prototype,"isMultiSelection",void 0),_V([mI(!0)],e.prototype,"showClearButton",void 0),_V([mI(!0)],e.prototype,"allowEdit",void 0),_V([mI(null)],e.prototype,"keyConfigs",void 0),_V([mI(!1)],e.prototype,"enablePersistence",void 0),_V([mI(1e3)],e.prototype,"zIndex",void 0),_V([mI(!1)],e.prototype,"readonly",void 0),_V([mI(null)],e.prototype,"placeholder",void 0),_V([mI("Never")],e.prototype,"floatLabelType",void 0),_V([mI(null)],e.prototype,"serverTimezoneOffset",void 0),_V([mI(!1)],e.prototype,"openOnFocus",void 0),_V([yI()],e.prototype,"open",void 0),_V([yI()],e.prototype,"cleared",void 0),_V([yI()],e.prototype,"close",void 0),_V([yI()],e.prototype,"blur",void 0),_V([yI()],e.prototype,"focus",void 0),_V([yI()],e.prototype,"created",void 0),_V([yI()],e.prototype,"destroyed",void 0),e=_V([bI],e),e})();var xV;(xV||(xV={})).createListItems=function(e,t,i,n,s,r){let o,a,l=6e4*r,c=[],h=[];for(o=+t.setMilliseconds(0),a=+i.setMilliseconds(0);a>=o;)h.push(o),c.push(n.formatDate(new Date(o),{format:s,type:"time"})),o+=l;return{collection:h,list:LM.createList(e,c,null,!0)}};var kV=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const AV=(new Date).getDate(),OV=(new Date).getMonth(),DV=(new Date).getFullYear(),IV=(new Date).getHours(),RV=(new Date).getMinutes(),PV=(new Date).getSeconds(),MV=(new Date).getMilliseconds(),LV="e-datetimepicker";let NV=(()=>{let e=class extends TV{constructor(e,t){super(e,t),this.valueWithMinutes=null,this.dateTimeOptions=e}focusHandler(){jD([this.inputWrapper.container],"e-input-focus")}focusIn(){super.focusIn()}focusOut(){document.activeElement===this.inputElement&&(this.inputElement.blur(),HD([this.inputWrapper.container],["e-input-focus"]))}blurHandler(e){if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();HD([this.inputWrapper.container],"e-input-focus");let t={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}destroy(){this.popupObject&&this.popupObject.element.classList.contains("e-popup")&&(this.popupObject.destroy(),YD(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],XA(this.rippleFn)||this.rippleFn()),this.inputElement&&(ON.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false","aria-haspopup":"true","aria-activedescendant":"null",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.inputElement.removeAttribute("aria-placeholder")),this.isCalendar()&&(this.popupWrapper&&YD(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),super.destroy()}render(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,super.updateHtmlAttributeToElement(),this.checkAttributes(!1),this.l10n=new KI("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),super.render(),this.createInputElement(),super.updateHtmlAttributeToWrapper(),this.bindInputEvents(),this.setValue(),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.renderComplete()}setValue(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){let e=this.validateMinMaxRange(this.initValue);ON.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else XA(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,super.updateInput()}validateMinMaxRange(e){let t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t}checkValidState(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()}checkErrorState(){this.isValidState?HD([this.inputWrapper.container],"e-error"):jD([this.inputWrapper.container],"e-error"),KD(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})}validateValue(e){let t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t}disablePopupButton(e){e?(jD([this.inputWrapper.buttons[0],this.timeIcon],"e-disabled"),this.hide()):HD([this.inputWrapper.buttons[0],this.timeIcon],"e-disabled")}getFormattedValue(e){let t;return XA(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))}isDateObject(e){return!XA(e)&&!isNaN(+e)}createInputElement(){HD([this.inputElement],"e-datepicker"),HD([this.inputWrapper.container],"e-date-wrapper"),jD([this.inputWrapper.container],"e-datetime-wrapper"),jD([this.inputElement],LV),this.renderTimeIcon()}renderTimeIcon(){this.timeIcon=ON.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)}bindInputEvents(){GO.add(this.timeIcon,"mousedown",this.timeHandler,this),GO.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),GO.add(this.inputElement,"blur",this.blurHandler,this),GO.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=KA(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new $I(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})}unBindInputEvents(){GO.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),GO.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(GO.remove(this.inputElement,"blur",this.blurHandler),GO.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()}cldrTimeFormat(){let e;return e=this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?WA("timeFormats.short",IO()):this.getCultureTimeObject(xO,""+this.locale):this.timeFormat,e}cldrDateTimeFormat(){let e,t=new OO(this.locale).getDatePattern({skeleton:"yMd"});return e=this.isNullOrEmpty(this.formatString)?t+" "+this.getCldrFormat("time"):this.formatString,e}getCldrFormat(e){let t;return t="en"===this.locale||"en-US"===this.locale?WA("timeFormats.short",IO()):this.getCultureTimeObject(xO,""+this.locale),t}isNullOrEmpty(e){return!!(XA(e)||"string"==typeof e&&""===e.trim())}getCultureTimeObject(e,t){return WA("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)}timeHandler(e){zO.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&super.hide(e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),jD([this.inputWrapper.container],["e-input-focus"])))}dateHandler(e){e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),XA(this.popupWrapper)||this.popupCreation("date",e))}show(e,t){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(t),super.show(),this.popupCreation("date",t)):(this.isDatePopupOpen()&&this.hide(t),this.popupCreation("time",t)))}toggle(e){this.isDatePopupOpen()?(super.hide(e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),super.show(null,e),this.popupCreation("date",null)):this.show(null,e)}listCreation(){let e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});let t=XA(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=FD("div",{className:"e-content",attrs:{tabindex:"0"}});let i=this.startTime(t),n=this.endTime(t),s=xV.createListItems(this.createElement,i,n,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=s.collection,this.listTag=s.list,KD(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),zD([s.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=EI(this.listWrapper,{duration:300,selector:".e-list-item"}),this.liCollections=this.listWrapper.querySelectorAll(".e-list-item")}popupCreation(e,t){zO.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(jD([this.popupWrapper],"e-datetimepopup-wrapper"),KD(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=FD("div",{className:LV+" e-popup",attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),XA(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!XA(this.step)&&this.step>0&&(this.listCreation(),zD([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),this.popupObject.refreshPosition(this.inputElement))}openPopup(e){this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,e=>{this.preventArgs=e,this.preventArgs.cancel||this.readonly||(this.popupObject.show(new _I({name:"FadeIn",duration:100}),1e3===this.zIndex?this.element:null),jD([this.inputWrapper.container],["e-icon-anim"]),KD(this.inputElement,{"aria-expanded":"true"}),GO.add(document,"mousedown touchstart",this.documentClickHandler,this))})}documentClickHandler(e){let t=e.target;!XA(this.popupObject)&&(this.inputWrapper.container.contains(t)||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),QD(t,"#"+(this.popupObject&&this.popupObject.element.id))||t===this.inputElement||t===this.timeIcon||t===this.inputWrapper.container?t!==this.inputElement&&(zO.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(zO.isIE||"edge"===zO.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut()),this.openOnFocus&&this.show()}isTimePopupOpen(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+LV))}isDatePopupOpen(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-datetimepopup-wrapper"))}renderPopup(){this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),zO.isDevice&&(this.timeModal=FD("div"),this.timeModal.className=LV+" e-time-modal",document.body.className+=" e-time-overflow",this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new dP(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:zO.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:zO.isDevice?document.body:this.inputWrapper.container,position:zO.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:()=>{this.dateTimeWrapper.style.visibility="visible",jD([this.timeIcon],"e-active"),zO.isDevice||(this.timekeyConfigure=KA(this.timekeyConfigure,this.keyConfigs),this.inputEvent=new $I(this.inputWrapper.container,{keyAction:this.TimeKeyActionHandle.bind(this),keyConfigs:this.timekeyConfigure,eventName:"keydown"}))},close:()=>{HD([this.timeIcon],"e-active"),this.unWireTimeListEvents(),this.inputElement.setAttribute("aria-activedescendant","null"),$D(this.popupObject.element),this.popupObject.destroy(),this.dateTimeWrapper.innerHTML="",this.listWrapper=this.dateTimeWrapper=void 0,this.inputEvent&&this.inputEvent.destroy()},targetExitViewport:()=>{zO.isDevice||this.hide()}}),this.popupObject.element.style.maxHeight="250px"}setDimension(e){return"number"==typeof e?tO(e):"string"==typeof e?e:"100%"}setPopupWidth(){let e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e}wireTimeListEvents(){GO.add(this.listWrapper,"click",this.onMouseClick,this),zO.isDevice||(GO.add(this.listWrapper,"mouseover",this.onMouseOver,this),GO.add(this.listWrapper,"mouseout",this.onMouseLeave,this))}unWireTimeListEvents(){this.listWrapper&&(GO.remove(this.listWrapper,"click",this.onMouseClick),GO.remove(document,"mousedown touchstart",this.documentClickHandler),zO.isDevice||(GO.add(this.listWrapper,"mouseover",this.onMouseOver,this),GO.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))}onMouseOver(e){let t=QD(e.target,".e-list-item");this.setTimeHover(t,"e-hover")}onMouseLeave(){this.removeTimeHover("e-hover")}setTimeHover(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),jD([e],t))}getPopupHeight(){let e=parseInt("250px",10),t=this.dateTimeWrapper.getBoundingClientRect().height;return t>e?e:t}changeEvent(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(super.changeEvent(e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))}updateValue(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!XA(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.value)}setTimeScrollPosition(){let e;e=this.selectedElement,XA(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)}findScrollTop(e){let t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=n+e.offsetTop>t?i?n-(t/2+s/2):n:0}setScrollTo(){let e,t=this.dateTimeWrapper.querySelectorAll(".e-list-item");if(t.length>=0){let i=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;XA(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)}setInputValue(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{let e=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));ON.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0)}this.updateIconState()}getFullDateTime(){let e=null;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)}combineDateTime(e){if(this.isDateObject(e)){let t=this.previousDate.getDate(),i=this.previousDate.getMonth(),n=this.previousDate.getFullYear(),s=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return new Date(n,i,t,s,r,o)}return this.previousDate}onMouseClick(e){let t=this.selectedElement=QD(e.target,".e-list-item");t&&t.classList.contains("e-list-item")&&(this.timeValue=t.getAttribute("data-value"),this.hide(e)),this.setSelection(t,e)}setSelection(e,t){if(this.isValidLI(e)&&!e.classList.contains("e-active")){e.getAttribute("data-value"),this.selectedElement=e;let i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),jD([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}}setTimeActiveClass(){let e=XA(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!XA(e)){let t=e.querySelectorAll(".e-list-item");if(t.length)for(let e=0;e<t.length;e++)if(this.timeCollections[e]===+this.valueWithMinutes){t[e].setAttribute("aria-selected","true"),this.selectedElement=t[e],this.activeIndex=e,this.setTimeActiveDescendant();break}}}setTimeActiveDescendant(){XA(this.selectedElement)?KD(this.inputElement,{"aria-activedescendant":"null"}):KD(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})}addTimeSelection(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),XA(this.selectedElement)||(jD([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"))}removeTimeSelection(){if(this.removeTimeHover("e-hover"),!XA(this.dateTimeWrapper)){let e=this.dateTimeWrapper.querySelectorAll(".e-active");e.length&&(HD(e,"e-active"),e[0].removeAttribute("aria-selected"))}}removeTimeHover(e){let t=this.getTimeHoverItem(e);t&&t.length&&HD(t,e)}getTimeHoverItem(e){let t,i=XA(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return XA(i)||(t=i.querySelectorAll("."+e)),t}isValidLI(e){return e&&e.classList.contains("e-list-item")&&!e.classList.contains("e-disabled")}calculateStartEnd(e,t,i){let n=e.getDate(),s=e.getMonth(),r=e.getFullYear(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),c=e.getMilliseconds();return t?"starttime"===i?new Date(r,s,n,0,0,0):new Date(r,s,n,23,59,59):new Date(r,s,n,o,a,l,c)}startTime(e){let t,i,n,s=this.min;return n=null===e?new Date:e,+n.getDate()==+s.getDate()&&+n.getMonth()==+s.getMonth()&&+n.getFullYear()==+s.getFullYear()||+new Date(n.getFullYear(),n.getMonth(),n.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(i=!1,t=this.min):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")}endTime(e){let t,i,n,s=this.max;return n=null===e?new Date:e,+n.getDate()==+s.getDate()&&+n.getMonth()==+s.getMonth()&&+n.getFullYear()==+s.getFullYear()||+new Date(n.getUTCFullYear(),n.getMonth(),n.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(i=!1,t=this.max):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")}hide(e){if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};let t=this.preventArgs;XA(this.popupObj)?this.trigger("close",t,t=>{this.dateTimeCloseEventCallback(e,t)}):this.dateTimeCloseEventCallback(e,t)}else zO.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}dateTimeCloseEventCallback(e,t){this.preventArgs=t,this.preventArgs.cancel||(this.isDatePopupOpen()?super.hide(e):this.isTimePopupOpen()&&(this.closePopup(e),HD([document.body],"e-time-overflow"),zO.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),zO.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}closePopup(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new _I({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove("e-icon-anim"),KD(this.inputElement,{"aria-expanded":"false"}),GO.remove(document,"mousedown touchstart",this.documentClickHandler))}preRender(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),super.preRender(),HD([this.inputElementCopy],[LV])}getProperty(e,t){this.setProperties("min"===t?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)}checkAttributes(e){let t,i=e?XA(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];for(let n of i)if(!XA(this.inputElement.getAttribute(n)))switch(n){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(n));break;case"step":this.step=parseInt(this.inputElement.getAttribute(n),10);break;case"readonly":if(XA(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){let t="disabled"===this.inputElement.getAttribute(n)||""===this.inputElement.getAttribute(n)||"true"===this.inputElement.getAttribute(n);this.setProperties({readonly:t},!e)}break;case"placeholder":(XA(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(n)},!e);break;case"min":(XA(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(n)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({min:t},!e));break;case"disabled":if(XA(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){let t="disabled"!==this.inputElement.getAttribute(n)&&"true"!==this.inputElement.getAttribute(n)&&""!==this.inputElement.getAttribute(n);this.setProperties({enabled:t},!e)}break;case"value":(XA(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(n)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({value:t},!e));break;case"max":(XA(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(n)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({max:t},!e))}}requiredModules(){let e=[];return this&&e.push({args:[this],member:"islamic"}),e}getTimeActiveElement(){return XA(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll(".e-active")}createDateObj(e){return e instanceof Date?e:null}getDateObject(e){if(!this.isNullOrEmpty(e)){let t=this.createDateObj(e),i=this.valueWithMinutes,n=!XA(i);if(this.checkDateValue(t)){let e=n?i.getDate():AV,t=n?i.getMonth():OV,s=n?i.getFullYear():DV,r=n?i.getHours():IV,o=n?i.getMinutes():RV,a=n?i.getSeconds():PV,l=n?i.getMilliseconds():MV;return new Date(s,t,e,r,o,a,l)}}return null}findNextTimeElement(e){let t=this.inputElement.value,i=XA(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),n=null,s=this.liCollections.length;if(!XA(this.activeIndex)||!XA(this.checkDateValue(i))){if("home"===e.action)n=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)n=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(let e=0;e<s;e++)if(+i<this.timeCollections[e]){n=+this.createDateObj(new Date(this.timeCollections[e])),this.activeIndex=e;break}}else for(let e=s-1;e>=0;e--)if(+i>this.timeCollections[e]){n=+this.createDateObj(new Date(this.timeCollections[e])),this.activeIndex=e;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(XA(n)?null:new Date(n))}}setTimeValue(e,t){let i,n,s=this.validateMinMaxRange(t),r=this.createDateObj(s);return this.getFormattedValue(r)!==(XA(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=XA(r)?null:r,n=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=r),this.valueWithMinutes=this.checkDateValue(e),n=new Date(+this.valueWithMinutes)),i=this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:XA(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:XA(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&XA(n),ON.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),n}timeElementValue(e){if(!XA(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){let t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null}timeKeyHandler(e){if(XA(this.step)||this.step<=0)return;let t=this.timeCollections.length;if(XA(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(XA(this.value)&&XA(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{let i;if(e.keyCode>=37&&e.keyCode<=40){let n=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=n=this.activeIndex===t?0:this.activeIndex,this.activeIndex=n=this.activeIndex<0?t-1:this.activeIndex,i=XA(this.timeCollections[n])?this.timeCollections[0]:this.timeCollections[n]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}TimeKeyActionHandle(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),jD([this.inputWrapper.container],"e-input-focus"),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}}inputKeyAction(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e)}}onPropertyChanged(e,t){for(let i of Object.keys(e)){switch(i){case"value":this.cldrDateTimeFormat(),this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),ON.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null);break;case"min":case"max":this.getProperty(e,i),this.updateInput();break;case"enableRtl":ON.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":XA(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),XA(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),ON.setCssClass(e.cssClass,[this.inputWrapper.container],t.cssClass),this.dateTimeWrapper&&ON.setCssClass(e.cssClass,[this.dateTimeWrapper],t.cssClass);break;case"locale":this.globalize=new OO(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ON.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),super.updateInput();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue();break;case"placeholder":ON.setPlaceholder(e.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",e.placeholder);break;case"enabled":ON.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1),this.bindEvents();break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width);break;case"readonly":ON.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ON.removeFloating(this.inputWrapper),ON.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:e.scrollTo},!0)):this.setProperties({scrollTo:null},!0);break;default:super.onPropertyChanged(e,t)}this.hide(null)}}getModuleName(){return"datetimepicker"}restoreValue(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=XA(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)}};return kV([mI(null)],e.prototype,"timeFormat",void 0),kV([mI(30)],e.prototype,"step",void 0),kV([mI(null)],e.prototype,"scrollTo",void 0),kV([mI(1e3)],e.prototype,"zIndex",void 0),kV([mI(null)],e.prototype,"value",void 0),kV([mI(null)],e.prototype,"keyConfigs",void 0),kV([mI({})],e.prototype,"htmlAttributes",void 0),kV([mI(!1)],e.prototype,"enablePersistence",void 0),kV([mI(!0)],e.prototype,"allowEdit",void 0),kV([mI(!1)],e.prototype,"isMultiSelection",void 0),kV([mI(null)],e.prototype,"values",void 0),kV([mI(!0)],e.prototype,"showClearButton",void 0),kV([mI(null)],e.prototype,"placeholder",void 0),kV([mI(!1)],e.prototype,"strictMode",void 0),kV([mI(null)],e.prototype,"serverTimezoneOffset",void 0),kV([mI(new Date(1900,0,1))],e.prototype,"min",void 0),kV([mI(new Date(2099,11,31))],e.prototype,"max",void 0),kV([mI(null)],e.prototype,"firstDayOfWeek",void 0),kV([mI("Gregorian")],e.prototype,"calendarMode",void 0),kV([mI("Month")],e.prototype,"start",void 0),kV([mI("Month")],e.prototype,"depth",void 0),kV([mI(!1)],e.prototype,"weekNumber",void 0),kV([mI(!0)],e.prototype,"showTodayButton",void 0),kV([mI("Short")],e.prototype,"dayHeaderFormat",void 0),kV([mI(!1)],e.prototype,"openOnFocus",void 0),kV([yI()],e.prototype,"open",void 0),kV([yI()],e.prototype,"close",void 0),kV([yI()],e.prototype,"cleared",void 0),kV([yI()],e.prototype,"blur",void 0),kV([yI()],e.prototype,"focus",void 0),kV([yI()],e.prototype,"created",void 0),kV([yI()],e.prototype,"destroyed",void 0),e=kV([bI],e),e})(),VV="",BV="",FV=[],jV="";function HV(e,t,i,n){let s=t;n=null==n||n;let r={item:null,index:null};if(e&&e.length){let t=e.length,o=n?e.toLocaleLowerCase():e;for(let e=0,a=s;e<a.length;e++){let s=a[e],l=(n?s.textContent.toLocaleLowerCase():s.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&l===o||"StartsWith"===i&&l.substr(0,t)===o)return r.item=s,r.index=e,{item:s,index:e}}return r}return r}var UV=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let qV=(()=>{class e extends II{}return UV([mI()],e.prototype,"text",void 0),UV([mI()],e.prototype,"value",void 0),UV([mI()],e.prototype,"iconCss",void 0),UV([mI()],e.prototype,"groupBy",void 0),UV([mI()],e.prototype,"htmlAttributes",void 0),e})(),WV=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}getPropObject(e,t,i){let n=new Object,s=new Object;n[e]=t[e],s[e]=i[e];let r=new Object;return r.newProperty=n,r.oldProperty=s,r}getValueByText(e,t,i){let n=null;return XA(this.listData)||(n=this.checkValueCase(e,!!t,i)),n}checkValueCase(e,t,i,n){let s=null;n&&(s=e);let r=this.listData,o=this.fields,a=this.typeOfData(r).typeof;if("string"===a||"number"===a||"boolean"===a)for(let l of r)XA(l)||(i?s=this.checkingAccent(String(l),e,t):t?this.checkIgnoreCase(String(l),e)&&(s=this.getItemValue(String(l),e,t)):this.checkNonIgnoreCase(String(l),e)&&(s=this.getItemValue(String(l),e,t,n)));else r.filter(t?t=>{!XA(WA(o.value,t))&&this.checkIgnoreCase(WA(o.text,t).toString(),e)&&(s=WA(o.value,t))}:n?e=>{let t=WA(o.value,e);XA(t)||XA(s)||t.toString()!==s.toString()||(s=WA(o.text,e))}:t=>{this.checkNonIgnoreCase(WA(o.text,t),e)&&(s=WA(o.value,t))});return s}checkingAccent(e,t,i){let n=TM.ignoreDiacritics(String(e)),s=TM.ignoreDiacritics(t.toString()),r=null;return i?this.checkIgnoreCase(n,s)&&(r=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(r=this.getItemValue(String(e),t,i)),r}checkIgnoreCase(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()}checkNonIgnoreCase(e,t){return String(e)===t.toString()}getItemValue(e,t,i,n){let s=null,r=this.typeOfData(this.listData).typeof;return s=n?e.toString():i?"string"===r?String(e):this.getFormattedValue(String(e)):"string"===r?t:this.getFormattedValue(t),s}templateCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}l10nUpdate(e){let t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);let i,n=e?this.actionFailureTemplate:this.noRecordsTemplate,s=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="",i=bD(this.templateCompiler(n)?document.querySelector(n).innerHTML.trim():n);let r=e?"actionFailureTemplate":"noRecordsTemplate";for(let e of i({},this,r,s,this.isStringTemplate))t.appendChild(e);this.DropDownBaseupdateBlazorTemplates(!1,!1,!e,e,!1,!1,!1,!1)}else{let i={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},n=new KI(this.getLocaleName(),{},this.locale);this.l10n=""!==n.getConstant("actionFailureTemplate")?n:new KI("listbox"===this.getModuleName()?"listbox":"dropdowns",i,this.locale);let s=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){let e=this.createElement("li");e.textContent=s,t.appendChild(e),e.classList.add("e-list-nrt")}else t.innerHTML=s}}getLocaleName(){return"drop-down-base"}getTextByValue(e){let t;return t=this.checkValueCase(e,!1,!1,!0),t}getFormattedValue(e){if(this.listData&&this.listData.length){let t=this.typeOfData(this.listData);if("null"===e)return null;if("number"==typeof WA(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof WA(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e}return e}setEnableRtl(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?jD(this.enableRtlElements,"e-rtl"):HD(this.enableRtlElements,"e-rtl")}initialize(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){let e=LM.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!XA(this.dataSource))||this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}DropDownBaseupdateBlazorTemplates(e,t,i,n,s,r,o,a){}DropDownBaseresetBlazorTemplates(e,t,i,n,s,r,o){this.isStringTemplate||(this.itemTemplate&&e&&wD(this.itemTemplateId),this.groupTemplate&&t&&wD(this.groupTemplateId),this.noRecordsTemplate&&i&&wD(this.noRecordsTemplateId),this.actionFailureTemplate&&n&&wD(this.actionFailureTemplateId),s&&wD(this.valueTemplateId),r&&wD(this.headerTemplateId),o&&wD(this.footerTemplateId))}getPersistData(){return this.addOnPersist([])}setEnabled(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}updateDataAttribute(e){let t=["class","style","id","type"],i={};for(let n=0;n<this.element.attributes.length;n++)-1!==t.indexOf(this.element.attributes[n].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[n].name||(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));KA(i,e,i),this.setProperties({htmlAttributes:i},!0)}renderItemsBySelect(){let e=this.element,t={value:"value",text:"text"},i=[],n=e.querySelectorAll("select>optgroup"),s=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,s,t),n.length){for(let e=0;e<n.length;e++){let s=n[e],r={};r[t.text]=s.label,r.isHeader=!0;let o=s.querySelectorAll("option");i.push(r),this.getJSONfromOption(i,o,t)}e.querySelectorAll("select>option")}this.fields.text=t.text,this.fields.value=t.value,this.resetList(i,t)}getJSONfromOption(e,t,i){for(let n of t){let t={};t[i.text]=n.innerText,t[i.value]=n.getAttribute(i.value)?n.getAttribute(i.value):n.innerText,e.push(t)}}preRender(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"}setListData(e,t,i){let n;t=t||this.fields,this.isActive=!0,this.trigger("actionBegin",{cancel:!1,data:e,query:i},i=>{if(!i.cancel)if(this.showSpinner(),e instanceof RM){if(this.isRequested=!0,this.isDataFetched)return void this.emptyDataRequest(t);i.data.executeQuery(this.getQuery(i.query)).then(e=>{this.trigger("actionComplete",e,e=>{if(!e.cancel){let i=e.result;0===i.length&&(this.isDataFetched=!0),n=this.renderItems(i,t),this.onActionComplete(n,i,e),this.groupTemplate&&this.renderGroupTemplate(n),this.isRequested=!1,this.bindChildItems(i,n,t,e)}})}).catch(e=>{this.isRequested=!1,this.onActionFailure(e),this.hideSpinner()})}else{let e=new RM(i.data),s=this.getQuery(i.query).executeLocal(e);this.trigger("actionComplete",{cancel:!1,result:s},e=>{e.cancel||(n=this.renderItems(e.result,t),this.onActionComplete(n,e.result),this.groupTemplate&&this.renderGroupTemplate(n),this.bindChildItems(e.result,n,t))})}})}bindChildItems(e,t,i,n){e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(()=>{zD(this.remainingItems(this.sortedData,i),t),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.updateListValues(),this.raiseDataBound(e,n)},0):this.raiseDataBound(e,n)}updateListValues(){}findListElement(e,t,i,n){let s=null;if(e){let r=[].slice.call(e.querySelectorAll(t));for(let e=0;e<r.length;e++)if(r[e].getAttribute(i)===n+""){s=r[e];break}}return s}raiseDataBound(e,t){this.hideSpinner(),this.trigger("dataBound",{items:e,e:t})}remainingItems(e,t){let i=new RM(e).executeLocal((new _M).skip(100));if(this.itemTemplate){let e=this.templateListItem(i,t);return[].slice.call(e.childNodes)}let n=this.typeOfData(i).typeof;return"string"===n||"number"===n||"boolean"===n?LM.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t)):LM.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0)}emptyDataRequest(e){let t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()}showSpinner(){}hideSpinner(){}onActionFailure(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),jD([this.list],"e-nodata")}onActionComplete(e,t,i){this.listData=t,this.list.innerHTML="",this.fixedHeaderElement=XA(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)}postRender(e,t,i){let n=e.querySelector(".e-list-item"),s=e.querySelector(".e-active");n&&!s&&n.classList.add("e-item-focus"),t.length<=0?(this.l10nUpdate(),jD([e],"e-nodata")):e.classList.remove("e-nodata")}getQuery(e){return e||(this.query?this.query:new _M)}renderGroupTemplate(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector(".e-list-group-item")){let t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=e.querySelectorAll(".e-list-group-item");if(this.templateCompiler(this.groupTemplate)){let e=document.querySelector(this.groupTemplate).innerHTML.trim();LM.renderGroupTemplate(e,t,this.fields.properties,n,i)}else LM.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,n,i);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1,!1,!1,!1,!1)}}createListItems(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=LM.groupDataSource(e,t.properties,this.sortOrder)),jD([this.list],"e-dd-group")):e=this.getSortedDataSource(e);let i=this.listOption(e,t),n=e.length>100?new RM(e).executeLocal((new _M).take(100)):e;return this.sortedData=e,LM.createList(this.createElement,"autocomplete"===this.getModuleName()?n:e,i,!0)}listOption(e,t){let i=!XA(t.iconCss),n=XA(t.properties)?t:t.properties;return KA({},null!==t.text||null!==t.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t,!0)}setFloatingHeader(e){XA(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains("e-list-group-item")||(this.fixedHeaderElement.style.display="none"),WD([this.fixedHeaderElement],this.list),this.setFixedHeader()),XA(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)}scrollStop(e){let t=e.target,i=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),n=Math.round(t.scrollTop/i),s=this.list.querySelectorAll("li");for(let r=n;r>-1;r--){if(!XA(s[r])&&s[r].classList.contains("e-list-group-item")){this.fixedHeaderElement.innerHTML=s[r].innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}renderItems(e,t){let i;if(this.itemTemplate&&e){let n=e;n&&t.groupBy?("None"!==this.sortOrder&&(n=this.getSortedDataSource(n)),n=LM.groupDataSource(n,t.properties,this.sortOrder)):n=this.getSortedDataSource(n),this.sortedData=n;let s=n.length>100?new RM(n).executeLocal((new _M).take(100)):n;i=this.templateListItem("autocomplete"===this.getModuleName()?s:n,t);let r="listbox"===this.getModuleName();this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,r)}else i=this.createListItems(e,t);return i}templateListItem(e,t){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);let i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){let n=document.querySelector(this.itemTemplate).innerHTML.trim();return LM.renderContentTemplate(this.createElement,n,e,t.properties,i)}return LM.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i)}typeOfData(e){for(let t=0;!XA(e)&&t<e.length;t++)if(!XA(e[t])&&!XA("string"==typeof e[t]||"number"==typeof e[t]||"boolean"==typeof e[t]?e[t]:WA(this.fields.value?this.fields.value:"value",e[t])))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}setFixedHeader(){this.list.parentElement.style.display="block";let e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10)),this.fixedHeaderElement.style.width=(this.liCollections[0].offsetWidth-e).toString()+"px",ZD(this.fixedHeaderElement,{zIndex:10});let t=this.ulElement.querySelector(".e-list-group-item");this.fixedHeaderElement.innerHTML=t.innerHTML}getSortedDataSource(e){return e&&"None"!==this.sortOrder&&(e=LM.getDataSource(e,LM.addSorting(this.sortOrder,this.fields.text?this.fields.text:"text"))),e}getIndexByValue(e){let t,i=this.getItems();for(let n=0;n<i.length;n++)if(!XA(e)&&i[n].getAttribute("data-value")===e.toString()){t=n;break}return t}dispatchEvent(e,t){let i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}setFields(){this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!this.fields.value&&this.fields.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")}resetList(e,t,i){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!XA(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),this.setListData(e,t,i))}updateSelectElementData(e){e&&XA(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}updateSelection(){}renderList(){this.render()}updateDataSource(e){this.resetList(this.dataSource)}setUpdateInitial(e,t){this.isDataFetched=!1;let i={};for(let n=0;e.length>n;n++)t[e[n]]&&"fields"===e[n]?this.setFields():t[e[n]]&&(i[e[n]]=t[e[n]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))}onPropertyChanged(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(let i of Object.keys(e))switch(i){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){let e=this.ulElement.querySelector(".e-list-group-item");this.fixedHeaderElement.innerHTML=e.innerHTML}break;case"locale":this.list&&!XA(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}render(e){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add("e-dropdownbase"),this.setFields(),this.rippleFun=EI(this.list,{duration:300,selector:".e-list-item"});let t=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&XA(t)||this.isGroupChecking||GO.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),HD([this.element],"e-dropdownbase"),this.element.style.display="none";let e=this.createElement("div");this.element.parentElement.insertBefore(e,this.element),e.appendChild(this.element),e.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()}getModuleName(){return"dropdownbase"}getItems(){return this.ulElement.querySelectorAll(".e-list-item")}addItem(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&XA(t)){let i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),this.fields.groupBy?(i=LM.groupDataSource(i,this.fields.properties,this.sortOrder),t=i.indexOf(e)):t=i.indexOf(e)}this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);let i,n=this.getItems().length,s=this.list.querySelector(".e-active");e=e instanceof Array?e:[e],i=XA(t)||t<0||t>n-1?n:t;let r=this.fields;e&&r.groupBy&&(e=LM.groupDataSource(e,r.properties));let o=[];for(let a=0;a<e.length;a++){let t=e[a],n=t.isHeader,s=this.createElement("li",{className:n?"e-list-group-item":"e-list-item",id:"option-add-"+a}),l=t instanceof Object?WA(r.text,t):t;n&&(s.innerText=l),this.itemTemplate&&!n?(zD(bD(this.itemTemplate)(t,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate),s),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)):n||s.appendChild(document.createTextNode(l)),s.setAttribute("data-value",t instanceof Object?WA(r.value,t):t),s.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:s}),o.push(s),this.listData.push(t),this.updateActionCompleteData(s,t,i),this.trigger("beforeItemRender",{element:s,item:t})}if(0===n&&XA(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=o,zD(o,this.ulElement),this.updateAddItemList(this.list,n);else{"listbox"===this.getModuleName()&&0===n&&(this.ulElement.innerHTML="");let s=[];for(let n=0;n<e.length;n++){let e=this.ulElement.querySelectorAll(".e-list-group-item");for(let t=0;t<e.length;t++)s[t]=e[t].innerText;if(s.indexOf(o[n].innerText)>-1&&r.groupBy){for(let i=0;i<e.length;i++)if(s[i]===o[n].innerText){this.ulElement.insertBefore(o[n+1],"None"===this.sortOrder?e[i+1]:this.ulElement.childNodes[t]),n+=1;break}}else this.liCollections[i]?this.liCollections[i].parentNode.insertBefore(o[n],this.liCollections[i]):this.ulElement.appendChild(o[n]);let a=[].slice.call(this.liCollections);a.splice(i,0,o[n]),this.liCollections=a,i+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(s||0===t)&&this.updateSelection()}validationAttribute(e,t){let i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");let n=["required","aria-required","form"];for(let s=0;s<n.length;s++){if(!e.getAttribute(n[s]))continue;let i=e.getAttribute(n[s]);t.setAttribute(n[s],i),e.removeAttribute(n[s])}}setZIndex(){}updateActionCompleteData(e,t,i){}updateAddItemList(e,t){}updateDataList(){}getDataByValue(e){if(!XA(this.listData)){let t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t){for(let t of this.listData)if(!XA(t)&&t===e)return t}else for(let i of this.listData)if(!XA(i)&&WA(this.fields.value?this.fields.value:"value",i)===e)return i}return null}destroy(){document.body.contains(this.list)&&(GO.remove(this.list,"scroll",this.setFloatingHeader),XA(this.rippleFun)||this.rippleFun(),YD(this.list)),super.destroy()}};return UV([gI({text:null,value:null,iconCss:null,groupBy:null},qV)],e.prototype,"fields",void 0),UV([mI(!1)],e.prototype,"enablePersistence",void 0),UV([mI(null)],e.prototype,"itemTemplate",void 0),UV([mI(null)],e.prototype,"groupTemplate",void 0),UV([mI("No records found")],e.prototype,"noRecordsTemplate",void 0),UV([mI("Request failed")],e.prototype,"actionFailureTemplate",void 0),UV([mI("None")],e.prototype,"sortOrder",void 0),UV([mI(!0)],e.prototype,"enabled",void 0),UV([mI([])],e.prototype,"dataSource",void 0),UV([mI(null)],e.prototype,"query",void 0),UV([mI("StartsWith")],e.prototype,"filterType",void 0),UV([mI(!0)],e.prototype,"ignoreCase",void 0),UV([mI(1e3)],e.prototype,"zIndex",void 0),UV([mI(!1)],e.prototype,"ignoreAccent",void 0),UV([mI()],e.prototype,"locale",void 0),UV([yI()],e.prototype,"actionBegin",void 0),UV([yI()],e.prototype,"actionComplete",void 0),UV([yI()],e.prototype,"actionFailure",void 0),UV([yI()],e.prototype,"select",void 0),UV([yI()],e.prototype,"dataBound",void 0),UV([yI()],e.prototype,"created",void 0),UV([yI()],e.prototype,"destroyed",void 0),e=UV([bI],e),e})();var zV=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const GV={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:"e-list-item",disable:"e-disabled",base:"e-dropdownbase",focus:"e-item-focus",input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"};let YV={container:null,buttons:[]},$V=(()=>{let e=class extends WV{constructor(e,t){super(e,t),this.previousValue=null}preRender(){this.isServerBlazor=!1,this.isServerBlazor?this.initializeData():(this.element.style.opacity="0",this.initializeData(),super.preRender()),this.activeIndex=this.index,this.queryString=""}initializeData(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}renderList(e){this.isServerBlazor?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):(super.render(e),this.wireListEvents())}floatLabelChange(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){let e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?eI(e,["e-label-top"],["e-label-bottom"]):eI(e,["e-label-bottom"],["e-label-top"])}}resetHandler(e){e.preventDefault(),this.clearAll(e)}resetFocusElement(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!XA(this.ulElement)){let e=this.ulElement.querySelector("."+GV.li);e&&e.classList.add(GV.focus)}}clearAll(e,t){!XA(t)&&(XA(t)||!XA(t.dataSource)&&(t.dataSource instanceof RM||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));let i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)}resetSelection(e){if(this.list)if(XA(e)||!XA(e.dataSource)&&(e.dataSource instanceof RM||0!==e.dataSource.length)){if(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!XA(this.actionCompleteData.ulElement)&&!XA(this.actionCompleteData.list)){let e=this.actionCompleteData.ulElement.querySelector("li"),t=this.ulElement&&this.ulElement.querySelector("li");"EJS-COMBOBOX"===this.element.tagName&&e&&t&&e.childElementCount>0&&t.childElementCount>0&&e.textContent!==t.textContent&&this.itemTemplate&&this.cloneElements(),this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list)}this.resetFocusElement()}else this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource);this.isServerBlazor||(this.hiddenElement.innerHTML=""),this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(YD(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}setHTMLAttributes(){if(Object.keys(this.htmlAttributes).length)for(let e of Object.keys(this.htmlAttributes))if("class"===e){let t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&jD([this.inputWrapper.container],t.split(" "))}else if("disabled"===e&&"disabled"===this.htmlAttributes[e])this.enabled=!1,this.setEnable();else if("readonly"!==e||XA(this.htmlAttributes[e]))if("style"===e)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[e]);else{let t=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],i=["name","required"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||t.push("tabindex"),0===e.indexOf("data")||i.indexOf(e)>-1?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):t.indexOf(e)>-1?"placeholder"===e?ON.setPlaceholder(this.htmlAttributes[e],this.inputElement):this.inputElement.setAttribute(e,this.htmlAttributes[e]):this.inputWrapper.container.setAttribute(e,this.htmlAttributes[e])}else this.readonly=!0,this.dataBind();"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}setEnableRtl(){ON.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}setEnable(){ON.setEnabled(this.enabled,this.inputElement),this.enabled?(HD([this.inputWrapper.container],GV.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),jD([this.inputWrapper.container],GV.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}getPersistData(){return this.addOnPersist(["value"])}getLocaleName(){return"drop-down-list"}preventTabIndex(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)}targetElement(){return this.inputWrapper.container}getNgDirective(){return"EJS-DROPDOWNLIST"}getElementByText(e){return this.getElementByValue(this.getValueByText(e))}getElementByValue(e){let t,i=this.getItems();for(let n of i)if(this.getFormattedValue(n.getAttribute("data-value"))===e){t=n;break}return t}initValue(){this.renderList(),this.dataSource instanceof RM?this.initRemoteRender=!0:this.updateValues()}updateValues(){if(XA(this.value))if(this.text&&XA(this.value)){let e=this.getElementByText(this.text);if(XA(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ON.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onBlur(e){if(!this.enabled)return;let t=e.relatedTarget,i=e.target,n=this.isPreventBlur;this.isPreventBlur=!1,!n||this.isDocumentClick||!this.isPopupOpen||XA(i)&&(this.isFilterLayout()||!XA(t))?this.isDocumentClick||!XA(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(GV.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(GV.inputFocus))||XA(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}focusOutAction(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()}onFocusOut(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&jD([this.inputWrapper.clearButton],GV.clearIconHide),this.trigger("blur"))}onFocus(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()}resetValueHandler(e){let t=QD(this.inputElement,"form");if(t&&e.target===t){let e=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=e}}wireEvent(){GO.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),GO.add(this.inputWrapper.container,"focus",this.focusIn,this),GO.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}bindCommonEvent(){GO.add(this.targetElement(),"blur",this.onBlur,this);let e=QD(this.inputElement,"form");e&&GO.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new $I(this.targetElement(),zO.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}bindClearEvent(){this.showClearButton&&GO.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}unBindCommonEvent(){GO.remove(this.targetElement(),"blur",this.onBlur);let e=QD(this.inputElement,"form");e&&GO.remove(e,"reset",this.resetValueHandler),zO.isDevice||this.keyboardModule.destroy(),this.showClearButton&&GO.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}updateIconState(){this.showClearButton&&(""===this.inputElement.value||this.readonly?jD([this.inputWrapper.clearButton],GV.clearIconHide):HD([this.inputWrapper.clearButton],GV.clearIconHide))}wireListEvents(){GO.add(this.list,"click",this.onMouseClick,this),GO.add(this.list,"mouseover",this.onMouseOver,this),GO.add(this.list,"mouseout",this.onMouseLeave,this)}onSearch(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&(this.isServerBlazor?(this.isServerIncrementalSearch=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1)):this.renderList()),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))}onServerIncrementalSearch(e){this.isRequested||XA(this.list)||XA(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)}onMouseClick(e){let t=QD(e.target,".e-list-item");this.isValidLI(t)&&(this.setSelection(t,e),zO.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}onMouseOver(e){let t=QD(e.target,".e-list-item");this.setHover(t)}setHover(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),jD([e],"e-hover"))}onMouseLeave(e){this.removeHover()}removeHover(){if(this.list){let e=this.isServerBlazor&&this.popupObj&&this.popupObj.element?this.popupObj.element.querySelectorAll(".e-hover"):this.list.querySelectorAll(".e-hover");e&&e.length&&HD(e,"e-hover")}}isValidLI(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")}incrementalSearch(e){if(this.liCollections.length>0){let t=function(e,t,i,n,s,r){let o;if(VV+=String.fromCharCode(e),setTimeout(()=>{VV=""},1e3),VV=VV.toLowerCase(),jV===s&&BV===VV){for(let e=0;e<FV.length;e++)if(FV[e].classList.contains("e-active")){o=e;break}return o+=1,FV[o]}{let e,n,a=t,l=VV.length,c=i=i?i+1:0;FV=[];do{c===a.length&&(c=-1),o=-1===c?0:c,n=a[o],e=r?n.textContent.trim().toLowerCase():n.innerText.toLowerCase(),e.substr(0,l)===VV&&FV.push(a[o]),c++}while(c!==i);return BV=VV,jV=s,FV[0]}}(e.charCode,this.liCollections,this.activeIndex,0,this.element.id,this.isServerBlazor);XA(t)||(this.setSelection(t,e),this.setScrollPosition())}}hideSpinner(){XA(this.spinnerElement)||(CM(this.spinnerElement),HD([this.spinnerElement],GV.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}showSpinner(){XA(this.spinnerElement)&&(this.spinnerElement=zO.isDevice&&!XA(this.filterInputObj)&&this.filterInputObj.buttons[1]||!XA(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],jD([this.spinnerElement],GV.disableIcon),cM({target:this.spinnerElement,width:zO.isDevice?"16px":"14px"},this.createElement),wM(this.spinnerElement))}keyActionHandler(e){if(!this.enabled)return;let t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;let n="down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action,s="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){let t="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||t||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),((!this.isServerBlazor||"open"!==e.action&&"space"!==e.action)&&XA(this.list)||!XA(this.liCollections)&&s&&0===this.liCollections.length||this.isRequested)&&(!this.isServerBlazor||!n))return;switch((t&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!s&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}updateUpDownAction(e){if(this.isServerBlazor&&XA(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;let t=this.list.querySelector("."+GV.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else{let t,i="down"===e.action?this.activeIndex+1:this.activeIndex-1,n=0;"autocomplete"===this.getModuleName()&&(n="down"===e.action&&XA(this.activeIndex)?0:this.liCollections.length-1,i=i<0?this.liCollections.length-1:i===this.liCollections.length?0:i),t=XA(this.activeIndex)?this.liCollections[n]:this.liCollections[i],XA(t)||this.setSelection(t,e)}e.preventDefault()}}updateHomeEndAction(e){if("dropdownlist"===this.getModuleName())if(this.isServerBlazor&&XA(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;let t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}}selectCurrentValueOnTab(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}mobileKeyActionHandler(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),XA(this.list)||!XA(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}}selectCurrentItem(e){if(this.isPopupOpen){let t=this.list.querySelector("."+GV.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()}isSelectFocusItem(e){return!XA(e)}getPageCount(){let e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))}pageUpSelection(e,t){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],t)}pageDownSelection(e,t){let i=this.getItems();this.setSelection(e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],t)}unWireEvent(){GO.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),GO.remove(this.inputWrapper.container,"keypress",this.onSearch),GO.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}unWireListEvents(){GO.remove(this.list,"click",this.onMouseClick),GO.remove(this.list,"mouseover",this.onMouseOver),GO.remove(this.list,"mouseout",this.onMouseLeave)}checkSelector(e){return"#"+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")}onDocumentClick(e){let t=e.target;if(!XA(this.popupObj)&&QD(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&zO.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(zO.isIE||"edge"===zO.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(GV.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;let t=this.isRequested;this.isInteracted=!1,this.hidePopup(e),t||(this.onFocusOut(),this.inputWrapper.container.classList.remove(GV.inputFocus))}}activeStateChange(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(GV.inputFocus))}focusDropDown(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)}dropDownClick(e){if(3===e.which||2===e.button)return;if(this.targetElement().classList.contains(GV.disable)||this.inputWrapper.clearButton===e.target)return;let t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());let t=this,i=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(()=>{t.cloneElements(),t.isSecondClick=!0},i)}}cloneElements(){if(this.list){let e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}}updateSelectedItem(e,t,i,n){this.removeSelection(),e.classList.add("e-active"),this.removeHover();let s=this.getFormattedValue(e.getAttribute("data-value")),r=this.getDataByValue(s);if(this.initial||i||XA(t))this.selectEventCallback(e,t,i,r,s),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerItemData",this.itemData),n&&this.setSelectOptions(e,t);else{let o=this.detachChanges(r);this.isSelected=!0,this.trigger("select",{e:t,item:e,itemData:o,isInteracted:!!t,cancel:!1},o=>{o.cancel?e.classList.remove("e-active"):(this.selectEventCallback(e,t,i,r,s),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerItemData",this.itemData),n&&this.setSelectOptions(e,t))})}}selectEventCallback(e,t,i,n,s){this.previousItemData=XA(this.itemData)?null:this.itemData,this.item=e,this.itemData=n;let r=this.list.querySelector(".e-item-focus");r&&HD([r],"e-item-focus"),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(s)}activeItem(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))}setValue(e){let t=this.getItemData();return ON.setValue(null===t.value?""!==t.text?t.text:null:t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerValueTemplate",t),this.valueTemplate&&null!==this.itemData&&!this.isServerBlazor?(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!0),this.setValueTemplate()):this.inputElement.previousSibling===this.valueTempElement&&(YD(this.valueTempElement),this.inputElement.style.display="block"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}setSelection(e,t){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)}setSelectOptions(e,t){this.list&&this.removeHover(),this.previousSelectedLI=XA(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||(this.isPopupOpen&&(KD(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&KD(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!XA(e)||this.isPopupOpen&&!XA(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||XA(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==zO.info.name&&(KD(this.inputElement,{"aria-label":this.inputElement.value}),KD(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}dropdownCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}setValueTemplate(){let e;this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:GV.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";let t=this.itemData;e=bD(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate);for(let i of e(t,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate))this.valueTempElement.appendChild(i);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!0,!0)}removeSelection(){if(this.list){let e=this.list.querySelectorAll(".e-active");e.length&&(HD(e,"e-active"),e[0].removeAttribute("aria-selected"))}}getItemData(){let e,t,i=this.fields,n=null;return n=this.itemData,XA(n)||(e=WA(i.value,n),t=WA(i.text,n)),{value:XA(n)||JA(e)?n:e,text:XA(n)||JA(e)?n:t}}onChangeEvent(e){let t=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:t.text,value:t.value},!0),this.detachChangeEvent(e)}detachChanges(e){let t;return t="string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e,t}detachChangeEvent(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=XA(this.text)?"":this.text,!this.initial){let t,i=this.detachChanges(this.itemData);t="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue(),this.trigger("change",{e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:t,isInteracted:!!e,value:this.value,element:this.element}),this.isServerBlazor&&this.enablePersistence&&this.interopAdaptor.invokeMethodAsync("ServerChange")}!XA(this.value)&&""!==this.value||"Always"===this.floatLabelType||HD([this.inputWrapper.container],"e-valid-input")}setHiddenValue(){if(XA(this.value))this.isServerBlazor||(this.hiddenElement.innerHTML="");else if(this.isServerBlazor&&this.hiddenElement.querySelector("option")){let e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else this.isServerBlazor||(this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString()))}onFilterUp(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}}onFilterDown(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}removeFillSelection(){if(this.isInteracted){let e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}}getQuery(e){let t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new _M;let i=""===this.typedString?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof RM||"string"!==n)&&"number"!==n&&this.fields.text?this.fields.text:"",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new _M);return t}getSelectionPoints(){let e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}}searchLists(e){if(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+GV.clearIcon)&&(this.filterInput.parentElement.querySelector("."+GV.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering())if(this.isServerBlazor)this.beforePopupOpen="combobox"===this.getModuleName()&&this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,""===this.filterInput.value&&"dropdownlist"!==this.getModuleName()?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value);else{let t={preventDefaultAction:!1,text:this.filterInput.value,updateData:(e,i,n)=>{t.cancel||(this.isCustomFilter=!0,this.filteringAction(e,i,n))},baseEventArgs:e,cancel:!1};this.trigger("filtering",t,e=>{e.cancel||this.isCustomFilter||e.preventDefaultAction||this.filteringAction(this.dataSource,null,this.fields)})}}filter(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)}filteringAction(e,t,i){XA(this.filterInput)||(this.beforePopupOpen=!0,""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,XA(this.actionCompleteData.ulElement)||XA(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,XA(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0))}setSearchBox(e){if(this.isFiltering()){let t=e.querySelector("."+GV.filterParent)?e.querySelector("."+GV.filterParent):this.createElement("span",{className:GV.filterParent});this.isServerBlazor&&(t.innerHTML=""),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:GV.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);let i=!1;return zO.isDevice&&(i=!0),this.filterInputObj=ON.createInput({element:this.filterInput,buttons:i?[GV.backIcon,GV.filterBarClearIcon]:[GV.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),XA(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?jD([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&jD([this.filterInputObj.container],"e-filled")),zD([this.filterInputObj.container],t),WD([t],e),KD(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+GV.clearIcon),!zO.isDevice&&this.clearIconElement&&(GO.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new $I(this.filterInput,zO.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),GO.add(this.filterInput,"input",this.onInput,this),GO.add(this.filterInput,"keyup",this.onFilterUp,this),GO.add(this.filterInput,"keydown",this.onFilterDown,this),GO.add(this.filterInput,"blur",this.onBlur,this),GO.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return YV}onInput(e){this.isValidKey=!0,zO.isDevice&&"mozilla"===zO.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))}pasteHandler(e){setTimeout(()=>{this.typedString=this.filterInput.value,this.searchLists(e)})}onActionFailure(e){super.onActionFailure(e),this.beforePopupOpen&&this.renderPopup()}onActionComplete(e,t,i,n){if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){let n=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!XA(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!XA(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,XA(e)||KD(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof RM)){let e=XA(this.fields.value)?this.fields.text:this.fields.value;t.some(t=>t[e]===this.value)||this.dataSource.executeQuery(this.getQuery(this.query).where(new EM(e,"equal",this.value))).then(e=>{e.result.length>0&&(this.addItem(e.result,t.length),this.updateValues())})}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||XA(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof RM||!XA(this.dataSource)&&!XA(this.dataSource.length)&&0!==this.dataSource.length))&&(this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0}),this.addNewItem(t,n),XA(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}addNewItem(e,t){if(!XA(this.itemData)&&!XA(t)){let t=this.getItemData().value;e.some(e=>("string"==typeof e||"number"==typeof e)&&e===t||WA(this.fields.value,e)===t)||this.addItem(this.itemData)}}updateActionCompleteData(e,t,i){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t))}focusIndexItem(){let e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);let t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()}updateSelection(){let e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector(".e-list-item").classList.add(GV.focus))}removeFocus(){let e=this.list.querySelectorAll("."+GV.focus);e&&e.length&&HD(e,GV.focus)}renderPopup(){this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},e=>{if(e.cancel)this.beforePopupOpen=!1;else{let e=this.serverPopupEle?this.serverPopupEle:this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup "+(null!=this.cssClass?this.cssClass:"")}),t=this.setSearchBox(e);if(this.listHeight=tO(this.popupHeight),this.headerTemplate&&!this.isServerBlazor&&this.setHeaderTemplate(e),zD([this.list],e),this.footerTemplate&&!this.isServerBlazor&&this.setFooterTemplate(e),this.isServerRendered&&e&&e.querySelector(".e-ddl-footer")&&e.appendChild(e.querySelector(".e-ddl-footer")),document.body.appendChild(e),this.updateServerPopup(e),e.style.visibility="hidden","auto"!==this.popupHeight){if(this.searchBoxHeight=0,XA(t.container)||(this.searchBoxHeight=t.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.headerTemplate||this.isServerRendered&&e&&e.querySelector(".e-ddl-header")){this.header=this.header?this.header:e.querySelector(".e-ddl-header");let t=Math.round(this.header.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"}if(this.footerTemplate||this.isServerRendered&&e&&e.querySelector(".e-ddl-footer")){this.footer=this.footer?this.footer:e.querySelector(".e-ddl-footer");let t=Math.round(this.footer.getBoundingClientRect().height);this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"}this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",e.style.maxHeight=tO(this.popupHeight)}else e.style.height="auto";let i,n=0;if(!XA(this.selectedLI)&&!XA(this.activeIndex)&&this.activeIndex>=0?this.setScrollPosition():this.list.scrollTop=0,zO.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){n=this.getOffsetValue(e);let t=this.isEmptyList()?this.list:this.liCollections[0];i=-(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))}this.getFocusElement(),this.createPopup(e,n,i),this.checkCollision(e),zO.isDevice&&(this.popupObj.element.classList.add(GV.device),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.isFilterLayout()&&(this.popupObj.element.classList.add(GV.mobileFilter),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),KD(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),jD([document.body,this.popupObj.element],GV.popupFullScreen),this.setSearchBoxPosition(),this.backIconElement=t.container.querySelector(".e-back-icon"),this.clearIconElement=t.container.querySelector("."+GV.clearIcon),GO.add(this.backIconElement,"click",this.clickOnBackIcon,this),GO.add(this.clearIconElement,"click",this.clearText,this))),e.style.visibility="visible",jD([e],"e-popup-close");let s=this.popupObj.getScrollableParent(this.inputWrapper.container);for(let o of s)GO.add(o,"scroll",this.scrollHandler,this);zO.isDevice&&this.isFilterLayout()&&GO.add(this.list,"scroll",this.listScroll,this),KD(this.targetElement(),{"aria-expanded":"true"}),jD([this.isFiltering()?this.filterInput.parentElement:this.inputWrapper.container],[GV.inputFocus]);let r={name:"FadeIn",duration:100};this.beforePopupOpen=!0,this.trigger("open",{popup:this.popupObj,cancel:!1,animation:r},e=>{e.cancel?(this.beforePopupOpen=!1,this.destroyPopup()):(this.serverBlazorUpdateSelection(),this.bindServerScrollEvent(),jD([this.inputWrapper.container],[GV.iconAnimation]),this.popupObj.show(new _I(e.animation),1e3===this.zIndex?this.element:null))})}})}checkCollision(e){(!zO.isDevice||zO.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(YR(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())}serverBlazorUpdateSelection(){(this.isServerBlazor&&(null!==this.value||null!==this.index||null!==this.text)||"dropdownlist"!==this.getModuleName()&&!this.isTyped)&&("dropdownlist"===this.getModuleName()&&(this.removeSelection(),this.removeFocus(),this.removeHover(),this.updateValues()),"combobox"===this.getModuleName()&&this.ulElement&&this.findListElement(this.ulElement,"li","data-value",this.value)&&!this.isTyped&&this.updateValues(),this.isServerBlazor&&"dropdownlist"!==this.getModuleName()&&(""===this.text||null===this.text)&&this.ulElement&&(this.ulElement.querySelector("li").classList.contains("e-hover")||jD([this.ulElement.querySelector("li")],"e-hover")))}bindServerScrollEvent(){this.isServerBlazor&&this.list&&this.fields.groupBy&&!this.isGroupChecking&&(GO.remove(this.list,"scroll",this.setFloatingHeader),GO.add(this.list,"scroll",this.setFloatingHeader,this))}updateServerPopup(e){this.isServerBlazor&&(e&&e.querySelector("li")&&HD([e.querySelector(".e-content")],["e-nodata"]),this.initial=!1,e.removeAttribute("style"))}getOffsetValue(e){let t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),n=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+n)}createPopup(e,t,i){this.popupObj=new dP(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:()=>{this.isDocumentClick||this.focusDropDown();let e="autocomplete"===this.getModuleName();this.DropDownBaseresetBlazorTemplates(e,e,!0,!0,!1,!0,!0),this.isNotSearchList=!1,this.isDocumentClick=!1,this.destroyPopup();let t=QD(this.inputElement,"form");this.isFiltering()&&t&&this.actionCompleteData.list&&this.actionCompleteData.list[0]&&(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0))},open:()=>{GO.add(document,"mousedown",this.onDocumentClick,this),this.isPopupOpen=!0;let e=this.actionCompleteData&&this.actionCompleteData.ulElement&&this.actionCompleteData.ulElement.querySelector("li"),t=this.list.querySelector("ul li");this.isFiltering()&&this.itemTemplate&&this.element.tagName===this.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&this.cloneElements(),this.isFilterLayout()&&(HD([this.inputWrapper.container],[GV.inputFocus]),this.isFilterFocus=!0,this.filterInput.focus(),this.inputWrapper.clearButton&&jD([this.inputWrapper.clearButton],GV.clearIconHide)),this.activeStateChange()},targetExitViewport:()=>{zO.isDevice||this.hidePopup()}})}isEmptyList(){return!XA(this.liCollections)&&0===this.liCollections.length}getFocusElement(){}isFilterLayout(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}scrollHandler(){zO.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}setSearchBoxPosition(){let e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";let t=this.filterInput.parentElement.querySelector("."+GV.clearIcon);YD(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)}setPopupPosition(e){let t,i=e,n=this.list.querySelector("."+GV.focus)||this.selectedLI,s=this.isEmptyList()?this.list:this.liCollections[0],r=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],o=s.getBoundingClientRect().height,a=this.list.offsetHeight/2,l=XA(n)?s.offsetTop:n.offsetTop;if(r.offsetTop-a<l&&!XA(this.liCollections)&&this.liCollections.length>0&&!XA(n)){let e=this.list.offsetHeight/o,s=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(e-(this.liCollections.length-this.activeIndex))*o-i+s,this.list.scrollTop=n.offsetTop}else l>a?(t=a-o/2,this.list.scrollTop=l-a+o/2):t=l;return t=t+o+i-(o-this.inputWrapper.container.offsetHeight)/2,-t}setWidth(){let e=tO(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),zO.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){let t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e}scrollBottom(e){if(!XA(this.selectedLI)){let t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+i-t;n=e?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;let s=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;s=this.fields.groupBy&&!XA(this.fixedHeaderElement)?s-this.fixedHeaderElement.offsetHeight:s,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(s>0&&this.list.offsetHeight>s))&&(this.list.scrollTop=n)}}scrollTop(){if(!XA(this.selectedLI)){let e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!XA(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;let t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!XA(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}isEditTextBox(){return!1}isFiltering(){return this.allowFiltering}isPopupButton(){return!0}setScrollPosition(e){if(XA(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}clearText(){this.filterInput.value="",this.searchLists(null)}listScroll(){this.filterInput.blur()}setEleWidth(e){XA(e)||("number"==typeof e?this.inputWrapper.container.style.width=tO(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:tO(e)))}closePopup(e){if(this.isTyped=!1,!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen))return;GO.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;let t=this.popupObj.getScrollableParent(this.inputWrapper.container);for(let i of t)GO.remove(i,"scroll",this.scrollHandler);zO.isDevice&&this.isFilterLayout()&&(HD([document.body,this.popupObj.element],GV.popupFullScreen),GO.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(zO.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&GO.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(GO.remove(this.backIconElement,"click",this.clickOnBackIcon),GO.remove(this.clearIconElement,"click",this.clearText)),GO.remove(this.filterInput,"input",this.onInput),GO.remove(this.filterInput,"keyup",this.onFilterUp),GO.remove(this.filterInput,"keydown",this.onFilterDown),GO.remove(this.filterInput,"blur",this.onBlur),GO.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),KD(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(GV.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0}},e=>{if(!XA(this.popupObj)&&!XA(this.popupObj.element.querySelector(".e-fixed-head"))){let e=this.popupObj.element.querySelector(".e-fixed-head");e.parentNode.removeChild(e),this.fixedHeaderElement=null}e.cancel||("autocomplete"!==this.getModuleName()||this.isServerBlazor||this.rippleFun(),this.isPopupOpen?this.popupObj.hide(new _I(e.animation)):this.destroyPopup())})}destroyPopup(){let e=document.querySelector("#"+this.element.id+"_popup_holder");this.isServerBlazor&&this.serverPopupEle&&e&&(e.appendChild(this.serverPopupEle),this.interopAdaptor.invokeMethodAsync("OnServerClosePopup")),this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),YD(this.popupObj.element)}clickOnBackIcon(){this.hidePopup(),this.focusIn()}render(){if(this.isServerBlazor)this.inputElement=this.element,this.inputWrapper={container:this.element.parentElement},this.hiddenElement=this.inputWrapper.container.querySelector("select"),this.inputWrapper.buttons=[this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon")],this.showClearButton&&(this.inputWrapper.clearButton=this.inputWrapper.container.querySelector(".e-clear-icon"),ON.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),"Auto"===this.floatLabelType&&ON.wireFloatingEvents(this.element),ON.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties}),this.setFields(),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.enabled||(this.targetElement().tabIndex=-1),this.element.hasAttribute("autofocus")&&this.focusIn(),this.initial=!1;else{"INPUT"===this.element.tagName?(this.inputElement=this.element,XA(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),XA(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));let e=this.cssClass;XA(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ON.createInput({element:this.inputElement,buttons:this.isPopupButton()?[GV.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:GV.hiddenElement}}),WD([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setFields(),this.inputWrapper.container.style.width=tO(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");let t=this.element.getAttribute("id")?this.element.getAttribute("id"):QA("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),KD(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){let e=this.element;this.value=e.options[e.selectedIndex].value,this.text=XA(this.value)?null:e.options[e.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=e=>{e.stopImmediatePropagation()},this.inputElement.onchange=e=>{e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),XA(this.text)||this.inputElement.setAttribute("value",this.text)}this.renderComplete()}setFooterTemplate(e){let t;this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),jD([this.footer],GV.footer)),t=bD(this.dropdownCompiler(this.footerTemplate)?document.querySelector(this.footerTemplate).innerHTML.trim():this.footerTemplate);for(let i of t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate))this.footer.appendChild(i);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),zD([this.footer],e)}setHeaderTemplate(e){let t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),jD([this.header],GV.header)),t=bD(this.dropdownCompiler(this.headerTemplate)?document.querySelector(this.headerTemplate).innerHTML.trim():this.headerTemplate);for(let n of t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate))this.header.appendChild(n);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1);let i=e.querySelector("div.e-content");e.insertBefore(this.header,i)}setOldText(e){this.text=e}setOldValue(e){this.value=e}refreshPopup(){XA(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||zO.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(HD([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}checkData(e){e.dataSource&&!XA(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1});let t=-1!==Object.keys(e).indexOf("value")&&XA(e.value),i=-1!==Object.keys(e).indexOf("text")&&XA(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null)}updateDataSource(e){""===this.inputElement.value&&(XA(e)||!XA(e.dataSource)&&(e.dataSource instanceof RM||0!==e.dataSource.length))||this.clearAll(null,e),(XA(e)||!XA(e.dataSource)&&(e.dataSource instanceof RM||0!==e.dataSource.length)||e.dataSource!==[])&&this.resetList(this.dataSource),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()}checkCustomValue(){this.itemData=this.getDataByValue(this.value);let e=this.getItemData();this.setProperties({value:e.value,text:e.text})}updateInputFields(){"dropdownlist"===this.getModuleName()&&ON.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}onPropertyChanged(e,t){"dropdownlist"===this.getModuleName()&&(this.isServerBlazor||(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e)));for(let i of Object.keys(e))switch(i){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":ON.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&ON.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&ON.setReadonly(e.readonly,this.inputElement);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof RM&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){let i=this.getElementByText(e.text);this.checkValidLi(i)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.text,t.text,"text"):this.isServerBlazor||this.setOldText(t.text)),this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof RM&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){let i=this.getElementByValue(e.value);this.checkValidLi(i)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.value,t.value,"value"):this.isServerBlazor||this.setOldValue(t.value)),this.updateInputFields()}break;case"index":if(null===e.index){this.clearAll();break}this.list||(this.dataSource instanceof RM&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[e.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,t.index,"index"):this.isServerBlazor||(this.index=t.index)),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":XA(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":ON.removeFloating(this.inputWrapper),ON.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":ON.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:let n;n=this.getPropObject(i,e,t),super.onPropertyChanged(n.newProperty,n.oldProperty)}}checkValidLi(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)}setSelectionData(e,t,i){let n;this.updateListValues=()=>{"text"===i?(n=this.getElementByText(e),this.checkValidLi(n)||this.setOldText(t)):"value"===i?(n=this.getElementByValue(e),this.checkValidLi(n)||this.setOldValue(t)):"index"===i&&(n=this.liCollections[e],this.checkValidLi(n)||(this.index=t))}}setCssClass(e,t){XA(t)||(t=t.replace(/\s+/g," ").trim()),XA(e)||(e=e.replace(/\s+/g," ").trim()),ON.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&ON.setCssClass(e,[this.popupObj.element],t)}getModuleName(){return"dropdownlist"}showPopup(){if(!this.enabled)return;if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(XA(this.list)||!JA(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll(".e-list-item").length<=0)||this.isFiltering()&&this.isServerBlazor)&&this.renderList(),this.isServerBlazor||this.invokeRenderPopup();let e=!this.isFiltering()||document.querySelector("#"+this.element.id+"_popup_holder"),t="dropdownlist"===this.getModuleName()||!this.isFiltering();this.isServerBlazor&&e&&!XA(this.list)&&t&&this.invokeRenderPopup()}invokeRenderPopup(){if(zO.isDevice&&this.isFilterLayout()){let e=this;window.onpopstate=()=>{e.hidePopup()},history.pushState({},"")}XA(this.list.children[0])&&!this.list.classList.contains("e-nodata")||this.renderPopup(),KD(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}clientRenderPopup(e,t){t?(this.serverPopupEle=t,this.list=t.querySelector(".e-dropdownbase.e-content")?t.querySelector(".e-dropdownbase.e-content"):this.list,this.ulElement=this.list.querySelector("ul"),XA(this.ulElement)&&!this.list.classList.contains("e-nodata")&&jD([this.list],["e-nodata"]),this.liCollections=this.ulElement?this.ulElement.querySelectorAll(".e-list-item"):[],this.listData=e,"autocomplete"===this.getModuleName()&&this.liCollections.length>0&&this.renderHightSearch(),this.initRemoteRender=!1,this.isPopupOpen||this.serverBlazorUpdateSelection(),this.unWireListEvents(),this.wireListEvents(),this.isServerIncrementalSearch&&this.searchKeyEvent&&(this.isServerIncrementalSearch=!1,this.initial=!1,this.onServerIncrementalSearch(this.searchKeyEvent)),this.isServerNavigation&&this.searchKeyEvent&&("down"===this.searchKeyEvent.action||"up"===this.searchKeyEvent.action?(this.isServerNavigation=!1,this.updateUpDownAction(this.searchKeyEvent)):"home"!==this.searchKeyEvent.action&&"end"!==this.searchKeyEvent.action||(this.isServerNavigation=!1,this.updateHomeEndAction(this.searchKeyEvent))),this.beforePopupOpen&&this.invokeRenderPopup(),"dropdownlist"!==this.getModuleName()&&this.onActionComplete(this.ulElement,this.listData)):null!=e&&this.listData!==e&&(this.listData=e,this.initRemoteRender=!1)}renderHightSearch(){}updateclientItemData(e){this.listData=e}initValueItemData(e){this.itemData=e,this.previousValue=this.value,this.initial=!1}serverUpdateListElement(e,t){this.listData=e,this.ulElement&&(this.liCollections=this.ulElement.querySelectorAll(".e-list-item"))}hidePopup(e){if(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!1,!!this.headerTemplate,!!this.headerTemplate),this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(ON.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,XA(this.index))this.resetSelection();else{let e=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||e,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();let t=this.getItemData(),i=this.isServerBlazor?!XA(this.value):!XA(this.selectedLI);""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||i&&this.inputElement.value!==t.text)&&(this.isSelectCustom=!1,this.clearAll(e))}focusIn(e){if(!this.enabled)return;if(this.targetElement().classList.contains(GV.disable))return;let t=!1;this.preventFocus&&zO.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),jD([this.inputWrapper.container],[GV.inputFocus]),this.onFocus(e)}focusOut(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement().blur(),HD([this.inputWrapper.container],[GV.inputFocus]))}destroy(){if(this.isActive=!1,(!this.isServerBlazor||this.popupObj&&document.body.contains(this.popupObj.element))&&this.hidePopup(),this.unWireEvent(),this.list&&(this.unWireListEvents(),this.isServerBlazor&&this.fields.groupBy&&!this.isGroupChecking&&GO.remove(this.list,"scroll",this.setFloatingHeader)),!this.isServerBlazor){if(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))return;let e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"];for(let t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ON.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),YD(this.inputWrapper.container),super.destroy()}}getItems(){return this.list||(this.dataSource instanceof RM&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?super.getItems():[]}getDataByValue(e){return super.getDataByValue(e)}clear(){this.value=null}};return zV([mI(null)],e.prototype,"cssClass",void 0),zV([mI("100%")],e.prototype,"width",void 0),zV([mI("300px")],e.prototype,"popupHeight",void 0),zV([mI("100%")],e.prototype,"popupWidth",void 0),zV([mI(null)],e.prototype,"placeholder",void 0),zV([mI(null)],e.prototype,"filterBarPlaceholder",void 0),zV([mI({})],e.prototype,"htmlAttributes",void 0),zV([mI(null)],e.prototype,"query",void 0),zV([mI(null)],e.prototype,"valueTemplate",void 0),zV([mI(null)],e.prototype,"headerTemplate",void 0),zV([mI(null)],e.prototype,"footerTemplate",void 0),zV([mI(!1)],e.prototype,"allowFiltering",void 0),zV([mI(!1)],e.prototype,"readonly",void 0),zV([mI(null)],e.prototype,"text",void 0),zV([mI(null)],e.prototype,"value",void 0),zV([mI(null)],e.prototype,"index",void 0),zV([mI("Never")],e.prototype,"floatLabelType",void 0),zV([mI(!1)],e.prototype,"showClearButton",void 0),zV([yI()],e.prototype,"filtering",void 0),zV([yI()],e.prototype,"change",void 0),zV([yI()],e.prototype,"beforeOpen",void 0),zV([yI()],e.prototype,"open",void 0),zV([yI()],e.prototype,"close",void 0),zV([yI()],e.prototype,"blur",void 0),zV([yI()],e.prototype,"focus",void 0),e=zV([bI],e),e})();GV.root="e-combobox",GV.root="e-autocomplete",GV.icon="e-input-group-icon e-ddl-icon e-search-icon";const KV="e-label-top",XV="e-label-bottom";function JV(e,t,i,n,s,r,o){let a,l;a=FD("span",{className:"e-float-line"}),l=FD("label",{className:"e-float-text"}),XA(i.id)||""===i.id||(l.id="label_"+i.id.replace(/ /g,"_"),KD(i,{"aria-labelledby":l.id})),XA(n.placeholder)||""===n.placeholder||(l.innerText=nR.sanitize(n.placeholder),n.removeAttribute("placeholder")),l.innerText=nR.sanitize(o),t.appendChild(a),t.appendChild(l),e.classList.add("e-float-input"),function(e,t){e&&e.length>0?(jD([t],KV),HD([t],XV)):(HD([t],KV),jD([t],XV))}(s,l),"Always"===r&&(l.classList.contains(XV)&&HD([l],XV),jD([l],KV))}function QV(e,t,i){t.placeholder=e&&e.length?"":i}var ZV=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const eB="e-hide-listitem",tB="e-chips";let iB=(()=>{let e=class extends WV{constructor(e,t){super(e,t),this.isValidKey=!1,this.selectAllEventData=[],this.selectAllEventEle=[],this.isDynamicDataChange=!1,this.scrollFocusStatus=!1,this.keyDownStatus=!1}enableRTL(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())}requiredModules(){let e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){let e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=e}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e}updateHTMLAttribute(){if(Object.keys(this.htmlAttributes).length)for(let e of Object.keys(this.htmlAttributes))switch(e){case"class":let t=this.htmlAttributes[e].replace(/\s+/g," ").trim();""!==t&&(jD([this.overAllWrapper],t.split(" ")),jD([this.popupWrapper],t.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(e,this.htmlAttributes[e]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:let i=["name","required","aria-required","form"],n=["title","role","style","class"];["id"].indexOf(e)>-1?this.element.setAttribute(e,this.htmlAttributes[e]):0===e.indexOf("data")||i.indexOf(e)>-1?this.hiddenElement.setAttribute(e,this.htmlAttributes[e]):n.indexOf(e)>-1?this.overAllWrapper.setAttribute(e,this.htmlAttributes[e]):this.inputElement.setAttribute(e,this.htmlAttributes[e])}}updateReadonly(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")}updateClearButton(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))}updateCssClass(){if(!XA(this.cssClass)&&""!==this.cssClass){let e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),""!==e&&(jD([this.overAllWrapper],e.split(" ")),jD([this.popupWrapper],e.split(" ")))}}updateOldPropCssClass(e){XA(e)||""===e||""!==(e=e.replace(/\s+/g," ").trim())&&(HD([this.overAllWrapper],e.split(" ")),HD([this.popupWrapper],e.split(" ")))}onPopupShown(){if(zO.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){let e=this;window.onpopstate=()=>{e.hidePopup(),e.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}},e=>{e.cancel||(this.focusAtFirstListItem(),document.body.appendChild(this.popupObj.element),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!XA(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===this.mode||this.showDropDownIcon)&&jD([this.overAllWrapper],["e-icon-anim"]),this.refreshPopup(),this.popupObj.show(e.animation,1e3===this.zIndex?this.element:null),KD(this.inputElement,{"aria-expanded":"true"}),this.isFirstClick&&this.loadTemplate())})}updateListItems(e,t){for(let i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()}loadTemplate(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}setScrollPosition(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!XA(this.value)&&this.value.length>0){let e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);XA(e)||this.scrollBottom(e)}}focusAtFirstListItem(){if(this.ulElement&&this.ulElement.querySelector("li.e-list-item")){let e;if("CheckBox"===this.mode)return void this.removeFocus();e=this.ulElement.querySelector("li.e-list-item:not(."+eB+")"),null!==e&&(this.removeFocus(),this.addListFocus(e))}}focusAtLastListItem(e){let t;e?t=HV(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?HV(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))}getAriaAttributes(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}}updateListARIA(){KD(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});let e=!!this.inputElement.disabled;KD(this.inputElement,this.getAriaAttributes()),e&&KD(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")}ensureAriaDisabled(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){let t=this.htmlAttributes;KA(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}}removelastSelection(e){let t;t=this.chipCollectionWrapper.querySelectorAll("span."+tB);let i=t[t.length-1].getAttribute("data-value");XA(this.value)||(this.tempValues=this.value.slice()),this.removeValue(i,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()}onActionFailure(e){super.onActionFailure(e),this.renderPopup(),this.onPopupShown()}targetElement(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value}getForQuery(e){let t,i=XA(this.fields.value)?this.fields.text:this.fields.value;for(let n=0;n<e.length;n++)t=0===n?new EM(i,"equal",e[n]):t.or(i,"equal",e[n]);return this.getQuery(this.query).where(t)}onActionComplete(e,t,i,n){super.onActionComplete(e,t,i),this.updateSelectElementData(this.allowFiltering);let s=this,r=[];if(!XA(this.value)&&!this.allowCustomValue)for(let o=0;o<this.value.length;o++)this.findListElement(this.allowFiltering&&!XA(this.mainList)?this.mainList:e,"li","data-value",s.value[o])||r.push(s.value[o]);r.length>0&&this.dataSource instanceof RM&&!XA(this.value)?this.dataSource.executeQuery(this.getForQuery(r)).then(i=>{s.addItem(i.result,t.length),s.updateActionList(e,t,i)}):this.updateActionList(e,t,i),!(this.dataSource instanceof RM&&"CheckBox"===this.mode&&this.allowFiltering)||this.removeFocus()}updateActionList(e,t,i,n){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?XA(this.mainData)||0!==this.mainData.length||(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value||"CheckBox"===this.mode)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),XA(this.setInitialValue)||this.setInitialValue(),XA(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(XA(this.text)||!XA(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))}refreshSelection(){let e,t,i=this.hideSelectedItem?eB:"e-active";if(!XA(this.value))for(let n=0;!XA(this.value[n]);n++)if(e=this.value[n],t=this.findListElement(this.list,"li","data-value",e),t){if(jD([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains("e-list-group-item")&&(!t.nextElementSibling||t.nextElementSibling.classList.contains("e-list-group-item"))&&jD([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(eB)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains("e-item-focus")){HD([t],"e-item-focus");let e=t.parentElement.querySelectorAll(".e-list-item:not(."+eB+")");e.length>0?jD([e[0]],"e-item-focus"):(this.ulElement=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement,this.l10nUpdate(),jD([this.list],"e-nodata"))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){let e=t.firstElementChild.getAttribute("aria-checked");(XA(e)||"false"===e)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null})}}this.checkSelectAll(),this.checkMaxSelection()}hideGroupItem(e){let t,i,n=this.hideSelectedItem?eB:"e-active";i=t=this.findListElement(this.ulElement,"li","data-value",e);let s=0,r=0,o=!0,a=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(eB)&&t.previousElementSibling.classList.contains("e-list-item")&&(o=!1),!o||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains("e-list-group-item")?s=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(eB)&&i.nextElementSibling.classList.contains("e-list-item")&&(a=!1),!a||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains("e-list-group-item")?r=10:i=i.nextElementSibling}while(s<10||r<10);o&&a&&!t.previousElementSibling.classList.contains(eB)?jD([t.previousElementSibling],n):o&&a&&t.previousElementSibling.classList.contains(eB)&&HD([t.previousElementSibling],n)}checkSelectAll(){let e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li.e-list-item").length,n=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!XA(this.fields.groupBy)&&(n-=e),i!==n&&n!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==n&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(let e=0;e<t.length;e++)this.findGroupStart(t[e]);this.deselectHeader()}}openClick(e){this.openOnClick||"CheckBox"===this.mode?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()}KeyUp(e){"CheckBox"!==this.mode||this.openOnClick||XA(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(e))}filter(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)}getQuery(e){let t=e?e.clone():this.query?this.query.clone():new _M;if(this.filterAction){if(null!==this.targetElement()){let e=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof RM||"string"!==e)&&"number"!==e){let e=this.fields;t.where(XA(e.text)?"":e.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new _M)}dataUpdater(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){let e=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.onActionComplete(e,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof RM?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()}checkForCustomValue(e,t){let i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){let i=this.inputElement.value,n=t||this.fields;if("string"!=typeof(!XA(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData)){let t={};zA(n.text,i,t),zA(n.value,i,t);let s=JSON.parse(JSON.stringify(this.listData));s.splice(0,0,t),this.resetList(s,n,e)}else this.resetList([this.inputElement.value],n)}this.value&&this.value.length&&this.refreshSelection()}getNgDirective(){return"EJS-MULTISELECT"}wrapperClick(e){if(this.setDynValue=!1,this.enabled)if(e.target!==this.overAllClear){if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf("e-chips-close"))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus")))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}else e.preventDefault()}enable(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),KD(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),KD(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()}onBlur(e,t){let i;if(XA(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&jD([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(XA(this.value)||0===this.value.length)&&HD([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&zO.isIE&&!XA(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove("e-input-focus");if(this.scrollFocusStatus)return XA(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove("e-input-focus"),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0,!1,!0,!0),this.hidePopup()),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,zO.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(e,t,i,n,s){e.classList.remove("e-input-focus");let r=t.querySelector(".e-float-text");i&&i.length<=0&&"Auto"===n&&!XA(r)&&(r.classList.contains(KV)&&HD([r],KV),jD([r],XV))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!XA(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}}checkPlaceholderSize(){if(this.showDropDownIcon){let e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else XA(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)}setPlaceholderSize(e){XA(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":jD([this.searchWrapper],"e-search-custom-width"):XA(this.value)||(this.searchWrapper.removeAttribute("style"),HD([this.searchWrapper],"e-search-custom-width"))}refreshInputHight(){this.value&&this.value.length||!XA(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")}validateValues(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())}updateValueState(e,t,i){this.initStatus&&this.validateValues(t||[],i||[])&&(this.trigger("change",{e,oldValue:i,value:t,isInteracted:!!e,element:this.element}),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change"))}updateTempValue(){this.tempValues=this.value?this.value.slice():this.value}getPagingCount(){let e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))}pageUpSelection(e){let t,i=this.list.querySelectorAll("li.e-list-item:not(."+eB+"):not(.e-reorder-hide)");t=e>=0?i[e+1]:i[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))}pageDownSelection(e){this.getItems();let t,i=this.list.querySelectorAll("li.e-list-item:not(."+eB+"):not(.e-reorder-hide)");t=e<=i.length?i[e-1]:i[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))}getItems(){return this.list||super.render(),this.ulElement&&this.ulElement.querySelectorAll(".e-list-item").length>0?this.ulElement.querySelectorAll(".e-list-item:not(."+eB+")"):[]}focusInHandler(e){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!e,event:e}),this.focused=!1),this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus"),function(e,t){e.classList.add("e-input-focus");let i=t.querySelector(".e-float-text");XA(i)||(jD([i],KV),i.classList.contains(XV)&&HD([i],XV))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0)}showDelimWrapper(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")}hideDelimWrapper(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")}expandTextbox(){let e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>e?this.inputElement.value.length:e}isPopupOpen(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement}refreshPopup(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())}checkTextLength(){return this.targetElement().length<1}popupKeyActions(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}}updateAriaAttribute(){let e=this.list.querySelector(".e-item-focus");XA(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)}homeNavigation(e){this.removeFocus();let t=this.ulElement.querySelectorAll("li.e-list-item:not(."+eB+"):not(.e-reorder-hide)");if(t.length>0){let i=t[e?0:t.length-1];i.classList.add("e-item-focus"),this.scrollBottom(i)}}onKeyDown(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124)))if(e.altKey)this.popupKeyActions(e);else{if(this.isPopupOpen()){let t,i=this.list.querySelector(".e-item-focus");switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(i&&(this.getIndexByValue(i.getAttribute("data-value")),this.pageUpSelection(t-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(i&&(this.getIndexByValue(i.getAttribute("data-value")),this.pageDownSelection(t+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add("e-input-focus")}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),this.refreshPopup()}}arrowDown(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&(this.list.focus(),GO.add(this.list,"keydown",this.onKeyDown,this)),this.updateAriaAttribute()}arrowUp(e){e.preventDefault(),this.keyAction=!0;let t=this.list.querySelectorAll("li.e-list-item:not(."+eB+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!XA(this.fields.groupBy)&&(t=this.list.querySelectorAll("li.e-list-item,li.e-list-group-item:not(."+eB+"):not(.e-reorder-hide)"));let i=this.list.querySelector("li.e-item-focus");Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering?(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})):this.list.focus(),this.moveByList(-1),this.updateAriaAttribute()}spaceKeySelection(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains("e-input-filter")||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()}checkBackCommand(e){this.backCommand=8!==e.keyCode||""!==this.targetElement()}keyNavigation(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();let t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}}selectByKey(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()}escapeAction(){let e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()}scrollBottom(e,t){let i=this.list.offsetHeight,n=e.offsetTop+e.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+n-i,r=e.offsetTop+e.offsetHeight-this.list.scrollTop;r=this.fields.groupBy&&!XA(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r,0===t?this.list.scrollTop=0:n>i?this.list.scrollTop=s:r>0&&this.list.offsetHeight>r||(this.list.scrollTop=s)}scrollTop(e,t){let i=e.offsetTop-this.list.scrollTop;i=this.fields.groupBy&&!JA(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;let n=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:n>0&&this.list.offsetHeight>n||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!JA(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}selectListByKey(e){let t,i=this.list.querySelector("li.e-item-focus"),n=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(n-=1),this.isValidLI(i)&&n<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!XA(this.fields.groupBy)&&(t=i.firstElementChild.lastElementChild,this.findGroupStart(t),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&n<this.maximumSelectionLength&&(t=i.firstElementChild.lastElementChild,t.classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()}refreshListItems(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){let t;t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList,this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}}removeSelectedChip(e){let t,i=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==i&&(XA(this.value)||(this.tempValues=this.value.slice()),t=i.nextElementSibling,null!==t&&(this.removeChipSelection(),this.addChipSelection(t,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()}moveByTop(e){let t,i=this.list.querySelectorAll("li.e-list-item");i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()}moveByList(e){if(this.list){let t=this.list.querySelectorAll("li.e-list-item:not(."+eB+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!XA(this.fields.groupBy)&&(t=this.list.querySelectorAll("li.e-list-item,li.e-list-group-item:not(."+eB+"):not(.e-reorder-hide)"));let i=this.list.querySelector("li.e-item-focus"),n=-1;if(t.length){for(let e=0;e<t.length;e++)if(t[e]===i){n=e;break}e>0?n<t.length-1&&(this.removeFocus(),this.addListFocus(t[++n]),this.updateCheck(t[n]),this.scrollBottom(t[n],n)):n>0&&(this.removeFocus(),this.addListFocus(t[--n]),this.updateCheck(t[n]),this.scrollTop(t[n],n))}}}updateCheck(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!XA(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))}moveBy(e,t){let i,n,s;i=this.chipCollectionWrapper.querySelectorAll("span."+tB),n=this.chipCollectionWrapper.querySelector("span.e-chip-selected"),null===n?e<0&&this.addChipSelection(i[i.length-1],t):e<0?(s=n.previousElementSibling,null!==s&&(this.removeChipSelection(),this.addChipSelection(s,t))):(s=n.nextElementSibling,this.removeChipSelection(),null!==s&&this.addChipSelection(s,t))}chipClick(e){if(this.enabled){let t=QD(e.target,"."+tB);this.removeChipSelection(),this.addChipSelection(t,e)}}removeChipSelection(){this.chipCollectionWrapper&&this.removeChipFocus()}addChipSelection(e,t){jD([e],"e-chip-selected"),this.trigger("chipSelection",t)}onChipRemove(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){let t=e.target.parentElement.getAttribute("data-value"),i=this.getFormattedValue(t);if(this.allowCustomValue&&("false"!==t&&!1===i||!XA(i)&&"NaN"===i.toString())&&(i=t),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(i,e),XA(this.findListElement(this.list,"li","data-value",i))&&this.mainList&&this.listData){let e=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(e,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}}makeTextBoxEmpty(){this.inputElement.value="",this.refreshPlaceHolder()}refreshPlaceHolder(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!XA(this.text)&&""!==this.text?"":this.placeholder:this.setFloatLabelType(),this.expandTextbox()}removeValue(e,t,i,n){let s=this.value.indexOf(this.getFormattedValue(e));-1===s&&this.allowCustomValue&&!XA(e)&&(s=this.value.indexOf(e.toString()));let r=t&&t.target;n=!!(n||r&&r.classList.contains("e-close-hooker"))||null;let o=this.hideSelectedItem?eB:"e-active";if(-1!==s){let r=this.findListElement(this.list,"li","data-value",e),a=this.getDataByValue(e);this.trigger("removing",{e:t,item:r,itemData:a,isInteracted:!!t,cancel:!1},l=>{if(l.cancel)this.removeIndex++;else{let c=this.value.slice(0);if(c.splice(s,1),this.setProperties({value:[].concat([],c)},!0),null!==r){let i=this.findListElement(this.mainList,"li","data-value",e);r.setAttribute("aria-selected","false"),HD([r],o),i&&(i.setAttribute("aria-selected","false"),HD([r,i],o)),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:r,e:this,index:s}),this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:r,e:t}),KD(this.inputElement,{"aria-activedescendant":r.id}),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})}this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateMainList(!0,e),this.removeChip(e),this.updateChipStatus(),(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&HD(this.list.querySelectorAll("li.e-list-item:not(.e-active)"),"e-disable"),this.trigger("removed",l);let h=t&&t.currentTarget,d=!(!h||!h.classList.contains("e-selectall-parent"))||null;this.changeOnBlur||n||!t||!i||d||this.updateValueState(t,this.value,this.tempValues),i&&(this.selectAllEventData.push(a),this.selectAllEventEle.push(r)),1===i&&(this.changeOnBlur||this.updateValueState(t,this.value,this.tempValues),this.trigger("selectedAll",{event:t,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!t,isChecked:!1}),this.selectAllEventData=[],this.selectAllEventEle=[]),!n||1!==i&&null!==i||this.clearAllCallback(t,n)}})}}updateMainList(e,t){if(this.allowFiltering||"CheckBox"===this.mode){let i=this.findListElement(this.mainList,"li","data-value",t);i&&(e?(i.setAttribute("aria-selected","false"),HD([i],this.hideSelectedItem?eB:"e-active"),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","false"),HD([i.firstElementChild.lastElementChild],"e-check"))):(i.setAttribute("aria-selected","true"),jD([i],this.hideSelectedItem?eB:"e-active"),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","true"),jD([i.firstElementChild.lastElementChild],"e-check"))))}}removeChip(e){if(this.chipCollectionWrapper){let t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&$D(t)}}setWidth(e){XA(e)||("number"==typeof e?this.overAllWrapper.style.width=tO(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:tO(e)))}updateChipStatus(){this.value&&this.value.length?(XA(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(XA(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),XA(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())}addValue(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);let n=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),n&&(this.addListFocus(n),this.addListSelection(n)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()}checkMaxSelection(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&jD(this.list.querySelectorAll("li.e-list-item:not(.e-active)"),"e-disable")}dispatchSelect(e,t,i,n,s){if(this.initStatus&&!n){let n=this.getDataByValue(e);this.trigger("select",{e:t,item:i,itemData:n,isInteracted:!!t,cancel:!1},r=>{r.cancel||(s&&(this.selectAllEventData.push(n),this.selectAllEventEle.push(i)),1===s&&(this.trigger("selectedAll",{event:t,items:this.selectAllEventEle,itemData:this.selectAllEventData,isInteracted:!!t,isChecked:!0}),this.selectAllEventData=[]),this.updateListSelectEventCallback(e,i,t))})}}addChip(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)}removeChipFocus(){let e,t;if(e=this.chipCollectionWrapper.querySelectorAll("span."+tB),t=this.chipCollectionWrapper.querySelectorAll("span."+"e-chips-close".split(" ")[0]),HD(e,"e-chip-selected"),zO.isDevice)for(let i=0;i<t.length;i++)t[i].style.display="none"}onMobileChipInteraction(e){let t=QD(e.target,"."+tB),i=t.querySelector("span."+"e-chips-close".split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains("e-chip-selected")||(this.removeChipFocus(),i.style.display="",t.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())}multiCompiler(e){let t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}getChip(e,t,i){let n,s={text:t,value:t},r=this.createElement("span",{className:tB,attrs:{"data-value":t,title:e}}),o=this.createElement("span",{className:"e-chipcontent"}),a=this.createElement("span",{className:"e-chips-close"});if(this.mainData&&(s=this.getDataByValue(t)),this.valueTemplate&&!XA(s)){n=bD(this.multiCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate);for(let e of n(s,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate))o.appendChild(e);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!1,!1,!1)}else this.enableHtmlSanitizer?o.innerText=e:o.innerHTML=e;r.appendChild(o),this.trigger("tagging",{isInteracted:!!i,itemData:s,e:i,setClass:e=>{jD([r],e)},cancel:!1},e=>{e.cancel||(zO.isDevice?(r.classList.add("e-mob-chip"),zD([a],r),a.style.display="none",GO.add(r,"click",this.onMobileChipInteraction,this)):(GO.add(r,"mousedown",this.chipClick,this),this.showClearButton&&r.appendChild(a)),GO.add(a,"mousedown",this.onChipRemove,this),this.chipCollectionWrapper.appendChild(r),!this.changeOnBlur&&i&&this.updateValueState(i,this.value,this.tempValues))})}calcPopupWidth(){let e=tO(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e}mouseIn(){this.enabled&&!this.readonly&&this.showOverAllClear()}mouseOut(){this.inputFocus||(this.overAllClear.style.display="none")}listOption(e,t){let i=!XA(t.iconCss),n=XA(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},KA(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:n}),this.listCurrentOptions}renderPopup(){this.list||super.render(),this.popupObj||this.trigger("beforeOpen",{cancel:!1},e=>{if(!e.cancel){document.body.appendChild(this.popupWrapper);let e=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&e&&this.filterParent&&(e.remove(),this.filterParent=null);let t=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),t-=this.header.offsetHeight),zD([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),t-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate&&this.footerTemplate?"CheckBox"!==this.mode||this.showSelectAll||(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(t-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(t-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),t=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){let e={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",e),t-=this.searchBoxHeight),jD([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=tO(t),this.popupWrapper.style.maxHeight=tO(this.popupHeight)):this.list.style.maxHeight=tO(this.popupHeight),this.popupObj=new dP(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:()=>{this.popupObj.element.parentElement&&(this.popupObj.unwireScrollEvents(),YD(this.popupObj.element))},open:()=>{if(this.popupObj.resolveCollision(),!this.isFirstClick){let e=this.list.querySelector("ul");e&&("CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||(this.mainList=e.cloneNode?e.cloneNode(!0):e)),this.isFirstClick=!0}this.popupObj.wireScrollEvents(),"CheckBox"!==this.mode&&(this.allowFiltering||this.allowCustomValue)&&""!==this.targetElement().trim()||this.loadTemplate(),this.setScrollPosition(),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})},targetExitViewport:()=>{zO.isDevice||this.hidePopup()}}),"CheckBox"===this.mode&&zO.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}})}setHeaderTemplate(){let e;this.header&&this.header.remove(),this.header=this.createElement("div"),jD([this.header],"e-ddl-header"),e=bD(this.multiCompiler(this.headerTemplate)?document.querySelector(this.headerTemplate).innerHTML.trim():this.headerTemplate);let t=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate);for(let i=0;i<t.length;i++)this.header.appendChild(t[i]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1),"CheckBox"===this.mode&&this.showSelectAll?WD([this.header],this.popupWrapper):zD([this.header],this.popupWrapper),GO.add(this.header,"mousedown",this.onListMouseDown,this)}setFooterTemplate(){let e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),jD([this.footer],"e-ddl-footer"),e=bD(this.multiCompiler(this.footerTemplate)?document.querySelector(this.footerTemplate).innerHTML.trim():this.footerTemplate);let t=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate);for(let i=0;i<t.length;i++)this.footer.appendChild(t[i]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),zD([this.footer],this.popupWrapper),GO.add(this.footer,"mousedown",this.onListMouseDown,this)}ClearAll(e){if(this.enabled&&!this.readonly){let t;if(this.value&&this.value.length>0){let i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length&&(this.removeValue(t,e,null,!0),1);t=this.value[this.removeIndex]);}else this.clearAllCallback(e)}}clearAllCallback(e,t){let i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){let e=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(e,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),this.makeTextBoxEmpty(),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(XA(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),this.changeOnBlur||!t||!XA(this.value)&&0!==this.value.length||this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!XA(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()}windowResize(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()}resetValueHandler(e){let t=QD(this.inputElement,"form");if(t&&e.target===t){let e=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=e}}wireEvent(){GO.add(this.componentWrapper,"mousedown",this.wrapperClick,this),GO.add(window,"resize",this.windowResize,this),GO.add(this.inputElement,"focus",this.focusInHandler,this),GO.add(this.inputElement,"keydown",this.onKeyDown,this),GO.add(this.inputElement,"keyup",this.KeyUp,this),"CheckBox"!==this.mode&&GO.add(this.inputElement,"input",this.onInput,this),GO.add(this.inputElement,"blur",this.onBlur,this),GO.add(this.componentWrapper,"mousemove",this.mouseIn,this);let e=QD(this.inputElement,"form");e&&GO.add(e,"reset",this.resetValueHandler,this),GO.add(this.componentWrapper,"mouseout",this.mouseOut,this),GO.add(this.overAllClear,"mouseup",this.ClearAll,this),GO.add(this.inputElement,"paste",this.pasteHandler,this)}onInput(e){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,zO.isDevice&&"mozilla"===zO.info.name&&this.search(e)}pasteHandler(e){setTimeout(()=>{this.search(e)})}search(e){if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&8!==e.keyCode)this.focusAtFirstListItem();else{let t=this.targetElement();if(this.keyCode=e.keyCode,this.allowFiltering){let t={preventDefaultAction:!1,text:this.targetElement(),updateData:(e,i,n)=>{t.cancel||(this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,i,n))},event:e,cancel:!1};this.trigger("filtering",t,e=>{e.cancel||this.isFiltered||e.preventDefaultAction||(this.filterAction=!0,this.dataUpdater(this.dataSource,null,this.fields))})}else if(this.allowCustomValue){let e=new _M;e=""!==t?e.where(this.fields.text,"startswith",t,this.ignoreCase,this.ignoreAccent):e,this.dataUpdater(this.mainData,e,this.fields)}else{let e;e=this.list.querySelectorAll("li.e-list-item:not(.e-hide-listitem)");let t=HV(this.targetElement(),e,"StartsWith",this.ignoreCase);t&&null!==t.item?(this.addListFocus(t.item),this.list.scrollTop=t.item.offsetHeight*t.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}}preRender(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),super.preRender()}getLocaleName(){return"multi-select"}initializeData(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0}updateData(e,t){let i,n="",s="Delimiter"===this.mode||"CheckBox"===this.mode,r=[],o=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!XA(this.value))for(let c=0;!XA(this.value[c]);c++)XA(this.findListElement(this.mainList,"li","data-value",this.value[c]))&&!this.allowCustomValue&&this.value.splice(c,1),i=this.listData?this.getTextByValue(this.value[c]):this.value[c],n+=i+e+" ",r.push(i),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[c]+'">'+c+"</option>";this.setProperties({text:r.toString()},!0),s&&(this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",QA("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));let a=t&&t.target,l=!(!a||!a.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!l||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=o,this.addValidInputClass()}initialTextUpdate(){if(XA(this.text))this.setProperties({value:null},!0);else{let e=this.text.split(this.delimiterChar),t=[];for(let i=0;e.length>i;i++){let n=this.getValueByText(e[i]);XA(n)?this.allowCustomValue&&t.push(e[i]):t.push(n)}t&&t.length&&this.setProperties({value:t},!0)}}renderList(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),super.render(e),this.unwireListEvents(),this.wireListEvents()}initialValueUpdate(){if(this.list){let e,t,i;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!XA(this.value))for(let n=0;!XA(this.value[n]);n++)if(i=this.value[n],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){let n=this.listData.length,s={};zA(this.fields.text,i,s),zA(this.fields.value,i,s);let r=this.popupWrapper.querySelector(".e-nodata");this.addItem(s,n),this.popupWrapper.contains(r)&&(this.list.setAttribute("style",r.getAttribute("style")),this.popupWrapper.replaceChild(this.list,r),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!XA(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}}updateActionCompleteData(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,jD([e],eB))}updateAddItemList(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&e&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),$D(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup())}updateDataList(){this.mainList&&this.ulElement&&this.mainList.childElementCount<this.ulElement.childElementCount&&(this.mainList=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement)}isValidLI(e){return e&&!e.classList.contains("e-disabled")&&!e.classList.contains("e-list-group-item")&&e.classList.contains("e-list-item")}updateListSelection(e,t,i){let n=e.getAttribute("data-value"),s=this.getFormattedValue(n);this.allowCustomValue&&("false"!==n&&!1===s||!XA(s)&&"NaN"===s.toString())&&(s=n),this.getTextByValue(s),this.removeHover(),this.value&&-1!==this.value.indexOf(s)?this.removeValue(s,t,i):this.dispatchSelect(s,t,e,"true"===e.getAttribute("aria-selected"),i)}updateListSelectEventCallback(e,t,i){let n=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,n,i);else{let s=t.cloneNode(!0),r=this.getDataByValue(e);this.trigger("customValueSelection",{newData:r,cancel:!1},t=>{t.cancel||(zD([s],this.mainList),this.mainData.push(r),this.remoteCustomValue=!1,this.addValue(e,n,i))})}this.value.length===this.maximumSelectionLength&&(this.updatedataValueItems(i),this.checkPlaceholderSize())}removeListSelection(){let e=this.hideSelectedItem?eB:"e-active",t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(HD(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!XA(this.mainList)){let i=this.mainList.querySelectorAll("."+e),n=i.length;if(i&&i.length)for(HD(i,e);n>0;)i[n-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>n-1&&(t[n-1].firstElementChild.setAttribute("aria-checked","false"),HD([t[n-1].firstElementChild.lastElementChild],"e-check")),i[n-1].firstElementChild.setAttribute("aria-checked","false"),HD([i[n-1].firstElementChild.lastElementChild],"e-check")),n--}}removeHover(){let e=this.list.querySelectorAll(".e-hover");e&&e.length&&HD(e,"e-hover")}removeFocus(){if(this.list&&this.mainList){let e=this.list.querySelectorAll(".e-item-focus"),t=this.mainList.querySelectorAll(".e-item-focus");e&&e.length&&(HD(e,"e-item-focus"),HD(t,"e-item-focus"))}}addListHover(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!XA(this.fields.groupBy))&&(this.removeHover(),jD([e],"e-hover"))}addListFocus(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),jD([e],"e-item-focus")):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!XA(this.fields.groupBy)&&jD([e],"e-item-focus")}addListSelection(e){let t=this.hideSelectedItem?eB:"e-active";if(this.isValidLI(e)&&!e.classList.contains("e-hover")){if(jD([e],t),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){let t=e.firstElementChild.getAttribute("aria-checked");("false"===t||XA(t))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),null!==this.chipCollectionWrapper&&this.removeChipSelection(),KD(this.inputElement,{"aria-activedescendant":e.id})}}updateDelimeter(e,t){this.updateData(e,t)}onMouseClick(e){this.scrollFocusStatus=!1;let t=e.target,i=QD(t,".e-list-item");if(QD(t,".e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)t=t.classList.contains("e-list-group-item")?t.firstElementChild.lastElementChild:e.target,t.classList.contains("e-check")?(this.selectAllItem(!1,e),t.classList.remove("e-check"),t.classList.remove("e-stop"),QD(t,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),t.classList.remove("e-stop"),t.classList.add("e-check"),QD(t,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(i)){let n=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(n-=1),n<this.maximumSelectionLength&&(this.updateListSelection(i,e),this.checkPlaceholderSize(),this.addListFocus(i),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?("CheckBox"!==this.mode&&this.focusAtLastListItem(i.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(t)}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(XA(i)?null:i.textContent),this.refreshPlaceHolder(),this.deselectHeader()}}findGroupStart(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!XA(this.fields.groupBy)){let t,i=0,n=0,s=0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),t=this.findGroupAttrtibutes(e,n,s,i,0),t=this.findGroupAttrtibutes(e,t[0],t[1],t[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,t[0],t[1],t[2])}}findGroupAttrtibutes(e,t,i,n,s){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,n++,null!=(e=s?e.nextElementSibling:e.previousElementSibling)););return[t,i,n]}updateCheckBox(e,t,i,n){if(null===e)return;let s=e.getElementsByClassName("e-frame")[0];n===t?(s.classList.remove("e-stop"),s.classList.add("e-check"),QD(s,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):n===i?(s.classList.remove("e-check"),s.classList.remove("e-stop"),QD(s,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(s.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),QD(s,".e-list-group-item").classList.add("e-active"),s.classList.add("e-check")):(s.classList.remove("e-check"),s.classList.add("e-stop"),QD(s,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}deselectHeader(){let e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&HD(t,"e-disable"),e===this.maximumSelectionLength&&jD(t,"e-disable")}onMouseOver(e){let t=QD(e.target,".e-list-item");null===t&&"CheckBox"===this.mode&&!XA(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=QD(e.target,".e-list-group-item")),this.addListHover(t)}onMouseLeave(e){this.removeHover()}onListMouseDown(e){e.preventDefault(),this.scrollFocusStatus=!0}onDocumentClick(e){if("CheckBox"!==this.mode){let t=e.target;this.scrollFocusStatus=!!(!XA(this.popupObj)&&QD(t,"#"+this.popupObj.element.id)||this.overAllWrapper.contains(e.target))&&(zO.isIE||"edge"===zO.info.name)&&document.activeElement===this.inputElement}}wireListEvents(){GO.add(document,"mousedown",this.onDocumentClick,this),GO.add(this.list,"mousedown",this.onListMouseDown,this),GO.add(this.list,"mouseup",this.onMouseClick,this),GO.add(this.list,"mouseover",this.onMouseOver,this),GO.add(this.list,"mouseout",this.onMouseLeave,this)}unwireListEvents(){GO.remove(document,"mousedown",this.onDocumentClick),this.list&&(GO.remove(this.list,"mousedown",this.onListMouseDown),GO.remove(this.list,"mouseup",this.onMouseClick),GO.remove(this.list,"mouseover",this.onMouseOver),GO.remove(this.list,"mouseout",this.onMouseLeave))}hideOverAllClear(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")}showOverAllClear(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"}focusIn(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()}focusOut(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()}showSpinner(){XA(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),cM({target:this.spinnerElement,width:zO.isDevice?"16px":"14px"},this.createElement),jD([this.spinnerElement],"e-ddl-disable-icon"),wM(this.spinnerElement))}hideSpinner(){XA(this.spinnerElement)||(CM(this.spinnerElement),HD([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?YD(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}updateWrapperText(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=t:e.innerText=nR.sanitize(t)}updateDelimView(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total"),this.value&&this.value.length){let e,t,i,n,s,r="",o=1,a=0;this.updateWrapperText(this.viewWrapper,r);let l={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},c=new KI(this.getLocaleName(),{},this.locale);""===c.getConstant("actionFailureTemplate")&&(c=new KI("dropdowns",l,this.locale));let h=c.getConstant("overflowCountTemplate"),d=this.createElement("span",{className:"e-remain"}),u=bD(h),p=bD(c.getConstant("totalCountTemplate"));d.appendChild(u({count:this.value.length},this,"overflowCountTemplate",null,!this.isStringTemplate)[0]),this.viewWrapper.appendChild(d);let f=d.offsetWidth;if($D(d),this.showDropDownIcon&&(a=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),!XA(this.value))for(let m=0;!XA(this.value[m]);m++){if(r+=0===m?"":this.delimiterChar+" ",e=this.getOverflowVal(m),r+=e,e=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,r),i=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),s=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),i+a>s){for(void 0!==t&&""!==t&&(e=t,m=o+1),this.updateWrapperText(this.viewWrapper,e),n=this.value.length-m,i=this.viewWrapper.offsetWidth;i+f+a>s&&0!==i&&""!==this.viewWrapper.innerHTML;){let e=this.viewWrapper.innerHTML.split(this.delimiterChar);e.pop(),this.viewWrapper.innerHTML=e.join(this.delimiterChar),""===this.viewWrapper.innerHTML&&n++,i=this.viewWrapper.offsetWidth}break}i+f+a<=s?(t=r,o=m):0===m&&(t="",o=-1)}if(n>0){let e=s-a;this.viewWrapper.appendChild(this.updateRemainTemplate(d,this.viewWrapper,n,u,p,e)),this.updateRemainWidth(this.viewWrapper,e),this.updateRemainingText(d,a,n,u,p)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"}updateRemainWidth(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")}updateRemainTemplate(e,t,i,n,s,r){return t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",e.appendChild(t.firstChild&&3===t.firstChild.nodeType?n({count:i},this,"overflowCountTemplate",null,!this.isStringTemplate)[0]:s({count:i},this,"totalCountTemplate",null,!this.isStringTemplate)[0]),t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,r)),e}updateRemainingText(e,t,i,n,s){let r=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(o+t>=r&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;o+t>r&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){let e=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);e.pop(),this.viewWrapper.firstChild.nodeValue=e.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,o=this.viewWrapper.offsetWidth}this.updateRemainTemplate(e,this.viewWrapper,i,n,s,r-t)}}getOverflowVal(e){let t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){let i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t}unWireEvent(){GO.remove(this.componentWrapper,"mousedown",this.wrapperClick),GO.remove(window,"resize",this.windowResize),GO.remove(this.inputElement,"focus",this.focusInHandler),GO.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&GO.remove(this.inputElement,"input",this.onInput),GO.remove(this.inputElement,"keyup",this.KeyUp);let e=QD(this.inputElement,"form");e&&GO.remove(e,"reset",this.resetValueHandler),GO.remove(this.inputElement,"blur",this.onBlur),GO.remove(this.componentWrapper,"mousemove",this.mouseIn),GO.remove(this.componentWrapper,"mouseout",this.mouseOut),GO.remove(this.overAllClear,"mousedown",this.ClearAll),GO.remove(this.inputElement,"paste",this.pasteHandler)}selectAllItem(e,t,i){let n;if(n=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&this.isPopupOpen()&&t&&t.target&&QD(t.target,".e-close-hooker")&&this.allowFiltering&&(n=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!XA(this.fields.groupBy)){let s=t?t.target:null;if(s=t&&32===t.keyCode?i:s,s=s&&s.classList.contains("e-frame")?s.parentElement.parentElement:s,s&&s.classList.contains("e-list-group-item")){let i=s.nextElementSibling;if(XA(i))return;for(;i.classList.contains("e-list-item");){if(e){if(!i.firstElementChild.lastElementChild.classList.contains("e-check")){let e=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(e-=1),e<this.maximumSelectionLength&&this.updateListSelection(i,t)}}else i.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(i,t);if(i=i.nextElementSibling,null==i)break}if(s.classList.contains("e-list-group-item")){let t=this.list.getElementsByClassName("e-item-focus")[0];t&&t.classList.remove("e-item-focus"),e?s.classList.add("e-active"):s.classList.remove("e-active"),s.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,n,e)}else this.updateValue(t,n,e)}updateValue(e,t,i){let n=t.length;if(t&&t.length){let s=0,r=0;for(r=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength;s<n&&s<=50&&s<r;)this.updateListSelection(t[s],e,n-s),this.findGroupStart(t[s]),s++;n>50&&setTimeout(()=>{for(;s<n&&s<r;)this.updateListSelection(t[s],e,n-s),this.findGroupStart(t[s]),s++;this.updatedataValueItems(e)},0)}this.updatedataValueItems(e),this.checkPlaceholderSize()}updatedataValueItems(e){this.deselectHeader(),this.textboxValueUpdate(e)}textboxValueUpdate(e){"Box"===this.mode||this.isPopupOpen()?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()}setZIndex(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}updateDataSource(e){XA(this.list)?this.renderPopup():this.resetList(this.dataSource),!this.value||!this.value.length||(this.setProperties({value:this.value}),this.refreshSelection())}onLoadSelect(){this.setDynValue=!0,this.renderPopup()}selectAllItems(e,t){XA(this.list)?(this.selectAllAction=()=>{"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:e?"check":"uncheck"}),this.selectAllItem(e,t),this.selectAllAction=null},super.render()):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(e,t))}getPersistData(){return this.addOnPersist(["value"])}onPropertyChanged(e,t){(e.dataSource&&!XA(Object.keys(e.dataSource))||e.query&&!XA(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(let i of Object.keys(e))switch(i){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(XA(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,t.value,"value"),this.addValidInputClass();break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(e.enableRtl),super.onPropertyChanged(e,t);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:let n;n=this.getPropObject(i,e,t),super.onPropertyChanged(n.newProperty,n.oldProperty)}}reInitializePoup(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()}updateVal(e,t,i){this.list?this.inputFocus||("text"===i&&(this.initialTextUpdate(),e=this.value),(XA(this.value)||0===this.value.length)&&(this.tempValues=t),this.initialValueUpdate(),"Box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()):this.onLoadSelect(),this.changeOnBlur||this.updateValueState(null,e,t)}addItem(e,t){super.addItem(e,t)}hidePopup(){this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100}},e=>{e.cancel||(this.beforePopupOpen=!1,this.overAllWrapper.classList.remove("e-icon-anim"),this.popupObj.hide(new _I(e.animation)),KD(this.inputElement,{"aria-expanded":"false"}),this.allowFiltering&&this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"clear"}),this.popupObj.hide(),HD([document.body,this.popupObj.element],"e-popup-full-page"),GO.remove(this.list,"keydown",this.onKeyDown))})}showPopup(){if(!this.enabled)return;if(!this.ulElement)return this.beforePopupOpen=!0,super.render(),void("CheckBox"===this.mode&&zO.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}));"CheckBox"===this.mode&&zO.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode});let e=this.ulElement.querySelectorAll("li.e-list-item").length,t=this.ulElement.querySelectorAll("li.e-list-item."+eB).length;e>0&&e===t&&t===this.mainData.length?this.beforePopupOpen=!1:this.onPopupShown()}selectAll(e){this.isSelectAll=!0,this.selectAllItems(e)}getModuleName(){return"multiselect"}clear(){this.selectAll(!1),this.setProperties({value:null},!0)}render(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&jD([this.overAllWrapper],"e-checkbox"),zO.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",QA("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",QA("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!zO.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?JV(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";let e=this.element.getAttribute("id")?this.element.getAttribute("id"):QA("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.renderComplete()}checkInitialValue(){let e=this.dataSource instanceof Array?this.dataSource.length>0:!XA(this.dataSource);if((!this.value||!this.value.length)&&XA(this.text)&&!e&&"SELECT"===this.element.tagName&&this.element.options.length>0){let e=this.element.options,t=[],i="";for(let n=0,s=e.length;n<s;n++){let s=e[n];XA(s.getAttribute("selected"))||(s.getAttribute("value")?t.push(s.getAttribute("value")):i+=s.text+this.delimiterChar)}t.length>0?this.setProperties({value:t},!0):""!==i&&this.setProperties({text:i},!0),(t.length>0||""!==i)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!XA(this.text))&&this.renderPopup(),XA(this.text)||!XA(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof RM?this.setInitialValue=()=>{this.initStatus=!1,this.initialValueUpdate(),this.initialUpdate(),this.setInitialValue=null,this.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),XA(this.text)||this.element.setAttribute("data-initial-value",this.text)}checkAutoFocus(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()}setFloatLabelType(){!function(e,t,i,n,s,r,o){let a,l=t.querySelector(".e-float-text"),c=t.querySelector(".e-float-line");XA(l)?(a=null!==o?o:"",QV(s,n,a)):(a=l.innerText,YD(i.querySelector(".e-float-text")),QV(s,n,a),XA(c)||YD(i.querySelector(".e-float-line"))),e.classList.remove("e-float-input")}(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,0,this.placeholder),"Never"!==this.floatLabelType&&JV(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)}addValidInputClass(){!XA(this.value)&&this.value.length||"Always"===this.floatLabelType?jD([this.overAllWrapper],"e-valid-input"):HD([this.overAllWrapper],"e-valid-input")}dropDownIcon(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),jD([this.componentWrapper],["e-down-icon"])):XA(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),HD([this.componentWrapper],["e-down-icon"]))}initialUpdate(){"Box"!==this.mode&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()}destroy(){this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,super.destroy();let e=["readonly","aria-disabled","aria-placeholder","placeholder"],t=e.length;for(;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),$D(this.overAllWrapper))}};return ZV([gI({text:null,value:null,iconCss:null,groupBy:null},qV)],e.prototype,"fields",void 0),ZV([mI(!1)],e.prototype,"enablePersistence",void 0),ZV([mI(null)],e.prototype,"groupTemplate",void 0),ZV([mI("No records found")],e.prototype,"noRecordsTemplate",void 0),ZV([mI("Request failed")],e.prototype,"actionFailureTemplate",void 0),ZV([mI("None")],e.prototype,"sortOrder",void 0),ZV([mI(!0)],e.prototype,"enabled",void 0),ZV([mI(!1)],e.prototype,"enableHtmlSanitizer",void 0),ZV([mI([])],e.prototype,"dataSource",void 0),ZV([mI(null)],e.prototype,"query",void 0),ZV([mI("StartsWith")],e.prototype,"filterType",void 0),ZV([mI(1e3)],e.prototype,"zIndex",void 0),ZV([mI(!1)],e.prototype,"ignoreAccent",void 0),ZV([mI()],e.prototype,"locale",void 0),ZV([mI(!1)],e.prototype,"enableGroupCheckBox",void 0),ZV([mI(null)],e.prototype,"cssClass",void 0),ZV([mI("100%")],e.prototype,"width",void 0),ZV([mI("300px")],e.prototype,"popupHeight",void 0),ZV([mI("100%")],e.prototype,"popupWidth",void 0),ZV([mI(null)],e.prototype,"placeholder",void 0),ZV([mI(null)],e.prototype,"filterBarPlaceholder",void 0),ZV([mI({})],e.prototype,"htmlAttributes",void 0),ZV([mI(null)],e.prototype,"valueTemplate",void 0),ZV([mI(null)],e.prototype,"headerTemplate",void 0),ZV([mI(null)],e.prototype,"footerTemplate",void 0),ZV([mI(null)],e.prototype,"itemTemplate",void 0),ZV([mI(null)],e.prototype,"allowFiltering",void 0),ZV([mI(!0)],e.prototype,"changeOnBlur",void 0),ZV([mI(!1)],e.prototype,"allowCustomValue",void 0),ZV([mI(!0)],e.prototype,"showClearButton",void 0),ZV([mI(1e3)],e.prototype,"maximumSelectionLength",void 0),ZV([mI(!1)],e.prototype,"readonly",void 0),ZV([mI(null)],e.prototype,"text",void 0),ZV([mI(null)],e.prototype,"value",void 0),ZV([mI(!0)],e.prototype,"hideSelectedItem",void 0),ZV([mI(!0)],e.prototype,"closePopupOnSelect",void 0),ZV([mI("Default")],e.prototype,"mode",void 0),ZV([mI(",")],e.prototype,"delimiterChar",void 0),ZV([mI(!0)],e.prototype,"ignoreCase",void 0),ZV([mI(!1)],e.prototype,"showDropDownIcon",void 0),ZV([mI("Never")],e.prototype,"floatLabelType",void 0),ZV([mI(!1)],e.prototype,"showSelectAll",void 0),ZV([mI("Select All")],e.prototype,"selectAllText",void 0),ZV([mI("Unselect All")],e.prototype,"unSelectAllText",void 0),ZV([mI(!0)],e.prototype,"enableSelectionOrder",void 0),ZV([mI(!0)],e.prototype,"openOnClick",void 0),ZV([yI()],e.prototype,"change",void 0),ZV([yI()],e.prototype,"removing",void 0),ZV([yI()],e.prototype,"removed",void 0),ZV([yI()],e.prototype,"selectedAll",void 0),ZV([yI()],e.prototype,"beforeOpen",void 0),ZV([yI()],e.prototype,"open",void 0),ZV([yI()],e.prototype,"close",void 0),ZV([yI()],e.prototype,"blur",void 0),ZV([yI()],e.prototype,"focus",void 0),ZV([yI()],e.prototype,"chipSelection",void 0),ZV([yI()],e.prototype,"filtering",void 0),ZV([yI()],e.prototype,"tagging",void 0),ZV([yI()],e.prototype,"customValueSelection",void 0),e=ZV([bI],e),e})();const nB="data-ready",sB="scroll-ui-update";function rB(e,t){let i=0,n=FD("div",{className:t}).cloneNode();return n.style.visibility="hidden",n.style.position="absolute",e.appendChild(n),i=n.getBoundingClientRect().height,$D(n),i}function oB(e,t){let i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function aB(e,t){let i=oB(e,t),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6);return new Date(n.getTime())}function lB(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function cB(e){let t=new Date(e.getFullYear(),0,1).valueOf(),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf();return Math.ceil((i-t+864e5)/864e5/7)}function hB(e,t){let i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),s=n.getTimezoneOffset()-i;return e.setTime(n.getTime()+6e4*s),e}function dB(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function uB(e){let t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function pB(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function fB(e,t){let i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,(n=e,new Date(n.getFullYear(),n.getMonth()+1,0).getDate()))),e;var n}function mB(e,t,i){let n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());let s=new Date(e.getTime());return 0===i.getHours()?s=pB(s,1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}}function gB(e,t){let i=dB(new Date(e)),n=dB(new Date(t));return Math.round((n.getTime()-i.getTime())/864e5)}function vB(e){return-1!==e.indexOf("Date")?new Date(parseInt(e.match(/\d+/g).toString(),10)):-1!==e.indexOf("T")?new Date(e):new Date(e.replace(/-/g,"/"))}let yB=null;function bB(){if(null!==yB)return yB;let e=FD("div"),t=0;e.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e);let i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return t=e.offsetWidth-e.clientWidth-i|0,document.body.removeChild(e),yB=t}function wB(e,t,i,n,s){for(let r=0,o=e.length;r<o;r++)if(e[r][t]===i){if(!n)return r;{let t=s.slice(-2)[0].field;if((n[t]instanceof Array?n[t]:[n[t]]).join(",").includes(e[r][s.slice(-1)[0].groupIDField]))return r}}return-1}function SB(e){let t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function CB(e){let t=[].slice.call(e.children);for(let i of t)i.classList.contains("blazor-template")||e.removeChild(i)}function _B(e){let t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1);return e.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),i.getTimezoneOffset())}function EB(e,t){return e}function TB(e,t){switch(t){case"multiple":e=e.split(" ").map(e=>e.charAt(0).toLocaleUpperCase()+e.substring(1)).join(" ");break;case"single":if(e[0]>="0"&&e[0]<="9"){let t=e.match(/[a-zA-Z]/);e=XA(t)?e:e.slice(0,t.index)+e[t.index].toLocaleUpperCase()+e.slice(t.index+1)}e=e[0].toLocaleUpperCase()+e.slice(1)}return e}const xB="e-schedule-resource-toolbar-container",kB="e-text-ellipsis",AB="e-schedule-form";class OB{constructor(e){this.parent=e,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}addEventListener(){this.parent.on("document-click",this.closeHeaderPopup,this)}removeEventListener(){this.parent.off("document-click",this.closeHeaderPopup)}closeHeaderPopup(e){XA(QD(e.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected"))&&this.hideHeaderPopup()}hideHeaderPopup(){this.headerPopup&&this.headerPopup.hide()}renderHeader(){this.element=FD("div",{className:"e-schedule-toolbar-container"});let e=FD("div",{className:"e-schedule-toolbar"});this.element.appendChild(e),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()}renderToolbar(){let e={requestType:"toolbarItemRendering",items:this.getItems()};this.parent.trigger("actionBegin",e),this.toolbarObj=new XN({items:e.items,overflowMode:"Popup",clicked:this.toolbarClickHandler.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.toolbarObj.isStringTemplate=!0,this.toolbarObj.appendTo(this.parent.element.querySelector(".e-schedule-toolbar"));let t=this.toolbarObj.element.querySelector(".e-prev");t&&t.firstElementChild.setAttribute("title",this.l10n.getConstant("previous"));let i=this.toolbarObj.element.querySelector(".e-next");i&&i.firstElementChild.setAttribute("title",this.l10n.getConstant("next")),this.updateActiveView(),this.parent.trigger("actionComplete",{requestType:"toolBarItemRendered",items:this.toolbarObj.items})}updateItems(){if(this.toolbarObj){let e={requestType:"toolbarItemRendering",items:this.getItems()};this.parent.trigger("actionBegin",e),this.toolbarObj.items=e.items,this.toolbarObj.dataBind(),this.parent.trigger("actionComplete",{requestType:"toolBarItemRendered",items:this.toolbarObj.items})}}getPopUpRelativeElement(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")}setDayOfWeek(e){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=e,this.headerCalendar.dataBind())}setCalendarDate(e){this.headerCalendar&&(this.headerCalendar.value=e,this.headerCalendar.dataBind())}setCalendarMinMaxDate(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())}getCalendarView(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"}setCalendarView(){if(this.headerCalendar){let e=this.getCalendarView();this.headerCalendar.depth=e,this.headerCalendar.start=e,this.headerCalendar.refresh()}}updateActiveView(){let e=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));HD(e,["e-active-view"]),e.length>0&&e[this.parent.viewIndex]&&jD([e[this.parent.viewIndex]],["e-active-view"])}updateDateRange(e){let t=this.toolbarObj.element.querySelector(".e-date-range");t&&(t.setAttribute("aria-label",e),t.querySelector(".e-tbar-btn-text").innerHTML=e,this.toolbarObj.refreshOverflow())}getDateRangeText(){return TB(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}getItems(){let e=[],t=this.parent.isAdaptive;if(e.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{"aria-label":"previous period",role:"navigation"}}),e.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{"aria-label":"next period",role:"navigation"}}),e.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive","aria-label":"title",role:"navigation"}}),this.parent.isAdaptive?(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&e.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1)for(let i of this.parent.views)e.push(this.getItemObject(i));return e}getItemObject(e){let t,i,n;"string"==typeof e?(t=e.toLowerCase(),i=null):(t=e.option.toLowerCase(),i=e.displayName);let s=this.parent.isAdaptive;switch(t){case"day":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-day",text:i||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-week",text:i||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-workweek",text:i||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-month",text:i||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"year":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-year",text:i||this.l10n.getConstant("year"),cssClass:"e-views e-year"};break;case"agenda":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-agenda",text:this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-month-agenda",text:this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-timeline-day",text:i||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-timeline-week",text:i||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-timeline-workweek",text:i||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-timeline-month",text:i||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":n={align:"Right",showAlwaysInPopup:s,prefixIcon:"e-icon-timeline-year-"+("Vertical"===e.orientation?"vertical":"horizontal"),text:i||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"}}return n}renderHeaderPopup(){let e=FD("div",{className:"e-header-popup"}),t=FD("div",{className:"e-header-calendar"});e.appendChild(t),this.element.appendChild(e),this.headerPopup=new dP(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl}),this.headerPopup.isStringTemplate=!0;let i=this.getCalendarView();this.headerCalendar=new CV({value:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:i,start:i,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.headerCalendar.isStringTemplate=!0,this.headerCalendar.appendTo(t),this.headerPopup.hide()}calendarChange(e){e.value.getTime()!==this.parent.selectedDate.getTime()&&this.parent.changeDate(e.value),this.headerPopup.hide()}calculateViewIndex(e){let t=QD(e.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(t)}toolbarClickHandler(e){if(!e.item)return;switch(e.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains("e-popup-open")?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-week":this.parent.changeView("Week",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-work-week":this.parent.changeView("WorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month":this.parent.changeView("Month",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-year":this.parent.changeView("Year",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-agenda":this.parent.changeView("Agenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-day":this.parent.changeView("TimelineDay",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-year":this.parent.changeView("TimelineYear",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-today":this.parent.isSelectedDate(dB(this.parent.getCurrentTime()))||this.parent.changeDate(dB(this.parent.getCurrentTime()),e.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e.originalEvent);break;case"e-add":let t,i=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime();if(this.parent.activeCellsData&&!i)t=this.parent.activeCellsData;else{let e=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(this.parent.selectedDate.getTime()),n=this.parent.getCurrentTime();i.setHours(n.getHours(),Math.round(i.getMinutes()/e)*e,0);let s=new Date(new Date(i.getTime()).setMilliseconds(i.getMilliseconds()+e));t={startTime:i,endTime:s,isAllDay:!1}}this.parent.eventWindow.openEditor(KA(t,{cancel:!1,event:e.originalEvent}),"Add")}let t=this.toolbarObj.element.querySelector(".e-toolbar-pop");t&&"Input"!==e.item.type&&t.ej2_instances[0].hide({name:"SlideUp",duration:100})}getHeaderElement(){return this.toolbarObj.element}updateHeaderItems(e){let t=this.toolbarObj.element.querySelector(".e-prev"),i=this.toolbarObj.element.querySelector(".e-next"),n=this.toolbarObj.element.querySelector(".e-date-range");t&&("add"===e?jD([t],"e-hidden"):HD([t],"e-hidden")),i&&("add"===e?jD([i],"e-hidden"):HD([i],"e-hidden")),n&&("add"===e?jD([n],kB):HD([n],kB))}previousNextIconHandler(){let e=this.parent.getCurrentViewDates(),t=this.toolbarObj.element.querySelector(".e-prev"),i=this.toolbarObj.element.querySelector(".e-next"),n=new Date(e[0].getTime()),s=new Date(e[e.length-1].getTime());var r;"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView||(n=oB(dB(this.parent.selectedDate),this.parent.firstDayOfWeek),s=pB(n,7*this.parent.activeViewOptions.interval)),"Month"===this.parent.currentView&&(r=this.parent.selectedDate,n=new Date(r.getFullYear(),r.getMonth()),s=lB(fB(n,this.parent.activeViewOptions.interval-1))),XA(t)||this.toolbarObj.enableItems(t,n>this.parent.minDate),XA(i)||this.toolbarObj.enableItems(i,s<this.parent.maxDate),this.setCalendarMinMaxDate()}getModuleName(){return"headerbar"}destroy(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),$D(this.element),this.toolbarObj=null)}}class DB{constructor(e){this.parent=e,this.addEventListener()}getModuleName(){return"scroll"}setWidth(){this.parent.element.style.width=tO(this.parent.width)}setHeight(){this.parent.element.style.height=tO(this.parent.height)}addEventListener(){this.parent.on("content-ready",this.setDimensions,this),this.parent.on("ui-update",this.onPropertyChanged,this)}removeEventListener(){this.parent.off("content-ready",this.setDimensions),this.parent.off("ui-update",this.onPropertyChanged)}setDimensions(){this.setWidth(),this.setHeight();let e={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(sB,e)}onPropertyChanged(e){this.setDimensions()}destroy(){this.removeEventListener()}}class IB{constructor(e){this.parent=e,this.element=this.parent.element.querySelector(".e-table-container"),this.touchObj=new ZI(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),GO.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}scrollHandler(e){if(!("Agenda"===this.parent.currentView||this.parent.uiStateValues.action||e.originalEvent&&(e.originalEvent.target.classList.contains("e-appointment")||QD(e.originalEvent.target,".e-appointment")))){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains("e-translate")&&this.onTransitionEnd(),"Left"===e.scrollDirection||"Right"===e.scrollDirection){let t={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};if(this.parent.trigger("actionBegin",t),t.cancel)return;let i=this.element.querySelector(".e-content-wrap");if(i&&i.scrollWidth>i.clientWidth)return;this.isScrollTriggered=!0,e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}if(e.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel("e-next-panel","next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.nextPanel.element));let t=this.parent.enableRtl?e.distanceX:-e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+t)+"px)"}else if(e.scrollDirection===this.touchRightDirection){let t=0;this.previousPanel||(this.renderPanel("e-previous-panel","previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.previousPanel.element),t=this.previousPanel.element.offsetWidth);let i=this.parent.enableRtl?t-e.distanceX:-t+e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+i)+"px)"}}}swipeHandler(e){if(!this.isScrollTriggered||this.parent.uiStateValues.action)return;this.isScrollTriggered=!1;let t="Left"===e.swipeDirection?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if("Left"===e.swipeDirection&&t<this.parent.maxDate||"Right"===e.swipeDirection&&t>=this.parent.minDate){let t=Date.now()-this.timeStampStart,i=e.distanceX*(zO.isDevice?6:1.66);i>t||e.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(e.swipeDirection),i>t&&e.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=i/t/10+"s"),this.confirmSwipe(e.swipeDirection)):this.cancelSwipe(),this.parent.trigger("actionComplete",{requestType:"dateNavigate",cancel:!1,event:e.originalEvent})}else this.cancelSwipe();this.timeStampStart=null}tapHoldHandler(e){XA(QD(e.originalEvent.target,".e-appointment"))||!this.parent.isAdaptive||this.parent.quickPopup.tapHoldEventPopup(e.originalEvent)}renderPanel(e,t){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(t)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(e)}swapPanels(e){if(e===this.touchLeftDirection){let e=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=e}else{let e=this.previousPanel;this.previousPanel=this.currentPanel,this.currentPanel=e}}confirmSwipe(e){this.parent.trigger("navigating",{action:"date",cancel:!1,previousDate:e===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate},t=>{if(t.cancel)this.swapPanels(e),this.cancelSwipe();else{let t;this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),t=this.parent.enableRtl?e===this.touchLeftDirection?this.previousPanel?this.previousPanel.element.offsetLeft:this.currentPanel.element.offsetWidth:0:e===this.touchLeftDirection?-this.currentPanel.element.offsetLeft:0,jD([this.element],"e-translate"),this.element.style.transform="translatex("+t+"px)",this.parent.headerModule&&this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.renderModule.refreshDataManager()}})}cancelSwipe(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.generateColumnLevels(),jD([this.element],"e-translate"),this.element.style.transform="translatex("+(this.parent.enableRtl?this.previousPanel?this.previousPanel.element.offsetWidth:0:-this.currentPanel.element.offsetLeft)+"px)"}onTransitionEnd(){HD([this.element],"e-translate"),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&($D(this.previousPanel.element),this.previousPanel=null,HD([this.currentPanel.element],"e-previous-panel"),jD([this.currentPanel.element],"e-current-panel")),this.nextPanel&&($D(this.nextPanel.element),this.nextPanel=null,HD([this.currentPanel.element],"e-next-panel"),jD([this.currentPanel.element],"e-current-panel")),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""}getTranslateX(e){let t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.webkitTransform).m41}setDimensions(e){e.style.width=this.parent.element.clientWidth+"px"}resetValues(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",CB(this.element),HD([this.element],"e-translate")}destroy(){this.touchObj.destroy(),GO.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()}}class RB{constructor(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new $I(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}keyActionHandler(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":this.processDelete(e);break;case"escape":this.processEscape()}}addEventListener(){this.parent.on("cell-mouse-down",this.onCellMouseDown,this)}removeEventListener(){this.parent.off("cell-mouse-down",this.onCellMouseDown)}onCellMouseDown(e){if(!e.event.shiftKey&&(this.initialTarget=this.getClosestCell(e.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(e.event.target.classList.contains("e-work-cells")&&3!==e.event.which&&(this.parent.removeSelectedClass(),GO.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),GO.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.event.target.classList.contains("e-all-day-cells")&&3!==e.event.which))){this.parent.removeSelectedClass();let e=this.parent.getAllDayRow();GO.add(e,"mousemove",this.onMouseSelection,this),GO.add(e,"mouseup",this.onMoveup,this)}}onMouseSelection(e){jD([].slice.call(this.parent.element.querySelectorAll(".e-appointment")),"e-allow-select");let t=this.parent.boundaryValidation(e.pageY,e.pageX);if(t.bottom||t.top||t.left||t.right){let i=this.parent.element.querySelector(".e-content-wrap"),n=i.offsetWidth<=i.scrollWidth&&i.scrollLeft>=0&&i.scrollLeft+i.offsetWidth<=i.scrollWidth;i.offsetHeight<=i.scrollHeight&&i.scrollTop>=0&&i.scrollTop+i.offsetHeight<=i.scrollHeight&&(t.top||t.bottom)&&(i.scrollTop+=t.top?-e.target.offsetHeight:e.target.offsetHeight),n&&(t.left||t.right)&&(i.scrollLeft+=t.left?-e.target.offsetWidth:e.target.offsetWidth)}let i=this.getClosestCell(e);i&&this.selectCells(!0,i)}getClosestCell(e){return QD(e.target,".e-work-cells,.e-all-day-cells")}onMoveup(e){if(HD([].slice.call(this.parent.element.querySelectorAll(".e-appointment")),"e-allow-select"),e.target.classList.contains("e-work-cells")&&(GO.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),GO.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){let e=this.parent.getAllDayRow();GO.remove(e,"mousemove",this.onMouseSelection),GO.remove(e,"mouseup",this.onMoveup)}if(this.isPreventAction(e))return;let t=QD(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");this.parent.activeCellsData=this.getSelectedElements(t);let i={};this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,i),this.parent.trigger("select",{data:i,element:this.parent.activeCellsData.element,event:e,requestType:"cellSelect",showQuickPopup:!1},t=>{if(t.showQuickPopup||this.parent.quickInfoOnSelectionEnd){let t=KA(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.notify("cellClick",t)}})}processEnter(e){if(this.parent.activeViewOptions.readonly||this.isPreventAction(e))return;let t=e.target;if(QD(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t);let i=KA(this.parent.activeCellsData,{cancel:!1,event:e});this.parent.allowInline?this.parent.notify("inlineClick",{element:i.element,groupIndex:i.groupIndex,type:"Cell"}):this.parent.notify("cellClick",i)}else if(t.classList.contains("e-inline-subject"))this.parent.inlineModule.inlineCrudActions(t);else{if(!(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator")))return t.classList.contains("e-header-date")?(this.parent.setScheduleProperties({selectedDate:this.parent.getDateFromElement(t)}),this.parent.changeView(this.parent.getNavigateView(),e),void this.processEscape()):void 0;t.click()}}getSelectedElements(e){let t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){let i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t}getCells(e,t,i){let n=this.parent.getContentTable(),s=[].slice.call(n.querySelectorAll("td")),r=n.rows.length,o=n.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){let e=this.parent.getAllDayRow();s=[].slice.call(e.cells),r=1,o=e.cells.length}let a=s.indexOf(t),l=s.indexOf(i),c=[];if(e){for(let e=0;e<o;e++)for(let t=0;t<r;t++)c.push(s[o*t+e]);a=c.indexOf(t),l=c.indexOf(i)}if(a>l){let e=a;a=l,l=e}return(e?c:s).slice(a,l+1)}focusFirstCell(){if("Agenda"===this.parent.currentView){let e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()){let e=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,e)}else this.selectCells(!1,this.parent.getWorkCellElements()[0])}isInverseTableSelect(){return this.parent.activeView.isInverseTableSelect}selectCells(e,t){this.parent.removeSelectedClass();let i=t instanceof Array?t.slice(-1)[0]:t;if(e){let e,n=["Day","Week","WorkWeek","Month","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"],s={element:t,requestType:"mousemove",allowMultipleRow:!0};this.parent.inlineModule.removeInlineAppointmentElement(),this.parent.trigger("select",s,t=>{(!t.allowMultipleRow||!this.parent.allowMultiRowSelection)&&n.indexOf(this.parent.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]);let s=this.getCells(this.isInverseTableSelect(),this.initialTarget,i);if(this.parent.activeViewOptions.group.resources.length>0){e=this.initialTarget.getAttribute("data-group-index");let t=[];for(let i of s)i.getAttribute("data-group-index")===e&&t.push(i);s=t}if(this.parent.allowMultiCellSelection||(s=[this.initialTarget]),this.selectedCells=s,s.length>2&&!i.classList.contains("e-all-day-cells")){let t=this.getAllDayCells(s);if(this.parent.activeViewOptions.group.resources.length>0){let i=[];for(let n of t)n.getAttribute("data-group-index")===e&&i.push(n);t=i}s=s.concat(t)}i.getAttribute("data-group-index")!==e&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(s,i)})}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)}selectAppointment(e,t){let i,n=this.getAppointmentElements();if(!(n.length<0)){if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){let s=n.indexOf(t);i=n[e?s-1:s+1]}else i=e?n[n.length-1]:n[0];i&&(this.parent.eventBase.addSelectedAppointments([i]),i.focus(),jD([i],"e-active-appointment-agenda"))}}selectAppointmentElementFromWorkCell(e,t){if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){let i=this.getUniqueAppointmentElements(),n=[],s=this.parent.getDateFromElement(t).getTime();if(this.parent.eventsProcessed.filter(t=>e?t[this.parent.eventFields.startTime].getTime()<=s:t[this.parent.eventFields.startTime].getTime()>=s).filter(e=>{i.filter(t=>{JSON.stringify(e.Guid)===JSON.stringify(t.getAttribute("data-guid"))&&n.push(t)})}),n.length>0){let t=this.getAppointmentElementsByGuid((e?n[n.length-1]:n[0]).getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(t),t[t.length-1].focus()}}}getAllDayCells(e){let t=this.parent.getAllDayRow();if(!t)return[];let i=e[0],n=e[e.length-1],s=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-s.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]}getAppointmentElements(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))}getAppointmentElementsByGuid(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))}getUniqueAppointmentElements(){let e=this.getAppointmentElements(),t=[];return e.map(e=>e.getAttribute("data-guid")).filter((i,n,s)=>{s.indexOf(i)===n&&t.push(e[n])}),t}getWorkCellFromAppointmentElement(e){let t=this.parent.eventBase.getEventByGuid(e.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([t])}processViewNavigation(e){let t=parseInt(e.key,10)-1;t<this.parent.views.length&&(this.parent.changeView(this.parent.viewCollections[t].option,e,void 0,t),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus())}processUp(e,t){if(t&&(this.parent.activeView.isTimelineView()||"MonthAgenda"===this.parent.currentView))return;let i=e.target,n=this.parent.getSelectedElements(),s=this.parent.eventBase.getSelectedAppointments(),r=this.parent.element.querySelector(".e-more-popup-wrapper"),o=this.getQuickPopupElement();if(n.length>0&&!e.target.classList.contains("e-work-cells")&&(i=n[n.length-1]),s.length>0&&!r.classList.contains("e-popup-open")&&!o.classList.contains("e-popup-open")&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),i)if(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector(".e-popup-open")){let e=this.parent.getTableRows(),n=e.indexOf(i.parentElement);n>0&&n<e.length&&this.selectCells(t,e[n-1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!0,i)}processDown(e,t){if(t&&(this.parent.activeView.isTimelineView()||"MonthAgenda"===this.parent.currentView))return;let i=e.target,n=this.parent.getSelectedElements(),s=this.parent.eventBase.getSelectedAppointments(),r=this.parent.element.querySelector(".e-more-popup-wrapper"),o=this.getQuickPopupElement();n.length>0&&!e.target.classList.contains("e-work-cells")&&(i=n[n.length-1]),s.length>0&&!r.classList.contains("e-popup-open")&&!o.classList.contains("e-popup-open")&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());let a=this.parent.getTableRows();if(i)if(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector(".e-popup-open")){let e=a.indexOf(i.parentElement);e>=0&&e<a.length-1&&this.selectCells(t,a[e+1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!1,i)}processLeftRight(e){let t=this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[i].cells.length}}getQuickPopupElement(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")}isCancelLeftRightAction(e,t){if("Agenda"===this.parent.currentView||t&&"MonthAgenda"===this.parent.currentView)return!0;if(this.isPreventAction(e)&&t)return!0;let i=this.parent.element.querySelector(".e-more-popup-wrapper"),n=this.getQuickPopupElement();return!(!i.classList.contains("e-popup-open")&&!n.classList.contains("e-popup-open"))}processRight(e,t){if(this.isCancelLeftRightAction(e,t))return;let i,n=this.parent.getSelectedElements(),s=this.parent.eventBase.getSelectedAppointments(),r=e.target;if(n.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=n[n.length-1]),!(s.length>0)||(r=this.getWorkCellFromAppointmentElement(s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){let n=this.processLeftRight(r);if(n.columnIndex>=0&&n.columnIndex<n.maxIndex-1)i=this.calculateNextPrevDate(r,n.element.rows[n.rowIndex].cells[r.cellIndex+1],"right"),XA(i)||this.selectCells(t,i);else if(n.columnIndex===n.maxIndex-1)if(!this.isInverseTableSelect()&&n.rowIndex<n.element.rows.length-1)i=this.calculateNextPrevDate(r,n.element.rows[n.rowIndex+1].cells[0],"right"),XA(i)||this.selectCells(t,i);else if(!t){let t=this.isInverseTableSelect()?n.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);let i=this.parent.getContentTable();this.selectCells(!1,i.rows[t].cells[0])}}else if(r.classList.contains("e-all-day-cells")){let i=r.cellIndex,n=this.parent.getAllDayRow(),s=n.cells.length;if(i>=0&&i<s-1)this.selectCells(t,n.cells[i+1]);else if(i===s-1&&!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);let t=this.parent.getAllDayRow();this.selectCells(!1,t.cells[0])}}}processLeft(e,t){if(this.isCancelLeftRightAction(e,t))return;let i,n=e.target,s=this.parent.getSelectedElements();s.length>0&&!n.classList.contains("e-work-cells")&&!n.classList.contains("e-all-day-cells")&&(n=s[s.length-1]);let r=this.parent.eventBase.getSelectedAppointments();if(!(r.length>0)||(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),n))if(e.target.classList.contains("e-work-cells")&&n.classList.contains("e-work-cells")){let s=this.processLeftRight(n);if(s.columnIndex>0&&s.columnIndex<s.maxIndex)i=this.calculateNextPrevDate(n,s.element.rows[s.rowIndex].cells[n.cellIndex-1],"left"),XA(i)||this.selectCells(t,i);else if(0===s.columnIndex)if(!this.isInverseTableSelect()&&s.rowIndex>0)i=this.calculateNextPrevDate(n,s.element.rows[s.rowIndex-1].cells[s.maxIndex-1],"left"),XA(i)||this.selectCells(t,i);else if(!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);let t=this.parent.getContentTable(),i=this.isInverseTableSelect()?s.rowIndex:t.rows.length-1;this.selectCells(!1,t.rows[i].cells[s.maxIndex-1])}}else if(n.classList.contains("e-all-day-cells")){let i=n.cellIndex,s=this.parent.getAllDayRow(),r=s.cells.length;if(i>0&&i<r)this.selectCells(t,s.cells[i-1]);else if(0===i&&!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);let t=this.parent.getAllDayRow();this.selectCells(!1,t.cells[r-1])}}}calculateNextPrevDate(e,t,i){let n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){let s=this.parent.getDateFromElement(e),r="right"===i?new Date(s.setDate(s.getDate()+1)):new Date(s.setDate(s.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(r).toString()+'"][data-group-index="'+n+'"]'))[0]}return t}getFocusableElements(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))}processTabOnPopup(e,t){let i=this.getFocusableElements(t);i=i.filter(e=>{let t=this.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))});let n=i[0],s=i[i.length-1];XA(s)||document.activeElement!==s||e.shiftKey||(e.preventDefault(),n.focus()),!XA(n)&&document.activeElement===n&&e.shiftKey&&(e.preventDefault(),s.focus())}processTab(e,t){let i=e.target,n=QD(i,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(n&&n.classList.contains("e-popup-open"))return n.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,n);if(i.classList.contains("e-schedule"))return void this.parent.eventBase.removeSelectedAppointmentClass();if(i.classList.contains("e-appointment")){let n=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),s=this.parent.eventBase.getSelectedAppointments();if(s.length>0&&(i=s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!t&&i.getAttribute("data-guid")===n[n.length-1].getAttribute("data-guid")||t&&i.getAttribute("data-guid")===n[0].getAttribute("data-guid"))return;return void("Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||(this.selectAppointment(t,i),e.preventDefault()))}let s=this.parent.getSelectedElements();return s.length>0&&!i.classList.contains("e-appointment")?(i=s[s.length-1],this.selectAppointmentElementFromWorkCell(t,i),void e.preventDefault()):void 0}processDelete(e){let t=document.activeElement;if("MonthAgenda"===this.parent.currentView){let e=this.parent.eventBase.getSelectedEvents().element;t=e&&XA(e.length)?e:e[0]}if(t&&t.classList.contains("e-appointment")){if(jD([t],"e-appointment-border"),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||t.classList.contains("e-read-only"))return;this.parent.quickPopup.deleteClick()}}processEscape(){this.parent.quickPopup.onClosePopup(),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()}isPreventAction(e){let t=QD(e.target,".e-resource-group-cells");return!(!this.parent.activeView.isTimelineView()||XA(t))}getModuleName(){return"keyboard"}destroy(){this.removeEventListener(),this.keyboardModule.destroy()}}class PB{constructor(e,t){this.initDataManager(e,t)}initDataManager(e,t){this.dataManager=e instanceof RM?e:new RM(e),this.query=t instanceof _M?t:new _M}generateQuery(e,t){let i=this.query.clone();return e&&i.addParams("StartDate",e.toISOString()),t&&i.addParams("EndDate",t.toISOString()),i}getData(e){return this.dataManager.executeQuery(e)}}class MB{firstDateOfMonth(e){return new Date(e.getFullYear(),e.getMonth())}lastDateOfMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}isMonthStart(e){return 1===e.getDate()}getLeapYearDaysCount(){return 366}getYearDaysCount(e,t){return(e.getFullYear()+t)%4==0?366:365}getDate(e){return e.getDate()}getMonth(e){return e.getMonth()+1}getFullYear(e){return e.getFullYear()}getYearLastDate(e,t){return new Date(e.getFullYear()+t,0,0)}getMonthDaysCount(e){return this.lastDateOfMonth(e).getDate()}getMonthStartDate(e){return new Date(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes())}getMonthEndDate(e){return e.setDate(1),new Date(e.setMonth(e.getMonth()+1))}getExpectedDays(e,t){return t}setDate(e,t){e.setDate(t)}setValidDate(e,t,i,n,s){XA(s)?e.setMonth(e.getMonth()+t,i):e.setMonth((s?n:e.getMonth())+t)}setMonth(e,t,i){e.setFullYear(e.getFullYear()),e.setMonth(t-1),e.setDate(i)}addYears(e,t){e.setFullYear(e.getFullYear()+t)}isSameMonth(e,t){return e.getMonth()===t.getMonth()}checkMonth(e,t){return-1===t.indexOf(e.getMonth()+1)}compareMonth(e,t){return e.getMonth()>t.getMonth()}isSameYear(e,t){return e.getFullYear()===t.getFullYear()}isLastMonth(e){return 11===e.getMonth()}isLeapYear(e,t){return(e+t)%4==0}}class LB{firstDateOfMonth(e){let t=hO.getHijriDate(e);return hO.toGregorian(t.year,t.month,1)}lastDateOfMonth(e){let t=this.getHijriDate(e),i=hO.toGregorian(t.year,t.month,this.getDaysInMonth(t.month,t.year)),n=new Date(i.getTime());new Date(n.setDate(n.getDate()+1));let s=this.getHijriDate(n);return t.month===s.month?n:(s=hO.getHijriDate(i),t.month===s.month?i:new Date(i.setDate(i.getDate()-1)))}isMonthStart(e){return 1===this.getHijriDate(e).date}getLeapYearDaysCount(){return 355}getYearDaysCount(e,t){let i=this.getHijriDate(e);return this.isLeapYear(i.year,t)?355:354}getDate(e){return this.getHijriDate(e).date}getMonth(e){return this.getHijriDate(e).month}getFullYear(e){return this.getHijriDate(e).year}getYearLastDate(e,t){let i=hO.getHijriDate(e);return hO.toGregorian(i.year+t,1,0)}getMonthDaysCount(e){let t=this.lastDateOfMonth(e);return this.getHijriDate(t).date}getMonthStartDate(e){let t=this.firstDateOfMonth(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())}getMonthEndDate(e){let t=this.lastDateOfMonth(e);return t.setDate(t.getDate()+1),new Date(t.setMonth(t.getMonth()))}getExpectedDays(e,t){let i=this.getHijriDate(e),n=[];for(let s=0;s<t.length;s++){let e=hO.toGregorian(i.year,i.month,t[s]);n.push(e.getDate())}return n}setDate(e,t){let i=hO.getHijriDate(e),n=hO.toGregorian(i.year,i.month,t);this.updateDateObj(e,n)}setValidDate(e,t,i,n,s){let r=XA(s)?e:this.firstDateOfMonth(s),o=hO.getHijriDate(r),a=hO.toGregorian(o.year,o.month+t,i);this.updateDateObj(e,a)}setMonth(e,t,i){let n=hO.getHijriDate(e),s=hO.toGregorian(n.year,t,i);this.updateDateObj(e,s)}addYears(e,t,i){let n=hO.getHijriDate(e),s=hO.toGregorian(n.year+t,i,1);this.updateDateObj(e,s)}isSameMonth(e,t){let i=this.getHijriDate(e),n=this.getHijriDate(t);return i.month===n.month}checkMonth(e,t){let i=this.getHijriDate(e);return-1===t.indexOf(i.month)}compareMonth(e,t){let i=this.getHijriDate(e),n=this.getHijriDate(t);return i.month>n.month}isSameYear(e,t){let i=this.getHijriDate(e),n=this.getHijriDate(t);return i.year===n.year}isLastMonth(e){return 12===this.getHijriDate(e).month}updateDateObj(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())}isLeapYear(e,t){return(14+11*(e+t))%30<11}getDaysInMonth(e,t){let i=0;return i=29+(e+1)%2,11===e&&this.isLeapYear(t,0)&&i++,i}getHijriDate(e){return hO.getHijriDate(e)}}class NB{offset(e,t){let i=e.getTimezoneOffset();try{let n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(n){return 0}}convert(e,t,i){"string"==typeof t&&(t=this.offset(e,t)),"string"==typeof i&&(i=this.offset(e,i));let n=e.getTimezoneOffset(),s=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(s-n))}add(e,t){return this.convert(e,e.getTimezoneOffset(),t)}remove(e,t){return this.convert(e,t,e.getTimezoneOffset())}removeLocalOffset(e){return new Date(+e-6e4*e.getTimezoneOffset())}getLocalTimezoneName(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}}let VB=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}];function BB(e,t,i){let n="";if(e.monthDay.length)n+=e.monthDay[0];else if(e.day){let s=e.setPosition-1;n+=i.getConstant(bF[s>-1?s:bF.length-1])+" "+TB(WA(SF[e.day[0]],t),"single")}return n}function FB(e,t,i,n,s=yF,r=null,o="Gregorian",a=null,l=null){let c,h=rF(t);fF=hF(o);let d=[],u=new Date(e.getTime());dF=[];let p=XA(i)?[]:i.split(","),f=new NB;if(p.forEach(e=>{let t=jB(e);a&&l&&(t=f.convert(new Date(t.getTime()),a,l)),dF.push(new Date(t.getTime()).setHours(0,0,0,0))}),h.recExceptionCount=XA(h.count)?0:dF.length,pF=r&&r>e&&!h.count?new Date(new Date(r.getTime()).setHours(0,0,0)):null,!h.until&&pF&&(c=new Date(pF.getTime()),c.setDate(pF.getDate()+s*h.interval),h.until=c),h.until&&e>h.until)return d;switch(uF=s,function(e){for(;gF[0]!==e;)lF(gF)}(vF[n]),h.freq){case"DAILY":!function(e,t,i,n){let s,r=new Date(e.getTime()),o=n.interval,a=UB(e,n),l=n.day;for(;iF(r,t)&&(s=!0,s=cF(r,n),!(s&&(l.indexOf(vF[r.getDay()])>-1||0===l.length)&&(HB(i,r.getTime()),a&&i.length+n.recExceptionCount>=a)));)r.setDate(r.getDate()+o)}(u,h.until,d,h);break;case"WEEKLY":!function(e,t,i,n){let s=new Date(e.getTime());n.day.length||n.day.push(vF[e.getDay()]);let r,o=n.interval,a=n.day,l=UB(e,n),c=!0,h=[];if(a.length>1)for((XA(n.wkst)||""===n.wkst)&&(n.wkst=gF[0]),r=vF.indexOf(n.wkst);iF(s,t);){let d=vF.indexOf(vF[s.getDay()])-r;d=-1===d?6:d;let u=pB(s,-d),p=pB(u,6),f=new Date(s.getTime());for(dB(p),dB(f);p>=f&&(a.indexOf(vF[s.getDay()])>-1&&h.push([s.getTime()]),!(l&&i.length+n.recExceptionCount>=l));)s.setDate(s.getDate()+1),f=new Date(s.getTime()),dB(f);if(s.setDate(s.getDate()-1),l&&i.length+n.recExceptionCount>=l)break;s.setDate(s.getDate()+1+7*(o-1)),KB(h,c,e,t,i,n),h=[]}else{for(s=sF(e,n.day);iF(s,t)&&(c=cF(s,n),c&&a.indexOf(vF[s.getDay()])>-1&&HB(i,s.getTime()),!(l&&i.length+n.recExceptionCount>=l));)s.setDate(s.getDate()+7*o);KB(h,c,e,t,i,n),h=[]}}(u,h.until,d,h);break;case"MONTHLY":qB(u,h.until,d,h);break;case"YEARLY":!function(e,t,i,n){switch(function(e){return e.yearDay.length?"YEARDAY":e.weekNo.length?"WEEKNO":"MONTH"}(n)){case"MONTH":qB(e,t,i,n);break;case"WEEKNO":!function(e,t,i,n){let s,r,o,a,l,c,h=fF.getYearLastDate(e,0),d=UB(e,n),u=n.weekNo,p=[],f=n.day;for(;iF(h,t);){r=gF.indexOf(vF[h.getDay()]),o=6-r+1;for(let r=0;r<u.length;r++)for(a=u[r],a=a>0?a:53+a+1,l=1===a?o:o+7*(a-1),c=1===a?o-7:o+7*(a-2);c<l;)s=new Date(h.getTime()+864e5*c),(0===f.length||f.indexOf(vF[s.getDay()])>-1)&&(XA(n.setPosition)?ZB(void 0,e,t,i,n,s.getTime()):p.push([s.getTime()])),c++;if(XA(n.setPosition)||tF(p,void 0,e,t,i,n),d&&i.length+n.recExceptionCount>=d)return;h=fF.getYearLastDate(s,n.interval),p=[]}}(e,t,i,n);break;case"YEARDAY":!function(e,t,i,n){let s,r,o=fF.getYearLastDate(e,0),a=UB(e,n),l=[],c=n.day;for(;iF(o,t);){for(let a=0;a<n.yearDay.length;a++)r=n.yearDay[a],s=new Date(o.getTime()),r!==fF.getLeapYearDaysCount()&&r!==-fF.getLeapYearDaysCount()||fF.isLeapYear(fF.getFullYear(s),1)?(s.setDate(s.getDate()+(r<0?fF.getYearDaysCount(s,1)+1+r:r)),(0===c.length||c.indexOf(vF[s.getDay()])>-1)&&(null==n.setPosition?ZB(void 0,e,t,i,n,s.getTime()):l.push([s.getTime()]))):s.setDate(s.getDate()+1);if(XA(n.setPosition)||tF(l,void 0,e,t,i,n),a&&i.length+n.recExceptionCount>=a)return;o=fF.getYearLastDate(s,n.interval),l=[]}}(e,t,i,n)}}(u,h.until,d,h)}return d}function jB(e){return new Date(e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,5)+":"+e.substr(11,2)+":"+e.substr(13))}function HB(e,t){let i=new Date(t).setHours(0,0,0,0);-1===dF.indexOf(i)&&(!pF||i>=pF.getTime())&&e.push(t)}function UB(e,t){let i=uF;return t.count?i=t.count:t.until&&("DAILY"===t.freq||"WEEKLY"===t.freq?i=Math.floor((t.until.getTime()-e.getTime())/864e5)+1:"MONTHLY"!==t.freq&&"YEARLY"!==t.freq||(i=Math.floor((t.until.getMonth()+12*t.until.getFullYear()-(e.getMonth()+12*e.getFullYear()))/t.interval)+(t.day.length>1?Math.floor((t.until.getTime()-e.getTime())/864e5)+1:1),"YEARLY"===t.freq&&(i=t.month.length>1?i*t.month.length:i))),i}function qB(e,t,i,n){switch(n.month.length||n.day.length||n.monthDay.length?n.month.length>0&&!n.day.length&&!n.monthDay.length&&n.monthDay.push(e.getDate()):(n.monthDay.push(e.getDate()),"YEARLY"===n.freq&&n.month.push(e.getMonth()+1)),function(e){return e.monthDay.length&&!e.day.length?"date":!e.monthDay.length&&e.day.length?"day":"both"}(n)){case"day":switch(n.freq){case"MONTHLY":$B(e,t,i,n);break;case"YEARLY":!function(e,t,i,n){let s=n.day,r=s.map(e=>CF.test(e));if(s.length>1&&r.indexOf(!0)>-1)return void function(e,t,i,n){let s,r,o,a=n.day,l=UB(e,n),c=new Date(e.getTime()),h=n.interval,d=[],u=[],p=0;c=fF.getMonthStartDate(c);let f=[];for(n.month.length&&fF.setMonth(c,n.month[0],1),c=sF(c,n.day);iF(c,t);){r=new Date(c.getTime());for(let h=0;h<=n.month.length;h++)for(let m=0;m<=a.length-1;m++){for(c=fF.getMonthStartDate(c),c=sF(c,n.day),d=[];fF.isSameYear(r,c)&&l&&i.length+n.recExceptionCount<=l;)for(;fF.isSameYear(r,c);){if(r=new Date(c.getTime()),0===n.month.length||n.month.length>0&&n.month[h]===fF.getMonth(r)){let e=a[m].match(EF),t=parseInt(e[0],10);for(o=new Date(c.getTime());fF.isSameYear(o,c)&&fF.isSameMonth(o,c);)e[e.length-1]===vF[o.getDay()]&&d.push([o.getTime()]),o.setDate(o.getDate()+1);o.setDate(o.getDate()-1),s=e[0].indexOf("-")>-1?d.length- -1*t:t-1,s=isNaN(s)?0:s}p=YB(c,n,p,void 0,1),c=sF(c,n.day)}if(c=0===m&&o?new Date(o.getTime()):new Date(r.getTime()),d.length>0&&(XA(n.setPosition)?tF(d,void 0,e,t,i,n,s):u=[QB(d,s,f)]),l&&i.length+n.recExceptionCount>=l)return}XA(n.setPosition)||(eF(u,void 0,e,t,i,n),f=[]),fF.isLastMonth(c)?(fF.setValidDate(c,1,1),c.setFullYear(c.getFullYear()+h-1)):c.setFullYear(c.getFullYear()+h),c=sF(c,n.day),n.month.length&&fF.setMonth(c,n.month[0],c.getDate())}}(e,t,i,n);if(n.month.length&&1===s.length&&r.indexOf(!0)>-1)return void $B(e,t,i,n);let o,a=new Date(e.getTime()),l=UB(e,n),c=n.interval,h=[];for(n.month.length&&fF.setMonth(a,n.month[0],a.getDate()),XA(n.setPosition)&&0===n.month.length&&0===n.weekNo.length&&a.setFullYear(e.getFullYear(),0,1),a=fF.getMonthStartDate(a),a=sF(a,n.day);iF(a,t);){for(o=new Date(a.getTime());fF.isSameYear(o,a)&&l&&i.length+n.recExceptionCount<=l;)for(o=new Date(a.getTime());fF.isSameYear(o,a);){if(!(0===n.month.length||n.month.length>0&&!fF.checkMonth(a,n.month))){fF.setValidDate(a,1,1),a=sF(a,n.day);break}if(s.length>1){if(fF.compareMonth(o,a)){fF.setValidDate(a,1,1),a=sF(a,n.day);break}s.indexOf(vF[o.getDay()])>-1&&h.push([o.getTime()]),o.setDate(o.getDate()+1)}else{if(o.getFullYear()>a.getFullYear()){fF.setValidDate(a,1,1),a=sF(a,n.day);break}let t=nF(s[0]);vF[o.getDay()]===t&&new Date(o.getFullYear(),o.getMonth(),0)>new Date(e.getFullYear())&&h.push([o.getTime()]),o.setDate(o.getDate()+7)}}if(a.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),JB(h,e,t,i,n),fF.isLastMonth(a)&&(fF.setValidDate(a,1,1),a=sF(a,n.day)),a.setFullYear(a.getFullYear()+c-1),l&&i.length+n.recExceptionCount>=l)return;a=sF(a,n.day),h=[]}}(e,t,i,n)}break;case"both":case"date":switch(n.freq){case"MONTHLY":zB(e,t,i,n);break;case"YEARLY":!function(e,t,i,n){if(n.month.length)return void zB(e,t,i,n);let s,r=WB(e,n);for(r.tempDate=r.mainDate=fF.getMonthStartDate(r.tempDate);iF(r.tempDate,t);){for(s=new Date(r.tempDate.getTime());fF.isSameYear(s,r.tempDate)&&r.expectedCount&&i.length+n.recExceptionCount<=r.expectedCount;){if(!(0===n.month.length||n.month.length>0&&!fF.checkMonth(r.tempDate,n.month))){fF.setValidDate(r.tempDate,1,1),r.tempDate=sF(r.tempDate,n.day);break}GB(n,r,t,!1),r.beginDate=new Date(r.tempDate.getTime()),r.monthInit=YB(r.tempDate,n,r.monthInit,r.beginDate)}if(r.tempDate.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),KB(r.dateCollection,r.state,e,t,i,n),fF.isLastMonth(r.tempDate)&&(fF.setValidDate(r.tempDate,1,1),r.tempDate=sF(r.tempDate,n.day)),r.expectedCount&&i.length+n.recExceptionCount>=r.expectedCount)return;r.tempDate.setFullYear(r.tempDate.getFullYear()+n.interval-1),r.tempDate=sF(r.tempDate,n.day),r.monthInit=YB(r.tempDate,n,r.monthInit,r.beginDate),r.dateCollection=[]}}(e,t,i,n)}}}function WB(e,t){let i={monthCollection:[],index:0,tempDate:new Date(e.getTime()),mainDate:new Date(e.getTime()),expectedCount:UB(e,t),monthInit:0,dateCollection:[]};return t.month.length&&fF.setMonth(i.tempDate,t.month[0],i.tempDate.getDate()),i}function zB(e,t,i,n){let s=WB(e,n);if(s.tempDate=s.mainDate=fF.getMonthStartDate(s.tempDate),!(("MONTHLY"===n.freq&&12===n.interval||"YEARLY"===n.freq)&&fF.getMonthDaysCount(e)<n.monthDay[0]))for(;iF(s.tempDate,t);){if(s.beginDate=new Date(s.tempDate.getTime()),GB(n,s,t,!0,e,i),XA(n.setPosition)||tF(s.dateCollection,s.state,e,t,i,n),s.expectedCount&&i.length+n.recExceptionCount>=s.expectedCount)return;s.monthInit=YB(s.tempDate,n,s.monthInit,s.beginDate),s.dateCollection=[]}}function GB(e,t,i,n,s,r){for(let o=0;o<e.monthDay.length;o++){t.date=e.monthDay[o],t.tempDate=fF.getMonthStartDate(t.tempDate);let a=fF.getMonthDaysCount(t.tempDate);if(t.date=t.date>0?t.date:a+t.date+1,oF(t.tempDate,t.date,t.mainDate)&&t.date>0){if(fF.setDate(t.tempDate,t.date),i&&t.tempDate>i)return;(0===e.day.length||e.day.indexOf(vF[t.tempDate.getDay()])>-1)&&(n&&XA(e.setPosition)&&t.expectedCount&&r.length+e.recExceptionCount<t.expectedCount?ZB(t.state,s,i,r,e,t.tempDate.getTime()):t.dateCollection.push([t.tempDate.getTime()]))}}}function YB(e,t,i,n=null,s){let r=n?n.getMonth():0,o=fF.getMonthStartDate(e);return s=XA(s)?t.interval:s,e.setFullYear(o.getFullYear()),e.setMonth(o.getMonth()),e.setDate(o.getDate()),t.month.length?(i++,fF.setMonth(e,t.month[i%=t.month.length],1),0===i&&fF.addYears(e,s,t.month[0])):(n&&n.getFullYear()<e.getFullYear()&&(r=e.getMonth()-1),fF.setValidDate(e,s,1,r,n)),i}function $B(e,t,i,n){if(n.day.length>1)return void function(e,t,i,n){let s=n.day,r=new Date(e.getTime());r=fF.getMonthStartDate(r);let o,a,l=[],c=[],h=[],d=UB(e,n),u=0;for(n.month.length&&fF.setMonth(r,n.month[0],1),r=sF(r,n.day);iF(r,t)&&d&&i.length+n.recExceptionCount<d;){let p=new Date(r.getTime());if(s.map(e=>CF.test(e)).indexOf(!0)>-1){for(let a=0;a<=s.length-1;a++){let u=s[a].match(EF),f=parseInt(u[0],10);for(r=new Date(r.getTime()),r=fF.getMonthStartDate(r),r=sF(r,s),p.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());fF.isSameYear(p,r)&&fF.isSameMonth(p,r);)u[u.length-1]===vF[p.getDay()]&&l.push([p.getTime()]),p.setDate(p.getDate()+1);if(p.setDate(p.getDate()-1),o=u[0].indexOf("-")>-1?l.length- -1*f:f-1,o=isNaN(o)?0:o,l.length>0&&(XA(n.setPosition)?tF(l,void 0,e,t,i,n,o):c=[QB(l,o,h)]),d&&i.length+n.recExceptionCount>=d)return;l=[]}XA(n.setPosition)||(eF(c,void 0,e,t,i,n),h=[]),u=YB(r,n,u,a),r=sF(r,n.day),l=[]}else{let c=[],h=aF(s);p.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());let f=new Date(r.getTime());for(a=new Date(r.getTime());fF.isSameMonth(f,r);)c.push(r.getTime()),s.indexOf(vF[r.getDay()])>-1&&(l.push(c),c=[]),r.setDate(r.getDate()+h[vF[r.getDay()]]);if(o=n.setPosition<1?l.length+n.setPosition:n.setPosition-1,XA(n.setPosition)){o=0;let e=[];for(let t=0;t<l.length;t++)for(let i=0;i<l[t].length;i++)e.push(l[t][i]);l=[e]}if(l.length>0&&tF(l,void 0,e,t,i,n,o),d&&i.length+n.recExceptionCount>=d)return;u=YB(r,n,u,a),r=sF(r,n.day),l=[]}}}(e,t,i,n);let s,r=new Date(e.getTime()),o=UB(e,n),a=[],l=0;for(r=fF.getMonthStartDate(r),n.month.length&&fF.setMonth(r,n.month[0],1),r=sF(r,n.day);iF(r,t)&&o&&i.length+n.recExceptionCount<o;){s=new Date(r.getTime());let o=new Date(r.getTime());for(;fF.isSameMonth(r,o);)a.push([o.getTime()]),o.setDate(o.getDate()+7);JB(a,e,t,i,n),l=YB(r,n,l,s),r=sF(r,n.day),a=[]}}function KB(e,t,i,n,s,r){let o=r.setPosition<1?e.length+r.setPosition:r.setPosition-1;XA(r.setPosition)&&(o=0,e=XB(e)),e.length>0&&tF(e,t,i,n,s,r,o)}function XB(e){let t=[];for(let i=0;i<e.length;i++)for(let n=0;n<e[i].length;n++)t.push(new Date(e[i][n]).getTime());return t.length>0?[t]:[]}function JB(e,t,i,n,s){let r,o,a=[],l=[];o=function(e,t){let i,n={monthCollection:[],index:0};if(1===t.length){let n,s=t[0].match(EF);s.length>1?(n=parseInt(s[0],10),i=n<1?e.length+n:n-1):(i=0,e=XB(e))}else i=0,e=XB(e);return n.monthCollection=e,n.index=i,n}(e,s.day),e=o.monthCollection,r=o.index,null!=s.setPosition?(l=[QB(e,r,a)],eF(l,void 0,t,i,n,s)):e.length>0&&tF(e,void 0,t,i,n,s,r),a=[]}function QB(e,t,i){for(let n=0;n<e[t].length;n++)i.push(e[t][n]);return i}function ZB(e,t,i,n,s,r){let o=UB(t,s),a=new Date(r);e=cF(a,s),a>=t&&iF(a,i)&&e&&o&&n.length+s.recExceptionCount<o&&HB(n,r)}function eF(e,t,i,n,s,r){if(e.length>0)for(let o=0;o<e.length;o++)e[o].sort(),ZB(t,i,n,s,r,e[o][r.setPosition<1?e[o].length+r.setPosition:r.setPosition-1])}function tF(e,t,i,n,s,r,o){if(e.length>0){e[o=XA(o)?r.setPosition<1?e.length+r.setPosition:r.setPosition-1:o].sort();for(let a=0;a<e[o].length;a++)ZB(t,i,n,s,r,e[o][a])}}function iF(e,t){return!t||e<=t}function nF(e){return e.replace(_F,"")}function sF(e,t){let i,n=new Date(e.getTime());if(t.length>0){let e=[];for(let n=0;n<=t.length-1;n++)i=nF(t[n]),e.push(i);if(-1===e.indexOf(vF[n.getDay()]))do{n.setDate(n.getDate()+1)}while(-1===e.indexOf(vF[n.getDay()]))}return n}function rF(e){let t,i={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},n=e.split(";"),s=[];if(n.forEach(e=>{switch(s=e.split("="),s[0]){case"UNTIL":t=s[1],i.until=jB(t);break;case"BYDAY":i.day=s[1].split(","),i.validRules.push(s[0]);break;case"BYMONTHDAY":i.monthDay=s[1].split(",").map(Number),i.validRules.push(s[0]);break;case"BYMONTH":i.month=s[1].split(",").map(Number),i.validRules.push(s[0]);break;case"BYYEARDAY":i.yearDay=s[1].split(",").map(Number),i.validRules.push(s[0]);break;case"BYWEEKNO":i.weekNo=s[1].split(",").map(Number),i.validRules.push(s[0]);break;case"INTERVAL":i.interval=parseInt(s[1],10);break;case"COUNT":i.count=parseInt(s[1],10);break;case"BYSETPOS":i.setPosition=parseInt(s[1],10)>4?-1:parseInt(s[1],10);break;case"FREQ":i.freq=s[1];break;case"WKST":i.wkst=s[1]}}),"MONTHLY"===i.freq&&0===i.monthDay.length){let e=i.validRules.indexOf("BYDAY");i.validRules.splice(e,1)}return i}function oF(e,t,i){return t<=fF.getMonthDaysCount(e)&&e>=i}function aF(e){let t={};return e.forEach((i,n)=>{if(n===e.length-1){let n=gF.indexOf(i),s=n;for(;s%7!==gF.indexOf(e[0]);)s++;t[i]=s-n}else t[i]=gF.indexOf(e[n+1])-gF.indexOf(i)}),t}function lF(e){let t=e.shift();e.push(t)}function cF(e,t){let i=!0,n=t.day,s=t.month,r=fF.getExpectedDays(e,t.monthDay),o=t.yearDay;return t.validRules.forEach(t=>{switch(t){case"BYDAY":(function(e,t){let i=[];return t.forEach(e=>{let t=e.match(EF);i.push(2===t.length?t[1]:t[0])}),-1===i.indexOf(vF[e])})(e.getDay(),n)&&(i=!1);break;case"BYMONTH":fF.checkMonth(e,s)&&(i=!1);break;case"BYMONTHDAY":(function(e,t){let i,n=t.slice(0),s=fF.getMonthDaysCount(e);for(i=n.shift();i;){if(i<0&&(i=i+s+1),i===e.getDate())return!1;i=n.shift()}return!0})(e,r)&&(i=!1);break;case"BYYEARDAY":(function(e,t){let i,n=t.slice(0),s=function(e){mF[fF.getFullYear(e)]||(mF[fF.getFullYear(e)]=fF.getYearLastDate(e,0));let t=mF[fF.getFullYear(e)],i=e.getTime()-t.getTime();return Math.ceil(i/864e5)}(e);for(i=n.shift();i;){if(i<0&&(i=i+fF.getYearDaysCount(e,0)+1),i===s)return!1;i=n.shift()}return!0})(e,o)&&(i=!1)}}),i}function hF(e){return"Islamic"===e?new LB:new MB}let dF,uF,pF,fF,mF={},gF=["SU","MO","TU","WE","TH","FR","SA"];const vF=["SU","MO","TU","WE","TH","FR","SA"],yF=43,bF=["first","second","third","fourth","last"],wF="summaryOn",SF={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},CF=/\d/,_F=/[^A-Z]+/,EF=/[a-z]+|[^a-z]+/gi;function TF(e){return[e.getUTCFullYear(),xF(e.getUTCMonth()+1),xF(e.getUTCDate()),"T",xF(e.getUTCHours()),xF(e.getUTCMinutes()),xF(e.getUTCSeconds()),"Z"].join("")}function xF(e){return("0"+e).slice(-2)}class kF{constructor(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}processData(e,t,i){let n=this.parent.activeView.startDate(),s=this.parent.activeView.endDate(),r=this.parent.eventFields,o=[],a=1,l=!1,c=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];e.length>0&&XA(e[0][r.id])&&(l=!0);for(let u of e){l&&(u[r.id]=a++),"string"==typeof u[r.startTime]&&(u[r.startTime]=vB(u[r.startTime])),"string"==typeof u[r.endTime]&&(u[r.endTime]=vB(u[r.endTime])),t?this.processTimezoneChange(u,i):u=this.processTimezone(u);for(let e=0;e<c.length;e++)null!==u[c[e].field]&&0!==u[c[e].field]||(u[c[e].field]=void 0);if(XA(u[r.recurrenceRule])||""!==u[r.recurrenceRule]||(u[r.recurrenceRule]=null),XA(u[r.recurrenceRule])||!XA(u[r.recurrenceID])||this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){let e,t;if(!XA(u[r.recurrenceRule])&&XA(u[r.recurrenceID])){e=this.generateOccurrence(u,null,i,!0);for(let i=0;i<e.length;i++)u=e[i],t=this.parent.eventsProcessed.filter(e=>e[this.parent.eventFields.startTime].getTime()-u[this.parent.eventFields.startTime].getTime()==0&&e[this.parent.eventFields.id]===u[this.parent.eventFields.id]),u.Guid=t.length>0?t[0].Guid:this.generateGuid(),o.push(u)}else t=this.parent.eventsProcessed.filter(e=>e[this.parent.eventFields.id]===u[this.parent.eventFields.id]),u.Guid=t.length>0?t[0].Guid:this.generateGuid(),o.push(u)}else u.Guid=this.generateGuid(),o.push(u);else o=o.concat(this.generateOccurrence(u,null,i,!0))}this.parent.eventsProcessed=[];let h=o.filter(e=>!e[this.parent.eventFields.isBlock]);this.parent.eventsProcessed=this.filterEvents(n,s,h);let d=o.filter(e=>e[this.parent.eventFields.isBlock]);for(let u=0,p=d.length;u<p;u++){let e=d[u];e[r.isAllDay]&&(e[r.startTime]=dB(e[r.startTime]),e[r.endTime]=pB(dB(e[r.endTime]),1))}return this.parent.blockProcessed=d,h}getProcessedEvents(e=this.parent.eventsData){let t=[];for(let i of e)!XA(i[this.parent.eventFields.recurrenceRule])&&XA(i[this.parent.eventFields.recurrenceID])?t=t.concat(this.generateOccurrence(i)):t.push(i);return t}timezonePropertyChange(e){let t=this.parent.eventsData.concat(this.parent.blockData),i=this.processData(t,!0,e);this.parent.notify(nB,{processedData:i})}timezoneConvert(e){let t=this.parent.eventFields;if(e[t.startTimezone]=e[t.startTimezone]||e[t.endTimezone],e[t.endTimezone]=e[t.endTimezone]||e[t.startTimezone],this.parent.timezone){let i=e[t.endTimezone];e[t.startTime]=this.parent.tzModule.convert(e[t.startTime],this.parent.timezone,e[t.startTimezone]),e[t.endTime]=this.parent.tzModule.convert(e[t.endTime],this.parent.timezone,i)}}processTimezoneChange(e,t){let i=this.parent.eventFields;e[i.isAllDay]||(t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],t,this.parent.timezone),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],t,this.parent.timezone)):!t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)):t&&!this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],t),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],t)))}processTimezone(e,t=!1){let i=this.parent.eventFields;if(e[i.startTimezone]||e[i.endTimezone]){let n=e[i.startTimezone]||e[i.endTimezone],s=e[i.endTimezone]||e[i.startTimezone],r=this.parent.timezone;t?this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],n,r),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],s,r),e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],r),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],r)):(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],n),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],s)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],n),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],s),this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],n,r),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],s,r)))}else this.parent.timezone&&(t?(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],this.parent.timezone)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)));return e}filterBlockEvents(e){let t,i=e[this.parent.eventFields.startTime],n=e[this.parent.eventFields.endTime];if(this.parent.activeViewOptions.group.resources.length>0){let i=this.getGroupIndexFromEvent(e);t=this.parent.resourceBase.lastResourceLevel[i]}return this.filterEvents(i,n,this.parent.blockProcessed,t)}filterEvents(e,t,i=this.parent.eventsProcessed,n){let s=this.parent.eventFields,r=new EM(s.startTime,"greaterthanorequal",e).and(new EM(s.endTime,"greaterthanorequal",e)).and(new EM(s.startTime,"lessthan",t)).or(new EM(s.startTime,"lessthanorequal",e).and(new EM(s.endTime,"greaterthan",e))),o=new RM({json:i}).executeLocal((new _M).where(r));return n&&(o=this.filterEventsByResource(n,o)),this.sortByTime(o)}filterEventsByRange(e,t,i){let n=[];return n=t&&i?this.filterEvents(t,i,e):t&&!i?e.filter(e=>e[this.parent.eventFields.startTime]>=t):!t&&i?e.filter(e=>e[this.parent.eventFields.endTime]<=i):e,this.sortByTime(n)}filterEventsByResource(e,t=this.parent.eventsProcessed){let i={},n=this.parent.resourceBase.resourceCollection;for(let r=0;r<n.length;r++)i[n[r].field]=e.groupOrder[r];let s=Object.keys(i);return t.filter(e=>s.every(t=>e[t]instanceof Array?e[t].indexOf(i[t])>-1:e[t]===i[t]))}sortByTime(e){let t=this.parent.eventFields;return e.sort((e,i)=>{let n=i[t.startTime];return e[t.startTime].getTime()-n.getTime()}),e}sortByDateTime(e){let t=this.parent.eventFields;return e.sort((e,i)=>{let n=e[t.startTime],s=i[t.startTime],r=i[t.endTime],o=e[t.endTime].getTime()-n.getTime(),a=r.getTime()-s.getTime();return n.getTime()-s.getTime()||a-o}),e}getSmallestMissingNumber(e){let t=Math.max.apply(Math,e);for(let i=0;i<t;i++)if(-1===e.indexOf(i))return i;return t+1}splitEventByDay(e){let t=this.parent.eventFields,i=[],n=e[t.startTime],s=e[t.endTime];if(dB(new Date(n.getTime()))<dB(new Date(s.getTime()))){let r=new Date(n.getTime()),o=pB(dB(new Date(n.getTime())),1),a=0===s.getHours()&&0===s.getMinutes()?s:pB(s,1),l=1,c=gB(n.getTime(),a.getTime());for(;o<=s&&r.getTime()!==o.getTime();){let n=KA({},e);n[t.startTime]=r,n[t.endTime]=o,n.data={index:l,count:c},n.Guid=this.generateGuid(),n.isSpanned=!0,i.push(n),r=o,dB(new Date(r.getTime())).getTime()===dB(new Date(s.getTime())).getTime()&&o.getTime()!==s.getTime()?(o=new Date(r.getTime()),o=new Date(o.setHours(s.getHours(),s.getMinutes(),s.getSeconds()))):o=pB(dB(new Date(r.getTime())),1),l++}}else i.push(e);return i}splitEvent(e,t){let i=this.parent.eventFields,n=dB(new Date(e[i.startTime]+"")).getTime(),s=dB(new Date(e[i.endTime]+"")).getTime();if(uB(e[i.endTime])<=0){let t=pB(dB(new Date(e[i.endTime]+"")),-1).getTime();s=n>t?n:t}let r=n,o=s,a=[];if(n!==s){n<t[0].getTime()&&(n=t[0].getTime()),s>t[t.length-1].getTime()&&(s=t[t.length-1].getTime());let i=n;for(let t=0;t<this.slots.length;t++){let n=this.slots[t];if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){let e=[];for(let i of n)e.push(new Date(i));let t=this.getRenderedDates(e);if(!XA(t)&&t.length>0){n=[];for(let e of t)n.push(e.getTime())}}let l=n[0];if(i=i<=l&&s>=l?l:i,i>s||l>s)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView){let t=n.indexOf(i);if(-1!==t){let i=n.indexOf(s),l=-1!==i;if(i=l?i:n.length-1,a.push(this.cloneEventObject(e,n[t],n[i],i-t+1,n[t]!==r,n[i]!==o)),l)break}}else if(this.dateInRange(i,n[0],n[n.length-1])){let t=[];for(let e=0;e<n.length;e++)this.dateInRange(n[e],r,o)&&t.push(n[e]);if(t.length>0)if(this.parent.activeViewOptions.group.byDate)for(let i of t)a.push(this.cloneEventObject(e,i,i,1,i!==r,i!==o));else a.push(this.cloneEventObject(e,t[0],t[t.length-1],t.length,t[0]!==r,t[t.length-1]!==o))}}}else a.push(this.cloneEventObject(e,n,s,1,!1,!1));return a}cloneEventObject(e,t,i,n,s,r){let o=this.parent.eventFields,a=KA({},e,null,!0),l={count:n,isLeft:s,isRight:r};return l[o.startTime]=e[o.startTime],l[o.endTime]=e[o.endTime],a.data=l,a[o.startTime]=new Date(t),a[o.endTime]=new Date(i),a}dateInRange(e,t,i){return t<=e&&e<=i}getSelectedEventElements(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter(t=>t.getAttribute("data-guid")===e.getAttribute("data-guid")).length<=0){let t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=[].slice.call(this.parent.element.querySelectorAll(t));for(let e of i)this.parent.selectedElements.push(e)}else{let t=this.parent.selectedElements.filter(t=>t.getAttribute("data-guid")!==e.getAttribute("data-guid"));this.parent.selectedElements=t}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements}getSelectedEvents(){let e=[],t=[];return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border")).filter(i=>{0===e.filter(e=>e.Guid===i.getAttribute("data-guid")).length&&e.push(this.getEventByGuid(i.getAttribute("data-guid"))),t.push(i)}),{event:e.length>1?e:e[0],element:t.length>1?t:t[0]}}removeSelectedAppointmentClass(){let e=this.getSelectedAppointments();for(let t of e)t.setAttribute("aria-selected","false");HD(e,"e-appointment-border"),"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||HD(e,"e-active-appointment-agenda")}addSelectedAppointments(e){for(let t of e)t.setAttribute("aria-selected","true");"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass(),jD(e,"e-appointment-border")}getSelectedAppointments(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border,.e-appointment:focus"))}focusElement(){if(this.parent.eventWindow.dialogObject&&this.parent.eventWindow.dialogObject.visible)return;let e=this.parent.getSelectedElements();if(e.length>0){if(this.parent.keyboardInteractionModule){let t=!XA(this.parent.activeCellsData)&&this.parent.activeCellsData.element||e[e.length-1];this.parent.keyboardInteractionModule.selectCells(t instanceof Array,t)}return}let t=this.getSelectedAppointments();t.length>0&&t[t.length-1].focus()}selectWorkCellByTime(e){let t;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return t;if(e.length>0){let i,n=e[e.length-1],s=n[this.parent.eventFields.startTime],r=new Date(+s).setMinutes(0,0,0),o=this.isAllDayAppointment(n);("Month"===this.parent.currentView||o)&&(r=new Date(+s).setHours(0,0,0,0)),i=o&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();let a='[data-date="'+this.parent.getMsFromDate(new Date(r))+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(a+='[data-group-index="'+this.getGroupIndexFromEvent(n)+'"]'),t=i.querySelector(a),t)return this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,t),t}return t}getGroupIndexFromEvent(e){let t=this.parent.resourceCollection.slice(-1)[0].name,i=this.parent.resourceCollection.length-1,n=this.parent.resourceCollection.slice(-1)[0].field,s=e[n]instanceof Array?e[n][0]:e[n],r=this.parent.resourceCollection.filter((e,n)=>e.name===t?(i=n,e):null)[0];return i>0?this.parent.resourceBase.getIndexFromResourceId(s,t,r,e,this.parent.resourceCollection[i-1].field):this.parent.resourceBase.getIndexFromResourceId(s,t,r)}isAllDayAppointment(e){let t=this.parent.eventFields,i=e[t.isAllDay],n=(e[t.endTime].getTime()-e[t.startTime].getTime())/864e5>=1;return!(!i&&!n)}addEventListener(){this.parent.on("document-click",this.appointmentBorderRemove,this)}appointmentBorderRemove(e){let t=e.event.target;QD(t,".e-appointment")?"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass():QD(t,".e-popup-open")||this.removeSelectedAppointmentClass()}wireAppointmentEvents(e,t,i=!1){let n=!XA(t)&&t[this.parent.eventFields.isReadonly];GO.add(e,"click",this.eventClick,this),this.parent.isAdaptive||GO.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||n||GO.add(e,"dblclick",this.eventDoubleClick,this),this.parent.activeViewOptions.readonly||n||i||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))}eventTouchClick(e){setTimeout(()=>this.isDoubleTapped=!1,250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))}renderResizeHandler(e,t,i){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly&&!i)for(let n of Object.keys(t)){let i=FD("div",{className:"e-event-resize"});switch(n){case"isLeft":t.isLeft||(i.appendChild(FD("div",{className:"e-left-right-resize"})),jD([i],this.parent.enableRtl?"e-right-handler":"e-left-handler"),WD([i],e));break;case"isRight":t.isRight||(i.appendChild(FD("div",{className:"e-left-right-resize"})),jD([i],this.parent.enableRtl?"e-left-handler":"e-right-handler"),zD([i],e));break;case"isTop":t.isTop||(i.appendChild(FD("div",{className:"e-top-bottom-resize"})),jD([i],"e-top-handler"),WD([i],e));break;case"isBottom":t.isBottom||(i.appendChild(FD("div",{className:"e-top-bottom-resize"})),jD([i],"e-bottom-handler"),zD([i],e))}}}eventClick(e){let t=e.target;if(!t.classList.contains("e-drag-clone")&&!t.classList.contains("e-resize-clone"))if(e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border"));let t=QD(e.target,".e-appointment");this.getSelectedEventElements(t),this.activeEventData(e,!1),this.parent.trigger("select",{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"});let i=KA(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger("eventClick",i)}else{this.removeSelectedAppointmentClass(),this.activeEventData(e,!0),this.parent.trigger("select",{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"});let t=KA(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger("eventClick",t,e=>{e.cancel?(this.removeSelectedAppointmentClass(),this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide()):("Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||jD([this.parent.activeEventData.element],"e-active-appointment-agenda"),this.parent.allowInline?this.parent.notify("inlineClick",{data:e.event,element:e.element,type:"Event"}):this.parent.notify("eventClick",e))})}}eventDoubleClick(e){this.parent.quickPopup.quickPopupHide(!0),"touchstart"===e.type&&this.activeEventData(e,!0),this.removeSelectedAppointmentClass(),this.parent.activeEventData.element.classList.contains("e-inline-appointment")||this.parent.activeEventData.element.querySelector(".e-inline-subject")||(!XA(this.parent.activeEventData.event)&&XA(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])?this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save"):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert()))}getEventByGuid(e){return this.parent.eventsProcessed.filter(t=>t.Guid===e)[0]}getEventById(e){return this.parent.eventsData.filter(t=>t[this.parent.eventFields.id]===e)[0]}generateGuid(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}getEventIDType(){return 0!==this.parent.eventsData.length?typeof this.parent.eventsData[0][this.parent.eventFields.id]:0!==this.parent.blockData.length?typeof this.parent.blockData[0][this.parent.eventFields.id]:"string"}getEventMaxID(e){if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;let t,i=this.getEventIDType();if("string"===i&&(t=this.generateGuid()),"number"===i){let i=this.parent.eventsData.concat(this.parent.blockData),n=Math.max.apply(Math,i.map(e=>e[this.parent.eventFields.id]));n=XA(e)?n:n+e,t=n+1}return t}activeEventData(e,t){let i=QD(e.target,".e-appointment"),n=i.getAttribute("data-guid");t&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+n+'"]'))),i.focus());let s=this.getEventByGuid(n);s&&s.isSpanned&&(s=this.parent.eventsData.filter(e=>e[this.parent.eventFields.id]===s[this.parent.eventFields.id])[0]),this.parent.activeEventData={event:s,element:i}}generateOccurrence(e,t,i,n){let s=e[this.parent.eventFields.startTime],r=e[this.parent.eventFields.recurrenceRule],o=e[this.parent.eventFields.endTime].getTime()-s.getTime();t=new Date((t||this.parent.activeView.startDate()).getTime()-o);let a,l=e[this.parent.eventFields.recurrenceException];"Agenda"!==this.parent.currentView&&n&&(a=function(e,t){return Math.ceil((t.getTime()-e.getTime())/864e5)}(this.parent.activeView.startDate(),this.parent.activeView.endDate())+1);let c=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),h=FB(s,r,l,this.parent.activeViewOptions.firstDayOfWeek,a,t,this.parent.calendarMode,i,c);"Agenda"===this.parent.currentView&&-1===r.indexOf("COUNT")&&-1===r.indexOf("UNTIL")&&(XA(e.generatedDates)?e.generatedDates={start:new Date(h[0]),end:new Date(h[h.length-1])}:(h[0]<e.generatedDates.start.getTime()&&(e.generatedDates.start=new Date(h[0])),h[h.length-1]>e.generatedDates.end.getTime()&&(e.generatedDates.end=new Date(h[h.length-1]))));let d=[];for(let u of h){let t=KA({},e,null,!0);t[this.parent.eventFields.startTime]=new Date(u),t[this.parent.eventFields.endTime]=new Date(new Date(u).setMilliseconds(o)),t[this.parent.eventFields.recurrenceID]=t[this.parent.eventFields.id],delete t[this.parent.eventFields.recurrenceException],delete t[this.parent.eventFields.followingID],t.Guid=this.generateGuid(),d.push(t)}return d}getParentEvent(e,t=!1){let i;do{(e=this.getFollowingEvent(e))&&(i=KA({},e,null,!0))}while(e&&t);if(t&&i){let e=this.getEventCollections(i),t=e.follow.slice(-1)[0];e.occurrence.length>0&&!i[this.parent.eventFields.recurrenceException]&&(t=e.occurrence.slice(-1)[0]),t&&(i[this.parent.eventFields.recurrenceRule]=t[this.parent.eventFields.recurrenceRule])}return i}getEventCollections(e,t){let i=[],n=[],s=e;do{s=this.getFollowingEvent(s,!0),s&&i.push(s),n=n.concat(this.getOccurrenceEvent(s||e))}while(s);let r={};if(t){let e=this.parent.eventFields;r={follow:i.filter(i=>i[e.startTime]>=t[e.startTime]),occurrence:n.filter(i=>i[e.startTime]>=t[e.startTime])}}else r={follow:i,occurrence:n};return r}getFollowingEvent(e,t){let i,n=this.parent.eventFields;return i=t?e[n.id]:e[n.recurrenceID]||e[n.followingID],this.parent.eventsData.filter(e=>e[t?n.followingID:n.id]===i).shift()}isFollowingEvent(e,t){let i=e[this.parent.eventFields.startTime],n=t[this.parent.eventFields.startTime];return i.getHours()===n.getHours()&&i.getMinutes()===n.getMinutes()&&i.getSeconds()===n.getSeconds()}getOccurrenceEvent(e,t=!1,i=!1){let n=t?"Guid":i?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,s=t?"Guid":this.parent.eventFields.id;return(t?this.parent.eventsProcessed:this.parent.eventsData).filter(t=>t[n]===e[s])}getOccurrencesByID(e){let t=this.parent.eventFields,i=[],n=this.parent.eventsData.filter(i=>i[t.id]===e);for(let s of n)XA(s[t.recurrenceRule])||(i=i.concat(this.generateOccurrence(s)));return i}getOccurrencesByRange(e,t){let i=this.parent.eventFields,n=[];for(let s of this.parent.eventsData)XA(s[i.recurrenceRule])||(n=n.concat(this.generateOccurrence(s)));return n.filter(n=>n[i.startTime]>=e&&n[i.endTime]<=t&&!XA(n[i.recurrenceID]))}getDeletedOccurrences(e){let t,i=this.parent.eventFields,n=[];if(t="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter(t=>t[i.id]===e)[0]:KA({},e,null,!0),t[i.recurrenceException]){let s=t[i.recurrenceException].split(",");for(let r=0,o=s.length;r<o;r++)if(0===this.parent.eventsData.filter(e=>e[i.recurrenceID]===t[i.id]&&e[i.recurrenceException]===s[r]).length){let o=jB(s[r]),a=KA({},e,null,!0);a[i.recurrenceID]=t[i.id],delete a[i.followingID],a[i.recurrenceException]=s[r];let l=new Date(o.getTime()),c=t[i.endTime].getTime()-t[i.startTime].getTime(),h=new Date(l.getTime());h.setMilliseconds(c),a[i.startTime]=new Date(l.getTime()),a[i.endTime]=new Date(h.getTime()),n.push(a)}}return n}applyResourceColor(e,t,i,n,s){if(!this.parent.resourceBase)return;let r=this.parent.resourceBase.getResourceColor(t,n);r&&(e.style[i]=XA(s)?r:((e,t)=>(e=e.replace("#",""),`rgba(${parseInt(e.substring(0,e.length/3),16)}, ${parseInt(e.substring(e.length/3,2*e.length/3),16)}, ${parseInt(e.substring(2*e.length/3,3*e.length/3),16)}, ${t})`))(r,s))}createBlockAppointmentElement(e,t){let i,n=e[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,s=FD("div",{className:"e-block-appointment",attrs:{"data-id":"Appointment_"+e[this.parent.eventFields.id],"aria-readonly":"true","aria-selected":"false"}});if(XA(this.parent.activeViewOptions.eventTemplate))i=[FD("div",{className:"e-subject",innerHTML:n})];else{let t=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",n=EB(e);i=this.parent.getAppointmentTemplate()(n,this.parent,"eventTemplate",t,!1)}return zD(i,s),this.setWrapperAttributes(s,t),s}setWrapperAttributes(e,t){XA(this.cssClass)||jD([e],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&e.setAttribute("data-group-index",t.toString())}getReadonlyAttribute(e){return(e[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()}isBlockRange(e){let t=e instanceof Array?e:[e],i=!1,n=this.parent.eventFields;for(let s of t){let e=[];XA(s[n.recurrenceRule])||!XA(s[n.recurrenceID])&&s[n.id]!==s[n.recurrenceID]?e.push(s):e=this.generateOccurrence(s);for(let t of e)if(this.filterBlockEvents(t).length>0){i=!0;break}}return this.parent.uiStateValues.isBlock=i,i}getFilterEventsList(e,t){return new RM(e).executeLocal((new _M).where(t))}getSeriesEvents(e,t){let i,n,s=this.parent.eventFields;t=XA(t)?e[s.startTime]:t;let r,o=[],a=e[s.id],l=e[s.followingID],c="EditSeries"===this.parent.currentAction?"greaterthan":"greaterthanorequal";do{r=new EM(s.followingID,"equal",a).and(new EM(s.startTime,c,t)),n=this.getFilterEventsList(this.parent.eventsData,r),i=n.slice(-1)[0],XA(i)||i[s.id]===l?l=null:(o.push(i),a=i[s.id],l=i[s.followingID])}while(1===n.length&&!XA(i[s.followingID]));return o}getEditedOccurrences(e,t){let i,n=this.parent.eventFields,s=[];for(let r of e){let e=new EM(n.recurrenceID,"equal",r[n.id]).or(new EM(n.recurrenceID,"equal",r[n.followingID]).and(new EM(n.recurrenceID,"notequal",void 0)).and(new EM(n.recurrenceID,"notequal",null)));"EditFollowingEvents"!==this.parent.currentAction&&"DeleteFollowingEvents"!==this.parent.currentAction||(e=e.and(new EM(n.startTime,"greaterthanorequal",t))),i=this.getFilterEventsList(this.parent.eventsData,e),s=s.concat(i)}return s}getRenderedDates(e){let t,i=0,n=e.length;if(e[0]<this.parent.minDate&&e[e.length-1]>this.parent.maxDate){for(let t=0;t<e.length;t++)e[t].getTime()===this.parent.minDate.getTime()&&(i=t),e[t].getTime()===this.parent.maxDate.getTime()&&(n=t);t=e.filter(t=>t>=e[i]&&t<=e[n])}return t}isValidEvent(e,t,i,n){let s=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),r=n.startHour.getTime()<=t.getTime()&&e[this.parent.eventFields.startTime].getTime()>=n.startHour.getTime()&&e[this.parent.eventFields.endTime].getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return s||r}}class AF extends kF{constructor(e){super(e),this.dateRender=[],this.renderedEvents=[],this.renderedAllDayEvents=[],this.overlapEvents=[],this.moreEvents=[],this.overlapList=[],this.allDayEvents=[],this.slotCount=this.parent.activeViewOptions.timeScale.slotCount,this.interval=this.parent.activeViewOptions.timeScale.interval,this.allDayLevel=0,this.startHour=this.parent.activeView.getStartHour(),this.endHour=this.parent.activeView.getEndHour(),this.element=this.parent.activeView.getPanel(),this.fields=this.parent.eventFields,this.animation=new _I({progress:this.animationUiUpdate.bind(this)}),this.addEventListener()}renderAppointments(){let e=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment,.e-appointment,.e-row-count-wrapper")),t=!(!this.parent.crudModule||!this.parent.crudModule.crudObj.isCrudAction);for(let n of e)if(!t||n.classList.contains("e-all-day-appointment")||n.classList.contains("e-row-count-wrapper"))$D(n);else{let e=parseInt(n.getAttribute("data-group-index"),10);for(let t=0,i=this.parent.crudModule.crudObj.sourceEvent.length;t<i;t++)e!==this.parent.crudModule.crudObj.sourceEvent[t].groupIndex&&e!==this.parent.crudModule.crudObj.targetEvent[t].groupIndex||$D(n)}if(!this.element.querySelector(".e-work-cells"))return;if(this.allDayElement=[].slice.call(this.element.querySelectorAll(".e-all-day-cells")),this.setAllDayRowHeight(0),0===this.parent.eventsProcessed.length&&0===this.parent.blockProcessed.length)return;let i=this.element.querySelector(".e-all-day-appointment-section");GO.remove(i,"click",this.rowExpandCollapse),GO.add(i,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter((e,t,i)=>t===i.map(e=>e.Guid).indexOf(e.Guid)),HD(this.allDayElement,"e-animate"),this.slots.push(this.parent.activeView.renderDates.map(e=>+e)),this.renderEvents("allDayEvents")),this.parent.notify("content-ready",{}),jD(this.allDayElement,"e-animate"),t&&(this.parent.crudModule.crudObj.isCrudAction=!1)}initializeValues(){if(this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.cellHeight=parseFloat(this.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0)for(let e=0,t=this.resources.length;e<t;e++)this.dateRender[e]=this.resources[e].renderDates}getHeight(e,t){let i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i,i}appendEvent(e,t,i,n){let s=[].slice.call(this.element.querySelectorAll(".e-appointment-wrapper"));ZD(t,this.parent.enableRtl?{right:n}:{left:n});let r=t.classList.contains("e-block-appointment")?"blockEvent":"event",o={data:KA({},e,null,!0),element:t,cancel:!1,type:r};this.parent.trigger("eventRendered",o,e=>{e.cancel||s[i].appendChild(t)})}processBlockEvents(){let e=this.getResourceList(),t=0;for(let i of e){let e=this.dateRender[i];for(let n=0,s=e.length;n<s;n++){let s=new Date(e[n].getTime()),r=pB(e[n],1),o=this.filterEvents(s,r,this.parent.blockProcessed,this.resources[i]);for(let e of o)this.parent.resourceBase&&this.setValues(e,i),this.renderBlockEvents(e,n,i,t),this.cssClass=null,this.groupOrder=null;t+=1}}}renderBlockEvents(e,t,i,n){let s=this.isSpannedEvent(e,t,i),r=s[this.fields.startTime],o=s[this.fields.endTime],a=mB(dB(new Date(this.dateRender[i][t].getTime())),this.startHour,this.endHour);if(r<=o&&this.isValidEvent(e,r,o,a)){let a,l;s[this.fields.isAllDay]?(l=tO(this.parent.element.querySelector(".e-content-wrap table").offsetHeight),a=tO(0)):(l=tO(this.getHeight(r,o)),a=tO(this.getTopValue(r,t,i)));let c=this.createBlockAppointmentElement(e,i);ZD(c,{width:"100%",height:l,top:a}),this.appendEvent(e,c,this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:n,"0px")}}renderEvents(e){HD(this.allDayElement,"e-animate");let t,i="allDayEvents"===e?this.sortByDateTime(this.allDayEvents):void 0,n=this.getResourceList(),s=0;for(let r of n){t=!0,this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction&&"allDayEvents"!==e&&0===this.parent.crudModule.crudObj.sourceEvent.filter(e=>e.groupIndex===r).length&&0===this.parent.crudModule.crudObj.targetEvent.filter(e=>e.groupIndex===r).length&&(t=!1),this.slots=[];let n=this.dateRender[r],o=this.getRenderedDates(n)||n;this.slots.push(n.map(e=>+e));for(let a=0,l=n.length;a<l&&n[a]<=o[o.length-1];a++){this.renderedEvents=[];let o=new Date(n[a].getTime()),l=pB(n[a],1),c=this.filterEvents(o,l,i,this.resources[r]);if(t)for(let t of c){if(this.parent.resourceBase&&this.setValues(t,r),"allDayEvents"===e)this.renderAllDayEvents(t,a,r,s);else if(this.isAllDayAppointment(t))this.allDayEvents.push(KA({},t,null,!0));else{if(this.parent.eventSettings.enableMaxHeight&&this.getOverlapIndex(t,a,!1,r)>0)continue;this.renderNormalEvents(t,a,r,s)}this.cssClass=null,this.groupOrder=null}else for(let e of c)this.isAllDayAppointment(e)&&this.allDayEvents.push(KA({},e,null,!0));s+=1}}}setValues(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[t].cssClass,this.groupOrder=this.resources[t].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)}getResourceList(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map((e,t)=>t)}createAppointmentElement(e,t,i,n){let s=this.parent.eventFields,r=e[s.subject]||this.parent.eventSettings.fields.subject.default,o=FD("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[s.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e)}});e[this.fields.isReadonly]&&jD([o],"e-read-only");let a,l=FD("div",{className:"e-appointment-details"});o.appendChild(l),this.parent.activeViewOptions.group.resources.length>0&&o.setAttribute("data-group-index",(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:n).toString());let c=i;if(XA(this.parent.activeViewOptions.eventTemplate)){let i=FD("div",{className:"e-subject",innerHTML:r});if(t)if(e[s.isAllDay])a=[i];else{a=[];let t=FD("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(e[s.startTime])}),n=FD("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(e[s.endTime])});jD([i],"e-text-center"),c.isLeft||a.push(t),a.push(i),c.isRight||a.push(n)}else{let t=this.parent.getTimeString(e[s.startTime])+" - "+this.parent.getTimeString(e[s.endTime]);a=[i,FD("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:t}),FD("div",{className:"e-location",innerHTML:e[s.location]||this.parent.eventSettings.fields.location.default||""})]}}else{let t=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",i=EB(e);a=this.parent.getAppointmentTemplate()(i,this.parent,"eventTemplate",t,!1)}if(zD(a,l),!(this.parent.isAdaptive||XA(e[s.recurrenceRule])&&XA(e[s.recurrenceID]))){let i=FD("div",{className:"e-icons "+(e[s.id]===e[s.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")});t?l.appendChild(i):o.appendChild(i)}return this.renderSpannedIcon(t?l:o,c),XA(this.cssClass)||jD([o],this.cssClass),this.applyResourceColor(o,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(o,c,e[this.fields.isReadonly]),o}createMoreIndicator(e,t,i){let n=i+t,s=e[n];if(s.childElementCount<=0){let e=FD("div",{className:"e-row-count-wrapper",id:"e-row-count-wrapper-"+n.toString()}),t=FD("div",{className:"e-more-indicator",attrs:{tabindex:"0",role:"list","data-index":n.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});e.appendChild(t),s.appendChild(e),GO.add(t,"click",this.rowExpandCollapse,this)}else{let e=s.querySelector(".e-more-indicator"),t=parseInt(e.getAttribute("data-count"),10)+1;e.setAttribute("data-count",t.toString()),e.innerHTML="+"+t+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}}renderSpannedIcon(e,t){let i=FD("div",{className:"e-indicator e-icons"});if(t.isLeft){let t=i.cloneNode();jD([t],"e-left-icon"),WD([t],e)}if(t.isRight){let t=i.cloneNode();jD([t],"e-right-icon"),zD([t],e)}if(t.isTop){let t=i.cloneNode();jD([t],"e-up-icon"),WD([t],e)}if(t.isBottom){let t=i.cloneNode();jD([t],"e-down-icon"),zD([t],e)}}isSpannedEvent(e,t,i){let n=dB(this.dateRender[i][t]),s=this.getRenderedDates(this.dateRender[i])||[n];0===s.filter(e=>e.getDay()===t).length&&(n=dB(s[0]));let r=this.parent.eventFields,o=mB(n,this.startHour,this.endHour),a=KA({},e,null,!0);return a.isSpanned={isBottom:!1,isTop:!1},e[r.startTime].getTime()<o.startHour.getTime()&&(a[r.startTime]=o.startHour,a.isSpanned.isTop=!0),e[r.endTime].getTime()>o.endHour.getTime()&&(a[r.endTime]=o.endHour,a.isSpanned.isBottom=!0),a}renderAllDayEvents(e,t,i,n,s){let r=this.getRenderedDates(this.dateRender[i])||this.dateRender[i];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[i][t].getTime()],r=[this.dateRender[i][t]]);let o=this.splitEvent(e,r)[0],a=this.element.querySelector(".e-all-day-cells:first-child"),l=a.offsetTop,c=new Date(o[this.parent.eventFields.startTime].getTime()),h=new Date(o[this.parent.eventFields.endTime].getTime()),d=0,u=1,p=r[0].getTime()<=c.getTime()&&pB(r.slice(-1)[0],1).getTime()>=c.getTime();if(c<=h&&p){let c=[];if(this.renderedAllDayEvents[i]&&(c=this.renderedAllDayEvents[i].filter(t=>t.Guid===e.Guid),this.parent.activeViewOptions.group.byDate&&(c=c.filter(e=>e[this.parent.eventFields.startTime]>=r[t]&&e[this.parent.eventFields.endTime]<=pB(new Date(+r[t]),1)))),0===c.length){let r=o.data.count,c=this.getOverlapIndex(o,t,!0,i);o.Index=c,this.allDayLevel=this.allDayLevel<c?c:this.allDayLevel;let h=o.data.isRight?0:"Day"===this.parent.currentView?4:7;r>=0&&(d=100*r-h),XA(this.renderedAllDayEvents[i])&&(this.renderedAllDayEvents[i]=[]),this.renderedAllDayEvents[i].push(KA({},o,null,!0));let p,f=[].slice.call(this.element.querySelector(".e-all-day-row").children),m=this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:n,g=this.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(m+1)+")");p=s?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!0,o.data,i),jD([p],"e-all-day-appointment"),this.parent.trigger("eventRendered",{data:e,element:p,cancel:!1},t=>{if(!t.cancel){g.appendChild(p);let t=p.offsetHeight;if(u+=(0===c?l:l+c*t)+1,ZD(p,{width:d+"%",top:tO(u)}),c>1){this.moreEvents.push(p);for(let e=0,t=r;e<t;e++)this.createMoreIndicator(f,e,m)}a.setAttribute("data-count",this.allDayLevel.toString()),this.setAllDayRowHeight(4+(!this.parent.uiStateValues.expand&&this.allDayLevel>2?3*t:(this.allDayLevel+1)*t)),this.addOrRemoveClass(),this.wireAppointmentEvents(p,e)}})}}}renderNormalEvents(e,t,i,n,s){let r=this.isSpannedEvent(e,t,i),o=r[this.fields.startTime],a=r[this.fields.endTime],l="0%",c=0,h=mB(dB(new Date(this.dateRender[i][t].getTime())),this.startHour,this.endHour),d=this.isValidEvent(e,o,a,h);if(o<=a&&d){let d=this.getHeight(o,a);o.getTime()>h.startHour.getTime()&&(c=this.getTopValue(o,t,i));let u=this.getOverlapIndex(r,t,!1,i);r.Index=u,this.overlapList.push(r),this.overlapList.length>1?(XA(this.overlapEvents[u])&&(this.overlapEvents[u]=[]),this.overlapEvents[u].push(r)):(this.overlapEvents=[],this.overlapEvents.push([r])),l=this.getEventWidth();let p,f=this.adjustOverlapElements({index:u,left:"0%",width:l,day:t,dayIndex:n,record:r,resource:i});l=f.appWidth,XA(this.renderedEvents[i])&&(this.renderedEvents[i]=[]),this.renderedEvents[i].push(KA({},r,null,!0)),p=s?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!1,r.isSpanned,i),ZD(p,{width:this.parent.eventSettings.enableMaxHeight?"100%":f.appWidth,height:d+"px",top:c+"px"});let m=d-40-15*p.querySelectorAll(".e-indicator").length,g=p.querySelector(".e-subject");!this.parent.isAdaptive&&g&&(g.style.maxHeight=tO(m)),this.appendEvent(e,p,this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:n,f.appLeft),this.wireAppointmentEvents(p,e)}}getEventWidth(){let e=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length;return(e<0?0:e)+"%"}getEventLeft(e,t){let i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"}getTopValue(e,t,i){let n=mB(dB(this.dateRender[i][t]),this.startHour,this.endHour).startHour,s=60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes());return this.parent.activeViewOptions.timeScale.enable?s*this.cellHeight*this.slotCount/this.interval:0}getOverlapIndex(e,t,i,n){let s=this.parent.eventFields,r=[],o=-1;if(this.overlapEvents=[],i){if(!XA(this.renderedAllDayEvents[n])){let e=dB(new Date(this.dateRender[n][t].getTime()));r=this.renderedAllDayEvents[n].filter(t=>dB(t[s.startTime]).getTime()<=e.getTime()&&dB(t[s.endTime]).getTime()>=e.getTime()),this.parent.activeViewOptions.group.resources.length>0&&(r=this.filterEventsByResource(this.resources[n],r))}}else{let t=XA(this.renderedEvents[n])?[]:this.renderedEvents[n],i=[],o=e[s.startTime],a=e[s.endTime];this.overlapList=t.filter(e=>e[s.endTime]>o&&e[s.startTime]<a||e[s.startTime]>=a&&e[s.endTime]<=o),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[n],this.overlapList)),this.overlapList.forEach(e=>{let r=t.filter(t=>t[s.endTime]>=e[s.startTime]&&t[s.startTime]<=e[s.endTime]);this.parent.activeViewOptions.group.resources.length>0&&(r=this.filterEventsByResource(this.resources[n],r));let o=this.overlapList.filter(e=>-1===r.indexOf(e));return i.concat(o)}),this.overlapList=this.overlapList.concat(i),r=this.overlapList;for(let e of r){let t=e.Index;XA(this.overlapEvents[t])?this.overlapEvents[t]=[e]:this.overlapEvents[t].push(e)}}if(r.length>0){let e=r.map(e=>e.Index);o=e.length>0?this.getSmallestMissingNumber(e):0}return-1===o?0:o}adjustOverlapElements(e){let t={appWidth:e.width,appLeft:e.left};for(let i=0,n=this.overlapEvents.length;i<n;i++)if(!XA(this.overlapEvents[i]))for(let s=0,r=this.overlapEvents[i].length;s<r;s++){let n=this.element.querySelector("#e-appointment-wrapper-"+(this.parent.activeViewOptions.group.byDate?this.resources.length*e.day+e.resource:e.dayIndex));if(n.childElementCount>0){let r=this.overlapEvents[i][s].Guid;if(n.querySelectorAll('div[data-guid="'+r+'"]').length>0&&r!==e.record.Guid){let s=n.querySelector('div[data-guid="'+r+'"]');parseFloat(e.width)<=parseFloat(s.style.width)&&(this.parent.enableRtl?s.style.right=this.getEventLeft(e.width,i):s.style.left=this.getEventLeft(e.width,i),s.style.width=parseFloat(e.width)+"%",t.appWidth=s.style.width)}else{let n=e.width;XA(this.overlapEvents[i-1])&&(n=this.getEventWidth()),t.appWidth=n,t.appLeft=this.getEventLeft(n,e.index)}}}return t}setAllDayRowHeight(e){for(let t of this.allDayElement)t.style.height=e/12+"em";this.animation.animate(this.allDayElement[0])}addOrRemoveClass(){this.moreEvents.filter(e=>{!this.parent.uiStateValues.expand&&this.allDayLevel>2?(jD([e],"e-appointment-hide"),e.setAttribute("tabindex","-1")):(HD([e],"e-appointment-hide"),e.setAttribute("tabindex","0"))});let e=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(HD([e],"e-appointment-expand"),jD([e],"e-appointment-collapse")):(HD([e],"e-appointment-collapse"),jD([e],"e-appointment-expand")),this.allDayLevel>2?HD([e],"e-disable"):jD([e],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter(e=>{!this.parent.uiStateValues.expand&&this.allDayLevel>2?HD([e],"e-disable"):jD([e],"e-disable")})}getEventHeight(){let e=FD("div",{className:"e-appointment",styles:"visibility:hidden"});this.element.querySelector(".e-all-day-appointment-wrapper:first-child").appendChild(e);let t=e.offsetHeight;return $D(e),t}rowExpandCollapse(){let e,t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=t.classList.contains("e-appointment-expand"),this.parent.uiStateValues.expand?(t.setAttribute("title","Collapse-all-day-section"),t.setAttribute("aria-label","Collapse section"),e=(this.allDayLevel+1)*this.getEventHeight()+4):(t.setAttribute("title","Expand-all-day-section"),t.setAttribute("aria-label","Expand section"),e=3*this.getEventHeight()+4),this.setAllDayRowHeight(e),this.addOrRemoveClass(),this.animation.animate(t)}animationUiUpdate(){this.parent.notify("content-ready",{})}}class OF extends kF{constructor(e){super(e),this.renderedEvents=[],this.monthHeaderHeight=0,this.moreIndicatorHeight=19,this.renderType="day",this.element=this.parent.activeView.getPanel(),this.fields=this.parent.eventFields,this.maxHeight=this.parent.eventSettings.enableMaxHeight&&!this.parent.eventSettings.enableIndicator&&!this.parent.rowAutoHeight,this.withIndicator=this.parent.eventSettings.enableMaxHeight&&this.parent.eventSettings.enableIndicator&&!this.parent.rowAutoHeight,this.maxOrIndicator=this.maxHeight||this.withIndicator,this.moreIndicatorHeight=this.parent.rowAutoHeight&&this.parent.eventSettings.ignoreWhitespace?0:this.moreIndicatorHeight,this.addEventListener()}removeEventWarapper(e){if(e.length>0){e="Month"===this.parent.currentView?e:[e[0]];for(let t of e)!t.classList.contains("e-more-indicator")&&t.parentElement&&t.parentElement.parentNode&&$D(t.parentElement)}}renderAppointments(){let e=this.parent.element.querySelector(".e-content-wrap");this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=e.scrollTop,this.parent.uiStateValues.left=e.scrollLeft);let t=[].slice.call(this.element.querySelectorAll(".e-appointment-wrapper"));if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)for(let n=0,s=this.parent.crudModule.crudObj.sourceEvent.length;n<s;n++){let e=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.sourceEvent[n].groupIndex+'"]'));if(this.removeEventWarapper(e),this.parent.crudModule.crudObj.sourceEvent[n].groupIndex!==this.parent.crudModule.crudObj.targetEvent[n].groupIndex){let e=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.targetEvent[n].groupIndex+'"]'));this.removeEventWarapper(e)}}else for(let n of t)$D(n);if(this.removeHeightProperty("e-content-table"),!this.element.querySelector(".e-work-cells"))return;this.eventHeight=rB(this.element,"e-appointment");let i=e.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!XA(this.parent.currentAction)&&(e.scrollTop=e.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?this.renderResourceEvents():this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();let t={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&(this.parent.currentAction?(e.scrollTop=i,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.notify(sB,t)}}renderEventsHandler(e,t,i){let n,s;this.renderedEvents=[];let r=0;i?(r=i.groupIndex,this.cssClass=i.cssClass,this.groupOrder=i.groupOrder,n=this.parent.eventBase.filterEventsByResource(i,this.parent.eventsProcessed),s=this.parent.eventBase.filterEventsByResource(i,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll('.e-work-cells[data-group-index="'+r+'"]'))):(n=this.parent.eventsProcessed,s=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll(".e-work-cells"))),this.sortByDateTime(n),this.sortByDateTime(s);let o=this.workCells.slice(-1)[0].getBoundingClientRect();this.cellWidth=o.width,this.cellHeight=o.height,this.dateRender=e;let a=this.getRenderedDates(e);this.getSlotDates(t),this.processBlockEvents(s,r,i);for(let l of n){this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(l));let e=this.splitEvent(l,a||this.dateRender);for(let t of e){if(this.maxHeight){let e="Month"===this.parent.currentView?t[this.fields.startTime]:this.getStartTime(t,t.data);if(this.getIndex(e)>0)continue}this.updateIndicatorIcon(t),this.renderEvents(t,r,n)}}this.cssClass=null,this.groupOrder=null}processBlockEvents(e,t,i){for(let n of e){this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(n));let e=[];if("day"!==this.renderType||n[this.fields.isAllDay])e.push(n);else{let t=KA({},n,null,!0),i=this.isSameDate(t[this.fields.startTime],t[this.fields.endTime]);if(t.isBlockIcon=i,!i&&uB(t[this.fields.startTime])>0){let i=KA({},n,null,!0);i[this.fields.endTime]=pB(dB(new Date(n[this.fields.startTime]+"")),1),i.isBlockIcon=!0,t[this.fields.startTime]=i[this.fields.endTime],e.push(i)}if(i=this.isSameDate(t[this.fields.startTime],t[this.fields.endTime]),!i&&uB(t[this.fields.endTime])>0){let i=KA({},n,null,!0);i[this.fields.startTime]=dB(new Date(n[this.fields.endTime]+"")),i.isBlockIcon=!0,e.push(i),t[this.fields.endTime]=i[this.fields.startTime]}e.push(t)}for(let i of e){let e=this.splitEvent(i,this.dateRender);for(let n of e)this.renderBlockEvents(n,t,!!i.isBlockIcon)}}}isSameDate(e,t){return new Date(+e).setHours(0,0,0,0)===new Date(+t).setHours(0,0,0,0)}renderBlockEvents(e,t,i){let n=e.data,s=this.getStartTime(e,n),r=this.getEndTime(e,n),o=this.parent.getIndexOfDate(this.dateRender,dB(new Date(s.getTime())));if(o<0||s>r)return;let a=this.getCellTd(o),l=this.getPosition(s,r,e[this.fields.isAllDay],o);if(i)this.renderBlockIndicator(a,l,t);else{let i=this.getEventWidth(s,r,e[this.fields.isAllDay],n.count);i=i<=0?this.cellWidth:i;let o=this.parent.enableRtl?0:l,c=this.parent.enableRtl?l:0;this.renderWrapperElement(a);let h=this.cellHeight-this.monthHeaderHeight,d=this.getRowTop(t),u=this.createBlockAppointmentElement(e,t);ZD(u,{width:i+"px",height:h+"px",left:o+"px",right:c+"px",top:d+"px"}),this.renderEventElement(e,u,a)}}renderBlockIndicator(e,t,i){let n=FD("div",{className:"e-icons e-block-indicator"});XA(e.querySelector(".e-block-indicator"))&&e.appendChild(n)}getStartTime(e,t){return e[this.fields.startTime]}getEndTime(e,t){return e[this.fields.endTime]}getCellTd(e){return this.workCells[e]}getEventWidth(e,t,i,n){return n*this.cellWidth-1}getPosition(e,t,i,n){return 0}getRowTop(e){return 0}updateIndicatorIcon(e){if(-1===this.parent.currentView.indexOf("Timeline")||"TimelineMonth"===this.parent.currentView||e[this.fields.isAllDay])return;let t=e.data,i=mB(e[this.fields.startTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),n=mB(e[this.fields.endTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());t.isLeft=t.isLeft||t[this.fields.startTime].getTime()<i.startHour.getTime(),t.isRight=t.isRight||t[this.fields.endTime].getTime()>n.endHour.getTime()}renderResourceEvents(){let e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(let e=0,t=this.parent.crudModule.crudObj.sourceEvent.length;e<t;e++){let t=this.parent.crudModule.crudObj.sourceEvent[e];if(this.renderEventsHandler(t.renderDates,t.workDays,t),this.parent.crudModule.crudObj.sourceEvent[e].groupIndex!==this.parent.crudModule.crudObj.targetEvent[e].groupIndex){let t=this.parent.crudModule.crudObj.targetEvent[e];this.renderEventsHandler(t.renderDates,t.workDays,t)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(let t of e)this.renderEventsHandler(t.renderDates,t.workDays,t)}getSlotDates(e){this.slots=[];let t=this.dateRender.map(e=>+e),i=this.parent.activeViewOptions.showWeekend?7:e.length;for(;t.length>0;)this.slots.push(t.splice(0,i))}createAppointmentElement(e,t,i=!1){let n=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default,s=FD("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[this.fields.id],role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e.data,n)}});i||s.setAttribute("data-guid",e.Guid),XA(this.cssClass)||jD([s],this.cssClass),e[this.fields.isReadonly]&&jD([s],"e-read-only");let r,o=FD("div",{className:"e-appointment-details"});s.appendChild(o),this.parent.activeViewOptions.group.resources.length>0&&s.setAttribute("data-group-index",t.toString());let a=e.data,l=this.getEventData(e);if(XA(this.parent.activeViewOptions.eventTemplate)){let t=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",i=FD("div",{className:"e-subject",innerHTML:n+(t?";&nbsp"+t:"")}),s=FD("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(a[this.fields.startTime])}),o=FD("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(a[this.fields.endTime])});if("Month"===this.parent.currentView)e[this.fields.isAllDay]?(r=[i],jD([i],"e-text-center")):a.count<=1&&!a.isLeft&&!a.isRight?r=[s,i]:(r=[],jD([i],"e-text-center"),a.isLeft||r.push(s),r.push(i),a.isRight||r.push(o));else{let n;if(e[this.fields.isAllDay])n=[i,FD("div",{className:"e-time",innerHTML:this.parent.localeObj.getConstant("allDay")})];else{let e=this.parent.getTimeString(a[this.fields.startTime])+" - "+this.parent.getTimeString(a[this.fields.endTime]);n=[i,FD("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:e}),FD("div",{className:"e-location",innerHTML:t})]}let s=FD("div",{className:"e-inner-wrap"});zD(n,s),r=[s]}}else{let e=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",t=EB(l);r=this.parent.getAppointmentTemplate()(t,this.parent,"eventTemplate",e,!1)}return zD(r,o),this.appendEventIcons(e,o),this.renderResizeHandler(s,e.data,e[this.fields.isReadonly]),s}appendEventIcons(e,t){let i=e.data;XA(e[this.fields.recurrenceRule])&&XA(e[this.fields.recurrenceID])||t.appendChild(FD("div",{className:"e-icons "+(e[this.fields.id]===e[this.fields.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")+(this.parent.isAdaptive?" e-disable":"")})),i.isLeft&&WD([FD("div",{className:"e-indicator e-icons e-left-icon"})],t),i.isRight&&zD([FD("div",{className:"e-indicator e-icons e-right-icon"})],t)}renderEvents(e,t,i){let n=e[this.fields.startTime],s=e[this.fields.endTime],r=this.parent.getIndexOfDate(this.dateRender,dB(n));if(r<0)return;if(n.getTime()<this.parent.minDate.getTime()||s.getTime()>this.parent.maxDate.getTime())return;let o=this.getIndex(n);e.Index=o;let a=this.eventHeight;this.renderedEvents.push(KA({},e,null,!0));let l=e.data.count;if(n.getTime()<=s.getTime()){let i=l*this.cellWidth-5,n=this.workCells[r],s=o*(a+0);this.renderWrapperElement(n);let c=this.monthHeaderHeight+(o+1)*(a+0)+this.moreIndicatorHeight,h=this.maxOrIndicator?o<1:this.cellHeight>c;if(this.parent.rowAutoHeight||h){let r;r=this.inlineValue?this.parent.inlineModule.createInlineAppointmentElement():this.createAppointmentElement(e,t),this.applyResourceColor(r,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(r,e),ZD(r,{width:i+"px",top:s+"px"}),this.renderEventElement(e,r,n),this.parent.rowAutoHeight&&this.updateCellHeight(n.parentElement.firstElementChild,c)}else for(let e=0;e<l;e++){let t=this.workCells[r+e];if(t&&XA(t.querySelector(".e-more-indicator"))){let i=new Date(this.dateRender[r+e].getTime()),n=pB(this.dateRender[r+e],1),s=t.getAttribute("data-group-index"),o=this.getFilteredEvents(i,n,s),l=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight;a=this.withIndicator?l:a;let c=Math.floor(l/(a+0)),h=this.getMoreIndicatorElement(o.length-c<=0?1:o.length-c,i,n);XA(s)||h.setAttribute("data-group-index",s),h.style.top=l+"px",h.style.width=t.offsetWidth-2+"px",this.renderElement(t,h),GO.add(h,"click",this.moreIndicatorClick,this)}}}}updateCellHeight(e,t){t>e.offsetHeight&&ZD(e,{height:t+"px"})}updateBlockElements(){let e=[].slice.call(this.element.querySelectorAll(".e-block-appointment"));for(let t of e){let e=QD(t,"tr");this.monthHeaderHeight=t.offsetParent.offsetTop-e.offsetTop,t.style.height=e.offsetHeight-1-this.monthHeaderHeight+"px";let i=e.firstElementChild,n=Math.round(t.offsetWidth/i.offsetWidth);t.style.width=i.offsetWidth*n+"px"}}getFilteredEvents(e,t,i,n){let s;if(XA(i))s=this.filterEvents(e,t);else{let r=this.parent.resourceBase.lastResourceLevel[parseInt(i,10)];s=this.filterEvents(e,t,XA(n)?void 0:n,r)}return s}getOverlapEvents(e,t){let i=[];for(let n of t)dB(n[this.fields.startTime]).getTime()<=dB(e).getTime()&&dB(n[this.fields.endTime]).getTime()>=dB(e).getTime()&&i.push(n);return i}getIndex(e){let t=-1,i=this.renderedEvents;if(i.length>0){let n=this.getOverlapEvents(e,i).map(e=>e.Index);t=n.length>0?this.getSmallestMissingNumber(n):0}return-1===t?0:t}moreIndicatorClick(e){let t=QD(e.target,".e-more-indicator"),i=new Date(parseInt(t.getAttribute("data-start-date"),10)),n=new Date(parseInt(t.getAttribute("data-end-date"),10)),s=t.getAttribute("data-group-index"),r={cancel:!1,event:e,element:t,isPopupOpen:!0,startTime:i,endTime:n,viewName:this.parent.getNavigateView()};s&&(r.groupIndex=parseInt(s,10)),this.parent.trigger("moreEventsClick",r,t=>{if(!t.cancel)if(t.isPopupOpen){let t=this.getFilteredEvents(i,n,s);this.parent.quickPopup.moreEventClick({date:i,event:t,element:e.target},n,s)}else this.parent.setScheduleProperties({selectedDate:i}),this.parent.changeView(t.viewName,e)})}renderEventElement(e,t,i){let n=t.classList.contains("e-block-appointment")?"blockEvent":"event",s=t.classList.contains("e-appointment"),r=this.getEventData(e);this.parent.trigger("eventRendered",{data:r,element:t,cancel:!1,type:n},e=>{e.cancel?this.renderedEvents.pop():this.renderElement(i,t,s)})}getEventData(e){let t=KA({},e,null,!0);return t[this.fields.startTime]=e.data[this.fields.startTime],t[this.fields.endTime]=e.data[this.fields.endTime],t}renderElement(e,t,i=!1){if(this.maxOrIndicator&&i&&this.setMaxEventHeight(t,e),e.querySelector(".e-appointment-wrapper"))e.querySelector(".e-appointment-wrapper").appendChild(t);else{let i=FD("div",{className:"e-appointment-wrapper"});i.appendChild(t),e.appendChild(i)}}renderWrapperElement(e){let t=e.querySelector(".e-appointment-wrapper");if(XA(t)){let t=FD("div",{className:"e-appointment-wrapper"});e.appendChild(t),this.monthHeaderHeight=t.offsetTop-e.offsetTop}else this.monthHeaderHeight=t.offsetTop-e.offsetTop}getMoreIndicatorElement(e,t,i){return FD("div",{className:"e-more-indicator",innerHTML:"+"+e+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more")),attrs:{tabindex:"0","data-start-date":t.getTime().toString(),"data-end-date":i.getTime().toString(),role:"list"}})}removeHeightProperty(e){let t=[].slice.call(this.element.querySelectorAll("."+e+" tbody tr"));for(let i of t)i.firstElementChild.style.height=""}setMaxEventHeight(e,t){let i=SB(t.querySelector(".e-date-header"));ZD(e,{height:t.offsetHeight-i-(this.maxHeight?0:this.moreIndicatorHeight)+"px","align-items":"center"})}}class DF extends OF{constructor(e,t){super(e),this.startHour=this.parent.activeView.getStartHour(),this.endHour=this.parent.activeView.getEndHour(),this.slotCount=this.parent.activeViewOptions.timeScale.slotCount,this.interval=this.parent.activeViewOptions.timeScale.interval,this.day=0,this.rowIndex=0,this.renderType=t,this.eventContainers=[].slice.call(this.element.querySelectorAll(".e-appointment-container"));let i=[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr"));this.dayLength=0===i.length?0:i[0].children.length,this.content=this.parent.element.querySelector(".e-content-table")}getSlotDates(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map(e=>+e)),this.parent.headerRows.length>0&&"Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length}getOverlapEvents(e,t){let i=[];if("day"===this.renderType)for(let n of t)dB(n[this.fields.startTime]).getTime()<=dB(new Date(e.getTime())).getTime()&&dB(n[this.fields.endTime]).getTime()>=dB(new Date(e.getTime())).getTime()&&i.push(n);else for(let n of t){let t=n.data;t.trimStartTime.getTime()<=e.getTime()&&t.trimEndTime.getTime()>e.getTime()&&i.push(n)}return i}renderResourceEvents(){this.removeHeightProperty("e-resource-column-table");let e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(let e=0,t=this.parent.crudModule.crudObj.sourceEvent.length;e<t;e++){let t=this.parent.crudModule.crudObj.sourceEvent[e];if(this.rowIndex=t.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,t),this.parent.crudModule.crudObj.sourceEvent[e].groupIndex!==this.parent.crudModule.crudObj.targetEvent[e].groupIndex){let t=this.parent.crudModule.crudObj.targetEvent[e];this.rowIndex=t.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,t)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(let t=0;t<e.length;t++)this.rowIndex=t,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,e[t])}renderEvents(e,t,i){let n=e[this.fields.startTime],s=e[this.fields.endTime];if(n.getTime()<this.parent.minDate.getTime()||s.getTime()>this.parent.maxDate.getTime())return;let r=e.data;if(n=this.getStartTime(e,r),s=this.getEndTime(e,r),this.day=this.parent.getIndexOfDate(this.dateRender,dB(new Date(n.getTime()))),this.day<0)return;let o=this.getCellTd(),a=this.getIndex(n);e.Index=a;let l=this.eventHeight,c=r.count,h=KA({},e,null,!0);h[this.fields.startTime]=r[this.fields.startTime],h[this.fields.endTime]=r[this.fields.endTime];let d=mB(dB(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour),u=this.isValidEvent(h,n,s,d);if(n<=s&&u){let r=this.getEventWidth(n,s,e[this.fields.isAllDay],c);r="day"===this.renderType?r-2:r;let h=0,d=0,u=this.getPosition(n,s,e[this.fields.isAllDay],this.day);r=r<=0?this.cellWidth:r,this.renderedEvents.push(KA({},e,null,!0));let p=this.getRowTop(t),f=p+(this.maxHeight?0:2)+a*(l+2);h=this.parent.enableRtl?0:u,d=this.parent.enableRtl?u:0;let m=(a+1)*(l+2)+this.moreIndicatorHeight,g=this.maxOrIndicator?a<1:this.cellHeight>m;if(this.parent.rowAutoHeight||g){let i;if(i=XA(this.inlineValue)?this.createAppointmentElement(e,t):this.parent.inlineModule.createInlineAppointmentElement(),this.applyResourceColor(i,e,"backgroundColor",this.groupOrder),ZD(i,{width:r+"px",left:h+"px",right:d+"px",top:f+"px"}),this.wireAppointmentEvents(i,e),this.renderEventElement(e,i,o),this.parent.rowAutoHeight){let e=this.getFirstChild(t);this.updateCellHeight(e,m)}}else for(let e=0;e<c;e++){let s=o.querySelector(".e-more-indicator"),r=this.parent.enableRtl?d:h;if(r=Math.floor(r/this.cellWidth)*this.cellWidth,o&&XA(s)||!this.isAlreadyAvail(r,o)){let s,r=this.interval/this.slotCount,a=new Date(this.dateRender[this.day+e].getTime()),c=pB(this.dateRender[this.day+e],1),u=new Date(+n),f=new Date(u.setMinutes(Math.floor(u.getMinutes()/r)*r)),m=new Date(f.getTime()+6e4*r);this.parent.activeViewOptions.group.resources.length>0&&!XA(t)&&(s=t.toString());let g=this.getFilterEvents(a,c,f,m,s,i),v=this.cellHeight-this.moreIndicatorHeight;l=this.withIndicator?v-2:l;let y,b=Math.floor(v/(l+2)),w=g.length-b<=0?1:g.length-b;y="day"===this.renderType?this.getMoreIndicatorElement(w,a,c):this.getMoreIndicatorElement(w,f,m),XA(s)||y.setAttribute("data-group-index",s),y.style.top=p+v+"px",y.style.width=this.cellWidth+"px",y.style.left=Math.floor(h/this.cellWidth)*this.cellWidth+"px",y.style.right=Math.floor(d/this.cellWidth)*this.cellWidth+"px",this.renderElement(o,y),GO.add(y,"click",this.moreIndicatorClick,this)}}}}updateCellHeight(e,t){if(t>e.offsetHeight){if(ZD(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){let i=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');i&&ZD(i,{height:t+"px"})}let i=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");i&&ZD(i,{height:t+"px"})}}getFirstChild(e){let t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)}updateBlockElements(){let e=[].slice.call(this.element.querySelectorAll(".e-block-appointment"));for(let i of e){let e=parseInt(i.getAttribute("data-group-index"),10),t=this.getFirstChild(e);i.style.height=t.offsetHeight+"px";let n=Math.round(i.offsetWidth/t.offsetWidth);i.style.width=t.offsetWidth*n+"px"}let t=[].slice.call(this.element.querySelectorAll(".e-block-indicator"));for(let i of t){let e=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getRowTop(e)+this.getFirstChild(e).offsetHeight-18+"px"}}getStartTime(e,t){let i=e[this.fields.startTime],n=mB(i,this.startHour,this.endHour);return i=n.startHour.getTime()>=t[this.fields.startTime]?n.startHour:n.endHour.getTime()<=t[this.fields.startTime]?this.getNextDay(n.startHour,t):t[this.fields.startTime],t.trimStartTime=e[this.fields.isAllDay]?n.startHour:t[this.fields.startTime],i}getNextDay(e,t){let i;for(let n=1;n<=this.dateRender.length;n++)if(i=pB(e,n),-1!==this.parent.getIndexOfDate(this.dateRender,dB(new Date(e.getTime()))))return t.count=t.count-1,i;return i}getEndTime(e,t){let i=e[this.fields.endTime],n=mB(i,this.startHour,this.endHour);return i=n.endHour.getTime()<=t[this.fields.endTime]?n.endHour:t[this.fields.endTime],t.trimEndTime=e[this.fields.isAllDay]?n.endHour:t[this.fields.endTime],i}getEventWidth(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)}getSameDayEventsWidth(e,t){return(t.getTime()-e.getTime())/6e4*(this.cellWidth*this.slotCount)/this.interval}getSpannedEventsWidth(e,t,i){let n,s,r=i*this.slotsPerDay*this.cellWidth,o=mB(dB(new Date(e.getTime())),this.startHour,this.endHour);if(n=this.getSameDayEventsWidth(o.startHour,e),-1===this.parent.getIndexOfDate(this.dateRender,dB(new Date(t.getTime()))))s=0;else{let e=mB(dB(new Date(t.getTime())),this.startHour,this.endHour);s=this.getSameDayEventsWidth(t,e.endHour),s=this.slotsPerDay*this.cellWidth===s?0:s}let a=n+s;return r>a?r-a:s-n}isSameDay(e,t){return this.parent.getIndexOfDate(this.dateRender,dB(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,dB(new Date(t.getTime())))}getAppointmentLeft(e,t,i){let n=this.isSameDay(t,e.startHour)?(t.getTime()-e.startHour.getTime())/(6e4*this.interval)*this.slotCount:0;return 0===i?n:Math.round((e.endHour.getTime()-e.startHour.getTime())/6e4/this.interval*this.slotCount)*i+n}getPosition(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;let s,r=mB(dB(new Date(this.dateRender[n].getTime())),this.startHour,this.endHour);return s=r.endHour.getTime()<=t.getTime()&&r.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(r,r.startHour,n):r.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(r,e,n):r.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(r,r.startHour,n):this.getAppointmentLeft(r,e,n),s*this.cellWidth}getFilterEvents(e,t,i,n,s,r){return"day"===this.renderType?this.getFilteredEvents(e,t,s,r):this.getFilteredEvents(i,n,s,r)}isAlreadyAvail(e,t){let i=[].slice.call(t.querySelectorAll(".e-more-indicator"));for(let n=0;n<i.length;n++){let t;if(i&&(t=this.parent.enableRtl?i[n].style.right:i[n].style.left),parseInt(t,10)===Math.floor(e))return!0}return!1}getRowTop(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.activeViewOptions.group.resources.length>1||this.parent.virtualScrollModule||this.parent.rowAutoHeight?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0}getCellTd(){return this.eventContainers[this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex]}renderBlockIndicator(e,t,i){if(!(this.parent.headerRows.length>0&&("Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option||"Date"!==this.parent.headerRows[this.parent.headerRows.length-1].option)||(t=Math.floor(t/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.isAlreadyAvail(t,e)))){let n=FD("div",{className:"e-icons e-block-indicator"});this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",i.toString()),this.parent.enableRtl?n.style.right=t+"px":n.style.left=t+"px",n.style.top=this.getRowTop(i)+this.cellHeight-18+"px",this.renderElement(e,n)}}setMaxEventHeight(e,t){ZD(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})}}class IF{constructor(e){this.parent=e,this.parent.on("inlineClick",this.inlineEdit,this)}inlineEdit(e){this.parent.quickPopup.quickPopupHide(),"Cell"===e.type?(this.removeInlineAppointmentElement(),this.cellEdit(e)):(this.parent.element.querySelector(".e-inline-subject")!==e.element.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(e))}cellEdit(e){let t=this.generateEventData(),i=e.element.cellIndex,n=this.getEventDaysCount(t);n>1&&(n=Math.round(n),n--,i-=n);let s=dB(new Date(""+t[this.parent.eventFields.startTime])).getTime(),r=dB(new Date(""+t[this.parent.eventFields.endTime])).getTime(),o=e.groupIndex||0;if("Day"===this.parent.currentView||"Week"===this.parent.currentView||"WorkWeek"===this.parent.currentView){let e=t[this.parent.eventFields.startTime].getDay();this.createVerticalViewInline(t,e,o,i)}else"Month"===this.parent.currentView?this.createMonthViewInline(t,o,s,r):this.createTimelineViewInline(t,s,r,o);let a=this.parent.element.querySelector(".e-inline-subject");a&&a.focus()}eventEdit(e){let t,i=e.element.querySelector(".e-inline-subject");if(i)t=i.value;else{let n=e.element.querySelector(".e-subject"),s=e.element.querySelector(".e-time");if(t=n.innerText,i=FD("input",{className:"e-inline-subject",attrs:{value:t}}),jD([n],"e-disable"),QD(e.element,".e-more-popup-wrapper"))e.element.insertBefore(i,n);else if(["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1){let t=e.element.querySelector(".e-subject-wrap");t.insertBefore(i,t.firstChild)}else{let t=["TimelineWeek","TimelineMonth"].indexOf(this.parent.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.element.querySelector(t).insertBefore(i,s)}}i.focus(),i.setSelectionRange(t.length,t.length)}createVerticalViewInline(e,t,i,n){let s=this.getEventDaysCount(e),r=new AF(this.parent);r.initializeValues();let o=r.dateRender[i].map(e=>e.getDay()).indexOf(t);if(s>=1){r.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),r.slots.push(this.parent.activeView.renderDates.map(e=>+e));let t=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),s=0;t.length>0&&(s=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/t[0].offsetHeight)-1),r.allDayLevel=s,r.renderAllDayEvents(e,o,i,n,this.parent.allowInline)}else r.renderNormalEvents(e,o,i,n,this.parent.allowInline)}createMonthViewInline(e,t,i,n){let s=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,i,n,s,!1,!1),o=new OF(this.parent);o.dateRender=this.parent.activeView.renderDates,o.inlineValue=this.parent.allowInline;let a=this.parent.activeView.renderDates,l=this.parent.activeViewOptions.workDays,c=".e-work-cells";if(this.parent.activeViewOptions.group.resources.length>0){c+='[data-group-index="'+t+'"]';let e=this.parent.resourceBase.lastResourceLevel[t];a=e.renderDates,l=e.workDays}o.workCells=[].slice.call(this.parent.element.querySelectorAll(c)),o.cellWidth=o.workCells[0].offsetWidth,o.cellHeight=o.workCells[0].offsetHeight,o.eventHeight=rB(this.parent.monthModule.element,"e-appointment"),o.getSlotDates(l);let h=o.getRenderedDates(a),d=o.splitEvent(r,h||a);for(let u of d)o.renderEvents(u,t);this.parent.element.querySelector(".e-inline-subject").focus()}createTimelineViewInline(e,t,i,n){let s=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,t,i,s,!1,!1),o=new DF(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");o.dateRender=this.parent.activeView.renderDates,o.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"));let a=this.parent.element.querySelector(".e-work-cells");o.inlineValue=this.parent.allowInline,o.cellWidth=a.offsetWidth,o.cellHeight=a.offsetHeight;let l=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;o.slotsPerDay=l/o.dateRender.length,o.eventHeight=rB(o.element,"e-appointment"),o.renderEvents(r,n)}getEventDaysCount(e){let t=e[this.parent.eventFields.startTime];return Math.abs(e[this.parent.eventFields.endTime].getTime()-t.getTime())/864e5}generateEventData(e){let t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",n={};return n[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),n[this.parent.eventFields.subject]=i,n[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,n[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,n[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.eventWindow.setDefaultValueToObject(n),this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(n,this.parent.activeCellsData.groupIndex),n}documentClick(){let e=this.parent.element.querySelector(".e-inline-subject");e&&""!==e.value&&this.inlineCrudActions(e)}inlineCrudActions(e){if(QD(e,".e-inline-appointment")){let t=this.generateEventData(e);this.parent.addEvent(t)}else{let t,i=QD(e,".e-appointment"),n=this.parent.getEventDetails(i);n[this.parent.eventFields.subject]=e.value,n[this.parent.eventFields.id]===n[this.parent.eventFields.recurrenceID]&&(t="EditOccurrence",n[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID()),this.parent.saveEvent(n,t)}this.removeInlineAppointmentElement()}createInlineAppointmentElement(e){let t=FD("div",{className:"e-appointment e-inline-appointment"}),i=FD("div",{className:"e-appointment-details"});t.appendChild(i);let n=FD("input",{className:"e-inline-subject"});return i.appendChild(n),e&&this.parent.eventBase.applyResourceColor(t,e,"backgroundColor"),t}removeInlineAppointmentElement(){let e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach(e=>$D(e));let t=this.parent.element.querySelector(".e-inline-subject");t&&(HD([QD(t,".e-appointment").querySelector(".e-subject")],"e-disable"),$D(t))}destroy(){this.parent.off("inlineClick",this.inlineEdit)}}class RF{renderFormValidator(e,t,i){this.element=i,this.formObj=new FN(e,{customPlacement:(e,t)=>{this.errorPlacement(e,t)},rules:t,validationComplete:e=>{this.validationComplete(e)},focusout:e=>{this.focusOut(e)}})}focusOut(e){let t=e.relatedTarget;this.ignoreError=!(!t||!(t.classList.contains("e-dlg-closeicon-btn")||t.classList.contains("e-close")||t.classList.contains("e-all-day-cells")||t.classList.contains("e-header-cells")||t.classList.contains("e-event-details")||t.classList.contains("e-work-cells")||t.classList.contains("e-event-cancel")))}validationComplete(e){let t=this.element.querySelector("#"+e.inputName+"_Error");t&&(t.style.display="failure"===e.status?"":"none")}errorPlacement(e,t){let i=t.getAttribute("for");this.element.querySelector("#"+i+"_Error")||this.ignoreError||this.createTooltip(e,t,i,"")}createTooltip(e,t,i,n){let s,r,o=e.getBoundingClientRect();this.element.classList.contains("e-quick-popup-wrapper")?(s=this.element,r=this.element.getBoundingClientRect()):(s=this.element.querySelector(".e-schedule-dialog .e-dlg-content"),r=s.getBoundingClientRect());let a=FD("div",{className:"e-tooltip-wrap e-popup e-schedule-error",id:i+"_Error",styles:"display:"+n+";top:"+(o.bottom-r.top+s.scrollTop+9)+"px;left:"+(o.left-r.left+s.scrollLeft+o.width/2)+"px;"}),l=FD("div",{className:"e-tip-content"});l.appendChild(t);let c=FD("div",{className:"e-arrow-tip e-tip-top"});c.appendChild(FD("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild(FD("div",{className:"e-arrow-tip-inner e-tip-top"})),a.appendChild(l),a.appendChild(c),s.appendChild(a),a.style.left=parseInt(a.style.left,10)-a.offsetWidth/2+"px"}destroyToolTip(){if(this.element){let e=[].slice.call(this.element.querySelectorAll(".e-schedule-error"));for(let t of e)$D(t)}this.formObj&&this.formObj.element&&this.formObj.reset()}destroy(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy()}}class PF{constructor(e){this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=e,this.l10n=this.parent.localeObj,this.fieldValidator=new RF,this.render(),this.addEventListener()}render(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()}renderQuickPopup(){let e=FD("div",{className:"e-quick-popup-wrapper e-popup-close"});this.parent.isAdaptive?(document.body.appendChild(e),jD([e],"e-device")):this.parent.element.appendChild(e),this.quickPopup=new dP(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0}renderMorePopup(){let e=FD("div",{className:"e-more-popup-wrapper e-popup-close",innerHTML:`<div class="e-more-event-popup"><div class="e-more-event-header"><div class="e-more-event-close" title="${this.l10n.getConstant("close")}" tabindex="0"></div><div class="e-more-event-date-header"><div class="e-header-day"></div><div class="e-header-date e-navigate" tabindex="0"></div></div></div></div>`});this.parent.isAdaptive?(document.body.appendChild(e),jD([e],"e-device")):this.parent.element.appendChild(e),this.morePopup=new dP(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0;let t=this.morePopup.element.querySelector(".e-more-event-close");this.renderButton("e-round","e-icons e-close-icon",!1,t,this.closeClick),GO.add(this.morePopup.element.querySelector(".e-header-date"),"click",this.navigationClick,this)}renderQuickDialog(){let e=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){let t={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};e.splice(1,0,t)}this.quickDialog=new nM({animationSettings:{effect:"Zoom"},buttons:e,cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});let t=FD("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(t),this.quickDialog.appendTo(t),this.quickDialog.isStringTemplate=!0;let i=this.quickDialog.element.querySelector(".e-quick-alertok");i&&(i.setAttribute("aria-label",this.l10n.getConstant("occurrence")),i.setAttribute("aria-label",i.innerHTML));let n=this.quickDialog.element.querySelector(".e-quick-alertcancel");n&&(n.setAttribute("aria-label",this.l10n.getConstant("series")),n.setAttribute("aria-label",n.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))}renderButton(e,t,i,n,s){let r=new bR({cssClass:e,disabled:i,enableRtl:this.parent.enableRtl,iconCss:t});r.appendTo(n),r.isStringTemplate=!0,GO.add(n,"click",s,this)}quickDialogClass(e){let t=this.quickDialog.element.querySelector(".e-quick-alertok"),i=this.quickDialog.element.querySelector(".e-quick-alertcancel"),n=this.quickDialog.element.querySelector(".e-quick-alertfollowing");switch(HD([t,i],["e-quick-dialog-occurrence-event","e-quick-dialog-series-event","e-quick-dialog-delete","e-quick-dialog-cancel","e-quick-dialog-alert-btn","e-disable"]),jD([this.quickDialog.element.querySelector(".e-quick-dialog-cancel")],"e-disable"),this.parent.eventSettings.editFollowingEvents&&(jD([n],"e-disable"),HD([this.quickDialog.element],"e-following-events-dialog")),e){case"Recurrence":jD([t],"e-quick-dialog-occurrence-event"),jD([i],"e-quick-dialog-series-event"),this.parent.eventSettings.editFollowingEvents&&(HD([n],"e-disable"),jD([this.quickDialog.element],"e-following-events-dialog"),jD([n],"e-quick-dialog-following-events"));break;case"Delete":jD([t],"e-quick-dialog-delete"),jD([i],"e-quick-dialog-cancel");break;case"Alert":jD([t],["e-quick-alertok","e-quick-dialog-alert-btn"]),jD([i],["e-quick-alertcancel","e-disable"])}}applyFormValidation(){let e=this.quickPopup.element.querySelector("."+AB),t={};t[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(e,t,this.quickPopup.element)}openRecurrenceAlert(){let e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),e.setAttribute("aria-label",e.innerHTML));let t=this.quickDialog.element.querySelector(".e-quick-alertfollowing");t&&(t.innerHTML=this.l10n.getConstant("editFollowingEvent"),t.setAttribute("aria-label",t.innerHTML));let i=this.quickDialog.element.querySelector(".e-quick-alertcancel");i&&(i.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries"),i.setAttribute("aria-label",i.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence");let n=this.parent.activeEventData.event;this.parent.eventSettings.editFollowingEvents&&"EditOccurrence"===this.parent.currentAction&&!XA(n[this.parent.eventFields.recurrenceID])&&n[this.parent.eventFields.recurrenceID]!==n[this.parent.eventFields.id]&&jD([this.quickDialog.element.querySelector(".e-quick-alertfollowing")],"e-disable"),this.showQuickDialog("RecurrenceAlert")}openRecurrenceValidationAlert(e){this.quickDialogClass("Alert");let t=this.quickDialog.element.querySelector(".e-quick-alertok");t.innerHTML=this.l10n.getConstant("ok"),t.setAttribute("aria-label",t.innerHTML);let i=this.quickDialog.element.querySelector(".e-quick-alertcancel");switch(i.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",i.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert"),e){case"wrongPattern":jD([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":jD([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":jD([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":let e=this.quickDialog.element.querySelector(".e-quick-dialog-cancel");HD([i,e],"e-disable"),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),t.innerHTML=this.l10n.getConstant("yes"),i.innerHTML=this.l10n.getConstant("no"),e.innerHTML=this.l10n.getConstant("cancel")}(!this.parent.enableRecurrenceValidation&&"wrongPattern"===e||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")}openDeleteAlert(){if(this.parent.activeViewOptions.readonly)return;let e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("delete"),e.setAttribute("aria-label",e.innerHTML));let t=this.quickDialog.element.querySelector(".e-quick-alertcancel");t&&(t.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",t.innerHTML)),this.quickDialog.content=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleContent":"deleteContent"),this.quickDialog.header=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleEvent":"deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}openValidationError(e,t){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(e);let i=this.quickDialog.element.querySelector(".e-quick-alertok");i&&(i.innerHTML=this.l10n.getConstant("ok"),i.setAttribute("aria-label",i.innerHTML));let n=this.quickDialog.element.querySelector(".e-quick-alertcancel");n&&(n.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",n.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert",t)}showQuickDialog(e,t){this.quickDialog.dataBind();let i={type:e,cancel:!1,data:KA({},t||this.parent.activeEventData.event,null,!0),element:this.quickDialog.element};this.parent.trigger("popupOpen",i,e=>{e.cancel||this.quickDialog.show()})}createMoreEventList(e,t,i){let n=this.parent.eventFields,s=FD("div",{className:"e-more-event-content"}),r=FD("div",{className:"e-more-appointment-wrapper"});if(0===e.length)r=FD("div",{className:"e-more-event-content",innerHTML:this.l10n.getConstant("emptyContainer")});else for(let o of e){let e,s=o[n.subject]||this.parent.eventSettings.fields.subject.default,a=FD("div",{className:"e-appointment",attrs:{"data-id":""+o[n.id],"data-guid":o.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(o),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(o)}});if(XA(this.parent.activeViewOptions.eventTemplate))a.appendChild(FD("div",{className:"e-subject",innerHTML:s}));else{let t=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",i=EB(o);e=this.parent.getAppointmentTemplate()(i,this.parent,"eventTemplate",t,!1),zD(e,a)}XA(i)||a.setAttribute("data-group-index",i),XA(o[n.recurrenceRule])||a.appendChild(FD("div",{className:"e-icons "+(o[n.id]===o[n.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")}));let l={data:KA({},o,null,!0),element:a,cancel:!1};this.parent.trigger("eventRendered",l,e=>{e.cancel||(r.appendChild(a),this.parent.eventBase.wireAppointmentEvents(a,o,this.parent.isAdaptive),this.parent.eventBase.applyResourceColor(a,o,"backgroundColor",t))})}return s.appendChild(r),s}tapHoldEventPopup(e){let t=QD(e.target,".e-appointment");this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(t),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();let i=t.getAttribute("data-guid"),n=this.parent.eventBase.getEventByGuid(i);if(XA(n))return;let s=n[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),r=`<div class="e-multiple-event-popup"><div class="e-popup-header"><button class="e-close" title="${this.l10n.getConstant("close")}"></button><div class="e-subject">${s}</div><button class="e-edit" title="${this.l10n.getConstant("edit")}"></button><button class="e-delete" title="${this.l10n.getConstant("delete")}"></button></div></div>`;this.quickPopup.element.innerHTML=r;let o=this.quickPopup.element.querySelector(".e-close");this.renderButton("e-flat e-round e-small","e-icons e-close-icon",!1,o,this.closeClick);let a=this.parent.activeViewOptions.readonly||n[this.parent.eventFields.isReadonly],l=this.quickPopup.element.querySelector(".e-edit");this.renderButton("e-flat e-round e-small","e-icons e-edit-icon",a,l,this.editClick);let c=this.quickPopup.element.querySelector(".e-delete");this.renderButton("e-flat e-round e-small","e-icons e-delete-icon",a,c,this.deleteClick),this.beforeQuickPopupOpen(t)}isCellBlocked(e){let t={};if(t[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,t[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,t[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){let i=parseInt((e.element instanceof Array?e.element[0]:e.element).getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(t,isNaN(i)?null:i)}return this.parent.eventBase.isBlockRange(t)}cellClick(e){let t=new Date(e.startTime.getTime());if(!this.parent.showQuickInfo||!this.parent.eventSettings.allowAdding||"MonthAgenda"===this.parent.currentView||this.isCellBlocked(e)||!this.parent.isMinMaxDate(new Date(t.setHours(0,0,0,0))))return void this.quickPopupHide();let i=e.event.target;if(this.parent.isAdaptive){this.quickPopupHide();let e=this.parent.element.querySelector(".e-new-event");XA(e)&&(e=FD("div",{className:"e-new-event",innerHTML:`<div class="e-title">+ ${this.l10n.getConstant("newEvent")}</div>`}));let t=QD(i,".e-work-cells,.e-all-day-cells");return void(t&&t.appendChild(e))}let n=QD(i,".e-work-cells,.e-all-day-cells,.e-header-cells");if(XA(n)||i.classList.contains("e-more-indicator"))return;if(this.quickPopup.relateTo===n&&this.quickPopup.element.classList.contains("e-popup-open")){let e=this.quickPopup.element.querySelector(".e-subject");return void(e&&e.focus())}this.resetQuickPopupTemplates();let s={};s[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,s[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,s[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;let r=FD("div",{className:"e-cell-popup"});r.appendChild(this.getPopupHeader("Cell",s)),r.appendChild(this.getPopupContent("Cell",e,s)),r.appendChild(this.getPopupFooter("Cell",s));let o=r.querySelector(".e-subject");o&&ON.createInput({element:o,properties:{placeholder:this.l10n.getConstant("addTitle")}}),XA(this.parent.eventSettings.fields.subject.default)||(o.value=this.parent.eventSettings.fields.subject.default);let a=r.querySelector(".e-close");a&&this.renderButton("e-flat e-round e-small","e-icons e-close-icon",!1,a,this.popupClose);let l=r.querySelector(".e-event-details");l&&this.renderButton("e-flat","",!1,l,this.detailsClick);let c=r.querySelector(".e-event-create");c&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,c,this.saveClick),this.quickPopup.content=r,this.quickPopup.dataBind(),this.applyFormValidation(),this.morePopup&&this.morePopup.hide(),this.quickPopup.relateTo=n,this.beforeQuickPopupOpen(n)}isSameEventClick(e){if(this.quickPopup.relateTo===QD(e.element,".e-appointment")&&this.quickPopup.element.classList.contains("e-popup-open")){let e=this.quickPopup.element.querySelector(".e-edit");if(e&&e.focus(),!this.parent.isAdaptive){let e=this.quickPopup.element.querySelector(".e-event-edit");e&&e.focus()}return!0}return!1}isQuickTemplate(e){return"Both"===this.parent.quickInfoTemplates.templateType||this.parent.quickInfoTemplates.templateType===e}eventClick(e){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup(QD(e.element,".e-appointment"));else{if(this.isSameEventClick(e))return;this.resetQuickPopupTemplates();let t=e.event,i=FD("div",{className:"e-event-popup"});i.appendChild(this.getPopupHeader("Event",t)),i.appendChild(this.getPopupContent("Event",e,t)),i.appendChild(this.getPopupFooter("Event",t));let n=this.parent.activeViewOptions.readonly||t[this.parent.eventFields.isReadonly],s=!this.parent.eventSettings.allowEditing||n,r=!this.parent.eventSettings.allowDeleting||n,o=i.querySelector(".e-edit"),a="e-flat e-round e-small";o&&this.renderButton(a,"e-icons e-edit-icon",s,o,this.editClick);let l=i.querySelector(".e-delete");l&&this.renderButton(a,"e-icons e-delete-icon",r,l,this.deleteClick);let c=i.querySelector(".e-close");c&&this.renderButton(a,"e-icons e-close-icon",!1,c,this.popupClose);let h=i.querySelector(".e-event-edit");h&&this.renderButton("e-flat e-primary","",s,h,this.editClick);let d=i.querySelector(".e-event-delete");d&&this.renderButton("e-flat","",r,d,this.deleteClick),this.quickPopup.content=i,this.quickPopup.dataBind(),this.morePopup&&!QD(e.element,".e-more-appointment-wrapper")&&this.morePopup.hide(),this.quickPopup.relateTo=this.parent.isAdaptive?document.body:QD(e.element,".e-appointment"),this.beforeQuickPopupOpen(e.element)}}getPopupHeader(e,t){let i=FD("div",{className:"e-popup-header"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.header){let n=KA({},t,{elementType:e.toLowerCase()},!0),s=this.parent.element.id,r=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(n,this.parent,"header",s+"_headerTemplate",!1));zD([].slice.call(r),i)}else{let n;switch(e){case"Cell":n=`<div class="e-header-icon-wrapper"><button class="e-close" title="${this.l10n.getConstant("close")}"></button></div>`;break;case"Event":let e=this.getFormattedString(t);n=`<div class="e-header-icon-wrapper"><button class="e-edit e-icons" title="${this.l10n.getConstant("edit")}"></button><button class="e-delete e-icons" title="${this.l10n.getConstant("delete")}"></button><button class="e-close" title="${this.l10n.getConstant("close")}"></button></div><div class="e-subject-wrap"><div class="e-subject ${kB}" title="${e.eventSubject}">${e.eventSubject}</div></div >`}let s=FD("div",{innerHTML:n});zD([].slice.call(s.childNodes),i)}return i}getPopupContent(e,t,i){let n=FD("div",{className:"e-popup-content"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.content){let t=KA({},i,{elementType:e.toLowerCase()},!0),s=this.parent.element.id,r=[].slice.call(this.parent.getQuickInfoTemplatesContent()(t,this.parent,"content",s+"_contentTemplate",!1));zD([].slice.call(r),n)}else{let s,r=this.getResourceText(t,e.toLowerCase());switch(e){case"Cell":let e=this.getFormattedString(i);s=`<table class="e-popup-table"><tbody><tr><td><form class="${AB}" onsubmit="return false;"><input class="e-subject e-field" type="text" name="${this.parent.eventFields.subject}" /></form></td></tr><tr><td><div class="e-date-time"><div class="e-date-time-icon e-icons"></div><div class="e-date-time-details ${kB}">${e.details}</div></div>`+(this.parent.activeViewOptions.group.resources.length>0?`<div class="e-resource"><div class="e-resource-icon e-icons "></div><div class="e-resource-details ${kB}">${r}</div></div>`:"")+"</td></tr></tbody></table>";break;case"Event":let t=this.getFormattedString(i);s='<div class="e-date-time"><div class="e-date-time-icon e-icons"></div><div class="e-date-time-wrapper '+kB+'"><div class="e-date-time-details '+kB+'">'+t.details+"</div>",i[this.parent.eventFields.recurrenceRule]&&(s+='<div class="e-recurrence-summary '+kB+'">'+this.getRecurrenceSummary(i)+"</div>"),s+="</div></div>",i[this.parent.eventFields.location]&&(s+='<div class="e-location"><div class="e-location-icon e-icons"></div><div class="e-location-details '+kB+'">'+i[this.parent.eventFields.location]+"</div></div>"),(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&(s+='<div class="e-time-zone"><div class="e-time-zone-icon e-icons"></div><div class="e-time-zone-details '+kB+'">'+this.getTimezone(i)+"</div></div>"),i[this.parent.eventFields.description]&&(s+='<div class="e-description"><div class="e-description-icon e-icons"></div><div class="e-description-details '+kB+'">'+i[this.parent.eventFields.description]+"</div></div>"),this.parent.resourceCollection.length>0&&(s+='<div class="e-resource"><div class="e-resource-icon e-icons"></div><div class="e-resource-details '+kB+'">'+r+"</div></div>")}let o=FD("div",{innerHTML:s});zD([].slice.call(o.childNodes),n)}return n}getPopupFooter(e,t){let i=FD("div",{className:"e-popup-footer"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.footer){let n=KA({},t,{elementType:e.toLowerCase()},!0),s=this.parent.element.id,r=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(n,this.parent,"footer",s+"_footerTemplate",!1));zD([].slice.call(r),i)}else{let t;switch(e){case"Cell":t=`<button class="${"e-event-details "+kB}" title="${this.l10n.getConstant("moreDetails")}">${this.l10n.getConstant("moreDetails")}</button><button class="e-event-create ${kB}" title="${this.l10n.getConstant("save")}">`+this.l10n.getConstant("save")+"</button>";break;case"Event":t=this.parent.isAdaptive?"":`<button class="e-event-edit ${kB}" title="${this.l10n.getConstant("edit")}">${this.l10n.getConstant("edit")}</button><button class="e-event-delete ${kB}" title="${this.l10n.getConstant("delete")}">`+this.l10n.getConstant("delete")+"</button>"}let n=FD("div",{innerHTML:t});zD([].slice.call(n.childNodes),i)}return i}getResourceText(e,t){if(0===this.parent.resourceCollection.length)return null;let i="";if(0===this.parent.activeViewOptions.group.resources.length){let n=this.parent.resourceBase.resourceCollection.slice(-1)[0],s=n.dataSource;if("event"===t){let t=e.event;for(let e of s){let r=t[n.field];if(r instanceof Array){if(r.indexOf(e[n.idField])>-1){let t=r[r.indexOf(e[n.idField])],o=s.filter(e=>e[n.idField]===t)[0];i+=""===i?o[n.textField]:", "+o[n.textField]}}else e[n.idField]===r&&(i=e[n.textField].toString())}}else i=s[0][n.textField].toString()}else if("event"===t){let t,n,s=e.event;for(let e=this.parent.resourceBase.resourceCollection.length-1;e>=0;e--)if(t=s[this.parent.resourceBase.resourceCollection[e].field],!XA(t)){n=this.parent.resourceBase.resourceCollection[e];break}Array.isArray(t)||(t=[t]);let r=[],o=n.dataSource;t.map(e=>{let t=wB(o,n.idField,e),i=o[t][n.textField];i&&r.push(i)}),i=r.join(", ")}else{let t=e,n=XA(t.groupIndex)?0:t.groupIndex,s=this.parent.resourceBase.lastResourceLevel[n];i=s.resourceData[s.resource.textField]}return i}getFormattedString(e){let t=this.parent.eventFields,i=e[t.subject]||this.l10n.getConstant("noTitle"),n=e[t.startTime],s=e[t.endTime],r=this.getDateFormat(n,"long","MMMM d, y"),o=e[t.isAllDay]&&0===s.getHours()&&0===s.getMinutes()?this.getDateFormat(pB(new Date(s.getTime()),-1),"long","MMMM d, y"):this.getDateFormat(s,"long","MMMM d, y"),a=this.parent.getTimeString(n),l=this.parent.getTimeString(s),c="",h=s.getDate()!==n.getDate()&&(s.getTime()-n.getTime())/36e5<24?1:0;return e[t.isAllDay]?(c=r+" ("+this.l10n.getConstant("allDay")+")",(s.getTime()-n.getTime())/864e5>1&&(c+="&nbsp;-&nbsp;"+o+" ("+this.l10n.getConstant("allDay")+")")):c=(s.getTime()-n.getTime())/864e5>=1||h>0?r+" ("+a+")&nbsp;-&nbsp;"+o+" ("+l+")":r+" ("+a+"&nbsp;-&nbsp;"+l+")",{eventSubject:i,details:c}}moreEventClick(e,t,i){this.quickPopupHide(!0);let n=this.morePopup.element.querySelector(".e-more-event-content");n&&$D(n);let s=e.date.getTime().toString(),r=QD(e.element,".e-more-indicator,.e-work-cells"),o=this.parent.globalize.formatDate(e.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector(".e-header-day").innerHTML=TB(o,"single");let a,l=this.morePopup.element.querySelector(".e-header-date");l.innerHTML=this.getDateFormat(e.date,"d","d"),l.setAttribute("data-date",s),l.setAttribute("data-end-date",t.getTime().toString()),XA(i)||(l.setAttribute("data-group-index",i),a=this.parent.resourceBase.lastResourceLevel[parseInt(i,10)].groupOrder);let c=this.createMoreEventList(e.event,a,i);if(this.morePopup.element.querySelector(".e-more-event-popup").appendChild(c),HD(this.morePopup.element.querySelector(".e-more-event-date-header").childNodes,"e-current-date"),dB(e.date).getTime()===dB(this.parent.getCurrentTime()).getTime()&&jD(this.morePopup.element.querySelector(".e-more-event-date-header").childNodes,"e-current-date"),!this.parent.isAdaptive)if(-1!==this.parent.currentView.indexOf("Timeline")){let e=r.getAttribute("data-group-index"),t=new Date(parseInt(r.getAttribute("data-start-date"),10));t.setHours(t.getHours(),t.getMinutes(),0);let i=this.parent.getMsFromDate(t).toString();this.morePopup.relateTo=XA(e)?this.parent.element.querySelector('.e-content-wrap tbody tr td[data-date="'+i+'"]'):this.parent.element.querySelector('.e-content-wrap tbody tr td[data-group-index="'+e+'"][data-date="'+i+'"]')}else this.morePopup.relateTo=QD(r,".e-work-cells");this.parent.updateEventTemplates();let h={type:"EventContainer",cancel:!1,element:this.morePopup.element};h.data=e,this.parent.trigger("popupOpen",h,e=>{e.cancel||this.morePopup.show()})}saveClick(){this.isCrudAction=!0,this.quickPopupHide()}detailsClick(){let e=this.quickPopup.element.querySelector(".e-subject");e&&""!==e.value&&KA(this.parent.activeCellsData,{subject:e.value}),this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}editClick(){this.quickPopupHide(!0);let e=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",XA(e[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(e,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())}deleteClick(){this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()}updateMoreEventContent(){if(this.morePopup.element.classList.contains("e-popup-close"))return;let e=this.morePopup.element.querySelector(".e-more-event-content");e&&$D(e);let t,i,n=this.morePopup.element.querySelector(".e-header-date"),s=new Date(parseInt(n.getAttribute("data-date"),10)),r=new Date(parseInt(n.getAttribute("data-end-date"),10)),o=n.getAttribute("data-group-index");XA(o)||(t=this.parent.resourceBase.lastResourceLevel[parseInt(o,10)],i=t.groupOrder);let a=this.parent.eventBase.filterEvents(s,r,this.parent.eventsProcessed,t),l=this.createMoreEventList(a,i,o);this.morePopup.element.querySelector(".e-more-event-popup").appendChild(l)}closeClick(){this.quickPopupHide(),this.morePopup.hide()}dialogButtonClick(e){this.quickDialog.hide();let t=e.target,i=this.quickDialog.element.querySelector(".e-quick-alertcancel"),n=this.parent.activeEventData.event;if(t.classList.contains("e-quick-dialog-occurrence-event"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else if(t.classList.contains("e-quick-dialog-following-events"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else if(t.classList.contains("e-quick-dialog-series-event"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(n,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else t.classList.contains("e-quick-dialog-delete")?this.parent.crudModule.deleteEvent(n,this.parent.currentAction):!i.classList.contains("e-disable")&&(t.classList.contains("e-quick-alertok")||t.classList.contains("e-quick-alertcancel")&&!i.classList.contains("e-quick-dialog-cancel"))&&(this.parent.uiStateValues.isIgnoreOccurrence=t.classList.contains("e-quick-alertcancel"),this.parent.eventWindow.eventSave(this.l10n.getConstant("ok")))}updateTapHoldEventPopup(e){let t=this.parent.eventBase.getSelectedEventElements(e);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),t.length>0){let e=this.parent.eventBase.getEventByGuid(t[0].getAttribute("data-guid")),i=1===t.length?e[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+t.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector(".e-subject").innerHTML=i,t.length>1?jD([this.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):HD([this.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.quickPopupHide()}getTimezone(e){let t="";return t+=e[this.parent.eventFields.startTimezone]||"",t+=""===t?"":" - ",t+=e[this.parent.eventFields.endTimezone]||"",t}getRecurrenceSummary(e){let t=this.parent.eventWindow.getRecurrenceEditorInstance();if(t){let i=t.getRuleSummary(e[this.parent.eventFields.recurrenceRule]);return i.charAt(0).toUpperCase()+i.slice(1)}return""}getDateFormat(e,t,i){return TB(this.parent.globalize.formatDate(e,{skeleton:t,calendar:this.parent.getCalendarMode()}),"single")}getDataFromTarget(e){if(e.classList.contains("e-appointment"))return this.parent.activeEventData.event;let t={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex};return this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,t),t}beforeQuickDialogClose(){let e={type:XA(this.parent.activeEventData.event)?"ValidationAlert":XA(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger("popupClose",e,e=>{(e=this.serializingData(e)).cancel||this.parent.eventBase.focusElement()})}beforeQuickPopupOpen(e,t){let i=this.quickPopup.element.querySelector(".e-event-popup"),n=this.parent.isAdaptive?i?"ViewEventInfo":"EditEventInfo":"QuickInfo",s={type:n,cancel:!1,data:KA({},this.getDataFromTarget(e),null,!0),target:e,element:this.quickPopup.element};this.parent.trigger("popupOpen",s,t=>{if(t.cancel)this.quickPopupHide(),this.destroyButtons(),t.element.classList.contains("e-popup-open")&&this.quickPopupClose(),this.resetQuickPopupTemplates(),CB(this.quickPopup.element),this.isMultipleEventSelect=!1;else{let t=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.parent.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=tO("EditEventInfo"===n?65:window.innerHeight);else{this.quickPopup.offsetX=10,this.quickPopup.collision={X:this.parent.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.parent.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);let t=YR(this.quickPopup.element,this.parent.element);if(t.indexOf(this.parent.enableRtl?"left":"right")>-1&&(this.quickPopup.offsetX=-e.offsetWidth-10-this.quickPopup.element.offsetWidth,this.quickPopup.dataBind(),YR(this.quickPopup.element,this.parent.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind())),this.parent.virtualScrollModule&&(t.indexOf("top")>-1||t.indexOf("bottom")>-1)){let e=function(e){let t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}(this.parent.element.querySelector(".e-content-wrap table"));this.quickPopup.offsetY=e,this.quickPopup.dataBind()}}i&&this.applyEventColor(),this.quickPopup.element.style.display=t,this.quickPopup.dataBind(),this.quickPopup.show()}})}isQuickInfoTemplates(){return!XA(this.parent.quickInfoTemplates.header||this.parent.quickInfoTemplates.content||this.parent.quickInfoTemplates.footer)}applyEventColor(){let e="";e="Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?this.parent.enableRtl?"border-right-color":"border-left-color":"background-color";let t=this.parent.activeEventData.element.style[e];if(""===t)return;let i=this.quickPopup.element.querySelector(".e-popup-header"),n=this.quickPopup.element.querySelector(".e-popup-footer");n&&n.offsetParent&&(i=this.quickPopup.element.querySelector(".e-subject"),i&&(i.style.borderLeftColor=t,t=`rgba(${t.match(/\d+/g).join()},0.3)`)),i&&(i.style.backgroundColor=t)}quickPopupOpen(){if(this.parent.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){let e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{let e=this.quickPopup.element.querySelector(".e-event-edit");e&&e.focus();let t=this.quickPopup.element.querySelector(".e-edit");t&&t.focus()}}updateQuickPopupTemplates(e){}quickPopupShow(e,t){e.header&&e.content&&e.footer&&this.beforeQuickPopupOpen(t,!0)}resetQuickPopupTemplates(){}quickPopupClose(){this.resetQuickPopupTemplates(),this.parent.eventBase.focusElement(),this.quickPopup.relateTo="e-work-cells",this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyButtons(),CB(this.quickPopup.element)}morePopupOpen(){if(this.parent.isAdaptive)return this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",void(this.morePopup.element.style.height=tO(window.innerHeight));this.morePopup.element.querySelector(".e-header-date").focus(),this.morePopup.refreshPosition()}morePopupClose(){let e=this.parent.element.querySelector(".e-more-appointment-wrapper");e&&$D(e)}popupClose(){this.isCrudAction=!1,this.quickPopupHide(!0)}quickPopupHide(e){if(!this.quickPopup.element.classList.contains("e-popup-open"))return;let t,i=this.quickPopup.element.querySelector(".e-cell-popup");if(i){let e=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&e&&!e.ej2_instances[0].validate())return;let i=this.parent.eventFields,n=this.parent.eventWindow.getObjectFromFormData("e-quick-popup-wrapper");this.parent.eventWindow.setDefaultValueToObject(n),n[i.id]=this.parent.eventBase.getEventMaxID(),n[i.startTime]=this.parent.activeCellsData.startTime,n[i.endTime]=this.parent.activeCellsData.endTime,n[i.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(n),t=n}else t=this.parent.activeEventData.event;let n=this.quickPopup.element.querySelector(".e-event-popup");this.parent.trigger("popupClose",{type:this.parent.isAdaptive?n?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:t,element:this.quickPopup.element,target:i?this.parent.activeCellsData.element:this.parent.activeEventData.element},t=>{if(!(t=this.serializingData(t)).cancel&&this.quickPopup.element.classList.contains("e-popup-open")){if(i&&this.isCrudAction&&(this.parent.currentAction="Add",this.parent.crudModule.addEvent(t.data)),e){let e=this.quickPopup.hideAnimation;this.quickPopup.hideAnimation=null,this.quickPopup.hide(),this.quickPopup.hideAnimation=e}else this.quickPopup.hide();this.isMultipleEventSelect=!1,this.isCrudAction=!1}})}serializingData(e){return e}navigationClick(e){if(!XA(QD(e.target,".e-navigate"))){let t=this.parent.getDateFromElement(e.currentTarget);this.parent.isServerRenderer()&&(t=new Date(+t-6e4*t.getTimezoneOffset())),XA(t)||(this.closeClick(),this.parent.setScheduleProperties({selectedDate:t}),this.parent.changeView(this.parent.getNavigateView(),e))}}documentClick(e){let t=e.event.target,i=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",n=this.parent.element.querySelector(".e-quick-popup-wrapper");n&&n.childElementCount>0&&!QD(t,i)&&this.quickPopupHide();let s=this.parent.element.querySelector(".e-inline-subject");s&&s!==t&&this.parent.allowInline&&this.parent.inlineModule.documentClick(),QD(t,".e-appointment,.e-header-cells")&&this.parent.removeNewEventElement(),QD(t,i)||(this.quickPopupHide(),this.parent.removeNewEventElement()),QD(t,".e-more-popup-wrapper")||t.classList.contains("e-more-indicator")||QD(t,".e-popup-open")||QD(t,".e-work-cells")||this.morePopup.hide()}onClosePopup(){this.quickPopupHide(),this.parent.eventBase.focusElement()}addEventListener(){this.parent.on("cellClick",this.cellClick,this),this.parent.on("eventClick",this.eventClick,this),this.parent.on("document-click",this.documentClick,this),this.parent.on(nB,this.updateMoreEventContent,this)}removeEventListner(){this.parent.off("cellClick",this.cellClick),this.parent.off("eventClick",this.eventClick),this.parent.off("document-click",this.documentClick),this.parent.off(nB,this.updateMoreEventContent)}destroyButtons(){let e=[].slice.call(this.quickPopup.element.querySelectorAll(".e-control.e-btn"));for(let t of e){let e=t.ej2_instances[0];e&&e.destroy()}}refreshQuickDialog(){this.quickDialog.element&&(this.quickDialog.destroy(),$D(this.quickDialog.element),this.quickDialog.element=null),this.renderQuickDialog()}refreshQuickPopup(){this.quickPopup.element&&(this.quickPopup.destroy(),$D(this.quickPopup.element),this.quickPopup.element=null),this.renderQuickPopup()}refreshMorePopup(){this.morePopup.element&&(this.morePopup.destroy(),$D(this.morePopup.element),this.morePopup.element=null),this.renderMorePopup()}destroy(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListner(),this.destroyButtons(),this.quickPopup.destroy(),$D(this.quickPopup.element),this.morePopup.destroy(),$D(this.morePopup.element),this.quickDialog.element&&(this.quickDialog.destroy(),$D(this.quickDialog.element),this.quickDialog.element=null)}}class MF{constructor(e){this.parent=e,this.tooltipObj=new aM({content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" e-schedule-event-tooltip",target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),enableRtl:this.parent.enableRtl}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0}getTargets(){let e=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&e.push(".e-resource-cells"),this.parent.eventSettings.enableTooltip&&e.push(".e-appointment"),e.join(",")}onBeforeOpen(){}onBeforeClose(){this.parent.group.headerTooltipTemplate&&wD(this.parent.element.id+"_headerTooltipTemplate"),this.parent.eventSettings.tooltipTemplate&&wD(this.parent.element.id+"_tooltipTemplate")}onBeforeRender(e){if(!XA(e.target.getAttribute("data-tooltip-id")))return;if(e.target.classList.contains("e-resource-cells")&&this.parent.activeViewOptions.group.resources.length>0){let t;if(this.parent.activeView.isTimelineView()){let i=parseInt(e.target.getAttribute("data-group-index"),0);t=this.parent.resourceBase.lastResourceLevel[i]}else{let i=e.target.parentNode.sectionRowIndex,n=e.target.cellIndex;t=this.parent.activeView.getColumnLevels()[i][n]}let i={resource:t.resource,resourceData:t.resourceData},n=FD("div"),s=this.parent.element.id+"_headerTooltipTemplate";return zD([].slice.call(this.parent.getHeaderTooltipTemplate()(i,this.parent,"headerTooltipTemplate",s,!1)),n),void this.setContent(n)}let t=this.parent.eventBase.getEventByGuid(e.target.getAttribute("data-guid"));if(XA(this.parent.eventSettings.tooltipTemplate)){let e=this.parent.globalize,i=this.parent.eventFields,n=new Date(""+t[i.startTime]),s=new Date(""+t[i.endTime]);s=0===s.getHours()&&0===s.getMinutes()?new Date(s.setMilliseconds(-1e3)):s;let r=dB(new Date(""+n)),o=dB(new Date(""+s)),a=t[i.subject]||this.parent.eventSettings.fields.subject.default,l=XA(t[i.location])?"":t[i.location],c="",h="",d="";c=e.formatDate(n,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),h=e.formatDate(n,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),d=e.formatDate(s,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),c=TB(c,"single"),h=TB(h,"single"),d=TB(d,"single");let u,p="short",f=e.formatDate(n,{type:"time",skeleton:p,calendar:this.parent.getCalendarMode()}),m=e.formatDate(s,{type:"time",skeleton:p,calendar:this.parent.getCalendarMode()});r.getTime()===o.getTime()?(u=e.formatDate(n,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),u=TB(u,"single")):u=r.getFullYear()===o.getFullYear()?c+" - "+d:h+" - "+d;let g=t[i.isAllDay]?this.parent.localeObj.getConstant("allDay"):f+" - "+m;this.setContent('<div><div class="e-subject">'+a+'</div><div class="e-location">'+l+'</div><div class="e-details">'+u+'</div><div class="e-all-day">'+g+"</div></div>")}else{let e=FD("div"),i=this.parent.element.id+"_tooltipTemplate",n=EB(t);zD([].slice.call(this.parent.getEventTooltipTemplate()(n,this.parent,"tooltipTemplate",i,!1)),e),this.setContent(e)}}setContent(e){this.tooltipObj.setProperties({content:e},!0)}close(){this.tooltipObj.close()}destroy(){this.tooltipObj.destroy(),jD([this.parent.element],"e-control"),this.tooltipObj=null}}var LF=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};const NF="e-input-wrapper",VF="e-form-left",BF="e-recurrence-count",FF="e-hide-recurrence-element";let jF={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},HF={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},UF=["e-days","e-non-week","e-end-on","e-interval","e-year-expander","e-month-expander"],qF=["e-non-week"],WF=["e-days","e-year-expander"],zF=["e-days"],GF=["e-days","e-non-week","e-year-expander","e-month-expander"],YF=["e-end-on-date","e-end-on-count"],$F=["e-end-on-date"],KF=["e-end-on-count"],XF=(()=>{let e=class extends NI{constructor(e,t){super(e,t),this.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},this.renderStatus=!1,this.dayButtons=[],this.monthButtons=[],this.calendarUtil=hF(this.calendarMode)}startState(e,t,i){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(i),this.updateUntilDate(i),this.onMonthDay.setProperties({checked:!0})}preRender(){this.localeObj=new KI(this.getModuleName(),this.defaultLocale,this.locale)}applyCustomClass(e){e&&jD([this.element],e.split(" "))}initialize(){jD([this.element],"e-"+this.getModuleName()),this.renderComponent(),XA(this.value)||""===this.value?(XA(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),"never",this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)}triggerChangeEvent(){if(this.renderStatus){let e=this.getRecurrenceRule();this.trigger("change",{value:e},e=>this.setProperties({value:e.value},!1))}}resetDayButton(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach(e=>HD([e],["e-active","e-primary"]))}daySelection(e){this.resetDayButton();let t=[0,1,2,3,4,5,6];this.rotateArray(t,this.firstDayOfWeek);let i=this.element.querySelector('.e-days button[data-index="'+t.indexOf(e)+'"]');i&&jD([i],["e-active","e-primary"])}rtlClass(e){e?jD([this.element],"e-rtl"):HD([this.element],"e-rtl")}updateUntilDate(e){let t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})}selectMonthDay(e){this.monthDate.setProperties({value:this.calendarUtil.getDate(e)}),this.monthWeekDays.setProperties({value:HF[["sun","mon","tue","wed","thu","fri","sat"][e.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(e)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())}updateForm(e){this.repeatType.setProperties({value:e});let t=this.element.querySelector(".e-end-on");switch("daily"===e?eI(t,[VF],["e-form-right"]):eI(t,["e-form-right"],[VF]),e){case"none":UF.forEach(e=>jD([this.element.querySelector("."+e)],FF));break;case"weekly":qF.forEach(e=>jD([this.element.querySelector("."+e)],FF));break;case"monthly":WF.forEach(e=>jD([this.element.querySelector("."+e)],FF));break;case"yearly":zF.forEach(e=>jD([this.element.querySelector("."+e)],FF));break;case"daily":GF.forEach(e=>jD([this.element.querySelector("."+e)],FF))}}updateEndOnForm(e){switch(this.endType.setProperties({value:e}),e){case"never":YF.forEach(e=>jD([this.element.querySelector("."+e)],FF));break;case"until":KF.forEach(e=>jD([this.element.querySelector("."+e)],FF));break;case"count":$F.forEach(e=>jD([this.element.querySelector("."+e)],FF))}}freshOnEndForm(){YF.forEach(e=>{let t=this.element.querySelector("."+e);t&&HD([t],FF)})}showFormElement(){UF.forEach(e=>{let t=this.element.querySelector("."+e);t&&HD([t],FF)})}renderDropdowns(){let e=this;this.repeatType=new $V({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:"text",value:"value"},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat")},change:t=>{e.setProperties({selectedType:this.frequencies.indexOf(t.value)},!1),e.element.querySelector(".e-repeat-content").innerHTML=e.localeObj.getConstant(jF[t.value]),e.showFormElement(),e.updateForm(t.value),e.resetFormValues(),e.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector(".e-repeat-element")),this.endType=new $V({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:"text",value:"value"},change:t=>{e.freshOnEndForm(),e.updateEndOnForm(t.value),e.resetFormValues(),e.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector(".e-end-on-element"));let t=t=>new $V({dataSource:t,popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,fields:{text:"text",value:"value"},index:1,change:t=>{e.onWeekDay.setProperties({checked:!0}),e.resetFormValues(),e.triggerChangeEvent()}});this.monthWeekPos=t(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector(".e-month-pos")),this.monthWeekDays=t(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector(".e-month-week")),this.monthValue=new $V({dataSource:this.getMonthData(),fields:{text:"text",value:"value"},floatLabelType:"Always",enableRtl:this.enableRtl,index:7,change:t=>{e.resetFormValues(),e.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector(".e-year-expander-element"))}setDefaultValue(){let e=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));for(let t of e){let e=t.ej2_instances[0];e.element.classList.contains("e-repeat-interval")?(e.value=1,e.dataBind()):e.element.classList.contains(BF)&&(e.value=10,e.dataBind())}}resetFormValues(){let e=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));for(let t of e){let e;if(t.classList.contains("e-datepicker"))e=t.ej2_instances[0],e.value?(e.value=e.value,e.dataBind()):this.updateUntilDate(this.startDate);else if(t.classList.contains("e-dropdownlist"))e=t.ej2_instances[0],e.index=e.index||0,e.dataBind();else if(t.classList.contains("e-numerictextbox")){let i;e=t.ej2_instances[0],i=e.element.classList.contains("e-repeat-interval")?1:e.element.classList.contains(BF)?10:this.startDate.getDate(),e.value=e.value||i,e.dataBind()}}}getPopupWidth(){return zO.isDevice?"100%":"auto"}renderDatePickers(){let e=this;this.untilDateObj=new TV({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:XA(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:t=>{t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector(".e-until-date"))}getFormat(e){let t;return t="en"===this.locale||"en-US"===this.locale?WA(e+".short",IO(this.getCalendarMode())):WA("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+e+".short",xO),t}dayButtonRender(){let e=[].slice.call(this.element.querySelectorAll(".e-days button")),t=this;for(let i of e){let e=new bR({isToggle:!0,enableRtl:this.enableRtl},i);this.dayButtons.push(e),GO.add(i,"click",e=>{let i=[].slice.call(this.element.querySelectorAll(".e-days button.e-primary")),n=e.target;n.classList.contains("e-primary")?i.length>1&&(HD([n],"e-primary"),t.triggerChangeEvent()):(jD([n],"e-primary"),t.triggerChangeEvent())})}}radioButtonRender(){let e=this;this.onMonthDay=new PR({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:t=>{e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector(".e-month-expander-element")),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new PR({label:"",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:t=>{e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector(".e-month-expander-wrapper")),this.monthButtons.push(this.onWeekDay)}numericTextboxRender(){let e=this;this.recurrenceCount=new MN({value:10,format:"#",enableRtl:this.enableRtl,floatLabelType:"Always",min:1,max:999,change:t=>{e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+BF)),this.monthDate=new MN({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:t=>{e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector(".e-month-day")),this.repeatInterval=new MN({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:t=>{e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector(".e-repeat-interval"))}renderComponent(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()}rotateArray(e,t){let i;for(let n=0;n<t;n++)i=e.shift(),e.push(i)}getEndData(){let e=this,t=[];return["never","until","count"].forEach(i=>{t.push({text:e.localeObj.getConstant(i),value:i})}),t}getDayPosition(e){let t=new Date(e.getTime()),i=new Date(e.getTime()),n=e.getDay(),s=[];for(t=this.calendarUtil.getMonthStartDate(t),i=this.calendarUtil.getMonthEndDate(i);t<i;)t.getDay()===n&&s.push(t.getTime()),t.setDate(t.getDate()+1);return s.indexOf(e.getTime())===s.length-1?-1:s.indexOf(e.getTime())+1}getRepeatData(){let e=[],t=this;return this.frequencies.forEach(i=>{e.push({text:t.localeObj.getConstant("none"===i?"never":i),value:i})}),e}getMonthPosData(){let e={first:1,second:2,third:3,fourth:4,last:-1},t=this,i=[];return["first","second","third","fourth","last"].forEach(n=>{i.push({text:t.localeObj.getConstant(n),value:e[n]})}),i}getDayData(e){let t,i=["sun","mon","tue","wed","thu","fri","sat"],n=[];this.rotateArray(i,this.firstDayOfWeek),t="en"===this.locale||"en-US"===this.locale?WA("days.stand-alone."+e,IO(this.getCalendarMode())):WA("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+e,xO);for(let s of i){let i=WA(s,t);n.push({text:"narrow"===e?i:TB(i,"single"),value:HF[s]})}return n}getMonthData(){let e,t=[];e="en"===this.locale||"en-US"===this.locale?WA("months.stand-alone.wide",IO(this.getCalendarMode())):WA("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide",xO);for(let i of Object.keys(e))t.push({text:TB(WA(i,e),"single"),value:i});return t}setTemplate(){let e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+NF+" "+VF+'"><input type="text" tabindex="0" class="e-repeat-element"label="'+"e-repeat-element".substr(2)+'" /></div><div class="'+NF+' e-interval e-form-right"><table  class="e-recurrence-table e-repeat-content-wrapper"><tr><td><input type="text" tabindex="0" class="e-repeat-interval"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="e-repeat-content"></span></td></tr></table></div><div class="e-input-wrapper-side e-days '+VF+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="e-input-wrapper-side e-non-week '+VF+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="e-year-expander"><input class="e-year-expander-element" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="e-month-expander"><table class="e-recurrence-table e-month-expand-wrapper"><tr><td><div class="'+NF+' e-month-expander-checkbox-wrapper"><input class="e-month-expander-element"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+NF+' e-monthday-element"><input type="text" tabindex="0" class="e-month-day"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+NF+' e-month-expander-checkbox-wrapper" style="min-width: 30px;margin-bottom:18px;"><input class="e-month-expander-wrapper"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+NF+' e-week-position" ><input type="text" tabindex="0" class="e-month-pos"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+NF+'" style="min-width: 120px;"><input type="text" tabindex="0" class="e-month-week"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="e-input-wrapper-side e-end-on e-form-right"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+NF+' e-end-on-left"><input type="text" tabindex="0" class="e-end-on-element"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+NF+' e-end-on-date" ><input type="text" tabindex="0" class="e-until-date"title="'+this.localeObj.getConstant("until")+'" /></div><div class="'+NF+' e-end-on-count"><input type="text" tabindex="0" class="'+BF+'"title="'+this.localeObj.getConstant("count")+'" /></div></div></div></div>'}getSelectedDaysData(){let e="BYDAY=",t=[].slice.call(this.element.querySelectorAll(".e-days button.e-primary")),i=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(i,this.firstDayOfWeek);for(let n=0;n<t.length;n++)e+=i[parseInt(t[n].getAttribute("data-index"),10)]+(n===t.length-1?"":",");return e+";"}getSelectedMonthData(){let e;return e=this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+";":"BYMONTHDAY="+this.monthDate.value+";",e}getIntervalData(){return"INTERVAL="+this.repeatInterval.value+";"}getEndOnCount(){return"COUNT="+this.recurrenceCount.value+";"}getYearMonthRuleData(){return"BYMONTH="+this.monthValue.value+";"}updateWeekButton(e){let t=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(t,this.firstDayOfWeek);for(let i of this.dayButtons){let n=parseInt(i.element.getAttribute("data-index"),10);-1!==e.indexOf(t[n])?i.setProperties({isPrimary:!0}):i.setProperties({isPrimary:!1})}}updateMonthUI(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(let e of Object.keys(HF))if(HF[e]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}}updateUI(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case"until":this.untilDateObj.setProperties({value:this.ruleObject.until});break;case"count":this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(e){case"weekly":this.updateWeekButton(this.ruleObject.day);break;case"yearly":this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case"monthly":this.updateMonthUI()}}getUntilData(){return this.untilDateObj.value?"UNTIL="+TF(this.untilDateObj.value)+";":""}destroyComponents(){this.recurrenceCount.isDestroyed||this.recurrenceCount.destroy(),this.monthDate.isDestroyed||this.monthDate.destroy(),this.repeatInterval.isDestroyed||this.repeatInterval.destroy(),this.untilDateObj.isDestroyed||this.untilDateObj.destroy(),this.repeatType.isDestroyed||this.repeatType.destroy(),this.endType.isDestroyed||this.endType.destroy(),this.monthWeekPos.isDestroyed||this.monthWeekPos.destroy(),this.monthWeekDays.isDestroyed||this.monthWeekDays.destroy(),this.monthValue.isDestroyed||this.monthValue.destroy(),this.dayButtons.forEach(e=>{e.isDestroyed||e.destroy()}),this.dayButtons=[],this.monthButtons.forEach(e=>{e.isDestroyed||e.destroy()}),this.monthButtons=[]}resetFields(){this.startState("none","never",this.startDate),this.setDefaultValue()}updateRuleUntilDate(e){if(this.untilDateObj.value&&e){let t=this.untilDateObj.value,i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getMilliseconds());this.untilDateObj.setProperties({value:i})}}getCalendarMode(){return this.calendarMode.toLowerCase()}getRuleSummary(e=this.getRecurrenceRule()){return function(e,t,i,n="Gregorian"){let s,r,o=rF(e),a=t.getConstant("every")+" ",l=n.toLowerCase();if("en"===i||"en-US"===i){let e="days.stand-alone.abbreviated";r=WA("months.stand-alone.abbreviated",IO(l)),s=WA(e,IO(l))}else{let e="main."+i+".dates.calendars."+l+".days.stand-alone.abbreviated";r=WA("main."+i+".dates.calendars."+l+".months.stand-alone.abbreviated",xO),s=WA(e,xO)}switch(o.interval>1&&(a+=o.interval+" "),o.freq){case"DAILY":a+=t.getConstant("summaryDay");break;case"WEEKLY":a+=t.getConstant("summaryWeek")+" "+t.getConstant(wF)+" ",o.day.forEach((e,t)=>{a+=TB(WA(SF[e],s),"single"),a+=o.day.length-1===t?"":", "});break;case"MONTHLY":a+=t.getConstant("summaryMonth")+" "+t.getConstant(wF)+" ",a+=BB(o,s,t);break;case"YEARLY":a+=t.getConstant("summaryYear")+" "+t.getConstant(wF)+" ",a+=TB(WA(o.month[0].toString(),r),"single")+" ",a+=BB(o,s,t)}if(o.count)a+=", "+o.count+" "+t.getConstant("summaryTimes");else if(o.until){let e=o.until;a+=", "+t.getConstant("summaryUntil")+" "+e.getDate()+" "+TB(WA((e.getMonth()+1).toString(),r),"single")+" "+e.getFullYear()}return a}(e,this.localeObj,this.locale,this.calendarMode)}getRecurrenceDates(e,t,i,n,s){return s=XA(s)?this.startDate:s,FB(e,t,i,this.firstDayOfWeek,n,s,this.calendarMode)}getRecurrenceRule(){let e="FREQ=";switch(this.repeatType.value){case"daily":e+="DAILY;";break;case"weekly":e+="WEEKLY;"+this.getSelectedDaysData();break;case"monthly":e+="MONTHLY;"+this.getSelectedMonthData();break;case"yearly":e+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case"none":return""}switch(e+=this.getIntervalData(),this.endType.value){case"until":e+=this.getUntilData();break;case"count":e+=this.getEndOnCount()}return e}setRecurrenceRule(e,t=this.startDate){if(!e)return void this.repeatType.setProperties({value:"none"});this.renderStatus=!1,this.ruleObject=rF(e);let i=this.ruleObject.count?"count":this.ruleObject.until?"until":"never";switch(this.ruleObject.freq){case"DAILY":this.startState("daily",i,t),this.updateUI("daily",i);break;case"WEEKLY":this.startState("weekly",i,t),this.updateUI("weekly",i);break;case"MONTHLY":this.startState("monthly",i,t),this.updateUI("monthly",i);break;case"YEARLY":this.startState("yearly",i,t),this.updateUI("yearly",i)}this.renderStatus=!0,this.triggerChangeEvent()}destroy(){this.destroyComponents(),super.destroy();let e=["e-"+this.getModuleName()];for(this.cssClass&&(e=e.concat(this.cssClass.split(" "))),HD([this.element],e);this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)}getModuleName(){return"recurrenceeditor"}getPersistData(){return this.addOnPersist([])}render(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()}onPropertyChanged(e,t){for(let i of Object.keys(e))switch(i){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":t.cssClass&&HD([this.element],t.cssClass.split(" ")),e.cssClass&&jD([this.element],e.cssClass.split(" "));break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=e.calendarMode,this.calendarUtil=hF(e.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:e.dateFormat})}}};return LF([mI(["none","daily","weekly","monthly","yearly"])],e.prototype,"frequencies",void 0),LF([mI(0)],e.prototype,"firstDayOfWeek",void 0),LF([mI(new Date)],e.prototype,"startDate",void 0),LF([mI()],e.prototype,"dateFormat",void 0),LF([mI("Gregorian")],e.prototype,"calendarMode",void 0),LF([mI()],e.prototype,"cssClass",void 0),LF([mI()],e.prototype,"value",void 0),LF([mI(new Date(1900,0,1))],e.prototype,"minDate",void 0),LF([mI(new Date(2099,11,31))],e.prototype,"maxDate",void 0),LF([mI(0)],e.prototype,"selectedType",void 0),LF([yI()],e.prototype,"change",void 0),e=LF([bI],e),e})();class JF{constructor(e){this.parent=e,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.fieldValidator=new RF,this.renderEventWindow()}renderEventWindow(){this.element=FD("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);let e={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:"e-schedule-dialog",enableRtl:this.parent.enableRtl,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(e.cssClass="e-schedule-dialog e-device",e.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>'):(e.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:"e-event-delete",disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary e-event-save",isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:"e-event-cancel",content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}],e.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>"),this.dialogObject=new nM(e,this.element),this.dialogObject.isStringTemplate=!0,this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),jD([this.element.parentElement],"e-schedule-dialog-container"),this.parent.isAdaptive&&(GO.add(this.element.querySelector(".e-back-icon"),"click",this.dialogClose,this),GO.add(this.element.querySelector(".e-save-icon"),"click",this.eventSave,this)),this.applyFormValidation()}updateEditorTemplate(){}resetEditorTemplate(){this.parent.editorTemplate&&wD(this.parent.element.id+"_editorTemplate")}refresh(){this.destroy(),this.renderEventWindow()}refreshRecurrenceEditor(){if(this.recurrenceEditor){let e=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(e)}}setRecurrenceEditor(e){this.parent.editorTemplate&&(this.recurrenceEditor=e)}openEditor(e,t,i,n){if(this.parent.currentAction=t,this.parent.removeNewEventElement(),this.parent.quickPopup.quickPopupHide(!0),this.parent.inlineModule.removeInlineAppointmentElement(),"Add"===t){let t={};this.cellClickAction=!i,this.parent.activeCellsData=e;let n=e;this.cellClickAction?this.convertToEventData(n,t):(this.parent.activeCellsData={startTime:n.startTime||n[this.fields.startTime],endTime:n.endTime||n[this.fields.endTime],isAllDay:n.isAllDay||n[this.fields.isAllDay],element:n.element,groupIndex:n.groupIndex},t=n),e=t}switch(XA(this.parent.editorTemplate)||this.renderFormElements(this.element.querySelector(".e-schedule-form"),e),!this.parent.isAdaptive&&XA(this.parent.editorTemplate)&&HD([this.dialogObject.element.querySelector(".e-recurrenceeditor")],"e-disable"),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),t){case"Add":this.onCellDetailsUpdate(e,n);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":"EditOccurrence"===t&&!this.parent.isAdaptive&&XA(this.parent.editorTemplate)&&jD([this.dialogObject.element.querySelector(".e-recurrenceeditor")],"e-disable"),this.cellClickAction=!1,this.onEventDetailsUpdate(e)}}setDialogContent(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind()}onBeforeOpen(e){let t={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(t.duration=this.getSlotDuration());let i=this.getInstance("e-event-save");i&&(i.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),i.dataBind());let n=this.getInstance("e-event-delete");n&&(n.disabled=!this.parent.eventSettings.allowDeleting,n.dataBind());let s=new PM;return this.parent.trigger("popupOpen",t,t=>{if(e.cancel=t.cancel,this.duration=this.cellClickAction?t.duration:null,this.refreshDateTimePicker(this.duration),this.cellClickAction&&t.duration!==this.getSlotDuration()&&XA(this.parent.editorTemplate)){let e=this.getInstance("e-start"),i=this.getInstance("e-end");i.value=new Date(e.value.getTime()+6e4*t.duration),i.dataBind()}this.parent.editorTemplate&&this.element.querySelector(".e-recurrenceeditor")&&!this.recurrenceEditor&&(this.recurrenceEditor=this.getInstance("e-recurrenceeditor")),s.resolve(e)}),s}onBeforeClose(e){e.isInteracted&&(this.isCrudAction=!1);let t={type:"Editor",data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},i=new PM;return this.parent.trigger("popupClose",t,t=>{e.cancel=t.cancel,t.cancel||(this.resetEditorTemplate(),this.updateEditorTemplate(),this.isCrudAction&&(e.cancel=this.processCrudActions(t.data),this.isCrudAction=e.cancel),this.isCrudAction||(this.resetForm(),this.parent.eventBase.focusElement(),this.eventCrudData=null)),i.resolve(e)}),i}getEventWindowContent(){let e=FD("div",{className:"e-form-container"}),t=FD("form",{id:this.parent.element.id+"EditForm",className:AB,attrs:{onsubmit:"return false;"}});return this.renderFormElements(t),e.appendChild(t),e}renderFormElements(e,t){if(XA(this.parent.editorTemplate))e.appendChild(this.getDefaultEventWindowContent());else{if(t){this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents();let t=[].slice.call(e.children);for(let e of t)$D(e)}{let i=this.parent.element.id+"_editorTemplate";zD([].slice.call(this.parent.getEditorTemplate()(t||{},this.parent,"editorTemplate",i,!1)),e),this.updateEditorTemplate()}}}getDefaultEventWindowContent(){let e=this.createDivElement("e-dialog-parent"),t=this.createDivElement("e-title-location-row");e.appendChild(t),t.appendChild(this.renderTextBox("e-subject")),t.querySelector(".e-subject").setAttribute("title",this.parent.editorTitles.subject),t.appendChild(this.renderTextBox("e-location")),t.querySelector(".e-location").setAttribute("title",this.parent.editorTitles.location);let i=this.createDivElement("e-start-end-row");e.appendChild(i),i.appendChild(this.renderDateTimePicker("e-start",this.onTimeChange.bind(this))),i.querySelector(".e-start").setAttribute("title",this.parent.editorTitles.startTime),i.appendChild(this.renderDateTimePicker("e-end")),i.querySelector(".e-end").setAttribute("title",this.parent.editorTitles.endTime);let n=this.createDivElement("e-all-day-time-zone-row");e.appendChild(n),n.appendChild(this.renderCheckBox("e-all-day")),n.appendChild(this.renderCheckBox("e-time-zone"));let s=this.createDivElement("e-time-zone-row");e.appendChild(s),s.appendChild(this.renderDropDown("e-start-time-zone")),s.appendChild(this.renderDropDown("e-end-time-zone"));let r=this.createDivElement("e-repeat-parent-row");e.appendChild(r);let o=this.renderCheckBox("e-repeat"),a=FD("span",{className:"e-recurrence-container"}),l=FD("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});if(this.buttonObj=new bR({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),a.appendChild(l),this.buttonObj.appendTo(l),this.buttonObj.isStringTemplate=!0,o.appendChild(a),r.appendChild(o),this.parent.isAdaptive?GO.add(l,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(e),this.parent.resourceCollection.length>0){let t=this.createDivElement("e-resources-row");for(let e of this.parent.resourceBase.resourceCollection)t.appendChild(this.renderResourceDetails(e));e.appendChild(t)}let c=this.createDivElement("e-description-row");c.appendChild(this.renderTextBox("e-description")),c.querySelector(".e-description").setAttribute("title",this.parent.editorTitles.description),e.appendChild(c);let h=FD("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return e.appendChild(h),e}createRecurrenceEditor(e){let t=this.createDivElement();e.appendChild(t),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(t)}createDivElement(e){return FD("div",{className:e})}createInputElement(e,t,i){return FD(i||"input",{className:e,attrs:{type:"text",name:t,value:"",id:t,title:""===this.l10n.getConstant(t.charAt(0).toLowerCase()+t.slice(1))?t:this.l10n.getConstant(t.charAt(0).toLowerCase()+t.slice(1))}})}getSlotDuration(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount}renderDateTimePicker(e,t){let i=this.createDivElement(e+"-container"),n=this.getFieldName(e),s=this.createInputElement(e+" e-field",n);i.appendChild(s);let r=new NV({change:t,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",format:(XA(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.getFormat("timeFormats"),placeholder:this.getFieldLabel(e),step:this.getSlotDuration(),width:"100%"});return r.isStringTemplate=!0,r.appendTo(s),i}refreshDateTimePicker(e){let t=[].slice.call(this.element.querySelectorAll(".e-start,.e-end"));for(let i of t){let t=i.ej2_instances[0];t.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek,t.step=e||this.getSlotDuration(),t.dataBind()}}onTimeChange(){let e=this.getInstance("e-start");if(e.element.parentElement.classList.contains("e-input-focus")){let t=this.getInstance("e-end"),i=0;this.cellClickAction?(i=6e4*this.duration,this.eventWindowTime.startTime=e.value):i=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();let n=XA(e.value)?null:new Date(e.value.getTime()+i);this.cellClickAction&&(this.eventWindowTime.endTime=n),t.value=n,t.dataBind()}}renderResourceDetails(e){let t=e.field,i="e-"+t,n=e.title,s=this.createDivElement(i+"-container e-resources"),r=this.createInputElement(i+" e-field",t);s.appendChild(r);let o='<div class="e-resource-template"><div class="e-resource-color" style="background-color:${'+e.colorField+'}"></div><div class="e-resource-text">${'+e.textField+"}</div></div>";if(e.allowMultiple){let i=new iB({cssClass:this.parent.cssClass||"",dataSource:e.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:o,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:n,name:t},floatLabelType:"Always",placeholder:n,popupHeight:"230px",popupWidth:"447px",mode:"Box"});i.appendTo(r),i.isStringTemplate=!0}else{let i=new $V({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:e.dataSource,enableRtl:this.parent.enableRtl,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:n,name:t},floatLabelType:"Always",placeholder:n,popupHeight:"230px",popupWidth:"447px",itemTemplate:o});i.appendTo(r),i.isStringTemplate=!0}return s}renderDropDown(e){let t=this.getFieldName(e),i=this.createDivElement(e+"-container"),n=this.createInputElement(e+" e-field",t);i.appendChild(n);let s=new $V({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:VB,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:"Search Timezone",filtering:e=>{let t=new _M;t=""!==e.text?t.where("Text","contains",e.text,!0):t,e.updateData(VB,t)},htmlAttributes:{title:this.getFieldLabel(e),name:t},floatLabelType:"Always",placeholder:this.getFieldLabel(e),popupHeight:"230px"});return s.appendTo(n),s.isStringTemplate=!0,i}onMultiselectResourceChange(e){if(!e.value||!this.parent.activeViewOptions.group.byGroupID||this.parent.resourceCollection.length<=1)return;let t=this.parent.resourceBase.resourceCollection,i=e.element.getAttribute("name")||this.getColumnName(e.element);for(let n=0;n<t.length;n++)if(t[n].field===i&&n<t.length-1){let i=this.createInstance(n),s=[];for(let r=0;r<e.value.length;r++){let i=t[n+1],o=i.dataSource.filter(t=>t[i.groupIDField]===e.value[r])[0],a=this.filterDatasource(n,o[t[n+1].groupIDField]);s=s.concat(a)}i.dataSource=s,i.dataBind()}}createInstance(e){return this.element.querySelector(".e-"+this.parent.resourceBase.resourceCollection[e+1].field).ej2_instances[0]}onDropdownResourceChange(e){if(!e.value||this.parent.resourceCollection.length<=1||!this.parent.activeViewOptions.group.byGroupID)return;let t=e.element.getAttribute("name")||this.getColumnName(e.element),i=this.parent.resourceBase.resourceCollection;for(let n=0;n<i.length;n++)if(n<i.length-1&&i[n].field===t){let t=this.createInstance(n);t.dataSource=this.filterDatasource(n,e.itemData[i[n].idField]),t.dataBind();let s=t.dataSource[0][i[n+1].idField];t.value=i[n+1].allowMultiple?[s]:s,t.dataBind()}}filterDatasource(e,t){let i=this.parent.resourceBase.resourceCollection[e+1];return i.dataSource.filter(e=>e[i.groupIDField]===t)}onTimezoneChange(e){if((e.element.getAttribute("name")||this.getColumnName(e.element))===this.parent.eventFields.startTimezone){let e=this.getInstance("e-start-time-zone"),t=this.getInstance("e-end-time-zone");t.value=e.value,t.dataBind()}}renderCheckBox(e){let t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=this.createInputElement(e+" e-field",i);t.appendChild(n);let s=new ER({change:this.onChange.bind(this),cssClass:e+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,label:this.getFieldLabel(e)});return s.appendTo(n),s.isStringTemplate=!0,n.setAttribute("name",i),"Repeat"===i&&(this.repeatStatus=s),t}renderTextBox(e){let t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=this.createInputElement(e+" e-field",i,"e-description"===e?"textarea":"input");return t.appendChild(n),ON.createInput({element:n,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(e)}}),t}getFieldName(e){let t="";switch(e){case"e-subject":t=this.fields.subject;break;case"e-location":t=this.fields.location;break;case"e-start":t=this.fields.startTime;break;case"e-end":t=this.fields.endTime;break;case"e-description":t=this.fields.description;break;case"e-all-day":t=this.fields.isAllDay;break;case"e-start-time-zone":t=this.fields.startTimezone;break;case"e-end-time-zone":t=this.fields.endTimezone;break;case"e-time-zone":t="Timezone";break;case"e-repeat":t="Repeat"}return t}getFieldLabel(e){let t="";switch(e){case"e-subject":t=this.parent.editorTitles.subject;break;case"e-location":t=this.parent.editorTitles.location;break;case"e-description":t=this.parent.editorTitles.description;break;case"e-start":t=this.parent.editorTitles.startTime;break;case"e-end":t=this.parent.editorTitles.endTime;break;case"e-start-time-zone":t=this.parent.editorTitles.startTimezone;break;case"e-end-time-zone":t=this.parent.editorTitles.endTimezone;break;case"e-repeat":t=this.parent.editorTitles.recurrenceRule;break;case"e-all-day":t=this.parent.editorTitles.isAllDay;break;case"e-time-zone":t=this.l10n.getConstant("timezone")}return t}onChange(e){let t=e.event.target;t.classList.contains("e-all-day")?this.onAllDayChange(e.checked):t.classList.contains("e-time-zone")?this.timezoneChangeStyle(e.checked):t.classList.contains("e-repeat")&&this.onRepeatChange(e.checked)}renderRepeatDialog(){let e=FD("div");this.repeatDialogObject=new nM({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(e),this.repeatDialogObject.appendTo(e),this.repeatDialogObject.isStringTemplate=!0,this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))}loadRecurrenceEditor(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)}onRepeatChange(e){e?(this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor()):(this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule)),jD([this.element.querySelector(".e-recurrence-container")],"e-hide"))}repeatSaveDialog(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();let e=this.element.querySelector(".e-recurrence-container");this.recurrenceEditor.getRecurrenceRule()?HD([e],"e-hide"):(jD([e],"e-hide"),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()}closeRepeatDialog(){this.repeatDialogObject.hide()}repeatCancelDialog(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})}repeatOpenDialog(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()}onCellDetailsUpdate(e,t){if(!this.parent.eventSettings.allowAdding)return;this.element.querySelector("."+AB).removeAttribute("data-id"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("newEvent"),e.Timezone=!1,this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",XA(this.parent.eventSettings.fields.subject.default)||(e[this.fields.subject]=this.parent.eventSettings.fields.subject.default),XA(this.parent.eventSettings.fields.location.default)||(e[this.fields.location]=this.parent.eventSettings.fields.location.default),XA(this.parent.eventSettings.fields.description.default)||(e[this.fields.description]=this.parent.eventSettings.fields.description.default),this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]);let i=this.element.querySelector(".e-event-delete");if(i&&jD([i],"e-disable"),this.recurrenceEditor&&this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime],selectedType:XA(t)?XA(e[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:t}),this.parent.isAdaptive&&XA(this.parent.editorTemplate))jD([this.element.querySelector(".e-recurrence-container")],"e-hide"),this.updateRepeatLabel(this.repeatRule);else{let e=this.element.querySelector(".e-event-save");this.disableButton(e,!1)}this.dialogObject.show()}convertToEventData(e,t){e.subject&&(t[this.fields.subject]=e.subject),t[this.fields.startTime]=e.startTime,t[this.fields.endTime]=e.endTime,t[this.fields.isAllDay]=e.isAllDay,e.RecurrenceRule&&(t[this.fields.recurrenceRule]=e.RecurrenceRule),(this.parent.resourceCollection.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(t)}applyFormValidation(){let e=e=>e&&Object.keys(e).length>0?e:void 0,t=this.element.querySelector("."+AB),i={};i[this.parent.eventSettings.fields.subject.name]=e(this.parent.eventSettings.fields.subject.validation),i[this.parent.eventSettings.fields.location.name]=e(this.parent.eventSettings.fields.location.validation),i[this.parent.eventSettings.fields.startTime.name]=e(this.parent.eventSettings.fields.startTime.validation),i[this.parent.eventSettings.fields.endTime.name]=e(this.parent.eventSettings.fields.endTime.validation),i[this.parent.eventSettings.fields.description.name]=e(this.parent.eventSettings.fields.description.validation),this.fieldValidator.renderFormValidator(t,i,this.element)}showDetails(e){let t=KA({},e,null,!0);0===t[this.fields.endTime].getHours()&&0===t[this.fields.endTime].getMinutes()&&this.trimAllDay(t),this.eventData=t;let i=this.getFormElements("e-schedule-dialog"),n=Object.keys(t);for(let s of i){let e=s.name||this.getColumnName(s);XA(e)||""===e||(-1!==n.indexOf(e)?this.setValueToElement(s,t[e]):this.setDefaultValueToElement(s))}if(XA(this.parent.editorTemplate)){this.onAllDayChange(t[this.fields.isAllDay]);let e=this.getInstance("e-time-zone.e-field");XA(t[this.fields.startTimezone])&&XA(t[this.fields.endTimezone])||(e.checked=!0,e.dataBind()),this.timezoneChangeStyle(e.checked),delete t.Timezone}}getColumnName(e){let t=e.getAttribute("data-name")||"";if(""===t){let i=!1,n="";e.classList.contains("e-dropdownlist")?(n="e-ddl",i=!0):e.classList.contains("e-multiselect")?(n="e-multiselect",i=!0):e.classList.contains("e-datetimepicker")?n="e-datetimepicker":e.classList.contains("e-datepicker")?n="e-datepicker":e.classList.contains("e-checkbox")&&(n="e-checkbox");let s=QD(e,i?`.${n}:not(.e-control)`:"."+n)||e.querySelector("."+n);if(s){let e=s.querySelector("[name]");e&&(t=e.name)}}return t}onAllDayChange(e){let t,i=this.getInstance("e-start"),n=this.getInstance("e-end"),s=this.element.querySelector(".e-time-zone-container");e?(t=XA(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,jD(this.element.querySelectorAll(".e-time-icon"),"e-icon-disable"),jD([s],"e-disable"),this.element.querySelector(".e-time-zone-row")&&HD([this.element.querySelector(".e-time-zone-row")],"e-enable"),i.format=n.format=t):(t=XA(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.getFormat("timeFormats"):this.parent.dateFormat+" "+this.getFormat("timeFormats"),HD(this.element.querySelectorAll(".e-time-icon"),"e-icon-disable"),HD([s],"e-disable"),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&jD([this.element.querySelector(".e-time-zone-row")],"e-enable"),i.format=n.format=t),this.cellClickAction&&this.updateDateTime(e,i,n),i.dataBind(),n.dataBind(),XA(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(i.value)}updateDateTime(e,t,i){let n,s;if(e)if(n=dB(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){let e=pB(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();s=+this.eventWindowTime.startTime>e?this.eventWindowTime.endTime:new Date(e)}else s=dB(new Date(this.eventWindowTime.endTime.getTime()));else{let e=this.parent.activeCellsData.startTime;if(n=new Date(this.eventWindowTime.startTime.getTime()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),this.parent.activeCellsData.isAllDay){let e=this.parent.getStartEndTime(this.parent.workHours.start);n.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),s=new Date(n.getTime()),s.setMilliseconds(6e4*this.getSlotDuration())}else s=new Date(n.getTime()),s.setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(n.getTime()),endTime:new Date(s.getTime())},t.value=n,i.value=s,t.dataBind(),i.dataBind()}getFormat(e){let t;return t="en"===this.parent.locale||"en-US"===this.parent.locale?WA(e+".short",IO(this.parent.getCalendarMode())):WA("main."+this.parent.locale+".dates.calendars."+this.parent.getCalendarMode()+"."+e+".short",xO),t}onEventDetailsUpdate(e){if(!this.parent.eventSettings.allowEditing)return;if(this.parent.isAdaptive||HD([this.element.querySelector(".e-event-delete")],"e-disable"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("editEvent"),this.element.querySelector("."+AB).setAttribute("data-id",e[this.fields.id].toString()),XA(this.parent.editorTemplate)){e=KA({},e,null,!0);let t,i=this.getInstance("e-time-zone.e-field");e[this.fields.startTimezone]||e[this.fields.endTimezone]?(t=!0,this.parent.eventBase.timezoneConvert(e)):t=!1,e.Timezone=t,i.checked=t,i.dataBind()}if(this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",e[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]),this.parent.isAdaptive&&XA(this.parent.editorTemplate)){let t=this.element.querySelector(".e-recurrence-container");e[this.fields.recurrenceRule]?(HD([t],"e-hide"),this.repeatStatus.setProperties({checked:!0})):(jD([t],"e-hide"),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}let t=this.parent.readonly||e[this.fields.isReadonly];if(this.parent.isAdaptive){let e=this.element.querySelector(".e-save-icon");e&&(t?jD([e],"e-icon-disable"):HD([e],"e-icon-disable"))}else{let e=this.element.querySelector(".e-event-save"),i=this.element.querySelector(".e-event-delete");this.disableButton(e,t),this.disableButton(i,t)}this.dialogObject.show()}disableButton(e,t){e&&(e.ej2_instances[0].disabled=t)}renderRecurrenceEditor(){return new XF({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})}updateRepeatLabel(e){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();let t=e?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(e):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:t})}dialogClose(){this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide()}resetForm(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),this.parent.isAdaptive||!this.recurrenceEditor||this.recurrenceEditor.isDestroyed||this.recurrenceEditor.resetFields()}timezoneChangeStyle(e){let t=this.element.querySelector(".e-time-zone-row"),i=this.parent.tzModule.getLocalTimezoneName();if(e){jD([t],"e-enable");let e=this.getInstance("e-start-time-zone"),n=this.getInstance("e-end-time-zone"),s=e.dataSource;e.value&&this.parent.timezone||s.some(e=>e.Value===i)||(s.push({Value:i,Text:i}),e.dataSource=s,n.dataSource=s,e.dataBind(),n.dataBind()),e.value=e.value||this.parent.timezone||i,n.value=n.value||this.parent.timezone||i,e.dataBind(),n.dataBind()}else HD([t],"e-enable")}resetFormFields(){let e=this.getFormElements("e-schedule-dialog");for(let t of e){let e=t.name||this.getColumnName(t);XA(e)||""===e||this.setDefaultValueToElement(t)}}eventSave(e){let t=this.element.querySelector("."+AB);if(t&&t.classList.contains("e-formvalidator")&&!t.ej2_instances[0].validate())return;let i=this.getEventDataFromEditor();this.processEventValidation(i.tempData,e)||(this.eventCrudData=i.eventData,this.isCrudAction=!0,this.dialogObject.hide())}getEventDataFromEditor(){let e=KA({},this.getObjectFromFormData("e-schedule-dialog"));e.Timezone||(e[this.fields.startTimezone]=null,e[this.fields.endTimezone]=null),delete e.Timezone,delete e.Repeat,this.setDefaultValueToObject(e),e[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;let t=KA({},e,null,!0);return e[this.fields.isAllDay]&&(e[this.fields.startTime]=XA(e[this.fields.startTime])?null:dB(new Date(e[this.fields.startTime].getTime())),e[this.fields.endTime]=XA(e[this.fields.endTime])?null:pB(dB(new Date(e[this.fields.endTime].getTime())),1)),{eventData:e,tempData:t}}processEventValidation(e,t){let i;if(XA(this.parent.editorTemplate)){if(!e[this.fields.startTime]||!e[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(e[this.fields.startTime]>e[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value){i=this.recurrenceValidation(e[this.fields.startTime],e[this.fields.endTime],t);let n=!0;if("seriesChangeAlert"===i&&this.parent.uiStateValues.isIgnoreOccurrence&&(n=!1),!XA(i)&&n&&(!this.parent.enableRecurrenceValidation&&"wrongPattern"===i||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(i),!0}return!1}processCrudActions(e){this.parent.uiStateValues.isBlock=!1;let t=this.getResourceData(e),i=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!XA(t),n=this.getEventIdFromForm();if(XA(n))this.parent.currentAction="Add",i?this.resourceSaveEvent(e,this.parent.currentAction):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(e));else{let t,s="string"===this.parent.eventBase.getEventIDType()?n:parseInt(n,10),r=this.parent.eventsData.filter(e=>e[this.fields.id]===s)[0];if((e=KA({},r,e))[this.fields.isReadonly])return!1;if(!XA(r[this.fields.recurrenceRule])){if(t=this.parent.currentAction,e.Guid=this.parent.activeEventData.event.Guid,"EditOccurrence"===this.parent.currentAction&&(e[this.fields.recurrenceID]?(s=e[this.fields.recurrenceID],t=null):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(s,e)))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;"EditSeries"===this.parent.currentAction||e[this.fields.id]!==r[this.fields.id]?e[this.fields.recurrenceID]=r[this.fields.id]:"EditFollowingEvents"===this.parent.currentAction&&(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e[this.fields.followingID]=r[this.fields.id])}i?this.resourceSaveEvent(e,"Save",t):this.parent.saveEvent(e,t)}return this.parent.uiStateValues.isBlock}getResourceData(e){let t=null;return!XA(this.parent.resourceBase)&&!XA(this.parent.resourceBase.resourceCollection)&&this.parent.resourceBase.resourceCollection.length>0&&(t=e[this.parent.resourceBase.resourceCollection.slice(-1)[0].field]),t}getObjectFromFormData(e){let t=this.getFormElements(e),i={};for(let n of t){let e=n.name||this.getColumnName(n);XA(e)||""===e||(i[e]=this.getValueFromElement(n))}return i}setDefaultValueToObject(e){XA(e[this.fields.subject])||(e[this.fields.subject]=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.l10n.getConstant("addTitle")),XA(e[this.fields.location])||(e[this.fields.location]=e[this.fields.location]||this.parent.eventSettings.fields.location.default),XA(e[this.fields.description])||(e[this.fields.description]=e[this.fields.description]||this.parent.eventSettings.fields.description.default)}recurrenceValidation(e,t,i){let n,s=this.recurrenceEditor,r=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(i!==this.l10n.getConstant("ok")){let i=this.parent.activeEventData.event,o=[];if(("EditSeries"===this.parent.currentAction||"EditFollowingEvents"===this.parent.currentAction)&&!XA(i)){let e=i[this.parent.eventFields.startTime],t=this.parent.eventBase.getSeriesEvents(this.eventData,e);if(t.length>0)o=this.parent.eventBase.getEditedOccurrences(t,e);else{let t=this.parent.eventBase.getEventById(i[this.parent.eventFields.id]);o=this.parent.eventBase.getEditedOccurrences([t],e)}"EditSeries"!==this.parent.currentAction||XA(this.eventData[this.parent.eventFields.recurrenceException])||o.push(this.eventData)}if(o.length>0&&(n="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<e&&(n="wrongPattern"),XA(n))switch(s.value.split(";")[0].split("=")[1]){case"DAILY":(t.getTime()-e.getTime())/36e5>=24*r&&(n="createError");break;case"WEEKLY":let i=s.value.split(";")[1].split("=")[1].split(","),o={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},a=[],l=[];for(let e=0;e<i.length*(r+1);e++)a[e]=i.length>e?o[i[e]]:a[e-i.length]+7*r;let c=a.sort((e,t)=>e-t);for(let e=1;e<c.length;e++)l.push(c[e]-c[e-1]);((t.getTime()-e.getTime())/36e5>=24*Math.min.apply(Math,l)||XA(r))&&(n="createError");break;case"MONTHLY":t.getTime()>=new Date(+e).setMonth(e.getMonth()+r)&&(n="createError");break;case"YEARLY":t.getTime()>=new Date(+e).setFullYear(e.getFullYear()+r)&&(n="createError")}}else t.getTime()>=new Date(+e).setMonth(e.getMonth()+r)&&(n="createError"),XA(n)&&this.parent.quickPopup.quickDialog.hide();return n}getRecurrenceIndex(e,t){let i;for(let n=0;n<e.length;n++)if(t[this.fields.startTime].valueOf()===e[n][this.fields.startTime].valueOf()){i=n;break}return i}trimAllDay(e){if(e[this.fields.isAllDay]){let t=pB(new Date(+e[this.fields.endTime]),-1).getTime();e[this.fields.endTime]=+e[this.fields.startTime]>t?e[this.fields.endTime]:new Date(t)}}editOccurrenceValidation(e,t,i){void 0===i&&(i=this.eventData);let n=this.parent.getOccurrencesByID(e);this.parent.eventsData.filter(t=>t[this.fields.recurrenceID]===e).map(e=>n.push(KA({},e))),t=KA({},t),this.trimAllDay(t);for(let r of n)this.trimAllDay(r);this.parent.eventBase.sortByTime(n);let s=this.getRecurrenceIndex(n,i);if(XA(s))return!1;if(0===s)return!(XA(n[s+1])||new Date(+n[s+1][this.fields.startTime]).setHours(0,0,0,0)>new Date(+t[this.fields.endTime]).setHours(0,0,0,0));if(s===n.length-1){if(!(new Date(+n[s-1][this.fields.endTime]).setHours(0,0,0,0)<new Date(+t[this.fields.startTime]).setHours(0,0,0,0)))return!0}else if(!(new Date(+n[s-1][this.fields.endTime]).setHours(0,0,0,0)<new Date(+t[this.fields.startTime]).setHours(0,0,0,0)&&new Date(+n[s+1][this.fields.startTime]).setHours(0,0,0,0)>new Date(+t[this.fields.endTime]).setHours(0,0,0,0)))return!0;return!1}resourceSaveEvent(e,t,i){let n=this.parent.resourceBase.resourceCollection.slice(-1)[0],s=e[n.field];s=s instanceof Array?s:[s];let r=this.parent.resourceBase.lastResourceLevel,o=[];for(let a=0;a<s.length;a++){let l=KA({},e,null,!0);l[this.fields.id]=this.parent.eventBase.getEventMaxID();let c=[],h=()=>{if("Save"===t&&a===s.length-1)if(c.length>0){c[0][this.fields.id]=e[this.fields.id];for(let e=1;e<c.length;e++)c[e][this.fields.id]=this.parent.eventBase.getEventMaxID(a),o.push(c[e]),this.parent.saveEvent(c[0],i)}else l[this.fields.id]=e[this.fields.id],this.parent.saveEvent(l,i);else if(c.length>0)for(let e=0;e<c.length;e++)c[e][this.fields.id]=this.parent.eventBase.getEventMaxID(e),o.push(c[e]);else l[this.fields.id]=this.parent.eventBase.getEventMaxID(a),o.push(l)};if(this.parent.activeViewOptions.group.byGroupID&&!XA(r)){let e,t=n.dataSource,i=this.parent.resourceCollection;if(e=i.length>1?wB(t,n.idField,s[a],l,i):wB(t,n.idField,s[a]),e<0)return;let o=t[e][n.groupIDField],c=r.filter(e=>e.resourceData[n.idField]===s[a]).filter(e=>e.resourceData[n.groupIDField]===o)[0].groupOrder;for(let n=0;n<this.parent.resourceBase.resourceCollection.length;n++)l[this.parent.resourceBase.resourceCollection[n].field]=c[n]instanceof Array?c[n][0]:c[n];h()}else{for(let t=0;t<this.parent.resourceBase.resourceCollection.length-1;t++){let i=this.parent.resourceBase.resourceCollection[t].field;if(l[i]instanceof Array&&l[i].length>1)for(let t=0;t<l[i].length;t++){let r=KA({},l,null,!0);r[i]=e[i][t],r[n.field]=s[a],c.push(r)}else if(0===c.length)l[i]=e[i]instanceof Array?e[i][0]:e[i],l[n.field]=s[a];else for(let t=0;t<c.length;t++)c[t][i]=e[i]instanceof Array?e[i][0]:e[i]}l[n.field]=s[a],h()}}if(o.length>0){for(let e of o)e[this.fields.recurrenceException]=null,e[this.fields.recurrenceID]=null;this.parent.addEvent(o)}}getEventIdFromForm(){return this.element.querySelector("."+AB).getAttribute("data-id")}getFormElements(e){let t=[];return t=[].slice.call("e-schedule-dialog"===e?this.element.querySelectorAll(".e-field"):this.parent.element.querySelectorAll("."+e+" .e-field")),t}getValueFromElement(e){let t;return t=e.classList.contains("e-datepicker")||e.classList.contains("e-datetimepicker")||e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:nR.sanitize(e.value),t}setValueToElement(e,t){if(e.classList.contains("e-datepicker")){let i=e.ej2_instances[0];i.value=t,i.dataBind()}else if(e.classList.contains("e-datetimepicker")){let i=e.ej2_instances[0];i.element.classList.contains("e-start")?this.eventWindowTime.startTime=new Date(""+t):this.eventWindowTime.endTime=new Date(""+t),i.value=t,i.dataBind()}else if(e.classList.contains("e-dropdownlist")){let i=e.ej2_instances[0];i.value=t,i.dataBind()}else if(e.classList.contains("e-multiselect")){let i=e.ej2_instances[0];i.value=[],i.value=t instanceof Array?t:[t],i.dataBind()}else if(e.classList.contains("e-checkbox")){let i=e.ej2_instances[0];i.checked=t,i.dataBind()}else"checkbox"!==e.type?e.value=t||"":e.checked=t}setDefaultValueToElement(e){if(e.classList.contains("e-datepicker")){let t=e.ej2_instances[0];t.value=this.parent.getCurrentTime(),t.dataBind()}else if(e.classList.contains("e-datetimepicker")){let t=e.ej2_instances[0],i=this.parent.getCurrentTime();this.eventWindowTime={startTime:i,endTime:i},t.value=i,t.dataBind()}else if(e.classList.contains("e-dropdownlist")){let t=e.ej2_instances[0];t.value=null,t.dataBind()}else if(e.classList.contains("e-multiselect")){let t=e.ej2_instances[0];t.value=[],t.dataBind()}else if(e.classList.contains("e-checkbox")){let t=e.ej2_instances[0];t.checked=!1,t.dataBind()}else"checkbox"===e.type?e.checked=!1:e.value=""}getInstance(e){let t=this.element.querySelector("."+e);return t?t.ej2_instances[0]:null}eventDelete(){switch(this.parent.currentAction){case"EditOccurrence":this.parent.currentAction=XA(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"Delete":"DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete"}this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()}getRecurrenceEditorInstance(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor}destroyComponents(){let e=this.getFormElements("e-schedule-dialog");for(let t of e){let e;(t.classList.contains("e-datetimepicker")||t.classList.contains("e-datepicker")||t.classList.contains("e-checkbox")||t.classList.contains("e-dropdownlist")||t.classList.contains("e-multiselect"))&&(e=t.ej2_instances),e&&e[0]&&e[0].destroy()}this.buttonObj&&this.buttonObj.destroy()}destroy(){this.parent.isDestroyed||(this.resetEditorTemplate(),this.updateEditorTemplate()),this.recurrenceEditor&&this.recurrenceEditor.destroy(),this.destroyComponents(),this.fieldValidator.destroy(),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),$D(this.repeatDialogObject.element)),this.dialogObject&&(this.dialogObject.destroy(),this.dialogObject=null),this.element&&($D(this.element),this.element=null)}}class QF{constructor(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.isScrollHeightNull=!0,this.previousTop=0,this.parent=e,this.addEventListener()}addEventListener(){this.parent.isDestroyed||this.parent.on("virtual-scroll",this.virtualScrolling,this)}removeEventListener(){this.parent.isDestroyed||this.parent.off("virtual-scroll",this.virtualScrolling)}getRenderedCount(){return this.setItemSize(),Math.ceil(this.parent.element.clientHeight/this.itemSize)+this.bufferCount}triggerScrolling(){this.parent.showSpinner(),this.parent.interopAdaptor.invokeMethodAsync("OnContentUpdate",this.startIndex)}setTranslateValue(){let e=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline");this.renderVirtualTrackHeight(t,e),this.setTranslate(e,t,i,n)}renderVirtualTrackHeight(e,t){if(this.parent.resourceBase.setExpandedResources(),this.isScrollHeightNull){let i=FD("div",{className:"e-virtual-track"}),n=[].slice.call(t.querySelectorAll("table td")),s=parseInt(n[0].getAttribute("data-group-index"),10),r=parseInt(n[n.length-1].getAttribute("data-group-index"),10);this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources.filter(e=>e.groupIndex>=s&&e.groupIndex<=r),this.setItemSize(),i.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",this.isScrollHeightNull=!1;let o=this.parent.element.querySelector(".e-virtual-track");XA(o)||$D(o),e.appendChild(i)}}renderVirtualTrack(e){let t=FD("div",{className:"e-virtual-track"});t.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",e.appendChild(t)}updateVirtualScrollHeight(){let e=this.parent.element.querySelector(".e-virtual-track");if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex!==this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex){let t=this.parent.element.querySelector(".e-content-table");this.renderedLength=t.querySelector("tbody").children.length,e.style.height=t.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*t.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/this.parent.resourceBase.expandedResources.length}updateVirtualTrackHeight(e){let t=this.parent.resourceBase.renderedResources.length;if(t!==this.getRenderedCount()){e.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";let t=this.parent.element.querySelector(".e-resource-column-wrap"),i=this.parent.element.querySelector(".e-content-wrap"),n=this.parent.element.querySelector(".e-event-table");this.translateY=0,this.setTranslate(t,i,n)}else{let i=t+(this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex-this.parent.resourceBase.renderedResources[t-1].groupIndex);i=i>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:i,e.style.height=i*this.itemSize+"px"}}setItemSize(){this.itemSize=rB(this.parent.activeView.element,"e-work-cells")||this.itemSize}beforeInvoke(e,t,i,n){}virtualScrolling(){this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide();let e=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline"),s=this.parent.element.querySelector(".e-content-table");this.renderedLength=e.querySelector("tbody").children.length;let r=parseInt(e.querySelector("tbody td").getAttribute("data-group-index"),10),o=this.parent.rowAutoHeight?s.offsetHeight-t.offsetHeight:this.bufferCount*this.itemSize;jD([t],"e-transition");let a=[];t.scrollTop-this.translateY<0?(a=this.upScroll(t,r),this.beforeInvoke(e,t,i,n)):t.scrollTop-this.translateY>o&&(a=this.downScroll(t,r),this.previousTop!==t.scrollTop&&this.beforeInvoke(e,t,i,n)),!XA(a)&&a.length>0&&(this.parent.showSpinner(),this.updateContent(e,t,i,a),this.setTranslate(e,t,i,n),this.parent.notify(nB,{}),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout(()=>{this.parent.hideSpinner()},250))}upScroll(e,t){let i=0;i=~~(e.scrollTop/this.itemSize)+Math.ceil(e.clientHeight/this.itemSize)-this.renderedLength,this.parent.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0;let n=this.getBufferCollection(i,i+this.renderedLength);if(this.parent.resourceBase.renderedResources=n,0===t)this.translateY=e.scrollTop;else{let t=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*t>0?e.scrollTop-this.bufferCount*t:0}return n}downScroll(e,t){if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return null;let i=0;i=~~(e.scrollTop/this.itemSize),this.parent.rowAutoHeight&&(i=~~((e.scrollTop-this.translateY)/this.averageRowHeight)+t,i=i>t+this.bufferCount?i:t+this.bufferCount);let n=i+this.renderedLength;n=n>this.parent.resourceBase.expandedResources.length?i+(this.parent.resourceBase.expandedResources.length-i):n;let s=this.getBufferCollection(n-this.renderedLength,n);return this.translateY=e.scrollTop,s}updateContent(e,t,i,n){let s=e.querySelector("tbody").children.length;for(let l=0;l<s;l++)$D(e.querySelector("tbody tr")),$D(t.querySelector("tbody tr")),$D(i.querySelector("div"));this.parent.resourceBase.renderedResources=n;let r=this.parent.resourceBase.getContentRows(n),o=this.parent.activeView.getContentRows(),a=this.parent.activeView.getEventRows(n.length);zD(r,e.querySelector("tbody")),zD(o,t.querySelector("tbody")),zD(a,i)}getBufferCollection(e,t){return this.parent.resourceBase.expandedResources.slice(e,t)}setTranslate(e,t,i,n){ZD(e.querySelector("table"),{transform:`translateY(${this.translateY}px)`}),ZD(t.querySelector("table"),{transform:`translateY(${this.translateY}px)`}),ZD(i,{transform:`translateY(${this.translateY}px)`}),XA(n)||ZD(n,{transform:`translateY(${this.translateY}px)`})}destroy(){this.removeEventListener()}}class ZF{constructor(e){this.parent=e}render(e,t=!0){this.initializeLayout(e),t&&!this.parent.isServerRenderer()&&this.refreshDataManager()}initializeLayout(e){switch(this.parent.activeView&&(this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),e){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Year":this.parent.activeView=this.parent.yearModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule}if(XA(this.parent.activeView)){let e=this.parent.viewCollections[0].option;if(e)return this.parent.setScheduleProperties({currentView:e}),this.parent.onServerDataBind(),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(e);throw Error("Inject required modules")}this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(e),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.isAdaptive&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.enableCompactView,this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),-1!==this.parent.currentView.indexOf("Timeline")&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new QF(this.parent),this.parent.uiStateValues.top=0),this.updateHeader(),this.parent.activeView.renderLayout("e-current-panel"),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new MF(this.parent))}updateHeader(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?jD([this.parent.element],"e-read-only"):this.parent.element.classList.contains("e-read-only")&&HD([this.parent.element],"e-read-only"),this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))}updateLabelText(e){let t=this.parent.activeView.getLabelText(e);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",t)}refreshDataManager(){let e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(e,t)).then(e=>this.dataManagerSuccess(e)).catch(e=>this.dataManagerFailure(e))}dataManagerSuccess(e){this.parent.isDestroyed||this.parent.trigger("dataBinding",e,e=>{let t=KA([],e.result,null,!0);this.parent.eventsData=t.filter(e=>!e[this.parent.eventFields.isBlock]),this.parent.blockData=t.filter(e=>e[this.parent.eventFields.isBlock]);let i=this.parent.eventBase.processData(t);this.parent.notify(nB,{processedData:i}),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),this.parent.renderCompleted(),this.parent.trigger("dataBound",null,()=>this.parent.hideSpinner())})}dataManagerFailure(e){this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},()=>this.parent.hideSpinner())}}var ej=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let tj=(()=>{class e extends II{}return ej([mI(!0)],e.prototype,"highlight",void 0),ej([mI("09:00")],e.prototype,"start",void 0),ej([mI("18:00")],e.prototype,"end",void 0),e})();var ij=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let nj=(()=>{class e extends II{}return ij([mI(!0)],e.prototype,"enable",void 0),ij([mI(60)],e.prototype,"interval",void 0),ij([mI(2)],e.prototype,"slotCount",void 0),ij([mI()],e.prototype,"minorSlotTemplate",void 0),ij([mI()],e.prototype,"majorSlotTemplate",void 0),e})();var sj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let rj=(()=>{class e extends II{}return sj([mI("Both")],e.prototype,"templateType",void 0),sj([mI()],e.prototype,"header",void 0),sj([mI()],e.prototype,"content",void 0),sj([mI()],e.prototype,"footer",void 0),e})();var oj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let aj=(()=>{class e extends II{}return oj([mI()],e.prototype,"option",void 0),oj([mI()],e.prototype,"template",void 0),e})();class lj{constructor(e){this.parent=e,this.crudObj={sourceEvent:null,targetEvent:null,isCrudAction:!1}}getQuery(){let e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(e,t)}getTable(){return this.parent.eventSettings.query?this.parent.eventSettings.query.clone().fromTable:null}refreshData(e){let t={requestType:e.requestType,cancel:!1,data:e.data,addedRecords:e.editParms.addedRecords,changedRecords:e.editParms.changedRecords,deletedRecords:e.editParms.deletedRecords};if(this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.activeViewOptions.group.allowGroupEdit&&!this.parent.rowAutoHeight&&!this.parent.virtualScrollModule&&this.parent.activeViewOptions.group.byGroupID&&("eventCreated"===e.requestType||"eventRemoved"===e.requestType)){this.crudObj.isCrudAction=!0,this.crudObj.sourceEvent=[];let t=e.data instanceof Array?e.data:"string"!=typeof e.data&&"number"!=typeof e.data||"eventRemoved"!==e.requestType?[e.data]:e.editParms.deletedRecords;for(let i of t){this.crudObj.isCrudAction=!("eventRemoved"===e.requestType&&!XA(i.parent));let t=this.parent.eventBase.getGroupIndexFromEvent(i);0===this.parent.crudModule.crudObj.sourceEvent.filter(e=>e.groupIndex===t).length&&this.crudObj.isCrudAction&&this.crudObj.sourceEvent.push(this.parent.resourceBase.lastResourceLevel[t])}this.crudObj.targetEvent=this.crudObj.sourceEvent}this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger("actionComplete",t,e=>{e.cancel||this.parent.renderModule.refreshDataManager()}):e.promise.then(e=>{this.parent.isDestroyed||this.parent.trigger("actionComplete",t,e=>{e.cancel||this.parent.renderModule.refreshDataManager()})}).catch(e=>{this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e})})}addEvent(e){if(this.parent.eventSettings.allowAdding){if(!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e instanceof Array?[e]:e);let t=e instanceof Array?e:[e],i={requestType:"eventCreate",cancel:!1,addedRecords:t,changedRecords:[],deletedRecords:[]};i.data=t,this.parent.trigger("actionBegin",i,e=>{if(this.serializeData(e.addedRecords),!e.cancel){let t,i=this.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.addedRecords instanceof Array){for(let t of e.addedRecords)n.addedRecords.push(this.parent.eventBase.processTimezone(t,!0));t=this.parent.dataModule.dataManager.saveChanges(n,i.id,this.getTable(),this.getQuery())}else{let i=this.parent.eventBase.processTimezone(e.addedRecords,!0);n.addedRecords.push(i),t=this.parent.dataModule.dataManager.insert(i,this.getTable(),this.getQuery())}this.refreshData({requestType:"eventCreated",cancel:!1,data:e.addedRecords,promise:t,editParms:n})}})}}saveEvent(e,t){if(this.parent.eventSettings.allowEditing){if("EditFollowingEvents"!==this.parent.currentAction&&!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e instanceof Array?[e]:e);if(this.parent.currentAction=t,t)switch(t){case"EditOccurrence":this.processOccurrences(e,t);break;case"EditFollowingEvents":this.processFollowSeries(e,t);break;case"EditSeries":this.processEntireSeries(e,t)}else{let t={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};t.data=e,this.parent.trigger("actionBegin",t,e=>{if(this.serializeData(e.changedRecords),!e.cancel){let t,i=this.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.changedRecords instanceof Array){for(let t of e.changedRecords)n.changedRecords.push(this.parent.eventBase.processTimezone(t,!0));t=this.parent.dataModule.dataManager.saveChanges(n,i.id,this.getTable(),this.getQuery())}else{let s=this.parent.eventBase.processTimezone(e.changedRecords,!0);n.changedRecords.push(s),t=this.parent.dataModule.dataManager.update(i.id,s,this.getTable(),this.getQuery())}this.refreshData({requestType:"eventChanged",cancel:!1,data:e.changedRecords,promise:t,editParms:n})}})}}}deleteEvent(e,t){if(this.parent.eventSettings.allowDeleting){this.parent.currentAction=t;let i=[];if(i="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter(t=>t[this.parent.eventFields.id]===e):e instanceof Array?e:[e],t)switch(t){case"Delete":this.processEventDelete(i);break;case"DeleteOccurrence":this.processOccurrences(i,t);break;case"DeleteFollowingEvents":this.processFollowSeries(i,t);break;case"DeleteSeries":this.processEntireSeries(i,t)}else{let t={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:i};t.data=e,this.parent.trigger("actionBegin",t,e=>{if(this.serializeData(e.deletedRecords),!e.cancel){let t,i=this.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]};e.deletedRecords.length>1?(n.deletedRecords=n.deletedRecords.concat(e.deletedRecords),t=this.parent.dataModule.dataManager.saveChanges(n,i.id,this.getTable(),this.getQuery())):(n.deletedRecords.push(e.deletedRecords[0]),t=this.parent.dataModule.dataManager.remove(i.id,e.deletedRecords[0],this.getTable(),this.getQuery())),this.parent.eventBase.selectWorkCellByTime(e.deletedRecords),this.refreshData({requestType:"eventRemoved",cancel:!1,data:e.deletedRecords,promise:t,editParms:n})}})}}}processOccurrences(e,t){let i=[],n=!1;if(e instanceof Array)for(let r of e)i.push({occurrence:r,parent:this.getParentEvent(r)});else i={occurrence:e,parent:this.getParentEvent(e)};let s={requestType:"EditOccurrence"===t?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};s.data=i,this.parent.trigger("actionBegin",s,e=>{if(this.serializeData(e.changedRecords),!e.cancel){let s=this.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},o=i instanceof Array?i:[i];for(let i=0,l=e.changedRecords.length;i<l;i++){let a=e.changedRecords[i],l=o[i].parent,c=l[s.recurrenceException];switch(t){case"EditOccurrence":let e=this.parent.eventsProcessed.filter(e=>e.Guid===a.Guid)[0],t=this.excludeDateCheck(e[s.startTime],c);t!==l[s.recurrenceException]?(l[s.recurrenceException]=t,a[s.recurrenceException]=TF(e[s.startTime]),a[s.recurrenceID]=l[s.id],a[s.followingID]=null,r.changedRecords.push(this.parent.eventBase.processTimezone(l,!0)),r.addedRecords.push(this.parent.eventBase.processTimezone(a,!0))):r.changedRecords.push(this.parent.eventBase.processTimezone(a,!0));break;case"DeleteOccurrence":a[s.recurrenceException]||(l[s.recurrenceException]=this.excludeDateCheck(a[s.startTime],c),r.changedRecords.push(this.parent.eventBase.processTimezone(l,!0))),a[s.id]!==l[s.id]&&(r.deletedRecords.push(a),n=!0)}}let a=this.parent.dataModule.dataManager.saveChanges(r,s.id,this.getTable(),this.getQuery());this.parent.eventBase.selectWorkCellByTime(e.changedRecords),this.refreshData({requestType:"EditOccurrence"===t?"eventChanged":"eventRemoved",cancel:!1,data:n?e.deletedRecords:e.changedRecords,promise:a,editParms:r})}})}processFollowSeries(e,t){let i=[];if(e instanceof Array)for(let s of e)i.push({occurrence:s,parent:this.getParentEvent(s)});else i={occurrence:e,parent:this.getParentEvent(e)};let n={requestType:"EditFollowingEvents"===t?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};n.data=i,this.parent.trigger("actionBegin",n,e=>{if(this.serializeData(e.changedRecords),!e.cancel){let n=this.parent.eventFields,s={addedRecords:[],changedRecords:[],deletedRecords:[]},r=i instanceof Array?i:[i];for(let i=0,a=e.changedRecords.length;i<a;i++){let o=e.changedRecords[i],a=r[i].parent,l=this.parent.eventBase.getEventCollections(a,o);switch(t){case"EditFollowingEvents":this.processRecurrenceRule(a,o);let e=!this.parent.eventBase.isFollowingEvent(a,o);if(o[n.followingID]=e?null:a[n.id],o[n.recurrenceID]=null,s.addedRecords.push(this.parent.eventBase.processTimezone(o,!0)),s.changedRecords.push(this.parent.eventBase.processTimezone(a,!0)),!this.parent.uiStateValues.isIgnoreOccurrence){if(o[n.recurrenceException]=null,l.occurrence.length>0){let e=l.occurrence.slice(-1)[0][n.recurrenceRule];-1===e.indexOf("COUNT")&&(o[n.recurrenceRule]=e)}l.follow.length>0&&(o[n.recurrenceRule]=l.follow.slice(-1)[0][n.recurrenceRule],s.deletedRecords=s.deletedRecords.concat(l.follow)),e&&(l.occurrence=l.occurrence.filter(e=>e[n.recurrenceID]===o[n.id])),s.deletedRecords=s.deletedRecords.concat(l.occurrence)}break;case"DeleteFollowingEvents":this.processRecurrenceRule(a,o[n.startTime]),s.changedRecords.push(this.parent.eventBase.processTimezone(a,!0)),s.deletedRecords=s.deletedRecords.concat(l.occurrence).concat(l.follow)}}let o=this.parent.dataModule.dataManager.saveChanges(s,n.id,this.getTable(),this.getQuery());this.parent.eventBase.selectWorkCellByTime(e.changedRecords),this.refreshData({requestType:"EditFollowingEvents"===t?"eventChanged":"eventRemoved",cancel:!1,data:e.changedRecords,promise:o,editParms:s})}})}processEntireSeries(e,t){let i=[],n=!1;if(e instanceof Array)for(let r of e)i.push(this.getParentEvent(r,!0));else i=this.getParentEvent(e,!0);let s={requestType:"EditSeries"===t?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};s.data=i,this.parent.trigger("actionBegin",s,e=>{if(this.serializeData(e.changedRecords),!e.cancel){let s=this.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},o=i instanceof Array?i:[i];for(let i=0,l=e.changedRecords.length;i<l;i++){let a=e.changedRecords[i],l=o[i],c=this.parent.eventBase.getEventCollections(l),h=c.follow.concat(c.occurrence);switch(t){case"EditSeries":if(a[s.startTime]>l[s.startTime]&&a[s.recurrenceRule]&&this.processRecurrenceRule(l,a),a[s.id]=l[s.id],a[s.recurrenceID]=null,a[s.followingID]=null,this.parent.uiStateValues.isIgnoreOccurrence&&a[s.recurrenceException]){let e=this.parent.eventsData.filter(e=>e[s.id]===a[s.id]);e.length>0&&(a[s.recurrenceRule]=e[0][s.recurrenceRule])}else a[s.recurrenceException]=null,r.deletedRecords=r.deletedRecords.concat(h);r.changedRecords.push(this.parent.eventBase.processTimezone(a,!0)),this.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":r.deletedRecords=r.deletedRecords.concat(h.concat(l)),n=!0}}let a=this.parent.dataModule.dataManager.saveChanges(r,s.id,this.getTable(),this.getQuery());this.parent.eventBase.selectWorkCellByTime(e.changedRecords),this.refreshData({requestType:"EditSeries"===t?"eventChanged":"eventRemoved",cancel:!1,data:n?e.deletedRecords:e.changedRecords,promise:a,editParms:r})}})}processEventDelete(e){let t=[];for(let n of e)t.push(n[this.parent.eventFields.recurrenceRule]?{occurrence:n,parent:this.getParentEvent(n)}:n);let i={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:e};i.data=t,this.parent.trigger("actionBegin",i,e=>{if(this.serializeData(e.deletedRecords),!e.cancel){let i=this.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]};for(let r=0,o=e.deletedRecords.length;r<o;r++){let s=XA(e.deletedRecords[r][this.parent.eventFields.recurrenceRule]);if(!s){let o=t[r].parent,a=n.changedRecords.filter(e=>e[i.id]===o[i.id]),l=e.deletedRecords[r][i.startTime];if(a.length>0){let e=a[0];e[i.recurrenceException]=this.excludeDateCheck(l,e[i.recurrenceException])}else o[i.recurrenceException]=this.excludeDateCheck(l,o[i.recurrenceException]);0===a.length&&n.changedRecords.push(this.parent.eventBase.processTimezone(o,!0)),s=e.deletedRecords[r][i.id]!==o[i.id]}s&&n.deletedRecords.push(e.deletedRecords[r])}let s=this.parent.dataModule.dataManager.saveChanges(n,i.id,this.getTable(),this.getQuery());this.refreshData({requestType:"eventRemoved",cancel:!1,data:e.deletedRecords,promise:s,editParms:n})}})}serializeData(e){}getParentEvent(e,t=!1){let i=this.parent.eventBase.getParentEvent(e,t)||e;return(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(i),i}excludeDateCheck(e,t){let i=TF(e);return XA(t)?t=i:-1===t.indexOf(i)&&(t=XA(t)?i:t+","+i),t}processRecurrenceRule(e,t){let i,n=this.parent.eventFields,s=e[n.recurrenceRule];if(t instanceof Date)i=new Date(+t);else{i=new Date(+t[n.startTime]);let s=t[n.recurrenceRule],r=e[n.startTime],o=FB(r,s,"DeleteFollowingEvents"===this.parent.currentAction?t[n.recurrenceException]:null,this.parent.activeViewOptions.firstDayOfWeek),a=new Date(o.slice(-1)[0]);a.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),i.setHours(r.getHours(),r.getMinutes(),r.getSeconds()),t[n.recurrenceRule]=this.getUpdatedRecurrenceRule(s,new Date(+a),!1)}e[n.recurrenceRule]=this.getUpdatedRecurrenceRule(s,pB(new Date(i.getTime()),-1),!0)}getUpdatedRecurrenceRule(e,t,i){let n=e.split(";"),s="";for(let r of n)if(""!==r){let e=r.split("=")[0],i=r.split("=")[1];"COUNT"!==e&&"UNTIL"!==e||(i=TF(t),r=r.replace(r,"UNTIL="+i)),s+=r+";"}return i&&-1===s.indexOf("UNTIL")&&(s+="UNTIL="+TF(t)),s}isBlockEvent(e){let t=e instanceof Array?e:[e],i=!1;for(let n of t)i=n[this.parent.eventFields.isBlock]||!1;return i}}class cj{constructor(e){this.parent=e,GO.add(this.parent.element,"mouseover",this.onHover,this)}cellMouseDown(e){this.isPreventAction(e)||this.parent.notify("cell-mouse-down",{event:e})}cellClick(e){if(this.isPreventAction(e))return;let t=QD(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(XA(t))return;if(!XA(QD(e.target,".e-new-event")))return void this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add");let i=QD(e.target,".e-navigate"),n=this.parent.getNavigateView(),s=this.parent.currentView===n;if(XA(i)||s||XA(this.parent.viewOptions[n.charAt(0).toLowerCase()+n.slice(1)])){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView)return void this.parent.quickPopup.quickPopupHide();if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||QD(e.target,".e-more-indicator")))return;let i=t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells");if(i&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(t);let n=KA(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.trigger("cellClick",n,n=>{(n=this.serializingData(n,e)).cancel?this.parent.quickPopup&&this.parent.quickPopup.quickPopupHide():(i&&this.parent.selectCell(t),this.parent.allowInline?this.parent.notify("inlineClick",{element:n.element,groupIndex:n.groupIndex,type:"Cell"}):this.parent.notify("cellClick",n))})}else{let i=this.parent.getDateFromElement(t);XA(i)||this.parent.isAdaptive||!this.parent.isMinMaxDate(i)||(this.parent.setScheduleProperties({selectedDate:i}),this.parent.changeView(this.parent.getNavigateView(),e))}}cellDblClick(e){if(this.parent.activeViewOptions.readonly||this.isPreventAction(e))return;let t=KA(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellDoubleClick"});this.parent.trigger("cellDoubleClick",t,t=>{t=this.serializingData(t,e);let i=new Date(t.startTime.getTime());this.parent.isMinMaxDate(new Date(i.setHours(0,0,0,0)))&&(t.cancel||this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add"))})}serializingData(e,t){return e}onHover(e){let t=QD(e.target,".e-work-cells,.e-time-slots,.e-all-day-cells,.e-header-cells,.e-resource-cells,.e-appointment,.e-week-number,.e-month-header");t&&this.parent.trigger("hover",{element:t,event:e})}isPreventAction(e){if(QD(e.target,".e-navigate"))return!1;if(QD(e.target,".e-appointment-wrapper")&&!QD(e.target,".e-more-indicator"))return!0;let t=QD(e.target,".e-appointment,.e-resource-group-cells");return!(XA(t)&&(t=QD(e.target,".e-header-cells"),!this.parent.activeView.isTimelineView()||XA(t)))}destroy(){GO.remove(this.parent.element,"mouseover",this.onHover)}}var hj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let dj=(()=>{class e extends II{}return hj([mI()],e.prototype,"name",void 0),hj([mI()],e.prototype,"default",void 0),hj([mI()],e.prototype,"title",void 0),hj([mI({})],e.prototype,"validation",void 0),e})();var uj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let pj=(()=>{class e extends II{}return uj([mI("Id")],e.prototype,"id",void 0),uj([mI("IsBlock")],e.prototype,"isBlock",void 0),uj([gI({name:"Subject"},dj)],e.prototype,"subject",void 0),uj([gI({name:"StartTime"},dj)],e.prototype,"startTime",void 0),uj([gI({name:"EndTime"},dj)],e.prototype,"endTime",void 0),uj([gI({name:"StartTimezone"},dj)],e.prototype,"startTimezone",void 0),uj([gI({name:"EndTimezone"},dj)],e.prototype,"endTimezone",void 0),uj([gI({name:"Location"},dj)],e.prototype,"location",void 0),uj([gI({name:"Description"},dj)],e.prototype,"description",void 0),uj([gI({name:"IsAllDay"},dj)],e.prototype,"isAllDay",void 0),uj([gI({name:"RecurrenceID"},dj)],e.prototype,"recurrenceID",void 0),uj([gI({name:"RecurrenceRule"},dj)],e.prototype,"recurrenceRule",void 0),uj([gI({name:"RecurrenceException"},dj)],e.prototype,"recurrenceException",void 0),uj([mI("IsReadonly")],e.prototype,"isReadonly",void 0),uj([mI("FollowingID")],e.prototype,"followingID",void 0),e})();var fj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let mj=(()=>{class e extends II{}return fj([mI()],e.prototype,"template",void 0),fj([mI([])],e.prototype,"dataSource",void 0),fj([mI()],e.prototype,"query",void 0),fj([gI({},pj)],e.prototype,"fields",void 0),fj([mI(!1)],e.prototype,"enableTooltip",void 0),fj([mI()],e.prototype,"tooltipTemplate",void 0),fj([mI()],e.prototype,"resourceColorField",void 0),fj([mI(!1)],e.prototype,"editFollowingEvents",void 0),fj([mI(!0)],e.prototype,"allowAdding",void 0),fj([mI(!0)],e.prototype,"allowEditing",void 0),fj([mI(!0)],e.prototype,"allowDeleting",void 0),fj([mI(!1)],e.prototype,"enableMaxHeight",void 0),fj([mI(!1)],e.prototype,"enableIndicator",void 0),fj([mI(!1)],e.prototype,"ignoreWhitespace",void 0),e})();var gj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let vj=(()=>{class e extends II{}return gj([mI(!1)],e.prototype,"byDate",void 0),gj([mI(!0)],e.prototype,"byGroupID",void 0),gj([mI(!1)],e.prototype,"allowGroupEdit",void 0),gj([mI([])],e.prototype,"resources",void 0),gj([mI(!0)],e.prototype,"enableCompactView",void 0),gj([mI()],e.prototype,"headerTooltipTemplate",void 0),e})();var yj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let bj=(()=>{class e extends II{}return yj([mI()],e.prototype,"field",void 0),yj([mI()],e.prototype,"title",void 0),yj([mI()],e.prototype,"name",void 0),yj([mI(!1)],e.prototype,"allowMultiple",void 0),yj([mI([])],e.prototype,"dataSource",void 0),yj([mI()],e.prototype,"query",void 0),yj([mI("Id")],e.prototype,"idField",void 0),yj([mI("Text")],e.prototype,"textField",void 0),yj([mI("Expanded")],e.prototype,"expandedField",void 0),yj([mI("GroupID")],e.prototype,"groupIDField",void 0),yj([mI("Color")],e.prototype,"colorField",void 0),yj([mI("StartHour")],e.prototype,"startHourField",void 0),yj([mI("EndHour")],e.prototype,"endHourField",void 0),yj([mI("WorkDays")],e.prototype,"workDaysField",void 0),yj([mI("CssClass")],e.prototype,"cssClassField",void 0),e})();class wj{constructor(e){this.resourceCollection=[],this.leftPixel=25,this.parent=e}renderResourceHeaderIndent(e){let t=FD("td",{className:"e-resource-left-td"}),i=FD("div",{className:"e-resource-text"});t.appendChild(i),this.parent.trigger("renderCell",{elementType:"emptyCells",element:t}),e.appendChild(t)}hideResourceRows(e){if(this.resourceCollection.length<=1||this.parent.virtualScrollModule)return;let t=this.lastResourceLevel.length;for(let i=0;i<t;i++){let t=this.lastResourceLevel[i].resourceData,n=this.lastResourceLevel[i].resource;"e-parent-node"!==t.ClassName||t[n.expandedField]||XA(t[n.expandedField])||jD([].slice.call(e.children).slice(i+1,i+(parseInt(t.Count,0)+1)),"e-hidden")}}createResourceColumn(){let e=this.resourceCollection,t=FD("div",{className:"e-resource-column-wrap"}),i=this.parent.activeView.createTableLayout("e-resource-column-table");!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&jD([i],"e-auto-height");let n=i.querySelector("tbody"),s=this.generateTreeData(!0);if(this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){let e=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),s=this.expandedResources.slice(0,e),this.renderedResources=s}return zD(this.getContentRows(s),n),this.hideResourceRows(n),i.appendChild(n),t.appendChild(i),t}setRenderedResources(){let e=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel}setExpandedResources(){let e=[];for(let t=0;t<this.lastResourceLevel.length;t++){let i=this.lastResourceLevel[t].resourceData,n=i.Count;e.push(this.lastResourceLevel[t]);let s=i[this.lastResourceLevel[t].resource.expandedField];!XA(s)&&!s&&n>0&&(t+=n)}this.expandedResources=e}getContentRows(e){let t,i,n=[],s=this.resourceCollection,r=FD("tr"),o=FD("td");for(let a=0;a<e.length;a++){let l=o.cloneNode();if(i=wB(s,"name",e[a].resource.name),i===s.length-1?(KA(e[a].resourceData,{ClassName:"e-child-node"}),this.renderedResources[a].className=["e-child-node"]):(KA(e[a].resourceData,{ClassName:"e-parent-node"}),this.renderedResources[a].className=["e-parent-node"]),t=i*this.leftPixel+"px","e-parent-node"===e[a].resourceData.ClassName&&!XA(e[a].resourceData.Count)&&e[a].resourceData.Count>0){let n;n=e[a].resourceData[s[i].expandedField]||XA(e[a].resourceData[s[i].expandedField])?"e-resource-collapse":"e-resource-expand";let r=FD("div");jD([r],["e-resource-tree-icon",n]),this.setMargin(r,t),l.appendChild(r),this.resourceCollection.length>1&&GO.add(r,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(l,e[a],"e-resource-text"),l.setAttribute("data-group-index",e[a].groupIndex.toString()),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(l.querySelector(".e-resource-text"),t),jD([l],["e-resource-cells",e[a].resourceData.ClassName]),this.parent.trigger("renderCell",{elementType:"resourceHeader",element:l,groupIndex:e[a].groupIndex});let c=r.cloneNode();c.appendChild(l),n.push(c)}return n}setMargin(e,t){this.parent.enableRtl?e.style.marginRight=t:e.style.marginLeft=t}countCalculation(e,t){let i;for(let n=0;n<e.length;n++){let s=e[e.length-(n+1)].dataSource;for(let r=0;r<s.length;r++){let o=0;i=this.parent.activeViewOptions.group.byGroupID?new RM(t[t.length-1].dataSource).executeLocal((new _M).where(t[t.length-1].groupIDField,"equal",s[r][e[e.length-(n+1)].idField])):t[t.length-1].dataSource;for(let e=0;e<i.length;e++)o+=parseInt(i[e].Count,0);o+=parseInt(s[r].Count,0),KA(s[r],{Count:o})}t=t.slice(0,-1)}}onTreeIconClick(e){this.parent.eventTooltip&&this.parent.eventTooltip.close();let t,i=e.target,n=QD(i,".e-parent-node").parentElement,s=parseInt(n.children[0].getAttribute("data-group-index"),10),r={cancel:!1,event:e,groupIndex:s,requestType:i.classList.contains("e-resource-collapse")?"resourceCollapse":"resourceExpand"};this.parent.trigger("actionBegin",r,n=>{if(!n.cancel){i.classList.contains("e-resource-collapse")?(eI(i,["e-resource-expand"],["e-resource-collapse"]),t=!0):(eI(i,["e-resource-collapse"],["e-resource-expand"]),t=!1);let n=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));for(let e of n)$D(e);this.parent.virtualScrollModule?this.updateVirtualContent(s,t,e,i):this.updateContent(s,t);let o={cssProperties:this.parent.getCssProperties(),module:"scroll"};this.parent.notify(sB,o),r={cancel:!1,event:e,groupIndex:s,requestType:i.classList.contains("e-resource-collapse")?"resourceExpanded":"resourceCollapsed"},this.parent.notify(nB,{}),this.parent.trigger("actionComplete",r)}})}updateContent(e,t){let i,n=[],s=[],r=[],o=this.lastResourceLevel[e].resourceData,a=[].slice.call(this.parent.element.querySelectorAll(".e-resource-column-wrap tr")),l=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap tbody tr")),c=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-appointment-container"));for(let d=0;d<o.Count;d++)n.push(a[e+d+1]),s.push(l[e+d+1]),r.push(c[e+d+1]);let h=this.lastResourceLevel;for(let d=0;d<n.length;d++){let o=!0;if(i=n[d].children[0].classList.contains("e-parent-node"),h[e].resourceData[h[e].resource.expandedField]=!t,t){if(i){let e=n[d].querySelector(".e-resource-tree-icon");e&&eI(e,["e-resource-expand"],["e-resource-collapse"])}n[d].classList.contains("e-hidden")||jD([n[d],s[d],r[d]],"e-hidden")}else{if(i){let e=n[d].rowIndex;if(h[e].resourceData[h[e].resource.expandedField]||XA(h[e].resourceData[h[e].resource.expandedField])||(n.splice(d+1,parseInt(h[e].resourceData.Count,0)),s.splice(d+1,parseInt(h[e].resourceData.Count,0)),r.splice(d+1,parseInt(h[e].resourceData.Count,0)),o=!1),o){let e=n[d].querySelector(".e-resource-tree-icon");e&&eI(e,["e-resource-collapse"],["e-resource-expand"])}}n[d].classList.contains("e-hidden")&&HD([n[d],s[d],r[d]],"e-hidden")}}}updateVirtualContent(e,t,i,n){this.lastResourceLevel[e].resourceData[this.lastResourceLevel[e].resource.expandedField]=!t,this.setExpandedResources();let s=this.parent.virtualScrollModule.getRenderedCount(),r=this.expandedResources.indexOf(this.renderedResources[0]);if(this.renderedResources=this.expandedResources.slice(r,r+s),this.renderedResources.length<s){let e=this.expandedResources.length-s;e=e>0?e:0,this.renderedResources=this.expandedResources.slice(e,this.expandedResources.length)}let o=this.parent.element.querySelector(".e-virtual-track");this.parent.virtualScrollModule.updateVirtualTrackHeight(o);let a=this.parent.element.querySelector(".e-resource-column-wrap table"),l=this.parent.element.querySelector(".e-content-wrap table"),c=this.parent.element.querySelector(".e-event-table");this.parent.virtualScrollModule.updateContent(a,l,c,this.renderedResources);let h=this.parent.element.querySelector(".e-current-timeline");XA(h)||(h.style.height=this.parent.element.querySelector(".e-content-table").offsetHeight+"px")}renderResourceHeader(){let e=FD("div",{className:xB});if(e.innerHTML='<div class="e-schedule-resource-toolbar"><div class="e-resource-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-resource-level-title"></div></div>',"MonthAgenda"===this.parent.currentView){let t=this.parent.activeView.getPanel().querySelector(".e-content-wrap");t.insertBefore(e,t.querySelector(".e-wrapper-container"))}else this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-table-container"));this.renderResourceHeaderText(),GO.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)}renderResourceTree(){this.popupOverlay=FD("div",{className:"e-resource-tree-popup-overlay"});let e=FD("div",{className:"e-resource-tree-popup e-popup-close"});if("MonthAgenda"===this.parent.currentView){let t=this.parent.activeView.getPanel().querySelector(".e-wrapper-container");t.insertBefore(e,t.children[0]),t.appendChild(this.popupOverlay)}else this.parent.element.querySelector(".e-table-container").appendChild(e),this.parent.element.querySelector(".e-table-container").appendChild(this.popupOverlay);let t=FD("div",{className:"e-resource-tree"});e.appendChild(t),this.treeViewObj=new gV({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this)}),this.treeViewObj.appendTo(t),this.treeViewObj.expandAll(),this.treePopup=new dP(e,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?"e-wrapper-container":"e-table-container"))}),this.parent.on("document-click",this.documentClick,this)}generateTreeData(e){let t=[],i=[],n=0;for(let s=0,r=this.resourceTreeLevel.length;s<r;s++){let r=(t,s,o)=>{let a,l,c=this.resourceCollection[s];e?(l={type:"resourceHeader",resource:t.resource,resourceData:t.resourceData,groupIndex:n,groupOrder:t.groupOrder},i.push(l),n++):a={resourceId:o,resourceName:t.resourceData[c.textField],resource:t.resource,resourceData:t.resourceData},t.child.length>0&&!e&&(a.resourceChild=[]);let h=1;for(let i of t.child)e?r(i,s+1,o+"-"+h):a.resourceChild.push(r(i,s+1,o+"-"+h)),h+=1;return e&&KA(l.resourceData,{Count:h-1}),a};e?r(this.resourceTreeLevel[s],0,(s+1).toString()):t.push(r(this.resourceTreeLevel[s],0,(s+1).toString()))}return e?(this.lastResourceLevel=i,i):t}renderResourceHeaderText(){let e=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],t=[];for(let n=0,s=e.groupOrder.length;n<s;n++){let i=this.resourceCollection[n],s=FD("div",{className:"e-resource-name",innerHTML:i.dataSource.filter(t=>t[i.idField]===e.groupOrder[n])[0][i.textField]});t.push(s);let r=FD("div",{className:"e-icons e-icon-next"});t.push(r)}t.pop();let i=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector(".e-resource-level-title");CB(i);for(let n of t)i.appendChild(n);1===this.lastResourceLevel.length&&jD([this.parent.element.querySelector(".e-resource-menu")],"e-disable")}menuClick(e){if(this.parent.element.querySelector(".e-resource-tree-popup").classList.contains("e-popup-open"))this.treePopup.hide(),HD([this.popupOverlay],"e-enable");else{let e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));HD(e,"e-active"),jD([e[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),jD([this.popupOverlay],"e-enable")}}resourceClick(e){if(!e.node.classList.contains("e-has-child")){this.treePopup.hide(),HD([this.popupOverlay],"e-enable");let t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));if(this.parent.uiStateValues.groupIndex=t.indexOf(e.node),this.parent.isServerRenderer())this.parent.interopAdaptor.invokeMethodAsync("OnResourceClick",this.parent.uiStateValues.groupIndex).then(()=>{if(this.parent.isDestroyed)return;this.renderResourceHeaderText(),this.parent.activeView.serverRenderLayout();let e=this.parent.eventBase.processData(this.parent.eventsData);this.parent.notify(nB,{processedData:e})}).catch(e=>this.parent.renderModule.dataManagerFailure(e));else{this.parent.renderModule.render(this.parent.currentView,!1);let e=this.parent.eventBase.processData([...this.parent.blockData,...this.parent.eventsData]);this.parent.notify(nB,{processedData:e})}}e.event.preventDefault()}documentClick(e){if(QD(e.event.target,".e-resource-tree-popup"))return;let t=this.parent.element.querySelector(".e-resource-tree-popup");t&&t.classList.contains("e-popup-open")&&(this.treePopup.hide(),HD([this.popupOverlay],"e-enable"))}bindResourcesData(e){this.parent.showSpinner();let t=[];for(let i=0;i<this.parent.resources.length;i++){let e=new PB(this.parent.resources[i].dataSource,this.parent.resources[i].query);t.push(e.getData(e.generateQuery()))}Promise.all(t).then(t=>this.dataManagerSuccess(t,e)).catch(e=>this.parent.renderModule.dataManagerFailure(e))}dataManagerSuccess(e,t){if(!this.parent.isDestroyed){this.parent.resourceCollection=[];for(let t=0,i=e.length;t<i;t++){let i=this.getResourceModel(this.parent.resources[t],e[t].result);this.parent.resourceCollection.push(i)}this.refreshLayout(t)}}getResourceModel(e,t){return{field:e.field,title:e.title,name:e.name,allowMultiple:e.allowMultiple,dataSource:t||e.dataSource,idField:e.idField,textField:e.textField,groupIDField:e.groupIDField,colorField:e.colorField,startHourField:e.startHourField,endHourField:e.endHourField,workDaysField:e.workDaysField,expandedField:e.expandedField,cssClassField:e.cssClassField}}refreshLayout(e){this.parent.uiStateValues.groupIndex=0,this.parent.renderElements(e)}setResourceCollection(){let e=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(let i of this.parent.activeViewOptions.group.resources){let t=wB(this.parent.resourceCollection,"name",i);t>=0&&e.push(this.parent.resourceCollection[t])}else this.parent.resourceCollection.length>0&&(e=this.parent.resourceCollection);let t=0;for(let i of e){let e=this.getResourceModel(i);i.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=t),t++,this.resourceCollection.push(e)}XA(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)}generateResourceLevels(e,t){let i=[],n=[],s=(t,r,o,a,l)=>{let c=[],h=t[0];if(h){let d;if(a&&this.parent.activeViewOptions.group.byGroupID){let e=a[o.idField];d=h.dataSource.filter(t=>t[h.groupIDField]===e)}else d=h.dataSource;for(let i=0;i<d.length;i++){let o=[];l&&l.length>0&&(o=o.concat(l)),o.push(d[i][h.idField]);let a=s(t.slice(1),r+1,h,d[i],o);if(0===r&&0===a.length&&this.resourceCollection.length>1)continue;let u,p=[],f=this.parent.activeView.renderDates;if(!this.parent.activeViewOptions.group.byDate&&r+1===this.resourceCollection.length){let t=d[i][h.workDaysField],s=d[i][h.startHourField],r=d[i][h.endHourField];t&&t.length>0?(f=this.parent.activeView.getRenderDates(t),u=t,p=this.parent.activeView.getDateSlots(f,t)):(u=this.parent.activeViewOptions.workDays,p=e);let a=this.generateCustomHours(p,s,r,o);n=n.concat(a)}c.push({type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:r,groupOrder:o,resource:h,resourceData:d[i],colSpan:this.parent.activeViewOptions.group.byDate?1:p.length,renderDates:f,workDays:u,cssClass:d[i][h.cssClassField],child:a})}return i[r]||(i[r]=[]),i[r].push(c),c}return[]};return this.resourceTreeLevel=s(this.resourceCollection,0),t?[]:this.generateHeaderLevels(i,n,e)}generateCustomHours(e,t,i,n){let s=KA([],e,null,!0);for(let r of s)t&&(r.startHour=this.parent.getStartEndTime(t)),i&&(r.endHour=this.parent.getStartEndTime(i)),n&&(r.groupOrder=n);return s}generateHeaderLevels(e,t,i){let n=[];for(let l=e.length-1;l>=0;l--){let t=0;for(let i of e[l])for(let s of i){if(e[l+1]){let i=e[l+1][t],n=0;for(let e of i)(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&e.resourceData[e.resource.groupIDField]===s.resourceData[s.resource.idField])&&(n+=e.colSpan);s.colSpan=n}s.groupIndex=t,t++,n[s.resourceLevelIndex]=n[s.resourceLevelIndex]||[],n[s.resourceLevelIndex].push(s)}}if(this.lastResourceLevel=n.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){let e=0;for(let i of this.lastResourceLevel)for(let n=0;n<i.colSpan;n++)t[e].groupIndex=i.groupIndex,e++;return n.push(t),n}let s=[],r=KA([],n,null,!0),o=0;for(let l of r[0])o+=l.colSpan;let a=[];for(let l of i){l.colSpan=o,a.push(l);let e=KA([],r,null,!0);for(let t=0,i=e.length;t<i;t++){if(t===e.length-1)for(let i of e[t])i.date=l.date,i.workDays=l.workDays,i.startHour=this.parent.getStartEndTime(i.resourceData[i.resource.startHourField])||l.startHour,i.endHour=this.parent.getStartEndTime(i.resourceData[i.resource.endHourField])||l.endHour;s[t]||(s[t]=[]),s[t]=s[t].concat(e[t])}}return s.unshift(a),s}setResourceValues(e,t){let i=(t,i,n)=>{e[i]=this.resourceCollection[t].allowMultiple&&this.parent.activeViewOptions.group.allowGroupEdit?[n]:n};if(void 0===t&&(t=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!XA(t)){let e=this.lastResourceLevel[t].groupOrder;for(let t=0;t<this.resourceCollection.length;t++)i(t,this.resourceCollection[t].field,e[t])}else if(this.parent.resourceCollection.length>0)for(let n=0;n<this.resourceCollection.length;n++){let e=this.resourceCollection[n].dataSource[0];e&&i(n,this.resourceCollection[n].field,e[this.resourceCollection[n].idField])}}getResourceColor(e,t){let i=!XA(t)&&this.colorIndex>t.length-1?t.length-1:this.colorIndex,n=this.resourceCollection[i];if(XA(t)&&this.parent.activeViewOptions.group.allowGroupEdit&&n.allowMultiple)return;let s=XA(t)?e[n.field]:t[i],r=this.filterData(n.dataSource,n.idField,s);return r.length>0?r[0][n.colorField]:void 0}getCssClass(e){let t=this.resourceCollection.slice(-1)[0];if(this.parent.activeViewOptions.group.allowGroupEdit&&t.allowMultiple)return;let i=this.filterData(t.dataSource,t.idField,e[t.field]);return i.length>0?i[0][t.cssClassField]:void 0}getResourceRenderDates(){let e=[].concat.apply([],this.lastResourceLevel.map(e=>e.renderDates)).filter((e,t,i)=>i.map(e=>e.getTime()).indexOf(e.getTime())===t);return e.sort((e,t)=>e.getTime()-t.getTime()),e}filterData(e,t,i){return e.filter(e=>e[t]===i)}getResourceData(e,t,i){if(this.parent.activeViewOptions.group.allowGroupEdit){let t={};for(let e of i){let i=this.lastResourceLevel[e].groupOrder;for(let e=0,n=i.length;e<n;e++){let n=this.resourceCollection[e].field;XA(t[n])&&(t[n]=[]),t[n].push(i[e])}}e=KA(e,t)}else for(let n=0,s=this.resourceCollection.length;n<s;n++)e[this.resourceCollection[n].field]=this.lastResourceLevel[t].groupOrder[n]}addResource(e,t,i){let n=e instanceof Array?e:[e];for(let s of this.parent.resourceCollection)if(s.name===t){n.forEach((e,t)=>new RM({json:s.dataSource}).insert(e,null,null,i+t));break}this.refreshLayout(!0)}removeResource(e,t){let i=e instanceof Array?e:[e];for(let n of this.parent.resourceCollection)if(n.name===t){i.forEach(e=>new RM({json:n.dataSource}).remove(n.idField,e));break}this.refreshLayout(!0)}getIndexFromResourceId(e,t,i,n,s){let r=i.dataSource.filter(t=>n&&t[i.idField]===e?t[i.groupIDField]===n[s]?t[i.idField]===e:null:t[i.idField]===e)[0];return this.lastResourceLevel.map(e=>e.resourceData).indexOf(r)}resourceExpand(e,t,i){let n=this.parent.resourceCollection.filter(e=>e.name===t?e:null)[0],s=0,r=n.dataSource.filter(t=>t[n.idField]===e)[0];s=this.parent.activeViewOptions.group.byGroupID?this.lastResourceLevel.map(e=>e.resourceData).indexOf(r):this.getIndexFromResourceId(e,t,n);let o=this.parent.element.querySelector(`.e-resource-column-wrap [data-group-index="${s}"] .e-resource-tree-icon`);o&&(o.classList.contains("e-resource-expand")&&!i||o.classList.contains("e-resource-collapse")&&i)&&o.click()}resourceScroll(e,t){if(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)return;let i=t||this.parent.resourceCollection.slice(-1)[0].name,n=this.parent.resourceCollection.length-1,s=this.parent.resourceCollection.filter((e,t)=>e.name===i?(n=t,e):null)[0],r=this.parent.element.querySelector(".e-content-wrap"),o=0;if(this.parent.activeView.isTimelineView()){if(this.parent.activeViewOptions.group.byGroupID){let t=s.dataSource.filter(t=>t[s.idField]===e)[0];o=this.lastResourceLevel.map(e=>e.resourceData).indexOf(t)}else o=this.getIndexFromResourceId(e,i,s);if(this.parent.virtualScrollModule){let e=this.parent.element.querySelector(".e-virtual-track"),t=Math.round(e.offsetHeight/this.expandedResources.length);if(this.parent.rowAutoHeight&&(r.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),r.scrollTop=o*t-(this.parent.virtualScrollModule.bufferCount-1)*t,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight){let e=this.parent.element.querySelector(`.e-work-cells[data-group-index="${o}"]`);e&&!e.parentElement.classList.contains("e-hidden")&&(r.scrollTop=r.scrollTop<e.offsetTop?e.offsetTop:r.scrollTop+e.offsetTop)}else r.scrollTop=o*t}else{let e=this.parent.element.querySelector(`.e-work-cells[data-group-index="${o}"]`);e&&!e.parentElement.classList.contains("e-hidden")&&(r.scrollTop=e.offsetTop)}}else{o=this.parent.activeViewOptions.group.byGroupID?s.dataSource.map(e=>e[s.idField]).indexOf(e):this.getIndexFromResourceId(e,i,s);let t=this.parent.element.querySelector(`.e-header-row:nth-child(${n+1})`),a=[].slice.call(t.children).map(e=>e.offsetLeft);r.scrollLeft=a[o]}}destroy(){this.parent.off("document-click",this.documentClick),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,$D(this.parent.element.querySelector(".e-resource-tree-popup")),$D(this.parent.element.querySelector(".e-resource-tree-popup-overlay")));let e=this.parent.element.querySelector("."+xB);e&&$D(e)}}var Sj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o};let Cj=(()=>{let e=class extends NI{constructor(e,t){super(e,t)}render(){let e=[],t=[];if(e.push("e-schedule"),this.enableRtl?e.push("e-rtl"):t.push("e-rtl"),this.isAdaptive?e.push("e-device"):t.push("e-device"),this.cssClass){let t=this.cssClass.split(" ");for(let i of t)e.push(i)}eI(this.element,e,t),this.validateDate(),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer),cM({target:this.element}),this.scrollModule=new DB(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new ZF(this),this.eventBase=new kF(this),this.workCellAction=new cj(this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new RB(this)),this.inlineModule=new IF(this),this.initializeDataModule(),this.on(nB,this.resetEventTemplates,this),this.on("events-loaded",this.updateEventTemplates,this),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources(),this.wireEvents()}renderTableContainer(){this.element.querySelector(".e-table-container")||this.element.appendChild(this.createElement("div",{className:"e-table-container"}))}isServerRenderer(e=this.currentView){return!1}renderCompleted(){this.renderComplete()}layoutReady(e,t,i){e&&e.length>0&&(t||i)&&(this.resourceCollection=e,this.resourceBase&&this.resourceBase.refreshLayout(i)),this.isServerRenderer()&&this.activeView&&(this.activeView.serverRenderLayout(),this.renderModule&&this.renderModule.refreshDataManager())}refreshLayout(e){this.uiStateValues.groupIndex=0,this.resourceCollection=e,this.renderElements(!0),this.layoutReady()}updateLayoutTemplates(){this.isServerRenderer(this.views[this.viewIndex].option)}resetLayoutTemplates(){let e=this.viewCollections[this.activeView.viewIndex];this.isServerRenderer(e.option)||(this.cellHeaderTemplate&&wD(this.element.id+"_cellHeaderTemplate"),""!==e.cellHeaderTemplate&&wD(this.element.id+"_"+e.cellHeaderTemplateName+"cellHeaderTemplate"),this.dateHeaderTemplate&&wD(this.element.id+"_dateHeaderTemplate"),""!==e.dateHeaderTemplateName&&wD(this.element.id+"_"+e.dateHeaderTemplateName+"dateHeaderTemplate"),this.cellTemplate&&wD(this.element.id+"_cellTemplate"),""!==e.cellTemplateName&&wD(this.element.id+"_"+e.cellTemplateName+"cellTemplate"),this.resourceHeaderTemplate&&wD(this.element.id+"_resourceHeaderTemplate"),""!==e.resourceHeaderTemplateName&&wD(this.element.id+"_"+e.resourceHeaderTemplateName+"resourceHeaderTemplate"),this.timeScale.minorSlotTemplate&&wD(this.element.id+"_minorSlotTemplate"),this.timeScale.majorSlotTemplate&&wD(this.element.id+"_majorSlotTemplate"))}updateEventTemplates(){let e=this.viewCollections[this.viewIndex];"Agenda"!==e.option&&"MonthAgenda"!==e.option&&"TimelineYear"!==e.option||this.updateLayoutTemplates()}resetEventTemplates(){let e=this.viewCollections[this.activeView.viewIndex];if(this.eventSettings.template&&(vD[this.element.id+"_eventTemplate"]=[]),""!==e.eventTemplateName){vD[this.element.id+"_"+e.eventTemplateName+"eventTemplate"]=[]}"Agenda"!==e.option&&"MonthAgenda"!==e.option&&"TimelineYear"!==e.option||this.resetLayoutTemplates()}initializeResources(e=!1){this.resources.length>0?(this.resourceBase=new wj(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(e))}renderElements(e){if(e)return this.initializeView(this.currentView),void this.eventWindow.refresh();this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new OB(this)),this.renderTableContainer(),(zO.isDevice||zO.isTouch)&&(this.scheduleTouchModule=new IB(this)),this.initializeView(this.currentView),this.destroyPopups(),this.initializePopups()}validateDate(e=this.selectedDate){let t=e instanceof Date?new Date(e.getTime()):new Date(e),i=this.minDate instanceof Date?new Date(this.minDate.getTime()):new Date(this.minDate),n=this.maxDate instanceof Date?new Date(this.maxDate.getTime()):new Date(this.maxDate);if(!(i<=n))throw Error("minDate should be equal or less than maxDate");t<i&&(t=i),t>n&&(t=n),this.setScheduleProperties({selectedDate:new Date(""+t),minDate:new Date(""+i),maxDate:new Date(""+n)})}getViewIndex(e){for(let t=0;t<this.viewCollections.length;t++)if(this.viewCollections[t].option===e)return t;return-1}setViewOptions(e=!1){let t,i;this.viewOptions={},this.viewCollections=[];let n=this.viewIndex,s=0;this.viewIndex=-1;for(let r of this.views){let e="string"!=typeof r;"string"==typeof r?(t=r,this.currentView===t&&(i=t,this.viewIndex=s)):(t=r.option,r.isSelected&&(i=t,this.viewIndex=s));let n=KA({option:t},e?r:{}),o=t.charAt(0).toLowerCase()+t.slice(1);n.cellHeaderTemplateName=n.cellHeaderTemplate?n.option:"",n.dateHeaderTemplateName=n.dateHeaderTemplate?n.option:"",n.cellTemplateName=n.cellTemplate?n.option:"",n.resourceHeaderTemplateName=n.resourceHeaderTemplate?n.option:"",n.eventTemplateName=n.eventTemplate?n.option:"",XA(n.firstDayOfWeek)||0!==n.firstDayOfWeek||delete n.firstDayOfWeek,XA(n.interval)||1!==n.interval||delete n.interval,this.viewCollections.push(n),XA(this.viewOptions[o])?this.viewOptions[o]=[n]:this.viewOptions[o].push(n),s++}if(!e&&i&&(this.setScheduleProperties({currentView:i}),this.onServerDataBind()),-1===this.viewIndex){let e=this.getViewIndex(this.currentView);this.viewIndex="string"==typeof this.views[0]||XA(n)||-1===n?-1===e?0:e:n}}onServerDataBind(){this.bulkChanges&&this.bulkChanges.selectedDate&&(this.bulkChanges.selectedDate=this.bulkChanges.selectedDate),this.serverDataBind()}getActiveViewOptions(){let e=this.viewCollections[this.viewIndex],t=KA({dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,cellHeaderTemplate:this.cellHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,firstDayOfWeek:this.firstDayOfWeek,workDays:this.viewCollections[this.viewIndex].workDays?[]:this.workDays,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:{enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},group:{byDate:this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView},headerRows:this.headerRows,orientation:"Horizontal"},e,void 0,!0);return 0!==this.firstDayOfWeek&&e.firstDayOfWeek&&this.firstDayOfWeek!==e.firstDayOfWeek&&(t.firstDayOfWeek=this.firstDayOfWeek),t}initializeDataModule(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new PB(this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new lj(this)}setEditorTitles(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}}initializeView(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)}initializeTemplates(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate)}initializePopups(){this.eventWindow=new JF(this),this.quickPopup=new PF(this)}getDayNames(e){let t,i=[],n="";"en"===this.locale||"en-US"===this.locale?(n="days.stand-alone.",t=WA(n+e,IO(this.getCalendarMode()))):(n="main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+e,t=WA(n,xO));for(let s of Object.keys(t))i.push(WA(s,t));return i}setCldrTimeFormat(){this.timeFormat="en"===this.locale||"en-US"===this.locale?WA("timeFormats.short",IO(this.getCalendarMode())):WA("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",xO)}getCalendarMode(){return this.calendarMode.toLowerCase()}getTimeString(e){return this.globalize.formatDate(e,{format:this.timeFormat,type:"time",calendar:this.getCalendarMode()}).toLocaleUpperCase()}getDateTime(e){return e instanceof Date?new Date(e.getTime()):new Date(e)}setCalendarMode(){this.calendarUtil="Islamic"===this.calendarMode?new LB:new MB}setScheduleProperties(e){this.allowServerDataBinding=!1,this.setProperties(e,!0),this.allowServerDataBinding=!0}changeView(e,t,i,n){if(XA(n)&&(n=this.getViewIndex(e)),!i&&n===this.viewIndex||n<0)return;this.viewIndex=n;let s={requestType:"viewNavigate",cancel:!1,event:t};this.trigger("actionBegin",s,i=>{i.cancel||this.trigger("navigating",{action:"view",cancel:!1,previousView:this.currentView,currentView:e,viewIndex:this.viewIndex},i=>{i.cancel||(this.viewIndex=i.viewIndex,this.setScheduleProperties({currentView:e}),this.headerModule&&(this.headerModule.updateActiveView(),this.headerModule.setCalendarDate(this.selectedDate),this.headerModule.setCalendarView()),this.initializeView(this.currentView),this.onServerDataBind(),this.animateLayout(),s={requestType:"viewNavigate",cancel:!1,event:t},this.trigger("actionComplete",s))})})}changeDate(e,t){let i={requestType:"dateNavigate",cancel:!1,event:t};this.trigger("actionBegin",i,n=>{n.cancel||this.trigger("navigating",{action:"date",cancel:!1,previousDate:this.selectedDate,currentDate:e},n=>{n.cancel||(this.uiStateValues.isInitial=!!this.activeView.isTimelineView()||this.uiStateValues.isInitial,this.validateDate(e),this.headerModule&&this.headerModule.setCalendarDate(e),this.initializeView(this.currentView),this.onServerDataBind(),this.animateLayout(),i={requestType:"dateNavigate",cancel:!1,event:t},this.trigger("actionComplete",i))})})}resetScrollTop(){let e=this.element.querySelector(".e-resource-column-wrap"),t=this.element.querySelector(".e-content-wrap");XA(t)||(t.scrollTop=0),XA(e)||(e.scrollTop=0)}isMinMaxDate(e=this.selectedDate){return e.getTime()>=this.minDate.getTime()&&e.getTime()<=this.maxDate.getTime()}isSelectedDate(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)}getCurrentTime(){if(this.timezone){let e=(new Date).getTimezoneOffset();return this.tzModule.convert(new Date,e,this.timezone)}return new Date}getNavigateView(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView||"TimelineYear"===this.currentView?"TimelineDay":"Agenda":"Day"}animateLayout(){this.activeView.element&&new _I({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)}requiredModules(){let e=[];this.setViewOptions(!0);for(let t of Object.keys(this.viewOptions))t="timelineDay"===t||"timelineWeek"===t||"timelineWorkWeek"===t?"timelineViews":t,e.push({member:t,args:[this]});return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),e.push({member:"excelExport",args:[this]}),e.push({member:"iCalendarExport",args:[this]}),e.push({member:"iCalendarImport",args:[this]}),e.push({member:"print",args:[this]}),e}preRender(){this.isAdaptive=zO.isDevice,this.globalize=new OO(this.locale),this.tzModule=new NB,this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1},this.activeCellsData={startTime:this.getCurrentTime(),endTime:this.getCurrentTime(),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new KI(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()}getDefaultLocale(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",ok:"Ok",yes:"Yes",no:"No",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At"}}wireEvents(){GO.add(window,"resize",this.onScheduleResize,this),GO.add(window,"orientationchange",this.onScheduleResize,this),GO.add(document,zO.touchStartEvent,this.onDocumentClick,this)}removeSelectedClass(){let e=this.getSelectedElements();for(let t of e)t.setAttribute("aria-selected","false"),t.removeAttribute("tabindex");HD(e,"e-selected-cell")}addSelectedClass(e,t){for(let i of e)i.setAttribute("aria-selected","true");jD(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())}selectCell(e){this.removeSelectedClass(),this.addSelectedClass([e],e)}getAllDayRow(){return this.element.querySelector(".e-all-day-row")}getContentTable(){return this.activeView.element.querySelector(".e-content-table tbody")}getTableRows(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))}getWorkCellElements(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))}getIndexOfDate(e,t){return e.map(Number).indexOf(+t)}isAllDayCell(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable&&!(this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option))}getDateFromElement(e){let t=e.getAttribute("data-date");if(!XA(t)){let e=parseInt(t,10),i=new Date(e);if(this.isServerRenderer()){let e=new Date(+i+6e4*i.getTimezoneOffset());return new Date(e.getTime()+6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))}return i}}getMsFromDate(e){return this.isServerRenderer()?new Date(+e-6e4*e.getTimezoneOffset()).getTime():e.getTime()}getTargetElement(e,t,i){let n,s=document.elementFromPoint(t,i);return s&&(n=s.closest(e)),n?[n]:null}getCellHeaderTemplate(){return this.cellHeaderTemplateFn}getCellTemplate(){return this.cellTemplateFn}getDateHeaderTemplate(){return this.dateHeaderTemplateFn}getMajorSlotTemplate(){return this.majorSlotTemplateFn}getMinorSlotTemplate(){return this.minorSlotTemplateFn}getAppointmentTemplate(){return this.appointmentTemplateFn}getEventTooltipTemplate(){return this.eventTooltipTemplateFn}getHeaderTooltipTemplate(){return this.headerTooltipTemplateFn}getEditorTemplate(){return this.editorTemplateFn}getQuickInfoTemplatesHeader(){return this.quickInfoTemplatesHeaderFn}getQuickInfoTemplatesContent(){return this.quickInfoTemplatesContentFn}getQuickInfoTemplatesFooter(){return this.quickInfoTemplatesFooterFn}getResourceHeaderTemplate(){return this.resourceHeaderTemplateFn}getCssProperties(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"}}removeNewEventElement(){let e=this.element.querySelector(".e-new-event");XA(e)||$D(e)}getStartEndTime(e){if(!XA(e)&&""!==e){let t=dB(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null}onDocumentClick(e){this.notify("document-click",{event:e})}onScheduleResize(){XA(this.activeView)||(this.quickPopup&&this.quickPopup.onClosePopup(),("Month"===this.currentView||"Agenda"!==this.currentView&&"MonthAgenda"!==this.currentView&&!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView())&&(this.activeView.resetColWidth(),this.notify(sB,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.notify(nB,{})))}templateParser(e){if(e)try{if(document.querySelectorAll(e).length)return bD(document.querySelector(e).innerHTML.trim())}catch(t){return bD(e)}}getAnnocementString(e,t){let i=t||e[this.eventFields.subject]||this.eventSettings.fields.subject.default,n=this.globalize.formatDate(e[this.eventFields.startTime],{type:"dateTime",skeleton:"full",calendar:this.getCalendarMode()}),s=this.globalize.formatDate(e[this.eventFields.endTime],{type:"dateTime",skeleton:"full",calendar:this.getCalendarMode()});return i+" "+this.localeObj.getConstant("beginFrom")+" "+n+" "+this.localeObj.getConstant("endAt")+" "+s}boundaryValidation(e,t){let i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i}unwireEvents(){GO.remove(window,"resize",this.onScheduleResize),GO.remove(window,"orientationchange",this.onScheduleResize),GO.remove(document,zO.touchStartEvent,this.onDocumentClick)}getModuleName(){return"schedule"}getPersistData(){return this.addOnPersist(["currentView","selectedDate"])}onPropertyChanged(e,t){let i={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1};for(let n of Object.keys(e))switch(n){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),i.isView=!0;break;case"currentView":i.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":i.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange(this.activeView.getDateRangeText());break;case"showHeaderBar":this.destroyHeaderModule(),e.showHeaderBar&&(this.headerModule=new OB(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),this.notify(sB,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.notify(nB,{});break;case"showWeekend":case"workDays":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":i.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new OO(this.locale),this.localeObj=new KI(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),i.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=e.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),i.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=e.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),i.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),i.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),i.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=e.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),i.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(t.timezone);break;case"enableRtl":this.setRtlClass(),i.isRefresh=!0;break;case"rowAutoHeight":i.isLayout=!0;break;default:this.extendedPropertyChange(n,e,t,i)}this.propertyChangeAction(i)}propertyChangeAction(e){e.isRefresh?this.refresh():e.isResource?this.initializeResources(!0):e.isView?this.changeView(this.currentView,null,!0):e.isDate?this.changeDate(this.selectedDate):e.isLayout?this.initializeView(this.currentView):e.isDataManager&&this.renderModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",HD([this.element],"e-event-action")),this.renderModule.refreshDataManager())}extendedPropertyChange(e,t,i,n){switch(e){case"width":case"height":this.notify("ui-update",{module:"scroll",properties:{width:t.width,height:t.height}});break;case"cssClass":i.cssClass&&HD([this.element],i.cssClass.split(" ")),t.cssClass&&jD([this.element],t.cssClass.split(" "));break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),n.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(t.eventSettings,i.eventSettings,n);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),t.allowKeyboardInteraction&&(this.keyboardInteractionModule=new RB(this));break;case"editorTemplate":XA(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(t.group,i.group,n);break;case"resources":n.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=t.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=t.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),n.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":this.notify(nB,{processedData:this.eventBase.processData(this.eventsData)});break;case"eventDragArea":this.notify(nB,{})}}setRtlClass(){this.enableRtl?jD([this.element],"e-rtl"):HD([this.element],"e-rtl")}refresh(){this.isServerRenderer()?(this.setEditorTitles(),this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new OB(this),this.renderModule.updateHeader()),this.destroyPopups(),this.initializePopups(),this.notify(sB,{cssProperties:this.getCssProperties()}),this.notify(nB,{})):(this.tempResourceCollection=this.resourceCollection,super.refresh(),this.tempResourceCollection=null)}onGroupSettingsPropertyChanged(e,t,i){for(let n of Object.keys(e))"headerTooltipTemplate"===n?this.headerTooltipTemplateFn=this.templateParser(e[n]):(i.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())}onEventSettingsPropertyChanged(e,t,i){for(let n of Object.keys(e))switch(n){case"dataSource":case"query":case"fields":this.initializeDataModule(),i.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),i.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new MF(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),i.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.eventWindow&&this.eventWindow.refresh();break;case"enableMaxHeight":case"enableIndicator":this.notify(nB,{processedData:this.eventBase.processData(this.eventsData)});break;case"ignoreWhitespace":i.isLayout=!0}}destroyHeaderModule(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)}destroyPopups(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)}showSpinner(){wM(this.element)}hideSpinner(){CM(this.element)}setWorkHours(e,t,i,n){let s=[];s=this.getWorkHourCells(e,t,i,n),jD(s,"e-work-hours")}resetWorkHours(e=this.activeView.renderDates,t,i,n){HD(e&&t&&i?this.getWorkHourCells(e,t,i,n):[].slice.call(this.element.querySelectorAll(".e-work-hours")),"e-work-hours")}getWorkHourCells(e,t,i,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];let s=this.getStartEndTime(t),r=this.getStartEndTime(i),o=this.getContentTable();if(XA(s)||XA(r)||!o)return[];s.setMilliseconds(0),r.setMilliseconds(0);let a=this.activeView.getStartHour();s<a&&(s=a);let l=this.activeView.getEndHour();r>l&&(r=l);let c=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,h=Math.round((s.getTime()-a.getTime())/c),d=Math.ceil((r.getTime()-a.getTime())/c),u=h,p=d,f=[];for(let m of e){m=this.getDateTime(m),dB(m);let e=this.activeView.renderDates;XA(n)||!this.resourceBase||this.activeView.isTimelineView()||(e=this.resourceBase.lastResourceLevel[n].renderDates);let t=this.getIndexOfDate(e,m);if(t>=0){if(this.activeView.isTimelineView()){let e=Math.round((l.getTime()-a.getTime())/c);h=u+t*e,d=p+t*e}for(let e=h;e<d;e++)if(this.activeView.isTimelineView()){let t=XA(n)?0:n;f.push(o.rows[t].cells[e])}else if(XA(n))f.push(o.rows[e].cells[t]);else{let i=[].slice.call(o.rows[e].querySelectorAll('.e-work-cells[data-group-index="'+n+'"]'));f.push(i[t])}}}return f}getCellDetails(e){let t=e instanceof Array?e:[e],i=nO(t[0]),n=nO(t.slice(-1)[0]),s=this.getDateFromElement(i),r=this.getDateFromElement(n);if(XA(s)||XA(r))return;let o=this.activeView.isTimelineView()&&!XA(n.getAttribute("colSpan"))&&this.headerRows.length>0,a=o?parseInt(n.getAttribute("colSpan"),10):1;r=!this.activeViewOptions.timeScale.enable||o||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells")?pB(new Date(r.getTime()),a):this.activeView.getEndDateFromStartDate(r);let l={startTime:s,endTime:r,isAllDay:this.isAllDayCell(i),element:e},c=i.getAttribute("data-group-index");return XA(c)||(l.groupIndex=parseInt(c,10)),l}getSelectedElements(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))}getResourceCollections(){return this.resourceCollection}changeCurrentView(e,t){let i=this.getViewIndex(e),n=e.charAt(0).toLowerCase()+e.slice(1),s=this.viewOptions[n];s&&(i=this.viewCollections.indexOf(s[t||0])),-1!==i&&i!==this.viewIndex&&this.changeView(e,null,null,i)}getResourcesByIndex(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(e<0||e>=this.resourceBase.lastResourceLevel.length)return;let t=this.resourceBase.lastResourceLevel[e],i={};return this.resourceBase.setResourceValues(i,e),{resource:t.resource,resourceData:t.resourceData,groupData:i}}}expandResource(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!1)}collapseResource(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!0)}scrollTo(e,t){this.activeView.scrollToDate&&XA(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)}scrollToResource(e,t){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(e,t)}exportToICalendar(e,t){if(!this.iCalendarExportModule)throw Error("Inject ICalendarExport module");this.iCalendarExportModule.initializeCalendarExport(e,t)}importICalendar(e){if(!this.iCalendarImportModule)throw Error("Inject ICalendarImport module");this.iCalendarImportModule.initializeCalendarImport(e)}addEvent(e){this.crudModule.addEvent(e)}exportToExcel(e){if(!this.excelExportModule)throw Error("Inject ExcelExport module");this.excelExportModule.initializeExcelExport(e||{})}print(){if(!this.printModule)throw Error("Inject Print module");this.printModule.printScheduler()}saveEvent(e,t){this.crudModule.saveEvent(e,t)}deleteEvent(e,t){this.crudModule.deleteEvent(e,t)}getEvents(e,t,i){let n=[];return n=i?this.eventBase.getProcessedEvents():this.eventsData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),n=this.eventBase.filterEventsByRange(n,e,t),n}getBlockEvents(e,t,i){let n=[];return n=i?this.eventBase.getProcessedEvents(this.blockData):this.blockData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),n=this.eventBase.filterEventsByRange(n,e,t),n}getOccurrencesByID(e){return this.eventBase.getOccurrencesByID(e)}getOccurrencesByRange(e,t){return e=this.getDateTime(e),t=this.getDateTime(t),this.eventBase.getOccurrencesByRange(e,t)}getCurrentViewDates(){return this.activeView?this.activeView.renderDates:[]}setRecurrenceEditor(e){this.eventWindow.setRecurrenceEditor(e)}getEventMaxID(){return this.eventBase.getEventMaxID()}getDeletedOccurrences(e){return this.eventBase.getDeletedOccurrences(e)}getCurrentViewEvents(){return this.eventsProcessed}refreshEvents(){this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",HD([this.element],"e-event-action")),this.renderModule.refreshDataManager()}getEventDetails(e){let t=(e=nO(e)).getAttribute("data-guid");return t?this.eventBase.getEventByGuid(t):{}}isSlotAvailable(e,t,i){let n,s,r=this.activeEventData.event;if(e instanceof Date||"string"==typeof e?(n=e,s=t):(r=e,n=e[this.eventFields.startTime],s=e[this.eventFields.endTime],this.resourceBase&&(i=this.eventBase.getGroupIndexFromEvent(e))),XA(n)||XA(s))return!0;n=this.getDateTime(n),s=this.getDateTime(s);let o=this.eventBase.filterEvents(n,s);return!XA(i)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(o=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[i],o)),r&&(o=o.filter(r.Guid?e=>e.Guid!==r.Guid:e=>e[this.eventFields.id]!==r[this.eventFields.id])),!(o.length>0)}openEditor(e,t,i,n){"Add"!==t||i?(e[this.eventFields.startTime]=this.getDateTime(e[this.eventFields.startTime]),e[this.eventFields.endTime]=this.getDateTime(e[this.eventFields.endTime])):(e.startTime=this.getDateTime(e.startTime),e.endTime=this.getDateTime(e.endTime),XA(e.element)||(e.element=nO(e.element))),this.currentAction=t,"Add"!==t&&(this.activeEventData.event=e),this.eventWindow.openEditor(e,t,i,n)}closeEditor(){this.eventWindow&&this.eventWindow.dialogClose()}closeQuickInfoPopup(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)}addResource(e,t,i){this.resourceBase.addResource(e,t,i)}removeResource(e,t){this.resourceBase.removeResource(e,t)}destroy(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.unwireEvents(),this.destroyHeaderModule(),this.workCellAction.destroy(),this.inlineModule.destroy(),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.activeView&&(this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),super.destroy(),CB(this.element);let e=["e-schedule"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),HD([this.element],e)}};return Sj([mI("auto")],e.prototype,"width",void 0),Sj([mI("auto")],e.prototype,"height",void 0),Sj([mI(!0)],e.prototype,"showHeaderBar",void 0),Sj([mI(!0)],e.prototype,"showTimeIndicator",void 0),Sj([mI("Week")],e.prototype,"currentView",void 0),Sj([mI(["Day","Week","WorkWeek","Month","Agenda"])],e.prototype,"views",void 0),Sj([mI(new Date)],e.prototype,"selectedDate",void 0),Sj([mI(new Date(1900,0,1))],e.prototype,"minDate",void 0),Sj([mI(new Date(2099,11,31))],e.prototype,"maxDate",void 0),Sj([mI()],e.prototype,"dateFormat",void 0),Sj([mI("Gregorian")],e.prototype,"calendarMode",void 0),Sj([mI(!0)],e.prototype,"showWeekend",void 0),Sj([mI(0)],e.prototype,"firstDayOfWeek",void 0),Sj([mI([1,2,3,4,5])],e.prototype,"workDays",void 0),Sj([mI("00:00")],e.prototype,"startHour",void 0),Sj([mI("24:00")],e.prototype,"endHour",void 0),Sj([mI(!0)],e.prototype,"allowResizing",void 0),Sj([gI({},tj)],e.prototype,"workHours",void 0),Sj([gI({},nj)],e.prototype,"timeScale",void 0),Sj([mI(!0)],e.prototype,"allowKeyboardInteraction",void 0),Sj([mI(!0)],e.prototype,"allowDragAndDrop",void 0),Sj([mI()],e.prototype,"dateHeaderTemplate",void 0),Sj([mI()],e.prototype,"cellHeaderTemplate",void 0),Sj([mI()],e.prototype,"cellTemplate",void 0),Sj([mI(!1)],e.prototype,"readonly",void 0),Sj([mI(!0)],e.prototype,"showQuickInfo",void 0),Sj([mI(!1)],e.prototype,"allowInline",void 0),Sj([mI(!0)],e.prototype,"allowMultiCellSelection",void 0),Sj([mI(!0)],e.prototype,"allowMultiRowSelection",void 0),Sj([mI(!1)],e.prototype,"quickInfoOnSelectionEnd",void 0),Sj([mI(!1)],e.prototype,"showWeekNumber",void 0),Sj([mI(!1)],e.prototype,"rowAutoHeight",void 0),Sj([mI()],e.prototype,"editorTemplate",void 0),Sj([gI({},rj)],e.prototype,"quickInfoTemplates",void 0),Sj([mI(7)],e.prototype,"agendaDaysCount",void 0),Sj([mI(!0)],e.prototype,"hideEmptyAgendaDays",void 0),Sj([mI(!0)],e.prototype,"enableRecurrenceValidation",void 0),Sj([mI()],e.prototype,"timezone",void 0),Sj([gI({},mj)],e.prototype,"eventSettings",void 0),Sj([mI()],e.prototype,"resourceHeaderTemplate",void 0),Sj([gI({},vj)],e.prototype,"group",void 0),Sj([vI([],bj)],e.prototype,"resources",void 0),Sj([vI([],aj)],e.prototype,"headerRows",void 0),Sj([mI()],e.prototype,"cssClass",void 0),Sj([mI()],e.prototype,"eventDragArea",void 0),Sj([yI()],e.prototype,"created",void 0),Sj([yI()],e.prototype,"destroyed",void 0),Sj([yI()],e.prototype,"cellClick",void 0),Sj([yI()],e.prototype,"cellDoubleClick",void 0),Sj([yI()],e.prototype,"moreEventsClick",void 0),Sj([yI()],e.prototype,"hover",void 0),Sj([yI()],e.prototype,"select",void 0),Sj([yI()],e.prototype,"actionBegin",void 0),Sj([yI()],e.prototype,"actionComplete",void 0),Sj([yI()],e.prototype,"actionFailure",void 0),Sj([yI()],e.prototype,"navigating",void 0),Sj([yI()],e.prototype,"renderCell",void 0),Sj([yI()],e.prototype,"eventClick",void 0),Sj([yI()],e.prototype,"eventRendered",void 0),Sj([yI()],e.prototype,"dataBinding",void 0),Sj([yI()],e.prototype,"popupOpen",void 0),Sj([yI()],e.prototype,"popupClose",void 0),Sj([yI()],e.prototype,"dragStart",void 0),Sj([yI()],e.prototype,"drag",void 0),Sj([yI()],e.prototype,"dragStop",void 0),Sj([yI()],e.prototype,"resizeStart",void 0),Sj([yI()],e.prototype,"resizing",void 0),Sj([yI()],e.prototype,"resizeStop",void 0),Sj([yI()],e.prototype,"dataBound",void 0),e=Sj([bI],e),e})();var _j,Ej;(Ej=_j||(_j={})).getDayName=(e,t)=>e.getDayNames("abbreviated")[t.getDay()],Ej.getDate=(e,t)=>e.globalize.formatDate(t,{format:"d",calendar:e.getCalendarMode()}),Ej.getTime=(e,t)=>e.isAdaptive?e.globalize.formatDate(t,"HH:mm"===e.timeFormat||"HH.mm"===e.timeFormat?{format:"H",calendar:e.getCalendarMode()}:{skeleton:"h",calendar:e.getCalendarMode()}):e.getTimeString(t),Ej.getTimelineDate=(e,t)=>TB(e.globalize.formatDate(t,{skeleton:"MMMd",calendar:e.getCalendarMode()})+", "+e.getDayNames("wide")[t.getDay()],"multiple");class Tj{constructor(e){this.parent=e}isTimelineView(){return-1!==this.parent.currentView.indexOf("Timeline")}getContentRows(){return[]}serverRenderLayout(){}createEventTable(e){let t=FD("div",{className:"e-event-table"});return zD(this.getEventRows(e),t),t}getEventRows(e){let t,i=[];for(let n=0;n<e;n++)t=FD("div",{className:"e-appointment-container"}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&t.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[n].groupIndex.toString()),i.push(t);return i}collapseRows(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(e.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(e.querySelector(".e-event-table")))}createTableLayout(e){let t=FD("table",{className:"e-schedule-table "+(e||"")}),i=FD("tbody");return t.appendChild(i),t}createColGroup(e,t){let i=t.length;t[0]&&t[0].colSpan&&(i=t.map(e=>e.colSpan).reduce((e,t)=>e+t));let n=FD("colgroup");for(let s=0;s<i;s++)n.appendChild(FD("col"));WD([n],e)}getScrollXIndent(e){return e.offsetHeight-e.clientHeight>0?bB():0}scrollTopPanel(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft}scrollHeaderLabels(e){let t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=(t,n)=>{let s,r=0,o=0,a=n?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft;for(let e of t){if(o+=parseInt(e.getAttribute("colSpan"),10),o>Math.floor(a/i)){s=e;break}r+=e.offsetWidth}s.children[0].style[n?"right":"left"]=a-r+"px"},s=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];for(let r of s){let e=[].slice.call(this.element.querySelectorAll(r));if(e.length>0){for(let t of e)t.children[0].style[this.parent.enableRtl?"right":"left"]="";n(e,this.parent.enableRtl)}}}addAttributes(e,t){e.template&&zD(e.template,t),e.colSpan&&t.setAttribute("colspan",e.colSpan.toString()),e.className&&jD([t],e.className)}getHeaderBarHeight(){let e=2;if(this.parent.headerModule&&(e+=SB(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){let t=this.parent.element.querySelector(".e-schedule-resource-toolbar");t&&(e+=t.offsetHeight)}return e}renderPanel(e){"e-previous-panel"===e?WD([this.element],this.parent.element.querySelector(".e-table-container")):this.parent.element.querySelector(".e-table-container").appendChild(this.element)}setPanel(e){this.element=e}getPanel(){return this.element}getDatesHeaderElement(){return this.element.querySelector(".e-date-header-container")}getDateSlots(e,t){return[]}generateColumnLevels(){return[]}getColumnLevels(){return this.colLevels}highlightCurrentTime(){}startDate(){return this.renderDates[0]}endDate(){return pB(this.renderDates[this.renderDates.length-1],1)}getStartHour(){let e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return XA(e)&&(e=new Date(2e3,0,0,0)),e}getEndHour(){let e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return XA(e)&&(e=new Date(2e3,0,0,0)),e}isCurrentDate(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)}isCurrentMonth(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()}isWorkDay(e,t=this.parent.activeViewOptions.workDays){return t.indexOf(e.getDay())>=0}isWorkHour(e,t,i,n){return!(XA(t)||XA(i)||(t.setMilliseconds(0),i.setMilliseconds(0),uB(e)<uB(t)||uB(e)>=uB(i)||!this.isWorkDay(e,n)))}getRenderDates(e){let t=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView){let i=oB(dB(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek);for(let n=0,s=7*this.parent.activeViewOptions.interval;n<s;n++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=pB(i,1)}else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView){let i=oB(dB(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek);for(let n=0,s=7*this.parent.activeViewOptions.interval;n<s;n++)this.isWorkDay(i,e)&&t.push(i),i=pB(i,1)}else{let i=dB(this.parent.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=pB(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t}getNextPreviousDate(e){if("Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){if(this.parent.activeViewOptions.showWeekend){let t=this.parent.activeViewOptions.interval;return pB(this.parent.selectedDate,"next"===e?t:-t)}{let t;if("next"===e)for(t=pB(this.renderDates.slice(-1)[0],1);!this.isWorkDay(t);)t=pB(t,1);else{t=pB(this.renderDates[0],-1);let e=0;do{this.isWorkDay(t)&&(e+=1),this.parent.activeViewOptions.interval!==e&&(t=pB(t,-1))}while(this.parent.activeViewOptions.interval!==e)}return t}}return pB(this.parent.selectedDate,("next"===e?7:-7)*this.parent.activeViewOptions.interval)}getLabelText(e){let t=e.charAt(0).toLowerCase()+e.substring(1);return this.parent.localeObj.getConstant(t)+" of "+TB(this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long",calendar:this.parent.getCalendarMode()}),"single")}getDateRangeText(){return this.parent.isAdaptive?TB(this.parent.globalize.formatDate(this.parent.selectedDate,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single"):this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])}formatDateRange(e,t){let i,n,s=this.parent.globalize,r=this.parent.getCalendarMode();if(e===t&&(t=null),!XA(this.parent.activeViewOptions.dateFormat)){let i="";return t?(i=s.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r})+" - "+s.formatDate(t,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),TB(i,"multiple")):(i=s.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),TB(i,"multiple"))}if(n="en"===this.parent.locale||"en-US"===this.parent.locale?WA("dateFormats.long",IO(r)):WA("main."+this.parent.locale+".dates.calendars."+r+".dateFormats.long",xO),!t)return TB(s.formatDate(e,{format:n,calendar:r}),"single");let o=n.trim().toLocaleLowerCase();return i="d"===o.substr(0,1)?e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?s.formatDate(e,{format:"dd",calendar:r})+" - "+s.formatDate(t,{format:"dd MMMM yyyy",calendar:r}):s.formatDate(e,{format:"dd MMM",calendar:r})+" - "+s.formatDate(t,{format:"dd MMM yyyy",calendar:r}):s.formatDate(e,{format:"dd MMM yyyy",calendar:r})+" - "+s.formatDate(t,{format:"dd MMM yyyy",calendar:r}):"m"===o.substr(0,1)?e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?s.formatDate(e,{format:"MMMM dd",calendar:r})+" - "+s.formatDate(t,{format:"dd, yyyy",calendar:r}):s.formatDate(e,{format:"MMM dd",calendar:r})+" - "+s.formatDate(t,{format:"MMM dd, yyyy",calendar:r}):s.formatDate(e,{format:"MMM dd, yyyy",calendar:r})+" - "+s.formatDate(t,{format:"MMM dd, yyyy",calendar:r}):s.formatDate(e,{format:n,calendar:r})+" - "+s.formatDate(t,{format:n,calendar:r}),TB(i,"multiple")}getMobileDateElement(e,t){return FD("div",{className:t,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(e,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+TB(this.parent.globalize.formatDate(e,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"})}setResourceHeaderContent(e,t,i=kB){if(this.parent.activeViewOptions.resourceHeaderTemplate){let i={resource:t.resource,resourceData:t.resourceData},n=this.parent.element.id+"_"+this.parent.activeViewOptions.resourceHeaderTemplateName+"resourceHeaderTemplate";zD([].slice.call(this.parent.getResourceHeaderTemplate()(i,this.parent,"resourceHeaderTemplate",n,!1)),e)}else e.appendChild(FD("div",{className:i,innerHTML:t.resourceData[t.resource.textField]}))}renderResourceMobileLayout(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())}addAutoHeightClass(e){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&jD([e],"e-auto-height")}getColElements(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))}setColWidth(e){if(this.isTimelineView()){let t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody");const n=Math.ceil(i.offsetWidth/(t.length/2));if(t.forEach(e=>ZD(e,{width:tO(n)})),e.offsetHeight!==e.clientHeight){let t=this.parent.element.querySelector(".e-resource-column-wrap");XA(t)||ZD(t,{height:tO(e.clientHeight)})}}}resetColWidth(){let e=this.getColElements();for(let t of e)t.style.width=""}getContentAreaElement(){return this.element.querySelector(".e-content-wrap")}wireExpandCollapseIconEvents(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1){let e=[].slice.call(this.element.querySelectorAll(".e-resource-tree-icon"));for(let t of e)GO.clearEvents(t),GO.add(t,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}}scrollToDate(e){if(-1===["Month","TimelineMonth"].indexOf(this.parent.currentView)||XA(e))return;let t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(dB(new Date(+e)).getTime())),n=t.querySelector(`.e-work-cells[data-date="${i}"]`);"Month"===this.parent.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.currentView&&n&&(t.scrollLeft=n.offsetLeft)}}class xj extends Tj{constructor(e){super(e),this.viewClass="e-day-view",this.isInverseTableSelect=!0,this.baseCssClass="e-vertical-view"}addEventListener(){this.parent.on(sB,this.scrollUiUpdate,this),this.parent.on(nB,this.renderEvents,this)}removeEventListener(){this.parent.off(sB,this.scrollUiUpdate),this.parent.off(nB,this.renderEvents)}renderEvents(){this.parent.activeViewOptions.timeScale.enable?new AF(this.parent).renderAppointments():new OF(this.parent).renderAppointments(),this.parent.notify("events-loaded",{})}onContentScroll(e){this.parent.removeNewEventElement();let t=e.target;this.parent.notify("virtual-scroll",e),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,XA(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide()}onApaptiveMove(e){this.parent.uiStateValues.action&&e.preventDefault()}onApaptiveScroll(e){this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop}scrollLeftPanel(e){let t=this.getLeftPanelElement();XA(t)||(t.scrollTop=e.scrollTop)}scrollUiUpdate(e){let t=this.getHeaderBarHeight(),i=this.getLeftPanelElement(),n=this.getScrollableElement(),s=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-t-s.offsetHeight;this.setColWidth(n),this.setContentHeight(n,i,r);let o=bB();s.firstElementChild.style[e.cssProperties.rtlBorder]="",s.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(s.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",s.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(s.firstElementChild.style[e.cssProperties.border]="",s.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(i&&(i.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime()}setContentHeight(e,t,i){!this.parent.isAdaptive||this.isTimelineView()||this.parent.isServerRenderer()?(XA(t)||(t.style.height="auto"===this.parent.height?"auto":tO(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.height?"auto":tO(i)):e.style.height="auto"===this.parent.height?"auto":tO(i)}scrollToWorkHour(){if(this.parent.workHours.highlight){let e=this.element.querySelector(".e-work-hours");e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}}scrollToHour(e,t){let i=this.parent.getStartEndTime(e);!XA(i)&&XA(t)&&(this.getScrollableElement().scrollTop=this.getTopFromDateTime(i))}generateColumnLevels(){let e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){let e=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];t=[this.getDateSlots(e.renderDates,e.workDays,e.resourceData[e.resource.startHourField],e.resourceData[e.resource.endHourField])]}}else t.push(e);return this.colLevels=t,t}getDateSlots(e,t,i=this.parent.workHours.start,n=this.parent.workHours.end){let s=[],r=this.parent.getStartEndTime(i),o=this.parent.getStartEndTime(n);for(let a of e){let e=["e-header-cells"];this.isCurrentDate(a)&&e.push("e-current-day"),s.push({date:a,type:"dateHeader",className:e,colSpan:1,workDays:t,startHour:new Date(+r),endHour:new Date(+o)})}return s}isWorkHourRange(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()}highlightCurrentTime(){if(!(this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option)){if(this.parent.isServerRenderer()){let e=[].slice.call(this.element.querySelectorAll(".e-current-day"));e.length>0&&HD(e,"e-current-day");let t='.e-date-header[data-date="'+new Date((new Date).setHours(0,0,0,0)).getTime().toString()+'"]';e=[].slice.call(this.element.querySelectorAll(t));for(let i of e)jD([i],"e-current-day")}this.parent.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())&&this.getCurrentTimeIndicatorIndex().length>0?([].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),XA(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval(()=>{this.changeCurrentTimePosition()},6e4))):this.clearCurrentTimeIndicatorTimer()}}getCurrentTimeIndicatorIndex(){let e=[];if(!XA(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){let t=0;for(let i of this.parent.resourceBase.lastResourceLevel){let n=this.parent.getIndexOfDate(i.renderDates,dB(this.parent.getCurrentTime()));n>=0&&e.push(this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*n+t:t+n),t+=this.parent.activeViewOptions.group.byDate?1:i.renderDates.length}}else{let t=this.parent.getIndexOfDate(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates,dB(this.parent.getCurrentTime()));t>=0&&e.push(t)}return e}clearCurrentTimeIndicatorTimer(){XA(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())}removeCurrentTimeIndicatorElements(){let e=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));for(let t of e)$D(t)}changeCurrentTimePosition(){if(this.parent.isDestroyed)return;this.removeCurrentTimeIndicatorElements();let e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),n=tO(i),s=Math.floor(i/t.cells[0].offsetHeight);if(XA(s)||isNaN(s))return;let r=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper"));for(let c=0,h=e[0];c<h;c++)r[c].appendChild(FD("div",{className:"e-previous-timeline",styles:"top:"+n}));for(let c of e)r[c].appendChild(FD("div",{className:"e-current-timeline",styles:"top:"+n}));let o=FD("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+n}),a=this.getLeftPanelElement(),l=[].slice.call(a.querySelectorAll("tr"));s<=l.length&&(HD(a.querySelectorAll(".e-hide-childs"),"e-hide-childs"),jD([l[s].lastElementChild],"e-hide-childs"),WD([o],a),o.style.top=tO(o.offsetTop-o.offsetHeight/2))}getTopFromDateTime(e){let t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval}getWorkCellHeight(){return this.element.querySelector(".e-work-cells").offsetHeight}getTdContent(e,t,i){let n,s=FD("div"),r="",o=this.parent.element.id+"_",a=e;switch(t){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){r="dateHeaderTemplate";let e={date:a,type:t},i=this.parent.activeViewOptions.dateHeaderTemplateName;n=[].slice.call(this.parent.getDateHeaderTemplate()(e,this.parent,r,o+i+r,!1))}else s.innerHTML=this.parent.activeView.isTimelineView()?`<span class="e-header-date e-navigate">${_j.getTimelineDate(this.parent,e)}</span>`:`<div class="e-header-day">${TB(_j.getDayName(this.parent,e),"single")}</div><div class="e-header-date e-navigate" role="link">${_j.getDate(this.parent,e)}</div>`,n=[].slice.call(s.childNodes);break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){r="majorSlotTemplate";let e={date:a,type:t};n=[].slice.call(this.parent.getMajorSlotTemplate()(e,this.parent,r,o+r,!1))}else s.innerHTML=`<span>${_j.getTime(this.parent,e)}</span>`,n=[].slice.call(s.childNodes);break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){r="minorSlotTemplate";let e={date:a,type:t};n=[].slice.call(this.parent.getMinorSlotTemplate()(e,this.parent,r,o+r,!1))}else s.innerHTML="&nbsp;",n=[].slice.call(s.childNodes);break;case"alldayCells":if(this.parent.activeViewOptions.cellTemplate){let e=this.parent.activeViewOptions.cellTemplateName;r="cellTemplate";let s={date:a,type:t,groupIndex:i};n=[].slice.call(this.parent.getCellTemplate()(s,this.parent,r,o+e+r,!1))}}return n}serverRenderLayout(){this.setPanel(this.parent.element.querySelector(".e-table-wrap")),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+xB)&&this.renderResourceMobileLayout();let e=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));for(let s of e)GO.clearEvents(s),this.wireMouseEvents(s);let t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));for(let s of t)GO.clearEvents(s),this.wireCellEvents(s);this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();let i=this.element.querySelector(".e-content-wrap"),n=this.element.querySelector(".e-content-table tbody");GO.clearEvents(n),this.wireCellEvents(n),GO.clearEvents(i),GO.add(i,"scroll",this.onContentScroll,this),GO.add(i,zO.touchMoveEvent,this.onApaptiveMove,this),this.wireExpandCollapseIconEvents(),this.parent.notify("content-ready",{})}renderLayout(e){if(this.parent.isServerRenderer())return this.colLevels=this.generateColumnLevels(),void(this.parent.resourceBase&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.activeView.isTimelineView()&&this.parent.resourceBase.setRenderedResources());this.setPanel(FD("div",{className:"e-table-wrap"}));let t=[this.baseCssClass,this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||jD([this.element],["e-timescale-disable",this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&t.push("e-virtual-scroll"),this.parent.eventSettings.ignoreWhitespace&&t.push("e-ignore-whitespace"),this.renderPanel(e),jD([this.element],t),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+xB)&&this.renderResourceMobileLayout(),this.parent.notify("content-ready",{}),this.parent.updateLayoutTemplates()}renderHeader(){let e=FD("tr"),t=FD("td");if(t.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){let t=FD("td",{className:"e-left-indent"});t.appendChild(this.renderLeftIndent()),e.appendChild(t)}e.appendChild(t),WD([e],this.element.querySelector("tbody"))}renderContent(){let e=FD("tr"),t=FD("td");if(this.parent.isAdaptive){t.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");let i=FD("div",{className:"e-scroll-container"});this.parent.activeViewOptions.timeScale.enable&&i.appendChild(this.renderTimeCells()),i.appendChild(this.renderContentArea()),t.appendChild(i),GO.add(i,"scroll",this.onApaptiveScroll,this),GO.add(i,zO.touchMoveEvent,this.onApaptiveMove,this),e.appendChild(t)}else{if(t.appendChild(this.renderContentArea()),this.parent.activeViewOptions.timeScale.enable){let t=FD("td");t.appendChild(this.renderTimeCells()),e.appendChild(t)}e.appendChild(t)}this.element.querySelector("tbody").appendChild(e)}renderLeftIndent(){let e=FD("div",{className:"e-left-indent-wrap"}),t=this.createTableLayout(),i=FD("tr"),n=this.colLevels.length;for(let a=0;a<n;a++){let e=i.cloneNode(),n={className:[this.colLevels[a][0]&&this.colLevels[a][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==n.className.indexOf("e-header-cells")){n.className.push("e-week-number");let e=aB(this.renderDates.slice(-1)[0],this.parent.firstDayOfWeek),t=cB("Day"===this.parent.currentView?e:this.renderDates.slice(-1)[0]);n.template=[FD("span",{innerHTML:""+t,attrs:{title:this.parent.localeObj.getConstant("week")+" "+t}})]}e.appendChild(this.createTd(n)),t.querySelector("tbody").appendChild(e)}let s=i.cloneNode(),r=FD("div",{attrs:{tabindex:"0",role:"list",title:"Expand-all-day-section","aria-disabled":"false","aria-label":"Expand section"},className:"e-all-day-appointment-section e-appointment-expand e-icons e-disable"}),o=this.createTd({className:["e-all-day-cells"],type:"emptyCells"});return o.appendChild(r),s.appendChild(o),t.querySelector("tbody").appendChild(s),e.appendChild(t),e}renderDatesHeader(){let e=FD("div",{className:"e-date-header-container"}),t=FD("div",{className:"e-date-header-wrap"});e.appendChild(t);let i=this.createTableLayout(),n=FD("tr"),s=this.colLevels.length,r=this.colLevels[s-1];this.createColGroup(i,r);for(let o=0;o<s;o++){let e=n.cloneNode();jD([e],"e-header-row");let t=this.colLevels[o];for(let i=0;i<t.length;i++)e.appendChild(this.createTd(t[i]));i.querySelector("tbody").appendChild(e)}return this.createAllDayRow(i,r),t.appendChild(i),e}createAllDayRow(e,t){let i=FD("tr");jD([i],"e-all-day-row");for(let s=0;s<t.length;s++){let e=KA({},t[s]);e.className=["e-all-day-cells"],e.type="alldayCells";let n=this.createTd(e);n.setAttribute("data-date",e.date.getTime().toString()),XA(e.groupIndex)||n.setAttribute("data-group-index",""+e.groupIndex),this.wireCellEvents(n),i.appendChild(n)}e.querySelector("tbody").appendChild(i);let n=FD("thead");n.appendChild(this.createEventWrapper("allDay")),WD([n],e)}createTd(e){let t=FD("td");if(this.addAttributes(e,t),e.date&&e.type){let i=this.getTdContent(e.date,e.type,e.groupIndex);i&&i.length&&zD(i,t)}return this.parent.isMinMaxDate(dB(new Date(""+e.date)))||jD([t],"e-disable-dates"),"resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type&&e.className.indexOf("e-header-cells")>=0&&(t.setAttribute("data-date",e.date.getTime().toString()),XA(e.groupIndex)||t.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(t)),this.parent.trigger("renderCell",{elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex}),t}wireCellEvents(e){GO.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)}wireMouseEvents(e){GO.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||GO.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)}renderTimeCells(){let e=FD("div",{className:"e-time-cells-wrap"}),t=this.createTableLayout(),i=FD("tr");return this.getTimeSlotRows(e=>{e.type=e.first?"majorSlot":"minorSlot",e.className=e.last?["e-time-cells","e-time-slots"]:["e-time-slots"];let n=i.cloneNode();return n.appendChild(this.createTd({date:e.date,type:e.type,className:e.className})),t.querySelector("tbody").appendChild(n),e}),e.appendChild(t),e}renderContentArea(){let e=FD("div",{className:"e-content-wrap"}),t=this.createTableLayout("e-content-table");return this.addAutoHeightClass(t),this.createColGroup(t,this.colLevels.slice(-1)[0]),this.renderContentTable(t),e.appendChild(t),this.wireCellEvents(t.querySelector("tbody")),GO.add(e,"scroll",this.onContentScroll,this),GO.add(e,zO.touchMoveEvent,this.onApaptiveMove,this),e}renderContentTable(e){let t=FD("tr",{attrs:{role:"row"}}),i=FD("td",{attrs:{role:"gridcell","aria-selected":"false"}}),n=e.querySelector("tbody");this.getTimeSlotRows(e=>{let s=t.cloneNode();for(let t of this.colLevels[this.colLevels.length-1]){let n=this.createContentTd(t,e,i);s.appendChild(n)}return n.appendChild(s),e}),this.renderContentTableHeader(e)}createContentTd(e,t,i){let n=i.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString());let s=this.getContentTdClass(t);this.parent.isMinMaxDate(dB(new Date(""+e.date)))||s.push("e-disable-dates");let r=dB(new Date(""+e.date));hB(r,uB(t.date));let o="workCells";if(-1!==e.className.indexOf("e-parent-node")&&(s.push("e-resource-group-cells"),o="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(r,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(r,e.workDays))&&s.push("e-work-hours"),jD([n],s),this.parent.activeViewOptions.cellTemplate){let t={date:r,type:o,groupIndex:e.groupIndex},i=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate";zD([].slice.call(this.parent.getCellTemplate()(t,this.parent,"cellTemplate",i,!1)),n)}return n.setAttribute("data-date",r.getTime().toString()),(!XA(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&n.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex)),this.parent.trigger("renderCell",{elementType:o,element:n,date:r,groupIndex:e.groupIndex}),n}getContentTdClass(e){return e.last?["e-work-cells"]:["e-work-cells","e-alternate-cells"]}renderContentTableHeader(e){let t=FD("thead");t.appendChild(this.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&t.appendChild(this.createEventWrapper("timeIndicator")),WD([t],e)}createEventWrapper(e=""){let t=FD("tr"),i=this.colLevels.slice(-1)[0];for(let n=0,s=i.length;n<s;n++){let s=i[n],r=FD("td",{className:"allDay"===e?"e-all-day-appointment-wrapper":"timeIndicator"===e?"e-timeline-wrapper":"e-day-wrapper",attrs:{"data-date":s.date.getTime().toString()}});if(XA(s.groupIndex)||r.setAttribute("data-group-index",s.groupIndex.toString()),""===e){let e=FD("div",{id:"e-appointment-wrapper-"+n.toString(),className:"e-appointment-wrapper"});r.appendChild(e)}t.appendChild(r)}return t}getScrollableElement(){return!this.parent.isAdaptive||this.isTimelineView()||this.parent.isServerRenderer()?this.getContentAreaElement():this.element.querySelector(".e-scroll-container")}getLeftPanelElement(){return this.element.querySelector(".e-time-cells-wrap")}getEndDateFromStartDate(e){let t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i}getTimeSlotRows(e){let t=[],i=this.getStartHour(),n=this.getEndHour(),s=6e4*this.parent.activeViewOptions.timeScale.interval,r=s/this.parent.activeViewOptions.timeScale.slotCount,o=Math.round(864e5/r),a=i.getTime(),l=n.getTime();a!==l&&(o=Math.abs(l-a)/r-(new Date(l).getTimezoneOffset()-new Date(a).getTimezoneOffset())/(60/this.parent.activeViewOptions.timeScale.slotCount)),this.parent.activeViewOptions.timeScale.enable||(o=1);let c=this.parent.getStartEndTime(this.parent.workHours.start),h=this.parent.getStartEndTime(this.parent.workHours.end);for(let d=0;d<o;d++){let i=new Date(a+r*d);if(_B(i)||new Date(a).getTimezoneOffset()!==i.getTimezoneOffset()){let e=new Date(a).getTimezoneOffset()-i.getTimezoneOffset();i=new Date(i.getTime()-6e4*e)}let n=d%(s/r),o={date:new Date(""+i),startHour:c,endHour:h,first:0===n,middle:n<this.parent.activeViewOptions.timeScale.slotCount-1,last:n===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(o),t.push(o)}return t}getModuleName(){return"verticalView"}destroy(){if(!this.parent.isDestroyed&&(this.clearCurrentTimeIndicatorTimer(),this.element)){let e=this.getContentAreaElement();e&&GO.remove(e,"scroll",this.onContentScroll),this.parent.resourceBase&&this.parent.resourceBase.destroy(),$D(this.element),this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues()}}}class kj extends Tj{constructor(e){super(e),this.dayNameFormat="wide",this.viewClass="e-month-view",this.isInverseTableSelect=!1,this.monthDates={}}addEventListener(){this.parent.on(sB,this.onScrollUIUpdate,this),this.parent.on(nB,this.onDataReady,this),this.parent.on("cellClick",this.onCellClick,this)}removeEventListener(){this.parent.off(sB,this.onScrollUIUpdate),this.parent.off(nB,this.onDataReady),this.parent.off("cellClick",this.onCellClick)}onDataReady(e){new OF(this.parent).renderAppointments(),this.parent.notify("events-loaded",{})}onCellClick(e){}onContentScroll(e){this.parent.removeNewEventElement(),this.parent.notify("virtual-scroll",e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target)}scrollLeftPanel(e){let t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)}getLeftPanelElement(){return this.element.querySelector(".e-week-number-wrapper")}onScrollUIUpdate(e){let t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),s=this.parent.element.offsetHeight-t-i.offsetHeight,r=this.getLeftPanelElement();this.setContentHeight(n,r,s);let o=bB();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",i.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition)r&&(r.scrollTop=e.scrollPosition.top),n.scrollTop=e.scrollPosition.top,n.scrollLeft=e.scrollPosition.left;else{let e=document.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.selectedDate)+'"]');n.scrollLeft=null!==e?e.offsetLeft:0}}setContentHeight(e,t,i){e.style.height="auto","Month"===this.parent.currentView&&(e.style.height=tO(i)),t&&("MonthAgenda"===this.parent.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=tO(i-this.getScrollXIndent(e)))}generateColumnLevels(){let e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),"MonthAgenda"===this.parent.currentView&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){let t=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots(t.renderDates,t.workDays)]}}else e.push(t);return this.colLevels=e,e}getDateSlots(e,t){let i=this.parent.activeViewOptions.showWeekend?7:t.length,n=[];for(let s=0;s<i;s++){let r=["e-header-cells"],o=e.slice(0,i).map(e=>e.getDay());this.isCurrentMonth(this.parent.selectedDate)&&o.indexOf(this.parent.getCurrentTime().getDay())===s&&r.push("e-current-day"),n.push({date:e[s],type:"monthDay",className:r,colSpan:1,workDays:t})}return n}getDayNameFormat(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"}serverRenderLayout(){let e=[].slice.call(this.parent.element.querySelectorAll(".e-current-day"));e.length>0&&HD(e,"e-current-day");let t=new Date((new Date).setHours(0,0,0,0)),i='.e-work-cells[data-date="'+t.getTime().toString()+'"]';if("Month"===this.parent.currentView||"MonthAgenda"===this.parent.currentView){e=[].slice.call(this.parent.element.querySelectorAll(".e-current-date")),e.length>0&&HD(e,"e-current-date");let t=[].slice.call(this.parent.element.querySelectorAll(i));for(let e of t){let t=e.cellIndex,i=[].slice.call(this.parent.element.querySelectorAll(".e-header-cells"))[t];jD([e],"e-current-date"),jD([i],"e-current-day")}}if("TimelineMonth"===this.parent.currentView){let e=this.parent.element.querySelector('.e-header-cells[data-date="'+t.getTime().toString()+'"]');XA(e)||jD([e],"e-current-day")}this.setPanel(this.parent.element.querySelector(".e-table-wrap"));let n="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element,s=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));for(let a of s)GO.clearEvents(a),this.wireCellEvents(a);let r=this.element.querySelector(".e-content-table tbody");GO.clearEvents(r),this.wireCellEvents(r),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();let o=this.element.querySelector(".e-content-wrap");GO.clearEvents(o),GO.add(o,"scroll",this.onContentScroll,this),this.wireExpandCollapseIconEvents(),this.renderAppointmentContainer(),this.parent.uiStateValues.isGroupAdaptive&&!n.querySelector("."+xB)&&this.renderResourceMobileLayout(),this.parent.notify("content-ready",{})}renderLayout(e){if(this.dayNameFormat=this.getDayNameFormat(),this.parent.isServerRenderer())return this.colLevels=this.generateColumnLevels(),void(this.parent.activeView.isTimelineView()&&this.parent.resourceBase&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.setRenderedResources());this.setPanel(FD("div",{className:"e-table-wrap"}));let t=[this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.allowVirtualScrolling&&t.push("e-virtual-scroll"),this.parent.eventSettings.ignoreWhitespace&&t.push("e-ignore-whitespace"),jD([this.element],t),this.renderPanel(e),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();let i="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!i.querySelector("."+xB)&&this.renderResourceMobileLayout(),this.parent.notify("content-ready",{}),this.parent.updateLayoutTemplates()}wireCellEvents(e){GO.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),GO.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||GO.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)}renderHeader(){let e=FD("tr");this.renderLeftIndent(e);let t=FD("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),WD([e],this.element.querySelector("tbody"))}renderLeftIndent(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(FD("td",{className:"e-left-indent"}))}renderContent(){let e=FD("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());let t=FD("td"),i=FD("div",{className:"e-content-wrap"}),n=this.renderContentArea();if("Month"===this.parent.currentView)i.appendChild(n);else{let e=FD("div",{className:"e-table-container"});e.appendChild(n),i.appendChild(e)}GO.add(i,"scroll",this.onContentScroll,this),t.appendChild(i),e.appendChild(t),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()}renderWeekNumberContent(){let e=this.renderDates.map(e=>new Date(+e)),t=FD("td"),i=FD("div",{className:"e-week-number-wrapper"});t.appendChild(i);let n=this.createTableLayout();i.appendChild(n);let s=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length;for(let r=0,o=this.renderDates.length/s;r<o;r++){let t=cB(e.splice(0,s).slice(-1)[0]).toString();n.querySelector("tbody").appendChild(this.createWeekNumberElement(t))}return t}renderAppointmentContainer(){}renderDatesHeader(){let e=FD("div",{className:"e-date-header-container"}),t=FD("div",{className:"e-date-header-wrap"});e.appendChild(t);let i=this.createTableLayout();this.createColGroup(i,this.colLevels[this.colLevels.length-1]);let n=FD("tr");for(let s=0;s<this.colLevels.length;s++){let e=this.colLevels[s],t=n.cloneNode();for(let i=0;i<e.length;i++)t.appendChild(this.createHeaderCell(e[i]));i.querySelector("tbody").appendChild(t)}return t.appendChild(i),e}createHeaderCell(e){let t=FD("td");if(this.addAttributes(e,t),"monthDay"===e.type){let i=FD("span",{innerHTML:TB(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});t.appendChild(i)}if("resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type){if(jD([t],"e-date-header"),t.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){let i={date:e.date,type:e.type},n=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",s=[].slice.call(this.parent.getDateHeaderTemplate()(i,this.parent,"dateHeaderTemplate",n,!1));s&&s.length&&zD(s,t)}else{let i=FD("span",{className:"e-navigate"}),n=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});i.setAttribute("title",TB(n,"multiple"));let s=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});i.innerHTML=TB(s,"single"),t.appendChild(i)}this.wireCellEvents(t)}return this.parent.trigger("renderCell",{elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex}),t}getContentSlots(){if(!this.colLevels[this.colLevels.length-1]||!this.colLevels[this.colLevels.length-1][0])return[];let e=[],t=(t,i,n,s)=>{let r={date:new Date(+i),groupIndex:n.groupIndex,workDays:n.workDays,type:"monthCells",className:s||["e-work-cells"]};e[t]||(e[t]=[]),e[t].push(r)},i="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!i||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate){let e=this.renderDates.map(e=>new Date(+e)),n=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length;for(let s=0;s<this.renderDates.length/n;s++){let r=e.splice(0,n);for(let e of r)if(i){let i=this.colLevels[this.colLevels.length-1],r=i.slice(0,i.length/n);for(let n=0;n<r.length;n++){let i;0!==n&&(i=["e-work-cells","e-disable-date"]),t(s,e,r[n],i)}}else t(s,e,this.colLevels[this.colLevels.length-1][0])}}else for(let n of this.colLevels[this.colLevels.length-2]){let e=n.renderDates.map(e=>new Date(+e)),i=this.parent.activeViewOptions.showWeekend?7:n.workDays.length;for(let s=0;s<n.renderDates.length/i;s++){let r=e.splice(0,i);for(let e of r)t(s,e,n)}}return e}updateClassList(e){this.isOtherMonth(e.date)&&e.className.push("e-other-month"),this.parent.isMinMaxDate(e.date)||e.className.push("e-disable-dates"),"MonthAgenda"===this.parent.currentView&&this.parent.isSelectedDate(e.date)&&e.className.push("e-selected-cell")}isOtherMonth(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()}renderContentArea(){let e=this.createTableLayout("e-content-table");this.addAutoHeightClass(e),"TimelineMonth"===this.parent.currentView&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);let t=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(t),end:this.parent.calendarUtil.lastDateOfMonth(fB(t,this.parent.activeViewOptions.interval-1))};let i=e.querySelector("tbody");return zD(this.getContentRows(),i),this.wireCellEvents(i),e}getContentRows(){let e=[],t=FD("tr",{attrs:{role:"row"}}),i=FD("td",{attrs:{role:"gridcell","aria-selected":"false"}}),n=this.getContentSlots();for(let s=0;s<n.length;s++){let r=t.cloneNode();for(let e=0;e<n[s].length;e++){let t=this.createContentTd(n[s][e],i);r.appendChild(t)}e.push(r)}return e}createContentTd(e,t){let i=t.cloneNode();e.colSpan&&i.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);let n=e.type;if(-1!==e.className.indexOf("e-parent-node")&&(e.className.push("e-resource-group-cells"),n="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push("e-work-days"),this.isCurrentDate(e.date)&&e.className.push("e-current-date"),jD([i],e.className),i.setAttribute("data-date",e.date.getTime().toString()),(!XA(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&i.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex)),this.renderDateHeaderElement(e,i),this.parent.activeViewOptions.cellTemplate){let t={date:e.date,type:n,groupIndex:e.groupIndex},s=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate";zD([].slice.call(this.parent.getCellTemplate()(t,this.parent,"cellTemplate",s,!1)),i)}return this.parent.trigger("renderCell",{elementType:n,element:i,date:e.date,groupIndex:e.groupIndex}),i}renderDateHeaderElement(e,t){if("TimelineMonth"===this.parent.currentView)return;let i=FD("div",{className:"e-date-header"});if(this.parent.activeViewOptions.cellHeaderTemplate){let t={date:e.date,type:e.type,groupIndex:e.groupIndex},n=this.parent.element.id+"_"+this.parent.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate";zD([].slice.call(this.parent.getCellHeaderTemplate()(t,this.parent,"cellHeaderTemplate",n,!1)),i)}else{let t=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});i.innerHTML=TB(t,"single")}if(t.appendChild(i),"month"===this.getModuleName()){jD([i],"e-navigate");let t=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});i.setAttribute("aria-label",t)}}getMonthStart(e){let t=oB(this.parent.calendarUtil.firstDateOfMonth(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())}getMonthEnd(e){let t=fB(e,this.parent.activeViewOptions.interval-1);return pB(oB(this.parent.calendarUtil.lastDateOfMonth(t),this.parent.activeViewOptions.firstDayOfWeek),6)}getRenderDates(e){let t=[],i=dB(this.parent.selectedDate),n=this.getMonthStart(i),s=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=pB(n,1)}while(n.getTime()<=s.getTime());return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t}getNextPreviousDate(e){return fB(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval)}getEndDateFromStartDate(e){return pB(new Date(e.getTime()),1)}getDateRangeText(){if(this.parent.isAdaptive||XA(this.parent.activeViewOptions.dateFormat)){if(this.parent.activeViewOptions.interval>1){let e=fB(lB(this.parent.selectedDate),this.parent.activeViewOptions.interval-1);return this.parent.selectedDate.getFullYear()===e.getFullYear()?TB(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(e,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+e.getFullYear(),"single"):TB(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+this.parent.selectedDate.getFullYear()+" - "+this.parent.globalize.formatDate(e,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+e.getFullYear(),"single")}return TB(this.parent.globalize.formatDate(this.parent.selectedDate,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.parent.selectedDate)}getLabelText(e){return this.parent.localeObj.getConstant(e)+" of "+TB(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}createWeekNumberElement(e){let t=FD("tr"),i=FD("td",{className:"e-week-number",attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});return t.appendChild(i),this.parent.trigger("renderCell",{elementType:"weekNumberCell",element:i}),t}unwireEvents(){}getModuleName(){return"month"}destroy(){!this.parent.isDestroyed&&this.element&&(this.unwireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),$D(this.element),this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues())}}class Aj{constructor(e){this.parent=e,this.viewBase=new Tj(e)}createAgendaContentElement(e,t,i,n,s){let r,o=this.parent.eventFields;if("noEvents"===e){let e=[{subject:this.parent.localeObj.getConstant("noEvents")}];r=LM.createList(this.parent.createElement,e,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:"<div class=e-no-event>${subject}</div>"})}else{r=LM.createList(this.parent.createElement,t,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass});for(let e=0,i=t.length;e<i;e++){let i,a=FD("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+t[e][this.parent.eventFields.id],"data-guid":t[e].Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(t[e]),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(t[e])}});if(XA(s)||a.setAttribute("data-group-index",s.toString()),this.parent.eventBase.applyResourceColor(a,t[e],"borderColor",n),XA(this.parent.activeViewOptions.eventTemplate))i=this.createAppointment(t[e]);else{jD([a],"e-template");let n=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",s=EB(t[e]);i=this.parent.getAppointmentTemplate()(s,this.parent,"eventTemplate",n,!1),XA(t[e][o.recurrenceRule])||a.appendChild(FD("div",{className:"e-icons "+(t[e][o.id]===t[e][o.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")}))}zD([].slice.call(i),a),CB(r.children[e]),r.children[e].appendChild(a);let l={data:KA({},t[e],null,!0),element:r.children[e],cancel:!1};this.parent.trigger("eventRendered",l,t=>{t.cancel&&$D(r.children[e])})}}return i.appendChild(r),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&jD([i],"e-day-border"),i}createAppointment(e){let t=this.parent.eventFields,i=e[t.subject]||this.parent.eventSettings.fields.subject.default,n=e[t.location]||this.parent.eventSettings.fields.location.default,s=FD("div",{className:"e-subject-wrap"});XA(n)||""===n||(i+=","),s.appendChild(FD("div",{className:"e-subject",innerHTML:i})),XA(n)||""===n||s.appendChild(FD("div",{className:"e-location",innerHTML:n})),XA(e[t.recurrenceRule])||s.appendChild(FD("div",{className:"e-icons "+(e[t.id]===e[t.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")}));let r=e[t.startTime],o=e[t.endTime],a=e[t.isAllDay],l=this.parent.localeObj.getConstant("allDay"),c=this.parent.getTimeString(r)+" - "+this.parent.getTimeString(o);return XA(e.data)||(l=((o.getTimezoneOffset()!==r.getTimezoneOffset()?o.getTime()-r.getTime()+36e5:o.getTime()-r.getTime())/864e5>=1?l:c)+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")"),[s,FD("div",{className:"e-date-time",innerHTML:!XA(e.data)||a?l:c})]}processAgendaEvents(e){let t=[];if(XA(e))return t;for(let i of e){let e=this.parent.eventBase.splitEventByDay(i);t=t.concat(e.length>1?e:i)}return t}wireEventActions(){let e=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));for(let i of e)this.parent.eventBase.wireAppointmentEvents(i,null,!0);let t=[].slice.call(this.parent.element.querySelectorAll(".e-m-date"));for(let i of t)GO.add(i,"click",this.parent.agendaModule.dayNavigationClick,this)}calculateResourceTableElement(e,t,i){if(XA(this.parent.resourceBase.lastResourceLevel)){let e=this.viewBase.getDateSlots(this.viewBase.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(e)}let n=pB(new Date(i.getTime()),t),s=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?t:1,r=this.parent.resourceBase.resourceCollection,o=this.parent.resourceBase.lastResourceLevel,a=i;for(let l=0;l<s;l++){let s,c,h=[],d=[],u=0,p=pB(a,l),f=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?pB(p,1):n,m=this.parent.eventBase.filterEvents(p,f);if(m.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(let e=0;e<o.length;e++){t=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:t;let a=[],l=this.parent.eventBase.filterEvents(i=p,n,m,o[e]);if(l.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(let p=0;p<t;p++){let t=this.parent.eventBase.filterEvents(i,pB(i,1),l,void 0);if((t.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(a.push(t[0]),s={rowSpan:1,type:"eventColumn",resource:r[r.length-1],groupIndex:o[e].groupIndex,groupOrder:o[e].groupOrder,resourceData:o[e].resourceData,eventData:t,date:i},c={rowSpan:1,type:"dateColumn",resource:r[r.length-1],groupOrder:o[e].groupOrder,resourceData:o[e].resourceData,date:i},h[u]||(h[u]=[]),h[u].push(s),h[u].push(c),u++),(i=pB(i,1)).getTime()>=n.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){h[h.length-1][1].cssClass="e-day-border";let t={rowSpan:a.length,type:"resourceColumn",resource:r[r.length-1],groupOrder:o[e].groupOrder.slice(0,-1),resourceData:o[e].resourceData,groupIndex:h.length-a.length,className:["e-resource-name"],date:i};h[h.length-a.length].push(t),d.push(KA({},t,null,!0));break}}}let a=r.slice(0,-1),l=[],f=0;for(let e=0;e<a.length;e++){let t=a[a.length-(e+1)].dataSource;for(let n=0;n<t.length;n++){let s=0;for(let r=0;r<d.length;r++)d[r].groupOrder[a.length-(e+1)]===t[n][a[a.length-(e+1)].idField]&&(f+=d[r].rowSpan,l.push(KA({},d[r],null,!0))),++s===d.length&&l.length>0&&(l[0].rowSpan=f,l[0].type="parentColumnLevel_"+(e+1),l[0].resource=a[a.length-(e+1)],l[0].resourceData=t[n],l[0].date=i,h[l[0].groupIndex].push(l[0]),l=[],f=0)}}this.createResourceTableRow(h,e)}}0===this.parent.eventBase.filterEvents(a,n).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,a)}createResourceTableRow(e,t){let i,n,s,r=FD("tr",{attrs:{role:"row"}}),o=FD("td",{attrs:{role:"gridcell","aria-selected":"false"}}),a=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){let t=[],i=this.parent.resourceBase.resourceCollection.slice(0,-1);for(let s=0;s<e.length;s++)t=t.concat(e[s]);s=i.length>0?"parentColumnLevel_"+i.length:"resourceColumn";let n=t.filter(e=>e.type===s);for(let e=0;e<n.length;e++)a+=n[e].rowSpan}for(let l=0;l<e.length;l++){i=r.cloneNode();for(let t=e[l].length-1;t>=0;t--){let s=e[l][t],r=o.cloneNode();if("dateColumn"===s.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){n=e[l][t];continue}r.setAttribute("data-date",s.date.getTime().toString()),r.appendChild(this.createDateHeaderElement(s.date));let o=["e-agenda-cells","e-date-column"];s.cssClass&&o.push(s.cssClass),jD([r],o),i.appendChild(r)}else"eventColumn"===s.type?(r=this.createAgendaContentElement(0===s.eventData.length?"noEvents":"data",s.eventData,r,s.groupOrder,s.groupIndex),r.setAttribute("data-date",s.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&jD([r],["e-agenda-cells","e-day-padding"]),i.appendChild(r)):(r.setAttribute("rowspan",s.rowSpan.toString()),jD([r],"e-resource-column"),this.viewBase.setResourceHeaderContent(r,s,s.className[0]),i.appendChild(r))}if(this.parent.activeViewOptions.group.byDate&&0===l&&"MonthAgenda"!==this.parent.currentView){let e=o.cloneNode();e.setAttribute("data-date",n.date.getTime().toString()),e.setAttribute("rowspan",a.toString()),e.appendChild(this.createDateHeaderElement(n.date)),jD([e],["e-agenda-cells","e-date-column","e-date-border"]);let t=gB(this.parent.selectedDate.getTime(),n.date.getTime());if(i.setAttribute("aria-rowindex",t.toString()),this.parent.element.querySelector(`.e-agenda-view tr[aria-rowindex="${t}"]`))break;i.insertBefore(e,i.childNodes[0])}t.appendChild(i)}}createDateHeaderElement(e){let t;if(this.parent.activeViewOptions.dateHeaderTemplate){t=FD("div",{className:"e-day-date-header"});let i={date:e,type:"dateHeader"},n=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate";zD([].slice.call(this.parent.getDateHeaderTemplate()(i,this.parent,"dateHeaderTemplate",n,!1)),t)}else t=this.viewBase.getMobileDateElement(e,"e-day-date-header");return t}renderEmptyContent(e,t){let i=this.createTableRowElement(t,"noEvents"),n=i.children[0],s=FD("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});n.appendChild(s),e.appendChild(i)}createTableRowElement(e,t){let i=gB(this.parent.selectedDate.getTime(),e.getTime()),n=FD("tr",{attrs:{role:"row","aria-rowindex":i.toString()}}),s=FD("td",{attrs:{class:"monthHeader"===t?"e-month-header":"e-agenda-cells",role:"gridcell","aria-selected":"false","aria-colindex":i.toString(),"data-date":e.getTime().toString()}}),r=s.cloneNode(),o=s.cloneNode();return n.appendChild(r),"noEvents"!==t&&n.appendChild(o),n}}const Oj=["dateHeaderTemplate"],Dj=["cellHeaderTemplate"],Ij=["cellTemplate"],Rj=["eventTemplate"],Pj=["resourceHeaderTemplate"],Mj=["timeScaleMinorSlotTemplate"],Lj=["timeScaleMajorSlotTemplate"],Nj=["groupHeaderTooltipTemplate"],Vj=["template"],Bj=["eventSettingsTooltipTemplate"],Fj=["eventSettingsTemplate"],jj=["editorTemplate"],Hj=["quickInfoTemplatesHeader"],Uj=["quickInfoTemplatesContent"],qj=["quickInfoTemplatesFooter"];var Wj=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},zj=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Gj=["allowVirtualScrolling","cellHeaderTemplate","cellTemplate","dateFormat","dateHeaderTemplate","displayName","endHour","eventTemplate","firstDayOfWeek","group","headerRows","interval","isSelected","option","orientation","readonly","resourceHeaderTemplate","showWeekNumber","showWeekend","startHour","timeScale","workDays"],Yj=[],$j=(()=>{class e extends aR{constructor(e){super(),this.viewContainerRef=e,oR("currentInstance",this,this.viewContainerRef),this.registerEvents(Yj),this.directivePropList=Gj}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl))},e.\u0275dir=Ct({type:e,selectors:[["e-view"]],contentQueries:function(e,t,i){var n;1&e&&(cc(i,Oj,!0),cc(i,Dj,!0),cc(i,Ij,!0),cc(i,Rj,!0),cc(i,Pj,!0),cc(i,Mj,!0),cc(i,Lj,!0),cc(i,Nj,!0)),2&e&&(rc(n=uc())&&(t.dateHeaderTemplate=n.first),rc(n=uc())&&(t.cellHeaderTemplate=n.first),rc(n=uc())&&(t.cellTemplate=n.first),rc(n=uc())&&(t.eventTemplate=n.first),rc(n=uc())&&(t.resourceHeaderTemplate=n.first),rc(n=uc())&&(t.timeScale_minorSlotTemplate=n.first),rc(n=uc())&&(t.timeScale_majorSlotTemplate=n.first),rc(n=uc())&&(t.group_headerTooltipTemplate=n.first))},inputs:{allowVirtualScrolling:"allowVirtualScrolling",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",displayName:"displayName",endHour:"endHour",eventTemplate:"eventTemplate",firstDayOfWeek:"firstDayOfWeek",group:"group",headerRows:"headerRows",interval:"interval",isSelected:"isSelected",option:"option",orientation:"orientation",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeScale:"timeScale",workDays:"workDays"},features:[Oa]}),Wj([dR(),zj("design:type",Object)],e.prototype,"dateHeaderTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"cellHeaderTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"cellTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"eventTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"resourceHeaderTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"timeScale_minorSlotTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"timeScale_majorSlotTemplate",void 0),Wj([dR(),zj("design:type",Object)],e.prototype,"group_headerTooltipTemplate",void 0),e})(),Kj=(()=>{class e extends lR{constructor(){super("views")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["e-views"]],contentQueries:function(e,t,i){var n;1&e&&cc(i,$j,!1),2&e&&rc(n=uc())&&(t.children=n)},features:[Oa]}),e})(),Xj=["allowMultiple","colorField","cssClassField","dataSource","endHourField","expandedField","field","groupIDField","idField","name","query","startHourField","textField","title","workDaysField"],Jj=[],Qj=(()=>{class e extends aR{constructor(e){super(),this.viewContainerRef=e,oR("currentInstance",this,this.viewContainerRef),this.registerEvents(Jj),this.directivePropList=Xj}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl))},e.\u0275dir=Ct({type:e,selectors:[["e-resource"]],inputs:{allowMultiple:"allowMultiple",colorField:"colorField",cssClassField:"cssClassField",dataSource:"dataSource",endHourField:"endHourField",expandedField:"expandedField",field:"field",groupIDField:"groupIDField",idField:"idField",name:"name",query:"query",startHourField:"startHourField",textField:"textField",title:"title",workDaysField:"workDaysField"},features:[Oa]}),e})(),Zj=(()=>{class e extends lR{constructor(){super("resources")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["e-resources"]],contentQueries:function(e,t,i){var n;1&e&&cc(i,Qj,!1),2&e&&rc(n=uc())&&(t.children=n)},features:[Oa]}),e})();var eH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let tH=["option","template"],iH=[],nH=(()=>{class e extends aR{constructor(e){super(),this.viewContainerRef=e,oR("currentInstance",this,this.viewContainerRef),this.registerEvents(iH),this.directivePropList=tH}}return e.\u0275fac=function(t){return new(t||e)(Io(Sl))},e.\u0275dir=Ct({type:e,selectors:[["e-header-row"]],contentQueries:function(e,t,i){var n;1&e&&cc(i,Vj,!0),2&e&&rc(n=uc())&&(t.template=n.first)},inputs:{option:"option",template:"template"},features:[Oa]}),function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);r>3&&o&&Object.defineProperty(t,i,o)}([dR(),eH("design:type",Object)],e.prototype,"template",void 0),e})(),sH=(()=>{class e extends lR{constructor(){super("headerrows")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["e-header-rows"]],contentQueries:function(e,t,i){var n;1&e&&cc(i,nH,!1),2&e&&rc(n=uc())&&(t.children=n)},features:[Oa]}),e})();var rH=function(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},oH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const aH=["actionBegin","actionComplete","actionFailure","cellClick","cellDoubleClick","created","dataBinding","dataBound","destroyed","drag","dragStart","dragStop","eventClick","eventRendered","hover","moreEventsClick","navigating","popupClose","popupOpen","renderCell","resizeStart","resizeStop","resizing","select","currentViewChange","selectedDateChange"],lH=["currentView","selectedDate"];let cH=(()=>{let e=class extends Cj{constructor(e,t,i,n){super(),this.ngEle=e,this.srenderer=t,this.viewContainerRef=i,this.injector=n,this.tags=["views","resources","headerRows"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let e=this.injector.get("ScheduleDay");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(v$){}try{let e=this.injector.get("ScheduleWeek");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(s){}try{let e=this.injector.get("ScheduleWorkWeek");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(r){}try{let e=this.injector.get("ScheduleMonth");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(o){}try{let e=this.injector.get("ScheduleYear");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(a){}try{let e=this.injector.get("ScheduleAgenda");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(l){}try{let e=this.injector.get("ScheduleMonthAgenda");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(c){}try{let e=this.injector.get("ScheduleTimelineViews");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(h){}try{let e=this.injector.get("ScheduleTimelineMonth");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(d){}try{let e=this.injector.get("ScheduleTimelineYear");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(u){}try{let e=this.injector.get("ScheduleResize");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(p){}try{let e=this.injector.get("ScheduleDragAndDrop");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(f){}try{let e=this.injector.get("ScheduleExcelExport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(m){}try{let e=this.injector.get("ScheduleICalendarExport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(g){}try{let e=this.injector.get("ScheduleICalendarImport");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(v){}try{let e=this.injector.get("SchedulePrint");-1===this.injectedModules.indexOf(e)&&this.injectedModules.push(e)}catch(y){}this.registerEvents(aH),this.addTwoWay.call(this,lH),oR("currentInstance",this,this.viewContainerRef),this.context=new cR}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childViews,this.childResources&&(this.tagObjects[1].instance=this.childResources),this.childHeaderRows&&(this.tagObjects[2].instance=this.childHeaderRows),this.context.ngAfterContentChecked(this)}};return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(Za),Io(Sl),Io(uo))},e.\u0275cmp=gt({type:e,selectors:[["ejs-schedule"]],contentQueries:function(e,t,i){var n;1&e&&(cc(i,Oj,!0),cc(i,Ij,!0),cc(i,Dj,!0),cc(i,Bj,!0),cc(i,Fj,!0),cc(i,jj,!0),cc(i,Mj,!0),cc(i,Lj,!0),cc(i,Pj,!0),cc(i,Hj,!0),cc(i,Uj,!0),cc(i,qj,!0),cc(i,Nj,!0),cc(i,Kj,!0),cc(i,Zj,!0),cc(i,sH,!0)),2&e&&(rc(n=uc())&&(t.dateHeaderTemplate=n.first),rc(n=uc())&&(t.cellTemplate=n.first),rc(n=uc())&&(t.cellHeaderTemplate=n.first),rc(n=uc())&&(t.eventSettings_tooltipTemplate=n.first),rc(n=uc())&&(t.eventSettings_template=n.first),rc(n=uc())&&(t.editorTemplate=n.first),rc(n=uc())&&(t.timeScale_minorSlotTemplate=n.first),rc(n=uc())&&(t.timeScale_majorSlotTemplate=n.first),rc(n=uc())&&(t.resourceHeaderTemplate=n.first),rc(n=uc())&&(t.quickInfoTemplates_header=n.first),rc(n=uc())&&(t.quickInfoTemplates_content=n.first),rc(n=uc())&&(t.quickInfoTemplates_footer=n.first),rc(n=uc())&&(t.group_headerTooltipTemplate=n.first),rc(n=uc())&&(t.childViews=n.first),rc(n=uc())&&(t.childResources=n.first),rc(n=uc())&&(t.childHeaderRows=n.first))},inputs:{agendaDaysCount:"agendaDaysCount",allowDragAndDrop:"allowDragAndDrop",allowInline:"allowInline",allowKeyboardInteraction:"allowKeyboardInteraction",allowMultiCellSelection:"allowMultiCellSelection",allowMultiRowSelection:"allowMultiRowSelection",allowResizing:"allowResizing",calendarMode:"calendarMode",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",cssClass:"cssClass",currentView:"currentView",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",editorTemplate:"editorTemplate",enablePersistence:"enablePersistence",enableRecurrenceValidation:"enableRecurrenceValidation",enableRtl:"enableRtl",endHour:"endHour",eventDragArea:"eventDragArea",eventSettings:"eventSettings",firstDayOfWeek:"firstDayOfWeek",group:"group",headerRows:"headerRows",height:"height",hideEmptyAgendaDays:"hideEmptyAgendaDays",locale:"locale",maxDate:"maxDate",minDate:"minDate",quickInfoOnSelectionEnd:"quickInfoOnSelectionEnd",quickInfoTemplates:"quickInfoTemplates",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",resources:"resources",rowAutoHeight:"rowAutoHeight",selectedDate:"selectedDate",showHeaderBar:"showHeaderBar",showQuickInfo:"showQuickInfo",showTimeIndicator:"showTimeIndicator",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeScale:"timeScale",timezone:"timezone",views:"views",width:"width",workDays:"workDays",workHours:"workHours"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",cellClick:"cellClick",cellDoubleClick:"cellDoubleClick",created:"created",dataBinding:"dataBinding",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",eventClick:"eventClick",eventRendered:"eventRendered",hover:"hover",moreEventsClick:"moreEventsClick",navigating:"navigating",popupClose:"popupClose",popupOpen:"popupOpen",renderCell:"renderCell",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",select:"select",currentViewChange:"currentViewChange",selectedDateChange:"selectedDateChange"},features:[Oa],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),rH([dR(),oH("design:type",Object)],e.prototype,"dateHeaderTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"cellTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"cellHeaderTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"eventSettings_tooltipTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"eventSettings_template",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"editorTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"timeScale_minorSlotTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"timeScale_majorSlotTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"resourceHeaderTemplate",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"quickInfoTemplates_header",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"quickInfoTemplates_content",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"quickInfoTemplates_footer",void 0),rH([dR(),oH("design:type",Object)],e.prototype,"group_headerTooltipTemplate",void 0),e=rH([(t=[cR],function(e){!function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(i){e.prototype.hasOwnProperty(i)&&!t.isFormBase||(e.prototype[i]=t.prototype[i])}))}))}(e,t)}),oH("design:paramtypes",[Ka,Za,Sl,uo])],e),e;var t})(),hH=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Id]]}),e})();const dH={provide:"ScheduleDay",useValue:class extends xj{constructor(e){super(e),this.viewClass="e-day-view"}getModuleName(){return"day"}}},uH={provide:"ScheduleWeek",useValue:class extends xj{constructor(e){super(e),this.viewClass="e-week-view"}getModuleName(){return"week"}}},pH={provide:"ScheduleWorkWeek",useValue:class extends xj{constructor(e){super(e),this.viewClass="e-work-week-view"}startDate(){let e=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&(e=this.parent.resourceBase.getResourceRenderDates()[0]),e}endDate(){let e=pB(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&(e=pB(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),e}getModuleName(){return"workWeek"}}},fH={provide:"ScheduleMonth",useValue:kj},mH={provide:"ScheduleMonthAgenda",useValue:class extends kj{constructor(e){super(e),this.dayNameFormat="narrow",this.viewClass="e-month-agenda-view",this.agendaDates={},this.agendaBase=new Aj(e),this.monthAgendaDate=new Date(""+e.selectedDate)}renderAppointmentContainer(){if(this.parent.isServerRenderer())return void this.setEventWrapperHeight();let e=this.getContentAreaElement(),t=FD("div",{className:"e-wrapper-container"});e.appendChild(t);let i=FD("div",{className:"e-appointment-wrap"});t.appendChild(i),this.appendAppContainer(i),this.setEventWrapperHeight()}getDayNameFormat(){return this.parent.isAdaptive?"narrow":"abbreviated"}setEventWrapperHeight(){let e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,t=this.parent.element.querySelector(".e-schedule-resource-toolbar");t&&(e+=t.offsetHeight);let i=this.getContentAreaElement().firstElementChild,n=this.element.querySelector(".e-date-header-wrap"),s=this.parent.element.offsetHeight-e-n.offsetHeight-i.offsetHeight,r=this.element.querySelector(".e-wrapper-container"),o=this.element.querySelector(".e-appointment-wrap");r.style.height=o.style.height=tO(s)}onDataReady(e){this.setEventWrapperHeight(),this.clearElements();let t=e.processedData;this.parent.uiStateValues.isGroupAdaptive&&(t=this.parent.eventBase.filterEventsByResource(this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],t)),this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(t);let i=0;for(let n of this.renderDates){let e=this.appointmentFiltering(n),t=this.element.querySelectorAll(".e-work-cells")[i];e.length>0&&(t.querySelector(".e-appointment-indicator")||t.appendChild(FD("div",{className:"e-appointment-indicator"})),n.getTime()===dB(new Date(this.monthAgendaDate.getTime())).getTime()&&this.onEventRender(e,n)),i++}this.parent.notify("events-loaded",{})}onCellClick(e){this.parent.quickPopup.quickPopupHide();let t=this.appointmentFiltering(e.startTime);this.parent.resetEventTemplates(),this.onEventRender(t,e.startTime),this.parent.notify("events-loaded",{}),this.monthAgendaDate=new Date(""+e.startTime)}onEventRender(e,t){let i=this.element.querySelector(".e-appointment-wrap");if(CB(i),0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive)if(e.length>0){let t=FD("div",{className:"e-appointment-container"});i.appendChild(this.agendaBase.createAgendaContentElement("data",e,t))}else this.appendAppContainer(i);else if(e.length>0){let e=this.createTableLayout(),n=e.querySelector("tbody");this.agendaBase.calculateResourceTableElement(n,1,t),e.appendChild(n),i.appendChild(e)}else this.appendAppContainer(i);this.agendaBase.wireEventActions()}appointmentFiltering(e){let t=dB(new Date(e.getTime())),i=hB(new Date(t.getTime()),864e5);return this.parent.eventBase.filterEvents(t,i)}clearElements(){let e=[].slice.call(this.element.querySelectorAll(".e-appointment-indicator"));for(let t of e)$D(t);this.appendAppContainer(this.element.querySelector(".e-appointment-wrap"))}appendAppContainer(e){let t=FD("div",{className:"e-appointment-container"});jD([t],"e-no-event"),t.innerHTML=this.parent.localeObj.getConstant("noEvents"),CB(e),e.appendChild(t)}getNextPreviousDate(e){let t=this.parent.selectedDate,i=fB(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval),n="next"===e?2:0,s=new Date(t.getFullYear(),t.getMonth()+n,0).getDate(),r=s>=this.monthAgendaDate.getDate()?this.monthAgendaDate.getDate():s;return this.monthAgendaDate=new Date(i.getFullYear(),i.getMonth(),r),this.monthAgendaDate}getModuleName(){return"monthAgenda"}}};let gH=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Id]]}),e})();const vH=["scheduleObj"];let yH=(()=>{class e{constructor(e,t){this.tutorService=e,this.httpService=t,this.scheduleViews=["Day","Week","WorkWeek","Month"],this.tutorAvailabilitySchedule=new gk,this.availabilitySchedule=[],this.availableSchedules=[]}ngOnInit(){}ngAfterViewInit(){this.personalAvailabilitySchedule=this.tutorService.getPersonalAvailabilitySchedule(),this.personalAvailabilitySchedule?this.meetingSchedule=this.personalAvailabilitySchedule.allMeetingsSchedule:this.handleRefresh()}onEventRendered(e){"booking"==e.data.Type&&(e.element.style.backgroundColor="#e30084")}handleRefresh(){setTimeout(()=>{this.httpService.getScheduleData(this.tutorService.getTutorDetials().bookingId).subscribe(e=>{this.tutorService.setPersonalAvailabilitySchedule(e),this.meetingSchedule=e.allMeetingsSchedule,this.scheduleObj.eventSettings.dataSource=this.meetingSchedule})},1e3)}}return e.\u0275fac=function(t){return new(t||e)(Io(aT),Io(Og))},e.\u0275cmp=gt({type:e,selectors:[["app-bookings"]],viewQuery:function(e,t){var i;1&e&&ac(vH,!0),2&e&&rc(i=uc())&&(t.scheduleObj=i.first)},decls:4,vars:2,consts:[[2,"background-color","#f9fafc"],[1,"Box",2,"width","95%","margin","auto","padding-top","70px"],["width","100%","height","600px",3,"readonly","views"],["meetingObj",""]],template:function(e,t){1&e&&(No(0,"body",0),No(1,"div",1),Bo(2,"ejs-schedule",2,3),Vo(),Vo()),2&e&&(Ss(2),Mo("readonly",!0)("views",t.scheduleViews))},directives:[cH],styles:[".box[_ngcontent-%COMP%]{width:80vw;height:85vh;background-color:#fafafa;margin:auto;border:1.5px solid #eee;overflow:hidden;padding:0}.row[_ngcontent-%COMP%]{margin:0}.booking-top[_ngcontent-%COMP%]{border-bottom:1.5px solid #eee}.calendar[_ngcontent-%COMP%]{display:inline-block;width:70%;height:100%}.bookings-button[_ngcontent-%COMP%]{font-size:smaller;margin-left:10px;padding:10px;background:none;color:#000;border:none;border-bottom:3px solid #2a608f;text-decoration:none}.bookings-button[_ngcontent-%COMP%]:hover{background-color:#2a608f;color:#fff}hr[_ngcontent-%COMP%]{margin-bottom:1px}.bookings[_ngcontent-%COMP%]{background:#f8f8f8 none repeat scroll 0 0;float:left;width:100%;height:100%;border-left:1px solid #c4c4c4}.booking-header[_ngcontent-%COMP%]{padding:20px 10px 10px}.booking-list[_ngcontent-%COMP%]{padding:10px;overflow-y:scroll;height:66vh}.calendar[_ngcontent-%COMP%]{width:100%;height:inherit}.calendar-nav[_ngcontent-%COMP%]{width:auto;height:6vh;background-color:#f8f8f8;font-size:medium}.calendar-main[_ngcontent-%COMP%]{width:auto;background-color:brown;overflow-y:scroll;height:inherit}h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:larger}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}.calendar-buttons[_ngcontent-%COMP%]{font-size:smaller;padding:0;background:none;border:none;text-decoration:none;text-align:center;color:#333;font-weight:lighter;outline:none;margin-top:10px}.calendar-buttons[_ngcontent-%COMP%]:hover, .todayButton[_ngcontent-%COMP%]:hover{color:#2a608f}.todayButton[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;background:none;border:none;text-decoration:none;text-align:center;color:#333;outline:none}.bookingListButton[_ngcontent-%COMP%]{color:#2a608f;margin-left:2px;outline:none}.sidenav[_ngcontent-%COMP%]{height:inherit;width:0;position:fixed;z-index:7;right:5vw;background-color:#fff;overflow-x:hidden;transition:.4s}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}"]}),e})();const bH=["*"],wH=new He("GOOGLE_CHARTS_CONFIG"),SH={mapsApiKey:"",version:"current",safeMode:!1};let CH=(()=>{class e{constructor(e,t,i){this.zone=e,this.localeId=t,this.config=i,this.scriptSource="https://www.gstatic.com/charts/loader.js",this.scriptLoadSubject=new x,this.config=Object.assign(Object.assign({},SH),i||{})}isGoogleChartsAvailable(){return"undefined"!=typeof google&&void 0!==google.charts}loadChartPackages(...e){return this.loadGoogleCharts().pipe(Gu(()=>new S(t=>{google.charts.load(this.config.version,{packages:e,language:this.localeId,mapsApiKey:this.config.mapsApiKey,safeMode:this.config.safeMode}),google.charts.setOnLoadCallback(()=>{this.zone.run(()=>{t.next(),t.complete()})})})))}loadGoogleCharts(){if(this.isGoogleChartsAvailable())return du(null);if(!this.isLoadingGoogleCharts()){const e=this.createGoogleChartsScript();e.onload=()=>{this.zone.run(()=>{this.scriptLoadSubject.next(),this.scriptLoadSubject.complete()})},e.onerror=()=>{this.zone.run(()=>{console.error("Failed to load the google charts script!"),this.scriptLoadSubject.error(new Error("Failed to load the google charts script!"))})}}return this.scriptLoadSubject.asObservable()}isLoadingGoogleCharts(){return null!=this.getGoogleChartsScript()}getGoogleChartsScript(){return Array.from(document.getElementsByTagName("script")).find(e=>e.src===this.scriptSource)}createGoogleChartsScript(){const e=document.createElement("script");return e.type="text/javascript",e.src=this.scriptSource,e.async=!0,document.getElementsByTagName("head")[0].appendChild(e),e}}return e.\u0275fac=function(t){return new(t||e)(Je(Bc),Je(Tc),Je(wH,8))},e.\u0275prov=ue({factory:function(){return new e(Je(Bc),Je(Tc),Je(wH,8))},token:e,providedIn:"root"}),e})(),_H=(()=>{class e{constructor(e){this.loaderService=e,this.error=new $l,this.ready=new $l,this.stateChange=new $l,this.id="_"+Math.random().toString(36).substr(2,9),this.wrapperReadySubject=new Ob(1),this.initialized=!1}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get controlWrapper(){return this._controlWrapper}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createControlWrapper(),this.initialized=!0})}ngOnChanges(e){this.initialized&&(e.type&&this._controlWrapper.setControlType(this.type),e.options&&this._controlWrapper.setOptions(this.options),e.state&&this._controlWrapper.setState(this.state))}createControlWrapper(){this._controlWrapper=new google.visualization.ControlWrapper({containerId:this.id,controlType:this.type,state:this.state,options:this.options}),this.addEventListeners(),this.wrapperReadySubject.next(this._controlWrapper)}addEventListeners(){google.visualization.events.removeAllListeners(this._controlWrapper),google.visualization.events.addListener(this._controlWrapper,"ready",e=>this.ready.emit(e)),google.visualization.events.addListener(this._controlWrapper,"error",e=>this.error.emit(e)),google.visualization.events.addListener(this._controlWrapper,"statechange",e=>this.stateChange.emit(e))}}return e.\u0275fac=function(t){return new(t||e)(Io(CH))},e.\u0275cmp=gt({type:e,selectors:[["control-wrapper"]],hostAttrs:[1,"control-wrapper"],hostVars:1,hostBindings:function(e,t){2&e&&xa("id",t.id)},inputs:{for:"for",type:"type",options:"options",state:"state"},outputs:{error:"error",ready:"ready",stateChange:"stateChange"},exportAs:["controlWrapper"],features:[La],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),e})(),EH=(()=>{class e{constructor(e,t){this.element=e,this.loaderService=t,this.ready=new $l,this.error=new $l,this.initialized=!1}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createDataTable(),this.createDashboard(),this.initialized=!0})}ngOnChanges(e){this.initialized&&(e.data||e.columns)&&(this.createDataTable(),this.dashboard.draw(this.dataTable))}createDashboard(){const e=this.controlWrappers.map(e=>e.wrapperReady$),t=this.controlWrappers.map(e=>e.for).map(e=>Array.isArray(e)?mu(e.map(e=>e.wrapperReady$)):e.wrapperReady$);mu([...e,...t]).subscribe(()=>{this.dashboard=new google.visualization.Dashboard(this.element.nativeElement),this.initializeBindings(),this.dashboard.draw(this.dataTable)})}initializeBindings(){this.controlWrappers.forEach(e=>{if(Array.isArray(e.for)){const t=e.for.map(e=>e.chartWrapper);this.dashboard.bind(e.controlWrapper,t)}else this.dashboard.bind(e.controlWrapper,e.for.chartWrapper)})}createDataTable(){if(null==this.data)return;let e=!0;null!=this.columns&&(e=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),e)}getDataAsTable(){return this.columns?[this.columns,...this.data]:this.data}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(CH))},e.\u0275cmp=gt({type:e,selectors:[["dashboard"]],contentQueries:function(e,t,i){var n;1&e&&cc(i,_H,!1),2&e&&rc(n=uc())&&(t.controlWrappers=n)},hostAttrs:[1,"dashboard"],inputs:{data:"data",columns:"columns"},outputs:{ready:"ready",error:"error"},exportAs:["dashboard"],features:[La],ngContentSelectors:bH,decls:1,vars:0,template:function(e,t){1&e&&(Jo(),Qo(0))},encapsulation:2,changeDetection:0}),e})(),TH=(()=>{class e{constructor(e,t,i){this.element=e,this.scriptLoaderService=t,this.dashboard=i,this.options={},this.dynamicResize=!1,this.ready=new $l,this.error=new $l,this.select=new $l,this.mouseover=new $l,this.mouseleave=new $l,this.wrapperReadySubject=new Ob(1),this.initialized=!1}get chart(){return this.wrapper?this.wrapper.getChart():null}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get chartWrapper(){return this.wrapper}set chartWrapper(e){this.wrapper=e,this.drawChart()}ngOnInit(){this.scriptLoaderService.loadChartPackages().subscribe(()=>{this.createDataTable(),this.wrapper=new google.visualization.ChartWrapper({container:this.element.nativeElement,chartType:this.type,dataTable:this.dataTable,options:this.mergeOptions()}),this.registerChartEvents(),this.wrapperReadySubject.next(this.wrapper),this.initialized=!0,this.drawChart()})}ngOnChanges(e){if(e.dynamicResize&&this.updateResizeListener(),this.initialized){let t=!1;(e.data||e.columns||e.formatters)&&(this.createDataTable(),this.wrapper.setDataTable(this.dataTable),t=!0),e.type&&(this.wrapper.setChartType(this.type),t=!0),(e.options||e.width||e.height||e.title)&&(this.wrapper.setOptions(this.mergeOptions()),t=!0),t&&this.drawChart()}}createDataTable(){if(null==this.data)return;let e=!0;null!=this.columns&&(e=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),e),this.applyFormatters(this.dataTable)}getDataAsTable(){return this.columns?[this.columns,...this.data]:this.data}updateResizeListener(){null!=this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null),this.dynamicResize&&(this.resizeSubscription=Yy(window,"resize").pipe(Lw(100)).subscribe(()=>{this.initialized&&this.drawChart()}))}mergeOptions(){return Object.assign({title:this.title,width:this.width,height:this.height},this.options)}applyFormatters(e){if(null!=this.formatters)for(const t of this.formatters)t.formatter.format(e,t.colIndex)}registerChartEvents(){google.visualization.events.removeAllListeners(this.wrapper);const e=(e,t,i)=>{google.visualization.events.addListener(e,t,i)};e(this.wrapper,"ready",()=>{google.visualization.events.removeAllListeners(this.chart),e(this.chart,"onmouseover",e=>this.mouseover.emit(e)),e(this.chart,"onmouseout",e=>this.mouseleave.emit(e)),e(this.chart,"select",()=>{const e=this.chart.getSelection();this.select.emit({selection:e})}),this.ready.emit({chart:this.chart})}),e(this.wrapper,"error",e=>this.error.emit(e))}drawChart(){null==this.dashboard&&this.wrapper.draw()}}return e.\u0275fac=function(t){return new(t||e)(Io(Ka),Io(CH),Io(EH,8))},e.\u0275cmp=gt({type:e,selectors:[["google-chart"]],hostAttrs:[1,"google-chart"],inputs:{options:"options",dynamicResize:"dynamicResize",type:"type",data:"data",columns:"columns",title:"title",width:"width",height:"height",formatters:"formatters"},outputs:{ready:"ready",error:"error",select:"select",mouseover:"mouseover",mouseleave:"mouseleave"},exportAs:["googleChart"],features:[La],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%] { width: fit-content; display: block; }"],changeDetection:0}),e})(),xH=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:wH,useValue:t}]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();function kH(e,t){if(1&e){const e=Ho();No(0,"a",22),Wo("click",(function(){return ei(e),Ko().viewPendingRequests()})),wa(1,"Take Action"),Vo()}}function AH(e,t){1&e&&(No(0,"span"),wa(1,"No pending requests"),Vo())}function OH(e,t){1&e&&Bo(0,"i",35)}function DH(e,t){1&e&&Bo(0,"i",38)}function IH(e,t){1&e&&(No(0,"span"),wa(1,"Requested to Re-Schedule"),Vo())}function RH(e,t){1&e&&(No(0,"span"),wa(1,"Request to Re-Schedule"),Vo())}function PH(e,t){if(1&e){const e=Ho();No(0,"button",36),Wo("click",(function(){ei(e);const t=Ko().$implicit;return Ko(2).requestToReschedule(t)})),Oo(1,DH,1,0,"i",37),Oo(2,IH,2,0,"span",9),Oo(3,RH,2,0,"span",9),Vo()}if(2&e){const e=Ko().$implicit,t=Ko(2);Mo("disabled","requested"==e.isRescheduled),Ss(1),Mo("ngIf",t.isRescheduleLoading),Ss(1),Mo("ngIf","requested"==e.isRescheduled),Ss(1),Mo("ngIf","false"==e.isRescheduled)}}function MH(e,t){if(1&e){const e=Ho();No(0,"div",25),Bo(1,"div",26),No(2,"div",27),No(3,"span",28),wa(4),Vo(),No(5,"span",29),wa(6),Vo(),Vo(),No(7,"div",30),No(8,"span"),wa(9),Vo(),No(10,"span"),wa(11),ql(12,"zero"),ql(13,"zero"),Vo(),Vo(),No(14,"div",31),No(15,"button",32),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko(2).acceptBooking(i)})),Oo(16,OH,1,0,"i",33),wa(17," Accept "),Vo(),Oo(18,PH,4,4,"button",34),Vo(),Vo()}if(2&e){const e=t.$implicit,i=Ko(2);Ss(4),Sa(e.studentName),Ss(2),Sa(e.subject),Ss(3),Sa(e.dateOfMeeting),Ss(2),Ta(" ",e.startTimeHour,":",Wl(12,11,e.startTimeMinute)," - ",e.endTimeHour,":",Wl(13,13,e.endTimeMinute)," (",e.duration," minutes)"),Ss(4),Mo("disabled","requested"==e.isRescheduled),Ss(1),Mo("ngIf",i.isLoading),Ss(2),Mo("ngIf","true"!=e.isRescheduled)}}function LH(e,t){if(1&e&&(No(0,"div",23),No(1,"div",7),wa(2,"Pending Requests"),Vo(),No(3,"div",24),Oo(4,AH,2,0,"span",9),Oo(5,MH,19,15,"div",20),Vo(),Vo()),2&e){const e=Ko();Ss(4),Mo("ngIf",0==e.pendingRequestsCount),Ss(1),Mo("ngForOf",e.bookingList)}}function NH(e,t){1&e&&(No(0,"span"),wa(1,"No upcoming classes"),Vo())}function VH(e,t){if(1&e&&(No(0,"div",39),Oo(1,NH,2,0,"span",9),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",0==e.liveMeetingList.length&&0==e.meetingList.length)}}function BH(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",19),No(2,"div",40),No(3,"span",41),wa(4,"\u25cf \xa0"),Vo(),wa(5,"Live Now "),Vo(),Bo(6,"div",42),No(7,"div",43),No(8,"span"),wa(9),Vo(),No(10,"span"),wa(11),ql(12,"zero"),ql(13,"zero"),Vo(),No(14,"span"),wa(15),Vo(),No(16,"button",44),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko(2).onJoin(i)})),wa(17," Join "),Vo(),Vo(),Vo(),No(18,"div",45),No(19,"a",46),wa(20,"view more"),Vo(),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(9),Sa(e.studentName),Ss(2),Ta("",e.startTimeHour,":",Wl(12,7,e.startTimeMinute)," - ",e.endTimeHour,":",Wl(13,9,e.endTimeMinute)," (",e.duration," minutes)"),Ss(4),Sa(e.description)}}function FH(e,t){if(1&e&&(No(0,"div"),Oo(1,BH,21,11,"div",10),Vo()),2&e){const e=Ko();Ss(1),Mo("ngForOf",e.liveMeetingList)}}function jH(e,t){1&e&&(No(0,"div",40),No(1,"span",41),wa(2,"\u25cf \xa0"),Vo(),wa(3,"Live Now "),Vo())}function HH(e,t){if(1&e&&(No(0,"div",40),wa(1),Vo()),2&e){const e=Ko().$implicit;Ss(1),Ca(" Live in:",e.timeLeft," ")}}function UH(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",19),Oo(2,jH,4,0,"div",47),Oo(3,HH,2,1,"div",47),Bo(4,"div",42),No(5,"div",43),No(6,"span"),wa(7),Vo(),No(8,"span"),wa(9),Vo(),No(10,"span"),wa(11),ql(12,"zero"),ql(13,"zero"),Vo(),No(14,"span"),wa(15),Vo(),No(16,"button",32),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().onHost(i)})),wa(17," Join "),Vo(),Vo(),Vo(),No(18,"div",45),No(19,"a",48),Wo("click",(function(){return ei(e),Ko().openSchedulePage()})),wa(20,"view more"),Vo(),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(2),Mo("ngIf",null==e.timeLeft),Ss(1),Mo("ngIf",null!=e.timeLeft),Ss(4),Sa(e.studentName),Ss(2),Sa(e.dateOfMeeting),Ss(2),Ta("",e.startTimeHour,":",Wl(12,11,e.startTimeMinute)," - ",e.endTimeHour,":",Wl(13,13,e.endTimeMinute)," (",e.duration," minutes)"),Ss(4),Sa(e.description),Ss(1),Mo("disabled",!e.isLive)}}function qH(e,t){1&e&&(No(0,"div",39),No(1,"span"),wa(2,"No Recent reviews"),Vo(),Vo())}const WH=function(e){return{"background-image":e}};function zH(e,t){if(1&e&&(No(0,"div",25),Bo(1,"div",49),No(2,"div",27),No(3,"span",28),wa(4),Vo(),No(5,"span",29),wa(6),Vo(),Vo(),No(7,"div",50),Bo(8,"div",51),Vo(),Vo()),2&e){const e=t.$implicit,i=Ko();Ss(1),Mo("ngStyle",jl(5,WH,"url("+i.profilePictureUrl+")")),Ss(3),Sa(e.studentName),Ss(2),Sa(e.subject),Ss(2),oa("width",e.rating,"%")}}function GH(e,t){1&e&&(No(0,"div",45),No(1,"a",52),wa(2,"view more"),Vo(),Vo())}KI.load({"en-US":{schedule:{addTitle:"My Availability"}}});let YH=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.httpService=e,this.tutorService=t,this.meetingService=i,this.router=n,this.loginService=s,this.locationStrategy=r,this.webSocketService=o,this.snackBar=a,this.now=new Date,this.tutorChartWidth="380",this.tutorChartHeight="180",this.skillsChartType="PieChart",this.skillsData=[["Mathematics",45],["English",26.8],["Science",12.8],["C++",8.5],["Machine Learning",6.2],["Others",.7]],this.skillsOptions={pieHole:.4},this.earningTrackerType="ComboChart",this.earningPeriod="Week",this.earningTrackerData=[["June",150,150],["July",200,200],["August",300,300],["September",250,250]],this.earningTrackerOptions={hAxis:{title:"Months"},vAxis:{title:"Earning (USD $)"},seriesType:"bars",series:{1:{type:"line"}}},this.takeAction=!0,this.pendingRequestsCount=0,this.showCard=!0,this.bookingRequestMessage="",this.approvedMeetingsMessage="",this.liveMeetingsMessage="",this.isLoading=!1,this.bookingList=[],this.meetingList=[],this.liveMeetingList=[],this.hostMeeting=new Py,this.completeProfile=!0,this.profilePictureUrl="../../../assets/images/default-user-image.png",this.recentReviewsList=[],this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},setInterval(()=>{this.now=new Date},1e3)}getScreenSize(e){window;var t=window.innerWidth;this.tutorChartWidth=t<=800?"320":"380"}toggleSkillsInDemand(e){this.skillsChartType=e}toggleEarningPeriod(e){this.earningPeriod=e}ngOnInit(){this.preventBackButton(),window.innerWidth<=800&&(this.tutorChartWidth="320"),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),"Expert"==this.loginService.getLoginType()&&this.tutorProfileDetails.tid?(this.initialisePendingRequests(),this.fetchTutorApprovedMeetings(),this.fetchTutorLiveMeetings(),this.fetchExpertRecentReviews()):this.handleRefresh()}initialisePendingRequests(){this.tutorService.fetchTutorPendingBookings(),this.tutorService.bookingsChanged.subscribe(e=>{this.bookingList=e,0==this.bookingList.length?(this.bookingRequestMessage="No booking requests pending.",this.pendingRequestsCount=0):this.pendingRequestsCount=this.bookingList.length}),this.bookingList=this.tutorService.getBookings()}viewPendingRequests(){this.takeAction=!this.takeAction}closeCompleteProfile(){this.completeProfile=!1,this.showCard=!1}handleRefresh(){setTimeout(()=>{this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),this.loginService.setLoginType("Expert"),this.initialisePendingRequests(),this.fetchTutorApprovedMeetings(),this.fetchTutorLiveMeetings(),this.fetchExpertRecentReviews()},1e3)}openSchedulePage(){this.router.navigate(["home/tutor-schedule"])}fetchExpertRecentReviews(){this.httpService.fetchExpertRecentReviews(this.tutorProfileDetails.bookingId).subscribe(e=>{this.recentReviewsList=e})}acceptBooking(e){let t;this.isLoading=!0,e.approvalStatus="Accepted",this.httpService.fetchBookingStatus(e.bid).subscribe(i=>{t=i.status,"Pending"==t?this.httpService.updateBookingStatus(e.bid,e.approvalStatus).subscribe(t=>{if(1==t){this.bookingList.splice(this.bookingList.indexOf(e,0),1),0==this.bookingList.length&&(this.bookingRequestMessage="No booking requests pending.",this.pendingRequestsCount=0,this.takeAction=!1);let t=JSON.stringify({entityType:"1",entityTypeId:"12",actorId:e.tutorId,notifierId:e.studentId,pictureUrl:e.tutorProfilePictureUrl,readStatus:!1});this.webSocketService.sendAppointmentNotfication(t,e.studentId.toString()),this.before10MinutesTime(e),this.enableJoinNow(e),this.timeLeft(e),this.meetingList.push(e),this.approvedMeetingsMessage="",this.isLoading=!1}}):(this.snackBar.open("Meeting has already been cancelled !","close",this.config),this.initialisePendingRequests())})}denyBooking(e){e.approvalStatus="Rejected",this.httpService.updateBookingStatus(e.bid,e.approvalStatus).subscribe(t=>{1==t&&(this.bookingList.splice(this.bookingList.indexOf(e,0),1),0==this.bookingList.length&&(this.bookingRequestMessage="No booking requests pending.",this.pendingRequestsCount=0,this.takeAction=!1))})}requestToReschedule(e){this.isRescheduleLoading=!0,this.httpService.fetchBookingStatus(e.bid).subscribe(t=>{"Pending"==t.status&&this.httpService.requestToReschedule(e.bid).subscribe(e=>{e?(this.snackBar.open("Request for reschedule successful","close",this.config),this.isRescheduleLoading=!1,this.initialisePendingRequests()):this.snackBar.open("Reschedule time limit exceeded !","close",this.config)})})}fetchTutorApprovedMeetings(){this.httpService.fetchApprovedMeetingsTutor(this.tutorService.getTutorDetials().bookingId).subscribe(e=>{this.meetingList=e,this.sortMeetings(this.meetingList),0==this.meetingList.length&&(this.approvedMeetingsMessage="No upcoming meetings pending.");for(let t of this.meetingList)this.before10MinutesTime(t),this.enableJoinNow(t),this.timeLeft(t),0==this.meetingList.length&&(this.approvedMeetingsMessage="No upcoming meetings pending.")})}fetchTutorLiveMeetings(){this.httpService.fetchLiveMeetingsTutor(this.tutorService.getTutorDetials().bookingId).subscribe(e=>{this.liveMeetingList=e,0==this.liveMeetingList.length&&(this.liveMeetingsMessage="No live meetings.");for(let t of this.liveMeetingList)this.eliminateLiveMeetings(t,this.liveMeetingList),0==this.meetingList.length&&(this.approvedMeetingsMessage="No upcoming meetings pending.")})}sortMeetings(e){e.sort((function(e,t){var i=e.dateOfMeeting.split("/")[2],n=e.dateOfMeeting.split("/")[1]-1,s=e.dateOfMeeting.split("/")[0],r=e.startTimeHour,o=e.startTimeMinute,a=t.dateOfMeeting.split("/")[2],l=t.dateOfMeeting.split("/")[1]-1,c=t.dateOfMeeting.split("/")[0],h=t.startTimeHour,d=t.startTimeMinute;return new Date(i,n,s,r,o,0,0).valueOf()-new Date(a,l,c,h,d,0,0).valueOf()}))}enableJoinNow(e){var t=new Date(Date.now()).toLocaleDateString("en-GB"),i=60*e.startTimeHour+e.startTimeMinute;t==e.dateOfMeeting&&setInterval(()=>{60*this.now.getHours()+this.now.getMinutes()>=i&&(e.isLive=!0)},5e3)}timeLeft(e){var t=new Date;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var i=60*e.startTimeHour+e.startTimeMinute,n=e.duration+10,s=60*this.now.getHours()+this.now.getMinutes(),r=i-s,o=Math.trunc(r/60),a=r%60;r>0&&(0==o?l=a+" minutes":0!=a?l=o+" hours "+a+" minutes ":0==a&&(l=o+" hours "),e.timeLeft=l),setInterval(()=>{s=60*this.now.getHours()+this.now.getMinutes(),r=i-s,o=Math.trunc(r/60),a=r%60,r>0?(0==o?l=a+" minutes ":0!=a?l=o+" hours "+a+" minutes":0==a&&(l=o+" hours"),e.timeLeft=l):r<=0&&(e.timeLeft=null,Math.abs(r)>n&&(this.meetingList.splice(this.meetingList.indexOf(e),1),0==this.meetingList.length&&(this.approvedMeetingsMessage="No upcoming meetings."),this.httpService.updateBookingStatus(e.bid,"completed unattended").subscribe(e=>{})))},5e3)}else{var l,c=0,h=0,d=0,u=e.dateOfMeeting.split("/"),p=new Date(+u[2],u[1]-1,+u[0]);if(i=60*e.startTimeHour+e.startTimeMinute,p.getTime()>t.getTime()){var f=Math.trunc((p.getTime()-t.getTime())/6e4);if((d=Math.trunc(f/1440))<1)c=Math.trunc(f/60),h=f%60;else{var m=f%1440;c=Math.trunc(m/60),h=m%60}c+=Math.trunc(i/60),(h+=Math.trunc(i%60))>60&&(c+=h/60,h%=60),c>24&&(d+=c/24,c%=24),l=0==d?Math.trunc(c)+" hours "+Math.trunc(h)+" minutes":Math.trunc(d)+" days "+Math.trunc(c)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=l}setInterval(()=>{t=new Date;var n=Math.trunc((p.getTime()-t.getTime())/6e4),s=Math.trunc(n/1440);if(s<1)c=Math.trunc(n/60),h=n%60;else{var r=n%1440;c=Math.trunc(r/60),h=r%60}c+=Math.trunc(i/60),(h+=Math.trunc(i%60))>60&&(c+=h/60,h%=60),c>24&&(s+=c/24,c%=24),l=0==s?Math.trunc(c)+" hours "+Math.trunc(h)+" minutes":Math.trunc(s)+" days "+Math.trunc(c)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=l},5e3)}}isTimeCompleted(e,t){if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var i=60*e.startTimeHour+e.startTimeMinute,n=e.duration+10,s=60*this.now.getHours()+this.now.getMinutes(),r=i-s;r<=0&&Math.abs(r)>n&&t.splice(t.indexOf(e),1),setInterval(()=>{s=60*this.now.getHours()+this.now.getMinutes(),(r=i-s)<=0&&Math.abs(r)>n&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1)},5e3)}}eliminateLiveMeetings(e,t){if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var i=60*e.endTimeHour+e.endTimeMinute,n=60*this.now.getHours()+this.now.getMinutes(),s=i-n;s<=0&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1),setInterval(()=>{n=60*this.now.getHours()+this.now.getMinutes(),(s=i-n)<=0&&-1!=t.indexOf(e)&&(t.splice(t.indexOf(e),1),this.httpService.updateBookingStatus(e.bid,"completed").subscribe(e=>{}))},5e3)}}before10MinutesTime(e){0==e.startTimeMinute?(e.startTimeMinute=50,e.startTimeHour-=1):e.startTimeMinute-=10}onHost(e){e.approvalStatus="live",this.httpService.updateBookingStatus(e.bid,e.approvalStatus).subscribe(t=>{1==t&&(this.meetingList.splice(this.meetingList.indexOf(e,0),1),this.liveMeetingList.push(e))}),this.hostMeeting.roomId=123,this.hostMeeting.role="host",this.hostMeeting.roomName=e.meetingId,this.hostMeeting.userName=e.tutorName,this.hostMeeting.userId=e.tutorId,this.meetingService.setMeeting(this.hostMeeting),this.meetingService.setBooking(e),this.router.navigate(["meeting"])}onJoin(e){this.hostMeeting.roomId=123,this.hostMeeting.role="host",this.hostMeeting.roomName=e.meetingId,this.hostMeeting.userName=e.tutorName,this.hostMeeting.userId=e.tutorId,this.meetingService.setMeeting(this.hostMeeting),this.meetingService.setBooking(e),this.router.navigate(["meeting"])}preventBackButton(){history.pushState(null,null,location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,null,location.href)})}}return e.\u0275fac=function(t){return new(t||e)(Io(Og),Io(aT),Io(Vy),Io(Em),Io(jy),Io(kh),Io(hT),Io(UE))},e.\u0275cmp=gt({type:e,selectors:[["app-tutor-dashboard"]],hostBindings:function(e,t){1&e&&Wo("resize",(function(e){return t.getScreenSize(e)}),!1,zi)},decls:49,vars:31,consts:[[1,"dashboard-container"],[1,"pending-reviews-panel"],[1,"number"],[1,"text-content"],["class","takeActionLink",3,"click",4,"ngIf"],["class","widget pending-reviews-list","style","min-height: 0; max-height: 250px",4,"ngIf"],[1,"widget"],[1,"widget-header"],["style","padding: 10px",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"widget-timings"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-chart-pie"],[1,"fa","fa-list"],[2,"margin-top","20px"],[3,"type","data","options","width","height"],["skillsChart",""],[1,"widget-information"],["class","list-panel",4,"ngFor","ngForOf"],["class","widget-footer",4,"ngIf"],[1,"takeActionLink",3,"click"],[1,"widget","pending-reviews-list",2,"min-height","0","max-height","250px"],[1,"widget-information",2,"height","auto"],[1,"list-panel"],[1,"list-thumbnail",2,"background-image","url('../../../assets/images/default-user-image.png')"],[1,"list-information"],[1,"name"],[1,"subject"],[1,"date-time-panel"],[1,"button-container"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["class","fa fa-spinner fa-spin","style","margin-right: 3px;",4,"ngIf"],[1,"fa","fa-spinner","fa-spin",2,"margin-right","3px"],[2,"padding","10px"],[1,"widget-time"],[2,"color","red"],[1,"subject-thumbnail"],[1,"subject-description"],["type","button",1,"btn","btn-primary",3,"click"],[1,"widget-footer"],["href","javascript:;","routerLink","tutor-schedule"],["class","widget-time",4,"ngIf"],["href","javascript:;",3,"click"],[1,"list-thumbnail",3,"ngStyle"],[1,"outer-stars"],[1,"inner-stars"],["href",""]],template:function(e,t){1&e&&(No(0,"body"),No(1,"div",0),No(2,"div",1),No(3,"span",2),wa(4),ql(5,"zero"),Vo(),No(6,"span",3),wa(7,"PENDING REQUESTS"),Vo(),Oo(8,kH,2,0,"a",4),Vo(),Oo(9,LH,6,2,"div",5),No(10,"div",6),No(11,"div",7),wa(12,"Upcoming Classes"),Vo(),Oo(13,VH,2,1,"div",8),Oo(14,FH,2,1,"div",9),Oo(15,UH,21,15,"div",10),Vo(),No(16,"div",6),No(17,"div",7),wa(18,"Skills in Demand"),Vo(),No(19,"div",11),No(20,"div",12),No(21,"button",13),Wo("click",(function(){return t.toggleSkillsInDemand("PieChart")})),Bo(22,"span",14),Vo(),No(23,"button",13),Wo("click",(function(){return t.toggleSkillsInDemand("Table")})),Bo(24,"span",15),Vo(),Vo(),Vo(),No(25,"div",16),Bo(26,"google-chart",17,18),Vo(),Vo(),No(28,"div",6),No(29,"div",7),wa(30,"Earning Tracker"),Vo(),No(31,"div",11),No(32,"div",12),No(33,"button",13),Wo("click",(function(){return t.toggleEarningPeriod("Week")})),wa(34," 1W "),Vo(),No(35,"button",13),Wo("click",(function(){return t.toggleEarningPeriod("Month")})),wa(36," 1M "),Vo(),No(37,"button",13),Wo("click",(function(){return t.toggleEarningPeriod("Quarter")})),wa(38," 1Q "),Vo(),Vo(),Vo(),No(39,"div",16),Bo(40,"google-chart",17,18),Vo(),Vo(),No(42,"div",6),No(43,"div",7),wa(44,"Recent Reviews"),Vo(),No(45,"div",19),Oo(46,qH,3,0,"div",8),Oo(47,zH,9,7,"div",20),Vo(),Oo(48,GH,3,0,"div",21),Vo(),Vo(),Vo()),2&e&&(Ss(4),Sa(Wl(5,29,t.pendingRequestsCount)),Ss(4),Mo("ngIf",0!=t.pendingRequestsCount),Ss(1),Mo("ngIf",t.takeAction&&0!=t.pendingRequestsCount),Ss(4),Mo("ngIf",null!=t.liveMeetingList&&null!=t.meetingList),Ss(1),Mo("ngIf",null!=t.liveMeetingList),Ss(1),Mo("ngForOf",t.meetingList),Ss(6),aa("active","PieChart"==t.skillsChartType),Ss(2),aa("active","Table"==t.skillsChartType),Ss(3),Mo("type",t.skillsChartType)("data",t.skillsData)("options",t.skillsOptions)("width",t.tutorChartWidth)("height",t.tutorChartHeight),Ss(7),aa("active","Week"==t.earningPeriod),Ss(2),aa("active","Month"==t.earningPeriod),Ss(2),aa("active","Quarter"==t.earningPeriod),Ss(3),Mo("type",t.earningTrackerType)("data",t.earningTrackerData)("options",t.earningTrackerOptions)("width",t.tutorChartWidth)("height",t.tutorChartHeight),Ss(6),Mo("ngIf",0==t.recentReviewsList.length),Ss(1),Mo("ngForOf",t.recentReviewsList),Ss(1),Mo("ngIf",t.recentReviewsList.length>3))},directives:[md,pd,TH,xm,Cd],pipes:[px],styles:['body[_ngcontent-%COMP%]{background-color:#f9fafc;height:100%}.card[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7);width:70%;margin-bottom:50px}.progress-Bar[_ngcontent-%COMP%]{width:70%;height:8px;margin-bottom:16px}.outer-progressBar[_ngcontent-%COMP%]{background-color:#ccc;height:inherit;border-radius:8px}.inner-progressBar[_ngcontent-%COMP%]{background-color:#241084;height:inherit;width:0;border-radius:8px}.completeProfileLink[_ngcontent-%COMP%]{color:#241084;cursor:pointer;display:inline-block}.completeProfileLink[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#241084}.dashboardIcons[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:5px}.takeActionLink[_ngcontent-%COMP%]{cursor:pointer}.takeActionLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.widget-information[_ngcontent-%COMP%]{position:relative;height:250px;margin-bottom:30px}.widget-time[_ngcontent-%COMP%]{font-size:11px;color:#e7001a;position:absolute;top:-35px;right:10px}.widget[_ngcontent-%COMP%]{max-height:250px;overflow:hidden}.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#7d0f7d!important}.outer-stars[_ngcontent-%COMP%]{position:absolute;display:inline-block;top:10px;right:5px;font-size:20px;-webkit-text-stroke-color:#fc91fc;-webkit-text-stroke-width:thin}.inner-stars[_ngcontent-%COMP%]{position:absolute;top:0;left:0;white-space:nowrap;overflow:hidden;width:0}.outer-stars[_ngcontent-%COMP%]:before{color:#fff}.inner-stars[_ngcontent-%COMP%]:before, .outer-stars[_ngcontent-%COMP%]:before{content:"\\f005 \\f005 \\f005 \\f005 \\f005";font-family:Font Awesome\\ 5 Free;font-weight:900}.inner-stars[_ngcontent-%COMP%]:before{color:#fc91fc}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.dashboard-container[_ngcontent-%COMP%]   .widget[_ngcontent-%COMP%]   .widget-information[_ngcontent-%COMP%]   .subject-thumbnail[_ngcontent-%COMP%]{width:115px;height:115px}}']}),e})(),$H=(()=>{class e{transform(e){return e.length>100?e.substr(0,100)+" ...":e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_t({name:"shorten",type:e,pure:!0}),e})();function KH(e,t){1&e&&(No(0,"div",5),Bo(1,"img",6),No(2,"div",7),No(3,"span",8),wa(4,"Follow your experts"),Vo(),No(5,"span"),wa(6," Please get a head start by booking an expert of you choice"),Vo(),Vo(),Vo())}function XH(e,t){if(1&e&&(No(0,"span"),wa(1),Vo()),2&e){const e=t.$implicit;Ss(1),Ca("",e.subCategory,", \xa0")}}const JH=function(e){return{"background-image":e}};function QH(e,t){if(1&e){const e=Ho();No(0,"li",9),Bo(1,"div",10),No(2,"div",11),Bo(3,"span",12),Bo(4,"span",13),No(5,"div",14),Bo(6,"div",15),Vo(),Vo(),No(7,"div",16),No(8,"div",17),No(9,"div",18),wa(10," \u20b9"),Bo(11,"span",19),No(12,"span",20),wa(13,"per hour"),Vo(),Vo(),Bo(14,"div",21),No(15,"div"),Bo(16,"span",22),No(17,"span",20),wa(18,"REVIEWS"),Vo(),Vo(),Bo(19,"div",21),No(20,"div"),Bo(21,"span",22),No(22,"span",20),wa(23,"Sessions"),Vo(),Vo(),Vo(),Bo(24,"div",23),ql(25,"shorten"),No(26,"div",24),No(27,"b"),wa(28," Tutors For"),Vo(),No(29,"div",25),Oo(30,XH,2,1,"span",26),Vo(),Vo(),No(31,"button",27),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().viewProfile(i)})),wa(32," View Profile "),Vo(),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(1),Mo("ngStyle",jl(12,JH,"url("+e.profilePictureUrl+")")),Ss(2),Mo("innerHTML",e.fullName,Zn),Ss(1),Mo("innerHTML",e.institute,Zn),Ss(2),oa("width",e.rating,"%"),Ss(5),Mo("innerHTML",e.price1,Zn),Ss(5),Mo("innerHTML",e.reviewCount,Zn),Ss(5),Mo("innerHTML",e.lessonCompleted,Zn),Ss(3),Mo("innerHTML",Wl(25,10,e.description),Zn),Ss(6),Mo("ngForOf",e.areaOfExpertise)}}let ZH=(()=>{class e{constructor(e,t,i){this.httpService=e,this.router=t,this.studentService=i,this.searchResults=[]}ngOnInit(){null!=this.studentService.getStudentProfileDetails().sid?this.fetchAllLinkedTutors():setTimeout(()=>{this.studentProfile=this.studentService.getStudentProfileDetails(),this.fetchAllLinkedTutors()},1e3)}fetchAllLinkedTutors(){this.sid=this.studentService.getStudentProfileDetails().sid,this.httpService.fetchAllLinkedTutors(this.sid).subscribe(e=>{this.searchResults=e})}viewProfile(e){this.router.navigate(["view-tutors"],{queryParams:{page:e.bookingId}})}}return e.\u0275fac=function(t){return new(t||e)(Io(Og),Io(Em),Io(Hy))},e.\u0275cmp=gt({type:e,selectors:[["app-experts"]],decls:6,vars:2,consts:[[1,"search-result-container",2,"margin-top","0","padding-top","70px"],[1,"search-cards-container"],["class","no-recordsfound","style","height: 180px;",4,"ngIf"],[2,"padding","10px"],["class","search-result-card",4,"ngFor","ngForOf"],[1,"no-recordsfound",2,"height","180px"],["src","../../../assets/images/thankyou_bg.svg"],[1,"information-container"],[1,"noinforheader"],[1,"search-result-card"],[1,"result-profile-pic",3,"ngStyle"],[1,"result-card-header"],[1,"result-card-name",3,"innerHTML"],[1,"result-card-specalizaiton",3,"innerHTML"],[1,"stars-outer"],[1,"stars-inner"],[1,"result-card-content"],[1,"numbers-container"],[1,"fee_per_attribute"],[1,"number",2,"display","contents","color","#7d0f7d",3,"innerHTML"],[1,"info"],[1,"separtor"],[1,"number",3,"innerHTML"],[1,"result-card-descirption",3,"innerHTML"],[1,"result-card-tutorsfor"],[1,"tutor-sub"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(No(0,"div",0),No(1,"div",1),Oo(2,KH,7,0,"div",2),No(3,"ul"),No(4,"div",3),Oo(5,QH,33,14,"li",4),Vo(),Vo(),Vo(),Vo()),2&e&&(Ss(2),Mo("ngIf",0==t.searchResults.length),Ss(3),Mo("ngForOf",t.searchResults))},directives:[md,pd,Cd],pipes:[$H],styles:["@media only screen and (-webkit-min-device-pixel-ratio:2) and (max-device-width:812px) and (min-device-width:320px){.search-result-container[_ngcontent-%COMP%]{position:absolute;top:178px!important;display:inline-block;margin-top:0!important;left:-20px;padding-top:0!important}.search-result-container[_ngcontent-%COMP%]   .no-recordsfound[_ngcontent-%COMP%]{margin-left:50px!important;height:250px!important}}"]}),e})();const eU=function(e){return{"background-image":e}};function tU(e,t){if(1&e){const e=Ho();No(0,"div",22),Wo("click",(function(){ei(e);const t=Ko();return t.openProfile(),t.onNavigationClick()})),Vo()}if(2&e){const e=Ko();Mo("ngStyle",jl(1,eU,"url("+e.tutorService.getTutorDetials().profilePictureUrl+")"))}}function iU(e,t){if(1&e){const e=Ho();No(0,"div",22),Wo("click",(function(){ei(e);const t=Ko();return t.openProfile(),t.onNavigationClick()})),Vo()}if(2&e){const e=Ko();Mo("ngStyle",jl(1,eU,"url("+e.studentServce.getStudentProfileDetails().profilePictureUrl+")"))}}function nU(e,t){if(1&e){const e=Ho();No(0,"span",23),Wo("click",(function(){ei(e);const t=Ko();return t.openProfile(),t.onNavigationClick()})),wa(1),Vo()}if(2&e){const e=Ko();Ss(1),Sa(e.studentProfile.fullName)}}function sU(e,t){if(1&e){const e=Ho();No(0,"span",23),Wo("click",(function(){ei(e);const t=Ko();return t.openProfile(),t.onNavigationClick()})),wa(1),Vo()}if(2&e){const e=Ko();Ss(1),Sa(e.tutorProfile.fullName)}}function rU(e,t){1&e&&Bo(0,"span",24)}function oU(e,t){if(1&e&&(No(0,"span",25),No(1,"div",26),No(2,"div",27),Bo(3,"div",28),Vo(),Vo(),Vo()),2&e){const e=Ko();Ss(3),oa("width",e.tutorProfileDetails.profileCompleted,"%")}}function aU(e,t){if(1&e&&(No(0,"span",25),No(1,"div",26),No(2,"div",27),Bo(3,"div",28),Vo(),Vo(),Vo()),2&e){const e=Ko();Ss(3),oa("width",e.studentProfileCompleted,"%")}}function lU(e,t){if(1&e){const e=Ho();No(0,"div",29),No(1,"span"),wa(2,"Your profile is "),No(3,"label"),wa(4),Vo(),wa(5," incomplete."),Vo(),No(6,"span",30),wa(7,"Get a head start by "),No(8,"a",31),Wo("click",(function(){ei(e);const t=Ko();return t.openProfile(),t.onNavigationClick()})),wa(9,"completing it now"),Vo(),Vo(),Vo()}if(2&e){const e=Ko();Ss(4),Ca("",100-e.tutorProfileDetails.profileCompleted,"% ")}}function cU(e,t){if(1&e){const e=Ho();No(0,"div",29),No(1,"span",30),wa(2," You have "),No(3,"label"),wa(4),Vo(),wa(5," left. Please get a head start by "),No(6,"a",31),Wo("click",(function(){ei(e);const t=Ko();return t.openProfile(),t.onNavigationClick()})),wa(7,"completing your profile"),Vo(),Vo(),Vo()}if(2&e){const e=Ko();Ss(4),Ca("",100-e.studentProfileCompleted,"% ")}}function hU(e,t){if(1&e){const e=Ho();No(0,"span"),No(1,"p",32),wa(2,"Available?"),Vo(),No(3,"label",33),No(4,"input",34),Wo("click",(function(){return ei(e),Ko().toggleAvailability()})),Vo(),Bo(5,"span",35),Vo(),Vo()}if(2&e){const e=Ko();Ss(4),Mo("checked",e.checked)}}const dU=function(){return{exact:!0}};function uU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",37),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Dashboard"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function pU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",38),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Dashboard"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function fU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",39),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Experts"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function mU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",40),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Schedule"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function gU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",41),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Recordings"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function vU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",42),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Knowledge Base"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function yU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",43),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Bookings"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function bU(e,t){if(1&e){const e=Ho();No(0,"li",36),No(1,"a",44),Wo("click",(function(){return ei(e),Ko().onNavigationClick()})),wa(2,"Session Notes"),Vo(),Vo()}2&e&&Mo("routerLinkActiveOptions",Fl(1,dU))}function wU(e,t){if(1&e&&(No(0,"mat-option",53),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e),Ss(1),Ca(" ",e," ")}}function SU(e,t){if(1&e){const e=Ho();No(0,"div",45),No(1,"div",46),No(2,"form"),No(3,"button",47),Wo("click",(function(){return ei(e),Ko().displaySelectedSubjects()})),Bo(4,"i",48),Vo(),No(5,"input",49),Wo("ngModelChange",(function(t){return ei(e),Ko().selectedSubject=t})),Vo(),No(6,"mat-autocomplete",50,51),Oo(8,wU,2,2,"mat-option",52),ql(9,"async"),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(7),t=Ko();Ss(5),Mo("formControl",t.myControl)("matAutocomplete",e)("ngModel",t.selectedSubject),Ss(3),Mo("ngForOf",Wl(9,4,t.filteredOptions))}}function CU(e,t){if(1&e&&(No(0,"span",54),wa(1),Vo()),2&e){const e=Ko();Ss(1),Sa(e.getNotificationCount())}}function _U(e,t){1&e&&(No(0,"p"),wa(1,"No new notifications !"),Vo())}function EU(e,t){1&e&&(No(0,"span"),wa(1,"\u2022"),Vo())}function TU(e,t){if(1&e&&(No(0,"div",57),No(1,"div",58),Bo(2,"img",59),Vo(),No(3,"div",60),No(4,"p"),wa(5),Vo(),No(6,"span",61),wa(7),ql(8,"date"),Vo(),Vo(),No(9,"div",62),Oo(10,EU,2,0,"span",9),Vo(),Vo()),2&e){const e=t.$implicit;Ss(2),Mo("src",e.pictureUrl,es),Ss(3),Sa(e.message),Ss(2),Sa(zl(8,4,e.timestamp,"short")),Ss(3),Mo("ngIf",0==e.readStatus)}}function xU(e,t){if(1&e&&(No(0,"div",55),No(1,"h3"),wa(2,"Notifications"),Vo(),Oo(3,_U,2,0,"p",9),Oo(4,TU,11,7,"div",56),Vo()),2&e){const e=Ko();Ss(3),Mo("ngIf",0==e.notifications.length),Ss(1),Mo("ngForOf",e.notifications)}}let kU=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c,h,d){this.router=e,this.meetingService=t,this.studentServce=i,this.loginService=n,this.tutorService=s,this.dialog=r,this.httpService=o,this.studentService=a,this.cookieService=l,this.breakpointObserver=c,this.locationStrategy=h,this.notificationService=d,this.checked=!1,this.joinMeeting=new Py,this.hostMeeting=new Py,this.studentProfile=new By,this.tutorProfile=new oT,this.tutorProfileDetails=new Iy,this.dashboardUrl="/home/studentDashboard",this.studentLoginDetails=new Fy,this.notificationCount=0,this.profilePictureUrl="../../../assets/images/default-user-image.png",this.options=["Tools","Marketing","Content","Project Management","Sales","E-comm","Industry Consulation","Strategy","Finance","HR","Operations","IT Support"],this.myControl=new Fv,this.toggleNavigation=!1,this.notifications=[],this.showNotifications=!1,this.getScreenSize()}getScreenSize(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}ngOnInit(){this.preventBackButton(),this.toggleNavigation=!0,this.breakpointObserver.observe(["(min-width: 800px)"]).subscribe(e=>{e.matches?this.openNav():this.closeNav()}),this.isTokenValid()?(this.loginType=this.loginService.getLoginType(),this.loginType&&"Learner"==this.loginType&&null!=this.studentService.getStudentProfileDetails().fullName?(this.studentProfile=this.studentServce.getStudentProfileDetails(),null==this.studentServce.getStudentProfileDetails().profilePictureUrl&&(this.studentServce.getStudentProfileDetails().profilePictureUrl=this.profilePictureUrl),this.calculateStudentProfilePercentage(),this.router.navigate(["home/student-dashboard"]),"signUp"==this.loginService.getTrType()&&this.dialog.open(fk,{width:"auto",height:"auto"})):this.loginType&&"Expert"==this.loginType&&null!=this.tutorService.getTutorDetials().fullName?(this.tutorProfile=this.tutorService.getTutorDetials(),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),null==this.tutorService.getTutorDetials().profilePictureUrl&&(this.tutorService.getTutorDetials().profilePictureUrl=this.profilePictureUrl),this.checked="yes"==this.tutorService.getPersonalAvailabilitySchedule().isAvailable,this.router.navigate(["home/tutor-dashboard"]),"signUp"==this.loginService.getTrType()&&this.dialog.open(fk,{width:"auto",height:"auto"})):this.handleRefresh(),this.initialiseNotifications()):this.router.navigate([""]),this.filteredOptions=this.myControl.valueChanges.pipe(Xu(""),B(e=>this._filter(e)))}initialiseNotifications(){this.notificationService.fetchNotification(),this.notificationService.notificationsChanged.subscribe(e=>{this.notifications=e})}displayNotifications(){this.showNotifications=!this.showNotifications}getNotificationCount(){return this.notificationService.getNotificationCount()}onNavigationClick(){this.screenWidth<=500&&this.closeNav()}toFacade(){this.router.navigate([""])}openNav(){this.screenWidth>=450?(document.getElementById("sidenav").style.width="230px",document.getElementById("mainContent").style.marginLeft="230px"):document.getElementById("sidenav").style.width="100%",this.toggleNavigation=!0}closeNav(){document.getElementById("sidenav").style.width="0px",document.getElementById("mainContent").style.marginLeft="0px",this.toggleNavigation=!1,setTimeout(()=>{"230px"==document.getElementById("sidenav").style.width&&(document.getElementById("sidenav").style.width="0px",document.getElementById("mainContent").style.marginLeft="0px")},100)}navAction(e){e%2==1?(this.index=e+1,this.closeNav()):(this.index=e+1,this.openNav())}toggleNav(){this.toggleNavigation?this.closeNav():this.openNav()}isTokenValid(){return!(!this.cookieService.get("token")||this.isTokenExpired())||(this.cookieService.delete("token"),this.cookieService.delete("userId"),!1)}calculateStudentProfilePercentage(){var e=2;null!=this.studentProfile.dateOfBirth&&(e+=1),null!=this.studentProfile.contact&&(e+=1),null!=this.studentProfile.learningAreas&&(e+=1),null!=this.studentProfile.profilePictureUrl&&(e+=1),e<=6&&(this.studentProfileCompleted=Math.trunc(e/6*100))}isTokenExpired(e){if(e||(e=this.getToken()),!e)return!0;const t=this.getTokenExpirationDate(e);return void 0!==t&&!(t.valueOf()>(new Date).valueOf())}getTokenExpirationDate(e){const t=mk(e);if(void 0===t.exp)return null;const i=new Date(0);return i.setUTCSeconds(t.exp),i}getToken(){return this.cookieService.get("token")}toggleAvailability(){1==this.checked?(this.checked=!1,this.tutorService.personalAvailablitySchedule.isAvailable="no"):(this.checked=!0,this.tutorService.personalAvailablitySchedule.isAvailable="yes"),this.httpService.changeAvailabilityStatus(this.tutorService.getPersonalAvailabilitySchedule().tid,this.tutorService.getPersonalAvailabilitySchedule().isAvailable).subscribe(e=>{})}onSignOut(){this.cookieService.delete("token"),this.cookieService.delete("userId"),this.loginService.setLoginType(null),this.loginService.setTrType(null),this.router.navigate([""])}openProfile(){"Learner"==this.loginType?this.router.navigate(["home/student-profile"]):"Expert"==this.loginType&&this.router.navigate(["home/profile"])}_filter(e){const t=e.toLowerCase();return this.options.filter(e=>e.toLowerCase().includes(t))}displaySelectedSubjects(){this.selectedSubject&&(this.loginService.setLoginType(this.loginType),this.router.navigate(["search-results"],{queryParams:{subject:this.selectedSubject}}))}preventBackButton(){history.pushState(null,null,location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,null,location.href)})}handleRefresh(){this.userId=this.cookieService.get("userId"),"Learner"==mk(this.cookieService.get("token")).ROLE?(this.loginType="Learner",this.loginService.setTrType("login"),this.loginService.setLoginType(this.loginType),this.httpService.getStudentDetails(this.userId).subscribe(e=>{this.studentProfile=e,this.calculateStudentProfilePercentage(),this.studentService.setStudentProfileDetails(this.studentProfile),null==this.studentServce.getStudentProfileDetails().profilePictureUrl&&(this.studentServce.getStudentProfileDetails().profilePictureUrl=this.profilePictureUrl),this.httpService.getStudentSchedule(this.userId).subscribe(e=>{this.studentService.setStudentBookings(e)}),this.initialiseNotifications()})):"Expert"==mk(this.cookieService.get("token")).ROLE&&(this.loginType="Expert",this.loginService.setTrType("login"),this.loginService.setLoginType(this.loginType),this.httpService.getTutorDetails(this.userId).subscribe(e=>{this.tutorProfile=e,this.tutorService.setTutorDetails(this.tutorProfile),this.httpService.getTutorProfileDetails(this.userId).subscribe(e=>{this.tutorProfileDetails=e,null==this.tutorService.getTutorDetials().profilePictureUrl&&(this.tutorService.getTutorDetials().profilePictureUrl=this.profilePictureUrl),this.tutorService.setTutorProfileDetails(e),this.httpService.getScheduleData(this.tutorProfile.bookingId).subscribe(e=>{this.tutorService.setPersonalAvailabilitySchedule(e),this.checked="yes"==this.tutorService.getPersonalAvailabilitySchedule().isAvailable}),this.initialiseNotifications()})}))}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(Vy),Io(Hy),Io(jy),Io(aT),Io(eT),Io(Og),Io(Hy),Io(Dx),Io(OE),Io(kh),Io(cT))},e.\u0275cmp=gt({type:e,selectors:[["app-home"]],hostBindings:function(e,t){1&e&&Wo("resize",(function(e){return t.getScreenSize(e)}),!1,zi)},decls:37,vars:29,consts:[["id","sidenav",1,"sidenav"],[1,"material-icons","close","closeButton",2,"cursor","pointer",3,"click"],[1,"profile-section-sidenav"],["class","profile-thumbnail","style","cursor: pointer",3,"ngStyle","click",4,"ngIf"],[1,"profile-secondaryinformaiton"],["class","profile-varient","style","cursor: pointer",3,"click",4,"ngIf"],["class","profile-varient",4,"ngIf"],["class","progressbar-container",4,"ngIf"],["class","progressbar-information",4,"ngIf"],[4,"ngIf"],[1,"navbar-nav"],["class","nav-item","routerLinkActive","nav-item-active",3,"routerLinkActiveOptions",4,"ngIf"],["id","mainContent",1,"main-content",2,"position","relative"],["id","headerContent",1,"header",2,"position","unset"],[1,"fa","fa-bars","hum-burger",3,"click"],[1,"logo",3,"click"],["class","search-box-container",4,"ngIf"],[1,"dropdown-icon-container"],[1,"fa","fa-sign-out-alt",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell",2,"cursor","pointer","margin-right","20px","position","relative",3,"click"],["class","notificationNum",4,"ngIf"],["class","box",4,"ngIf"],[1,"profile-thumbnail",2,"cursor","pointer",3,"ngStyle","click"],[1,"profile-varient",2,"cursor","pointer",3,"click"],[1,"profile-varient"],[1,"progressbar-container"],[1,"progress-Bar"],[1,"outer-progressBar"],[1,"inner-progressBar"],[1,"progressbar-information"],[1,"hyperlink-cont"],["href","javascript:;",3,"click"],[2,"display","inline","margin","5px"],[1,"switch"],["type","checkbox",3,"checked","click"],[1,"slider","round"],["routerLinkActive","nav-item-active",1,"nav-item",3,"routerLinkActiveOptions"],["routerLink","/home/student-dashboard",1,"nav-link",3,"click"],["routerLink","/home/tutor-dashboard",1,"nav-link",3,"click"],["routerLink","/home/experts",1,"nav-link",3,"click"],["routerLink","tutor-schedule",1,"nav-link",3,"click"],["routerLink","recordings",1,"nav-link",3,"click"],["routerLink","knowledge-base",1,"nav-link",3,"click"],["routerLink","student-bookings",1,"nav-link",3,"click"],["routerLink","session-notes",1,"nav-link",3,"click"],[1,"search-box-container"],[1,"input-group"],[1,"searchButton",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["type","search","name","search","placeholder","Find Tutor by Subjects",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"notificationNum"],[1,"box"],["class","notify_item",4,"ngFor","ngForOf"],[1,"notify_item"],[1,"notify_img"],["alt","img",2,"border-radius","50%","width","40px","height","40px",3,"src"],[1,"notify_ingo"],[1,"notify_time"],[1,"notify_read"]],template:function(e,t){1&e&&(No(0,"body"),No(1,"div",0),No(2,"span",1),Wo("click",(function(){return t.closeNav()})),wa(3," close "),Vo(),No(4,"div",2),Oo(5,tU,1,3,"div",3),Oo(6,iU,1,3,"div",3),No(7,"div",4),Oo(8,nU,2,1,"span",5),Oo(9,sU,2,1,"span",5),Oo(10,rU,1,0,"span",6),Oo(11,oU,4,2,"span",7),Oo(12,aU,4,2,"span",7),Oo(13,lU,10,1,"div",8),Oo(14,cU,8,1,"div",8),Oo(15,hU,6,1,"span",9),Vo(),Vo(),No(16,"ul",10),Oo(17,uU,3,2,"li",11),Oo(18,pU,3,2,"li",11),Oo(19,fU,3,2,"li",11),Oo(20,mU,3,2,"li",11),Oo(21,gU,3,2,"li",11),Oo(22,vU,3,2,"li",11),Oo(23,yU,3,2,"li",11),Oo(24,bU,3,2,"li",11),Vo(),Vo(),No(25,"div",12),Bo(26,"div"),No(27,"div",13),No(28,"span",14),Wo("click",(function(){return t.toggleNav()})),Vo(),No(29,"div",15),Wo("click",(function(){return t.toFacade()})),Vo(),Oo(30,SU,10,6,"div",16),No(31,"div",17),No(32,"span",18),Wo("click",(function(){return t.onSignOut()})),Vo(),No(33,"span",19),Wo("click",(function(){return t.displayNotifications()})),Oo(34,CU,2,1,"span",20),Vo(),Oo(35,xU,5,2,"div",21),Vo(),Vo(),Bo(36,"router-outlet"),Vo(),Vo()),2&e&&(Ss(4),aa("hideBlock",!t.toggleNavigation),Ss(1),Mo("ngIf","Expert"==t.loginType),Ss(1),Mo("ngIf","Learner"==t.loginType),Ss(2),Mo("ngIf","Learner"==t.loginType),Ss(1),Mo("ngIf","Expert"==t.loginType),Ss(1),Mo("ngIf",null!=t.subject),Ss(1),Mo("ngIf",100!=t.tutorProfileDetails.profileCompleted&&"Expert"==t.loginType),Ss(1),Mo("ngIf","Learner"==t.loginType&&t.studentProfileCompleted&&100!=t.studentProfileCompleted),Ss(1),Mo("ngIf",100!=t.tutorProfileDetails.profileCompleted&&"Expert"==t.loginType),Ss(1),Mo("ngIf","Learner"==t.loginType&&t.studentProfileCompleted&&100!=t.studentProfileCompleted),Ss(1),Mo("ngIf","Expert"==t.loginType&&100==t.tutorProfileDetails.profileCompleted),Ss(1),aa("hideBlock",!t.toggleNavigation),Ss(1),Mo("ngIf","Learner"==t.loginType),Ss(1),Mo("ngIf","Expert"==t.loginType),Ss(1),Mo("ngIf","Learner"==t.loginType),Ss(1),Mo("ngIf","Expert"==t.loginType),Ss(1),Mo("ngIf","Expert"==t.loginType),Ss(1),Mo("ngIf","Expert"==t.loginType),Ss(1),Mo("ngIf","Learner"==t.loginType),Ss(1),Mo("ngIf","Learner"==t.loginType),Ss(2),la(t.overlay),Ss(1),aa("expertNavHeight","Expert"==t.loginType),Ss(3),Mo("ngIf","Learner"==t.loginType),Ss(4),Mo("ngIf",0!=t.getNotificationCount()),Ss(1),Mo("ngIf",t.showNotifications))},directives:[md,Im,Cd,Am,xm,Zv,Gg,Wv,Bg,SA,zg,iy,vA,pd,hE],pipes:[Ad,Dd],styles:['body[_ngcontent-%COMP%]{height:100%}.progressbar-container[_ngcontent-%COMP%]{display:block;float:left;width:100%;margin-top:10px;margin-bottom:10px}.progressbar-information[_ngcontent-%COMP%]{text-transform:none;font-size:12px}.progressbar-information[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#fff}.progressbar-information[_ngcontent-%COMP%]   .hyperlink-cont[_ngcontent-%COMP%]{line-height:12px}.progressbar-information[_ngcontent-%COMP%]   .hyperlink-cont[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px;text-decoration:underline}.navbar-brand[_ngcontent-%COMP%]{margin-left:3vw;margin-right:22vw}.marginZero[_ngcontent-%COMP%]{margin:0}.paddingZero[_ngcontent-%COMP%]{padding:0}.image[_ngcontent-%COMP%]{width:50vw;height:17vh}img[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%}input[type=text][_ngcontent-%COMP%]{resize:vertical}p[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{margin-right:1vw;padding:7px}.userButton[_ngcontent-%COMP%]{padding:5px;background:none;outline:none;border:none;color:#ccc}.userButton[_ngcontent-%COMP%]:hover{border:1px solid #ccc;border-radius:4px}.navbar-brand[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:500;margin-left:10px;border-radius:5px;cursor:pointer}.berlinText[_ngcontent-%COMP%]{font-family:custom}.switch[_ngcontent-%COMP%]{margin-top:13px;position:relative;display:inline-block;width:35px;height:15px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;left:0;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:22px;width:22px;bottom:-3px;background-color:#fff;-webkit-transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#5cb85c}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #5cb85c}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(17px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.leftBox[_ngcontent-%COMP%]{border-right:1px solid #a4a2a2}.learningArea-fields[_ngcontent-%COMP%]{margin-bottom:2.5vh}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btn-circle.btn-sm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:15px;font-size:8px;padding:0 0 6px;text-align:center}.btn-success[_ngcontent-%COMP%]{margin-right:3vw}label[_ngcontent-%COMP%]{font-size:small;color:#000}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:5;top:0;left:0;background-color:#3f023f;overflow-x:hidden;transition:.5s;padding-top:60px}.sidenav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item-active[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#7d0f7d}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:15px;color:#fff;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}#headerContent[_ngcontent-%COMP%], #mainContent[_ngcontent-%COMP%]{transition:margin-left .5s}.header[_ngcontent-%COMP%]{height:60px;background:#fff;border-bottom:1px solid rgba(177,165,165,.48);width:100%;display:block;float:left;box-shadow:0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important}.closeButton[_ngcontent-%COMP%]{display:none}.profile-section-sidenav[_ngcontent-%COMP%]{width:100%;display:flex;position:relative;margin-bottom:10px}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-thumbnail[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:100px;background-size:cover;background-repeat:no-repeat;background-position:50%;box-shadow:10px 10px 23px -16px rgba(0,0,0,.46);border:1px solid #dbdbdb;position:absolute;left:40px}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-secondaryinformaiton[_ngcontent-%COMP%]{color:#fff;width:100%;text-align:center;text-transform:uppercase;margin-top:160px}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-secondaryinformaiton[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;float:left;width:100%}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-secondaryinformaiton[_ngcontent-%COMP%]   .profile-varient[_ngcontent-%COMP%]{font-size:16px;color:#fff}.progress-Bar[_ngcontent-%COMP%]{height:8px;width:40%;margin:auto}.outer-progressBar[_ngcontent-%COMP%]{background-color:#fff;height:inherit}.inner-progressBar[_ngcontent-%COMP%]{background-color:#e30084;height:inherit;width:0}.item-one[_ngcontent-%COMP%]{margin-top:2.5rem}.hideBlock[_ngcontent-%COMP%]{display:none}.expertNavHeight[_ngcontent-%COMP%]{height:65px!important}.notificationNum[_ngcontent-%COMP%]{background-color:red;position:absolute;padding-left:7px;padding-right:7px;border-radius:45%;line-height:20px;color:#fff;top:-6px}.box[_ngcontent-%COMP%]{background:#fff;border:1px solid #3f023f;box-shadow:0 2px 34px 0 rgb(0 0 0/9%);border-radius:12px;width:350px;padding:10px;position:absolute;float:left;top:42px;right:0;z-index:1000}.notify_item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 0;border-bottom:1px solid #dbdaff}.notify_item[_ngcontent-%COMP%]:last-child{border-bottom:0}.notify_img[_ngcontent-%COMP%]{margin-right:15px}.notify_time[_ngcontent-%COMP%]{color:#c5c5a6;font-size:12px}.notify_read[_ngcontent-%COMP%]{font-size:25px;margin-left:10px}']}),e})(),AU=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-knowledge-base"]],decls:55,vars:0,consts:[[2,"padding-top","90px"],[1,"work-in-progress"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"primary-container",2,"display","none"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"sort-container",2,"right","0"],[2,"margin-right","1rem"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],["href","javascript:;",1,"dropdown-item"],[1,"content-container"],["scope","col"],["scope","row","data-label","Thumbnail"],["src","assets/images/thumbnail_img.png"],["data-label","Name,Date,Duration",1,"name-information"]],template:function(e,t){1&e&&(No(0,"div",0),No(1,"div",1),Bo(2,"img",2),No(3,"div",3),No(4,"span",4),wa(5,"Work in Progress"),Vo(),No(6,"span"),wa(7,"For better Tomorrow"),Vo(),Vo(),Vo(),Vo(),No(8,"div",5),No(9,"div",6),No(10,"ol",7),No(11,"li"),No(12,"a",8),wa(13,"Home"),Vo(),Vo(),No(14,"li",9),wa(15,"Knowledge Base"),Vo(),Vo(),Vo(),No(16,"div",10),No(17,"span"),No(18,"select",11),No(19,"option"),wa(20,"Sort By"),Vo(),No(21,"option"),wa(22,"Option 1"),Vo(),Vo(),Vo(),No(23,"span",12),No(24,"button",13),wa(25," Upload "),Vo(),No(26,"div",14),No(27,"a",15),wa(28,"Web Link"),Vo(),No(29,"a",15),wa(30,"Upload File"),Vo(),Vo(),Vo(),Vo(),No(31,"div",16),No(32,"table"),No(33,"thead"),No(34,"tr"),No(35,"th",17),wa(36,"Thumbnail"),Vo(),No(37,"th",17),wa(38,"Name,Date,Duration"),Vo(),Vo(),Vo(),No(39,"tbody"),No(40,"tr"),No(41,"td",18),Bo(42,"img",19),Vo(),No(43,"td",20),No(44,"span"),wa(45,"By:Name"),Vo(),No(46,"span"),wa(47,"August 4th 2020, 10:30 PM"),Vo(),No(48,"span"),wa(49,"30 mins"),Vo(),Vo(),Vo(),No(50,"tr"),No(51,"td",18),Bo(52,"img",19),Vo(),No(53,"td",20),wa(54,"@mdo"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo())},directives:[vv,Sv],styles:[".sort-container[_ngcontent-%COMP%]{margin-bottom:2rem;display:inline-flex;right:1rem;text-align:right;margin-top:1 rem}.form-control[_ngcontent-%COMP%]{float:right}"]}),e})();var OU=n("a1+y");let DU=(()=>{class e{constructor(t){this.config=t,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=e.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}checkSystemRequirements(){return this.AgoraRTC.checkSystemRequirements()}createClient(e,t=!0,i,n){return this.client=this.AgoraRTC.createClient(e),t&&this.init(this.config.AppID,i,n),this.client}createStream(e){if(!e.microphoneId&&this.audioDevices&&this.audioDevices.length&&(e.microphoneId=this.audioDevices[0].deviceId),!e.cameraId&&this.videoDevices&&this.videoDevices.length){const t=this.videoDevices[0].deviceId;e.cameraId=e.cameraId||t}return this.AgoraRTC.createStream(e)}init(e,t,i){this.client.init(e,t,i)}collectDevices(){this.AgoraRTC.getDevices(e=>{const t=e.filter(e=>"audioinput"===e.kind&&"default"!==e.deviceId),i=e.filter(e=>"videoinput"===e.kind&&"default"!==e.deviceId);this.audioDevices=t,this.videoDevices=i})}}return e.\u0275fac=function(t){return new(t||e)(Je("config"))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e.AgoraRTC=OU,e.ngInjectableDef=pe({factory:function(){return new e(Qe("config"))},token:e,providedIn:"root"}),e})(),IU=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[DU,{provide:"config",useValue:t}]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})();class RU{}let PU=(()=>{class e{transform(e){const t=Math.floor(e/3600),i=Math.floor(e%3600/60);return("00"+t).slice(-2)+":"+("00"+i).slice(-2)+":"+("00"+Math.floor(e-60*i)).slice(-2)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=_t({name:"formatTime",type:e,pure:!0}),e})();const MU=["canvas"],LU=["canvasScreenShare"],NU=["chatWindow"];function VU(e,t){1&e&&(No(0,"div",49),No(1,"p",50),wa(2,"Camera is off"),Vo(),Vo())}function BU(e,t){1&e&&(No(0,"div",53),No(1,"span",54),wa(2,"mic_off"),Vo(),No(3,"span",55),wa(4,"\xa0Microphone off"),Vo(),Vo())}function FU(e,t){1&e&&(No(0,"div",53),No(1,"span",54),wa(2,"mic"),Vo(),No(3,"span",55),wa(4,"\xa0Microphone on"),Vo(),Vo())}function jU(e,t){if(1&e&&(No(0,"div",51),Oo(1,BU,5,0,"div",52),Oo(2,FU,5,0,"div",52),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf","unmute host mic"==e.muteHostAudioStatus),Ss(1),Mo("ngIf","mute host mic"==e.muteHostAudioStatus)}}function HU(e,t){1&e&&(No(0,"span",54),wa(1,"mic_off "),Vo())}function UU(e,t){1&e&&(No(0,"span",54),wa(1,"mic "),Vo())}function qU(e,t){1&e&&(No(0,"span",54),wa(1," videocam_off "),Vo())}function WU(e,t){1&e&&(No(0,"span",54),wa(1," videocam "),Vo())}function zU(e,t){if(1&e&&(No(0,"span",56),No(1,"span"),wa(2),ql(3,"formatTime"),Vo(),Vo()),2&e){const e=Ko();Ss(2),Sa(Wl(3,1,e.timeLeft))}}function GU(e,t){if(1&e&&(No(0,"span",56),No(1,"span"),wa(2),ql(3,"formatTime"),Vo(),Vo()),2&e){const e=Ko();Ss(2),Sa(Wl(3,1,e.timeLeft))}}function YU(e,t){1&e&&Bo(0,"i",62)}function $U(e,t){1&e&&Bo(0,"i",63)}function KU(e,t){if(1&e){const e=Ho();No(0,"button",59),Wo("click",(function(){return ei(e),Ko(2).expandScreen()})),Oo(1,YU,1,0,"i",60),Oo(2,$U,1,0,"i",61),Vo()}if(2&e){const e=Ko(2);Ss(1),Mo("ngIf",!e.expandedScreen),Ss(1),Mo("ngIf",e.expandedScreen)}}function XU(e,t){1&e&&(No(0,"div",35),No(1,"span",36),wa(2," videocam_off "),Vo(),Vo())}function JU(e,t){if(1&e&&(No(0,"div",57),No(1,"p",37),wa(2),Vo(),Oo(3,KU,3,2,"button",58),Oo(4,XU,3,0,"div",41),Vo()),2&e){const e=t.$implicit,i=Ko();Mo("id",e),Ss(2),Ca(" ",i.peerName," "),Ss(1),Mo("ngIf",i.expandEnabled),Ss(1),Mo("ngIf",i.remoteVideoMute)}}function QU(e,t){1&e&&(No(0,"div",35),No(1,"span",36),wa(2," videocam_off "),Vo(),Vo())}function ZU(e,t){if(1&e){const e=Ho();No(0,"div",64),No(1,"button",65),Wo("click",(function(){return ei(e),Ko().erase()})),Bo(2,"img",66),Vo(),No(3,"button",65),Wo("click",(function(t){return ei(e),Ko().pencil(t,"red")})),Bo(4,"img",67),Vo(),No(5,"button",65),Wo("click",(function(t){return ei(e),Ko().pencil(t,"blue")})),Bo(6,"img",68),Vo(),No(7,"button",65),Wo("click",(function(t){return ei(e),Ko().pencil(t,"black")})),Bo(8,"img",69),Vo(),No(9,"button",65),Wo("click",(function(){return ei(e),Ko().undo()})),Bo(10,"img",70),Vo(),No(11,"button",65),Wo("click",(function(){return ei(e),Ko().redo()})),Bo(12,"img",71),Vo(),No(13,"button",72),Wo("click",(function(){return ei(e),Ko().reset()})),wa(14," Reset "),Vo(),Vo()}}function eq(e,t){1&e&&Bo(0,"div",46),2&e&&Mo("id",t.$implicit)}function tq(e,t){1&e&&(No(0,"div",103),wa(1," File size exceeded..upload upto 100 MB "),Vo())}function iq(e,t){if(1&e){const e=Ho();No(0,"div",98),Oo(1,tq,2,0,"div",99),No(2,"div"),wa(3),Vo(),No(4,"div"),wa(5),Vo(),No(6,"div",100),No(7,"button",101),Wo("click",(function(){return ei(e),Ko(2).closeFileUploadedBox()})),wa(8," Close "),Vo(),No(9,"button",102),Wo("click",(function(){return ei(e),Ko(2).getBase64()})),wa(10," Send "),Vo(),Vo(),Vo()}if(2&e){const e=Ko(2);Ss(1),Mo("ngIf",e.fileSizeExceeded),Ss(2),Sa(e.fileName),Ss(2),Sa(e.fileSize),Ss(4),Mo("disabled",e.fileSizeExceeded)}}function nq(e,t){if(1&e&&(No(0,"p"),wa(1),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Sa(e.messageText)}}function sq(e,t){1&e&&Bo(0,"img",116),2&e&&Mo("src",Ko(3).$implicit.dataSource,es)}function rq(e,t){if(1&e&&(No(0,"div",117),wa(1),Vo()),2&e){const e=Ko(3).$implicit;Ss(1),Ca(" ",e.fileName," ")}}function oq(e,t){if(1&e&&(No(0,"div",111),Oo(1,sq,1,1,"img",112),Oo(2,rq,2,1,"div",113),No(3,"a",114),Bo(4,"img",115),Vo(),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Mo("ngIf","image/jpeg"==e.fileType),Ss(1),Mo("ngIf","image/jpeg"!=e.fileType),Ss(1),Mo("href",e.dataSource,es)("download",e.fileName)}}function aq(e,t){if(1&e&&(No(0,"div",106),No(1,"div",107),No(2,"div",108),No(3,"b",109),wa(4),Vo(),Oo(5,nq,2,1,"p",48),Oo(6,oq,5,4,"div",110),Vo(),Vo(),Vo()),2&e){const e=Ko().$implicit;Ss(4),Sa(e.senderName),Ss(1),Mo("ngIf",!e.dataSource),Ss(1),Mo("ngIf",!e.messageText)}}function lq(e,t){if(1&e&&(No(0,"p"),wa(1),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Sa(e.messageText)}}function cq(e,t){1&e&&Bo(0,"img",116),2&e&&Mo("src",Ko(3).$implicit.dataSource,es)}function hq(e,t){if(1&e&&(No(0,"div",117),wa(1),Vo()),2&e){const e=Ko(3).$implicit;Ss(1),Ca(" ",e.fileName," ")}}function dq(e,t){if(1&e&&(No(0,"div",111),Oo(1,cq,1,1,"img",112),Oo(2,hq,2,1,"div",113),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Mo("ngIf","image/jpeg"==e.fileType),Ss(1),Mo("ngIf","image/jpeg"!=e.fileType)}}function uq(e,t){if(1&e&&(No(0,"div",118),No(1,"div",119),Oo(2,lq,2,1,"p",48),Oo(3,dq,3,2,"div",110),Vo(),Vo()),2&e){const e=Ko().$implicit;Ss(2),Mo("ngIf",!e.dataSource),Ss(1),Mo("ngIf",!e.messageText)}}function pq(e,t){if(1&e&&(No(0,"div"),Oo(1,aq,7,3,"div",104),Oo(2,uq,4,2,"div",105),Vo()),2&e){const e=t.$implicit,i=Ko(2);Ss(1),Mo("ngIf",e.senderId!=i.senderId),Ss(1),Mo("ngIf",e.senderId==i.senderId)}}function fq(e,t){1&e&&(No(0,"span",95),wa(1," videocam_off "),Vo())}function mq(e,t){1&e&&(No(0,"span",95),wa(1," videocam "),Vo())}function gq(e,t){1&e&&(No(0,"span",95),wa(1,"mic_off "),Vo())}function vq(e,t){1&e&&(No(0,"span",95),wa(1,"mic "),Vo())}function yq(e,t){1&e&&(No(0,"span",95),wa(1,"stop_screen_share "),Vo())}function bq(e,t){1&e&&(No(0,"span",95),wa(1,"screen_share "),Vo())}function wq(e,t){if(1&e){const e=Ho();No(0,"button",90),Wo("click",(function(){return ei(e),Ko(2).openWhiteBoard()})),Bo(1,"img",120),Vo()}}function Sq(e,t){1&e&&Bo(0,"span",121)}function Cq(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",73),No(2,"button",74),Wo("click",(function(){return ei(e),Ko().closeSideNav()})),Bo(3,"img",75),Vo(),No(4,"div",76),No(5,"div",77),No(6,"h1",78),wa(7,"Meeting Chat"),Vo(),Vo(),No(8,"div",79,80),Oo(10,iq,11,4,"div",81),Oo(11,pq,3,2,"div",82),Vo(),No(12,"div",83),No(13,"div",84),No(14,"div",85),No(15,"input",86),Wo("ngModelChange",(function(t){return ei(e),Ko().messageText=t}))("keydown",(function(t){return ei(e),Ko().handleSubmit(t)})),Vo(),No(16,"button",87),Wo("click",(function(){return ei(e),Ko().sendChatMessage()})),Bo(17,"img",88),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(18,"div",89),No(19,"div",20),No(20,"button",90),Wo("click",(function(){return ei(e),Ko().muteVideo()})),Oo(21,fq,2,0,"span",91),Oo(22,mq,2,0,"span",91),Vo(),No(23,"button",90),Wo("click",(function(){return ei(e),Ko().muteAudio()})),Oo(24,gq,2,0,"span",91),Oo(25,vq,2,0,"span",91),Vo(),No(26,"button",92),Wo("click",(function(){return ei(e),Ko().screenShare()})),Oo(27,yq,2,0,"span",91),Oo(28,bq,2,0,"span",91),Vo(),Oo(29,wq,2,0,"button",93),No(30,"button",94),Wo("click",(function(){return ei(e),Ko().openChatWindow()})),No(31,"span",95),wa(32,"chat "),Vo(),Oo(33,Sq,1,0,"span",96),Vo(),No(34,"button",97),Wo("click",(function(){return ei(e),Ko().stopStream()})),No(35,"span",95),wa(36," call_end "),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(9),t=Ko();Ss(8),Mo("scrollTop",e.scrollHeight),Ss(2),Mo("ngIf",t.fileUploadedBox),Ss(1),Mo("ngForOf",t.meetingChat),Ss(4),Mo("ngModel",t.messageText),Ss(6),Mo("ngIf","unmute host video"==t.muteHostVideoStatus),Ss(1),Mo("ngIf","mute host video"==t.muteHostVideoStatus),Ss(2),Mo("ngIf","unmute host mic"==t.muteHostAudioStatus),Ss(1),Mo("ngIf","mute host mic"==t.muteHostAudioStatus),Ss(1),Mo("disabled",0!=t.screenRemoteCalls.length),Ss(1),Mo("ngIf",0==t.hostScreenShareStatus),Ss(1),Mo("ngIf",1==t.hostScreenShareStatus),Ss(1),Mo("ngIf",t.screenWidth>=700),Ss(4),Mo("ngIf",t.newMessageNotification)}}function _q(e,t){1&e&&(No(0,"div",103),wa(1," File size exceeded..upload upto 100 MB "),Vo())}function Eq(e,t){if(1&e){const e=Ho();No(0,"div",124),Oo(1,_q,2,0,"div",99),No(2,"div"),wa(3),Vo(),No(4,"div"),wa(5),Vo(),No(6,"div",100),No(7,"button",101),Wo("click",(function(){return ei(e),Ko(2).closeFileUploadedBox()})),wa(8," Close "),Vo(),No(9,"button",102),Wo("click",(function(){return ei(e),Ko(2).getBase64()})),wa(10," Send "),Vo(),Vo(),Vo()}if(2&e){const e=Ko(2);Ss(1),Mo("ngIf",e.fileSizeExceeded),Ss(2),Sa(e.fileName),Ss(2),Sa(e.fileSize),Ss(4),Mo("disabled",e.fileSizeExceeded)}}function Tq(e,t){if(1&e&&(No(0,"p"),wa(1),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Sa(e.messageText)}}function xq(e,t){1&e&&Bo(0,"img",116),2&e&&Mo("src",Ko(3).$implicit.dataSource,es)}function kq(e,t){if(1&e&&(No(0,"div",117),wa(1),Vo()),2&e){const e=Ko(3).$implicit;Ss(1),Ca(" ",e.fileName," ")}}function Aq(e,t){if(1&e&&(No(0,"div",111),Oo(1,xq,1,1,"img",112),Oo(2,kq,2,1,"div",113),No(3,"a",114),Bo(4,"img",115),Vo(),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Mo("ngIf","image/jpeg"==e.fileType),Ss(1),Mo("ngIf","image/jpeg"!=e.fileType),Ss(1),Mo("href",e.dataSource,es)("download",e.fileName)}}function Oq(e,t){if(1&e&&(No(0,"div",106),No(1,"div",107),No(2,"div",108),No(3,"b",109),wa(4),Vo(),Oo(5,Tq,2,1,"p",48),Oo(6,Aq,5,4,"div",110),Vo(),Vo(),Vo()),2&e){const e=Ko().$implicit;Ss(4),Sa(e.senderName),Ss(1),Mo("ngIf",!e.dataSource),Ss(1),Mo("ngIf",!e.messageText)}}function Dq(e,t){if(1&e&&(No(0,"p"),wa(1),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Sa(e.messageText)}}function Iq(e,t){1&e&&Bo(0,"img",116),2&e&&Mo("src",Ko(3).$implicit.dataSource,es)}function Rq(e,t){if(1&e&&(No(0,"div",117),wa(1),Vo()),2&e){const e=Ko(3).$implicit;Ss(1),Ca(" ",e.fileName," ")}}function Pq(e,t){if(1&e&&(No(0,"div",111),Oo(1,Iq,1,1,"img",112),Oo(2,Rq,2,1,"div",113),Vo()),2&e){const e=Ko(2).$implicit;Ss(1),Mo("ngIf","image/jpeg"==e.fileType),Ss(1),Mo("ngIf","image/jpeg"!=e.fileType)}}function Mq(e,t){if(1&e&&(No(0,"div",118),No(1,"div",119),Oo(2,Dq,2,1,"p",48),Oo(3,Pq,3,2,"div",110),Vo(),Vo()),2&e){const e=Ko().$implicit;Ss(2),Mo("ngIf",!e.dataSource),Ss(1),Mo("ngIf",!e.messageText)}}function Lq(e,t){if(1&e&&(No(0,"div"),Oo(1,Oq,7,3,"div",104),Oo(2,Mq,4,2,"div",105),Vo()),2&e){const e=t.$implicit,i=Ko(2);Ss(1),Mo("ngIf",e.senderId!=i.senderId),Ss(1),Mo("ngIf",e.senderId==i.senderId)}}function Nq(e,t){1&e&&(No(0,"span",95),wa(1," videocam_off "),Vo())}function Vq(e,t){1&e&&(No(0,"span",95),wa(1," videocam "),Vo())}function Bq(e,t){1&e&&(No(0,"span",95),wa(1,"mic_off "),Vo())}function Fq(e,t){1&e&&(No(0,"span",95),wa(1,"mic "),Vo())}function jq(e,t){1&e&&(No(0,"span",95),wa(1,"stop_screen_share "),Vo())}function Hq(e,t){1&e&&(No(0,"span",95),wa(1,"screen_share "),Vo())}function Uq(e,t){1&e&&Bo(0,"span",121)}function qq(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",73),No(2,"button",74),Wo("click",(function(){return ei(e),Ko().closeSideNav()})),Bo(3,"img",75),Vo(),No(4,"div",76),No(5,"div",77),No(6,"h1",78),wa(7,"Meeting Chat"),Vo(),Vo(),No(8,"div",79,80),Oo(10,Eq,11,4,"div",122),Oo(11,Lq,3,2,"div",82),Vo(),No(12,"div",83),No(13,"div",84),No(14,"div",85),No(15,"input",86),Wo("ngModelChange",(function(t){return ei(e),Ko().messageText=t}))("keydown",(function(t){return ei(e),Ko().handleSubmit(t)})),Vo(),No(16,"button",87),Wo("click",(function(){return ei(e),Ko().sendChatMessage()})),Bo(17,"img",88),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(18,"div",89),No(19,"div",20),No(20,"button",90),Wo("click",(function(){return ei(e),Ko().muteVideo()})),Oo(21,Nq,2,0,"span",91),Oo(22,Vq,2,0,"span",91),Vo(),No(23,"button",90),Wo("click",(function(){return ei(e),Ko().muteAudio()})),Oo(24,Bq,2,0,"span",91),Oo(25,Fq,2,0,"span",91),Vo(),No(26,"button",92),Wo("click",(function(){return ei(e),Ko().screenShare()})),Oo(27,jq,2,0,"span",91),Oo(28,Hq,2,0,"span",91),Vo(),No(29,"button",94),Wo("click",(function(){return ei(e),Ko().openChatWindow()})),No(30,"span",95),wa(31,"chat "),Vo(),Oo(32,Uq,1,0,"span",96),Vo(),No(33,"button",123),Wo("click",(function(){return ei(e),Ko().stopStream()})),No(34,"span",95),wa(35," call_end "),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(9),t=Ko();Ss(8),Mo("scrollTop",e.scrollHeight),Ss(2),Mo("ngIf",t.fileUploadedBox),Ss(1),Mo("ngForOf",t.meetingChat),Ss(4),Mo("ngModel",t.messageText),Ss(6),Mo("ngIf","unmute host video"==t.muteHostVideoStatus),Ss(1),Mo("ngIf","mute host video"==t.muteHostVideoStatus),Ss(2),Mo("ngIf","unmute host mic"==t.muteHostAudioStatus),Ss(1),Mo("ngIf","mute host mic"==t.muteHostAudioStatus),Ss(1),Mo("disabled",0!=t.screenRemoteCalls.length),Ss(1),Mo("ngIf",0==t.hostScreenShareStatus),Ss(1),Mo("ngIf",1==t.hostScreenShareStatus),Ss(4),Mo("ngIf",t.newMessageNotification)}}const Wq=ub(3e3,1e3);let zq=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c,h){this.ngxAgoraService=e,this.meetingService=t,this.router=i,this.snackbar=n,this.sanitizer=s,this.locationStrategy=r,this.loginService=o,this.studentService=a,this.tutorService=l,this.httpService=c,this.cookieService=h,this.width=1175,this.height=650,this.newMessageNotification=!1,this.meetingChat=[],this.greetings=[],this.showConversation=!1,this.chatOpen=!1,this.myClass="hideBlock",this.myScreenShareClass="hideBlock",this.uploadedProfilePicture=null,this.undoStack=[],this.redoStack=[],this.list=[],this.expandedScreen=!1,this.expandEnabled=!0,this.remoteJoined=!1,this.meeting=new Py,this.localCallId="agora_local",this.screenCallId="agora_screen",this.localScreenCallId="agora_screen_local",this.remoteCalls=[],this.screenRemoteCalls=[],this.localStreams=[],this.remoteVideoMute=!1,this.muteHostVideoStatus="mute host video",this.hostVideo=!0,this.muteHostAudioStatus="mute host mic",this.hostScreenShareStatus=!1,this.timelimit=0,this.timeLeft=this.timelimit,this.openWhiteBoardStatus=!1,this.message=new RU,this.fileMessage=new RU,this.messageToAdd=new RU,this.fileUploadedBox=!1,this.fileSizeExceeded=!1,this.fileName="",this.fileSize="",this.config={duration:7e3,horizontalPosition:"center",verticalPosition:"top"},this.meetingState="pre-meeting",this.micTriggered=!1,this.localVideoOn=!0,this.localMicOn=!0,this.isPreMeeting=!0,this.isInMeeting=!1,this.localCallId1="agora_local_1",this.localCallId2="agora_local_2",this.peerOnline=!1,this.backendUrl="https://backend.fellowgenius.com",this.uid=Math.floor(100*Math.random()),this.sid=174}getScreenSize(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}onPopState(e){"pre-meeting"==this.meetingState&&(this.preLocalStream.stop(),this.preLocalStream.close(),"host"==this.meeting.role?this.router.navigate(["home/tutor-dashboard"]):"student"==this.meeting.role&&this.router.navigate(["home/student-dashboard"]))}ngAfterViewInit(){this.canvasEl=this.canvas.nativeElement,this.cx=this.canvasEl.getContext("2d"),this.canvasEl.width=this.width,this.canvasEl.height=this.height,this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#000",this.connectToMeetingWebSocket(this.meeting.roomName),this.captureEvents(this.canvasEl),this.getMousePosition(this.canvasEl)}ngOnInit(){null==this.meetingService.getMeeting().roomId&&this.handleRefresh(),this.width=window.screen.width/100*97,this.height=window.screen.height/100*80,this.screenWidth=window.screen.width,this.screenHeight=window.screen.height,this.meeting=this.meetingService.getMeeting(),this.senderName=this.meeting.userName,this.senderId=this.meeting.userId,this.bookingDetails=this.meetingService.getBooking(),this.userName=this.meeting.userName,"Learner"==this.loginService.getLoginType()?(this.profilePictureUrl=this.studentService.getStudentProfileDetails().profilePictureUrl,this.userEmail=this.studentService.getStudentProfileDetails().email):"Expert"==this.loginService.getLoginType()&&(this.profilePictureUrl=this.tutorService.getTutorDetials().profilePictureUrl,this.userEmail=this.tutorService.getTutorDetials().email),this.peerName="host"==this.meeting.role?this.bookingDetails.studentName:this.bookingDetails.tutorName,this.timelimit=60*this.calculateRemainingTime(),this.shortName(),this.client=this.ngxAgoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers(),this.preLocalStream=this.ngxAgoraService.createStream({streamID:this.uid+3,audio:!0,video:!0,screen:!1}),this.blankStream=this.ngxAgoraService.createStream({streamID:this.uid+7,audio:!1,video:!1,screen:!1}),this.assignLocalStreamHandlers(this.preLocalStream),this.initPreMeetingLocalStream(()=>{})}preMeetingJoin(){this.uid=this.meeting.userId,this.meetingState="in-meeting",this.isPreMeeting=!1,this.isInMeeting=!0,this.preLocalStream.stop(),this.preLocalStream.close(),this.preventBackButton(),this.initialiseInMeeting()}startLocalStream(){this.localStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.localStream.setVideoProfile("720p_2"),this.assignLocalStreamHandlers(this.localStream);let e=this.localStream.getId().toString();this.initLocalStream(()=>{this.localMicOn||this.localStream.muteAudio(),this.publish(this.localStream),this.localStreams.push(e)})}startMicStream(){this.localStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!0,video:!1,screen:!1}),this.localStream.setVideoProfile("720p_2"),this.assignLocalStreamHandlers(this.localStream);let e=this.localStream.getId().toString();this.initLocalStream(()=>{this.localStreams.push(e),this.localMicOn||this.localStream.muteAudio(),this.publish(this.localStream)})}initialiseInMeeting(){this.join(()=>{this.localVideoOn&&this.localMicOn?this.startLocalStream():this.localMicOn&&!this.localVideoOn?this.startMicStream():!this.localMicOn&&this.localVideoOn?(this.startLocalStream(),this.localStream.unmuteAudio()):this.startMicStream()})}removeLocalStream(){this.unPublish(this.localStream),this.localStreams=this.localStreams.filter(e=>e!==this.localStream.getId().toString()),this.localStream.muteVideo(),this.localStream.stop(),this.localStream.close()}muteVideo(){if("mute host video"==this.muteHostVideoStatus)this.localVideoOn=!1,this.removeLocalStream(),this.startMicStream(),this.localMicOn||this.localStream.muteAudio(),this.muteHostVideoStatus="unmute host video";else if("unmute host video"==this.muteHostVideoStatus){this.localVideoOn=!0;let e=this.localStream.getId().toString();this.localStreams.includes(e)?(this.removeLocalStream(),this.startLocalStream()):this.startLocalStream(),this.muteHostVideoStatus="mute host video"}}muteAudio(){"mute host mic"==this.muteHostAudioStatus?(this.localMicOn=!1,this.localStream.muteAudio(),this.muteHostAudioStatus="unmute host mic"):(this.localMicOn=!0,this.localStream.unmuteAudio(),this.muteHostAudioStatus="mute host mic")}unPublish(e){this.client.unpublish(e,e=>{})}closeLocalVideo(e){e.stop(),e.close()}initPreMeetingLocalStream(e){this.preLocalStream.init(()=>{this.preLocalStream.play(this.localCallId1),e&&e()},e=>console.error("getUserMedia failed",e))}handleRefresh(){"Learner"==mk(this.cookieService.get("token")).ROLE?this.router.navigate(["home/student-dashboard"]):"Expert"==mk(this.cookieService.get("token")).ROLE&&this.router.navigate(["home/tutor-dashboard"])}calculateRemainingTime(){var e=60*this.bookingDetails.endTimeHour+this.bookingDetails.endTimeMinute,t=new Date,i=60*t.getHours()+t.getMinutes();return e>i?e-i:null}preventBackButton(){history.pushState(null,null,location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,null,location.href)})}shareScreen(){this.screenClient=this.ngxAgoraService.createClient({mode:"rtc",codec:"h264"}),this.assignScreenClientHandlers(),this.screenStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!1,video:!1,screen:!0}),this.initScreenStream(()=>{this.screenJoin(e=>this.screenPublish(),e=>console.error(e))})}endCall(){"host"==this.meeting.role&&null!=this.screenStream&&(this.screenStream.stop(),this.screenClient.leave(),this.screenStream.close()),this.client.unpublish(this.localStream,e=>{}),this.client.leave(),this.localStream&&(this.localStream.stop(),this.localStream.close()),"host"==this.meeting.role?this.router.navigate(["home/tutor-dashboard"]):"student"==this.meeting.role&&this.router.navigate(["home/student-dashboard"])}limitStream(){this.remoteJoined=!0;var e=this.timelimit-600;null!=this.subscription&&this.subscription.unsubscribe(),this.subscription=Wq.subscribe(t=>{this.timeLeft=this.timelimit-t,t==e&&"/meeting"===this.router.url&&this.snackbar.open("10 Minutes Left ! Hurry up","close",this.config),t==this.timelimit&&this.httpService.updateBookingStatus(this.bookingDetails.bid,"Successful").subscribe(e=>{this.localStream.stop(),this.subscription.unsubscribe(),this.endCall()})})}assignClientHandlers(){this.client.on("stream-published",e=>{}),this.client.on("error",e=>{"DYNAMIC_KEY_TIMEOUT"===e.reason&&this.client.renewChannelKey("",()=>e=>console.error("Renew channel key failed: ",e))}),this.client.on("stream-added",e=>{const t=e.stream;var i=t.getId();this.localStreams.includes(i.toString())||this.client.subscribe(t,{audio:!0,video:!0},e=>{})}),this.client.on("stream-subscribed",e=>{const t=e.stream,i=this.getRemoteId(t);174==t.getId()?(this.screenRemoteCalls.push(i),setTimeout(()=>t.play(i),1e3)):this.remoteCalls.length||(this.remoteCalls.push(i),setTimeout(()=>t.play(i),1e3),this.limitStream())}),this.client.on("stream-removed",e=>{const t=e.stream,i=(this.getRemoteId(t),t.getId());174!=i?t&&(t.stop(),this.remoteCalls=[]):174==i&&(this.screenRemoteCalls=[],t.stop(),t.close())}),this.client.on("mute-video",e=>{this.remoteVideoMute=!0}),this.client.on("unmute-video",e=>{this.remoteVideoMute=!1}),this.client.on("peer-leave",e=>{const t=e.stream;t?(t.stop(),this.peerOnline=!1,this.remoteCalls=this.remoteCalls.filter(e=>e!==""+this.getRemoteId(t))):this.peerOnline=!1}),this.client.on("peer-online",e=>{this.peerOnline=!0})}assignScreenClientHandlers(){this.screenClient.on("stream-published",e=>{})}getRemoteId(e){return"agora_remote-"+e.getId()}assignLocalStreamHandlers(e){e.on("accessAllowed",()=>{}),e.on("accessDenied",()=>{})}initLocalStream(e){this.localStream.init(()=>{this.localStream.play(this.localCallId),e&&e()},e=>console.error("getUserMedia failed",e))}initMicStream(e){this.micStream.init(()=>{this.micStream.play(this.localCallId1),e&&e()},e=>console.error("getUserMedia failed",e))}initScreenStream(e){this.screenStream.init(()=>{this.screenStream.play(this.localScreenCallId),e&&e()},e=>console.error("getUserMedia failed",e))}join(e,t){this.client.join(null,this.meetingService.getMeeting().roomName,this.meeting.userId,e,t)}publish(e){this.client.publish(e,e=>{})}screenJoin(e,t){this.localStreams.push(this.sid.toString()),this.screenClient.join(null,this.meetingService.getMeeting().roomName,this.sid,e,t)}screenPublish(){this.screenClient.publish(this.screenStream,e=>{})}stopStream(){confirm("Are you sure you want to cancel !")&&this.endCall()}preMeetingMuteVideo(){"mute host video"==this.muteHostVideoStatus?(this.localVideoOn=!1,"pre-meeting"==this.meetingState&&(this.preLocalStream.stop(),this.closeLocalVideo(this.preLocalStream),document.querySelector(".pre-meeting-video").style.backgroundColor="#d93025",document.querySelector(".pre-meeting-video").style.borderColor="#d93025"),this.muteHostVideoStatus="unmute host video"):"unmute host video"==this.muteHostVideoStatus&&(this.localVideoOn=!0,"pre-meeting"==this.meetingState&&(document.querySelector(".pre-meeting-video").style.backgroundColor="",document.querySelector(".pre-meeting-video").style.borderColor="",this.assignLocalStreamHandlers(this.preLocalStream),this.initPreMeetingLocalStream(()=>{})),this.muteHostVideoStatus="mute host video")}preMeetingMuteAudio(){this.micTriggered=!0,"mute host mic"==this.muteHostAudioStatus?(this.localMicOn=!1,this.muteHostAudioStatus="unmute host mic","pre-meeting"==this.meetingState&&(document.querySelector(".pre-meeting-mic").style.backgroundColor="#d93025",document.querySelector(".pre-meeting-mic").style.borderColor="#d93025")):(this.localMicOn=!0,this.muteHostAudioStatus="mute host mic","pre-meeting"==this.meetingState&&(document.querySelector(".pre-meeting-mic").style.backgroundColor="",document.querySelector(".pre-meeting-mic").style.borderColor="")),"pre-meeting"==this.meetingState&&setTimeout(()=>{this.micTriggered=!1},4e3)}screenShare(){0==this.hostScreenShareStatus?(this.hostScreenShareStatus=!0,this.shareScreen()):(this.hostScreenShareStatus=!1,this.screenStream.stop(),this.screenClient.unpublish(this.screenStream,e=>{}),this.screenClient.leave(),this.screenStream.close(),this.localStreams=[])}expandScreen(){this.expandedScreen=!this.expandedScreen}openWhiteBoard(){0==this.openWhiteBoardStatus?(this.openWhiteBoardStatus=!0,this.myClass="",this.expandEnabled=!1,this.myScreenShareClass="hideBlock",this.initiateWhiteBoardForStudent()):(this.openWhiteBoardStatus=!this.openWhiteBoardStatus,this.myClass="hideBlock",this.expandEnabled=!0,this.closeWhiteBoardForStudent())}openChatWindow(){0==this.chatOpen?(this.openSideNav(),this.chatOpen=!0,this.newMessageNotification=!1):(this.chatOpen=!1,this.closeSideNav())}scrollToBottom(){try{this.chatWindow.nativeElement.scrollTop=this.chatWindow.nativeElement.scrollHeight}catch(e){}}openSideNav(){document.getElementById("mySidenav").style.width=this.screenWidth<=500?"100%":"400px"}closeSideNav(){document.getElementById("mySidenav").style.width="0",this.chatOpen=!1,this.newMessageNotification=!1}captureEvents(e){Yy(e,"mousedown").pipe(Gu(t=>Yy(e,"mousemove").pipe(mb(Yy(e,"mouseup")),mb(Yy(e,"mouseleave")),e=>e.lift(new yb)))).subscribe(t=>{const i=e.getBoundingClientRect(),n={x:t[0].clientX-i.left,y:t[0].clientY-i.top},s={x:t[1].clientX-i.left,y:t[1].clientY-i.top};this.sendCoordinates("drawing",null,this.cx.strokeStyle,this.cx.lineWidth,n,s),this.drawOnCanvas(n,s)})}getMousePosition(e){e.addEventListener("mouseup",()=>{var t=e.toDataURL("image/png");this.list.push(t),this.undoStack.push(t)})}drawOnCanvas(e,t){this.cx&&(this.cx.beginPath(),e&&(this.cx.moveTo(e.x,e.y),this.cx.lineTo(t.x,t.y),this.cx.stroke()))}erase(){this.cx.lineWidth=50,this.cx.lineCap="round",this.cx.strokeStyle="#fff"}pencil(e,t){"black"==t?(this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#000"):"red"==t?(this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#FF0000"):"blue"==t&&(this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#0000FF")}reset(){this.sendCoordinates("reset",null,null,null,null,null),this.cx.clearRect(0,0,this.cx.canvas.width,this.cx.canvas.height)}undo(){if(0==this.undoStack.length)this.cx.clearRect(0,0,this.width,this.height);else{var e=this.undoStack.pop();this.redoStack.push(this.list.pop());var t=document.createElement("img");t.src=e.toString(),t.setAttribute("width","1000"),t.setAttribute("height","480"),this.sendCoordinates("undo",t.src,null,null,null,null),t.onload=e=>{this.cx.clearRect(0,0,this.width,this.height),this.cx.drawImage(t,0,0)}}}redo(){var e=this.redoStack.pop();this.list.push(e),this.undoStack.push(e);var t=document.createElement("img");t.src=e.toString(),t.setAttribute("width","1000"),t.setAttribute("height","480"),this.sendCoordinates("redo",t.src,null,null,null,null),t.onload=e=>{this.cx.clearRect(0,0,this.width,this.height),this.cx.drawImage(t,0,0)}}connectToMeetingWebSocket(e){let t=new sT(this.backendUrl+"/fellowGenius");this.ws=nT.over(t);let i=this;this.ws.connect({},t=>{i.ws.subscribe("/errors",e=>{alert("Error "+e.body)}),i.ws.subscribe("/inbox/whiteBoard/"+e,e=>{var t=JSON.parse(e.body);if("initiateWhiteBoard"==t.action)"student"==this.meetingService.getMeeting().role&&(this.expandEnabled=!1,this.myClass="");else if("drawing"==t.action)"student"==this.meetingService.getMeeting().role&&(this.cx.strokeStyle=t.color,this.cx.lineWidth=t.lineWidth,"#ffffff"==t.color&&(this.cx.lineCap="round"),this.drawOnCanvas(t.prevPos,t.currentPos));else if("closeWhiteBoard"==t.action)"student"==this.meetingService.getMeeting().role&&(this.expandEnabled=!0,this.myClass="hideBlock");else if("reset"==t.action)"student"==this.meetingService.getMeeting().role&&this.cx.clearRect(0,0,this.cx.canvas.width,this.cx.canvas.height);else if(("undo"==t.action||"redo"==t.action)&&"student"==this.meetingService.getMeeting().role){var i=document.createElement("img");i.src=t.dataSource.toString(),i.setAttribute("width","1000"),i.setAttribute("height","480"),i.onload=e=>{this.cx.clearRect(0,0,this.width,this.height),this.cx.drawImage(i,0,0)}}}),i.ws.subscribe("/inbox/MeetingChat/"+e,(function(e){var t=JSON.parse(e.body),n=new RU;n.messageText=t.message.messageText,n.senderName=t.message.senderName,n.senderId=t.message.senderId,n.dataSource=t.message.dataSource,n.fileName=t.message.fileName,n.fileType=t.message.fileType,i.scrollToBottom(),n.senderId!=i.meeting.userId&&0==i.chatOpen&&(i.newMessageNotification=!0),null==n.messageText&&i.openBlob(n),i.meetingChat.push(n)}))},e=>{console.log("re initiating the connection !"),setTimeout(()=>{this.connectToMeetingWebSocket(this.meeting.roomName)},5e3)})}sendCoordinates(e,t,i,n,s,r){let o=JSON.stringify({action:e,dataSource:t,color:i,lineWidth:n,prevPos:s,currentPos:r});this.ws.send("/sendData/"+this.meeting.roomName,{},o)}initiateWhiteBoardForStudent(){this.sendCoordinates("initiateWhiteBoard",null,null,null,null,null)}closeWhiteBoardForStudent(){this.sendCoordinates("closeWhiteBoard",null,null,null,null,null)}sendChatMessage(){""!=this.messageText&&(this.message.messageText=this.messageText,this.message.senderId=this.senderId,this.message.senderName=this.senderName,this.message.sentTime=(new Date).toTimeString(),this.message.date=(new Date).toLocaleString(),this.sendMessageToMeeting(this.message,this.meeting.roomName),this.messageText="")}sendMessageToMeeting(e,t){let i=JSON.stringify({message:e});this.ws.send("/sendChat/"+t,{},i)}handleSubmit(e){13===e.keyCode&&this.sendChatMessage()}handleFileInput(e){var t=e.item(0);this.uploadedFile=t,this.fileUploadedBox=!0,this.fileName=t.name,t.size<=104857600?this.fileSize=t.size>1048576?(t.size/1048576).toFixed(2).toString()+" MB":(t.size/1024).toFixed(2).toString()+" KB":this.fileSizeExceeded=!0}getBase64(){var e=new FileReader;e.readAsDataURL(this.uploadedFile),e.onload=()=>{var t=e.result,i=new RU;i.senderName=this.senderName,i.dataSource=t,i.fileName=this.uploadedFile.name,i.fileType=this.uploadedFile.type,this.fileType=i.fileType,i.senderId=this.senderId,this.sendFile(i,this.meeting.roomName)},e.onerror=function(e){}}openBlob(e){var t=this.b64toBlob(e.dataSource,e.fileType);e.dataSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t))}b64toBlob(e,t){for(var i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),s=new Uint8Array(n),r=0;r<i.length;r++)s[r]=i.charCodeAt(r);return new Blob([n],{type:t})}sendFile(e,t){let i=JSON.stringify({message:e});this.ws.send("/sendChat/"+t,{},i),this.closeFileUploadedBox()}closeFileUploadedBox(){this.uploadedFile=null,this.fileUploadedBox=!1,this.fileSizeExceeded=!1}shortName(){var e=this.meeting.userName.split(" ");if(null!=e[1])var t=e[0],i=e[1];else t=e[0];if(null==i){var n=t[0].toString();this.meeting.userName=n}else n=t[0].toString().concat(i[0].toString()),this.meeting.userName=n}}return e.\u0275fac=function(t){return new(t||e)(Io(DU),Io(Vy),Io(Em),Io(UE),Io(ou),Io(kh),Io(jy),Io(Hy),Io(aT),Io(Og),Io(Dx))},e.\u0275cmp=gt({type:e,selectors:[["app-meeting"]],viewQuery:function(e,t){var i;1&e&&(ac(MU,!0),ac(LU,!0),ac(NU,!0)),2&e&&(rc(i=uc())&&(t.canvas=i.first),rc(i=uc())&&(t.canvasScreenShare=i.first),rc(i=uc())&&(t.chatWindow=i.first))},hostBindings:function(e,t){1&e&&Wo("resize",(function(e){return t.getScreenSize(e)}),!1,zi)("popstate",(function(e){return t.onPopState(e)}),!1,zi)},inputs:{width:"width",height:"height"},decls:72,vars:34,consts:[[2,"max-width","100vw","max-height","100vh"],[1,"pre-meeting-container"],[1,"meeting-header"],[1,"logo"],[1,"account-info-block"],[2,"text-align","end"],[2,"margin-left","10px"],["alt","no_pic",1,"profile-picture",3,"src"],[1,"pre-meeting-container",2,"padding-top","15vh"],[2,"width","80%","margin","auto","padding","20px"],[1,"row"],[1,"col-md-1"],[1,"col-md-7"],[1,"pre-meeting-local"],[1,"local",3,"id"],[1,"shadow-top"],["style","position: absolute; top: 40%; color: white; width: 100%",4,"ngIf"],[1,"shadow-bottom"],["class","mic-popup fadeOut",4,"ngIf"],[2,"position","absolute","bottom","0","width","100%","padding","10px"],[2,"width","max-content","margin","auto"],[1,"pre-meeting-control-buttons","pre-meeting-mic",3,"click"],["class","material-icons",4,"ngIf"],[1,"pre-meeting-control-buttons","pre-meeting-video",2,"margin-left","2vw",3,"click"],[1,"col-md-4","pre-meeting-info"],[2,"padding","20px"],[2,"display","flex","justify-content","center","align-items","center","margin-top","15px"],[1,"btn","btn-primary","pre-meeting-join-button",3,"click"],[1,"meeting-container"],[1,"box"],[1,"short-name"],[1,"shortNameText"],["class","durationContainer",4,"ngIf"],[2,"position","fixed","bottom","0","z-index","5"],[3,"ngClass"],[1,"bg-image"],[1,"material-icons","blurred-icons"],[1,"nameText"],["class","remote-video-play",3,"id",4,"ngFor","ngForOf"],[1,"local"],[1,"local-video-play",3,"id"],["class","bg-image",4,"ngIf"],[1,"canvasWrapper"],[1,"canvas-body"],["class","tools",4,"ngIf"],["canvas",""],[1,"screen",3,"id"],["class","screen",3,"id",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"position","absolute","top","40%","color","white","width","100%"],[2,"font-size","22px","text-align","center"],[1,"mic-popup","fadeOut"],["class","pre-meeting-mic-banner",4,"ngIf"],[1,"pre-meeting-mic-banner"],[1,"material-icons"],[2,"font-size","17px"],[1,"durationContainer"],[1,"remote-video-play",3,"id"],["class","expand-button",3,"click",4,"ngIf"],[1,"expand-button",3,"click"],["class","fa fa-expand","aria-hidden","true",4,"ngIf"],["class","fa fa-compress","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-expand"],["aria-hidden","true",1,"fa","fa-compress"],[1,"tools"],[1,"toolButtons",3,"click"],["src","../../../assets/icons/rubber.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/redPencil.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/bluePencil.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/blackPencil.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/undo.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/redo.svg",2,"width","30px","height","30px"],[1,"toolButtons",2,"width","70px",3,"click"],["id","mySidenav",1,"sidenav","boxShadow",2,"position","absolute"],["title","close",1,"closeIconButton",3,"click"],["src","../../../assets/icons/close.svg","alt","",2,"height","15px"],[2,"padding","30px","height","100%"],[1,"sideNavHeader"],[2,"margin","0"],[1,"sideNavBody",2,"position","relative",3,"scrollTop"],["chatWindow",""],["style","\n                position: absolute;\n                bottom: 5px;\n                width: 98%;\n                left: 3px;\n                padding: 20px;\n                background-color: white;\n                box-shadow: 0px 0px 5px rgb(199, 203, 217, 0.7);\n              ",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"sideNavFooter"],[1,"type_msg"],[1,"input_msg_write"],["type","text","placeholder","Type a message",1,"write_msg",3,"ngModel","ngModelChange","keydown"],["type","button",1,"msg_send_btn",3,"click"],["src","../../../../assets/icons/send.png","height","15px","width","15px"],[1,"control-nav"],[1,"btn","btn-primary",3,"click"],["class","material-icons control-icons",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-success",2,"position","relative","padding","8px 16px",3,"click"],[1,"material-icons","control-icons"],["style","\n                background-color: #32cd32;\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                position: absolute;\n                top: -5px;\n                right: -5px;\n              ",4,"ngIf"],[1,"btn","btn-danger",2,"margin-right","10px","padding","8px 16px",3,"click"],[2,"position","absolute","bottom","5px","width","98%","left","3px","padding","20px","background-color","white","box-shadow","0px 0px 5px rgb(199, 203, 217, 0.7)"],["style","color: red",4,"ngIf"],[2,"float","right"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[2,"color","red"],["class","incoming_msg",4,"ngIf"],["class","outgoing_msg",4,"ngIf"],[1,"incoming_msg"],[1,"received_msg"],[1,"received_withd_msg"],[2,"color","black"],["class","fileWrapper",4,"ngIf"],[1,"fileWrapper"],["alt","","class","imageTransfer",3,"src",4,"ngIf"],["class","fileName",4,"ngIf"],[1,"downloadButton",3,"href","download"],["src","../../../assets/icons/download_black.svg","alt","",2,"height","30px","width","30px","margin","10px"],["alt","",1,"imageTransfer",3,"src"],[1,"fileName"],[1,"outgoing_msg"],[1,"sent_msg"],["src","../../../assets/icons/whiteboard.svg","alt","",2,"width","21px","height","32px"],[2,"background-color","#32cd32","width","10px","height","10px","border-radius","50%","position","absolute","top","-5px","right","-5px"],["style","\n                position: absolute;\n                bottom: 5px;\n                width: 98%;\n                left: 3px;\n                padding: 20px;\n                box-shadow: 0px 0px 5px rgb(199, 203, 217, 0.7);\n              ",4,"ngIf"],[1,"btn","btn-danger",2,"padding","8px 16px",3,"click"],[2,"position","absolute","bottom","5px","width","98%","left","3px","padding","20px","box-shadow","0px 0px 5px rgb(199, 203, 217, 0.7)"]],template:function(e,t){1&e&&(No(0,"body",0),No(1,"div",1),No(2,"div",2),Bo(3,"div",3),No(4,"div",4),No(5,"div"),No(6,"div",5),wa(7),Vo(),No(8,"div",5),wa(9),Vo(),Vo(),No(10,"div",6),Bo(11,"img",7),Vo(),Vo(),Vo(),No(12,"div",8),No(13,"div",9),No(14,"div",10),Bo(15,"div",11),No(16,"div",12),No(17,"div",13),Bo(18,"div",14),Bo(19,"div",15),Oo(20,VU,3,0,"div",16),Bo(21,"div",17),Oo(22,jU,3,2,"div",18),No(23,"div",19),No(24,"div",20),No(25,"button",21),Wo("click",(function(){return t.preMeetingMuteAudio()})),Oo(26,HU,2,0,"span",22),Oo(27,UU,2,0,"span",22),Vo(),No(28,"button",23),Wo("click",(function(){return t.preMeetingMuteVideo()})),Oo(29,qU,2,0,"span",22),Oo(30,WU,2,0,"span",22),Vo(),Vo(),Vo(),Vo(),Vo(),No(31,"div",24),No(32,"div",25),No(33,"h1"),wa(34,"Ready to join ?"),Vo(),No(35,"div",26),No(36,"button",27),Wo("click",(function(){return t.preMeetingJoin()})),wa(37," Join "),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(38,"div",28),Bo(39,"div",29),No(40,"div",30),No(41,"p",31),wa(42),ql(43,"uppercase"),Vo(),Vo(),Oo(44,zU,4,3,"span",32),Oo(45,GU,4,3,"span",32),No(46,"div",33),No(47,"div",34),No(48,"div"),No(49,"div",35),No(50,"span",36),wa(51,"person"),Vo(),No(52,"p",37),wa(53),Vo(),Vo(),Vo(),Oo(54,JU,5,4,"div",38),Vo(),No(55,"div",39),No(56,"div",35),No(57,"span",36),wa(58," person "),Vo(),Vo(),No(59,"div",40),No(60,"p",37),wa(61),Vo(),Oo(62,QU,3,0,"div",41),Vo(),Vo(),Vo(),No(63,"div",42),No(64,"div",43),Oo(65,ZU,15,0,"div",44),Bo(66,"canvas",null,45),Vo(),Vo(),Bo(68,"div",46),Oo(69,eq,1,1,"div",47),Oo(70,Cq,37,13,"div",48),Oo(71,qq,36,12,"div",48),Vo(),Vo()),2&e&&(Ss(1),aa("hideBlock",t.isInMeeting),Ss(6),Sa(t.userName),Ss(2),Sa(t.userEmail),Ss(2),Mo("src",t.profilePictureUrl,es),Ss(7),Mo("id",t.localCallId1),Ss(2),Mo("ngIf","unmute host video"==t.muteHostVideoStatus),Ss(2),Mo("ngIf",t.micTriggered),Ss(4),Mo("ngIf","unmute host mic"==t.muteHostAudioStatus),Ss(1),Mo("ngIf","mute host mic"==t.muteHostAudioStatus),Ss(2),Mo("ngIf","unmute host video"==t.muteHostVideoStatus),Ss(1),Mo("ngIf","mute host video"==t.muteHostVideoStatus),Ss(8),aa("hideBlock",!t.isInMeeting),Ss(4),Ca(" ",Wl(43,32,t.meeting.userName)," "),Ss(2),Mo("ngIf",t.remoteJoined&&"host"==t.meeting.role),Ss(1),Mo("ngIf",t.remoteJoined&&"student"==t.meeting.role),Ss(2),aa("hideBlock",!t.peerOnline),Mo("ngClass",t.expandedScreen?"screen":"remote"),Ss(6),Ca(" ",t.peerName," "),Ss(1),Mo("ngForOf",t.remoteCalls),Ss(5),Mo("id",t.localCallId),Ss(2),Ca(" ",t.userName," "),Ss(1),Mo("ngIf","unmute host video"==t.muteHostVideoStatus),Ss(1),la(t.myClass),Ss(2),Mo("ngIf","host"==t.meeting.role),Ss(3),Mo("id",t.localScreenCallId),Ss(1),Mo("ngForOf",t.screenRemoteCalls),Ss(1),Mo("ngIf","host"==t.meeting.role),Ss(1),Mo("ngIf","student"==t.meeting.role))},directives:[md,dd,pd,Bg,zg,Qv],pipes:[Od,PU],styles:["@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut[_ngcontent-%COMP%]{-webkit-animation-name:fadeOut;animation-name:fadeOut}.pre-meeting-local[_ngcontent-%COMP%]   .local[_ngcontent-%COMP%]{position:unset;border-radius:10px;overflow:none;z-index:10;width:100%;height:100%;margin:0}.pre-meeting-local[_ngcontent-%COMP%]{position:relative;width:100%;height:50vh;border-radius:10px;background-color:#202124;box-shadow:0 1px 2px 0 rgb(60 64 67/30%),0 1px 3px 1px rgb(60 64 67/15%);overflow:hidden}.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-mic-banner[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;margin:auto;padding:10px 20px;border-radius:25px;display:flex;background-color:rgba(32,33,36,.7)}.pre-meeting-local[_ngcontent-%COMP%]   .mic-popup[_ngcontent-%COMP%]{position:absolute;top:12px;width:100%;color:#fff;-webkit-animation-delay:2s;animation-delay:2s;-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-control-buttons[_ngcontent-%COMP%]{outline:none;width:65px;height:62px;border:2px solid #fff;color:#fff;background:none;border-radius:50%;overflow:hidden}.pre-meeting-local[_ngcontent-%COMP%]   .shadow-top[_ngcontent-%COMP%]{position:absolute;top:-7px;height:80px;width:100%;background-image:-webkit-linear-gradient(top,rgba(0,0,0,.7),rgba(0,0,0,.3) 50%,transparent)}.pre-meeting-local[_ngcontent-%COMP%]   .shadow-bottom[_ngcontent-%COMP%]{position:absolute;bottom:-7px;height:80px;width:100%;background-image:-webkit-linear-gradient(bottom,rgba(0,0,0,.7),rgba(0,0,0,.3) 50%,transparent)}.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-control-buttons[_ngcontent-%COMP%]:hover{background:hsla(0,0%,100%,.4)}.pre-meeting-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.pre-meeting-join-button[_ngcontent-%COMP%]{font-size:large;padding-left:30px;padding-right:30px;border-radius:25px}.meeting-header[_ngcontent-%COMP%]{height:100px;background:#fff;width:100%;display:block;float:left;padding:20px 20px 5px}.meeting-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100px;height:8vh;float:left}.meeting-header[_ngcontent-%COMP%]   .account-info-block[_ngcontent-%COMP%]{float:right;display:flex;justify-content:center;align-items:center}.meeting-header[_ngcontent-%COMP%]   .account-info-block[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;box-shadow:0 1px 2px 0 rgb(60 64 67/30%),0 1px 3px 1px rgb(60 64 67/15%)}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{position:relative;width:20vw;height:20vh;border-radius:5px;overflow:hidden;z-index:10;margin:15px}.screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:4}.control-nav[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:.5rem;z-index:10}button[_ngcontent-%COMP%]{margin:.5vh 1vw .5vh .5vw;border-radius:50%}.control-icons[_ngcontent-%COMP%]{box-shadow:0 0 50px #1d1900;margin-top:5px;font-size:20px}.control-nav-div[_ngcontent-%COMP%]{float:right;margin-top:.6vh}.timer[_ngcontent-%COMP%]{color:silver;font-size:25px;margin-left:10px;border-right:1px solid silver;padding-right:10px}.bg-image[_ngcontent-%COMP%]{background-color:#7d0f7d;text-align:center}.bg-image[_ngcontent-%COMP%], .local-video-play[_ngcontent-%COMP%], .remote-video-play[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0}.blurred-icons[_ngcontent-%COMP%]{color:#fff;font-size:50px;margin-top:50px}.short-name[_ngcontent-%COMP%]{position:relative;display:table;z-index:3;margin-left:auto;margin-right:auto;border-radius:100%;background-color:#c7cbd9;top:20vh;box-shadow:0 0 50px #1d1d00;width:180px;height:180px;text-align:center;border-radius:3px solid #00f;border-style:hidden}.container[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,rgba(192,33,236,.9),#f4e5f8)}.box[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed}.box[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,#fff,#ffc8ef)}.shortNameText[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;display:table-cell;font-size:11vh;margin:0 auto}.nameText[_ngcontent-%COMP%]{bottom:0;font-size:larger;background-color:#000;padding:4px 7px;font-weight:300;display:flex}.expand-button[_ngcontent-%COMP%], .nameText[_ngcontent-%COMP%]{color:#fff;position:absolute;z-index:1;right:0;margin:0}.expand-button[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);font-size:15px;border-radius:1px;top:0;padding:8px;cursor:pointer;outline:none;border:none;width:40px;height:40px}.tools[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1;margin-top:70px;margin-left:10px;width:50px}.canvas-body[_ngcontent-%COMP%]{position:relative;overflow:auto;max-height:100%}.toolButtons[_ngcontent-%COMP%]{margin:5px;background:#fff;box-shadow:0 0 4px rgba(199,203,217,.7);border:none;outline:none;height:50px;width:50px;padding:10px}.whiteBoard[_ngcontent-%COMP%]{background-color:#fff}.canvasWrapper[_ngcontent-%COMP%]{background-color:#fff}.canvasWrapper[_ngcontent-%COMP%], .canvasWrapperScreenShare[_ngcontent-%COMP%]{position:fixed;top:0;z-index:10;height:100vh;width:100vw}canvas[_ngcontent-%COMP%]{display:block}.hideBlock[_ngcontent-%COMP%]{display:none}.redBackground[_ngcontent-%COMP%]{background-color:red}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;z-index:1001;right:0;top:0;background-color:#fff;overflow-x:hidden;transition:.4s}.boxShadow[_ngcontent-%COMP%]{box-shadow:0 0 5px rgba(199,203,217,.7)}.sideNavBody[_ngcontent-%COMP%]{height:85%;margin-bottom:15px;overflow-y:auto;margin-top:20px}.sideNavFooter[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:10px}.closeIconButton[_ngcontent-%COMP%]{background-color:#fff;border:none;position:absolute;width:30px;height:30px;top:15px;right:20px;font-size:larger;cursor:pointer;color:#8d89aa;outline:none}.closeIconButton[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:50%;color:#000}.input_msg_write[_ngcontent-%COMP%]{float:left;width:86%;padding-left:25px;margin-right:7px}.input_msg_write[_ngcontent-%COMP%], .write_msg[_ngcontent-%COMP%]{background-color:#ebebeb;border:none;color:#000;font-size:15px;min-height:48px;border-radius:26px;outline:none}.write_msg[_ngcontent-%COMP%]{width:84%}.type_msg[_ngcontent-%COMP%]{border-top:none;position:relative;margin-bottom:20px}.msg_send_btn[_ngcontent-%COMP%]{background:#36404a none repeat scroll 0 0;border:none;border-radius:50%;color:#fff;cursor:pointer;font-size:17px;height:33px;position:absolute;right:50px;top:4px;width:33px}img[_ngcontent-%COMP%]{max-width:100%}.incoming_msg_img[_ngcontent-%COMP%]{display:inline-block;width:6%}.received_msg[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:top;width:100%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#c8c8c8 none repeat scroll 0 0;border-radius:3px;color:#000;font-size:14px;padding:5px 10px 5px 12px;width:100%}.time_date[_ngcontent-%COMP%]{color:#fff;display:block;font-size:12px;margin:8px 0 0}.received_withd_msg[_ngcontent-%COMP%]{width:57%}.mesgs[_ngcontent-%COMP%]{float:left;padding:30px 15px 0 25px;width:60%}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#2d6b86 none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px;width:60%}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0}.uploadButton[_ngcontent-%COMP%]{background:none;border:1px solid #210184;padding-top:5px;padding-bottom:5px;outline:none;color:#210184;border-radius:5px;height:40px;width:40px;font-size:large;margin:4px 0 0;border-radius:50%}.uploadButton[_ngcontent-%COMP%]:hover{background-color:#210184;color:#fff}.sent_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%]{background:#2d6b86 none repeat scroll 0 0;color:#fff}.received_withd_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%], .sent_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%]{border-radius:3px;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.received_withd_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%]{background:#c8c8c8 none repeat scroll 0 0;color:#000}.imageTransfer[_ngcontent-%COMP%]{height:10vw;width:10vw;margin:5px;border-radius:5px}.downloadButton[_ngcontent-%COMP%]{background:none;outline:none;border:none}.fileName[_ngcontent-%COMP%]{border:1px solid #000;border-radius:5px}.fileName[_ngcontent-%COMP%], .fileNameOutgoing[_ngcontent-%COMP%]{display:inline-block;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:10px}.fileNameOutgoing[_ngcontent-%COMP%]{border:1px solid #fff;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}[id^=video][_ngcontent-%COMP%]{-o-object-fit:inherit!important;object-fit:inherit!important}.durationContainer[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;background-color:#892687;padding:6px 10px;color:#fff;border-radius:5px;font-size:1.35rem;z-index:100}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (min-device-height:501px) and (-webkit-min-device-pixel-ratio:2){.local[_ngcontent-%COMP%]{right:1rem}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{position:fixed;width:20vw;height:17vh;top:1rem!important;border-radius:5px;overflow:hidden;z-index:10;left:unset}.remote[_ngcontent-%COMP%]{right:8rem}.control-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.local[_ngcontent-%COMP%]   .nameText[_ngcontent-%COMP%]{display:none}.nameText[_ngcontent-%COMP%]{color:#fff;position:absolute;bottom:0;z-index:15;font-size:xx-small;right:0;background-color:rgba(0,0,0,.5);margin:0;padding:4px 7px;font-weight:400}.expand-button[_ngcontent-%COMP%]{display:none}.short-name[_ngcontent-%COMP%]{top:25vh}.screen[_ngcontent-%COMP%]{position:fixed;top:7rem;left:0;width:100vw;height:73vh;z-index:4}[id^=video][_ngcontent-%COMP%]{-o-object-fit:inherit!important;object-fit:inherit!important}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.blurred-icons[_ngcontent-%COMP%]{color:#fff;font-size:30px;margin-top:40px}.local[_ngcontent-%COMP%]{right:1rem}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{position:fixed;width:20vw;height:17vh;top:1rem!important;border-radius:5px;overflow:hidden;z-index:10;left:unset}.remote[_ngcontent-%COMP%]{right:8rem}.control-nav[_ngcontent-%COMP%]{margin-top:61vh}.local[_ngcontent-%COMP%]   .nameText[_ngcontent-%COMP%]{display:none}.nameText[_ngcontent-%COMP%]{color:#fff;position:absolute;bottom:0;width:100%;z-index:1;font-size:xx-small;right:0;background-color:rgba(0,0,0,.5);margin:0;padding:4px 7px;font-weight:400}.expand-button[_ngcontent-%COMP%]{display:none}.short-name[_ngcontent-%COMP%]{top:25vh}.screen[_ngcontent-%COMP%]{position:fixed;top:7rem;left:0;width:100vw;height:73vh;z-index:4}[id^=video][_ngcontent-%COMP%]{-o-object-fit:inherit!important;object-fit:inherit!important}}}"]}),e})();var Gq=n("urRO"),Yq=n.n(Gq);const $q=["image"];let Kq=(()=>{class e{constructor(e,t){this.dialogRef=e,this.imageDestination="",this.imageSource=t.imageSrc,this.profileImage=t.image}ngOnInit(){}ngAfterViewInit(){this.cropper=new Yq.a(this.imageElement.nativeElement,{zoomable:!1,scalable:!1,aspectRatio:1,crop:()=>{const e=this.cropper.getCroppedCanvas();this.imageDestination=e.toDataURL("image/png")}})}onUpload(){this.dialogRef.close(this.imageDestination)}closeDialog(){this.dialogRef.close(null)}}return e.\u0275fac=function(t){return new(t||e)(Io(KE),Io(XE))},e.\u0275cmp=gt({type:e,selectors:[["app-upload-profile-picture"]],viewQuery:function(e,t){var i;1&e&&ac($q,!0),2&e&&rc(i=uc())&&(t.imageElement=i.first)},decls:15,vars:1,consts:[[2,"padding","20px","width","500px","height","500px"],[2,"text-align","Center"],[2,"font-weight","400"],[1,"img-container"],["crossorigin","",3,"src"],["image",""],[2,"width","max-content","float","right"],[1,"btn","btn-secondary",2,"margin-right","10px",3,"click"],[1,"btn","btn-primary",2,"margin-right","10px",3,"click"]],template:function(e,t){1&e&&(No(0,"div",0),No(1,"div",1),No(2,"h2",2),wa(3,"Upload Profile Picture"),Vo(),Vo(),Bo(4,"hr"),No(5,"div",3),Bo(6,"img",4,5),Vo(),Bo(8,"hr"),No(9,"div",6),No(10,"button",7),Wo("click",(function(){return t.closeDialog()})),wa(11," Close "),Vo(),No(12,"div",6),No(13,"button",8),Wo("click",(function(){return t.onUpload()})),wa(14," Save "),Vo(),Vo(),Vo(),Vo()),2&e&&(Ss(6),Mo("src",t.imageSource,es))},styles:[".img-container[_ngcontent-%COMP%]{width:auto;height:70%}"]}),e})();class Xq extends S{constructor(e,t=0,i=rb){super(),this.source=e,this.delayTime=t,this.scheduler=i,(!db(t)||t<0)&&(this.delayTime=0),i&&"function"==typeof i.schedule||(this.scheduler=rb)}static create(e,t=0,i=rb){return new Xq(e,t,i)}static dispatch(e){const{source:t,subscriber:i}=e;return this.add(t.subscribe(i))}_subscribe(e){return this.scheduler.schedule(Xq.dispatch,this.delayTime,{source:this.source,subscriber:e})}}class Jq{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new Xq(t,this.delay,this.scheduler).subscribe(e)}}var Qq=n("Wcq6");function Zq(){}class eW{constructor(e,t=Cb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const n=this.zone;return this.delegate.schedule((function(t){n.runGuarded(()=>{e.apply(this,[t])})}),t,i)}}class tW{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zq,{},Zq,Zq)),t.pipe(ip({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class iW{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new eW(Zone.current)),this.insideAngular=e.run(()=>new eW(Zone.current,lb))}}const nW=new He("angularfire2.app.options"),sW=new He("angularfire2.app.nameOrConfig"),rW=new il("6.0.2");function oW(e,t,i){const n="object"==typeof i&&i||{};return n.name=n.name||"string"==typeof i&&i||"[DEFAULT]",Qq.apps.filter(e=>e&&e.name===n.name)[0]||t.runOutsideAngular(()=>Object(Qq.initializeApp)(e,n))}const aW={provide:class{},useFactory:oW,deps:[nW,Bc,[new oe,sW]]};let lW=(()=>{class e{constructor(e){Object(Qq.registerVersion)("angularfire",rW.full,e.toString()),Object(Qq.registerVersion)("angular",nl.full)}static initializeApp(t,i){return{ngModule:e,providers:[{provide:nW,useValue:t},{provide:sW,useValue:i}]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Je(Cc))},providers:[aW]}),e})();var cW=n("wj3C"),hW=n.n(cW),dW=n("mrSG"),uW=n("S+S0"),pW=function(){function e(e,t){this.code_=fW(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return fW(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),e}();function fW(e){return"storage/"+e}function mW(){return new pW("unknown","An unknown error occurred, please check the error payload for server response.")}function gW(){return new pW("canceled","User canceled the upload/download.")}function vW(){return new pW("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function yW(){return new pW("no-download-url","The given file does not have any download URLs.")}function bW(e,t,i){return new pW("invalid-argument","Invalid argument in `"+t+"` at index "+e+": "+i)}function wW(){return new pW("app-deleted","The Firebase app was deleted.")}function SW(e,t){return new pW("invalid-format","String does not match format '"+e+"': "+t)}function CW(e){throw new pW("internal-error","Internal error: "+e)}var _W={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function EW(e){switch(e){case _W.RAW:case _W.BASE64:case _W.BASE64URL:case _W.DATA_URL:return;default:throw"Expected one of the event types: ["+_W.RAW+", "+_W.BASE64+", "+_W.BASE64URL+", "+_W.DATA_URL+"]."}}var TW=function(){return function(e,t){this.data=e,this.contentType=t||null}}();function xW(t,i){switch(t){case _W.RAW:return new TW(kW(i));case _W.BASE64:case _W.BASE64URL:return new TW(AW(t,i));case _W.DATA_URL:return new TW((n=new OW(i)).base64?AW(_W.BASE64,n.rest):function(t){var i;try{i=decodeURIComponent(t)}catch(e){throw SW(_W.DATA_URL,"Malformed data URL.")}return kW(i)}(n.rest),function(e){return new OW(e).contentType}(i))}var n;throw mW()}function kW(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|63&n);else if(55296==(64512&n))if(i<e.length-1&&56320==(64512&e.charCodeAt(i+1))){var s=n,r=e.charCodeAt(++i);t.push(240|(n=65536|(1023&s)<<10|1023&r)>>18,128|n>>12&63,128|n>>6&63,128|63&n)}else t.push(239,191,189);else 56320==(64512&n)?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function AW(t,i){switch(t){case _W.BASE64:var n=-1!==i.indexOf("-"),s=-1!==i.indexOf("_");if(n||s)throw SW(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _W.BASE64URL:var r=-1!==i.indexOf("+"),o=-1!==i.indexOf("/");if(r||o)throw SW(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(i)}catch(e){throw SW(t,"Invalid character found")}for(var l=new Uint8Array(a.length),c=0;c<a.length;c++)l[c]=a.charCodeAt(c);return l}var OW=function(){return function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw SW(_W.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var i,n=t[1]||null;null!=n&&(this.base64=(i=n).length>=";base64".length&&";base64"===i.substring(i.length-";base64".length),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}(),DW={STATE_CHANGED:"state_changed"},IW={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function RW(e){switch(e){case"running":case"pausing":case"canceling":return IW.RUNNING;case"paused":return IW.PAUSED;case"success":return IW.SUCCESS;case"canceled":return IW.CANCELED;case"error":default:return IW.ERROR}}function PW(e){return null!=e}function MW(e){return void 0!==e}function LW(e){return"function"==typeof e}function NW(e){return"object"==typeof e}function VW(e){return NW(e)&&null!==e}function BW(e){return"string"==typeof e||e instanceof String}function FW(e){return jW(e)&&Number.isInteger(e)}function jW(e){return"number"==typeof e||e instanceof Number}function HW(e){return UW()&&e instanceof Blob}function UW(){return"undefined"!=typeof Blob}var qW=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({}),WW=function(){function t(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=qW.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=qW.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=qW.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return t.prototype.send=function(e,t,i,n){if(this.sent_)throw CW("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),PW(n))for(var s in n)n.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,n[s].toString());return PW(i)?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw CW("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw CW("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw CW("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},t.prototype.addUploadProgressListener=function(e){PW(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},t.prototype.removeUploadProgressListener=function(e){PW(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},t}(),zW=function(){function e(){}return e.prototype.createXhrIo=function(){return new WW},e}();function GW(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function YW(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GW();if(void 0!==i){for(var n=new i,s=0;s<e.length;s++)n.append(e[s]);return n.getBlob()}if(UW())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var $W=function(){function e(e,t){var i=0,n="";HW(e)?(this.data_=e,i=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=n}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,i){if(HW(this.data_)){var n=(r=t,o=i,(s=this.data_).webkitSlice?s.webkitSlice(r,o):s.mozSlice?s.mozSlice(r,o):s.slice?s.slice(r,o):null);return null===n?null:new e(n)}var s,r,o;return new e(new Uint8Array(this.data_.buffer,t,i-t),!0)},e.getBlob=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(UW()){var n=t.map((function(t){return t instanceof e?t.data_:t}));return new e(YW.apply(null,n))}var s=t.map((function(e){return BW(e)?xW(_W.RAW,e).data:e.data_})),r=0;s.forEach((function(e){r+=e.byteLength}));var o=new Uint8Array(r),a=0;return s.forEach((function(e){for(var t=0;t<e.length;t++)o[a++]=e[t]})),new e(o,!0)},e.prototype.uploadData=function(){return this.data_},e}(),KW=function(){function t(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(i){var n;try{n=t.makeFromUrl(i)}catch(e){return new t(i,"")}if(""===n.path)return n;throw new pW("invalid-default-bucket","Invalid default bucket '"+i+"'.")},t.makeFromUrl=function(e){var i=null,n=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}for(var r="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),o=[{regex:n,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+r+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],a=0;a<o.length;a++){var l=o[a],c=l.regex.exec(e);if(c){var h=c[l.indices.path];h||(h=""),i=new t(c[l.indices.bucket],h),l.postModify(i);break}}if(null==i)throw function(e){return new pW("invalid-url","Invalid URL '"+e+"'.")}(e);return i},t}();function XW(t){var i,n;try{i=JSON.parse(t)}catch(e){return null}return NW(n=i)&&!Array.isArray(n)?i:null}function JW(e,t){var i=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?i:e+"/"+i}function QW(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ZW(e){return"https://firebasestorage.googleapis.com/v0"+e}function ez(e){var t=encodeURIComponent,i="?";for(var n in e)e.hasOwnProperty(n)&&(i=i+(t(n)+"=")+t(e[n])+"&");return i.slice(0,-1)}function tz(e,t){return t}var iz=function(){return function(e,t,i,n){this.server=e,this.local=t||e,this.writable=!!i,this.xform=n||tz}}(),nz=null;function sz(e,t,i){var n=XW(t);return null===n?null:function(e,t,i){for(var n={type:"file"},s=i.length,r=0;r<s;r++){var o=i[r];n[o.local]=o.xform(n,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var i=new KW(e.bucket,e.fullPath);return t.makeStorageReference(i)}})}(n,e),n}(e,n,i)}function rz(e,t){for(var i={},n=t.length,s=0;s<n;s++){var r=t[s];r.writable&&(i[r.server]=e[r.local])}return JSON.stringify(i)}function oz(e){if(!NW(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if("customMetadata"===t){if(!NW(i))throw"Expected object for 'customMetadata' mapping."}else if(VW(i))throw"Mapping for '"+t+"' cannot be an object."}}function az(e){if(!NW(e)||!e)throw"Expected ListOptions object.";for(var t in e)if("maxResults"===t){if(!FW(e.maxResults)||e.maxResults<=0)throw"Expected maxResults to be a positive number.";if(e.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==t)throw"Unknown option: "+t;if(e.pageToken&&!BW(e.pageToken))throw"Expected pageToken to be string."}}var lz=function(){return function(e,t,i,n){this.url=e,this.method=t,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function cz(e){if(!e)throw mW()}function hz(e,t){return function(i,n){var s=sz(e,n,t);return cz(null!==s),s}}function dz(e){return function(t,i){var n;return(n=401===t.getStatus()?new pW("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new pW("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new pW("unauthorized","User does not have permission to access '"+e.path+"'."):i).setServerResponseProp(i.serverResponseProp()),n}}function uz(e){var t=dz(e);return function(i,n){var s=t(i,n);return 404===i.getStatus()&&(s=new pW("object-not-found","Object '"+e.path+"' does not exist.")),s.setServerResponseProp(n.serverResponseProp()),s}}function pz(e,t,i){var n=ZW(t.fullServerUrl()),s=e.maxOperationRetryTime,r=new lz(n,"GET",hz(e,i),s);return r.errorHandler=uz(t),r}function fz(e,t,i,n,s){var r={};r.prefix=t.isRoot?"":t.path+"/",i&&i.length>0&&(r.delimiter=i),n&&(r.pageToken=n),s&&(r.maxResults=s);var o=ZW(t.bucketOnlyServerUrl()),a=e.maxOperationRetryTime,l=new lz(o,"GET",function(e,t){return function(i,n){var s=function(e,t,i){var n=XW(i);return null===n?null:function(e,t,i){var n={prefixes:[],items:[],nextPageToken:i.nextPageToken};if(i.prefixes)for(var s=0,r=i.prefixes;s<r.length;s++){var o=r[s].replace(/\/$/,""),a=e.makeStorageReference(new KW(t,o));n.prefixes.push(a)}if(i.items)for(var l=0,c=i.items;l<c.length;l++)a=e.makeStorageReference(new KW(t,c[l].name)),n.items.push(a);return n}(e,t,n)}(e,t,n);return cz(null!==s),s}}(e,t.bucket),a);return l.urlParams=r,l.errorHandler=dz(t),l}function mz(e,t,i){var n=ZW(t.fullServerUrl()),s=e.maxOperationRetryTime,r=new lz(n,"GET",function(e,t){return function(i,n){var s=sz(e,n,t);return cz(null!==s),function(e,t){var i=XW(t);if(null===i)return null;if(!BW(i.downloadTokens))return null;var n=i.downloadTokens;if(0===n.length)return null;var s=encodeURIComponent;return n.split(",").map((function(t){var i=e.fullPath;return ZW("/b/"+s(e.bucket)+"/o/"+s(i))+ez({alt:"media",token:t})}))[0]}(s,n)}}(e,i),s);return r.errorHandler=uz(t),r}function gz(e,t,i,n){var s=ZW(t.fullServerUrl()),r=rz(i,n),o=e.maxOperationRetryTime,a=new lz(s,"PATCH",hz(e,n),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=r,a.errorHandler=uz(t),a}function vz(e,t){var i=ZW(t.fullServerUrl()),n=new lz(i,"DELETE",(function(e,t){}),e.maxOperationRetryTime);return n.successCodes=[200,204],n.errorHandler=uz(t),n}function yz(e,t,i){var n=Object.assign({},i);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),n}var bz=function(){return function(e,t,i,n){this.current=e,this.total=t,this.finalized=!!i,this.metadata=n||null}}();function wz(t,i){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(e){cz(!1)}return cz(!!n&&-1!==(i||["active"]).indexOf(n)),n}var Sz=function(){return function(e,t,i){if(LW(e)||PW(t)||PW(i))this.next=e,this.error=t||null,this.complete=i||null;else{var n=e;this.next=n.next||null,this.error=n.error||null,this.complete=n.complete||null}}}(),Cz=function(){return function(e,t,i,n,s,r){this.bytesTransferred=e,this.totalBytes=t,this.state=i,this.metadata=n,this.task=s,this.ref=r}}();function _z(t,i,n){for(var s=i.length,r=i.length,o=0;o<i.length;o++)if(i[o].optional){s=o;break}if(!(s<=n.length&&n.length<=r))throw(a=s)===(l=r)?(c=a,h=1===a?"argument":"arguments"):(c="between "+a+" and "+l,h="arguments"),new pW("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+c+" "+h+", received "+n.length+".");var a,l,c,h;for(o=0;o<n.length;o++)try{i[o].validator(n[o])}catch(e){throw e instanceof Error?bW(o,t,e.message):bW(o,t,e)}}var Ez=function(){return function(e,t){var i=this;this.validator=function(t){i.optional&&!MW(t)||e(t)},this.optional=!!t}}();function Tz(e,t){function i(e){if(!BW(e))throw"Expected string."}var n,s,r;return e?(s=i,r=e,n=function(e){s(e),r(e)}):n=i,new Ez(n,t)}function xz(){return new Ez((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||UW()&&e instanceof Blob))throw"Expected Blob or File."}))}function kz(e){return new Ez(oz,e)}function Az(e){return new Ez(az,e)}function Oz(){return new Ez((function(e){if(!(jW(e)&&e>=0))throw"Expected a number 0 or greater."}))}function Dz(e,t){return new Ez((function(t){if(!(null===t||PW(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function Iz(e){return new Ez((function(e){if(null!==e&&!LW(e))throw"Expected a Function."}),e)}function Rz(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var Pz,Mz,Lz=function(){function t(e,t,i,n,s,r){var o=this;void 0===r&&(r=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.service_=t,this.location_=i,this.blob_=s,this.metadata_=r,this.mappings_=n,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(e){o.request_=null,o.chunkMultiplier_=1,e.codeEquals("canceled")?(o.needToFetchStatus_=!0,o.completeTransitions_()):(o.error_=e,o.transition_("error"))},this.metadataErrorHandler_=function(e){o.request_=null,e.codeEquals("canceled")?o.completeTransitions_():(o.error_=e,o.transition_("error"))},this.promise_=new Promise((function(e,t){o.resolve_=e,o.reject_=t,o.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(i){return e.updateProgress_(t+i)}},t.prototype.shouldDoResumable_=function(e){return e.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var t=this;this.service_.getAuthToken().then((function(i){switch(t.state_){case"running":e(i);break;case"canceling":t.transition_("canceled");break;case"pausing":t.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(i){var n=function(t,i,n,s,r){var o=i.bucketOnlyServerUrl(),a=yz(i,s,r),l={name:a.fullPath},c=ZW(o),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":s.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=rz(a,n),u=new lz(c,"POST",(function(t){var i;wz(t);try{i=t.getResponseHeader("X-Goog-Upload-URL")}catch(e){cz(!1)}return cz(BW(i)),i}),t.maxUploadRetryTime);return u.urlParams=l,u.headers=h,u.body=d,u.errorHandler=dz(i),u}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),s=t.service_.makeRequest(n,i);t.request_=s,s.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,i=this.uploadUrl_;this.resolveToken_((function(n){var s=function(t,i,n,s){var r=new lz(n,"POST",(function(t){var i=wz(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){cz(!1)}n||cz(!1);var r=Number(n);return cz(!isNaN(r)),new bz(r,s.size(),"final"===i)}),t.maxUploadRetryTime);return r.headers={"X-Goog-Upload-Command":"query"},r.errorHandler=dz(i),r}(t.service_,t.location_,i,t.blob_),r=t.service_.makeRequest(s,n);t.request_=r,r.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,i=262144*this.chunkMultiplier_,n=new bz(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_((function(r){var o;try{o=function(e,t,i,n,s,r,o,a){var l=new bz(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=n.size()),n.size()!==l.total)throw new pW("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=l.total-l.current,h=c;s>0&&(h=Math.min(h,s));var d=l.current,u={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},p=n.slice(d,d+h);if(null===p)throw vW();var f=new lz(i,"POST",(function(e,i){var s,o=wz(e,["active","final"]),a=l.current+h,c=n.size();return s="final"===o?hz(t,r)(e,i):null,new bz(a,c,"final"===o,s)}),t.maxUploadRetryTime);return f.headers=u,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=dz(e),f}(t.location_,t.service_,s,t.blob_,i,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_("error")}var a=t.service_.makeRequest(o,r);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var i=pz(e.service_,e.location_,e.mappings_),n=e.service_.makeRequest(i,t);e.request_=n,n.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_("success")}),e.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var i=function(e,t,i,n,s){var r=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;var l=yz(t,n,s),c=rz(l,i),h=$W.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",n,"\r\n--"+a+"--");if(null===h)throw vW();var d={name:l.fullPath},u=ZW(r),p=e.maxUploadRetryTime,f=new lz(u,"POST",hz(e,i),p);return f.urlParams=d,f.headers=o,f.body=h.uploadData(),f.errorHandler=dz(t),f}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),n=e.service_.makeRequest(i,t);e.request_=n,n.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_("success")}),e.errorHandler_)}))},t.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},t.prototype.transition_=function(e){if(this.state_!==e)switch(e){case"canceling":case"pausing":this.state_=e,null!==this.request_&&this.request_.cancel();break;case"running":var t="paused"===this.state_;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=e,this.notifyObservers_();break;case"canceled":this.error_=gW(),this.state_=e,this.notifyObservers_();break;case"error":case"success":this.state_=e,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var e=RW(this.state_);return new Cz(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,i,n,s){function r(){if(t!==DW.STATE_CHANGED)throw"Expected one of the event types: ["+DW.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=Iz(!0).validator,l=Dz(null,!0).validator;function c(t){try{return void a(t)}catch(e){}try{if(l(t),!(MW(t.next)||MW(t.error)||MW(t.complete)))throw"";return}catch(e){throw o}}var h=[Tz(r),Dz(c,!0),Iz(!0),Iz(!0)];_z("on",h,arguments);var d=this;function u(e){return function(t,i,n){null!==e&&_z("on",e,arguments);var r=new Sz(t,i,s);return d.addObserver_(r),function(){d.removeObserver_(r)}}}function p(e){if(null===e)throw o;c(e)}var f=[Dz(p),Iz(!0),Iz(!0)],m=!(MW(i)||MW(n)||MW(s));return m?u(f):u(null)(i,n,s)},t.prototype.then=function(e,t){return this.promise_.then(e,t)},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},t.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},t.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach((function(t){e.notifyObserver_(t)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(RW(this.state_)){case IW.SUCCESS:Rz(this.resolve_.bind(null,this.snapshot))();break;case IW.CANCELED:case IW.ERROR:Rz(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(e){switch(RW(this.state_)){case IW.RUNNING:case IW.PAUSED:e.next&&Rz(e.next.bind(e,this.snapshot))();break;case IW.SUCCESS:e.complete&&Rz(e.complete.bind(e))();break;case IW.CANCELED:case IW.ERROR:e.error&&Rz(e.error.bind(e,this.error_))();break;default:e.error&&Rz(e.error.bind(e,this.error_))()}},t.prototype.resume=function(){_z("resume",[],arguments);var e="paused"===this.state_||"pausing"===this.state_;return e&&this.transition_("running"),e},t.prototype.pause=function(){_z("pause",[],arguments);var e="running"===this.state_;return e&&this.transition_("pausing"),e},t.prototype.cancel=function(){_z("cancel",[],arguments);var e="running"===this.state_||"pausing"===this.state_;return e&&this.transition_("canceling"),e},t}(),Nz=function(){function e(e,t){this.service=e,this.location=t instanceof KW?t:KW.makeFromUrl(t)}return e.prototype.toString=function(){return _z("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,i){return new e(t,i)},e.prototype.mappings=function(){return function(){if(nz)return nz;var e=[];e.push(new iz("bucket")),e.push(new iz("generation")),e.push(new iz("metageneration")),e.push(new iz("name","fullPath",!0));var t=new iz("name");t.xform=function(e,t){return function(e){return!BW(e)||e.length<2?e:QW(e)}(t)},e.push(t);var i=new iz("size");return i.xform=function(e,t){return PW(t)?Number(t):t},e.push(i),e.push(new iz("timeCreated")),e.push(new iz("updated")),e.push(new iz("md5Hash",null,!0)),e.push(new iz("cacheControl",null,!0)),e.push(new iz("contentDisposition",null,!0)),e.push(new iz("contentEncoding",null,!0)),e.push(new iz("contentLanguage",null,!0)),e.push(new iz("contentType",null,!0)),e.push(new iz("metadata","customMetadata",!0)),nz=e}()},e.prototype.child=function(e){_z("child",[Tz()],arguments);var t=JW(this.location.path,e),i=new KW(this.location.bucket,t);return this.newRef(this.service,i)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new KW(this.location.bucket,e);return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new KW(this.location.bucket,"");return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return QW(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),_z("put",[xz(),kz(!0)],arguments),this.throwIfRoot_("put"),new Lz(this,this.service,this.location,this.mappings(),new $W(e),t)},e.prototype.putString=function(e,t,i){void 0===t&&(t=_W.RAW),_z("putString",[Tz(),Tz(EW,!0),kz(!0)],arguments),this.throwIfRoot_("putString");var n=xW(t,e),s=Object.assign({},i);return!PW(s.contentType)&&PW(n.contentType)&&(s.contentType=n.contentType),new Lz(this,this.service,this.location,this.mappings(),new $W(n.data,!0),s)},e.prototype.delete=function(){var e=this;return _z("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(t){var i=vz(e.service,e.location);return e.service.makeRequest(i,t).getPromise()}))},e.prototype.listAll=function(){_z("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then((function(){return e}))},e.prototype.listAllHelper=function(e,t){return Object(dW.__awaiter)(this,void 0,void 0,(function(){var i,n,s;return Object(dW.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.list({pageToken:t})];case 1:return i=r.sent(),(n=e.prefixes).push.apply(n,i.prefixes),(s=e.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,this.listAllHelper(e,i.nextPageToken)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.list=function(e){_z("list",[Az(!0)],arguments);var t=this;return this.service.getAuthToken().then((function(i){var n=e||{},s=fz(t.service,t.location,"/",n.pageToken,n.maxResults);return t.service.makeRequest(s,i).getPromise()}))},e.prototype.getMetadata=function(){var e=this;return _z("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(t){var i=pz(e.service,e.location,e.mappings());return e.service.makeRequest(i,t).getPromise()}))},e.prototype.updateMetadata=function(e){var t=this;return _z("updateMetadata",[kz()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(i){var n=gz(t.service,t.location,e,t.mappings());return t.service.makeRequest(n,i).getPromise()}))},e.prototype.getDownloadURL=function(){var e=this;return _z("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(t){var i=mz(e.service,e.location,e.mappings());return e.service.makeRequest(i,t).getPromise().then((function(e){if(null===e)throw yW();return e}))}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new pW("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),Vz=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),Bz=function(){function t(e,t,i,n,s,r,o,a,l,c,h){var d=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=i,this.body_=n,this.successCodes_=s.slice(),this.additionalRetryCodes_=r.slice(),this.callback_=o,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=l,this.pool_=h,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return t.prototype.start_=function(){var t=this;function i(i,n){var s,r=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var l=t.callback_(a,a.getResponseText());MW(l)?r(l):r()}catch(e){o(e)}else null!==a?((s=mW()).setServerResponseProp(a.getResponseText()),o(t.errorCallback_?t.errorCallback_(a,s):s)):o(s=n.canceled?t.appDelete_?wW():gW():new pW("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?i(0,new Fz(!1,null,!0)):this.backoffId_=function(e,i,n){var s=1,r=null,o=!1,a=0;function l(){return 2===a}var c=!1;function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c||(c=!0,i.apply(null,e))}function d(e){r=setTimeout((function(){r=null,function(e,i){if(i)e(!1,new Fz(!1,null,!0));else{var n=t.pool_.createXhrIo();t.pendingXhr_=n,null!==t.progressCallback_&&n.addUploadProgressListener(s),n.send(t.url_,t.method_,t.body_,t.headers_).then((function(i){null!==t.progressCallback_&&i.removeUploadProgressListener(s),t.pendingXhr_=null;var n=(i=i).getErrorCode()===qW.NO_ERROR,r=i.getStatus();if(n&&!t.isRetryStatusCode_(r)){var o=-1!==t.successCodes_.indexOf(r);e(!0,new Fz(o,i))}else{var a=i.getErrorCode()===qW.ABORT;e(!1,new Fz(!1,null,a))}}))}function s(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(u,l())}),e)}function u(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!c)if(e)h.call.apply(h,Object(dW.__spreadArrays)([null,e],t));else{var n,r=l()||o;r?h.call.apply(h,Object(dW.__spreadArrays)([null,e],t)):(s<64&&(s*=2),1===a?(a=2,n=0):n=1e3*(s+Math.random()),d(n))}}var p=!1;function f(e){p||(p=!0,c||(null!==r?(e||(a=2),clearTimeout(r),d(0)):e||(a=1)))}return d(0),setTimeout((function(){o=!0,f(!0)}),n),f}(0,i,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),n=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||n},t}(),Fz=function(){return function(e,t,i){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!i}}(),jz=function(){function t(e,i,n,s){var r;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=n,this.bucket_=null!=s?KW.makeFromBucketSpec(s):t.extractBucket_(null===(r=this.app_)||void 0===r?void 0:r.options),this.internals_=new Hz(this)}return t.extractBucket_=function(e){var t=null==e?void 0:e.storageBucket;return null==t?null:KW.makeFromBucketSpec(t)},t.prototype.getAuthToken=function(){return Object(dW.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(dW.__generator)(this,(function(i){switch(i.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=i.sent()))return[2,t.accessToken];i.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(e){return e.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(e){return new Nz(this,e)},t.prototype.makeRequest=function(e,t){var i=this;if(this.deleted_)return new Vz(wW());var n=function(e,t,i,n){var s=ez(e.urlParams),r=e.url+s,o=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(o,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(o,i),function(e){e["X-Firebase-Storage-Version"]="webjs/"+(void 0!==hW.a?hW.a.SDK_VERSION:"AppManager")}(o),new Bz(r,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}(e,this.appId_,t,this.pool_);return this.requests_.add(n),n.getPromise().then((function(){return i.requests_.delete(n)}),(function(){return i.requests_.delete(n)})),n},t.prototype.ref=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(_z("ref",[Tz(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var i=new Nz(this,this.bucket_);return null!=e?i.child(e):i},t.prototype.refFromURL=function(t){function i(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{KW.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return _z("refFromURL",[Tz(i,!1)],arguments),new Nz(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(e){_z("setMaxUploadRetryTime",[Oz()],arguments),this.maxUploadRetryTime_=e},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(e){_z("setMaxOperationRetryTime",[Oz()],arguments),this.maxOperationRetryTime_=e},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),Hz=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},e}();function Uz(e){const t=function(e){return new S(t=>(e.on("state_changed",e=>t.next(e),e=>t.error(e),()=>t.complete()),()=>e.cancel()))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe(B(e=>e.bytesTransferred/e.totalBytes*100))}}function qz(e,t,i){return{getDownloadURL:()=>du(void 0).pipe(Tb(t.outsideAngular),Gu(()=>e.getDownloadURL()),i),getMetadata:()=>du(void 0).pipe(Tb(t.outsideAngular),Gu(()=>e.getMetadata()),i),delete:()=>U(e.delete()),child:n=>qz(e.child(n),t,i),updateMetadata:t=>U(e.updateMetadata(t)),put:(t,i)=>Uz(e.put(t,i)),putString:(t,i,n)=>Uz(e.putString(t,i,n)),listAll:()=>U(e.listAll())}}Mz={TaskState:IW,TaskEvent:DW,StringFormat:_W,Storage:jz,Reference:Nz},(Pz=hW.a).INTERNAL.registerComponent(new uW.Component("storage",(function(e,t){var i=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal");return new jz(i,n,new zW,t)}),"PUBLIC").setServiceProps(Mz).setMultipleInstances(!0)),Pz.registerVersion("@firebase/storage","0.3.43");const Wz=new He("angularfire2.storageBucket");let zz=(()=>{class e{constructor(e,t,i,n,s){var r;this.schedulers=new iW(s),this.keepUnstableUntilFirst=(r=this.schedulers,function(e){return(e=e.lift(new tW(r.ngZone))).pipe(function(e,t=0){return function(i){return i.lift(new Jq(e,t))}}(r.outsideAngular),Tb(r.insideAngular))}),this.storage=s.runOutsideAngular(()=>oW(e,s,t).storage(i||void 0))}ref(e){return qz(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst)}upload(e,t,i){return qz(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst).put(t,i)}}return e.\u0275fac=function(t){return new(t||e)(Je(nW),Je(sW,8),Je(Wz,8),Je(Cc),Je(Bc))},e.\u0275prov=ue({factory:function(){return new e(Je(nW),Je(sW,8),Je(Wz,8),Je(Cc),Je(Bc))},token:e,providedIn:"any"}),e})(),Gz=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[zz]}),e})(),Yz=(()=>{class e{validate(e){if(null==e.value)return null;var t=e.value.split("-"),i=parseInt(t[0]),n=(new Date).getFullYear()-6,s=(new Date).getFullYear()-70;return i<n&&i>s?null:{invalidDob:!0}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Ct({type:e,selectors:[["","dobValidator",""]],features:[za([{provide:$g,useExisting:e,multi:!0}])]}),e})(),$z=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-loader"]],decls:5,vars:0,consts:[[1,"lds-ellipsis"]],template:function(e,t){1&e&&(No(0,"div",0),Bo(1,"div"),Bo(2,"div"),Bo(3,"div"),Bo(4,"div"),Vo())},styles:[".lds-ellipsis[_ngcontent-%COMP%]{display:inline-block;position:relative;width:20px;height:80px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:15px;width:10px;height:10px;border-radius:50%;background:#1f22bb;-webkit-animation-timing-function:cubic-bezier(0,1,1,0);animation-timing-function:cubic-bezier(0,1,1,0)}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{left:4px;-webkit-animation:lds-ellipsis1 .6s infinite;animation:lds-ellipsis1 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:4px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2), .lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation:lds-ellipsis2 .6s infinite;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:16px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:32px;-webkit-animation:lds-ellipsis3 .6s infinite;animation:lds-ellipsis3 .6s infinite}@-webkit-keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@-webkit-keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@-webkit-keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(20px)}}@keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(20px)}}"]}),e})();const Kz=["basicProfile"];function Xz(e,t){1&e&&(No(0,"span"),wa(1,"Upload"),Vo())}function Jz(e,t){1&e&&(No(0,"div",81),Bo(1,"img",82),Vo())}function Qz(e,t){1&e&&(No(0,"span",83),Bo(1,"app-loader"),Vo())}function Zz(e,t){1&e&&(No(0,"div",84),wa(1," Please upload a valid Image ! "),Vo())}function eG(e,t){1&e&&(No(0,"div",85),wa(1," Supported file upload formats(.jpg, .png, .jpeg) upto size limit of 3MB * "),Vo())}function tG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid Name"),Vo())}function iG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid dob"),Vo())}function nG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid contact"),Vo())}function sG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid current organisation"),Vo())}function rG(e,t){1&e&&(No(0,"div",87),wa(1," Organisation already exists ! "),Vo())}function oG(e,t){if(1&e){const e=Ho();No(0,"div",88),No(1,"div",89),wa(2),Vo(),No(3,"button",90),Wo("click",(function(){ei(e);const i=t.index;return Ko().deleteOrganisation(i)})),Bo(4,"i",91),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(2),Sa(e)}}function aG(e,t){if(1&e&&(No(0,"p",3),wa(1),Bo(2,"br"),wa(3),Vo()),2&e){const e=Ko();Ss(1),Ca(" Actual Earning per hour : ",e.actualEarning,""),Ss(2),_a(" GST charges : ",e.GSTValue," | Platform fees :",e.commission," ")}}function lG(e,t){if(1&e&&(No(0,"option",92),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e.category),Ss(1),Ca(" ",e.category," ")}}function cG(e,t){if(1&e&&(No(0,"option",92),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e.subCategory),Ss(1),Ca(" ",e.subCategory," ")}}function hG(e,t){if(1&e){const e=Ho();No(0,"div",88),No(1,"div",89),wa(2),Vo(),No(3,"button",90),Wo("click",(function(){ei(e);const i=t.index;return Ko().deleteExpertise(i)})),Bo(4,"i",91),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(2),_a(" ",e.category," : ",e.subCategory," ")}}function dG(e,t){1&e&&(No(0,"div",87),wa(1," Expertise already exists ! "),Vo())}function uG(e,t){1&e&&(No(0,"div",87),wa(1," Please enter your price per hour first ! "),Vo())}function pG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid Institute"),Vo())}function fG(e,t){1&e&&(No(0,"div",87),wa(1," Educational Qualification already exists ! "),Vo())}function mG(e,t){if(1&e){const e=Ho();No(0,"div",88),No(1,"div",89),wa(2),Vo(),No(3,"button",90),Wo("click",(function(){ei(e);const i=t.index;return Ko().deleteEducation(i)})),Bo(4,"i",91),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(2),Sa(e)}}function gG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid professional skills"),Vo())}function vG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid years of experience"),Vo())}function yG(e,t){1&e&&(No(0,"span",86),wa(1,"Invalid Link"),Vo())}let bG=(()=>{class e{constructor(e,t,i,n,s,r,o){this.cookieService=e,this.tutorService=t,this.httpService=i,this.firebaseStorage=n,this.snackBar=s,this.matDialog=r,this.router=o,this.addExpertise=new Ry,this.pricePerHourError=!1,this.basic=!0,this.myControl=new Fv,this.isLoading3=!1,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},this.options=[],this.expertises=[],this.educationQualifications=[],this.previousOraganisations=[],this.tutorProfile=new oT,this.tutorProfileDetails=new Iy,this.profilePictureUrl="../../../assets/images/default-user-image.png",this.uploadedProfilePicture=null,this.categories=[],this.subCategories=[],this.appInfo=[],this.invalidPicture=!1,this.pictureInfo=!0,this.fillOptions()}ngOnInit(){this.getAllCategories(),this.getEarningAppInfo(),this.filteredOptions=this.myControl.valueChanges.pipe(Xu(""),B(e=>this._filter(e))),this.tutorService.getTutorProfileDetails().profileCompleted?(this.tutorProfile=this.tutorService.getTutorDetials(),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),null!=this.tutorProfileDetails.educationalQualifications&&(this.educationQualifications=this.tutorProfileDetails.educationalQualifications),null!=this.tutorProfileDetails.areaOfExpertise&&(this.expertises=this.tutorProfileDetails.areaOfExpertise),null!=this.tutorProfileDetails.previousOrganisations&&(this.previousOraganisations=this.tutorProfileDetails.previousOrganisations),null!=this.tutorProfileDetails.profilePictureUrl&&(this.profilePictureUrl=this.tutorProfileDetails.profilePictureUrl)):setTimeout(()=>{this.tutorProfile=this.tutorService.getTutorDetials(),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),null!=this.tutorProfileDetails.educationalQualifications&&(this.educationQualifications=this.tutorProfileDetails.educationalQualifications),null!=this.tutorProfileDetails.areaOfExpertise&&(this.expertises=this.tutorProfileDetails.areaOfExpertise),null!=this.tutorProfileDetails.previousOrganisations&&(this.previousOraganisations=this.tutorProfileDetails.previousOrganisations),null!=this.tutorProfileDetails.profilePictureUrl&&(this.profilePictureUrl=this.tutorProfileDetails.profilePictureUrl)},1e3)}_filter(e){const t=e.toLowerCase();return this.options.filter(e=>e.toLowerCase().includes(t))}getEarningAppInfo(){this.httpService.getEarningAppInfo().subscribe(e=>{this.appInfo=e})}onPercentChange(e){let t=1+parseFloat(this.appInfo[1].value)/100,i=1+parseFloat(this.appInfo[0].value)/100;this.GSTValue=Math.abs(this.round(e/t-e)),this.commission=Math.abs(this.round(e/t/i-e/t)),this.actualEarning=Math.abs(this.round(e-this.GSTValue-this.commission))}round(e){var t=Number((100*Math.abs(e)).toPrecision(15));return Math.round(t)/100*Math.sign(e)}fillOptions(){this.httpService.getAllSubCategories().subscribe(e=>{if(this.subCategories=e,this.subCategories.length>0)for(var t=0;t<this.subCategories.length;t++)this.options.push(this.subCategories[t].subCategory)})}filterSCfromCateg(){return this.subCategories.filter(e=>e.category==this.selectedCategory)}getAllCategories(){this.httpService.getAllCategories().subscribe(e=>{let t=e;if(t.length>0)for(var i=0;i<t.length;i++){let e=new Ig;e.category=t[i].category,this.categories.push(e)}this.httpService.getAllSubCategories().subscribe(e=>{this.subCategories=e})})}calculateProfileCompleted(){let e=0;return null!=this.tutorProfile.fullName&&(e+=1),null!=this.tutorProfile.dateOfBirth&&(e+=1),null!=this.tutorProfile.contact&&(e+=1),null!=this.tutorProfileDetails.currentOrganisation&&(e+=1),this.expertises.length>0&&(e+=1),this.tutorProfileDetails.previousOrganisations.length>0&&(e+=1),null!=this.tutorProfileDetails.institute&&(e+=1),this.tutorProfileDetails.educationalQualifications.length>0&&(e+=1),null!=this.tutorProfileDetails.professionalSkills&&(e+=1),null!=this.tutorProfileDetails.yearsOfExperience&&(e+=1),null!=this.tutorProfileDetails.description&&(e+=1),null!=this.tutorProfileDetails.speciality&&(e+=1),null!=this.tutorProfileDetails.linkedInProfile&&(e+=1),100*this.round(e/13)}saveExpertBasicProfile(e){this.userId=this.cookieService.get("userId"),this.userId&&this.expertises.length>0?(this.tutorProfile.tid=this.userId,this.tutorProfile.contact=e.value.contact,this.tutorProfile.dateOfBirth=e.value.dob,this.tutorProfile.fullName=e.value.fullName,this.tutorProfile.bookingId=this.tutorService.getTutorDetials().bookingId,this.tutorProfile.profilePictureUrl=this.profilePictureUrl,this.tutorProfileDetails.tid=this.userId,this.tutorProfileDetails.educationalQualifications=this.educationQualifications,this.tutorProfileDetails.professionalSkills=e.value.professionalSkills,this.tutorProfileDetails.fullName=this.tutorProfile.fullName,this.tutorProfileDetails.profilePictureUrl=this.profilePictureUrl,this.tutorProfileDetails.bookingId=this.tutorProfile.bookingId,this.tutorProfileDetails.institute=e.value.Institute,this.tutorProfileDetails.areaOfExpertise=this.expertises,this.tutorProfileDetails.linkedInProfile=e.value.linkedInProfile,this.tutorProfileDetails.yearsOfExperience=e.value.yearsOfExperience,this.tutorProfileDetails.currentOrganisation=e.value.currentOrganisation,this.tutorProfileDetails.previousOrganisations=this.previousOraganisations,this.tutorProfileDetails.description=e.value.description,this.tutorProfileDetails.speciality=e.value.speciality,this.tutorProfileDetails.bookingId=this.tutorService.getTutorProfileDetails().bookingId,console.log(this.tutorProfileDetails),this.calculateProfileCompleted(),this.httpService.updateTutorProfile(this.tutorProfile).subscribe(e=>{this.tutorService.setTutorDetails(this.tutorProfile),this.tutorProfileDetails.profileCompleted=this.calculateProfileCompleted(),this.httpService.updateTutorProfileDetails(this.tutorProfileDetails).subscribe(()=>{this.tutorService.setTutorProfileDetails(this.tutorProfileDetails),this.snackBar.open("Information saved Successfully !","close",this.config),this.router.navigate(["/home/tutor-dashboard"])})})):this.errorText="Enter atleast one area of Expertise !"}saveExpertAdvancedProfile(e){this.tutorProfileDetails.profileCompleted>=50&&(this.userId=this.cookieService.get("userId"),this.userId&&this.expertises.length>0?(this.tutorProfileDetails.institute=e.value.Institute,this.tutorProfileDetails.areaOfExpertise=this.expertises,this.tutorProfileDetails.linkedInProfile=e.value.linkedInProfile,this.tutorProfileDetails.yearsOfExperience=e.value.yearsOfExperience,this.tutorProfileDetails.currentOrganisation=e.value.currentOrganisation,this.tutorProfileDetails.previousOrganisations=this.previousOraganisations,this.tutorProfileDetails.description=e.value.description,this.tutorProfileDetails.speciality=e.value.speciality,this.tutorProfileDetails.bookingId=this.tutorService.getTutorProfileDetails().bookingId,50==this.tutorProfileDetails.profileCompleted&&(this.tutorProfileDetails.profileCompleted=100),this.httpService.updateTutorProfileDetails(this.tutorProfileDetails).subscribe(e=>{this.tutorService.setTutorProfileDetails(this.tutorProfileDetails),this.snackBar.open("Information saved Successfully !","close",this.config),this.router.navigate(["/home/tutor-dashboard"])})):this.errorText="Enter atleast one area of Expertise !")}cancelForm(){location.reload()}duplicacyCheck(e,t){return e.includes(t)}expertiseDuplicacyCheck(e,t){for(let i of this.expertises)if(i.category==e&&i.subCategory==t)return!0;return!1}profilePictureChange(e){if(this.uploadedProfilePicture=e.target.files[0],this.isLoading3=!0,this.uploadedProfilePicture=e.target.files[0],Math.round(this.uploadedProfilePicture.size/1024)>3072||!this.uploadedProfilePicture.type.includes("image"))this.invalidPicture=!0,this.isLoading3=!1;else{this.invalidPicture=!1;const t=new FileReader;e.target.files&&e.target.files.length&&(this.uploadedProfilePicture=e.target.files[0],t.readAsDataURL(this.uploadedProfilePicture),t.onload=()=>{this.openDialog(t.result)})}}openDialog(e){const t=new WE;t.disableClose=!0,t.data={image:this.uploadedProfilePicture,imageSrc:e},this.matDialog.open(Kq,t).afterClosed().subscribe(e=>{if(null==e)this.isLoading3=!1;else{var t=this.b64toBlob(e,this.uploadedProfilePicture.type),i=new File([t],this.uploadedProfilePicture.name,{type:this.uploadedProfilePicture.type,lastModified:Date.now()});this.uploadedProfilePicture=i,this.uploadProfilePicture()}})}b64toBlob(e,t){for(var i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),s=new Uint8Array(n),r=0;r<i.length;r++)s[r]=i.charCodeAt(r);return new Blob([n],{type:t})}profilePictureChangeCompleted(e){this.uploadedProfilePicture=e.target.files[0];var t=`tutor_profile_picture/${this.uploadedProfilePicture}_${(new Date).getTime()}`;const i=this.firebaseStorage.ref(t);this.firebaseStorage.upload(t,this.uploadedProfilePicture).snapshotChanges().pipe(rp(()=>{i.getDownloadURL().subscribe(e=>{var t=this.tutorService.getTutorProfileDetails();this.profilePictureUrl=e,t.profilePictureUrl=this.profilePictureUrl,this.httpService.editTutorProfileDetails(t).subscribe(e=>{var t=this.tutorService.getTutorDetials();t.profilePictureUrl=this.profilePictureUrl,this.httpService.editBasicProfile(t).subscribe(e=>{this.tutorProfile.profilePictureUrl=this.profilePictureUrl,this.snackBar.open("Image Uploaded successfully","close",this.config)})})})})).subscribe()}uploadProfilePicture(){var e=`tutor_profile_picture/${this.uploadedProfilePicture}_${(new Date).getTime()}`;const t=this.firebaseStorage.ref(e);this.firebaseStorage.upload(e,this.uploadedProfilePicture).snapshotChanges().pipe(rp(()=>{t.getDownloadURL().subscribe(e=>{this.profilePicUploadStatus=!0,this.isLoading3=!1,this.pictureInfo=!1,this.profilePictureUrl=e,this.snackBar.open("Image Uploaded successfully","close",this.config)})})).subscribe()}basicProfileToggle(){this.basic=!0}advancedProfileToggle(){this.tutorService.tutorProfileDetails.profileCompleted<50?this.profileError="Complete basic profile first !":this.basic=!1}findSubCategory(e){if(!e)return null;for(let t=0;t<this.subCategories.length;t++)if(this.subCategories[t].subCategory==e)return this.subCategories[t].category}saveExpertise(){this.addExpertise=new Ry,this.expertiseDuplicacyCheck(this.selectedCategory,this.selectedSubCategory)?(this.duplicateExpertiseArea=!0,this.selectedExpertise="",this.selectedSubCategory="",this.priceForExpertise=""):(this.addExpertise.category=this.selectedCategory,this.addExpertise.subCategory=this.selectedSubCategory,null!=this.tutorProfileDetails.price1?(this.addExpertise.price=parseInt(this.tutorProfileDetails.price1),this.expertises.push(this.addExpertise),this.selectedCategory="",this.selectedSubCategory="",this.priceForExpertise="",1==this.duplicateExpertiseArea&&(this.duplicateExpertiseArea=!1)):this.pricePerHourError=!0)}deleteExpertise(e){var t=this.expertises[e];confirm("Are you sure you want to delete ?")&&(this.httpService.subtractArea(this.tutorProfile.tid,"Expert",t.subCategory).subscribe(),this.expertises.splice(e,1))}addOrganisation(){this.duplicacyCheck(this.previousOraganisations,this.inputOrganisation)?(this.inputOrganisation="",this.duplicatePreviousOrganisation=!0):(this.previousOraganisations.push(this.inputOrganisation),this.inputOrganisation="",1==this.duplicatePreviousOrganisation&&(this.duplicatePreviousOrganisation=!1))}deleteOrganisation(e){this.previousOraganisations.splice(e,1)}addEducation(){this.duplicacyCheck(this.educationQualifications,this.inputEducation)?(this.inputEducation="",this.duplicateEducationArea=!0):(this.educationQualifications.push(this.inputEducation),this.inputEducation="",1==this.duplicateEducationArea&&(this.duplicateEducationArea=!1))}deleteEducation(e){this.educationQualifications.splice(e,1)}}return e.\u0275fac=function(t){return new(t||e)(Io(Dx),Io(aT),Io(Og),Io(zz),Io(UE),Io(eT),Io(Em))},e.\u0275cmp=gt({type:e,selectors:[["app-profile"]],viewQuery:function(e,t){var i;1&e&&ac(Kz,!0),2&e&&rc(i=uc())&&(t.basicProfile=i.first)},decls:167,vars:54,consts:[[1,"container",2,"margin-bottom","50px"],[1,"row"],[1,"col-md-6"],[2,"margin","10px"],[2,"color","#e3165b","font-size","x-large","margin-right","40px","display","inline"],[2,"width","130px","height","130px","border-radius","100%","border","1px solid black",3,"src"],[1,"form-group"],["hidden","true","type","file","accept",".jpg,.png,.jpeg","onclick","this.value=null","required","",3,"change"],["profilePicture",""],[1,"btn","btn-primary",2,"margin-top","5px","width","140px","position","relative","height","30px",3,"click"],[4,"ngIf"],["class","tickMark",4,"ngIf"],["class","loader","style","text-align: center; z-index: 10",4,"ngIf"],["style","margin: 5px;margin-left: 0; font-size: 12px; font-weight: 600;color: red;",4,"ngIf"],["style","margin: 10px;margin-left: 0; font-size: 12px; font-weight: 600;color: red;",4,"ngIf"],[1,"col-md-3",2,"text-align","end","margin","20px"],[1,"btn",2,"margin-right","2vw","text-decoration","underline","width","auto",3,"click"],["type","submit",1,"btn",2,"padding","1vh 2vw","background-color","purple","color","white","width","auto","font-size","small",3,"disabled","click"],[2,"padding-bottom","10px","font-size","12px","font-weight","600"],[2,"color","red","padding-bottom","10px","font-size","15px"],[3,"ngSubmit"],["basicProfile","ngForm"],[1,"col-md-5","leftBox"],["for","fullName"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control","input-fields",3,"ngModel"],["fullName","ngModel"],["class","help-block",4,"ngIf"],["for","dob"],["type","date","id","dob","name","dob","ngModel","","dobValidator","","required","",1,"form-control","input-fields",3,"ngModel"],["dob","ngModel"],["for","contact"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control","input-fields",3,"ngModel","pattern"],["contact","ngModel"],["for","currentOrganisation"],["type","text","id","currentOrganisation","name","currentOrganisation","ngModel","","required","","maxlength","50",1,"form-control","input-fields",3,"ngModel"],["currentOrganisation","ngModel"],["for","expertise"],["type","search","name","search","placeholder","Enter organisation name",1,"form-control","input-fields",2,"display","inline","width","80%","margin-right","5px",3,"ngModel","ngModelChange"],[2,"width","max-content","display","inline"],["type","button",1,"btn","btn-success","btn-circle","btn-sm",2,"font-size","inherit","display","inline",3,"disabled","click"],[1,"fas","fa-plus"],["style","color: red; margin-top: 10px",4,"ngIf"],["style","margin: 10px; margin-left: 0",4,"ngFor","ngForOf"],[1,"col-md-5"],[1,"form-group",2,"margin-bottom","1rem"],["for","chooseCategory"],["type","number","name","price","placeholder","Enter price per hour",1,"form-control",3,"ngModel","ngModelChange"],["expertisePrice","ngModel"],["style","margin:10px",4,"ngIf"],["for","expertise",2,"width","100%"],[2,"position","relative"],[2,"width","80%","display","inline-block","background","white","padding","10px","box-shadow","0px 0px 4px rgb(199, 203, 217, 0.7)"],[1,"form-group",2,"margin-bottom","0.5rem"],["id","chooseCategory","name","categoryName","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","subCategoryInput"],["id","chooseSubCategory","name","subCategoryName","ngModel","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[2,"width","max-content","display","inline","margin-left","5px","position","absolute","top","40px"],[1,"errorMessage"],["for","Institute"],["type","text","id","Institute","name","Institute","ngModel","","maxlength","50","autofocus","",1,"form-control","input-fields",3,"ngModel"],["Institute","ngModel"],["type","search","name","search","placeholder","Enter Qualification ",1,"form-control","input-fields",2,"display","inline","width","80%","margin-right","5px",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-success","btn-circle","btn-sm",2,"font-size","inherit","display","inline",3,"disabled","click"],["for","professionalSkills"],["type","text","id","professionalSkills","ngModel","","name","professionalSkills",1,"form-control","input-fields",3,"ngModel"],["professionalSkills","ngModel"],["for","yearsOfExperience"],["type","number","id","yearsOfExperience","name","yearsOfExperience","ngModel","",1,"form-control","input-fields",3,"ngModel"],["yearsOfExperience","ngModel"],["for","description"],["id","description","rows","3","name","description","maxlength","250","placeholder","Enter your Description text",1,"form-control",2,"padding-top","10px",3,"ngModel"],["tutorProfileDescription",""],[1,"setLength"],["for","speciality"],["id","speciality","rows","3","name","speciality","maxlength","250","placeholder","Enter your Speciality text",1,"form-control",3,"ngModel"],["tutorProfileSpeciality",""],["for","linkedInProfile"],["type","text","id","linkedInProfile","name","linkedInProfile","ngModel","",1,"form-control","input-fields",3,"ngModel"],["linkedInProfile","ngModel"],[2,"text-align","end","margin","20px","width","81%"],[1,"tickMark"],["src","../../../assets/icons/tick.png",1,"tickMarkImg"],[1,"loader",2,"text-align","center","z-index","10"],[2,"margin","5px","margin-left","0","font-size","12px","font-weight","600","color","red"],[2,"margin","10px","margin-left","0","font-size","12px","font-weight","600","color","red"],[1,"help-block"],[2,"color","red","margin-top","10px"],[2,"margin","10px","margin-left","0"],[1,"tags"],["type","button",1,"btn","btn-danger","btn-circle","btn-sm",2,"font-size","inherit",3,"click"],[1,"fas","fa-minus"],[3,"value"]],template:function(e,t){if(1&e){const e=Ho();No(0,"body"),No(1,"div",0),No(2,"div",1),No(3,"div",2),No(4,"div",3),No(5,"p",4),No(6,"b"),wa(7,"PROFILE"),Vo(),Vo(),Vo(),No(8,"div"),Bo(9,"img",5),No(10,"div",6),No(11,"input",7,8),Wo("change",(function(e){return t.profilePictureChange(e)})),Vo(),No(13,"button",9),Wo("click",(function(){return ei(e),Do(12).click()})),Oo(14,Xz,2,0,"span",10),Oo(15,Jz,2,0,"div",11),Oo(16,Qz,2,0,"span",12),Vo(),Oo(17,Zz,2,0,"div",13),Oo(18,eG,2,0,"div",14),Vo(),Vo(),Vo(),No(19,"div",15),No(20,"button",16),Wo("click",(function(){return t.cancelForm()})),wa(21," Cancel "),Vo(),No(22,"button",17),Wo("click",(function(){return ei(e),Do(29).ngSubmit.emit()})),wa(23," Save "),Vo(),Vo(),Vo(),No(24,"div",18),wa(25," The fields marked with * are mandatory "),Vo(),No(26,"div",19),wa(27),Vo(),No(28,"form",20,21),Wo("ngSubmit",(function(){ei(e);const i=Do(29);return t.saveExpertBasicProfile(i)})),No(30,"div",1),No(31,"div",22),No(32,"div",6),No(33,"label",23),wa(34,"Full Name"),No(35,"sup"),wa(36,"*"),Vo(),Vo(),Bo(37,"input",24,25),Oo(39,tG,2,0,"span",26),Vo(),No(40,"div",6),No(41,"label",27),wa(42,"Date of Birth"),No(43,"sup"),wa(44,"*"),Vo(),Vo(),Bo(45,"input",28,29),Oo(47,iG,2,0,"span",26),Vo(),No(48,"div",6),No(49,"label",30),wa(50,"Mobile Number"),No(51,"sup"),wa(52,"*"),Vo(),Vo(),Bo(53,"input",31,32),Oo(55,nG,2,0,"span",26),Vo(),No(56,"div",6),No(57,"label",33),wa(58,"Current Organisation"),No(59,"sup"),wa(60,"*"),Vo(),Vo(),Bo(61,"input",34,35),Oo(63,sG,2,0,"span",26),Vo(),No(64,"div",6),No(65,"label",36),wa(66,"Previous Organisation"),Vo(),No(67,"div"),No(68,"input",37),Wo("ngModelChange",(function(e){return t.inputOrganisation=e})),Vo(),No(69,"div",38),No(70,"button",39),Wo("click",(function(){return t.addOrganisation()})),Bo(71,"i",40),Vo(),Vo(),Vo(),Oo(72,rG,2,0,"div",41),Oo(73,oG,5,1,"div",42),Vo(),Vo(),No(74,"div",43),No(75,"div",44),No(76,"label",45),wa(77,"Price per hour"),No(78,"sup"),wa(79,"*"),Vo(),Vo(),No(80,"input",46,47),Wo("ngModelChange",(function(e){return t.tutorProfileDetails.price1=e}))("ngModelChange",(function(e){return t.onPercentChange(e)})),Vo(),Oo(82,aG,4,3,"p",48),Vo(),No(83,"div",6),No(84,"label",49),wa(85,"Area of Expertise"),No(86,"sup"),wa(87,"*"),Vo(),Vo(),No(88,"div",50),No(89,"div",51),No(90,"div",52),No(91,"label",45),wa(92,"Choose Domain"),Vo(),No(93,"select",53),Wo("ngModelChange",(function(e){return t.selectedCategory=e})),Oo(94,lG,2,2,"option",54),Vo(),Vo(),No(95,"div",6),No(96,"label",55),wa(97,"Choose Topic"),Vo(),No(98,"select",56),Wo("ngModelChange",(function(e){return t.selectedSubCategory=e})),Oo(99,cG,2,2,"option",54),Vo(),Vo(),Vo(),No(100,"div",57),No(101,"button",39),Wo("click",(function(){return t.saveExpertise()})),Bo(102,"i",40),Vo(),Vo(),Vo(),Oo(103,hG,5,2,"div",42),Oo(104,dG,2,0,"div",41),Oo(105,uG,2,0,"div",41),No(106,"p",58),wa(107),Vo(),Vo(),Vo(),Vo(),Bo(108,"br"),Bo(109,"br"),No(110,"div",1),No(111,"div",22),No(112,"div",6),No(113,"label",59),wa(114,"Institute"),Vo(),Bo(115,"input",60,61),Oo(117,pG,2,0,"span",26),Vo(),No(118,"div",6),No(119,"label"),wa(120,"Educational Qualifications & Certifications"),Vo(),No(121,"div"),No(122,"input",62),Wo("ngModelChange",(function(e){return t.inputEducation=e})),Vo(),No(123,"div",38),No(124,"button",63),Wo("click",(function(){return t.addEducation()})),Bo(125,"i",40),Vo(),Vo(),Oo(126,fG,2,0,"div",41),Vo(),Oo(127,mG,5,1,"div",42),Vo(),No(128,"div",6),No(129,"label",64),wa(130,"Professional Skills"),Vo(),Bo(131,"input",65,66),Oo(133,gG,2,0,"span",26),Vo(),No(134,"div",6),No(135,"label",67),wa(136,"Years of Experience"),Vo(),Bo(137,"input",68,69),Oo(139,vG,2,0,"span",26),Vo(),Vo(),No(140,"div",43),No(141,"div",6),No(142,"label",70),wa(143,"Description"),Vo(),Bo(144,"textarea",71,72),No(146,"span",73),wa(147),Vo(),Vo(),No(148,"div",6),No(149,"label",74),wa(150,"Speciality"),Vo(),Bo(151,"textarea",75,76),No(153,"span",73),wa(154),Vo(),Vo(),No(155,"div",6),No(156,"label",77),wa(157,"LinkedIn Profile link"),Vo(),Bo(158,"input",78,79),Oo(160,yG,2,0,"span",26),Vo(),Vo(),Vo(),Vo(),No(161,"div",80),No(162,"button",16),Wo("click",(function(){return t.cancelForm()})),wa(163," Cancel "),Vo(),No(164,"button",17),Wo("click",(function(){return ei(e),Do(29).ngSubmit.emit()})),wa(165," Save "),Vo(),Vo(),Bo(166,"div"),Vo(),Vo()}if(2&e){const e=Do(29),i=Do(38),n=Do(46),s=Do(54),r=Do(62),o=Do(81),a=Do(116),l=Do(132),c=Do(138),h=Do(145),d=Do(152),u=Do(159);Ss(8),aa("hideBlock",!t.basic),Ss(1),Mo("src",t.profilePictureUrl,es),Ss(5),Mo("ngIf",!t.isLoading3),Ss(1),Mo("ngIf",t.profilePicUploadStatus),Ss(1),Mo("ngIf",t.isLoading3),Ss(1),Mo("ngIf",t.invalidPicture),Ss(1),Mo("ngIf",t.pictureInfo),Ss(1),aa("hideBlock",!t.basic),Ss(3),Mo("disabled",!e.valid),Ss(5),Ca(" ",t.profileError," "),Ss(10),Mo("ngModel",t.tutorProfile.fullName),Ss(2),Mo("ngIf",!i.valid&&i.touched),Ss(6),Mo("ngModel",t.tutorProfile.dateOfBirth),Ss(2),Mo("ngIf",(null==n.errors?null:n.errors.invalidDob)&&n.touched),Ss(6),Mo("ngModel",t.tutorProfile.contact)("pattern",t.mobNumberPattern),Ss(2),Mo("ngIf",!s.valid&&s.touched),Ss(6),Mo("ngModel",t.tutorProfileDetails.currentOrganisation),Ss(2),Mo("ngIf",!r.valid&&r.touched),Ss(5),Mo("ngModel",t.inputOrganisation),Ss(2),Mo("disabled",!t.inputOrganisation),Ss(2),Mo("ngIf",t.duplicatePreviousOrganisation),Ss(1),Mo("ngForOf",t.previousOraganisations),Ss(7),Mo("ngModel",t.tutorProfileDetails.price1),Ss(2),Mo("ngIf",o.dirty&&t.tutorProfileDetails.price1),Ss(11),Mo("ngModel",t.selectedCategory),Ss(1),Mo("ngForOf",t.categories),Ss(4),Mo("ngModel",t.selectedSubCategory)("disabled",!t.selectedCategory),Ss(1),Mo("ngForOf",t.filterSCfromCateg()),Ss(2),Mo("disabled",!t.selectedCategory||!t.selectedSubCategory),Ss(2),Mo("ngForOf",t.expertises),Ss(1),Mo("ngIf",t.duplicateExpertiseArea),Ss(1),Mo("ngIf",t.pricePerHourError),Ss(2),Sa(t.errorText),Ss(8),Mo("ngModel",t.tutorProfileDetails.institute),Ss(2),Mo("ngIf",!a.valid&&a.touched),Ss(5),Mo("ngModel",t.inputEducation),Ss(2),Mo("disabled",!t.inputEducation),Ss(2),Mo("ngIf",t.duplicateEducationArea),Ss(1),Mo("ngForOf",t.educationQualifications),Ss(4),Mo("ngModel",t.tutorProfileDetails.professionalSkills),Ss(2),Mo("ngIf",!l.valid&&l.touched),Ss(4),Mo("ngModel",t.tutorProfileDetails.yearsOfExperience),Ss(2),Mo("ngIf",!c.valid&&c.touched),Ss(5),Mo("ngModel",t.tutorProfileDetails.description),Ss(3),Ca("",h.value.length,"/250"),Ss(4),Mo("ngModel",t.tutorProfileDetails.speciality),Ss(3),Ca("",d.value.length,"/250"),Ss(4),Mo("ngModel",t.tutorProfileDetails.linkedInProfile),Ss(2),Mo("ngIf",!u.valid&&u.touched),Ss(4),Mo("disabled",!e.valid)}},directives:[md,Zv,Gg,Wv,Bg,zg,Qv,oy,uy,Yz,fy,pd,sv,gv,$z,vv,Sv],styles:["body[_ngcontent-%COMP%]{height:100%;background-color:#f9fafc;padding-bottom:20px}.outer-box[_ngcontent-%COMP%]{width:80%;background-color:#fff;height:80%;margin:auto;box-shadow:0 0 4px rgba(199,203,217,.7)}.inner-box[_ngcontent-%COMP%]{width:80%;margin:auto;height:100%}button[_ngcontent-%COMP%]{width:100%}.setLength[_ngcontent-%COMP%]{float:right;color:grey;font-size:small}.navigation-links[_ngcontent-%COMP%]{text-align:center;cursor:pointer;padding:15px;font-size:larger}.form-navigation[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.border-right[_ngcontent-%COMP%]{border-right:1px solid #ccc}.active[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7);color:#241084;background-color:rgba(199,203,217,.7)}.progress-Bar[_ngcontent-%COMP%]{width:100%;height:8px;margin-bottom:15px;margin-top:15px}.outer-progressBar[_ngcontent-%COMP%]{background-color:#ccc;height:inherit;border-radius:8px}.inner-progressBar[_ngcontent-%COMP%]{background-color:#241084;height:inherit;width:0;border-radius:8px}.form-body[_ngcontent-%COMP%]{height:75%}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.4rem}.form-control[_ngcontent-%COMP%]{padding-left:15px}.example-chip-list[_ngcontent-%COMP%]{width:100%}.completeProfileLink[_ngcontent-%COMP%]{color:#241084}.completeProfileLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.help-block[_ngcontent-%COMP%]{font-size:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#8093eb;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 5px rgba(131,137,221,.5)}.Box[_ngcontent-%COMP%]{padding:20px;box-shadow:0 0 4px rgba(199,203,217,.7);margin-bottom:20px;background-color:#fff;position:relative}.marginZero[_ngcontent-%COMP%]{margin:0}.displaySubjects[_ngcontent-%COMP%]{display:inline;margin-right:10px;background-color:tomato;color:#fff;padding:7px;border-radius:5px}.content-Box[_ngcontent-%COMP%]{padding-left:10px}.editIconButton[_ngcontent-%COMP%]{background-color:#fff;border:none;position:absolute;width:45px;height:45px;top:15px;right:20px;font-size:larger;cursor:pointer;color:#8d89aa;outline:none}.editIconButton[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:50%;color:#000}.editIcon[_ngcontent-%COMP%]{position:absolute;top:13px;left:13px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:400!important}h2[_ngcontent-%COMP%]{margin:0 0 10px!important}p[_ngcontent-%COMP%]{font-weight:300!important}.errorMessage[_ngcontent-%COMP%]{color:red;margin:5px}.hideBlock[_ngcontent-%COMP%]{display:none}.tickMark[_ngcontent-%COMP%]{position:absolute;height:0;padding:0;right:-10px;top:5px}.tickMarkImg[_ngcontent-%COMP%]{width:20px;margin-top:-25px}.loader[_ngcontent-%COMP%]{position:absolute;top:-5px;right:73px;height:0}.leftBox[_ngcontent-%COMP%]{border-right:1px solid #a4a2a2}.learningArea-fields[_ngcontent-%COMP%]{margin-bottom:2.5vh}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btn-circle.btn-sm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:15px;font-size:8px;padding:0 0 6px;text-align:center}.btn-success[_ngcontent-%COMP%]{margin-right:3vw}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#39093d;overflow-x:hidden;transition:.5s;padding-top:60px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:25px;color:#fff;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#mainContent[_ngcontent-%COMP%]{padding:16px}#headerContent[_ngcontent-%COMP%], #mainContent[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{transition:margin-left .5s}.header[_ngcontent-%COMP%]{height:60px;background:#fff;border-bottom:1px solid rgba(177,165,165,.48);width:100vw;margin-left:-2vw;display:block;float:left;box-shadow:0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important;padding-left:15px;margin-top:-2vh}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#7d0f7d!important}.width50[_ngcontent-%COMP%]{width:50%}.tags[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;margin-right:5px;border-radius:.25rem;width:82%;display:inline-block}"]}),e})(),wG=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-recordings"]],decls:72,vars:0,consts:[[2,"padding-top","90px"],[1,"work-in-progress"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"primary-container",2,"display","none"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"sort-container"],[1,"content-container"],[1,"button-subject-container"],[1,"buttons-for-subject"],[1,"button-for-text"],[1,"subject-name"],[1,"subject-information"],[1,"button-for-icon"],[1,"fa","fa-angle-double-right"],["scope","col"],["scope","row","data-label","Thumbnail"],["src","assets/images/thumbnail_img.png"],["data-label","Name,Date,Duration",1,"name-information"]],template:function(e,t){1&e&&(No(0,"div",0),No(1,"div",1),Bo(2,"img",2),No(3,"div",3),No(4,"span",4),wa(5,"Work in Progress"),Vo(),No(6,"span"),wa(7,"For better Tomorrow"),Vo(),Vo(),Vo(),Vo(),No(8,"div",5),No(9,"div",6),No(10,"ol",7),No(11,"li"),No(12,"a",8),wa(13,"Home"),Vo(),Vo(),No(14,"li",9),wa(15,"Recordings"),Vo(),Vo(),Vo(),No(16,"div",10),No(17,"select"),No(18,"option"),wa(19,"Sort By"),Vo(),No(20,"option"),wa(21,"Option 1"),Vo(),Vo(),Vo(),No(22,"div",11),No(23,"div",12),No(24,"a",13),No(25,"div",14),No(26,"span",15),wa(27," Physics"),Vo(),No(28,"span",16),wa(29," 8 Recordings"),Vo(),Vo(),No(30,"div",17),Bo(31,"span",18),Vo(),Vo(),No(32,"a",13),No(33,"div",14),No(34,"span",15),wa(35," Physics"),Vo(),No(36,"span",16),wa(37," 8 Recordings"),Vo(),Vo(),No(38,"div",17),Bo(39,"span",18),Vo(),Vo(),No(40,"a",13),No(41,"div",14),No(42,"span",15),wa(43," Physics"),Vo(),No(44,"span",16),wa(45," 8 Recordings"),Vo(),Vo(),No(46,"div",17),Bo(47,"span",18),Vo(),Vo(),Vo(),No(48,"div",11),No(49,"table"),No(50,"thead"),No(51,"tr"),No(52,"th",19),wa(53,"Thumbnail"),Vo(),No(54,"th",19),wa(55,"Name,Date,Duration"),Vo(),Vo(),Vo(),No(56,"tbody"),No(57,"tr"),No(58,"td",20),Bo(59,"img",21),Vo(),No(60,"td",22),No(61,"span"),wa(62,"By:Name"),Vo(),No(63,"span"),wa(64,"August 4th 2020, 10:30 PM"),Vo(),No(65,"span"),wa(66,"30 mins"),Vo(),Vo(),Vo(),No(67,"tr"),No(68,"td",20),Bo(69,"img",21),Vo(),No(70,"td",22),wa(71," @mdo "),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo())},directives:[vv,Sv],styles:[""]}),e})();class SG{constructor(){this.Subject="My Availability"}}const CG=["scheduleObj"],_G=["meetingObj"];function EG(e,t){1&e&&(No(0,"div",8),Bo(1,"app-loading"),No(2,"p",9),wa(3,"Saving your schedule.."),Vo(),Vo())}let TG=(()=>{class e{constructor(e,t,i,n,s){this.matDialog=e,this.httpService=t,this.tutorService=i,this.loginService=n,this.cookieService=s,this.scheduleViews=["Day","Week","WorkWeek","Month"],this.tutorAvailabilitySchedule=new gk,this.calendarLoaded=!1,this.calendarView="Availability",this.availabiltiySchedules=[],this.availableSchedules=[],this.bookingSchedule=[],this.combinedSchedule=[],this.isLoading=!1}ngOnInit(){}ngAfterViewInit(){this.tutorService.getPersonalAvailabilitySchedule()?(this.scheduleObj.eventSettings.dataSource=this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule,this.tutorAvailabilitySchedule.fullName=this.tutorService.getTutorDetials().fullName,this.tutorAvailabilitySchedule.tid=this.tutorService.getTutorDetials().bookingId,this.tutorAvailabilitySchedule.isAvailable=this.tutorService.getPersonalAvailabilitySchedule().isAvailable,this.copySchedule(),this.copyBookings()):this.handleRefresh()}switchCalendarView(){"Availability"==this.calendarView?(this.calendarView="Meeting",this.scheduleObj.eventSettings.dataSource=this.bookingSchedule):(this.calendarView="Availability",this.scheduleObj.eventSettings.dataSource=this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule)}handleRefresh(){this.cookieService.get("userId")&&(this.userId=this.cookieService.get("userId"),this.httpService.getTutorDetails(this.userId).subscribe(e=>{this.httpService.getScheduleData(parseInt(e.bookingId)).subscribe(e=>{this.tutorService.setPersonalAvailabilitySchedule(e),this.tutorAvailabilitySchedule.fullName=this.tutorService.getTutorDetials().fullName,this.tutorAvailabilitySchedule.tid=this.tutorService.getTutorDetials().bookingId,this.tutorAvailabilitySchedule.isAvailable=this.tutorService.getPersonalAvailabilitySchedule().isAvailable,this.availabiltiySchedules=this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule,this.copySchedule(),this.copyBookings(),this.scheduleObj.eventSettings.dataSource=this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule})}))}copySchedule(){for(let t of this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule){var e=new SG;e.Id=t.Id,e.Subject=t.Subject,e.StartTime=t.StartTime,e.EndTime=t.EndTime,e.IsAllDay=t.IsAllDay,e.RecurrenceRule=t.RecurrenceRule,e.RecurrenceException=t.RecurrenceException,e.Guid=t.Guid,e.IsReadonly=!1,e.Type="availability",this.availableSchedules.push(e)}}copyBookings(){if(0!=this.tutorService.getPersonalAvailabilitySchedule().allMeetingsSchedule.length)for(let t of this.tutorService.getPersonalAvailabilitySchedule().allMeetingsSchedule){var e=new SG;e.Subject=t.Subject,e.StartTime=t.StartTime,e.EndTime=t.EndTime,e.IsAllDay=t.IsAllDay,e.RecurrenceRule=t.RecurrenceRule,e.RecurrenceException=t.RecurrenceException,e.Guid=t.Guid,e.Type="booking",e.IsReadonly=!0,this.bookingSchedule.push(e)}}copyAppointment(e){var t=new SG;return t.Id=e.Id,t.Subject=e.Subject,t.StartTime=e.StartTime.toString(),t.EndTime=e.EndTime.toString(),t.IsAllDay=e.IsAllDay,t.RecurrenceRule=e.RecurrenceRule,t.RecurrenceException=e.RecurrenceException,t.Guid=e.Guid,t.Description=e.Description,t.Type="availability",t}addEvents(e){this.availableSchedules.push(e),this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout(()=>{null!=this.userId&&(this.tutorAvailabilitySchedule.tid=this.tutorService.getTutorDetials().bookingId),this.httpService.saveScheduleData(this.tutorAvailabilitySchedule).subscribe(e=>{this.tutorService.personalAvailablitySchedule=this.tutorAvailabilitySchedule,this.isLoading=!1})},3e3)}onEventRendered(e){"booking"==e.data.Type?e.element.style.backgroundColor="#e30084":"availability"==e.data.Type&&(e.element.style.backgroundColor="#7d0f7d")}updateEvents(e){let t=this.availableSchedules.findIndex(t=>t.Id==e.Id);-1==t?this.availableSchedules.push(e):this.availableSchedules[t]=e,this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout(()=>{this.httpService.saveScheduleData(this.tutorAvailabilitySchedule).subscribe(e=>{this.tutorService.personalAvailablitySchedule=this.tutorAvailabilitySchedule,this.isLoading=!1})},3e3)}deleteEvents(e){let t=this.availableSchedules.findIndex(t=>t.Id==e.Id);this.availableSchedules.splice(t,1),this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout(()=>{this.httpService.saveScheduleData(this.tutorAvailabilitySchedule).subscribe(e=>{this.tutorService.personalAvailablitySchedule=this.tutorAvailabilitySchedule,this.isLoading=!1})},3e3)}updateSpecialEvents(){this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout(()=>{this.httpService.saveScheduleData(this.tutorAvailabilitySchedule).subscribe(e=>{this.tutorService.personalAvailablitySchedule=this.tutorAvailabilitySchedule,this.isLoading=!1})},3e3)}onActionBegin(e){var t;"eventCreate"===e.requestType?(t=e.addedRecords,setTimeout(()=>{this.addEvents(this.copyAppointment(t[0]))},3e3)):"eventChange"===e.requestType?(t=e.changedRecords,this.isLoading=!this.isLoading,setTimeout(()=>{if(null!=t[0].Guid&&null!=t[0].RecurrenceException){this.availableSchedules.splice(0,this.availableSchedules.length);for(let t of this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule){var e=new SG;e.Id=t.Id,e.Subject=t.Subject,e.StartTime=t.StartTime.toString(),e.EndTime=t.EndTime.toString(),e.IsAllDay=t.IsAllDay,e.RecurrenceRule=t.RecurrenceRule,e.RecurrenceException=t.RecurrenceException,e.Guid=t.Guid,e.RecurrenceID=t.RecurrenceID,this.availableSchedules.push(e)}this.updateSpecialEvents()}else this.updateEvents(this.copyAppointment(t[0]))},3e3)):"eventRemove"===e.requestType&&(0!=(t=e.deletedRecords).length?setTimeout(()=>{this.availableSchedules.splice(0,this.availableSchedules.length);for(let t of this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule){var e=new SG;e.Id=t.Id,e.Subject=t.Subject,e.StartTime=t.StartTime.toString(),e.EndTime=t.EndTime.toString(),e.IsAllDay=t.IsAllDay,e.RecurrenceRule=t.RecurrenceRule,e.RecurrenceException=t.RecurrenceException,e.Guid=t.Guid,e.RecurrenceID=t.RecurrenceID,this.availableSchedules.push(e)}this.updateSpecialEvents()},3e3):0==t.length&&setTimeout(()=>{this.availableSchedules.splice(0,this.availableSchedules.length);for(let t of this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule){var e=new SG;e.Id=t.Id,e.Subject=t.Subject,e.StartTime=t.StartTime.toString(),e.EndTime=t.EndTime.toString(),e.IsAllDay=t.IsAllDay,e.RecurrenceRule=t.RecurrenceRule,e.RecurrenceException=t.RecurrenceException,e.Guid=t.Guid,e.RecurrenceID=t.RecurrenceID,this.availableSchedules.push(e)}this.updateSpecialEvents()},3e3))}}return e.\u0275fac=function(t){return new(t||e)(Io(eT),Io(Og),Io(aT),Io(jy),Io(Dx))},e.\u0275cmp=gt({type:e,selectors:[["app-schedule"]],viewQuery:function(e,t){var i;1&e&&(ac(CG,!0),ac(_G,!0)),2&e&&(rc(i=uc())&&(t.scheduleObj=i.first),rc(i=uc())&&(t.meetingObj=i.first))},decls:11,vars:9,consts:[[2,"background-color","#f9fafc","height","100vh"],[2,"width","95%","margin","auto","padding-top","80px","padding-bottom","15px"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],["style","width: max-content; margin: auto; padding-top: 20vh;text-align: center;",4,"ngIf"],[1,"Box",2,"width","95%","margin","auto","padding","0"],["width","100%","height","560px",3,"views","readonly","eventRendered","actionBegin"],["scheduleObj",""],[2,"width","max-content","margin","auto","padding-top","20vh","text-align","center"],[2,"margin","1rem","font-size","large"]],template:function(e,t){1&e&&(No(0,"body",0),No(1,"div",1),No(2,"div",2),No(3,"button",3),Wo("click",(function(){return t.switchCalendarView()})),wa(4," Availability "),Vo(),No(5,"button",3),Wo("click",(function(){return t.switchCalendarView()})),wa(6," Meetings "),Vo(),Vo(),Vo(),Oo(7,EG,4,0,"div",4),No(8,"div",5),No(9,"ejs-schedule",6,7),Wo("eventRendered",(function(e){return t.onEventRendered(e)}))("actionBegin",(function(e){return t.onActionBegin(e)})),Vo(),Vo(),Vo()),2&e&&(Ss(3),aa("btnActive","Availability"==t.calendarView),Ss(2),aa("btnActive","Meeting"==t.calendarView),Ss(2),Mo("ngIf",t.isLoading),Ss(1),aa("hide",t.isLoading),Ss(1),Mo("views",t.scheduleViews)("readonly","Meeting"==t.calendarView))},directives:[md,cH,Ey],styles:['.box[_ngcontent-%COMP%]{width:80vw;height:85vh;background-color:#fafafa;margin:auto;border:1.5px solid #eee;overflow:hidden;padding:0}.width100[_ngcontent-%COMP%]{width:100%}.marginZero[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem}label[_ngcontent-%COMP%]{margin-bottom:5px}.example-chip-list[_ngcontent-%COMP%]{padding-left:20px;width:80%}.cornerButtonsWrapper[_ngcontent-%COMP%]{position:absolute;top:20px;right:10px}.cornerButtons[_ngcontent-%COMP%]{margin-right:10px}.chip[_ngcontent-%COMP%]{padding:7px 12px;margin-right:4px;background-color:#e0e0e0;color:rgba(0,0,0,.87);font-size:14px;font-weight:500;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.round[_ngcontent-%COMP%]{position:relative;margin-top:5vh}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:50%;cursor:pointer;height:28px;left:0;position:absolute;top:0;width:28px}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{border:2px solid #fff;border-top:none;border-right:none;content:"";height:6px;left:7px;opacity:0;position:absolute;top:8px;transform:rotate(-45deg);width:12px}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{visibility:hidden}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#66bb6a;border-color:#66bb6a}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1}.instruction-box[_ngcontent-%COMP%]{position:absolute;top:0}.btnActive[_ngcontent-%COMP%]{background-color:#7d0f7d!important;border-color:#7d0f7d!important;box-shadow:0 0 0 .2rem #f7e4f9!important;color:#fff!important}.hideBlock[_ngcontent-%COMP%]{display:none}.e-schedule-dialog[_ngcontent-%COMP%]   .e-numeric.e-control-wrapper.e-input-group[_ngcontent-%COMP%]   .e-input-group-icon[_ngcontent-%COMP%]{pointer-events:none!important}.e-schedule-dialog[_ngcontent-%COMP%]   .e-all-day-time-zone-row[_ngcontent-%COMP%]{display:none!important}.hide[_ngcontent-%COMP%]{display:none}']}),e})(),xG=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-session-notes"]],decls:72,vars:0,consts:[[2,"padding-top","90px"],[1,"work-in-progress"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"primary-container",2,"display","none"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"sort-container"],[1,"content-container"],[1,"button-subject-container"],[1,"buttons-for-subject"],[1,"button-for-text"],[1,"subject-name"],[1,"subject-information"],[1,"button-for-icon"],[1,"fa","fa-angle-double-right"],["scope","col"],["scope","row","data-label","Thumbnail"],["src","assets/images/thumbnail_img.png"],["data-label","Name,Date,Duration",1,"name-information"]],template:function(e,t){1&e&&(No(0,"div",0),No(1,"div",1),Bo(2,"img",2),No(3,"div",3),No(4,"span",4),wa(5,"Work in Progress"),Vo(),No(6,"span"),wa(7,"For better Tomorrow"),Vo(),Vo(),Vo(),Vo(),No(8,"div",5),No(9,"div",6),No(10,"ol",7),No(11,"li"),No(12,"a",8),wa(13,"Home"),Vo(),Vo(),No(14,"li",9),wa(15,"Recordings"),Vo(),Vo(),Vo(),No(16,"div",10),No(17,"select"),No(18,"option"),wa(19,"Sort By"),Vo(),No(20,"option"),wa(21,"Option 1"),Vo(),Vo(),Vo(),No(22,"div",11),No(23,"div",12),No(24,"a",13),No(25,"div",14),No(26,"span",15),wa(27," Physics"),Vo(),No(28,"span",16),wa(29," 8 Recordings"),Vo(),Vo(),No(30,"div",17),Bo(31,"span",18),Vo(),Vo(),No(32,"a",13),No(33,"div",14),No(34,"span",15),wa(35," Physics"),Vo(),No(36,"span",16),wa(37," 8 Recordings"),Vo(),Vo(),No(38,"div",17),Bo(39,"span",18),Vo(),Vo(),No(40,"a",13),No(41,"div",14),No(42,"span",15),wa(43," Physics"),Vo(),No(44,"span",16),wa(45," 8 Recordings"),Vo(),Vo(),No(46,"div",17),Bo(47,"span",18),Vo(),Vo(),Vo(),No(48,"div",11),No(49,"table"),No(50,"thead"),No(51,"tr"),No(52,"th",19),wa(53,"Thumbnail"),Vo(),No(54,"th",19),wa(55,"Name,Date,Duration"),Vo(),Vo(),Vo(),No(56,"tbody"),No(57,"tr"),No(58,"td",20),Bo(59,"img",21),Vo(),No(60,"td",22),No(61,"span"),wa(62,"By:Name"),Vo(),No(63,"span"),wa(64,"August 4th 2020, 10:30 PM"),Vo(),No(65,"span"),wa(66,"30 mins"),Vo(),Vo(),Vo(),No(67,"tr"),No(68,"td",20),Bo(69,"img",21),Vo(),No(70,"td",22),wa(71," @mdo "),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo())},directives:[vv,Sv],styles:[""]}),e})();const kG=["scheduleObj"],AG=["addButton"];let OG=(()=>{class e{constructor(e){this.studentService=e,this.scheduleViews=["Day","Week","WorkWeek","Month"],this.eventSettings={dataSource:this.studentService.getStudentBookings()}}ngOnInit(){this.studentService.getStudentBookings()?this.scheduleObj.eventSettings.dataSource=this.studentService.getStudentBookings():this.handleRefresh()}onEventRendered(e){"booking"==e.data.Type?e.element.style.backgroundColor="#e30084":"availability"==e.data.Type&&(e.element.style.backgroundColor="#7d0f7d")}handleRefresh(){setTimeout(()=>{this.scheduleObj.eventSettings.dataSource=this.studentService.getStudentBookings()},2e3)}}return e.\u0275fac=function(t){return new(t||e)(Io(Hy))},e.\u0275cmp=gt({type:e,selectors:[["app-student-booking"]],viewQuery:function(e,t){var i;1&e&&(ac(kG,!0),ac(AG,!0)),2&e&&(rc(i=uc())&&(t.scheduleObj=i.first),rc(i=uc())&&(t.addButton=i.first))},decls:4,vars:3,consts:[[2,"padding","20px"],[1,"Box",2,"width","95%","margin","auto","padding-top","70px"],["width","100%","height","600px",3,"readonly","eventSettings","views","eventRendered"],["scheduleObj",""]],template:function(e,t){1&e&&(No(0,"body",0),No(1,"div",1),No(2,"ejs-schedule",2,3),Wo("eventRendered",(function(e){return t.onEventRendered(e)})),Vo(),Vo(),Vo()),2&e&&(Ss(2),Mo("readonly",!0)("eventSettings",t.eventSettings)("views",t.scheduleViews))},directives:[cH],styles:["body[_ngcontent-%COMP%]{background-color:#f9fafc;height:100%}"]}),e})(),DG=(()=>{class e{constructor(e,t,i,n,s,r,o){this.meetingService=e,this.httpService=t,this.dialog=i,this.router=n,this.snackBar=s,this.dialogRef=r,this.cancelBooking=new My,this.config={duration:4e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]}}ngOnInit(){this.cancelBooking=this.meetingService.getDeleteBooking(),this.pendingRequests=this.meetingService.getStudentPendingRequests()}close(){this.dialogRef.close({cancelled:!1})}deleteBooking(){this.dialogRef.close({cancelled:!0}),this.router.navigate(["home/student-dashboard"])}}return e.\u0275fac=function(t){return new(t||e)(Io(Vy),Io(Og),Io(eT),Io(Em),Io(UE),Io(KE),Io(XE))},e.\u0275cmp=gt({type:e,selectors:[["app-delete-popup"]],decls:9,vars:0,consts:[[1,"row"],[1,"denial",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(No(0,"div"),No(1,"div",0),No(2,"p"),wa(3,"Are you sure you want to cancel the booking"),Vo(),Vo(),No(4,"div",0),No(5,"button",1),Wo("click",(function(){return t.close()})),wa(6,"No"),Vo(),No(7,"button",2),Wo("click",(function(){return t.deleteBooking()})),wa(8,"Yes"),Vo(),Vo(),Vo())},styles:["button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:40%}.denial[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2);border:none;border-radius:3px}.denial[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.8);color:#fff}p[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:25px;font-size:large}"]}),e})();function IG(e,t){if(1&e){const e=Ho();No(0,"a",23),Wo("click",(function(){return ei(e),Ko().viewPendingRequests()})),wa(1,"View"),Vo()}}function RG(e,t){1&e&&(No(0,"span",35),wa(1,"Reschedule requested! check email !"),Vo())}function PG(e,t){if(1&e&&(No(0,"span",35),wa(1),Vo()),2&e){const e=Ko().$implicit;Ss(1),Sa(e.approvalStatus)}}function MG(e,t){if(1&e){const e=Ho();No(0,"button",36),Wo("click",(function(){ei(e);const t=Ko().$implicit;return Ko(2).deleteBooking(t)})),wa(1," Cancel "),Vo()}}const LG=function(e){return{"background-image":e}};function NG(e,t){if(1&e&&(No(0,"div",26),Bo(1,"div",27),No(2,"div",28),No(3,"span",29),wa(4),Vo(),No(5,"span",30),wa(6),Vo(),Vo(),No(7,"div",31),No(8,"span"),wa(9),Vo(),No(10,"span"),wa(11),ql(12,"zero"),ql(13,"zero"),Vo(),Vo(),No(14,"div",32),Oo(15,RG,2,0,"span",33),Oo(16,PG,2,1,"span",33),Oo(17,MG,2,0,"button",34),Vo(),Vo()),2&e){const e=t.$implicit;Ss(1),Mo("ngStyle",jl(16,LG,"url("+e.tutorProfilePictureUrl+")")),Ss(3),Sa(e.tutorName),Ss(2),Sa(e.subject),Ss(3),Sa(e.dateOfMeeting),Ss(2),Ta(" ",e.startTimeHour,":",Wl(12,12,e.startTimeMinute)," - ",e.endTimeHour,":",Wl(13,14,e.endTimeMinute)," (",e.duration," minutes)"),Ss(4),Mo("ngIf","requested"==e.isRescheduled),Ss(1),Mo("ngIf","requested"!=e.isRescheduled),Ss(1),Mo("ngIf","Pending"==e.approvalStatus)}}function VG(e,t){if(1&e&&(No(0,"div",24),No(1,"div",7),wa(2,"Pending Requests"),Vo(),No(3,"div",25),Oo(4,NG,18,18,"div",22),Vo(),Vo()),2&e){const e=Ko();Ss(4),Mo("ngForOf",e.bookingList)}}function BG(e,t){1&e&&(No(0,"span"),wa(1,"No upcoming classes"),Vo())}function FG(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",20),No(2,"div",37),No(3,"span",38),wa(4,"\u25cf \xa0Live Now"),Vo(),Vo(),Bo(5,"div",39),No(6,"div",40),No(7,"span"),wa(8),Vo(),No(9,"span"),wa(10),ql(11,"zero"),ql(12,"zero"),Vo(),No(13,"span"),wa(14),Vo(),No(15,"button",36),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko(2).onJoin(i)})),wa(16," Join "),Vo(),Vo(),Vo(),No(17,"div",41),No(18,"a",42),Wo("click",(function(){return ei(e),Ko(2).toBookingsPage()})),wa(19,"view more"),Vo(),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(8),Sa(e.tutorName),Ss(2),Ta("",e.startTimeHour,":",Wl(11,7,e.startTimeMinute)," - ",e.endTimeHour,":",Wl(12,9,e.endTimeMinute)," (",e.duration," minutes)"),Ss(4),Sa(e.description)}}function jG(e,t){if(1&e&&(No(0,"div"),Oo(1,FG,20,11,"div",10),Vo()),2&e){const e=Ko();Ss(1),Mo("ngForOf",e.liveMeetingList)}}function HG(e,t){if(1&e){const e=Ho();No(0,"span",38),wa(1,"\u25cf \xa0About to start"),No(2,"i",47),Wo("click",(function(){return ei(e),Ko(2).refreshPage()})),Vo(),Vo()}}function UG(e,t){if(1&e&&(No(0,"div",37),wa(1),Vo()),2&e){const e=Ko().$implicit;Ss(1),Ca(" Live in:",e.timeLeft," ")}}function qG(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",20),No(2,"div",37),Oo(3,HG,3,0,"span",43),Vo(),Oo(4,UG,2,1,"div",44),Bo(5,"div",39),No(6,"div",40),No(7,"span"),wa(8),Vo(),No(9,"span"),wa(10),Vo(),No(11,"span"),wa(12),ql(13,"zero"),ql(14,"zero"),Vo(),No(15,"span"),wa(16),Vo(),No(17,"button",45),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().onJoin(i)})),wa(18," Join "),Vo(),Vo(),Vo(),No(19,"div",41),No(20,"a",46),Wo("click",(function(){return ei(e),Ko().toBookingsPage()})),wa(21,"view more"),Vo(),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(3),Mo("ngIf",null==e.timeLeft),Ss(1),Mo("ngIf",null!=e.timeLeft),Ss(4),Sa(e.tutorName),Ss(2),Sa(e.dateOfMeeting),Ss(2),Ta("",e.startTimeHour,":",Wl(13,11,e.startTimeMinute)," - ",e.endTimeHour,":",Wl(14,13,e.endTimeMinute)," (",e.duration," minutes)"),Ss(4),Sa(e.description),Ss(1),Mo("disabled",!e.isLive)}}function WG(e,t){1&e&&(No(0,"div",8),No(1,"span"),wa(2,"No Pending reviews"),Vo(),Vo())}function zG(e,t){if(1&e){const e=Ho();No(0,"div",26),Bo(1,"div",27),No(2,"div",28),Bo(3,"span",48),Bo(4,"span",49),Vo(),No(5,"div",50),No(6,"div",51),No(7,"div",52),No(8,"input",53),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().saveRating(i,"100")})),Vo(),Bo(9,"label",54),No(10,"input",55),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().saveRating(i,"80")})),Vo(),Bo(11,"label",56),No(12,"input",57),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().saveRating(i,"60")})),Vo(),Bo(13,"label",58),No(14,"input",59),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().saveRating(i,"40")})),Vo(),Bo(15,"label",60),No(16,"input",61),Wo("click",(function(){ei(e);const i=t.$implicit;return Ko().saveRating(i,"20")})),Vo(),Bo(17,"label",62),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(1),Mo("ngStyle",jl(3,LG,"url("+e.tutorProfilePictureUrl+")")),Ss(2),Mo("innerHTML",e.tutorName,Zn),Ss(1),Mo("innerHTML",e.subject,Zn)}}let GG=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l){this.httpService=e,this.studentService=t,this.tutorService=i,this.meetingService=n,this.router=s,this.dialog=r,this.profileService=o,this.snackBar=a,this.locationStrategy=l,this.selected=0,this.hovered=0,this.readonly=!1,this.viewPending=!0,this.pendingRequestsCount=0,this.joinMeeting=new Py,this.bookingList=[],this.approvedList=[],this.liveMeetingList=[],this.pendingReviewList=[],this.emptyBookingList=!1,this.emptyApprovedList=!1,this.emptyLiveList=!1,this.pendingReviews=[],this.now=new Date,this.noTutorMessage="",this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},this.type="PieChart",this.data=[["Mathematics",45],["English",26.8],["Science",12.8],["C++",8.5],["Machine Learning",6.2],["Others",.7]],this.options={pieHole:.4},this.studentChartWidth="380",this.studentChartHeight="180",setInterval(()=>{this.now=new Date},1e3)}getScreenSize(e){var t=window.innerWidth;this.studentChartWidth=t<=800?"320":"380"}ngOnInit(){this.preventBackButton(),window.innerWidth<=800&&(this.studentChartWidth="320"),this.sid=this.studentService.getStudentProfileDetails().sid,this.sid?(this.fetchPendingReviewsList(),this.initialiseStudentPendingRequest(),this.intialiseStudentApprovedBookings(),this.initialiseLiveMeetingList()):this.handleRefresh()}toBookingsPage(){this.router.navigate(["home/student-bookings"])}preventBackButton(){history.pushState(null,null,location.href),this.locationStrategy.onPopState(()=>{history.pushState(null,null,location.href)})}saveRating(e,t){this.httpService.giveFeedback(e.meetingId,t," ",e.tutorId).subscribe(t=>{this.pendingReviewList.splice(this.pendingReviewList.indexOf(e),1),this.snackBar.open("Feedback submitted successfully","close",this.config)})}viewPendingRequests(){this.viewPending=!this.viewPending}toggleSkillsInDemand(e){this.type=e}openRecordingsPage(){this.router.navigate(["home/recordings"])}refreshPage(){location.reload()}handleRefresh(){setTimeout(()=>{this.sid=this.studentService.getStudentProfileDetails().sid,this.initialiseStudentPendingRequest(),this.intialiseStudentApprovedBookings(),this.initialiseLiveMeetingList()},1e3)}initialiseStudentPendingRequest(){this.studentService.fetchStudentPendingBookings(),this.pendingRequestsCount=0,this.studentService.bookingsChanged.subscribe(e=>{this.bookingList=e,0==this.bookingList.length?(this.emptyBookingList=!0,this.pendingRequestsCount=0):this.pendingRequestsCount=this.bookingList.length})}intialiseStudentApprovedBookings(){this.studentService.fetchApprovedStudentMeetings(),this.studentService.approvedBookingsChanged.subscribe(e=>{this.approvedList=e,this.sortMeetings(this.approvedList),0==this.approvedList.length&&(this.emptyApprovedList=!0);for(let t of this.approvedList)this.timeLeft(t),0==this.approvedList.length&&(this.emptyApprovedList=!0)})}initialiseLiveMeetingList(){this.studentService.fetchLiveMeetings(),this.studentService.liveMeetingsChanged.subscribe(e=>{this.liveMeetingList=e,0==this.liveMeetingList.length&&(this.emptyLiveList=!0);for(let t of this.liveMeetingList)this.eliminateLiveMeetings(t,this.liveMeetingList)})}fetchPendingReviewsList(){this.httpService.fetchPendingReviewsList(this.sid).subscribe(e=>{this.pendingReviewList=e})}giveFeedback(e){this.httpService.giveFeedback(e.meetingId,80,"You are a god teacher",e.tutorId).subscribe(e=>{})}sortMeetings(e){e.sort((function(e,t){var i=e.dateOfMeeting.split("/")[2],n=e.dateOfMeeting.split("/")[1]-1,s=e.dateOfMeeting.split("/")[0],r=e.startTimeHour,o=e.startTimeMinute,a=t.dateOfMeeting.split("/")[2],l=t.dateOfMeeting.split("/")[1]-1,c=t.dateOfMeeting.split("/")[0],h=t.startTimeHour,d=t.startTimeMinute;return new Date(i,n,s,r,o,0,0).valueOf()-new Date(a,l,c,h,d,0,0).valueOf()}))}eliminateLiveMeetings(e,t){if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var i=60*e.endTimeHour+e.endTimeMinute,n=60*this.now.getHours()+this.now.getMinutes(),s=i-n;s<=0&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1),setInterval(()=>{n=60*this.now.getHours()+this.now.getMinutes(),(s=i-n)<=0&&-1!=t.indexOf(e)&&(t.splice(t.indexOf(e),1),this.httpService.updateBookingStatus(e.bid,"completed").subscribe(e=>{}))},5e3)}}timeLeft(e){var t=new Date;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var i=60*e.startTimeHour+e.startTimeMinute,n=e.duration+10,s=60*this.now.getHours()+this.now.getMinutes(),r=i-s,o=Math.trunc(r/60),a=r%60;r>0&&(0==o?l=a+" minutes":0!=a?l=o+" hours "+a+" minutes ":0==a&&(l=o+" hours "),e.timeLeft=l),setInterval(()=>{s=60*this.now.getHours()+this.now.getMinutes(),r=i-s,o=Math.trunc(r/60),a=r%60,r>0?(0==o?l=a+" minutes ":0!=a?l=o+" hours "+a+" minutes":0==a&&(l=o+" hours"),e.timeLeft=l):r<=0&&(e.timeLeft=null,Math.abs(r)>n&&(this.approvedList.splice(this.approvedList.indexOf(e),1),this.httpService.updateBookingStatus(e.bid,"completed unattended").subscribe(e=>{})))},5e3)}else{var l,c=0,h=0,d=0,u=e.dateOfMeeting.split("/"),p=new Date(+u[2],u[1]-1,+u[0]);if(i=60*e.startTimeHour+e.startTimeMinute,p.getTime()>t.getTime()){var f=Math.trunc((p.getTime()-t.getTime())/6e4);if((d=Math.trunc(f/1440))<1)c=Math.trunc(f/60),h=f%60;else{var m=f%1440;c=Math.trunc(m/60),h=m%60}c+=Math.trunc(i/60),(h+=Math.trunc(i%60))>60&&(c+=h/60,h%=60),c>24&&(d+=c/24,c%=24),l=0==d?Math.trunc(c)+" hours "+Math.trunc(h)+" minutes":Math.trunc(d)+" days "+Math.trunc(c)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=l}setInterval(()=>{t=new Date;var n=Math.trunc((p.getTime()-t.getTime())/6e4),s=Math.trunc(n/1440);if(s<1)c=Math.trunc(n/60),h=n%60;else{var r=n%1440;c=Math.trunc(r/60),h=r%60}c+=Math.trunc(i/60),(h+=Math.trunc(i%60))>60&&(c+=h/60,h%=60),c>24&&(s+=c/24,c%=24),l=0==s?Math.trunc(c)+" hours "+Math.trunc(h)+" minutes":Math.trunc(s)+" days "+Math.trunc(c)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=l},5e3)}}onJoin(e){this.joinMeeting.role="student",this.joinMeeting.roomId=123,this.joinMeeting.roomName=e.meetingId,this.joinMeeting.userName=e.studentName,this.joinMeeting.userId=e.studentId,this.meetingService.setMeeting(this.joinMeeting),this.meetingService.setBooking(e),this.router.navigate(["meeting"])}deleteBooking(e){(new WE).disableClose=!0,this.dialog.open(DG,{width:"400px",height:"150px"}).afterClosed().subscribe(t=>{1==t.cancelled&&this.httpService.fetchBookingStatus(e.bid).subscribe(t=>{console.log(t.status),"Pending"==t.status?this.httpService.deleteMyBooking(e.bid).subscribe(e=>{"booking deleted successfully"==e.response?(this.initialiseStudentPendingRequest(),this.snackBar.open("Booking has been cancelled !","close",this.config)):"booking can't be deleted"==e.response?this.snackBar.open("Booking can't be deleted !","close",this.config):"delete time has been exceeded"==e.response&&this.snackBar.open("Cancelling time has been exceeded !","close",this.config)}):this.snackBar.open("Booking has already been accepted !","close",this.config)})})}}return e.\u0275fac=function(t){return new(t||e)(Io(Og),Io(Hy),Io(aT),Io(Vy),Io(Em),Io(eT),Io(Ny),Io(UE),Io(kh))},e.\u0275cmp=gt({type:e,selectors:[["app-student-dashboard"]],hostBindings:function(e,t){1&e&&Wo("resize",(function(e){return t.getScreenSize(e)}),!1,zi)},decls:35,vars:19,consts:[[1,"dashboard-container"],[1,"pending-reviews-panel"],[1,"number"],[1,"text-content"],["class","takeActionLink",3,"click",4,"ngIf"],["class","widget pending-reviews-list","style","min-height: 0; max-height: 250px",4,"ngIf"],[1,"widget"],[1,"widget-header"],[2,"padding","10px"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"widget-timings"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-chart-pie"],[1,"fa","fa-list"],[2,"margin-top","20px"],[3,"type","data","options","width","height"],["chart",""],[1,"widget","pending-reviews"],[1,"widget-information"],["style","padding: 10px",4,"ngIf"],["class","list-panel",4,"ngFor","ngForOf"],[1,"takeActionLink",3,"click"],[1,"widget","pending-reviews-list",2,"min-height","0","max-height","250px"],[1,"widget-information","pending-requests"],[1,"list-panel"],[1,"list-thumbnail",3,"ngStyle"],[1,"list-information"],[1,"name"],[1,"subject"],[1,"date-time-panel"],[1,"button-container"],["class","btn btn-primary",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-primary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"widget-time"],[2,"color","red"],[1,"subject-thumbnail"],[1,"subject-description"],[1,"widget-footer"],[3,"click"],["style","color: red",4,"ngIf"],["class","widget-time",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["href","javascript:;",3,"click"],[1,"fas","fa-redo",2,"margin-left","5px","color","black","cursor","pointer",3,"click"],[1,"name",3,"innerHTML"],[1,"subject",3,"innerHTML"],[1,"review-nav"],[1,"stars-container"],[1,"star-widget",2,"cursor","pointer"],["type","radio","name","rate","id","rate-5",3,"click"],["for","rate-5",1,"fas","fa-star"],["type","radio","name","rate","id","rate-4",3,"click"],["for","rate-4",1,"fas","fa-star"],["type","radio","name","rate","id","rate-3",3,"click"],["for","rate-3",1,"fas","fa-star"],["type","radio","name","rate","id","rate-2",3,"click"],["for","rate-2",1,"fas","fa-star"],["type","radio","name","rate","id","rate-1",3,"click"],["for","rate-1",1,"fas","fa-star"]],template:function(e,t){1&e&&(No(0,"body"),No(1,"div",0),No(2,"div",1),No(3,"span",2),wa(4),ql(5,"zero"),Vo(),No(6,"span",3),wa(7,"PENDING REQUESTS"),Vo(),Oo(8,IG,2,0,"a",4),Vo(),Oo(9,VG,5,1,"div",5),No(10,"div",6),No(11,"div",7),wa(12,"Upcoming Classes"),Vo(),No(13,"div",8),Oo(14,BG,2,0,"span",9),Vo(),Oo(15,jG,2,1,"div",9),Oo(16,qG,22,15,"div",10),Vo(),No(17,"div",6),No(18,"div",7),wa(19,"Skills in Demand"),Vo(),No(20,"div",11),No(21,"div",12),No(22,"button",13),Wo("click",(function(){return t.toggleSkillsInDemand("PieChart")})),Bo(23,"span",14),Vo(),No(24,"button",13),Wo("click",(function(){return t.toggleSkillsInDemand("Table")})),Bo(25,"span",15),Vo(),Vo(),Vo(),No(26,"div",16),Bo(27,"google-chart",17,18),Vo(),Vo(),No(29,"div",19),No(30,"div",7),wa(31,"Pending Reviews"),Vo(),No(32,"div",20),Oo(33,WG,3,0,"div",21),Oo(34,zG,18,5,"div",22),Vo(),Vo(),Vo(),Vo()),2&e&&(Ss(4),Sa(Wl(5,17,t.pendingRequestsCount)),Ss(4),Mo("ngIf",0!=t.pendingRequestsCount),Ss(1),Mo("ngIf",t.viewPending&&0!=t.pendingRequestsCount),Ss(5),Mo("ngIf",0==t.liveMeetingList.length&&0==t.approvedList.length),Ss(1),Mo("ngIf",null!=t.liveMeetingList),Ss(1),Mo("ngForOf",t.approvedList),Ss(6),aa("active","PieChart"==t.type),Ss(2),aa("active","Table"==t.type),Ss(3),Mo("type",t.type)("data",t.data)("options",t.options)("width",t.studentChartWidth)("height",t.studentChartHeight),Ss(6),Mo("ngIf",0==t.pendingReviewList.length),Ss(1),Mo("ngForOf",t.pendingReviewList))},directives:[md,pd,TH,Cd],pipes:[px],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7)}.card[_ngcontent-%COMP%], .card2[_ngcontent-%COMP%]{width:80%;margin-bottom:50px;margin-left:70px;margin-top:50px;padding:0}.card2[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(132,133,136,.7);height:auto;max-height:600px}.card-body[_ngcontent-%COMP%]{padding:20px}.card-body[_ngcontent-%COMP%], .tutor-card-body[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7)}.tutor-card-body[_ngcontent-%COMP%]{padding:10px;height:auto;max-height:360px;overflow-y:scroll}.tutorBox[_ngcontent-%COMP%]{padding:0;width:100%;margin:0}.star[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:3rem;color:#d3d3d3}.full[_ngcontent-%COMP%], .half[_ngcontent-%COMP%]{color:red}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden}.image-styling[_ngcontent-%COMP%]{margin-top:20px;display:block;margin-left:auto;margin-right:auto;height:110px;width:110px;border-radius:50%}.btn-join[_ngcontent-%COMP%]{border:1px solid #0073b1;color:#0073b1;background:none;padding:2px 15px}.btn-join[_ngcontent-%COMP%]:hover{background-color:#57add3}.btn-decline[_ngcontent-%COMP%]{border:1px solid #800d1a;color:#800d1a;background:none;padding:2px 15px}.btn-decline[_ngcontent-%COMP%]:hover{background-color:#d50b31}.education-detail[_ngcontent-%COMP%]{margin-left:30px;margin-right:15px;font-size:10px;margin-top:10px}.request-buttons[_ngcontent-%COMP%]{display:block;margin:10px auto}.align[_ngcontent-%COMP%]{float:left}img[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:100%}.leftMarginZero[_ngcontent-%COMP%]{margin-left:0}.rightPaddingZero[_ngcontent-%COMP%]{padding-right:0}.paddingZero[_ngcontent-%COMP%]{padding:0}.card-header[_ngcontent-%COMP%]{width:100%}p[_ngcontent-%COMP%]{margin:0}.divBox[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7);padding:10px;margin-bottom:10px}.tutorSkillTags[_ngcontent-%COMP%]{display:inline;font-size:smaller;background-color:#b7d0e7;color:#fff;padding:2px 5px;border-radius:0;margin-right:5px;border-radius:5px}.takeActionLink[_ngcontent-%COMP%]{cursor:pointer}.takeActionLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.widget-information[_ngcontent-%COMP%]{position:relative;height:250px;margin-bottom:30px}.pending-requests[_ngcontent-%COMP%]{height:-webkit-max-content;height:-moz-max-content;height:max-content}.widget-time[_ngcontent-%COMP%]{font-size:11px;color:#e7001a;position:absolute;top:-35px;right:10px}.widget[_ngcontent-%COMP%]{max-height:250px;overflow:hidden}.star-widget[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.star-widget[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;color:#fff;float:right;transition:all .2s ease;-webkit-text-stroke-color:#fc91fc;-webkit-text-stroke-width:medium;padding:2px}input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:not(:checked) ~ label[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:not(:checked) ~ label[_ngcontent-%COMP%]:hover ~ label[_ngcontent-%COMP%]{color:#fc91fc}.stars-container[_ngcontent-%COMP%]{display:inline}.review-nav[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;position:absolute;top:0;right:10px}.review-icons[_ngcontent-%COMP%]{padding:10px}.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#7d0f7d!important}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.dashboard-container[_ngcontent-%COMP%]   .widget[_ngcontent-%COMP%]   .widget-information[_ngcontent-%COMP%]   .subject-thumbnail[_ngcontent-%COMP%]{width:115px;height:115px}}"]}),e})();function YG(e,t){1&e&&(No(0,"span"),wa(1,"Upload"),Vo())}function $G(e,t){1&e&&(No(0,"div",47),Bo(1,"img",48),Vo())}function KG(e,t){1&e&&(No(0,"span",49),Bo(1,"app-loader"),Vo())}function XG(e,t){1&e&&(No(0,"div",50),wa(1," Please upload a valid Image ! "),Vo())}function JG(e,t){1&e&&(No(0,"div",51),wa(1," Supported file upload formats(.jpg, .png, .jpeg) upto size limit of 3MB * "),Vo())}function QG(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid Name"),Vo())}function ZG(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid dob"),Vo())}function eY(e,t){1&e&&(No(0,"span",52),wa(1,"Invalid contact"),Vo())}function tY(e,t){if(1&e&&(No(0,"mat-option",53),wa(1),Vo()),2&e){const e=t.$implicit;Mo("value",e),Ss(1),Ca(" ",e," ")}}function iY(e,t){1&e&&(No(0,"div",54),wa(1," Duplicate learning area ! "),Vo())}function nY(e,t){if(1&e){const e=Ho();No(0,"div",55),No(1,"div",56),wa(2),Vo(),No(3,"button",57),Wo("click",(function(){ei(e);const i=t.index;return Ko().subtractLearningArea(i)})),Bo(4,"i",58),Vo(),Vo()}if(2&e){const e=t.$implicit;Ss(2),Sa(e)}}let sY=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.studentService=e,this.matDialog=t,this.snackBar=i,this.firebaseStorage=n,this.httpService=s,this.router=r,this.zone=o,this.home=a,this.isLoading3=!1,this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},this.myControl=new Fv,this.options=[],this.subCategories=[],this.learningAreas=[],this.profilePictureUrl="../../../assets/images/default-user-image.png",this.uploadedProfilePicture=null,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.snackBarConfig={duration:15e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]},this.invalidPicture=!1,this.pictureInfo=!0}ngOnInit(){this.fillOptions(),this.filteredOptions=this.myControl.valueChanges.pipe(Xu(""),B(e=>this._filter(e))),this.index=1,this.openNav(),this.studentProfile=this.studentService.getStudentProfileDetails(),null!=this.studentProfile.profilePictureUrl&&(this.profilePictureUrl=this.studentProfile.profilePictureUrl),null!=this.studentProfile.learningAreas&&(this.learningAreas=this.studentProfile.learningAreas),this.handleRefresh()}_filter(e){const t=e.toLowerCase();return this.options.filter(e=>e.toLowerCase().includes(t))}fillOptions(){this.httpService.getAllSubCategories().subscribe(e=>{if(this.subCategories=e,this.subCategories.length>0)for(var t=0;t<this.subCategories.length;t++)this.options.push(this.subCategories[t].subCategory)})}cancelForm(){location.reload()}addLearningArea(){this.duplicacyCheck(this.learningAreas,this.learningArea)?(this.duplicateArea=!0,this.learningArea=""):(this.learningAreas.push(this.learningArea),this.learningArea="",1==this.duplicateArea&&(this.duplicateArea=!1))}subtractLearningArea(e){var t=this.learningAreas[e];confirm("Are you sure you want to delete this learning area?")&&(this.httpService.subtractArea(this.studentProfile.sid,"Learner",t).subscribe(),this.learningAreas.splice(e,1))}navAction(e){e%2==1?(this.index=e+1,this.closeNav()):(this.index=e+1,this.openNav())}openNav(){document.getElementById("sidenav").style.width="230px",document.getElementById("mainContent").style.marginLeft="230px"}closeNav(){document.getElementById("sidenav").style.width="0",document.getElementById("mainContent").style.marginLeft="0"}saveStudentProfile(e){this.studentProfile.contact=e.value.contact,this.studentProfile.dateOfBirth=e.value.dob,this.studentProfile.fullName=e.value.fullName,this.studentProfile.linkedInProfile=e.value.linkedInProfile,this.studentProfile.learningAreas=this.learningAreas,this.studentProfile.profilePictureUrl=this.profilePictureUrl,this.learningAreasDuplicacyCheck(this.learningAreas)&&this.httpService.updateStudentProfile(this.studentProfile).subscribe(e=>{this.studentService.setStudentProfileDetails(this.studentProfile),this.home.calculateStudentProfilePercentage(),this.zone.run(()=>{this.snackBar.open("information saved successfully !","close",this.config),this.router.navigate(["/home/student-dashboard"])})})}learningAreasDuplicacyCheck(e){for(var t=0;t<e.length-1;t++)for(var i=t+1;i<e.length;i++)if(e[t]==e[i])return!1;return!0}duplicacyCheck(e,t){return e.includes(t)}profilePictureChange(e){if(this.uploadedProfilePicture=e.target.files[0],this.isLoading3=!0,this.uploadedProfilePicture=e.target.files[0],Math.round(this.uploadedProfilePicture.size/1024)>3072||!this.uploadedProfilePicture.type.includes("image"))this.invalidPicture=!0,this.isLoading3=!1;else{this.invalidPicture=!1;const t=new FileReader;e.target.files&&e.target.files.length&&(this.uploadedProfilePicture=e.target.files[0],t.readAsDataURL(this.uploadedProfilePicture),t.onload=()=>{this.openDialog(t.result)})}}openDialog(e){const t=new WE;t.disableClose=!0,t.data={image:this.uploadedProfilePicture,imageSrc:e},this.matDialog.open(Kq,t).afterClosed().subscribe(e=>{var t=this.b64toBlob(e,this.uploadedProfilePicture.type),i=new File([t],this.uploadedProfilePicture.name,{type:this.uploadedProfilePicture.type,lastModified:Date.now()});this.uploadedProfilePicture=i,this.uploadProfilePicture()})}b64toBlob(e,t){for(var i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),s=new Uint8Array(n),r=0;r<i.length;r++)s[r]=i.charCodeAt(r);return new Blob([n],{type:t})}profilePictureChangeCompleted(e){this.uploadedProfilePicture=e.target.files[0];var t=`tutor_profile_picture/${this.uploadedProfilePicture}_${(new Date).getTime()}`;const i=this.firebaseStorage.ref(t);this.firebaseStorage.upload(t,this.uploadedProfilePicture).snapshotChanges().pipe(rp(()=>{i.getDownloadURL().subscribe(e=>{this.profilePictureUrl=e,this.snackBar.open("Image Uploaded successfully","close",this.config)})})).subscribe()}uploadProfilePicture(){var e=`tutor_profile_picture/${this.uploadedProfilePicture}_${(new Date).getTime()}`;const t=this.firebaseStorage.ref(e);this.firebaseStorage.upload(e,this.uploadedProfilePicture).snapshotChanges().pipe(rp(()=>{t.getDownloadURL().subscribe(e=>{this.profilePicUploadStatus=!0,this.isLoading3=!1,this.profilePictureUrl=e,this.snackBar.open("Image Uploaded successfully","close",this.config)})})).subscribe()}handleRefresh(){this.studentProfile.sid||setTimeout(()=>{this.studentProfile=this.studentService.getStudentProfileDetails(),null!=this.studentProfile.profilePictureUrl&&(this.profilePictureUrl=this.studentProfile.profilePictureUrl),null!=this.studentProfile.learningAreas&&(this.learningAreas=this.studentProfile.learningAreas)},1e3)}}return e.\u0275fac=function(t){return new(t||e)(Io(Hy),Io(eT),Io(UE),Io(zz),Io(Og),Io(Em),Io(Bc),Io(kU))},e.\u0275cmp=gt({type:e,selectors:[["app-student-profile"]],decls:77,vars:24,consts:[[2,"width","100%",3,"ngSubmit"],["learnerProfile","ngForm"],[1,"container"],[1,"row",2,"padding-top","2vh"],[1,"col-md-6"],[2,"color","#e3165b","font-size","x-large"],[2,"width","130px","height","130px","border-radius","100%","border","1px solid black",3,"src"],[1,"form-group"],["hidden","true","type","file","onclick","this.value=null","required","",3,"change"],["profilePicture",""],["type","button",1,"btn","btn-primary",2,"margin-top","5px","width","140px","position","relative","height","30px",3,"click"],[4,"ngIf"],["class","tickMark",4,"ngIf"],["class","loader","style","text-align: center; z-index: 10",4,"ngIf"],["style","margin: 5px;margin-left: 0; font-size: 12px; font-weight: 600;color: red;",4,"ngIf"],["style","margin: 10px;margin-left: 0; font-size: 12px; font-weight: 600;color: red;",4,"ngIf"],[1,"col-md-3",2,"text-align","end","margin","20px"],[1,"btn",2,"margin-right","2vw","text-decoration","underline",3,"click"],["type","button","type"," submit",1,"btn",2,"padding","1vh 2vw","background-color","purple","color","white","font-size","small",3,"disabled"],[2,"padding-bottom","10px","font-size","12px","font-weight","600"],[1,"row"],[1,"col-md-7","leftBox"],["for","fullName",1,"form-control-placeholder"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control","input-fields",3,"ngModel"],["fullName","ngModel"],["class","help-block",4,"ngIf"],["for","dob",1,"form-control-placeholder"],["type","date","id","dob","name","dob","ngModel","","dobValidator","","required","",1,"form-control","input-fields",3,"ngModel"],["dob","ngModel"],["for","contact",1,"form-control-placeholder"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control","input-fields",3,"ngModel","pattern"],["contact","ngModel"],["for","linkProfile",1,"form-control-placeholder"],["type","text","id","linkedInProfile","ngModel","","name","linkedInProfile",1,"form-control","input-fields",3,"ngModel"],["linkedInProfile","ngModel"],[1,"col-md-4"],["for","learning"],["type","search","name","search","placeholder","Add learning area",1,"form-control",2,"width","70%","display","inline","margin-right","5px",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"display","inline"],["type","button",1,"btn","btn-success","btn-circle","btn-sm",2,"font-size","inherit","display","inline",3,"disabled","click"],[1,"fas","fa-plus"],["style","color: red; margin-top: 10px",4,"ngIf"],["class","learningArea-fields","style","margin-top: 10px; margin-bottom: 10px",4,"ngFor","ngForOf"],[1,"col-md-1"],[1,"tickMark"],["src","../../../assets/icons/tick.png",1,"tickMarkImg"],[1,"loader",2,"text-align","center","z-index","10"],[2,"margin","5px","margin-left","0","font-size","12px","font-weight","600","color","red"],[2,"margin","10px","margin-left","0","font-size","12px","font-weight","600","color","red"],[1,"help-block"],[3,"value"],[2,"color","red","margin-top","10px"],[1,"learningArea-fields",2,"margin-top","10px","margin-bottom","10px"],[1,"tags"],["type","button",1,"btn","btn-danger","btn-circle","btn-sm",2,"font-size","inherit",3,"click"],[1,"fas","fa-minus"]],template:function(e,t){if(1&e){const e=Ho();No(0,"body"),No(1,"div"),No(2,"form",0,1),Wo("ngSubmit",(function(){ei(e);const i=Do(3);return t.saveStudentProfile(i)})),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"p",5),No(8,"b"),wa(9,"PROFILE"),Vo(),Vo(),Bo(10,"img",6),No(11,"div",7),No(12,"input",8,9),Wo("change",(function(e){return t.profilePictureChange(e)})),Vo(),No(14,"button",10),Wo("click",(function(){return ei(e),Do(13).click()})),Oo(15,YG,2,0,"span",11),Oo(16,$G,2,0,"div",12),Oo(17,KG,2,0,"span",13),Vo(),Oo(18,XG,2,0,"div",14),Oo(19,JG,2,0,"div",15),Vo(),Vo(),No(20,"div",16),No(21,"button",17),Wo("click",(function(){return t.cancelForm()})),wa(22," Cancel "),Vo(),No(23,"button",18),wa(24," Save "),Vo(),Vo(),Vo(),Bo(25,"br"),No(26,"div",19),wa(27," The fields marked with * are mandatory "),Vo(),No(28,"div",20),No(29,"div",21),No(30,"div",7),No(31,"label",22),wa(32,"Full Name"),No(33,"sup"),wa(34,"*"),Vo(),Vo(),Bo(35,"input",23,24),Oo(37,QG,2,0,"span",25),Vo(),No(38,"div",7),No(39,"label",26),wa(40,"Date of Birth"),No(41,"sup"),wa(42,"*"),Vo(),Vo(),Bo(43,"input",27,28),Oo(45,ZG,2,0,"span",25),Vo(),No(46,"div",7),No(47,"label",29),wa(48,"Mobile Number"),No(49,"sup"),wa(50,"*"),Vo(),Vo(),Bo(51,"input",30,31),Oo(53,eY,2,0,"span",25),Vo(),No(54,"div",7),No(55,"label",32),wa(56,"Add your LinkedIn Profile"),Vo(),Bo(57,"input",33,34),Vo(),Vo(),No(59,"div",35),No(60,"div",7),No(61,"label",36),wa(62,"Learning Areas"),No(63,"sup"),wa(64,"*"),Vo(),Vo(),No(65,"div"),No(66,"input",37),Wo("ngModelChange",(function(e){return t.learningArea=e})),Vo(),No(67,"mat-autocomplete",38,39),Oo(69,tY,2,2,"mat-option",40),ql(70,"async"),Vo(),No(71,"span",41),No(72,"button",42),Wo("click",(function(){return t.addLearningArea()})),Bo(73,"i",43),Vo(),Vo(),Oo(74,iY,2,0,"div",44),Vo(),Oo(75,nY,5,1,"div",45),Vo(),Vo(),Bo(76,"div",46),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(3),i=Do(36),n=Do(44),s=Do(52),r=Do(68);Ss(10),Mo("src",t.profilePictureUrl,es),Ss(5),Mo("ngIf",!t.isLoading3),Ss(1),Mo("ngIf",t.profilePicUploadStatus),Ss(1),Mo("ngIf",t.isLoading3),Ss(1),Mo("ngIf",t.invalidPicture),Ss(1),Mo("ngIf",t.pictureInfo),Ss(4),Mo("disabled",!e.valid),Ss(12),Mo("ngModel",t.studentProfile.fullName),Ss(2),Mo("ngIf",!i.valid&&i.touched),Ss(6),Mo("ngModel",t.studentProfile.dateOfBirth),Ss(2),Mo("ngIf",(null==n.errors?null:n.errors.invalidDob)&&n.touched),Ss(6),Mo("ngModel",t.studentProfile.contact)("pattern",t.mobNumberPattern),Ss(2),Mo("ngIf",!s.valid&&s.touched),Ss(4),Mo("ngModel",t.studentProfile.linkedInProfile),Ss(9),Mo("formControl",t.myControl)("matAutocomplete",r)("ngModel",t.learningArea),Ss(3),Mo("ngForOf",Wl(70,22,t.filteredOptions)),Ss(3),Mo("disabled",!t.learningArea),Ss(2),Mo("ngIf",t.duplicateArea),Ss(1),Mo("ngForOf",t.learningAreas)}},directives:[Zv,Gg,Wv,md,Bg,zg,Qv,oy,uy,Yz,fy,SA,iy,vA,pd,$z,hE],pipes:[Ad],styles:[".leftBox[_ngcontent-%COMP%]{border-right:1px solid #a4a2a2}.learningArea-fields[_ngcontent-%COMP%]{margin-bottom:2.5vh}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btn-circle.btn-sm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:15px;font-size:8px;padding:0 0 6px;text-align:center}.btn-success[_ngcontent-%COMP%]{margin-right:3vw}label[_ngcontent-%COMP%]{font-size:small;color:#000}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#39093d;overflow-x:hidden;transition:.5s;padding-top:60px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:25px;color:#fff;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#mainContent[_ngcontent-%COMP%]{padding:16px}#headerContent[_ngcontent-%COMP%], #mainContent[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{transition:margin-left .5s}.header[_ngcontent-%COMP%]{height:60px;background:#fff;border-bottom:1px solid rgba(177,165,165,.48);width:100vw;margin-left:-2vw;display:block;float:left;box-shadow:0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important;padding-left:15px;margin-top:-2vh}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}.plus_minus[_ngcontent-%COMP%]{width:10px;height:10px}.tickMark[_ngcontent-%COMP%]{position:absolute;height:0;padding:0;right:-10px;top:5px}.tickMarkImg[_ngcontent-%COMP%]{width:20px;margin-top:-25px}.loader[_ngcontent-%COMP%]{position:absolute;top:-5px;right:73px;height:0}.tags[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;margin-right:5px;border-radius:.25rem;width:82%;display:inline-block}"]}),e})();function rY(e,t){1&e&&(No(0,"div",11),Bo(1,"app-loading"),Vo())}function oY(e,t){1&e&&(No(0,"div",13),No(1,"div",14),No(2,"h1"),wa(3,"Expert is not available right now"),Vo(),No(4,"h2"),wa(5,"Check Back Later"),Vo(),Vo(),Vo())}function aY(e,t){if(1&e&&(No(0,"mat-option",31),wa(1),ql(2,"date"),Vo()),2&e){const e=t.$implicit,i=t.index,n=Ko(3);Mo("value",e),Ss(1),Ca(" ",zl(2,2,n.fullDate[i],"fullDate")," ")}}function lY(e,t){1&e&&(No(0,"div"),No(1,"span",32),wa(2," No available schedules"),Vo(),Vo())}function cY(e,t){if(1&e&&(No(0,"span"),wa(1),ql(2,"timeConverter"),ql(3,"zero"),ql(4,"timeMedian"),Vo()),2&e){const e=Ko().$implicit;Ss(1),Ea("",Wl(2,3,e.hours),":",Wl(3,5,e.minutes)," ",Wl(4,7,e.hours),"")}}function hY(e,t){if(1&e&&(No(0,"mat-option",31),Oo(1,cY,5,9,"span",10),Vo()),2&e){const e=t.$implicit,i=t.index,n=Ko(4);Mo("value",i),Ss(1),Mo("ngIf",n.selectedDate.date==e.date)}}function dY(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"mat-form-field",33),No(2,"mat-label"),wa(3,"Start"),Vo(),No(4,"mat-select",26),Wo("valueChange",(function(t){return ei(e),Ko(3).startTimeValue=t}))("selectionChange",(function(){return ei(e),Ko(3).startSlotChange()})),Oo(5,hY,2,2,"mat-option",27),Vo(),Vo(),Vo()}if(2&e){const e=Ko(3);Ss(4),Mo("value",e.startTimeValue),Ss(1),Mo("ngForOf",e.startSlots)}}function uY(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"div",15),No(2,"div",16),No(3,"div",17),No(4,"h5",18),wa(5,"Reschedule your meeting by choosing the suitable time."),Vo(),Vo(),Vo(),No(6,"div",19),No(7,"div"),No(8,"label",20),wa(9,"Choose Time"),No(10,"sup"),wa(11,"*"),Vo(),Vo(),Bo(12,"p",21),No(13,"div",22),wa(14),Vo(),Vo(),No(15,"div"),No(16,"div",23),No(17,"div",24),No(18,"div"),No(19,"mat-form-field",25),No(20,"mat-label"),wa(21,"Choose Date"),Vo(),No(22,"mat-select",26),Wo("valueChange",(function(t){return ei(e),Ko(2).selectedDate=t}))("selectionChange",(function(){return ei(e),Ko(2).dateChange()})),Oo(23,aY,3,5,"mat-option",27),Vo(),Vo(),Vo(),Vo(),No(24,"div",24),Oo(25,lY,3,0,"div",10),Oo(26,dY,6,2,"div",10),Vo(),Vo(),Vo(),Vo(),No(27,"div",28),No(28,"div",29),No(29,"button",30),Wo("click",(function(){return ei(e),Ko(2).onBooking()})),wa(30," Reschedule "),Vo(),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Ko(2);Ss(14),Sa(e.errorMessage),Ss(8),Mo("value",e.selectedDate),Ss(1),Mo("ngForOf",e.scheduleDates),Ss(2),Mo("ngIf",e.noSchedule),Ss(1),Mo("ngIf",!e.noSchedule)}}function pY(e,t){if(1&e&&(No(0,"div"),Oo(1,oY,6,0,"div",12),Oo(2,uY,31,5,"div",10),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",!e.isTutorAvailable),Ss(1),Mo("ngIf",e.isTutorAvailable)}}function fY(e,t){1&e&&(No(0,"div",14),Bo(1,"img",35),No(2,"h5"),wa(3,"Your meeting has been rescheduled successfully !"),Vo(),Vo())}function mY(e,t){if(1&e&&(No(0,"div",14),Bo(1,"img",36),No(2,"h5"),wa(3,"Oops !"),Vo(),No(4,"h5"),wa(5),Vo(),Vo()),2&e){const e=Ko(2);Ss(5),Sa(e.errorText)}}function gY(e,t){if(1&e&&(No(0,"div"),Oo(1,fY,4,0,"div",34),Oo(2,mY,6,1,"div",34),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",e.rescheduledStatus),Ss(1),Mo("ngIf",!e.rescheduledStatus)}}let vY=(()=>{class e{constructor(e,t,i,n){this.activatedRoute=e,this.httpService=t,this.router=i,this.cookieService=n,this.fullDate=[],this.areaOfExpertises=[],this.noSchedule=!1,this.teacherProfile=new Iy,this.meetingDetails=new Py,this.bookingDetails=new My,this.startTimeString="Start Time",this.endTimeString="End Time",this.errorMessage="",this.endSelect=-1,this.startSelect=-1,this.paymentSuccessful=!1,this.tempArray=new Ly,this.time={hour:13,minute:30},this.endTime={hour:0,minute:0},this.st={sh:-1,sm:-1},this.et={eh:-1,em:-1},this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,this.dates=[],this.scheduleDates=[],this.meridian=!0,this.date=new Date,this.settings={bigBanner:!0,timePicker:!0,format:"dd-MM-yyyy hh:mm a",defaultOpen:!1,closeOnSelect:!1},this.ScheduleTime=[],this.startSlots=[],this.startSlotsCopy=[],this.endSlots=[],this.profilePictureUrl="../../assets/images/default-user-image.png",this.totalPrice=0,this.payableAmount=0,this.paymentResponse={},this.timeFrom=e=>{for(let t=0;t<Math.abs(e);t++)this.fullDate.push(new Date((new Date).getTime()-24*(e>=0?t:t-t-t)*60*60*1e3))},this.timeFrom2=e=>{for(let i=0;i<Math.abs(e);i++){var t=new sA;t.date=new Date((new Date).getTime()-24*(e>=0?i:i-i-i)*60*60*1e3).toLocaleDateString("en-GB"),this.scheduleDates.push(t)}}}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.token=e.token,this.bid=e.bid,this.userId=e.tid,this.cookieService.set("token",this.token),this.cookieService.set("userId",mk(this.token).sub),console.log(this.token,this.bid,this.userId),this.fetchData()})}toLoginPage(){this.router.navigate([""])}fetchData(){this.httpService.fetchBookingStatus(this.bid).subscribe(e=>{"Pending"==e.status&&this.httpService.getTutorIsAvailable(this.userId).subscribe(e=>{1==e?(this.isTutorAvailable=!0,this.timeFrom(-7),this.timeFrom2(-7),this.httpService.getTutorTimeAvailabilityTimeArray(this.userId).subscribe(e=>{this.ScheduleTime=e,this.selectedDate=this.scheduleDates[0],setTimeout(()=>{this.dateChange()},1e3),this.manipulateTimeSlots()})):0==e&&(this.isTutorAvailable=!1)})})}dateChange(){0==this.selectedDate.hasElements?this.noSchedule=!0:1==this.selectedDate.hasElements&&(this.noSchedule=!1,this.fillSlots("start"))}startSlotChange(){var e;for(this.endSlots=[],e=this.startTimeValue+1;e<this.startSlotsCopy.length;e++)this.endSlots.push(this.startSlotsCopy[e])}fillSlots(e){if("start"==e){this.startSlots=[],this.endSlots=[],this.startSlotsCopy=[];for(let e of this.ScheduleTime)e.date==this.selectedDate.date&&this.startSlots.push(e);for(let e of this.ScheduleTime)e.date==this.selectedDate.date&&this.startSlotsCopy.push(e);var t;for(t=1;t<this.startSlotsCopy.length;t++)this.endSlots.push(this.startSlotsCopy[t]);this.startTimeValue=0,this.endTimeValue=0,this.startSlots.pop()}}onBooking(){var e;e=this.ScheduleTime.indexOf(this.startSlots[this.startTimeValue]),this.timeSelector(this.startSlots[this.startTimeValue],e),this.bookingDetails.startTimeHour=this.st.sh,this.bookingDetails.startTimeMinute=this.st.sm,this.bookingDetails.dateOfMeeting=this.startDate,this.bookingDetails.bid=this.bid,console.log(this.bookingDetails),this.isLoading=!0,this.httpService.canRescheduleBooking(this.token,this.bid).subscribe(e=>{console.log(e),"rescheduling possible"==e.response?this.httpService.rescheduleBooking(this.bookingDetails).subscribe(e=>{console.log(e),"rescheduled successfully"==e.response?(this.isLoading=!1,this.isRescheduled=!0,this.rescheduledStatus=!0):"expert busy"==e.response?(this.isLoading=!1,this.errorMessage="Expert is busy choose another time !"):"rescheduling unsuccessful"==e.response&&(this.isLoading=!1,this.isRescheduled=!0,this.rescheduledStatus=!1,this.errorText="rescheduling unsuccessful !")}):"rescheduling time limit exceeded"==e.response?(this.isLoading=!1,this.isRescheduled=!0,this.rescheduledStatus=!1,this.errorText="rescheduling time exceeded !"):"invalid user"==e.response?(this.isLoading=!1,this.isRescheduled=!0,this.rescheduledStatus=!1,this.errorText="Invalid User !"):"already rescheduled"==e.response&&(this.isLoading=!1,this.isRescheduled=!0,this.rescheduledStatus=!1,this.errorText="Already rescheduled !")})}timeSelector(e,t){if(this.clickedIndex=t,-1==this.st.sh&&-1==this.st.sm&&-1==this.et.eh&&-1==this.et.em)this.clickedIndex1=t,this.startDisabled=!1,this.startDate=e.date,this.st.sh=e.hours,this.st.sm=e.minutes,e.isStartDate=!0,this.startSelect=this.clickedIndex,this.startTimeString=0==this.st.sm?this.st.sh+":0"+this.st.sm:this.st.sh+":"+this.st.sm,this.errorMessage="",null!=this.tempArray.clickIndex1||null!=this.tempArray.clickIndex2||this.clickedIndex-1!=-1&&this.ScheduleTime[this.clickedIndex-1].date==e.date?null==this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex-1].date==e.date&&(this.tempArray.clickIndex1=t,this.case2a=!0,this.case4a=!0,this.case5a=!0):(this.tempArray.clickIndex1=t,this.case1a=!0,this.case3a=!0);else if(-1!=this.st.sh&&-1!=this.st.sm&&-1==this.et.eh&&-1==this.et.em)if(this.clickedIndex2=t,this.startDate==e.date)if(this.clickedIndex2-this.clickedIndex1<=6)if(this.et.eh=e.hours,this.et.em=e.minutes,60*this.et.eh+this.et.em>60*this.st.sh+this.st.sm)if(this.endDisabled=!1,e.isEndDate=!0,this.endSelect=this.clickedIndex,this.endTimeString=0==this.et.em?this.et.eh+":0"+this.et.em:this.et.eh+":"+this.et.em,this.errorMessage="",null!=this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex].date==e.date){this.tempArray.clickIndex2=t,this.case1b=!0,this.case4b=!0,this.case5b=!0,this.case1a&&this.case1b&&(this.bookingDetails.bookingCase=1);var i=t-this.tempArray.clickIndex1;1==i&&this.case4a&&this.case4b?this.bookingDetails.bookingCase=4:1!=i&&this.case5a&&this.case5b&&(this.bookingDetails.bookingCase=5)}else null!=this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex+1].date!=e.date&&(this.tempArray.clickIndex2=t,this.case2b=!0,this.case3b=!0,this.case2a&&this.case2b?this.bookingDetails.bookingCase=2:this.case3a&&this.case3b&&(this.bookingDetails.bookingCase=3));else 60*this.et.eh+this.et.em<=60*this.st.sh+this.st.sm&&(this.startDisabled=!0,this.endDisabled=!0,this.startSelect=-1,this.endSelect=-1,e.isEndDate=!1,e.isStartDate=!1,this.et.eh=-1,this.et.em=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.endTimeString="End Time",this.errorMessage="End time should be after Start time, Reset !",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1);else this.errorMessage="You can't book a tutor for more than 3 hours",this.startDisabled=!0,this.endDisabled=!0,e.isStartDate=!1,this.startSelect=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1;else this.errorMessage="Start date and End date should be same",this.startDisabled=!0,this.endDisabled=!0,e.isStartDate=!1,this.startSelect=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1;else-1!=this.st.sh&&-1!=this.st.sm&&-1!=this.et.eh&&-1!=this.et.em&&(this.endDisabled=!0,this.startDisabled=!1,this.startSelect=this.clickedIndex,this.endSelect=-1,this.startDate=e.date,this.st.sh=e.hours,this.st.sm=e.minutes,this.et.eh=-1,this.et.em=-1,e.isEndDate=!1,this.startTimeString=0==this.st.sm?this.st.sh+":0"+this.st.sm:this.st.sh+":"+this.st.sm,this.endTimeString="End Time",this.errorMessage="",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,null!=this.tempArray.clickIndex1||null!=this.tempArray.clickIndex2||this.clickedIndex-1!=-1&&this.ScheduleTime[this.clickedIndex-1].date==e.date?null==this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex-1].date==e.date&&(this.tempArray.clickIndex1=t,this.case2a=!0,this.case4a=!0,this.case5a=!0):(this.tempArray.clickIndex1=t,this.case1a=!0,this.case3a=!0))}manipulateTimeSlots(){for(let t of this.scheduleDates){var e=0;for(let i of this.ScheduleTime)if(i.date==t.date){e=1;break}1==e&&(t.hasElements=!0)}}toggleMeridian(){this.meridian=!this.meridian}findDuration(e,t,i,n){return 60*i+n-(60*e+t)}onGenerateString(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}calculateEndTime(e,t){var i;i=t%1*60;var n=e.minute;if(this.endTime.hour=e.hour+(t-t%1),this.endTime.minute=n+i,this.endTime.minute>=60){var s=this.endTime.minute-60;this.endTime.hour++,this.endTime.minute=s}return this.endTime.hour=Math.trunc(this.endTime.hour),this.endTime.minute=Math.trunc(this.endTime.minute),this.endTime}}return e.\u0275fac=function(t){return new(t||e)(Io(gf),Io(Og),Io(Em),Io(Dx))},e.\u0275cmp=gt({type:e,selectors:[["app-reschedule-meeting"]],decls:16,vars:5,consts:[["style","\n    text-align: center;\n    margin-top: 20%;\n    margin-left: auto;\n    margin-right: auto;\n  ",4,"ngIf"],[1,"signup-container"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[1,"signup-header"],[1,"header-container",2,"margin-bottom","10px"],[1,"header-primary"],[1,"header-container-secondary"],[1,"logo","hide"],[1,"info-class"],[1,"signup-parameter-container"],[4,"ngIf"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],["style","padding: 40px",4,"ngIf"],[2,"padding","40px"],[2,"text-align","center"],[1,"connect-container"],[1,"connect-header"],[2,"margin-bottom","15px"],[2,"margin","0","color","#7d0f7d"],[1,"connect-body"],[2,"margin-bottom","10px"],[2,"font-weight","500","margin-top","5px","color","#892687","display","inline","margin-left","10px"],[1,"errorMessage"],[1,"row",2,"width","510px"],[1,"col-sm-6"],["appearance","fill"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"connect-footer"],[2,"float","right"],[1,"btn","btn-primary",3,"click"],[3,"value"],[2,"font-size","large"],["appearance","fill",2,"width","95px"],["style","text-align: center",4,"ngIf"],["src","../../assets/images/check.svg","alt","",2,"width","100px","height","100px","margin","20px"],["src","../../assets/images/close.png","alt","",2,"width","100px","height","100px","margin","20px"]],template:function(e,t){1&e&&(Oo(0,rY,2,0,"div",0),No(1,"div",1),No(2,"span",2),Wo("click",(function(){return t.toLoginPage()})),wa(3," close "),Vo(),No(4,"div",3),No(5,"div",4),No(6,"span",5),wa(7,"Reschedule"),Vo(),Bo(8,"br"),No(9,"span",6),wa(10,"Your Meeting"),Vo(),Vo(),Bo(11,"div",7),Bo(12,"div",8),Vo(),No(13,"div",9),Oo(14,pY,3,2,"div",10),Oo(15,gY,3,2,"div",10),Vo(),Vo()),2&e&&(Mo("ngIf",t.isLoading),Ss(1),la(t.isLoading?"hideBlock":""),Ss(13),Mo("ngIf",!t.isRescheduled),Ss(1),Mo("ngIf",t.isRescheduled))},directives:[md,Ey,WT,LT,hx,pd,hE],pipes:[Dd,ux,px,fx],styles:[".signup-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;display:block;padding:10px;margin:50px auto 0;height:700px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:90px;height:60px;display:inline-block;float:right;margin-right:70px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),e})();function yY(e,t){1&e&&(No(0,"div",10),Bo(1,"app-loading"),Vo())}function bY(e,t){1&e&&(No(0,"div",21),wa(1," Email entered doesn't exist ! "),Vo())}function wY(e,t){1&e&&(No(0,"span",27),wa(1,"Invalid email"),Vo())}function SY(e,t){if(1&e&&(No(0,"div",22),No(1,"label",23),wa(2,"Email Address"),Vo(),Bo(3,"input",24,25),Oo(5,wY,2,0,"span",26),Vo()),2&e){const e=Do(4);Ss(5),Mo("ngIf",!e.valid&&e.touched)}}function CY(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"p"),wa(2,"Please enter your registered email."),Vo(),Oo(3,bY,2,0,"div",14),No(4,"form",15,16),Wo("ngSubmit",(function(){ei(e);const t=Do(5);return Ko(2).submitEmail(t)})),Oo(6,SY,6,1,"div",17),No(7,"div",18),No(8,"button",19),wa(9," Next "),Vo(),No(10,"a",20),wa(11," Cancel "),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(5),t=Ko(2);Ss(3),Mo("ngIf",t.incorrectEmail),Ss(3),Mo("ngIf",t.showEmail),Ss(2),Mo("disabled",!e.valid)}}function _Y(e,t){1&e&&(No(0,"div",28),Bo(1,"img",29),No(2,"h5"),wa(3,"Reset password link has been sent to your registered email !"),Vo(),Vo())}function EY(e,t){if(1&e&&(No(0,"div",11),Oo(1,CY,12,3,"div",12),Oo(2,_Y,4,0,"div",13),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",!e.linkSent),Ss(1),Mo("ngIf",e.linkSent)}}function TY(e,t){1&e&&(No(0,"span",27),wa(1,"password field must be minimum of 8 characters with atleast one lowercase, uppercase, number and a special character"),Vo())}function xY(e,t){if(1&e&&(No(0,"div",22),No(1,"label",31),wa(2,"New Password"),Vo(),Bo(3,"input",32,33),Oo(5,TY,2,0,"span",26),Vo()),2&e){const e=Do(4),t=Ko(3);Ss(3),Mo("pattern",t.passwordPattern),Ss(2),Mo("ngIf",!e.valid&&e.touched)}}function kY(e,t){1&e&&(No(0,"span",27),wa(1,"password field must be minimum of 8 characters with atleast one lowercase, uppercase, number and a special character"),Vo())}function AY(e,t){if(1&e&&(No(0,"div",22),No(1,"label",34),wa(2,"Retype New Password"),Vo(),Bo(3,"input",35,36),Oo(5,kY,2,0,"span",26),Vo()),2&e){const e=Do(4),t=Ko(3);Ss(3),Mo("pattern",t.passwordPattern),Ss(2),Mo("ngIf",!e.valid&&e.touched)}}function OY(e,t){if(1&e){const e=Ho();No(0,"div"),No(1,"p"),wa(2,"Please reset your password"),Vo(),Bo(3,"div",30),No(4,"form",15,16),Wo("ngSubmit",(function(){ei(e);const t=Do(5);return Ko(2).onReset(t)})),Oo(6,xY,6,2,"div",17),Oo(7,AY,6,2,"div",17),No(8,"div",18),No(9,"button",19),wa(10," Next "),Vo(),No(11,"a",20),wa(12," Cancel "),Vo(),Vo(),Vo(),Vo()}if(2&e){const e=Do(5),t=Ko(2);Ss(3),Mo("innerHTML",t.passwordError,Zn),Ss(3),Mo("ngIf",t.showPassword),Ss(1),Mo("ngIf",t.showPassword),Ss(2),Mo("disabled",!e.valid)}}function DY(e,t){1&e&&(No(0,"div",28),Bo(1,"img",29),No(2,"h5"),wa(3,"Password has been reset successfully !"),Vo(),Vo())}function IY(e,t){if(1&e&&(No(0,"div",11),Oo(1,OY,13,4,"div",12),Oo(2,DY,4,0,"div",13),Vo()),2&e){const e=Ko();Ss(1),Mo("ngIf",!e.passwordReset),Ss(1),Mo("ngIf",e.passwordReset)}}let RY=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c){this.profileService=e,this.meetingSevice=t,this.studentService=i,this.httpService=n,this.snackBar=s,this.router=r,this.dialogRef=o,this.activatedRoute=a,this.loginService=l,this.dialog=c,this.linkSent=!1,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$"}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.code=e.token,null==this.code?this.showEmail=!0:this.showPassword=!0})}toLoginPage(){this.router.navigate(["login"])}onReset(e){e.value.password==e.value.retypePassword?(this.passwordError="",this.httpService.updatePassword(this.code,e.value.password).subscribe(e=>{1==e&&(this.passwordReset=!0)})):this.passwordError="Password and retyped password doesn't match !"}submitEmail(e){this.isLoading=!0,this.httpService.resetPasswordLink(e.value.email).subscribe(e=>{this.isLoading=!1,1==e?this.linkSent=!this.linkSent:this.incorrectEmail=!0})}}return e.\u0275fac=function(t){return new(t||e)(Io(Ny),Io(Vy),Io(Hy),Io(Og),Io(UE),Io(Em),Io(eT),Io(gf),Io(jy),Io(eT))},e.\u0275cmp=gt({type:e,selectors:[["app-reset-password"]],decls:15,vars:5,consts:[["style","\n    text-align: center;\n    margin-top: 20%;\n    margin-left: auto;\n    margin-right: auto;\n  ",4,"ngIf"],[1,"signup-container"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[1,"signup-header"],[1,"header-container"],[1,"header-primary"],[1,"header-container-secondary"],[1,"logo","hide"],[1,"info-class"],["class","signup-parameter-container",4,"ngIf"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],[1,"signup-parameter-container"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],["style","margin: 10px; margin-left: 0; color: red; font-size: 12px",4,"ngIf"],[1,"form-group-container",3,"ngSubmit"],["t","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group","button-container"],["type","submit",1,"btn","btn-primary",3,"disabled"],["href","#",1,"forgot-password",2,"float","right","margin-right","20px"],[2,"margin","10px","margin-left","0","color","red","font-size","12px"],[1,"form-group"],["for","email",1,"form-control-placeholder"],["type","email","id","email","name","email","ngModel","","required","","email","","maxlength","64","pattern","[a-zA-Z0-9_.+-]{1,20}@(?:(?:[a-zA-Z0-9-]+\\.)?[a-zA-Z]+\\.)?(gmail|piet|yahoo|hotmail|rediffmail|apple|microsoft)\\.([a-z]{2,4})(\\.[a-z]{2,4})?$",1,"form-control"],["email","ngModel"],["class","help-block",4,"ngIf"],[1,"help-block"],[2,"text-align","center"],["src","../../assets/images/check.svg","alt","",2,"width","100px","height","100px","margin","20px"],[2,"margin","10px","margin-left","0","color","red","font-size","12px",3,"innerHTML"],["for","password",1,"form-control-placeholder"],["type","password","id","password","name","password","ngModel","","required","","minlength","8","maxlength","20","placeholder","Enter new password",1,"form-control",3,"pattern"],["password","ngModel"],["for","retypePassword",1,"form-control-placeholder"],["type","password","id","retypePassword","name","retypePassword","ngModel","","required","","minlength","8","maxlength","20","placeholder","Retype new password",1,"form-control",3,"pattern"],["retypePassword","ngModel"]],template:function(e,t){1&e&&(Oo(0,yY,2,0,"div",0),No(1,"div",1),No(2,"span",2),Wo("click",(function(){return t.toLoginPage()})),wa(3," close "),Vo(),No(4,"div",3),No(5,"div",4),No(6,"span",5),wa(7,"Reset"),Vo(),Bo(8,"br"),No(9,"span",6),wa(10,"Your Password"),Vo(),Vo(),Bo(11,"div",7),Bo(12,"div",8),Vo(),Oo(13,EY,3,2,"div",9),Oo(14,IY,3,2,"div",9),Vo()),2&e&&(Mo("ngIf",t.isLoading),Ss(1),la(t.isLoading?"hideBlock":""),Ss(12),Mo("ngIf",t.showEmail),Ss(1),Mo("ngIf",t.showPassword))},directives:[md,Ey,Zv,Gg,Wv,Bg,zg,Qv,oy,ly,uy,fy,hy],styles:[".signup-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;display:block;padding:10px;margin:50px auto 0;height:700px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right;margin-right:70px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),e})();class PY{constructor(){this.subjects=[],this.price=[],this.ratings=[],this.show=!1}}let MY=(()=>{class e{constructor(e,t){this.dialogRef=e,this.subjectFiltersApplied=[],this.priceFiltersApplied=[],this.ratingFilterApplied=[],this.deletionElementFinder=[],this.elementsToBeDeleted=[],this.allFiltersApplied=new PY,this.allFiltersApplied=t.allFiltersApplied,this.subjectFiltersApplied=t.subjectFiltersApplied,this.priceFiltersApplied=t.priceFiltersApplied,this.ratingFilterApplied=t.ratingFiltersApplied}ngOnInit(){}closeDialog(){this.dialogRef.close({operation:"cancel"})}applyFilters(){this.dialogRef.close({operation:"apply",subjectFilters:this.subjectFiltersApplied,priceFiltersApplied:this.priceFiltersApplied,ratingFilterApplied:this.ratingFilterApplied,allFiltersApplied:this.allFiltersApplied})}searchBySubject(e){var t=e.target.value;0==this.subjectFiltersApplied.length?(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.subjectFiltersApplied,t)?(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(t),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(t),1),0==this.allFiltersApplied.subjects.length&&(this.allFiltersApplied.show=!1)):(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0)}searchByPrice(e){var t=e.target.value;0==this.priceFiltersApplied.length?(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.priceFiltersApplied,t)?(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(t),1),this.allFiltersApplied.price.splice(this.allFiltersApplied.price.indexOf(t),1),0==this.allFiltersApplied.price.length&&(this.allFiltersApplied.show=!1)):(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0)}searchByRatings(e){var t=e.target.value;0==this.ratingFilterApplied.length?(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.ratingFilterApplied,t)?(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(t),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*t),1),0==this.allFiltersApplied.ratings.length&&(this.allFiltersApplied.show=!1)):(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0)}removeOrNot(e,t,i){for(var n=0,s=0;s<e.length;s++)for(var r=0;r<t.length;r++)if(0!=t[r].localeCompare(i)&&0==e[s].area.localeCompare(t[r])){n=1;break}return 0==n}checkFiltersApplied(e,t){if(e.includes(t))return!0}checkDuplicacyOfObjectInArray(e,t){if(e.filter(e=>JSON.stringify(e)===JSON.stringify(t)).length>0)return!0}subjectContains(e){return this.subjectFiltersApplied.includes(e)}priceContains(e){return this.priceFiltersApplied.includes(e)}ratingContains(e){return this.ratingFilterApplied.includes(e)}}return e.\u0275fac=function(t){return new(t||e)(Io(KE),Io(XE))},e.\u0275cmp=gt({type:e,selectors:[["app-filters-dialog"]],decls:79,vars:11,consts:[["id","dialog-container",1,"dialog-container"],[1,"content-header"],[1,"content-body"],[1,"filter-container"],[1,"filter-category"],[1,"filter-category-header"],[1,"filter-category-list"],[1,"filters-label"],["type","checkbox","value","English",1,"filter-input",3,"checked","change"],[1,"filter-num"],["type","checkbox","value","100-199",1,"filter-input",3,"checked","change"],["type","checkbox","value","200-399",1,"filter-input",3,"checked","change"],["type","checkbox","value","400-699",1,"filter-input",3,"checked","change"],["type","checkbox","value","700-999",1,"filter-input",3,"checked","change"],["type","checkbox","value","1000-1499",1,"filter-input",3,"checked","change"],["type","checkbox","value","1500-10000",1,"filter-input",3,"checked","change"],["type","checkbox","value","4",1,"filter-input",3,"checked","change"],["type","checkbox","value","3",1,"filter-input",3,"checked","change"],["type","checkbox","value","2",1,"filter-input",3,"checked","change"],["type","checkbox","value","1",1,"filter-input",3,"checked","change"],[1,"dialog-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(No(0,"div",0),No(1,"div",1),wa(2," Apply Filters "),Vo(),No(3,"div",2),No(4,"div",3),No(5,"div",4),No(6,"span",5),wa(7,"Subjects"),Vo(),No(8,"ul",6),No(9,"li"),No(10,"label",7),No(11,"input",8),Wo("change",(function(e){return t.searchBySubject(e)})),Vo(),No(12,"span"),wa(13,"English "),No(14,"label",9),wa(15,"(123)"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(16,"div",4),No(17,"span",5),wa(18,"Price"),Vo(),No(19,"ul",6),No(20,"li"),No(21,"label",7),No(22,"input",10),Wo("change",(function(e){return t.searchByPrice(e)})),Vo(),No(23,"span"),wa(24,"100-199"),Vo(),Vo(),Vo(),No(25,"li"),No(26,"label",7),No(27,"input",11),Wo("change",(function(e){return t.searchByPrice(e)})),Vo(),No(28,"span"),wa(29,"200-399"),Vo(),Vo(),Vo(),No(30,"li"),No(31,"label",7),No(32,"input",12),Wo("change",(function(e){return t.searchByPrice(e)})),Vo(),No(33,"span"),wa(34,"400-699"),Vo(),Vo(),Vo(),No(35,"li"),No(36,"label",7),No(37,"input",13),Wo("change",(function(e){return t.searchByPrice(e)})),Vo(),No(38,"span"),wa(39,"700-999"),Vo(),Vo(),Vo(),No(40,"li"),No(41,"label",7),No(42,"input",14),Wo("change",(function(e){return t.searchByPrice(e)})),Vo(),No(43,"span"),wa(44,"1000-1499"),Vo(),Vo(),Vo(),No(45,"li"),No(46,"label",7),No(47,"input",15),Wo("change",(function(e){return t.searchByPrice(e)})),Vo(),No(48,"span"),wa(49,"1500+"),Vo(),Vo(),Vo(),Vo(),Vo(),No(50,"div",4),No(51,"span",5),wa(52,"Avg. Reviews"),Vo(),No(53,"ul",6),No(54,"li"),No(55,"label",7),No(56,"input",16),Wo("change",(function(e){return t.searchByRatings(e)})),Vo(),No(57,"span"),wa(58,"M4 & up"),Vo(),Vo(),Vo(),No(59,"li"),No(60,"label",7),No(61,"input",17),Wo("change",(function(e){return t.searchByRatings(e)})),Vo(),No(62,"span"),wa(63,"3 & up"),Vo(),Vo(),Vo(),No(64,"li"),No(65,"label",7),No(66,"input",18),Wo("change",(function(e){return t.searchByRatings(e)})),Vo(),No(67,"span"),wa(68,"2 & up"),Vo(),Vo(),Vo(),No(69,"li"),No(70,"label",7),No(71,"input",19),Wo("change",(function(e){return t.searchByRatings(e)})),Vo(),No(72,"span"),wa(73,"1 & up"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(74,"div",20),No(75,"button",21),Wo("click",(function(){return t.closeDialog()})),wa(76,"Cancel"),Vo(),No(77,"button",22),Wo("click",(function(){return t.applyFilters()})),wa(78,"Apply"),Vo(),Vo(),Vo()),2&e&&(Ss(11),Mo("checked",t.subjectContains("English")),Ss(11),Mo("checked",t.priceContains("100-199")),Ss(5),Mo("checked",t.priceContains("200-399")),Ss(5),Mo("checked",t.priceContains("400-699")),Ss(5),Mo("checked",t.priceContains("700-999")),Ss(5),Mo("checked",t.priceContains("1000-1499")),Ss(5),Mo("checked",t.priceContains("1500-10000")),Ss(9),Mo("checked",t.ratingContains("4")),Ss(5),Mo("checked",t.ratingContains("3")),Ss(5),Mo("checked",t.ratingContains("2")),Ss(5),Mo("checked",t.ratingContains("1")))},styles:["button[_ngcontent-%COMP%]{margin:5px}.dialog-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100vh;height:calc(var(--vh, 1vh)*100);padding:10px}.content-header[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.content-body[_ngcontent-%COMP%]{padding:10px}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{padding:0;margin:0}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;max-width:50%;word-break:break-all}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{color:#fff;width:auto;background-color:#e30084;padding:5px;border-radius:5px;display:inline-block;margin:5px}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;width:auto;border:1px solid #e30084;padding:5px;border-radius:5px;display:inline-block;margin:5px}.dialog-footer[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;width:100%;text-align:right}"]}),e})();function LY(e,t){if(1&e&&(No(0,"option"),wa(1),Vo()),2&e){const e=t.$implicit;Ss(1),Sa(e.subCategory)}}let NY=(()=>{class e{constructor(e,t,i,n,s,r){this.router=e,this.httpService=t,this.loginService=i,this.profileService=n,this.matDialog=s,this.activatedRoute=r,this.searchResults=[],this.filteredArray=[],this.isLoading=!0,this.subjectFiltersApplied=[],this.priceFiltersApplied=[],this.ratingFilterApplied=[],this.deletionElementFinder=[],this.elementsToBeDeleted=[],this.showMobileFilterButton=!1,this.subCategories=[],this.getScreenSize(),this.allFiltersApplied=new PY}getScreenSize(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth,this.screenWidth<=500?(this.showMobileFilterButton=!0,this.showMobileFilterView=!0):(this.showMobileFilterButton=!1,this.showMobileFilterView=!1)}ngOnInit(){window.scroll(0,0),this.activatedRoute.queryParams.subscribe(e=>{this.selectedSubject=e.subject,this.fetchTutorList(),this.getSubCategories()}),$(document).ready((function(){$(".select2").select2({})})),window.screen.width<=500?(this.showMobileFilterButton=!0,this.showMobileFilterView=!0):(this.showMobileFilterButton=!1,this.showMobileFilterView=!1),this.callSearchBySubject=!1,this.callSearchByPrice=!1,this.findFromSearchResult=!1,this.findFromFilterSearch=!1}fetchTutorList(){this.httpService.getTutorList(this.selectedSubject).subscribe(e=>{this.searchResults=[],this.filteredArray=[],this.searchResults=e,this.isLoading=!1})}onSignUp(){this.router.navigate(["sign-up"])}getSubCategories(){null!=this.selectedSubject&&this.httpService.getSubCategories(this.selectedSubject).subscribe(e=>{this.subCategories=e})}checkFilters(){var e,t,i;return this.allFiltersApplied?(this.allFiltersApplied.subjects&&(e=0!=this.allFiltersApplied.subjects.length),this.allFiltersApplied.price&&(i=0!=this.allFiltersApplied.price.length),this.allFiltersApplied.ratings&&(t=0!=this.allFiltersApplied.ratings.length),!!(e||i||t)):(console.log("no filters"),!1)}showFilters(){const e=new WE;e.data={subjectFiltersApplied:this.subjectFiltersApplied,priceFiltersApplied:this.priceFiltersApplied,ratingFiltersApplied:this.ratingFilterApplied,allFiltersApplied:this.allFiltersApplied},this.matDialog.open(MY,e).afterClosed().subscribe(e=>{if("apply"==e.operation){if(null!=e.subjectFilters)for(let t of e.subjectFilters)this.subjectFiltersApplied.includes(t)||this.subjectFiltersApplied.push(t);if(null!=e.priceFiltersApplied)for(let t of e.priceFiltersApplied)this.priceFiltersApplied.includes(t)||this.priceFiltersApplied.push(t);if(null!=e.ratingFilterApplied)for(let t of e.ratingFilterApplied)this.ratingFilterApplied.includes(t)||this.ratingFilterApplied.push(t);this.allFiltersApplied=e.allFiltersApplied,this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e})}})}toLoginPage(){this.router.navigate(["login"])}viewProfile(e){this.profileService.setProfile(e),this.router.navigate(["view-tutors"],{queryParams:{page:e.bookingId}})}subjectContains(e){return this.subjectFiltersApplied.includes(e)}priceContains(e){return this.priceFiltersApplied.includes(e)}ratingContains(e){return this.ratingFilterApplied.includes(e)}deleteSubject(e){this.subjectFiltersApplied.includes(e)&&(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(e),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e}))}deletePrice(e){this.priceFiltersApplied.includes(e)&&(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(e),1),this.allFiltersApplied.price.splice(this.priceFiltersApplied.indexOf(e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e}))}deleteRating(e){this.ratingFilterApplied.includes(e)&&(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(e),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e}))}searchBySubject(e){var t=e.target.value;0==this.subjectFiltersApplied.length?(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.subjectFiltersApplied,t)?(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(t),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(t),1),0==this.allFiltersApplied.subjects.length&&(this.allFiltersApplied.show=!1)):(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0),this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e})}searchByPrice(e){var t=e.target.value;0==this.priceFiltersApplied.length?(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.priceFiltersApplied,t)?(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(t),1),this.allFiltersApplied.price.splice(this.allFiltersApplied.price.indexOf(t),1),0==this.allFiltersApplied.price.length&&(this.allFiltersApplied.show=!1)):(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0),this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e})}searchByRatings(e){var t=e.target.value;0==this.ratingFilterApplied.length?(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.ratingFilterApplied,t)?(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(t),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*t),1),0==this.allFiltersApplied.ratings.length&&(this.allFiltersApplied.show=!1)):(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0),this.httpService.applyFilters(this.allFiltersApplied).subscribe(e=>{this.filteredArray=[],this.filteredArray=e})}removeOrNot(e,t,i){for(var n=0,s=0;s<e.length;s++)for(var r=0;r<t.length;r++)if(0!=t[r].localeCompare(i)&&0==e[s].area.localeCompare(t[r])){n=1;break}return 0==n}checkFiltersApplied(e,t){if(e.includes(t))return!0}checkDuplicacyOfObjectInArray(e,t){if(e.filter(e=>JSON.stringify(e)===JSON.stringify(t)).length>0)return!0}clearAllFilters(){window.location.reload()}sort(e){0==this.allFiltersApplied.price.length&&0==this.allFiltersApplied.ratings.length&&0==this.allFiltersApplied.subjects.length?0==e.target.value.localeCompare("priceLowToHigh")?this.searchResults.sort((e,t)=>Number(e.price1)-Number(t.price1)):0==e.target.value.localeCompare("priceHighToLow")?this.searchResults.sort((e,t)=>Number(t.price1)-Number(e.price1)):0==e.target.value.localeCompare("ratingLowToHigh")?this.searchResults.sort((e,t)=>e.rating-t.rating):0==e.target.value.localeCompare("ratingHighToLow")&&this.searchResults.sort((e,t)=>t.rating-e.rating):0==e.target.value.localeCompare("priceLowToHigh")?this.filteredArray.sort((e,t)=>Number(e.price1)-Number(t.price1)):0==e.target.value.localeCompare("priceHighToLow")?this.filteredArray.sort((e,t)=>Number(t.price1)-Number(e.price1)):0==e.target.value.localeCompare("ratingLowToHigh")?this.filteredArray.sort((e,t)=>e.rating-t.rating):0==e.target.value.localeCompare("ratingHighToLow")&&this.filteredArray.sort((e,t)=>t.rating-e.rating)}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(Og),Io(jy),Io(Ny),Io(eT),Io(gf))},e.\u0275cmp=gt({type:e,selectors:[["app-search-results"]],hostBindings:function(e,t){1&e&&Wo("resize",(function(e){return t.getScreenSize(e)}),!1,zi)},decls:402,vars:2,consts:[[1,"page-content"],[1,"wi_full","py_5","full_expert_sec"],[1,"container"],[1,"row"],[1,"col-12"],[1,"page-breadcrumb"],[1,"breadcrumb"],["href","#"],["src","../../assets/images/breadcrumb-home.svg","alt","#"],[1,"active",3,"innerHtml"],[1,"expert_filter"],[1,"col-12","col-md-9","col-lg-7","exprt_sel_fltr"],[1,"filter_sel"],[1,"select2","form-control",3,"change"],["selected","","disabled",""],[4,"ngFor","ngForOf"],[1,"filter_sel","price_filter"],["value","100-199"],["value","200-399"],["value","400-699"],["value","700-999"],["value","1000-1499"],["value","1500-10000"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"col-12","col-md-3","col-lg-4","ml-auto"],[1,"serach_field"],["type","search","placeholder","Search",1,"form-control","expert_srch"],[1,"col-12","availbale_expert"],[1,"total_expert"],[1,"sort_by_exprt"],[1,"pice_select"],[1,"select2"],[1,"expert__available"],[1,"expert__item"],[1,"expert__img"],["src","../../assets/images/expert-thumb-1.png","alt","#"],[1,"expert__txt"],[1,"expert__rtng"],["aria-hidden","true",1,"fa","fa-star"],[1,"expert__price"],[1,"expert__Btn"],["href","",1,"button","exprt_btn","connect_btn"],["href","",1,"button","exprt_btn","profile_btn"],["src","../../assets/images/expert-thumb-2.png","alt","#"],["src","../../assets/images/expert-thumb-3.png","alt","#"],["src","../../assets/images/expert-thumb-4.png","alt","#"],["src","../../assets/images/expert-thumb-5.png","alt","#"],["src","../../assets/images/expert-thumb-6.png","alt","#"],["src","../../assets/images/expert-thumb-7.png","alt","#"],["src","../../assets/images/expert-thumb-8.png","alt","#"],[1,"Page_nav"],[1,"pagination","justify-content-center"],[1,"page-item","disabled"],["href","#","tabindex","-1","aria-disabled","true",1,"page-link"],[1,"fas","fa-angle-left"],[1,"page-item","active"],["href","#",1,"page-link"],[1,"page-item"],[1,"fas","fa-angle-right"]],template:function(e,t){1&e&&(Bo(0,"app-nav-bar"),No(1,"body"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"ul",6),No(9,"li"),No(10,"a",7),Bo(11,"img",8),Vo(),Vo(),Bo(12,"li",9),Vo(),Vo(),No(13,"div",10),No(14,"div",3),No(15,"div",11),No(16,"div",12),No(17,"select",13),Wo("change",(function(e){return t.searchBySubject(e)})),No(18,"option",14),wa(19,"Topic Options"),Vo(),Oo(20,LY,2,1,"option",15),Vo(),Vo(),No(21,"div",16),No(22,"select",13),Wo("change",(function(e){return t.searchByPrice(e)})),No(23,"option",14),wa(24,"Price"),Vo(),No(25,"option",17),wa(26,"100-199"),Vo(),No(27,"option",18),wa(28,"200-399"),Vo(),No(29,"option",19),wa(30,"400-699"),Vo(),No(31,"option",20),wa(32,"700-999"),Vo(),No(33,"option",21),wa(34,"1000-1499"),Vo(),No(35,"option",22),wa(36,"1500-10000"),Vo(),Vo(),Vo(),No(37,"div",12),No(38,"select",13),Wo("change",(function(e){return t.searchByRatings(e)})),No(39,"option",14),wa(40,"Average Reviews"),Vo(),No(41,"option",23),wa(42,"1 & up"),Vo(),No(43,"option",24),wa(44,"2 & up"),Vo(),No(45,"option",25),wa(46,"3 & up"),Vo(),No(47,"option",26),wa(48,"4 & up"),Vo(),Vo(),Vo(),Vo(),No(49,"div",27),No(50,"div",28),Bo(51,"input",29),Vo(),Vo(),No(52,"div",30),No(53,"div",31),wa(54,"120 Experts Available"),Vo(),No(55,"div",32),wa(56,"Sort by "),No(57,"div",33),No(58,"select",34),No(59,"option"),wa(60,"Low to High Price"),Vo(),No(61,"option"),wa(62,"High to Low Price"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(63,"div",35),No(64,"div",36),No(65,"div",37),Bo(66,"img",38),Vo(),No(67,"div",39),No(68,"h6"),wa(69,"Shubham Sharma"),No(70,"span",40),Bo(71,"i",41),wa(72," 4.5"),Vo(),Vo(),No(73,"p"),wa(74,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(75,"div",42),wa(76,"\u20b9100"),No(77,"span"),wa(78,"Per Hour"),Vo(),Vo(),No(79,"div",43),No(80,"a",44),wa(81,"Connect"),Vo(),No(82,"a",45),wa(83,"View Profile"),Vo(),Vo(),Vo(),No(84,"div",36),No(85,"div",37),Bo(86,"img",46),Vo(),No(87,"div",39),No(88,"h6"),wa(89,"Shubham Sharma"),No(90,"span",40),Bo(91,"i",41),wa(92," 4.5"),Vo(),Vo(),No(93,"p"),wa(94,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(95,"div",42),wa(96,"\u20b9100"),No(97,"span"),wa(98,"Per Hour"),Vo(),Vo(),No(99,"div",43),No(100,"a",44),wa(101,"Connect"),Vo(),No(102,"a",45),wa(103,"View Profile"),Vo(),Vo(),Vo(),No(104,"div",36),No(105,"div",37),Bo(106,"img",47),Vo(),No(107,"div",39),No(108,"h6"),wa(109,"Shubham Sharma"),No(110,"span",40),Bo(111,"i",41),wa(112," 4.5"),Vo(),Vo(),No(113,"p"),wa(114,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(115,"div",42),wa(116,"\u20b9100"),No(117,"span"),wa(118,"Per Hour"),Vo(),Vo(),No(119,"div",43),No(120,"a",44),wa(121,"Connect"),Vo(),No(122,"a",45),wa(123,"View Profile"),Vo(),Vo(),Vo(),No(124,"div",36),No(125,"div",37),Bo(126,"img",48),Vo(),No(127,"div",39),No(128,"h6"),wa(129,"Shubham Sharma"),No(130,"span",40),Bo(131,"i",41),wa(132," 4.5"),Vo(),Vo(),No(133,"p"),wa(134,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(135,"div",42),wa(136,"\u20b9100"),No(137,"span"),wa(138,"Per Hour"),Vo(),Vo(),No(139,"div",43),No(140,"a",44),wa(141,"Connect"),Vo(),No(142,"a",45),wa(143,"View Profile"),Vo(),Vo(),Vo(),No(144,"div",36),No(145,"div",37),Bo(146,"img",49),Vo(),No(147,"div",39),No(148,"h6"),wa(149,"Shubham Sharma"),No(150,"span",40),Bo(151,"i",41),wa(152," 4.5"),Vo(),Vo(),No(153,"p"),wa(154,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(155,"div",42),wa(156,"\u20b9100"),No(157,"span"),wa(158,"Per Hour"),Vo(),Vo(),No(159,"div",43),No(160,"a",44),wa(161,"Connect"),Vo(),No(162,"a",45),wa(163,"View Profile"),Vo(),Vo(),Vo(),No(164,"div",36),No(165,"div",37),Bo(166,"img",50),Vo(),No(167,"div",39),No(168,"h6"),wa(169,"Shubham Sharma"),No(170,"span",40),Bo(171,"i",41),wa(172," 4.5"),Vo(),Vo(),No(173,"p"),wa(174,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(175,"div",42),wa(176,"\u20b9100"),No(177,"span"),wa(178,"Per Hour"),Vo(),Vo(),No(179,"div",43),No(180,"a",44),wa(181,"Connect"),Vo(),No(182,"a",45),wa(183,"View Profile"),Vo(),Vo(),Vo(),No(184,"div",36),No(185,"div",37),Bo(186,"img",51),Vo(),No(187,"div",39),No(188,"h6"),wa(189,"Shubham Sharma"),No(190,"span",40),Bo(191,"i",41),wa(192," 4.5"),Vo(),Vo(),No(193,"p"),wa(194,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(195,"div",42),wa(196,"\u20b9100"),No(197,"span"),wa(198,"Per Hour"),Vo(),Vo(),No(199,"div",43),No(200,"a",44),wa(201,"Connect"),Vo(),No(202,"a",45),wa(203,"View Profile"),Vo(),Vo(),Vo(),No(204,"div",36),No(205,"div",37),Bo(206,"img",52),Vo(),No(207,"div",39),No(208,"h6"),wa(209,"Shubham Sharma"),No(210,"span",40),Bo(211,"i",41),wa(212," 4.5"),Vo(),Vo(),No(213,"p"),wa(214,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(215,"div",42),wa(216,"\u20b9100"),No(217,"span"),wa(218,"Per Hour"),Vo(),Vo(),No(219,"div",43),No(220,"a",44),wa(221,"Connect"),Vo(),No(222,"a",45),wa(223,"View Profile"),Vo(),Vo(),Vo(),No(224,"div",36),No(225,"div",37),Bo(226,"img",38),Vo(),No(227,"div",39),No(228,"h6"),wa(229,"Shubham Sharma"),No(230,"span",40),Bo(231,"i",41),wa(232," 4.5"),Vo(),Vo(),No(233,"p"),wa(234,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(235,"div",42),wa(236,"\u20b9100"),No(237,"span"),wa(238,"Per Hour"),Vo(),Vo(),No(239,"div",43),No(240,"a",44),wa(241,"Connect"),Vo(),No(242,"a",45),wa(243,"View Profile"),Vo(),Vo(),Vo(),No(244,"div",36),No(245,"div",37),Bo(246,"img",46),Vo(),No(247,"div",39),No(248,"h6"),wa(249,"Shubham Sharma"),No(250,"span",40),Bo(251,"i",41),wa(252," 4.5"),Vo(),Vo(),No(253,"p"),wa(254,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(255,"div",42),wa(256,"\u20b9100"),No(257,"span"),wa(258,"Per Hour"),Vo(),Vo(),No(259,"div",43),No(260,"a",44),wa(261,"Connect"),Vo(),No(262,"a",45),wa(263,"View Profile"),Vo(),Vo(),Vo(),No(264,"div",36),No(265,"div",37),Bo(266,"img",47),Vo(),No(267,"div",39),No(268,"h6"),wa(269,"Shubham Sharma"),No(270,"span",40),Bo(271,"i",41),wa(272," 4.5"),Vo(),Vo(),No(273,"p"),wa(274,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(275,"div",42),wa(276,"\u20b9100"),No(277,"span"),wa(278,"Per Hour"),Vo(),Vo(),No(279,"div",43),No(280,"a",44),wa(281,"Connect"),Vo(),No(282,"a",45),wa(283,"View Profile"),Vo(),Vo(),Vo(),No(284,"div",36),No(285,"div",37),Bo(286,"img",48),Vo(),No(287,"div",39),No(288,"h6"),wa(289,"Shubham Sharma"),No(290,"span",40),Bo(291,"i",41),wa(292," 4.5"),Vo(),Vo(),No(293,"p"),wa(294,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(295,"div",42),wa(296,"\u20b9100"),No(297,"span"),wa(298,"Per Hour"),Vo(),Vo(),No(299,"div",43),No(300,"a",44),wa(301,"Connect"),Vo(),No(302,"a",45),wa(303,"View Profile"),Vo(),Vo(),Vo(),No(304,"div",36),No(305,"div",37),Bo(306,"img",49),Vo(),No(307,"div",39),No(308,"h6"),wa(309,"Shubham Sharma"),No(310,"span",40),Bo(311,"i",41),wa(312," 4.5"),Vo(),Vo(),No(313,"p"),wa(314,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(315,"div",42),wa(316,"\u20b9100"),No(317,"span"),wa(318,"Per Hour"),Vo(),Vo(),No(319,"div",43),No(320,"a",44),wa(321,"Connect"),Vo(),No(322,"a",45),wa(323,"View Profile"),Vo(),Vo(),Vo(),No(324,"div",36),No(325,"div",37),Bo(326,"img",50),Vo(),No(327,"div",39),No(328,"h6"),wa(329,"Shubham Sharma"),No(330,"span",40),Bo(331,"i",41),wa(332," 4.5"),Vo(),Vo(),No(333,"p"),wa(334,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(335,"div",42),wa(336,"\u20b9100"),No(337,"span"),wa(338,"Per Hour"),Vo(),Vo(),No(339,"div",43),No(340,"a",44),wa(341,"Connect"),Vo(),No(342,"a",45),wa(343,"View Profile"),Vo(),Vo(),Vo(),No(344,"div",36),No(345,"div",37),Bo(346,"img",51),Vo(),No(347,"div",39),No(348,"h6"),wa(349,"Shubham Sharma"),No(350,"span",40),Bo(351,"i",41),wa(352," 4.5"),Vo(),Vo(),No(353,"p"),wa(354,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(355,"div",42),wa(356,"\u20b9100"),No(357,"span"),wa(358,"Per Hour"),Vo(),Vo(),No(359,"div",43),No(360,"a",44),wa(361,"Connect"),Vo(),No(362,"a",45),wa(363,"View Profile"),Vo(),Vo(),Vo(),No(364,"div",36),No(365,"div",37),Bo(366,"img",52),Vo(),No(367,"div",39),No(368,"h6"),wa(369,"Shubham Sharma"),No(370,"span",40),Bo(371,"i",41),wa(372," 4.5"),Vo(),Vo(),No(373,"p"),wa(374,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin."),Vo(),Vo(),No(375,"div",42),wa(376,"\u20b9100"),No(377,"span"),wa(378,"Per Hour"),Vo(),Vo(),No(379,"div",43),No(380,"a",44),wa(381,"Connect"),Vo(),No(382,"a",45),wa(383,"View Profile"),Vo(),Vo(),Vo(),No(384,"div",53),No(385,"ul",54),No(386,"li",55),No(387,"a",56),Bo(388,"i",57),Vo(),Vo(),No(389,"li",58),No(390,"a",59),wa(391,"1"),Vo(),Vo(),No(392,"li",60),No(393,"a",59),wa(394,"2"),Vo(),Vo(),No(395,"li",60),No(396,"a",59),wa(397,"3"),Vo(),Vo(),No(398,"li",60),No(399,"a",59),Bo(400,"i",61),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(401,"app-footer"),Vo()),2&e&&(Ss(12),Mo("innerHtml",t.selectedSubject,Zn),Ss(8),Mo("ngForOf",t.subCategories))},directives:[Lx,vv,Sv,pd,Nx],styles:[""]}),e})();ub(3e3,1e3);let VY=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l){this.ngxAgoraService=e,this.meetingService=t,this.router=i,this.snackbar=n,this.sanitizer=s,this.locationStrategy=r,this.loginService=o,this.httpService=a,this.cookieService=l}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(Io(DU),Io(Vy),Io(Em),Io(UE),Io(ou),Io(kh),Io(jy),Io(Og),Io(Dx))},e.\u0275cmp=gt({type:e,selectors:[["app-test"]],decls:1,vars:0,template:function(e,t){1&e&&Bo(0,"app-login")},directives:[IA],styles:["@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut[_ngcontent-%COMP%]{-webkit-animation-name:fadeOut;animation-name:fadeOut}.local[_ngcontent-%COMP%]{width:100%;height:100%}.pre-meeting-local[_ngcontent-%COMP%]{position:relative;width:100%;height:50vh;border-radius:5px;background-color:#202124;box-shadow:0 1px 2px 0 rgb(60 64 67/30%),0 1px 3px 1px rgb(60 64 67/15%);overflow:hidden}.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-mic-banner[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;margin:auto;padding:10px 20px;border-radius:25px;display:flex;background-color:rgba(32,33,36,.7)}.pre-meeting-local[_ngcontent-%COMP%]   .mic-popup[_ngcontent-%COMP%]{position:absolute;top:12px;width:100%;color:#fff;-webkit-animation-delay:2s;animation-delay:2s;-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-control-buttons[_ngcontent-%COMP%]{outline:none;width:65px;height:62px;border:2px solid #fff;color:#fff;background:none;border-radius:50%;overflow:hidden}.pre-meeting-local[_ngcontent-%COMP%]   .shadow-top[_ngcontent-%COMP%]{position:absolute;top:-7px;height:80px;width:100%;background-image:-webkit-linear-gradient(top,rgba(0,0,0,.7),rgba(0,0,0,.3) 50%,transparent)}.pre-meeting-local[_ngcontent-%COMP%]   .shadow-bottom[_ngcontent-%COMP%]{position:absolute;bottom:-7px;height:80px;width:100%;background-image:-webkit-linear-gradient(bottom,rgba(0,0,0,.7),rgba(0,0,0,.3) 50%,transparent)}.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-control-buttons[_ngcontent-%COMP%]:hover{background:hsla(0,0%,100%,.4)}.pre-meeting-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.pre-meeting-join-button[_ngcontent-%COMP%]{font-size:large;padding-left:30px;padding-right:30px;border-radius:25px}.meeting-header[_ngcontent-%COMP%]{height:100px;background:#fff;width:100%;display:block;float:left;padding:20px 20px 5px}.meeting-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100px;height:8vh;float:left}.meeting-header[_ngcontent-%COMP%]   .account-info-block[_ngcontent-%COMP%]{float:right;display:flex;justify-content:center;align-items:center}.meeting-header[_ngcontent-%COMP%]   .account-info-block[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;box-shadow:0 1px 2px 0 rgb(60 64 67/30%),0 1px 3px 1px rgb(60 64 67/15%)}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (min-device-height:501px) and (-webkit-min-device-pixel-ratio:2){.pre-meeting-local[_ngcontent-%COMP%]   .pre-meeting-control-buttons[_ngcontent-%COMP%]{width:50px;height:50px;margin-right:2vw}}"]}),e})(),BY=(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-blogs"]],decls:208,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","blog_banner"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-md-6"],[1,"banner_content"],[1,"banner_image"],["src","../../../assets/images/blog-graphic.svg","alt","#"],[1,"wi_full","py_5","blog_page"],[1,"row"],[1,"col-12"],[1,"blog_filter"],[1,"col-12","col-md-9","col-lg-7","blog_sel_fltr"],[1,"filter_sel"],[1,"select2","form-control"],[1,"col-12","col-md-3","col-lg-4","ml-auto"],[1,"serach_field"],["type","search","placeholder","Search",1,"form-control","blog_srch"],[1,"blog__wrapper"],[1,"post__item"],[1,"post__img"],["src","../../../assets/images/blog-1.png","alt","#"],[1,"catgry__name"],[1,"post__txt"],[1,"post__date"],[1,"post__Btn"],["href","",1,"button","read_btn"],["src","../../../assets/images/blog-2.png","alt","#"],["src","../../../assets/images/blog-3.png","alt","#"],["src","../../../assets/images/blog-4.png","alt","#"],["src","../../../assets/images/blog-5.png","alt","#"],["src","../../../assets/images/blog-6.png","alt","#"],["src","../../../assets/images/blog-7.png","alt","#"],["src","../../../assets/images/blog-8.png","alt","#"],["src","../../../assets/images/blog-9.png","alt","#"],[1,"Page_nav"],[1,"pagination","justify-content-center"],[1,"page-item","disabled"],["href","#","tabindex","-1","aria-disabled","true",1,"page-link"],[1,"fas","fa-angle-left"],[1,"page-item","active"],["href","#",1,"page-link"],[1,"page-item"],[1,"fas","fa-angle-right"]],template:function(e,t){1&e&&(Bo(0,"app-nav-bar"),No(1,"div",0),No(2,"section",1),No(3,"div",2),No(4,"div",3),No(5,"div",4),No(6,"div",5),No(7,"h1"),wa(8,"Blog"),Vo(),No(9,"p"),wa(10,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum."),Vo(),Vo(),Vo(),No(11,"div",4),No(12,"div",6),Bo(13,"img",7),Vo(),Vo(),Vo(),Vo(),Vo(),No(14,"section",8),No(15,"div",2),No(16,"div",9),No(17,"div",10),No(18,"div",11),No(19,"div",9),No(20,"div",12),No(21,"div",13),No(22,"select",14),No(23,"option"),wa(24,"Category 1"),Vo(),No(25,"option"),wa(26,"Category 2"),Vo(),No(27,"option"),wa(28,"Category 3"),Vo(),Vo(),Vo(),No(29,"div",13),No(30,"select",14),No(31,"option"),wa(32,"By Month"),Vo(),No(33,"option"),wa(34,"3 Months"),Vo(),No(35,"option"),wa(36,"6 Months"),Vo(),No(37,"option"),wa(38,"9 Months"),Vo(),Vo(),Vo(),No(39,"div",13),No(40,"select",14),No(41,"option"),wa(42,"By Year"),Vo(),No(43,"option"),wa(44,"2018"),Vo(),No(45,"option"),wa(46,"2019"),Vo(),No(47,"option"),wa(48,"2020"),Vo(),No(49,"option"),wa(50,"2021"),Vo(),Vo(),Vo(),Vo(),No(51,"div",15),No(52,"div",16),Bo(53,"input",17),Vo(),Vo(),Vo(),Vo(),No(54,"div",18),No(55,"div",19),No(56,"div",20),Bo(57,"img",21),No(58,"div",22),wa(59,"Category 1"),Vo(),Vo(),No(60,"div",23),No(61,"h5"),wa(62,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(63,"div",24),wa(64,"29.07.2021"),Vo(),No(65,"p"),wa(66,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(67,"div",25),No(68,"a",26),wa(69,"Continue Reading"),Vo(),Vo(),Vo(),No(70,"div",19),No(71,"div",20),Bo(72,"img",27),No(73,"div",22),wa(74,"Category 2"),Vo(),Vo(),No(75,"div",23),No(76,"h5"),wa(77,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(78,"div",24),wa(79,"29.07.2021"),Vo(),No(80,"p"),wa(81,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(82,"div",25),No(83,"a",26),wa(84,"Continue Reading"),Vo(),Vo(),Vo(),No(85,"div",19),No(86,"div",20),Bo(87,"img",28),No(88,"div",22),wa(89,"Category 3"),Vo(),Vo(),No(90,"div",23),No(91,"h5"),wa(92,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(93,"div",24),wa(94,"29.07.2021"),Vo(),No(95,"p"),wa(96,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(97,"div",25),No(98,"a",26),wa(99,"Continue Reading"),Vo(),Vo(),Vo(),No(100,"div",19),No(101,"div",20),Bo(102,"img",29),No(103,"div",22),wa(104,"Category 1"),Vo(),Vo(),No(105,"div",23),No(106,"h5"),wa(107,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(108,"div",24),wa(109,"29.07.2021"),Vo(),No(110,"p"),wa(111,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(112,"div",25),No(113,"a",26),wa(114,"Continue Reading"),Vo(),Vo(),Vo(),No(115,"div",19),No(116,"div",20),Bo(117,"img",30),No(118,"div",22),wa(119,"Category 2"),Vo(),Vo(),No(120,"div",23),No(121,"h5"),wa(122,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(123,"div",24),wa(124,"29.07.2021"),Vo(),No(125,"p"),wa(126,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(127,"div",25),No(128,"a",26),wa(129,"Continue Reading"),Vo(),Vo(),Vo(),No(130,"div",19),No(131,"div",20),Bo(132,"img",31),No(133,"div",22),wa(134,"Category 3"),Vo(),Vo(),No(135,"div",23),No(136,"h5"),wa(137,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(138,"div",24),wa(139,"29.07.2021"),Vo(),No(140,"p"),wa(141,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(142,"div",25),No(143,"a",26),wa(144,"Continue Reading"),Vo(),Vo(),Vo(),No(145,"div",19),No(146,"div",20),Bo(147,"img",32),No(148,"div",22),wa(149,"Category 1"),Vo(),Vo(),No(150,"div",23),No(151,"h5"),wa(152,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(153,"div",24),wa(154,"29.07.2021"),Vo(),No(155,"p"),wa(156,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(157,"div",25),No(158,"a",26),wa(159,"Continue Reading"),Vo(),Vo(),Vo(),No(160,"div",19),No(161,"div",20),Bo(162,"img",33),No(163,"div",22),wa(164,"Category 2"),Vo(),Vo(),No(165,"div",23),No(166,"h5"),wa(167,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(168,"div",24),wa(169,"29.07.2021"),Vo(),No(170,"p"),wa(171,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(172,"div",25),No(173,"a",26),wa(174,"Continue Reading"),Vo(),Vo(),Vo(),No(175,"div",19),No(176,"div",20),Bo(177,"img",34),No(178,"div",22),wa(179,"Category 3"),Vo(),Vo(),No(180,"div",23),No(181,"h5"),wa(182,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(183,"div",24),wa(184,"29.07.2021"),Vo(),No(185,"p"),wa(186,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(187,"div",25),No(188,"a",26),wa(189,"Continue Reading"),Vo(),Vo(),Vo(),No(190,"div",35),No(191,"ul",36),No(192,"li",37),No(193,"a",38),Bo(194,"i",39),Vo(),Vo(),No(195,"li",40),No(196,"a",41),wa(197,"1"),Vo(),Vo(),No(198,"li",42),No(199,"a",41),wa(200,"2"),Vo(),Vo(),No(201,"li",42),No(202,"a",41),wa(203,"3"),Vo(),Vo(),No(204,"li",42),No(205,"a",41),Bo(206,"i",43),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(207,"app-footer"))},directives:[Lx,vv,Sv,Nx],styles:[""]}),e})(),FY=(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-resource-videos"]],decls:84,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","video_banner"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-md-6"],[1,"banner_content"],[1,"banner_image"],["src","../../../assets/images/video-graphic.svg","alt","#"],[1,"wi_full","py_5","video_page"],[1,"row"],[1,"col-12"],[1,"video__wrapper"],[1,"video__item"],[1,"video__img"],["src","../../../assets/images/video-1.png","alt","#"],["data-toggle","modal","data-target","#videoPopup",1,"video_btn"],["src","../../../assets/images/play-video.svg"],[1,"video__title"],["src","../../../assets/images/video-2.png","alt","#"],["src","../../../assets/images/video-3.png","alt","#"],["src","../../../assets/images/video-4.png","alt","#"],["src","../../../assets/images/video-5.png","alt","#"],["src","../../../assets/images/video-6.png","alt","#"],["src","../../../assets/images/video-7.png","alt","#"],["src","../../../assets/images/video-8.png","alt","#"],["src","../../../assets/images/video-9.png","alt","#"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"h1"),wa(9,"Videos"),Vo(),No(10,"p"),wa(11,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum."),Vo(),Vo(),Vo(),No(12,"div",4),No(13,"div",6),Bo(14,"img",7),Vo(),Vo(),Vo(),Vo(),Vo(),No(15,"section",8),No(16,"div",2),No(17,"div",9),No(18,"div",10),No(19,"div",11),No(20,"div",12),No(21,"div",13),Bo(22,"img",14),No(23,"button",15),Bo(24,"img",16),Vo(),No(25,"div",17),wa(26,"Mauris in erat justo"),Vo(),Vo(),Vo(),No(27,"div",12),No(28,"div",13),Bo(29,"img",18),No(30,"button",15),Bo(31,"img",16),Vo(),No(32,"div",17),wa(33,"Class aptent taciti sociosqu"),Vo(),Vo(),Vo(),No(34,"div",12),No(35,"div",13),Bo(36,"img",19),No(37,"button",15),Bo(38,"img",16),Vo(),No(39,"div",17),wa(40," Sed non mauris vitae erat"),Vo(),Vo(),Vo(),No(41,"div",12),No(42,"div",13),Bo(43,"img",20),No(44,"button",15),Bo(45,"img",16),Vo(),No(46,"div",17),wa(47,"Mauris in erat justo"),Vo(),Vo(),Vo(),No(48,"div",12),No(49,"div",13),Bo(50,"img",21),No(51,"button",15),Bo(52,"img",16),Vo(),No(53,"div",17),wa(54,"Class aptent taciti sociosqu"),Vo(),Vo(),Vo(),No(55,"div",12),No(56,"div",13),Bo(57,"img",22),No(58,"button",15),Bo(59,"img",16),Vo(),No(60,"div",17),wa(61," Sed non mauris vitae erat"),Vo(),Vo(),Vo(),No(62,"div",12),No(63,"div",13),Bo(64,"img",23),No(65,"button",15),Bo(66,"img",16),Vo(),No(67,"div",17),wa(68,"Mauris in erat justo"),Vo(),Vo(),Vo(),No(69,"div",12),No(70,"div",13),Bo(71,"img",24),No(72,"button",15),Bo(73,"img",16),Vo(),No(74,"div",17),wa(75,"Class aptent taciti sociosqu"),Vo(),Vo(),Vo(),No(76,"div",12),No(77,"div",13),Bo(78,"img",25),No(79,"button",15),Bo(80,"img",16),Vo(),No(81,"div",17),wa(82," Sed non mauris vitae erat"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(83,"app-footer"),Vo())},directives:[Lx,Nx],styles:[""]}),e})(),jY=(()=>{class e{constructor(){}ngOnInit(){scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-resource-events"]],decls:117,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","event_banner"],[1,"container"],[1,"row","align-items-center"],[1,"col-12","col-md-6"],[1,"banner_content"],[1,"banner_image"],["src","../../../assets/images/event-graphic.svg","alt","#"],[1,"wi_full","py_5","events_page","pt-0"],[1,"row"],[1,"col-12"],[1,"event__wrapper"],[1,"sec__title"],[1,"event__item"],[1,"event__img"],["src","../../../assets/images/event-1.png","alt","#"],[1,"event__place"],[1,"post__txt"],[1,"post__date"],[1,"post__Btn"],["data-toggle","modal","data-target","#RegisterPopup",1,"button","event_btn"],["src","../../../assets/images/event-2.png","alt","#"],["src","../../../assets/images/event-3.png","alt","#"],["href","",1,"button","event_btn"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"h1"),wa(9,"Events"),Vo(),No(10,"p"),wa(11,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum."),Vo(),Vo(),Vo(),No(12,"div",4),No(13,"div",6),Bo(14,"img",7),Vo(),Vo(),Vo(),Vo(),Vo(),No(15,"section",8),No(16,"div",2),No(17,"div",9),No(18,"div",10),No(19,"div",11),No(20,"div",12),No(21,"h2"),wa(22,"Upcoming Events"),Vo(),Vo(),No(23,"div",13),No(24,"div",14),Bo(25,"img",15),No(26,"div",16),wa(27,"Delhi, India"),Vo(),Vo(),No(28,"div",17),No(29,"h5"),wa(30,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(31,"div",18),wa(32,"29.07.2021 | 09:00 am"),Vo(),No(33,"p"),wa(34,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(35,"div",19),No(36,"button",20),wa(37,"Register"),Vo(),Vo(),Vo(),No(38,"div",13),No(39,"div",14),Bo(40,"img",21),No(41,"div",16),wa(42,"Delhi, India"),Vo(),Vo(),No(43,"div",17),No(44,"h5"),wa(45,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(46,"div",18),wa(47,"29.07.2021 | 09:00 am"),Vo(),No(48,"p"),wa(49,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(50,"div",19),No(51,"button",20),wa(52,"Register"),Vo(),Vo(),Vo(),No(53,"div",13),No(54,"div",14),Bo(55,"img",22),No(56,"div",16),wa(57,"Delhi, India"),Vo(),Vo(),No(58,"div",17),No(59,"h5"),wa(60,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(61,"div",18),wa(62,"29.07.2021 | 09:00 am"),Vo(),No(63,"p"),wa(64,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(65,"div",19),No(66,"button",20),wa(67,"Register"),Vo(),Vo(),Vo(),No(68,"div",12),No(69,"h2"),wa(70,"Past Events"),Vo(),Vo(),No(71,"div",13),No(72,"div",14),Bo(73,"img",15),No(74,"div",16),wa(75,"Delhi, India"),Vo(),Vo(),No(76,"div",17),No(77,"h5"),wa(78,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(79,"div",18),wa(80,"29.07.2021 | 09:00 am"),Vo(),No(81,"p"),wa(82,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(83,"div",19),No(84,"a",23),wa(85,"View Gallery"),Vo(),Vo(),Vo(),No(86,"div",13),No(87,"div",14),Bo(88,"img",21),No(89,"div",16),wa(90,"Delhi, India"),Vo(),Vo(),No(91,"div",17),No(92,"h5"),wa(93,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(94,"div",18),wa(95,"29.07.2021 | 09:00 am"),Vo(),No(96,"p"),wa(97,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(98,"div",19),No(99,"a",23),wa(100,"View Gallery"),Vo(),Vo(),Vo(),No(101,"div",13),No(102,"div",14),Bo(103,"img",22),No(104,"div",16),wa(105,"Delhi, India"),Vo(),Vo(),No(106,"div",17),No(107,"h5"),wa(108,"Proin gravida nibh vel velit auctor aliquet."),Vo(),No(109,"div",18),wa(110,"29.07.2021 | 09:00 am"),Vo(),No(111,"p"),wa(112,"Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum..."),Vo(),Vo(),No(113,"div",19),No(114,"a",23),wa(115,"View Gallery"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(116,"app-footer"),Vo())},directives:[Lx,Nx],styles:[""]}),e})();const HY={anchorScrolling:"enabled",useHash:!0},UY=[{path:"home",component:kU,children:[{path:"profile",component:bG},{path:"student-dashboard",component:GG},{path:"tutor-dashboard",component:YH},{path:"student-profile",component:sY},{path:"bookings",component:yH},{path:"student-bookings",component:OG},{path:"tutor-schedule",component:TG},{path:"session-notes",component:xG},{path:"recordings",component:wG},{path:"knowledge-base",component:AU},{path:"experts",component:ZH}]},{path:"",component:TA},{path:"how-it-works",component:kA},{path:"search-results",component:NY},{path:"view-tutors",component:nA},{path:"login",component:IA},{path:"sign-up",component:HA},{path:"meeting",component:zq},{path:"test",component:VY},{path:"reset-password",component:RY},{path:"cancel-booking",component:Dy},{path:"reschedule-booking",component:vY},{path:"admin",component:Xm,children:[{path:"categories",component:_y},{path:"analytics",component:Dg}]},{path:"faq",component:xA},{path:"about-us",component:rA},{path:"contact-us",component:RA},{path:"privacy-policy",component:(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-privacy-policy"]],decls:172,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","privacy_sec"],[1,"container"],[1,"row"],[1,"col-12","col-md-4","col-lg-3"],[1,"policy_Left_s"],[1,"MenusNav_Style"],[1,"active"],["routerLink","/privacy-policy",1,"Link_Styled"],[1,""],["routerLink","/terms-and-conditions",1,"Link_Styled"],["routerLink","/refund-policy",1,"Link_Styled"],[1,"col-12","col-md-8","col-lg-9"],[1,"policy_Right_s"],[1,"policy_wrapper"],[1,"policy_Content_table"],[1,"table_list"],["id","Table_Nav"],["href","#Table1",1,"p_T_Link"],["href","#Table2"],["href","#Table3"],["href","#Table4"],["href","#Table5"],["href","#Table6"],["href","#Table7"],["href","#Table8"],["href","#Table9"],["href","#Table10"],["href","#Table11"],["href","#Table12"],["href","#Table13"],["href","#Table14"],[1,"table_Content"],["id","Table1",1,"section_wrap"],["id","Table2",1,"section_wrap"],["id","Table3",1,"section_wrap"],["id","Table4",1,"section_wrap"],["id","Table5",1,"section_wrap"],["id","Table6",1,"section_wrap"],["id","Table7",1,"section_wrap"],["id","Table8",1,"section_wrap"],["id","Table9",1,"section_wrap"],["id","Table10",1,"section_wrap"],["id","Table11",1,"section_wrap"],["id","Table12",1,"section_wrap"],["id","Table13",1,"section_wrap"],["id","Table14",1,"section_wrap"],[1,"btn_block"],["href","",1,"button","contact_btn"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"ul",6),No(9,"li",7),No(10,"a",8),No(11,"span"),wa(12,"Privacy Policy"),Vo(),Vo(),Vo(),No(13,"li",9),No(14,"a",10),No(15,"span"),wa(16,"Terms and Conditions"),Vo(),Vo(),Vo(),No(17,"li",9),No(18,"a",11),No(19,"span"),wa(20,"Refund Policy"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(21,"div",12),No(22,"div",13),No(23,"div",14),No(24,"h2"),wa(25,"Privacy Policy"),Vo(),No(26,"p"),wa(27,"We value your trust. To honour that trust, FellowGenius adheres to ethical standards in gathering, using, and safeguarding any information you provide. Think and Learn Private Limited (operating under the brand name FELLOWGENIUS), is a leading EdTech company, incorporated in India, for imparting learning. This privacy policy governs your use of the application 'FellowGenius - The Learning App' ('Application'), www. FellowGenius.com ('Website') and the other associated applications, products, websites and services managed by the Company. Please read this privacy policy ('Policy') carefully before using the Application, Website, our services and products, along with the Terms of Use ('ToU') provided on the Application and the Website. Your use of the Website, Application, or services in connection with the Application, Website or products ('Services'), or registrations with us through any modes or usage of any products including through SD cards, tablets or other storage/transmitting device shall signify your acceptance of this Policy and your agreement to be legally bound by the same. If you do not agree with the terms of this Policy, do not use the Website, Application our products or avail any of our Services."),Vo(),No(28,"div",15),No(29,"div",16),No(30,"h4"),wa(31,"Table of contents"),Vo(),No(32,"ul",17),No(33,"li",7),No(34,"a",18),wa(35,"A. User Provided Information"),Vo(),Vo(),No(36,"li",9),No(37,"a",19),wa(38,"B. Automatically Collected Information"),Vo(),Vo(),No(39,"li",9),No(40,"a",20),wa(41,"C. Use of your Personal Information"),Vo(),Vo(),No(42,"li",9),No(43,"a",21),wa(44,"D. Access to your Personal Information"),Vo(),Vo(),No(45,"li",9),No(46,"a",22),wa(47,"E. Cookies"),Vo(),Vo(),No(48,"li",9),No(49,"a",23),wa(50,"F. Links"),Vo(),Vo(),No(51,"li",9),No(52,"a",24),wa(53,"G. Alerts"),Vo(),Vo(),No(54,"li",9),No(55,"a",25),wa(56,"H. Public Forums"),Vo(),Vo(),No(57,"li",9),No(58,"a",26),wa(59,"I. Security"),Vo(),Vo(),No(60,"li",9),No(61,"a",27),wa(62,"J. How Long Do We Retain User Data?"),Vo(),Vo(),No(63,"li",9),No(64,"a",28),wa(65,"K. Log information"),Vo(),Vo(),No(66,"li",9),No(67,"a",29),wa(68,"L. User communications"),Vo(),Vo(),No(69,"li",9),No(70,"a",30),wa(71,"M. Changes to this Statement"),Vo(),Vo(),No(72,"li",9),No(73,"a",31),wa(74,"N. Your Consent"),Vo(),Vo(),Vo(),Vo(),No(75,"div",32),No(76,"div",33),No(77,"h3"),wa(78,"A. User Provided Information"),Vo(),No(79,"p"),wa(80,"The Application/Website/Services/products obtains the information you provide when you download and register for the Application or Services or products. When you register with us, you generally provide (a) your name, age, email address, location, phone number and password; (b) transaction-related information, such as when you make purchases, respond to any offers, or download or use applications from us; (c) information you provide us when you contact us for help; (d) information you enter into our system when using the Application/Services/products, such as while asking doubts and participating in discussions. The said information collected from the users could be categorized as \u201cPersonal Information\u201d, \u201cSensitive Personal Information\u201d and \u201cAssociated Information\u201d. Personal Information, Sensitive Personal Information and Associated Information (each as individually defined under this Information Technology (Reasonable security practices and procedures and sensitive personal data or information) Rules, 2011 (the \u201cData Protection Rules\u201d)) shall collectively be referred to as 'Information' in this Policy. We may use the Information to contact you from time to time, to provide you with the Services, important information, required notices and marketing promotions. We will ask you when we need more information that personally identifies you (personal information) or allows us to contact you. We will not differentiate between who is using the device to access the Application, Website or Services or products, so long as the log in/access credentials match with yours. To make the best use of the Application/Website/Services/products and enable your Information to be captured accurately on the Application/Website/Services/products, it is essential that you have logged in using your own credentials. We will, always, provide the option to you to not provide the Personal Information or Sensitive Personal Information, which we seek from you. Further, you shall, at any time while using the Application/Services/products, also have an option to withdraw your consent given earlier to us to use such Personal Information or Sensitive Personal Information. Such withdrawal of the consent is required to be sent in writing to us at the contact details provided in this Policy below. In such event, however, the Company fully reserves the right not to allow further usage of the Application or provide any Services/products thereunder to you."),Vo(),Vo(),No(81,"div",34),No(82,"h3"),wa(83,"B. Automatically Collected Information"),Vo(),No(84,"p"),wa(85,"In addition, the Application/products/Services may collect certain information automatically, including, but not limited to, the type of mobile device you use, your mobile devices unique device ID, the IP address of your mobile device, your mobile operating system, the type of mobile Internet browsers you use, and information about the way you use the Application/Services/products. As is true of most Mobile applications, we also collect other relevant information as per the permissions that you provide. We use an outside credit card processing company to bill you for goods and services. These companies do not retain, share, store or use personally identifiable information for any other purpose."),Vo(),Vo(),No(86,"div",35),No(87,"h3"),wa(88,"C. Use of your Personal Information"),Vo(),No(89,"p"),wa(90,"We use the collected Information to analyse trends, to conduct research, to administer the Application/Services and products, to learn about each user's learning patterns and movements around the Application/Services and products and to gather demographic information and usage behaviour about our user base. Aggregated and individual, anonymized and non-anonymized data may periodically be transmitted to external service providers to help us improve the Application, products and our Services. We will share your information with third parties only in the ways that are described below in this Policy. We may use the individual data and behaviour patterns combined with personal information to provide you with personalized content, and better your learning objectives. Third parties provide certain services which we may use to analyse the data and information to personalize, drive insights and help us better your experience or reach out to you with more value-added applications, products, information and services. However, these third-party companies do not have any independent right to share this information. We do not sell, trade or share your Information to any third party (except subsidiaries/affiliates of the Company for related offerings) unless, we have been expressly authorized by you either in writing or electronically to do so. We may at times provide aggregate statistics about our customers, traffic patterns, and related site information to reputable third parties, however this information when disclosed will be in an aggregate form and does not contain any of your Personally Identifiable Information. FellowGenius will occasionally send email notices, messages or contact you to communicate about our Services, products and benefits, as they are considered an essential part of the Services/products you have chosen. We may disclose Information:"),Vo(),No(91,"ul"),No(92,"li"),No(93,"span"),wa(94,"as required by law, such as to comply with a subpoena, or similar legal process"),Vo(),Vo(),No(95,"li"),No(96,"span"),wa(97,"to enforce applicable ToU, including investigation of potential violations thereof"),Vo(),Vo(),No(98,"li"),No(99,"span"),wa(100,"when we believe in good faith that disclosure is necessary to protect our rights, protect your safety or the safety of others, investigate fraud, address security or technical issues or respond to a government request"),Vo(),Vo(),No(101,"li"),No(102,"span"),wa(103,"with our trusted services providers who work on our behalf, do not have an independent use of the information we disclose to them, and have agreed to adhere to the rules set forth in this Policy"),Vo(),Vo(),No(104,"li"),No(105,"span"),wa(106,"to protect against imminent harm to the rights, property or safety of the Application/Website/ Think and Learn Private Limited or its users or the public as required or permitted by law"),Vo(),Vo(),No(107,"li"),No(108,"span"),wa(109,"with third party service providers to personalize the Application/Website/Services/products for a better user experience and to perform behavioural analysis"),Vo(),Vo(),No(110,"li"),No(111,"span"),wa(112,"Any portion of the Information containing personal data relating to minors provided by you shall be deemed to be given with the consent of the minor's legal guardian. Such consent is deemed to be provided by your registration with us."),Vo(),Vo(),Vo(),Vo(),No(113,"div",36),No(114,"h3"),wa(115,"D. Access to your Personal Information"),Vo(),No(116,"p"),wa(117,"We will provide you with the means to ensure that your Personal Information is correct and current. If you have filled out a user profile, we will provide an obvious way for you to access and change your profile from our Application/Services/Website/products. We adopt reasonable security measures to protect your password from being exposed or disclosed to anyone."),Vo(),Vo(),No(118,"div",37),No(119,"h3"),wa(120,"E. Cookies"),Vo(),No(121,"p"),wa(122,"We send cookies (small files containing a string of characters) to your computer, thereby uniquely identifying your browser. Cookies are used to track your preferences, help you login faster, and aggregated to determine user trends. This data is used to improve our offerings, such as providing more content in areas of greater interest to most users. Most browsers are initially set up to accept cookies, but you can reset your browser to refuse all cookies or to indicate when a cookie is being sent. Some of our features and services may not function properly if your cookies are disabled."),Vo(),Vo(),No(123,"div",38),No(124,"h3"),wa(125,"F. Links"),Vo(),No(126,"p"),wa(127,"We may present links in a format that enables us to keep track of whether these links have been followed. We use this information to improve our customized content. Clicking on links may take you to sites outside our domain. We are not responsible for the privacy practices of other web sites. We encourage our users to be aware when they leave our site to read the privacy statements of each web site that collects personally identifiable information. This Privacy Policy applies solely to information collected by our website."),Vo(),Vo(),No(128,"div",39),No(129,"h3"),wa(130,"G. Alerts"),Vo(),No(131,"p"),wa(132,"We may alert you by email or phone (through SMS/call) to inform you about new service offerings of the Company and its subsidiaries/affiliates or other information which we feel might be useful for you, through the Company or its subsidiaries/affiliates."),Vo(),Vo(),No(133,"div",40),No(134,"h3"),wa(135,"H. Public Forums"),Vo(),No(136,"p"),wa(137,"When you use certain features on our website like the discussion forums and you post or share your personal information such as comments, messages, files, photos, will be available to all users, and will be in the public domain. All such sharing of information is done at your own risk. Please keep in mind that if you disclose personal information in your profile or when posting on our forums this information may become publicly available."),Vo(),Vo(),No(138,"div",41),No(139,"h3"),wa(140,"I. Security"),Vo(),No(141,"p"),wa(142,"We are concerned about safeguarding the confidentiality of your Information. We provide physical, electronic, and procedural safeguards to protect Information we process and maintain. For example, we limit access to this Information to authorized employees only who need to know that information to operate, develop or improve our Application/Services/products/Website. Please be aware that, although we endeavour to provide reasonable security for information we process and maintain, no security system can prevent all potential security breaches."),Vo(),Vo(),No(143,"div",42),No(144,"h3"),wa(145,"J. How Long Do We Retain User Data?"),Vo(),No(146,"p"),wa(147,"Currently, we plan to retain user data while an account is active and for at least three years afterward. We may alter this practice according to legal and business requirements. For example, we may lengthen the retention period for some data if needed to comply with law or voluntary codes of conduct. Unless otherwise prohibited, we may shorten the retention period for some types of data if needed to free up storage space."),Vo(),Vo(),No(148,"div",43),No(149,"h3"),wa(150,"K. Log information"),Vo(),No(151,"p"),wa(152,"When you access our website, our servers automatically record information that your browser sends whenever you visit a website. These server logs may include information such as your web request, internet protocol address, browser type, browser language, the date and time of your request and one or more cookies that may uniquely identify your browser."),Vo(),Vo(),No(153,"div",44),No(154,"h3"),wa(155,"L. User communications"),Vo(),No(156,"p"),wa(157,"When you send an email or other communication to us, we may retain those communications to process your inquiries, respond to your requests and improve our Services."),Vo(),Vo(),No(158,"div",45),No(159,"h3"),wa(160,"M. Changes to this Statement"),Vo(),No(161,"p"),wa(162,"As the Company evolves, our privacy policy will need to evolve as well to cover new situations. You are advised to review this Policy regularly for any changes, as continued use is deemed approval of all changes."),Vo(),Vo(),No(163,"div",46),No(164,"h3"),wa(165,"N. Your Consent"),Vo(),No(166,"p"),wa(167,"We believe that every user of our Application/Services/products/Website must be able to provide an informed consent prior to providing any Information required for the use of the Application/Services/products/Website. By registering with us, you are expressly consenting to our collection, processing, storing, disclosing and handling of your information as set forth in this Policy now and as amended by us. Processing, your information in any way, including, but not limited to, collecting, storing, deleting, using, combining, sharing, transferring and disclosing information, all of which activities will take place in India. If you reside outside India your information will be transferred, processed and stored in accordance with the applicable data protection laws of India."),Vo(),Vo(),No(168,"div",47),No(169,"a",48),wa(170,"Contact Us"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(171,"app-footer"),Vo())},directives:[Lx,xm,Nx],styles:[""]}),e})()},{path:"terms-and-conditions",component:Vx},{path:"refund-policy",component:(()=>{class e{constructor(){}ngOnInit(){window.scroll(0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=gt({type:e,selectors:[["app-refund-policy"]],decls:29,vars:0,consts:[[1,"page-content"],[1,"wi_full","py_5","privacy_sec"],[1,"container"],[1,"row"],[1,"col-12","col-md-4","col-lg-3"],[1,"policy_Left_s"],[1,"MenusNav_Style"],[1,""],["routerLink","/privacy-policy",1,"Link_Styled"],["routerLink","/terms-and-conditions",1,"Link_Styled"],[1,"active"],["routerLink","/refund-policy",1,"Link_Styled"],[1,"col-12","col-md-8","col-lg-9"],[1,"policy_Right_s"],[1,"refund_wrapper"]],template:function(e,t){1&e&&(No(0,"body"),Bo(1,"app-nav-bar"),No(2,"div",0),No(3,"section",1),No(4,"div",2),No(5,"div",3),No(6,"div",4),No(7,"div",5),No(8,"ul",6),No(9,"li",7),No(10,"a",8),No(11,"span"),wa(12,"Privacy Policy"),Vo(),Vo(),Vo(),No(13,"li",7),No(14,"a",9),No(15,"span"),wa(16,"Terms and Conditions"),Vo(),Vo(),Vo(),No(17,"li",10),No(18,"a",11),No(19,"span"),wa(20,"Refund Policy"),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),No(21,"div",12),No(22,"div",13),No(23,"div",14),No(24,"h2"),wa(25,"Refund Policy"),Vo(),No(26,"p"),wa(27,"For return of product(s) damaged at the time of delivery, the shipping charges shall be borne by the Company. However, for return any of the product(s) for any other reasons, it shall be the responsibility of the User to arrange for the return of such cancelled product(s) and the shipping charges shall be borne by such User. (b)We request You not to accept any product package that seems to be tampered with, opened or damaged at the time of delivery. The products must be returned in the same condition as delivered by the Company. Any products returned showing signs of any use or damage in any manner shall not be accepted for return. (c)All requests for return of products must be placed within 15 (fifteen) days from the date of delivery. Please note that no refunds shall be claimed or will be entertained post 15 (fifteen) days from the date of delivery."),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Vo(),Bo(28,"app-footer"),Vo())},directives:[Lx,xm,Nx],styles:[""]}),e})()},{path:"blogs",component:BY},{path:"resource-videos",component:FY},{path:"resource-events",component:jY}];let qY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Hm.forRoot(UY,HY)],Hm]}),e})(),WY=(()=>{class e{constructor(e,t,i,n,s,r,o,a,l,c){this.router=e,this.meetingService=t,this.loginService=i,this.tutorService=n,this.dialog=s,this.httpService=r,this.studentService=o,this.cookieService=a,this.breakpointObserver=l,this.authService=c,this.checked=!1,this.studentProfile=new By,this.tutorProfile=new oT,this.tutorProfileDetails=new Iy,this.studentLoginDetails=new Fy,this.myControl=new Fv,this.profilePictureUrl="../../../assets/images/default-user-image.png"}ngOnInit(){this.authService.isTokenValid()&&(this.loginType=this.loginService.getLoginType(),this.loginType?this.authService.autoAuthUser():this.handleRefresh())}handleRefresh(){this.authService.autoAuthUser()}}return e.\u0275fac=function(t){return new(t||e)(Io(Em),Io(Vy),Io(jy),Io(aT),Io(eT),Io(Og),Io(Hy),Io(Dx),Io(OE),Io(vk))},e.\u0275cmp=gt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&Bo(0,"router-outlet")},directives:[Im],styles:[".e-schedule-dialog[_ngcontent-%COMP%]   .e-numeric.e-control-wrapper.e-input-group[_ngcontent-%COMP%]   .e-input-group-icon[_ngcontent-%COMP%]{pointer-events:none}.e-schedule-dialog[_ngcontent-%COMP%]   .e-all-day-time-zone-row[_ngcontent-%COMP%]{display:none}"]}),e})(),zY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[Mb]]}),e})(),GY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[W_],imports:[[zY,zT],zY,zT]}),e})();const YY=new He("mat-chips-default-options"),$Y={separatorKeyCodes:[13]};let KY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[W_,{provide:YY,useValue:$Y}]}),e})(),XY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[B_],B_]}),e})(),JY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)}}),e})(),QY=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[JY,Z_,B_,Uw],JY,B_]}),e})(),ZY=(()=>{class e{constructor(e){this.cookieService=e,this.invalidUrls=["https://backend.fellowgenius.com/fellowGenius/meeting/sendEmail","https://backend.fellowgenius.com/fellowGenius/registerUser","https://backend.fellowgenius.com/fellowGenius/registerSocialLogin","https://backend.fellowgenius.com/authenticate","https://backend.fellowgenius.com/fellowgenius/fetchTutorList"]}intercept(e,t){var i=this.cookieService.get("token");return this.isUrlValid(e.url)?(""!=i&&(e=e.clone({setHeaders:{Authorization:"Bearer "+i}})),t.handle(e)):t.handle(e)}isUrlValid(e){return!this.invalidUrls.includes(e)}}return e.\u0275fac=function(t){return new(t||e)(Je(Dx))},e.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),e$=(()=>{class e{constructor(e){this.eventManager=e,this.resizeSubject=new x,this.eventManager.addGlobalEventListener("window","resize",this.onResize.bind(this)),this.eventManager.addGlobalEventListener("window","onload",this.onLoaded.bind(this))}get onResize$(){return this.resizeSubject.asObservable()}onResize(e){this.resizeSubject.next(e.target)}onLoaded(e){this.windowWidth=e.target}}return e.\u0275fac=function(t){return new(t||e)(Je(Ud))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})(),t$=(()=>{class e{constructor(e){this.errorHandler=e}log(e,...t){kn()&&console.log(e,...t)}error(e){this.errorHandler.handleError(e)}warn(e,...t){console.warn(e,...t)}}return e.\u0275fac=function(t){return new(t||e)(Je(mn))},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})();const i$=new He("WindowToken");class n${get nativeWindow(){throw new Error("Not implemented.")}}const s$=[{provide:n$,useClass:(()=>{class e extends n${constructor(){super()}get nativeWindow(){return window}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})()},{provide:i$,useFactory:function(e,t){return Rd(t)?e.nativeWindow:{setTimeout:(e,t)=>{},clearTimeout:e=>{}}},deps:[n$,Cc]}],r$=new He("DocumentToken");class o${get nativeDocument(){throw new Error("Not implemented.")}}const a$=[{provide:o$,useClass:(()=>{class e extends o${constructor(){super()}get nativeDocument(){return document}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=ue({token:e,factory:e.\u0275fac}),e})()},{provide:r$,useFactory:function(e,t){return Rd(t)?e.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[o$,Cc]}];let l$=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[s$,e$,a$,t$],imports:[[Id]]}),e})();class c${constructor(e){this.startScrollPosition=0,this.interruptListenersAttached=!1,this.timer=null,e.scrollViews&&0!==e.scrollViews.length?this.isInlineScrolling=!0:(e.scrollViews=[e.document.documentElement,e.document.body,e.document.body.parentNode],this.isInlineScrolling=!1),this.pageScrollOptions=e}static getScrollingTargetPosition(e,t){const i=e.document.body,n=e.document.documentElement,s=e.document.defaultView&&e.document.defaultView.pageYOffset||n.scrollTop||i.scrollTop,r=e.document.defaultView&&e.document.defaultView.pageXOffset||n.scrollLeft||i.scrollLeft,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0;if(null==t)return{top:s,left:r};const l=t.getBoundingClientRect(),c=l.left+r-a;return{top:Math.round(l.top+s-o),left:Math.round(c)}}static getInlineScrollingTargetPosition(e,t){const i={top:t.offsetTop,left:t.offsetLeft};if(e.advancedInlineOffsetCalculation&&1===e.scrollViews.length){const n={top:0,left:0},s=t.ownerDocument.defaultView;let r=!1,o=t.parentElement;for(;!r&&null!=o;)"relative"===s.getComputedStyle(o).getPropertyValue("position")&&(n.top+=o.offsetTop,n.left+=o.offsetLeft),o=o.parentElement,r=o===e.scrollViews[0];r&&(i.top+=n.top,i.left+=n.left)}return i}getScrollPropertyValue(e){return this.pageScrollOptions.verticalScrolling?e.scrollTop:e.scrollLeft}getScrollClientPropertyValue(e){return this.pageScrollOptions.verticalScrolling?e.clientHeight:e.clientWidth}extractScrollTargetPosition(){const e=this.getScrollTargetElement();return null==e?{top:NaN,left:NaN}:this.isInlineScrolling?c$.getInlineScrollingTargetPosition(this.pageScrollOptions,e):c$.getScrollingTargetPosition(this.pageScrollOptions,e)}getCurrentOffset(){return this.pageScrollOptions.scrollOffset}setScrollPosition(e){return this.pageScrollOptions.scrollViews.reduce((t,i)=>{const n=this.getScrollPropertyValue(i);if(i&&null!=n){const t=Math.abs(n-e),s=t<this.pageScrollOptions._minScrollDistance;if(this.pageScrollOptions.verticalScrolling?i.scrollTop=e:i.scrollLeft=e,s||t>Math.abs(this.getScrollPropertyValue(i)-e))return!0}return t},!1)}fireEvent(e){this.pageScrollOptions.scrollFinishListener&&this.pageScrollOptions.scrollFinishListener.emit(e)}attachInterruptListeners(e){this.interruptListenersAttached&&this.detachInterruptListeners(),this.interruptListener=t=>{e.report(t,this)},this.pageScrollOptions.interruptEvents.forEach(e=>this.pageScrollOptions.document.body.addEventListener(e,this.interruptListener)),this.interruptListenersAttached=!0}detachInterruptListeners(){this.pageScrollOptions.interruptEvents.forEach(e=>this.pageScrollOptions.document.body.removeEventListener(e,this.interruptListener)),this.interruptListenersAttached=!1}getScrollTargetElement(){if("string"==typeof this.pageScrollOptions.scrollTarget){const e=this.pageScrollOptions.scrollTarget;return null!==e.match(/^#[^\s]+$/g)?this.pageScrollOptions.document.getElementById(e.substr(1)):this.pageScrollOptions.document.querySelector(e)}return this.pageScrollOptions.scrollTarget}}const h$=new He("ngxps_config"),d$={_interval:10,_minScrollDistance:2,_logLevel:1,namespace:"default",verticalScrolling:!0,duration:1250,scrollOffset:0,advancedInlineOffsetCalculation:!1,interruptEvents:["mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"],interruptKeys:[" ","Escape","Tab","Enter","PageUp","PageDown","Home","End","ArrowUp","ArrowRight","ArrowLeft","ArrowDown"],interruptible:!0,scrollInView:!0,easingLogic:(e,t,i,n)=>i*e/n+t};let u$=(()=>{class e{constructor(e){this.runningInstances=[],this.onInterrupted={report:(e,t)=>{if(!t.pageScrollOptions.interruptible)return;let i=!0;"keyup"===e.type?-1===this.config.interruptKeys.indexOf(e.key)&&(i=!1):"mousedown"===e.type&&(t.pageScrollOptions.scrollViews.some(t=>t.contains(e.target))||(i=!1)),i&&this.stopAll(t.pageScrollOptions.namespace)}},this.config=Object.assign(Object.assign({},d$),e)}stopInternal(e,t){const i=this.runningInstances.indexOf(t);return i>=0&&this.runningInstances.splice(i,1),t.interruptListenersAttached&&t.detachInterruptListeners(),!!t.timer&&(clearInterval(t.timer),t.timer=void 0,t.fireEvent(!e),!0)}create(e){return new c$(Object.assign(Object.assign({},this.config),e))}start(e){if(e.pageScrollOptions=Object.assign(Object.assign({},this.config),e.pageScrollOptions),this.stopAll(e.pageScrollOptions.namespace),null===e.pageScrollOptions.scrollViews||0===e.pageScrollOptions.scrollViews.length)return void((this.config._logLevel>=2||this.config._logLevel>=1&&kn())&&console.warn("No scrollViews specified, thus ngx-page-scroll does not know which DOM elements to scroll"));let t=!1,i=e.getScrollClientPropertyValue(e.pageScrollOptions.scrollViews[0]);e.startScrollPosition=0,e.pageScrollOptions.scrollViews.forEach(n=>{if(null==n)return;const s=e.getScrollPropertyValue(n);!t&&s&&(e.startScrollPosition=s,t=!0,i=e.getScrollClientPropertyValue(n))});const n=e.getCurrentOffset(),s=e.extractScrollTargetPosition();if(e.targetScrollPosition=Math.round((e.pageScrollOptions.verticalScrolling?s.top:s.left)-n),e.distanceToScroll=e.targetScrollPosition-e.startScrollPosition,isNaN(e.distanceToScroll))return(this.config._logLevel>=2||this.config._logLevel>=1&&kn())&&console.log("Scrolling not possible, as we can't find the specified target"),void e.fireEvent(!1);const r=Math.abs(e.distanceToScroll)<e.pageScrollOptions._minScrollDistance;return e.executionDuration=e.pageScrollOptions.duration,null!=e.pageScrollOptions.speed&&null==e.pageScrollOptions.duration&&(e.executionDuration=Math.abs(e.distanceToScroll)/e.pageScrollOptions.speed*1e3),r||e.executionDuration<=e.pageScrollOptions._interval?((this.config._logLevel>=2||this.config._logLevel>=1&&kn())&&(r?console.log("Scrolling not possible, as we can't get any closer to the destination"):console.log("Scroll duration shorter that interval length, jumping to target")),e.setScrollPosition(e.targetScrollPosition),void e.fireEvent(!0)):!e.pageScrollOptions.scrollInView&&e.targetScrollPosition>e.startScrollPosition&&e.targetScrollPosition<=e.startScrollPosition+i?((this.config._logLevel>=2||this.config._logLevel>=1&&kn())&&console.log("Not scrolling, as target already in view"),void e.fireEvent(!0)):(e.pageScrollOptions.interruptible&&e.attachInterruptListeners(this.onInterrupted),e.startTime=(new Date).getTime(),e.endTime=e.startTime+e.executionDuration,e.timer=setInterval(e=>{const t=(new Date).getTime();let i,n=!1;e.endTime<=t?(i=e.targetScrollPosition,n=!0):i=Math.round(e.pageScrollOptions.easingLogic(t-e.startTime,e.startScrollPosition,e.distanceToScroll,e.executionDuration)),this.config._logLevel>=5&&kn()&&console.warn("Scroll Position: "+i),e.setScrollPosition(i)||(n=!0),n&&this.stopInternal(!1,e)},this.config._interval,e),void this.runningInstances.push(e))}scroll(e){this.start(this.create(e))}stopAll(e){if(this.runningInstances.length>0){let t=!1;for(let i=0;i<this.runningInstances.length;++i){const n=this.runningInstances[i];e&&n.pageScrollOptions.namespace!==e||(t=!0,this.stopInternal(!0,n),i--)}return t}return!1}stop(e){return this.stopInternal(!0,e)}}return e.\u0275fac=function(t){return new(t||e)(Je(h$))},e.\u0275prov=ue({factory:function(){return new e(Je(h$))},token:e,providedIn:"root"}),e})();const p$={};let f$=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[u$,{provide:h$,useValue:t}]}}}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[u$,{provide:h$,useValue:p$}]}),e})(),m$=(()=>{class e{}return e.\u0275mod=wt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)},imports:[[f$]]}),e})(),g$=(()=>{class e{}return e.\u0275mod=wt({type:e,bootstrap:[WY]}),e.\u0275inj=fe({factory:function(t){return new(t||e)},providers:[Dx,ZY,{provide:mg,useClass:ZY,multi:!0},dH,uH,pH,fH,mH],imports:[[D_,GY,nk,hu,qY,IU.forRoot({AppID:"45f3ee50e0fd491aa46bd17c05fc7073"}),m$,f$,vy,tT,Ag,O_,KY,dx,yy,CA,XY,lW.initializeApp(fh),Gz,jE,hH,gH,QY,EE,l$,GY,xH,Hm.forRoot(UY,HY)]]}),e})();(function(){if(xn)throw new Error("Cannot enable prod mode after platform setup.");Tn=!1})(),window&&(window.console.log=function(){}),lu().bootstrapModule(g$).catch(e=>console.error(e))},zVF4:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=n("mrSG"),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},l=function(e){for(var t=[],i=0,n=0;n<e.length;n++){var s=e.charCodeAt(n);s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=63&s|128):55296==(64512&s)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++n)),t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=63&s|128):(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=63&s|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],s=0;s<e.length;s+=3){var r=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,h=(15&a)<<2|c>>6,d=63&c;l||(d=64,o||(h=64)),n.push(i[r>>2],i[(3&r)<<4|a>>4],i[h],i[d])}return n.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],i=0,n=0;i<e.length;){var s=e[i++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){var r=e[i++];t[n++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){var o=((7&s)<<18|(63&(r=e[i++]))<<12|(63&(a=e[i++]))<<6|63&e[i++])-65536;t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else{r=e[i++];var a=e[i++];t[n++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],s=0;s<e.length;){var r=i[e.charAt(s++)],o=s<e.length?i[e.charAt(s)]:0,a=++s<e.length?i[e.charAt(s)]:64,l=++s<e.length?i[e.charAt(s)]:64;if(++s,null==r||null==o||null==a||null==l)throw Error();n.push(r<<2|o>>4),64!==a&&(n.push(o<<4&240|a>>2),64!==l&&n.push(a<<6&192|l))}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var i in t)t.hasOwnProperty(i)&&(e[i]=d(e[i],t[i]));return e}var u=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i}))}return e.prototype.wrapCallback=function(e){var t=this;return function(i,n){i?t.reject(i):t.resolve(n),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(i):e(i,n))}},e}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var m=function(e){function t(i,n){var s=e.call(this,n)||this;return s.code=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,g.prototype.create),s}return s.__extends(t,e),t}(Error),g=function(){function e(e,t,i){this.service=e,this.serviceName=t,this.errors=i}return e.prototype.create=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=t[0]||{},s=this.service+"/"+e,r=this.errors[e],o=r?v(r,n):"Error",a=this.serviceName+": "+o+" ("+s+").",l=new m(s,a),c=0,h=Object.keys(n);c<h.length;c++){var d=h[c];"_"!==d.slice(-1)&&(d in l&&console.warn('Overwriting FirebaseError base field "'+d+'" can cause unexpected behavior.'),l[d]=n[d])}return l},e}();function v(e,t){return e.replace(y,(function(e,i){var n=t[i];return null!=n?String(n):"<"+i+"?>"}))}var y=/\{\$([^}]+)}/g;function b(e){return JSON.parse(e)}var w=function(t){var i={},n={},s={},r="";try{var o=t.split(".");i=b(h(o[0])||""),n=b(h(o[1])||""),r=o[2],s=n.d||{},delete n.d}catch(e){}return{header:i,claims:n,data:s,signature:r}},S=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var i=this.W_;if("string"==typeof e)for(var n=0;n<16;n++)i[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(n=0;n<16;n++)i[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(n=16;n<80;n++)i[n]=4294967295&((d=i[n-3]^i[n-8]^i[n-14]^i[n-16])<<1|d>>>31);var s,r,o=this.chain_[0],a=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(n=0;n<80;n++){n<40?n<20?(s=c^a&(l^c),r=1518500249):(s=a^l^c,r=1859775393):n<60?(s=a&l|c&(a|l),r=2400959708):(s=a^l^c,r=3395469782);var d=(o<<5|o>>>27)+s+h+r+i[n]&4294967295;h=c,c=l,l=4294967295&(a<<30|a>>>2),a=o,o=d}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var i=t-this.blockSize,n=0,s=this.buf_,r=this.inbuf_;n<t;){if(0===r)for(;n<=i;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(s[r]=e.charCodeAt(n),++n,++r===this.blockSize){this.compress_(s),r=0;break}}else for(;n<t;)if(s[r]=e[n],++n,++r===this.blockSize){this.compress_(s),r=0;break}}this.inbuf_=r,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var s=24;s>=0;s-=8)e[n]=this.chain_[i]>>s&255,++n;return e},e}(),C=function(){function t(e,t){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(i)})).catch((function(e){i.error(e)}))}return t.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},t.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},t.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},t.prototype.subscribe=function(t,i,n){var s,r=this;if(void 0===t&&void 0===i&&void 0===n)throw new Error("Missing Observer.");void 0===(s=function(e,t){if("object"!=typeof e||null===e)return!1;for(var i=0,n=["next","error","complete"];i<n.length;i++){var s=n[i];if(s in e&&"function"==typeof e[s])return!0}return!1}(t)?t:{next:t,error:i,complete:n}).next&&(s.next=_),void 0===s.error&&(s.error=_),void 0===s.complete&&(s.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?s.error(r.finalError):s.complete()}catch(e){}})),this.observers.push(s),o},t.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},t.prototype.sendOne=function(t,i){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{i(n.observers[t])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},t.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},t}();function _(){}function E(e,t,i){var n="";switch(t){case 1:n=i?"first":"First";break;case 2:n=i?"second":"Second";break;case 3:n=i?"third":"Third";break;case 4:n=i?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+n+" argument "}i.CONSTANTS=r,i.Deferred=u,i.ErrorFactory=g,i.FirebaseError=m,i.MAX_VALUE_MILLIS=144e5,i.RANDOM_FACTOR=.5,i.Sha1=S,i.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},i.assert=o,i.assertionError=a,i.async=function(e,t){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];Promise.resolve(!0).then((function(){e.apply(void 0,i)})).catch((function(e){t&&t(e)}))}},i.base64=c,i.base64Decode=h,i.base64Encode=function(e){var t=l(e);return c.encodeByteArray(t,!0)},i.calculateBackoffMillis=function(e,t,i){void 0===t&&(t=1e3),void 0===i&&(i=2);var n=t*Math.pow(i,e),s=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+s)},i.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.createSubscribe=function(e,t){var i=new C(e,t);return i.subscribe.bind(i)},i.decode=w,i.deepCopy=function(e){return d(void 0,e)},i.deepExtend=d,i.errorPrefix=E,i.getUA=p,i.isAdmin=function(e){var t=w(e).claims;return"object"==typeof t&&!0===t.admin},i.isBrowser=function(){return"object"==typeof self&&self.self===self},i.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},i.isElectron=function(){return p().indexOf("Electron/")>=0},i.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},i.isIE=function(){var e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},i.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},i.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},i.isNode=f,i.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},i.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},i.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},i.isUWP=function(){return p().indexOf("MSAppHost/")>=0},i.isValidFormat=function(e){var t=w(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},i.isValidTimestamp=function(e){var t=w(e).claims,i=Math.floor((new Date).getTime()/1e3),n=0,s=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?n=t.nbf:t.hasOwnProperty("iat")&&(n=t.iat),s=t.hasOwnProperty("exp")?t.exp:n+86400),!!i&&!!n&&!!s&&i>=n&&i<=s},i.issuedAtTime=function(e){var t=w(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},i.jsonEval=b,i.map=function(e,t,i){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=t.call(i,e[s],s,e));return n},i.querystring=function(e){for(var t=[],i=function(e,i){Array.isArray(i)?i.forEach((function(i){t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))},n=0,s=Object.entries(e);n<s.length;n++){var r=s[n];i(r[0],r[1])}return t.length?"&"+t.join("&"):""},i.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var i=e.split("=");t[i[0]]=i[1]}})),t},i.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},i.stringLength=function(e){for(var t=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,i++):t+=3}return t},i.stringToByteArray=function(e){for(var t=[],i=0,n=0;n<e.length;n++){var s=e.charCodeAt(n);if(s>=55296&&s<=56319){var r=s-55296;n++,o(n<e.length,"Surrogate pair missing trail surrogate."),s=65536+(r<<10)+(e.charCodeAt(n)-56320)}s<128?t[i++]=s:s<2048?(t[i++]=s>>6|192,t[i++]=63&s|128):s<65536?(t[i++]=s>>12|224,t[i++]=s>>6&63|128,t[i++]=63&s|128):(t[i++]=s>>18|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128,t[i++]=63&s|128)}return t},i.stringify=function(e){return JSON.stringify(e)},i.validateArgCount=function(e,t,i,n){var s;if(n<t?s="at least "+t:n>i&&(s=0===i?"none":"no more than "+i),s)throw new Error(e+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+s+".")},i.validateCallback=function(e,t,i,n){if((!n||i)&&"function"!=typeof i)throw new Error(E(e,t,n)+"must be a valid function.")},i.validateContextObject=function(e,t,i,n){if((!n||i)&&("object"!=typeof i||null===i))throw new Error(E(e,t,n)+"must be a valid context object.")},i.validateIndexedDBOpenable=function(){return new Promise((function(e,t){try{var i=!0,n="validate-browser-context-for-indexeddb-analytics-module",s=window.indexedDB.open(n);s.onsuccess=function(){s.result.close(),i||window.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=function(){i=!1},s.onerror=function(){var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(r){t(r)}}))},i.validateNamespace=function(e,t,i,n){if((!n||i)&&"string"!=typeof i)throw new Error(E(e,t,n)+"must be a valid firebase namespace.")}},zn8P:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="zn8P"}},[[0,0]]]);