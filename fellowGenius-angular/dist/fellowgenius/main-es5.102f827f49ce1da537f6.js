function _defineProperty2(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){r=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray2(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray2(e)}function _createForOfIteratorHelper(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,a=e})),f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray2(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray2(e,t):void 0}}function _arrayLikeToArray2(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _construct(e,t,i){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&_setPrototypeOf(r,i.prototype),r}).apply(null,arguments)}function _get(e,t,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=_superPropBase(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,n=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+Ewk":function(e,t,i){"use strict";var n=i("P7XM"),r=i("96lO"),a=i("+fXv"),o=i("v0om");function s(e){if(!s.enabled())throw new Error("Transport created when disabled");r.call(this,e,"/jsonp",o,a)}n(s,r),s.enabled=function(){return!!global.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,e.exports=s},"+R4f":function(e,t,i){"use strict";var n=i("P7XM"),r=i("raCH").EventEmitter,a=i("yjSe");function o(e){r.call(this);var t=this,i=this.es=new a(e);i.onmessage=function(e){t.emit("message",decodeURI(e.data))},i.onerror=function(e){var n=2!==i.readyState?"network":"permanent";t._cleanup(),t._close(n)}}n(o,r),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},o.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=o},"+fXv":function(e,t,i){"use strict";var n=i("8fj+"),r=i("JYLm"),a=i("JqAl"),o=i("Yh+D"),s=i("P7XM"),l=i("raCH").EventEmitter;function c(e){var t=this;l.call(this),n.polluteGlobalNamespace(),this.id="a"+r.string(6);var i=o.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));global[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),c.timeout)}s(c,l),c.prototype.abort=function(){if(global[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},c.timeout=35e3,c.scriptErrorTimeout=1e3,c.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},c.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},c.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete global[n.WPrefix][this.id]},c.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),c.scriptErrorTimeout))},c.prototype._createScript=function(e){var t,i=this,n=this.script=global.document.createElement("script");if(n.id="a"+r.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){i._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){i.loadedOkay=!0;try{n.onclick()}catch(e){}}n&&i._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===n.async&&global.document.attachEvent)if(a.isOpera())(t=this.script2=global.document.createElement("script")).text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=t.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch(s){}n.async=!0}void 0!==n.async&&(n.async=!0);var o=global.document.getElementsByTagName("head")[0];o.insertBefore(n,o.firstChild),t&&o.insertBefore(t,o.firstChild)},e.exports=c},0:function(e,t,i){e.exports=i("zUnb")},"1eVo":function(e,t,i){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,i,n=1,r=arguments.length;n<r;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}}},"2Naf":function(t,i,n){"use strict";var r=n("raCH").EventEmitter,a=n("P7XM"),o=n("woL0"),s=n("Yh+D"),l=global.XMLHttpRequest;function c(e,t,i,n){var a=this;r.call(this),setTimeout((function(){a._start(e,t,i,n)}),0)}a(c,r),c.prototype._start=function(t,i,n,r){var a=this;try{this.xhr=new l}catch(h){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();i=s.addQuery(i,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){a._cleanup(!0)}));try{this.xhr.open(t,i,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){a.emit("finish",0,""),a._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),r&&r.headers)for(var u in r.headers)this.xhr.setRequestHeader(u,r.headers[u]);this.xhr.onreadystatechange=function(){if(a.xhr){var t,i,n=a.xhr;switch(n.readyState){case 3:try{i=n.status,t=n.responseText}catch(e){}1223===i&&(i=204),200===i&&t&&t.length>0&&a.emit("chunk",i,t);break;case 4:1223===(i=n.status)&&(i=204),12005!==i&&12029!==i||(i=0),a.emit("finish",i,n.responseText),a._cleanup(!1)}}};try{a.xhr.send(n)}catch(e){a.emit("finish",0,""),a._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!l;var u=["Active"].concat("Object").join("X");!c.enabled&&u in global&&(c.enabled=!!new(l=function(){try{return new global[u]("Microsoft.XMLHTTP")}catch(e){return null}}));var h=!1;try{h="withCredentials"in new l}catch(d){}c.supportsCORS=h,t.exports=c},"3wkl":function(e,t,i){"use strict";var n=i("P7XM"),r=i("2Naf");function a(e,t,i,n){r.call(this,e,t,i,n)}n(a,r),a.enabled=r.enabled&&r.supportsCORS,e.exports=a},"42Jg":function(e,t,i){"use strict";var n=i("P7XM"),r=i("moM4");function a(){r.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}n(a,r),e.exports=a},"4rNY":function(e,t,i){"use strict";var n=i("P7XM"),r=i("dXd4"),a=i("FUii"),o=i("3wkl"),s=i("c6pU");function l(e){if(!s.enabled&&!o.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr",a,o)}n(l,r),l.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||o.enabled)},l.transportName="xhr-polling",l.roundTrips=2,e.exports=l},"5Vaj":function(e,t,i){"use strict";var n=i("P7XM"),r=i("dXd4"),a=i("sYUk"),o=i("FUii"),s=i("nX0T");function l(e){if(!s.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr",o,s)}n(l,r),l.enabled=a.enabled,l.transportName="xdr-polling",l.roundTrips=2,e.exports=l},"6Zju":function(e,t,i){"use strict";var n=i("P7XM"),r=i("raCH").EventEmitter;function a(e,t){r.call(this),this.sendBuffer=[],this.sender=t,this.url=e}n(a,r),a.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},a.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},a.prototype.sendSchedule=function(){var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},a.prototype._cleanup=function(){this.removeAllListeners()},a.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=a},"8fj+":function(e,t,i){"use strict";var n=i("woL0"),r=i("kwwM"),a=i("JqAl");e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in global||(global[e.exports.WPrefix]={})},postMessage:function(t,i){global.parent!==global&&global.parent.postMessage(r.stringify({windowId:e.exports.currentWindowId,type:t,data:i||""}),"*")},createIframe:function(e,t){var i,r,a=global.document.createElement("iframe"),o=function(){clearTimeout(i);try{a.onload=null}catch(e){}a.onerror=null},s=function(){a&&(o(),setTimeout((function(){a&&a.parentNode.removeChild(a),a=null}),0),n.unloadDel(r))},l=function(e){a&&(s(),t(e))};return a.src=e,a.style.display="none",a.style.position="absolute",a.onerror=function(){l("onerror")},a.onload=function(){clearTimeout(i),i=setTimeout((function(){l("onload timeout")}),2e3)},global.document.body.appendChild(a),i=setTimeout((function(){l("timeout")}),15e3),r=n.unloadAdd(s),{post:function(e,t){setTimeout((function(){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(i){}}),0)},cleanup:s,loaded:o}},createHtmlfile:function(t,i){var r,a,o,s=["Active"].concat("Object").join("X"),l=new global[s]("htmlfile"),c=function(){clearTimeout(r),o.onerror=null},u=function(){l&&(c(),n.unloadDel(a),o.parentNode.removeChild(o),o=l=null,CollectGarbage())},h=function(e){l&&(u(),i(e))};l.open(),l.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=global[e.exports.WPrefix];var d=l.createElement("div");return l.body.appendChild(d),o=l.createElement("iframe"),d.appendChild(o),o.src=t,o.onerror=function(){h("onerror")},r=setTimeout((function(){h("timeout")}),15e3),a=n.unloadAdd(u),{post:function(e,t){try{setTimeout((function(){o&&o.contentWindow&&o.contentWindow.postMessage(e,t)}),0)}catch(i){}},cleanup:u,loaded:c}}},e.exports.iframeEnabled=!1,global.document&&(e.exports.iframeEnabled=("function"==typeof global.postMessage||"object"==typeof global.postMessage)&&!a.isKonqueror())},"96lO":function(e,t,i){"use strict";var n=i("P7XM"),r=i("Yh+D"),a=i("6Zju"),o=i("Dohz");function s(e,t,i,n,s){var l=r.addPath(e,t),c=this;a.call(this,e,i),this.poll=new o(n,l,s),this.poll.on("message",(function(e){c.emit("message",e)})),this.poll.once("close",(function(e,t){c.poll=null,c.emit("close",e,t),c.close()}))}n(s,a),s.prototype.close=function(){a.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=s},"9wH6":function(e,t,i){"use strict";var n=i("raCH").EventEmitter;function r(){var e=this;n.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),r.timeout)}i("P7XM")(r,n),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,e.exports=r},AEAD:function(e,t,i){"use strict";e.exports=function(e){return{filterToEnabled:function(t,i){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===i.websocket||t.length&&-1===t.indexOf(e.transportName)||e.enabled(i)&&(n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)))})),n}}}},BOF4:function(t,i,n){"use strict";var r=n("evrj");function a(e){this.message=e}(a.prototype=new Error).name="InvalidTokenError",t.exports=function(t,i){if("string"!=typeof t)throw new a("Invalid token specified");var n=!0===(i=i||{}).header?0:1;try{return JSON.parse(r(t.split(".")[n]))}catch(e){throw new a("Invalid token specified: "+e.message)}},t.exports.InvalidTokenError=a},Dohz:function(e,t,i){"use strict";var n=i("P7XM"),r=i("raCH").EventEmitter;function a(e,t,i){r.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=i,this._scheduleReceiver()}n(a,r),a.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(i,n){e.poll=t=null,e.pollIsClosing||("network"===n?e._scheduleReceiver():(e.emit("close",i||1006,n),e.removeAllListeners()))}))},a.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=a},E8Ah:function(e,t,i){"use strict";var n=global.WebSocket||global.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0},EBWB:function(e,t){e.exports="1.4.0"},EWj0:function(e,t,i){e.exports=i("ugx8").version},FUii:function(e,t,i){"use strict";var n=i("P7XM"),r=i("raCH").EventEmitter;function a(e,t){r.call(this);var i=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){i._chunkHandler(e,t),i.xo=null,i.emit("close",null,200===e?"network":"permanent"),i._cleanup()}))}n(a,r),a.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var i=-1;;this.bufferPosition+=i+1){var n=t.slice(this.bufferPosition);if(-1===(i=n.indexOf("\n")))break;var r=n.slice(0,i);r&&this.emit("message",r)}},a.prototype._cleanup=function(){this.removeAllListeners()},a.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=a},GBY4:function(e,t,i){"use strict";var n=i("RA0T"),r=i("nFlj"),a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(e){return(e||"").toString().replace(s,"")}var c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function h(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var i,n={},r=typeof(e=e||t.location||{});if("blob:"===e.protocol)n=new p(unescape(e.pathname),{});else if("string"===r)for(i in n=new p(e,{}),u)delete n[i];else if("object"===r){for(i in e)i in u||(n[i]=e[i]);void 0===n.slashes&&(n.slashes=a.test(e.href))}return n}function d(e){e=l(e);var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,i){if(e=l(e),!(this instanceof p))return new p(e,t,i);var a,o,s,u,f,v,m=c.slice(),g=typeof t,y=this,b=0;for("object"!==g&&"string"!==g&&(i=t,t=null),i&&"function"!=typeof i&&(i=r.parse),t=h(t),a=!(o=d(e||"")).protocol&&!o.slashes,y.slashes=o.slashes||a&&t.slashes,y.protocol=o.protocol||t.protocol||"",e=o.rest,o.slashes||(m[3]=[/(.*)/,"pathname"]);b<m.length;b++)"function"!=typeof(u=m[b])?(v=u[1],(s=u[0])!=s?y[v]=e:"string"==typeof s?~(f=e.indexOf(s))&&("number"==typeof u[2]?(y[v]=e.slice(0,f),e=e.slice(f+u[2])):(y[v]=e.slice(f),e=e.slice(0,f))):(f=s.exec(e))&&(y[v]=f[1],e=e.slice(0,f.index)),y[v]=y[v]||a&&u[3]&&t[v]||"",u[4]&&(y[v]=y[v].toLowerCase())):e=u(e);i&&(y.query=i(y.query)),a&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){if(""===e)return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=i.length,r=i[n-1],a=!1,o=0;n--;)"."===i[n]?i.splice(n,1):".."===i[n]?(i.splice(n,1),o++):o&&(0===n&&(a=!0),i.splice(n,1),o--);return a&&i.unshift(""),"."!==r&&".."!==r||i.push(""),i.join("/")}(y.pathname,t.pathname)),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(u=y.auth.split(":"),y.username=u[0]||"",y.password=u[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}p.prototype={set:function(e,t,i){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||r.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,/:\d+$/.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!i;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";a[e]=t.charAt(0)!==o?o+t:t}else a[e]=t;break;default:a[e]=t}for(var s=0;s<c.length;s++){var l=c[s];l[4]&&(a[l[1]]=a[l[1]].toLowerCase())}return a.origin=a.protocol&&a.host&&"file:"!==a.protocol?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,i=this,n=i.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var a=n+(i.slashes?"//":"");return i.username&&(a+=i.username,i.password&&(a+=":"+i.password),a+="@"),a+=i.host+i.pathname,(t="object"==typeof i.query?e(i.query):i.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),i.hash&&(a+=i.hash),a}},p.extractProtocol=d,p.location=h,p.trimLeft=l,p.qs=r,e.exports=p},J5zx:function(t,i,n){(function(t){var r,a;void 0===(a="function"==typeof(r=function(){"use strict";var i={},r=null;function a(i){if(t&&t.exports)try{return n(!function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()).randomBytes(i)}catch(e){}try{var a;return(self.crypto||self.msCrypto).getRandomValues(a=new Uint32Array(i)),Array.prototype.slice.call(a)}catch(e){}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(i)}try{a(1)}catch(e){}function o(e,t){for(var i=0,n=0,r=0,a=e.length;r<a;++r)e.charCodeAt(r)===t.charCodeAt(r)?++i:++n;return!(i<0)&&0===n}r=null,i.setRandomFallback=function(e){r=e},i.genSaltSync=function(e,t){if("number"!=typeof(e=e||v))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var i=[];return i.push("$2a$"),e<10&&i.push("0"),i.push(e.toString()),i.push("$"),i.push(h(a(f),f)),i.join("")},i.genSalt=function(e,t,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=void 0),void 0===e)e=v;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function r(t){s((function(){try{t(null,i.genSaltSync(e))}catch(n){t(n)}}))}if(!n)return new Promise((function(e,t){r((function(i,n){i?t(i):e(n)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);r(n)},i.hashSync=function(e,t){if(void 0===t&&(t=v),"number"==typeof t&&(t=i.genSaltSync(t)),"string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return _(e,t)},i.hash=function(e,t,n,r){function a(n){"string"==typeof e&&"number"==typeof t?i.genSalt(t,(function(t,i){_(e,i,n,r)})):"string"==typeof e&&"string"==typeof t?_(e,t,n,r):s(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){a((function(i,n){i?t(i):e(n)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);a(n)},i.compareSync=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&o(i.hashSync(e,t.substr(0,t.length-31)),t)},i.compare=function(e,t,n,r){function a(n){"string"==typeof e&&"string"==typeof t?60===t.length?i.hash(e,t.substr(0,29),(function(e,i){e?n(e):n(null,o(i,t))}),r):s(n.bind(this,null,!1)):s(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){a((function(i,n){i?t(i):e(n)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);a(n)},i.getRounds=function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},i.getSalt=function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)};var s="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout,l="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function h(e,t){var i,n,r=0,a=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;r<t;){if(i=255&e[r++],a.push(l[i>>2&63]),i=(3&i)<<4,r>=t){a.push(l[63&i]);break}if(n=255&e[r++],a.push(l[63&(i|=n>>4&15)]),i=(15&n)<<2,r>=t){a.push(l[63&i]);break}n=255&e[r++],a.push(l[63&(i|=n>>6&3)]),a.push(l[63&n])}return a.join("")}function d(e,t){var i,n,r,a,o,s=0,l=e.length,h=0,d=[];if(t<=0)throw Error("Illegal len: "+t);for(;s<l-1&&h<t&&(i=(o=e.charCodeAt(s++))<c.length?c[o]:-1,n=(o=e.charCodeAt(s++))<c.length?c[o]:-1,-1!=i&&-1!=n)&&(a=i<<2>>>0,d.push(u(a|=(48&n)>>4)),!(++h>=t||s>=l))&&-1!=(r=(o=e.charCodeAt(s++))<c.length?c[o]:-1)&&(a=(15&n)<<4>>>0,d.push(u(a|=(60&r)>>2)),!(++h>=t||s>=l));)o=e.charCodeAt(s++),a=(3&r)<<6>>>0,d.push(u(a|=o<c.length?c[o]:-1)),++h;var p=[];for(s=0;s<h;s++)p.push(d[s].charCodeAt(0));return p}var p=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<128?t(127&i):i<2048?(t(i>>6&31|192),t(63&i|128)):i<65536?(t(i>>12&15|224),t(i>>6&63|128),t(63&i|128)):(t(i>>18&7|240),t(i>>12&63|128),t(i>>6&63|128),t(63&i|128)),i=null},decodeUTF8:function(e,t){for(var i,n,r,a,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(i=e());)if(0==(128&i))t(i);else if(192==(224&i))null===(n=e())&&o([i,n]),t((31&i)<<6|63&n);else if(224==(240&i))(null===(n=e())||null===(r=e()))&&o([i,n,r]),t((15&i)<<12|(63&n)<<6|63&r);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=e())||null===(r=e())||null===(a=e()))&&o([i,n,r,a]),t((7&i)<<18|(63&n)<<12|(63&r)<<6|63&a)}},UTF16toUTF8:function(e,t){for(var i,n=null;null!==(i=null!==n?n:e());)i>=55296&&i<=57343&&null!==(n=e())&&n>=56320&&n<=57343?(t(1024*(i-55296)+n-56320+65536),n=null):t(i);null!==n&&t(n)},UTF8toUTF16:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<=65535?t(i):(t(55296+((i-=65536)>>10)),t(i%1024+56320)),i=null},encodeUTF16toUTF8:function(t,i){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,i)}))},decodeUTF8toUTF16:function(t,i){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,i)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(t){for(var i,n=0;null!==(i=t());)n+=e.calculateCodePoint(i);return n},calculateUTF16asUTF8:function(t){var i=0,n=0;return e.UTF16toUTF8(t,(function(t){++i,n+=e.calculateCodePoint(t)})),[i,n]}};return e}();Date.now=Date.now||function(){return+new Date};var f=16,v=10,m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],g=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],y=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function b(e,t,i,n){var r,a=e[t],o=e[t+1];return r=n[(a^=i[0])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[1])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[2])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[3])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[4])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[5])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[6])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[7])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[8])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[9])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[10])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[11])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[12])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[13])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],r=n[(a^=(r+=n[768|255&o])^i[14])>>>24],r+=n[256|a>>16&255],r^=n[512|a>>8&255],r=n[(o^=(r+=n[768|255&a])^i[15])>>>24],r+=n[256|o>>16&255],r^=n[512|o>>8&255],a^=(r+=n[768|255&o])^i[16],e[t]=o^i[17],e[t+1]=a,e}function k(e,t){for(var i=0,n=0;i<4;++i)n=n<<8|255&e[t],t=(t+1)%e.length;return{key:n,offp:t}}function C(e,t,i){for(var n,r=0,a=[0,0],o=t.length,s=i.length,l=0;l<o;l++)r=(n=k(e,r)).offp,t[l]=t[l]^n.key;for(l=0;l<o;l+=2)a=b(a,0,t,i),t[l]=a[0],t[l+1]=a[1];for(l=0;l<s;l+=2)a=b(a,0,t,i),i[l]=a[0],i[l+1]=a[1]}function w(e,t,i,n,r){var a,o=y.slice(),l=o.length;if(i<4||i>31){if(a=Error("Illegal number of rounds (4-31): "+i),n)return void s(n.bind(this,a));throw a}if(t.length!==f){if(a=Error("Illegal salt length: "+t.length+" != "+f),n)return void s(n.bind(this,a));throw a}i=1<<i>>>0;var c,u,h,d=0;function p(){if(r&&r(d/i),!(d<i)){for(d=0;d<64;d++)for(h=0;h<l>>1;h++)b(o,h<<1,c,u);var a=[];for(d=0;d<l;d++)a.push((o[d]>>24&255)>>>0),a.push((o[d]>>16&255)>>>0),a.push((o[d]>>8&255)>>>0),a.push((255&o[d])>>>0);return n?void n(null,a):a}for(var f=Date.now();d<i&&(d+=1,C(e,c,u),C(t,c,u),!(Date.now()-f>100)););n&&s(p)}if(Int32Array?(c=new Int32Array(m),u=new Int32Array(g)):(c=m.slice(),u=g.slice()),function(e,t,i,n){for(var r,a=0,o=[0,0],s=i.length,l=n.length,c=0;c<s;c++)a=(r=k(t,a)).offp,i[c]=i[c]^r.key;for(a=0,c=0;c<s;c+=2)a=(r=k(e,a)).offp,o[0]^=r.key,a=(r=k(e,a)).offp,o[1]^=r.key,o=b(o,0,i,n),i[c]=o[0],i[c+1]=o[1];for(c=0;c<l;c+=2)a=(r=k(e,a)).offp,o[0]^=r.key,a=(r=k(e,a)).offp,o[1]^=r.key,o=b(o,0,i,n),n[c]=o[0],n[c+1]=o[1]}(t,e,c,u),void 0!==n)p();else for(var v;;)if(void 0!==(v=p()))return v||[]}function _(e,t,i,n){var r,a,o;if("string"!=typeof e||"string"!=typeof t){if(r=Error("Invalid string / salt: Not a string"),i)return void s(i.bind(this,r));throw r}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(r=Error("Invalid salt version: "+t.substring(0,2)),i)return void s(i.bind(this,r));throw r}if("$"===t.charAt(2))a=String.fromCharCode(0),o=3;else{if("a"!==(a=t.charAt(2))&&"b"!==a&&"y"!==a||"$"!==t.charAt(3)){if(r=Error("Invalid salt revision: "+t.substring(2,4)),i)return void s(i.bind(this,r));throw r}o=4}if(t.charAt(o+2)>"$"){if(r=Error("Missing salt rounds"),i)return void s(i.bind(this,r));throw r}var l,c,u,v=10*parseInt(t.substring(o,o+1),10)+parseInt(t.substring(o+1,o+2),10),m=t.substring(o+3,o+25),g=(l=e+=a>="a"?"\0":"",c=[],u=0,p.encodeUTF16toUTF8((function(){return u>=l.length?null:l.charCodeAt(u++)}),(function(e){c.push(e)})),c),b=d(m,f);function k(e){var t=[];return t.push("$2"),a>="a"&&t.push(a),t.push("$"),v<10&&t.push("0"),t.push(v.toString()),t.push("$"),t.push(h(b,b.length)),t.push(h(e,4*y.length-1)),t.join("")}if(void 0===i)return k(w(g,b,v));w(g,b,v,(function(e,t){e?i(e,null):i(null,k(t))}),n)}return i.encodeBase64=h,i.decodeBase64=d,i})?r.apply(i,[]):r)||(t.exports=a)}).call(this,n("YuTi")(t))},JYLm:function(e,t,i){"use strict";var n=i("z+YZ");e.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,i=n.randomBytes(e),r=[],a=0;a<e;a++)r.push("abcdefghijklmnopqrstuvwxyz012345".substr(i[a]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},JqAl:function(t,i,n){"use strict";t.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch(e){return!1}}}},"JuP+":function(e,t,i){"use strict";var n=i("P7XM"),r=i("nzop"),a=i("1eVo");e.exports=function(e){function t(t,i){r.call(this,e.transportName,t,i)}return n(t,r),t.enabled=function(t,i){if(!global.document)return!1;var n=a.extend({},i);return n.sameOrigin=!0,e.enabled(n)&&r.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=r.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},"OX/4":function(e,t,i){"use strict";var n=i("woL0"),r=i("Yh+D"),a=i("P7XM"),o=i("raCH").EventEmitter,s=i("E8Ah");function l(e,t,i){if(!l.enabled())throw new Error("Transport created when disabled");o.call(this);var a=this,c=r.addPath(e,"/websocket");c="https"===c.slice(0,5)?"wss"+c.slice(5):"ws"+c.slice(4),this.url=c,this.ws=new s(this.url,[],i),this.ws.onmessage=function(e){a.emit("message",e.data)},this.unloadRef=n.unloadAdd((function(){a.ws.close()})),this.ws.onclose=function(e){a.emit("close",e.code,e.reason),a._cleanup()},this.ws.onerror=function(e){a.emit("close",1006,"WebSocket connection broken"),a._cleanup()}}a(l,o),l.prototype.send=function(e){this.ws.send("["+e+"]")},l.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},l.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},l.enabled=function(){return!!s},l.transportName="websocket",l.roundTrips=2,e.exports=l},P7XM:function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},Ph6G:function(e,t,i){"use strict";var n=i("P7XM"),r=i("dXd4"),a=i("FUii"),o=i("3wkl"),s=i("c6pU"),l=i("JqAl");function c(e){if(!s.enabled&&!o.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr_streaming",a,o)}n(c,r),c.enabled=function(e){return!e.nullOrigin&&!l.isOpera()&&o.enabled},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!global.document,e.exports=c},QLKV:function(e,t,i){"use strict";var n=i("P7XM"),r=i("VNbE"),a=i("c6pU"),o=i("dXd4");function s(e){if(!r.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/htmlfile",r,a)}n(s,o),s.enabled=function(e){return r.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,e.exports=s},"R+Q3":function(e,t,i){"use strict";var n=i("P7XM"),r=i("moM4");function a(e){r.call(this),this.initEvent("message",!1,!1),this.data=e}n(a,r),e.exports=a},RA0T:function(e,t,i){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},RUQ2:function(e,t,i){var n=i("RUQ2");for(k in n)global[k]=n[k]},"S+S0":function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=n("mrSG"),a=n("zVF4"),o=function(){function e(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),s=function(){function t(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){var n=new a.Deferred;this.instancesDeferred.set(i,n);try{var r=this.getOrInitializeService(i);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(i).promise},t.prototype.getImmediate=function(t){var i=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=i.optional,a=this.normalizeInstanceIdentifier(i.identifier);try{var o=this.getOrInitializeService(a);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(e){if(n)return null;throw e}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var i,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var a=r.__values(this.instancesDeferred.entries()),o=a.next();!o.done;o=a.next()){var s=r.__read(o.value,2),l=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var u=this.getOrInitializeService(c);l.resolve(u)}catch(e){}}}catch(h){i={error:h}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}},t.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(r.__spread(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})),e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))))];case 1:return t.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},t.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},t}(),l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();i.Component=o,i.ComponentContainer=l,i.Provider=s},SGzc:function(t,i,n){"use strict";n("dyV1");var r,a=n("GBY4"),o=n("P7XM"),s=n("kwwM"),l=n("JYLm"),c=n("hPxs"),u=n("Yh+D"),h=n("woL0"),d=n("AEAD"),p=n("1eVo"),f=n("JqAl"),v=n("SM0v"),m=n("moM4"),g=n("l6Lj"),y=n("oOIF"),b=n("42Jg"),k=n("R+Q3"),C=n("uajq");function w(e,t,i){if(!(this instanceof w))return new w(e,t,i);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(i=i||{}).protocols_whitelist&&v.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=i.transports,this._transportOptions=i.transportOptions||{},this._timeout=i.timeout||0;var n=i.sessionId||8;if("function"==typeof n)this._generateSessionId=n;else{if("number"!=typeof n)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return l.string(n)}}this._server=i.server||l.numberString(1e3);var r=new a(e);if(!r.host||!r.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(r.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==r.protocol&&"https:"!==r.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+r.protocol+"' is not allowed.");var o="https:"===r.protocol;if("https:"===y.protocol&&!o)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var s=t.sort();s.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<s.length-1&&e===s[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var c=u.getOrigin(y.href);this._origin=c?c.toLowerCase():null,r.set("pathname",r.pathname.replace(/\/+$/,"")),this.url=r.href,this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:u.isOriginEqual(this.url,y.href),sameScheme:u.isSchemeEqual(this.url,y.href)},this._ir=new C(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function _(e){return 1e3===e||e>=3e3&&e<=4999}o(w,g),w.prototype.close=function(e,t){if(e&&!_(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},w.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(c.quote(e))},w.version=n("EBWB"),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=p.extend(e,this._urlInfo);var i=r.filterToEnabled(this._transportsWhitelist,e);this._transports=i.main,this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.needBody&&(!global.document.body||void 0!==global.document.readyState&&"complete"!==global.document.readyState&&"interactive"!==global.document.readyState))return this._transports.unshift(e),void h.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var i=new e(u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),this._transUrl,this._transportOptions[e.transportName]);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(t){var i,n=this,r=t.slice(0,1),a=t.slice(1);switch(r){case"o":return void this._open();case"h":return void this.dispatchEvent(new m("heartbeat"))}if(a)try{i=s.parse(a)}catch(e){}if(void 0!==i)switch(r){case"a":Array.isArray(i)&&i.forEach((function(e){n.dispatchEvent(new k(e))}));break;case"m":this.dispatchEvent(new k(i));break;case"c":Array.isArray(i)&&2===i.length&&this._close(i[0],i[1],!0)}},w.prototype._transportClose=function(e,t){this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),_(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new m("open"))):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,i){var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout((function(){this.readyState=w.CLOSED,n&&this.dispatchEvent(new m("error"));var r=new b("close");r.wasClean=i||!1,r.code=e||1e3,r.reason=t,this.dispatchEvent(r),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},w.prototype.countRTO=function(e){return e>100?4*e:300+e},t.exports=function(e){return r=d(e),n("n6ct")(w,e),w}},SM0v:function(t,i,n){"use strict";var r={};["log","debug","warn"].forEach((function(t){var i;try{i=global.console&&global.console[t]&&global.console[t].apply}catch(e){}r[t]=i?function(){return global.console[t].apply(global.console,arguments)}:"log"===t?function(){}:r.log})),t.exports=r},SMEb:function(e,t,i){(function(){var e,i,n,r,a={}.hasOwnProperty,o=[].slice;e={LF:"\n",NULL:"\0"},n=function(){var t;function i(e,t,i){this.command=e,this.headers=null!=t?t:{},this.body=null!=i?i:""}return i.prototype.toString=function(){var t,n,r,o;for(n in t=[this.command],(r=!1===this.headers["content-length"])&&delete this.headers["content-length"],o=this.headers)a.call(o,n)&&t.push(n+":"+o[n]);return this.body&&!r&&t.push("content-length:"+i.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},i.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var n,r,a,o,s,l,c,u,h,d,p,f,v,m,g,y,b;for(o=t.search(RegExp(""+e.LF+e.LF)),a=(s=t.substring(0,o).split(e.LF)).shift(),l={},f=function(e){return e.replace(/^\s+|\s+$/g,"")},v=0,g=(y=s.reverse()).length;v<g;v++)u=(d=y[v]).indexOf(":"),l[f(d.substring(0,u))]=f(d.substring(u+1));if(n="",p=o+2,l["content-length"])h=parseInt(l["content-length"]),n=(""+t).substring(p,p+h);else for(r=null,c=m=p,b=t.length;(p<=b?m<b:m>b)&&(r=t.charAt(c))!==e.NULL;c=p<=b?++m:--m)n+=r;return new i(a,l,n)},i.unmarshall=function(i){var n;return function(){var r,a,o,s;for(s=[],r=0,a=(o=i.split(RegExp(""+e.NULL+e.LF+"*"))).length;r<a;r++)(null!=(n=o[r])?n.length:void 0)>0&&s.push(t(n));return s}()},i.marshall=function(t,n,r){return new i(t,n,r).toString()+e.NULL},i}(),i=function(){var t;function i(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}return i.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},i.prototype._transmit=function(e,t,i){var r;for(r=n.marshall(e,t,i),"function"==typeof this.debug&&this.debug(">>> "+r);;){if(!(r.length>this.maxWebSocketFrameSize))return this.ws.send(r);this.ws.send(r.substring(0,this.maxWebSocketFrameSize)),r=r.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+r.length)}},i.prototype._setupHeartbeat=function(i){var n,a,o,s,l,c;if((s=i.version)===r.VERSIONS.V1_1||s===r.VERSIONS.V1_2)return a=(l=function(){var e,t,n,r;for(r=[],e=0,t=(n=i["heart-beat"].split(",")).length;e<t;e++)r.push(parseInt(n[e]));return r}())[0],n=l[1],0!==this.heartbeat.outgoing&&0!==n&&(o=Math.max(this.heartbeat.outgoing,n),"function"==typeof this.debug&&this.debug("send PING every "+o+"ms"),this.pinger=r.setInterval(o,(c=this,function(){return c.ws.send(e.LF),"function"==typeof c.debug?c.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==a?(o=Math.max(this.heartbeat.incoming,a),"function"==typeof this.debug&&this.debug("check PONG every "+o+"ms"),this.ponger=r.setInterval(o,function(e){return function(){var i;if((i=t()-e.serverActivity)>2*o)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+i+"ms"),e.ws.close()}}(this))):void 0},i.prototype._parseConnect=function(){var e,t,i,n;switch(n={},(e=1<=arguments.length?o.call(arguments,0):[]).length){case 2:n=e[0],t=e[1];break;case 3:e[1]instanceof Function?(n=e[0],t=e[1],i=e[2]):(n.login=e[0],n.passcode=e[1],t=e[2]);break;case 4:n.login=e[0],n.passcode=e[1],t=e[2],i=e[3];break;default:n.login=e[0],n.passcode=e[1],t=e[2],i=e[3],n.host=e[4]}return[n,t,i]},i.prototype.connect=function(){var i,a,s,l,c;return i=1<=arguments.length?o.call(arguments,0):[],l=this._parseConnect.apply(this,i),s=l[0],this.connectCallback=l[1],a=l[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(c=this,function(i){var r,o,s,l,u,h,d,p,f,v,m;if(s="undefined"!=typeof ArrayBuffer&&i.data instanceof ArrayBuffer?(r=new Uint8Array(i.data),"function"==typeof c.debug&&c.debug("--- got data length: "+r.length),function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)i.push(String.fromCharCode(r[e]));return i}().join("")):i.data,c.serverActivity=t(),s!==e.LF){for("function"==typeof c.debug&&c.debug("<<< "+s),m=[],p=0,f=(v=n.unmarshall(s)).length;p<f;p++)switch((l=v[p]).command){case"CONNECTED":"function"==typeof c.debug&&c.debug("connected to server "+l.headers.server),c.connected=!0,c._setupHeartbeat(l.headers),m.push("function"==typeof c.connectCallback?c.connectCallback(l):void 0);break;case"MESSAGE":(h=c.subscriptions[d=l.headers.subscription]||c.onreceive)?(o=c,u=l.headers["message-id"],l.ack=function(e){return null==e&&(e={}),o.ack(u,d,e)},l.nack=function(e){return null==e&&(e={}),o.nack(u,d,e)},m.push(h(l))):m.push("function"==typeof c.debug?c.debug("Unhandled received MESSAGE: "+l):void 0);break;case"RECEIPT":m.push("function"==typeof c.onreceipt?c.onreceipt(l):void 0);break;case"ERROR":m.push("function"==typeof a?a(l):void 0);break;default:m.push("function"==typeof c.debug?c.debug("Unhandled frame: "+l):void 0)}return m}"function"==typeof c.debug&&c.debug("<<< PONG")}),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof a?a(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),s["accept-version"]=r.VERSIONS.supportedVersions(),s["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",s)}}(this)},i.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},i.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&r.clearInterval(this.pinger),this.ponger)return r.clearInterval(this.ponger)},i.prototype.send=function(e,t,i){return null==t&&(t={}),null==i&&(i=""),t.destination=e,this._transmit("SEND",t,i)},i.prototype.subscribe=function(e,t,i){var n;return null==i&&(i={}),i.id||(i.id="sub-"+this.counter++),i.destination=e,this.subscriptions[i.id]=t,this._transmit("SUBSCRIBE",i),n=this,{id:i.id,unsubscribe:function(){return n.unsubscribe(i.id)}}},i.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},i.prototype.begin=function(e){var t,i;return i=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:i}),t=this,{id:i,commit:function(){return t.commit(i)},abort:function(){return t.abort(i)}}},i.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},i.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},i.prototype.ack=function(e,t,i){return null==i&&(i={}),i["message-id"]=e,i.subscription=t,this._transmit("ACK",i)},i.prototype.nack=function(e,t,i){return null==i&&(i={}),i["message-id"]=e,i.subscription=t,this._transmit("NACK",i)},i}(),r={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var n;return null==t&&(t=["v10.stomp","v11.stomp"]),n=new(r.WebSocketClass||WebSocket)(e,t),new i(n)},over:function(e){return new i(e)},Frame:n},null!==t&&(t.Stomp=r),"undefined"!=typeof window&&null!==window?(r.setInterval=function(e,t){return window.setInterval(t,e)},r.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=r):t||(self.Stomp=r)}).call(this)},VNbE:function(e,t,i){"use strict";var n=i("P7XM"),r=i("8fj+"),a=i("Yh+D"),o=i("raCH").EventEmitter,s=i("JYLm");function l(e){o.call(this);var t=this;r.polluteGlobalNamespace(),this.id="a"+s.string(6),e=a.addQuery(e,"c="+decodeURIComponent(r.WPrefix+"."+this.id));var i=l.htmlfileEnabled?r.createHtmlfile:r.createIframe;global[r.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=i(e,(function(){t._cleanup(),t._close("permanent")}))}n(l,o),l.prototype.abort=function(){this._cleanup(),this._close("user")},l.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[r.WPrefix][this.id]},l.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},l.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in global)try{l.htmlfileEnabled=!!new global[c]("htmlfile")}catch(u){}l.enabled=l.htmlfileEnabled||r.iframeEnabled,e.exports=l},Wcq6:function(e,t,i){"use strict";var n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i("wj3C"));n.default.registerVersion("firebase","7.21.0","app"),e.exports=n.default},"Yh+D":function(e,t,i){"use strict";var n=i("GBY4");e.exports={getOrigin:function(e){if(!e)return null;var t=new n(e);if("file:"===t.protocol)return null;var i=t.port;return i||(i="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+i},isOriginEqual:function(e,t){return this.getOrigin(e)===this.getOrigin(t)},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var i=e.split("?");return i[0]+t+(i[1]?"?"+i[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},Z4fQ:function(e,t){var i=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return i()}try{return __global__||i()}finally{delete Object.prototype.__global__}}()},"a1+y":function a1Y(module,exports,__webpack_require__){var t;window,t=function t(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,(function(t){return e[t]}).bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=92)}([function(e,t,i){"use strict";i.r(t);var n,r=i(11),a=i.n(r),o=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()},s=i(14),l=i(3),c=i(1),u=i(46),h=i.n(u),d=i(47),p=i.n(d),f=new Array(32).fill(void 0);function v(e){return f[e]}f.push(void 0,null,!0,!1);var m=f.length;function g(e){var t=v(e);return function(e){e<36||(f[e]=m,m=e)}(e),t}var y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});y.decode();var b=null;function k(){return null!==b&&b.buffer===n.memory.buffer||(b=new Uint8Array(n.memory.buffer)),b}function C(e,t){return y.decode(k().subarray(e,e+t))}function w(e){m===f.length&&f.push(f.length+1);var t=m;return m=f[t],f[t]=e,t}var _=0,S=new TextEncoder("utf-8"),E="function"==typeof S.encodeInto?function(e,t){return S.encodeInto(e,t)}:function(e,t){var i=S.encode(e);return t.set(i),{read:e.length,written:i.length}},T=null;function A(){return null!==T&&T.buffer===n.memory.buffer||(T=new Int32Array(n.memory.buffer)),T}var O,x=function(){function e(){h()(this,e)}return p()(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,n.__wbg_signmanager_free(e)}},{key:"get_digest",value:function(e){return g(n.signmanager_get_digest(this.ptr,w(e)))}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}},{key:"new",value:function(){var t=n.signmanager_new();return e.__wrap(t)}}]),e}(),I=!1,D=null,R=0,P="free",M=[],L=[],N=0;(D?Promise.resolve(D):new Promise((function(e){I||n||function e(){var t={wbg:{}};t.wbg.__wbindgen_object_drop_ref=function(e){g(e)},t.wbg.__wbindgen_string_new=function(e,t){return w(C(e,t))},t.wbg.__wbindgen_string_get=function(e,t){var i=v(t),r="string"==typeof i?i:void 0,a=null==r?0:function(e,t,i){if(void 0===i){var n=S.encode(e),r=t(n.length);return k().subarray(r,r+n.length).set(n),_=n.length,r}for(var a=e.length,o=(r=t(a),k()),s=0;s<a;s++){var l=e.charCodeAt(s);if(l>127)break;o[r+s]=l}if(s!==a){0!==s&&(e=e.slice(s)),r=i(r,a,a=s+3*e.length);var c=k().subarray(r+s,r+a);s+=E(e,c).written}return _=s,r}(r,n.__wbindgen_malloc,n.__wbindgen_realloc),o=_;A()[e/4+1]=o,A()[e/4+0]=a},t.wbg.__wbindgen_throw=function(e,t){throw new Error(C(e,t))};for(var i=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),(function(e){return e.charCodeAt(0)})),r=new Uint8Array([177,156,215,89,13,111,230,1]),a=new Uint8Array(i.length),o=new Uint8Array(256),s=0;s<256;s++)o[s]=s;var l=0;for(s=0;s<256;s++){var c=[o[l=(l+o[s]+r[s%r.length])%256],o[s]];o[s]=c[0],o[l]=c[1]}s=0,l=0;for(var u=0;u<0+i.length;u++){var h=[o[l=(l+o[s=(s+1)%256])%256],o[s]];o[s]=h[0],o[l]=h[1],u>=0&&(a[u-0]=i[u-0]^o[(o[s]+o[l])%256])}return I=!0,new Promise((function(i){(function(e,t){return WebAssembly.instantiate(e,t)})(a.buffer,t).then((function(t){I=!1,n=t.instance.exports,e.__wbindgen_wasm_module=t.module,i()}))}))}().then((function(){D=x.new(),e(D)}))}))).then((function(e){O=e})),setInterval((function(){Object(l.getParameter)("UPLOAD_LOG")&&F.info("console log upload")}),9e5);var F=function(){var e,t,i,n,r,u,h=null,d=["DEBUG","INFO","WARNING","ERROR","NONE"],p=0,f=function(e,t){if(Object(l.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var i="";t.forEach((function(e){"object"===a()(e)&&(e=JSON.stringify(e)),i=i+e+" "})),M.push({payload:i,log_level:e}),"free"===P&&function e(t){P="uploading",setTimeout((function(){!function(e,t,i){var n={};Array.isArray(e)||(e=[e]),e=e.map((function(e){return{log_item_id:R++,log_level:e.log_level,payload_str:e.payload}})),n={timestamp:Date.now(),sdk_version:l.VERSION,process_id:Object(c.getProcessId)(),payload:JSON.stringify(e)},O?n.hash=O.get_digest("".concat(n.payload).concat(n.process_id).concat(n.timestamp)):i&&i();try{var r=h||"https://".concat(Object(l.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(s.post)(r,n,(function(e){"OK"===e?t&&t():i&&i()}),(function(e){i&&i()}),{withCredentials:!0})}catch(e){i&&i()}}(t,(function(){N=0,0!==M.length?(L=M.splice(0,M.length<10?M.length:10),e(L)):P="free"}),(function(){setTimeout((function(){e(L)}),N++<2?200:1e4)}))}),3e3)}(L=M.splice(0,M.length<10?M.length:10))}catch(e){}};t=function(){for(var t=[0],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)},i=function(){for(var t=[1],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)},n=function(){for(var t=[2],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)},r=function(){for(var t=[3],i=0;i<arguments.length;i++)t.push(arguments[i]);e.apply(this,t)};var v={};return u=function(e){v[e]||(n.apply(void 0,arguments),v[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,enableLogUpload:function(){Object(l.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(l.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){h=e?"https://".concat(h,"/ls/?h=").concat(Object(l.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(l.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),p=e},log:e=function(){var e=arguments[0],t=arguments;if(t[0]=o()+" Agora-SDK ["+(d[e]||"DEFAULT")+"]:",f(e,t),!(e<p))switch(e){case 0:case 1:console.log.apply(console,t);break;case 2:console.warn.apply(console,t);break;case 3:console.log.apply(console,t);break;default:return void console.log.apply(console,t)}},debug:t,info:i,warning:n,deprecate:u,error:r}}();t.default=F},function(e,t,i){"use strict";i.r(t),i.d(t,"report",(function(){return T})),i.d(t,"SESSION_INIT",(function(){return g})),i.d(t,"JOIN_CHOOSE_SERVER",(function(){return y})),i.d(t,"JOIN_GATEWAY",(function(){return b})),i.d(t,"PUBLISH",(function(){return k})),i.d(t,"SUBSCRIBE",(function(){return C})),i.d(t,"getProcessId",(function(){return E}));var n=i(44),r=i.n(n),a=i(7),o=i.n(a),s=i(3),l=i(0),c=i(14),u=i(27),h=i.n(u),d=i(45);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var v,m,g="session_init",y="join_choose_server",b="join_gateway",k="publish",C="subscribe",w=new(i.n(d).a),_={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},S=null,E=function(){return S||(S="process-"+h()(),l.default.info("processId: "+S)),S},T=(m=0,(v={list:{},setProxyServer:function(e){w.setProxy(e),v.proxyServerURL=e},getUrl:function(){return v.proxyServerURL?"https://".concat(v.proxyServerURL,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return v.proxyServerURL?"https://".concat(v.proxyServerURL,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(e){return v.list[e].startTime},sessionInit:function(e,t){var i=o()({},_);i.startTime=+new Date,i.sid=e,i.cname=t.cname,v.list[e]=i;var n=o()({},{willUploadConsoleLog:Object(s.getParameter)("UPLOAD_LOG"),areaVersion:"global"},t.extend),r=o()({},i);r.eventType=g,r.appid=t.appid,r.browser=navigator.userAgent,r.build=s.BUILD,r.lts=+new Date,r.elapse=r.lts-r.startTime,r.extend=JSON.stringify(n),r.mode=t.mode,r.process=E(),r.success=t.succ,r.version=s.VERSION,delete r.startTime,v.send({type:"Session",data:r}),v._flushInvokeReport(e)},joinChooseServer:function(e,t,i){if(v.list[e]){t.uid&&(v.list[e].uid=parseInt(t.uid)),t.cid&&(v.list[e].cid=parseInt(t.cid));var n=o()({},v.list[e]);n.eventType=y;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.chooseServerAddr=t.csAddr,n.errorCode=t.ec,n.elapse=n.lts-n.startTime,n.success=t.succ,n.chooseServerAddrList=JSON.stringify(t.serverList),delete n.startTime,v.send({type:"JoinChooseServer",data:n})}},reqUserAccount:function(e,t){t.vid&&(v.list[e].vid=t.vid);var i=o()({},v.list[e]),n=t.lts;i.eventType="req_user_account",i.lts=Date.now(),i.success=t.success,i.serverAddress=t.serverAddress,i.stringUid=t.stringUid,i.uid=t.uid,i.errorCode=t.errorCode,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-n,i.extend="string"==typeof t.extend?t.extend:JSON.stringify(t.extend),delete i.startTime,v.send({type:"ReqUserAccount",data:i})},joinGateway:function(e,t){t.vid&&(v.list[e].vid=t.vid);var i=o()({},v.list[e]),n=t.lts;i.eventType=b,i.firstSuccess=t.firstSuccess,i.lts=Date.now(),i.gatewayAddr=t.addr,i.success=t.succ,i.errorCode=t.ec,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-n,delete i.startTime,v.send({type:"JoinGateway",data:i})},publish:function(e,t){var i=o()({},v.list[e]);i.eventType=k;var n=t.lts;i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.success=t.succ,i.errorCode=t.ec,i.audio=t.audio,i.video=t.video,i.screenshare=t.screenshare,i.publishRequestid=t.publishRequestid,i.p2pid=t.p2pid,t.videoName&&(i.videoName=t.videoName),t.audioName&&(i.audioName=t.audioName),t.screenName&&(i.screenName=t.screenName),delete i.startTime,v.send({type:"Publish",data:i}),v._flushInvokeReport(e)},subscribe:function(e,t){var i=o()({},v.list[e]);i.eventType=C;var n=t.lts;i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.errorCode=t.ec,i.success=t.succ,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,isFinite(t.peerid)?i.peer=t.peerid:i.peerSuid=""+t.peerid,"boolean"==typeof t.video&&(i.video=t.video),"boolean"==typeof t.audio&&(i.audio=t.audio),delete i.startTime,v.send({type:"Subscribe",data:i}),v._flushInvokeReport(e)},firstRemoteFrame:function(e,t){var i=o()({},v.list[e]);i.eventType="first_remote_frame";var n=t.lts;i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.width=t.width,i.height=t.height,i.success=t.succ,i.errorCode=t.ec,isFinite(t.peerid)?i.peer=t.peerid:i.peerSuid=""+t.peerid,delete i.startTime,v.send({type:"FirstFrame",data:i})},firstVideoReceived:function(e,t){var i=o()({},v.list[e]);i.eventType="first_video_received",i.lts=Date.now(),i.peer=t.peerid,i.uid=t.uid,i.elapse=t.elapse,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,v.send({type:"FirstVideoReceived",data:i})},firstAudioReceived:function(e,t){var i=o()({},v.list[e]);i.eventType="first_audio_received",i.lts=Date.now(),i.peer=t.peerid,i.uid=t.uid,i.elapse=t.elapse,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,v.send({type:"FirstAudioReceived",data:i})},firstVideoDecode:function(e,t){var i=o()({},v.list[e]);i.eventType="first_video_decode",i.lts=Date.now(),i.peer=t.peerid,i.uid=t.uid,i.elapse=t.elapse,i.videowidth=t.width,i.videoheight=t.height,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,v.send({type:"FirstVideoDecode",data:i})},firstAudioDecode:function(e,t){var i=o()({},v.list[e]);i.eventType="first_audio_decode",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,i.elapse=t.elapse,i.subscribeElapse=t.subscribeElapse,i.subscribeRequestid=t.subscribeRequestid,i.p2pid=t.p2pid,v.send({type:"FirstAudioDecode",data:i})},onAddAudioStream:function(e,t){var i=o()({},v.list[e]);i.eventType="on_add_audio_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,v.send({type:"OnAddAudioStream",data:i})},onAddVideoStream:function(e,t){var i=o()({},v.list[e]);i.eventType="on_add_video_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,v.send({type:"OnAddVideoStream",data:i})},onUpdateStream:function(e,t){var i=o()({},v.list[e]);i.eventType="on_update_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,i.audio=t.audio,i.video=t.video,v.send({type:"OnUpdateStream",data:i})},onRemoveStream:function(e,t){var i=o()({},v.list[e]);i.eventType="on_remove_stream",i.lts=Date.now(),i.uid=t.uid,i.peer=t.peerid,v.send({type:"OnRemoveStream",data:i})},streamSwitch:function(e,t){var i=o()({},v.list[e]);i.eventType="stream_switch",i.lts=Date.now(),i.isDual=t.isdual,i.elapse=i.lts-i.startTime,i.success=i.succ,delete i.startTime,v.send({type:"StreamSwitch",data:i})},audioSendingStopped:function(e,t){var i=o()({},v.list[e]);i.eventType="audio_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reason=t.reason,i.success=t.succ,delete i.startTime,v.send({type:"AudioSendingStopped",data:i})},videoSendingStopped:function(e,t){var i=o()({},v.list[e]);i.eventType="video_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reson=t.reason,i.success=t.succ,delete i.startTime,v.send({type:"VideoSendingStopped",data:i})},requestProxyAppCenter:function(e,t){var i=o()({},v.list[e]),n=t.lts;i.eventType="request_proxy_appcenter",i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.extend=t.extend+"",i.APAddr=t.APAddr,i.workerManagerList=t.workerManagerList,i.response=t.response,i.errorCode=t.ec,i.success=t.succ,delete i.startTime,v.send({type:"RequestProxyAppCenter",data:i})},requestProxyWorkerManager:function(e,t){var i=o()({},v.list[e]),n=t.lts;i.eventType="request_proxy_worker_manager",i.lts=Date.now(),i.eventElapse=i.lts-n,i.elapse=i.lts-i.startTime,i.extend=t.extend,i.workerManagerAddr=t.workerManagerAddr,i.response=t.response,i.errorCode=t.ec,i.success=t.succ,delete i.startTime,v.send({type:"RequestProxyWorkerManager",data:i})},requestWorkerEvent:function(e,t){var i=o()({},v.list[e]),n=i.startTime,r=Date.now();delete(i=f({},i,{},t,{elapse:r-n,lts:r,productType:"WebRTC"})).startTime,v.send({type:"WorkerEvent",data:i})},requestApWorkerEvent:function(e,t){var i=o()({},v.list[e]),n=i.startTime,r=Date.now();i=f({},i,{},t,{elapse:r-n,lts:r}),v.send({type:"APWorkerEvent",data:i})},sendCustomReportMessage:function(e,t,i){var n={type:"UserAnalytics",data:f({sid:e},t)},r=v.getUrl();Object(c.post)(r,n,(function(e){i&&i()}),(function(e){var t=v.getBackUrl();Object(c.post)(t,n,(function(e){i&&i()}),(function(e){i&&i("Failed")}),{timeout:Object(s.getParameter)("CUSTOMER_REPORT_TIMEOUT")})}),{timeout:Object(s.getParameter)("CUSTOMER_REPORT_TIMEOUT")})},joinChannelTimeOut:function(e){v.send({type:"JoinChannelTimeout",data:f({},e)})},peerPublishStatus:function(e){v.send({type:"PeerPublishStatus",data:f({},e)})}}).reportApiInvoke=function(e,t){var i=t.tag,n=t.name,r=t.getStates,a=t.options,o=t.timeout,c=void 0===o?6e4:o,u=t.callback,h=t.reportResult,d=void 0===h||h,p=Date.now(),v=0,g=m++,y=function(){return f({tag:i,invokeId:g,sid:e,name:n,apiInvokeTime:p,options:a},r&&{states:(t=r(),Object.keys(t).reduce((function(e,i){var n=e;return null!=t[i]&&(n[i]=t[i]),n}),{}))});var t},b=!!Object(s.getParameter)("SHOW_REPORT_INVOKER_LOG");b&&l.default.info("".concat(n," start"));var k=setTimeout((function(){T._sendApiInvoke(f({},y(),{error:"API_INVOKE_TIMEOUT",success:!1}))}),c);return function(e,t){if(clearTimeout(k),++v>1&&(e="EXECUTOR_INVOKE_".concat(v)),e)return T._sendApiInvoke(f({},y(),{success:!1,error:e},r&&{states:r()})),b&&l.default.info("".concat(n," onFailure"),e),u&&u(e);T._sendApiInvoke(f({},y(),{success:!0},d&&{result:t},{},r&&{states:r()})),b&&l.default.info("".concat(n," onSuccess")),u&&u(null,t)}},v._cachedItems=[],v._cacheInvokeReport=function(e){e.lts||(e.lts=Date.now()),v._cachedItems.push(e),v._cachedItems.length>50&&v._cachedItems.shift()},v._flushInvokeReport=function(e){if(v._cachedItems.length){var t=v._cachedItems;v._cachedItems=[],l.default.debug("Flush cached event reporting:",t.length),t.forEach((function(t,i){t.sid=e,setTimeout((function(){v._sendApiInvoke(t)}),5e3+500*i)}))}},v._sendApiInvoke=function(e){var t=e.tag,i=e.invokeId,n=e.sid,r=e.name,a=e.result,o=e.states,l=e.options,c=e.error,u=e.success,h=e.apiInvokeTime,d=e.lts,p=Object(s.getParameter)("NOT_REPORT_EVENT");if(!(t&&p instanceof Array&&-1!==p.indexOf(t)))if(v.list[n]){var m=v.list[n],g=m.startTime,y=m.cname,b=m.uid,k=m.cid,C=(d=d||Date.now())-g,w=d-h,_="";if(l)try{_=JSON.stringify(l)}catch(e){_=l.toString()}var S=f({invokeId:i,sid:n,cname:y,cid:k,lts:d,uid:b,success:u,elapse:C,apiName:r,execElapse:w},void 0!==l&&{options:_},{},void 0!==o&&{execStates:JSON.stringify(o)},{},void 0!==c&&{errorCode:JSON.stringify(c)},{},void 0!==a&&{execResult:JSON.stringify(a)});v.send({type:"ApiInvoke",data:S})}else v._cacheInvokeReport(arguments[0])},v.sendCache=[],v.sendTimer=null,v.send=function(e){if(e.data){var t=e.data;v._lastLts&&v._lastLts>=t.lts&&(t.lts=v._lastLts+1),v._lastLts=t.lts}if(v.sendCache.push(e),null===v.sendTimer)return function e(){v.sendTimer=setTimeout((function(){if(0!==v.sendCache.length){var t=v.sendCache.splice(0,v.sendCache.length<10?v.sendCache.length:10);return w.sendReportList(t),e()}v.sendTimer=null}),Object(s.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},v)},function(e,t,i){"use strict";i.r(t),i.d(t,"checkValidObject",(function(){return s})),i.d(t,"checkValidString",(function(){return l})),i.d(t,"checkValidNumber",(function(){return c})),i.d(t,"checkValidArray",(function(){return u})),i.d(t,"checkValidFloatNumber",(function(){return h})),i.d(t,"checkValidBoolean",(function(){return d})),i.d(t,"checkValidEnum",(function(){return o})),i.d(t,"checkValidUID",(function(){return p})),i.d(t,"isValidString",(function(){return f})),i.d(t,"isValidNumber",(function(){return v})),i.d(t,"isValidBoolean",(function(){return g})),i.d(t,"isASCII",(function(){return k})),i.d(t,"isInteger",(function(){return C})),i.d(t,"isNumber",(function(){return w})),i.d(t,"isString",(function(){return _})),i.d(t,"isArray",(function(){return S})),i.d(t,"isEmpty",(function(){return E})),i.d(t,"isValidToken",(function(){return y})),i.d(t,"isValidChannelName",(function(){return b}));var n=i(11),r=i.n(n),a=i(10),o=function(e,t,i){for(var n=0;n<i.length;n++)if(e===i[n])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(i)))},s=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==r()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},l=function(e,t,i,n,r){if(E(i)&&(i=1),n=n||255,E(r)&&(r=!0),E(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!f(e,i,n,r))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(i,",").concat(n,"].").concat(r?" ASCII characters only.":""))},c=function(e,t,i,n){if(E(i)&&(i=1),n=n||1e4,E(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!v(e,i,n))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(i,",").concat(n,"]. integer only"))},u=function(e,t){if(!Array.isArray(e))throw new Error("".concat(t," should be an array"))},h=function(e,t,i,n){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(E(i)&&(i=0),n=n||1e4,E(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e,i,n))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(i,",").concat(n,"]."))},d=function(e,t){if(E(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!g(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},p=function(e){if(!Object(a.is32Uint)(e)&&!f(e,1,255))throw logger.error("Invalid UID ".concat(e," ").concat(r()(e))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},f=function(e,t,i,n){return t||(t=0),i||(i=Number.MAX_SAFE_INTEGER),E(n)&&(n=!0),_(e)&&(!n||k(e))&&e.length>=t&&e.length<=i},v=function(e,t,i){return C(e)&&e>=t&&e<=i},m=function(e,t,i){return w(e)&&e>=t&&e<=i},g=function(e){return"boolean"==typeof e},y=function(e){return f(e,1,2047)},b=function(e){return _(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},k=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<0||i>255)return!1}return!0}},C=function(e){return"number"==typeof e&&e%1==0},w=function(e){return"number"==typeof e},_=function(e){return"string"==typeof e},S=function(e){return e instanceof Array},E=function(e){return null==e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILD="v3.2.1-0-gf393343",t.VERSION="3.2.1";var n=0*Date.now()+11499+86604+5615+6547+846;t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var r={WEBCS_DOMAIN:["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],LOG_UPLOAD_SERVER:"logservice-oversea.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1-oversea.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"statscollector-2-oversea.agora.io",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:n.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:""};r.WEBCS_DOMAIN=["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],r.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],r.PROXY_CS=["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],r.CDS_AP=["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],r.ACCOUNT_REGISTER=["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],r.UAP_AP=["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],r.LOG_UPLOAD_SERVER="logservice.agora.io",r.EVENT_REPORT_DOMAIN="webcollector-1.agora.io",r.EVENT_REPORT_BACKUP_DOMAIN="webcollector-2.agoraio.cn",r.GATEWAY_DOMAINS=["edge.agora.io","edge.agoraio.cn"],t.setParameter=function(e,t){return void 0!==r[e]&&(r[e]=t,!0)},t.getParameter=function(e){return void 0!==r[e]?r[e]:null}},function(e,t,i){"use strict";i.r(t),i.d(t,"getBrowserInfo",(function(){return y})),i.d(t,"getBrowserVersion",(function(){return d})),i.d(t,"getBrowserOS",(function(){return p})),i.d(t,"isChrome",(function(){return n})),i.d(t,"isSafari",(function(){return r})),i.d(t,"isFireFox",(function(){return o})),i.d(t,"isOpera",(function(){return s})),i.d(t,"isEdge",(function(){return a})),i.d(t,"isQQBrowser",(function(){return l})),i.d(t,"isWeChatBrowser",(function(){return c})),i.d(t,"isLegacyChrome",(function(){return v})),i.d(t,"isSupportedPC",(function(){return u})),i.d(t,"isSupportedMobile",(function(){return h})),i.d(t,"getChromeKernelVersion",(function(){return g})),i.d(t,"isChromeKernel",(function(){return f}));var n=function(){var e=y();return e.name&&"Chrome"===e.name},r=function(){var e=y();return e.name&&"Safari"===e.name},a=function(){var e=y();return e.name&&"Edge"===e.name},o=function(){var e=y();return e.name&&"Firefox"===e.name},s=function(){var e=y();return e.name&&"OPR"===e.name},l=function(){var e=y();return e.name&&"QQBrowser"===e.name},c=function(){var e=y();return e.name&&"MicroMessenger"===e.name},u=function(){var e=p();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},h=function(){var e=p();return"Android"===e||"iOS"===e},d=function(){return y().version},p=function(){return y().os},f=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function v(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var m,g=function(){var e=navigator.userAgent.match(/chrome\/[\d]./i);return e&&e[0]&&e[0].split("/")[1]},y=(m=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===i[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(i=e),"Safari"===i[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(i[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(i=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(i=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(i=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(i=[null,"IE",e[1]]);var n=void 0,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var a in r){var o=r[a];if(o.r.test(navigator.userAgent)){n=o.s;break}}return{name:i[1],version:i[2],os:n}}(),function(){return m})},function(e,t,i){"use strict";i.r(t),i.d(t,"APErrorCode",(function(){return n})),i.d(t,"GatewayErrorCode",(function(){return r})),i.d(t,"StringUidErrorCode",(function(){return a})),i.d(t,"JOIN_GS_TRYNEXT_LIST",(function(){return o})),i.d(t,"JOIN_CS_RETRY_LIST",(function(){return s})),i.d(t,"INJECT_STREAM_STATUS",(function(){return l}));var n={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},r={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},a={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},o=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],s=["NO_SERVICE_AVAILABLE"],l={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10};t.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return a})),i(0);var n=function(e,t,i){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(t)>-1&&("string"==typeof i||isFinite(i)))return e[t]=""+i},r=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("send")&&-1===e.type.toLowerCase().indexOf("outbound")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(n(t,"audioSendBytes",e.bytesSent),n(t,"audioSendPackets",e.packetsSent),n(t,"audioSendPacketsLost",e.packetsLost)):(n(t,"videoSendBytes",e.bytesSent),n(t,"videoSendPackets",e.packetsSent),n(t,"videoSendPacketsLost",e.packetsLost),n(t,"videoSendFrameRate",e.googFrameRateSent),n(t,"videoSendResolutionWidth",e.googFrameWidthSent),n(t,"videoSendResolutionHeight",e.googFrameHeightSent))))})),t},a=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("recv")&&-1===e.type.toLowerCase().indexOf("inbound")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(n(t,"audioReceiveBytes",e.bytesReceived),n(t,"audioReceivePackets",e.packetsReceived),n(t,"audioReceivePacketsLost",e.packetsLost)):(n(t,"videoReceiveBytes",e.bytesReceived),n(t,"videoReceivePacketsLost",e.packetsLost),n(t,"videoReceivePackets",e.packetsReceived),n(t,"videoReceiveFrameRate",e.googFrameRateReceived),n(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),n(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),n(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))})),t}},function(e,t){function i(){return e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},i.apply(this,arguments)}e.exports=i},function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c}));var n=i(0),r=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,i){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(i)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,i){var n;e.dispatcher.eventListeners[t]&&-1!==(n=e.dispatcher.eventListeners[t].indexOf(i))&&e.dispatcher.eventListeners[t].splice(n,1)},e.dispatchEvent=function(t){var i;for(i in e.dispatcher.eventListeners[t.type])if(e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(i)&&"function"==typeof e.dispatcher.eventListeners[t.type][i])try{e.dispatcher.eventListeners[t.type][i](t)}catch(i){n.default.debug("[".concat(e.clientId,"] Error in ").concat(t.type," event"),i)}},e.dispatchSocketEvent=function(t){var i;for(i in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(i)&&"function"==typeof e.dispatcher.eventListeners[t.type][i]&&e.dispatcher.eventListeners[t.type][i](t.msg)},e},a=function(e){var t={};return t.type=e.type,t},o=function(e){var t=a(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},s=function(e){var t=a(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},l=function(e){var t=a(e);return t.msg=e.msg,t},c=function(e){var t=a(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t}},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(i(67)),c=i(3),u=s(i(0)),h=i(2),d=i(14),p=i(10),f=function(e){function t(t,i){var n=e.call(this)||this;return n._state=b.RELAY_STATE_IDLE,n._onStatus=function(e){u.default.debug("["+n.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&n.emit("event",y.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&n.emit("event",y.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(n._state=b.RELAY_STATE_FAILURE,n.emit("state",b.RELAY_STATE_FAILURE,k.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(n._state=b.RELAY_STATE_FAILURE,n.emit("state",b.RELAY_STATE_FAILURE,k.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},n._onClose=function(){return a(n,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(u.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",y.NETWORK_DISCONNECTED),this.state=b.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof w&&(e.message===m.WS_ABORT||e.message===m.AP_REQUEST_ABORT)?[2]:(this.emit("state",b.RELAY_STATE_FAILURE,k.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}}))}))},n.token=t.appId,n.appId=t.appId,n.cname=t.cname,n.uid=t.uid,n.sid=t.sid,n.clientId=i,n}return r(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(this.state!==b.RELAY_STATE_IDLE)throw new w(m.BAD_STATE);return this.state=b.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.updateChannelMediaRelay=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(this.state!==b.RELAY_STATE_RUNNING)throw new w(m.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.stopChannelMediaRelay=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),u.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=b.RELAY_STATE_IDLE,this.dispose(),[2]}}))}))},t.prototype.dispose=function(){u.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=b.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise((function(i,n){var r={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:c.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},a={service_name:"tele_channel",json_body:JSON.stringify(r)};d.post("https://"+e,a,(function(e){var t=null,r=null;try{t=JSON.parse(e)}catch(e){n(new w(m.AP_JSON_PARSE_ERROR,e))}0!==t.code&&n(new w(m.AP_REQUEST_ERROR,t));try{r=JSON.parse(t.json_body)}catch(e){n(new w(m.AP_JSON_PARSE_ERROR,e))}200!==r.code&&n(new w(m.AP_REQUEST_ERROR,r)),r.servers?i(r.servers):n(new w(m.AP_JSON_PARSE_ERROR,r))}),(function(e){return n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})}))},t.prototype._requestAP=function(){var e=this,t=c.getParameter("UAP_AP");return new Promise((function(i,n){setTimeout((function(){n(new w(m.AP_REQUEST_TIMEOUT))}),5e3),e.on("dispose",(function(){n(new w(m.AP_REQUEST_ABORT))})),t.forEach((function(t){e._requestOneAP(t+="/api/v1").then((function(n){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(n));var r=n[0],a="wss://"+r.address.replace(/\./g,"-")+".edge.agora.io:"+r.wss;i(a)})).catch((function(i){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(i))}))}))}))},t.prototype._connectWebsocket=function(e){return this._signal=new C(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return a(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",y.NETWORK_CONNECTED),[2]}}))}))},t.prototype._sendStartRelayMessage=function(e){return a(this,void 0,void 0,(function(){var t,i,n,r,a,s;return o(this,(function(o){switch(o.label){case 0:return this._checkSignal(),t=this._genMessage(g.StopPacketTransfer),[4,this._signal.request(t)];case 1:return o.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),i=this._genMessage(g.SetSdkProfile,e),[4,this._signal.request(i)];case 3:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),n=this._genMessage(g.SetSourceChannel,e),[4,this._signal.request(n)];case 4:return o.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return o.sent(),this.emit("event",y.PACKET_JOINED_SRC_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),r=this._genMessage(g.SetSourceUserId,e),[4,this._signal.request(r)];case 6:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),a=this._genMessage(g.SetDestChannel,e),[4,this._signal.request(a)];case 7:return o.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return o.sent(),this.emit("event",y.PACKET_JOINED_DEST_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),s=this._genMessage(g.StartPacketTransfer,e),[4,this._signal.request(s)];case 9:return o.sent(),this.emit("event",y.PACKET_SENT_TO_DEST_CHANNEL),this.state=b.RELAY_STATE_RUNNING,u.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}}))}))},t.prototype._sendReconnectMessage=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return this._checkSignal(),t=this._genMessage(g.Reconnect,e),[4,this._signal.request(t)];case 1:return i.sent(),[2]}}))}))},t.prototype._sendUpdateMessage=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return this._checkSignal(),t=this._genMessage(g.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return i.sent(),this.emit("event",y.PACKET_UPDATE_DEST_CHANNEL),u.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}}))}))},t.prototype._sendStopRelayMessage=function(){return a(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(g.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),u.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}}))}))},t.prototype._genMessage=function(e,t){var i=this,n=[],r=[],a=[],o={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:c.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},s=null;switch(e){case g.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case g.SetSourceChannel:return s=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceChannel",uid:s.uid+"",channelName:s.channelName,token:s.token||this.appId},o;case g.SetSourceUserId:return s=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceUserId",uid:this.uid+""},o;case g.SetDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){n.push(e.channelName),r.push(e.uid+""),a.push(e.token||i.appId)})),o.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:a},o;case g.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case g.Reconnect:return o.clientRequest={command:"Reconnect"},o;case g.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case g.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){n.push(e.channelName),r.push(e.uid+""),a.push(e.token||i.appId)})),o.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:a},o}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new w(m.WS_DISCONNECTED)},t}(l.default);t.default=f;var v=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){h.checkValidObject(e,"srcInfo");var t=e.uid,i=e.channelName,n=e.token;if(n&&!h.isValidToken(n))throw new Error("Invalid token in SrcChannelInfo");if(!h.isValidChannelName(i))throw new Error("Invalid channelName in SrcChannelInfo");if(!p.is32Uint(t))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!h.isValidChannelName(e))throw new Error("Invalid channelName in DestChannelInfo");h.checkValidObject(t,"destInfo");var i=t.uid,n=t.token,r=t.channelName;if(n&&!h.isValidToken(n))throw new Error("Invalid token in DestChannelInfo");if(!h.isValidChannelName(r))throw new Error("Invalid channelName in DestChannelInfo");if(!p.is32Uint(i))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!h.isValidChannelName(e))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=v;var m,g,y,b,k,C=function(e){function t(t,i,n,r){var a=e.call(this)||this;return a._onOpen=function(){a.emit("open")},a._onClose=function(e){a.emit("close"),a.dispose()},a._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(a.emit("status",t.serverStatus),void a.emit(t.serverStatus.command,t.serverStatus)):void 0;a.emit("req_"+t.requestId,t)},a._requestId=1,a.appId=t,a.cname=i,a.uid=n,a.sid=r,a}return r(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new w(m.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise((function(i,n){var r=window.setTimeout((function(){n(new w(m.WAIT_STATUS_TIMEOUT,e))}),5e3);t.once(e,(function(t){clearTimeout(r),t.state&&0!==t.state?n(new w(m.WAIT_STATUS_ERROR,e)):i()})),t.once("dispose",(function(){clearTimeout(r),n(new w(m.WS_ABORT))}))}))},t.prototype.request=function(e){var t=this;return new Promise((function(i,n){var r=t.sendMessage(e),a=window.setTimeout((function(){t.removeAllListeners("req_"+r),n(new w(m.REQUEST_TIMEOUT))}),3e3);t.once("req_"+r,(function(e){clearTimeout(a),e&&200===e.code?i(e):n(new w(m.REQUEST_FAILED,e))})),t.once("dispose",(function(){clearTimeout(a),n(new w(m.WS_ABORT))}))}))},t.prototype.connect=function(e){var t=this;return new Promise((function(i,n){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),i()},t._ws.onclose=function(e){t._ws=null,n(new w(m.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout((function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,n(new w(m.CONNECT_TIMEOUT)))}),5e3),t.once("dispose",(function(){n(new w(m.WS_ABORT))}))}))},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new w(m.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval((function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})}),3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(l.default),w=function(e,t,i){void 0===e&&(e=""),this.code=i,this.data=t,this.message=e};t.ChannelMediaError=w,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(m=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(g||(g={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(y=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(b=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(k=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t,i){"use strict";i.r(t),i.d(t,"isLiveTranscodingValid",(function(){return y})),i.d(t,"generateSessionId",(function(){return v})),i.d(t,"audioLevelHelper",(function(){return d})),i.d(t,"vsResHack",(function(){return m})),i.d(t,"is32Uint",(function(){return g})),i.d(t,"safeCall",(function(){return h})),i.d(t,"random",(function(){return k})),i.d(t,"popBanTip",(function(){return _})),i.d(t,"lengthInUtf8Bytes",(function(){return C})),i.d(t,"audioTimerLoop",(function(){return w})),i.d(t,"generateId",(function(){return f}));var n=i(11),r=i.n(n),a=i(4),o=i(0),s=i(27),l=i.n(s),c=i(24),u=i(15),h=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},d=function(e){return this.audioContext=Object(c.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return o.default.warning("can't find analyser in audioLevelHelper"),0},this},p=1e4;function f(){return++p}function v(){return l()().replace(/-/g,"").toUpperCase()}var m=function(e,t,i){try{o.default.debug("start vsResHack",e);var n=document.createElement("video");n.setAttribute("autoplay",""),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("playsinline",""),n.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(n),n.addEventListener("playing",(function(i){a.isFireFox()?n.videoWidth&&(o.default.debug("[vsResHack] get stream resolution: ","".concat(n.videoWidth," x ").concat(n.videoHeight),e),t(n.videoWidth,n.videoHeight),document.body.removeChild(n)):(o.default.debug("[vsResHack] get stream resolution: ","".concat(n.videoWidth," x ").concat(n.videoHeight),e),t(n.videoWidth,n.videoHeight),document.body.removeChild(n))})),Object(u.setSrcObject)(n,e)}catch(e){i(e)}},g=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},y=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var i in e)if("lowLatency"===i&&"boolean"!=typeof e[i]||"userConfigExtraInfo"===i&&"object"!==r()(e[i])||"transcodingUsers"===i&&!b(e[i])||!~t.indexOf(i)&&"number"!=typeof e[i])throw new Error("Param ["+i+"] is inValid");return!0},b=function(e){for(var t=0;t<e.length;t++)for(var i in e[t])if("number"!=typeof e[t][i])throw new Error("Param user["+t+"] - ["+i+"] is inValid");return!0},k=function(e){isNaN(e)&&(e=1e3);var t=+new Date,i=(t=(9301*t+49297)%233280)/233280;return Math.ceil(i*e)},C=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},w=function(e,t){var i=1/t,n=Object(c.a)(),r=n.createGain();r.gain.value=0,r.connect(n.destination);var a=!1;return function t(){var o=n.createOscillator();o.onended=t,o.connect(r),o.start(0),o.stop(n.currentTime+i),e(n.currentTime),a&&(o.onended=function(){})}(),function(){a=!0}},_=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var i=document.createElement("div");i.style="height: 76px; display: flex; justify-content: center; align-items: center;";var n=document.createElement("span");n.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",n.innerText="!";var r=document.createElement("span");r.innerText="This browser does not support webRTC",i.append(n),i.append(r);var a=document.createElement("div");a.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",a.innerText="OK",t.append(i),t.append(a),a.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},function(t,i,n){"use strict";var r=n(13),a=n.n(r),o=n(17),s=n.n(o),l=n(11),c=n.n(l),u=n(29),h=n.n(u),d=n(7),p=n.n(d),f=n(21),v=n(8),m=function(e){e&&e.apply(this,[].slice.call(arguments,1))},g=n(0),y=n(1),b=n(10),k=n(14),C=n(3),w=function(e){var t=Object(v.b)(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,t.host=e.host instanceof Array?e.host:[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,g.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(Object(v.d)({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){if(t.needReconnect=!0,t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={},t.connection.url){var i=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),n=t.host[t.hostIndex].split(":"),r=t.connection.url.match(/h=([^:]+)&p=(\d+)/);i?(t.turnConfig.url=i[1],Object(C.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[2])+30),Object(C.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[2])+30)):r?(t.turnConfig.url=r[1],Object(C.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(r[2])+30),Object(C.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(r[2])+30)):n&&(t.turnConfig.url=n[0],Object(C.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(n[1])+30),Object(C.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(n[1])+30))}t.connection.onopen=function(e){t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(k.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(v.d)({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(b.lengthInUtf8Bytes)(e.data);var i=JSON.parse(e.data);t.lastMsgTime=Date.now(),i.hasOwnProperty("_id")?t.dispatchEvent(Object(v.d)({type:i._id,msg:i})):i.hasOwnProperty("_type")&&t.dispatchSocketEvent(Object(v.d)({type:i._type,msg:i._message}))}},t.connection.onclose=function(i){t.needReconnect?t.isTimeout||t.isInit?(g.default.debug("["+t.clientId+"] websockect connect timeout"),y.report.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):(t.dispatchEvent(Object(v.d)({type:"disconnect",event:i})),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])):(g.default.debug("["+t.clientId+"] websockect closeed"),m(e.onFailure,i),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(v.d)({type:"close",event:i})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout((function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())}),5e3)},t.creatConnection(),t.sendMessage=function(e,i){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var n=JSON.stringify(e);t.sendbytes+=Object(b.lengthInUtf8Bytes)(n),t.connection.send(n)}else i({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close(),clearInterval(t.requestTimer),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])},t.sendSignalCommand=function(e,i){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,(function(n){n.msg&&i&&i(n.msg._result,n.msg.message),delete t.dispatcher.eventListeners[e._id]})),t.sendMessage(e,(function(e){e.reason="NOT_CONNECTED",i&&i(e.reason,e)}))},t.requests=[];var i=function(e){var i=t.requests.findIndex((function(t){return t.id===e.type}));if(i>=0)var n=t.requests.splice(i,1)[0];n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&n.callback&&n.callback(e.msg._result,e.msg._message)):g.default.warning("Detached Response",e.type,e.msg)},n=function(e){var i=this,n=t.requests.findIndex((function(e){return e.id===i.id}));n>=0&&(i=t.requests.splice(n,1)[0]),i&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",i.callback&&i.callback(e.reason,e)):g.default.warning("handleSendError",i)};return t.sendRequest=function(e,r){e=p()({_id:"_request_"+t.requestID},e),t.requestID+=1;var a={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:r};t.requests.push(a),t.addEventListener(e._id,i),t.sendMessage(e,n.bind(a))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(C.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(C.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),i=t.requests.length-1;i>=0;i--){var n=t.requests[i];n.timeoutCounter>=e?(t.requests.splice(i,1),g.default.error("Request Timeout",n.timeoutCounter,n.message),n.callback&&n.callback("TIMEOUT")):n.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(C.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,(function(){}))},t},_=function(e,t){var i={connect:function(){t.host=e,i.signal=w(t),i.on=i.signal.on,i.dispatchEvent=i.signal.dispatchEvent,i.signal.on("onopen",(function(e){i.signal.onEvent=function(e){i.dispatchEvent(Object(v.d)({type:e.event,msg:e}))},i.dispatchEvent(Object(v.d)({type:"connect",msg:e}))})),i.signal.on("onError",(function(e){onError(e.msg.code,"error")}))},getLastMsgTime:function(){return i.signal&&i.signal.lastMsgTime},getSendBytes:function(){return i.signal.getSendBytes()},getRecvBytes:function(){return i.signal.getRecvBytes()},getDuration:function(){return i.signal.getDuration()},disconnect:function(){i.signal.disconnect()},close:function(){i.signal.close()},getURL:function(){return i.signal.getURL()},reconnect:function(){i.signal.reconnect()},connectNext:function(){i.signal.connectNext()},replaceHost:function(e){i.signal.replaceHost(e)},emitSimpleMessage:function(e,t){i.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){i.signal.sendRequest(e,t)},emitReport:function(e){i.signal.sendReport(e)}};return i.connect(),i},S=n(22),E=n(5),T=n(20),A=n(4),O={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"recover",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},x={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},I={};for(var D in x){var R=x[D];I[R]&&g.default.error("Key Conflict: ".concat(R,": ").concat(x[R],"| ").concat(D)),I[R]=D}var P=function(e){return x[e]||e},M=function(e){return I[e]||e},L=n(9),N=n.n(L),F=function t(i){var n=!1,r=function(e){return{_type:"control",_message:e}},o=function(e,t){var i={};return Object.keys(t).forEach((function(e){Object(C.getParameter)("STATS_FILTER")[e]||(i[P(e)]=t[e])})),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:i}}},l=function(e){return{_type:"publish",_message:e}},u=function(e,t){var i={};return Object.keys(t).forEach((function(e){Object(C.getParameter)("STATS_FILTER")[e]||(i[P(e)]=t[e])})),{_type:"subscribe_stats",_message:{stream_id:e,stats:i}}},d=t.DISCONNECTED,k=t.CONNECTING,w=t.CONNECTED,x=t.DISCONNECTING,I=d,D=Object(v.b)(i);Object.defineProperty(D,"state",{set:function(e){var i=I;I=e,Object(T._setClientConnectionStateRecord)(D.clientId,e),e!==t.CONNECTED&&(D.hasJoined=!1),i!==e&&D.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[i],curState:t.connetionStateMap[e]})},get:function(){return I}}),D.socket=void 0,D.state=d,D.mode=i.mode,D.role=i.role,D.codec=i.codec,D.config={},D.timers={},D.timer_counter={},D.localStreams={},D.remoteStreams={},D.remoteMuteState={},D.attemps=1,D.p2p_attemps=1,D.audioLevel={},D.activeSpeaker=void 0,D.reconnectMode="tryNext",D.rejoinAttempt=0,D.hasChangeBGPAddress=!1,D.traffic_stats={},D.clientId=i.clientId,D.pingpongCounter=0,D.hasInvokeLeave=!1,D.p2ps=new Map,D.liveStreams=new Map,D.injectLiveStreams=new Map,D.remoteStreamsInChannel=new Set,D.subscribeRequestId=new Map,D.publishRequestId=0,D.hasJoined=!1,D.isFirstSuccess=!0,D.peerPublishDurationMap=new Map,function(e){var t=m;e.makeRequest=function(i,n,r){if(void 0===e.socket)return g.default.debug("[".concat(e.clientId,"] No socket available")),void t(r,E.default.INVALID_OPERATION);try{e.socket.emitRequest(i,(function(e,t){var i;"success"===e?"function"==typeof n&&n(t):"function"==typeof r&&(i=t&&t.error_code&&E.GatewayErrorCode[t.error_code]?E.GatewayErrorCode[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,r(i,t))}))}catch(n){g.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(i))),g.default.debug("[".concat(e.clientId,"] "),n),t(r,E.default.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&g.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(i){g.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(D),D.inChannelInfo={joinAt:null,duration:0},D._sendMessage=function(e,t){switch(e){case"SubscribeStats":D.makeReport(u.apply(void 0,h()(t)));break;case"SubscribeRelatedStats":D.makeReport(o.apply(void 0,h()(t)))}};var R=m;D.p2pCounter=Object(b.random)(1e5),D.generateP2PId=function(){return++D.p2pCounter},D.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},D.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},D.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},D.configPublisher=function(e){D.config=e},D.getGatewayInfo=function(e,t){D.makeRequest({_type:"gateway_info"},e,t)},D.setClientRole=function(e,t){g.default.debug("[".concat(D.clientId,"] setClientRole to ").concat(e));var i=y.report.reportApiInvoke(D.joinInfo.sid,{name:"_setClientRole",callback:t});D.makeRequest({_type:"set_client_role",_message:{role:e}},(function(){D.role=e,D.dispatchEvent({type:"client-role-changed",role:e}),i&&i(null,{role:e})}),(function(t,n){if(n&&n.code&&(t=E.GatewayErrorCode[n.code]||"UNKNOW_ERROR_"+n.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===t)return i&&i(null);g.default.error("set Client role error to "+e+": "+t),i&&i(t)}))},D.join=function(e,t,n,r){D.hasInvokeLeave=!1,e.useProxyServer&&(D.hasChangeBGPAddress=!0);var a=(new Date).getTime(),o=e.uid;if(D.inChannelInfo.joinAt&&(D.inChannelInfo.duration+=a-D.inChannelInfo.joinAt),D.inChannelInfo.joinAt=a,D.state!==k)return g.default.error("[".concat(D.clientId,"] GatewayClient.join Failed: state "),D.state),r&&r(E.default.INVALID_OPERATION),void y.report.joinGateway(e.sid,{lts:a,succ:!1,ec:E.default.INVALID_OPERATION,addr:null});if(null!=o&&parseInt(o)!==o)return g.default.error("[".concat(D.clientId,"] Input uid is invalid")),D.state=d,r&&r(E.default.INVALID_PARAMETER),void y.report.joinGateway(e.sid,{lts:a,succ:!1,ec:E.default.INVALID_PARAMETER,addr:null});var s=B.register(D,{uid:o,cname:e&&e.cname});if(s)return D.state=d,r&&r(s),void y.report.joinGateway(e.sid,{lts:a,succ:!1,ec:s,addr:null});D.joinInfo=p()({},e),D.uid=o,D.key=t,D.pingpongCounter=0,H(e,(function(t){if(D.state===x||D.state===d)return r&&r("LEAVE_BEFORE_JOIN_SUCCESS");D.state=w,g.default.debug("[".concat(D.clientId,"] Connected to gateway server")),clearInterval(D.pingTimer),D.pingTimer=setInterval((function(){var e=Object(C.getParameter)("PING_PONG_TIME_OUT");if(++D.pingpongCounter>=e){var t=Date.now();D.socket&&g.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-D.socket.getLastMsgTime(),"ms")),D.socket&&D.socket.getLastMsgTime()&&t-D.socket.getLastMsgTime()>Object(C.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(D.pingpongCounter=0,D.socket.close(),D.socket.dispatchEvent(Object(v.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var i=Date.now();D.makeRequest({_type:"ping"},(function(){D.pingpongCounter=0;var e=Date.now()-i;setTimeout((function(){Object(C.getParameter)("REPORT_STATS")&&D.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})}),1e3)}),(function(e,t){"TIMEOUT"!==e&&(g.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&D.socket&&D.socket.signal&&D.socket.signal.connection&&D.socket.signal.connection.readyState===WebSocket.OPEN&&(g.default.info("Disconnecting websocket connection"),D.socket.signal.connection.close()))}))}),3e3),D.makeRequest(function(e){var t=e.role,n=p()({},D.joinInfo.apResponse),r={session_id:D.joinInfo.sid,app_id:i.appId,channel_key:D.key,channel_name:D.joinInfo.cname,sdk_version:C.VERSION,browser:navigator.userAgent,process_id:Object(y.getProcessId)(),mode:D.mode,codec:D.codec,role:t,has_changed_gateway:Object(C.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||D.hasChangeBGPAddress,ap_response:n,optionalInfo:D.joinInfo.optionalInfo,extend:Object(C.getParameter)("JOIN_EXTEND"),details:{}};if(D.joinInfo.hasOwnProperty("stringUid")&&(r.string_uid=D.joinInfo.stringUid),D.joinInfo.aesmode&&D.joinInfo.aespassword&&(r.aes_mode=D.joinInfo.aesmode,r.aes_secret=D.joinInfo.aespassword),D.socket&&D.socket.signal&&D.socket.signal&&(n.addresses[D.socket.signal.hostIndex]&&(r.ap_response.ticket=n.addresses[D.socket.signal.hostIndex].ticket,delete n.addresses),Object(C.getParameter)("SET_DEFAULT_TURNSERVER")&&D.socket.signal.turnConfig)){var a={username:"test",credential:Object(C.getParameter)("TURN_SERVER_PASSWORD"),forceturn:Object(C.getParameter)("FORCE_TURN")};a.url=D.socket.signal.turnConfig.url,D.socket.signal.turnConfig.tcpport&&(a.tcpport=""+D.socket.signal.turnConfig.tcpport),D.socket.signal.turnConfig.udpport&&(a.udpport=""+D.socket.signal.turnConfig.udpport),D.joinInfo.turnServers.push(a)}return D.dispatchEvent({type:"join-message-hook",joinMessage:r}),{_type:"join",_message:r}}({role:D.role}),(function(t){if(y.report.joinGateway(e.sid,{lts:a,succ:!0,ec:null,vid:e.vid,addr:D.socket.getURL(),firstSuccess:D.isFirstSuccess}),D.joinSuccessLts=Date.now(),D.isFirstSuccess=!1,D.rejoinAttempt=0,D.hasJoined=!0,n&&n(t.uid),!0===t.return_vosip||!0===Object(C.getParameter)("ENABLE_LIVE_SERVER_LIST")){var i=null;try{i=D.socket.signal.connection.url}catch(e){g.default.debug("[".concat(D.clientId,"] Can not get gateway ip: ").concat(e))}i?Object(C.setParameter)("LIVE_SERVER_LIST",[i]):Object(C.setParameter)("LIVE_SERVER_LIST",[])}D.dispatchEvent({type:"join"}),clearInterval(D.timers.trafficStats),D.timers.trafficStats=setInterval((function(){D.makeRequest({_type:"traffic_stats"},(function(e){var t={};for(var i in e)t[M(i)]=e[i];if(t.peer_delay&&t.peer_delay.length){var n=[];t.peer_delay.forEach((function(e){var t={};for(var i in e)t[M(i)]=e[i];n.push(t)})),t.peer_delay=n}D.traffic_stats=t,D.traffic_stats.timestamp=Date.now();var r=D.localStreams[o]||D.localStreams[D.joinInfo.stringUid];r&&(r.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach((function(e){var i=D.remoteStreams[e.peer_uid];i&&(i.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})})),D.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})}))}),3e3)}),(function(t,i){if(g.default.error("[".concat(D.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t){try{y.report.joinGateway(e.sid,{lts:a,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:D.socket.getURL()})}catch(e){}return D.dispatchEvent({type:"onMultiIP",option:i.option})}O[t]&&D.rejoinAttempt<4?D._doWithAction(O[t],n,r):r&&r(t),y.report.joinGateway(e.sid,{lts:a,succ:!1,ec:t,addr:D.socket&&D.socket.getURL()})}))}),(function(t){g.default.error("[".concat(D.clientId,"] User join failed [").concat(t,"]")),r&&r(t),y.report.joinGateway(e.sid,{lts:a,succ:!1,ec:t,addr:D.socket.getURL()})})),this.remoteMuteState={},D.resetAudioVolumeIndication()},D.leave=function(e,t){var i=B.unregister(D);switch(i&&g.default.debug("[".concat(D.clientId,"] "),i),D.p2ps.clear(),D.state){case d:return g.default.debug("[".concat(D.clientId,"] Client Already in DISCONNECTED status")),void R(e);case x:return g.default.debug("[".concat(D.clientId,"] Client Already in DISCONNECTING status")),void R(t,E.default.INVALID_OPERATION);case k:return D.socket&&D.socket.close(),D.socket=void 0,g.default.info("[".concat(D.clientId,"] Client connecting, Leave channel success")),D.state=d,e&&e()}for(var n in D.state=x,D.channelMediaConfig&&(D.channelMediaRelayController&&D.channelMediaRelayController.dispose(),D.channelMediaRelayController=null),clearInterval(D.pingTimer),D.timers)D.timers.hasOwnProperty(n)&&clearInterval(D.timers[n]);for(var n in D.inChannelInfo.joinAt&&(D.inChannelInfo.duration+=Date.now()-D.inChannelInfo.joinAt,D.inChannelInfo.joinAt=null),D.hasJoined?D.makeRequest({_type:"leave"},(function(t){D.socket.close(),D.socket=void 0,g.default.info("[".concat(D.clientId,"] Leave channel success")),D.state=d,e&&e(t)}),(function(e){"TIMEOUT"!==e&&(g.default.error("[".concat(D.clientId,"] Leave Channel Failed"),e),D.state=w,t&&t(e))})):(D.socket&&(D.socket.close(),D.socket=void 0),g.default.info("[".concat(D.clientId,"] Leave channel before joined")),D.state=d,e&&e()),D.localStreams)if(D.localStreams.hasOwnProperty(n)){var r=D.localStreams[n];delete D.localStreams[n],void 0!==r.pc&&(r.pc.close(),r.pc=void 0)}W()},D.publish=function(e,t,i,n){var a=(new Date).getTime(),o=!1;if(e.publishLTS=a,"object"!==c()(e)||null===e)return g.default.error("[".concat(D.clientId,"] Invalid local stream")),n&&n(E.default.INVALID_LOCAL_STREAM),void y.report.publish(D.joinInfo.sid,{lts:a,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:E.default.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return g.default.error("[".concat(D.clientId,"] Invalid local media stream")),n&&n(E.default.INVALID_LOCAL_STREAM),void y.report.publish(D.joinInfo.sid,{lts:a,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:E.default.INVALID_LOCAL_STREAM});if(D.state!==w)return g.default.error("[".concat(D.clientId,"] User is not in the session")),n&&n(E.default.INVALID_OPERATION),void y.report.publish(D.joinInfo.sid,{lts:a,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:E.default.INVALID_OPERATION});var s=e.getAttributes()||{};if(e.local&&void 0===D.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var u=D.generateP2PId();if(D.p2ps.set(u,e),e.p2pId=u,void 0!==e.url)U(l({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()}),(function(t,i){"success"===t?(e.getUserId()!==i&&e.setUserId(i),D.localStreams[i]=e,e.onClose=function(){D.unpublish(e)}):g.default.error("[".concat(D.clientId,"] Publish local stream failed"),t)}));else{D.localStreams[e.getId()]=e,e.connectionSpec={callback:function(s){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution"),D.makeRequest(l({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:u,sdp:s,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:D.codec,extend:Object(C.getParameter)("PUB_EXTEND")}),(function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),g.default.info("[".concat(D.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){D.unpublish(e)},e._onAudioUnmute=function(){D.makeReport(r({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){D.makeReport(r({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){D.makeReport(r({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){D.makeReport(r({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(g.default.debug("[".concat(D.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(g.default.debug("[".concat(D.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=D.timers[e.getId()]&&(clearInterval(D.timers[e.getId()]),clearInterval(D.timers[e.getId()]+"_RelatedStats")),g.default.error("[".concat(D.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(u)),D.p2ps.delete(u),g.default.debug("[".concat(D.clientId,"] publish p2p failed: "),D.p2ps),!o)return o=!0,y.report.publish(D.joinInfo.sid,{lts:a,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:E.default.PEERCONNECTION_FAILED,publishRequestid:D.publishRequestId||0,p2pid:u}),D.dispatchEvent(Object(v.a)({type:"pubP2PLost",stream:e})),n&&n(E.default.PEERCONNECTION_FAILED);D.dispatchEvent(Object(v.a)({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(g.default.debug("[".concat(D.clientId,"] publish p2p connected: "),D.p2ps),e.getId()===e.getUserId()&&(e._isAudioMuted()?D.makeReport(r({action:"mute_local_audio",stream_id:e.getId()})):D.makeReport(r({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?D.makeReport(r({action:"mute_local_video",stream_id:e.getId()})):D.makeReport(r({action:"unmute_local_video",stream_id:e.getId()}))),!o))return o=!0,y.report.publish(D.joinInfo.sid,{lts:a,succ:!0,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null,publishRequestid:D.publishRequestId||0,p2pid:u}),i&&i()},e.pc.processSignalingMessage(t.sdp)}),(function(t,i){g.default.error("Publish Failed: ".concat(t)),y.report.publish(D.joinInfo.sid,{lts:a,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t,publishRequestid:D.publishRequestId||0,p2pid:u}),"TIMEOUT"!=t&&(D.processPublishFailure(e),n&&n(t))}))},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),optimizationMode:e.optimizationMode,isSubscriber:!1,stunServerUrl:D.stunServerUrl,turnServers:D.joinInfo.turnServers,maxAudioBW:s.maxAudioBW,minVideoBW:s.minVideoBW,maxVideoBW:s.maxVideoBW,mode:D.mode,codec:D.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,agoraStream:e,clientId:D.clientId},e.pc=Object(S.a)(e.connectionSpec),e.pc.addStream(e.stream),g.default.debug("[".concat(D.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(i){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution");var n={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:u,sdp:i};D.makeRequest(l(n),(function(t){g.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)}),(function(e,t){g.default.error("Negotiation failed ".concat(e),t,n)}))},clearInterval(D.timers[e.getId()]),D.timers[e.getId()]=setInterval((function(){if(Object(C.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(i){i.forEach((function(i){if(i&&i.id&&!/_recv$/.test(i.id)&&!/^time$/.test(i.id)&&e.getUserId()){if(-1===i.id.indexOf("outbound_rtp")&&-1===i.id.indexOf("OutboundRTP")&&-1===i.type.toLowerCase().indexOf("outbound")||"video"!==i.mediaType||(i.googFrameWidthSent=e.videoWidth+"",i.googFrameHeightSent=e.videoHeight+""),"video"===i.mediaType)try{var n=e.stream.getVideoTracks()[0];i.A_vstd=n.enabled?"0":"1"}catch(e){}if("audio"===i.mediaType)try{var r=e.stream.getAudioTracks()[0];i.A_astd=r.enabled?"0":"1"}catch(e){}if(e.getId()==e.getUserId()){var a=200*t;t++,setTimeout((function(){var e=D.socket&&D.socket.getLastMsgTime()&&Date.now()-D.socket.getLastMsgTime();e>Object(C.getParameter)("REPORT_STATS_TIMEOUT")?g.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):D.makeReport(function(e){var t={};return Object.keys(e).forEach((function(i){Object(C.getParameter)("STATS_FILTER")[i]||(t[P(i)]=e[i])})),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(i))}),a)}else a=200*t,t++,setTimeout((function(){var e=D.socket&&D.socket.getLastMsgTime()&&Date.now()-D.socket.getLastMsgTime();e>Object(C.getParameter)("REPORT_STATS_TIMEOUT")?g.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):D.makeReport(function(e){var t={};return Object.keys(e).forEach((function(i){Object(C.getParameter)("STATS_FILTER")[i]||(t[P(i)]=e[i])})),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(i))}),a)}}))}))}}),3e3);var h=function(){Object(C.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){var i,n,r=D.socket&&D.socket.getLastMsgTime()&&Date.now()-D.socket.getLastMsgTime();r>Object(C.getParameter)("REPORT_STATS_TIMEOUT")?g.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(r)):e.getId()===e.getUserId()?D.makeReport((i=t,n={},Object.keys(i).forEach((function(e){Object(C.getParameter)("STATS_FILTER")[e]||(n[P(e)]=i[e])})),{_type:"publish_related_stats",_message:{stream_type:"high",stats:n}})):D.makeReport(function(e){var t={};return Object.keys(e).forEach((function(i){Object(C.getParameter)("STATS_FILTER")[i]||(t[P(i)]=e[i])})),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))}))};h(),clearInterval(D.timers[e.getId()+"_RelatedStats"]),D.timers[e.getId()+"_RelatedStats"]=setInterval(h,1e3)}}},D.unpublish=function(e,t,i,n){if("object"!==c()(e)||null===e)return g.default.error("[".concat(D.clientId,"] Invalid local stream")),void R(n,E.default.INVALID_LOCAL_STREAM);if(D.state!==w)return g.default.error("[".concat(D.clientId,"] User not in the session")),void R(n,E.default.INVALID_OPERATION);if(null!=D.timers[e.getId()]&&(clearInterval(D.timers[e.getId()]),clearInterval(D.timers[e.getId()+"_RelatedStats"])),void 0!==D.socket)if(e.local&&void 0!==D.localStreams[e.getId()]){delete D.localStreams[e.getId()];var r={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};D.makeRequest({_type:"unpublish",_message:r}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,D.p2ps.delete(e.p2pId),D.dispatchEvent({type:"stream-unpublished",stream:e,options:t}),i&&i()}else g.default.error("[".concat(D.clientId,"] Invalid local stream")),R(n,E.default.INVALID_LOCAL_STREAM);else g.default.error("[".concat(D.clientId,"] User not in the session")),R(n,E.default.INVALID_OPERATION)},D.subscribe=function(e,t,i){var n=(new Date).getTime();e.subscribeLTS=n;var a=!1;if(g.default.info("[".concat(D.clientId,"] Gatewayclient ").concat(D.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==c()(e)||null===e)return g.default.error("[".concat(D.clientId,"] Invalid remote stream")),i&&i(E.default.INVALID_REMOTE_STREAM),void y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:E.default.INVALID_REMOTE_STREAM});if(D.state!==w&&(g.default.error("[".concat(D.clientId,"] User is not in the session")),!a))return a=!0,y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:E.default.INVALID_OPERATION}),i&&i(E.default.INVALID_OPERATION);if(!e.local&&D.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var s=D.generateP2PId();D.p2ps.set(s,e),e.p2pId=s,e.pc=Object(S.a)({callback:function(t){var r={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:D.codec,p2p_id:s,sdp:t,tcc:Object(C.getParameter)("SUBSCRIBE_TCC"),extend:Object(C.getParameter)("SUB_EXTEND")};D.makeRequest({_type:"subscribe",_message:r},(function(t){e.pc.processSignalingMessage(t.sdp)}),(function(t,r){g.default.error("[".concat(D.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),r),y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(D.processSubscribeFailure(e),i&&i(t))}))},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:D.stunServerUrl,turnServers:D.joinInfo.turnServers,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),agoraStream:e,clientId:D.clientId}),e.pc.onaddstream=function(t,i){if(e._onAudioUnmute=function(){D.makeReport(r({action:"unmute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onAudioMute=function(){D.makeReport(r({action:"mute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoUnmute=function(){D.makeReport(r({action:"unmute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoMute=function(){D.makeReport(r({action:"mute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},"ontrack"===i&&"video"===t.track.kind||"onaddstream"===i){g.default.info("[".concat(D.clientId,"] Remote stream subscribed with uid "),e.getId());var n=D.remoteStreams[e.getId()];if(D.remoteStreams[e.getId()].stream="onaddstream"===i?t.stream:t.streams[0],D.remoteStreams[e.getId()].hasVideo()){if(Object(A.isFireFox)()||Object(A.isSafari)()){var a=D.remoteStreams[e.getId()].stream;Object(b.vsResHack)(a,(function(t,i){e.videoWidth=t,e.videoHeight=i}),(function(e){return g.default.warning("[".concat(D.clientId,"] vsResHack failed: ")+e)}))}}else{var o=D.remoteStreams[e.getId()];o.peerMuteVideo=!0,D._adjustPCMuteStatus(o)}n&&n.isPlaying()&&n.elementID&&(g.default.debug("[".concat(D.clientId,"] Reload Player ").concat(n.elementID," StreamId ").concat(n.getId())),e.audioOutput=n.audioOutput,n.stop(),e.play(n.elementID,n.playOptions)),delete e.audioLevelHelper;var s=Object(v.e)({type:"stream-subscribed",stream:D.remoteStreams[e.getId()]});D.dispatchEvent(s)}},clearInterval(D.timers[e.getId()]),D.timers[e.getId()]=setInterval((function(){if(Object(C.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(i){i.forEach((function(i){if(i&&i.id){if(/_send$/.test(i.id)||/^time$/.test(i.id)||/^bweforvideo$/.test(i.id))return;-1===i.id.indexOf("inbound_rtp")&&-1===i.id.indexOf("inbound-rtp")&&-1===i.type.toLowerCase().indexOf("inbound")||"video"!==i.mediaType||(i.googFrameWidthReceived=e.videoWidth+"",i.googFrameHeightReceived=e.videoHeight+"");var n=200*t;t++;var r=e.getId();setTimeout((function(){var t=D.socket&&D.socket.getLastMsgTime()&&Date.now()-D.socket.getLastMsgTime();if(t>Object(C.getParameter)("REPORT_STATS_TIMEOUT"))g.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));else{if("video"===i.mediaType)try{var n=e.stream.getVideoTracks()[0];i.A_vrtd=n.enabled?"0":"1",e.player&&e.player.freezeTimeCounterList.length>0&&(i.A_vrft=e.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(e){}if("audio"===i.mediaType)try{var a=e.stream.getAudioTracks()[0];i.A_artd=a.enabled?"0":"1"}catch(e){}D.makeReport(u(r,i))}}),n)}}))}))}}),3e3),clearInterval(D.timers[e.getId()+"_RelatedStats"]),D.timers[e.getId()+"_RelatedStats"]=setInterval((function(){if(Object(C.getParameter)("REPORT_STATS")&&e&&e.pc){var t=D.socket&&D.socket.getLastMsgTime()&&Date.now()-D.socket.getLastMsgTime();if(t>Object(C.getParameter)("REPORT_STATS_TIMEOUT"))return void g.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){e.player&&(e.hasVideo()&&!e.peerMuteVideo&&(t.isFreeze=e.player.freezeCount>e.player.lastFreezeCount),e.player.lastFreezeCount=e.player.freezeCount),D.makeReport(o(e.getId(),t))})),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats((function(t){D.makeReport(o(e.getId(),t))}))}}),1e3),D.audioLevel[e.getId()]=0,clearInterval(D.timers[e.getId()+"audio"]),D.timers[e.getId()+"audio"]=setInterval((function(){D.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats((function(t){t.forEach((function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var i in D.audioLevel[e.getId()]<20&&(D.audioLevel[e.getId()]+=1),D.audioLevel)i!==""+e.getId()&&D.audioLevel[i]>0&&(D.audioLevel[i]-=1);var n=Object.keys(D.audioLevel).sort((function(e,t){return D.audioLevel[t]-D.audioLevel[e]}));if(D.activeSpeaker!==n[0]){var r=Object(v.a)({type:"active-speaker",uid:n[0]});D.dispatchEvent(r),D.activeSpeaker=n[0],g.default.debug("[".concat(D.clientId,"] Update active speaker: ").concat(D.activeSpeaker))}}}))}),50)}),50),e.pc.oniceconnectionstatechange=function(r){if("failed"===r)null!=D.timers[e.getId()]&&(clearInterval(D.timers[e.getId()]),clearInterval(D.timers[e.getId()]+"audio")),g.default.error("[".concat(D.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(s)),g.default.debug("[".concat(D.clientId,"] subscribe p2p failed: "),D.p2ps),a||(a=!0,i&&i(E.default.PEERCONNECTION_FAILED),y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:E.default.PEERCONNECTION_FAILED,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:s})),D.remoteStreams[e.getId()]&&D.p2ps.has(s)&&(D.p2ps.delete(s),D.dispatchEvent(Object(v.a)({type:"subP2PLost",stream:e})));else if("connected"===r&&(g.default.debug("[".concat(D.clientId,"] subscribe p2p connected: "),D.p2ps),!a)){a=!0,y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:s}),D._adjustPCMuteStatus(e);var o=!1,l=!1,c=!1,u=setInterval((function(){o&&l||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"audio"===t.mediaType){if((t.googDecodingNormal>0||t.audioOutputLevel>0)&&!o){o=!0,D.dispatchEvent({type:"first-audio-frame-decode",stream:e}),o&&l&&clearInterval(u);var i=Date.now(),n=y.report.getSessionStartTime(D.joinInfo.sid);y.report.firstAudioDecode(D.joinInfo.sid,{peerid:e.uintId,uid:D.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:s})}parseInt(t.packetsReceived)>0&&!l&&(l=!0,D.dispatchEvent({type:"first-audio-packet-received",stream:e}),o&&l&&clearInterval(u),i=Date.now(),n=y.report.getSessionStartTime(D.joinInfo.sid),y.report.firstAudioReceived(D.joinInfo.sid,{peerid:e.uintId,uid:D.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:s}))}}))}),100):clearInterval(u))}),100),h=!1,d=!1,p=setInterval((function(){h&&d||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"video"===t.mediaType){if((t.framesDecoded>0||t.googFramesDecoded>0)&&!h){h=!0,D.dispatchEvent({type:"first-video-frame-decode",stream:e}),h&&d&&clearInterval(p);var i=Date.now(),n=y.report.getSessionStartTime(D.joinInfo.sid);e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,y.report.firstVideoDecode(D.joinInfo.sid,{peerid:e.uintId,width:parseInt(t.googFrameWidthReceived)||0,height:parseInt(t.googFrameHeightReceived)||0,uid:D.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:s})}t.packetsReceived>0&&!d&&(d=!0,D.dispatchEvent({type:"first-video-packet-received",stream:e}),h&&d&&clearInterval(p),i=Date.now(),n=y.report.getSessionStartTime(D.joinInfo.sid),y.report.firstVideoReceived(D.joinInfo.sid,{peerid:e.uintId,uid:D.uid,elapse:i-n,subscribeElapse:i-e.subscribeLTS,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:s}))}}))}),100):clearInterval(p))}),100),f=setInterval((function(){if(!c){var t=e.getId(),i=D.traffic_stats;if(i&&i.peer_delay){var n=i.peer_delay.find((function(e){return e.peer_uid==t}));if(n){if(c=!0,D.peerPublishDurationMap.get(e.getId()))return void clearInterval(f);var r=n.peer_publish_audio_duration,a=n.peer_publish_video_duration;if(void 0===r||void 0===a)return;D.peerPublishDurationMap.set(e.getId(),!0);var o=y.report.getSessionStartTime(D.joinInfo.sid),s=(r||a)+(Date.now()-i.timestamp),l=Date.now();y.report.peerPublishStatus({audiotag:r?1:-1,videotag:a?1:-1,lts:l,sid:D.joinInfo.sid,cname:D.joinInfo.cname,cid:D.joinInfo.cid,uid:D.joinInfo.uid,elapse:l-o,peer:t,peerPublishDuration:s,joinChannelSuccessElapse:l-D.joinSuccessLts,subscribeElapse:l-e.subscribeLTS}),clearInterval(f)}}}}),1e3);return e.sid=D.joinInfo.sid,t&&t()}}}else g.default.error("[".concat(D.clientId,"] Invalid remote stream")),a||(a=!0,i&&i(E.default.INVALID_REMOTE_STREAM),y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:E.default.INVALID_REMOTE_STREAM}));else g.default.error("[".concat(D.clientId,"] No such remote stream")),a||(a=!0,i&&i(E.default.NO_SUCH_REMOTE_STREAM),y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:E.default.NO_SUCH_REMOTE_STREAM}))},D.subscribeChange=function(e,t,i){var n=Date.now();g.default.info("[".concat(D.clientId,"] Gatewayclient ").concat(D.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),D._adjustPCMuteStatus(e);var r={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};D.makeRequest({_type:"subscribe_change",_message:r},(function(i){var r=Object(v.e)({type:"stream-subscribe-changed",stream:D.remoteStreams[e.getId()]});y.report.subscribe(D.joinInfo.sid,{lts:n,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:D.subscribeRequestId.get(e.getId())||0,p2pid:D.p2ps.get(e.getId())}),D.dispatchEvent(r),t&&t()}),(function(t,n){g.default.error("[".concat(D.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,n),i&&i(t,n)}))},D.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&D.p2ps.get(e.p2pId)===e&&D.p2ps.delete(e.p2pId),D.localStreams[e.getUserId()]===e&&delete D.localStreams[e.getUserId()],D.localStreams[e.getId()]===e&&delete D.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},D.processSubscribeFailure=function(e){e.p2pId&&D.p2ps.get(e.p2pId)===e&&D.p2ps.delete(e.p2pId),e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},D._adjustPCMuteStatus=function(e){!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach((function(t){if(t&&t.track&&"audio"===t.track.kind){var i=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(i=!1),t.track.enabled=!!i}else if(t&&t.track&&"video"===t.track.kind){var n=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(n=!1),t.track.enabled=!!n}}))},D.unsubscribe=function(e,t,i){if("object"!==c()(e)||null===e)return g.default.error("[".concat(D.clientId,"] Invalid remote stream")),void R(i,E.default.INVALID_REMOTE_STREAM);if(D.state!==w)return g.default.error("[".concat(D.clientId,"] User is not in the session")),void R(i,E.default.INVALID_OPERATION);if(null!=D.timers[e.getId()]&&(clearInterval(D.timers[e.getId()]),clearInterval(D.timers[e.getId()]+"audio")),null!=D.audioLevel[e.getId()]&&delete D.audioLevel[e.getId()],null!=D.timer_counter[e.getId()]&&delete D.timer_counter[e.getId()],D.remoteStreams.hasOwnProperty(e.getId())){if(!D.socket)return g.default.error("[".concat(D.clientId,"] User is not in the session")),void R(i,E.default.INVALID_OPERATION);if(e.local)return g.default.error("[".concat(D.clientId,"] Invalid remote stream")),void R(i,E.default.INVALID_REMOTE_STREAM);e.close(),e.stop();var n={stream_id:e.getId()};D.makeRequest({_type:"unsubscribe",_message:n}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,D.p2ps.delete(e.p2pId),g.default.info("[".concat(D.clientId,"] Unsubscribe stream success")),t&&t()}else R(i,E.default.NO_SUCH_REMOTE_STREAM)},D.setRemoteVideoStreamType=function(e,t){if(g.default.debug("[".concat(D.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===c()(e)&&null!==e)if(D.state===w){if(!e.local){switch(t){case D.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case D.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case D.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var i={stream_id:e.getId(),stream_type:t};D.makeRequest({_type:"switch_video_stream",_message:i},(function(){g.default.debug("SwitchVideoStream Success ".concat(i.stream_id," ").concat(i.stream_type))}),(function(e,t){g.default.error("SwitchVideoStream Error ".concat(e," ").concat(i.stream_id," ").concat(i.stream_type),t)}))}}else g.default.error("[".concat(D.clientId,"] User is not in the session"));else g.default.error("[".concat(D.clientId,"] Invalid remote stream"))},D.renewToken=function(e,t,i){e?D.key?D.state!==w?(g.default.debug("[".concat(D.clientId,"] Client is not connected. Trying to rejoin")),D.key=e,D.rejoin(),t&&t()):(g.default.debug("[".concat(D.clientId,"] renewToken from ").concat(D.key," to ").concat(e)),D.makeRequest({_type:"renew_token",_message:{token:e}},t,i)):(g.default.error("[".concat(D.clientId,"] Client is previously joined without token")),i&&i(E.default.INVALID_PARAMETER)):(g.default.error("[".concat(D.clientId,"] Invalid Token ").concat(e)),i&&i(E.default.INVALID_PARAMETER))},D.setStreamFallbackOption=function(e,t){if(g.default.debug("[".concat(D.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===c()(e)&&null!==e)if(D.state===w){if(!e.local){switch(t){case D.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case D.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case D.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var i={stream_id:e.getId(),fallback_type:t};D.makeRequest({_type:"set_fallback_option",_message:i},(function(){g.default.debug("SetStreamFallbackOption success ".concat(i.stream_id," ").concat(t))}),(function(e,n){g.default.error("Failed to SetStreamFallbackOption ".concat(i.stream_id," ").concat(t," ").concat(e),n)}))}}else g.default.error("[".concat(D.clientId,"] User is not in the session"));else g.default.error("[".concat(D.clientId,"] Invalid remote stream"))},D.enableAudioVolumeIndicator=function(e,t){D.audioVolumeIndication.enabled=!0,D.audioVolumeIndication.interval=e,D.audioVolumeIndication.smooth=t,D.resetAudioVolumeIndication()},D.resetAudioVolumeIndication=function(){if(clearInterval(D.timers.audioVolumeIndication),clearInterval(D.timers.audioVolumeSampling),D.audioVolumeIndication.enabled&&D.audioVolumeIndication.interval){var e=Math.floor(1e3*D.audioVolumeIndication.smooth/100);clearInterval(D.timers.audioVolumeSampling),D.timers.audioVolumeSampling=setInterval((function(){D.audioVolumeSampling||(D.audioVolumeSampling={});var t={};for(var i in D.remoteStreams){var n=D.remoteStreams[i];if(n.stream&&n.hasAudio()){var r=n.getAudioLevel();r>0&&r<1&&(r*=100);var a=D.audioVolumeSampling[i]||[];for(a.push(r);a.length>e;)a.shift();t[i]=a}}D.audioVolumeSampling=t}),100),clearInterval(D.timers.audioVolumeIndication),D.timers.audioVolumeIndication=setInterval((function(){if(D.socket&&D.socket.signal&&D.socket.signal.connection&&D.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in D.remoteStreams)if(D.audioVolumeSampling&&D.audioVolumeSampling[t]){var i=D.audioVolumeSampling[t],n=0;i.forEach((function(e){n+=e}));var r={uid:t,level:Math.floor(n/i.length)};r.level&&e.push(r)}var a=e.sort((function(e,t){return e.level-t.level}));g.default.debug("[".concat(D.clientId,"] volume-indicator "),JSON.stringify(a)),D.audioVolumeIndication.sortedAudioVolumes=a;var o=Object(v.a)({type:"volume-indicator",attr:a});D.dispatchEvent(o)}}),D.audioVolumeIndication.interval)}},D.closeGateway=function(){g.default.debug("[".concat(D.clientId,"] close gateway")),D.state=d,D.socket.close(),V()},D.startChannelMediaRelay=function(){var e=s()(a.a.mark((function e(t){var i,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.channelMediaRelayController){e.next=2;break}throw new L.ChannelMediaError("RELAY_ALREADY_START","",L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return i=function(e){D.dispatchEvent({type:"channel-media-relay-event",code:e})},n=function(e,t,i){e===L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===L.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(D.channelMediaRelayController.dispose(),D.channelMediaRelayController=null),D.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:i})},D.channelMediaRelayController=new N.a(D.joinInfo,D.clientId),D.channelMediaRelayController.on("event",i),D.channelMediaRelayController.on("state",n),e.prev=7,e.next=10,D.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),g.default.debug("[".concat(D.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),D.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[r=e.t0 instanceof L.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR"]}),D.channelMediaRelayController&&(D.channelMediaRelayController.dispose(),D.channelMediaConfig=null,D.channelMediaRelayController=null),D.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(r,null,L.CHANNEL_MEDIA_RELAY_ERROR[r]);case 22:D.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),D.channelMediaConfig=t;case 24:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),D.updateChannelMediaRelay=function(){var t=s()(a.a.mark((function t(i){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(D.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,D.channelMediaRelayController.updateChannelMediaRelay(i);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),g.default.debug("[".concat(D.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===L.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",D.dispatchEvent({type:"channel-media-relay-event",code:L.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),D.dispatchEvent({type:"channel-media-relay-state",state:n,code:L.CHANNEL_MEDIA_RELAY_ERROR[r]}),D.channelMediaRelayController&&(D.channelMediaRelayController.dispose(),D.channelMediaConfig=null,D.channelMediaRelayController=null),D.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(r,null,L.CHANNEL_MEDIA_RELAY_ERROR[r]);case 18:D.channelMediaConfig=i;case 19:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),D.stopChannelMediaRelay=s()(a.a.mark((function t(){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(D.channelMediaRelayController){t.next=2;break}throw new L.ChannelMediaError("RELAY_NOT_START",null,L.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,D.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),g.default.debug("[".concat(D.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),i=e instanceof L.ChannelMediaError?e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===L.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===L.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",D.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,code:L.CHANNEL_MEDIA_RELAY_ERROR[i]}),D.channelMediaRelayController&&(D.channelMediaRelayController.dispose(),D.channelMediaConfig=null,D.channelMediaRelayController=null),D.dispatchEvent({type:"channel-media-relay-state",state:L.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new L.ChannelMediaError(i,null,L.CHANNEL_MEDIA_RELAY_ERROR[i]);case 17:D.channelMediaConfig=null,D.channelMediaRelayController=null;case 19:case"end":return t.stop()}}),t,null,[[2,7]])}))),D.sendMetadata=function(e,t){D.makeRequest(function(e){return{_type:"send_metadata",_message:{session_id:D.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(e)))}}}(e),(function(){g.default.debug("[".concat(D.clientId,'] send metadata "').concat(e,'" success')),t&&t(null)}),(function(i){g.default.error("[".concat(D.clientId,'] send metadata "').concat(e,'" failed'),i),t&&t(i)}))};var F=function(){g.default.debug("[".concat(D.clientId,"] Reconnect gateway")),D.state=d,D.socket.close(),V(),D.reconnectMode="recover",D.state=k,j()};D.recover=F;var V=function(){for(var e in D.dispatchEvent({type:"before-clear-connection"}),D.timers)D.timers.hasOwnProperty(e)&&clearInterval(D.timers[e]);for(var e in D.remoteStreams)if(D.remoteStreams.hasOwnProperty(e)){var t=D.remoteStreams[e],i=Object(v.a)({type:"stream-removed",uid:t.getId(),stream:t});D.dispatchEvent(i)}D.p2ps.clear(),W(),q(),clearInterval(D.pingTimer)};D.rejoin=function(){D.socket&&(clearInterval(D.pingTimer),D.socket.close(),D.socket=void 0),D.state=k,j()};var j=function(e,t){D.dispatchEvent(Object(v.a)({type:"rejoin-start"})),e=e||function(e){g.default.info("[".concat(D.clientId,"] User ").concat(e," is re-joined to ").concat(D.joinInfo.cname)),D.dispatchEvent(Object(v.a)({type:"rejoin"})),D.channelMediaConfig&&D.startChannelMediaRelay(D.channelMediaConfig).then((function(){g.default.debug("[".concat(D.clientId,"] restartChannelMediaRelay success"))})).catch((function(e){g.default.debug("[".concat(D.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))})),D.liveStreams&&D.liveStreams.size&&D.liveStreams.forEach((function(e,t){e&&D.setLiveTranscoding(D.transcoding),D.startLiveStreaming(t,e)})),D.injectLiveStreams&&D.injectLiveStreams.size&&D.injectLiveStreams.forEach((function(e,t){D.addInjectStreamUrl(t,e)}))},t=t||function(e){g.default.error("[".concat(D.clientId,"] Re-join to channel failed "),e),D.dispatchEvent(Object(v.e)({type:"error",reason:e}))},D.key?(++D.rejoinAttempt,D.join(D.joinInfo,D.key,e,t)):g.default.error("[".concat(D.clientId,"] Connection recover failed [Invalid channel key]"))},H=function(e,t,i){if(D.onConnect=t,D.socket){if(D.dispatchEvent({type:"reconnect"}),"retry"===D.reconnectMode)g.default.debug("[".concat(D.clientId,"] Retry current gateway")),D.socket.reconnect();else if("tryNext"===D.reconnectMode)g.default.debug("[".concat(D.clientId,"] Try next gateway")),D.socket.connectNext();else if("recover"===D.reconnectMode){g.default.debug("[".concat(D.clientId,"] Recover gateway")),g.default.debug("[".concat(D.clientId,"] Try to reconnect choose server and get gateway list again ")),D.reconnectingCS=!0;var r=D.joinInfo&&D.joinInfo.sid;Object(T.getGatewayList)(D.joinInfo,(function(e){g.default.debug("[".concat(D.clientId,"] session:  ").concat(r," get gateway list success")),D.joinInfo.apResponse=e.res,D.reconnectingCS?D.socket.replaceHost(e.gateway_addr):g.default.debug("[".concat(D.clientId,"] session:  ").concat(r," already leave"))}))}}else D.socket=_(e.gatewayAddr,{sid:D.joinInfo.sid,clientId:D.clientId}),D.socket.on("start-connection",(function(e){D.ticket=e&&e.msg&&e.msg.ticket})),D.socket.on("on_uplink_stats",(function(e){var t={};for(var i in e)t[M(i)]=e[i];if(D.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,D.localStreams[D.uid]){var n=D.localStreams[D.uid].uplinkStats;n&&n.period_fir===t.period_fir||g.default.debug("[".concat(D.clientId,"]: Period fir change to: ").concat(t.period_fir)),D.localStreams[D.uid].uplinkStats=t}})),D.socket.on("connect",(function(){D.dispatchEvent({type:"connected"}),D.attemps=1,D.onConnect()})),D.socket.on("recover",(function(){D.state=k,g.default.debug("[".concat(D.clientId,"] Try to reconnect choose server and get gateway list again ")),D.reconnectingCS=!0;var e=D.joinInfo&&D.joinInfo.sid;Object(T.getGatewayList)(D.joinInfo,(function(t){g.default.debug("[".concat(D.clientId,"] session:  ").concat(e," get gateway list success")),D.reconnectingCS?D.socket.replaceHost(t.gateway_addr):g.default.debug("[".concat(D.clientId,"] session:  ").concat(e," already leave"))}))})),D.socket.on("disconnect",(function(e){if(g.default.debug("[".concat(D.clientId,"] Receive disconnect message")),D.state!==d){D.state=d;var t=Object(v.e)({type:"error",reason:E.default.SOCKET_DISCONNECTED});if(D.dispatchEvent(t),D.reconnectMode=0===D.p2ps.size?"tryNext":"retry",V(),D.channelMediaRelayController&&D.channelMediaRelayController.dispose(),D.channelMediaRelayController=null,1!=n){var i=1e3*Math.min(30,Math.pow(2,D.attemps)-1);if(g.default.error("[".concat(D.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(D.attemps,"] after ").concat(i/1e3," seconds")),D.hasInvokeLeave)return g.default.debug("[".concat(D.clientId,"] No reconnection because Client.leave has been invoked")),void(D.hasInvokeLeave=!1);setTimeout((function(){D.attemps++,D.state=k,D.inChannelInfo&&Date.now()-D.inChannelInfo.joinAt>Object(C.getParameter)("TICKET_RENEW_TIMEOUT")?(g.default.debug("Recovering to renew ticket"),F()):j()}),i)}}})),D.socket.on("on_add_audio_stream",(function(e){if(g.default.info("[".concat(D.clientId,"] Newly added audio stream with uid ").concat(e.uid)),D.joinInfo.stringUid&&"string"!=typeof e.uid&&g.default.error("StringUID is Mixed with UintUID"),D.remoteStreamsInChannel.has(e.uid)||D.remoteStreamsInChannel.add(e.uid),void 0===D.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});t.peerMuteVideo=!0,D.remoteStreams[e.uid]=t;var i=Object(v.e)({type:"stream-added",stream:t});D.dispatchEvent(i);var n=D.remoteMuteState[e.uid];n&&n.audio&&(i=Object(v.a)({type:"mute-audio",uid:e.uid}),D.dispatchEvent(i)),n&&n.video&&(i=Object(v.a)({type:"mute-video",uid:e.uid}),D.dispatchEvent(i))}y.report.onAddAudioStream(D.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:D.uid})})),D.socket.on("on_update_stream",(function(e){var t=D.remoteStreams[e.uid];if(D.joinInfo.stringUid&&"string"!=typeof e.uid&&g.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&D._adjustPCMuteStatus(t);var i=Object(v.e)({type:"stream-updated",stream:t});D.dispatchEvent(i)}else g.default.debug("[".concat(D.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid));y.report.onUpdateStream(D.joinInfo.sid,{peerid:e.uint_id||e.uid,audio:e.audio,video:e.video,uid:D.uid})})),D.socket.on("on_add_video_stream",(function(e){if(g.default.info("[".concat(D.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),D.joinInfo.stringUid&&"string"!=typeof e.uid&&g.default.error("StringUID is Mixed with UintUID"),D.remoteStreamsInChannel.has(e.uid)||D.remoteStreamsInChannel.add(e.uid),void 0===D.remoteStreams[e.uid]){var t=Object(f.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});D.remoteStreams[e.uid]=t;var i=Object(v.e)({type:"stream-added",stream:t});D.dispatchEvent(i);var n=D.remoteMuteState[e.uid];n&&n.audio&&(i=Object(v.a)({type:"mute-audio",uid:e.uid}),D.dispatchEvent(i)),n&&n.video&&(i=Object(v.a)({type:"mute-video",uid:e.uid}),D.dispatchEvent(i))}else{var r=D.remoteStreams[e.uid];if(r.video=!0,r.peerMuteVideo=!1,r.pc&&D._adjustPCMuteStatus(r),g.default.info("[".concat(D.clientId,"] Stream changed: enable video ").concat(e.uid)),void 0!==r.stream&&r.isPlaying()){var a=r.player.elementID;r.stop(),r.play(a,r.playOptions)}}y.report.onAddVideoStream(D.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:D.uid})})),D.socket.on("on_remove_stream",(function(e){D.remoteStreamsInChannel.has(e.uid)&&D.remoteStreamsInChannel.delete(e.uid);var t=D.remoteStreams[e.uid];if(t){delete D.remoteStreams[e.uid],delete D.remoteMuteState[e.uid];var i=Object(v.e)({type:"stream-removed",stream:t});D.dispatchEvent(i),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,D.p2ps.delete(t.p2pId)),y.report.onRemoveStream(D.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:D.uid})}else g.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)})),D.socket.on("on_publish_stream",(function(e){var t=D.localStreams[e.uid],i=Object(v.e)({type:"streamPublished",stream:t});D.dispatchEvent(i)})),D.socket.on("mute_audio",(function(e){g.default.info("[".concat(D.clientId,"] rcv peer mute audio: ").concat(e.uid)),D.remoteMuteState[e.uid]=D.remoteMuteState[e.uid]||{audio:!1,video:!1},D.remoteMuteState[e.uid].audio=!0;var t=Object(v.a)({type:"mute-audio",uid:e.uid}),i=D.remoteStreams[e.uid];i?(i.peerMuteAudio=!0,i.pc&&D._adjustPCMuteStatus(i),D.dispatchEvent(t)):g.default.debug("Ignoring event ".concat(e.type),e)})),D.socket.on("unmute_audio",(function(e){g.default.info("[".concat(D.clientId,"] rcv peer unmute audio: ").concat(e.uid)),D.remoteMuteState[e.uid]=D.remoteMuteState[e.uid]||{audio:!1,video:!1},D.remoteMuteState[e.uid].audio=!1;var t=Object(v.a)({type:"unmute-audio",uid:e.uid}),i=D.remoteStreams[e.uid];i?(i.peerMuteAudio=!1,i.pc&&D._adjustPCMuteStatus(i),D.dispatchEvent(t)):g.default.debug("Ignoring event ".concat(e.type),e)})),D.socket.on("mute_video",(function(e){g.default.info("[".concat(D.clientId,"] rcv peer mute video: ").concat(e.uid)),D.remoteMuteState[e.uid]=D.remoteMuteState[e.uid]||{audio:!1,video:!1},D.remoteMuteState[e.uid].video=!0;var t=Object(v.a)({type:"mute-video",uid:e.uid}),i=D.remoteStreams[e.uid];i?(i.peerMuteVideo=!0,i.pc&&D._adjustPCMuteStatus(i),D.dispatchEvent(t)):g.default.debug("Ignoring event ".concat(e.type),e)})),D.socket.on("unmute_video",(function(e){g.default.info("[".concat(D.clientId,"] rcv peer unmute video: ").concat(e.uid)),D.remoteMuteState[e.uid]=D.remoteMuteState[e.uid]||{audio:!1,video:!1},D.remoteMuteState[e.uid].video=!1;var t=Object(v.a)({type:"unmute-video",uid:e.uid}),i=D.remoteStreams[e.uid];i?(i.peerMuteVideo=!1,i.pc&&D._adjustPCMuteStatus(i),D.dispatchEvent(t)):g.default.debug("Ignoring event ".concat(e.type),e)})),D.socket.on("on_crypt_error",(function(e){g.default.warning("[".concat(D.clientId,"] stream crypt error"));var t=Object(v.a)({type:"crypt-error",cryptType:e.crypt_type});D.dispatchEvent(t)})),D.socket.on("on_user_banned",(function(e){g.default.info("[".concat(D.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=Object(v.a)({type:"client-banned",uid:e.uid,attr:e.error_code});D.dispatchEvent(t),n=!0})),D.socket.on("on_stream_fallback_update",(function(e){g.default.info("[".concat(D.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=Object(v.a)({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});D.dispatchEvent(t)})),D.socket.on("stream_recover",(function(e){g.default.info("[".concat(D.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=Object(v.a)({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});D.dispatchEvent(t)})),D.socket.on("on_p2p_lost",(function(e){g.default.debug("[".concat(D.clientId,"] p2plost: "),e,"p2ps:",D.p2ps);var t,i="DTLS failed";(t=D.localStreams[e.uid]||D.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(i="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&y.report.publish(D.joinInfo.sid,{lts:t.publishLTS,succ:!1,audio:t.hasAudio(),video:t.hasVideo(),screenshare:t.hasScreen(),audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:i,publishRequestid:D.publishRequestId||0,p2pid:D.p2ps.get(t.getId())}),"subscribe"===e.event&&y.report.subscribe(D.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:i,subscribeRequestid:D.subscribeRequestId.get(t.getId())||0,p2pid:D.p2ps.get(t.getId())})):g.default.warning("P2PLost Stream Not found",e),g.default.debug("[".concat(D.clientId,"] p2plost:"),e.p2pid),(t=D.p2ps.get(e.p2pid))&&(D.p2ps.delete(e.p2pid),t.local?D.dispatchEvent(Object(v.a)({type:"pubP2PLost",stream:t,attr:i})):D.remoteStreams[t.getId()]&&D.dispatchEvent(Object(v.a)({type:"subP2PLost",stream:t,attr:i})))})),D.socket.on("on_token_privilege_will_expire",(function(e){g.default.debug("[".concat(D.clientId,"] Received Message onTokenPrivilegeWillExpire")),D.dispatchEvent(Object(v.a)({type:"onTokenPrivilegeWillExpire"}))})),D.socket.on("on_token_privilege_did_expire",(function(){g.default.warning("[".concat(D.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),D.closeGateway(),D.dispatchEvent(Object(v.a)({type:"onTokenPrivilegeDidExpire"}))})),D.socket.on("enable_local_video",(function(e){D.dispatchEvent(Object(v.a)({type:"enable-local-video",uid:e.uid}))})),D.socket.on("disable_local_video",(function(e){D.dispatchEvent(Object(v.a)({type:"disable-local-video",uid:e.uid}))})),D._doWithAction=function(e,t,i){"tryNext"===e?function(e,t){g.default.debug("[".concat(D.clientId,"] Connect next gateway")),D.state=d,D.socket.close(),V(),D.reconnectMode="tryNext",D.state=k,j(e,t)}(t,i):"retry"===e?function(e,t){g.default.debug("[".concat(D.clientId,"] Reconnect gateway")),D.state=d,D.socket.close(),V(),D.reconnectMode="retry",D.state=k,j(e,t)}(t,i):"quit"===e?(g.default.debug("[".concat(D.clientId,"] quit gateway")),D.state=d,D.socket.close(),V()):"recover"===e&&F()},D.socket.on("on_notification",(function(e){if(g.default.debug("[".concat(D.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===E.GatewayErrorCode[e.code])return D.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?D._doWithAction(O[E.GatewayErrorCode[e.code]]):e.action&&D._doWithAction(e.action)})),D.socket.on("on_user_offline",(function(e){var t=Object(v.a)({type:"peer-leave",uid:e.uid});if(D.remoteStreamsInChannel.has(e.uid)&&D.remoteStreamsInChannel.delete(e.uid),D.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=D.remoteStreams[e.uid]),t.reason=e.reason,D.dispatchEvent(t),D.remoteStreams.hasOwnProperty(e.uid)){g.default.info("[".concat(D.clientId,"] closing stream on peer leave"),e.uid);var i=D.remoteStreams[e.uid];i.close(),delete D.remoteStreams[e.uid],delete D.remoteMuteState[e.uid],y.report.onRemoveStream(D.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:D.uid}),void 0!==i.pc&&(i.pc.close(),i.pc=void 0,D.p2ps.delete(i.p2pId))}D.timers.hasOwnProperty(e.uid)&&(clearInterval(D.timers[e.uid]),clearInterval(D.timers[e.uid]+"_RelatedStats"),delete D.timers[e.uid]),null!=D.audioLevel[e.uid]&&delete D.audioLevel[e.uid],null!=D.timer_counter[e.uid]&&delete D.timer_counter[e.uid]})),D.socket.on("onUplinkStats",(function(e){})),D.socket.on("liveStreamingStarted",(function(e){var t=Object(v.c)({type:"liveStreamingStarted",url:e.url});D.dispatchEvent(t)})),D.socket.on("liveStreamingFailed",(function(e){var t=Object(v.c)({type:"liveStreamingFailed",url:e.url});D.dispatchEvent(t)})),D.socket.on("liveStreamingStopped",(function(e){var t=Object(v.c)({type:"liveStreamingStopped",url:e.url});D.dispatchEvent(t)})),D.socket.on("liveTranscodingUpdated",(function(e){var t=Object(v.c)({type:"liveTranscodingUpdated",reason:e.reason});D.dispatchEvent(t)})),D.socket.on("streamInjectedStatus",(function(e){var t=Object(v.c)({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});D.dispatchEvent(t)})),D.socket.on("on_user_online",(function(e){D.joinInfo.stringUid&&"string"!=typeof e.uid&&g.default.error("StringUID is Mixed with UintUID"),D.dispatchEvent({type:"peer-online",uid:e.uid})})),D.socket.on("receive_metadata",(function(e){D.joinInfo.stringUid&&"string"!=typeof e.uid&&g.default.error("StringUID is Mixed with UintUID");var t=decodeURIComponent(escape(window.atob(e.metadata)));g.default.debug("[".concat(D.clientId,"] received ").concat(e.uid," metadata: ").concat(t)),D.dispatchEvent({type:"receive-metadata",uid:e.uid,metadata:t})}))},U=function(e,t){if(void 0!==D.socket)try{D.socket.emitSimpleMessage(e,(function(e,i){t&&t(e,i)}))}catch(e){g.default.error("[".concat(D.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else g.default.error("[".concat(D.clientId,"] Error in sendSimpleSdp [socket not ready]"))},q=function(){for(var e in D.localStreams)if(void 0!==D.localStreams[e]){var t=D.localStreams[e];delete D.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},W=function(){for(var e in D.remoteStreamsInChannel.clear(),D.remoteStreams)if(D.remoteStreams.hasOwnProperty(e)){var t=D.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete D.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return D},B={_gatewayClients:{},register:function(e,t){if(!t.uid){var i="NO_UID_PROVIDED";return g.default.error("[".concat(e.clientId,"] "),i,t),i}return t.cname?this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e?(i="UID_CONFLICT",g.default.error("[".concat(e.clientId,"] "),i,t),i):(g.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null):(i="NO_CHANNEL_PROVIDED",g.default.error("[".concat(e.clientId,"] "),i,t),i)},unregister:function(e){var t=e&&e.uid,i=e.joinInfo&&e.joinInfo.cname;if(!t||!i){var n="INVALID_GATEWAYCLIENT";return g.default.error("[".concat(e.clientId,"] "),n),n}if(this._gatewayClients[i]&&this._gatewayClients[i][t])return this._gatewayClients[i][t]!==e?(n="GATEWAYCLIENT_UID_CONFLICT",g.default.error("[".concat(e.clientId,"] "),n),n):(g.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[i][t],null);n="GATEWEAY_CLIENT_UNREGISTERED",g.default.error("[".concat(e.clientId,"] "),n)}};F.DISCONNECTED=0,F.CONNECTING=1,F.CONNECTED=2,F.DISCONNECTING=3,F.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},i.a=F},function(e,t,i){e.exports=i(62)},function(e,t,i){"use strict";i.r(t),i.d(t,"post",(function(){return u})),i.d(t,"shouldUseHttps",(function(){return h})),i.d(t,"getHTTPSendBytes",(function(){return s})),i.d(t,"getHTTPRecvBytes",(function(){return l})),i.d(t,"resetHTTPByetsCount",(function(){return c}));var n=i(3),r=i(10),a=0,o=0,s=function(){return a},l=function(){return o},c=function(){a=0,o=0},u=function(e,t,i,s,l){var c=new XMLHttpRequest;if(c.timeout=t.timeout||Object(n.getParameter)("HTTP_CONNECT_TIMEOUT"),c.open("POST",e,!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),l)for(var u in l)"withCredentials"==u?c.withCredentials=!0:c.setRequestHeader(u,l[u]);c.onload=function(e){o+=Object(r.lengthInUtf8Bytes)(c.responseText),i&&i(c.responseText)},c.onerror=function(t){s&&s(t,e)},c.ontimeout=function(t){s&&s(t,e)};var h=JSON.stringify(t);a+=Object(r.lengthInUtf8Bytes)(h),c.send(h)},h=function(){return"https:"==document.location.protocol}},function(e,t,i){"use strict";i.r(t),i.d(t,"RTCPeerConnection",(function(){return _})),i.d(t,"getUserMedia",(function(){return o})),i.d(t,"attachMediaStream",(function(){return s})),i.d(t,"reattachMediaStream",(function(){return l})),i.d(t,"setSrcObject",(function(){return p})),i.d(t,"getSrcObject",(function(){return f})),i.d(t,"webrtcDetectedBrowser",(function(){return c})),i.d(t,"webrtcDetectedVersion",(function(){return u})),i.d(t,"webrtcMinimumVersion",(function(){return h})),i.d(t,"webrtcTesting",(function(){return S})),i.d(t,"webrtcUtils",(function(){return g}));var n=i(11),r=i.n(n),a=i(4),o=null,s=null,l=null,c=null,u=null,h=null,d=null,p=null,f=null,v=null,m={addStream:null},g={log:function(){},extractVersion:function(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i])}};if("object"==("undefined"==typeof window?"undefined":r()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(p=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},f=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}):(p=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),o=window.navigator&&window.navigator.getUserMedia):(p=function(e,t){e.srcObject=t},f=function(e){return e.srcObject}),s=function(e,t){p(e,t)},l=function(e,t){p(e,f(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var y in g.log("This appears to be Firefox"),c="firefox",u=g.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),h=31,v=mozRTCPeerConnection,m)m[y]=v.prototype[y];if(d=function(e,t){if(u<38&&e&&e.iceServers){for(var i=[],n=0;n<e.iceServers.length;n++){var r=e.iceServers[n];if(r.hasOwnProperty("urls"))for(var a=0;a<r.urls.length;a++){var o={url:r.urls[a]};0===r.urls[a].indexOf("turn")&&(o.username=r.username,o.credential=r.credential),i.push(o)}else i.push(e.iceServers[n])}e.iceServers=i}var s=new v(e,t);for(var l in m)s[l]=m[l];return s},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),o=function(e,t,i){var n=function(e){if("object"!==r()(e)||e.require)return e;var t=[];return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n=e[i]="object"===r()(e[i])?e[i]:{ideal:e[i]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(i),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[i]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var a={};a[i]="number"==typeof n.ideal?{min:n.ideal,max:n.ideal}:n.ideal,e.advanced.push(a),delete n.ideal,Object.keys(n).length||delete e[i]}}})),t.length&&(e.require=t),e};return u<38&&(g.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=n(e.audio)),e.video&&(e.video=n(e.video)),g.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,i)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:w,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},u<41){var b=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return b().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var y in g.log("This appears to be Chrome"),c="chrome",u=g.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),h=38,v=webkitRTCPeerConnection,m)m[y]=v.prototype[y];d=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var i=new v(e,t);for(var n in m)i[n]=m[n];var r=i.getStats.bind(i);return i.getStats=function(e,t,i){var n=arguments;n.length>0&&"function"==typeof e&&(t?(i=t,t=e,n=[e=null,t,i]):(t=e,n=[e=null,t]));var a=function(e){var t={};return e.result().forEach((function(e){var i={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){i[t]=e.stat(t)})),t[i.id]=i})),t};if(n.length>=2){var o=function(e){n[1](a(e))};return r.apply(this,[o,n[0]])}return r()},i},["createOffer","createAnswer"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===r()(arguments[0])){var i=1===arguments.length?arguments[0]:void 0;return new Promise((function(n,r){t.apply(e,[n,r,i])}))}return t.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,i=this;return new Promise((function(n,r){t.apply(i,[e[0],function(){n(),e.length>=2&&e[1].apply(null,[])},function(t){r(t),e.length>=3&&e[2].apply(null,[t])}])}))}}));var k=function(e){if("object"!==r()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"===r()(e[i])?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[a("min",i)]=n.ideal,t.optional.push(o),(o={})[a("max",i)]=n.ideal,t.optional.push(o)):(o[a("",i)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[a("",i)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,i)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(o=function(e,t,i){return e.audio&&(e.audio=k(e.audio)),e.video&&(e.video=k(e.video)),g.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,i)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:w,enumerateDevices:function(){return new Promise((function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources((function(i){e(i.map((function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}})))}))}))}}),navigator.mediaDevices.getUserMedia){if((Object(a.getBrowserVersion)()?Number(Object(a.getBrowserVersion)().split(".")[0]):void 0)<46){var C=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return g.log("spec:   "+JSON.stringify(e)),e.audio=k(e.audio),e.video=k(e.video),g.log("chrome: "+JSON.stringify(e)),C(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return w(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){g.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){g.log("Dummy mediaDevices.removeEventListener called.")}),s=function(e,t){u>=43?p(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:g.log("Error attaching stream to element.")},l=function(e,t){u>=43?p(e,f(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(g.log("This appears to be Edge"),c="edge",u=g.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),h=12):g.log("Browser does not appear to be WebRTC-capable");else g.log("This does not appear to be a browser"),c="not a browser";function w(e){return new Promise((function(t,i){o(e,t,i)}))}var _,S={};try{Object.defineProperty(S,"version",{set:function(e){u=e}})}catch(e){}d?_=d:"undefined"!=typeof window&&(_=window.RTCPeerConnection)},function(e,t,i){"use strict";var n=i(13),r=i.n(n),a=i(17),o=i.n(a),s=i(49),l=i.n(s),c=i(4),u=i(1),h=i(2),d=i(0),p=(i(24),i(3),i(5),i(50)),f=i.n(p),v=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function m(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),i=t.length,n=e,r=n.length,a=new Uint8Array(r),o=new Uint8Array(256),s=0;s<256;s++)o[s]=s;for(var l=0,c=0;c<256;c++){var u=[o[l=(l+o[c]+t[c%i])%256],o[c]];o[c]=u[0],o[l]=u[1]}var h=0;l=0;for(var d=0;d<0+r;d++){var p=[o[l=(l+o[h=(h+1)%256])%256],o[h]];o[h]=p[0],o[l]=p[1],d>=0&&(a[d-0]=n[d-0]^o[(o[h]+o[l])%256])}var f=String.fromCharCode.apply(null,a);return Function("var winSize = 5; return `"+f+"`")()}function g(e,t){var i=m(t),n=f.a.createProgramFromSources(e,[m(v),i]),r=e.getAttribLocation(n,"a_position"),a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(r);var o=2,s=e.FLOAT,l=!1,c=0,u=0;e.vertexAttribPointer(r,o,s,l,c,u);var h=e.getAttribLocation(n,"a_texCoord"),d=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(h),e.vertexAttribPointer(h,o=2,s=e.FLOAT,l=!1,c=0,u=0),n}var y=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function b(e,t,i){var n=e.gl;this.program=g(n,y),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY");n.uniform1f(e,1)}}var k=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function C(e,t,i){var n=e.gl,r=1/t,a=1/i,o=5;this.program=g(n,k),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY"),t=n.getUniformLocation(this.program,"u_singleStepOffset"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform2f(t,r,a),n.uniform1f(i,o),n.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){r=1/e,a=1/t}}var w=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function _(e,t,i){var n=e.gl,r=1/t,a=1/i,o=5;this.program=g(n,w),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY"),t=n.getUniformLocation(this.program,"u_singleStepOffset"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform2f(t,r,a),n.uniform1f(i,o),n.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){r=1/e,a=1/t}}var S=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function E(e,t,i){var n=e.gl,r=1/t,a=1/i,o=5;this.program=g(n,S),this.setUniforms=function(){n.getUniformLocation(this.program,"u_image");var e=n.getUniformLocation(this.program,"u_flipY"),t=n.getUniformLocation(this.program,"u_singleStepOffset"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform2f(t,r,a),n.uniform1f(i,o),n.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){r=1/e,a=1/t}}var T=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function A(e,t,i){var n=e.gl,r=5,a=.1,o=.5,s=175/180*3.141593,l=115/180*3.141593,c=173/180*3.141593,u=116/180*3.141593,h=2.04203545,d=0,p=0,f=0,v=[],m=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],b=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=g(n,T),this.setUniforms=function(){var t=n.getUniformLocation(this.program,"u_flipY"),i=n.getUniformLocation(this.program,"u_denoiseLevel");n.uniform1f(i,r),n.uniform1f(t,1);var m=n.getUniformLocation(this.program,"light");n.uniform1f(m,a);var g=n.getUniformLocation(this.program,"redness");n.uniform1f(g,o);var y=n.getUniformLocation(this.program,"skin_he_max"),b=n.getUniformLocation(this.program,"skin_he_min"),k=n.getUniformLocation(this.program,"skin_hc_max"),C=n.getUniformLocation(this.program,"skin_hc_min"),w=n.getUniformLocation(this.program,"skin_hc_axis"),_=n.getUniformLocation(this.program,"facts_rotate_c"),S=n.getUniformLocation(this.program,"facts_rotate_le"),E=n.getUniformLocation(this.program,"facts_rotate_ge");n.uniform1f(y,s),n.uniform1f(b,l),n.uniform1f(k,c),n.uniform1f(C,u),n.uniform1f(w,h),n.uniform1f(_,d),n.uniform1f(S,p),n.uniform1f(E,f);var T=n.getUniformLocation(this.program,"u_originImage");n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,e.inputTexture),n.uniform1i(T,2);for(var A=["lighten_lut"],O=[n.TEXTURE3],x=0;x<A.length;x++){var I=n.getUniformLocation(this.program,A[x]);n.activeTexture(O[x]),n.bindTexture(n.TEXTURE_2D,v[x]),n.uniform1i(I,x+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(r=e.denoiseLevel),void 0!==e.lightLevel&&(a=e.lightLevel),void 0!==e.rednessLevel&&this._updateRedness(o=e.rednessLevel),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,i,n=3.141593,r=e,a=r;r>1&&(r=1),r<0&&(r=0),a>1&&(a=1),a<0&&(a=0),d=.8*r,a<.8&&(a=0),(h=(117-4*a)/180*n)<(u=(116-4*a)/180*n)&&(h=u),u<n/2&&(u=n/2),h<n/2&&(h=n/2),(l=(115-4*a)/180*n)<n/2&&(l=n/2),(c=173/180*n)>n&&(c=n),h>n&&(h=n),(s=175/180*n)>n&&(s=n),i=c-h,f=(t=s-c)>.01?d*i/t:d,i=h-u,p=(t=u-l)>.01?d*i/t:d},this._updateLut=function(e){var t=null;0==e&&(t=y),1==e&&(t=b),2==e&&(t=m);for(var i=[new Uint8Array(t)],r=[256],a=[1],o=0;o<i.length;o++)n.bindTexture(n.TEXTURE_2D,v[o]),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r[o],a[o],0,n.LUMINANCE,n.UNSIGNED_BYTE,i[o])},this._init=function(){for(var e=[new Uint8Array(y)],t=[256],i=[1],r=0;r<e.length;r++){var a=n.createTexture();n.bindTexture(n.TEXTURE_2D,a),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,t[r],i[r],0,n.LUMINANCE,n.UNSIGNED_BYTE,e[r]),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),v.push(a)}},this._init()}var O=!1;function x(){this.programs=[];var e=this,t=null,i=null;e.gl=null,e.inputTexture=null;var n=[],r=[],a=0,o=0;e._initGl=function(i,s){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var l=0;l<4;l++){var c=t.createTexture();t.bindTexture(t.TEXTURE_2D,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),l<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,s,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,s,i,0,t.RGBA,t.UNSIGNED_BYTE,null);var u=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,u),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,c,0),n.push(c),r.push(u)}t.viewport(0,0,i,s),a=i,o=s},e.render=function(s){if(t){var l=0;o==s.videoWidth&&a===s.videoHeight&&(l=2),t.viewport(0,0,s.videoWidth,s.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s);for(var c=O?e.programs.length-1:0,u=0;u<=c;u++){var h=e.programs[u].program;t.useProgram(h);var d=t.getUniformLocation(h,"u_image");e.programs[u].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,r[l+u%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n[l+u%2]),t.uniform1i(d,0)}t.useProgram(i);var p=t.getUniformLocation(i,"u_flipY");t.uniform1f(p,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){O=e},e.init=function(n,r,a){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=a.getContext("webgl"),e.gl=t,e._initGl(n,r),e.programs.push(new b(this,n,r)),e.programs.push(new C(this,n,r)),e.programs.push(new _(this,n,r)),e.programs.push(new E(this,n,r)),e.programs.push(new A(this,n,r)),i=e.programs[0].program},e.release=function(){e.gl=null,t=null,i=null,e.inputTexture=null,e.programs=[],n=[],r=[]},e.setDenoiseLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({denoiseLevel:t})}))},e.setLightLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lightLevel:t})}))},e.setRednessLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({rednessLevel:t})}))},e.setContrastLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})}))},e.setSize=function(t,i){e.programs.forEach((function(e){e.setSize&&e.setSize(t,i)}))}}x._instance=null,x.getInstance=function(){return x._instance||(x._instance=new x),x._instance},t.a={addVideoEffectCapability:function(e){e.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(e.videoEffect.fps=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(t){return new Promise((function(i){e.videoEffect.canvas||(e.videoEffect.canvas=document.createElement("canvas")),e.videoEffect.video||(e.videoEffect.video=document.createElement("video")),e.videoEffect.video.setAttribute("autoplay",""),e.videoEffect.video.setAttribute("muted",""),e.videoEffect.video.muted=!0,e.videoEffect.video.setAttribute("playsinline",""),e.videoEffect.video.setAttribute("style","display:none"),e.videoEffect.video.srcObject=t;var n=t.getVideoTracks()[0].getSettings(),r=n.width,a=n.height;console.log("Width: ".concat(r,", Height: ").concat(a)),e.videoEffect.canvas.setAttribute("width",r),e.videoEffect.canvas.setAttribute("height",a),e.videoEffect.video.setAttribute("width",r),e.videoEffect.video.setAttribute("height",a);var o=x.getInstance();o.init(e.videoEffect.video.width,e.videoEffect.video.height,e.videoEffect.canvas),o.setDenoiseLevel(e.videoEffect.denoiseLevel),o.setLightLevel(e.videoEffect.lightLevel),o.setRednessLevel(e.videoEffect.rednessLevel),o.setContrastLevel(e.videoEffect.lighteningContrastLevel),e.videoEffect.video.addEventListener("playing",(function t(){var n=e.videoEffect.canvas.captureStream(e.videoEffect.fps);e.videoEffect.video.removeEventListener("playing",t,!0),i([n.getVideoTracks()[0],e.videoEffect.video])}),!0),e.videoEffect.video.play()}))},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return d.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var i=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}));if(i&&i.replaceTrack&&t)return i.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=e.videoEffect.enableBeauty?e._disableEffect():Promise.resolve(),x.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then((function(t){var i=l()(t,2),n=i[1];e.videoEffect.canvasVideoTrack=i[0];var r=x.getInstance();return requestAnimationFrame((function t(){e.videoEffect.enableBeauty&&r.render(n),e.videoEffect.videoContextInited&&requestAnimationFrame(t)})),c.isChrome()&&document.addEventListener("visibilitychange",(function(){document,document.hidden?e.videoEffect.stopChromeBackgroundLoop=function(e,t){var i=1/t,n=new AudioContext,r=n.createGain();r.gain.value=0,r.connect(n.destination),function t(){var o=n.createOscillator();o.onended=t,o.connect(r),o.start(0),o.stop(n.currentTime+i),e(),a&&(o.onended=function(){n.close()})}();var a=!1;return function(){a=!0}}((function(){e.videoEffect.enableBeauty&&r.render(n)}),e.videoEffect.fps):e.videoEffect.stopChromeBackgroundLoop&&(e.videoEffect.stopChromeBackgroundLoop(),e.videoEffect.stopChromeBackgroundLoop=null)}),!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()})):(d.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(e.videoEffect.canvas),"video"===t.tagName.toLowerCase())){var i=t.getAttribute("style");e.videoEffect.canvas.setAttribute("style",i),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&e.videoEffect.enableBeauty&&e.videoEffect.canvas){e.player.div.removeChild(e.videoEffect.canvas);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(e.videoEffect.canvas.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;return e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}))),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack?t.replaceTrack(e.videoEffect.canvasVideoTrack):Promise.resolve()},e.setBeautyEffectOptions=function(){var t=o()(r.a.mark((function t(i,n){var a,o=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(h.checkValidBoolean)(i,"enabled"),a=x.getInstance(),e.videoEffect.enableBeauty==i){t.next=14;break}if(a.setEnableBeauty(i),!i){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:e.videoEffect.enableBeauty=i,u.report.reportApiInvoke(e.sid,{callback:null,options:o,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(i){t.next=16;break}return t.abrupt("return");case 16:if(!n){t.next=20;break}Object(h.checkValidObject)(n,"options"),t.next=21;break;case 20:return t.abrupt("return");case 21:if(void 0!==n.smoothnessLevel&&(Object(h.checkValidFloatNumber)(n.smoothnessLevel,"smoothnessLevel",0,1),e.videoEffect.denoiseLevel=10*n.smoothnessLevel,e.videoEffect.denoiseLevel<.1&&(e.videoEffect.denoiseLevel=.1),a.setDenoiseLevel(e.videoEffect.denoiseLevel)),void 0!==n.lighteningLevel&&(Object(h.checkValidFloatNumber)(n.lighteningLevel,"lighteningLevel",0,1),e.videoEffect.lightLevel=n.lighteningLevel/2,e.videoEffect.lightLevel<.01&&(e.videoEffect.lightLevel=.01),a.setLightLevel(e.videoEffect.lightLevel)),void 0!==n.rednessLevel&&(Object(h.checkValidFloatNumber)(n.rednessLevel,"rednessLevel",0,1),e.videoEffect.rednessLevel=n.rednessLevel,e.videoEffect.rednessLevel<.01&&(e.videoEffect.rednessLevel=.01),a.setRednessLevel(e.videoEffect.rednessLevel)),void 0===n.lighteningContrastLevel){t.next=29;break}if(0===n.lighteningContrastLevel||1===n.lighteningContrastLevel||2===n.lighteningContrastLevel){t.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:e.videoEffect.lighteningContrastLevel=parseFloat(n.lighteningContrastLevel),a.setContrastLevel(e.videoEffect.lighteningContrastLevel);case 29:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()},restoreVideoEffect:function(e){return e.videoEffect.enableBeauty?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){e.videoEffect.enableBeauty&&e.videoEffect.canvas&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){return e.videoEffect.enableBeauty?e._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(e){return!!(e.videoEffect.enableBeauty&&e.videoEffect&&e.videoEffect.videoContextInited)&&(d.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(e,t){function i(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)}))}}},function(e,t,i){"use strict";var n=i(36),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===r.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function i(i,n){t[n]="object"==typeof t[n]&&"object"==typeof i?e(t[n],i):i}for(var n=0,r=arguments.length;n<r;n++)c(arguments[n],i);return t},deepMerge:function e(){var t={};function i(i,n){t[n]="object"==typeof t[n]&&"object"==typeof i?e(t[n],i):"object"==typeof i?e({},i):i}for(var n=0,r=arguments.length;n<r;n++)c(arguments[n],i);return t},extend:function(e,t,i){return c(t,(function(t,r){e[r]=i&&"function"==typeof t?n(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(7),r=i.n(n),a=i(8),o=i(0),s=i(5);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var c=new function(){var e=Object(a.b)();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,i){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo((function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()}),(function(t){o.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,i&&i(t)}))},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return o.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then((function(t){e&&setTimeout((function(){e(t)}),0)})).catch((function(e){t&&t(e)}))},e._reloadDevicesInfo=function(t,i){var n=[];e._enumerateDevices((function(i){var a=Date.now();for(var s in i.forEach((function(t){var i=e.devicesHistory[t.deviceId];if((i?i.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var r=i||{initAt:a};r.device=t,r.state=e.deviceStates.ACTIVE,n.push(r),e.devicesHistory[t.deviceId]=r}e.devicesHistory[t.deviceId].lastReloadAt=a})),e.devicesHistory){var l=e.devicesHistory[s];l&&l.state==e.deviceStates.ACTIVE&&l.lastReloadAt!==a&&(l.state=e.deviceStates.INACTIVE,n.push(l)),l.lastReloadAt=a}e.state==e.states.INITED&&n.forEach((function(t){var i=r()({},t);switch(t.device.kind){case"audioinput":i.type="recordingDeviceChanged";break;case"audiooutput":i.type="playoutDeviceChanged";break;case"videoinput":i.type="cameraChanged";break;default:o.default.warning("Unknown device change",i),i.type="unknownDeviceChanged"}e.dispatchEvent(i)})),t&&t()}),i)},e.getDeviceById=function(t,i,n){e.getDevices((function(e){for(var r=0;r<e.length;r++){var a=e[r];if(a&&a.deviceId===t)return i&&i(a)}return n&&n()}))},e.searchDeviceNameById=function(t){var i=e.devicesHistory[t];return i?i.device.label||i.device.deviceId:null},e.getDevices=function(t,i){e._enumerateDevices(t,(function(e){i&&i(e.name+": "+e.message)}))},e.getVideoCameraIdByLabel=function(t,i,n){e.getCameras((function(e){var r,a=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){o=!0,r=e})),f:function(){try{a||null==n.return||n.return()}finally{if(o)throw r}}}}(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.label===t)return i&&i(o.deviceId)}}catch(e){a.e(e)}finally{a.f()}return n&&n(s.default.NOT_FIND_DEVICE_BY_LABEL)}),n)},e.getRecordingDevices=function(t,i){return e._enumerateDevices((function(e){var i=e.filter((function(e){return"audioinput"==e.kind}));t&&t(i)}),(function(e){i&&i(e)}))},e.getPlayoutDevices=function(t,i){return e._enumerateDevices((function(e){var i=e.filter((function(e){return"audiooutput"==e.kind}));t&&t(i)}),(function(e){i&&i(e)}))},e.getCameras=function(t,i){return e._enumerateDevices((function(e){var i=e.filter((function(e){return"videoinput"==e.kind}));t&&t(i)}),(function(e){i&&i(e)}))},e._init((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(function(){e._reloadDevicesInfo()})),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)})),e}},function(e,t,i){"use strict";i.r(t),i.d(t,"_getReconnectCSTimer",(function(){return w})),i.d(t,"_setClientConnectionStateRecord",(function(){return _})),i.d(t,"getGatewayList",(function(){return E})),i.d(t,"getUserAccount",(function(){return A}));var n=i(11),r=i.n(n),a=i(13),o=i.n(a),s=i(17),l=i.n(s),c=i(3),u=(i(4),i(0)),h=i(14),d=i(1),p=i(5),f=function(e,t){var i=!1,n=0,r={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:c.VERSION,seq:0,requestId:1};Object(c.getParameter)("PROXY_CS").map((function(a){var o=(new Date).getTime();v("https://"+a+"/api/v1",r,(function(r,s){if(r)return u.default.debug("["+e.clientId+"] Request proxy server failed: ",r),n++,d.report.requestProxyAppCenter(e.sid,{lts:o,succ:!1,APAddr:a,workerManagerList:null,ec:JSON.stringify(r),response:JSON.stringify({err:r,res:s})}),void(n>=Object(c.getParameter)("PROXY_CS").length&&t&&t("Get proxy server failed: request all failed"));if(!i)if((s=JSON.parse(s)).json_body){var l=JSON.parse(s.json_body);if(u.default.debug("["+e.clientId+"] App return:",l.servers),200!==l.code)u.default.debug("["+e.clientId+"] "+(r="Get proxy server failed: response code ["+l.code+"], reason [ "+l.reason+"]")),d.report.requestProxyAppCenter(e.sid,{lts:o,succ:!1,APAddr:a,workerManagerList:null,ec:r,response:JSON.stringify({err:r,res:s})});else{i=!0;var h=g(l.servers);d.report.requestProxyAppCenter(e.sid,{lts:o,succ:!0,APAddr:a,workerManagerList:JSON.stringify(h),ec:null,response:JSON.stringify({res:s})}),t&&t(null,h)}}else u.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),d.report.requestProxyAppCenter(e.sid,{lts:o,succ:!1,APAddr:a,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:s})})}))}))},v=function(e,t,i){var n={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(h.post)(e,n,(function(e){i&&i(null,e)}),(function(e){i&&i(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})},m=function(e,t,i){var n=!1,r=0,a={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map((function(o){var s=(new Date).getTime();!function(e,t,i){Object(h.post)(e,t,(function(e){i&&i(null,e)}),(function(e){i&&i(e)}))}("https://"+o+":4000/v2/machine",a,(function(a,l){if(a)return u.default.debug("["+e.clientId+"] Request worker manager failed: ",a),r++,d.report.requestProxyWorkerManager(e.sid,{lts:s,succ:!1,workerManagerAddr:o,ec:JSON.stringify(a),response:JSON.stringify({res:l})}),void(r>=t.length&&i&&i("requeet worker manager server failed: request failed"));if(!n){if(!(l=JSON.parse(l)).serverResponse)return i&&i("requeet worker manager server failed: serverResponse is undefined");n=!0,d.report.requestProxyWorkerManager(e.sid,{lts:s,succ:!0,workerManagerAddr:o,ec:JSON.stringify(a),response:JSON.stringify({res:l})}),i&&i(null,{address:o,serverResponse:l.serverResponse})}}))}))},g=function(e){if(!e||[]instanceof Array==0)return[];var t=[];return e.forEach((function(e){var i;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?i="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(u.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),i="".concat(e.address,":").concat(e.tcp)),t.push(i)):u.default.error("["+joinInfo.clientId+"] Invalid address format ",e)})),t},y=i(12),b=i(30),k={},C={},w=function(e){return k[e]},_=function(e,t){C[e]=t},S=function(e,t,i,n,r){var a=(new Date).getTime(),o=t,s="";t.multiIP&&t.multiIP.gateway_ip&&(s={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var l={opid:133,flag:4096,ts:+new Date,key:t.token,cname:t.cname,sid:t.sid,detail:{6:t.stringUid,11:r},uid:t.uid||0};s&&(l.detail[5]=JSON.stringify(s)),Object(h.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=wrtc_gateway"),l,(function(r){try{var s=JSON.parse(r);s.res&&(s=s.res);var l=s.code}catch(e){var h="requestChooseServer failed with unexpected body "+r;return u.default.error("["+o.clientId+"]",h),n(h)}if(l)return g=new RegExp(/10102\d{2}$/).test(l)?"NO_SERVICE_AVAILABLE":p.APErrorCode[s.code]||l,d.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:g}),n("Get server node failed ["+g+"]",e,g);var f=[],v=Object(c.getParameter)("GATEWAY_DOMAINS"),m=0;if(e.indexOf(v[1])>-1&&(m=1),s.addresses.forEach((function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(v[m++%v.length],":").concat(e.port):(u.default.info("["+o.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),f.push(t)):u.default.error("["+o.clientId+"] Invalid address format ",e)})),!f.length){u.default.error("["+o.clientId+"] Empty Address response",s);var g="EMPTY_ADDRESS_RESPONSE";return d.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:g}),n("Get server node failed ["+g+"]",e,g)}return i({gateway_addr:f,uid:s.uid,cid:s.cid,vid:s.detail&&s.detail[8],res:s,uni_lbs_ip:s.detail},e)}),(function(e,i){"timeout"===e.type?(d.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:i,serverList:null,ec:"timeout"}),n("Connect choose server timeout",i)):(d.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:i,serverList:null,ec:"server_wrong"}),n("Connect choose server error",i))}),{"X-Packet-Service-Type":0,"X-Packet-URI":69})},E=function(e,t,i){var n=!1,r=null,a=1,o=1,s=e.clientId,l=function t(o,l){if(!n){var h=[];!function(e,t,i){for(var n,r=(new Date).getTime(),a=!1,o=!0,s=0,l=Object(c.getParameter)("WEBCS_DOMAIN"),h=Object(c.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),f=function(i,n){if(a)d.report.joinChooseServer(e.sid,{lts:r,succ:!0,csAddr:n,serverList:i.gateway_addr,cid:i.cid+"",uid:i.uid+"",ec:null},!1);else{if(clearTimeout(C),a=!0,e.proxyServer)for(var o=i.gateway_addr,s=0;s<o.length;s++){var l=o[s].split(":");i.gateway_addr[s]=e.proxyServer+"/ws/?h="+l[0]+"&p="+l[1]}t(i),d.report.joinChooseServer(e.sid,{lts:r,succ:!0,csAddr:n,serverList:i.gateway_addr,cid:i.cid+"",uid:i.uid+"",ec:null},!0)}},v=function(t,r,a){s++,u.default.error("["+e.clientId+"]",t,r,a),a&&-1===p.JOIN_CS_RETRY_LIST.indexOf(a)&&(o=!1,n=a),s===l.length+h.length&&i(n)},m=0;m<l.length;++m){var g;if("string"==typeof l[m]){var y=l[m];g=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(y+"/api/v1"):"https://".concat(y,"/api/v1");var k=Object(b.getAreaCodeByWebCS)(y);u.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(g,", ").concat(k)),S(g,e,f,v,k)}else u.default.error("["+e.clientId+"] Invalid Host",l[m])}var C=setTimeout((function(){if(!a)for(var t=0;t<h.length;++t)if("string"==typeof h[t]){var i=h[t];g=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(i+"/api/v1"):"https://".concat(i,"/api/v1");var n=Object(b.getAreaCodeByWebCS)(i);u.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(g,", ").concat(n)),S(g,e,f,v,n)}else u.default.error("["+e.clientId+"] Invalid Host",h[t])}),1e3);setTimeout((function(){!a&&o&&i()}),Object(c.getParameter)("WEBCS_BACKUP_CONNECT_TIMEOUT"))}(e,(function(t){n=!0,h=t,clearTimeout(r),C[s]!==y.a.DISCONNECTED&&C[s]!==y.a.DISCONNECTING?l&&l(h,null):u.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(C[s]))}),(function(n){if(n)return u.default.info("["+e.clientId+"] Join failed: "+n),void(i&&i(n));if(C[s]===y.a.DISCONNECTED||C[s]===y.a.DISCONNECTING)return u.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(C[s])),void(i&&i("OPERATION_ABORT"));u.default.debug("["+e.clientId+"] Request gateway list will be restart in "+a+"s"),r=setTimeout((function(){t(o,l)}),1e3*a),k[s]=r;var h=Object(c.getParameter)("AP_BACKOFF_MAX_TIME");a=a>=h?h:2*a}))}},h=function i(){!function(e,t){f(e,(function(i,n){if(i)return t&&t(i);u.default.debug("["+e.clientId+"] getProxyServerList: ",n),m(e,n,t)}))}(e,(function(n,a){if(n){u.default.debug("["+e.clientId+"]",n),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+o+"s"),r=setTimeout((function(){i()}),1e3*o),k[s]=r;var h=Object(c.getParameter)("AP_BACKOFF_MAX_TIME");o=o>=h?h:2*o}else{clearTimeout(r);var p=a.address;e.proxyServer=p;var f={mode:"manual",url:a.address,tcpport:a.serverResponse.tcpport||"3433",udpport:a.serverResponse.udpport||"3478",username:a.serverResponse.username||"test",credential:a.serverResponse.password||Object(c.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};f.tcpport+="",f.udpport+="",e.turnServers=[],e.turnServers.push(f),d.report.setProxyServer(p),u.default.setProxyServer(p),l(p,t)}}))};e.useProxyServer?1==e.proxyServerType?h():2==e.proxyServerType?function i(){!function(e,t){f(e,(function(i,n){return i?t&&t(i):(u.default.debug("["+e.clientId+"] getProxyServerList: ",n),t&&t(null,{address:n[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))}))}(e,(function(n,a){if(n)return u.default.debug("["+e.clientId+"]",n),u.default.debug("["+e.clientId+"] Request proxy will be restart in "+o+"s"),r=setTimeout((function(){i()}),1e3*o),k[s]=r,void(o=o>=3600?3600:2*o);clearTimeout(r);var h=Object(c.getParameter)("PROXY_SERVER_TYPE2");e.proxyServer=h;var p={mode:"manual",url:a.address,tcpport:a.serverResponse.tcpport||"3433",udpport:a.serverResponse.udpport||"3478",username:a.serverResponse.username||"test",credential:a.serverResponse.password||"111111",forceturn:!0};p.tcpport+="",p.udpport+="",e.turnServers=[],e.turnServers.push(p),d.report.setProxyServer(h),u.default.setProxyServer(h),l(h,t)}))}():h():l(null,t)},T=function(e,t,i,n){var r=Date.now(),a={sid:t.sid,opid:10,appid:t.appId,string_uid:n=n||t.stringUid};return new Promise((function(o,s){Object(h.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),a,(function(l){try{var c=JSON.parse(l),h=c.code}catch(o){var f="requestUserAccount failed with unexpected body "+l;return u.default.error("["+t.clientId+"]",f),s("UNEXPECTED_ERROR"),i&&i.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void d.report.reqUserAccount(a.sid,{lts:r,success:!1,serverAddress:e,stringUid:n,uid:null,extend:l,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(h){var v=p.StringUidErrorCode[c.code%1e4]||"REQ_ACCOUNT_ERR_".concat(h);return i&&i.dispatchEvent({type:"error",reason:v}),d.report.reqUserAccount(a.sid,{lts:r,success:!1,serverAddress:e,stringUid:n,uid:null,errorCode:v,extend:a}),f="Get String Uid Failed ["+v+"]",s(v)}var m=c.uid;if(!(m>0&&m<Math.pow(2,32)))return u.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(n," => ").concat(m),c),v="INVALID_UINT_UID_".concat(m),i&&i.dispatchEvent({type:"error",reason:v}),d.report.reqUserAccount(a.sid,{lts:r,success:!1,serverAddress:e,stringUid:n,uid:null,errorCode:v,extend:a}),s(v);o({uid:m,url:e}),d.report.reqUserAccount(a.sid,{lts:r,success:!0,serverAddress:e,stringUid:n,uid:m,errorCode:null,extend:a})}),(function(e,t){if("timeout"===e.type){var o="USER_ACCOUNT_TIMEOUT";i&&i.dispatchEvent({type:"error",reason:o}),d.report.reqUserAccount(a.sid,{lts:r,success:!1,serverAddress:t,stringUid:n,uid:null,errorCode:o,extend:a}),s(o)}else{var l="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);i&&i.dispatchEvent({type:"error",reason:l}),d.report.reqUserAccount(a.sid,{lts:r,success:!1,serverAddress:t,stringUid:n,uid:null,errorCode:l,extend:a}),s(l)}}),{"X-Packet-Service-Type":0,"X-Packet-URI":72})}))},A=function(e,t,i){Date.now();var n,a=Object(c.getParameter)("ACCOUNT_REGISTER"),s=!1,h=Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),d=null,p=null,f=new Promise(function(){var f=l()(o.a.mark((function l(f,v){var m,g,y;return o.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:d=f,p=v,n=0;case 3:if(!(n<Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){l.next=33;break}if(!s){l.next=6;break}return l.abrupt("return");case 6:return m=a[n%a.length],g=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(m+"/api/v1"):"https://".concat(m,"/api/v1"),l.prev=8,l.delegateYield(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T(g,e,t,i);case 2:if(r=n.sent,!s){n.next=5;break}return n.abrupt("return",{v:void 0});case 5:s=!0,setTimeout((function(){u.default.debug("Get UserAccount Successfully",r),d(r)}),0);case 7:case"end":return n.stop()}}),n)}))(),"t0",10);case 10:if(y=l.t0,"object"!==r()(y)){l.next=13;break}return l.abrupt("return",y.v);case 13:l.next=30;break;case 15:if(l.prev=15,l.t1=l.catch(8),!s){l.next=19;break}return l.abrupt("return");case 19:if(!l.t1.retryable){l.next=27;break}return(h=Math.ceil(h*Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(h=Object(c.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),u.default.error("".concat(l.t1.info," ").concat(l.t1.url," Will Fetch User Account in ").concat(h/1e3," seconds")),l.next=25,new Promise((function(e){setTimeout(e,h)}));case 25:l.next=30;break;case 27:u.default.error("Get UserAccount Error: ".concat(l.t1.info," ").concat(l.t1.url),l.t1.error),s=!0,p(l.t1);case 30:n++,l.next=3;break;case 33:case"end":return l.stop()}}),l,null,[[8,15]])})));return function(e,t){return f.apply(this,arguments)}}());return f.cancel=function(){s||(s=!0,p({info:"Request Cancelled",retryable:!1}))},f.isFinished=function(){return s},f}},function(e,t,i){"use strict";i.d(t,"a",(function(){return A})),i.d(t,"b",(function(){return O}));var n=i(7),r=i.n(n),a=i(4),o=i(8),s=function(e){var t=Object(o.b)(e);return t.url=".",t},l=i(0),c=i(15),u=i(5),h=i(3),d=i(1),p=0,f=function(e){var t=s({});t.id=e.id,t.playerId=p++,t.destroyed=!1,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.isFreeze=!1,t.freezeTimeCounterList=[],t.freezeCount=0,t.lastFreezeCount=0,t.lastTimeupdateTime=0,t.elementID=e.elementID,t.setAudioOutput=function(e,i,n){var r=t.video||t.audio;return r?r.setSinkId?void r.setSinkId(e).then((function(){return l.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),r==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()})).then((function(){return l.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),i&&i()})).catch((function(e){return l.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),n&&n(e)})):(l.default.error("["+t.id+"] ",u.default.WEB_API_NOT_SUPPORTED),n&&n(u.default.WEB_API_NOT_SUPPORTED)):(l.default.error("["+t.id+"] ",u.default.PLAYER_NOT_FOUND),n&&n(u.default.PLAYER_NOT_FOUND))},t.destroy=function(){l.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(c.setSrcObject)(t.video,null),Object(c.setSrcObject)(t.audio,null),t.video.pause(),t.freezeCheckInterval&&clearInterval(t.freezeCheckInterval),t.destroyed=!0,delete t.resizer,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.parentNode.removeChild(t.div),["video","audio"].forEach((function(i){var n=o[i];clearTimeout(n.playDeferTimeout),n.formerMediaState=null;var r={playerId:t.playerId,stateId:n.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};o[i]=r;var a={type:"player-status-change",playerId:t.playerId,mediaType:i,status:r.status,reason:r.reason,isErrorState:!1,streamId:t.id};l.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),a),e.stream.dispatchEvent(a),d.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:a,tag:"tracer"})()}))},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),t.div.setAttribute("style",e.stream.video?"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;":"width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),t.video.setAttribute("style",e.stream.local&&!e.stream.screen?e.stream.mirror?"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";"):"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";"):e.stream.video?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";"):e.stream.screen?"width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain"):"width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var i={autoplay:!0,muted:!!e.stream.local||!(!a.isSafari()&&"iOS"!==a.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},n=r()({},i,e.options);!0!==n.muted||n.volume||(n.volume=0),t.video.setAttribute("autoplay",""),t.video.setAttribute("muted",""),t.video.muted=!0,t.video.autoplay=!0,n.playsinline&&t.video.setAttribute("playsinline",""),n.controls&&t.video.setAttribute("controls",""),n.contains&&(t.video.controls=!0),Number.isFinite(n.volume)&&(t.video.volume=n.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),!0===n.muted&&t.audio.setAttribute("muted",""),!0===n.muted&&(t.audio.muted=!0),n.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(n.volume)&&(t.audio.volume=n.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var o={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,i=0;i<Object(h.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;i++)t=t.parentNode;return!!t};var f=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},v=function(e,t,i){var n=f(e),r=!0;return"paused"===n?("audio"===t&&!0===i.muted&&(r=!1),i.autoplay||(r=!1)):"play"===n?"video"===t?r=!1:!0===i.muted?e.muted&&(r=!1):e.muted||(r=!1):"aborted"===n&&(r=!1),r},m=function(i){var r,a=this;if(a===t.video?r="video":a===t.audio&&(r="audio"),r){if(i.type||l.default.error("[".concat(t.id,"] Unexpected evt"),i),"video"===r&&a.muted&&a.paused)return l.default.debug("[".concat(t.id,"] auto resume video element")),void a.play();var s=f(a);clearTimeout(o[r].playDeferTimeout),o[r].playDeferTimeout=setTimeout((function(){o[r].playDeferTimeout=null;var c=o[r],u=f(a);if(s===u){var h={playerId:t.playerId,stateId:c.stateId+1,playDeferTimeout:null,error:v(a,r,n),status:f(a),reason:i.type,updatedAt:Date.now()};if(c.status!==h.status){o[r]=h;var p={type:"player-status-change",playerId:t.playerId,mediaType:r,status:h.status,reason:h.reason,isErrorState:h.error,streamId:t.id};l.default.debug("[".concat(t.id,"] Media Player Status Change"),p),e.stream.dispatchEvent(p),d.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:p,tag:"tracer"})()}}else l.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(r," Status ").concat(s,"=>").concat(u))}),Object(h.getParameter)("PLAYER_STATE_DEFER"))}else l.default.error("[".concat(t.id,"] Unknown media element"),a)};t.video.addEventListener("playing",(function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?l.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}));var g=0,y=0,b=0;t.freezeCheckInterval=setInterval((function(){Date.now()-t.lastTimeupdateTime>500?(t.isFreeze=!0,t.freezeCount+=1):t.isFreeze=!1}),500),t.video.addEventListener("playing",m),t.video.addEventListener("canplay",m),t.video.addEventListener("abort",m),t.video.addEventListener("onerror",m),t.video.addEventListener("suspend",m),t.video.addEventListener("stalled",m),t.video.addEventListener("pause",m),t.audio.addEventListener("playing",m),t.audio.addEventListener("canplay",m),t.audio.addEventListener("abort",m),t.audio.addEventListener("onerror",m),t.audio.addEventListener("suspend",m),t.audio.addEventListener("stalled",m),t.audio.addEventListener("pause",m);var k=t.audio,C="audio";if(e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),a.isEdge()?t.video.srcObject=e.stream.stream:(Object(c.attachMediaStream)(t.video,e.stream.stream),Object(c.attachMediaStream)(t.audio,e.stream.stream)),t.video.addEventListener("timeupdate",(function(){var e=Date.now();if((g+=1)<10)t.lastTimeupdateTime=e;else for(e-t.lastTimeupdateTime>500&&(y+=e-t.lastTimeupdateTime),b+=e-t.lastTimeupdateTime,t.lastTimeupdateTime=e;b>=6e3;)b-=6e3,t.freezeTimeCounterList.push(Math.min(6e3,y)),y-=6e3,y=Math.max(y,0)}));else{!1!==n.muted&&"video_element_muted"!==n.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.video.removeAttribute("autoplay"),t.video.autoplay=!1,t.div.appendChild(t.video),k=t.video,C="video";var w={playerId:t.playerId,stateId:o.audio.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};o.audio=w;var _={type:"player-status-change",playerId:t.playerId,mediaType:"audio",status:w.status,reason:w.reason,isErrorState:w.error,streamId:t.id};if(l.default.debug("[".concat(t.id,"] Media Player Status Change"),_),Promise.resolve().then((function(){return e.stream.dispatchEvent(_)})),d.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:_,tag:"tracer"})(),window.MediaStream&&(a.isSafari()||"iOS"===a.getBrowserOS())){var S=new MediaStream(e.stream.stream.getAudioTracks());Object(c.setSrcObject)(t.video,S)}else Object(c.setSrcObject)(t.video,e.stream.stream)}if(n.autoplay&&k){var E=k.play();E&&E.catch&&E.catch((function(i){if(!t.destroyed&&k){var r=o[C],a={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:v(k,C,n),status:f(k),reason:"error",updatedAt:Date.now()};if(r.status!==a.status){l.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," Status Changed Detected by promise error: ").concat(r.status,"=>").concat(a.status),i),o[C]=a;var s={type:"player-status-change",playerId:t.playerId,mediaType:C,status:a.status,reason:a.reason,isErrorState:a.error,streamId:t.id};l.default.debug("[".concat(t.id,"] Media Player Status Change"),s),e.stream.dispatchEvent(s),d.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:s,tag:"tracer"})()}}}))}return t.setAudioVolume=function(e){var i=parseInt(e)/100;isFinite(i)&&(i<0?i=0:i>1&&(i=1),t.video&&(t.video.volume=i),t.audio&&(t.audio.volume=i))},t},v=i(22),m=i(10),g=i(6),y=i(19),b=i(2),k=i(24),C=i(16),w=i(11),_=i.n(w),S=function(e){Object(b.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(b.checkValidEnum)(e,"profileName",Object.keys(h.SUPPORT_RESOLUTION_LIST));var t=h.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(h.getParameter)("DEFAULT_PROFILE"),t=h.SUPPORT_RESOLUTION_LIST[e]);var i={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&(i.video.frameRate=t[2]),t[6]&&t[7]&&(i.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),i},E=function(e){return Object.keys(h.SUPPORT_RESOLUTION_LIST).filter((function(t){var i=h.SUPPORT_RESOLUTION_LIST[t],n=["width","height","frameRate"];for(var r in n){var a=n[r];if(e[a]&&i[r]){if("number"==typeof e[a].max&&e[a].max<i[r])return!1;if("number"==typeof e[a].min&&e[a].min>i[r])return!1}}return!0})).reverse()},T=function(e){var t=h.AUDIO_PROFILE_SETTINGS[e]||h.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}},A=function(e){var t=Object(o.b)();if(t.params=r()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.uintId=e.uintUID||null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.optimizationMode=e.optimizationMode,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function i(){var e={};t.getVideoTrack()===this?(l.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(l.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):l.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,i){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:i,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,i,n){var r=d.report.reportApiInvoke(e.sid,{callback:n,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(b.checkValidString)(i,"url",1,1024,!1),Object(b.checkValidString)(t,"id",1,1024,!1);var a=function(t){l.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),r(u.default.LOAD_AUDIO_FAILED)},o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>400)a("".concat(o.status," ").concat(o.statusText));else{var i=o.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(i,(function(i){e.audioMixing.buffer[t]=i,r(null)}),(function(t){l.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),r(t)}))}},o.onerror=function(){return a("load error")},o.ontimeout=function(){return a("timeout")},o.send()},e.createAudioBufferSource=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var n=e.audioMixing.buffer[t.id],r=e.audioMixing.ctx.createBufferSource();r.buffer=n;var o=e.audioMixing.ctx.createGain();if(r.connect(o),o.connect(e.audioMixing.mediaStreamDest),r.gainNode=o,t.loop)r.loop=!0,r.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(a.isChrome)()){r.loop=!0;var s=t.cycle*n.duration*1e3-(t.playTime||0);r.start(0,t.playTime/1e3,s/1e3)}else l.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),r.start(0,t.playTime/1e3);else r.start(0,t.playTime/1e3);var c=e.audioMixing.sounds[t.soundId];return c.source=r,e._flushAudioMixingMuteStatus(),r.addEventListener("ended",(function(){r===c.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:r,sound:c})})),i(),r}var u="AUDIOBUFFER_NOT_FOUND";return l.default.error("[".concat(e.streamId,"] "),u,t.id),i(!1),!1},e.on("audioSourceEnded",(function(t){var i=t.source,n=t.sound;n&&n.state===e.audioMixing.states.BUSY&&!n.pauseAt&&(n.state=e.audioMixing.states.IDLE,n.startAt=null,n.startOffset=null,n.resumeAt=null,n.resumeOffset=null,i.gainNode&&i.gainNode.disconnect&&i.gainNode.disconnect(),i.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))})),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach((function(e){e.stop()}))},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(l.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(k.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._originStream=e.stream,e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var i=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"audio"==e.track.kind})),n=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];i&&i.replaceTrack&&n&&i.replaceTrack(n)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var i=e.audioMixing.sounds[t];i.state!==e.audioMixing.states.BUSY&&i.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return l.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var i in e.audioMixing.sounds){var n=e.audioMixing.sounds[i];n&&n.source&&!n.source.connectedToDestination&&(n.source.gainNode.connect(e.audioMixing.ctx.destination),n.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach((function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)}));case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var i=t.replace,n=e.createAudioBufferSource({soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0});return n.sound=e.audioMixing.sounds[t.soundId],n?(n.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),i&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),n):null},e._stopAudioMixingBufferSource=function(t){var i=e.audioMixing.sounds[t.soundId].source;return i?(i.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),i.stop(),i.gainNode&&i.gainNode.disconnect&&i.gainNode.disconnect(),i.buffer=null,i):null},e._flushAudioMixingMuteStatus=function(t){for(var i in e.audioMixing.sounds){var n=e.audioMixing.sounds[i];n&&(void 0!==t&&(n.muted=!!t),n.source&&(n.source.gainNode.gain.value=n.muted?0:n.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,i,n){var r=e.audioMixing.sounds[i.soundId],a=-1===i.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";l.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(a,", state is ").concat(r.state)),n&&n(a)},e._handleAudioMixingNoSourceError=function(t,i,n){e.audioMixing.sounds[i.soundId].state=e.audioMixing.states.IDLE;var r=-1===i.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";l.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(r)),n&&n(r)},e._getOneEffectStates=function(t){var i=e.audioMixing.sounds[t.soundId];return function(){return i?{state:i.state,startAt:i.startAt,resumeAt:i.resumeAt,pauseOffset:i.pauseOffset,pauseAt:i.pauseAt,resumeOffset:i.resumeOffset,stopAt:i.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(l.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,i){Object(b.checkValidObject)(t,"options");var n=t.soundId,r=t.cacheResource;if(Object(a.isSafari)()&&Object(a.getBrowserVersion)()<12){var o="BROWSER_NOT_SUPPORT";return l.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),o),i(o)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(n);var s=e.audioMixing.sounds[n];if(s.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return o="Invalid Parmeter cycle: "+t.cycle,l.default.error("[".concat(e.streamId,"] ").concat(n),o),i(o);if(Object(b.isEmpty)(r)&&(t.cacheResource=!0),s.state=e.audioMixing.states.STARTING,s.options=t,e.audioMixing.buffer[t.filePath]){var c=e._startAudioMixingBufferSource(t);if(c)return s.source=c,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),i(null);s.state=e.audioMixing.states.IDLE;var u="CREATE_BUFFERSOURCE_FAILED";if(i)return i(u);l.default.error("[".concat(e.streamId,"] "),u)}else e.loadAudioBuffer(t.filePath,t.filePath,(function(n){if(n)s.state=e.audioMixing.states.IDLE,i?i(n):l.default.error("[".concat(e.streamId,"] "),n);else{var r=e._startAudioMixingBufferSource(t);if(r)return s.source=r,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),i(null);if(s.state=e.audioMixing.states.IDLE,n="CREATE_BUFFERSOURCE_FAILED",i)return i(n);l.default.error("[".concat(e.streamId,"] "),n)}}))}else e._handleAudioMixingInvalidStateError("_playEffect",t,i)},e._stopOneEffect=function(t,i){var n=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?n.state===e.audioMixing.states.BUSY||n.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),n.stopAt=Date.now(),n.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[n.options.filePath]&&!n.options.cacheResource&&(l.default.debug("Recycled buffer ".concat(n.options.filePath)),delete e.audioMixing.buffer[n.options.filePath]),void(i&&i(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,i):i("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,i){var n=e.audioMixing.sounds[t.soundId];if(n.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(n.pauseAt=Date.now(),n.state=e.audioMixing.states.PAUSED,n.pauseOffset=n.resumeAt?n.pauseAt-n.resumeAt+n.resumeOffset:n.pauseAt-n.startAt+n.startOffset,i&&i(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,i);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,i)},e._resumeOneEffect=function(t,i){var n=e.audioMixing.sounds[t.soundId];if(n.state===e.audioMixing.states.PAUSED){var r=e._startAudioMixingBufferSource({soundId:t.soundId,filePath:n.options.filePath,cycle:n.options.cycle,loop:n.options.loop,playTime:n.pauseOffset,replace:n.options.replace});if(!r){var a="CREATE_BUFFERSOURCE_FAILED";return i(a),void l.default.error("[".concat(e.streamId,"] "),a)}n.source=r,n.resumeAt=Date.now(),n.resumeOffset=n.pauseOffset,n.state=e.audioMixing.states.BUSY,n.pauseAt=null,n.pauseOffset=null,i(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,i)},e._getOneEffectDuration=function(t){var i=e.audioMixing.sounds[t.soundId];return i.options&&i.options.filePath&&e.audioMixing.buffer[i.options.filePath]?1e3*e.audioMixing.buffer[i.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,i){var n=e.audioMixing.sounds[t.soundId];return n.state===e.audioMixing.states.PAUSED?n.pauseOffset%e._getOneEffectDuration(t):n.state===e.audioMixing.states.BUSY?n.resumeAt?(Date.now()-n.resumeAt+n.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-n.startAt+n.startOffset)%e._getOneEffectDuration(t):void(i&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,i,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,n);var a=e._startAudioMixingBufferSource({soundId:t.soundId,filePath:r.options.filePath,loop:r.options.loop,cycle:r.options.cycle,playTime:i});if(!a){var o="CREATE_BUFFERSOURCE_FAILED";return n&&n(o),void l.default.error("[".concat(e.streamId,"] "),o)}r.source=a,r.startAt=Date.now(),r.startOffset=i,r.resumeAt=null,r.resumeOffset=null,r.pauseOffset=null,r.pauseAt=null}else{if(r.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,n);r.pauseOffset=i}n&&n(null)},e.startAudioMixing=function(t,i){var n=d.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return i&&i(t);e.dispatchEvent({type:"audioMixingPlayed"}),i&&i(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(b.checkValidObject)(t,"options");var a=t.filePath,o=t.cacheResource,s=t.cycle,l=t.loop,c=t.playTime,u=t.replace;Object(b.checkValidString)(a,"filePath",1,Object(h.getParameter)("FILEPATH_LENMAX"),!1),Object(b.checkValidNumber)(c,"playTime",0,1e8),!Object(b.isEmpty)(s)&&Object(b.checkValidNumber)(s,"cycle"),!Object(b.isEmpty)(l)&&Object(b.checkValidBoolean)(l,"loop"),!Object(b.isEmpty)(u)&&Object(b.checkValidBoolean)(u,"replace"),!Object(b.isEmpty)(o)&&Object(b.checkValidBoolean)(o,"cacheResource");var p=r()({soundId:-1},t);e._playOneEffect(p,n)},e.stopAudioMixing=function(t){var i=d.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},i)},e.pauseAudioMixing=function(t){var i=d.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},i)},e.resumeAudioMixing=function(t){var i=d.report.reportApiInvoke(e.sid,{callback:function(i,n){if(i)return t&&t(i);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},i)},e.adjustAudioMixingVolume=function(t){var i=d.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(b.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),i()},e.getAudioMixingDuration=function(){var t=d.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),i=e._getOneEffectDuration({soundId:-1});return t(null,i),i},e.getAudioMixingCurrentPosition=function(){var t=d.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),i=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,i),i},e.setAudioMixingPosition=function(t,i){var n=d.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(b.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,n)},e.playEffect=function(t,i){var n=d.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return i&&i(t);e.dispatchEvent({type:"effectPlayed"}),i&&i(null)},name:"Stream.playEffect",options:t});Object(b.checkValidObject)(t,"options");var r=t.soundId,a=t.filePath,o=t.cycle;Object(b.checkValidNumber)(r,"soundId",1,1e4),Object(b.checkValidString)(a,"filePath",0,Object(h.getParameter)("FILEPATH_LENMAX"),!1),!Object(b.isEmpty)(o)&&Object(b.checkValidNumber)(o,"cycle"),e._playOneEffect(t,n)},e.stopEffect=function(t,i){var n=d.report.reportApiInvoke(e.sid,{callback:i,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},n)},e.stopAllEffects=function(t){var i=d.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),n=!1,r=0,a=0,o=function(e){n||(e?(i(e),n=!0):r+=1,r===a&&(i(null),n=!0))};for(var s in e.audioMixing.sounds){var l=e.audioMixing.sounds[s];-1!==l.soundId&&(l.state!==e.audioMixing.states.BUSY&&l.state!==e.audioMixing.states.PAUSED||(a++,e._stopOneEffect({soundId:s},o)))}a||i(null)},e.preloadEffect=function(t,i,n){var r=d.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4),Object(b.checkValidString)(i,"filePath",1,Object(h.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,i),e.audioMixing.buffer[i]?r(null):e.loadAudioBuffer(i,i,r)},e.unloadEffect=function(t,i){var n=d.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4);var r=e.audioMixing.sounds[t];if(!r){var a="SOUND_NOT_EXISTS";return l.default.error(a,t),void n(a)}var o=r.options?r.options.filePath:r.filePath;if(o)delete e.audioMixing.buffer[o],delete e.audioMixing.sounds[t],n(null);else{var s="SOUND_BUFFER_NOT_FOUND";l.default.error(s,t),n(s)}},e.pauseEffect=function(t,i){var n=d.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},n)},e.pauseAllEffects=function(t){var i=d.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),n=!1,r=0,a=0,o=function(e){n||(e?(i(e),n=!0):r+=1,r===a&&(i(null),n=!0))};for(var s in e.audioMixing.sounds)"-1"!==s&&e.audioMixing.sounds[s].state===e.audioMixing.states.BUSY&&(a++,e._pauseOneEffect({soundId:s},o));a||i(null)},e.resumeEffect=function(t,i){Object(b.checkValidNumber)(t,"soundId",1,1e4);var n=d.report.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},n)},e.resumeAllEffects=function(t){var i=d.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),n=!1,r=0,a=0,o=function(e){n||(e?(i(e),n=!0):r+=1,r===a&&(i(null),n=!0))};for(var s in e.audioMixing.sounds)"-1"!==s&&e.audioMixing.sounds[s].state===e.audioMixing.states.PAUSED&&(a++,e._resumeOneEffect({soundId:s},o));a||i(null)},e.getEffectsVolume=function(){var t=[];for(var i in e.audioMixing.sounds){var n=e.audioMixing.sounds[i];n&&"-1"!==i&&t.push({soundId:parseInt(i),volume:n.volume})}return t},e.setEffectsVolume=function(t,i){var n=d.report.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:i});for(var r in Object(b.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var a=e.audioMixing.sounds[r];"-1"!==r&&(a.volume=t)}e._flushAudioMixingMuteStatus(),n(null)},e.setVolumeOfEffect=function(t,i,n){var r=d.report.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:n});Object(b.checkValidNumber)(t,"soundId",0,1e4),Object(b.checkValidNumber)(i,"volume",0,100),e._initSoundIfNotExists(t);var a=e.audioMixing.sounds[t];a.volume=i,e._flushAudioMixingMuteStatus(),r(null)}}(t),C.a.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(a.isLegacyChrome)()||(e.videoConstraint.frameRate=30),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(a.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(a.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(a.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(a.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(a.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(a.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(i){var n=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(i instanceof Array)){var a=S(i+="");return a&&a.video?(e.videoConstraint=r()(e.videoConstraint,{width:{ideal:a.video.width},height:{ideal:a.video.height}}),t.attributes.resolution=a.attributes.resolution,(o=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&o.applyConstraints?(l.default.debug("setVideoResolution applyConstraints",e.videoConstraint),o.applyConstraints(e.videoConstraint).then(n).catch(n)):n(),!0):(n("NO_PROFILE_".concat(i)),!1)}var o,s=i[0],c=i[1];e.videoConstraint=r()(e.videoConstraint,{width:{ideal:s},height:{ideal:c}}),t.attributes.resolution="".concat(s,"x").concat(c),(o=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&o.applyConstraints?(l.default.debug("setVideoResolution applyConstraints",e.videoConstraint),C.a.disableVideoEffect(e).then((function(){return o.applyConstraints(e.videoConstraint).then(n).catch(n)})).then((function(){return C.a.restoreVideoEffect(e)}))):n()},e.setVideoFrameRate=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(a.isFireFox)())return i("FIREFOX_NOT_SUPPORTED"),!1;if("object"===_()(t)&&t instanceof Array&&t.length>1){e.videoConstraint=r()(e.videoConstraint,{frameRate:t[0]}),e.attributes.minFrameRate=t[0],e.attributes.maxFrameRate=t[1];var n=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return n&&n.applyConstraints?(l.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),n.applyConstraints(e.videoConstraint).then(i).catch(i)):i(),!0}return i("INVALID_PARAM_".concat(JSON.stringify(t))),!1},e.setVideoBitRate=function(i){var n=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===_()(i)&&i instanceof Array&&i.length>1?(t.attributes.minVideoBW=i[0],t.attributes.maxVideoBW=i[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=i[0],e.connectionSpec.maxVideoBW=i[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),n(),!0):(n("INVALID_PARAM_".concat(JSON.stringify(i))),!1)},e.setScreenBitRate=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===_()(t)&&t instanceof Array&&t.length>1?(e.screenAttributes.minVideoBW=t[0],e.screenAttributes.maxVideoBW=t[1],i(),!0):(i("INVALID_PARAM_".concat(JSON.stringify(t))),!1)},e.setScreenProfile=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(b.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var n=S(t);return n&&n.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=n.screen.width,e.screenConstraint.mandatory.maxHeight=n.screen.height,n.screen.frameRate&&n.screen.frameRate.min&&n.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=n.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=n.screen.frameRate.max)):e.screenConstraint=r()(e.screenConstraint,n.screen),e.screenAttributes.width=n.screen.width,e.screenAttributes.height=n.screen.height,e.screenAttributes.minFr=n.screen.frameRate.min,e.screenAttributes.maxFr=n.screen.frameRate.max,i(),!0):(i("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),i()},e.setVideoProfileCustomPlus=function(i){var n=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution([i.width,i.height]),t.attributes.resolution="".concat(i.width,"x").concat(i.height),e.setVideoFrameRate([i.framerate,i.framerate]),e.setVideoBitRate([i.bitrate,i.bitrate]),n()},e.setVideoProfile=function(i){var n=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),o=S(i);if(!o){var s="Invalid Profile ".concat(i);throw new Error(s)}if(e.profile=i,o&&o.video){e.profile=o.profileName,e.videoConstraint=r()(e.videoConstraint,o.video),e.connectionSpec&&o.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=o.attributes.minVideoBW,e.connectionSpec.maxVideoBW=o.attributes.maxVideoBW),Object(a.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(a.isFireFox)()&&(e.videoConstraint.frameRate=30),t.attributes=r()(t.attributes,o.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var c=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return c&&c.applyConstraints?(l.default.debug("setVideoProfile applyConstraints",e.videoConstraint),C.a.disableVideoEffect(e).then((function(){return c.applyConstraints(e.videoConstraint)})).then((function(){return C.a.restoreVideoEffect(e)})).then((function(t){return new Promise((function(i,r){n(t),setTimeout((function(){Object(m.vsResHack)(e.stream,(function(t,n){e.videoWidth=t,e.videoHeight=n,i()}),(function(t){l.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),r()}))}),2500)}))})).catch(n)):n(),!0}return n("INVALID_VIDEO_PROFILE_".concat(i)),!1},e.setAudioProfile=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(b.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var n=T(t);return e.highQuality=n.highQuality,e.stereo=n.stereo,e.speech=n.speech,e.lowQuality=n.lowQuality,e.stereo&&Object(a.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),i(),!0},e.setVideoEncoderConfiguration=function(t){Object(b.checkValidObject)(t,"config");var i=d.report.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(b.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(b.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(b.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(b.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(b.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(b.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),i()},e.getSupportedProfile=function(t){var i=d.report.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var n="ONLY_LOCAL_STREAM_SUPPORTED";return l.default.error(n),i(n)}if(!e.stream)return l.default.error(n="STREAM_NOT_INIT"),i(n);if(!e.stream.getVideoTracks)return l.default.error(n="TRACK_NOT_SUPPORT"),i(n);var r=e.stream.getVideoTracks()[0];if(!r)return l.default.error(n="NO_VIDEO_TRACK_FOUND"),i(n);if(!r.getCapabilities)return l.default.error(n="GETCAPABILITY_NOT_SUPPORT"),i(n);var a=r.getCapabilities(),o=E(a);return i(null,o)}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(h.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(l.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(e){var i=d.report.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&l.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,i()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return!!t.audio},t.hasVideo=function(){return!!t.video},t.hasScreen=function(){return!!t.screen},t.hasScreenAudio=function(){return!!t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(n,r){var a=d.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.init",options:arguments,tag:"tracer"}),o=((new Date).getTime(),arguments[2]);if(void 0===o&&(o=2),!0===t.initialized)return a({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return a({type:"warning",msg:"STREAM_NOT_LOCAL"});var s=Math.random().toString().slice(3);t._streamInitID=s,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=y.a.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=y.a.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){l.default.debug("[".concat(t.streamId,"] Requested access to local media"));var c={streamId:t.streamId};e.videoSource?c.videoSource=e.videoSource:e.screen?c.screen=t.screenConstraint:e.video&&(c.video=t.videoConstraint),e.audioSource?c.audioSource=e.audioSource:e.screenAudio?c.screenAudio=e.screenAudio:e.audio&&(c.audio=t.audioConstraint),Object(v.b)(c,(function(n){if(c.screenAudio&&!n.getAudioTracks()[0]&&l.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),c.screen&&l.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(c.video||c.audio)&&l.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){n.getTracks().forEach((function(e){e.stop()}));var r={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return l.default.error(t.streamId,r.info),void a(r)}if(t._streamInitID!==s)return n.getTracks().forEach((function(e){e.stop()})),l.default.error(t.streamId,(r={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"}).info),void a(r);t.dispatchEvent({type:"accessAllowed"}),t.stream=n,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(m.vsResHack)(n,(function(e,i){t.videoWidth=e,t.videoHeight=i}),(function(e){l.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)})),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach((function(n){n&&!n.onended&&(n.onended=i),"video"===n.kind&&e.optimizationMode&&(n.contentHint=e.optimizationMode,n.contentHint===e.optimizationMode&&l.default.debug("[".concat(t.streamId,"] set content hint to"),e.optimizationMode))})),a()}),(function(e){var i={type:"error",info:null};switch(e&&(i.msg=e.name||e.code||e,e.message&&(i.info=e.message),e.code&&(i.info?i.info+=". "+e.code:i.info=" "+e.code),e.constraint&&(i.info?i.info+=". Constraint: "+e.constraint:i.info="constraint: "+e.constraint)),i.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),o>0)return void setTimeout((function(){t.init((function(e){return a(e)}),a,o-1)}),1);i.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":i.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":i.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":i.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":i.msg="CONSTRAINT_NOT_SATISFIED";break;default:i.msg||(i.msg="UNDEFINED")}var n="Media access ".concat(i.msg).concat(i.info?": "+i.info:"");l.default.error("[".concat(t.streamId,"] "),n),a(i)}))}else a({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){l.default.error("[".concat(t.streamId,"] Stream init: "),e),a({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var i=t.stream.getAudioTracks()[0];i&&i.label&&(t.audioName=i.label)}}},t.close=function(){var e=d.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(l.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),t._originStream)try{t._originStream.getTracks().map((function(e){return e.stop()}))}catch(e){}if(void 0!==t.stream){var i=t.stream.getTracks();for(var n in i)i.hasOwnProperty(n)&&(i[n].stop(),i[n].onended=null);!t.isLowStream&&t.local?C.a.disableVideoEffect(t).then((function(){t.stream=void 0})):(t.stream&&t.stream.clean&&t.stream.clean(),t.stream=void 0)}if(t._originStream){for(var n in console.log("clear _originStream"),i=t._originStream.getTracks())i.hasOwnProperty(n)&&(i[n].stop(),i[n].onended=null,console.log("clear onended"));!t.isLowStream&&t.local?C.a.disableVideoEffect(t).then((function(){t._originStream=void 0})):(t._originStream&&t._originStream.clean&&t._originStream.clean(),t._originStream=void 0)}if(Object(a.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders){var r=t.pc.peerConnection.getSenders();r.forEach((function(e){e&&(l.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))}))}t.local&&(t.initialized=!1),t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),e()},t.enableAudio=function(){var e,i=d.report.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return l.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||l.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,i(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});l.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&l.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var i=t._muteAudio();return e(null,i),i},t.enableVideo=function(){var e,i=d.report.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return l.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||l.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),i(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});l.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&l.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var i=t._muteVideo();return e(null,i),i},t.unmuteAudio=function(){var e,i=d.report.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||l.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,i(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&l.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var i=t._muteAudio();return e(null,i),i},t.unmuteVideo=function(){var e,i=d.report.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||l.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),i(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&l.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var i=t._muteVideo();return e(null,i),i},t._unmuteAudio=function(){return l.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled||(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,0))},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return l.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&d.report.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return l.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled||(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),0))},t._muteVideo=function(){return l.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&d.report.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(n){var r=d.report.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(t.pc&&t.pc.addTrack(n,t.stream),"audio"==n.kind){t._cleanupAudioMixing();var a=new MediaStream;t.userMuteAudio&&(n.enabled=!1),a.addTrack(n);var o=t.stream.getVideoTracks()[0];o&&a.addTrack(o),t.audio=!0,e.audio=!0,t.stream=a,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(n.enabled=!1),t.stream.addTrack(n),t.video=!0,e.video=!0;n.onended||(n.onended=i),r()},t.removeTrack=function(i){var n=d.report.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});t.pc&&t.pc.removeTrack(i,t.stream),t.stream.removeTrack(i),t._cleanupAudioMixing(),"audio"===i.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==i.readyState&&(i.stop(),l.default.debug("[".concat(t.streamId,"] Track ").concat(i.kind," Stopped"))),n()},t.setAudioOutput=function(e,i,n){var r=d.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(b.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,(function(){return r()}),r):r()):(l.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),r(u.default.INVALID_PARAMETER))},t.play=function(e,i,n){"function"==typeof i&&(n=i,i=null),l.default.debug("[".concat(t.streamId,"] play()."),e,i);var r=d.report.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:n});if(Object(b.checkValidString)(e,"elementID"),Object(b.isEmpty)(i)||(Object(b.isEmpty)(i.fit)||Object(b.checkValidEnum)(i.fit,"fit",["cover","contain"]),Object(b.isEmpty)(i.muted)||Object(b.checkValidBoolean)(i.muted,"muted")),t.player)l.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then((function(){r(null)})).catch(r);else{t.elementID=e,t.playOptions=i,!t.local||t.video||t.screen?(t.player=new f({id:t.getId(),stream:t,elementID:e,options:i}),t.local&&C.a.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new f({id:t.getId(),stream:t,elementID:e,options:i}));var a={video:null,audio:null},o=function e(i){if(a[i.mediaType]=i,a.video&&a.audio)if(t.removeEventListener("player-status-change",e),a.video.isErrorState||a.audio.isErrorState){var n=a.video.isErrorState?a.video:a.audio;r({isErrorState:!0,status:n.status,reason:n.reason,video:a.video,audio:a.audio})}else r("aborted"===a.video.status&&"aborted"===a.audio.status?{status:"aborted",reason:"stop",video:a.video,audio:a.audio}:null)};t.on("player-status-change",o),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});l.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(C.a.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):l.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!(!t.player||!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video)||t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,i;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(i=t.player.audio.play()),i=i||Promise.resolve(),Promise.all([e,i])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var i=t.stream.getVideoTracks()[0];if(i)return l.default.info("[".concat(t.streamId,"] getVideoTrack"),i),e(),i}l.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=d.report.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var i=t.stream.getAudioTracks()[0];if(i)return l.default.info("[".concat(t.streamId,"] getAudioTracks"),i),e(),i}l.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,i,n){if(t.stream){if("video"==e.kind){if(a=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(a),t.stream.addTrack(e),l.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==a.readyState&&(a.stop(),l.default.debug("[".concat(t.streamId,"] Track ").concat(a.kind," Stopped"))),i&&i();var r="MEDIASTREAM_TRACK_NOT_FOUND";return l.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),n(r)}if("audio"==e.kind){var a;if(a=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var o=new MediaStream;o.addTrack(e);var s=t.stream&&t.stream.getVideoTracks()[0];return s&&o.addTrack(s),t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),l.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==a.readyState&&(a.stop(),l.default.debug("[".concat(t.streamId,"] Track ").concat(a.kind," Stopped"))),i&&i()}return r="MEDIASTREAM_TRACK_NOT_FOUND",l.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),n(r)}return r="INVALID_TRACK_TYPE",l.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(r," ").concat(e.kind)),n&&n(r)}return r="NO_STREAM_FOUND",l.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(r)),n&&n(r)},t.replaceTrack=function(e,n,r){var a=d.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return e&&e.kind?(t._cleanupAudioMixing(),e.onended||(e.onended=i),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,(function(){return l.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,(function(e){return a(null,e)}),a)}),(function(i){return l.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(i)),a(i)})):t._replaceMediaStreamTrack(e,(function(e){return a(null,e)}),a)):a("INVALID_TRACK")},t.setAudioVolume=function(e){var i=d.report.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(b.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),i()},t.getStats=function(e,i,n){var o=[];o.push(t._getPCStats(n)),o.push(new Promise((function(e){var i={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(g.b)(i,"videoReceiveResolutionHeight",t.videoHeight),Object(g.b)(i,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(a.isSafari)()||Object(a.isFireFox)())&&(Object(g.b)(i,"videoSendResolutionHeight",t.videoHeight),Object(g.b)(i,"videoSendResolutionWidth",t.videoWidth)),(Object(a.isSafari)()||Object(a.isFireFox)())&&t.uplinkStats&&Object(g.b)(i,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(i)}))),o.push(new Promise((function(e){var i={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(Object(g.b)(i,"accessDelay",t.traffic_stats.access_delay),Object(g.b)(i,"endToEndDelay",t.traffic_stats.e2e_delay),Object(g.b)(i,"videoReceiveDelay",t.traffic_stats.video_delay),Object(g.b)(i,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&Object(g.b)(i,"accessDelay",t.traffic_stats.access_delay),e(i)}))),Promise.all(o).then((function(i){for(var n={},a=i.length-1;a>=0;a--){var o=i[a];r()(n,o)}e&&setTimeout(e.bind(t,n),0)})).catch((function(e){i&&setTimeout(i.bind(t,e),0)}))},t._getPCStats=function(e){return new Promise((function(i,n){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return n("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats((function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return n("PEER_CONNECTION_STATE_CHANGE");var r=t.pc.isSubscriber?Object(g.c)(e):Object(g.a)(e);return i(r)}),e)})).then((function(e){return t.pc.isSubscriber?(Object(a.isFireFox)()||Object(a.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(Object(g.b)(e,"videoReceiveResolutionHeight",t.videoHeight),Object(g.b)(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(a.isSafari)()||Object(a.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(Object(g.b)(e,"videoSendResolutionHeight",t.videoHeight),Object(g.b)(e,"videoSendResolutionWidth",t.videoWidth))),(Object(a.isSafari)()||Object(a.isFireFox)())&&t.uplinkStats&&Object(g.b)(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)}))},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new m.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();l.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else l.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480p_1"),t._switchVideoDevice=function(e,i,n){if(e===t.cameraId)return i&&i();var o={video:r()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};l.default.debug("[".concat(t.streamId,"] ").concat(o)),Object(v.b)(o,(function(r){try{var o=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),C.a.restoreVideoEffect(t).then((function(){i&&i()}))};C.a.disableVideoEffect(t).then((function(){Object(a.isSafari)()?t.replaceTrack(r.getVideoTracks()[0],o,n):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(r.getVideoTracks()[0]),o())}))}catch(e){return n&&n(e)}}),(function(e){return n&&n(e)}))},t._switchAudioDevice=function(e,i,n){if(e===t.microphoneId)return i&&i();var o={video:!1,audio:r()({},t.audioConstraint,{deviceId:{exact:e}})};l.default.debug("[".concat(t.streamId,"] "),o),Object(v.b)(o,(function(r){var o=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},i&&i()};try{Object(a.isSafari)()?t.replaceTrack(r.getAudioTracks()[0],o,n):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(r.getAudioTracks()[0]),o())}catch(e){return n&&n(e)}}),(function(e){return n&&n(e)}))},t.switchDevice=function(e,i,n,r){var a=d.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(b.checkValidString)(i,"deviceId");var o=function(){return t.inSwitchDevice=!1,a()},s=function(e){t.inSwitchDevice=!1,l.default.error("[".concat(t.streamId,"] "),e),a(e)};if(t.inSwitchDevice)return a("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return s("Only the local stream can switch the device.");if(t.screen&&"video"===e)return s("The device cannot be switched during screen-sharing.");if(!t.video&&"video"===e)return s("Video track not exist.");if(!t.audio&&"audio"===e)return s("Audio track not exist.");if(t.videoSource||t.audioSource)return s("The device cannot be switched when using videoSource or audioSource.");var c=!1;for(var u in t.audioMixing.sounds){var h=t.audioMixing.sounds[u];if(h.state!==t.audioMixing.states.IDLE){c=!0;break}}var p=t.audioMixing.audioContextInited;if(p&&c)return s("The device cannot be switched when using audio Mixing.");y.a.getDeviceById(i,(function(){if("video"===e)t._switchVideoDevice(i,o,s);else{if("audio"!==e)return s("Invalid type.");t._switchAudioDevice(i,o,s)}}),(function(){return s("The device does not exist.")}))},t},O=function(e){var t=d.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:e&&e.audioSource?e.audioSource.enabled:null,videoTrackEnable:e&&e.videoSource?e.videoSource.enabled:null}}});Object(b.checkValidObject)(e,"StreamSpec");var i=e.streamID,n=e.audio,r=e.video,a=e.screen,o=e.screenAudio,s=e.cameraId,c=e.facingMode,u=e.microphoneId,h=e.mirror,p=e.extensionId,f=e.mediaSource,v=e.audioProcessing,g=e.optimizationMode;if(!Object(b.isEmpty)(i)&&!Object(m.is32Uint)(i)&&!Object(b.isValidString)(i,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(b.checkValidBoolean)(n,"audio"),Object(b.checkValidBoolean)(r,"video"),Object(b.isEmpty)(a)||Object(b.checkValidBoolean)(a,"screen"),Object(b.isEmpty)(o)||Object(b.checkValidBoolean)(o,"screenAudio"),Object(b.isEmpty)(s)||Object(b.checkValidString)(s,"cameraId",0,255,!1),Object(b.isEmpty)(c)||Object(b.checkValidEnum)(c,"facingMode",["user","environment","left","right"]),Object(b.isEmpty)(u)||Object(b.checkValidString)(u,"microphoneId",0,255,!1),Object(b.isEmpty)(p)||Object(b.checkValidString)(p,"extensionId"),Object(b.isEmpty)(f)||Object(b.checkValidEnum)(f,"mediaSource",["screen","application","window"]),Object(b.isEmpty)(h)||Object(b.checkValidBoolean)(h,"mirror"),!Object(b.isEmpty)(v)){var y=v.AGC,k=v.AEC,C=v.ANS;Object(b.isEmpty)(y)||Object(b.checkValidBoolean)(y,"AGC"),Object(b.isEmpty)(k)||Object(b.checkValidBoolean)(k,"AEC"),Object(b.isEmpty)(C)||Object(b.checkValidBoolean)(C,"ANS")}Object(b.isEmpty)(g)||Object(b.checkValidEnum)(g,"optimizationMode",["detail","motion"]),l.default.debug("Create stream"),!0===o&&!0===n&&l.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),e.screen&&!g&&(e.optimizationMode="detail");var w=A(e);return t(),w}},function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"b",(function(){return w}));var n=i(4),r=i(7),a=i.n(r),o=i(13),s=i.n(o),l=i(17),c=i.n(l),u=i(0),h=i(15),d=i(3);function p(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){o=!0,r=e})),f:function(){try{a||null==n.return||n.return()}finally{if(o)throw r}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){o=!0,r=e})),f:function(){try{a||null==n.return||n.return()}finally{if(o)throw r}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var g=i(48),y=i.n(g),b=i(25),k=(i(5),103),C=function(e){var t={};if(t.clientId=e.clientId,e.session_id=k+=1,"undefined"==typeof window||!window.navigator)throw u.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=function(e){var t={},i=(mozRTCPeerConnection,mozRTCSessionDescription),n=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map((function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})})):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):u.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new h.RTCPeerConnection(t.pc_config),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,u.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(d.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var i,n,r,a;n=(i=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),r=i.match(/a=candidate:.+typ\shost.+\r\n/),a=i.match(/a=candidate:.+typ\srelay.+\r\n/),null===n&&null===r&&null===a||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),i=t[1].split("m=video");return t[0]+"m=video"+i[1]+"m=audio"+i[0]},t.processSignalingMessage=function(n){var r,a=JSON.parse(n);t.incomingMessage=a,"new"===t.state?"OFFER"===a.messageType?(a.sdp=g(a.sdp),t.peerConnection.setRemoteDescription(new i(r={sdp:a.sdp,type:"offer"}),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===a.messageType?(a.sdp=g(a.sdp),a.sdp=a.sdp.replace(/ generation 0/g,""),a.sdp=a.sdp.replace(/ udp /g," UDP "),-1!==a.sdp.indexOf("a=group:BUNDLE")?(a.sdp=a.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),a.sdp=a.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),a.sdp=a.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(a.sdp=a.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),a.sdp=a.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),r={sdp:a.sdp,type:"answer"},e.screen&&"detail"===e.optimizationMode&&(u.default.debug("[".concat(t.client,"] remove screen share abs ext")),a.sdp=y(r.sdp)),t.peerConnection.setRemoteDescription(new i(r),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)})),t.state="established"):"pr-answer"===a.messageType?t.peerConnection.setRemoteDescription(new i(r={sdp:a.sdp,type:"pr-answer"}),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})):t.error("offer"===a.messageType?"Not written yet":"Illegal message for this state: "+a.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===a.messageType?(t.peerConnection.setRemoteDescription(new i(r={sdp:a.sdp,type:"offer"}),(function(){u.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){u.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=c()(s.a.mark((function e(i){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerConnection.getSenders(),r=n.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(a=r.getParameters()).degradationPreference=i,e.prev=6,u.default.debug("[".concat(t.clientId,"] setParameters"),a),e.next=10,r.setParameters(a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),u.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var r={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},a={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},o={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},l={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},p=0,f=0,m=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then((function(i){var n,r=v(i.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.isSubscriber){if(("inbound-rtp"===a.type||"inboundrtp"===a.type)&&"video"===a.mediaType){if(!t.lastReport)return void(t.lastReport=a);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:Math.round(a.framerateMean)+"",frameRateDecoded:a.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:a.bytesReceived+"",packetsReceived:a.packetsReceived+"",packetsLost:a.packetsLost+""}),t.lastReport=a}}else if(("outbound-rtp"===a.type||"outboundrtp"===a.type)&&"video"===a.mediaType){if(!t.lastReport)return void(t.lastReport=a);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:Math.round(a.framerateMean)+"",frameRateSent:a.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=a}}}catch(e){r.e(e)}finally{r.f()}}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(i){var n,r=v(i.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;t.isSubscriber&&("inbound-rtp"!==a.type&&"inboundrtp"!==a.type||"audio"!==a.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:a.packetsLost+"",frameReceived:a.packetsReceived+"",googJitterReceived:a.jitter+"",bytesReceived:a.bytesReceived+"",packetsReceived:a.packetsReceived+"",packetsLost:a.packetsLost+""}))}}catch(e){r.e(e)}finally{r.f()}}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){})),e(t)}))},t.getStats=function(e,i){i=(i=i||500)>500?500:i,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<i?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(i,n){t.filterStatsCache=i,t.originStatsCache=n,t.lastTimeGetStats=Date.now(),e&&e(i,n)}))},t._getStats=function(i){t.peerConnection.getStats().then((function(n){var s,c=[],u=v(n.values());try{for(u.s();!(s=u.n()).done;){var h=s.value;c.push(h),"outbound-rtp"!==h.type&&"outboundrtp"!==h.type||"video"!==h.mediaType||-1!==h.id.indexOf("rtcp")||(a.id=h.id,a.type=h.type,a.mediaType=h.mediaType,a.bytesSent=h.bytesSent?h.bytesSent+"":"0",a.packetsSent=h.packetsSent?h.packetsSent+"":"0",a.googPlisReceived=h.pliCount?h.pliCount+"":"0",a.googNacksReceived=h.nackCount?h.nackCount+"":"0",a.googFirsReceived=h.firCount?h.firCount+"":"0",a.googFrameRateSent=h.framerateMean?Math.round(h.framerateMean)+"":"0"),"outbound-rtp"!==h.type&&"outboundrtp"!==h.type||"audio"!==h.mediaType||-1!==h.id.indexOf("rtcp")||(r.id=h.id,r.type=h.type,r.mediaType=h.mediaType,r.bytesSent=h.bytesSent?h.bytesSent+"":"0",r.packetsSent=h.packetsSent?h.packetsSent+"":"0",e.agoraStream.local&&(r.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==h.type&&"inboundrtp"!==h.type||"audio"!==h.mediaType||h.isRemote||-1!==h.id.indexOf("rtcp")||(o.id=h.id,o.type=h.type,o.mediaType=h.mediaType,o.bytesReceived=h.bytesReceived?h.bytesReceived+"":"0",o.packetsLost=h.packetsLost?h.packetsLost+"":"0",o.packetsReceived=h.packetsReceived?h.packetsReceived+"":"0",o.googJitterReceived=h.jitter?h.jitter+"":"0",e.agoraStream.local||(o.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==h.type&&"inboundrtp"!==h.type||"video"!==h.mediaType||h.isRemote||-1!==h.id.indexOf("rtcp")||(l.id=h.id,l.type=h.type,l.mediaType=h.mediaType,l.bytesReceived=h.bytesReceived?h.bytesReceived+"":"0",l.googFrameRateReceived=h.framerateMean?Math.round(h.framerateMean)+"":"0",l.googFramesDecoded=h.framesDecoded?h.framesDecoded+"":"0",Date.now()-m>=1e3?(l.googFrameRateDecoded=(h.framesDecoded-p)/((Date.now()-m)/1e3),l.googFrameRateDecoded=Math.round(Math.max(0,l.googFrameRateDecoded)),m=Date.now(),f=l.googFrameRateDecoded,p=h.framesDecoded,l.googFrameRateDecoded=l.googFrameRateDecoded.toString()):l.googFrameRateDecoded=f.toString(),l.packetsLost=h.packetsLost?h.packetsLost+"":"0",l.packetsReceived=h.packetsReceived?h.packetsReceived+"":"0",l.googJitterBufferMs=h.jitter?h.jitter+"":"0",l.googNacksSent=h.nackCount?h.nackCount+"":"0",l.googPlisSent=h.pliCount?h.pliCount+"":"0",l.googFirsSent=h.firCount?h.firCount+"":"0"),-1!==h.id.indexOf("outbound_rtcp_video")&&(a.packetsLost=h.packetsLost?h.packetsLost+"":"0")}}catch(e){u.e(e)}finally{u.f()}var d=[a,r,o,l];d.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),i(d,c)}),(function(e){u.default.error("["+t.clientId+"]"+e)}))},t.addStream=function(e){n=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)n&&(t.mediaConstraints=void 0),t.peerConnection.createOffer((function(e){if(e.sdp=g(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();u.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){u.default.debug("["+t.clientId+"]Ups! create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(u.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(d.getParameter)("SHIM_CANDIDATE")?(u.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):u.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var i=new Date;u.default.debug("["+t.clientId+"]"+i.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(){u.default.debug("["+t.clientId+"]Ups! Something went wrong")}));else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;t.sendMessage("ANSWER",t.peerConnection.localDescription.sdp),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,i){var n={};n.messageType=e,n.sdp=i,"OFFER"===e?(n.offererSessionId=t.sessionId,n.answererSessionId=t.otherSessionId,n.seq=t.sequenceNumber+=1,n.tiebreaker=Math.floor(429496723*Math.random()+1)):(n.offererSessionId=t.incomingMessage.offererSessionId,n.answererSessionId=t.sessionId,n.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(n))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var i=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(i)return i}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,i,n){var r=t._getSender(e.kind);if(!r)return n("NO_SENDER_FOUND");try{r.replaceTrack(e)}catch(e){return n&&n(e)}setTimeout((function(){return i&&i()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var g=function(t){var i;if(e.video&&e.maxVideoBW&&(null==(i=t.match(/m=video.*\r\n/))&&(i=t.match(/m=video.*\n/)),i&&i.length>0)){var n=i[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(i[0],n)}return e.audio&&e.maxAudioBW&&(null==(i=t.match(/m=audio.*\r\n/))&&(i=t.match(/m=audio.*\n/)),i&&i.length>0)&&(t=t.replace(i[0],n=i[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n")),t},y=function(e){return(e=e.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)):"iOS"===n.getBrowserOS()||n.isSafari()?(u.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=function(e){var t={},i=h.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{urls:["stun:webcs.agora.io:3478","stun:stun.l.google.com:19302"]}],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):u.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new i(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new i(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(d.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var i,n,r,a;n=(i=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),r=i.match(/a=candidate:.+typ\shost.+\r\n/),a=i.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout((function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),1e3)),null===n&&null===r&&null===a||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var n=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},r=function(i){var n;return(n=i.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(i=i.replace(n[0],n[0]+"b=AS:"+e.maxVideoBW+"\r\n"),u.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(n=i.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=i.replace(n[0],n[0]+"b=AS:"+e.maxAudioBW+"\r\n")),i};t.processSignalingMessage=function(i){var a,o=JSON.parse(i);t.incomingMessage=o,"new"===t.state?"OFFER"===o.messageType?(a={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(a)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===o.messageType?((a={sdp:o.sdp,type:"answer"}).sdp=n(a.sdp),a.sdp=r(a.sdp),a.sdp=a.sdp.replace(/a=x-google-flag:conference\r\n/g,""),e.screen&&"detail"===e.optimizationMode&&(u.default.debug("[".concat(t.client,"] remove screen share abs ext")),a.sdp=a.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(a)),t.state="established"):"pr-answer"===o.messageType?(a={sdp:o.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(a))):t.error("offer"===o.messageType?"Not written yet":"Illegal message for this state: "+o.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===o.messageType?(a={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(a)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===o.messageType?((a={sdp:o.sdp,type:"answer"}).sdp=n(a.sdp),a.sdp=r(a.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(a))):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=c()(s.a.mark((function e(i){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerConnection.getSenders(),r=n.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(a=r.getParameters()).degradationPreference=i,e.prev=6,u.default.debug("[".concat(t.clientId,"] setParameters"),a),e.next=10,r.setParameters(a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),u.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var a={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},l={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},p={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},f={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},v=0,m=0,g=0;return t.isRemoteVideoStats=function(e){return!!(e.frameHeight&&e.frameWidth&&e.remoteSource)},t.getVideoRelatedStats=function(i){t.peerConnection.getStats().then((function(n){var r={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};n.forEach((function(n){if(t.isSubscriber){if("track"===n.type&&(~n.id.indexOf("video")||~n.trackIdentifier.indexOf("v")||t.isRemoteVideoStats(n))){if(!t.lastReport)return void(t.lastReport=n);r.frameRateReceived=n.framesReceived-t.lastReport.framesReceived+"",r.frameRateDecoded=n.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=n}"inbound-rtp"===n.type&&~n.id.indexOf("Video")&&(r.bytesReceived=n.bytesReceived+"",r.packetsReceived=n.packetsReceived+"",r.packetsLost=n.packetsLost+"")}else if("outbound-rtp"===n.type&&~n.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=n);i&&i({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:n.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=n}})),i&&i(r)}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(i){i.forEach((function(i){t.isSubscriber&&"inbound-rtp"===i.type&&~i.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:i.packetsLost+"",frameReceived:i.packetsReceived+"",googJitterReceived:i.jitter+"",bytesReceived:i.bytesReceived+"",packetsReceived:i.packetsReceived+"",packetsLost:i.packetsLost+""})}))}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=((e.googFramesEncoded-v)/3).toString(),v=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=((e.googFrameReceived-g)/3).toString(),g=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-m)/3).toString(),m=e.googFramesDecoded))})),e(t)}))},t.getStats=function(e,i){i=(i=i||500)>500?500:i,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<i?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(i,n){t.filterStatsCache=i,t.originStatsCache=n,t.lastTimeGetStats=Date.now(),e&&e(i,n)}))},t._getStats=function(i){var n=[];t.peerConnection.getStats().then((function(r){r.forEach((function(t){var i;n.push(t),"outbound-rtp"===t.type&&"audio"===t.mediaType&&(a.id=t.id,a.type=t.type,a.mediaType=t.mediaType,a.bytesSent=t.bytesSent?t.bytesSent+"":"0",a.packetsSent=t.packetsSent?t.packetsSent+"":"0",e.agoraStream.local&&(a.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===t.type&&"video"===t.mediaType&&(o.id=t.id,o.type=t.type,o.mediaType=t.mediaType,o.bytesSent=t.bytesSent?t.bytesSent+"":"0",o.packetsSent=t.packetsSent?t.packetsSent+"":"0",o.googPlisReceived=t.pliCount?t.pliCount+"":"0",o.googNacksReceived=t.nackCount?t.nackCount+"":"0",o.googFirsReceived=t.firCount?t.firCount+"":"0",o.googFramesEncoded=t.framesEncoded?t.framesEncoded+"":"0",(i=r.get(t.trackId))&&(o.googFrameHeightSent=i.frameHeight&&i.frameHeight.toString(),o.googFrameWidthSent=i.frameWidth&&i.frameWidth.toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("44444")&&"audio"!==t.mediaType||(l.id=t.id,l.type=t.type,l.mediaType="audio",l.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",l.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",l.packetsLost=t.packetsLost?t.packetsLost+"":"0",l.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",l.googJitterReceived=t.jitter?t.jitter+"":"0",(i=r.get(t.trackId))&&(l.audioOutputLevel=i.audioLevel&&Math.round(32767*i.audioLevel).toString()),e.agoraStream.local||l.audioOutputLevel||(l.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("55543")&&"video"!==t.mediaType||(p.id=t.id,p.type=t.type,p.mediaType="video",p.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",p.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",p.packetsLost=t.packetsLost?t.packetsLost+"":"0",p.googJitterBufferMs=t.jitter?t.jitter+"":"0",p.googNacksSent=t.nackCount?t.nackCount+"":"0",p.googPlisSent=t.pliCount?t.pliCount+"":"0",p.googFirsSent=t.firCount?t.firCount+"":"0",(i=r.get(t.trackId))&&(p.googFrameHeightReceived=i.frameHeight&&i.frameHeight.toString(),p.googFrameWidthReceived=i.frameWidth&&i.frameWidth.toString(),p.googFrameReceived=i.framesReceived&&i.framesReceived.toString(),p.googFramesDecdec=i.framesDecoded&&i.framesDecoded.toString())),"candidate-pair"===t.type&&(0==t.availableIncomingBitrate?f.googAvailableSendBandwidth=t.availableOutgoingBitrate+"":f.googAvailableReceiveBandwidth=t.availableIncomingBitrate+"")}));var s=[f,a,o,l,p];s.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),i(s,n)})).catch((function(e){u.default.error("["+t.clientId+"] ",e)}))},t.addTrack=function(e,i){t.peerConnection.addTrack(e,i)},t.removeTrack=function(e,i){var n=t.peerConnection.getSenders().find((function(t){return t.track==e}));n.replaceTrack(null),t.peerConnection.removeTrack(n)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach((function(i){return t.peerConnection.addTrack(i,e)})):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then((function(i){if(i.sdp=r(i.sdp),e.isSubscriber||(i.sdp=i.sdp.replace(/a=.*video-orientation\r\n/g,"")),i.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(i),t.state="preparing-offer",void t.markActionNeeded();u.default.debug("["+t.clientId+"]Not sending a new offer")})).catch((function(e){u.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(u.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(d.getParameter)("SHIM_CANDIDATE")?(u.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):u.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var i=new Date;u.default.debug("["+t.clientId+"]"+i.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){u.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;t.sendMessage("ANSWER",t.peerConnection.localDescription.sdp),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,i){var n={};n.messageType=e,n.sdp=i,"OFFER"===e?(n.offererSessionId=t.sessionId,n.answererSessionId=t.otherSessionId,n.seq=t.sequenceNumber+=1,n.tiebreaker=Math.floor(429496723*Math.random()+1)):(n.offererSessionId=t.incomingMessage.offererSessionId,n.answererSessionId=t.sessionId,n.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(n))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var i=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(i)return i}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,i,n){var r=t._getSender(e.kind);if(!r)return n("NO_SENDER_FOUND");try{r.replaceTrack(e)}catch(e){return n&&n(e)}setTimeout((function(){return i&&i()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){console.log("!!! ontrack, ",e.track.kind,e.track),t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=n(e.sdp),e.sdp=r(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){console.log("createOffer error: ",e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new y.a(e):(t=function(e){var t={},i=h.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{url:"stun:webcs.agora.io:3478"}]};var r={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},l={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},f={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},v={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:"turn:"+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):u.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new i(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new i(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,u.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(d.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var i,n,r,a;n=(i=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),r=i.match(/a=candidate:.+typ\shost.+\r\n/),a=i.match(/a=candidate:.+typ\srelay.+\r\n/),null===n&&null===r&&null===a||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var m=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},g=function(i){var n,r;if((n=i.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){r=n[0]+"b=AS:"+e.maxVideoBW+"\r\n";var a=0,o=0;"h264"===e.codec?(a=i.search(/a=rtpmap:(\d+) H264\/90000\r\n/),o=i.search(/H264\/90000\r\n/)):"vp8"===e.codec&&(a=i.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),o=i.search(/VP8\/90000\r\n/)),-1!==a&&-1!==o&&o-a>10&&(r=r+"a=fmtp:"+i.slice(a+9,o-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),i=i.replace(n[0],r),u.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(n=i.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=i.replace(n[0],r=n[0]+"b=AS:"+e.maxAudioBW+"\r\n")),i};t.processSignalingMessage=function(i){var n,r=JSON.parse(i);t.incomingMessage=r,"new"===t.state?"OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=m(n.sdp),n.sdp=g(n.sdp),e.screen&&"detail"===e.optimizationMode&&(u.default.debug("[".concat(t.client,"] remove screen share abs ext")),n.sdp=n.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),e.isSubscriber&&(n.sdp=n.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="established"):"pr-answer"===r.messageType?(n={sdp:r.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){}))):t.error("offer"===r.messageType?"Not written yet":"Illegal message for this state: "+r.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=m(n.sdp),n.sdp=g(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){}))):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=c()(s.a.mark((function e(i){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerConnection.getSenders(),console.log("senders",n),r=n.find((function(e){return"video"===e.track.kind}))){e.next=5;break}return e.abrupt("return");case 5:return(a=r.getParameters()).degradationPreference=i,e.prev=7,u.default.debug("[".concat(t.clientId,"] setParameters"),a),e.next=11,r.setParameters(a);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),u.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}();var y=0,b=0;return t.getVideoRelatedStats=function(e){t.getStats((function(i){i.forEach((function(i){if(t.isSubscriber){if("video"===i.mediaType&&i.id&&~i.id.indexOf("recv")){if(n.isChromeKernel()&&+n.getBrowserVersion()>=76){var r=+i.googFramesDecoded-b;t._setStat(f,"googFrameRateReceived",+i.googFramesReceived-y),t._setStat(f,"googFrameRateDecoded",r),t._setStat(f,"googFrameRateOutput",r),y=+i.googFramesReceived,b=+i.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:i.googFrameRateReceived,frameRateDecoded:i.googFrameRateDecoded,bytesReceived:i.bytesReceived,packetsReceived:i.packetsReceived,packetsLost:i.packetsLost})}}else"video"===i.mediaType&&i.id&&~i.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:i.googFrameRateInput,frameRateSent:i.googFrameRateSent,googRtt:i.googRtt})}))}))},t.getAudioRelatedStats=function(e){t.getStats((function(i){i.forEach((function(i){t.isSubscriber&&"audio"===i.mediaType&&i.id&&~i.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(i.googDecodingPLC)+parseInt(i.googDecodingPLCCNG)+"",frameReceived:i.googDecodingCTN,googJitterReceived:i.googJitterReceived,bytesReceived:i.bytesReceived,packetsReceived:i.packetsReceived,packetsLost:i.packetsLost})}))}))},t.getStatsRate=function(e){t.getStats((function(t){e(t)}))},t.getStats=function(e,i){i=(i=i||500)>500?500:i,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<i?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats((function(i,n){t.filterStatsCache=i,t.originStatsCache=n,e&&e(i,n)})))},t._setStat=function(e,t,i){e.hasOwnProperty(t)&&(null!=i&&i!==1/0&&i==i||(i=0),e[t]=i+"")},t._processGetStatsAfterChrome76=function(e){var i=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then((function(n){var s,c=[],u=[],h=new Map,d=new Date,m=p(n.values());try{for(m.s();!(s=m.n()).done;){var g=s.value;"codec"!=g.type?"candidate-pair"!=g.type?("inbound-rtp"===g.type&&"video"===g.mediaType&&h.set("inbound-video",g),"inbound-rtp"===g.type&&"audio"===g.mediaType&&h.set("inbound-audio",g),"outbound-rtp"===g.type&&"audio"===g.mediaType&&h.set("outbound-audio",g),"outbound-rtp"===g.type&&"video"===g.mediaType&&h.set("outbound-video",g),"track"===g.type&&"video"===g.kind&&g.remoteSource&&h.set("remote-video-track",g),"track"===g.type&&"audio"===g.kind&&g.remoteSource&&h.set("remote-audio-track",g),"remote-inbound-rtp"===g.type&&"video"===g.mediaType&&h.set("remote-inbound-video",g),"remote-inbound-rtp"===g.type&&"audio"===g.mediaType&&h.set("remote-inbound-audio",g),"track"!==g.type||"video"!==g.kind||g.remoteSource||h.set("local-video-track",g),"track"!==g.type||"audio"!==g.kind||g.remoteSource||h.set("local-audio-track",g),"media-source"===g.type&&"video"===g.kind&&h.set("media-source-video",g),"media-source"===g.type&&"audio"===g.kind&&h.set("media-source-audio",g)):u.push(g):c.push(g)}}catch(e){m.e(e)}finally{m.f()}h.set("codec",c),h.set("candidatePairs",u),h.set("timestamp",+d);var y=null,b=null;if(f.timestamp=d,l.timestamp=d,r.timestamp=d,r.timestamp=d,v.timestamp=d,i.isSubscriber)(y=h.get("inbound-video"))&&(t._setStat(f,"id","inbound_video_ssrc_recv"),t._setStat(f,"mediaType",y.mediaType),t._setStat(f,"packetsLost",y.packetsLost),t._setStat(f,"googDecodeMs",null),t._setStat(f,"googMaxDecodeMs",null),t._setStat(f,"googRenderDelayMs",null),t._setStat(f,"googMinPlayoutDelayMs",null),t._setStat(f,"googNacksSent",y.nackCount),t._setStat(f,"googPlisSent",y.pliCount),t._setStat(f,"googFirsSent",y.firCount),t._setStat(f,"bytesReceived",y.bytesReceived),t._setStat(f,"packetsReceived",y.packetsReceived)),(y=h.get("inbound-audio"))&&(t._setStat(l,"id","inbound_audio_ssrc_recv"),t._setStat(l,"mediaType",y.mediaType),t._setStat(l,"bytesReceived",y.bytesReceived),t._setStat(l,"packetsLost",y.packetsLost),t._setStat(l,"packetsReceived",y.packetsReceived),t._setStat(l,"googAccelerateRate",y.removedSamplesForAcceleration),t._setStat(l,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(l,"googDecodingCNG",null),t._setStat(l,"googDecodingCTN",null),t._setStat(l,"googDecodingCTSG",null),t._setStat(l,"googDecodingNormal",null),t._setStat(l,"googDecodingPLC",null),t._setStat(l,"googDecodingPLCCNG",null),t._setStat(l,"googJitterReceived",y.jitter),t._setStat(l,"googPreferredJitterBufferMs",null),t._setStat(l,"googSecondaryDecodedRate",null)),(y=h.get("remote-video-track"))&&(t._setStat(f,"googTargetDelayMs",y.jitterBufferDelay),t._setStat(f,"googFrameWidthReceived",y.frameWidth),t._setStat(f,"googFrameHeightReceived",y.frameHeight),t._setStat(f,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(f,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(f,"googFramesDecoded",y.framesDecoded),t._setStat(f,"googFramesReceived",y.framesReceived)),(y=h.get("remote-audio-track"))&&(t._setStat(l,"audioOutputLevel",32767*y.audioLevel),t._setStat(l,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(l,"googExpandRate",y.concealedSamples),t._setStat(l,"googPreemptiveExpandRate",y.insertedSamplesForDeceleration),t._setStat(l,"googSpeechExpandRate",y.silentConcealedSamples));else{var k=t.lastStats.get("timestamp"),C=t.lastStats.get("outbound-video");if((y=h.get("outbound-audio"))&&(t._setStat(r,"id","outbound_audio_ssrc_send"),t._setStat(r,"mediaType",y.mediaType),t._setStat(r,"aecDivergentFilterFraction",null),t._setStat(r,"bytesSent",y.bytesSent),t._setStat(r,"packetsSent",y.packetsSent),b=y.transportId),y=h.get("outbound-video")){if(t._setStat(o,"id","outbound_video_ssrc_send"),t._setStat(o,"mediaType",y.mediaType),t._setStat(o,"bytesSent",y.bytesSent),t._setStat(o,"packetsSent",y.packetsSent),t._setStat(o,"googAdaptationChanges",y.qualityLimitationDurations),t._setStat(o,"googAvgEncodeMs",null),t._setStat(o,"googEncodeUsagePercent",null),b=y.transportId,y.totalEncodedBytesTarget&&C&&C.totalEncodedBytesTarget){var w=(y.totalEncodedBytesTarget-C.totalEncodedBytesTarget)/(+new Date-k);t._setStat(v,"googTargetEncBitrate",Math.floor(8*w*1e3))}if(y.retransmittedBytesSent&&C&&C.retransmittedBytesSent){var _=(y.retransmittedBytesSent-C.retransmittedBytesSent)/(+new Date-k);t._setStat(v,"googRetransmitBitrate",Math.floor(8*_*1e3))}if(y.bytesSent&&C&&C.bytesSent){var S=(y.bytesSent-C.bytesSent)/(+new Date-k);t._setStat(v,"googTransmitBitrate",Math.floor(8*S*1e3)),t._setStat(v,"googActualEncBitrate",Math.floor(8*S*1e3))}if(y.totalPacketSendDelay&&C&&C.totalPacketSendDelay){var E=(y.totalPacketSendDelay-C.totalPacketSendDelay)/(+new Date-k);t._setStat(v,"googBucketDelay",Math.floor(1e3*E))}}if((y=h.get("remote-inbound-video"))&&(t._setStat(o,"packetsLost",y.packetsLost),t._setStat(o,"googRtt",y.roundTripTime)),(y=h.get("local-video-track"))&&(t._setStat(o,"googFrameHeightSent",y.frameHeight),t._setStat(o,"googFrameWidthSent",y.frameWidth),void 0!==y.framesPerSecond&&t._setStat(o,"googFrameRateSent",y.framesPerSecond)),(y=h.get("local-audio-track"))&&(t._setStat(r,"googEchoCancellationReturnLoss",y.echoReturnLoss),t._setStat(r,"googEchoCancellationReturnLossEnhancement",y.echoReturnLossEnhancement)),(y=h.get("media-source-video"))&&(t._setStat(o,"googFrameHeightInput",y.height),t._setStat(o,"googFrameWidthInput",y.width),t._setStat(o,"googFrameRateInput",y.framesPerSecond)),(y=h.get("media-source-audio"))&&t._setStat(r,"audioInputLevel",32767*y.totalAudioEnergy),(y=h.get("inbound-video"))&&(t._setStat(o,"googFirsReceived",y.firCount),t._setStat(o,"googNacksReceived",y.nackCount),t._setStat(o,"googPlisReceived",y.pliCount)),b)h.get("candidatePairs").map((function(e){b==e.transportId&&t._setStat(v,"googAvailableSendBandwidth",e.availableOutgoingBitrate)}));else{var T=h.get("candidatePairs")[0];T&&t._setStat(v,"googAvailableSendBandwidth",T.availableOutgoingBitrate)}}t.lastStats=h;var A=[a()({},o),a()({},r),a()({},f),a()({},l),a()({},v)];A.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(A)}))},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats((function(i){var n=[],s=[],c=null;Object.keys(i).forEach((function(e){var t=i[e];t&&(s.push(t),c=t.timestamp,"VideoBwe"===t.type?v=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?o=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?r=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?f=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(l=t))})),(n=[a()({},o),a()({},r),a()({},f),a()({},l),a()({},v)]).push({id:"time",startTime:t.connectedTime,timestamp:c||new Date}),e(n,s)}))},t._getStats=function(e){Object(d.getParameter)("CHROME_NEW_STATS")&&n.isChromeKernel()&&+n.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,i){t.peerConnection.addTrack(e,i)},t.removeTrack=function(e,i){t.peerConnection.removeTrack(t.peerConnection.getSenders().find((function(t){return t.track==e})))},t.addStream=function(e){t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer((function(i){if(i.sdp!==t.prevOffer)return e.isSubscriber&&(i.sdp=i.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setLocalDescription(i),t.state="preparing-offer",void t.markActionNeeded();u.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){u.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(u.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(d.getParameter)("SHIM_CANDIDATE")?(u.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):u.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var i=new Date;u.default.debug("["+t.clientId+"]"+i.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){u.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;t.sendMessage("ANSWER",t.peerConnection.localDescription.sdp),t.state="established"}else u.default.debug("[".concat(t.clientId,"] Dazed and confused in state ' + that.state + ', stopping here'"));t.actionNeeded=!1}},t.sendMessage=function(e,i){var n={};n.messageType=e,n.sdp=i,"OFFER"===e?(n.offererSessionId=t.sessionId,n.answererSessionId=t.otherSessionId,n.seq=t.sequenceNumber+=1,n.tiebreaker=Math.floor(429496723*Math.random()+1)):(n.offererSessionId=t.incomingMessage.offererSessionId,n.answererSessionId=t.sessionId,n.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(n))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var i=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(i)return i}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,i,n){var r=t._getSender(e.kind);if(!r)return n("NO_SENDER_FOUND");try{r.replaceTrack(e)}catch(e){return n&&n(e)}setTimeout((function(){return i&&i()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=m(e.sdp),e.sdp=g(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){console.log("createOffer error: ",e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t}(e)).browser="chrome-stable",t},w=function(e,t,i){var r={};r.config=e,r.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var a=0,o=1,s=!1,l=null,c=function(e){if(a++,l)if(l===e)u.default.debug("Using Video Source/ Audio Source");else{var i=l.getVideoTracks()[0],n=l.getAudioTracks()[0],r=e.getVideoTracks()[0],c=e.getAudioTracks()[0];r&&(i&&l.removeTrack(i),l.addTrack(r)),c&&(n&&l.removeTrack(n),l.addTrack(c))}else l=e;a!==o||s||(s=!0,setTimeout((function(){t(l)}),0))},h=function(e){u.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),a++,s||(s=!0,setTimeout((function(){i&&i(e)}),0))},d=function(){var t={video:e.video,audio:e.audio};if(u.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(c).catch(h);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,c,h);else{var n={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};u.default.error("["+r.streamId+"]"+n.message),i&&i(n)}};if((e.videoSource||e.audioSource)&&(l=new MediaStream,e.videoSource&&l.addTrack(e.videoSource),e.audioSource&&l.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio){if(!e.screen&&e.screenAudio)return i&&i({code:"Set screen to true before sharing the audio"});if(e.screen){if(b.a.isElectron())return e.screen.sourceId?b.a.getScreenStream(e.screen.sourceId,e.screen,(function(t,i){t?h(t):(e.audio&&(o++,d()),c(i))})):b.a.shareScreen(e.screen,(function(t,i){t?h(t):(e.audio&&(o++,d()),c(i))}));if(n.isFireFox()){if(u.default.debug("["+r.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(e.screen.mediaSource))return i&&i({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},(function(t){e.audio&&(o++,d()),c(t)}),h)}else if(n.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void i({code:"This browser does not support screen sharing"});u.default.debug("["+r.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},(function(t){void 0===t?(u.default.error("["+r.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),h({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},(function(t){e.audio&&(o++,d()),c(t)}),h))}))}catch(e){return u.default.debug("["+r.streamId+"]AgoraRTC screensharing plugin is not accessible"),void i({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var p={};return p.video="number"==typeof e.screen.width&&"number"==typeof e.screen.height?{width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:{width:e.screen.width,height:e.screen.height},p.video.frameRate=e.screen.frameRate&&e.screen.frameRate.min?{ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:e.screen.frameRate,e.screenAudio&&(p.audio=e.screenAudio),u.default.debug("use getDisplayMedia, constraints:",p),window.navigator.mediaDevices.getDisplayMedia(p).then((function(t){!e.screenAudio&&e.audio&&(o++,d()),c(t)})).catch(h)}u.default.error("["+r.streamId+"]This browser does not support screenSharing"),i({code:"This browser does not support screen sharing"})}}else d()}else c(l)}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(0)),a=function(){function e(e,t,i){void 0===t&&(t=""),this.name="AgoraRTCException",this.code=e,this.message="AgoraRTCError "+this.code+": "+t,this.data=i}return e.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},e.prototype.throw=function(){throw r.default.error(this.toString()),this},e}();t.AgoraRTCError=a,function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(t.AgoraRTCErrorCode||(t.AgoraRTCErrorCode={}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(0),r=window.AudioContext||window.webkitAudioContext,a=i(3),o=a.getParameter,s=a.setParameter,l=function(){return o("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),s("AUDIO_CONTEXT",function(){if(r){var e=new r;return window.ctx=e,new Promise((function(e){document.body?e():window.addEventListener("load",e)})).then((function(){var t=function t(){"suspended"==e.state?(n.default.debug("AudioContext is suspended, auto resume"),e.resume().then((function(){n.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0)}))):(n.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0))};n.default.debug(">>> add event listener >>>>"),document.body.addEventListener("touchend",t,!0),document.body.addEventListener("mousedown",t,!0)})),e}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),o("AUDIO_CONTEXT")};l()},function(e,t,i){"use strict";var n=i(1),r=null,a=function(){try{r=window.require("electron")}catch(e){}return r},o=function(e){var t=n.report.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),i=a();if(!i)return t&&t("electron is null");try{var r=i.desktopCapturer.getSources({types:["window","screen"]})}catch(e){console.log(e)}r instanceof Promise?(console.log("electron.desktopCapturer.getSources return type is Promise"),r.then((function(e){return t&&t(null,e)})).catch((function(e){return t&&t(e)}))):r=i.desktopCapturer.getSources({types:["window","screen"]},(function(e,i){console.log("electron.desktopCapturer.getSources return type is callback"),t&&t(null,i)}))},s=function(e,t,i){t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:t.width,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}},navigator.webkitGetUserMedia(t,(function(e){i&&i(null,e)}),(function(e){i&&i(e)}))};t.a={isElectron:function(){return!!a()},getElectronInstance:a,getScreenSources:o,getScreenStream:s,shareScreen:function(e,t){o((function(i,n){if(i)return t&&t(i);!function(e,t){var i=document.createElement("div");i.innerText="share screen",i.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var n=document.createElement("div");n.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var r=document.createElement("div");r.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",r.setAttribute("style","height: 12%;");var a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var o=document.createElement("div");o.setAttribute("style","text-align: right; padding: 16px 0;");var s=document.createElement("button");s.innerHTML="cancel",s.setAttribute("style","width: 85px;"),s.onclick=function(){document.body.removeChild(l),t&&t("NotAllowedError")},o.appendChild(s),n.appendChild(r),n.appendChild(a),n.appendChild(o);var l=document.createElement("div");l.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),l.appendChild(i),l.appendChild(n),document.body.appendChild(l),e.map((function(e){if(e.id){var i=document.createElement("div");i.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;"),i.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+e.thumbnail.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name+"</span>",i.onclick=function(){document.body.removeChild(l),t&&t(null,e.id)},a.appendChild(i)}}))}(n,(function(i,n){if(i)return t&&t(i);s(n,e,t)}))}))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(t.LiveStreamingServiceMode||(t.LiveStreamingServiceMode={})),t.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},t.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},t.isLiveStreamingTranscodingConfig=function(e){return n.isEmpty(e.width)||n.checkValidNumber(e.width,"config.width",0),n.isEmpty(e.height)||n.checkValidNumber(e.height,"config.height",0),n.isEmpty(e.videoBitrate)||n.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e6),n.isEmpty(e.videoFramerate)||n.checkValidNumber(e.videoFramerate,"config.videoFramerate"),n.isEmpty(e.lowLatency)||n.checkValidBoolean(e.lowLatency,"config.lowLatency"),n.isEmpty(e.audioSampleRate)||n.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),n.isEmpty(e.audioBitrate)||n.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,128),n.isEmpty(e.audioChannels)||n.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),n.isEmpty(e.videoGop)||n.checkValidNumber(e.videoGop,"config.videoGop"),n.isEmpty(e.videoCodecProfile)||n.checkValidEnum(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),n.isEmpty(e.userCount)||n.checkValidNumber(e.userCount,"config.userCount",0,17),n.isEmpty(e.backgroundColor)||n.checkValidNumber(e.backgroundColor,"config.backgroundColor",0,16777215),e.transcodingUsers&&!n.isEmpty(e.transcodingUsers)&&(n.checkValidArray(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){n.checkValidUID(e.uid),n.isEmpty(e.x)||n.checkValidNumber(e.x,"transcodingUser["+t+"].x",0,1e4),n.isEmpty(e.y)||n.checkValidNumber(e.y,"transcodingUser["+t+"].y",0,1e4),n.isEmpty(e.width)||n.checkValidNumber(e.width,"transcodingUser["+t+"].width",0,1e4),n.isEmpty(e.height)||n.checkValidNumber(e.height,"transcodingUser["+t+"].height",0,1e4),n.isEmpty(e.zOrder)||n.checkValidNumber(e.zOrder-1,"transcodingUser["+t+"].zOrder",0,100),n.isEmpty(e.alpha)||n.checkValidFloatNumber(e.alpha,"transcodingUser["+t+"].alpha",0,1)}))),e.images&&!n.isEmpty(e.images)&&(n.checkValidArray(e.images,"config.images"),e.images.forEach((function(e,t){n.checkValidString(e.url,"images["+t+"].url",1,1e3,!1),n.isEmpty(e.x)||n.checkValidNumber(e.x,"images["+t+"].x",0,1e4),n.isEmpty(e.y)||n.checkValidNumber(e.y,"images["+t+"].y",0,1e4),n.isEmpty(e.width)||n.checkValidNumber(e.width,"images["+t+"].width",0,1e4),n.isEmpty(e.height)||n.checkValidNumber(e.height,"images["+t+"].height",0,1e4),n.isEmpty(e.zOrder)||n.checkValidNumber(e.zOrder,"images["+t+"].zOrder",0,255),n.isEmpty(e.alpha)||n.checkValidFloatNumber(e.alpha,"images["+t+"].alpha",0,1)}))),!0},t.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},t.isInjectStreamConfig=function(e){return n.isEmpty(e.audioVolume)||n.checkValidNumber(e.audioVolume,"config.audioVolume",0,1e3),n.isEmpty(e.audioBitrate)||n.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,1e4),n.isEmpty(e.audioChannels)||n.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2]),n.isEmpty(e.audioSampleRate)||n.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),n.isEmpty(e.width)||n.checkValidNumber(e.width,"config.width",0,1e4),n.isEmpty(e.height)||n.checkValidNumber(e.height,"config.height",0,1e4),n.isEmpty(e.videoBitrate)||n.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e4),n.isEmpty(e.videoFramerate)||n.checkValidNumber(e.videoFramerate,"config.videoFramerate",1,1e4),n.isEmpty(e.videoGop)||n.checkValidNumber(e.videoGop,"config.videoGop",1,1e4),!0},t.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(t.LiveStreamingUapSignalEvents||(t.LiveStreamingUapSignalEvents={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(t.LiveStreamingInternalEvents||(t.LiveStreamingInternalEvents={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(t.LIVE_STREAM_ERROR_CODE||(t.LIVE_STREAM_ERROR_CODE={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(t.WebSocketManagerEvents||(t.WebSocketManagerEvents={}))},function(e,t,i){var n=i(54),r=i(55);e.exports=function(e,t,i){var a=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=n(i(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(r||(r={})),t.AREAS=r,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(a||(a={}));var s={ASIA:{CODE:a.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]},NORTH_AMERICA:{CODE:a.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]},EUROPE:{CODE:a.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]},JAPAN:{CODE:a.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]},INDIA:{CODE:a.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]},OVERSEA:{CODE:a.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]},GLOBAL:{CODE:a.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"]},OCEANIA:{CODE:a.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]},SOUTH_AMERICA:{CODE:a.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]},AFRICA:{CODE:a.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}};t.AREA_DOMAIN_MAP=s,s.CHINA={CODE:a.CHINA,WEBCS_DOMAIN:["webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["proxy-ap-web.agoraio.cn"],CDS_AP:["cds-ap-web-2.agoraio.cn","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-2.agoraio.cn","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-2.agoraio.cn","uap-ap-web-4.agoraio.cn"],EVENT_REPORT_DOMAIN:["statscollector-3.agoraio.cn"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-4.agoraio.cn"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(s),i=0;i<t.length;i++){var n=s[t[i]];if(n.WEBCS_DOMAIN.includes(e)||n.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return n.CODE===a.OVERSEA?a.ASIA+","+a.EUROPE+","+a.AFRICA+","+a.NORTH_AMERICA+","+a.SOUTH_AMERICA+","+a.OCEANIA:n.CODE}},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[]};return e.map((function(e){var i=s[e],n=Object.keys(i);n?n.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(i[e]))})):o.default.info(e+" is not exist")})),t}},function(e,t,i){var n=i(68),r=i(69),a=i(31),o=i(70);e.exports=function(e){return n(e)||r(e)||a(e)||o()}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=n(i(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(r||(r={})),t.AREAS=r,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(a||(a={}));var s={ASIA:{CODE:a.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]},NORTH_AMERICA:{CODE:a.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]},EUROPE:{CODE:a.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]},JAPAN:{CODE:a.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]},INDIA:{CODE:a.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]},OVERSEA:{CODE:a.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]},GLOBAL:{CODE:a.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"]},OCEANIA:{CODE:a.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]},SOUTH_AMERICA:{CODE:a.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]},AFRICA:{CODE:a.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}};t.AREA_DOMAIN_MAP=s,s.CHINA={CODE:a.CHINA,WEBCS_DOMAIN:["webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["proxy-ap-web.agoraio.cn"],CDS_AP:["cds-ap-web-2.agoraio.cn","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-2.agoraio.cn","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-2.agoraio.cn","uap-ap-web-4.agoraio.cn"],EVENT_REPORT_DOMAIN:["statscollector-3.agoraio.cn"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-4.agoraio.cn"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(s),i=0;i<t.length;i++){var n=s[t[i]];if(n.WEBCS_DOMAIN.includes(e)||n.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return n.CODE===a.OVERSEA?a.ASIA+","+a.EUROPE+","+a.AFRICA+","+a.NORTH_AMERICA+","+a.SOUTH_AMERICA+","+a.OCEANIA:n.CODE}},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[]};return e.map((function(e){var i=s[e],n=Object.keys(i);n?n.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(i[e]))})):o.default.info(e+" is not exist")})),t}},function(e,t,i){var n=i(32);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}},function(e,t,i){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)n[r]=a[o];return n};Object.defineProperty(t,"__esModule",{value:!0});var r=i(23),a=function(){function e(){this._events={},this.addListener=this.on}return e.prototype.getListeners=function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]},e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]);var i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!1})},e.prototype.once=function(e,t){this._events[e]||(this._events[e]=[]);var i=this._events[e];-1===this._indexOfListener(i,t)&&i.push({listener:t,once:!0})},e.prototype.off=function(e,t){if(this._events[e]){var i=this._events[e],n=this._indexOfListener(i,t);-1!==n&&i.splice(n,1),0===this._events[e].length&&delete this._events[e]}},e.prototype.removeAllListeners=function(e){e?delete this._events[e]:this._events={}},e.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this._events[e]||(this._events[e]=[]);for(var n=this._events[e].map((function(e){return e})),r=0;r<n.length;r+=1){var a=n[r];a.once&&this.off(e,a.listener),a.listener.apply(this,t||[])}},e.prototype._indexOfListener=function(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1},e}();function o(e,t){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=null,s=null;if(e.emit.apply(e,n([t],i,[function(e){o=e},function(e){s=e}])),null!==s)throw s;if(null===o)throw new r.AgoraRTCError(r.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return o}t.EventEmitter=a,t.emitAsPromise=function(e,t){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return 0===e.getListeners(t).length?Promise.reject(new r.AgoraRTCError(r.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise((function(r,a){e.emit.apply(e,n([t],i,[r,a]))}))},t.emitAsInvokerNoResponse=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return 0===e.getListeners(t).length?null:o.apply(void 0,n([e,t],i))},t.emitAsInvoker=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(3),l=o(i(35)),c=i(23),u=o(i(0)),h=i(1);function d(e){return new Promise((function(t){window.setTimeout(t,e)}))}function p(e,t){return new Promise((function(i,n){t.timeout=t.timeout||s.getParameter("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&(t.data=JSON.stringify(t.data)),t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t.method="POST",t.url=e,l.default.request(t).then((function(e){i(e.data)})).catch((function(e){l.default.isCancel(e)?n(new c.AgoraRTCError(c.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):n("ECONNABORTED"===e.code?new c.AgoraRTCError(c.AgoraRTCErrorCode.NETWORK_TIMEOUT,e.message):e.response?new c.AgoraRTCError(c.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,e.response.status):new c.AgoraRTCError(c.AgoraRTCErrorCode.NETWORK_ERROR,e.message))}))}))}function f(e,i,n,o){var s=this,l=Object.assign({},t.DEFAULT_RETRY_CONFIG,o),u=l.timeout,h=function(){return r(s,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,d(u)];case 1:return e.sent(),u*=l.timeoutFactor,u=Math.min(l.maxRetryTimeout,u),[2]}}))}))},p=!1,f=new Promise((function(t,o){return r(s,void 0,void 0,(function(){var r,s,u;return a(this,(function(a){switch(a.label){case 0:i=i||function(){return!1},n=n||function(){return!0},r=0,a.label=1;case 1:if(!(r<l.maxRetryCount))return[3,12];if(p)return[2,o(new c.AgoraRTCError(c.AgoraRTCErrorCode.OPERATION_ABORT))];a.label=2;case 2:return a.trys.push([2,7,,11]),[4,e()];case 3:return s=a.sent(),i(s,r)?r+1===l.maxRetryCount?[2,t(s)]:[4,h()]:[3,5];case 4:return a.sent(),[3,6];case 5:return[2,t(s)];case 6:return[3,11];case 7:return u=a.sent(),n(u,r)?r+1===l.maxRetryCount?[2,o(u)]:[4,h()]:[3,9];case 8:return a.sent(),[3,10];case 9:return[2,o(u)];case 10:return[3,11];case 11:return r+=1,[3,1];case 12:return[2]}}))}))}));return f.cancel=function(){return p=!0},f}function v(e,t){return{addressList:e.servers.map((function(e,i){return"wss://"+e.address.replace(/\./g,"-")+".edge."+(i%2==0?"agora.io":"agoraio.cn")+":"+e.wss+"?serviceName="+encodeURIComponent(t)})),workerToken:e.workerToken,vid:e.vid}}t.wait=d,t.post=p,t.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},t.getRetryWaitTime=function(e,t){var i=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,i)},t.retryable=f,t.liveStreamingServerResponseToResult=v;var m=1;function g(e,i,o,l,d){var g=this;void 0===d&&(d=t.DEFAULT_RETRY_CONFIG),m+=1;var y,b,k={sid:o.sid,command:"convergeAllocateEdge",uid:"666",appId:o.appId,ts:Math.floor(Date.now()/1e3),seq:m,requestId:m,version:s.VERSION,cname:o.cname},C={service_name:i,json_body:JSON.stringify(k)},w=e[0];return f((function(){return r(g,void 0,void 0,(function(){var e,t,r,o,h;return a(this,(function(a){switch(a.label){case 0:return y=Date.now(),[4,p(w,{data:C,cancelToken:l,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(e=a.sent(),b=Date.now()-y,0!==e.code)throw r=new c.AgoraRTCError(c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0}),u.default.error(r.toString()),r;if(200!==(t=JSON.parse(e.json_body)).code)throw r=new c.AgoraRTCError(c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+t.code+", reason: "+t.reason),u.default.error(r.toString()),r;if(!t.servers||0===t.servers.length)throw r=new c.AgoraRTCError(c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),u.default.error(r.toString()),r;if(o=v(t,i),s.getParameter("LIVE_STREAMING_ADDRESS"))try{h=JSON.parse(s.getParameter("LIVE_STREAMING_ADDRESS")),o.addressList=h}catch(e){o.addressList=[s.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,n(n({},o),{responseTime:b})]}}))}))}),(function(t,n){return h.report.requestApWorkerEvent(o.sid,{success:!0,sc:200,serviceName:i,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:b,serverIp:e[n%e.length]}),!1}),(function(t,n){return h.report.requestApWorkerEvent(o.sid,{success:!1,sc:t.data&&t.data.code||200,serviceName:i,responseTime:b,serverIp:e[n%e.length]}),!!(t.code!==c.AgoraRTCErrorCode.OPERATION_ABORT&&t.code!==c.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(w=e[(n+1)%e.length],!0)}),d)}t.requestLiveStreamingWorkerManager=g,t.getLiveStreamingWorkerMangerResult=function(e,t,i){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:n=s.getParameter("UAP_AP").map((function(e){return t.proxyServer?"https://"+t.proxyServer+"/ap/?url="+e+"/api/v1?action=uap":"https://"+e+"/api/v1?action=uap"})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,g(n,e,t,i)];case 2:return[2,a.sent()];case 3:throw r=a.sent(),h.report.requestApWorkerEvent(t.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:e,responseTime:r.data&&r.data.responseTime}),r;case 4:return[2]}}))}))}},function(e,t,i){e.exports=i(74)},function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},function(e,t,i){"use strict";var n=i(18);function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var a;if(i)a=i(t);else if(n.isURLSearchParams(t))a=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,i){"use strict";(function(t){var n=i(18),r=i(80),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=i(40)),s),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){l.headers[e]=n.merge(a)})),e.exports=l}).call(this,i(79))},function(e,t,i){"use strict";var n=i(18),r=i(81),a=i(37),o=i(83),s=i(86),l=i(87),c=i(41);e.exports=function(e){return new Promise((function(t,u){var h=e.data,d=e.headers;n.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest;e.auth&&(d.Authorization="Basic "+btoa((e.auth.username||"")+":"+(e.auth.password||"")));var f=o(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),a(f,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null;r(t,u,{data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}},p.onabort=function(){p&&(u(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){u(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(c(t,e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var v=i(88),m=(e.withCredentials||l(f))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in p&&n.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),u(e),p=null)})),void 0===h&&(h=null),p.send(h)}))}},function(e,t,i){"use strict";var n=i(82);e.exports=function(e,t,i,r,a){var o=new Error(e);return n(o,t,i,r,a)}},function(e,t,i){"use strict";var n=i(18);e.exports=function(e,t){t=t||{};var i={},r=["url","method","params","data"],a=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(r,(function(e){void 0!==t[e]&&(i[e]=t[e])})),n.forEach(a,(function(r){n.isObject(t[r])?i[r]=n.deepMerge(e[r],t[r]):void 0!==t[r]?i[r]=t[r]:n.isObject(e[r])?i[r]=n.deepMerge(e[r]):void 0!==e[r]&&(i[r]=e[r])})),n.forEach(o,(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])}));var s=r.concat(a).concat(o),l=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return n.forEach(l,(function(n){void 0!==t[n]?i[n]=t[n]:void 0!==e[n]&&(i[n]=e[n])})),i}},function(e,t,i){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=a(i(56)),l=o(i(60)),c=o(i(61)),u=a(i(0)),h=i(3),d=s.default.Root.fromJSON(c),p=function(){function e(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return e.prototype.setProxy=function(e){this.proxyServer=e},e.prototype.sendReportList=function(e){var t=this,i=this._dataConvert("ProtoRaws",{sendTs:Math.round(Date.now()/1e3),payloads:e.map((function(e){return{id:l[e.type],msg:t._dataConvert(e.type,e.data)}}))});this.send(i)},e.prototype._dataConvert=function(e,t){var i;try{i=d.lookupType("protobuf."+e)}catch(t){u.default.error("[send-proto] invalid proto name "+e)}var n=i.create(t);return i.encode(n).finish()},e.prototype.send=function(e){0==this.state?this._send(e):this.requestArray.push(e)},e.prototype._send=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),this.state=1,[4,this.request(e)];case 1:return t.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return t.sent(),[4,f(this.retryBackoffCount++<2?200:1e4)];case 3:return t.sent(),this._send(e),[3,4];case 4:return[2]}}))}))},e.prototype.request=function(e){return n(this,void 0,void 0,(function(){var t,i;return r(this,(function(n){switch(n.label){case 0:t=this._getAddress(),i=this._getBackupAddress(),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,this._request(t,e)];case 2:return n.sent(),[3,5];case 3:return n.sent(),[4,this._request(i,e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},e.prototype._request=function(e,t){return this._post(e,t)},e.prototype._post=function(e,t){return new Promise((function(i,n){var r=new XMLHttpRequest;r.timeout=h.getParameter("HTTP_CONNECT_TIMEOUT"),r.open("POST",e,!0),r.setRequestHeader("Content-type","application/octet-stream"),r.onload=function(e){i(r.responseText)},r.onerror=function(e){n(e)},r.ontimeout=function(e){n(e)},r.send(t)}))},e.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+h.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+h.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},e.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+h.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+h.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},e}();t.default=p;var f=function(e){return new Promise((function(t){window.setTimeout(t,e)}))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,s=a(i(0)),l=i(15);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(o||(o={}));var c=function(){function e(e){this.candidate=null,this.state=o.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:"h264"===this.config.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setRtpSenderParameters=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2]}))}))},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var i=[];this.config.isSubscriber?(i.push(this.receiveVideoStats),i.push(this.receiveAudioStats)):(i.push(this.sendAudioStats),i.push(this.sendVideoStats)),i.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(i)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,i=[];this.peerConnection.getStats(null).then((function(n){t.lastTimeGetStats=Date.now(),Object.keys(n).map((function(e){var i=n[e];t.config.isSubscriber?i.type&&"inboundrtp"===i.type&&i.mediaType&&"audio"===i.mediaType?(t.receiveAudioStats.id=i.id+"recv",t.receiveAudioStats.type=i.type+"",t.receiveAudioStats.mediaType=i.mediaType+"",t.receiveAudioStats.packetsReceived=i.packetsReceived+"",t.receiveAudioStats.bytesReceived=i.bytesReceived+"",t.receiveAudioStats.packetsLost=i.packetsLost+"",t.receiveAudioStats.googJitterReceived=i.jitter+""):i.type&&"inboundrtp"===i.type&&i.mediaType&&"video"===i.mediaType?(t.receiveVideoStats.id=i.id+"recv",t.receiveVideoStats.type=i.type+"",t.receiveVideoStats.mediaType=i.mediaType+"",t.receiveVideoStats.packetsReceived=i.packetsReceived+"",t.receiveVideoStats.bytesReceived=i.bytesReceived+"",t.receiveVideoStats.packetsLost=i.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=i.jitter+"",t.receiveVideoStats.googPlisSent=i.pliCount+"",t.receiveVideoStats.googFirsSent=i.firCount+"",t.receiveVideoStats.googNacksSent=i.nackCount+""):i.remoteSource&&i.type&&"track"===i.type&&i.trackIdentifier&&-1!==i.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=i.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=i.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=i.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=i.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=i.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=i.framesDecoded+"",t.receiveVideoStats.googFrameReceived=i.framesReceived+""):i.remoteSource&&i.type&&"track"===i.type&&i.trackIdentifier&&-1!==i.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=i.audioLevel+""):!i.isRemote&&i.type&&"outboundrtp"===i.type&&i.mediaType&&"audio"===i.mediaType?(t.sendAudioStats.id=i.id+"send",t.sendAudioStats.type=i.type+"",t.sendAudioStats.mediaType=i.mediaType+"",t.sendAudioStats.packetsSent=i.packetsSent+"",t.sendAudioStats.bytesSent=i.bytesSent+""):!i.isRemote&&i.type&&"outboundrtp"===i.type&&i.mediaType&&"video"===i.mediaType?(t.sendVideoStats.id=i.id+"send",t.sendVideoStats.type=i.type+"",t.sendVideoStats.mediaType=i.mediaType+"",t.sendVideoStats.packetsSent=i.packetsSent+"",t.sendVideoStats.bytesSent=i.bytesSent+"",t.sendVideoStats.googRtt=i.roundTripTime+"",t.sendVideoStats.googPlisReceived=i.pliCount+"",t.sendVideoStats.googFirsReceived=i.firCount+"",t.sendVideoStats.googNacksReceived=i.nackCount+""):!i.remoteSource&&i.type&&"track"===i.type&&i.framesSent&&0!==i.framesSent&&(t.sendVideoStats.googFrameHeightSent=i.frameHeight+"",t.sendVideoStats.googFrameHeightInput=i.frameHeight+"",t.sendVideoStats.googFrameWidthSent=i.frameWidth+"",t.sendVideoStats.googFrameWidthInput=i.frameWidth+"",t.sendVideoStats.googFramesEncoded=i.framesSent+"",t.sendVideoStats.googFrameRateSent=i.framesPerSecond+"")})),t.config.isSubscriber?(i.push(t.receiveVideoStats),i.push(t.receiveAudioStats)):(i.push(t.sendAudioStats),i.push(t.sendVideoStats)),i.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(i)}))},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,i=e.turnServer,n=e.iceServers;return this.pcConfig={iceServers:[{urls:"stun:webcs.agora.io:3478"}]},n instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map((function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})})):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),i&&(i instanceof Array?i.map((function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==i.mode&&"manual"!==i.mode||(i.udpport&&this.pcConfig.iceServers.push({username:i.username,credential:i.credential,credentialType:"password",urls:"turn:"+i.url+":"+i.udpport+"?transport=udp"}),"string"==typeof i.tcpport&&""!==i.tcpport&&this.pcConfig.iceServers.push({username:i.username,credential:i.credential,credentialType:"password",urls:"turn:"+i.url+":"+i.tcpport+"?transport=tcp"}),!0===i.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new l.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=o.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=o.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,i,n=this.config,r=n.codec,a=n.minVideoBW,o=n.maxVideoBW,l=n.maxAudioBW,c=n.clientId;if((t=e.match(/m=video.*\r\n/))&&a&&o){i=t[0]+"b=AS:"+o+"\r\n";var u=0,h=0;"h264"===r?(u=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),h=e.search(/H264\/90000\r\n/)):"vp8"===r&&(u=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),h=e.search(/VP8\/90000\r\n/)),-1!==u&&-1!==h&&h-u>10&&(i=i+"a=fmtp:"+e.slice(u+9,h-1)+" x-google-min-bitrate="+a+"\r\n"),e=e.replace(t[0],i),s.default.debug("["+c+"]Set Video Bitrate - min:"+a+" max:"+o)}return(t=e.match(/m=audio.*\r\n/))&&l&&(e=e.replace(t[0],i=t[0]+"b=AS:"+l+"\r\n")),e},e.prototype.reviseOpus=function(e){return(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=o.OFFER_SENT},e}();t.default=c},function(e,t,i){var n=i(63),r=i(64),a=i(31),o=i(65);e.exports=function(e,t){return n(e)||r(e,t)||a(e,t)||o()}},function(e,t,i){var n,r,a;r=this,a=function(){"use strict";var e,t=this;function i(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function n(e,t,n,r){var a=r||i,o=e.createShader(n);return e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(a("*** Error compiling shader '"+o+"':"+e.getShaderInfoLog(o)),e.deleteShader(o),null)}function r(e,t,n,r,a){var o=a||i,s=e.createProgram();return t.forEach((function(t){e.attachShader(s,t)})),n&&n.forEach((function(t,i){e.bindAttribLocation(s,r?r[i]:i,t)})),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(o("Error in program linking:"+e.getProgramInfoLog(s)),e.deleteProgram(s),null)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var a,o=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(a=HTMLCanvasElement.prototype.getContext,function(){var e=arguments,t=e[0];return"webgl"===t&&((e=[].slice.call(arguments))[0]="experimental-webgl"),a.apply(this,e)})),{createProgram:r,createProgramFromSources:function(e,t,i,a,s){for(var l=[],c=0;c<t.length;++c)l.push(n(e,t[c],e[o[c]],s));return r(e,l,i,a,s)}}},void 0===(n=(function(){return a.call(r)}).apply(t,[]))||(e.exports=n)},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(66),s=i(4),l=a(i(0));t.getSupportedCodec=function(e){return n(void 0,void 0,void 0,(function(){var t,i,n,a;return r(this,(function(r){switch(r.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(l.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{i=o.createRTCPeerConnection({iceServers:[]})}catch(e){return l.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return i?[3,2]:(l.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(n={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},a=void 0,(s.isSafari()||s.isFireFox()||s.isWeChatBrowser())&&i.addTransceiver?(i.addTransceiver("audio"),i.addTransceiver("video"),[4,i.createOffer()]):[3,4]);case 3:return a=r.sent(),[3,6];case 4:return[4,new Promise((function(e,t){var r=setTimeout((function(){t("CREATEOFFER_TIMEOUT")}),3e3);i.createOffer((function(t){clearTimeout(r),e(t)}),(function(e){clearTimeout(r),t(e)}),n)}))];case 5:a=r.sent(),r.label=6;case 6:return i.close(),[2,c(a.sdp)];case 7:return e.stream.getTracks&&i.addTrack?e.stream.getTracks().forEach((function(t){i.addTrack(t,e.stream)})):i.addStream(e.stream),a=void 0,s.isSafari()||s.isFireFox()?[4,i.createOffer()]:[3,9];case 8:return a=r.sent(),[3,11];case 9:return[4,new Promise((function(e,t){i.createOffer(e,t)}))];case 10:a=r.sent(),r.label=11;case 11:return i.close(),[2,c(a.sdp)]}}))}))};var c=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(i(0)),s=i(71),l=i(23),c=i(1),u=i(26);t.addLiveStreamingCapability=function(e,t){var i=this,a=function(t){var i=t.type;if(!e.joinInfo)return new l.AgoraRTCError(l.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(i){case u.LiveStreamingServiceMode.INJECT:return e._injectStreamingClient||(e._injectStreamingClient=new s.AgoraRTCLiveStreamingClient(e.joinInfo),e._injectStreamingClient.onInjectStatusChange=function(t,i,n){e.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:n,status:t})}),e._injectStreamingClient;case u.LiveStreamingServiceMode.RAW:return e._liveRawStreamingClient||(e._liveRawStreamingClient=new s.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveRawStreamingClient.onLiveStreamError=function(t,i){o.default.error("LIVE_STREAMING_ERROR",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:i.code})},e._liveRawStreamingClient.onLiveStreamWarning=function(t,i){o.default.warning("LIVE_STREAMING_WARNING",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:i.code})}),e._liveRawStreamingClient;case u.LiveStreamingServiceMode.TRANSCODE:return e._liveTranscodeStreamingClient||(e._liveTranscodeStreamingClient=new s.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveTranscodeStreamingClient.onLiveStreamError=function(t,i){o.default.error("LIVE_STREAMING_ERROR",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:i.code})},e._liveTranscodeStreamingClient.onLiveStreamWarning=function(t,i){o.default.warning("LIVE_STREAMING_WARNING",i.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:i.code})}),e._liveTranscodeStreamingClient}};e.gatewayClient.addEventListener("join",(function(t){e._injectStreamingClient&&e._injectStreamingClient.resetAllTask()})),e.gatewayClient.addEventListener("stream-unpublished",(function(t){t.options&&0===t.options.streamType&&(e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask(),e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask())})),e.gatewayClient.addEventListener("stream-published",(function(e){})),e.startLiveStreaming=function(i,n){o.default.debug("startLiveTranscoding");var r=c.report.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var a={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw r(a),a}var s=e._startLiveStreaming(i,n);return s.then((function(e){r(null,e)})).catch((function(t){o.default.error("LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:i,reason:t.code}),r(t)})),s},e._startLiveStreaming=function(s,c){return n(i,void 0,void 0,(function(){var i;return r(this,(function(n){switch(n.label){case 0:return c||("vp8"===t.codec&&o.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&o.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(e._liveRawStreamingClient&&e._liveRawStreamingClient.haveUrl(s)||e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.haveUrl(s))&&new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),[4,a({type:i=c?u.LiveStreamingServiceMode.TRANSCODE:u.LiveStreamingServiceMode.RAW}).startLiveStreamingTask(s,i)];case 1:return n.sent(),e.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:s}),[2]}}))}))},e.setLiveTranscoding=function(i){o.default.debug("setLiveTranscoding: "+JSON.stringify(i));var n=c.report.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"}),r=a({type:u.LiveStreamingServiceMode.TRANSCODE});return r.setTranscodingConfig(i).then((function(){e.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),n(null)})).catch((function(t){o.default.error("SET_LIVE_TRANSCODING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),n(t)}))},e.stopLiveStreaming=function(i){var n=c.report.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),r=e._stopLiveStreaming(i);return r.then((function(e){n(null,e)})).catch((function(t){o.default.error("STOP_LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),n(t)})),r},e._stopLiveStreaming=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(i){switch(i.label){case 0:return[4,Promise.all([e._liveRawStreamingClient,e._liveTranscodeStreamingClient].map((function(e){return e&&e.haveUrl(t)&&e.stopLiveStreamingTask(t)})))];case 1:return i.sent(),[2]}}))}))},e.addInjectStreamUrl=function(i,n){var r=c.report.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:[i,n],tag:"tracer"});if("audience"===e.gatewayClient.role){var a={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw r(a),a}var s=e._addInjectStreamUrl(i,n);return s.then((function(e){r(null,e)})).catch((function(e){o.default.error("ADD_INJECT_STREAM_ERROR",e.toString()),r(e)})),s},e._addInjectStreamUrl=function(e,t){return n(i,void 0,void 0,(function(){var i;return r(this,(function(n){switch(n.label){case 0:return(i=a({type:u.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(t,0),[4,i.startLiveStreamingTask(e,u.LiveStreamingServiceMode.INJECT)];case 1:return n.sent(),[2]}}))}))},e.removeInjectStreamUrl=function(i){return n(this,void 0,void 0,(function(){var n,a;return r(this,(function(r){return n=c.report.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:[i],tag:"tracer"}),(a=e._removeInjectStreamUrl(i)).then((function(e){n(null,e)})).catch((function(e){o.default.error("REMOVE_INJECT_STREAM_ERROR",e.toString()),n(e)})),[2,a]}))}))},e._removeInjectStreamUrl=function(e){return n(i,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,a({type:u.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(e)];case 1:return t.sent(),[2]}}))}))}}},function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(5)),a=n(i(0)),o=i(10);t.default=function(e,t){void 0===t&&(t={width:160,height:120,framerate:15});var i=t.width,n=t.height,s=t.framerate,l=e.stream;if(!l)throw r.default.INVALID_LOCAL_STREAM;if(!l.getVideoTracks()[0])throw r.default.HIGH_STREAM_NOT_VIDEO_TRACE;var c=l.getVideoTracks()[0];a.default.debug("Start getLowStream");var u=document.createElement("video"),h=document.createElement("canvas");u.setAttribute("style","display:none"),u.setAttribute("muted",""),u.muted=!0,u.setAttribute("autoplay",""),u.autoplay=!0,u.setAttribute("playsinline",""),h.setAttribute("style","display:none"),h.setAttribute("width",i.toString()),h.setAttribute("height",n.toString());var d=h.getContext("2d");if(!d)throw new Error("not get canvas context");u.srcObject=l,document.body.append(u),document.body.append(h),u.play(),a.default.debug("Start render lowStream");var p=o.audioTimerLoop((function(){return function(){if(u.paused&&u.play(),u.videoHeight>2&&u.videoWidth>2){var t=h.width*(u.videoHeight/u.videoWidth);Math.abs(t-h.height)>=2&&(a.default.debug("adjust low stream resolution",h.width+"x"+h.height+" -> "+h.width+"x"+t),h.height=t)}d.drawImage(u,0,0,h.width,h.height);var i=e.stream;if(i){var n=i.getVideoTracks()[0];c!==n&&(a.default.debug("adjust low stream track"),u.srcObject=i,c=n)}}()}),s),f=h.captureStream(s),v=f.getVideoTracks()[0];return v.requestFrame&&v.requestFrame(),f.clean=function(){a.default.debug("Start clean lowStream"),p(),(u||u.parentNode||u.parentNode.removeChild)&&u.parentNode.removeChild(u),(h||h.parentNode||h.parentNode.removeChild)&&h.parentNode.removeChild(h),a.default.debug("Clean lowStream")},f}},function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);e.exports=function(){return i(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(undefined){"use strict";!function(e,t,i){var n=function i(n){var r=t[n];return r||e[n][0].call(r=t[n]={exports:{}},i,r,r.exports),r.exports}(16);n.util.global.protobuf=n,__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(59)],(__WEBPACK_AMD_DEFINE_RESULT__=(function(e){return e&&e.isLong&&(n.util.Long=e,n.configure()),n}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=n)}({1:[function(e,t,i){t.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,r=2,a=!0;r<arguments.length;)i[n++]=arguments[r++];return new Promise((function(r,o){i[n]=function(e){if(a)if(a=!1,e)o(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){a&&(a=!1,o(e))}}))}},{}],2:[function(e,t,i){var n=i;n.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),a=new Array(123),o=0;o<64;)a[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,i){for(var n,a=null,o=[],s=0,l=0;t<i;){var c=e[t++];switch(l){case 0:o[s++]=r[c>>2],n=(3&c)<<4,l=1;break;case 1:o[s++]=r[n|c>>4],n=(15&c)<<2,l=2;break;case 2:o[s++]=r[n|c>>6],o[s++]=r[63&c],l=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0)}return l&&(o[s++]=r[n],o[s++]=61,1===l&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.decode=function(e,t,i){for(var n,r=i,o=0,s=0;s<e.length;){var l=e.charCodeAt(s++);if(61===l&&o>1)break;if((l=a[l])===undefined)throw Error("invalid encoding");switch(o){case 0:n=l,o=1;break;case 1:t[i++]=n<<2|(48&l)>>4,n=l,o=2;break;case 2:t[i++]=(15&n)<<4|(60&l)>>2,n=l,o=3;break;case 3:t[i++]=(3&n)<<6|l,o=0}}if(1===o)throw Error("invalid encoding");return i-r},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,i){function n(e,t){"string"==typeof e&&(t=e,e=undefined);var i=[];function r(e){if("string"!=typeof e){var t=a();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var o=Object.keys(e),s=new Array(o.length+1),l=new Array(o.length),c=0;c<o.length;)s[c]=o[c],l[c]=e[o[c++]];return s[c]=t,Function.apply(null,s).apply(null,l)}return Function(t)()}for(var u=new Array(arguments.length-1),h=0;h<u.length;)u[h]=arguments[++h];if(h=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var i=u[h++];switch(t){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"})),h!==u.length)throw Error("parameter count mismatch");return i.push(e),r}function a(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+i.join("\n  ")+"\n}"}return r.toString=a,r}t.exports=n,n.verbose=!1},{}],4:[function(e,t,i){function n(){this._listeners={}}t.exports=n,n.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},n.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this}},{}],5:[function(e,t,i){t.exports=a;var n=e(1),r=e(7)("fs");function a(e,t,i){return"function"==typeof t?(i=t,t={}):t||(t={}),i?!t.xhr&&r&&r.readFile?r.readFile(e,(function(n,r){return n&&"undefined"!=typeof XMLHttpRequest?a.xhr(e,t,i):n?i(n):i(null,t.binary?r:r.toString("utf8"))})):a.xhr(e,t,i):n(a,this,e,t)}a.xhr=function(e,t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==n.readyState)return undefined;if(0!==n.status&&200!==n.status)return i(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var r=0;r<n.responseText.length;++r)e.push(255&n.responseText.charCodeAt(r))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return i(null,n.responseText)},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},{1:1,7:7}],6:[function(e,t,i){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),n=128===i[3];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3]}function a(e,n,r){t[0]=e,n[r]=i[3],n[r+1]=i[2],n[r+2]=i[1],n[r+3]=i[0]}function o(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t[0]}function s(e,n){return i[3]=e[n],i[2]=e[n+1],i[1]=e[n+2],i[0]=e[n+3],t[0]}e.writeFloatLE=n?r:a,e.writeFloatBE=n?a:r,e.readFloatLE=n?o:s,e.readFloatBE=n?s:o}():function(){function t(e,t,i,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,i,n);else if(isNaN(t))e(2143289344,i,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,i,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,i,n);else{var a=Math.floor(Math.log(t)/Math.LN2);e((r<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,i,n)}}function i(e,t,i){var n=e(t,i),r=2*(n>>31)+1,a=n>>>23&255,o=8388607&n;return 255===a?o?NaN:r*(1/0):0===a?1401298464324817e-60*r*o:r*Math.pow(2,a-150)*(o+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,a),e.readFloatLE=i.bind(null,o),e.readFloatBE=i.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),n=128===i[7];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3],n[r+4]=i[4],n[r+5]=i[5],n[r+6]=i[6],n[r+7]=i[7]}function a(e,n,r){t[0]=e,n[r]=i[7],n[r+1]=i[6],n[r+2]=i[5],n[r+3]=i[4],n[r+4]=i[3],n[r+5]=i[2],n[r+6]=i[1],n[r+7]=i[0]}function o(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],i[4]=e[n+4],i[5]=e[n+5],i[6]=e[n+6],i[7]=e[n+7],t[0]}function s(e,n){return i[7]=e[n],i[6]=e[n+1],i[5]=e[n+2],i[4]=e[n+3],i[3]=e[n+4],i[2]=e[n+5],i[1]=e[n+6],i[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:a,e.writeDoubleBE=n?a:r,e.readDoubleLE=n?o:s,e.readDoubleBE=n?s:o}():function(){function t(e,t,i,n,r,a){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,r,a+t),e(1/n>0?0:2147483648,r,a+i);else if(isNaN(n))e(0,r,a+t),e(2146959360,r,a+i);else if(n>17976931348623157e292)e(0,r,a+t),e((o<<31|2146435072)>>>0,r,a+i);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,r,a+t),e((o<<31|s/4294967296)>>>0,r,a+i);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=n*Math.pow(2,-l))>>>0,r,a+t),e((o<<31|l+1023<<20|1048576*s&1048575)>>>0,r,a+i)}}}function i(e,t,i,n,r){var a=e(n,r+t),o=e(n,r+i),s=2*(o>>31)+1,l=o>>>20&2047,c=4294967296*(1048575&o)+a;return 2047===l?c?NaN:s*(1/0):0===l?5e-324*s*c:s*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,a,4,0),e.readDoubleLE=i.bind(null,o,0,4),e.readDoubleBE=i.bind(null,s,4,0)}(),e}function r(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function a(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],8:[function(e,t,i){var n=i,r=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},a=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=r(e),n="";i&&(n=t.shift()+"/");for(var a=0;a<t.length;)".."===t[a]?a>0&&".."!==t[a-1]?t.splice(--a,2):i?t.splice(a,1):++a:"."===t[a]?t.splice(a,1):++a;return n+t.join("/")};n.resolve=function(e,t,i){return i||(t=a(t)),r(t)?t:(i||(e=a(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?a(e+"/"+t):t)}},{}],9:[function(e,t,i){t.exports=function(e,t,i){var n=i||8192,r=n>>>1,a=null,o=n;return function(i){if(i<1||i>r)return e(i);o+i>n&&(a=e(n),o=0);var s=t.call(a,o,o+=i);return 7&o&&(o=1+(7|o)),s}}},{}],10:[function(e,t,i){var n=i;n.length=function(e){for(var t=0,i=0,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,i){if(i-t<1)return"";for(var n,r=null,a=[],o=0;t<i;)(n=e[t++])<128?a[o++]=n:n>191&&n<224?a[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(n>>10),a[o++]=56320+(1023&n)):a[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),o=0);return r?(o&&r.push(String.fromCharCode.apply(String,a.slice(0,o))),r.join("")):String.fromCharCode.apply(String,a.slice(0,o))},n.write=function(e,t,i){for(var n,r,a=i,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(o+1)))?(++o,t[i++]=(n=65536+((1023&n)<<10)+(1023&r))>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128);return i-a}},{}],11:[function(e,t,i){var n=i,r=e(14),a=e(33);function o(e,t,i,n){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(d%s){",n);for(var a=t.resolvedType.values,o=Object.keys(a),s=0;s<o.length;++s)t.repeated&&a[o[s]]===t.typeDefault&&e("default:"),e("case%j:",o[s])("case %i:",a[o[s]])("m%s=%j",n,a[o[s]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,i,n);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function s(e,t,i,n){if(t.resolvedType)t.resolvedType instanceof r?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,i,n,n):e("d%s=types[%i].toObject(m%s,o)",n,i,n);else{var a=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,a?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,i=a.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return i("return new this.ctor");i("var m=new this.ctor");for(var n=0;n<t.length;++n){var s=t[n].resolve(),l=a.safeProp(s.name);s.map?(i("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),o(i,s,n,l+"[ks[i]]")("}")("}")):s.repeated?(i("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),o(i,s,n,l+"[i]")("}")("}")):(s.resolvedType instanceof r||i("if(d%s!=null){",l),o(i,s,n,l),s.resolvedType instanceof r||i("}"))}return i("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(a.compareFieldsById);if(!t.length)return a.codegen()("return {}");for(var i=a.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],l=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?n:t[c].map?o:l).push(t[c]);if(n.length){for(i("if(o.arrays||o.defaults){"),c=0;c<n.length;++c)i("d%s=[]",a.safeProp(n[c].name));i("}")}if(o.length){for(i("if(o.objects||o.defaults){"),c=0;c<o.length;++c)i("d%s={}",a.safeProp(o[c].name));i("}")}if(l.length){for(i("if(o.defaults){"),c=0;c<l.length;++c){var u=l[c],h=a.safeProp(u.name);if(u.resolvedType instanceof r)i("d%s=o.enums===String?%j:%j",h,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var d="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",h,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")}else i("d%s=%j",h,u.typeDefault)}i("}")}var p=!1;for(c=0;c<t.length;++c){var f=e._fieldsArray.indexOf(u=t[c]);h=a.safeProp(u.name),u.map?(p||(p=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),s(i,u,f,h+"[ks2[j]]")("}")):u.repeated?(i("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),s(i,u,f,h+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",h,u.name),s(i,u,f,h),u.partOf&&i("if(o.oneofs)")("d%s=%j",a.safeProp(u.partOf.name),u.name)),i("}")}return i("return d")}},{14:14,33:33}],12:[function(e,t,i){t.exports=function(e){var t=a.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var i=0;i<e.fieldsArray.length;++i){var s=e._fieldsArray[i].resolve(),l=s.resolvedType instanceof n?"int32":s.type,c="m"+a.safeProp(s.name);t("case %i:",s.id),s.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),r.defaults[s.keyType]!==undefined?t("k=%j",r.defaults[s.keyType]):t("k=null"),r.defaults[l]!==undefined?t("value=%j",r.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),r.basic[l]===undefined?t("value=types[%i].decode(r,r.uint32())",i):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(r.long[s.keyType]!==undefined?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",c)):s.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),r.packed[l]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,l)("}else"),r.basic[l]===undefined?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,i):t("%s.push(r.%s())",c,l)):r.basic[l]===undefined?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,i):t("%s=r.%s()",c,l),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<e._fieldsArray.length;++i){var u=e._fieldsArray[i];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",o(u))}return t("return m")};var n=e(14),r=e(32),a=e(33);function o(e){return"missing required '"+e.name+"'"}},{14:14,32:32,33:33}],13:[function(e,t,i){t.exports=function(e){for(var t,i=a.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),s=e.fieldsArray.slice().sort(a.compareFieldsById),l=0;l<s.length;++l){var c=s[l].resolve(),u=e._fieldsArray.indexOf(c),h=c.resolvedType instanceof n?"int32":c.type,d=r.basic[h];t="m"+a.safeProp(c.name),c.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|r.mapKey[c.keyType],c.keyType),d===undefined?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,h,t),i("}")("}")):c.repeated?(i("if(%s!=null&&%s.length){",t,t),c.packed&&r.packed[h]!==undefined?i("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",h,t)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",t),d===undefined?o(i,c,u,t+"[i]"):i("w.uint32(%i).%s(%s[i])",(c.id<<3|d)>>>0,h,t)),i("}")):(c.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),d===undefined?o(i,c,u,t):i("w.uint32(%i).%s(%s)",(c.id<<3|d)>>>0,h,t))}return i("return w")};var n=e(14),r=e(32),a=e(33);function o(e,t,i,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,n,(t.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(e,t,i){t.exports=o;var n=e(22);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var r=e(21),a=e(33);function o(e,t,i,r,a){if(n.call(this,e,i),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=a||{},this.reserved=undefined,t)for(var o=Object.keys(t),s=0;s<o.length;++s)"number"==typeof t[o[s]]&&(this.valuesById[this.values[o[s]]=t[o[s]]]=o[s])}o.fromJSON=function(e,t){var i=new o(e,t.values,t.options,t.comment,t.comments);return i.reserved=t.reserved,i},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},o.prototype.add=function(e,t,i){if(!a.isString(e))throw TypeError("name must be a string");if(!a.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=i||null,this},o.prototype.remove=function(e){if(!a.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)}},{21:21,22:22,33:33}],15:[function(e,t,i){t.exports=c;var n=e(22);((c.prototype=Object.create(n.prototype)).constructor=c).className="Field";var r,a=e(14),o=e(32),s=e(33),l=/^required|optional|repeated$/;function c(e,t,i,r,a,c,u){if(s.isObject(r)?(u=a,c=r,r=a=undefined):s.isObject(a)&&(u=c,c=a,a=undefined),n.call(this,e,c),!s.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!s.isString(i))throw TypeError("type must be a string");if(r!==undefined&&!l.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!s.isString(a))throw TypeError("extend must be a string");this.rule=r&&"optional"!==r?r:undefined,this.type=i,this.id=t,this.extend=a||undefined,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&o.long[i]!==undefined,this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,i){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,i)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},c.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=o.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof r?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof a&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof a)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,e=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,e=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.defaultValue=this.map?s.emptyObject:this.repeated?s.emptyArray:this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},c.d=function(e,t,i,n){return"function"==typeof t?t=s.decorateType(t).name:t&&"object"==typeof t&&(t=s.decorateEnum(t).name),function(r,a){s.decorateType(r.constructor).add(new c(a,e,t,i,{default:n}))}},c._configure=function(e){r=e}},{14:14,22:22,32:32,33:33}],16:[function(e,t,i){var n=t.exports=e(17);n.build="light",n.load=function(e,t,i){return"function"==typeof t?(i=t,t=new n.Root):t||(t=new n.Root),t.load(e,i)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=e(13),n.decoder=e(12),n.verifier=e(36),n.converter=e(11),n.ReflectionObject=e(22),n.Namespace=e(21),n.Root=e(26),n.Enum=e(14),n.Type=e(31),n.Field=e(15),n.OneOf=e(23),n.MapField=e(18),n.Service=e(30),n.Method=e(20),n.Message=e(19),n.wrappers=e(37),n.types=e(32),n.util=e(33),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(e,t,i){var n=i;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e(38),n.BufferWriter=e(39),n.Reader=e(24),n.BufferReader=e(25),n.util=e(35),n.rpc=e(28),n.roots=e(27),n.configure=r,r()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(e,t,i){t.exports=o;var n=e(15);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var r=e(32),a=e(33);function o(e,t,i,r,o,s){if(n.call(this,e,t,r,undefined,undefined,o,s),!a.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){if(this.resolved)return this;if(r.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,i){return"function"==typeof i?i=a.decorateType(i).name:i&&"object"==typeof i&&(i=a.decorateEnum(i).name),function(n,r){a.decorateType(n.constructor).add(new o(r,e,t,i))}}},{15:15,32:32,33:33}],19:[function(e,t,i){t.exports=r;var n=e(35);function r(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)this[t[i]]=e[t[i]]}r.create=function(e){return this.$type.create(e)},r.encode=function(e,t){return this.$type.encode(e,t)},r.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},r.decode=function(e){return this.$type.decode(e)},r.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},r.verify=function(e){return this.$type.verify(e)},r.fromObject=function(e){return this.$type.fromObject(e)},r.toObject=function(e,t){return this.$type.toObject(e,t)},r.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},{35:35}],20:[function(e,t,i){t.exports=a;var n=e(22);((a.prototype=Object.create(n.prototype)).constructor=a).className="Method";var r=e(33);function a(e,t,i,a,o,s,l,c){if(r.isObject(o)?(l=o,o=s=undefined):r.isObject(s)&&(l=s,s=undefined),t!==undefined&&!r.isString(t))throw TypeError("type must be a string");if(!r.isString(i))throw TypeError("requestType must be a string");if(!r.isString(a))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=i,this.requestStream=!!o||undefined,this.responseType=a,this.responseStream=!!s||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c}a.fromJSON=function(e,t){return new a(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return r.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined])},a.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(e,t,i){t.exports=u;var n=e(22);((u.prototype=Object.create(n.prototype)).constructor=u).className="Namespace";var r,a,o,s=e(15),l=e(33);function c(e,t){if(!e||!e.length)return undefined;for(var i={},n=0;n<e.length;++n)i[e[n].name]=e[n].toJSON(t);return i}function u(e,t){n.call(this,e,t),this.nested=undefined,this._nestedArray=null}function h(e){return e._nestedArray=null,e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=c,u.isReservedId=function(e,t){if(e)for(var i=0;i<e.length;++i)if("string"!=typeof e[i]&&e[i][0]<=t&&e[i][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),u.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,i=Object.keys(e),n=0;n<i.length;++n)this.add(((t=e[i[n]]).fields!==undefined?r.fromJSON:t.values!==undefined?o.fromJSON:t.methods!==undefined?a.fromJSON:t.id!==undefined?s.fromJSON:u.fromJSON)(i[n],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof s&&e.extend!==undefined||e instanceof r||e instanceof o||e instanceof a||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof r||t instanceof a)throw Error("duplicate name '"+e.name+"' in "+this);for(var i=t.nestedArray,n=0;n<i.length;++n)e.add(i[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},u.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),h(this)},u.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var i=this;e.length>0;){var n=e.shift();if(i.nested&&i.nested[n]){if(!((i=i.nested[n])instanceof u))throw Error("path conflicts with non-namespace objects")}else i.add(i=new u(n))}return t&&i.addJSON(t),i},u.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this.resolve()},u.prototype.lookup=function(e,t,i){if("boolean"==typeof t?(i=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof u&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var r=0;r<this.nestedArray.length;++r)if(this._nestedArray[r]instanceof u&&(n=this._nestedArray[r].lookup(e,t,!0)))return n;return null===this.parent||i?null:this.parent.lookup(e,t)},u.prototype.lookupType=function(e){var t=this.lookup(e,[r]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[r,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,i){r=e,a=t,o=i}},{15:15,22:22,33:33}],22:[function(e,t,i){t.exports=a,a.className="ReflectionObject";var n,r=e(33);function a(e,t){if(!r.isString(e))throw TypeError("name must be a string");if(t&&!r.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(a.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),a.prototype.toJSON=function(){throw Error()},a.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},a.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},a.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},a.prototype.getOption=function(e){return this.options?this.options[e]:undefined},a.prototype.setOption=function(e,t,i){return i&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},a.prototype.setParsedOption=function(e,t,i){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(i){var a=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));a?r.setProperty(a[e],i,t):((a={})[e]=r.setProperty({},i,t),n.push(a))}else{var o={};o[e]=t,n.push(o)}return this},a.prototype.setOptions=function(e,t){if(e)for(var i=Object.keys(e),n=0;n<i.length;++n)this.setOption(i[n],e[i[n]],t);return this},a.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},a._configure=function(e){n=e}},{33:33}],23:[function(e,t,i){t.exports=o;var n=e(22);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var r=e(15),a=e(33);function o(e,t,i,r){if(Array.isArray(t)||(i=t,t=undefined),n.call(this,e,i),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=r}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},o.prototype.add=function(e){if(!(e instanceof r))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},o.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var i=e.get(this.oneof[t]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}s(this)},o.prototype.onRemove=function(e){for(var t,i=0;i<this.fieldsArray.length;++i)(t=this.fieldsArray[i]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,i){a.decorateType(t.constructor).add(new o(i,e)),Object.defineProperty(t,i,{get:a.oneOfGetter(e),set:a.oneOfSetter(e)})}}},{15:15,22:22,33:33}],24:[function(e,t,i){t.exports=l;var n,r=e(35),a=r.LongBits,o=r.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},h=function(){return r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new a(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new a(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=h(),l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=h(),n._configure();var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{35:35}],25:[function(e,t,i){t.exports=a;var n=e(24);(a.prototype=Object.create(n.prototype)).constructor=a;var r=e(35);function a(e){n.call(this,e)}a._configure=function(){r.Buffer&&(a.prototype._slice=r.Buffer.prototype.slice)},a.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},a._configure()},{24:24,35:35}],26:[function(e,t,i){t.exports=h;var n=e(21);((h.prototype=Object.create(n.prototype)).constructor=h).className="Root";var r,a,o,s=e(15),l=e(14),c=e(23),u=e(33);function h(e){n.call(this,"",e),this.deferred=[],this.files=[]}function d(){}h.fromJSON=function(e,t){return t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=u.path.resolve,h.prototype.fetch=u.fetch,h.prototype.load=function e(t,i,n){"function"==typeof i&&(n=i,i=undefined);var r=this;if(!n)return u.asPromise(e,r,t,i);var s=n===d;function l(e,t){if(n){var i=n;if(n=null,s)throw e;i(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var i=e.substring(t);if(i in o)return i}return null}function h(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){a.filename=e;var n,o=a(t,r,i),h=0;if(o.imports)for(;h<o.imports.length;++h)(n=c(o.imports[h])||r.resolvePath(e,o.imports[h]))&&p(n);if(o.weakImports)for(h=0;h<o.weakImports.length;++h)(n=c(o.weakImports[h])||r.resolvePath(e,o.weakImports[h]))&&p(n,!0)}else r.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}s||f||l(null,r)}function p(e,t){if(!(r.files.indexOf(e)>-1))if(r.files.push(e),e in o)s?h(e,o[e]):(++f,setTimeout((function(){--f,h(e,o[e])})));else if(s){var i;try{i=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||l(e))}h(e,i)}else++f,r.fetch(e,(function(i,a){--f,n&&(i?t?f||l(null,r):l(i):h(e,a))}))}var f=0;u.isString(t)&&(t=[t]);for(var v,m=0;m<t.length;++m)(v=r.resolvePath("",t[m]))&&p(v);return s?r:(f||l(null,r),undefined)},h.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,d)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var i=t.parent.lookup(t.extend);if(i){var n=new s(t.fullName,t.id,t.type,t.rule,undefined,t.options);return n.declaringField=t,t.extensionField=n,i.add(n),!0}return!1}h.prototype._handleAdd=function(e){if(e instanceof s)e.extend===undefined||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof l)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof r)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var i=0;i<e.nestedArray.length;++i)this._handleAdd(e._nestedArray[i]);p.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof s){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var i=0;i<e.nestedArray.length;++i)this._handleRemove(e._nestedArray[i]);p.test(e.name)&&delete e.parent[e.name]}},h._configure=function(e,t,i){r=e,a=t,o=i}},{14:14,15:15,21:21,23:23,33:33}],27:[function(e,t,i){t.exports={}},{}],28:[function(e,t,i){i.Service=e(29)},{29:29}],29:[function(e,t,i){t.exports=r;var n=e(35);function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,i,r,a,o){if(!a)throw TypeError("request must be specified");var s=this;if(!o)return n.asPromise(e,s,t,i,r,a);if(!s.rpcImpl)return setTimeout((function(){o(Error("already ended"))}),0),undefined;try{return s.rpcImpl(t,i[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(e,i){if(e)return s.emit("error",e,t),o(e);if(null===i)return s.end(!0),undefined;if(!(i instanceof r))try{i=r[s.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",i,t),o(null,i)}))}catch(e){return s.emit("error",e,t),setTimeout((function(){o(e)}),0),undefined}},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(e,t,i){t.exports=s;var n=e(21);((s.prototype=Object.create(n.prototype)).constructor=s).className="Service";var r=e(20),a=e(33),o=e(28);function s(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var i=new s(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),a=0;a<n.length;++a)i.add(r.fromJSON(n[a],t.methods[n[a]]));return t.nested&&i.addJSON(t.nested),i.comment=t.comment,i},s.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return a.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",i?this.comment:undefined])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=a.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof r?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof r){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},s.prototype.create=function(e,t,i){for(var n,r=new o.Service(e,t,i),s=0;s<this.methodsArray.length;++s){var l=a.lcFirst((n=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");r[l]=a.codegen(["r","c"],a.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return r}},{20:20,21:21,28:28,33:33}],31:[function(e,t,i){t.exports=y;var n=e(21);((y.prototype=Object.create(n.prototype)).constructor=y).className="Type";var r=e(14),a=e(23),o=e(15),s=e(18),l=e(30),c=e(19),u=e(24),h=e(38),d=e(33),p=e(13),f=e(12),v=e(36),m=e(11),g=e(37);function y(e,t){n.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var i=this.fields[e[t]],n=i.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=i}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,c,!0),this._ctor=e;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var n={};for(i=0;i<this.oneofsArray.length;++i)n[this._oneofsArray[i].resolve().name]={get:d.oneOfGetter(this._oneofsArray[i].oneof),set:d.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(e.prototype,n)}}}),y.generateConstructor=function(e){for(var t,i=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?i("this%s={}",d.safeProp(t.name)):t.repeated&&i("this%s=[]",d.safeProp(t.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var i=new y(e,t.options);i.extensions=t.extensions,i.reserved=t.reserved;for(var c=Object.keys(t.fields),u=0;u<c.length;++u)i.add((void 0!==t.fields[c[u]].keyType?s.fromJSON:o.fromJSON)(c[u],t.fields[c[u]]));if(t.oneofs)for(c=Object.keys(t.oneofs),u=0;u<c.length;++u)i.add(a.fromJSON(c[u],t.oneofs[c[u]]));if(t.nested)for(c=Object.keys(t.nested),u=0;u<c.length;++u){var h=t.nested[c[u]];i.add((h.id!==undefined?o.fromJSON:h.fields!==undefined?y.fromJSON:h.values!==undefined?r.fromJSON:h.methods!==undefined?l.fromJSON:n.fromJSON)(c[u],h))}return t.extensions&&t.extensions.length&&(i.extensions=t.extensions),t.reserved&&t.reserved.length&&(i.reserved=t.reserved),t.group&&(i.group=!0),t.comment&&(i.comment=t.comment),i},y.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",i?this.comment:undefined])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var i=this.oneofsArray;for(t=0;t<i.length;)i[t++].resolve();return n.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof a?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof a){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],i=0;i<this.fieldsArray.length;++i)t.push(this._fieldsArray[i].resolve().resolvedType);this.encode=p(this)({Writer:h,types:t,util:d}),this.decode=f(this)({Reader:u,types:t,util:d}),this.verify=v(this)({types:t,util:d}),this.fromObject=m.fromObject(this)({types:t,util:d}),this.toObject=m.toObject(this)({types:t,util:d});var n=g[e];if(n){var r=Object.create(this);r.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(r),r.toObject=this.toObject,this.toObject=n.toObject.bind(r)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){d.decorateType(t,e)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(e,t,i){var n=i,r=e(33),a=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var i=0,n={};for(t|=0;i<e.length;)n[a[i+t]]=e[i++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(e,t,i){var n,r,a=t.exports=e(35),o=e(27);a.codegen=e(3),a.fetch=e(5),a.path=e(8),a.fs=a.inquire("fs"),a.toArray=function(e){if(e){for(var t=Object.keys(e),i=new Array(t.length),n=0;n<t.length;)i[n]=e[t[n++]];return i}return[]},a.toObject=function(e){for(var t={},i=0;i<e.length;){var n=e[i++],r=e[i++];r!==undefined&&(t[n]=r)}return t};var s=/\\/g,l=/"/g;a.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},a.safeProp=function(e){return!/^[$\w_]+$/.test(e)||a.isReserved(e)?'["'+e.replace(s,"\\\\").replace(l,'\\"')+'"]':"."+e},a.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;a.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},a.compareFieldsById=function(e,t){return e.id-t.id},a.decorateType=function(t,i){if(t.$type)return i&&t.$type.name!==i&&(a.decorateRoot.remove(t.$type),t.$type.name=i,a.decorateRoot.add(t.$type)),t.$type;n||(n=e(31));var r=new n(i||t.name);return a.decorateRoot.add(r),r.ctor=t,Object.defineProperty(t,"$type",{value:r,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:r,enumerable:!1}),r};var u=0;a.decorateEnum=function(t){if(t.$type)return t.$type;r||(r=e(14));var i=new r("Enum"+u++,t);return a.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i},a.setProperty=function(e,t,i){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,i,n){var r=i.shift();if(i.length>0)t[r]=e(t[r]||{},i,n);else{var a=t[r];a&&(n=[].concat(a).concat(n)),t[r]=n}return t}(e,t=t.split("."),i)},Object.defineProperty(a,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(e(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(e,t,i){t.exports=r;var n=e(35);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var a=r.zero=new r(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var o=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return a;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new r(i,n)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):a},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;r.fromHash=function(e){return e===o?a:new r((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},{35:35}],35:[function(e,t,i){var n=i;function r(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]!==undefined&&i||(e[n[r]]=t[n[r]]);return e}function a(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&r(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e(1),n.base64=e(2),n.EventEmitter=e(4),n.float=e(6),n.inquire=e(7),n.utf8=e(10),n.pool=e(9),n.LongBits=e(34),n.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=a,n.ProtocolError=a("ProtocolError"),n.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&this[e[i]]!==undefined&&null!==this[e[i]])return e[i]}},n.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(e,t,i){t.exports=function(e){var t=r.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i={};e.oneofsArray.length&&t("var p={}");for(var n=0;n<e.fieldsArray.length;++n){var l=e._fieldsArray[n].resolve(),c="m"+r.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,l.name),l.map)t("if(!util.isObject(%s))",c)("return%j",a(l,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),s(t,l,"k[i]"),o(t,l,n,c+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",c)("return%j",a(l,"array"))("for(var i=0;i<%s.length;++i){",c),o(t,l,n,c+"[i]")("}");else{if(l.partOf){var u=r.safeProp(l.partOf.name);1===i[l.partOf.name]&&t("if(p%s===1)",u)("return%j",l.partOf.name+": multiple values"),i[l.partOf.name]=1,t("p%s=1",u)}o(t,l,n,c)}l.optional&&t("}")}return t("return null")};var n=e(14),r=e(33);function a(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,i,r){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",r)("default:")("return%j",a(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),s=0;s<o.length;++s)e("case %i:",t.resolvedType.values[o[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,r)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",r)("return%j",a(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",a(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',r)("return%j",a(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',r)("return%j",a(t,"boolean"));break;case"string":e("if(!util.isString(%s))",r)("return%j",a(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",a(t,"buffer"))}return e}function s(e,t,i){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",i)("return%j",a(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",i)("return%j",a(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",i)("return%j",a(t,"boolean key"))}return e}},{14:14,33:33}],37:[function(e,t,i){var n=i,r=e(19);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),i=this.lookup(t);if(i){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:i.encode(i.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var i="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var a=this.lookup(n);a&&(e=a.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof r){var o=e.$type.toObject(e,t);return""===i&&(i="type.googleapis.com/"),n=i+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}},{19:19}],38:[function(e,t,i){t.exports=h;var n,r=e(35),a=r.LongBits,o=r.base64,s=r.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=undefined,this.val=i}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var d=function(){return r.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function v(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}h.create=d(),h.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(h.alloc=r.pool(h.alloc,r.Array.prototype.subarray)),h.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},(f.prototype=Object.create(l.prototype)).fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(v,10,a.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){var t=a.from(e);return this._push(v,t.length(),t)},h.prototype.sint64=function(e){var t=a.from(e).zzEncode();return this._push(v,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){var t=a.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var g=r.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var i=h.alloc(t=o.length(e));o.decode(e,i,0),e=i}return this.uint32(t)._push(g,t,e)},h.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},{35:35}],39:[function(e,t,i){t.exports=a;var n=e(38);(a.prototype=Object.create(n.prototype)).constructor=a;var r=e(35);function a(){n.call(this)}function o(e,t,i){e.length<40?r.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}a._configure=function(){a.alloc=r._Buffer_allocUnsafe,a.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}},a.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(a.writeBytesBuffer,t,e),this},a.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},a._configure()},{35:35,38:38}]},{})}()}).call(this,__webpack_require__(57),__webpack_require__(58)(module))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=n;var i=null;try{i=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function r(e){return!0===(e&&e.__isLong__)}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function s(e,t){var i,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(i=c(e,(0|e)<0?-1:0,!0),r&&(o[e]=i),i):(r=-128<=(e|=0)&&e<128)&&(n=a[e])?n:(i=c(e,e<0?-1:0,!1),r&&(a[e]=i),i)}function l(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=f)return _}else{if(e<=-v)return S;if(e+1>=v)return w}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,i){return new n(e,t,i)}n.fromInt=s,n.fromNumber=l,n.fromBits=c;var u=Math.pow;function h(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(i=t,t=!1):t=!!t,(i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return h(e.substring(1),t,i).neg();for(var r=l(u(i,8)),a=g,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+s),i);if(s<8){var d=l(u(i,s));a=a.mul(d).add(l(c))}else a=(a=a.mul(r)).add(l(c))}return a.unsigned=t,a}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=d;var p=4294967296,f=p*p,v=f/2,m=s(1<<24),g=s(0);n.ZERO=g;var y=s(0,!0);n.UZERO=y;var b=s(1);n.ONE=b;var k=s(1,!0);n.UONE=k;var C=s(-1);n.NEG_ONE=C;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var _=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var S=c(0,-2147483648,!1);n.MIN_VALUE=S;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),i=this.div(t),n=i.mul(t).sub(this);return i.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=l(u(e,6),this.unsigned),a=this,o="";;){var s=a.div(r),c=(a.sub(s.mul(r)).toInt()>>>0).toString(e);if((a=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},E.neg=E.negate,E.add=function(e){r(e)||(e=d(e));var t=0,i=0,n=0,a=0;return n+=(a+=(65535&this.low)+(65535&e.low))>>>16,i+=(n+=(this.low>>>16)+(e.low>>>16))>>>16,t+=(i+=(65535&this.high)+(65535&e.high))>>>16,t+=(this.high>>>16)+(e.high>>>16),c((n&=65535)<<16|(a&=65535),(t&=65535)<<16|(i&=65535),this.unsigned)},E.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),i)return c(i.mul(this.low,this.high,e.low,e.high),i.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=65535&this.high,n=this.low>>>16,a=65535&this.low,o=65535&e.high,s=e.low>>>16,u=65535&e.low,h=0,p=0,f=0,v=0;return f+=(v+=a*u)>>>16,p+=(f+=n*u)>>>16,f&=65535,p+=(f+=a*s)>>>16,h+=(p+=t*u)>>>16,p&=65535,h+=(p+=n*s)>>>16,p&=65535,h+=(p+=a*o)>>>16,h+=(this.high>>>16)*u+t*s+n*o+a*(e.high>>>16),c((f&=65535)<<16|(v&=65535),(h&=65535)<<16|(p&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,n,a;if(i)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?i.div_u:i.div_s)(this.low,this.high,e.low,e.high),i.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return k;a=y}else{if(this.eq(S))return e.eq(b)||e.eq(C)?S:e.eq(S)?b:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:C:(n=this.sub(e.mul(t)),a=t.add(n.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=g}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:u(2,o-48),h=l(t),p=h.mul(e);p.isNegative()||p.gt(n);)p=(h=l(t-=s,this.unsigned)).mul(e);h.isZero()&&(h=b),a=a.add(h),n=n.sub(p)}return a},E.div=E.divide,E.modulo=function(e){return r(e)||(e=d(e)),i?c((this.unsigned?i.rem_u:i.rem_s)(this.low,this.high,e.low,e.high),i.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return c(~this.low,~this.high,this.unsigned)},E.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,i){return i?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e){e.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156}')},function(e){e.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}}}}}}')},function(e,t,i){var n=function(e){"use strict";var t=Object.prototype,i=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(e,t,i,n){var r=Object.create((t&&t.prototype instanceof u?t:u).prototype),a=new w(n||[]);return r._invoke=function(e,t,i){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return{value:void 0,done:!0}}for(i.method=r,i.arg=a;;){var o=i.delegate;if(o){var s=b(o,i);if(s){if(s===c)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var u=l(e,t,i);if("normal"===u.type){if(n=i.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n="completed",i.method="throw",i.arg=u.arg)}}}(e,i,a),r}function l(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c={};function u(){}function h(){}function d(){}var p={};p[r]=function(){return this};var f=Object.getPrototypeOf,v=f&&f(f(_([])));v&&v!==t&&i.call(v,r)&&(p=v);var m=d.prototype=u.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var n;this._invoke=function(r,a){function o(){return new t((function(n,o){!function n(r,a,o,s){var c=l(e[r],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}(r,a,n,o)}))}return n=n?n.then(o,o):o()}}function b(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=m.constructor=d,d.constructor=h,d[o]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(t,i,n,r,a){void 0===a&&(a=Promise);var o=new y(s(t,i,n,r),a);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),m[o]="Generator",m[r]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return o.type="throw",o.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;C(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:_(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="object"==typeof window&&window.RTCPeerConnection,r="object"==typeof window&&window.webkitRTCPeerConnection,a="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=n||r||a;return t?new t(e):null}},function(e,t,i){var n;!function(t){"use strict";function r(){}var a=r.prototype,o=t.EventEmitter;function s(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function l(e){return function(){return this[e].apply(this,arguments)}}a.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp)for(i in t={},n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i]);else t=n[e]||(n[e]=[]);return t},a.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},a.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},a.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var i,n=this.getListenersAsObject(e),r="object"==typeof t;for(i in n)n.hasOwnProperty(i)&&-1===s(n[i],t)&&n[i].push(r?t:{listener:t,once:!1});return this},a.on=l("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=l("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var i,n,r=this.getListenersAsObject(e);for(n in r)r.hasOwnProperty(n)&&-1!==(i=s(r[n],t))&&r[n].splice(i,1);return this},a.off=l("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,i){var n,r,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)a.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(r=t[n])&&("function"==typeof r?a.call(this,n,r):o.call(this,n,r));return this},a.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},a.removeAllListeners=l("removeEvent"),a.emitEvent=function(e,t){var i,n,r,a,o=this.getListenersAsObject(e);for(a in o)if(o.hasOwnProperty(a))for(i=o[a].slice(0),r=0;r<i.length;r++)!0===(n=i[r]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},a.trigger=l("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return t.EventEmitter=o,r},void 0===(n=(function(){return r}).call(t,i,t,e))||(e.exports=n)}("undefined"!=typeof window?window:this||{})},function(e,t,i){var n=i(32);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(72),l=i(26),c=i(91),u=i(20),h=i(23),d=i(34),p=o(i(0)),f=o(i(35)),v=function(){function e(e){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new c.PromiseMutex,this.cancelToken=f.default.CancelToken.source(),this.injectConfig=n({},l.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=e}return Object.defineProperty(e.prototype,"isNeedReset",{get:function(){for(var e=this,t=0,i=Array.from(this.streamingTasks.values());t<i.length;t++){var n=i[t];if(n.mode===l.LiveStreamingServiceMode.INJECT)return!0;if(n.mode===l.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find((function(t){return t.uid===e.spec.uid})))return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.setTranscodingConfig=function(e){return r(this,void 0,void 0,(function(){var t,i,r,o,s,c=this;return a(this,(function(a){switch(a.label){case 0:(t=n(n({},l.DEFAULT_TRANSCODING_CONFIG),e)).transcodingUsers||(t.transcodingUsers=t.userConfigs),66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(p.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+t.videoCodecProfile+" -> 100"),t.videoCodecProfile=100),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((function(e){return n(n(n({},l.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),e),{zOrder:e.zOrder?e.zOrder+1:1})}))),t.images&&(t.images=t.images.map((function(e){return n(n({},l.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),e)})));try{l.isLiveStreamingTranscodingConfig(t)}catch(e){throw e}return t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((function(e){return n({},e)})),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers),i=(t.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Promise.resolve(e.uid):u.getUserAccount(c.spec,null,e.uid)})),[4,this.taskMutex.lock()];case 1:return r=a.sent(),[4,Promise.all(i)];case 2:if(a.sent().forEach((function(e,i){t.userConfigs&&t.userConfigs[i]&&(t.userConfigs[i].uid=e&&e.uid||e)})),this.transcodingConfig=t,!this.connection)return r(),[2];a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map((function(e){return e.taskId})).join("#")})];case 4:return o=a.sent(),r(),p.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+o.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(s=a.sent(),r(),!s.data||!s.data.retry)throw s;return s.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(e){p.default.warning("["+c.spec.clientId+"] live streaming receive error",s.toString(),"try to republish",e.url),c.startLiveStreamingTask(e.url,e.mode,s).then((function(){p.default.debug("["+c.spec.clientId+"] live streaming republish "+e.url+" success")})).catch((function(t){p.default.error("["+c.spec.clientId+"] live streaming republish failed",e.url,t.toString()),c.onLiveStreamError&&c.onLiveStreamError(e.url,t)}))})),[3,6];case 6:return[2]}}))}))},e.prototype.setInjectStreamConfig=function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t},e.prototype.startLiveStreamingTask=function(e,t,i){return r(this,void 0,void 0,(function(){var r,o,s,c,u,f,v,m,g=this;return a(this,(function(a){switch(a.label){case 0:if(Array.from(this.streamingTasks.values()).find((function(e){return e.mode===l.LiveStreamingServiceMode.INJECT}))&&t===l.LiveStreamingServiceMode.INJECT)return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()];if(!this.transcodingConfig&&t===l.LiveStreamingServiceMode.TRANSCODE)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");return r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:30},p.default.debug("["+this.spec.clientId+"] start live streaming "+e+", mode: "+t),[4,this.taskMutex.lock()];case 1:if(o=a.sent(),!this.connection&&i)return o(),[2];if(this.streamingTasks.get(e)&&!i)return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&t===l.LiveStreamingServiceMode.TRANSCODE)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");a.label=2;case 2:return a.trys.push([2,5,,6]),this.connection?[3,4]:(s=this,[4,this.connect(t)]);case 3:s.connection=a.sent(),a.label=4;case 4:return[3,6];case 5:throw c=a.sent(),o(),c;case 6:switch(t){case l.LiveStreamingServiceMode.TRANSCODE:r.transcodingConfig=n({},this.transcodingConfig);break;case l.LiveStreamingServiceMode.RAW:break;case l.LiveStreamingServiceMode.INJECT:r={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,u=this.lastTaskId++,a.label=7;case 7:return a.trys.push([7,9,,14]),f=new Promise((function(t,n){d.wait(g.retryTimeout).then((function(){if(i)return n(i);var t=g.statusError.get(e);return t?(g.statusError.delete(e),n(t)):void 0}))})),[4,Promise.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===l.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!i,tid:u.toString()}),f])];case 8:return v=a.sent(),this.isStartingStreamingTask=!1,p.default.debug("["+this.spec.clientId+"] live streaming started, code: "+v.code),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:u}),o(),[3,14];case 9:if(m=a.sent(),o(),this.isStartingStreamingTask=!1,!m.data||!m.data.retry||i)throw m;return m.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(e,t,m)];case 10:return[2,a.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(e,t,m)];case 12:return[2,a.sent()];case 13:return[3,14];case 14:return[2]}}))}))},e.prototype.stopLiveStreamingTask=function(e){var t=this;return new Promise((function(i,n){var r=t.streamingTasks.get(e);if(!r||!t.connection)return new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var a=r.mode;r.abortTask=function(){p.default.debug("["+t.spec.clientId+"] stop live streaming success(worker exception)"),t.streamingTasks.delete(e),i()},t.connection.request("request",{clientRequest:{command:a===l.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:a===l.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(n){p.default.debug("["+t.spec.clientId+"] stop live streaming success, code: "+n.code),t.streamingTasks.delete(e),i()})).catch(n)}))},e.prototype.controlInjectStream=function(e,t,i,n){return r(this,void 0,void 0,(function(){var r;return a(this,(function(a){switch(a.label){case 0:if(!(r=this.streamingTasks.get(e))||!this.connection||r.mode!==l.LiveStreamingServiceMode.INJECT)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:i,position:n}})];case 1:return[2,a.sent().serverResponse]}}))}))},e.prototype.resetAllTask=function(){var e=this,t=Array.from(this.streamingTasks.values());this.terminate();for(var i=function(t){n.startLiveStreamingTask(t.url,t.mode).catch((function(i){e.onLiveStreamError&&e.onLiveStreamError(t.url,i)}))},n=this,r=0,a=t;r<a.length;r++)i(a[r])},e.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=f.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},e.prototype.connect=function(e){return r(this,void 0,void 0,(function(){var t,i=this;return a(this,(function(n){switch(n.label){case 0:if(this.connection)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,d.getLiveStreamingWorkerMangerResult(e,this.spec,this.cancelToken.token)];case 1:return t=n.sent(),this.uapResponse=t,this.connection=new s.AgoraLiveStreamingUapSignal(t.workerToken,this.spec,e),this.connection.on(l.LiveStreamingUapSignalEvents.WARNING,(function(e,t){return i.onLiveStreamWarning&&i.onLiveStreamWarning(t,e)})),this.connection.on(l.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,(function(e){return i.handlePublishStreamServer(e)})),this.connection.on(l.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,(function(e){return i.handleInjectStreamServerStatus(e)})),this.connection.on(l.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,(function(t,n){if(!i.connection)return n(new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));d.getLiveStreamingWorkerMangerResult(e,i.spec,i.cancelToken.token).then((function(e){i.uapResponse=e,t(e.addressList)})).catch(n)})),[4,this.connection.init(t.addressList)];case 2:return n.sent(),[2,this.connection]}}))}))},e.prototype.handlePublishStreamServer=function(e){var t=this,i=e.serverStatus.url,n=this.streamingTasks.get(i);switch(e.code){case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case l.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var r=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return p.default.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(i,r);if(!this.isStartingStreamingTask)return;this.statusError.set(i,r);case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case l.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var a=Array.from(this.streamingTasks.values()),o=function(i){if(i.abortTask)return i.abortTask(),"continue";p.default.warning("["+s.spec.clientId+"] publish stream status code",e.code,"try to republish",i.url),s.startLiveStreamingTask(i.url,i.mode,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){p.default.debug("["+t.spec.clientId+"] republish live stream success",i.url)})).catch((function(e){p.default.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(i.url,e)}))},s=this,c=0,u=a;c<u.length;c++)o(u[c]);return}},e.prototype.handleInjectStreamServerStatus=function(e){var t=Number(e.uid),i=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,i));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,i),void this.streamingTasks.delete(i);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,i),void this.streamingTasks.delete(i);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,i),void this.streamingTasks.delete(i);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,i),void this.streamingTasks.delete(i);default:return void p.default.debug("inject stream server status",e)}},e.prototype.haveUrl=function(e){return this.streamingTasks.has(e)||void 0},e}();t.AgoraRTCLiveStreamingClient=v},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(26),u=i(73),h=i(33),d=i(23),p=i(3),f=l(i(0)),v=i(1),m=function(e){function t(t,i,n){var r=e.call(this)||this;return r.reconnectMode="retry",r.reqId=0,r.commandReqId=0,r.handleWebSocketOpen=function(){r.reconnectMode="retry",r.startPingPong()},r.handleWebSocketMessage=function(e){if(e.data){var t=JSON.parse(e.data);t.requestId?r.emit("@"+t.requestId+"-"+t.sid,t):r.serviceMode===c.LiveStreamingServiceMode.INJECT?r.emit(c.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,t):(v.report.requestWorkerEvent(r.spec.sid,{actionType:"status",serverCode:t.code,workerType:r.serviceMode===c.LiveStreamingServiceMode.TRANSCODE?1:2}),r.emit(c.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,t))}},r.spec=i,r.token=t,r.serviceMode=n,r.websocket=new u.AgoraWebSocketManager("live-streaming"),r.websocket.on(c.WebSocketManagerEvents.CONNECTED,r.handleWebSocketOpen),r.websocket.on(c.WebSocketManagerEvents.ON_MESSAGE,r.handleWebSocketMessage),r.websocket.on(c.WebSocketManagerEvents.REQUEST_NEW_URLS,(function(e,t){h.emitAsPromise(r,c.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(e).catch(t)})),r.websocket.on(c.WebSocketManagerEvents.RECONNECTING,(function(){r.websocket.reconnectMode=r.reconnectMode})),r}return r(t,e),t.prototype.init=function(e){return this.websocket.init(e)},t.prototype.request=function(e,t,i,n){return o(this,void 0,void 0,(function(){var r,o,l,u,h,f,m,g,y=this;return s(this,(function(s){switch(s.label){case 0:if(this.reqId+=1,r=this.reqId,"request"===e&&(this.commandReqId+=1),o=this.commandReqId,!r||!this.websocket)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(l=a({command:e,sdkVersion:p.VERSION,seq:r,requestId:r,allocate:i,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t),"closed"===this.websocket.state)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.WS_DISCONNECT);return u=function(){return new Promise((function(e,t){y.websocket.once(c.WebSocketManagerEvents.CLOSED,(function(){return t(new d.AgoraRTCError(d.AgoraRTCErrorCode.WS_ABORT))})),y.websocket.once(c.WebSocketManagerEvents.CONNECTED,e)}))},"connected"===this.websocket.state?[3,2]:[4,u()];case 1:s.sent(),s.label=2;case 2:l.clientRequest&&(l.clientRequest.workerToken=this.token),h=new Promise((function(e,t){var i=function(){t(new d.AgoraRTCError(d.AgoraRTCErrorCode.WS_ABORT))};y.websocket.once(c.WebSocketManagerEvents.RECONNECTING,i),y.websocket.once(c.WebSocketManagerEvents.CLOSED,i),y.once("@"+r+"-"+y.spec.sid,(function(t){e(t)}))})),n&&v.report.requestWorkerEvent(this.spec.sid,a(a({},n),{requestId:o,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0})),f=Date.now(),this.websocket.sendMessage(l),m=null,s.label=3;case 3:return s.trys.push([3,5,,8]),[4,h];case 4:return m=s.sent(),[3,8];case 5:if(g=s.sent(),"closed"===this.websocket.state)throw g;return[4,u()];case 6:return s.sent(),[4,this.request(e,t,i,n)];case 7:return[2,s.sent()];case 8:return n&&v.report.requestWorkerEvent(this.spec.sid,a(a({},n),{requestId:o,actionType:"response",payload:JSON.stringify(m.serverResponse),serverCode:m.code,success:200===m.code,responseTime:Date.now()-f})),200!==m.code&&this.handleResponseError(m),[2,m]}}))}))},t.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},t.prototype.close=function(){var e="__VERSION__"===p.VERSION?"0.0.1":p.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},t.prototype.handleResponseError=function(e){switch(e.code){case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void f.default.warning("live stream response already exists stream");case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(c.LiveStreamingUapSignalEvents.WARNING,t,e.serverResponse.url);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return t=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),this.emit(c.LiveStreamingUapSignalEvents.WARNING,t,e.serverResponse.url);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return t=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),this.emit(c.LiveStreamingUapSignalEvents.WARNING,t,e.serverResponse.url);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case c.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}},t.prototype.startPingPong=function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch((function(){}))}),6e3)},t}(h.EventEmitter);t.AgoraLiveStreamingUapSignal=m},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(23),c=i(33),u=i(34),h=i(26),d=s(i(0)),p=function(e){function t(t){var i=e.call(this)||this;return i.connectionID=0,i.currentURLIndex=0,i.reconnectMode="tryNext",i._state="closed",i.retryConfig=u.DEFAULT_RETRY_CONFIG,i.reconnectCount=0,i.name=t,i}return r(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(h.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(h.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(h.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(h.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;return new Promise((function(i,n){t.urls=e;var r=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(r).then(i).catch(n),t.once(h.WebSocketManagerEvents.CLOSED,(function(){return n(new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_DISCONNECT))})),t.once(h.WebSocketManagerEvents.CONNECTED,(function(){return i()}))}))},t.prototype.close=function(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var i=this.websocket;t?setTimeout((function(){return i.close()}),500):i.close(),this.websocket=void 0}this.state=e?"failed":"closed"},t.prototype.reconnect=function(e){if(this.websocket){void 0!==e&&(this.reconnectMode=e);var t=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),t&&t.bind(this.websocket)({code:9999})}else d.default.warning("["+this.name+"] can not reconnect, no websocket")},t.prototype.sendMessage=function(e){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var t=JSON.stringify(e);try{this.websocket.send(t)}catch(e){throw new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+e.toString())}},t.prototype.createWebSocketConnection=function(e){return a(this,void 0,void 0,(function(){var t,i=this;return o(this,(function(n){return this.connectionID+=1,t=this.connectionID,[2,new Promise((function(n,r){i.websocket&&(i.websocket.onclose=null,i.websocket.close()),d.default.debug("["+i.name+"] start connect, url: "+e);try{i.websocket=new WebSocket(e),i.websocket.binaryType="arraybuffer"}catch(e){var s=new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+e.toString());return d.default.error("["+i.name+"]"+s),void r(s)}u.wait(5e3).then((function(){t===i.connectionID&&i.websocket&&i.websocket.readyState!==WebSocket.OPEN&&i.websocket&&i.websocket.close()})),i.websocket.onopen=function(){d.default.debug("["+i.name+"] websockect opened:",e),i.reconnectMode="retry",i.state="connected",i.reconnectCount=0,n()},i.websocket.onclose=function(e){return a(i,void 0,void 0,(function(){var t,i;return o(this,(function(a){switch(a.label){case 0:return d.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+e.code+", reason: "+e.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),t=c.emitAsInvokerNoResponse(this,h.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(t)]):[3,2];case 1:return i=a.sent(),"closed"===this.state?(d.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):i?(n(),[3,3]):(r(new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+e.code)),this.close(!0),[2]);case 2:r(new l.AgoraRTCError(l.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+e.code)),this.close(),a.label=3;case 3:return[2]}}))}))},i.websocket.onmessage=function(e){i.emit(h.WebSocketManagerEvents.ON_MESSAGE,e)}}))]}))}))},t.prototype.reconnectWithAction=function(e,t){return a(this,void 0,void 0,(function(){var i,n,r;return o(this,(function(a){switch(a.label){case 0:return!t&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(i=u.getRetryWaitTime(this.reconnectCount,this.retryConfig),d.default.debug("["+this.name+"] wait "+i+"ms to reconnect websocket, mode: "+e),[4,u.wait(i)]):[2,!1];case 1:if(a.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,a.label=2;case 2:return a.trys.push([2,12,,14]),"retry"!==e?[3,4]:[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 3:return a.sent(),[3,11];case 4:return"tryNext"!==e?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,a.sent()];case 6:return d.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 7:return a.sent(),[3,11];case 8:return"recover"!==e?[3,11]:(d.default.debug("["+this.name+"] request new urls"),n=this,[4,c.emitAsPromise(this,h.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return n.urls=a.sent(),this.currentURLIndex=0,[4,this.createWebSocketConnection(this.urls[this.currentURLIndex])];case 10:a.sent(),a.label=11;case 11:return[2,!0];case 12:return r=a.sent(),d.default.error("["+this.name+"] reconnect failed",r.toString()),[4,this.reconnectWithAction(e)];case 13:return[2,a.sent()];case 14:return[2]}}))}))},t}(c.EventEmitter);t.AgoraWebSocketManager=p},function(e,t,i){"use strict";var n=i(18),r=i(36),a=i(75),o=i(42);function s(e){var t=new a(e),i=r(a.prototype.request,t);return n.extend(i,a.prototype,t),n.extend(i,t),i}var l=s(i(39));l.Axios=a,l.create=function(e){return s(o(l.defaults,e))},l.Cancel=i(43),l.CancelToken=i(89),l.isCancel=i(38),l.all=function(e){return Promise.all(e)},l.spread=i(90),e.exports=l,e.exports.default=l},function(e,t,i){"use strict";var n=i(18),r=i(37),a=i(76),o=i(77),s=i(42);function l(e){this.defaults=e,this.interceptors={request:new a,response:new a}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},e.method=(e=s(this.defaults,e)).method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=[o,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,i){return this.request(n.merge(i||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,i,r){return this.request(n.merge(r||{},{method:e,url:t,data:i}))}})),e.exports=l},function(e,t,i){"use strict";var n=i(18);function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},function(e,t,i){"use strict";var n=i(18),r=i(78),a=i(38),o=i(39);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=r(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=r(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=r(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,i){"use strict";var n=i(18);e.exports=function(e,t,i){return n.forEach(i,(function(i){e=i(e,t)})),e}},function(e,t){var i,n,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new f(e,t)),1!==c.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,i){"use strict";var n=i(18);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},function(e,t,i){"use strict";var n=i(41);e.exports=function(e,t,i){var r=i.config.validateStatus;!r||r(i.status)?e(i):t(n("Request failed with status code "+i.status,i.config,null,i.request,i))}},function(e,t,i){"use strict";e.exports=function(e,t,i,n,r){return e.config=t,i&&(e.code=i),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,i){"use strict";var n=i(84),r=i(85);e.exports=function(e,t){return e&&!n(t)?r(e,t):t}},function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,i){"use strict";var n=i(18),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,a,o={};return e?(n.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),i=n.trim(e.substr(a+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([i]):o[t]?o[t]+", "+i:i}})),o):o}},function(e,t,i){"use strict";var n=i(18);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=r(window.location.href),function(t){var i=n.isString(t)?r(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},function(e,t,i){"use strict";var n=i(18);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,r,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),n.isString(r)&&s.push("path="+r),n.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";var n=i(43);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.lockingPromise=Promise.resolve(),this.locks=0}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1;var i=new Promise((function(i){e=function(){t.locks-=1,i()}})),n=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return i})),n},e}();t.PromiseMutex=n},function(e,t,i){"use strict";i.r(t);var n=i(3),r=i(0),a=i(1),o=i(8),s=i(4),l=function(){};l.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var c=new function(){var e=Object(o.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,i){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then((function(i){e.batteryManager=i,t&&setTimeout((function(){t()}),0)})).catch((function(e){r.default.debug("navigator.getBattery is disabled",e),t&&t()})):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return t.BatteryLevel=e.batteryManager&&e.batteryManager.level?Math.floor(100*e.batteryManager.level):"UNSUPPORTED",t},e.getStats=function(t,i){var n=new l,r=e._getBatteryStats();r&&r.BatteryLevel&&n.set("BatteryLevel",r.BatteryLevel),t&&t(n)},e._init(),e},u=i(21),h=i(19),d=i(25),p=i(51),f=i(9),v=["live","rtc","web","interop","h264_interop","web-only"],m=["vp8","h264"],g=["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb"],y=i(11),b=i.n(y),k=i(7),C=i.n(k),w=i(12),_=i(5),S=i(10),E=i(20),T=i(6),A=i(14),O={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},x={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},I=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var i=parseInt(t.attributes.maxFrameRate),n=parseInt(e.googFrameRateInput);return!i||!n||!(i>10&&n<5||i<10&&i>=5&&n<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,i,n,r,a){n[e]||(n[e]={isPrevNormal:!0,record:[]});var o=n[e],s=t["check"+e](i,a);if(o.record.push(s),o.record.length>=5){o.isCurNormal=-1!==o.record.indexOf(!0);var l=x[e];o.isPrevNormal&&!o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:l,msg:O[l],uid:r}),!o.isPrevNormal&&o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:l+2e3,msg:O[l+2e3],uid:r}),o.isPrevNormal=o.isCurNormal,o.record=[]}},t.setLocalStats=function(e){var i={};Object.keys(e).map((function(n){var r=e[n],a=t.gatewayClient.localStreams[parseInt(n)],o=t.localStreamStorage[n]||{};a&&a.hasVideo()&&(t.record("SendVideoBitrate",r.videoStats,o,n),t.record("FramerateInput",r.videoStats,o,n,a),t.record("FramerateSent",r.videoStats,o,n)),a&&a.hasAudio()&&(t.record("AudioIntputLevel",r.audioStats,o,n),t.record("SendAudioBitrate",r.audioStats,o,n)),i[n]=o})),t.localStreamStorage=i},t.setRemoteStats=function(i){var n={};Object.keys(i).map((function(r){var a=i[r],o=e.remoteStreams[r],s=t.remoteStreamStorage[r]||{};o&&o.hasVideo()&&o.isPlaying()&&t.record("VideoDecode",a.videoStats,s,r),o&&o.hasAudio()&&o.isPlaying()&&(t.record("AudioOutputLevel",a.audioStats,s,r),t.record("AudioDecode",a.audioStats,s,r)),n[r]=s})),t.remoteStreamStorage=n},t};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var R=i(2),P=new function(){var e=Object(o.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,i){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var n=e._getNetworkInfo();e.type=n&&n.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,i&&i("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),i=t&&t.type||"UNSUPPORTED",n=Date.now();i!==e.type&&(e.lastTypeChangedAt=n,"none"==i?e.lastDisconnectedAt=n:"none"==e.type&&(e.lastConnectedAt=n),e.type=i,e.dispatchEvent({type:"networkTypeChanged",networkType:i}))},e.getStats=function(t,i){var n={},r=e._getNetworkInfo();r&&(n.NetworkType=r.type||"UNSUPPORTED"),setTimeout((function(){t(n)}),0)},e._init((function(){navigator.connection.addEventListener("change",(function(){e._reloadNetworkInfo()})),e.networkChangeTimer=setInterval((function(){e._reloadNetworkInfo()}),5e3)}),(function(e){})),e},M=i(52),L=i(16),N=i(53),F=i.n(N),B=i(28),V="host",j=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1};if(t.mode=e.mode,t.codec=e.codec,t.clientId=Object(S.generateSessionId)().slice(0,5),t.uintUid=null,t.customReportCount=0,e=C()({},e),t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(i,n){var r=a.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(i instanceof f.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var o=i.getSrcChannelMediaInfo(),s=i.getDestChannelMediaInfos();if(Object(R.isEmpty)(o))throw"srcChannelMediaInfo should not be empty";if(Object(R.isEmpty)(s)||0===s.length)throw"destChannelMediaInfos should not be empty";if(!Object(S.is32Uint)(o.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(R.isValidChannelName)(o.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(o.token&&!Object(R.isValidToken)(o.token))throw"Invalid token in srcChannelMediaInfo";if(s.forEach((function(e){if(!Object(S.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(R.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(R.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==w.a.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(i).then((function(){r&&r()})).catch((function(e){r&&r(e)}))},t.updateChannelMediaRelay=function(i,n){var r=a.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(i instanceof f.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var o=i.getSrcChannelMediaInfo(),s=i.getDestChannelMediaInfos();if(Object(R.isEmpty)(o))throw"srcChannelMediaInfo should not be empty";if(Object(R.isEmpty)(s)||0===s.length)throw"destChannelMediaInfos should not be empty";if(!Object(S.is32Uint)(o.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(R.isValidChannelName)(o.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(o.token&&!Object(R.isValidToken)(o.token))throw"Invalid token in srcChannelMediaInfo";if(s.forEach((function(e){if(!Object(S.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(R.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(R.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==w.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(i).then((function(){r&&r()})).catch((function(e){r&&r(e)}))},t.stopChannelMediaRelay=function(i){var n=a.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return i&&i(e);i&&i()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then((function(){n&&n()})).catch((function(e){n&&n(e)}))},t.getConnectionState=function(){var i=a.report.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),n=w.a.connetionStateMap[t.gatewayClient.state];return i(),n},t.setClientRole=function(i,n){var o=a.report.reportApiInvoke(e.sessionId,{callback:n,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(R.checkValidEnum)(i,"setClientRole",[V,"audience"]),"rtc"===t.mode){var s="RTC mode can not use setClientRole";return r.default.warning("[".concat(t.clientId,"] ").concat(s)),o&&o(s)}t.gatewayClient&&t.gatewayClient.state===w.a.CONNECTED?("audience"===i&&(0===this.highStreamState?this._unpublish(this.highStream,(function(){o&&o(null,{role:i})}),(function(e){o&&o(e)})):t.gatewayClient.setClientRole("audience",o)),i===V&&t.gatewayClient.setClientRole(V,o)):(t.gatewayClient.role=i,o&&o(null,{role:i}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==w.a.CONNECTED){var i="Client is not in connected state";return r.default.error("[".concat(t.clientId,"] ").concat(i)),void e(i)}t.gatewayClient.getGatewayInfo((function(t){e(null,t)}),e)},t.renewToken=function(i,n,o){var s=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r.default.error("Failed to renew token ".concat(e),t),o&&o(e);n&&n(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(R.isValidToken)(i))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=i,void t.gatewayClient.renewToken(i,(function(e){return s(null,e)}),s)):(r.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),s(_.default.INVALID_OPERATION)):(r.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),s(_.default.INVALID_OPERATION))},t.setLowStreamParameter=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(R.checkValidObject)(i,"param");var o=i.width,s=i.height,l=i.framerate,c=i.bitrate;Object(R.isEmpty)(o)||Object(R.checkValidNumber)(o,"width"),Object(R.isEmpty)(s)||Object(R.checkValidNumber)(s,"height"),Object(R.isEmpty)(l)||Object(R.checkValidNumber)(l,"framerate"),Object(R.isEmpty)(c)||Object(R.checkValidNumber)(c,"bitrate",1,1e7),(!o&&s||o&&!s)&&r.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=i,n()},t.init=function(t,i,n){var r=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(R.checkValidString)(t),Object(s.isChromeKernel)()&&Object(s.getChromeKernelVersion)()<=48?n?r(_.default.BAD_ENVIRONMENT):Object(S.popBanTip)():(e.appId=t,e.sessionId=Object(S.generateSessionId)(),r())},t.setTurnServer=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");i instanceof Array||(i=[i]);var o=[];i.map((function(e,i){Object(R.checkValidObject)(e,"turnServer");var n=e.turnServerURL,a=e.username,s=e.password,l=e.udpport,c=e.forceturn,u=e.tcpport;if(Object(R.checkValidString)(n,"turnServerURL"),Object(R.checkValidString)(a,"username"),Object(R.checkValidString)(s,"password"),Object(R.checkValidString)(l,"udpport"),0===parseInt(l))throw new Error("udpport should not be ".concat(l));Object(R.isEmpty)(c)||Object(R.checkValidBoolean)(c,"forceturn");var h={mode:"manual"};if(h.url=n,h.udpport=l,h.username=a,h.credential=s,h.forceturn=c||!1,!Object(R.isEmpty)(u)){if(Object(R.checkValidString)(u,"tcpport"),0===parseInt(u))throw new Error("tcpport should not be ".concat(u));h.tcpport=u,r.default.info("[".concat(t.clientId,"] Set turnserver[").concat(i,"] tcpurl. ").concat(h.url,":").concat(h.tcpport))}r.default.info("[".concat(t.clientId,"] Set turnserver[").concat(i,"] udpurl. ").concat(h.url,":").concat(h.udpport,",username: ").concat(h.username)),o.push(h)})),t.turnServers=o,n()},t.setProxyServer=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!i)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");Object(R.checkValidString)(i,"proxyServer"),t.proxyServer=i,a.report.setProxyServer(i),r.default.setProxyServer(i),n()},t.startProxyServer=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer)throw new Error("You have already set the proxy");t.useProxyServer=!0,t.proxyServerType=i||1,n()},t.stopProxyServer=function(){var i=a.report.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");a.report.setProxyServer(),r.default.setProxyServer(),t.turnServers=[],t.proxyServer=null,t.useProxyServer=!1,t.proxyServerType=null,i()},t.setEncryptionSecret=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(R.checkValidString)(i,"password"),t.aespassword=i,n()},t.setEncryptionMode=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(R.checkValidString)(i,"encryptionMode"),-1===g.indexOf(i))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb"');t.aesmode=i,n()},t.configPublisher=function(i){var n=a.report.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(R.checkValidObject)(i,"config");var r=i.width,o=i.height,s=i.framerate,l=i.bitrate,c=i.publisherUrl;Object(R.checkValidNumber)(r,"width"),Object(R.checkValidNumber)(o,"height"),Object(R.checkValidNumber)(s,"framerate"),Object(R.checkValidNumber)(l,"bitrate",1,1e7),c&&Object(R.checkValidString)(c,"publisherUrl"),t.gatewayClient.configPublisher(i),n()},t.enableDualStream=function(i,n){var o=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(s.getBrowserOS)()?(a.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),o(_.default.IOS_NOT_SUPPORT)):Object(s.isWeChatBrowser)()?(a.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),o(_.default.WECHAT_NOT_SUPPORT)):(a.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream((function(e){return o(null,e)}),(function(e){r.default.warning("[".concat(t.clientId,"]"),e),o(_.default.ENABLE_DUALSTREAM_FAILED)})):o(1===t.highStreamState?_.default.STILL_ON_PUBLISHING:null)))},t.disableDualStream=function(i,n){var o=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);i&&i(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});a.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream((function(){t.highStream.lowStream=null,o()}),(function(e){r.default.warning("[".concat(t.clientId,"]"),e),o(_.default.DISABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?o(_.default.STILL_ON_PUBLISHING):o()},t._getLowStream=function(e,i){t.lowStream?e(t.lowStream):t._createLowStream((function(i){t.lowStream=i,e(t.lowStream)}),i)},t._createLowStream=function(e,i){if(t.highStream&&t.highStream.stream){var n=C()({},t.highStream.params);if(n.streamID+=1,n.audio=!1,n.video)if(t.highStream.stream.getVideoTracks()[0]){var r=new u.a(n);if(r.isLowStream=!0,r.streamId=t.highStream.getId()+1,t.lowStreamParameter){var a=C()({},t.lowStreamParameter);a.width&&a.height||(a.width=160,a.height=120),a.framerate=a.framerate||15,a.bitrate=a.bitrate||50,r.setVideoProfileCustomPlus(a)}else r.setVideoProfileCustom(function(e){var t;switch(e){case"120p":case"120p_1":t=["120p_1","120p_1","120p_1"];break;case"120p_3":t=["120p_3","120p_3","120p_3"];break;case"180p":case"180p_1":t=["90p_1","90p_1","180p_1"];break;case"180p_3":t=["120p_3","120p_3","180p_3"];break;case"180p_4":t=["120p_1","120p_1","180p_4"];break;case"240p":case"240p_1":t=["120p_1","120p_1","240p_1"];break;case"240p_3":t=["120p_3","120p_3","240p_3"];break;case"240p_4":t=["120p_4","120p_4","240p_4"];break;case"360p":case"360p_1":case"360p_4":case"360p_9":case"360p_10":case"360p_11":t=["90p_1","90p_1","360p_1"];break;case"360p_3":case"360p_6":t=["120p_3","120p_3","360p_3"];break;case"360p_7":case"360p_8":t=["120p_1","120p_1","360p_7"];break;case"480p":case"480p_1":case"480p_2":case"480p_4":case"480p_10":t=["120p_1","120p_1","480p_1"];break;case"480p_3":case"480p_6":t=["120p_3","120p_3","480p_3"];break;case"480p_8":case"480p_9":t=["120p_4","120p_4","480p_8"];break;case"720p":case"720p_1":case"720p_2":case"720p_3":t=["90p_1","90p_1","720p_1"];break;case"720p_5":case"720p_6":t=["120p_1","120p_1","720p_5"];break;case"1080p":case"1080p_1":case"1080p_2":case"1080p_3":case"1080p_5":t=["90p_1","90p_1","1080p_1"];break;case"1440p":case"1440p_1":case"1440p_2":t=["90p_1","90p_1","1440p_1"];break;case"4k":case"4k_1":case"4k_3":t=["90p_1","90p_1","4k_1"];break;default:t=["120p_1","120p_1","360p_7"]}return Object(s.isOpera)()?[e,15,50]:Object(s.isFireFox)()?[t[1],15,100]:Object(s.isSafari)()?[t[2],15,50]:[t[0],15,50]}(t.highStream.profile));try{console.log(r.videoConstraint);var o=F()(t.highStream,{width:r.videoConstraint.width.ideal,height:r.videoConstraint.height.ideal,framerate:r.videoConstraint.frameRate});return r.stream=o,t.highStream.lowStream=r,t.highStream.userMuteVideo&&r.muteVideo(),e&&e(r)}catch(e){return i&&i(e)}}else i&&i(_.default.HIGH_STREAM_NOT_VIDEO_TRACE);else i&&i(_.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else i&&i(_.default.HIGH_STREAM_NOT_VIDEO_TRACE)},t._publishLowStream=function(e,i){return 2!==t.lowStreamState?i&&i(_.default.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?i&&i(_.default.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream((function(n){t.lowStreamState=1,t.gatewayClient.publish(n,{streamType:1},(function(){t.lowStreamState=0,e&&e()}),(function(e){1===t.lowStreamState&&(t.lowStreamState=2),r.default.debug("[".concat(t.clientId,"] publish low stream failed")),i&&i(e)}))}),i)},t._unpublishLowStream=function(e,i){if(0!==t.lowStreamState)return i&&i(_.default.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},(function(){}),(function(e){r.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),i&&i(e)})),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(i,n,o,s,l,c){s&&"function"==typeof s&&(c=l,l=s,s=null);var u=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return c&&c(e);l&&l(t)},name:"Client.join",options:arguments,tag:"tracer"});if(i&&!Object(R.isValidToken)(i))return r.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),u(_.default.INVALID_PARAMETER);if(!Object(R.isValidChannelName)(n))return r.default.error("Invalid Channel Name ".concat(n)),r.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),u(_.default.INVALID_PARAMETER);if("string"==typeof n&&""===n)return r.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),u(_.default.INVALID_PARAMETER);if(s&&!Object(R.isValidString)(s))return r.default.warning("[".concat(t.clientId,"] optionalInfo should be string")),u(_.default.INVALID_PARAMETER);if(o&&!Object(S.is32Uint)(o)&&!Object(R.isValidString)(o,1,255))return r.default.error("Invalid UID ".concat(o," ").concat(b()(o))),r.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")),u(_.default.INVALID_PARAMETER);if("string"==typeof o&&0==o.length)return r.default.warning("[".concat(t.clientId,"] String uid should not be empty")),u(_.default.INVALID_PARAMETER);if("string"==typeof o&&o.length>256)return r.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),u(_.default.INVALID_PARAMETER);t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var h=Date.now(),d=setTimeout((function(){if(1!=t.gatewayClient.hasJoined){r.default.debug("[".concat(t.clientId,"] The time to join the channel is greater than 5 seconds "));var i=Date.now();a.report.joinChannelTimeOut({lts:i,sid:e.sessionId,cname:n,cid:p.cid,uid:p.uid||("string"==typeof o?void 0:o),elapse:i-h,timeout:5})}}),5e3),p={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:n,uid:o,turnServers:t.turnServers.concat(),proxyServer:t.proxyServer,token:i||e.appId,useProxyServer:t.useProxyServer,proxyServerType:t.proxyServerType,optionalInfo:s};if("string"==typeof o&&(p.stringUid=o,t.uintUid?(p.uid=t.uintUid,delete t.uintUid):p.uid=0),t.aespassword&&"none"!==t.aesmode&&C()(p,{aespassword:t.aespassword,aesmode:t.aesmode}),a.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:n,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){clearTimeout(d),t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,u(null,e)},t.onFailure=function(e){return u(e)},t.channel=n,t.gatewayClient.state!==w.a.DISCONNECTED)return r.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),u(_.default.INVALID_OPERATION),void a.report.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:_.default.INVALID_OPERATION,addr:null});t.gatewayClient.state=w.a.CONNECTING;var f=function(a,o){r.default.info("[".concat(t.clientId,"] Joining channel: ").concat(n)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:o,joinInfo:p}),t.key=i||e.appId,p.cid=a.cid,p.uid||(p.uid=a.uid),p.vid=a.vid,p.clientId=t.clientId,p.apResponse=a.res,a.uni_lbs_ip&&a.uni_lbs_ip[1]&&(p.uni_lbs_ip=a.uni_lbs_ip[1]),p.gatewayAddr=a.gateway_addr,t.joinInfo=p,t.gatewayClient.join(p,t.key,(function(e){r.default.info("[".concat(t.clientId,"] Join channel ").concat(n," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),u(null,e)}),(function(e){return u(e)}))};p.stringUid&&!p.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(E.getUserAccount)(p,t.gatewayClient),t.userAccountReq.then((function(e){r.default.debug("getUserAccount Success ".concat(e.url," ").concat(p.stringUid," => ").concat(e.uid)),p.uid=e.uid,Object(E.getGatewayList)(p,f,(function(e){return u(e)}))})).catch((function(e){r.default.error("getUserAccount rejected",e),u(e)}))):Object(E.getGatewayList)(p,f,(function(e){return u(e)}))},t.renewChannelKey=function(i,n,o){var s=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o&&o(e);n&&n(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(R.checkValidString)(i,"key",1,2047),void 0===t.key?(r.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),s(_.default.INVALID_OPERATION)):(t.key=i,t.gatewayClient.joinInfo.token=i,t.gatewayClient.key=i,t.gatewayClient.recover(),s())},t.leave=function(i,o){t.gatewayClient.isFirstSuccess=!0,t.gatewayClient.hasInvokeLeave=!0;var s=!1,l=a.report.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return o&&o(e);t.gatewayClient.reconnectingCS=!1,t.gatewayClient.state=w.a.DISCONNECTED,clearTimeout(Object(E._getReconnectCSTimer)(t.clientId)),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),i&&i(n)},name:"Client.leave",options:arguments,tag:"tracer"});r.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===w.a.CONNECTING&&(t.gatewayClient.state=w.a.DISCONNECTED)),t.gatewayClient.leave((function(e){s=!0,l(null,e)}),l),setTimeout((function(){s||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=w.a.DISCONNECTED,l(null,"LEAVE_MSG_TIMEOUT"))}),Object(n.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var i=Object(S.generateSessionId)();if(r.default.debug("renewSession ".concat(e.sessionId," => ").concat(i)),e.sessionId=i,t.gatewayClient.peerPublishDurationMap.clear(),t.joinInfo&&(t.joinInfo.sid=i),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=i),t.gatewayClient.localStreams))for(var n in t.gatewayClient.localStreams){var a=t.gatewayClient.localStreams[n];a&&(a.sid=i)}},t._publish=function(i,a,o,s){if(2!==t.highStreamState)return r.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(i.getId())),o&&o(_.default.STREAM_ALREADY_PUBLISHED);if(0===t.turnServers.length&&Object(n.getParameter)("FORCE_TURN")&&!Object(n.getParameter)("TURN_ENABLE_TCP")&&!Object(n.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");r.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(i.getId())),t.highStream=i,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var l=function(i,n,a){t.gatewayClient.publish(i,{streamType:0},(function(){i.sid=e.sessionId,t.highStreamState=0,r.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(i.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream((function(){n&&n()}),(function(e){r.default.warning("[".concat(t.clientId,"] "),e),L.a.replaceWithCanvasTrack(i).then((function(){n&&n()}))})):L.a.replaceWithCanvasTrack(i).then((function(){n&&n()}))}),a)};"audience"!==t.gatewayClient.role||"live"!==t.mode||s?l(i,a,o):t.gatewayClient.setClientRole(V,(function(e){if(e)return o&&o(e);l(i,a,o)}))},t._unpublish=function(e,i,n,a){if(0!==t.highStreamState)return r.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),n&&n(_.default.STREAM_NOT_YET_PUBLISHED);r.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var o=function(e,i,n){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,n),t.gatewayClient.unpublish(e,{streamType:0},(function(){t.highStreamState=2,r.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),i&&i()}),(function(i){r.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),n&&n(i)}))};t.gatewayClient.role!==V||"live"!==t.mode||a?o(e,i,n):t.gatewayClient.setClientRole("audience",(function(t){if(t)return n&&n(t);o(e,i,n)}))},t.publish=function(i,n){var r=a.report.reportApiInvoke(e.sessionId,{callback:function(e,i){if(e)return 1===t.highStreamState&&(t.highStreamState=2),n&&n(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!n}});2===t.highStreamState?i._hasVideoTracks()||i._hasAudioTracks()?(t.gatewayClient.publishRequestId=Object(S.generateId)(),t._publish(i,(function(e){return r(null,e)}),(function(e){return r(e)}))):r(_.default.NO_TRACK_IN_STREAM):r(_.default.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(i,n,r){var o=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e);r&&r(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!n}});0===t.highStreamState?(t.gatewayClient.publishRequestId=null,t._unpublish(i,(function(e){return o(null,e)}),(function(e){return o(e)}))):o(_.default.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(i,n,o){var l=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o&&o(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:n,onFailure:!!o}});"function"==typeof n&&(o=n,n=null),Object(R.checkValidObject)(i,"stream"),Object(R.isEmpty)(n)||(Object(R.checkValidObject)(n,"options"),Object(R.isEmpty)(n.video)||Object(R.checkValidBoolean)(n.video,"options.video"),Object(R.isEmpty)(n.audio)||Object(R.checkValidBoolean)(n.audio,"options.audio"));var c={video:!0,audio:!0};if(!Object(R.isEmpty)(n)){if(Object(s.isSafari)()&&(!n.video||!n.audio)){var u="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return r.default.error("[".concat(t.clientId,"] "),u),void l(u)}if(!Object(R.isEmpty)(n.video)&&!Object(R.isValidBoolean)(n.video)||!Object(R.isEmpty)(n.audio)&&!Object(R.isValidBoolean)(n.audio)||!1===n.audio&&!1===n.video)return u="INVALID_PARAMETER ".concat(JSON.stringify(n)),r.default.error("[".concat(t.clientId,"] "),u),void l(u)}i.subscribeOptions?(C()(i.subscribeOptions,c,n),t.gatewayClient.subscribeChange(i,(function(e){return l(null,e)}),l)):(t.gatewayClient.subscribeRequestId.set(i.getId(),Object(S.generateId)()),i.subscribeOptions=C()({},c,n),t.gatewayClient.subscribe(i,(function(e){return l(null,e)}),l))},t.unsubscribe=function(i,n){var o=a.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return n&&n(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!n}});r.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(i.getId())),t.gatewayClient.subscribeRequestId.delete(i.getId()),t.gatewayClient.unsubscribe(i,(function(e){return o(null,e)}),o)},t.setRemoteVideoStreamType=function(i,n){var r=a.report.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:n}});Object(R.checkValidEnum)(n,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(i,n),r()},t.setStreamFallbackOption=function(i,n){var r=a.report.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:n}});Object(R.checkValidEnum)(n,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(i,n),r()},t.enableAudioVolumeIndicator=function(i,n){var o=a.report.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});i=i||2e3,n=n||3,Object(R.checkValidNumber)(n,"smooth",1,100),Object(R.checkValidNumber)(i,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=i,t.audioVolumeIndication.smooth=n,t.audioVolumeIndication={interval:i,smooth:n},r.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(i," smooth ").concat(n)),t.gatewayClient.enableAudioVolumeIndicator(i,n),o()},t.getNetworkStats=function(e,i){return r.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),P.getStats(e,i)},t.getSystemStats=function(e,t){return c.getStats(e,t)},t.getRecordingDevices=function(e,t){return h.a.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return h.a.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return h.a.getCameras(e,t)},t.getRemoteAudioStats=function(e,i){return t.rtcStatsCollector.getRemoteAudioStats(e,i)},t.getLocalAudioStats=function(e,i){return t.rtcStatsCollector.getLocalAudioStats(e,i)},t.getRemoteVideoStats=function(e,i){return t.rtcStatsCollector.getRemoteVideoStats(e,i)},t.getLocalVideoStats=function(e,i){return t.rtcStatsCollector.getLocalVideoStats(e,i)},t._getRemoteVideoQualityStats=function(e,i){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,i)},t._getRemoteAudioQualityStats=function(e,i){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,i)},t.getTransportStats=function(e,i){return t.rtcStatsCollector.getTransportStats((function(t){return P.getStats((function(i){var n=C()({},t,i);e&&e(n)}),i)}),i)},t.getSessionStats=function(e,i){return t.rtcStatsCollector.getSessionStats(e,i)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},t.sendMetadata=function(i,n){var r=a.report.reportApiInvoke(e.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(e){if(e)return n&&n(e);n&&n()}});t.gatewayClient.sendMetadata(i,r)},t.sendCustomReportMessage=function(i,o,s,l,c,u){Object(n.getParameter)("CR")?t.customReportCount>Object(n.getParameter)("CRL")?u&&u("REPORT_LIMITED"):(t.gatewayClient.hasJoined||(r.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),u&&u("REPORT_BEFORE_JOINED")),t.customReportTimer||(t.customReportTimer=setInterval((function(){t.customReportCount=0}),Object(n.getParameter)("CRI"))),Object(R.checkValidString)(i,"reportId",0,100,!1),Object(R.checkValidString)(o,"category",0,100,!1),Object(R.checkValidString)(s,"event",0,100,!1),Object(R.checkValidString)(l,"label",0,100,!1),Object(R.checkValidNumber)(c,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),t.customReportCount++,a.report.sendCustomReportMessage(e.sessionId,{reportId:i,category:o,event:s,label:l,value:c,lts:Date.now()},(function(e){e?u&&u("REPORT_FAILED"):u&&u()}))):u&&u("REPORT_FORBIDDEN")},e.clientId=t.clientId,t.gatewayClient=Object(w.a)(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,i){t.gatewayClient.on(e,i),t.listenerLoggerCache.push("".concat(e).concat(i.name?":"+i.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):r.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout((function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,r.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])}),0)},t.off=function(e,i){r.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,i)},t.rtcStatsCollector=function(e){var t=Object(o.b)();return t.gatewayClient=e,t.exceptionMonitor=new I(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var i=t.gatewayClient.traffic_stats,n={};for(var r in t.remoteStats){var a={},o=t.remoteStats[r];if(Object(T.b)(a,"End2EndDelay",o.peer_delay&&o.peer_delay.audio_delay),Object(T.b)(a,"TransportDelay",o.peer_delay&&o.peer_delay.e2e_delay),Object(T.b)(a,"PacketLossRate",o.peer_delay&&o.peer_delay.e2e_audio_lost_ratio_400ms),Object(T.b)(a,"RecvLevel",o.audioStats&&o.audioStats.audioOutputLevel),Object(T.b)(a,"RecvBitrate",o.audioRecvBitrate),Object(T.b)(a,"CodecType",o.audioStats&&o.audioStats.googCodecName),Object(T.b)(a,"MuteState",o.audioDisabled),Object(T.b)(a,"TotalFreezeTime",o.audioStats&&o.audioStats.audioTotalFreezeTime),Object(T.b)(a,"TotalPlayDuration",o.audioStats&&o.audioStats.audioTotalPlayDuration),i&&i.peer_delay){var s=i.peer_delay.find((function(e){return e.peer_uid==r}));if(s){var l=s.peer_publish_audio_duration+(Date.now()-i.timestamp);Object(T.b)(a,"AudioPublishDuration",l)}else Object(T.b)(a,"AudioPublishDuration",-1)}n[r]=a}e&&e(n)},t.getLocalAudioStats=function(e){var i={};for(var n in t.localStats){var r={},a=t.localStats[n];Object(T.b)(r,"RecordingLevel",a.audioStats&&a.audioStats.audioInputLevel),Object(T.b)(r,"SendLevel",a.audioStats&&a.audioStats.totalAudioEnergy),Object(T.b)(r,"SamplingRate",a.audioStats&&a.audioStats.totalSamplesDuration),Object(T.b)(r,"SendBitrate",a.audioSendBitrate),Object(T.b)(r,"CodecType",a.audioStats&&a.audioStats.googCodecName),Object(T.b)(r,"MuteState",a.audioDisabled),Object(T.b)(r,"audioSendPacketsLost",a.audioStats&&a.audioStats.packetsLost);var o=t.gatewayClient.localStreams[n];o&&o.isPlaying()&&Object(T.b)(r,"MuteState",o.userMuteAudio?"1":"0"),i[n]=r}e&&e(i)},t.getRemoteVideoStats=function(e){var i=t.gatewayClient.traffic_stats,n={};for(var r in t.remoteStats){var a={},o=t.remoteStats[r];if(Object(T.b)(a,"End2EndDelay",o.peer_delay&&o.peer_delay.video_delay),Object(T.b)(a,"TransportDelay",o.peer_delay&&o.peer_delay.e2e_delay),Object(T.b)(a,"PacketLossRate",o.peer_delay&&o.peer_delay.e2e_video_lost_ratio_400ms),Object(T.b)(a,"RecvBitrate",o.videoRecvBitrate),Object(T.b)(a,"RecvResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthReceived),Object(T.b)(a,"RecvResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightReceived),Object(T.b)(a,"RenderResolutionWidth",o.videoStats&&o.videoStats.renderRemoteWidth),Object(T.b)(a,"RenderResolutionHeight",o.videoStats&&o.videoStats.renderRemoteHeight),Object(T.b)(a,"RenderFrameRate",o.videoStats&&o.videoStats.googFrameRateOutput),Object(T.b)(a,"MuteState",o.videoDisabled),Object(T.b)(a,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),Object(T.b)(a,"TotalPlayDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),i&&i.peer_delay){var s=i.peer_delay.find((function(e){return e.peer_uid==r}));if(s){var l=s.peer_publish_video_duration+(Date.now()-i.timestamp);Object(T.b)(a,"VideoPublishDuration",l)}else Object(T.b)(a,"VideoPublishDuration",-1)}n[r]=a}e&&e(n)},t.getLocalVideoStats=function(e){var i={};for(var n in t.localStats){var r={},a=t.localStats[n];Object(T.b)(r,"TargetSendBitrate",a.videoTargetSendBitrate),Object(T.b)(r,"SendFrameRate",a.videoStats&&a.videoStats.googFrameRateSent),Object(T.b)(r,"SendBitrate",a.videoSendBitrate),Object(T.b)(r,"SendResolutionWidth",a.videoStats&&a.videoStats.googFrameWidthSent),Object(T.b)(r,"SendResolutionHeight",a.videoStats&&a.videoStats.googFrameHeightSent),Object(T.b)(r,"CaptureResolutionWidth",a.videoStats&&a.videoStats.googFrameWidthInput),Object(T.b)(r,"CaptureResolutionHeight",a.videoStats&&a.videoStats.googFrameHeightInput),Object(T.b)(r,"EncodeDelay",a.videoStats&&a.videoStats.googAvgEncodeMs),Object(T.b)(r,"MuteState",a.videoDisabled),Object(T.b)(r,"TotalFreezeTime",a.videoStats&&a.videoStats.videoTotalFreezeTime),Object(T.b)(r,"TotalDuration",a.videoStats&&a.videoStats.videoTotalPlayDuration),Object(T.b)(r,"CaptureFrameRate",a.videoStats&&a.videoStats.googFrameRateSent),Object(T.b)(r,"videoSendPacketsLost",a.videoStats&&a.videoStats.packetsLost),a.videoStats&&!a.videoStats.googFrameWidthInput&&Object(T.b)(r,"CaptureResolutionWidth",a.videoStats&&a.videoStats.renderLocalWidth),a.videoStats&&!a.videoStats.googFrameHeightInput&&Object(T.b)(r,"CaptureResolutionHeight",a.videoStats&&a.videoStats.renderLocalHeight),i[n]=r}e&&e(i)},t.getRemoteVideoQualityStats=function(e){var i={};for(var n in t.remoteStats){var r={},a=t.remoteStats[n];Object(T.b)(r,"videoReceiveDelay",a.videoStats&&a.videoStats.googCurrentDelayMs),Object(T.b)(r,"VideoFreezeRate",a.videoStats&&a.videoStats.videoFreezeRate),Object(T.b)(r,"FirstFrameTime",a.firstFrameTime),i[n]=r}e&&e(i)},t.getRemoteAudioQualityStats=function(e){var i={};for(var n in t.remoteStats){var r={},a=t.remoteStats[n];Object(T.b)(r,"audioReceiveDelay",a.audioStats&&a.audioStats.googCurrentDelayMs),Object(T.b)(r,"AudioFreezeRate",a.videoStats&&a.videoStats.videoFreezeRate),i[n]=r}e&&e(i)},t.getTransportStats=function(e){var i={},n={},r=t.gatewayClient.traffic_stats,a=r.peer_delay;if(Object(T.b)(i,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(T.b)(i,"RTT",r&&2*r.access_delay),a){var o,s=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return D(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){o=!0,r=e})),f:function(){try{a||null==n.return||n.return()}finally{if(o)throw r}}}}(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.downlink_estimate_bandwidth&&(n[l.peer_uid]=l.downlink_estimate_bandwidth/1e3+"")}}catch(e){s.e(e)}finally{s.f()}}i.IncomingAvailableBandwidth=n,e&&e(i)},t.getSessionStats=function(e){var i={},n=t.gatewayClient.traffic_stats,r=t.gatewayClient.socket,a=0,o=0;for(var s in t.remoteStats)(l=t.remoteStats[s])&&l.videoStats&&l.videoStats.videoRecvBytesDelta&&(o+=parseInt(l.videoStats.videoRecvBytesDelta)),l&&l.audioStats&&l.audioStats.audioRecvBytesDelta&&(o+=parseInt(l.audioStats.audioRecvBytesDelta));for(var s in t.localStats){var l;(l=t.localStats[s])&&l.videoStats&&l.videoStats.videoSendBytesDelta&&(a+=parseInt(l.videoStats.videoSendBytesDelta)),l&&l.audioStats&&l.audioStats.audioSendBytesDelta&&(a+=parseInt(l.audioStats.audioSendBytesDelta))}var c=a+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,u=o+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,h=t.session.sendBytes+Object(A.getHTTPSendBytes)(),d=t.session.recvBytes+Object(A.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(h+=r.getSendBytes(),d+=r.getRecvBytes());var p=1;n.peer_delay&&(p=n.peer_delay.length,p+=1),Object(T.b)(i,"Duration",r.getDuration()),Object(T.b)(i,"UserCount",p),Object(T.b)(i,"SendBytes",h),Object(T.b)(i,"RecvBytes",d),Object(T.b)(i,"SendBitrate",8*c/1e3),Object(T.b)(i,"RecvBitrate",8*u/1e3),e&&e(i)},t.isLocalVideoFreeze=function(e,t){var i=0,n=0;if(!e||!t)return!1;if(Object(s.isChrome)()||Object(s.isOpera)())i=e.googFrameRateInput,n=e.googFrameRateSent;else if(Object(s.isSafari)())i=parseInt(e.framerateMean),n=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(s.isFireFox)())return!1;i=parseInt(e.framerateMean),n=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return i>5&&n<3},t.isRemoteVideoFreeze=function(e,t){var i=0,n=0;if(!e||!t)return!1;if(Object(s.isChrome)()||Object(s.isOpera)())i=e.googFrameRateReceived,n=e.googFrameRateDecoded;else if(Object(s.isSafari)())i=e.framerateMean,n=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(s.isFireFox)())return!1;i=parseInt(e.framesReceived)-parseInt(t.framesReceived),n=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return i>5&&i<10&&n<3||i>10&&i<20&&n<4||i>20&&n<5},t.isAudioFreeze=function(e){if(Object(s.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(s.isSafari)()||Object(s.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(s.isChrome)()||Object(s.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval((function(){if(t.gatewayClient.state!==w.a.CONNECTED)t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0});else{var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}}),2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval((function(){var e=t.gatewayClient.traffic_stats,i=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var n={};Object.keys(t.gatewayClient.remoteStreams).forEach((function(r){var a=t.gatewayClient.remoteStreams[r],o=t.remoteStats[r],s={id:r,updatedAt:i};n[r]=s,s.firstFrameTime=a.firstFrameTime,o?(s.audioTotalPlayDuration=o.audioTotalPlayDuration+1,s.audioTotalFreezeTime=o.audioTotalFreezeTime,s.isAudioFreeze=!1,s.isAudioDecodeFailed=!1,s.videoTotalPlayDuration=o.videoTotalPlayDuration+1,s.videoTotalFreezeTime=o.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.audioTotalPlayDuration=1,s.audioTotalFreezeTime=0,s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0);var l=e&&e.peer_delay&&e.peer_delay.find((function(e){return e.peer_uid==r}));l&&(s.peer_delay=l),a&&(a.isPlaying()&&(s.audioDisabled=a.userMuteAudio||a.peerMuteAudio?"1":"0",s.videoDisabled=a.userMuteVideo||a.peerMuteVideo?"1":"0"),o&&o.peer_delay&&l&&o.peer_delay.stream_type!==l.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:r,streamType:l.stream_type}),a.pc&&"established"==a.pc.state&&a.pc.getStats((function(e){if(s.pcStats=e,s.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),s.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),o&&o.audioStats&&s.audioStats){var i=parseInt(s.audioStats.bytesReceived)-parseInt(o.audioStats.bytesReceived),n=parseInt(s.audioStats.googDecodingNormal)-parseInt(o.audioStats.googDecodingNormal);if(s.audioStats.audioRecvBytesDelta=i,s.audioStats.audioDecodingNormalDelta=n,t.session.recvBytes+=i,isFinite(i)&&s.audioStats.timestamp){var r=s.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();s.audioRecvBitrate=Math.floor(8*i/r)}t.isAudioFreeze(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.audioTotalFreezeTime++,s.isAudioFreeze=!0),t.isAudioDecodeFailed(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.isAudioDecodeFailed=!0),s.audioStats.audioTotalFreezeTime=s.audioTotalFreezeTime,s.audioStats.audioTotalPlayDuration=s.audioTotalPlayDuration,s.audioStats.audioFreezeRate=Math.ceil(100*s.audioTotalFreezeTime/s.audioTotalPlayDuration)}if(o&&o.videoStats&&s.videoStats){var l=parseInt(s.videoStats.bytesReceived)-parseInt(o.videoStats.bytesReceived);s.videoStats.videoRecvBytesDelta=l,t.session.recvBytes+=l,isFinite(l)&&s.videoStats.timestamp&&(r=s.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),s.videoRecvBitrate=Math.floor(8*l/r)),t.isRemoteVideoFreeze(s.videoStats,o.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),a.player&&a.player.video&&a.player.video.videoWidth&&a.player.video.videoHeight?(s.videoStats.renderRemoteWidth=a.player.video.videoWidth,s.videoStats.renderRemoteHeight=a.player.video.videoHeight):(s.videoStats.renderRemoteWidth=a.videoWidth||s.videoStats.googFrameWidthReceived,s.videoStats.renderRemoteHeight=a.videoHeight||s.videoStats.googFrameHeightReceived)}})))})),t.remoteStats=n;var r={};if(Object.keys(t.gatewayClient.localStreams).forEach((function(e){var n=t.gatewayClient.localStreams[e],a=t.localStats[e],o={id:e,updatedAt:i};r[e]=o,a?(o.videoTotalPlayDuration=a.videoTotalPlayDuration+1,o.videoTotalFreezeTime=a.videoTotalFreezeTime,o.isVideoFreeze=!1):(o.videoTotalPlayDuration=1,o.videoTotalFreezeTime=0),n&&(n.isPlaying()&&(o.audioDisabled=n.userMuteAudio?"1":"0",o.videoDisabled=n.userMuteVideo?"1":"0"),n.video&&n.attributes.maxVideoBW?o.videoTargetSendBitrate=n.attributes.maxVideoBW:n.video&&n.screenAttributes&&(o.videoTargetSendBitrate=n.screenAttributes.maxVideoBW),n.pc&&"established"==n.pc.state&&n.pc.getStats((function(e){if(o.pcStats=e.reverse(),o.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),o.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),o.audioStats&&a&&a.audioStats){var i=parseInt(o.audioStats.bytesSent)-parseInt(a.audioStats.bytesSent);if(o.audioStats.audioSendBytesDelta=i,t.session.sendBytes+=i,isFinite(i)&&o.audioStats.timestamp){var r=o.audioStats.timestamp.getTime()-a.audioStats.timestamp.getTime();o.audioSendBitrate=Math.floor(8*i/r)}}if(o.videoStats&&a&&a.videoStats){var s=parseInt(o.videoStats.bytesSent)-parseInt(a.videoStats.bytesSent);o.videoStats.videoSendBytesDelta=s,t.session.sendBytes+=s,isFinite(s)&&o.videoStats.timestamp&&(r=o.videoStats.timestamp.getTime()-a.videoStats.timestamp.getTime(),o.videoSendBitrate=Math.floor(8*s/r)),t.isLocalVideoFreeze(o.videoStats,a.videoStats)&&(o.videoTotalFreezeTime++,o.isVideoFreeze=!0),o.videoStats.videoTotalFreezeTime=o.videoTotalFreezeTime,o.videoStats.videoTotalPlayDuration=o.videoTotalPlayDuration,o.videoStats.videoFreezeRate=Math.ceil(100*o.videoTotalFreezeTime/o.videoTotalPlayDuration),o.videoStats.renderLocalWidth=n.videoWidth||o.videoStats.googFrameWidthSent,o.videoStats.renderLocalHeight=n.videoHeight||o.videoStats.googFrameHeightSent}})))})),t.localStats=r,t.session.HTTPSendBytesDelta=Object(A.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(A.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(A.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(A.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var a=t.gatewayClient.socket;t.session.WSSendBytesDelta=a.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=a.getSendBytes(),t.session.WSRecvBytesDelta=a.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=a.getRecvBytes()}}),1e3),t.gatewayClient.on("join",(function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}})),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",(function(i){var o=i.joinInfo,s=i.config;if(s){Object(R.isEmpty)(s.uploadLog)||(Object(n.setParameter)("UPLOAD_LOG",s.uploadLog),a.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:s.uploadLog}})()),Object(R.isEmpty)(s.dualStream)||(e.isDualStream=s.dualStream,a.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"dualStream",value:s.dualStream}})()),Object(R.isEmpty)(s.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",(function(e){var i=e.stream;i?(t.client.gatewayClient.setStreamFallbackOption(i,s.streamFallbackOption),a.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:s.streamFallbackOption,streamId:i.getId()}})()):a.report.reportApiInvoke(o.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:s.streamFallbackOption,streamId:i.getId(),err:"invalid stream"}})()}));try{r.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(s))),Object.keys(s).map((function(e){return Object(n.setParameter)(e,s[e])}))}catch(t){r.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(s)))}}})),t}(t),Object(M.addLiveStreamingCapability)(t,e),e.areaCode){var i=Object(B.getAreaDomainConfig)(e.areaCode);Object.keys(i).map((function(e){"LOG_UPLOAD_SERVER"==e||"EVENT_REPORT_DOMAIN"==e||"EVENT_REPORT_BACKUP_DOMAIN"==e?Object(n.setParameter)(e,i[e][0]):Object(n.setParameter)(e,i[e])}))}return Object(R.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(R.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role=V),t.gatewayClient.on("onMultiIP",(function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=w.a.CONNECTING;var i=function(e){r.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,(function(e){r.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var i=t.onSuccess;t.onSuccess=null,t.onFailure=null,i(e)}),t.onFailure):(t.gatewayClient.joinInfo=C()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(E.getUserAccount)(joinInfo,t.gatewayClient),t.userAccountReq.then((function(e){r.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,Object(E.getGatewayList)(t.joinInfo,i,t.onFailure)})).catch((function(e){r.default.error("getUserAccount rejected",e),t.onFailure(e)}))):Object(E.getGatewayList)(t.joinInfo,i,t.onFailure)})),t.gatewayClient.on("rejoin-start",(function(){t._renewSession(),a.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("recover",(function(){t._renewSession(),console.log("recover",e.sessionId),a.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("rejoin",(function(){var e=t.highStreamState;if(r.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var i=t.onSuccess;t.onSuccess=null,t.onFailure=null,i(t.joinInfo.uid)}!t.highStream||0!==e&&1!==e||(r.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,(function(e){e&&r.default.info("[".concat(t.clientId,"] "),e)})))})),t.gatewayClient.on("streamPublished",(function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent(Object(o.e)({type:"stream-published",stream:e.stream})))})),t.gatewayClient.on("pubP2PLost",(function(e){r.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,(function(){t._publish(t.highStream,(function(){r.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})}),(function(e){r.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)}),(function(e){r.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)})),t.gatewayClient.on("subP2PLost",(function(e){r.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var i=e.stream.subscribeOptions;console.log("Re-subscribe stream",i,e.stream),t.gatewayClient.unsubscribe(e.stream,(function(){e.stream.subscribeOptions=i,t.gatewayClient.subscribe(e.stream,(function(){r.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!0,reason:""})}),(function(i){r.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),i),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:i})}))}),(function(i){r.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),i),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:i})}))})),P.on("networkTypeChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=C()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(i)})),h.a.on("recordingDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=C()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(i)})),h.a.on("playoutDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=C()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(i)})),h.a.on("cameraChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var i=C()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(i)})),t.gatewayClient.on("streamTypeChange",(function(i){var n=C()({},i,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(n),a.report.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(i))})),t},H=function(e){switch(e){case"h264_interop":return"h264";default:return"vp8"}},U=function(e){return-1===v.indexOf(e.mode)?_.default.INVALID_CLIENT_MODE:-1===m.indexOf(e.codec)?_.default.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&_.default.CLIENT_MODE_CODEC_MISMATCH},q=function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}},W=h.a.getDevices,z=d.a.getScreenSources,G=JSON.parse(JSON.stringify(n.SUPPORT_RESOLUTION_LIST));t.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(e){var t=a.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=C()({},e||{})).codec||(e.codec=H(e.mode));var i=U(e);if(i)throw r.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(i)),t(i),new Error(i);return r.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),q(e),t(null,e),j(e)},createStream:u.b,Logger:r.default,report:a.report,getDevices:W,getScreenSources:z,getParameter:n.getParameter,setParameter:n.setParameter,checkSystemRequirements:function(){var e=a.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,i=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket,o=!!t&&!!i&&!!n,l=!1;s.isChrome()&&s.getBrowserVersion()>=58&&"iOS"!==s.getBrowserOS()&&(l=!0),s.isFireFox()&&s.getBrowserVersion()>=56&&(l=!0),s.isOpera()&&s.getBrowserVersion()>=45&&(l=!0),s.isSafari()&&s.getBrowserVersion()>=11&&(l=!0),s.isEdge()&&(l=!0),(s.isWeChatBrowser()||s.isQQBrowser())&&"iOS"!==s.getBrowserOS()&&(l=!0),s.isSupportedPC()||s.isSupportedMobile()||(l=!1),r.default.debug(s.getBrowserInfo(),"isAPISupport: "+o+", isVendorAndVersionSupport: "+l);var c=o&&l;return e(null,c),c},getSupportedCodec:p.getSupportedCodec,ChannelMediaRelayConfiguration:f.ChannelMediaRelayConfiguration,VERSION:n.VERSION,BUILD:n.BUILD,PROFILE_TABLE:G,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:B.AREAS,AREA_VERSION:"global"}}]).default},module.exports=t()},aUWK:function(e,t,i){"use strict";e.exports=[i("OX/4"),i("Ph6G"),i("sYUk"),i("e03l"),i("JuP+")(i("e03l")),i("QLKV"),i("JuP+")(i("QLKV")),i("4rNY"),i("5Vaj"),i("JuP+")(i("4rNY")),i("+Ewk")]},c6pU:function(e,t,i){"use strict";var n=i("P7XM"),r=i("2Naf");function a(e,t,i){r.call(this,e,t,i,{noCredentials:!0})}n(a,r),a.enabled=r.enabled,e.exports=a},dNE1:function(e,t,i){var n=i("SMEb"),r=i("hCs2");e.exports=n.Stomp,e.exports.overTCP=r.overTCP,e.exports.overWS=r.overWS},dXd4:function(e,t,i){"use strict";var n=i("P7XM"),r=i("Yh+D"),a=i("96lO");function o(e,t,i,n){a.call(this,e,t,function(e){return function(t,i,n){var a={};"string"==typeof i&&(a.headers={"Content-type":"text/plain"});var o=r.addPath(t,"/xhr_send"),s=new e("POST",o,i,a);return s.once("finish",(function(e){if(s=null,200!==e&&204!==e)return n(new Error("http status "+e));n()})),function(){s.close(),s=null;var e=new Error("Aborted");e.code=1e3,n(e)}}}(n),i,n)}n(o,a),e.exports=o},dyV1:function(t,i,n){"use strict";var r,a=Array.prototype,o=Object.prototype,s=Function.prototype,l=String.prototype,c=a.slice,u=o.toString,h=function(e){return"[object Function]"===o.toString.call(e)},d=function(e){return"[object String]"===u.call(e)},p=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();r=p?function(e,t,i,n){!n&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(e,t,i,n){!n&&t in e||(e[t]=i)};var f=function(e,t,i){for(var n in t)o.hasOwnProperty.call(t,n)&&r(e,n,t[n],i)},v=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function m(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function g(){}f(s,{bind:function(e){var t=this;if(!h(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var i=c.call(arguments,1),n=function(){if(this instanceof s){var n=t.apply(this,i.concat(c.call(arguments)));return Object(n)===n?n:this}return t.apply(e,i.concat(c.call(arguments)))},r=Math.max(0,t.length-i.length),a=[],o=0;o<r;o++)a.push("$"+o);var s=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(n);return t.prototype&&(g.prototype=t.prototype,s.prototype=new g,g.prototype=null),s}}),f(Array,{isArray:function(e){return"[object Array]"===u.call(e)}});var y,b,k,C=Object("a"),w="a"!==C[0]||!(0 in C);f(a,{forEach:function(e){var t=v(this),i=w&&d(this)?this.split(""):t,n=arguments[1],r=-1,a=i.length>>>0;if(!h(e))throw new TypeError;for(;++r<a;)r in i&&e.call(n,i[r],r,t)}},(b=!0,k=!0,(y=a.forEach)&&(y.call("foo",(function(e,t,i){"object"!=typeof i&&(b=!1)})),y.call([1],(function(){k="string"==typeof this}),"x")),!(y&&b&&k)));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);f(a,{indexOf:function(e){var t=w&&d(this)?this.split(""):v(this),i=t.length>>>0;if(!i)return-1;var n=0;for(arguments.length>1&&(n=m(arguments[1])),n=n>=0?n:Math.max(0,i+n);n<i;n++)if(n in t&&t[n]===e)return n;return-1}},_);var S,E=l.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(S=void 0===/()??/.exec("")[1],l.split=function(e,t){var i=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==u.call(e))return E.call(this,e,t);var n,r,o,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),h=0;for(e=new RegExp(e.source,c+"g"),i+="",S||(n=new RegExp("^"+e.source+"$(?!\\s)",c)),t=void 0===t?-1>>>0:t>>>0;(r=e.exec(i))&&!((o=r.index+r[0].length)>h&&(l.push(i.slice(h,r.index)),!S&&r.length>1&&r[0].replace(n,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(r[e]=void 0)})),r.length>1&&r.index<i.length&&a.push.apply(l,r.slice(1)),s=r[0].length,h=o,l.length>=t));)e.lastIndex===r.index&&e.lastIndex++;return h===i.length?!s&&e.test("")||l.push(""):l.push(i.slice(h)),l.length>t?l.slice(0,t):l}):"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var T=l.substr;f(l,{substr:function(e,t){return T.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},"".substr&&"b"!=="0b".substr(-1))},e03l:function(e,t,i){"use strict";var n=i("P7XM"),r=i("dXd4"),a=i("+R4f"),o=i("3wkl"),s=i("yjSe");function l(e){if(!l.enabled())throw new Error("Transport created when disabled");r.call(this,e,"/eventsource",a,o)}n(l,r),l.enabled=function(){return!!s},l.transportName="eventsource",l.roundTrips=2,e.exports=l},evrj:function(e,t,i){var n=i("m4GZ");e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(n(e).replace(/(.)/g,(function(e,t){var i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(i){return n(t)}}},fCBv:function(t,i,n){"use strict";var r=n("raCH").EventEmitter,a=n("P7XM"),o=n("kwwM"),s=n("woL0"),l=n("nzop"),c=n("xSnx");function u(t,i){var n=this;r.call(this);var a=function(){var r=n.ifr=new l(c.transportName,i,t);r.once("message",(function(t){if(t){var i;try{i=o.parse(t)}catch(e){return n.emit("finish"),void n.close()}n.emit("finish",i[0],i[1])}n.close()})),r.once("close",(function(){n.emit("finish"),n.close()}))};global.document.body?a():s.attachEvent("load",a)}a(u,r),u.enabled=function(){return l.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=u},fjyx:function(e,t,i){var n;try{n=i("Z4fQ")}catch(s){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var r=n.WebSocket||n.MozWebSocket,a=i("EWj0");function o(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?o:null,version:a}},hCs2:function(e,t,i){(function(){var e,n,r,a,o;e=i("SMEb"),n=i("RUQ2"),e.Stomp.setInterval=function(e,t){return setInterval(t,e)},e.Stomp.clearInterval=function(e){return clearInterval(e)},a=function(e,t){var i,r;return i=null,r={url:"tcp:// "+t+":"+e,send:function(e){return i.write(e)},close:function(){return i.end()}},(i=n.connect(e,t,(function(e){return r.onopen()}))).on("error",(function(e){return"function"==typeof r.onclose?r.onclose(e):void 0})),i.on("close",(function(e){return"function"==typeof r.onclose?r.onclose(e):void 0})),i.on("data",(function(e){var t;return t={data:e.toString()},r.onmessage(t)})),r},o=function(e){var t,n,r,a;return t=i("fjyx").client,n=null,a={url:e,send:function(e){return n.sendUTF(e)},close:function(){return n.close()}},(r=new t).on("connect",(function(e){return n=e,a.onopen(),n.on("error",(function(e){return"function"==typeof a.onclose?a.onclose(e):void 0})),n.on("close",(function(){return"function"==typeof a.onclose?a.onclose():void 0})),n.on("message",(function(e){if("utf8"===e.type)return a.onmessage({data:e.utf8Data})}))})),r.connect(e),a},r=function(t){var i;return i=o(t),e.Stomp.over(i)},t.overTCP=function(t,i){var n;return n=a(i,t),e.Stomp.over(n)},t.overWS=r}).call(this)},hPxs:function(e,t,i){"use strict";var n,r=i("kwwM"),a=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=r.stringify(e);return a.lastIndex=0,a.test(t)?(n||(n=function(e){var t,i={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,(function(e){return i[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,i}(a)),t.replace(a,(function(e){return n[e]}))):t}}},ibx3:function(t,i,n){"use strict";var r=n("raCH").EventEmitter,a=n("P7XM"),o=n("kwwM"),s=n("1eVo");function l(t,i){r.call(this);var n=this,a=+new Date;this.xo=new i("GET",t),this.xo.once("finish",(function(t,i){var r,l;if(200===t){if(l=+new Date-a,i)try{r=o.parse(i)}catch(e){}s.isObject(r)||(r={})}n.emit("finish",r,l),n.removeAllListeners()}))}a(l,r),l.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=l},kwwM:function(e,t,i){(function(e){var n;(function(){var r=i("PDX0"),a={function:!0,object:!0},o=a[typeof t]&&t&&!t.nodeType&&t,s=a[typeof window]&&window||this,l=o&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof global&&global;function c(e,t){e||(e=s.Object()),t||(t=s.Object());var i=e.Number||s.Number,n=e.String||s.String,r=e.Object||s.Object,o=e.Date||s.Date,l=e.SyntaxError||s.SyntaxError,u=e.TypeError||s.TypeError,h=e.Math||s.Math,d=e.JSON||s.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p=r.prototype,f=p.toString,v=p.hasOwnProperty;function m(e,t){try{e()}catch(i){t&&t()}}var g=new o(-0xc782b5b800cec);function y(e){if(null!=y[e])return y[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=y("json-stringify")&&y("date-serialization")&&y("json-parse");else if("date-serialization"==e){if(r=y("json-stringify")&&g){var a=t.stringify;m((function(){r='"-271821-04-20T00:00:00.000Z"'==a(new o(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new o(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new o(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new o(-1))}))}}else{var s,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c="function"==typeof(a=t.stringify);c&&((s=function(){return 1}).toJSON=s,m((function(){c="0"===a(0)&&"0"===a(new i)&&'""'==a(new n)&&void 0===a(f)&&void 0===a(void 0)&&void 0===a()&&"1"===a(s)&&"[1]"==a([s])&&"[null]"==a([void 0])&&"null"==a(null)&&"[null,null,null]"==a([void 0,f,null])&&a({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===a(null,s)&&"[\n 1,\n 2\n]"==a([1,2],null,1)}),(function(){c=!1}))),r=c}if("json-parse"==e){var u,h=t.parse;"function"==typeof h&&m((function(){0!==h("0")||h(!1)||(s=h(l),(u=5==s.a.length&&1===s.a[0])&&(m((function(){u=!h('"\t"')})),u&&m((function(){u=1!==h("01")})),u&&m((function(){u=1!==h("1.")}))))}),(function(){u=!1})),r=u}}return y[e]=!!r}if(m((function(){g=-109252==g.getUTCFullYear()&&0===g.getUTCMonth()&&1===g.getUTCDate()&&10==g.getUTCHours()&&37==g.getUTCMinutes()&&6==g.getUTCSeconds()&&708==g.getUTCMilliseconds()})),y["bug-string-char-index"]=y["date-serialization"]=y.json=y["json-stringify"]=y["json-parse"]=null,!y("json")){var b=y("bug-string-char-index"),k=function(e,t){var i,n,r,o=0;for(r in(i=function(){this.valueOf=0}).prototype.valueOf=0,n=new i)v.call(n,r)&&o++;return i=n=null,o?k=function(e,t){var i,n,r="[object Function]"==f.call(e);for(i in e)r&&"prototype"==i||!v.call(e,i)||(n="constructor"===i)||t(i);(n||v.call(e,i="constructor"))&&t(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],k=function(e,t){var i,r,o="[object Function]"==f.call(e),s=!o&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||v;for(i in e)o&&"prototype"==i||!s.call(e,i)||t(i);for(r=n.length;i=n[--r];)s.call(e,i)&&t(i)}),k(e,t)};if(!y("json-stringify")&&!y("date-serialization")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},w=function(e,t){return("000000"+(t||0)).slice(-e)},_=function(e){var t,i,n,r,a,o,s,l,c;if(g)t=function(e){i=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),l=e.getUTCSeconds(),c=e.getUTCMilliseconds()};else{var u=h.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return d[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};t=function(e){for(r=u(e/864e5),i=u(r/365.2425)+1970-1;p(i+1,0)<=r;i++);for(n=u((r-p(i,0))/30.42);p(i,n+1)<=r;n++);r=1+r-p(i,n),o=u((a=(e%864e5+864e5)%864e5)/36e5)%24,s=u(a/6e4)%60,l=u(a/1e3)%60,c=a%1e3}}return(_=function(e){return e>-1/0&&e<1/0?(t(e),e=(i<=0||i>=1e4?(i<0?"-":"+")+w(6,i<0?-i:i):w(4,i))+"-"+w(2,n+1)+"-"+w(2,r)+"T"+w(2,o)+":"+w(2,s)+":"+w(2,l)+"."+w(3,c)+"Z",i=n=r=o=s=l=c=null):e=null,e})(e)};if(y("json-stringify")&&!y("date-serialization")){var S=function(e){return _(this)},E=t.stringify;t.stringify=function(e,t,i){var n=o.prototype.toJSON;o.prototype.toJSON=S;var r=E(e,t,i);return o.prototype.toJSON=n,r}}else{var T=function(e){var t=e.charCodeAt(0);return C[t]||"\\u00"+w(2,t.toString(16))},A=/[\x00-\x1f\x22\x5c]/g,O=function(e){return A.lastIndex=0,'"'+(A.test(e)?e.replace(A,T):e)+'"'};t.stringify=function(e,t,i){var n,r,s,l;if(a[typeof t]&&t)if("[object Function]"==(l=f.call(t)))r=t;else if("[object Array]"==l){s={};for(var c,h=0,d=t.length;h<d;)c=t[h++],"[object String]"!=(l=f.call(c))&&"[object Number]"!=l||(s[c]=1)}if(i)if("[object Number]"==(l=f.call(i))){if((i-=i%1)>0)for(i>10&&(i=10),n="";n.length<i;)n+=" "}else"[object String]"==l&&(n=i.length<=10?i:i.slice(0,10));return function e(t,i,n,r,a,s,l){var c,h,d,p,v,g,y,b,C;if(m((function(){c=i[t]})),"object"==typeof c&&c&&(c.getUTCFullYear&&"[object Date]"==f.call(c)&&c.toJSON===o.prototype.toJSON?c=_(c):"function"==typeof c.toJSON&&(c=c.toJSON(t))),n&&(c=n.call(i,t,c)),null==c)return void 0===c?c:"null";switch("object"==(h=typeof c)&&(d=f.call(c)),d||h){case"boolean":case"[object Boolean]":return""+c;case"number":case"[object Number]":return c>-1/0&&c<1/0?""+c:"null";case"string":case"[object String]":return O(""+c)}if("object"==typeof c){for(y=l.length;y--;)if(l[y]===c)throw u();if(l.push(c),p=[],b=s,s+=a,"[object Array]"==d){for(g=0,y=c.length;g<y;g++)v=e(g,c,n,r,a,s,l),p.push(void 0===v?"null":v);C=p.length?a?"[\n"+s+p.join(",\n"+s)+"\n"+b+"]":"["+p.join(",")+"]":"[]"}else k(r||c,(function(t){var i=e(t,c,n,r,a,s,l);void 0!==i&&p.push(O(t)+":"+(a?" ":"")+i)})),C=p.length?a?"{\n"+s+p.join(",\n"+s)+"\n"+b+"}":"{"+p.join(",")+"}":"{}";return l.pop(),C}}("",((c={})[""]=e,c),r,s,n,"",[])}}}if(!y("json-parse")){var x,I,D=n.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw x=I=null,l()},M=function(){for(var e,t,i,n,r,a=I,o=a.length;x<o;)switch(r=a.charCodeAt(x)){case 9:case 10:case 13:case 32:x++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?a.charAt(x):a[x],x++,e;case 34:for(e="@",x++;x<o;)if((r=a.charCodeAt(x))<32)P();else if(92==r)switch(r=a.charCodeAt(++x)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[r],x++;break;case 117:for(t=++x,i=x+4;x<i;x++)(r=a.charCodeAt(x))>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||P();e+=D("0x"+a.slice(t,x));break;default:P()}else{if(34==r)break;for(r=a.charCodeAt(x),t=x;r>=32&&92!=r&&34!=r;)r=a.charCodeAt(++x);e+=a.slice(t,x)}if(34==a.charCodeAt(x))return x++,e;P();default:if(t=x,45==r&&(n=!0,r=a.charCodeAt(++x)),r>=48&&r<=57){for(48==r&&(r=a.charCodeAt(x+1))>=48&&r<=57&&P(),n=!1;x<o&&(r=a.charCodeAt(x))>=48&&r<=57;x++);if(46==a.charCodeAt(x)){for(i=++x;i<o&&!((r=a.charCodeAt(i))<48||r>57);i++);i==x&&P(),x=i}if(101==(r=a.charCodeAt(x))||69==r){for(43!=(r=a.charCodeAt(++x))&&45!=r||x++,i=x;i<o&&!((r=a.charCodeAt(i))<48||r>57);i++);i==x&&P(),x=i}return+a.slice(t,x)}n&&P();var s=a.slice(x,x+4);if("true"==s)return x+=4,!0;if("fals"==s&&101==a.charCodeAt(x+4))return x+=5,!1;if("null"==s)return x+=4,null;P()}return"$"},L=function(e,t,i){var n=N(e,t,i);void 0===n?delete e[t]:e[t]=n},N=function(e,t,i){var n,r=e[t];if("object"==typeof r&&r)if("[object Array]"==f.call(r))for(n=r.length;n--;)L(f,k,r);else k(r,(function(e){L(r,e,i)}));return i.call(e,t,r)};t.parse=function(e,t){var i,n;return x=0,I=""+e,i=function e(t){var i,n;if("$"==t&&P(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(i=[];"]"!=(t=M());)n?","==t?"]"==(t=M())&&P():P():n=!0,","==t&&P(),i.push(e(t));return i}if("{"==t){for(i={};"}"!=(t=M());)n?","==t?"}"==(t=M())&&P():P():n=!0,","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==M()||P(),i[t.slice(1)]=e(M());return i}P()}return t}(M()),"$"!=M()&&P(),x=I=null,t&&"[object Function]"==f.call(t)?N(((n={})[""]=i,n),"",t):i}}}return t.runInContext=c,t}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(s=l),o&&!r)c(s,o);else{var u=s.JSON,h=s.JSON3,d=!1,p=c(s,s.JSON3={noConflict:function(){return d||(d=!0,s.JSON=u,s.JSON3=h,u=h=null),p}});s.JSON={parse:p.parse,stringify:p.stringify}}r&&(void 0===(n=(function(){return p}).call(t,i,t,e))||(e.exports=n))}).call(this)}).call(this,i("YuTi")(e))},l6Lj:function(e,t,i){"use strict";function n(){this._listeners={}}n.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===i.indexOf(t)&&(i=i.concat([t])),this._listeners[e]=i},n.prototype.removeEventListener=function(e,t){var i=this._listeners[e];if(i){var n=i.indexOf(t);-1===n||(i.length>1?this._listeners[e]=i.slice(0,n).concat(i.slice(n+1)):delete this._listeners[e])}},n.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,i=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,i),t in this._listeners)for(var n=this._listeners[t],r=0;r<n.length;r++)n[r].apply(this,i)},e.exports=n},m4GZ:function(e,t){function i(e){this.message=e}(i.prototype=new Error).name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,o=0,s="";r=t.charAt(o++);~r&&(n=a%4?64*n+r:r,a++%4)?s+=String.fromCharCode(255&n>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s}},moM4:function(e,t,i){"use strict";function n(e){this.type=e}n.prototype.initEvent=function(e,t,i){return this.type=e,this.bubbles=t,this.cancelable=i,this.timeStamp=+new Date,this},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,e.exports=n},mrSG:function(t,i,n){"use strict";n.r(i),n.d(i,"__extends",(function(){return a})),n.d(i,"__assign",(function(){return o})),n.d(i,"__rest",(function(){return s})),n.d(i,"__decorate",(function(){return l})),n.d(i,"__param",(function(){return c})),n.d(i,"__metadata",(function(){return u})),n.d(i,"__awaiter",(function(){return h})),n.d(i,"__generator",(function(){return d})),n.d(i,"__createBinding",(function(){return p})),n.d(i,"__exportStar",(function(){return f})),n.d(i,"__values",(function(){return v})),n.d(i,"__read",(function(){return m})),n.d(i,"__spread",(function(){return g})),n.d(i,"__spreadArrays",(function(){return y})),n.d(i,"__await",(function(){return b})),n.d(i,"__asyncGenerator",(function(){return k})),n.d(i,"__asyncDelegator",(function(){return C})),n.d(i,"__asyncValues",(function(){return w})),n.d(i,"__makeTemplateObject",(function(){return _})),n.d(i,"__importStar",(function(){return S})),n.d(i,"__importDefault",(function(){return E})),n.d(i,"__classPrivateFieldGet",(function(){return T})),n.d(i,"__classPrivateFieldSet",(function(){return A}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function a(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var o=function(){return(o=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}function l(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}function c(e,t){return function(i,n){t(i,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(t,i,n,r){return new(n||(n=Promise))((function(a,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function l(t){try{c(r.throw(t))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}c((r=r.apply(t,i||[])).next())}))}function d(t,i){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(t,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function p(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}function f(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||(t[i]=e[i])}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,a=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)n[r]=a[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function k(t,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(t,i||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){a[e]&&(r[e]=function(t){return new Promise((function(i,n){o.push([e,t,i,n])>1||l(e,t)}))})}function l(t,i){try{(n=a[t](i)).value instanceof b?Promise.resolve(n.value.v).then(c,u):h(o[0][2],n)}catch(e){h(o[0][3],e)}var n}function c(e){l("next",e)}function u(e){l("throw",e)}function h(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}function C(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,r){t[n]=e[n]?function(t){return(i=!i)?{value:b(e[n](t)),done:"return"===n}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,r){!function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}(n,r,(t=e[i](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},n6ct:function(e,t,i){"use strict";var n=i("Yh+D"),r=i("woL0"),a=i("kwwM"),o=i("uzES"),s=i("xSnx"),l=i("8fj+"),c=i("oOIF");e.exports=function(e,t){var i,u={};t.forEach((function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)})),u[s.transportName]=s,e.bootstrap_iframe=function(){var t;l.currentWindowId=c.hash.slice(1),r.attachEvent("message",(function(r){if(r.source===parent&&(void 0===i&&(i=r.origin),r.origin===i)){var s;try{s=a.parse(r.data)}catch(m){return}if(s.windowId===l.currentWindowId)switch(s.type){case"s":var h;try{h=a.parse(s.data)}catch(m){break}var d=h[0],p=h[1],f=h[2],v=h[3];if(d!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!n.isOriginEqual(f,c.href)||!n.isOriginEqual(v,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+f+", "+v+")");t=new o(new u[p](f,v));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}})),l.postMessage("s")}}},nFlj:function(t,i,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function o(t){try{return encodeURIComponent(t)}catch(e){return null}}i.stringify=function(e,t){t=t||"";var i,n,a=[];for(n in"string"!=typeof t&&(t="?"),e)if(r.call(e,n)){if((i=e[n])||null!=i&&!isNaN(i)||(i=""),n=o(n),i=o(i),null===n||null===i)continue;a.push(n+"="+i)}return a.length?t+a.join("&"):""},i.parse=function(e){for(var t,i=/([^=?#&]+)=?([^&]*)/g,n={};t=i.exec(e);){var r=a(t[1]),o=a(t[2]);null===r||null===o||r in n||(n[r]=o)}return n}},nX0T:function(e,t,i){"use strict";var n=i("raCH").EventEmitter,r=i("P7XM"),a=i("woL0"),o=i("JqAl"),s=i("Yh+D");function l(e,t,i){var r=this;n.call(this),setTimeout((function(){r._start(e,t,i)}),0)}r(l,n),l.prototype._start=function(e,t,i){var n=this,r=new global.XDomainRequest;t=s.addQuery(t,"t="+ +new Date),r.onerror=function(){n._error()},r.ontimeout=function(){n._error()},r.onprogress=function(){n.emit("chunk",200,r.responseText)},r.onload=function(){n.emit("finish",200,r.responseText),n._cleanup(!1)},this.xdr=r,this.unloadRef=a.unloadAdd((function(){n._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(i)}catch(o){this._error()}},l.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},l.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},l.prototype.close=function(){this._cleanup(!0)},l.enabled=!(!global.XDomainRequest||!o.hasDomain()),e.exports=l},nzop:function(e,t,i){"use strict";var n=i("P7XM"),r=i("kwwM"),a=i("raCH").EventEmitter,o=i("EBWB"),s=i("Yh+D"),l=i("8fj+"),c=i("woL0"),u=i("JYLm");function h(e,t,i){if(!h.enabled())throw new Error("Transport created when disabled");a.call(this);var n=this;this.origin=s.getOrigin(i),this.baseUrl=i,this.transUrl=t,this.transport=e,this.windowId=u.string(8);var r=s.addPath(i,"/iframe.html")+"#"+this.windowId;this.iframeObj=l.createIframe(r,(function(e){n.emit("close",1006,"Unable to load an iframe ("+e+")"),n.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}n(h,a),h.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},h.prototype._message=function(e){if(s.isOriginEqual(e.origin,this.origin)){var t;try{t=r.parse(e.data)}catch(n){return}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",r.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var i;try{i=r.parse(t.data)}catch(n){return}this.emit("close",i[0],i[1]),this.close()}}},h.prototype.postMessage=function(e,t){this.iframeObj.post(r.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},h.prototype.send=function(e){this.postMessage("m",e)},h.enabled=function(){return l.iframeEnabled},h.transportName="iframe",h.roundTrips=2,e.exports=h},oOIF:function(e,t,i){"use strict";e.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},"q/0M":function(e,t,i){"use strict";function n(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)n[r]=a[o];return n}var r;i.r(t),i.d(t,"LogLevel",(function(){return o})),i.d(t,"Logger",(function(){return h})),i.d(t,"setLogLevel",(function(){return d})),i.d(t,"setUserLogHandler",(function(){return p}));var a=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},l=o.INFO,c=((r={})[o.DEBUG]="log",r[o.VERBOSE]="log",r[o.INFO]="info",r[o.WARN]="warn",r[o.ERROR]="error",r),u=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(!(t<e.logLevel)){var a=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,n(["["+a+"]  "+e.name+":"],i))}},h=function(){function e(e){this.name=e,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.DEBUG],e)),this._logHandler.apply(this,n([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.VERBOSE],e)),this._logHandler.apply(this,n([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.INFO],e)),this._logHandler.apply(this,n([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.WARN],e)),this._logHandler.apply(this,n([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,n([this,o.ERROR],e)),this._logHandler.apply(this,n([this,o.ERROR],e))},e}();function d(e){a.forEach((function(t){t.setLogLevel(e)}))}function p(e,t){for(var i=function(i){var n=null;t&&t.level&&(n=s[t.level]),i.userLogHandler=null===e?null:function(t,i){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s=r.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");i>=(null!=n?n:t.logLevel)&&e({level:o[i].toLowerCase(),message:s,args:r,type:t.name})}},n=0,r=a;n<r.length;n++)i(r[n])}},raCH:function(e,t,i){"use strict";var n=i("P7XM"),r=i("l6Lj");function a(){r.call(this)}n(a,r),a.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},a.prototype.once=function(e,t){var i=this,n=!1;this.on(e,(function r(){i.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}))},a.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var i=arguments.length,n=new Array(i-1),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=0;a<t.length;a++)t[a].apply(this,n)}},a.prototype.on=a.prototype.addListener=r.prototype.addEventListener,a.prototype.removeListener=r.prototype.removeEventListener,e.exports.EventEmitter=a},sYUk:function(e,t,i){"use strict";var n=i("P7XM"),r=i("dXd4"),a=i("FUii"),o=i("nX0T");function s(e){if(!o.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/xhr_streaming",a,o)}n(s,r),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&o.enabled&&e.sameScheme},s.transportName="xdr-streaming",s.roundTrips=2,e.exports=s},uajq:function(e,t,i){"use strict";var n=i("raCH").EventEmitter,r=i("P7XM"),a=i("Yh+D"),o=i("nX0T"),s=i("3wkl"),l=i("c6pU"),c=i("9wH6"),u=i("fCBv"),h=i("ibx3");function d(e,t){var i=this;n.call(this),setTimeout((function(){i.doXhr(e,t)}),0)}r(d,n),d._getReceiver=function(e,t,i){return i.sameOrigin?new h(t,l):s.enabled?new h(t,s):o.enabled&&i.sameScheme?new h(t,o):u.enabled()?new u(e,t):new h(t,c)},d.prototype.doXhr=function(e,t){var i=this,n=a.addPath(e,"/info");this.xo=d._getReceiver(e,n,t),this.timeoutRef=setTimeout((function(){i._cleanup(!1),i.emit("finish")}),d.timeout),this.xo.once("finish",(function(e,t){i._cleanup(!0),i.emit("finish",e,t)}))},d.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},d.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},d.timeout=8e3,e.exports=d},ugx8:function(e){e.exports=JSON.parse('{"_args":[["websocket@1.0.32","C:\\\\Users\\\\drnic\\\\Desktop\\\\fellow Genius\\\\fellowGenius\\\\fellowGenius\\\\fellowGenius-angular"]],"_from":"websocket@1.0.32","_id":"websocket@1.0.32","_inBundle":false,"_integrity":"sha512-i4yhcllSP4wrpoPMU2N0TQ/q0O94LRG/eUQjEAamRltjQ1oT1PFFKOG4i877OlJgCG8rw6LrrowJp+TYCEWF7Q==","_location":"/websocket","_optional":true,"_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"websocket@1.0.32","name":"websocket","escapedName":"websocket","rawSpec":"1.0.32","saveSpec":null,"fetchSpec":"1.0.32"},"_requiredBy":["/stompjs"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.32.tgz","_spec":"1.0.32","_where":"C:\\\\Users\\\\drnic\\\\Desktop\\\\fellow Genius\\\\fellowGenius\\\\fellowGenius\\\\fellowGenius-angular","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"config":{"verbose":false},"contributors":[{"name":"I\xf1aki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=4.0.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","test":"tape test/unit/*.js"},"version":"1.0.32"}')},urRO:function(e,t,i){e.exports=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l="undefined"!=typeof window&&void 0!==window.document,c=l?window:{},u=!(!l||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,h=!!l&&"PointerEvent"in c,d="".concat("cropper","-crop"),p="".concat("cropper","-disabled"),f="".concat("cropper","-hidden"),v="".concat("cropper","-hide"),m="".concat("cropper","-invisible"),g="".concat("cropper","-modal"),y="".concat("cropper","-move"),b="".concat("cropper","Action"),k="".concat("cropper","Preview"),C=h?"pointerdown":u?"touchstart":"mousedown",w=h?"pointermove":u?"touchmove":"mousemove",_=h?"pointerup pointercancel":u?"touchend touchcancel":"mouseup",S=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,E=/^data:/,T=/^data:image\/jpeg;base64,/,A=/^img|canvas$/i,O={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},x=Number.isNaN||c.isNaN;function I(e){return"number"==typeof e&&!x(e)}var D=function(e){return e>0&&e<1/0};function R(e){return void 0===e}function P(t){return"object"===e(t)&&null!==t}var M=Object.prototype.hasOwnProperty;function L(e){if(!P(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&M.call(i,"isPrototypeOf")}catch(n){return!1}}function N(e){return"function"==typeof e}var F=Array.prototype.slice;function B(e){return Array.from?Array.from(e):F.call(e)}function V(e,t){return e&&N(t)&&(Array.isArray(e)||I(e.length)?B(e).forEach((function(i,n){t.call(e,i,n,e)})):P(e)&&Object.keys(e).forEach((function(i){t.call(e,e[i],i,e)}))),e}var j=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return P(e)&&i.length>0&&i.forEach((function(t){P(t)&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},H=/\.\d*(?:0|9){12}\d*$/;function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return H.test(e)?Math.round(e*t)/t:e}var q=/^width|height|left|top|marginLeft|marginTop$/;function W(e,t){var i=e.style;V(t,(function(e,t){q.test(t)&&I(e)&&(e="".concat(e,"px")),i[t]=e}))}function z(e,t){if(t)if(I(e.length))V(e,(function(e){z(e,t)}));else if(e.classList)e.classList.add(t);else{var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function G(e,t){t&&(I(e.length)?V(e,(function(e){G(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Y(e,t,i){t&&(I(e.length)?V(e,(function(e){Y(e,t,i)})):i?z(e,t):G(e,t))}var K=/([a-z\d])([A-Z])/g;function X(e){return e.replace(K,"$1-$2").toLowerCase()}function J(e,t){return P(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(X(t)))}function Q(e,t,i){P(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(X(t)),i)}var Z=/\s\s*/,$=function(){var e=!1;if(l){var t=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});c.addEventListener("test",i,n),c.removeEventListener("test",i,n)}return e}();function ee(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(Z).forEach((function(t){if(!$){var a=e.listeners;a&&a[t]&&a[t][i]&&(r=a[t][i],delete a[t][i],0===Object.keys(a[t]).length&&delete a[t],0===Object.keys(a).length&&delete e.listeners)}e.removeEventListener(t,r,n)}))}function te(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;t.trim().split(Z).forEach((function(t){if(n.once&&!$){var a=e.listeners,o=void 0===a?{}:a;r=function(){delete o[t][i],e.removeEventListener(t,r,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];i.apply(e,s)},o[t]||(o[t]={}),o[t][i]&&e.removeEventListener(t,o[t][i],n),o[t][i]=r,e.listeners=o}e.addEventListener(t,r,n)}))}function ie(e,t,i){var n;return N(Event)&&N(CustomEvent)?n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(n)}function ne(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var re=c.location,ae=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function oe(e){var t=e.match(ae);return null!==t&&(t[1]!==re.protocol||t[2]!==re.hostname||t[3]!==re.port)}function se(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function le(e){var t=e.rotate,i=e.scaleX,n=e.scaleY,r=e.translateX,a=e.translateY,o=[];I(r)&&0!==r&&o.push("translateX(".concat(r,"px)")),I(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),I(t)&&0!==t&&o.push("rotate(".concat(t,"deg)")),I(i)&&1!==i&&o.push("scaleX(".concat(i,")")),I(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function ce(e,t){var i=e.pageX,n=e.pageY,r={endX:i,endY:n};return t?r:a({startX:i,startY:n},r)}function ue(e){var t=e.aspectRatio,i=e.height,n=e.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=D(n),o=D(i);if(a&&o){var s=i*t;"contain"===r&&s>n||"cover"===r&&s<n?i=n/t:n=i*t}else a?i=n/t:o&&(n=i*t);return{width:n,height:i}}function he(e,t,i,n){var r=t.aspectRatio,a=t.naturalWidth,s=t.naturalHeight,l=t.rotate,c=void 0===l?0:l,u=t.scaleX,h=void 0===u?1:u,d=t.scaleY,p=void 0===d?1:d,f=i.aspectRatio,v=i.naturalWidth,m=i.naturalHeight,g=n.fillColor,y=void 0===g?"transparent":g,b=n.imageSmoothingEnabled,k=void 0===b||b,C=n.imageSmoothingQuality,w=void 0===C?"low":C,_=n.maxWidth,S=void 0===_?1/0:_,E=n.maxHeight,T=void 0===E?1/0:E,A=n.minWidth,O=void 0===A?0:A,x=n.minHeight,I=void 0===x?0:x,D=document.createElement("canvas"),R=D.getContext("2d"),P=ue({aspectRatio:f,width:S,height:T}),M=ue({aspectRatio:f,width:O,height:I},"cover"),L=Math.min(P.width,Math.max(M.width,v)),N=Math.min(P.height,Math.max(M.height,m)),F=ue({aspectRatio:r,width:S,height:T}),B=ue({aspectRatio:r,width:O,height:I},"cover"),V=Math.min(F.width,Math.max(B.width,a)),j=Math.min(F.height,Math.max(B.height,s)),H=[-V/2,-j/2,V,j];return D.width=U(L),D.height=U(N),R.fillStyle=y,R.fillRect(0,0,L,N),R.save(),R.translate(L/2,N/2),R.rotate(c*Math.PI/180),R.scale(h,p),R.imageSmoothingEnabled=k,R.imageSmoothingQuality=w,R.drawImage.apply(R,[e].concat(o(H.map((function(e){return Math.floor(U(e))}))))),R.restore(),D}var de=String.fromCharCode,pe=/^data:.*,/,fe={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,n=this.cropper,r=Number(t.minContainerWidth),a=Number(t.minContainerHeight);z(n,f),G(e,f);var o={width:Math.max(i.offsetWidth,r>=0?r:200),height:Math.max(i.offsetHeight,a>=0?a:100)};this.containerData=o,W(n,{width:o.width,height:o.height}),z(e,f),G(n,f)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,n=Math.abs(t.rotate)%180==90,r=n?t.naturalHeight:t.naturalWidth,a=n?t.naturalWidth:t.naturalHeight,o=r/a,s=e.width,l=e.height;e.height*o>e.width?3===i?s=e.height*o:l=e.width/o:3===i?l=e.width/o:s=e.height*o;var c={aspectRatio:o,naturalWidth:r,naturalHeight:a,width:s,height:l};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(e.width-c.width)/2,c.top=(e.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=j({},c)},limitCanvas:function(e,t){var i=this.options,n=this.containerData,r=this.canvasData,a=this.cropBoxData,o=i.viewMode,s=r.aspectRatio,l=this.cropped&&a;if(e){var c=Number(i.minCanvasWidth)||0,u=Number(i.minCanvasHeight)||0;o>1?(c=Math.max(c,n.width),u=Math.max(u,n.height),3===o&&(u*s>c?c=u*s:u=c/s)):o>0&&(c?c=Math.max(c,l?a.width:0):u?u=Math.max(u,l?a.height:0):l&&((u=a.height)*s>(c=a.width)?c=u*s:u=c/s));var h=ue({aspectRatio:s,width:c,height:u});u=h.height,r.minWidth=c=h.width,r.minHeight=u,r.maxWidth=1/0,r.maxHeight=1/0}if(t)if(o>(l?0:1)){var d=n.width-r.width,p=n.height-r.height;r.minLeft=Math.min(0,d),r.minTop=Math.min(0,p),r.maxLeft=Math.max(0,d),r.maxTop=Math.max(0,p),l&&this.limited&&(r.minLeft=Math.min(a.left,a.left+(a.width-r.width)),r.minTop=Math.min(a.top,a.top+(a.height-r.height)),r.maxLeft=a.left,r.maxTop=a.top,2===o&&(r.width>=n.width&&(r.minLeft=Math.min(0,d),r.maxLeft=Math.max(0,d)),r.height>=n.height&&(r.minTop=Math.min(0,p),r.maxTop=Math.max(0,p))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=n.width,r.maxTop=n.height},renderCanvas:function(e,t){var i=this.canvasData,n=this.imageData;if(t){var r=function(e){var t=e.width,i=e.height,n=e.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:t};var r=n%90*Math.PI/180,a=Math.sin(r),o=Math.cos(r),s=t*o+i*a,l=t*a+i*o;return n>90?{width:l,height:s}:{width:s,height:l}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),a=r.width,o=r.height,s=i.width*(a/i.naturalWidth),l=i.height*(o/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(l-i.height)/2,i.width=s,i.height=l,i.aspectRatio=a/o,i.naturalWidth=a,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,W(this.canvas,j({width:i.width,height:i.height},le({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,n=i.naturalWidth*(t.width/t.naturalWidth),r=i.naturalHeight*(t.height/t.naturalHeight);j(i,{width:n,height:r,left:(t.width-n)/2,top:(t.height-r)/2}),W(this.image,j({width:i.width,height:i.height},le(j({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,r={width:t.width,height:t.height};i&&(t.height*i>t.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*n),r.height=Math.max(r.minHeight,r.height*n),r.left=t.left+(t.width-r.width)/2,r.top=t.top+(t.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=j({},r)},limitCropBox:function(e,t){var i=this.options,n=this.containerData,r=this.canvasData,a=this.cropBoxData,o=this.limited,s=i.aspectRatio;if(e){var l=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,u=o?Math.min(n.width,r.width,r.width+r.left,n.width-r.left):n.width,h=o?Math.min(n.height,r.height,r.height+r.top,n.height-r.top):n.height;l=Math.min(l,n.width),c=Math.min(c,n.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),h*s>u?h=u/s:u=h*s),a.minWidth=Math.min(l,u),a.minHeight=Math.min(c,h),a.maxWidth=u,a.maxHeight=h}t&&(o?(a.minLeft=Math.max(0,r.left),a.minTop=Math.max(0,r.top),a.maxLeft=Math.min(n.width,r.left+r.width)-a.width,a.maxTop=Math.min(n.height,r.top+r.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=n.width-a.width,a.maxTop=n.height-a.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&Q(this.face,b,i.width>=t.width&&i.height>=t.height?"move":"all"),W(this.cropBox,j({width:i.width,height:i.height},le({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ie(this.element,"crop",this.getData())}},ve={initPreview:function(){var e=this.element,t=this.crossOrigin,i=this.options.preview,n=t?this.crossOriginUrl:this.url,r=e.alt||"The image to preview",a=document.createElement("img");if(t&&(a.crossOrigin=t),a.src=n,a.alt=r,this.viewBox.appendChild(a),this.viewBoxImage=a,i){var o=i;"string"==typeof i?o=e.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,V(o,(function(e){var i=document.createElement("img");Q(e,k,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(i.crossOrigin=t),i.src=n,i.alt=r,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(i)}))}},resetPreview:function(){V(this.previews,(function(e){var t=J(e,k);W(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(e,t){if(P(e[t]))try{delete e[t]}catch(i){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(i){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(X(t)))}(e,k)}))},preview:function(){var e=this.imageData,t=this.canvasData,i=this.cropBoxData,n=i.width,r=i.height,a=e.width,o=e.height,s=i.left-t.left-e.left,l=i.top-t.top-e.top;this.cropped&&!this.disabled&&(W(this.viewBoxImage,j({width:a,height:o},le(j({translateX:-s,translateY:-l},e)))),V(this.previews,(function(t){var i=J(t,k),c=i.width,u=i.height,h=c,d=u,p=1;n&&(d=r*(p=c/n)),r&&d>u&&(h=n*(p=u/r),d=u),W(t,{width:h,height:d}),W(t.getElementsByTagName("img")[0],j({width:a*p,height:o*p},le(j({translateX:-s*p,translateY:-l*p},e))))})))}},me={bind:function(){var e=this.element,t=this.options,i=this.cropper;N(t.cropstart)&&te(e,"cropstart",t.cropstart),N(t.cropmove)&&te(e,"cropmove",t.cropmove),N(t.cropend)&&te(e,"cropend",t.cropend),N(t.crop)&&te(e,"crop",t.crop),N(t.zoom)&&te(e,"zoom",t.zoom),te(i,C,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&te(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&te(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),te(e.ownerDocument,w,this.onCropMove=this.cropMove.bind(this)),te(e.ownerDocument,_,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&te(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;N(t.cropstart)&&ee(e,"cropstart",t.cropstart),N(t.cropmove)&&ee(e,"cropmove",t.cropmove),N(t.cropend)&&ee(e,"cropend",t.cropend),N(t.crop)&&ee(e,"crop",t.crop),N(t.zoom)&&ee(e,"zoom",t.zoom),ee(i,C,this.onCropStart),t.zoomable&&t.zoomOnWheel&&ee(i,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ee(i,"dblclick",this.onDblclick),ee(e.ownerDocument,w,this.onCropMove),ee(e.ownerDocument,_,this.onCropEnd),t.responsive&&ee(window,"resize",this.onResize)}},ge={resize:function(){if(!this.disabled){var e,t,i=this.options,n=this.container,r=this.containerData,a=n.offsetWidth/r.width;1===a&&n.offsetHeight===r.height||(i.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(V(e,(function(t,i){e[i]=t*a}))),this.setCropBoxData(V(t,(function(e,i){t[i]=e*a})))))}},dblclick:function(){var e,t;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=d,((e=this.dragBox).classList?e.classList.contains(t):e.className.indexOf(t)>-1)?"move":"crop"))},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(I(t)&&1!==t||I(i)&&0!==i||e.ctrlKey))){var n,r=this.options,a=this.pointers;e.changedTouches?V(e.changedTouches,(function(e){a[e.identifier]=ce(e)})):a[e.pointerId||0]=ce(e),n=Object.keys(a).length>1&&r.zoomable&&r.zoomOnTouch?"zoom":J(e.target,b),S.test(n)&&!1!==ie(this.element,"cropstart",{originalEvent:e,action:n})&&(e.preventDefault(),this.action=n,this.cropping=!1,"crop"===n&&(this.cropping=!0,z(this.dragBox,g)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var i=this.pointers;e.preventDefault(),!1!==ie(this.element,"cropmove",{originalEvent:e,action:t})&&(e.changedTouches?V(e.changedTouches,(function(e){j(i[e.identifier]||{},ce(e,!0))})):j(i[e.pointerId||0]||{},ce(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?V(e.changedTouches,(function(e){delete i[e.identifier]})):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Y(this.dragBox,g,this.cropped&&this.options.modal)),ie(this.element,"cropend",{originalEvent:e,action:t}))}}},ye={change:function(e){var t,i=this.canvasData,n=this.containerData,r=this.cropBoxData,o=this.pointers,s=this.action,l=this.options.aspectRatio,c=r.left,u=r.top,h=r.width,d=r.height,p=c+h,v=u+d,m=0,g=0,y=n.width,b=n.height,k=!0;!l&&e.shiftKey&&(l=h&&d?h/d:1),this.limited&&(g=r.minTop,y=(m=r.minLeft)+Math.min(n.width,i.width,i.left+i.width),b=g+Math.min(n.height,i.height,i.top+i.height));var C=o[Object.keys(o)[0]],w={x:C.endX-C.startX,y:C.endY-C.startY},_=function(e){switch(e){case"e":p+w.x>y&&(w.x=y-p);break;case"w":c+w.x<m&&(w.x=m-c);break;case"n":u+w.y<g&&(w.y=g-u);break;case"s":v+w.y>b&&(w.y=b-v)}};switch(s){case"all":c+=w.x,u+=w.y;break;case"e":if(w.x>=0&&(p>=y||l&&(u<=g||v>=b))){k=!1;break}_("e"),(h+=w.x)<0&&(s="w",c-=h=-h),l&&(u+=(r.height-(d=h/l))/2);break;case"n":if(w.y<=0&&(u<=g||l&&(c<=m||p>=y))){k=!1;break}_("n"),u+=w.y,(d-=w.y)<0&&(s="s",u-=d=-d),l&&(c+=(r.width-(h=d*l))/2);break;case"w":if(w.x<=0&&(c<=m||l&&(u<=g||v>=b))){k=!1;break}_("w"),c+=w.x,(h-=w.x)<0&&(s="e",c-=h=-h),l&&(u+=(r.height-(d=h/l))/2);break;case"s":if(w.y>=0&&(v>=b||l&&(c<=m||p>=y))){k=!1;break}_("s"),(d+=w.y)<0&&(s="n",u-=d=-d),l&&(c+=(r.width-(h=d*l))/2);break;case"ne":if(l){if(w.y<=0&&(u<=g||p>=y)){k=!1;break}_("n"),u+=w.y,h=(d-=w.y)*l}else _("n"),_("e"),w.x>=0?p<y?h+=w.x:w.y<=0&&u<=g&&(k=!1):h+=w.x,w.y<=0?u>g&&(d-=w.y,u+=w.y):(d-=w.y,u+=w.y);h<0&&d<0?(s="sw",u-=d=-d,c-=h=-h):h<0?(s="nw",c-=h=-h):d<0&&(s="se",u-=d=-d);break;case"nw":if(l){if(w.y<=0&&(u<=g||c<=m)){k=!1;break}_("n"),u+=w.y,c+=r.width-(h=(d-=w.y)*l)}else _("n"),_("w"),w.x<=0?c>m?(h-=w.x,c+=w.x):w.y<=0&&u<=g&&(k=!1):(h-=w.x,c+=w.x),w.y<=0?u>g&&(d-=w.y,u+=w.y):(d-=w.y,u+=w.y);h<0&&d<0?(s="se",u-=d=-d,c-=h=-h):h<0?(s="ne",c-=h=-h):d<0&&(s="sw",u-=d=-d);break;case"sw":if(l){if(w.x<=0&&(c<=m||v>=b)){k=!1;break}_("w"),c+=w.x,d=(h-=w.x)/l}else _("s"),_("w"),w.x<=0?c>m?(h-=w.x,c+=w.x):w.y>=0&&v>=b&&(k=!1):(h-=w.x,c+=w.x),w.y>=0?v<b&&(d+=w.y):d+=w.y;h<0&&d<0?(s="ne",u-=d=-d,c-=h=-h):h<0?(s="se",c-=h=-h):d<0&&(s="nw",u-=d=-d);break;case"se":if(l){if(w.x>=0&&(p>=y||v>=b)){k=!1;break}_("e"),d=(h+=w.x)/l}else _("s"),_("e"),w.x>=0?p<y?h+=w.x:w.y>=0&&v>=b&&(k=!1):h+=w.x,w.y>=0?v<b&&(d+=w.y):d+=w.y;h<0&&d<0?(s="nw",u-=d=-d,c-=h=-h):h<0?(s="sw",c-=h=-h):d<0&&(s="ne",u-=d=-d);break;case"move":this.move(w.x,w.y),k=!1;break;case"zoom":this.zoom(function(e){var t=a({},e),i=0;return V(e,(function(e,n){delete t[n],V(t,(function(t){var n=Math.abs(e.startX-t.startX),r=Math.abs(e.startY-t.startY),a=Math.abs(e.endX-t.endX),o=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+r*r),l=(Math.sqrt(a*a+o*o)-s)/s;Math.abs(l)>Math.abs(i)&&(i=l)}))})),i}(o),e),k=!1;break;case"crop":if(!w.x||!w.y){k=!1;break}t=ne(this.cropper),c=C.startX-t.left,u=C.startY-t.top,h=r.minWidth,d=r.minHeight,w.x>0?s=w.y>0?"se":"ne":w.x<0&&(c-=h,s=w.y>0?"sw":"nw"),w.y<0&&(u-=d),this.cropped||(G(this.cropBox,f),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}k&&(r.width=h,r.height=d,r.left=c,r.top=u,this.action=s,this.renderCropBox()),V(o,(function(e){e.startX=e.endX,e.startY=e.endY}))}},be={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&z(this.dragBox,g),G(this.cropBox,f),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),G(this.dragBox,g),z(this.cropBox,f)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,V(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,G(this.cropper,p)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,z(this.cropper,p)),this},destroy:function(){var e=this.element;return e.cropper?(e.cropper=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,n=i.left,r=i.top;return this.moveTo(R(e)?e:n+Number(e),R(t)?t:r+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.canvasData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(I(e)&&(i.left=e,n=!0),I(t)&&(i.top=t,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=Number(e),this.zoomTo(i.width*(e=e<0?1/(1-e):1+e)/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var n=this.options,r=this.canvasData,a=r.width,o=r.height,s=r.naturalWidth,l=r.naturalHeight;if((e=Number(e))>=0&&this.ready&&!this.disabled&&n.zoomable){var c=s*e,u=l*e;if(!1===ie(this.element,"zoom",{ratio:e,oldRatio:a/s,originalEvent:i}))return this;if(i){var h=this.pointers,d=ne(this.cropper),p=h&&Object.keys(h).length?function(e){var t=0,i=0,n=0;return V(e,(function(e){t+=e.startX,i+=e.startY,n+=1})),{pageX:t/=n,pageY:i/=n}}(h):{pageX:i.pageX,pageY:i.pageY};r.left-=(p.pageX-d.left-r.left)/a*(c-a),r.top-=(p.pageY-d.top-r.top)/o*(u-o)}else L(t)&&I(t.x)&&I(t.y)?(r.left-=(t.x-r.left)/a*(c-a),r.top-=(t.y-r.top)/o*(u-o)):(r.left-=(c-a)/2,r.top-=(u-o)/2);r.width=c,r.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return I(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,I(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(I(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.imageData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(I(e)&&(i.scaleX=e,n=!0),I(t)&&(i.scaleY=t,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,r=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){var o=n.width/n.naturalWidth;if(V(e={x:a.left-r.left,y:a.top-r.top,width:a.width,height:a.height},(function(t,i){e[i]=t/o})),t){var s=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return i.rotatable&&(e.rotate=n.rotate||0),i.scalable&&(e.scaleX=n.scaleX||1,e.scaleY=n.scaleY||1),e},setData:function(e){var t=this.options,i=this.imageData,n=this.canvasData,r={};if(this.ready&&!this.disabled&&L(e)){var a=!1;t.rotatable&&I(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,a=!0),t.scalable&&(I(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,a=!0),I(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;I(e.x)&&(r.left=e.x*o+n.left),I(e.y)&&(r.top=e.y*o+n.top),I(e.width)&&(r.width=e.width*o),I(e.height)&&(r.height=e.height*o),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&V(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){t[i]=e[i]})),t},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&L(e)&&(I(e.left)&&(t.left=e.left),I(e.top)&&(t.top=e.top),I(e.width)?(t.width=e.width,t.height=e.width/i):I(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,i,n=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&L(e)&&(I(e.left)&&(n.left=e.left),I(e.top)&&(n.top=e.top),I(e.width)&&e.width!==n.width&&(t=!0,n.width=e.width),I(e.height)&&e.height!==n.height&&(i=!0,n.height=e.height),r&&(t?n.height=n.width/r:i&&(n.width=n.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=he(this.image,this.imageData,t,e);if(!this.cropped)return i;var n=this.getData(),r=n.x,a=n.y,s=n.width,l=n.height,c=i.width/Math.floor(t.naturalWidth);1!==c&&(r*=c,a*=c,s*=c,l*=c);var u=s/l,h=ue({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=ue({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),p=ue({aspectRatio:u,width:e.width||(1!==c?i.width:s),height:e.height||(1!==c?i.height:l)}),f=p.width,v=p.height;f=Math.min(h.width,Math.max(d.width,f)),v=Math.min(h.height,Math.max(d.height,v));var m=document.createElement("canvas"),g=m.getContext("2d");m.width=U(f),m.height=U(v),g.fillStyle=e.fillColor||"transparent",g.fillRect(0,0,f,v);var y=e.imageSmoothingEnabled,b=void 0===y||y,k=e.imageSmoothingQuality;g.imageSmoothingEnabled=b,k&&(g.imageSmoothingQuality=k);var C,w,_,S,E,T,A=i.width,O=i.height,x=r,I=a;x<=-s||x>A?(x=0,C=0,_=0,E=0):x<=0?(_=-x,x=0,E=C=Math.min(A,s+x)):x<=A&&(_=0,E=C=Math.min(s,A-x)),C<=0||I<=-l||I>O?(I=0,w=0,S=0,T=0):I<=0?(S=-I,I=0,T=w=Math.min(O,l+I)):I<=O&&(S=0,T=w=Math.min(l,O-I));var D=[x,I,C,w];if(E>0&&T>0){var R=f/s;D.push(_*R,S*R,E*R,T*R)}return g.drawImage.apply(g,[i].concat(o(D.map((function(e){return Math.floor(U(e))}))))),m},setAspectRatio:function(e){var t=this.options;return this.disabled||R(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var r="crop"===e,a=t.movable&&"move"===e;t.dragMode=e=r||a?e:"none",Q(i,b,e),Y(i,d,r),Y(i,y,a),t.cropBoxMovable||(Q(n,b,e),Y(n,d,r),Y(n,y,a))}return this}},ke=c.Cropper,Ce=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,e),!i||!A.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=j({},O,L(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var n,r,a;return n=e,a=[{key:"noConflict",value:function(){return window.Cropper=ke,e}},{key:"setDefaults",value:function(e){j(O,L(e)&&e)}}],(r=[{key:"init",value:function(){var e,t=this.element,i=t.tagName.toLowerCase();if(!t.cropper){if(t.cropper=this,"img"===i){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(E.test(e))T.test(e)?this.read((r=e.replace(pe,""),a=atob(r),o=new ArrayBuffer(a.length),V(s=new Uint8Array(o),(function(e,t){s[t]=a.charCodeAt(t)})),o)):this.clone();else{var r,a,o,s,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){"image/jpeg"!==l.getResponseHeader("content-type")&&l.abort()},l.onload=function(){t.read(l.response)},l.onloadend=function(){t.reloading=!1,t.xhr=null},n.checkCrossOrigin&&oe(e)&&i.crossOrigin&&(e=se(e)),l.open("GET",e),l.responseType="arraybuffer",l.withCredentials="use-credentials"===i.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,i=this.imageData,n=function(e){var t,i=new DataView(e);try{var n,r,a;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,s=2;s+1<o;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){r=s;break}s+=1}if(r){var l=r+10;if("Exif"===function(e,t,i){var n="";i+=t;for(var r=t;r<i;r+=1)n+=de(e.getUint8(r));return n}(i,r+4,4)){var c=i.getUint16(l);if(((n=18761===c)||19789===c)&&42===i.getUint16(l+2,n)){var u=i.getUint32(l+4,n);u>=8&&(a=l+u)}}}if(a){var h,d,p=i.getUint16(a,n);for(d=0;d<p;d+=1)if(274===i.getUint16(h=a+12*d+2,n)){t=i.getUint16(h+=8,n),i.setUint16(h,1,n);break}}}catch(f){t=1}return t}(e),r=0,a=1,o=1;if(n>1){this.url=function(e,t){for(var i=[],n=new Uint8Array(e);n.length>0;)i.push(de.apply(null,B(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(i.join("")))}(e);var s=function(e){var t=0,i=1,n=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:n}}(n);r=s.rotate,a=s.scaleX,o=s.scaleY}t.rotatable&&(i.rotate=r),t.scalable&&(i.scaleX=a,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,i=e.crossOrigin,n=t;this.options.checkCrossOrigin&&oe(t)&&(i||(i="anonymous"),n=se(t)),this.crossOrigin=i,this.crossOriginUrl=n;var r=document.createElement("img");i&&(r.crossOrigin=i),r.src=n||t,r.alt=e.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),z(r,v),e.parentNode.insertBefore(r,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var i=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),n=function(t,i){j(e.imageData,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i}),e.initialImageData=j({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||i){var r=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){n(r.width,r.height),i||a.removeChild(r)},r.src=t.src,i||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(r))}else n(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,i=this.image,n=e.parentNode,r=document.createElement("div");r.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var a=r.querySelector(".".concat("cropper","-container")),o=a.querySelector(".".concat("cropper","-canvas")),s=a.querySelector(".".concat("cropper","-drag-box")),l=a.querySelector(".".concat("cropper","-crop-box")),c=l.querySelector(".".concat("cropper","-face"));this.container=n,this.cropper=a,this.canvas=o,this.dragBox=s,this.cropBox=l,this.viewBox=a.querySelector(".".concat("cropper","-view-box")),this.face=c,o.appendChild(i),z(e,f),n.insertBefore(a,e.nextSibling),this.isImg||G(i,v),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,z(l,f),t.guides||z(l.getElementsByClassName("".concat("cropper","-dashed")),f),t.center||z(l.getElementsByClassName("".concat("cropper","-center")),f),t.background&&z(a,"".concat("cropper","-bg")),t.highlight||z(c,m),t.cropBoxMovable&&(z(c,y),Q(c,b,"all")),t.cropBoxResizable||(z(l.getElementsByClassName("".concat("cropper","-line")),f),z(l.getElementsByClassName("".concat("cropper","-point")),f)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),N(t.ready)&&te(e,"ready",t.ready,{once:!0}),ie(e,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),G(this.element,f))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&i(n.prototype,r),a&&i(n,a),e}();return j(Ce.prototype,fe,ve,me,ge,ye,be),Ce}()},uzES:function(e,t,i){"use strict";var n=i("kwwM"),r=i("8fj+");function a(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}a.prototype._transportClose=function(e,t){r.postMessage("c",n.stringify([e,t]))},a.prototype._transportMessage=function(e){r.postMessage("t",e)},a.prototype._send=function(e){this._transport.send(e)},a.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=a},v0om:function(t,i,n){"use strict";var r,a,o=n("JYLm"),s=n("Yh+D");t.exports=function(t,i,n){r||((r=global.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(a=global.document.createElement("textarea")).name="d",r.appendChild(a),global.document.body.appendChild(r));var l="a"+o.string(8);r.target=l,r.action=s.addQuery(s.addPath(t,"/jsonp_send"),"i="+l);var c=function(e){try{return global.document.createElement('<iframe name="'+e+'">')}catch(i){var t=global.document.createElement("iframe");return t.name=e,t}}(l);c.id=l,c.style.display="none",r.appendChild(c);try{a.value=i}catch(e){}r.submit();var u=function(e){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,setTimeout((function(){c.parentNode.removeChild(c),c=null}),500),a.value="",n(e))};return c.onerror=function(){u()},c.onload=function(){u()},c.onreadystatechange=function(e){"complete"===c.readyState&&u()},function(){u(new Error("Aborted"))}}},wj3C:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r,a,o=n("mrSG"),s=n("zVF4"),l=n("S+S0"),c=n("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.ErrorFactory("app","Firebase",u),d=((a={})["@firebase/app"]="fire-core",a["@firebase/analytics"]="fire-analytics",a["@firebase/auth"]="fire-auth",a["@firebase/database"]="fire-rtdb",a["@firebase/functions"]="fire-fn",a["@firebase/installations"]="fire-iid",a["@firebase/messaging"]="fire-fcm",a["@firebase/performance"]="fire-perf",a["@firebase/remote-config"]="fire-rc",a["@firebase/storage"]="fire-gcs",a["@firebase/firestore"]="fire-fst",a["fire-js"]="fire-js",a["firebase-wrapper"]="fire-js-all",a),p=new c.Logger("@firebase/app"),f=function(){function t(e,t,i){var n,r,a=this;this.firebase_=i,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(e),this.container=new l.ComponentContainer(t.name),this._addComponent(new l.Component("app",(function(){return a}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),u=c.next();!u.done;u=c.next())this._addComponent(u.value)}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},t.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},t.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var v=function e(){var t=function(e){var t={},i=new Map,n={__esModule:!0,initializeApp:function(i,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var a=r;void 0===a.name&&(a.name="[DEFAULT]");var o=a.name;if("string"!=typeof o||!o)throw h.create("bad-app-name",{appName:String(o)});if(s.contains(t,o))throw h.create("duplicate-app",{appName:o});var l=new e(i,a,n);return t[o]=l,l},app:r,registerVersion:function(e,t,i){var n,r=null!==(n=d[e])&&void 0!==n?n:e;i&&(r+="-"+i);var o=r.match(/\s|\//),s=t.match(/\s|\//);if(o||s){var c=['Unable to register library "'+r+'" with version "'+t+'":'];return o&&c.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),o&&s&&c.push("and"),s&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}a(new l.Component(r+"-version",(function(){return{library:r,version:t}}),"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw h.create("invalid-log-argument",{appName:name});c.setUserLogHandler(e,t)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:a,removeApp:function(e){delete t[e]},components:i,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function r(e){if(!s.contains(t,e=e||"[DEFAULT]"))throw h.create("no-app",{appName:e});return t[e]}function a(a){var l,c,u=a.name;if(i.has(u))return p.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===a.type?n[u]:null;if(i.set(u,a),"PUBLIC"===a.type){var d=function(e){if(void 0===e&&(e=r()),"function"!=typeof e[u])throw h.create("invalid-app-argument",{appName:u});return e[u]()};void 0!==a.serviceProps&&s.deepExtend(d,a.serviceProps),n[u]=d,e.prototype[u]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this._getService.bind(this,u);return i.apply(this,a.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),v=f.next();!v.done;v=f.next())t[v.value]._addComponent(a)}catch(m){l={error:m}}finally{try{v&&!v.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}return"PUBLIC"===a.type?n[u]:null}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),r.App=e,n}(f);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){s.deepExtend(t,e)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),t}(),m=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(s.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var b=v;!function(e,t){e.INTERNAL.registerComponent(new l.Component("platform-logger",(function(e){return new m(e)}),"PRIVATE")),e.registerVersion("@firebase/app","0.6.11",void 0),e.registerVersion("fire-js","")}(b),i.default=b,i.firebase=b},woL0:function(e,t,i){"use strict";var n=i("JYLm"),r={},a=!1,o=global.chrome&&global.chrome.app&&global.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==global.addEventListener?global.addEventListener(e,t,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+e,t),global.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==global.addEventListener?global.removeEventListener(e,t,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+e,t),global.detachEvent("on"+e,t))},unloadAdd:function(e){if(o)return null;var t=n.string(8);return r[t]=e,a&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in r&&delete r[e]},triggerUnloadCallbacks:function(){for(var e in r)r[e](),delete r[e]}},o||e.exports.attachEvent("unload",(function(){a||(a=!0,e.exports.triggerUnloadCallbacks())}))},xSnx:function(e,t,i){"use strict";var n=i("P7XM"),r=i("raCH").EventEmitter,a=i("kwwM"),o=i("c6pU"),s=i("ibx3");function l(e){var t=this;r.call(this),this.ir=new s(e,o),this.ir.once("finish",(function(e,i){t.ir=null,t.emit("message",a.stringify([e,i]))}))}n(l,r),l.transportName="iframe-info-receiver",l.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=l},yjSe:function(e,t){e.exports=global.EventSource},"z+YZ":function(e,t,i){"use strict";e.exports.randomBytes=global.crypto&&global.crypto.getRandomValues?function(e){var t=new Uint8Array(e);return global.crypto.getRandomValues(t),t}:function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=Math.floor(256*Math.random());return t}},zH15:function(e,t,i){"use strict";var n=i("aUWK");e.exports=i("SGzc")(n),"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)},zUnb:function(t,i,n){"use strict";function r(e){return"function"==typeof e}n.r(i);var a=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=e},get useDeprecatedSynchronousErrorHandling(){return a}};function s(e){setTimeout((function(){throw e}),0)}var l={closed:!0,next:function(e){},error:function(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete:function(){}},c=Array.isArray||function(e){return e&&"number"==typeof e.length};function u(e){return null!==e&&"object"==typeof e}var h,d=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),p=((h=function(){function t(e){_classCallCheck2(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return _createClass(t,[{key:"unsubscribe",value:function(){var i;if(!this.closed){var n=this._parentOrParents,a=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s)n[s].remove(this);if(r(a))try{a.call(this)}catch(e){i=e instanceof d?f(e.errors):[e]}if(c(o))for(var l=-1,h=o.length;++l<h;){var p=o[l];if(u(p))try{p.unsubscribe()}catch(e){i=i||[],e instanceof d?i=i.concat(f(e.errors)):i.push(e)}}if(i)throw new d(i)}}},{key:"add",value:function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=i._parentOrParents;if(null===r)i._parentOrParents=this;else if(r instanceof t){if(r===this)return i;i._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return i;r.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[i]:a.push(i),i}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}}}]),t}()).EMPTY=function(e){return e.closed=!0,e}(new h),h);function f(e){return e.reduce((function(e,t){return e.concat(t instanceof d?t.errors:t)}),[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),m=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;switch(_classCallCheck2(this,i),(a=t.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=l;break;case 1:if(!e){a.destination=l;break}if("object"==typeof e){e instanceof i?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(_assertThisInitialized(a))):(a.syncErrorThrowable=!0,a.destination=new g(_assertThisInitialized(a),e));break}default:a.syncErrorThrowable=!0,a.destination=new g(_assertThisInitialized(a),e,n,r)}return a}return _createClass(i,[{key:v,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(i.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var r=new i(e,t,n);return r.syncErrorThrowable=!1,r}}]),i}(p),g=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,a,o){var s,c;_classCallCheck2(this,i),(s=t.call(this))._parentSubscriber=e;var u=_assertThisInitialized(s);return r(n)?c=n:n&&(c=n.next,a=n.error,o=n.complete,n!==l&&(r((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(_assertThisInitialized(s)))),s._context=u,s._next=c,s._error=a,s._complete=o,s}return _createClass(i,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,i=o.useDeprecatedSynchronousErrorHandling;if(this._error)i&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)i?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;s(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(i){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw i;s(i)}}},{key:"__tryOrSetError",value:function(e,t,i){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,i)}catch(n){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(s(n),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),i}(m),y="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(e){return e}function k(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return C(t)}function C(e){return 0===e.length?b:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var w,_=((w=function(){function e(t){_classCallCheck2(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var i=new e;return i.source=this,i.operator=t,i}},{key:"subscribe",value:function(e,t,i){var n=this.operator,r=function(e,t,i){if(e){if(e instanceof m)return e;if(e[v])return e[v]()}return e||t||i?new m(e,t,i):new m(l)}(e,t,i);if(r.add(n?n.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,i=t.closed,n=t.destination,r=t.isStopped;if(i||r)return!1;e=n&&n instanceof m?n:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var i=this;return new(t=S(t))((function(t,n){var r;r=i.subscribe((function(t){try{e(t)}catch(i){n(i),r&&r.unsubscribe()}}),n,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:y,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?this:C(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=S(e))((function(e,i){var n;t.subscribe((function(e){return n=e}),(function(e){return i(e)}),(function(){return e(n)}))}))}}]),e}()).create=function(e){return new w(e)},w);function S(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var E,T=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),A=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this)).subject=e,r.subscriber=n,r.closed=!1,r}return _createClass(i,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}}}]),i}(p),O=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).destination=e,n}return i}(m),x=((E=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck2(this,i),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _createClass(i,[{key:v,value:function(){return new O(this)}},{key:"lift",value:function(e){var t=new I(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new T;if(!this.isStopped)for(var t=this.observers,i=t.length,n=t.slice(),r=0;r<i;r++)n[r].next(e)}},{key:"error",value:function(e){if(this.closed)throw new T;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,n=t.slice(),r=0;r<i;r++)n[r].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new T;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),n=0;n<t;n++)i[n].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new T;return _get(_getPrototypeOf(i.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new T;return this.hasError?(e.error(this.thrownError),p.EMPTY):this.isStopped?(e.complete(),p.EMPTY):(this.observers.push(e),new A(this,e))}},{key:"asObservable",value:function(){var e=new _;return e.source=this,e}}]),i}(_)).create=function(e,t){return new I(e,t)},E),I=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this)).destination=e,r.source=n,r}return _createClass(i,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):p.EMPTY}}]),i}(x);function D(e){return e&&"function"==typeof e.schedule}var R=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this)).parent=e,a.outerValue=n,a.outerIndex=r,a.index=0,a}return _createClass(i,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),i}(m),P=function(e){return function(t){for(var i=0,n=e.length;i<n&&!t.closed;i++)t.next(e[i]);t.complete()}};var M="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",L=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function N(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var F=function(e){if(e&&"function"==typeof e[y])return n=e,function(e){var t=n[y]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(L(e))return P(e);if(N(e))return i=e,function(e){return i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,s),e};if(e&&"function"==typeof e[M])return t=e,function(e){for(var i=t[M]();;){var n=i.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof i.return&&e.add((function(){i.return&&i.return()})),e};var t,i,n,r=u(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(r," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function B(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new R(e,i,n);if(!r.closed)return t instanceof _?t.subscribe(r):F(t)(r)}var V=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"notifyNext",value:function(e,t,i,n,r){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),i}(m);function j(e,t){return function(i){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new H(e,t))}}var H=function(){function e(t,i){_classCallCheck2(this,e),this.project=t,this.thisArg=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new U(e,this.project,this.thisArg))}}]),e}(),U=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e)).project=n,a.count=0,a.thisArg=r||_assertThisInitialized(a),a}return _createClass(i,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}]),i}(m);function q(e,t){return new _((function(i){var n=new p,r=0;return n.add(t.schedule((function(){r!==e.length?(i.next(e[r++]),i.closed||n.add(this.schedule())):i.complete()}))),n}))}function W(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[y]}(e))return function(e,t){return new _((function(i){var n=new p;return n.add(t.schedule((function(){var r=e[y]();n.add(r.subscribe({next:function(e){n.add(t.schedule((function(){return i.next(e)})))},error:function(e){n.add(t.schedule((function(){return i.error(e)})))},complete:function(){n.add(t.schedule((function(){return i.complete()})))}}))}))),n}))}(e,t);if(N(e))return function(e,t){return new _((function(i){var n=new p;return n.add(t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){i.next(e),n.add(t.schedule((function(){return i.complete()})))})))}),(function(e){n.add(t.schedule((function(){return i.error(e)})))}))}))),n}))}(e,t);if(L(e))return q(e,t);if(function(e){return e&&"function"==typeof e[M]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _((function(i){var n,r=new p;return r.add((function(){n&&"function"==typeof n.return&&n.return()})),r.add(t.schedule((function(){n=e[M](),r.add(t.schedule((function(){if(!i.closed){var e,t;try{var r=n.next();e=r.value,t=r.done}catch(a){return void i.error(a)}t?i.complete():(i.next(e),this.schedule())}})))}))),r}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof _?e:new _(F(e))}function z(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(n){return n.pipe(z((function(i,n){return W(e(i,n)).pipe(j((function(e,r){return t(i,e,n,r)})))}),i))}:("number"==typeof t&&(i=t),function(t){return t.lift(new G(e,i))})}var G=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck2(this,e),this.project=t,this.concurrent=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Y(e,this.project,this.concurrent))}}]),e}(),Y=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck2(this,i),(r=t.call(this,e)).project=n,r.concurrent=a,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return _createClass(i,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,i)}},{key:"_innerSub",value:function(e,t,i){var n=new R(this,t,i),r=this.destination;r.add(n);var a=B(this,e,void 0,void 0,n);a!==n&&r.add(a)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,i,n,r){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),i}(V);function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return z(b,e)}function X(e,t){return t?q(e,t):new _(P(e))}function J(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Number.POSITIVE_INFINITY,r=null,a=t[t.length-1];return D(a)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof a&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof _?t[0]:K(n)(X(t,r))}function Q(){return function(e){return e.lift(new $(e))}}var Z,$=function(){function e(t){_classCallCheck2(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var i=this.connectable;i._refCount++;var n=new ee(e,i),r=t.subscribe(n);return n.closed||(n.connection=i.connect()),r}}]),e}(),ee=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).connectable=n,r}return _createClass(i,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var i=this.connection,n=e._connection;this.connection=null,!n||i&&n!==i||n.unsubscribe()}}else this.connection=null}}]),i}(m),te={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(Z=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this)).source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return _createClass(i,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new p).add(this.source.subscribe(new ie(this.getSubject(),this))),e.closed&&(this._connection=null,e=p.EMPTY)),e}},{key:"refCount",value:function(){return Q()(this)}}]),i}(_).prototype)._subscribe},_isComplete:{value:Z._isComplete,writable:!0},getSubject:{value:Z.getSubject},connect:{value:Z.connect},refCount:{value:Z.refCount}},ie=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).connectable=n,r}return _createClass(i,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(i.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(i.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),i}(O);function ne(){return new x}function re(e){return{toString:e}.toString()}function ae(e,t,i){return re((function(){var n=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var i in t)this[i]=t[i]}}}(t);function r(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this instanceof r)return n.apply(this,t),this;var a=_construct(r,t);return o.annotation=a,o;function o(e,t,i){for(var n=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;n.length<=i;)n.push(null);return(n[i]=n[i]||[]).push(a),e}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}))}var oe=ae("Inject",(function(e){return{token:e}})),se=ae("Optional"),le=ae("Self"),ce=ae("SkipSelf"),ue=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function he(e){for(var t in e)if(e[t]===he)return t;throw Error("Could not find renamed property on target object.")}function de(e,t){for(var i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}var fe=pe;function ve(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function me(e){return ge(e,e[be])||ge(e,e[we])}function ge(e,t){return t&&t.token===e?t:null}function ye(e){return e&&(e.hasOwnProperty(ke)||e.hasOwnProperty(_e))?e[ke]:null}var be=he({"\u0275prov":he}),ke=he({"\u0275inj":he}),Ce=he({"\u0275provFallback":he}),we=he({ngInjectableDef:he}),_e=he({ngInjectorDef:he});function Se(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Se).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var i=t.indexOf("\n");return-1===i?t:t.substring(0,i)}function Ee(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var Te=he({__forward_ref__:he});function Ae(e){return e.__forward_ref__=Ae,e.toString=function(){return Se(this())},e}function Oe(e){return xe(e)?e():e}function xe(e){return"function"==typeof e&&e.hasOwnProperty(Te)&&e.__forward_ref__===Ae}var Ie,De="undefined"!=typeof globalThis&&globalThis,Re="undefined"!=typeof window&&window,Pe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Me="undefined"!=typeof global&&global,Le=De||Me||Re||Pe,Ne=he({"\u0275cmp":he}),Fe=he({"\u0275dir":he}),Be=he({"\u0275pipe":he}),Ve=he({"\u0275mod":he}),je=he({"\u0275loc":he}),He=he({"\u0275fac":he}),Ue=he({__NG_ELEMENT_ID__:he}),qe=function(){function e(t,i){_classCallCheck2(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=pe({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),We=new qe("INJECTOR",-1),ze={},Ge=/\n/gm,Ye=he({provide:String,useValue:he}),Ke=void 0;function Xe(e){var t=Ke;return Ke=e,t}function Je(e){var t=Ie;return Ie=e,t}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default;if(void 0===Ke)throw new Error("inject() must be called from an injection context");return null===Ke?et(e,void 0,t):Ke.get(e,t&ue.Optional?null:void 0,t)}function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default;return(Ie||Qe)(Oe(e),t)}var $e=Ze;function et(e,t,i){var n=me(e);if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(i&ue.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(Se(e),"]"))}function tt(e){for(var t=[],i=0;i<e.length;i++){var n=Oe(e[i]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");for(var r=void 0,a=ue.Default,o=0;o<n.length;o++){var s=n[o];s instanceof se||"Optional"===s.ngMetadataName||s===se?a|=ue.Optional:s instanceof ce||"SkipSelf"===s.ngMetadataName||s===ce?a|=ue.SkipSelf:s instanceof le||"Self"===s.ngMetadataName||s===le?a|=ue.Self:r=s instanceof oe||s===oe?s.token:s}t.push(Ze(r,a))}else t.push(Ze(n))}return t}var it=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ze;if(t===ze){var i=new Error("NullInjectorError: No provider for ".concat(Se(e),"!"));throw i.name="NullInjectorError",i}return t}}]),e}(),nt=function e(){_classCallCheck2(this,e)},rt=function e(){_classCallCheck2(this,e)};function at(e,t){e.forEach((function(e){return Array.isArray(e)?at(e,t):t(e)}))}function ot(e,t,i){t>=e.length?e.push(i):e.splice(t,0,i)}function st(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function lt(e,t){for(var i=[],n=0;n<e;n++)i.push(t);return i}function ct(e,t,i){var n=ht(e,t);return n>=0?e[1|n]=i:function(e,t,i,n){var r=e.length;if(r==t)e.push(i,n);else if(1===r)e.push(n,e[0]),e[0]=i;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=i,e[t+1]=n}}(e,n=~n,t,i),n}function ut(e,t){var i=ht(e,t);if(i>=0)return e[1|i]}function ht(e,t){return function(e,t,i){for(var n=0,r=e.length>>1;r!==n;){var a=n+(r-n>>1),o=e[a<<1];if(t===o)return a<<1;o>t?r=a:n=a+1}return~(r<<1)}(e,t)}var dt=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),pt=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),ft={},vt=[],mt=0;function gt(e){return re((function(){var t=e.type,i=t.prototype,n={},r={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:i.ngOnInit||null,doCheck:i.ngDoCheck||null,afterContentInit:i.ngAfterContentInit||null,afterContentChecked:i.ngAfterContentChecked||null,afterViewInit:i.ngAfterViewInit||null,afterViewChecked:i.ngAfterViewChecked||null,onDestroy:i.ngOnDestroy||null,onPush:e.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||vt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||pt.Emulated,id:"c",styles:e.styles||vt,_:null,setInput:null,schemas:e.schemas||null,tView:null},a=e.directives,o=e.features,s=e.pipes;return r.id+=mt++,r.inputs=wt(e.inputs,n),r.outputs=wt(e.outputs),o&&o.forEach((function(e){return e(r)})),r.directiveDefs=a?function(){return("function"==typeof a?a():a).map(yt)}:null,r.pipeDefs=s?function(){return("function"==typeof s?s():s).map(bt)}:null,r}))}function yt(e){return Et(e)||function(e){return e[Fe]||null}(e)}function bt(e){return function(e){return e[Be]||null}(e)}var kt={};function Ct(e){var t={type:e.type,bootstrap:e.bootstrap||vt,declarations:e.declarations||vt,imports:e.imports||vt,exports:e.exports||vt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&re((function(){kt[e.id]=e.type})),t}function wt(e,t){if(null==e)return ft;var i={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),i[r]=n,t&&(t[r]=a)}return i}var _t=gt;function St(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Et(e){return e[Ne]||null}function Tt(e,t){return e.hasOwnProperty(He)?e[He]:null}function At(e,t){var i=e[Ve]||null;if(!i&&!0===t)throw new Error("Type ".concat(Se(e)," does not have '\u0275mod' property."));return i}function Ot(e){return Array.isArray(e)&&"object"==typeof e[1]}function xt(e){return Array.isArray(e)&&!0===e[1]}function It(e){return 0!=(8&e.flags)}function Dt(e){return 2==(2&e.flags)}function Rt(e){return 1==(1&e.flags)}function Pt(e){return null!==e.template}function Mt(e){return 0!=(512&e[2])}var Lt=void 0;function Nt(){return void 0!==Lt?Lt:"undefined"!=typeof document?document:void 0}function Ft(e){return!!e.listen}var Bt={createRenderer:function(e,t){return Nt()}};function Vt(e){for(;Array.isArray(e);)e=e[0];return e}function jt(e,t){return Vt(t[e+20])}function Ht(e,t){return Vt(t[e.index])}function Ut(e,t){return e.data[t+20]}function qt(e,t){return e[t+20]}function Wt(e,t){var i=t[e];return Ot(i)?i:i[0]}function zt(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Gt(e){return 4==(4&e[2])}function Yt(e){return 128==(128&e[2])}function Kt(e,t){return null===e||null==t?null:e[t]}function Xt(e){e[18]=0}function Jt(e,t){e[5]+=t;for(var i=e,n=e[3];null!==n&&(1===t&&1===i[5]||-1===t&&0===i[5]);)n[5]+=t,i=n,n=n[3]}var Qt={lFrame:ki(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Zt(){return Qt.bindingsEnabled}function $t(){return Qt.lFrame.lView}function ei(){return Qt.lFrame.tView}function ti(e){Qt.lFrame.contextLView=e}function ii(){return Qt.lFrame.previousOrParentTNode}function ni(e,t){Qt.lFrame.previousOrParentTNode=e,Qt.lFrame.isParent=t}function ri(){return Qt.lFrame.isParent}function ai(){Qt.lFrame.isParent=!1}function oi(){return Qt.checkNoChangesMode}function si(e){Qt.checkNoChangesMode=e}function li(){var e=Qt.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ci(){return Qt.lFrame.bindingIndex}function ui(){return Qt.lFrame.bindingIndex++}function hi(e){var t=Qt.lFrame,i=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,i}function di(e,t){var i=Qt.lFrame;i.bindingIndex=i.bindingRootIndex=e,pi(t)}function pi(e){Qt.lFrame.currentDirectiveIndex=e}function fi(e){var t=Qt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function vi(){return Qt.lFrame.currentQueryIndex}function mi(e){Qt.lFrame.currentQueryIndex=e}function gi(e,t){var i=bi();Qt.lFrame=i,i.previousOrParentTNode=t,i.lView=e}function yi(e,t){var i=bi(),n=e[1];Qt.lFrame=i,i.previousOrParentTNode=t,i.lView=e,i.tView=n,i.contextLView=e,i.bindingIndex=n.bindingStartIndex}function bi(){var e=Qt.lFrame,t=null===e?null:e.child;return null===t?ki(e):t}function ki(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function Ci(){var e=Qt.lFrame;return Qt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var wi=Ci;function _i(){var e=Ci();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Si(){return Qt.lFrame.selectedIndex}function Ei(e){Qt.lFrame.selectedIndex=e}function Ti(){var e=Qt.lFrame;return Ut(e.tView,e.selectedIndex)}function Ai(e,t){for(var i=t.directiveStart,n=t.directiveEnd;i<n;i++){var r=e.data[i];r.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-i,r.afterContentInit),r.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(i,r.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(i,r.afterContentChecked)),r.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-i,r.afterViewInit),r.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(i,r.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(i,r.afterViewChecked)),null!=r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(i,r.onDestroy)}}function Oi(e,t,i){Di(e,t,3,i)}function xi(e,t,i,n){(3&e[2])===i&&Di(e,t,i,n)}function Ii(e,t){var i=e[2];(3&i)===t&&(i&=2047,i+=1,e[2]=i)}function Di(e,t,i,n){for(var r=null!=n?n:-1,a=0,o=void 0!==n?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(a=t[o],null!=n&&a>=n)break}else t[o]<0&&(e[18]+=65536),(a<r||-1==r)&&(Ri(e,i,t,o),e[18]=(4294901760&e[18])+o+2),o++}function Ri(e,t,i,n){var r=i[n]<0,a=i[n+1],o=e[r?-i[n]:i[n]];r?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,a.call(o)):a.call(o)}var Pi=function e(t,i,n){_classCallCheck2(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=n};function Mi(e,t,i){for(var n=Ft(e),r=0;r<i.length;){var a=i[r];if("number"==typeof a){if(0!==a)break;r++;var o=i[r++],s=i[r++],l=i[r++];n?e.setAttribute(t,s,l,o):t.setAttributeNS(o,s,l)}else{var c=a,u=i[++r];Ni(c)?n&&e.setProperty(t,c,u):n?e.setAttribute(t,c,u):t.setAttribute(c,u),r++}}return r}function Li(e){return 3===e||4===e||6===e}function Ni(e){return 64===e.charCodeAt(0)}function Fi(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var i=-1,n=0;n<t.length;n++){var r=t[n];"number"==typeof r?i=r:0===i||Bi(e,i,r,null,-1===i||2===i?t[++n]:null)}return e}function Bi(e,t,i,n,r){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var l=e[a];if("number"==typeof l)break;if(l===i){if(null===n)return void(null!==r&&(e[a+1]=r));if(n===e[a+1])return void(e[a+2]=r)}a++,null!==n&&a++,null!==r&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,i),null!==n&&e.splice(a++,0,n),null!==r&&e.splice(a++,0,r)}function Vi(e){return-1!==e}function ji(e){return 32767&e}function Hi(e){return e>>16}function Ui(e,t){for(var i=Hi(e),n=t;i>0;)n=n[15],i--;return n}function qi(e){return"string"==typeof e?e:null==e?"":""+e}function Wi(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():qi(e)}var zi=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Le);function Gi(e){return{name:"window",target:e.ownerDocument.defaultView}}function Yi(e){return{name:"document",target:e.ownerDocument}}function Ki(e){return e instanceof Function?e():e}var Xi=!0;function Ji(e){var t=Xi;return Xi=e,t}var Qi=0;function Zi(e,t){var i=en(e,t);if(-1!==i)return i;var n=t[1];n.firstCreatePass&&(e.injectorIndex=t.length,$i(n.data,e),$i(t,null),$i(n.blueprint,null));var r=tn(e,t),a=e.injectorIndex;if(Vi(r))for(var o=ji(r),s=Ui(r,t),l=s[1].data,c=0;c<8;c++)t[a+c]=s[o+c]|l[o+c];return t[a+8]=r,a}function $i(e,t){e.push(0,0,0,0,0,0,0,0,t)}function en(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function tn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var i=t[6],n=1;i&&-1===i.injectorIndex;)i=(t=t[15])?t[6]:null,n++;return i?i.injectorIndex|n<<16:-1}function nn(e,t,i){!function(e,t,i){var n="string"!=typeof i?i[Ue]:i.charCodeAt(0)||0;null==n&&(n=i[Ue]=Qi++);var r=255&n,a=1<<r,o=64&r,s=32&r,l=t.data;128&r?o?s?l[e+7]|=a:l[e+6]|=a:s?l[e+5]|=a:l[e+4]|=a:o?s?l[e+3]|=a:l[e+2]|=a:s?l[e+1]|=a:l[e]|=a}(e,t,i)}function rn(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue.Default,r=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[Ue];return"number"==typeof t&&t>0?255&t:t}(i);if("function"==typeof a){gi(t,e);try{var o=a();if(null!=o||n&ue.Optional)return o;throw new Error("No provider for ".concat(Wi(i),"!"))}finally{wi()}}else if("number"==typeof a){if(-1===a)return new hn(e,t);var s=null,l=en(e,t),c=-1,u=n&ue.Host?t[16][6]:null;for((-1===l||n&ue.SkipSelf)&&(c=-1===l?tn(e,t):t[l+8],un(n,!1)?(s=t[1],l=ji(c),t=Ui(c,t)):l=-1);-1!==l;){c=t[l+8];var h=t[1];if(cn(a,l,h.data)){var d=on(l,t,i,s,n,u);if(d!==an)return d}un(n,t[1].data[l+8]===u)&&cn(a,l,t)?(s=h,l=ji(c),t=Ui(c,t)):l=-1}}}if(n&ue.Optional&&void 0===r&&(r=null),0==(n&(ue.Self|ue.Host))){var p=t[9],f=Je(void 0);try{return p?p.get(i,r,n&ue.Optional):et(i,r,n&ue.Optional)}finally{Je(f)}}if(n&ue.Optional)return r;throw new Error("NodeInjector: NOT_FOUND [".concat(Wi(i),"]"))}var an={};function on(e,t,i,n,r,a){var o=t[1],s=o.data[e+8],l=sn(s,o,i,null==n?Dt(s)&&Xi:n!=o&&3===s.type,r&ue.Host&&a===s);return null!==l?ln(t,o,l,s):an}function sn(e,t,i,n,r){for(var a=e.providerIndexes,o=t.data,s=65535&a,l=e.directiveStart,c=a>>16,u=r?s+c:e.directiveEnd,h=n?s:s+c;h<u;h++){var d=o[h];if(h<l&&i===d||h>=l&&d.type===i)return h}if(r){var p=o[l];if(p&&Pt(p)&&p.type===i)return l}return null}function ln(e,t,i,n){var r=e[i],a=t.data;if(r instanceof Pi){var o=r;if(o.resolving)throw new Error("Circular dep for "+Wi(a[i]));var s,l=Ji(o.canSeeViewProviders);o.resolving=!0,o.injectImpl&&(s=Je(o.injectImpl)),gi(e,n);try{r=e[i]=o.factory(void 0,a,e,n),t.firstCreatePass&&i>=n.directiveStart&&function(e,t,i){var n=t.onChanges,r=t.onInit,a=t.doCheck;n&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e,n),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e,n)),r&&(i.preOrderHooks||(i.preOrderHooks=[])).push(-e,r),a&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e,a),(i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e,a))}(i,a[i],t)}finally{o.injectImpl&&Je(s),Ji(l),o.resolving=!1,wi()}}return r}function cn(e,t,i){var n=64&e,r=32&e;return!!((128&e?n?r?i[t+7]:i[t+6]:r?i[t+5]:i[t+4]:n?r?i[t+3]:i[t+2]:r?i[t+1]:i[t])&1<<e)}function un(e,t){return!(e&ue.Self||e&ue.Host&&t)}var hn=function(){function e(t,i){_classCallCheck2(this,e),this._tNode=t,this._lView=i}return _createClass(e,[{key:"get",value:function(e,t){return rn(this._tNode,this._lView,e,void 0,t)}}]),e}();function dn(e){var t=e;if(xe(e))return function(){var e=dn(Oe(t));return e?e():null};var i=Tt(t);if(null===i){var n=ye(t);i=n&&n.factory}return i||null}function pn(e){return re((function(){for(var t=e.prototype.constructor,i=t[He]||dn(t),n=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;r&&r!==n;){var a=r[He]||dn(r);if(a&&a!==i)return a;r=Object.getPrototypeOf(r)}return function(e){return new e}}))}function fn(e){return e.ngDebugContext}function vn(e){return e.ngOriginalError}function mn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];e.error.apply(e,i)}var gn=function(){function e(){_classCallCheck2(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),i=this._findContext(e),n=function(e){return e.ngErrorLogger||mn}(e);n(this._console,"ERROR",e),t&&n(this._console,"ORIGINAL ERROR",t),i&&n(this._console,"ERROR CONTEXT",i)}},{key:"_findContext",value:function(e){return e?fn(e)?fn(e):this._findContext(vn(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=vn(e);t&&vn(t);)t=vn(t);return t}}]),e}(),yn=function(){function e(t){_classCallCheck2(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),e}(),bn=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"getTypeName",value:function(){return"HTML"}}]),i}(yn),kn=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"getTypeName",value:function(){return"Style"}}]),i}(yn),Cn=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"getTypeName",value:function(){return"Script"}}]),i}(yn),wn=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"getTypeName",value:function(){return"URL"}}]),i}(yn),_n=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),i}(yn);function Sn(e){return e instanceof yn?e.changingThisBreaksApplicationSecurity:e}function En(e,t){var i=Tn(e);if(null!=i&&i!==t){if("ResourceURL"===i&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(i," (see http://g.co/ng/security#xss)"))}return i===t}function Tn(e){return e instanceof yn&&e.getTypeName()||null}var An=!0,On=!1;function xn(){return On=!0,An}var In=function(){function e(t){_classCallCheck2(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");var i=this.inertDocument.body;if(null==i){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),i=this.inertDocument.createElement("body"),n.appendChild(i)}i.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!i.querySelector||i.querySelector("svg")?(i.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=i.querySelector&&i.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(n){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var i=t.response.body;return i.removeChild(i.firstChild),i}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(i){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=e,t;var i=this.inertDocument.createElement("body");return i.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,i=t.length-1;0<i;i--){var n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}for(var r=e.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}]),e}(),Dn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pn(e){return(e=String(e)).match(Dn)||e.match(Rn)?e:(xn()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function Mn(e){var t,i={},n=_createForOfIteratorHelper(e.split(","));try{for(n.s();!(t=n.n()).done;){i[t.value]=!0}}catch(r){n.e(r)}finally{n.f()}return i}function Ln(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(var r=0,a=i;r<a.length;r++){var o=a[r];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var Nn,Fn=Mn("area,br,col,hr,img,wbr"),Bn=Mn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vn=Mn("rp,rt"),jn=Ln(Vn,Bn),Hn=Ln(Fn,Ln(Bn,Mn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ln(Vn,Mn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jn),Un=Mn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qn=Mn("srcset"),Wn=Ln(Un,qn,Mn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),zn=Mn("script,style,template"),Gn=function(){function e(){_classCallCheck2(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,i=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var n=this.checkClobberedElement(t,t.nextSibling);if(n){t=n;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!Hn.hasOwnProperty(t))return this.sanitizedSomething=!0,!zn.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var i,n=e.attributes,r=0;r<n.length;r++){var a=n.item(r),o=a.name,s=o.toLowerCase();if(Wn.hasOwnProperty(s)){var l=a.value;Un[s]&&(l=Pn(l)),qn[s]&&(i=l,l=(i=String(i)).split(",").map((function(e){return Pn(e.trim())})).join(", ")),this.buf.push(" ",o,'="',Xn(l),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();Hn.hasOwnProperty(t)&&!Fn.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Xn(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t}}]),e}(),Yn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kn=/([^\#-~ |!])/g;function Xn(e){return e.replace(/&/g,"&amp;").replace(Yn,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(Kn,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Jn(e,t){var i=null;try{Nn=Nn||new In(e);var n=t?String(t):"";i=Nn.getInertBodyElement(n);var r=5,a=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=a,a=i.innerHTML,i=Nn.getInertBodyElement(n)}while(n!==a);var o=new Gn,s=o.sanitizeChildren(Qn(i)||i);return xn()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(i)for(var l=Qn(i)||i;l.firstChild;)l.removeChild(l.firstChild)}}function Qn(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Zn=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),$n=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),er=/^url\(([^)]+)\)$/;function tr(e){var t=nr();return t?t.sanitize(Zn.HTML,e)||"":En(e,"HTML")?Sn(e):Jn(Nt(),qi(e))}function ir(e){var t=nr();return t?t.sanitize(Zn.URL,e)||"":En(e,"URL")?Sn(e):Pn(qi(e))}function nr(){var e=$t();return e&&e[12]}function rr(e,t){e.__ngContext__=t}function ar(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function or(){throw new Error("Cannot mix multi providers and regular providers")}function sr(e,t,i){for(var n=e.length;;){var r=e.indexOf(t,i);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){var a=t.length;if(r+a===n||e.charCodeAt(r+a)<=32)return r}i=r+1}}function lr(e,t,i){for(var n=0;n<e.length;){var r=e[n++];if(i&&"class"===r){if(-1!==sr((r=e[n]).toLowerCase(),t,0))return!0}else if(1===r){for(;n<e.length&&"string"==typeof(r=e[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function cr(e){return 0===e.type&&"ng-template"!==e.tagName}function ur(e,t,i){return t===(0!==e.type||i?e.tagName:"ng-template")}function hr(e,t,i){for(var n=4,r=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Li(e[t]))return t;return e.length}(r),o=!1,s=0;s<t.length;s++){var l=t[s];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!ur(e,l,i)||""===l&&1===t.length){if(dr(n))return!1;o=!0}}else{var c=8&n?l:t[++s];if(8&n&&null!==e.attrs){if(!lr(e.attrs,c,i)){if(dr(n))return!1;o=!0}continue}var u=pr(8&n?"class":l,r,cr(e),i);if(-1===u){if(dr(n))return!1;o=!0;continue}if(""!==c){var h;h=u>a?"":r[u+1].toLowerCase();var d=8&n?h:null;if(d&&-1!==sr(d,c,0)||2&n&&c!==h){if(dr(n))return!1;o=!0}}}}else{if(!o&&!dr(n)&&!dr(l))return!1;if(o&&dr(l))continue;o=!1,n=l|1&n}}return dr(n)||o}function dr(e){return 0==(1&e)}function pr(e,t,i,n){if(null===t)return-1;var r=0;if(n||!i){for(var a=!1;r<t.length;){var o=t[r];if(o===e)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++r];"string"==typeof s;)s=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function(e,t){var i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){var n=e[i];if("number"==typeof n)return-1;if(n===t)return i;i++}return-1}(t,e)}function fr(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=0;n<t.length;n++)if(hr(e,t[n],i))return!0;return!1}function vr(e,t){e:for(var i=0;i<t.length;i++){var n=t[i];if(e.length===n.length){for(var r=0;r<e.length;r++)if(e[r]!==n[r])continue e;return!0}}return!1}function mr(e,t){return e?":not("+t.trim()+")":t}function gr(e){for(var t=e[0],i=1,n=2,r="",a=!1;i<e.length;){var o=e[i];if("string"==typeof o)if(2&n){var s=e[++i];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""===r||dr(o)||(t+=mr(a,r),r=""),n=o,a=a||!dr(n);i++}return""!==r&&(t+=mr(a,r)),t}var yr={};function br(e){var t=e[3];return xt(t)?t[3]:t}function kr(e){return wr(e[13])}function Cr(e){return wr(e[4])}function wr(e){for(;null!==e&&!xt(e);)e=e[4];return e}function _r(e){Sr(ei(),$t(),Si()+e,oi())}function Sr(e,t,i,n){if(!n)if(3==(3&t[2])){var r=e.preOrderCheckHooks;null!==r&&Oi(t,r,i)}else{var a=e.preOrderHooks;null!==a&&xi(t,a,0,i)}Ei(i)}function Er(e,t){return e<<17|t<<2}function Tr(e){return e>>17&32767}function Ar(e){return 2|e}function Or(e){return(131068&e)>>2}function xr(e,t){return-131069&e|t<<2}function Ir(e){return 1|e}function Dr(e,t){var i=e.contentQueries;if(null!==i)for(var n=0;n<i.length;n+=2){var r=i[n],a=i[n+1];if(-1!==a){var o=e.data[a];mi(r),o.contentQueries(2,t[a],a)}}}function Rr(e,t,i){return Ft(t)?t.createElement(e,i):null===i?t.createElement(e):t.createElementNS(i,e)}function Pr(e,t,i,n,r,a,o,s,l,c){var u=t.blueprint.slice();return u[0]=r,u[2]=140|n,Xt(u),u[3]=u[15]=e,u[8]=i,u[10]=o||e&&e[10],u[11]=s||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=a,u[16]=2==t.type?e[16]:u,u}function Mr(e,t,i,n,r,a){var o=i+20,s=e.data[o]||function(e,t,i,n,r,a){var o=ii(),s=ri(),l=s?o:o&&o.parent,c=e.data[i]=Wr(0,l&&l!==t?l:null,n,i,r,a);return null===e.firstChild&&(e.firstChild=c),o&&(!s||null!=o.child||null===c.parent&&2!==o.type?s||(o.next=c):o.child=c),c}(e,t,o,n,r,a);return ni(s,!0),s}function Lr(e,t,i){yi(t,t[6]);try{var n=e.viewQuery;null!==n&&da(1,n,i);var r=e.template;null!==r&&Br(e,t,r,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Dr(e,t),e.staticViewQueries&&da(2,e.viewQuery,i);var a=e.components;null!==a&&function(e,t){for(var i=0;i<t.length;i++)sa(e,t[i])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,_i()}}function Nr(e,t,i,n){var r=t[2];if(256!=(256&r)){yi(t,t[6]);var a=oi();try{Xt(t),Qt.lFrame.bindingIndex=e.bindingStartIndex,null!==i&&Br(e,t,i,2,n);var o=3==(3&r);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&Oi(t,s,null)}else{var l=e.preOrderHooks;null!==l&&xi(t,l,0,null),Ii(t,0)}if(function(e){for(var t=kr(e);null!==t;t=Cr(t))if(t[2])for(var i=t[9],n=0;n<i.length;n++){var r=i[n],a=r[3];0==(1024&r[2])&&Jt(a,1),r[2]|=1024}}(t),function(e){for(var t=kr(e);null!==t;t=Cr(t))for(var i=10;i<t.length;i++){var n=t[i],r=n[1];Yt(n)&&Nr(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Dr(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&Oi(t,c)}else{var u=e.contentHooks;null!==u&&xi(t,u,1),Ii(t,1)}!function(e,t){try{var i=e.expandoInstructions;if(null!==i)for(var n=e.expandoStartIndex,r=-1,a=0;a<i.length;a++){var o=i[a];"number"==typeof o?o<=0?(Ei(0-o),r=n+=9+i[++a]):n+=o:(null!==o&&(di(n,r),o(2,t[r])),r++)}}finally{Ei(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var i=0;i<t.length;i++)oa(e,t[i])}(t,h);var d=e.viewQuery;if(null!==d&&da(2,d,n),!a)if(o){var p=e.viewCheckHooks;null!==p&&Oi(t,p)}else{var f=e.viewHooks;null!==f&&xi(t,f,2),Ii(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Jt(t[3],-1))}finally{_i()}}}function Fr(e,t,i,n){var r=t[10],a=!oi(),o=Gt(t);try{a&&!o&&r.begin&&r.begin(),o&&Lr(e,t,n),Nr(e,t,i,n)}finally{a&&!o&&r.end&&r.end()}}function Br(e,t,i,n,r){var a=Si();try{Ei(-1),2&n&&t.length>20&&Sr(e,t,0,oi()),i(n,r)}finally{Ei(a)}}function Vr(e,t,i){if(It(t))for(var n=t.directiveEnd,r=t.directiveStart;r<n;r++){var a=e.data[r];a.contentQueries&&a.contentQueries(1,i[r],r)}}function jr(e,t,i){Zt()&&(function(e,t,i,n){var r=i.directiveStart,a=i.directiveEnd;e.firstCreatePass||Zi(i,t),rr(n,t);for(var o=i.initialInputs,s=r;s<a;s++){var l=e.data[s],c=Pt(l);c&&ia(t,i,l);var u=ln(t,e,s,i);rr(u,t),null!==o&&na(0,s-r,u,l,0,o),c&&(Wt(i.index,t)[8]=u)}}(e,t,i,Ht(i,t)),128==(128&i.flags)&&function(e,t,i){var n=i.directiveStart,r=i.directiveEnd,a=e.expandoInstructions,o=e.firstCreatePass,s=i.index-20,l=Qt.lFrame.currentDirectiveIndex;try{Ei(s);for(var c=n;c<r;c++){var u=e.data[c],h=t[c];pi(c),null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs?Jr(u,h):o&&a.push(null)}}finally{Ei(-1),pi(l)}}(e,t,i))}function Hr(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ht,n=t.localNames;if(null!==n)for(var r=t.index+1,a=0;a<n.length;a+=2){var o=n[a+1],s=-1===o?i(t,e):e[o];e[r++]=s}}function Ur(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=qr(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function qr(e,t,i,n,r,a,o,s,l,c){var u=20+n,h=u+r,d=function(e,t){for(var i=[],n=0;n<t;n++)i.push(n<e?null:yr);return i}(u,h);return d[1]={type:e,id:t,blueprint:d,template:i,queries:null,viewQuery:s,node:null,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:c,incompleteFirstPass:!1}}function Wr(e,t,i,n,r,a){return{type:i,index:n,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zr(e,t,i){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];(i=null===i?{}:i).hasOwnProperty(n)?i[n].push(t,r):i[n]=[t,r]}return i}function Gr(e,t,i,n,r,a,o,s){var l,c=Ht(t,i),u=t.inputs;!s&&null!=u&&(l=u[n])?(ya(e,i,l,n,r),Dt(t)&&function(e,t){var i=Wt(t,e);16&i[2]||(i[2]|=64)}(i,t.index)):3===t.type&&(n=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(n),r=null!=o?o(r,t.tagName||"",n):r,Ft(a)?a.setProperty(c,n,r):Ni(n)||(c.setProperty?c.setProperty(n,r):c[n]=r))}function Yr(e,t,i,n){var r=!1;if(Zt()){var a=function(e,t,i){var n=e.directiveRegistry,r=null;if(n)for(var a=0;a<n.length;a++){var o=n[a];fr(i,o.selectors,!1)&&(r||(r=[]),nn(Zi(i,t),e,o.type),Pt(o)?(2&i.flags&&ar(i),Zr(e,i),r.unshift(o)):r.push(o))}return r}(e,t,i),o=null===n?null:{"":-1};if(null!==a){var s=0;r=!0,ea(i,e.data.length,a.length);for(var l=0;l<a.length;l++){var c=a[l];c.providersResolver&&c.providersResolver(c)}Qr(e,i,a.length);for(var u=!1,h=!1,d=0;d<a.length;d++){var p=a[d];i.mergedAttrs=Fi(i.mergedAttrs,p.hostAttrs),ta(e,t,p),$r(e.data.length-1,p,o),null!==p.contentQueries&&(i.flags|=8),null===p.hostBindings&&null===p.hostAttrs&&0===p.hostVars||(i.flags|=128),!u&&(p.onChanges||p.onInit||p.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i.index-20),u=!0),h||!p.onChanges&&!p.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i.index-20),h=!0),Kr(e,p),s+=p.hostVars}!function(e,t){for(var i=t.directiveEnd,n=e.data,r=t.attrs,a=[],o=null,s=null,l=t.directiveStart;l<i;l++){var c=n[l],u=c.inputs,h=null===r||cr(t)?null:ra(u,r);a.push(h),o=zr(u,l,o),s=zr(c.outputs,l,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,i),Xr(e,t,s)}o&&function(e,t,i){if(t)for(var n=e.localNames=[],r=0;r<t.length;r+=2){var a=i[t[r+1]];if(null==a)throw new Error("Export of name '".concat(t[r+1],"' not found!"));n.push(t[r],a)}}(i,n,o)}return i.mergedAttrs=Fi(i.mergedAttrs,i.attrs),r}function Kr(e,t){var i=e.expandoInstructions;i.push(t.hostBindings),0!==t.hostVars&&i.push(t.hostVars)}function Xr(e,t,i){for(var n=0;n<i;n++)t.push(yr),e.blueprint.push(yr),e.data.push(null)}function Jr(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Qr(e,t,i){var n=20-t.index,r=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(n,r,i)}function Zr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function $r(e,t,i){if(i){if(t.exportAs)for(var n=0;n<t.exportAs.length;n++)i[t.exportAs[n]]=e;Pt(t)&&(i[""]=e)}}function ea(e,t,i){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+i,e.providerIndexes=t}function ta(e,t,i){e.data.push(i);var n=i.factory||(i.factory=Tt(i.type)),r=new Pi(n,Pt(i),null);e.blueprint.push(r),t.push(r)}function ia(e,t,i){var n=Ht(t,e),r=Ur(i),a=e[10],o=la(e,Pr(e,r,null,i.onPush?64:16,n,t,a,a.createRenderer(n,i)));e[t.index]=o}function na(e,t,i,n,r,a){var o=a[t];if(null!==o)for(var s=n.setInput,l=0;l<o.length;){var c=o[l++],u=o[l++],h=o[l++];null!==s?n.setInput(i,h,c,u):i[u]=h}}function ra(e,t){for(var i=null,n=0;n<t.length;){var r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===i&&(i=[]),i.push(r,e[r],t[n+1])),n+=2}else n+=2;else n+=4}return i}function aa(e,t,i,n){return new Array(e,!0,!1,t,null,0,n,i,null,null)}function oa(e,t){var i=Wt(t,e);if(Yt(i)){var n=i[1];80&i[2]?Nr(n,i,n.template,i[8]):i[5]>0&&function e(t){for(var i=kr(t);null!==i;i=Cr(i))for(var n=10;n<i.length;n++){var r=i[n];if(1024&r[2]){var a=r[1];Nr(a,r,a.template,r[8])}else r[5]>0&&e(r)}var o=t[1].components;if(null!==o)for(var s=0;s<o.length;s++){var l=Wt(o[s],t);Yt(l)&&l[5]>0&&e(l)}}(i)}}function sa(e,t){var i=Wt(t,e),n=i[1];!function(e,t){for(var i=t.length;i<e.blueprint.length;i++)t.push(e.blueprint[i])}(n,i),Lr(n,i,i[8])}function la(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ca(e){for(;e;){e[2]|=64;var t=br(e);if(Mt(e)&&!t)return e;e=t}return null}function ua(e,t,i){var n=t[10];n.begin&&n.begin();try{Nr(e,t,e.template,i)}catch(r){throw ga(t,r),r}finally{n.end&&n.end()}}function ha(e){!function(e){for(var t=0;t<e.components.length;t++){var i=e.components[t],n=zt(i),r=n[1];Fr(r,n,r.template,i)}}(e[8])}function da(e,t,i){mi(0),t(e,i)}var pa=Promise.resolve(null);function fa(e){return e[7]||(e[7]=[])}function va(e){return e.cleanup||(e.cleanup=[])}function ma(e,t,i){return(null===e||Pt(e))&&(i=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(i[t.index])),i[11]}function ga(e,t){var i=e[9],n=i?i.get(gn,null):null;n&&n.handleError(t)}function ya(e,t,i,n,r){for(var a=0;a<i.length;){var o=i[a++],s=i[a++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,r,n,s):l[s]=r}}function ba(e,t,i){var n=jt(t,e),r=e[11];Ft(r)?r.setValue(n,i):n.textContent=i}function ka(e,t){var i=t[3];return-1===e.index?xt(i)?i:null:i}function Ca(e,t){var i=ka(e,t);return i?Pa(t[11],i[7]):null}function wa(e,t,i,n,r){if(null!=n){var a,o=!1;xt(n)?a=n:Ot(n)&&(o=!0,n=n[0]);var s=Vt(n);0===e&&null!==i?null==r?Da(t,i,s):Ia(t,i,s,r||null):1===e&&null!==i?Ia(t,i,s,r||null):2===e?function(e,t,i){var n=Pa(e,t);n&&function(e,t,i,n){Ft(e)?e.removeChild(t,i,n):t.removeChild(i)}(e,n,t,i)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,i,n,r){var a=i[7];a!==Vt(i)&&wa(t,e,n,a,r);for(var o=10;o<i.length;o++){var s=i[o];Ba(s[1],s,e,t,n,a)}}(t,e,a,i,r)}}function _a(e,t,i,n){var r=Ca(e.node,t);r&&Ba(e,t,t[11],i?1:2,r,n)}function Sa(e,t){var i=e[9],n=i.indexOf(t);1024&t[2]&&Jt(t[3],-1),i.splice(n,1)}function Ea(e,t){if(!(e.length<=10)){var i=10+t,n=e[i];if(n){var r=n[17];null!==r&&r!==e&&Sa(r,n),t>0&&(e[i-1][4]=n[4]);var a=st(e,10+t);_a(n[1],n,!1,null);var o=a[19];null!==o&&o.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}}function Ta(e,t){if(!(256&t[2])){var i=t[11];Ft(i)&&i.destroyNode&&Ba(e,t,i,3,null,null),function(e){var t=e[13];if(!t)return Oa(e[1],e);for(;t;){var i=null;if(Ot(t))i=t[13];else{var n=t[10];n&&(i=n)}if(!i){for(;t&&!t[4]&&t!==e;)Ot(t)&&Oa(t[1],t),t=Aa(t,e);null===t&&(t=e),Ot(t)&&Oa(t[1],t),i=t&&t[4]}t=i}}(t)}}function Aa(e,t){var i;return Ot(e)&&(i=e[6])&&2===i.type?ka(i,e):e[3]===t?null:e[3]}function Oa(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var i;if(null!=e&&null!=(i=e.destroyHooks))for(var n=0;n<i.length;n+=2){var r=t[i[n]];if(!(r instanceof Pi)){var a=i[n+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2)a[o+1].call(r[a[o]]);else a.call(r)}}}(e,t),function(e,t){var i=e.cleanup;if(null!==i){for(var n=t[7],r=0;r<i.length-1;r+=2)if("string"==typeof i[r]){var a=i[r+1],o="function"==typeof a?a(t):Vt(t[a]),s=n[i[r+2]],l=i[r+3];"boolean"==typeof l?o.removeEventListener(i[r],s,l):l>=0?n[l]():n[-l].unsubscribe(),r+=2}else i[r].call(n[i[r+1]]);t[7]=null}}(e,t);var i=t[6];i&&3===i.type&&Ft(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&xt(t[3])){n!==t[3]&&Sa(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function xa(e,t,i){for(var n=t.parent;null!=n&&(4===n.type||5===n.type);)n=(t=n).parent;if(null==n){var r=i[6];return 2===r.type?Ca(r,i):i[0]}if(t&&5===t.type&&4&t.flags)return Ht(t,i).parentNode;if(2&n.flags){var a=e.data,o=a[a[n.index].directiveStart].encapsulation;if(o!==pt.ShadowDom&&o!==pt.Native)return null}return Ht(n,i)}function Ia(e,t,i,n){Ft(e)?e.insertBefore(t,i,n):t.insertBefore(i,n,!0)}function Da(e,t,i){Ft(e)?e.appendChild(t,i):t.appendChild(i)}function Ra(e,t,i,n){null!==n?Ia(e,t,i,n):Da(e,t,i)}function Pa(e,t){return Ft(e)?e.parentNode(t):t.parentNode}function Ma(e,t){if(2===e.type){var i=ka(e,t);return null===i?null:Na(i.indexOf(t,10)-10,i)}return 4===e.type||5===e.type?Ht(e,t):null}function La(e,t,i,n){var r=xa(e,n,t);if(null!=r){var a=t[11],o=Ma(n.parent||t[6],t);if(Array.isArray(i))for(var s=0;s<i.length;s++)Ra(a,r,i[s],o);else Ra(a,r,i,o)}}function Na(e,t){var i=10+e+1;if(i<t.length){var n=t[i],r=n[1].firstChild;if(null!==r)return function e(t,i){if(null!==i){var n=i.type;if(3===n)return Ht(i,t);if(0===n)return Na(-1,t[i.index]);if(4===n||5===n){var r=i.child;if(null!==r)return e(t,r);var a=t[i.index];return xt(a)?Na(-1,a):Vt(a)}var o=t[16],s=o[6],l=br(o),c=s.projection[i.projection];return null!=c?e(l,c):e(t,i.next)}return null}(n,r)}return t[7]}function Fa(e,t,i,n,r,a,o){for(;null!=i;){var s=n[i.index],l=i.type;o&&0===t&&(s&&rr(Vt(s),n),i.flags|=4),64!=(64&i.flags)&&(4===l||5===l?(Fa(e,t,i.child,n,r,a,!1),wa(t,e,r,s,a)):1===l?Va(e,t,n,i,r,a):wa(t,e,r,s,a)),i=o?i.projectionNext:i.next}}function Ba(e,t,i,n,r,a){Fa(i,n,e.node.child,t,r,a,!1)}function Va(e,t,i,n,r,a){var o=i[16],s=o[6].projection[n.projection];if(Array.isArray(s))for(var l=0;l<s.length;l++)wa(t,e,r,s[l],a);else Fa(e,t,s,o[3],r,a,!0)}function ja(e,t,i){Ft(e)?e.setAttribute(t,"style",i):t.style.cssText=i}function Ha(e,t,i){Ft(e)?""===i?e.removeAttribute(t,"class"):e.setAttribute(t,"class",i):t.className=i}var Ua,qa,Wa,za=function(){function e(t,i){_classCallCheck2(this,e),this._lView=t,this._cdRefInjectingView=i,this._appRef=null,this._viewContainerRef=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Ta(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,i,n;t=this._lView[1],n=e,fa(i=this._lView).push(n),t.firstCreatePass&&va(t).push(i[7].length-1,null)}},{key:"markForCheck",value:function(){ca(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ua(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,i){si(!0);try{ua(e,t,i)}finally{si(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,Ba(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,i,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var o=i[n.index];if(null!==o&&r.push(Vt(o)),xt(o))for(var s=10;s<o.length;s++){var l=o[s],c=l[1].firstChild;null!==c&&e(l[1],l,c,r)}var u=n.type;if(4===u||5===u)e(t,i,n.child,r);else if(1===u){var h=i[16],d=h[6].projection[n.projection];if(Array.isArray(d))r.push.apply(r,_toConsumableArray2(d));else{var p=br(h);e(p[1],p,d,r,!0)}}n=a?n.projectionNext:n.next}return r}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),Ga=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e))._view=e,n}return _createClass(i,[{key:"detectChanges",value:function(){ha(this._view)}},{key:"checkNoChanges",value:function(){!function(e){si(!0);try{ha(e)}finally{si(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),i}(za);function Ya(e,t,i){return Ua||(Ua=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(e)),new Ua(Ht(t,i))}function Ka(e,t,i,n){return qa||(qa=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this))._declarationView=e,a._declarationTContainer=n,a.elementRef=r,a}return _createClass(i,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,i=Pr(this._declarationView,t,e,16,null,t.node);i[17]=this._declarationView[this._declarationTContainer.index];var n=this._declarationView[19];return null!==n&&(i[19]=n.createEmbeddedView(t)),Lr(t,i,e),new za(i)}}]),i}(e)),0===i.type?new qa(n,i,Ya(t,i,n)):null}function Xa(e,t,i,n){var r;Wa||(Wa=function(e){_inherits(n,e);var i=_createSuper(n);function n(e,t,r){var a;return _classCallCheck2(this,n),(a=i.call(this))._lContainer=e,a._hostTNode=t,a._hostView=r,a}return _createClass(n,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,i){var n=e.createEmbeddedView(t||{});return this.insert(n,i),n}},{key:"createComponent",value:function(e,t,i,n,r){var a=i||this.parentInjector;if(!r&&null==e.ngModule&&a){var o=a.get(nt,null);o&&(r=o)}var s=e.create(a,n,void 0,r);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var i=e._lView,n=i[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),xt(i[3])){var r=this.indexOf(e);if(-1!==r)this.detach(r);else{var a=i[3],o=new Wa(a,a[6],a[3]);o.detach(o.indexOf(e))}}var s=this._adjustIndex(t);return function(e,t,i,n){var r=10+n,a=i.length;n>0&&(i[r-1][4]=t),n<a-10?(t[4]=i[r],ot(i,10+n,t)):(i.push(t),t[4]=null),t[3]=i;var o=t[17];null!==o&&i!==o&&function(e,t){var i=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===i?e[9]=[t]:i.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(n,i,this._lContainer,s),_a(n,i,!0,Na(s,this._lContainer)),e.attachToViewContainerRef(this),ot(this._lContainer[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);!function(e,t){var i=Ea(e,t);i&&Ta(i[1],i)}(this._lContainer,t),st(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),i=Ea(this._lContainer,t);return i&&null!=st(this._lContainer[8],t)?new za(i):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return Ya(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new hn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=tn(this._hostTNode,this._hostView),t=Ui(e,this._hostView),i=function(e,t,i){if(i.parent&&-1!==i.parent.injectorIndex){for(var n=i.parent.injectorIndex,r=i.parent;null!=r.parent&&n==r.parent.injectorIndex;)r=r.parent;return r}for(var a=Hi(e),o=t,s=t[6];a>1;)s=(o=o[15])[6],a--;return s}(e,this._hostView,this._hostTNode);return Vi(e)&&null!=i?new hn(i,t):new hn(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),n}(e));var a=n[i.index];if(xt(a))r=a;else{var o;if(4===i.type)o=Vt(a);else if(o=n[11].createComment(""),Mt(n)){var s=n[11],l=Ht(i,n);Ia(s,Pa(s,l),o,function(e,t){return Ft(e)?e.nextSibling(t):t.nextSibling}(s,l))}else La(n[1],n,o,i);n[i.index]=r=aa(a,n,o,i),la(n,r)}return new Wa(r,i,n)}function Ja(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,i){if(!i&&Dt(e)){var n=Wt(e.index,t);return new za(n,n)}return 3===e.type||0===e.type||4===e.type||5===e.type?new za(t[16],t):null}(ii(),$t(),e)}var Qa=function(){var e=function e(){_classCallCheck2(this,e)};return e.__NG_ELEMENT_ID__=function(){return Za()},e}(),Za=Ja,$a=new qe("Set Injector scope."),eo={},to={},io=[],no=void 0;function ro(){return void 0===no&&(no=new it),no}function ao(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return new oo(e,i,t||ro(),n)}var oo=function(){function t(e,i,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck2(this,t),this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];i&&at(i,(function(t){return r.processProvider(t,e,i)})),at([e],(function(e){return r.processInjectorType(e,[],o)})),this.records.set(We,co(void 0,this));var s=this.records.get($a);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof e?null:Se(e))}return _createClass(t,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ze,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.Default;this.assertNotDestroyed();var r,a=Xe(this);try{if(!(n&ue.SkipSelf)){var o=this.records.get(t);if(void 0===o){var s=("function"==typeof(r=t)||"object"==typeof r&&r instanceof qe)&&me(t);o=s&&this.injectableDefInScope(s)?co(so(t),eo):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&ue.Self?ro():this.parent).get(t,i=n&ue.Optional&&i===ze?null:i)}catch(e){if("NullInjectorError"===e.name){if((e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(Se(t)),a)throw e;return function(e,t,i,n){var r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var r=Se(t);if(Array.isArray(t))r=t.map(Se).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):Se(s)))}r="{".concat(a.join(", "),"}")}return"".concat(i).concat(n?"("+n+")":"","[").concat(r,"]: ").concat(e.replace(Ge,"\n  "))}("\n"+e.message,r,"R3InjectorError",n),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(e,t,0,this.source)}throw e}finally{Xe(a)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,i){return e.push(Se(i))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,i){var n=this;if(!(e=Oe(e)))return!1;var r=ye(e),a=null==r&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==i.indexOf(o);if(void 0!==a&&(r=ye(a)),null==r)return!1;if(null!=r.imports&&!s){var l;i.push(o);try{at(r.imports,(function(e){n.processInjectorType(e,t,i)&&(void 0===l&&(l=[]),l.push(e))}))}finally{}if(void 0!==l)for(var c=function(e){var t=l[e],i=t.ngModule,r=t.providers;at(r,(function(e){return n.processProvider(e,i,r||io)}))},u=0;u<l.length;u++)c(u)}this.injectorDefTypes.add(o),this.records.set(o,co(r.factory,eo));var h=r.providers;if(null!=h&&!s){var d=e;at(h,(function(e){return n.processProvider(e,d,h)}))}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,i){var n=ho(e=Oe(e))?e:Oe(e&&e.provide),r=function(e,t,i){return uo(e)?co(void 0,e.useValue):co(lo(e,t,i),eo)}(e,t,i);if(ho(e)||!0!==e.multi){var a=this.records.get(n);a&&void 0!==a.multi&&or()}else{var o=this.records.get(n);o?void 0===o.multi&&or():((o=co(void 0,eo,!0)).factory=function(){return tt(o.multi)},this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}},{key:"hydrate",value:function(e,t){var i;return t.value===to?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(Se(e)):t.value===eo&&(t.value=to,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(i=t.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function so(e){var t=me(e),i=null!==t?t.factory:Tt(e);if(null!==i)return i;var n=ye(e);if(null!==n)return n.factory;if(e instanceof qe)throw new Error("Token ".concat(Se(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var i=lt(t,"?");throw new Error("Can't resolve all parameters for ".concat(Se(e),": (").concat(i.join(", "),")."))}var n=function(e){var t=e&&(e[be]||e[we]||e[Ce]&&e[Ce]());if(t){var i=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(i,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "').concat(i,'" class.')),t}return null}(e);return null!==n?function(){return n.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function lo(e,t,i){var n,r=void 0;if(ho(e)){var a=Oe(e);return Tt(a)||so(a)}if(uo(e))r=function(){return Oe(e.useValue)};else if((n=e)&&n.useFactory)r=function(){return e.useFactory.apply(e,_toConsumableArray2(tt(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return Ze(Oe(e.useExisting))};else{var o=Oe(e&&(e.useClass||e.provide));if(o||function(e,t,i){var n="";throw e&&t&&(n=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==i?"?"+i+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(Se(e),"'")+n)}(t,i,e),!function(e){return!!e.deps}(e))return Tt(o)||so(o);r=function(){return _construct(o,_toConsumableArray2(tt(e.deps)))}}return r}function co(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:i?[]:void 0}}function uo(e){return null!==e&&"object"==typeof e&&Ye in e}function ho(e){return"function"==typeof e}var po=function(e,t,i){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0,r=ao(e,t,i,n);return r._resolveInjectorDefTypes(),r}({name:i},t,e,i)},fo=function(){var e=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?po(e,t,""):po(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=ze,e.NULL=new it,e.\u0275prov=pe({token:e,providedIn:"any",factory:function(){return Ze(We)}}),e.__NG_ELEMENT_ID__=-1,e}(),vo=new qe("AnalyzeForEntryComponents"),mo=new Map,go=new Set;function yo(e){return"string"==typeof e?e:e.text()}function bo(e,t,i){var n=i?e.styles:null,r=i?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?r=Ee(r,s):2==a&&(n=Ee(n,s+": "+t[++o]+";"))}i?e.styles=n:e.stylesWithoutHost=n,i?e.classes=r:e.classesWithoutHost=r}var ko=null;function Co(){if(!ko){var e=Le.Symbol;if(e&&e.iterator)ko=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),i=0;i<t.length;++i){var n=t[i];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ko=n)}}return ko}function wo(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}var _o=function(){function e(t){_classCallCheck2(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function So(e){return!!Eo(e)&&(Array.isArray(e)||!(e instanceof Map)&&Co()in e)}function Eo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function To(e,t,i){return e[t]=i}function Ao(e,t){return e[t]}function Oo(e,t,i){return!Object.is(e[t],i)&&(e[t]=i,!0)}function xo(e,t,i,n){var r=Oo(e,t,i);return Oo(e,t+1,n)||r}function Io(e,t,i,n,r,a){var o=xo(e,t,i,n);return xo(e,t+2,r,a)||o}function Do(e,t,i,n){var r=$t();return Oo(r,ui(),t)&&(ei(),function(e,t,i,n,r,a){var o=Ht(e,t),s=t[11];if(null==n)Ft(s)?s.removeAttribute(o,i,a):o.removeAttribute(i);else{var l=null==r?qi(n):r(n,e.tagName||"",i);Ft(s)?s.setAttribute(o,i,l,a):a?o.setAttributeNS(a,i,l):o.setAttribute(i,l)}}(Ti(),r,e,t,i,n)),Do}function Ro(e,t,i,n){return Oo(e,ui(),i)?t+qi(i)+n:yr}function Po(e,t,i,n,r,a,o,s){var l=$t(),c=ei(),u=e+20,h=c.firstCreatePass?function(e,t,i,n,r,a,o,s,l){var c=t.consts,u=Mr(t,i[6],e,0,o||null,Kt(c,s));Yr(t,i,u,Kt(c,l)),Ai(t,u);var h=u.tViews=qr(2,-1,n,r,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c),d=Wr(0,null,2,-1,null,null);return d.injectorIndex=u.injectorIndex,h.node=d,null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(e,c,l,t,i,n,r,a,o):c.data[u];ni(h,!1);var d=l[11].createComment("");La(c,l,d,h),rr(d,l),la(l,l[u]=aa(d,l,d,h)),Rt(h)&&jr(c,l,h),null!=o&&Hr(l,h,s)}function Mo(e){return qt(Qt.lFrame.contextLView,e)}function Lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default,i=$t();return null==i?Ze(e,t):rn(ii(),i,Oe(e),t)}function No(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var i=e.attrs;if(i)for(var n=i.length,r=0;r<n;){var a=i[r];if(Li(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<n&&"string"==typeof i[r];)r++;else{if(a===t)return i[r+1];r+=2}}return null}(ii(),e)}function Fo(){throw new Error("invalid")}function Bo(e,t,i){var n=$t();return Oo(n,ui(),t)&&Gr(ei(),Ti(),n,e,t,n[11],i,!1),Bo}function Vo(e,t,i,n,r){var a=r?"class":"style";ya(e,i,t.inputs[a],a,n)}function jo(e,t,i,n){var r=$t(),a=ei(),o=20+e,s=r[11],l=r[o]=Rr(t,s,Qt.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,i,n,r,a,o){var s=t.consts,l=Kt(s,a),c=Mr(t,i[6],e,3,r,l);return Yr(t,i,c,Kt(s,o)),null!==c.attrs&&bo(c,c.attrs,!1),null!==c.mergedAttrs&&bo(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(e,a,r,0,t,i,n):a.data[o];ni(c,!0);var u=c.mergedAttrs;null!==u&&Mi(s,l,u);var h=c.classes;null!==h&&Ha(s,l,h);var d=c.styles;null!==d&&ja(s,l,d),La(a,r,l,c),0===Qt.lFrame.elementDepthCount&&rr(l,r),Qt.lFrame.elementDepthCount++,Rt(c)&&(jr(a,r,c),Vr(a,c,r)),null!==n&&Hr(r,c)}function Ho(){var e=ii();ri()?ai():ni(e=e.parent,!1);var t=e;Qt.lFrame.elementDepthCount--;var i=ei();i.firstCreatePass&&(Ai(i,e),It(e)&&i.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Vo(i,t,$t(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Vo(i,t,$t(),t.stylesWithoutHost,!1)}function Uo(e,t,i,n){jo(e,t,i,n),Ho()}function qo(e,t,i){var n=$t(),r=ei(),a=e+20,o=r.firstCreatePass?function(e,t,i,n,r){var a=t.consts,o=Kt(a,n),s=Mr(t,i[6],e,4,"ng-container",o);return null!==o&&bo(s,o,!0),Yr(t,i,s,Kt(a,r)),null!==t.queries&&t.queries.elementStart(t,s),s}(e,r,n,t,i):r.data[a];ni(o,!0);var s=n[a]=n[11].createComment("");La(r,n,s,o),rr(s,n),Rt(o)&&(jr(r,n,o),Vr(r,o,n)),null!=i&&Hr(n,o)}function Wo(){var e=ii(),t=ei();ri()?ai():ni(e=e.parent,!1),t.firstCreatePass&&(Ai(t,e),It(e)&&t.queries.elementEnd(e))}function zo(){return $t()}function Go(e){return!!e&&"function"==typeof e.then}function Yo(e){return!!e&&"function"==typeof e.subscribe}function Ko(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=$t(),a=ei(),o=ii();return Jo(a,r,r[11],o,e,t,i,n),Ko}function Xo(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=ii(),a=$t(),o=ei();return Jo(o,a,ma(fi(o.data),r,a),r,e,t,i,n),Xo}function Jo(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,l=Rt(n),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=fa(t),h=!0;if(3===n.type){var d=Ht(n,t),p=s?s(d):ft,f=p.target||d,v=u.length,m=s?function(e){return s(Vt(e[n.index])).target}:n.index;if(Ft(i)){var g=null;if(!s&&l&&(g=function(e,t,i,n){var r=e.cleanup;if(null!=r)for(var a=0;a<r.length-1;a+=2){var o=r[a];if(o===i&&r[a+1]===n){var s=t[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(e,t,r,n.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,h=!1;else{a=Zo(n,t,a,!1);var y=i.listen(p.name||f,r,a);u.push(a,y),c&&c.push(r,m,v,v+1)}}else a=Zo(n,t,a,!0),f.addEventListener(r,a,o),u.push(a),c&&c.push(r,m,v,o)}var b,k=n.outputs;if(h&&null!==k&&(b=k[r])){var C=b.length;if(C)for(var w=0;w<C;w+=2){var _=t[b[w]][b[w+1]].subscribe(a),S=u.length;u.push(a,_),c&&c.push(r,n.index,S,-(S+1))}}}function Qo(e,t,i){try{return!1!==t(i)}catch(n){return ga(e,n),!1}}function Zo(e,t,i,n){return function r(a){if(a===Function)return i;var o=2&e.flags?Wt(e.index,t):t;0==(32&t[2])&&ca(o);for(var s=Qo(t,i,a),l=r.__ngNextListenerFn__;l;)s=Qo(t,l,a)&&s,l=l.__ngNextListenerFn__;return n&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function $o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Qt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Qt.lFrame.contextLView))[8]}(e)}function es(e,t){for(var i=null,n=function(e){var t=e.attrs;if(null!=t){var i=t.indexOf(5);if(0==(1&i))return t[i+1]}return null}(e),r=0;r<t.length;r++){var a=t[r];if("*"!==a){if(null===n?fr(e,a,!0):vr(n,a))return r}else i=r}return i}function ts(e){var t=$t()[16][6];if(!t.projection)for(var i=t.projection=lt(e?e.length:1,null),n=i.slice(),r=t.child;null!==r;){var a=e?es(r,e):0;null!==a&&(n[a]?n[a].projectionNext=r:i[a]=r,n[a]=r),r=r.next}}function is(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=$t(),r=ei(),a=Mr(r,n[6],e,1,null,i||null);null===a.projection&&(a.projection=t),ai(),function(e,t,i){Va(t[11],0,t,i,xa(e,i,t),Ma(i.parent||t[6],t))}(r,n,a)}var ns=[];function rs(e,t,i,n,r){for(var a=e[i+1],o=null===t,s=n?Tr(a):Or(a),l=!1;0!==s&&(!1===l||o);){var c=e[s+1];as(e[s],t)&&(l=!0,e[s+1]=n?Ir(c):Ar(c)),s=n?Tr(c):Or(c)}l&&(e[i+1]=n?Ar(a):Ir(a))}function as(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ht(e,t)>=0}var os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ss(e){return e.substring(os.key,os.keyEnd)}function ls(e,t){var i=os.textEnd;return i===t?-1:(t=os.keyEnd=function(e,t,i){for(;t<i&&e.charCodeAt(t)>32;)t++;return t}(e,os.key=t,i),cs(e,t,i))}function cs(e,t,i){for(;t<i&&e.charCodeAt(t)<=32;)t++;return t}function us(e,t,i){return fs(e,t,i,!1),us}function hs(e,t){return fs(e,t,null,!0),hs}function ds(e){vs(ct,ps,e,!0)}function ps(e,t){for(var i=function(e){return function(e){os.key=0,os.keyEnd=0,os.value=0,os.valueEnd=0,os.textEnd=e.length}(e),ls(e,cs(e,0,os.textEnd))}(t);i>=0;i=ls(t,i))ct(e,ss(t),!0)}function fs(e,t,i,n){var r,a,o=$t(),s=ei(),l=hi(2);(s.firstUpdatePass&&gs(s,e,l,n),t!==yr&&Oo(o,l,t))&&(null==i&&(r=null===(a=Qt.lFrame)?null:a.currentSanitizer)&&(i=r),ks(s,s.data[Si()+20],o,o[11],e,o[l+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=Se(Sn(e)))),e}(t,i),n,l))}function vs(e,t,i,n){var r=ei(),a=hi(2);r.firstUpdatePass&&gs(r,null,a,n);var o=$t();if(i!==yr&&Oo(o,a,i)){var s=r.data[Si()+20];if(_s(s,n)&&!ms(r,a)){var l=n?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(i=Ee(l,i||"")),Vo(r,s,o,i,n)}else!function(e,t,i,n,r,a,o,s){r===yr&&(r=ns);for(var l=0,c=0,u=0<r.length?r[0]:null,h=0<a.length?a[0]:null;null!==u||null!==h;){var d=l<r.length?r[l+1]:void 0,p=c<a.length?a[c+1]:void 0,f=null,v=void 0;u===h?(l+=2,c+=2,d!==p&&(f=h,v=p)):null===h||null!==u&&u<h?(l+=2,f=u):(c+=2,f=h,v=p),null!==f&&ks(e,t,i,n,f,v,o,s),u=l<r.length?r[l]:null,h=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function(e,t,i){if(null==i||""===i)return ns;var n=[],r=Sn(i);if(Array.isArray(r))for(var a=0;a<r.length;a++)e(n,r[a],!0);else if("object"==typeof r)for(var o in r)r.hasOwnProperty(o)&&e(n,o,r[o]);else"string"==typeof r&&t(n,r);return n}(e,t,i),n,a)}}function ms(e,t){return t>=e.expandoStartIndex}function gs(e,t,i,n){var r=e.data;if(null===r[i+1]){var a=r[Si()+20],o=ms(e,i);_s(a,n)&&null===t&&!o&&(t=!1),t=function(e,t,i,n){var r=fi(e),a=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(i=bs(i=ys(null,e,t,i,n),t.attrs,n),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==r)if(i=ys(r,e,t,i,n),null===a){var s=function(e,t,i){var n=i?t.classBindings:t.styleBindings;if(0!==Or(n))return e[Tr(n)]}(e,t,n);void 0!==s&&Array.isArray(s)&&function(e,t,i,n){e[Tr(i?t.classBindings:t.styleBindings)]=n}(e,t,n,s=bs(s=ys(null,e,t,s[1],n),t.attrs,n))}else a=function(e,t,i){for(var n=void 0,r=t.directiveEnd,a=1+t.directiveStylingLast;a<r;a++)n=bs(n,e[a].hostAttrs,i);return bs(n,t.attrs,i)}(e,t,n)}return void 0!==a&&(n?t.residualClasses=a:t.residualStyles=a),i}(r,a,t,n),function(e,t,i,n,r,a){var o=a?t.classBindings:t.styleBindings,s=Tr(o),l=Or(o);e[n]=i;var c,u=!1;if(Array.isArray(i)){var h=i;(null===(c=h[1])||ht(h,c)>0)&&(u=!0)}else c=i;if(r)if(0!==l){var d=Tr(e[s+1]);e[n+1]=Er(d,s),0!==d&&(e[d+1]=xr(e[d+1],n)),e[s+1]=131071&e[s+1]|n<<17}else e[n+1]=Er(s,0),0!==s&&(e[s+1]=xr(e[s+1],n)),s=n;else e[n+1]=Er(l,0),0===s?s=n:e[l+1]=xr(e[l+1],n),l=n;u&&(e[n+1]=Ar(e[n+1])),rs(e,c,n,!0),rs(e,c,n,!1),function(e,t,i,n,r){var a=r?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&ht(a,t)>=0&&(i[n+1]=Ir(i[n+1]))}(t,c,e,n,a),o=Er(s,l),a?t.classBindings=o:t.styleBindings=o}(r,a,t,i,o,n)}}function ys(e,t,i,n,r){var a=null,o=i.directiveEnd,s=i.directiveStylingLast;for(-1===s?s=i.directiveStart:s++;s<o&&(n=bs(n,(a=t[s]).hostAttrs,r),a!==e);)s++;return null!==e&&(i.directiveStylingLast=s),n}function bs(e,t,i){var n=i?1:2,r=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?r=o:r===n&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ct(e,o,!!i||t[++a]))}return void 0===e?null:e}function ks(e,t,i,n,r,a,o,s){if(3===t.type){var l=e.data,c=l[s+1];ws(1==(1&c)?Cs(l,t,i,r,Or(c),o):void 0)||(ws(a)||2==(2&c)&&(a=Cs(l,null,i,r,s,o)),function(e,t,i,n,r){var a=Ft(e);if(t)r?a?e.addClass(i,n):i.classList.add(n):a?e.removeClass(i,n):i.classList.remove(n);else{var o=-1==n.indexOf("-")?void 0:2;null==r?a?e.removeStyle(i,n,o):i.style.removeProperty(n):a?e.setStyle(i,n,r,o):i.style.setProperty(n,r)}}(n,o,jt(Si(),i),r,a))}}function Cs(e,t,i,n,r,a){for(var o=null===t,s=void 0;r>0;){var l=e[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u,d=i[r+1];d===yr&&(d=h?ns:void 0);var p=h?ut(d,n):u===n?d:void 0;if(c&&!ws(p)&&(p=ut(l,n)),ws(p)&&(s=p,o))return s;var f=e[r+1];r=o?Tr(f):Or(f)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(s=ut(v,n))}return s}function ws(e){return void 0!==e}function _s(e,t){return 0!=(e.flags&(t?16:32))}function Ss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=$t(),n=ei(),r=e+20,a=n.firstCreatePass?Mr(n,i[6],e,3,null,null):n.data[r],o=i[r]=function(e,t){return Ft(t)?t.createText(e):t.createTextNode(e)}(t,i[11]);La(n,i,o,a),ni(a,!1)}function Es(e){return Ts("",e,""),Es}function Ts(e,t,i){var n=$t(),r=Ro(n,e,t,i);return r!==yr&&ba(n,Si(),r),Ts}function As(e,t,i,n,r){var a=$t(),o=function(e,t,i,n,r,a){var o=xo(e,ci(),i,r);return hi(2),o?t+qi(i)+n+qi(r)+a:yr}(a,e,t,i,n,r);return o!==yr&&ba(a,Si(),o),As}function Os(e,t,i,n,r,a,o){var s=$t(),l=function(e,t,i,n,r,a,o,s){var l=function(e,t,i,n,r){var a=xo(e,t,i,n);return Oo(e,t+2,r)||a}(e,ci(),i,r,o);return hi(3),l?t+qi(i)+n+qi(r)+a+qi(o)+s:yr}(s,e,t,i,n,r,a,o);return l!==yr&&ba(s,Si(),l),Os}function xs(e,t,i,n,r,a,o,s,l,c,u){var h=$t(),d=function(e,t,i,n,r,a,o,s,l,c,u,h){var d=ci(),p=Io(e,d,i,r,o,l);return p=Oo(e,d+4,u)||p,hi(5),p?t+qi(i)+n+qi(r)+a+qi(o)+s+qi(l)+c+qi(u)+h:yr}(h,e,t,i,n,r,a,o,s,l,c,u);return d!==yr&&ba(h,Si(),d),xs}function Is(e,t,i){var n=$t();return Oo(n,ui(),t)&&Gr(ei(),Ti(),n,e,t,n[11],i,!0),Is}function Ds(e,t,i){var n=$t();if(Oo(n,ui(),t)){var r=ei(),a=Ti();Gr(r,a,n,e,t,ma(fi(r.data),a,n),i,!0)}return Ds}function Rs(e,t){var i=zt(e)[1],n=i.data.length-1;Ai(i,{directiveStart:n,directiveEnd:n+1})}function Ps(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,i=!0,n=[e];t;){var r=void 0;if(Pt(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(i){n.push(r);var a=e;a.inputs=Ms(e.inputs),a.declaredInputs=Ms(e.declaredInputs),a.outputs=Ms(e.outputs);var o=r.hostBindings;o&&Fs(e,o);var s=r.viewQuery,l=r.contentQueries;if(s&&Ls(e,s),l&&Ns(e,l),de(e.inputs,r.inputs),de(e.declaredInputs,r.declaredInputs),de(e.outputs,r.outputs),Pt(r)&&r.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(r.data.animation)}a.afterContentChecked=a.afterContentChecked||r.afterContentChecked,a.afterContentInit=e.afterContentInit||r.afterContentInit,a.afterViewChecked=e.afterViewChecked||r.afterViewChecked,a.afterViewInit=e.afterViewInit||r.afterViewInit,a.doCheck=e.doCheck||r.doCheck,a.onDestroy=e.onDestroy||r.onDestroy,a.onInit=e.onInit||r.onInit}var u=r.features;if(u)for(var h=0;h<u.length;h++){var d=u[h];d&&d.ngInherit&&d(e),d===Ps&&(i=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,i=null,n=e.length-1;n>=0;n--){var r=e[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Fi(r.hostAttrs,i=Fi(i,r.hostAttrs))}}(n)}function Ms(e){return e===ft?{}:e===vt?[]:e}function Ls(e,t){var i=e.viewQuery;e.viewQuery=i?function(e,n){t(e,n),i(e,n)}:t}function Ns(e,t){var i=e.contentQueries;e.contentQueries=i?function(e,n,r){t(e,n,r),i(e,n,r)}:t}function Fs(e,t){var i=e.hostBindings;e.hostBindings=i?function(e,n){t(e,n),i(e,n)}:t}var Bs=function(){function e(t,i,n){_classCallCheck2(this,e),this.previousValue=t,this.currentValue=i,this.firstChange=n}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Vs(e){e.type.prototype.ngOnChanges&&(e.setInput=js,e.onChanges=function(){var e=Hs(this),t=e&&e.current;if(t){var i=e.previous;if(i===ft)e.previous=t;else for(var n in t)i[n]=t[n];e.current=null,this.ngOnChanges(t)}})}function js(e,t,i,n){var r=Hs(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ft,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[i],l=o[s];a[s]=new Bs(l&&l.currentValue,t,o===ft),e[n]=t}function Hs(e){return e.__ngSimpleChanges__||null}function Us(e,t,i,n,r){if(e=Oe(e),Array.isArray(e))for(var a=0;a<e.length;a++)Us(e[a],t,i,n,r);else{var o=ei(),s=$t(),l=ho(e)?e:Oe(e.provide),c=lo(e),u=ii(),h=65535&u.providerIndexes,d=u.directiveStart,p=u.providerIndexes>>16;if(ho(e)||!e.multi){var f=new Pi(c,r,Lo),v=zs(l,t,r?h:h+p,d);-1===v?(nn(Zi(u,s),o,l),qs(o,e,t.length),t.push(l),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=65536),i.push(f),s.push(f)):(i[v]=f,s[v]=f)}else{var m=zs(l,t,h+p,d),g=zs(l,t,h,h+p),y=m>=0&&i[m],b=g>=0&&i[g];if(r&&!b||!r&&!y){nn(Zi(u,s),o,l);var k=function(e,t,i,n,r){var a=new Pi(e,i,Lo);return a.multi=[],a.index=t,a.componentProviders=0,Ws(a,r,n&&!i),a}(r?Ys:Gs,i.length,r,n,c);!r&&b&&(i[g].providerFactory=k),qs(o,e,t.length,0),t.push(l),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=65536),i.push(k),s.push(k)}else qs(o,e,m>-1?m:g,Ws(i[r?g:m],c,!r&&n));!r&&n&&b&&i[g].componentProviders++}}}function qs(e,t,i,n){var r=ho(t);if(r||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){var s=o.indexOf(i);-1===s?o.push(i,[n,a]):o[s+1].push(n,a)}else o.push(i,a)}}}function Ws(e,t,i){return i&&e.componentProviders++,e.multi.push(t)-1}function zs(e,t,i,n){for(var r=i;r<n;r++)if(t[r]===e)return r;return-1}function Gs(e,t,i,n){return Ks(this.multi,[])}function Ys(e,t,i,n){var r,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=ln(i,i[1],this.providerFactory.index,n);Ks(a,r=s.slice(0,o));for(var l=o;l<s.length;l++)r.push(s[l])}else Ks(a,r=[]);return r}function Ks(e,t){for(var i=0;i<e.length;i++)t.push((0,e[i])());return t}function Xs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(i){i.providersResolver=function(i,n){return function(e,t,i){var n=ei();if(n.firstCreatePass){var r=Pt(e);Us(i,n.data,n.blueprint,r,!0),Us(t,n.data,n.blueprint,r,!1)}}(i,n?n(e):e,t)}}}Vs.ngInherit=!0;var Js=function e(){_classCallCheck2(this,e)},Qs=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(Se(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Zs=function(){var e=function e(){_classCallCheck2(this,e)};return e.NULL=new Qs,e}(),$s=function(){var e=function e(t){_classCallCheck2(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return el(e)},e}(),el=function(e){return Ya(e,ii(),$t())},tl=function e(){_classCallCheck2(this,e)},il=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),nl=function(){var e=function e(){_classCallCheck2(this,e)};return e.__NG_ELEMENT_ID__=function(){return rl()},e}(),rl=function(){var e=$t(),t=Wt(ii().index,e);return function(e){var t=e[11];if(Ft(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ot(t)?t:e)},al=function(){var e=function e(){_classCallCheck2(this,e)};return e.\u0275prov=pe({token:e,providedIn:"root",factory:function(){return null}}),e}(),ol=function e(t){_classCallCheck2(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},sl=new ol("9.1.12"),ll=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"supports",value:function(e){return So(e)}},{key:"create",value:function(e){return new ul(e)}}]),e}(),cl=function(e,t){return t},ul=function(){function e(t){_classCallCheck2(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||cl}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,i=this._removalsHead,n=0,r=null;t||i;){var a=!i||t&&t.currentIndex<fl(i,n,r)?t:i,o=fl(a,n,r),s=a.currentIndex;if(a===i)n--,i=i._nextRemoved;else if(t=t._next,null==a.previousIndex)n++;else{r||(r=[]);var l=o-n,c=s-n;if(l!=c){for(var u=0;u<l;u++){var h=u<r.length?r[u]:r[u]=0,d=h+u;c<=d&&d<l&&(r[u]=h+1)}r[a.previousIndex]=c-l}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!So(e))throw new Error("Error trying to diff '".concat(Se(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var i,n,r,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)n=e[s],r=this._trackByFn(s,n),null!==a&&wo(a.trackById,r)?(o&&(a=this._verifyReinsertion(a,n,r,s)),wo(a.item,n)||this._addIdentityChange(a,n)):(a=this._mismatch(a,n,r,s),o=!0),a=a._next}else i=0,function(e,t){if(Array.isArray(e))for(var i=0;i<e.length;i++)t(e[i]);else for(var n,r=e[Co()]();!(n=r.next()).done;)t(n.value)}(e,(function(e){r=t._trackByFn(i,e),null!==a&&wo(a.trackById,r)?(o&&(a=t._verifyReinsertion(a,e,r,i)),wo(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,r,i),o=!0),a=a._next,i++})),this.length=i;return this._truncate(a),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,i,n){var r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,n))?(wo(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,n)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(wo(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,n)):e=this._addAfter(new hl(t,i),r,n),e}},{key:"_verifyReinsertion",value:function(e,t,i,n){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?e=this._reinsertAfter(r,e._prev,n):e.currentIndex!=n&&(e.currentIndex=n,this._addToMoves(e,n)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var n=e._prevRemoved,r=e._nextRemoved;return null===n?this._removalsHead=r:n._nextRemoved=r,null===r?this._removalsTail=n:r._prevRemoved=n,this._insertAfter(e,t,i),this._addToMoves(e,i),e}},{key:"_moveAfter",value:function(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}},{key:"_addAfter",value:function(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,i){var n=null===t?this._itHead:t._next;return e._next=n,e._prev=t,null===n?this._itTail=e:n._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new pl),this._linkedRecords.put(e),e.currentIndex=i,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),hl=function e(t,i){_classCallCheck2(this,e),this.item=t,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},dl=function(){function e(){_classCallCheck2(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&wo(i.trackById,e))return i;return null}},{key:"remove",value:function(e){var t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}]),e}(),pl=function(){function e(){_classCallCheck2(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,i=this.map.get(t);i||(i=new dl,this.map.set(t,i)),i.add(e)}},{key:"get",value:function(e,t){var i=this.map.get(e);return i?i.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function fl(e,t,i){var n=e.previousIndex;if(null===n)return n;var r=0;return i&&n<i.length&&(r=i[n]),n+t+r}var vl=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||Eo(e)}},{key:"create",value:function(){return new ml}}]),e}(),ml=function(){function e(){_classCallCheck2(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Eo(e)))throw new Error("Error trying to diff '".concat(Se(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var i=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,n){if(i&&i.key===n)t._maybeAddToChanges(i,e),t._appendAfter=i,i=i._next;else{var r=t._getOrCreateRecordForKey(n,e);i=t._insertBeforeOrAppend(i,r)}})),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(var n=i;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var i=this._records.get(e);this._maybeAddToChanges(i,t);var n=i._prev,r=i._next;return n&&(n._next=r),r&&(r._prev=n),i._next=null,i._prev=null,i}var a=new gl(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){wo(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(i){return t(e[i],i)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),gl=function e(t){_classCallCheck2(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},yl=function(){var e=function(){function e(t){_classCallCheck2(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,i=this.factories.find((function(t){return t.supports(e)}));if(null!=i)return i;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,i){if(null!=i){var n=i.factories.slice();t=t.concat(n)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(i){if(!i)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,i)},deps:[[e,new ce,new se]]}}}]),e}();return e.\u0275prov=pe({token:e,providedIn:"root",factory:function(){return new e([new ll])}}),e}(),bl=function(){var e=function(){function e(t){_classCallCheck2(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,i){if(i){var n=i.factories.slice();t=t.concat(n)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(i){if(!i)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,i)},deps:[[e,new ce,new se]]}}}]),e}();return e.\u0275prov=pe({token:e,providedIn:"root",factory:function(){return new e([new vl])}}),e}(),kl=[new vl],Cl=new yl([new ll]),wl=new bl(kl),_l=function(){var e=function e(){_classCallCheck2(this,e)};return e.__NG_ELEMENT_ID__=function(){return Sl(e,$s)},e}(),Sl=function(e,t){return Ka(e,t,ii(),$t())},El=function(){var e=function e(){_classCallCheck2(this,e)};return e.__NG_ELEMENT_ID__=function(){return Tl(e,$s)},e}(),Tl=function(e,t){return Xa(e,t,ii(),$t())},Al={},Ol=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).ngModule=e,n}return _createClass(i,[{key:"resolveComponentFactory",value:function(e){var t=Et(e);return new Dl(t,this.ngModule)}}]),i}(Zs);function xl(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push({propName:e[i],templateName:i});return t}var Il=new qe("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return zi}}),Dl=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this)).componentDef=e,r.ngModule=n,r.componentType=e.type,r.selector=e.selectors.map(gr).join(","),r.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],r.isBoundToModule=!!n,r}return _createClass(i,[{key:"create",value:function(e,t,i,n){var r,a,o=(n=n||this.ngModule)?function(e,t){return{get:function(i,n,r){var a=e.get(i,Al,r);return a!==Al||n===Al?a:t.get(i,n,r)}}}(e,n.injector):e,s=o.get(tl,Bt),l=o.get(al,null),c=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",h=i?function(e,t,i){if(Ft(e))return e.selectRootElement(t,i===pt.ShadowDom);var n="string"==typeof t?e.querySelector(t):t;return n.textContent="",n}(c,i,this.componentDef.encapsulation):Rr(u,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),d=this.componentDef.onPush?576:528,p="string"==typeof i&&/^#root-ng-internal-isolated-\d+/.test(i),f={components:[],scheduler:zi,clean:pa,playerHandler:null,flags:0},v=qr(0,-1,null,1,0,null,null,null,null,null),m=Pr(null,v,f,d,null,null,s,c,l,o);yi(m,null);try{var g=function(e,t,i,n,r,a){var o=i[1];i[20]=e;var s=Mr(o,null,0,3,null,null),l=s.mergedAttrs=t.hostAttrs;null!==l&&(bo(s,l,!0),null!==e&&(Mi(r,e,l),null!==s.classes&&Ha(r,e,s.classes),null!==s.styles&&ja(r,e,s.styles)));var c=n.createRenderer(e,t),u=Pr(i,Ur(t),null,t.onPush?64:16,i[20],s,n,c,void 0);return o.firstCreatePass&&(nn(Zi(s,i),o,t.type),Zr(o,s),ea(s,i.length,1)),la(i,u),i[20]=u}(h,this.componentDef,m,s,c);if(h)if(i)Mi(c,h,["ng-version",sl.full]);else{var y=function(e){for(var t=[],i=[],n=1,r=2;n<e.length;){var a=e[n];if("string"==typeof a)2===r?""!==a&&t.push(a,e[++n]):8===r&&i.push(a);else{if(!dr(r))break;r=a}n++}return{attrs:t,classes:i}}(this.componentDef.selectors[0]),b=y.attrs,k=y.classes;b&&Mi(c,h,b),k&&k.length>0&&Ha(c,h,k.join(" "))}if(a=Ut(v,0),void 0!==t)for(var C=a.projection=[],w=0;w<this.ngContentSelectors.length;w++){var _=t[w];C.push(null!=_?Array.from(_):null)}r=function(e,t,i,n,r){var a=i[1],o=function(e,t,i){var n=ii();e.firstCreatePass&&(i.providersResolver&&i.providersResolver(i),Qr(e,n,1),ta(e,t,i));var r=ln(t,e,t.length-1,n);rr(r,t);var a=Ht(n,t);return a&&rr(a,t),r}(a,i,t);n.components.push(o),e[8]=o,r&&r.forEach((function(e){return e(o,t)})),t.contentQueries&&t.contentQueries(1,o,i.length-1);var s=ii();if(a.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Ei(s.index-20);var l=i[1];Kr(l,t),Xr(l,i,t.hostVars),Jr(t,o)}return o}(g,this.componentDef,m,f,[Rs]),Lr(v,m,null)}finally{_i()}var S=new Rl(this.componentType,r,Ya($s,a,m),m,a);return i&&!p||(v.node.child=a),S}},{key:"inputs",get:function(){return xl(this.componentDef.inputs)}},{key:"outputs",get:function(){return xl(this.componentDef.outputs)}}]),i}(Js),Rl=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o){var s,l,c,u;return _classCallCheck2(this,i),(s=t.call(this)).location=r,s._rootLView=a,s._tNode=o,s.destroyCbs=[],s.instance=n,s.hostView=s.changeDetectorRef=new Ga(a),l=a[1],c=a,null==(u=l.node)&&(l.node=u=Wr(0,null,2,-1,null,null)),c[6]=u,s.componentType=e,s}return _createClass(i,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new hn(this._tNode,this._rootLView)}}]),i}(function(){return function e(){_classCallCheck2(this,e)}}()),Pl=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}],Ml={};function Ll(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),i=Nl(t);if(i)return i;var n=t.split("-")[0];if(i=Nl(n))return i;if("en"===n)return Pl;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Nl(e){return e in Ml||(Ml[e]=Le.ng&&Le.ng.common&&Le.ng.common.locales&&Le.ng.common.locales[e]),Ml[e]}var Fl=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function Bl(e){var t;null==(t=e)&&function(e,t,i,n){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var Vl=new Map,jl=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;_classCallCheck2(this,i),(r=t.call(this))._parent=n,r._bootstrapComponents=[],r.injector=_assertThisInitialized(r),r.destroyCbs=[],r.componentFactoryResolver=new Ol(_assertThisInitialized(r));var a=At(e),o=e[je]||null;return o&&Bl(o),r._bootstrapComponents=Ki(a.bootstrap),r._r3Injector=ao(e,n,[{provide:nt,useValue:_assertThisInitialized(r)},{provide:Zs,useValue:r.componentFactoryResolver}],Se(e)),r._r3Injector._resolveInjectorDefTypes(),r.instance=r.get(e),r}return _createClass(i,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fo.THROW_IF_NOT_FOUND,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.Default;return e===fo||e===nt||e===We?this:this._r3Injector.get(e,t,i)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),i}(nt),Hl=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).moduleType=e,null!==At(e)&&function e(t){if(null!==t.\u0275mod.id){var i=t.\u0275mod.id;(function(e,t,i){if(t&&t!==i)throw new Error("Duplicate module registered for ".concat(e," - ").concat(Se(t)," vs ").concat(Se(t.name)))})(i,Vl.get(i),t),Vl.set(i,t)}var n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach((function(t){return e(t)}))}(e),n}return _createClass(i,[{key:"create",value:function(e){return new jl(this.moduleType,e)}}]),i}(rt);function Ul(e,t,i){var n=li()+e,r=$t();return r[n]===yr?To(r,n,i?t.call(i):t()):Ao(r,n)}function ql(e,t,i,n){return Yl($t(),li(),e,t,i,n)}function Wl(e,t,i,n,r){return Kl($t(),li(),e,t,i,n,r)}function zl(e,t,i,n,r,a,o,s){var l=li()+e,c=$t(),u=Io(c,l,i,n,r,a);return Oo(c,l+4,o)||u?To(c,l+5,s?t.call(s,i,n,r,a,o):t(i,n,r,a,o)):Ao(c,l+5)}function Gl(e,t){var i=e[t];return i===yr?void 0:i}function Yl(e,t,i,n,r,a){var o=t+i;return Oo(e,o,r)?To(e,o+1,a?n.call(a,r):n(r)):Gl(e,o+1)}function Kl(e,t,i,n,r,a,o){var s=t+i;return xo(e,s,r,a)?To(e,s+2,o?n.call(o,r,a):n(r,a)):Gl(e,s+2)}function Xl(e,t){var i,n=ei(),r=e+20;n.firstCreatePass?(i=function(e,t){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i];if(e===n.name)return n}throw new Error("The pipe '".concat(e,"' could not be found!"))}(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];var a=i.factory||(i.factory=Tt(i.type)),o=Je(Lo),s=Ji(!1),l=a();return Ji(s),Je(o),function(e,t,i,n){var r=i+20;r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),t[r]=n}(n,$t(),e,l),l}function Jl(e,t,i){var n=$t(),r=qt(n,e);return $l(n,Zl(n,e)?Yl(n,li(),t,r.transform,i,r):r.transform(i))}function Ql(e,t,i,n){var r=$t(),a=qt(r,e);return $l(r,Zl(r,e)?Kl(r,li(),t,a.transform,i,n,a):a.transform(i,n))}function Zl(e,t){return e[1].data[t+20].pure}function $l(e,t){return _o.isWrapped(t)&&(t=_o.unwrap(t),e[ci()]=yr),t}var ec=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck2(this,i),(e=t.call(this)).__isAsync=n,e}return _createClass(i,[{key:"emit",value:function(e){_get(_getPrototypeOf(i.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,n){var r,a=function(e){return null},o=function(){return null};e&&"object"==typeof e?(r=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(a=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(a=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),n&&(o=this.__isAsync?function(){setTimeout((function(){return n()}))}:function(){n()}));var s=_get(_getPrototypeOf(i.prototype),"subscribe",this).call(this,r,a,o);return e instanceof p&&e.add(s),s}}]),i}(x);function tc(){return this._results[Co()]()}var ic=function(){function e(){_classCallCheck2(this,e),this.dirty=!0,this._results=[],this.changes=new ec,this.length=0;var t=Co(),i=e.prototype;i[t]||(i[t]=tc)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,i){void 0===i&&(i=t);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?(i===t&&(i=t.slice(0,n)),e(r,i)):i!==t&&i.push(r)}return i}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),nc=function(){function e(t){_classCallCheck2(this,e),this.queryList=t,this.matches=null}return _createClass(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),rc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck2(this,e),this.queries=t}return _createClass(e,[{key:"createEmbeddedView",value:function(t){var i=t.queries;if(null!==i){for(var n=null!==t.contentQueries?t.contentQueries[0]:i.length,r=[],a=0;a<n;a++){var o=i.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new e(r)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Cc(e,t).matches&&this.queries[t].setDirty()}}]),e}(),ac=function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck2(this,e),this.predicate=t,this.descendants=i,this.isStatic=n,this.read=r},oc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck2(this,e),this.queries=t}return _createClass(e,[{key:"elementStart",value:function(e,t){for(var i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var i=null,n=0;n<this.length;n++){var r=null!==i?i.length:0,a=this.getByIndex(n).embeddedTView(t,r);a&&(a.indexInDeclarationView=n,null!==i?i.push(a):i=[a])}return null!==i?new e(i):null}},{key:"template",value:function(e,t){for(var i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"track",value:function(e){this.queries.push(e)}},{key:"length",get:function(){return this.queries.length}}]),e}(),sc=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck2(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}return _createClass(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,i){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,i),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var t=this._declarationNodeIndex,i=e.parent;null!==i&&4===i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){if(Array.isArray(this.metadata.predicate))for(var i=this.metadata.predicate,n=0;n<i.length;n++)this.matchTNodeWithReadOption(e,t,lc(t,i[n]));else{var r=this.metadata.predicate;r===_l?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,sn(t,e,r,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(e,t,i){if(null!==i){var n=this.metadata.read;if(null!==n)if(n===$s||n===El||n===_l&&0===t.type)this.addMatch(t.index,-2);else{var r=sn(t,e,n,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function lc(e,t){var i=e.localNames;if(null!==i)for(var n=0;n<i.length;n+=2)if(i[n]===t)return i[n+1];return null}function cc(e,t,i,n){return-1===i?function(e,t){return 3===e.type||4===e.type?Ya($s,e,t):0===e.type?Ka(_l,$s,e,t):null}(t,e):-2===i?function(e,t,i){return i===$s?Ya($s,t,e):i===_l?Ka(_l,$s,t,e):i===El?Xa(El,$s,t,e):void 0}(e,t,n):ln(e,e[1],i,t)}function uc(e,t,i,n){var r=t[19].queries[n];if(null===r.matches){for(var a=e.data,o=i.matches,s=[],l=0;l<o.length;l+=2){var c=o[l];s.push(c<0?null:cc(t,a[c],o[l+1],i.metadata.read))}r.matches=s}return r.matches}function hc(e){var t=$t(),i=ei(),n=vi();mi(n+1);var r=Cc(i,n);if(e.dirty&&Gt(t)===r.metadata.isStatic){if(null===r.matches)e.reset([]);else{var a=r.crossesNgTemplate?function e(t,i,n,r){var a=t.queries.getByIndex(n),o=a.matches;if(null!==o)for(var s=uc(t,i,a,n),l=0;l<o.length;l+=2){var c=o[l];if(c>0)r.push(s[l/2]);else{for(var u=o[l+1],h=i[-c],d=10;d<h.length;d++){var p=h[d];p[17]===p[3]&&e(p[1],p,u,r)}if(null!==h[9])for(var f=h[9],v=0;v<f.length;v++){var m=f[v];e(m[1],m,u,r)}}}return r}(i,t,n,[]):uc(i,t,r,n);e.reset(a),e.notifyOnChanges()}return!0}return!1}function dc(e,t,i){fc(ei(),$t(),e,t,i,!0)}function pc(e,t,i){fc(ei(),$t(),e,t,i,!1)}function fc(e,t,i,n,r,a){e.firstCreatePass&&(kc(e,new ac(i,n,a,r),-1),a&&(e.staticViewQueries=!0)),bc(e,t)}function vc(e,t,i,n){gc(ei(),$t(),t,i,n,!1,ii(),e)}function mc(e,t,i,n){gc(ei(),$t(),t,i,n,!0,ii(),e)}function gc(e,t,i,n,r,a,o,s){e.firstCreatePass&&(kc(e,new ac(i,n,a,r),o.index),function(e,t){var i=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,t)}(e,s),a&&(e.staticContentQueries=!0)),bc(e,t)}function yc(){return e=$t(),t=vi(),e[19].queries[t].queryList;var e,t}function bc(e,t){var i=new ic;!function(e,t,i,n){var r=fa(t);r.push(i),e.firstCreatePass&&va(e).push(n,r.length-1)}(e,t,i,i.destroy),null===t[19]&&(t[19]=new rc),t[19].queries.push(new nc(i))}function kc(e,t,i){null===e.queries&&(e.queries=new oc),e.queries.track(new sc(t,i))}function Cc(e,t){return e.queries.getByIndex(t)}var wc=new qe("Application Initializer"),_c=function(){var e=function(){function e(t){var i=this;_classCallCheck2(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){i.resolve=e,i.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],i=function(){e.done=!0,e.resolve()};if(this.appInits)for(var n=0;n<this.appInits.length;n++){var r=this.appInits[n]();Go(r)&&t.push(r)}Promise.all(t).then((function(){i()})).catch((function(t){e.reject(t)})),0===t.length&&i(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(wc,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e}(),Sc=new qe("AppId"),Ec={provide:Sc,useFactory:function(){return"".concat(Tc()).concat(Tc()).concat(Tc())},deps:[]};function Tc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ac=new qe("Platform Initializer"),Oc=new qe("Platform ID"),xc=new qe("appBootstrapListener"),Ic=function(){var e=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e}(),Dc=new qe("LocaleId"),Rc=new qe("DefaultCurrencyCode"),Pc=function e(t,i){_classCallCheck2(this,e),this.ngModuleFactory=t,this.componentFactories=i},Mc=function(e){return new Hl(e)},Lc=Mc,Nc=function(e){return Promise.resolve(Mc(e))},Fc=function(e){var t=Mc(e),i=Ki(At(e).declarations).reduce((function(e,t){var i=Et(t);return i&&e.push(new Dl(i)),e}),[]);return new Pc(t,i)},Bc=Fc,Vc=function(e){return Promise.resolve(Fc(e))},jc=function(){var e=function(){function e(){_classCallCheck2(this,e),this.compileModuleSync=Lc,this.compileModuleAsync=Nc,this.compileModuleAndAllComponentsSync=Bc,this.compileModuleAndAllComponentsAsync=Vc}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e}(),Hc=new qe("compilerOptions"),Uc=Promise.resolve(0);function qc(e){"undefined"==typeof Zone?Uc.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Wc=function(){function e(t){var i,n,r=t.enableLongStackTrace,a=void 0!==r&&r,o=t.shouldCoalesceEventChangeDetection,s=void 0!==o&&o;if(_classCallCheck2(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ec(!1),this.onMicrotaskEmpty=new ec(!1),this.onStable=new ec(!1),this.onError=new ec(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Le.requestAnimationFrame,t=Le.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,n=!!(i=this).shouldCoalesceEventChangeDetection&&i.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Le,(function(){e.lastRequestAnimationFrameId=-1,Kc(e),Yc(e)})),Kc(e))}(i)},i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:n},onInvokeTask:function(e,t,r,a,o,s){try{return Xc(i),e.invokeTask(r,a,o,s)}finally{n&&"eventTask"===a.type&&n(),Jc(i)}},onInvoke:function(e,t,n,r,a,o,s){try{return Xc(i),e.invoke(n,r,a,o,s)}finally{Jc(i)}},onHasTask:function(e,t,n,r){e.hasTask(n,r),t===n&&("microTask"==r.change?(i._hasPendingMicrotasks=r.microTask,Kc(i),Yc(i)):"macroTask"==r.change&&(i.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,t,n,r){return e.handleError(n,r),i.runOutsideAngular((function(){return i.onError.emit(r)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,i){return this._inner.run(e,t,i)}},{key:"runTask",value:function(e,t,i,n){var r=this._inner,a=r.scheduleEventTask("NgZoneEvent: "+n,e,Gc,zc,zc);try{return r.runTask(a,t,i)}finally{r.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,i){return this._inner.runGuarded(e,t,i)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function zc(){}var Gc={};function Yc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function Kc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Xc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Jc(e){e._nesting--,Yc(e)}var Qc,Zc=function(){function e(){_classCallCheck2(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ec,this.onMicrotaskEmpty=new ec,this.onStable=new ec,this.onError=new ec}return _createClass(e,[{key:"run",value:function(e,t,i){return e.apply(t,i)}},{key:"runGuarded",value:function(e,t,i){return e.apply(t,i)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,i,n){return e.apply(t,i)}}]),e}(),$c=function(){var e=function(){function e(t){var i=this;_classCallCheck2(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){i.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){Wc.assertNotInAngularZone(),qc((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())qc((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,i){var n=this,r=-1;t&&t>0&&(r=setTimeout((function(){n._callbacks=n._callbacks.filter((function(e){return e.timeoutId!==r})),e(n._didWork,n.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:i})}},{key:"whenStable",value:function(e,t,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,i),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,i){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(Wc))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e}(),eu=function(){var e=function(){function e(){_classCallCheck2(this,e),this._applications=new Map,tu.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return tu.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e}(),tu=new(function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,i){return null}}]),e}()),iu=function(e,t,i){var n=e.get(Hc,[]).concat(t),r=new Hl(i);if(0===mo.size)return Promise.resolve(r);var a,o,s=(a=n.map((function(e){return e.providers})),o=[],a.forEach((function(e){return e&&o.push.apply(o,_toConsumableArray2(e))})),o);if(0===s.length)return Promise.resolve(r);var l=function(){var e=Le.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),c=fo.create({providers:s}).get(l.ResourceLoader);return function(e){var t=[],i=new Map;function n(e){var t=i.get(e);if(!t){var n=function(e){return Promise.resolve(c.get(e))}(e);i.set(e,t=n.then(yo))}return t}return mo.forEach((function(e,i){var r=[];e.templateUrl&&r.push(n(e.templateUrl).then((function(t){e.template=t})));var a=e.styleUrls,o=e.styles||(e.styles=[]),s=e.styles.length;a&&a.forEach((function(t,i){o.push(""),r.push(n(t).then((function(n){o[s+i]=n,a.splice(a.indexOf(t),1),0==a.length&&(e.styleUrls=void 0)})))}));var l=Promise.all(r).then((function(){return function(e){go.delete(e)}(i)}));t.push(l)})),mo=new Map,Promise.all(t).then((function(){}))}().then((function(){return r}))},nu=new qe("AllowMultipleToken"),ru=function e(t,i){_classCallCheck2(this,e),this.name=t,this.token=i};function au(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="Platform: "+t,r=new qe(n);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=ou();if(!a||a.injector.get(nu,!1))if(e)e(i.concat(t).concat({provide:r,useValue:!0}));else{var o=i.concat(t).concat({provide:r,useValue:!0},{provide:$a,useValue:"platform"});!function(e){if(Qc&&!Qc.destroyed&&!Qc.injector.get(nu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Qc=e.get(su);var t=e.get(Ac,null);t&&t.forEach((function(e){return e()}))}(fo.create({providers:o,name:n}))}return function(e){var t=ou();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function ou(){return Qc&&!Qc.destroyed?Qc:null}var su=function(){var t=function(){function t(e){_classCallCheck2(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(t,[{key:"bootstrapModuleFactory",value:function(t,i){var n,r,a=this,o=(n=i?i.ngZone:void 0,r=i&&i.ngZoneEventCoalescing||!1,"noop"===n?new Zc:("zone.js"===n?void 0:n)||new Wc({enableLongStackTrace:xn(),shouldCoalesceEventChangeDetection:r})),s=[{provide:Wc,useValue:o}];return o.run((function(){var i=fo.create({providers:s,parent:a.injector,name:t.moduleType.name}),n=t.create(i),r=n.injector.get(gn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return hu(a._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(e){r.handleError(e)}})})),function(t,i,r){try{var o=((s=n.injector.get(_c)).runInitializers(),s.donePromise.then((function(){return Bl(n.injector.get(Dc,"en-US")||"en-US"),a._moduleDoBootstrap(n),n})));return Go(o)?o.catch((function(e){throw i.runOutsideAngular((function(){return t.handleError(e)})),e})):o}catch(e){throw i.runOutsideAngular((function(){return t.handleError(e)})),e}var s}(r,o)}))}},{key:"bootstrapModule",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=lu({},i);return iu(this.injector,n,e).then((function(e){return t.bootstrapModuleFactory(e,n)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(uu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(Se(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(Ze(fo))},t.\u0275prov=pe({token:t,factory:t.\u0275fac}),t}();function lu(e,t){return Array.isArray(t)?t.reduce(lu,e):Object.assign(Object.assign({},e),t)}var cu,uu=((cu=function(){function t(e,i,n,r,a,o){var s=this;_classCallCheck2(this,t),this._zone=e,this._console=i,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=xn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var l=new _((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new _((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){Wc.assertNotInAngularZone(),qc((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var i=s._zone.onUnstable.subscribe((function(){Wc.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),i.unsubscribe()}}));this.isStable=J(l,c.pipe((function(e){return Q()((t=ne,function(e){var i;i="function"==typeof t?t:function(){return t};var n=Object.create(e,te);return n.source=e,n.subjectFactory=i,n})(e));var t})))}return _createClass(t,[{key:"bootstrap",value:function(e,t){var i,n=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");i=e instanceof Js?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(i.componentType);var r=i.isBoundToModule?void 0:this._injector.get(nt),a=i.create(fo.NULL,[],t||i.selector,r);a.onDestroy((function(){n._unloadComponent(a)}));var o=a.injector.get($c,null);return o&&a.injector.get(eu).registerApplication(a.location.nativeElement,o),this._loadComponent(a),xn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),a}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var i,n=_createForOfIteratorHelper(this._views);try{for(n.s();!(i=n.n()).done;)i.value.detectChanges()}catch(o){n.e(o)}finally{n.f()}if(this._enforceNoNewChanges){var r,a=_createForOfIteratorHelper(this._views);try{for(a.s();!(r=a.n()).done;)r.value.checkNoChanges()}catch(o){a.e(o)}finally{a.f()}}}catch(e){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(e)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;hu(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(xc,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),hu(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}()).\u0275fac=function(e){return new(e||cu)(Ze(Wc),Ze(Ic),Ze(fo),Ze(gn),Ze(Zs),Ze(_c))},cu.\u0275prov=pe({token:cu,factory:cu.\u0275fac}),cu);function hu(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}var du=function e(){_classCallCheck2(this,e)},pu=function e(){_classCallCheck2(this,e)},fu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},vu=function(){var e=function(){function e(t,i){_classCallCheck2(this,e),this._compiler=t,this._config=i||fu}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,i=_slicedToArray(e.split("#"),2),r=i[0],a=i[1];return void 0===a&&(a="default"),n("zn8P")(r).then((function(e){return e[a]})).then((function(e){return mu(e,r,a)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),i=t[0],r=t[1],a="NgFactory";return void 0===r&&(r="default",a=""),n("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then((function(e){return e[r+a]})).then((function(e){return mu(e,i,r)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Ze(jc),Ze(pu,8))},e.\u0275prov=pe({token:e,factory:e.\u0275fac}),e}();function mu(e,t,i){if(!e)throw new Error("Cannot find '".concat(i,"' in '").concat(t,"'"));return e}var gu=au(null,"core",[{provide:Oc,useValue:"unknown"},{provide:su,deps:[fo]},{provide:eu,deps:[]},{provide:Ic,deps:[]}]),yu=[{provide:uu,useClass:uu,deps:[Wc,Ic,fo,gn,Zs,_c]},{provide:Il,deps:[Wc],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:_c,useClass:_c,deps:[[new se,wc]]},{provide:jc,useClass:jc,deps:[]},Ec,{provide:yl,useFactory:function(){return Cl},deps:[]},{provide:bl,useFactory:function(){return wl},deps:[]},{provide:Dc,useFactory:function(e){return Bl(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new oe(Dc),new se,new ce]]},{provide:Rc,useValue:"USD"}],bu=function(){var e=function e(t){_classCallCheck2(this,e)};return e.\u0275mod=Ct({type:e}),e.\u0275inj=ve({factory:function(t){return new(t||e)(Ze(uu))},providers:yu}),e}(),ku={apiKey:"AIzaSyCltKxu01z70siY0DplpPBcaTXXL2VCHSQ",authDomain:"fellowgenius-8606c.firebaseapp.com",databaseURL:"https://fellowgenius-8606c.firebaseio.com",projectId:"fellowgenius-8606c",storageBucket:"fellowgenius-8606c.appspot.com",messagingSenderId:"284007218397",appId:"1:284007218397:web:246d802f5758e9ffcbef34",measurementId:"G-ZDRYSC5RL4"},Cu=null;function wu(){return Cu}var _u,Su=new qe("DocumentToken"),Eu=((_u=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||_u)},_u.\u0275prov=pe({factory:Tu,token:_u,providedIn:"platform"}),_u);function Tu(){return Ze(xu)}var Au,Ou=new qe("Location Initialized"),xu=((Au=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this))._doc=e,n._init(),n}return _createClass(i,[{key:"_init",value:function(){this.location=wu().getLocation(),this._history=wu().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return wu().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){wu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){wu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,i){Iu()?this._history.pushState(e,t,i):this.location.hash=i}},{key:"replaceState",value:function(e,t,i){Iu()?this._history.replaceState(e,t,i):this.location.hash=i}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),i}(Eu)).\u0275fac=function(e){return new(e||Au)(Ze(Su))},Au.\u0275prov=pe({factory:Du,token:Au,providedIn:"platform"}),Au);function Iu(){return!!window.history.pushState}function Du(){return new xu(Ze(Su))}function Ru(e,t){if(0==e.length)return t;if(0==t.length)return e;var i=0;return e.endsWith("/")&&i++,t.startsWith("/")&&i++,2==i?e+t.substring(1):1==i?e+t:e+"/"+t}function Pu(e){var t=e.match(/#|\?|$/),i=t&&t.index||e.length;return e.slice(0,i-("/"===e[i-1]?1:0))+e.slice(i)}function Mu(e){return e&&"?"!==e[0]?"?"+e:e}var Lu,Nu=((Lu=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||Lu)},Lu.\u0275prov=pe({factory:Fu,token:Lu,providedIn:"root"}),Lu);function Fu(e){var t=Ze(Su).location;return new Uu(Ze(Eu),t&&t.origin||"")}var Bu,Vu,ju,Hu=new qe("appBaseHref"),Uu=((ju=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;if(_classCallCheck2(this,i),(r=t.call(this))._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,_possibleConstructorReturn(r)}return _createClass(i,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return Ru(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Mu(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?"".concat(t).concat(i):t}},{key:"pushState",value:function(e,t,i,n){var r=this.prepareExternalUrl(i+Mu(n));this._platformLocation.pushState(e,t,r)}},{key:"replaceState",value:function(e,t,i,n){var r=this.prepareExternalUrl(i+Mu(n));this._platformLocation.replaceState(e,t,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),i}(Nu)).\u0275fac=function(e){return new(e||ju)(Ze(Eu),Ze(Hu,8))},ju.\u0275prov=pe({token:ju,factory:ju.\u0275fac}),ju),qu=((Vu=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this))._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return _createClass(i,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=Ru(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,i,n){var r=this.prepareExternalUrl(i+Mu(n));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}},{key:"replaceState",value:function(e,t,i,n){var r=this.prepareExternalUrl(i+Mu(n));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),i}(Nu)).\u0275fac=function(e){return new(e||Vu)(Ze(Eu),Ze(Hu,8))},Vu.\u0275prov=pe({token:Vu,factory:Vu.\u0275fac}),Vu),Wu=((Bu=function(){function e(t,i){var n=this;_classCallCheck2(this,e),this._subject=new ec,this._urlChangeListeners=[],this._platformStrategy=t;var r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Pu(Gu(r)),this._platformStrategy.onPopState((function(e){n._subject.emit({url:n.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Mu(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Gu(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(i,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Mu(t)),i)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(i,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Mu(t)),i)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(i){return i(e,t)}))}},{key:"subscribe",value:function(e,t,i){return this._subject.subscribe({next:e,error:t,complete:i})}}]),e}()).\u0275fac=function(e){return new(e||Bu)(Ze(Nu),Ze(Eu))},Bu.normalizeQueryParams=Mu,Bu.joinWithSlash=Ru,Bu.stripTrailingSlash=Pu,Bu.\u0275prov=pe({factory:zu,token:Bu,providedIn:"root"}),Bu);function zu(){return new Wu(Ze(Nu),Ze(Eu))}function Gu(e){return e.replace(/\/index.html$/,"")}var Yu=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Ku=function(){var e={Format:0,Standalone:1};return e[e.Format]="Format",e[e.Standalone]="Standalone",e}(),Xu=function(){var e={Narrow:0,Abbreviated:1,Wide:2,Short:3};return e[e.Narrow]="Narrow",e[e.Abbreviated]="Abbreviated",e[e.Wide]="Wide",e[e.Short]="Short",e}(),Ju=function(){var e={Short:0,Medium:1,Long:2,Full:3};return e[e.Short]="Short",e[e.Medium]="Medium",e[e.Long]="Long",e[e.Full]="Full",e}(),Qu=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function Zu(e,t){return nh(Ll(e)[Fl.DateFormat],t)}function $u(e,t){return nh(Ll(e)[Fl.TimeFormat],t)}function eh(e,t){return nh(Ll(e)[Fl.DateTimeFormat],t)}function th(e,t){var i=Ll(e),n=i[Fl.NumberSymbols][t];if(void 0===n){if(t===Qu.CurrencyDecimal)return i[Fl.NumberSymbols][Qu.Decimal];if(t===Qu.CurrencyGroup)return i[Fl.NumberSymbols][Qu.Group]}return n}function ih(e){if(!e[Fl.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(e[Fl.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function nh(e,t){for(var i=t;i>-1;i--)if(void 0!==e[i])return e[i];throw new Error("Locale data API: locale data undefined")}function rh(e){var t=_slicedToArray(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}var ah=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,oh={},sh=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,lh=function(){var e={Short:0,ShortGMT:1,Long:2,Extended:3};return e[e.Short]="Short",e[e.ShortGMT]="ShortGMT",e[e.Long]="Long",e[e.Extended]="Extended",e}(),ch=function(){var e={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return e[e.FullYear]="FullYear",e[e.Month]="Month",e[e.Date]="Date",e[e.Hours]="Hours",e[e.Minutes]="Minutes",e[e.Seconds]="Seconds",e[e.FractionalSeconds]="FractionalSeconds",e[e.Day]="Day",e}(),uh=function(){var e={DayPeriods:0,Days:1,Months:2,Eras:3};return e[e.DayPeriods]="DayPeriods",e[e.Days]="Days",e[e.Months]="Months",e[e.Eras]="Eras",e}();function hh(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,i){return null!=t&&i in t?t[i]:e}))),e}function dh(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,a=i));for(var o=String(e);o.length<t;)o="0"+o;return n&&(o=o.substr(o.length-t)),a+o}function ph(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(a,o){var s,l=function(e,t){switch(e){case ch.FullYear:return t.getFullYear();case ch.Month:return t.getMonth();case ch.Date:return t.getDate();case ch.Hours:return t.getHours();case ch.Minutes:return t.getMinutes();case ch.Seconds:return t.getSeconds();case ch.FractionalSeconds:return t.getMilliseconds();case ch.Day:return t.getDay();default:throw new Error('Unknown DateType value "'.concat(e,'".'))}}(e,a);if((i>0||l>-i)&&(l+=i),e===ch.Hours)0===l&&-12===i&&(l=12);else if(e===ch.FractionalSeconds)return s=t,dh(l,3).substr(0,s);var c=th(o,Qu.MinusSign);return dh(l,t,c,n,r)}}function fh(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ku.Format,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(r,a){return function(e,t,i,n,r,a){switch(i){case uh.Months:return function(e,t,i){var n=Ll(e),r=nh([n[Fl.MonthsFormat],n[Fl.MonthsStandalone]],t);return nh(r,i)}(t,r,n)[e.getMonth()];case uh.Days:return function(e,t,i){var n=Ll(e),r=nh([n[Fl.DaysFormat],n[Fl.DaysStandalone]],t);return nh(r,i)}(t,r,n)[e.getDay()];case uh.DayPeriods:var o=e.getHours(),s=e.getMinutes();if(a){var l,c=function(e){var t=Ll(e);return ih(t),(t[Fl.ExtraData][2]||[]).map((function(e){return"string"==typeof e?rh(e):[rh(e[0]),rh(e[1])]}))}(t),u=function(e,t,i){var n=Ll(e);ih(n);var r=nh([n[Fl.ExtraData][0],n[Fl.ExtraData][1]],t)||[];return nh(r,i)||[]}(t,r,n);if(c.forEach((function(e,t){if(Array.isArray(e)){var i=e[0],n=i.hours,r=i.minutes,a=e[1],c=a.hours,h=a.minutes;o>=n&&s>=r&&(o<c||o===c&&s<h)&&(l=u[t])}else{var d=e.hours,p=e.minutes;d===o&&p===s&&(l=u[t])}})),l)return l}return function(e,t,i){var n=Ll(e),r=nh([n[Fl.DayPeriodsFormat],n[Fl.DayPeriodsStandalone]],t);return nh(r,i)}(t,r,n)[o<12?0:1];case uh.Eras:return function(e,t){return nh(Ll(e)[Fl.Eras],t)}(t,n)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+i)}}(r,a,e,t,i,n)}}function vh(e){return function(t,i,n){var r=-1*n,a=th(i,Qu.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case lh.Short:return(r>=0?"+":"")+dh(o,2,a)+dh(Math.abs(r%60),2,a);case lh.ShortGMT:return"GMT"+(r>=0?"+":"")+dh(o,1,a);case lh.Long:return"GMT"+(r>=0?"+":"")+dh(o,2,a)+":"+dh(Math.abs(r%60),2,a);case lh.Extended:return 0===n?"Z":(r>=0?"+":"")+dh(o,2,a)+":"+dh(Math.abs(r%60),2,a);default:throw new Error('Unknown zone width "'.concat(e,'"'))}}}function mh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(i,n){var r,a,o,s;if(t){var l=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,c=i.getDate();r=1+Math.floor((c+l)/7)}else{var u=(a=i.getFullYear(),o=new Date(a,0,1).getDay(),new Date(a,0,1+(o<=4?4:11)-o)),h=(s=i,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-u.getTime();r=1+Math.round(h/6048e5)}return dh(r,e,th(n,Qu.MinusSign))}}var gh={};function yh(e,t){e=e.replace(/:/g,"");var i=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(i)?t:i}function bh(e){return e instanceof Date&&!isNaN(e.valueOf())}var kh,Ch=function e(){_classCallCheck2(this,e)},wh=((kh=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).locale=e,n}return _createClass(i,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return Ll(e)[Fl.PluralCase]}(t||this.locale)(e)){case Yu.Zero:return"zero";case Yu.One:return"one";case Yu.Two:return"two";case Yu.Few:return"few";case Yu.Many:return"many";default:return"other"}}}]),i}(Ch)).\u0275fac=function(e){return new(e||kh)(Ze(Dc))},kh.\u0275prov=pe({token:kh,factory:kh.\u0275fac}),kh);function _h(e,t){t=encodeURIComponent(t);var i,n=_createForOfIteratorHelper(e.split(";"));try{for(n.s();!(i=n.n()).done;){var r=i.value,a=r.indexOf("="),o=_slicedToArray(-1==a?[r,""]:[r.slice(0,a),r.slice(a+1)],2),s=o[0],l=o[1];if(s.trim()===t)return decodeURIComponent(l)}}catch(c){n.e(c)}finally{n.f()}return null}var Sh,Eh,Th,Ah=((Sh=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Se(e.item));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(i){return t._toggleClass(i,!!e[i])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var i=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?i._renderer.addClass(i._ngEl.nativeElement,e):i._renderer.removeClass(i._ngEl.nativeElement,e)}))}},{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(So(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}}]),e}()).\u0275fac=function(e){return new(e||Sh)(Lo(yl),Lo(bl),Lo($s),Lo(nl))},Sh.\u0275dir=_t({type:Sh,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Sh),Oh=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.$implicit=t,this.ngForOf=i,this.index=n,this.count=r}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),xh=((Eh=function(){function e(t,i,n){_classCallCheck2(this,e),this._viewContainer=t,this._template=i,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}},{key:"_applyChanges",value:function(e){var t=this,i=[];e.forEachOperation((function(e,n,r){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new Oh(null,t._ngForOf,-1,-1),null===r?void 0:r),o=new Ih(e,a);i.push(o)}else if(null==r)t._viewContainer.remove(null===n?void 0:n);else if(null!==n){var s=t._viewContainer.get(n);t._viewContainer.move(s,r);var l=new Ih(e,s);i.push(l)}}));for(var n=0;n<i.length;n++)this._perViewChange(i[n].view,i[n].record);for(var r=0,a=this._viewContainer.length;r<a;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}},{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(e){xn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=e},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Eh)(Lo(El),Lo(_l),Lo(yl))},Eh.\u0275dir=_t({type:Eh,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Eh),Ih=function e(t,i){_classCallCheck2(this,e),this.record=t,this.view=i},Dh=((Th=function(){function e(t,i){_classCallCheck2(this,e),this._viewContainer=t,this._context=new Rh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){Ph("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){Ph("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Th)(Lo(El),Lo(_l))},Th.\u0275dir=_t({type:Th,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Th),Rh=function e(){_classCallCheck2(this,e),this.$implicit=null,this.ngIf=null};function Ph(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(Se(t),"'."))}var Mh,Lh,Nh,Fh,Bh,Vh=function(){function e(t,i){_classCallCheck2(this,e),this._viewContainerRef=t,this._templateRef=i,this._created=!1}return _createClass(e,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}]),e}(),jh=((Bh=function(){function e(){_classCallCheck2(this,e),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _createClass(e,[{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}},{key:"_matchCase",value:function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}},{key:"_updateDefaultCases",value:function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}},{key:"ngSwitch",set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}}]),e}()).\u0275fac=function(e){return new(e||Bh)},Bh.\u0275dir=_t({type:Bh,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Bh),Hh=((Fh=function(){function e(t,i,n){_classCallCheck2(this,e),this.ngSwitch=n,n._addCase(),this._view=new Vh(t,i)}return _createClass(e,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),e}()).\u0275fac=function(e){return new(e||Fh)(Lo(El),Lo(_l),Lo(jh,1))},Fh.\u0275dir=_t({type:Fh,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Fh),Uh=((Nh=function e(t,i,n){_classCallCheck2(this,e),n._addDefault(new Vh(t,i))}).\u0275fac=function(e){return new(e||Nh)(Lo(El),Lo(_l),Lo(jh,1))},Nh.\u0275dir=_t({type:Nh,selectors:[["","ngSwitchDefault",""]]}),Nh),qh=((Lh=function(){function e(t,i,n){_classCallCheck2(this,e),this._ngEl=t,this._differs=i,this._renderer=n,this._ngStyle=null,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}},{key:"_setStyle",value:function(e,t){var i=_slicedToArray(e.split("."),2),n=i[0],r=i[1];null!=(t=null!=t&&r?"".concat(t).concat(r):t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}},{key:"_applyChanges",value:function(e){var t=this;e.forEachRemovedItem((function(e){return t._setStyle(e.key,null)})),e.forEachAddedItem((function(e){return t._setStyle(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._setStyle(e.key,e.currentValue)}))}},{key:"ngStyle",set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}}]),e}()).\u0275fac=function(e){return new(e||Lh)(Lo($s),Lo(bl),Lo(nl))},Lh.\u0275dir=_t({type:Lh,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Lh),Wh=((Mh=function(){function e(t){_classCallCheck2(this,e),this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return _createClass(e,[{key:"ngOnChanges",value:function(e){if(this._shouldRecreateView(e)){var t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}},{key:"_hasContextShapeChanged",value:function(e){var t=Object.keys(e.previousValue||{}),i=Object.keys(e.currentValue||{});if(t.length===i.length){var n,r=_createForOfIteratorHelper(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(-1===t.indexOf(a))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];this._viewRef.context[n]=this.ngTemplateOutletContext[n]}}}]),e}()).\u0275fac=function(e){return new(e||Mh)(Lo(El))},Mh.\u0275dir=_t({type:Mh,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Vs]}),Mh);function zh(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(Se(e),"'"))}var Gh,Yh,Kh,Xh,Jh=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),Qh=new(function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.then(t,(function(e){throw e}))}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),Zh=new Jh,$h=((Xh=function(){function e(t){_classCallCheck2(this,e),this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):wo(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,_o.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,(function(i){return t._updateLatestValue(e,i)}))}},{key:"_selectStrategy",value:function(t){if(Go(t))return Qh;if(Yo(t))return Zh;throw zh(e,t)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}()).\u0275fac=function(e){return new(e||Xh)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue.Default,t=Ja(!0);if(null!=t||e&ue.Optional)return t;throw new Error("No provider for ChangeDetectorRef!")}())},Xh.\u0275pipe=St({name:"async",type:Xh,pure:!1}),Xh),ed=((Kh=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"transform",value:function(t){if(!t)return t;if("string"!=typeof t)throw zh(e,t);return t.toUpperCase()}}]),e}()).\u0275fac=function(e){return new(e||Kh)},Kh.\u0275pipe=St({name:"uppercase",type:Kh,pure:!0}),Kh),td=((Yh=function(){function e(t){_classCallCheck2(this,e),this.locale=t}return _createClass(e,[{key:"transform",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(null==t||""===t||t!=t)return null;try{return function(e,t,i,n){var r=function(e){if(bh(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,i=parseFloat(e);if(!isNaN(e-i))return new Date(i);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var n=_slicedToArray(e.split("-").map((function(e){return+e})),3),r=n[0],a=n[1],o=n[2];return new Date(r,a-1,o)}if(t=e.match(ah))return function(e){var t=new Date(0),i=0,n=0,r=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(i=Number(e[9]+e[10]),n=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var o=Number(e[4]||0)-i,s=Number(e[5]||0)-n,l=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(t,o,s,l,c),t}(t)}var s=new Date(e);if(!bh(s))throw new Error('Unable to convert "'.concat(e,'" into a date'));return s}(e);t=function e(t,i){var n=function(e){return Ll(e)[Fl.LocaleId]}(t);if(oh[n]=oh[n]||{},oh[n][i])return oh[n][i];var r="";switch(i){case"shortDate":r=Zu(t,Ju.Short);break;case"mediumDate":r=Zu(t,Ju.Medium);break;case"longDate":r=Zu(t,Ju.Long);break;case"fullDate":r=Zu(t,Ju.Full);break;case"shortTime":r=$u(t,Ju.Short);break;case"mediumTime":r=$u(t,Ju.Medium);break;case"longTime":r=$u(t,Ju.Long);break;case"fullTime":r=$u(t,Ju.Full);break;case"short":var a=e(t,"shortTime"),o=e(t,"shortDate");r=hh(eh(t,Ju.Short),[a,o]);break;case"medium":var s=e(t,"mediumTime"),l=e(t,"mediumDate");r=hh(eh(t,Ju.Medium),[s,l]);break;case"long":var c=e(t,"longTime"),u=e(t,"longDate");r=hh(eh(t,Ju.Long),[c,u]);break;case"full":var h=e(t,"fullTime"),d=e(t,"fullDate");r=hh(eh(t,Ju.Full),[h,d])}return r&&(oh[n][i]=r),r}(i,t)||t;for(var a,o=[];t;){if(!(a=sh.exec(t))){o.push(t);break}var s=(o=o.concat(a.slice(1))).pop();if(!s)break;t=s}var l=r.getTimezoneOffset();n&&(l=yh(n,l),r=function(e,t,i){var n=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(yh(t,n)-n))}(r,n));var c="";return o.forEach((function(e){var t=function(e){if(gh[e])return gh[e];var t;switch(e){case"G":case"GG":case"GGG":t=fh(uh.Eras,Xu.Abbreviated);break;case"GGGG":t=fh(uh.Eras,Xu.Wide);break;case"GGGGG":t=fh(uh.Eras,Xu.Narrow);break;case"y":t=ph(ch.FullYear,1,0,!1,!0);break;case"yy":t=ph(ch.FullYear,2,0,!0,!0);break;case"yyy":t=ph(ch.FullYear,3,0,!1,!0);break;case"yyyy":t=ph(ch.FullYear,4,0,!1,!0);break;case"M":case"L":t=ph(ch.Month,1,1);break;case"MM":case"LL":t=ph(ch.Month,2,1);break;case"MMM":t=fh(uh.Months,Xu.Abbreviated);break;case"MMMM":t=fh(uh.Months,Xu.Wide);break;case"MMMMM":t=fh(uh.Months,Xu.Narrow);break;case"LLL":t=fh(uh.Months,Xu.Abbreviated,Ku.Standalone);break;case"LLLL":t=fh(uh.Months,Xu.Wide,Ku.Standalone);break;case"LLLLL":t=fh(uh.Months,Xu.Narrow,Ku.Standalone);break;case"w":t=mh(1);break;case"ww":t=mh(2);break;case"W":t=mh(1,!0);break;case"d":t=ph(ch.Date,1);break;case"dd":t=ph(ch.Date,2);break;case"E":case"EE":case"EEE":t=fh(uh.Days,Xu.Abbreviated);break;case"EEEE":t=fh(uh.Days,Xu.Wide);break;case"EEEEE":t=fh(uh.Days,Xu.Narrow);break;case"EEEEEE":t=fh(uh.Days,Xu.Short);break;case"a":case"aa":case"aaa":t=fh(uh.DayPeriods,Xu.Abbreviated);break;case"aaaa":t=fh(uh.DayPeriods,Xu.Wide);break;case"aaaaa":t=fh(uh.DayPeriods,Xu.Narrow);break;case"b":case"bb":case"bbb":t=fh(uh.DayPeriods,Xu.Abbreviated,Ku.Standalone,!0);break;case"bbbb":t=fh(uh.DayPeriods,Xu.Wide,Ku.Standalone,!0);break;case"bbbbb":t=fh(uh.DayPeriods,Xu.Narrow,Ku.Standalone,!0);break;case"B":case"BB":case"BBB":t=fh(uh.DayPeriods,Xu.Abbreviated,Ku.Format,!0);break;case"BBBB":t=fh(uh.DayPeriods,Xu.Wide,Ku.Format,!0);break;case"BBBBB":t=fh(uh.DayPeriods,Xu.Narrow,Ku.Format,!0);break;case"h":t=ph(ch.Hours,1,-12);break;case"hh":t=ph(ch.Hours,2,-12);break;case"H":t=ph(ch.Hours,1);break;case"HH":t=ph(ch.Hours,2);break;case"m":t=ph(ch.Minutes,1);break;case"mm":t=ph(ch.Minutes,2);break;case"s":t=ph(ch.Seconds,1);break;case"ss":t=ph(ch.Seconds,2);break;case"S":t=ph(ch.FractionalSeconds,1);break;case"SS":t=ph(ch.FractionalSeconds,2);break;case"SSS":t=ph(ch.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=vh(lh.Short);break;case"ZZZZZ":t=vh(lh.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=vh(lh.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=vh(lh.Long);break;default:return null}return gh[e]=t,t}(e);c+=t?t(r,i,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),c}(t,i,r||this.locale,n)}catch(a){throw zh(e,a.message)}}}]),e}()).\u0275fac=function(e){return new(e||Yh)(Lo(Dc))},Yh.\u0275pipe=St({name:"date",type:Yh,pure:!0}),Yh),id=((Gh=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Gh}),Gh.\u0275inj=ve({factory:function(e){return new(e||Gh)},providers:[{provide:Ch,useClass:wh}]}),Gh);function nd(e){return"browser"===e}var rd,ad,od,sd,ld,cd=((rd=function e(){_classCallCheck2(this,e)}).\u0275prov=pe({token:rd,providedIn:"root",factory:function(){return new ud(Ze(Su),window,Ze(gn))}}),rd),ud=function(){function t(e,i,n){_classCallCheck2(this,t),this.document=e,this.window=i,this.errorHandler=n,this.offset=function(){return[0,0]}}return _createClass(t,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var i=this.document.querySelector("#"+t);if(i)return void this.scrollToElement(i);var n=this.document.querySelector("[name='".concat(t,"']"));if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,n=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(i-r[0],n-r[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),t}(),hd=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,i){return e.addEventListener(t,i,!1),function(){e.removeEventListener(t,i,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,i=dd||(dd=document.querySelector("base"))?dd.getAttribute("href"):null;return null==i?null:(t=i,ad||(ad=document.createElement("a")),ad.setAttribute("href",t),"/"===ad.pathname.charAt(0)?ad.pathname:"/"+ad.pathname)}},{key:"resetBaseElement",value:function(){dd=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return _h(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new i,Cu||(Cu=e)}}]),i}(function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.call(this)}return _createClass(i,[{key:"supportsDOMEvents",value:function(){return!0}}]),i}(function(){return function e(){_classCallCheck2(this,e)}}())),dd=null,pd=new qe("TRANSITION_ID"),fd=[{provide:wc,useFactory:function(e,t,i){return function(){i.get(_c).donePromise.then((function(){var i=wu();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return i.remove(e)}))}))}},deps:[pd,Su,fo],multi:!0}],vd=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Le.getAngularTestability=function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.findTestabilityInTree(t,i);if(null==n)throw new Error("Could not find testability for element.");return n},Le.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Le.getAllAngularRootElements=function(){return e.getAllRootElements()},Le.frameworkStabilizers||(Le.frameworkStabilizers=[]),Le.frameworkStabilizers.push((function(e){var t=Le.getAllAngularTestabilities(),i=t.length,n=!1,r=function(t){n=n||t,0==--i&&e(n)};t.forEach((function(e){e.whenStable(r)}))}))}},{key:"findTestabilityInTree",value:function(e,t,i){if(null==t)return null;var n=e.getTestability(t);return null!=n?n:i?wu().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){!function(e){tu=e}(new e)}}]),e}(),md=new qe("EventManagerPlugins"),gd=((od=function(){function e(t,i){var n=this;_classCallCheck2(this,e),this._zone=i,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=n})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,i){return this._findPluginFor(t).addEventListener(e,t,i)}},{key:"addGlobalEventListener",value:function(e,t,i){return this._findPluginFor(t).addGlobalEventListener(e,t,i)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var i=this._plugins,n=0;n<i.length;n++){var r=i[n];if(r.supports(e))return this._eventNameToPlugin.set(e,r),r}throw new Error("No event manager plugin found for event "+e)}}]),e}()).\u0275fac=function(e){return new(e||od)(Ze(md),Ze(Wc))},od.\u0275prov=pe({token:od,factory:od.\u0275fac}),od),yd=function(){function e(t){_classCallCheck2(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,i){var n=wu().getGlobalEventTarget(this._doc,e);if(!n)throw new Error("Unsupported event target ".concat(n," for event ").concat(t));return this.addEventListener(n,t,i)}}]),e}(),bd=((ld=function(){function e(){_classCallCheck2(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,i=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),i.add(e))})),this.onStylesAdded(i)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||ld)},ld.\u0275prov=pe({token:ld,factory:ld.\u0275fac}),ld),kd=((sd=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this))._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return _createClass(i,[{key:"_addStylesToHost",value:function(e,t){var i=this;e.forEach((function(e){var n=i._doc.createElement("style");n.textContent=e,i._styleNodes.add(t.appendChild(n))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(i){return t._addStylesToHost(e,i)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return wu().remove(e)}))}}]),i}(bd)).\u0275fac=function(e){return new(e||sd)(Ze(Su))},sd.\u0275prov=pe({token:sd,factory:sd.\u0275fac}),sd),Cd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wd=/%COMP%/g;function _d(e,t,i){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?_d(e,r,i):(r=r.replace(wd,e),i.push(r))}return i}function Sd(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Ed,Td,Ad,Od,xd,Id,Dd=((Ed=function(){function e(t,i,n){_classCallCheck2(this,e),this.eventManager=t,this.sharedStylesHost=i,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Rd(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case pt.Emulated:var i=this.rendererByCompId.get(t.id);return i||(i=new Pd(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,i)),i.applyToHost(e),i;case pt.Native:case pt.ShadowDom:return new Md(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var n=_d(t.id,t.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ed)(Ze(gd),Ze(kd),Ze(Sc))},Ed.\u0275prov=pe({token:Ed,factory:Ed.\u0275fac}),Ed),Rd=function(){function e(t){_classCallCheck2(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Cd[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,i){e&&e.insertBefore(t,i)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(i.textContent=""),i}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,i,n){if(n){t=n+":"+t;var r=Cd[n];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}},{key:"removeAttribute",value:function(e,t,i){if(i){var n=Cd[i];n?e.removeAttributeNS(n,t):e.removeAttribute("".concat(i,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,i,n){n&il.DashCase?e.style.setProperty(t,i,n&il.Important?"important":""):e.style[t]=i}},{key:"removeStyle",value:function(e,t,i){i&il.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,i){e[t]=i}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Sd(i)):this.eventManager.addEventListener(e,t,Sd(i))}}]),e}(),Pd=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;_classCallCheck2(this,i),(o=t.call(this,e)).component=r;var s,l=_d(a+"-"+r.id,r.styles,[]);return n.addStyles(l),o.contentAttr="_ngcontent-%COMP%".replace(wd,a+"-"+r.id),o.hostAttr=(s=a+"-"+r.id,"_nghost-%COMP%".replace(wd,s)),o}return _createClass(i,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(i.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var n=_get(_getPrototypeOf(i.prototype),"createElement",this).call(this,e,t);return _get(_getPrototypeOf(i.prototype),"setAttribute",this).call(this,n,this.contentAttr,""),n}}]),i}(Rd),Md=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;_classCallCheck2(this,i),(o=t.call(this,e)).sharedStylesHost=n,o.hostEl=r,o.component=a,o.shadowRoot=a.encapsulation===pt.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=_d(a.id,a.styles,[]),l=0;l<s.length;l++){var c=document.createElement("style");c.textContent=s[l],o.shadowRoot.appendChild(c)}return o}return _createClass(i,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return _get(_getPrototypeOf(i.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,n){return _get(_getPrototypeOf(i.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,n)}},{key:"removeChild",value:function(e,t){return _get(_getPrototypeOf(i.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(i.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),i}(Rd),Ld=((Td=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){return _classCallCheck2(this,i),t.call(this,e)}return _createClass(i,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,i){var n=this;return e.addEventListener(t,i,!1),function(){return n.removeEventListener(e,t,i)}}},{key:"removeEventListener",value:function(e,t,i){return e.removeEventListener(t,i)}}]),i}(yd)).\u0275fac=function(e){return new(e||Td)(Ze(Su))},Td.\u0275prov=pe({token:Td,factory:Td.\u0275fac}),Td),Nd=["alt","control","meta","shift"],Fd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vd={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},jd=((xd=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){return _classCallCheck2(this,i),t.call(this,e)}return _createClass(i,[{key:"supports",value:function(e){return null!=i.parseEventName(e)}},{key:"addEventListener",value:function(e,t,n){var r=i.parseEventName(t),a=i.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return wu().onAndCancel(e,r.domEventName,a)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),n=t.shift();if(0===t.length||"keydown"!==n&&"keyup"!==n)return null;var r=i._normalizeKey(t.pop()),a="";if(Nd.forEach((function(e){var i=t.indexOf(e);i>-1&&(t.splice(i,1),a+=e+".")})),a+=r,0!=t.length||0===r.length)return null;var o={};return o.domEventName=n,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",i=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Bd.hasOwnProperty(t)&&(t=Bd[t]))}return Fd[t]||t}(e);return" "===(i=i.toLowerCase())?i="space":"."===i&&(i="dot"),Nd.forEach((function(n){n!=i&&(0,Vd[n])(e)&&(t+=n+".")})),t+=i}},{key:"eventCallback",value:function(e,t,n){return function(r){i.getEventFullKey(r)===e&&n.runGuarded((function(){return t(r)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),i}(yd)).\u0275fac=function(e){return new(e||xd)(Ze(Su))},xd.\u0275prov=pe({token:xd,factory:xd.\u0275fac}),xd),Hd=((Od=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||Od)},Od.\u0275prov=pe({factory:function(){return Ze(Ud)},token:Od,providedIn:"root"}),Od),Ud=((Ad=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this))._doc=e,n}return _createClass(i,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case Zn.NONE:return t;case Zn.HTML:return En(t,"HTML")?Sn(t):Jn(this._doc,String(t));case Zn.STYLE:return En(t,"Style")?Sn(t):function(e){if(!(e=String(e).trim()))return"";var t=e.match(er);return t&&Pn(t[1])===t[1]||e.match($n)&&function(e){for(var t=!0,i=!0,n=0;n<e.length;n++){var r=e.charAt(n);"'"===r&&i?t=!t:'"'===r&&t&&(i=!i)}return t&&i}(e)?e:(xn()&&console.warn("WARNING: sanitizing unsafe style value ".concat(e," (see http://g.co/ng/security#xss).")),"unsafe")}(t);case Zn.SCRIPT:if(En(t,"Script"))return Sn(t);throw new Error("unsafe value used in a script context");case Zn.URL:return Tn(t),En(t,"URL")?Sn(t):Pn(String(t));case Zn.RESOURCE_URL:if(En(t,"ResourceURL"))return Sn(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return new bn(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new kn(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new Cn(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new wn(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new _n(e)}}]),i}(Hd)).\u0275fac=function(e){return new(e||Ad)(Ze(Su))},Ad.\u0275prov=pe({factory:function(){return e=Ze(We),new Ud(e.get(Su));var e},token:Ad,providedIn:"root"}),Ad),qd=au(gu,"browser",[{provide:Oc,useValue:"browser"},{provide:Ac,useValue:function(){hd.makeCurrent(),vd.init()},multi:!0},{provide:Su,useFactory:function(){return function(e){Lt=e}(document),document},deps:[]}]),Wd=[[],{provide:$a,useValue:"root"},{provide:gn,useFactory:function(){return new gn},deps:[]},{provide:md,useClass:Ld,multi:!0,deps:[Su,Wc,Oc]},{provide:md,useClass:jd,multi:!0,deps:[Su]},[],{provide:Dd,useClass:Dd,deps:[gd,kd,Sc]},{provide:tl,useExisting:Dd},{provide:bd,useExisting:kd},{provide:kd,useClass:kd,deps:[Su]},{provide:$c,useClass:$c,deps:[Wc]},{provide:gd,useClass:gd,deps:[md,Wc]},[]],zd=((Id=function(){function e(t){if(_classCallCheck2(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Sc,useValue:t.appId},{provide:pd,useExisting:Sc},fd]}}}]),e}()).\u0275mod=Ct({type:Id}),Id.\u0275inj=ve({factory:function(e){return new(e||Id)(Ze(Id,12))},providers:Wd,imports:[id,bu]}),Id);function Gd(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[t.length-1];return D(n)?(t.pop(),q(t,n)):X(t)}"undefined"!=typeof window&&window;var Yd=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this))._value=e,n}return _createClass(i,[{key:"_subscribe",value:function(e){var t=_get(_getPrototypeOf(i.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new T;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(i.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),i}(x),Kd=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Xd={};function Jd(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=null,r=null;return D(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),X(t,r).lift(new Qd(n))}var Qd=function(){function e(t){_classCallCheck2(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Zd(e,this.resultSelector))}}]),e}(),Zd=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return _createClass(i,[{key:"_next",value:function(e){this.values.push(Xd),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var i=0;i<t;i++){var n=e[i];this.add(B(this,n,n,i))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,i,n,r){var a=this.values,o=this.toRespond?a[i]===Xd?--this.toRespond:this.toRespond:0;a[i]=t,0===o&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}]),i}(V),$d=new _((function(e){return e.complete()}));function ep(e){return e?function(e){return new _((function(t){return e.schedule((function(){return t.complete()}))}))}(e):$d}function tp(e){return new _((function(t){var i;try{i=e()}catch(n){return void t.error(n)}return(i?W(i):ep()).subscribe(t)}))}function ip(){return K(1)}function np(e,t){return function(i){return i.lift(new rp(e,t))}}var rp=function(){function e(t,i){_classCallCheck2(this,e),this.predicate=t,this.thisArg=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ap(e,this.predicate,this.thisArg))}}]),e}(),ap=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e)).predicate=n,a.thisArg=r,a.count=0,a}return _createClass(i,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}]),i}(m),op=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function sp(e){return function(t){return 0===e?ep():t.lift(new lp(e))}}var lp=function(){function e(t){if(_classCallCheck2(this,e),this.total=t,this.total<0)throw new op}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new cp(e,this.total))}}]),e}(),cp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).total=n,r.ring=new Array,r.count=0,r}return _createClass(i,[{key:"_next",value:function(e){var t=this.ring,i=this.total,n=this.count++;t.length<i?t.push(e):t[n%i]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var i=this.count>=this.total?this.total:this.count,n=this.ring,r=0;r<i;r++){var a=t++%i;e.next(n[a])}e.complete()}}]),i}(m);function up(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pp;return function(t){return t.lift(new hp(e))}}var hp=function(){function e(t){_classCallCheck2(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new dp(e,this.errorFactory))}}]),e}(),dp=function(t){_inherits(n,t);var i=_createSuper(n);function n(e,t){var r;return _classCallCheck2(this,n),(r=i.call(this,e)).errorFactory=t,r.hasValue=!1,r}return _createClass(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}]),n}(m);function pp(){return new Kd}function fp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new vp(e))}}var vp=function(){function e(t){_classCallCheck2(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new mp(e,this.defaultValue))}}]),e}(),mp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).defaultValue=n,r.isEmpty=!0,r}return _createClass(i,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),i}(m);function gp(e,t){var i=arguments.length>=2;return function(n){return n.pipe(e?np((function(t,i){return e(t,i,n)})):b,sp(1),i?fp(t):up((function(){return new Kd})))}}function yp(e){return function(t){var i=new bp(e),n=t.lift(i);return i.caught=n}}var bp=function(){function e(t){_classCallCheck2(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new kp(e,this.selector,this.caught))}}]),e}(),kp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e)).selector=n,a.caught=r,a}return _createClass(i,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void _get(_getPrototypeOf(i.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var n=new R(this,void 0,void 0);this.add(n);var r=B(this,t,void 0,void 0,n);r!==n&&this.add(r)}}}]),i}(V);function Cp(e){return function(t){return 0===e?ep():t.lift(new wp(e))}}var wp=function(){function e(t){if(_classCallCheck2(this,e),this.total=t,this.total<0)throw new op}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new _p(e,this.total))}}]),e}(),_p=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).total=n,r.count=0,r}return _createClass(i,[{key:"_next",value:function(e){var t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}]),i}(m);function Sp(e,t){var i=arguments.length>=2;return function(n){return n.pipe(e?np((function(t,i){return e(t,i,n)})):b,Cp(1),i?fp(t):up((function(){return new Kd})))}}var Ep=function(){function e(t,i,n){_classCallCheck2(this,e),this.predicate=t,this.thisArg=i,this.source=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Tp(e,this.predicate,this.thisArg,this.source))}}]),e}(),Tp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,e)).predicate=n,o.thisArg=r,o.source=a,o.index=0,o.thisArg=r||_assertThisInitialized(o),o}return _createClass(i,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(i){return void this.destination.error(i)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),i}(m);function Ap(e,t){return"function"==typeof t?function(i){return i.pipe(Ap((function(i,n){return W(e(i,n)).pipe(j((function(e,r){return t(i,e,n,r)})))})))}:function(t){return t.lift(new Op(e))}}var Op=function(){function e(t){_classCallCheck2(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new xp(e,this.project))}}]),e}(),xp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).project=n,r.index=0,r}return _createClass(i,[{key:"_next",value:function(e){var t,i=this.index++;try{t=this.project(e,i)}catch(n){return void this.destination.error(n)}this._innerSub(t,e,i)}},{key:"_innerSub",value:function(e,t,i){var n=this.innerSubscription;n&&n.unsubscribe();var r=new R(this,t,i),a=this.destination;a.add(r),this.innerSubscription=B(this,e,void 0,void 0,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(i.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(i.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,i,n,r){this.destination.next(t)}}]),i}(V);function Ip(){return ip()(Gd.apply(void 0,arguments))}function Dp(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[t.length-1];return D(n)?(t.pop(),function(e){return Ip(t,e,n)}):function(e){return Ip(t,e)}}function Rp(e,t){var i=!1;return arguments.length>=2&&(i=!0),function(n){return n.lift(new Pp(e,t,i))}}var Pp=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck2(this,e),this.accumulator=t,this.seed=i,this.hasSeed=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Mp(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Mp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,e)).accumulator=n,o._seed=r,o.hasSeed=a,o.index=0,o}return _createClass(i,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,i=this.index++;try{t=this.accumulator(this.seed,e,i)}catch(n){this.destination.error(n)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),i}(m);function Lp(e,t){return z(e,t,1)}function Np(e,t){return arguments.length>=2?function(i){return k(Rp(e,t),sp(1),fp(t))(i)}:function(t){return k(Rp((function(t,i,n){return e(t,i,n+1)})),sp(1))(t)}}function Fp(){}function Bp(e,t,i){return function(n){return n.lift(new Vp(e,t,i))}}var Vp=function(){function e(t,i,n){_classCallCheck2(this,e),this.nextOrObserver=t,this.error=i,this.complete=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new jp(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),jp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,a,o){var s;return _classCallCheck2(this,i),(s=t.call(this,e))._tapNext=Fp,s._tapError=Fp,s._tapComplete=Fp,s._tapError=a||Fp,s._tapComplete=o||Fp,r(n)?(s._context=_assertThisInitialized(s),s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||Fp,s._tapError=n.error||Fp,s._tapComplete=n.complete||Fp),s}return _createClass(i,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),i}(m);function Hp(e){return function(t){return t.lift(new qp(e))}}var Up,qp=function(){function e(t){_classCallCheck2(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Wp(e,this.callback))}}]),e}(),Wp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).add(new p(n)),r}return i}(m),zp=function e(t,i){_classCallCheck2(this,e),this.id=t,this.url=i},Gp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck2(this,i),(r=t.call(this,e,n)).navigationTrigger=a,r.restoredState=o,r}return _createClass(i,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),i}(zp),Yp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e,n)).urlAfterRedirects=r,a}return _createClass(i,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),i}(zp),Kp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e,n)).reason=r,a}return _createClass(i,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),i}(zp),Xp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e,n)).error=r,a}return _createClass(i,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),i}(zp),Jp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,e,n)).urlAfterRedirects=r,o.state=a,o}return _createClass(i,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),i}(zp),Qp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,e,n)).urlAfterRedirects=r,o.state=a,o}return _createClass(i,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),i}(zp),Zp=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o){var s;return _classCallCheck2(this,i),(s=t.call(this,e,n)).urlAfterRedirects=r,s.state=a,s.shouldActivate=o,s}return _createClass(i,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),i}(zp),$p=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,e,n)).urlAfterRedirects=r,o.state=a,o}return _createClass(i,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),i}(zp),ef=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,e,n)).urlAfterRedirects=r,o.state=a,o}return _createClass(i,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),i}(zp),tf=function(){function e(t){_classCallCheck2(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),nf=function(){function e(t){_classCallCheck2(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),rf=function(){function e(t){_classCallCheck2(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),af=function(){function e(t){_classCallCheck2(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),of=function(){function e(t){_classCallCheck2(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),sf=function(){function e(t){_classCallCheck2(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),lf=function(){function e(t,i,n){_classCallCheck2(this,e),this.routerEvent=t,this.position=i,this.anchor=n}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),cf=((Up=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||Up)},Up.\u0275cmp=gt({type:Up,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&Uo(0,"router-outlet")},directives:function(){return[km]},encapsulation:2}),Up),uf=function(){function e(t){_classCallCheck2(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function hf(e){return new uf(e)}function df(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function pf(e,t,i){var n=i.path.split("/");if(n.length>e.length)return null;if("full"===i.pathMatch&&(t.hasChildren()||n.length<e.length))return null;for(var r={},a=0;a<n.length;a++){var o=n[a],s=e[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,n.length),posParams:r}}var ff=function e(t,i){_classCallCheck2(this,e),this.routes=t,this.module=i};function vf(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=0;i<e.length;i++){var n=e[i];mf(n,gf(t,n))}}function mf(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&vf(e.children,t)}function gf(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function yf(e){var t=e.children&&e.children.map(yf),i=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!i.component&&(t||i.loadChildren)&&i.outlet&&"primary"!==i.outlet&&(i.component=cf),i}function bf(e,t){var i,n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;for(var a=0;a<n.length;a++)if(!kf(e[i=n[a]],t[i]))return!1;return!0}function kf(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function Cf(e){return Array.prototype.concat.apply([],e)}function wf(e){return e.length>0?e[e.length-1]:null}function _f(e,t){for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)}function Sf(e){return Yo(e)?e:Go(e)?W(Promise.resolve(e)):Gd(e)}function Ef(e,t,i){return i?function(e,t){return bf(e,t)}(e.queryParams,t.queryParams)&&function e(t,i){if(!xf(t.segments,i.segments))return!1;if(t.numberOfChildren!==i.numberOfChildren)return!1;for(var n in i.children){if(!t.children[n])return!1;if(!e(t.children[n],i.children[n]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(i){return kf(e[i],t[i])}))}(e.queryParams,t.queryParams)&&function e(t,i){return function t(i,n,r){if(i.segments.length>r.length)return!!xf(i.segments.slice(0,r.length),r)&&!n.hasChildren();if(i.segments.length===r.length){if(!xf(i.segments,r))return!1;for(var a in n.children){if(!i.children[a])return!1;if(!e(i.children[a],n.children[a]))return!1}return!0}var o=r.slice(0,i.segments.length),s=r.slice(i.segments.length);return!!xf(i.segments,o)&&!!i.children.primary&&t(i.children.primary,n,s)}(t,i,i.segments)}(e.root,t.root)}var Tf=function(){function e(t,i,n){_classCallCheck2(this,e),this.root=t,this.queryParams=i,this.fragment=n}return _createClass(e,[{key:"toString",value:function(){return Pf.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=hf(this.queryParams)),this._queryParamMap}}]),e}(),Af=function(){function e(t,i){var n=this;_classCallCheck2(this,e),this.segments=t,this.children=i,this.parent=null,_f(i,(function(e,t){return e.parent=n}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Mf(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),Of=function(){function e(t,i){_classCallCheck2(this,e),this.path=t,this.parameters=i}return _createClass(e,[{key:"toString",value:function(){return jf(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=hf(this.parameters)),this._parameterMap}}]),e}();function xf(e,t){return e.length===t.length&&e.every((function(e,i){return e.path===t[i].path}))}function If(e,t){var i=[];return _f(e.children,(function(e,n){"primary"===n&&(i=i.concat(t(e,n)))})),_f(e.children,(function(e,n){"primary"!==n&&(i=i.concat(t(e,n)))})),i}var Df=function e(){_classCallCheck2(this,e)},Rf=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new zf(e);return new Tf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){return"".concat("/"+function e(t,i){if(!t.hasChildren())return Mf(t);if(i){var n=t.children.primary?e(t.children.primary,!1):"",r=[];return _f(t.children,(function(t,i){"primary"!==i&&r.push("".concat(i,":").concat(e(t,!1)))})),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var a=If(t,(function(i,n){return"primary"===n?[e(t.children.primary,!1)]:["".concat(n,":").concat(e(i,!1))]}));return"".concat(Mf(t),"/(").concat(a.join("//"),")")}(e.root,!0)).concat((t=e.queryParams,i=Object.keys(t).map((function(e){var i=t[e];return Array.isArray(i)?i.map((function(t){return"".concat(Nf(e),"=").concat(Nf(t))})).join("&"):"".concat(Nf(e),"=").concat(Nf(i))})),i.length?"?"+i.join("&"):"")).concat("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"");var t,i}}]),e}(),Pf=new Rf;function Mf(e){return e.segments.map((function(e){return jf(e)})).join("/")}function Lf(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nf(e){return Lf(e).replace(/%3B/gi,";")}function Ff(e){return Lf(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bf(e){return decodeURIComponent(e)}function Vf(e){return Bf(e.replace(/\+/g,"%20"))}function jf(e){return"".concat(Ff(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(Ff(e),"=").concat(Ff(t[e]))})).join("")));var t}var Hf=/^[^\/()?;=#]+/;function Uf(e){var t=e.match(Hf);return t?t[0]:""}var qf=/^[^=?&#]+/,Wf=/^[^?&#]+/,zf=function(){function e(t){_classCallCheck2(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Af([],{}):new Af([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i.primary=new Af(e,t)),i}},{key:"parseSegment",value:function(){var e=Uf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Of(Bf(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Uf(this.remaining);if(t){this.capture(t);var i="";if(this.consumeOptional("=")){var n=Uf(this.remaining);n&&(i=n,this.capture(i))}e[Bf(t)]=Bf(i)}}},{key:"parseQueryParam",value:function(e){var t,i,n=(t=this.remaining,(i=t.match(qf))?i[0]:"");if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var a=function(e){var t=e.match(Wf);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}var o=Vf(n),s=Vf(r);if(e.hasOwnProperty(o)){var l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(s)}else e[o]=s}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var i=Uf(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error("Cannot parse url '".concat(this.url,"'"));var r=void 0;i.indexOf(":")>-1?(r=i.substr(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r="primary");var a=this.parseChildren();t[r]=1===Object.keys(a).length?a.primary:new Af([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Gf=function(){function e(t){_classCallCheck2(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Yf(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=Yf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Kf(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return Kf(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function Yf(e,t){if(e===t.value)return t;var i,n=_createForOfIteratorHelper(t.children);try{for(n.s();!(i=n.n()).done;){var r=Yf(e,i.value);if(r)return r}}catch(a){n.e(a)}finally{n.f()}return null}function Kf(e,t){if(e===t.value)return[t];var i,n=_createForOfIteratorHelper(t.children);try{for(n.s();!(i=n.n()).done;){var r=Kf(e,i.value);if(r.length)return r.unshift(t),r}}catch(a){n.e(a)}finally{n.f()}return[]}var Xf=function(){function e(t,i){_classCallCheck2(this,e),this.value=t,this.children=i}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Jf(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var Qf=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).snapshot=n,nv(_assertThisInitialized(r),e),r}return _createClass(i,[{key:"toString",value:function(){return this.snapshot.toString()}}]),i}(Gf);function Zf(e,t){var i=function(e,t){var i=new tv([],{},{},"",{},"primary",t,null,e.root,-1,{});return new iv("",new Xf(i,[]))}(e,t),n=new Yd([new Of("",{})]),r=new Yd({}),a=new Yd({}),o=new Yd({}),s=new Yd(""),l=new $f(n,r,o,s,a,"primary",t,i.root);return l.snapshot=i.root,new Qf(new Xf(l,[]),i)}var $f=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(j((function(e){return hf(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(j((function(e){return hf(e)})))),this._queryParamMap}}]),e}();function ev(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",i=e.pathFromRoot,n=0;if("always"!==t)for(n=i.length-1;n>=1;){var r=i[n],a=i[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(a.component)break;n--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(i.slice(n))}var tv=function(){function e(t,i,n,r,a,o,s,l,c,u,h){_classCallCheck2(this,e),this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=h}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=hf(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=hf(this.queryParams)),this._queryParamMap}}]),e}(),iv=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n)).url=e,nv(_assertThisInitialized(r),n),r}return _createClass(i,[{key:"toString",value:function(){return rv(this._root)}}]),i}(Gf);function nv(e,t){t.value._routerState=e,t.children.forEach((function(t){return nv(e,t)}))}function rv(e){var t=e.children.length>0?" { ".concat(e.children.map(rv).join(", ")," } "):"";return"".concat(e.value).concat(t)}function av(e){if(e.snapshot){var t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,bf(t.queryParams,i.queryParams)||e.queryParams.next(i.queryParams),t.fragment!==i.fragment&&e.fragment.next(i.fragment),bf(t.params,i.params)||e.params.next(i.params),function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!bf(e[i],t[i]))return!1;return!0}(t.url,i.url)||e.url.next(i.url),bf(t.data,i.data)||e.data.next(i.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function ov(e,t){var i,n;return bf(e.params,t.params)&&xf(i=e.url,n=t.url)&&i.every((function(e,t){return bf(e.parameters,n[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||ov(e.parent,t.parent))}function sv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function lv(e,t,i,n,r){var a={};return n&&_f(n,(function(e,t){a[t]=Array.isArray(e)?e.map((function(e){return""+e})):""+e})),new Tf(i.root===e?t:function e(t,i,n){var r={};return _f(t.children,(function(t,a){r[a]=t===i?n:e(t,i,n)})),new Af(t.segments,r)}(i.root,e,t),a,r)}var cv=function(){function e(t,i,n){if(_classCallCheck2(this,e),this.isAbsolute=t,this.numberOfDoubleDots=i,this.commands=n,t&&n.length>0&&sv(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(r&&r!==wf(n))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),uv=function e(t,i,n){_classCallCheck2(this,e),this.segmentGroup=t,this.processChildren=i,this.index=n};function hv(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:""+e}function dv(e,t,i){if(e||(e=new Af([],{})),0===e.segments.length&&e.hasChildren())return pv(e,t,i);var n=function(e,t,i){for(var n=0,r=t,a={match:!1,pathIndex:0,commandIndex:0};r<e.segments.length;){if(n>=i.length)return a;var o=e.segments[r],s=hv(i[n]),l=n<i.length-1?i[n+1]:null;if(r>0&&void 0===s)break;if(s&&l&&"object"==typeof l&&void 0===l.outlets){if(!gv(s,l,o))return a;n+=2}else{if(!gv(s,{},o))return a;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(e,t,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){var a=new Af(e.segments.slice(0,n.pathIndex),{});return a.children.primary=new Af(e.segments.slice(n.pathIndex),e.children),pv(a,0,r)}return n.match&&0===r.length?new Af(e.segments,{}):n.match&&!e.hasChildren()?fv(e,t,i):n.match?pv(e,0,r):fv(e,t,i)}function pv(e,t,i){if(0===i.length)return new Af(e.segments,{});var n=function(e){return"object"!=typeof e[0]||void 0===e[0].outlets?{primary:e}:e[0].outlets}(i),r={};return _f(n,(function(i,n){null!==i&&(r[n]=dv(e.children[n],t,i))})),_f(e.children,(function(e,t){void 0===n[t]&&(r[t]=e)})),new Af(e.segments,r)}function fv(e,t,i){for(var n=e.segments.slice(0,t),r=0;r<i.length;){if("object"==typeof i[r]&&void 0!==i[r].outlets){var a=vv(i[r].outlets);return new Af(n,a)}if(0===r&&sv(i[0]))n.push(new Of(e.segments[t].path,i[0])),r++;else{var o=hv(i[r]),s=r<i.length-1?i[r+1]:null;o&&s&&sv(s)?(n.push(new Of(o,mv(s))),r+=2):(n.push(new Of(o,{})),r++)}}return new Af(n,{})}function vv(e){var t={};return _f(e,(function(e,i){null!==e&&(t[i]=fv(new Af([],{}),0,e))})),t}function mv(e){var t={};return _f(e,(function(e,i){return t[i]=""+e})),t}function gv(e,t,i){return e==i.path&&bf(t,i.parameters)}var yv=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.routeReuseStrategy=t,this.futureState=i,this.currState=n,this.forwardEvent=r}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),av(this.futureState.root),this.activateChildRoutes(t,i,e)}},{key:"deactivateChildRoutes",value:function(e,t,i){var n=this,r=Jf(t);e.children.forEach((function(e){var t=e.value.outlet;n.deactivateRoutes(e,r[t],i),delete r[t]})),_f(r,(function(e,t){n.deactivateRouteAndItsChildren(e,i)}))}},{key:"deactivateRoutes",value:function(e,t,i){var n=e.value,r=t?t.value:null;if(n===r)if(n.component){var a=i.getContext(n.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var i=t.getContext(e.value.outlet);if(i&&i.outlet){var n=i.outlet.detach(),r=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:n,route:e,contexts:r})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var i=this,n=t.getContext(e.value.outlet);if(n){var r=Jf(e),a=e.value.component?n.children:t;_f(r,(function(e,t){return i.deactivateRouteAndItsChildren(e,a)})),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,i){var n=this,r=Jf(t);e.children.forEach((function(e){n.activateRoutes(e,r[e.value.outlet],i),n.forwardEvent(new sf(e.value.snapshot))})),e.children.length&&this.forwardEvent(new af(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,i){var n=e.value,r=t?t.value:null;if(av(n),n===r)if(n.component){var a=i.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(n.component){var o=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){var s=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),bv(s.route)}else{var l=function(e){for(var t=e.parent;t;t=t.parent){var i=t.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig;if(i&&i.component)return null}return null}(n.snapshot),c=l?l.module.componentFactoryResolver:null;o.attachRef=null,o.route=n,o.resolver=c,o.outlet&&o.outlet.activateWith(n,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}]),e}();function bv(e){av(e.value),e.children.forEach(bv)}function kv(e){return"function"==typeof e}function Cv(e){return e instanceof Tf}var wv=function e(t){_classCallCheck2(this,e),this.segmentGroup=t||null},_v=function e(t){_classCallCheck2(this,e),this.urlTree=t};function Sv(e){return new _((function(t){return t.error(new wv(e))}))}function Ev(e){return new _((function(t){return t.error(new _v(e))}))}function Tv(e){return new _((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var Av=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.configLoader=i,this.urlSerializer=n,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(nt)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(j((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(yp((function(t){if(t instanceof _v)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof wv)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(j((function(i){return t.createUrlTree(i,e.queryParams,e.fragment)}))).pipe(yp((function(e){if(e instanceof wv)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,i){var n=e.segments.length>0?new Af([],{primary:e}):e;return new Tf(n,t,i)}},{key:"expandSegmentGroup",value:function(e,t,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(j((function(e){return new Af([],e)}))):this.expandSegment(e,i,t,i.segments,n,!0)}},{key:"expandChildren",value:function(e,t,i){var n=this;return function(i,r){if(0===Object.keys(i).length)return Gd({});var a=[],o=[],s={};return _f(i,(function(i,r){var l,c,u=(l=r,c=i,n.expandSegmentGroup(e,t,c,l)).pipe(j((function(e){return s[r]=e})));"primary"===r?a.push(u):o.push(u)})),Gd.apply(null,a.concat(o)).pipe(ip(),gp(),j((function(){return s})))}(i.children)}},{key:"expandSegment",value:function(e,t,i,n,r,a){var o=this;return Gd.apply(void 0,_toConsumableArray2(i)).pipe(j((function(s){return o.expandSegmentAgainstRoute(e,t,i,s,n,r,a).pipe(yp((function(e){if(e instanceof wv)return Gd(null);throw e})))})),ip(),Sp((function(e){return!!e})),yp((function(e,i){if(e instanceof Kd||"EmptyError"===e.name){if(o.noLeftoversInUrl(t,n,r))return Gd(new Af([],{}));throw new wv(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,i){return 0===t.length&&!e.children[i]}},{key:"expandSegmentAgainstRoute",value:function(e,t,i,n,r,a,o){return Dv(n)!==a?Sv(t):void 0===n.redirectTo?this.matchSegmentAgainstRoute(e,t,n,r):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,n,r,a):Sv(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,i,n,r,a){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,n,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,n,r,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,i,n){var r=this,a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Ev(a):this.lineralizeSegments(i,a).pipe(z((function(i){var a=new Af(i,{});return r.expandSegment(e,a,t,i,n,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,i,n,r,a){var o=this,s=Ov(t,n,r),l=s.matched,c=s.consumedSegments,u=s.lastChild,h=s.positionalParamSegments;if(!l)return Sv(t);var d=this.applyRedirectCommands(c,n.redirectTo,h);return n.redirectTo.startsWith("/")?Ev(d):this.lineralizeSegments(n,d).pipe(z((function(n){return o.expandSegment(e,t,i,n.concat(r.slice(u)),a,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,i,n){var r=this;if("**"===i.path)return i.loadChildren?this.configLoader.load(e.injector,i).pipe(j((function(e){return i._loadedConfig=e,new Af(n,{})}))):Gd(new Af(n,{}));var a=Ov(t,i,n),o=a.matched,s=a.consumedSegments,l=a.lastChild;if(!o)return Sv(t);var c=n.slice(l);return this.getChildConfig(e,i,n).pipe(z((function(e){var i=e.module,n=e.routes,a=function(e,t,i,n){return i.length>0&&function(e,t,i){return i.some((function(i){return Iv(e,t,i)&&"primary"!==Dv(i)}))}(e,i,n)?{segmentGroup:xv(new Af(t,function(e,t){var i={};i.primary=t;var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;""===a.path&&"primary"!==Dv(a)&&(i[Dv(a)]=new Af([],{}))}}catch(o){r.e(o)}finally{r.f()}return i}(n,new Af(i,e.children)))),slicedSegments:[]}:0===i.length&&function(e,t,i){return i.some((function(i){return Iv(e,t,i)}))}(e,i,n)?{segmentGroup:xv(new Af(e.segments,function(e,t,i,n){var r,a={},o=_createForOfIteratorHelper(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;Iv(e,t,s)&&!n[Dv(s)]&&(a[Dv(s)]=new Af([],{}))}}catch(l){o.e(l)}finally{o.f()}return Object.assign(Object.assign({},n),a)}(e,i,n,e.children))),slicedSegments:i}:{segmentGroup:e,slicedSegments:i}}(t,s,c,n),o=a.segmentGroup,l=a.slicedSegments;return 0===l.length&&o.hasChildren()?r.expandChildren(i,n,o).pipe(j((function(e){return new Af(s,e)}))):0===n.length&&0===l.length?Gd(new Af(s,{})):r.expandSegment(i,o,n,l,"primary",!0).pipe(j((function(e){return new Af(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,i){var n=this;return t.children?Gd(new ff(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Gd(t._loadedConfig):function(e,t,i){var n,r=t.canLoad;return r&&0!==r.length?W(r).pipe(j((function(n){var r,a=e.get(n);if(function(e){return e&&kv(e.canLoad)}(a))r=a.canLoad(t,i);else{if(!kv(a))throw new Error("Invalid CanLoad guard");r=a(t,i)}return Sf(r)}))).pipe(ip(),(n=function(e){return!0===e},function(e){return e.lift(new Ep(n,void 0,e))})):Gd(!0)}(e.injector,t,i).pipe(z((function(i){return i?n.configLoader.load(e.injector,t).pipe(j((function(e){return t._loadedConfig=e,e}))):function(e){return new _((function(t){return t.error(df("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Gd(new ff([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var i=[],n=t.root;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return Gd(i);if(n.numberOfChildren>1||!n.children.primary)return Tv(e.redirectTo);n=n.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,i,n){var r=this.createSegmentGroup(e,t.root,i,n);return new Tf(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var i={};return _f(e,(function(e,n){if("string"==typeof e&&e.startsWith(":")){var r=e.substring(1);i[n]=t[r]}else i[n]=e})),i}},{key:"createSegmentGroup",value:function(e,t,i,n){var r=this,a=this.createSegments(e,t.segments,i,n),o={};return _f(t.children,(function(t,a){o[a]=r.createSegmentGroup(e,t,i,n)})),new Af(a,o)}},{key:"createSegments",value:function(e,t,i,n){var r=this;return t.map((function(t){return t.path.startsWith(":")?r.findPosParam(e,t,n):r.findOrReturn(t,i)}))}},{key:"findPosParam",value:function(e,t,i){var n=i[t.path.substring(1)];if(!n)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return n}},{key:"findOrReturn",value:function(e,t){var i,n=0,r=_createForOfIteratorHelper(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.path===e.path)return t.splice(n),a;n++}}catch(o){r.e(o)}finally{r.f()}return e}}]),e}();function Ov(e,t,i){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||i.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var n=(t.matcher||pf)(i,e,t);return n?{matched:!0,consumedSegments:n.consumed,lastChild:n.consumed.length,positionalParamSegments:n.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function xv(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new Af(e.segments.concat(t.segments),t.children)}return e}function Iv(e,t,i){return(!(e.hasChildren()||t.length>0)||"full"!==i.pathMatch)&&""===i.path&&void 0!==i.redirectTo}function Dv(e){return e.outlet||"primary"}var Rv=function e(t){_classCallCheck2(this,e),this.path=t,this.route=this.path[this.path.length-1]},Pv=function e(t,i){_classCallCheck2(this,e),this.component=t,this.route=i};function Mv(e,t,i){var n=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var i=t.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig}return null}(t);return(n?n.module.injector:i).get(e)}function Lv(e,t,i){var n=Jf(e),r=e.value;_f(n,(function(e,n){Lv(e,r.component?t?t.children.getContext(n):null:t,i)})),i.canDeactivateChecks.push(new Pv(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}var Nv=Symbol("INITIAL_VALUE");function Fv(){return Ap((function(e){return Jd.apply(void 0,_toConsumableArray2(e.map((function(e){return e.pipe(Cp(1),Dp(Nv))})))).pipe(Rp((function(e,t){var i=!1;return t.reduce((function(e,n,r){if(e!==Nv)return e;if(n===Nv&&(i=!0),!i){if(!1===n)return n;if(r===t.length-1||Cv(n))return n}return e}),e)}),Nv),np((function(e){return e!==Nv})),j((function(e){return Cv(e)?e:!0===e})),Cp(1))}))}function Bv(e,t){return null!==e&&t&&t(new of(e)),Gd(!0)}function Vv(e,t){return null!==e&&t&&t(new rf(e)),Gd(!0)}function jv(e,t,i){var n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?Gd(n.map((function(n){return tp((function(){var r,a=Mv(n,t,i);if(function(e){return e&&kv(e.canActivate)}(a))r=Sf(a.canActivate(t,e));else{if(!kv(a))throw new Error("Invalid CanActivate guard");r=Sf(a(t,e))}return r.pipe(Sp())}))}))).pipe(Fv()):Gd(!0)}function Hv(e,t,i){var n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return tp((function(){return Gd(t.guards.map((function(r){var a,o=Mv(r,t.node,i);if(function(e){return e&&kv(e.canActivateChild)}(o))a=Sf(o.canActivateChild(n,e));else{if(!kv(o))throw new Error("Invalid CanActivateChild guard");a=Sf(o(n,e))}return a.pipe(Sp())}))).pipe(Fv())}))}));return Gd(r).pipe(Fv())}var Uv=function e(){_classCallCheck2(this,e)},qv=function(){function t(e,i,n,r,a,o){_classCallCheck2(this,t),this.rootComponentType=e,this.config=i,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return _createClass(t,[{key:"recognize",value:function(){try{var t=Gv(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,i=this.processSegmentGroup(this.config,t,"primary"),n=new tv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Xf(n,i),a=new iv(this.url,r);return this.inheritParamsAndData(a._root),Gd(a)}catch(e){return new _((function(i){return i.error(e)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,i=e.value,n=ev(i,this.paramsInheritanceStrategy);i.params=Object.freeze(n.params),i.data=Object.freeze(n.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}},{key:"processChildren",value:function(e,t){var i,n=this,r=If(t,(function(t,i){return n.processSegmentGroup(e,t,i)}));return i={},r.forEach((function(e){var t=i[e.value.outlet];if(t){var n=t.url.map((function(e){return e.toString()})).join("/"),r=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(n,"' and '").concat(r,"'."))}i[e.value.outlet]=e.value})),r.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),r}},{key:"processSegment",value:function(t,i,n,r){var a,o=_createForOfIteratorHelper(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;try{return this.processSegmentAgainstRoute(s,i,n,r)}catch(e){if(!(e instanceof Uv))throw e}}}catch(l){o.e(l)}finally{o.f()}if(this.noLeftoversInUrl(i,n,r))return[];throw new Uv}},{key:"noLeftoversInUrl",value:function(e,t,i){return 0===t.length&&!e.children[i]}},{key:"processSegmentAgainstRoute",value:function(e,t,i,n){if(e.redirectTo)throw new Uv;if((e.outlet||"primary")!==n)throw new Uv;var r,a=[],o=[];if("**"===e.path){var s=i.length>0?wf(i).parameters:{};r=new tv(i,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xv(e),n,e.component,e,Wv(t),zv(t)+i.length,Jv(e))}else{var l=function(e,t,i){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||i.length>0))throw new Uv;return{consumedSegments:[],lastChild:0,parameters:{}}}var n=(t.matcher||pf)(i,e,t);if(!n)throw new Uv;var r={};_f(n.posParams,(function(e,t){r[t]=e.path}));var a=n.consumed.length>0?Object.assign(Object.assign({},r),n.consumed[n.consumed.length-1].parameters):r;return{consumedSegments:n.consumed,lastChild:n.consumed.length,parameters:a}}(t,e,i);a=l.consumedSegments,o=i.slice(l.lastChild),r=new tv(a,l.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xv(e),n,e.component,e,Wv(t),zv(t)+a.length,Jv(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),u=Gv(t,a,o,c,this.relativeLinkResolution),h=u.segmentGroup,d=u.slicedSegments;if(0===d.length&&h.hasChildren()){var p=this.processChildren(c,h);return[new Xf(r,p)]}if(0===c.length&&0===d.length)return[new Xf(r,[])];var f=this.processSegment(c,h,d,"primary");return[new Xf(r,f)]}}]),t}();function Wv(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function zv(e){for(var t=e,i=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)i+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return i-1}function Gv(e,t,i,n,r){if(i.length>0&&function(e,t,i){return i.some((function(i){return Yv(e,t,i)&&"primary"!==Kv(i)}))}(e,i,n)){var a=new Af(t,function(e,t,i,n){var r={};r.primary=n,n._sourceSegment=e,n._segmentIndexShift=t.length;var a,o=_createForOfIteratorHelper(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(""===s.path&&"primary"!==Kv(s)){var l=new Af([],{});l._sourceSegment=e,l._segmentIndexShift=t.length,r[Kv(s)]=l}}}catch(c){o.e(c)}finally{o.f()}return r}(e,t,n,new Af(i,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===i.length&&function(e,t,i){return i.some((function(i){return Yv(e,t,i)}))}(e,i,n)){var o=new Af(e.segments,function(e,t,i,n,r,a){var o,s={},l=_createForOfIteratorHelper(n);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(Yv(e,i,c)&&!r[Kv(c)]){var u=new Af([],{});u._sourceSegment=e,u._segmentIndexShift="legacy"===a?e.segments.length:t.length,s[Kv(c)]=u}}}catch(h){l.e(h)}finally{l.f()}return Object.assign(Object.assign({},r),s)}(e,t,i,n,e.children,r));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:i}}var s=new Af(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:i}}function Yv(e,t,i){return(!(e.hasChildren()||t.length>0)||"full"!==i.pathMatch)&&""===i.path&&void 0===i.redirectTo}function Kv(e){return e.outlet||"primary"}function Xv(e){return e.data||{}}function Jv(e){return e.resolve||{}}function Qv(e,t,i,n){var r=Mv(e,t,n);return Sf(r.resolve?r.resolve(t,i):r(t,i))}function Zv(e){return function(t){return t.pipe(Ap((function(t){var i=e(t);return i?W(i).pipe(j((function(){return t}))):W([t])})))}}var $v=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),em=new qe("ROUTES"),tm=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.loader=t,this.compiler=i,this.onLoadStartListener=n,this.onLoadEndListener=r}return _createClass(e,[{key:"load",value:function(e,t){var i=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(j((function(n){i.onLoadEndListener&&i.onLoadEndListener(t);var r=n.create(e);return new ff(Cf(r.injector.get(em)).map(yf),r)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?W(this.loader.load(e)):Sf(e()).pipe(z((function(e){return e instanceof rt?Gd(e):W(t.compiler.compileModuleAsync(e))})))}}]),e}(),im=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function nm(e){throw e}function rm(e,t,i){return t.parse("/")}function am(e,t){return Gd(null)}var om,sm,lm,cm=((lm=function(){function t(e,i,n,r,a,o,s,l){var c=this;_classCallCheck2(this,t),this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=nm,this.malformedUriErrorHandler=rm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:am,afterPreactivation:am},this.urlHandlingStrategy=new im,this.routeReuseStrategy=new $v,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(nt),this.console=a.get(Ic);var u=a.get(Wc);this.isNgZoneEnabled=u instanceof Wc,this.resetConfig(l),this.currentUrlTree=new Tf(new Af([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new tm(o,s,(function(e){return c.triggerEvent(new tf(e))}),(function(e){return c.triggerEvent(new nf(e))})),this.routerState=Zf(this.currentUrlTree,this.rootComponentType),this.transitions=new Yd({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(t,[{key:"setupNavigations",value:function(e){var t=this,i=this.events;return e.pipe(np((function(e){return 0!==e.id})),j((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),Ap((function(e){var n,r,a,o=!1,s=!1;return Gd(e).pipe(Bp((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Ap((function(e){var n,r,a,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Gd(e).pipe(Ap((function(e){var n=t.transitions.getValue();return i.next(new Gp(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==t.transitions.getValue()?$d:[e]})),Ap((function(e){return Promise.resolve(e)})),(n=t.ngModule.injector,r=t.configLoader,a=t.urlSerializer,o=t.config,function(e){return e.pipe(Ap((function(e){return function(e,t,i,n,r){return new Av(e,t,i,n,r).apply()}(n,r,a,e.extractedUrl,o).pipe(j((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),Bp((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,i,n,r,a){return function(n){return n.pipe(z((function(n){return function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new qv(e,t,i,n,r,a).recognize()}(e,i,n.urlAfterRedirects,(o=n.urlAfterRedirects,t.serializeUrl(o)),r,a).pipe(j((function(e){return Object.assign(Object.assign({},n),{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Bp((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),Bp((function(e){var n=new Jp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);i.next(n)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var l=e.id,c=e.extractedUrl,u=e.source,h=e.restoredState,d=e.extras,p=new Gp(l,t.serializeUrl(c),u,h);i.next(p);var f=Zf(c,t.rootComponentType).snapshot;return Gd(Object.assign(Object.assign({},e),{targetSnapshot:f,urlAfterRedirects:c,extras:Object.assign(Object.assign({},d),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),$d})),Zv((function(e){var i=e.targetSnapshot,n=e.id,r=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,l=o.replaceUrl;return t.hooks.beforePreactivation(i,{navigationId:n,appliedUrlTree:r,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!l})})),Bp((function(e){var i=new Qp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(i)})),j((function(e){return Object.assign(Object.assign({},e),{guards:(i=e.targetSnapshot,n=e.currentSnapshot,r=t.rootContexts,a=i._root,function e(t,i,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Jf(i);return t.children.forEach((function(t){!function(t,i,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,s=i?i.value:null,l=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var c=function(e,t,i){if("function"==typeof i)return i(e,t);switch(i){case"pathParamsChange":return!xf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!xf(e.url,t.url)||!bf(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ov(e,t)||!bf(e.queryParams,t.queryParams);case"paramsChange":default:return!ov(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?a.canActivateChecks.push(new Rv(r)):(o.data=s.data,o._resolvedData=s._resolvedData),e(t,i,o.component?l?l.children:null:n,r,a),c&&a.canDeactivateChecks.push(new Pv(l&&l.outlet&&l.outlet.component||null,s))}else s&&Lv(i,l,a),a.canActivateChecks.push(new Rv(r)),e(t,null,o.component?l?l.children:null:n,r,a)}(t,o[t.value.outlet],n,r.concat([t.value]),a),delete o[t.value.outlet]})),_f(o,(function(e,t){return Lv(e,n.getContext(t),a)})),a}(a,n?n._root:null,r,[a.value]))});var i,n,r,a})),function(e,t){return function(i){return i.pipe(z((function(i){var n=i.targetSnapshot,r=i.currentSnapshot,a=i.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?Gd(Object.assign(Object.assign({},i),{guardsResult:!0})):function(e,t,i,n){return W(e).pipe(z((function(e){return function(e,t,i,n,r){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return a&&0!==a.length?Gd(a.map((function(a){var o,s=Mv(a,t,r);if(function(e){return e&&kv(e.canDeactivate)}(s))o=Sf(s.canDeactivate(e,t,i,n));else{if(!kv(s))throw new Error("Invalid CanDeactivate guard");o=Sf(s(e,t,i,n))}return o.pipe(Sp())}))).pipe(Fv()):Gd(!0)}(e.component,e.route,i,t,n)})),Sp((function(e){return!0!==e}),!0))}(s,n,r,e).pipe(z((function(i){return i&&"boolean"==typeof i?function(e,t,i,n){return W(t).pipe(Lp((function(t){return W([Vv(t.route.parent,n),Bv(t.route,n),Hv(e,t.path,i),jv(e,t.route,i)]).pipe(ip(),Sp((function(e){return!0!==e}),!0))})),Sp((function(e){return!0!==e}),!0))}(n,o,e,t):Gd(i)})),j((function(e){return Object.assign(Object.assign({},i),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),Bp((function(e){if(Cv(e.guardsResult)){var i=df('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw i.url=e.guardsResult,i}})),Bp((function(e){var i=new Zp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(i)})),np((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var n=new Kp(e.id,t.serializeUrl(e.extractedUrl),"");return i.next(n),e.resolve(!1),!1}return!0})),Zv((function(e){if(e.guards.canActivateChecks.length)return Gd(e).pipe(Bp((function(e){var i=new $p(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(i)})),(i=t.paramsInheritanceStrategy,n=t.ngModule.injector,function(e){return e.pipe(z((function(e){var t=e.targetSnapshot,r=e.guards.canActivateChecks;return r.length?W(r).pipe(Lp((function(e){return function(e,t,i,n){return function(e,t,i,n){var r=Object.keys(e);if(0===r.length)return Gd({});if(1===r.length){var a=r[0];return Qv(e[a],t,i,n).pipe(j((function(e){return _defineProperty2({},a,e)})))}var o={};return W(r).pipe(z((function(r){return Qv(e[r],t,i,n).pipe(j((function(e){return o[r]=e,e})))}))).pipe(gp(),j((function(){return o})))}(e._resolve,e,t,n).pipe(j((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),ev(e,i).resolve),null})))}(e.route,t,i,n)})),Np((function(e,t){return e})),j((function(t){return e}))):Gd(e)})))}),Bp((function(e){var i=new ef(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(i)})));var i,n})),Zv((function(e){var i=e.targetSnapshot,n=e.id,r=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,l=o.replaceUrl;return t.hooks.afterPreactivation(i,{navigationId:n,appliedUrlTree:r,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!l})})),j((function(e){var i=function(e,t,i){var n=function e(t,i,n){if(n&&t.shouldReuseRoute(i.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=i.value;var a=function(t,i,n){return i.children.map((function(i){var r,a=_createForOfIteratorHelper(n.children);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(t.shouldReuseRoute(o.value.snapshot,i.value))return e(t,i,o)}}catch(s){a.e(s)}finally{a.f()}return e(t,i)}))}(t,i,n);return new Xf(r,a)}var o=t.retrieve(i.value);if(o){var s=o.route;return function e(t,i){if(t.value.routeConfig!==i.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==i.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");i.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)e(t.children[n],i.children[n])}(i,s),s}var l,c=new $f(new Yd((l=i.value).url),new Yd(l.params),new Yd(l.queryParams),new Yd(l.fragment),new Yd(l.data),l.outlet,l.component,l),u=i.children.map((function(i){return e(t,i)}));return new Xf(c,u)}(e,t._root,i?i._root:void 0);return new Qf(n,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:i})})),Bp((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(n=t.rootContexts,r=t.routeReuseStrategy,a=function(e){return t.triggerEvent(e)},j((function(e){return new yv(r,e.targetRouterState,e.currentRouterState,a).activate(n),e}))),Bp({next:function(){o=!0},complete:function(){o=!0}}),Hp((function(){if(!o&&!s){t.resetUrlToCurrentUrlTree();var n=new Kp(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));i.next(n),e.resolve(!1)}t.currentNavigation=null})),yp((function(n){if(s=!0,(l=n)&&l.ngNavigationCancelingError){var r=Cv(n.url);r||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var a=new Kp(e.id,t.serializeUrl(e.extractedUrl),n.message);i.next(a),r?setTimeout((function(){var i=t.urlHandlingStrategy.merge(n.url,t.rawUrlTree);return t.scheduleNavigation(i,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new Xp(e.id,t.serializeUrl(e.extractedUrl),n);i.next(o);try{e.resolve(t.errorHandler(n))}catch(c){e.reject(c)}}var l;return $d})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var i=e.parseUrl(t.url),n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(i,n,r,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){vf(e),this.config=e.map(yf),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.relativeTo,n=t.queryParams,r=t.fragment,a=t.preserveQueryParams,o=t.queryParamsHandling,s=t.preserveFragment;xn()&&a&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=i||this.routerState.root,c=s?this.currentUrlTree.fragment:r,u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}else u=a?this.currentUrlTree.queryParams:n||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,i,n,r){if(0===i.length)return lv(t.root,t.root,t,n,r);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new cv(!0,0,e);var t=0,i=!1,n=e.reduce((function(e,n,r){if("object"==typeof n&&null!=n){if(n.outlets){var a={};return _f(n.outlets,(function(e,t){a[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray2(e),[{outlets:a}])}if(n.segmentPath)return[].concat(_toConsumableArray2(e),[n.segmentPath])}return"string"!=typeof n?[].concat(_toConsumableArray2(e),[n]):0===r?(n.split("/").forEach((function(n,r){0==r&&"."===n||(0==r&&""===n?i=!0:".."===n?t++:""!=n&&e.push(n))})),e):[].concat(_toConsumableArray2(e),[n])}),[]);return new cv(i,t,n)}(i);if(a.toRoot())return lv(t.root,new Af([],{}),t,n,r);var o=function(e,t,i){if(e.isAbsolute)return new uv(t.root,!0,0);if(-1===i.snapshot._lastPathIndex)return new uv(i.snapshot._urlSegment,!0,0);var n=sv(e.commands[0])?0:1;return function(e,t,i){for(var n=e,r=t,a=i;a>r;){if(a-=r,!(n=n.parent))throw new Error("Invalid number of '../'");r=n.segments.length}return new uv(n,!1,r-a)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+n,e.numberOfDoubleDots)}(a,t,e),s=o.processChildren?pv(o.segmentGroup,o.index,a.commands):dv(o.segmentGroup,o.index,a.commands);return lv(o.segmentGroup,s,t,n,r)}(l,this.currentUrlTree,e,u,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};xn()&&this.isNgZoneEnabled&&!Wc.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var i=Cv(e)?e:this.parseUrl(e),n=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var i=e[t];if(null==i)throw new Error("The requested path contains ".concat(i," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(t){var i;try{i=this.urlSerializer.parse(t)}catch(e){i=this.malformedUriErrorHandler(e,this.urlSerializer,t)}return i}},{key:"isActive",value:function(e,t){if(Cv(e))return Ef(this.currentUrlTree,e,t);var i=this.parseUrl(e);return Ef(this.currentUrlTree,i,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,i){var n=e[i];return null!=n&&(t[i]=n),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new Yp(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,i,n,r){var a,o,s,l=this.getTransition();if(l&&"imperative"!==t&&"imperative"===l.source&&l.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(l&&"hashchange"==t&&"popstate"===l.source&&l.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(l&&"popstate"==t&&"hashchange"===l.source&&l.rawUrl.toString()===e.toString())return Promise.resolve(!0);r?(a=r.resolve,o=r.reject,s=r.promise):s=new Promise((function(e,t){a=e,o=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:n,resolve:a,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,i,n){var r=this.urlSerializer.serialize(e);n=n||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object.assign(Object.assign({},n),{navigationId:i})):this.location.go(r,"",Object.assign(Object.assign({},n),{navigationId:i}))}},{key:"resetStateAndUrl",value:function(e,t,i){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}()).\u0275fac=function(e){Fo()},lm.\u0275dir=_t({type:lm}),lm),um=((sm=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.router=t,this.route=i,this.commands=[],null==n&&r.setAttribute(a.nativeElement,"tabindex","0")}return _createClass(e,[{key:"onClick",value:function(){var e={skipLocationChange:dm(this.skipLocationChange),replaceUrl:dm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){xn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:dm(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:dm(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||sm)(Lo(cm),Lo($f),No("tabindex"),Lo(nl),Lo($s))},sm.\u0275dir=_t({type:sm,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&Ko("click",(function(){return t.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),sm),hm=((om=function(){function e(t,i,n){var r=this;_classCallCheck2(this,e),this.router=t,this.route=i,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof Yp&&r.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,i,n){if(0!==e||t||i||n)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var r={skipLocationChange:dm(this.skipLocationChange),replaceUrl:dm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){xn()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:dm(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:dm(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||om)(Lo(cm),Lo($f),Lo(Nu))},om.\u0275dir=_t({type:om,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&Ko("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(Is("href",t.href,ir),Do("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Vs]}),om);function dm(e){return""===e||!!e}var pm,fm,vm,mm,gm=((pm=function(){function e(t,i,n,r,a){var o=this;_classCallCheck2(this,e),this.router=t,this.element=i,this.renderer=n,this.link=r,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe((function(e){e instanceof Yp&&o.update()}))}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.links.changes.subscribe((function(t){return e.update()})),this.linksWithHrefs.changes.subscribe((function(t){return e.update()})),this.update()}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.classes.forEach((function(i){t?e.renderer.addClass(e.element.nativeElement,i):e.renderer.removeClass(e.element.nativeElement,i)})))}))}},{key:"isLinkActive",value:function(e){var t=this;return function(i){return e.isActive(i.urlTree,t.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter((function(e){return!!e}))}}]),e}()).\u0275fac=function(e){return new(e||pm)(Lo(cm),Lo($s),Lo(nl),Lo(um,8),Lo(hm,8))},pm.\u0275dir=_t({type:pm,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,i){var n;1&e&&(vc(i,um,!0),vc(i,hm,!0)),2&e&&(hc(n=yc())&&(t.links=n),hc(n=yc())&&(t.linksWithHrefs=n))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Vs]}),pm),ym=function e(){_classCallCheck2(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new bm,this.attachRef=null},bm=function(){function e(){_classCallCheck2(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new ym,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),km=((fm=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.parentContexts=t,this.location=i,this.resolver=n,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new ec,this.deactivateEvents=new ec,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var i=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,r=new Cm(e,n,this.location.injector);this.activated=this.location.createComponent(i,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}()).\u0275fac=function(e){return new(e||fm)(Lo(bm),Lo(El),Lo(Zs),No("name"),Lo(Qa))},fm.\u0275dir=_t({type:fm,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),fm),Cm=function(){function e(t,i,n){_classCallCheck2(this,e),this.route=t,this.childContexts=i,this.parent=n}return _createClass(e,[{key:"get",value:function(e,t){return e===$f?this.route:e===bm?this.childContexts:this.parent.get(e,t)}}]),e}(),wm=function e(){_classCallCheck2(this,e)},_m=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return Gd(null)}}]),e}(),Sm=((mm=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.router=t,this.injector=r,this.preloadingStrategy=a,this.loader=new tm(i,n,(function(e){return t.triggerEvent(new tf(e))}),(function(e){return t.triggerEvent(new nf(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(np((function(e){return e instanceof Yp})),Lp((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(nt);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var i,n=[],r=_createForOfIteratorHelper(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var o=a._loadedConfig;n.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?n.push(this.preloadConfig(e,a)):a.children&&n.push(this.processRoutes(e,a.children))}}catch(s){r.e(s)}finally{r.f()}return W(n).pipe(K(),j((function(e){})))}},{key:"preloadConfig",value:function(e,t){var i=this;return this.preloadingStrategy.preload(t,(function(){return i.loader.load(e.injector,t).pipe(z((function(e){return t._loadedConfig=e,i.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||mm)(Ze(cm),Ze(du),Ze(jc),Ze(fo),Ze(wm))},mm.\u0275prov=pe({token:mm,factory:mm.\u0275fac}),mm),Em=((vm=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck2(this,e),this.router=t,this.viewportScroller=i,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Gp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yp&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof lf&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new lf(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){Fo()},vm.\u0275dir=_t({type:vm}),vm),Tm=new qe("ROUTER_CONFIGURATION"),Am=new qe("ROUTER_FORROOT_GUARD"),Om=[Wu,{provide:Df,useClass:Rf},{provide:cm,useFactory:function(e,t,i,n,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,u=new cm(null,e,t,i,n,r,a,Cf(o));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),s.errorHandler&&(u.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(u.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=wu();u.events.subscribe((function(e){h.logGroup("Router Event: "+e.constructor.name),h.log(e.toString()),h.log(e),h.logGroupEnd()}))}return s.onSameUrlNavigation&&(u.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(u.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(u.relativeLinkResolution=s.relativeLinkResolution),u},deps:[Df,bm,Wu,fo,du,jc,em,Tm,[function(){return function e(){_classCallCheck2(this,e)}}(),new se],[function(){return function e(){_classCallCheck2(this,e)}}(),new se]]},bm,{provide:$f,useFactory:function(e){return e.routerState.root},deps:[cm]},{provide:du,useClass:vu},Sm,_m,function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(yp((function(){return Gd(null)})))}}]),e}(),{provide:Tm,useValue:{enableTracing:!1}}];function xm(){return new ru("Router",cm)}var Im,Dm=((Im=function(){function e(t,i){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,i){return{ngModule:e,providers:[Om,Lm(t),{provide:Am,useFactory:Mm,deps:[[cm,new se,new ce]]},{provide:Tm,useValue:i||{}},{provide:Nu,useFactory:Pm,deps:[Eu,[new oe(Hu),new se],Tm]},{provide:Em,useFactory:Rm,deps:[cm,cd,Tm]},{provide:wm,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:_m},{provide:ru,multi:!0,useFactory:xm},[Fm,{provide:wc,multi:!0,useFactory:Bm,deps:[Fm]},{provide:Hm,useFactory:Vm,deps:[Fm]},{provide:xc,multi:!0,useExisting:Hm}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Lm(t)]}}}]),e}()).\u0275mod=Ct({type:Im}),Im.\u0275inj=ve({factory:function(e){return new(e||Im)(Ze(Am,8),Ze(cm,8))}}),Im);function Rm(e,t,i){return i.scrollOffset&&t.setOffset(i.scrollOffset),new Em(e,t,i)}function Pm(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.useHash?new qu(e,t):new Uu(e,t)}function Mm(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Lm(e){return[{provide:vo,multi:!0,useValue:e},{provide:em,multi:!0,useValue:e}]}var Nm,Fm=((Nm=function(){function e(t){_classCallCheck2(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new x}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(Ou,Promise.resolve(null)).then((function(){var t=null,i=new Promise((function(e){return t=e})),n=e.injector.get(cm),r=e.injector.get(Tm);if(e.isLegacyDisabled(r)||e.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(r.initialNavigation,"'"));n.hooks.afterPreactivation=function(){return e.initNavigation?Gd(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},n.initialNavigation()}return i}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Tm),i=this.injector.get(Sm),n=this.injector.get(Em),r=this.injector.get(cm),a=this.injector.get(uu);e===a.components[0]&&(this.isLegacyEnabled(t)?r.initialNavigation():this.isLegacyDisabled(t)&&r.setUpLocationChangeListener(),i.setUpPreloading(),n.init(),r.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||Nm)(Ze(fo))},Nm.\u0275prov=pe({token:Nm,factory:Nm.\u0275fac}),Nm);function Bm(e){return e.appInitializer.bind(e)}function Vm(e){return e.bootstrapListener.bind(e)}var jm,Hm=new qe("Router Initializer"),Um=[],qm=((jm=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:jm}),jm.\u0275inj=ve({factory:function(e){return new(e||jm)},imports:[[Dm.forRoot(Um)],Dm]}),jm);function Wm(e,t){return new _((function(i){var n=e.length;if(0!==n)for(var r=new Array(n),a=0,o=0,s=function(s){var l=W(e[s]),c=!1;i.add(l.subscribe({next:function(e){c||(c=!0,o++),r[s]=e},error:function(e){return i.error(e)},complete:function(){++a!==n&&c||(o===n&&i.next(t?t.reduce((function(e,t,i){return e[t]=r[i],e}),{}):r),i.complete())}}))},l=0;l<n;l++)s(l);else i.complete()}))}var zm,Gm,Ym,Km,Xm=new qe("NgValueAccessor"),Jm={provide:Xm,useExisting:Ae((function(){return Qm})),multi:!0},Qm=((zm=function(){function e(t,i){_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||zm)(Lo(nl),Lo($s))},zm.\u0275dir=_t({type:zm,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[Xs([Jm])]}),zm),Zm={provide:Xm,useExisting:Ae((function(){return eg})),multi:!0},$m=new qe("CompositionEventMode"),eg=((Km=function(){function e(t,i,n){var r;_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=wu()?wu().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||Km)(Lo(nl),Lo($s),Lo($m,8))},Km.\u0275dir=_t({type:Km,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&Ko("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[Xs([Zm])]}),Km),tg=((Ym=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||Ym)},Ym.\u0275dir=_t({type:Ym}),Ym),ig=((Gm=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),i}(tg)).\u0275fac=function(e){return ng(e||Gm)},Gm.\u0275dir=_t({type:Gm,features:[Ps]}),Gm),ng=pn(ig);function rg(){throw new Error("unimplemented")}var ag,og,sg=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck2(this,i),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _createClass(i,[{key:"validator",get:function(){return rg()}},{key:"asyncValidator",get:function(){return rg()}}]),i}(tg),lg=function(){function e(t){_classCallCheck2(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),cg=((og=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){return _classCallCheck2(this,i),t.call(this,e)}return i}(lg)).\u0275fac=function(e){return new(e||og)(Lo(sg,2))},og.\u0275dir=_t({type:og,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&hs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Ps]}),og),ug=((ag=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){return _classCallCheck2(this,i),t.call(this,e)}return i}(lg)).\u0275fac=function(e){return new(e||ag)(Lo(ig,2))},ag.\u0275dir=_t({type:ag,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&hs("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Ps]}),ag);function hg(e){return null==e||0===e.length}var dg=new qe("NgValidators"),pg=new qe("NgAsyncValidators"),fg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,vg=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(hg(t.value)||hg(e))return null;var i=parseFloat(t.value);return!isNaN(i)&&i<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(hg(t.value)||hg(e))return null;var i=parseFloat(t.value);return!isNaN(i)&&i>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return hg(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return hg(e.value)||fg.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(hg(t.value))return null;var i=t.value?t.value.length:0;return i<e?{minlength:{requiredLength:e,actualLength:i}}:null}}},{key:"maxLength",value:function(e){return function(t){var i=t.value?t.value.length:0;return i>e?{maxlength:{requiredLength:e,actualLength:i}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),i=new RegExp(n)):(n=t.toString(),i=t),function(e){if(hg(e.value))return null;var t=e.value;return i.test(t)?null:{pattern:{requiredPattern:n,actualValue:t}}}):e.nullValidator;var i,n}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(mg);return 0==t.length?null:function(e){return yg(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(mg);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(1===t.length){var n=t[0];if(c(n))return Wm(n,null);if(u(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Wm(r.map((function(e){return n[e]})),r)}}if("function"==typeof t[t.length-1]){var a=t.pop();return Wm(t=1===t.length&&c(t[0])?t[0]:t,null).pipe(j((function(e){return a.apply(void 0,_toConsumableArray2(e))})))}return Wm(t,null)}(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(gg)).pipe(j(yg))}}}]),e}();function mg(e){return null!=e}function gg(e){var t=Go(e)?W(e):e;if(!Yo(t))throw new Error("Expected validator to return Promise or Observable.");return t}function yg(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function bg(e){return e.validate?function(t){return e.validate(t)}:e}function kg(e){return e.validate?function(t){return e.validate(t)}:e}var Cg,wg,_g,Sg,Eg={provide:Xm,useExisting:Ae((function(){return Tg})),multi:!0},Tg=((Cg=function(){function e(t,i){_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Cg)(Lo(nl),Lo($s))},Cg.\u0275dir=_t({type:Cg,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Xs([Eg])]}),Cg),Ag={provide:Xm,useExisting:Ae((function(){return xg})),multi:!0},Og=((_g=function(){function e(){_classCallCheck2(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(i){t._isSameGroup(i,e)&&i[1]!==e&&i[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||_g)},_g.\u0275prov=pe({token:_g,factory:_g.\u0275fac}),_g),xg=((wg=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(sg),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||wg)(Lo(nl),Lo($s),Lo(Og),Lo(fo))},wg.\u0275dir=_t({type:wg,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Xs([Ag])]}),wg),Ig={provide:Xm,useExisting:Ae((function(){return Dg})),multi:!0},Dg=((Sg=function(){function e(t,i){_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Sg)(Lo(nl),Lo($s))},Sg.\u0275dir=_t({type:Sg,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Xs([Ig])]}),Sg),Rg='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Pg='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Mg='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Lg=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Rg)}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(Pg,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat(Mg))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Rg)}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Pg)}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(e){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(e,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===e?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),e}(),Ng={provide:Xm,useExisting:Ae((function(){return jg})),multi:!0};function Fg(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var Bg,Vg,jg=((Vg=function(){function e(t,i){_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=wo}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var i=Fg(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",i)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(i){t.value=t._getOptionValue(i),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,i=Array.from(this._optionMap.keys());t<i.length;t++){var n=i[t];if(this._compareWith(this._optionMap.get(n),e))return n}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||Vg)(Lo(nl),Lo($s))},Vg.\u0275dir=_t({type:Vg,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Xs([Ng])]}),Vg),Hg=((Bg=function(){function e(t,i,n){_classCallCheck2(this,e),this._element=t,this._renderer=i,this._select=n,this._select&&(this.id=this._select._registerOption())}return _createClass(e,[{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Fg(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}}]),e}()).\u0275fac=function(e){return new(e||Bg)(Lo($s),Lo(nl),Lo(jg,9))},Bg.\u0275dir=_t({type:Bg,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Bg),Ug={provide:Xm,useExisting:Ae((function(){return Gg})),multi:!0};function qg(e,t){return null==e?""+t:("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var Wg,zg,Gg=((zg=function(){function e(t,i){_classCallCheck2(this,e),this._renderer=t,this._elementRef=i,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=wo}return _createClass(e,[{key:"writeValue",value:function(e){var t,i=this;if(this.value=e,Array.isArray(e)){var n=e.map((function(e){return i._getOptionId(e)}));t=function(e,t){e._setSelected(n.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(i){var n=[];if(i.hasOwnProperty("selectedOptions"))for(var r=i.selectedOptions,a=0;a<r.length;a++){var o=r.item(a),s=t._getOptionValue(o.value);n.push(s)}else for(var l=i.options,c=0;c<l.length;c++){var u=l.item(c);if(u.selected){var h=t._getOptionValue(u.value);n.push(h)}}t.value=n,e(n)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,i=Array.from(this._optionMap.keys());t<i.length;t++){var n=i[t];if(this._compareWith(this._optionMap.get(n)._value,e))return n}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||zg)(Lo(nl),Lo($s))},zg.\u0275dir=_t({type:zg,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&Ko("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Xs([Ug])]}),zg),Yg=((Wg=function(){function e(t,i,n){_classCallCheck2(this,e),this._element=t,this._renderer=i,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return _createClass(e,[{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}},{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(qg(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(qg(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}}]),e}()).\u0275fac=function(e){return new(e||Wg)(Lo($s),Lo(nl),Lo(Gg,9))},Wg.\u0275dir=_t({type:Wg,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Wg);function Kg(e,t){return[].concat(_toConsumableArray2(t.path),[e])}function Xg(e,t){e||$g(t,"Cannot find control with"),t.valueAccessor||$g(t,"No value accessor for form control with"),e.validator=vg.compose([e.validator,t.validator]),e.asyncValidator=vg.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(i){e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Jg(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,i){t.valueAccessor.writeValue(e),i&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Jg(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function Jg(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Qg(e,t){null==e&&$g(t,"Cannot find control with"),e.validator=vg.compose([e.validator,t.validator]),e.asyncValidator=vg.composeAsync([e.asyncValidator,t.asyncValidator])}function Zg(e){return $g(e,"There is no FormControl instance attached to form control element with")}function $g(e,t){var i;throw i=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(i))}function ey(e){return null!=e?vg.compose(e.map(bg)):null}function ty(e){return null!=e?vg.composeAsync(e.map(kg)):null}function iy(e,t){if(!e.hasOwnProperty("model"))return!1;var i=e.model;return!!i.isFirstChange()||!wo(t,i.currentValue)}var ny=[Qm,Dg,Tg,jg,Gg,xg];function ry(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function ay(e,t){if(!t)return null;Array.isArray(t)||$g(e,"Value accessor was not provided as an array for form control with");var i=void 0,n=void 0,r=void 0;return t.forEach((function(t){var a;t.constructor===eg?i=t:(a=t,ny.some((function(e){return a.constructor===e}))?(n&&$g(e,"More than one built-in value accessor matches form control with"),n=t):(r&&$g(e,"More than one custom value accessor matches form control with"),r=t))})),r||n||i||($g(e,"No valid value accessor for form control with"),null)}function oy(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function sy(e){var t=cy(e)?e.validators:e;return Array.isArray(t)?ey(t):t||null}function ly(e,t){var i=cy(t)?t.asyncValidators:e;return Array.isArray(i)?ty(i):i||null}function cy(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var uy,hy,dy,py,fy,vy,my,gy,yy,by,ky,Cy,wy,_y,Sy,Ey,Ty,Ay,Oy=function(){function e(t,i){_classCallCheck2(this,e),this.validator=t,this.asyncValidator=i,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=sy(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=ly(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var i=gg(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe((function(i){return t.setErrors(i,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,i){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var n=e;return t.forEach((function(e){n=n instanceof Iy?n.controls.hasOwnProperty(e)?n.controls[e]:null:n instanceof Dy&&n.at(e)||null})),n}(this,e)}},{key:"getError",value:function(e,t){var i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new ec,this.statusChanges=new ec}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){cy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),xy=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return _classCallCheck2(this,i),(e=t.call(this,sy(r),ly(a,r)))._onChange=[],e._applyFormState(n),e._setUpdateStrategy(r),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _createClass(i,[{key:"setValue",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==i.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==i.emitViewToModelChange)})),this.updateValueAndValidity(i)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),i}(Oy),Iy=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,sy(n),ly(r,n))).controls=e,a._initObservables(),a._setUpdateStrategy(n),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return _createClass(i,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(n){t._throwIfControlMissing(n),t.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:i.emitEvent})})),this.updateValueAndValidity(i)}},{key:"patchValue",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(n){t.controls[n]&&t.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:i.emitEvent})})),this.updateValueAndValidity(i)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(i,n){i.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,i){return e[i]=t instanceof xy?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(i){return e(t.controls[i],i)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,i=!1;return this._forEachChild((function(n,r){i=i||t.contains(r)&&e(n)})),i}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,i,n){return(i.enabled||e.disabled)&&(t[n]=i.value),t}))}},{key:"_reduceChildren",value:function(e,t){var i=e;return this._forEachChild((function(e,n){i=t(i,e,n)})),i}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var i=t[e];if(this.controls[i].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,i){if(void 0===e[i])throw new Error("Must supply a value for form control with name: '".concat(i,"'."))}))}}]),i}(Oy),Dy=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,sy(n),ly(r,n))).controls=e,a._initObservables(),a._setUpdateStrategy(n),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return _createClass(i,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,n){t._throwIfControlMissing(n),t.at(n).setValue(e,{onlySelf:!0,emitEvent:i.emitEvent})})),this.updateValueAndValidity(i)}},{key:"patchValue",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,n){t.at(n)&&t.at(n).patchValue(e,{onlySelf:!0,emitEvent:i.emitEvent})})),this.updateValueAndValidity(i)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(i,n){i.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof xy?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,i){e(t,i)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,i){if(void 0===e[i])throw new Error("Must supply a value for form control at index: ".concat(i,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=_createForOfIteratorHelper(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(i){t.e(i)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),i}(Oy),Ry={provide:ig,useExisting:Ae((function(){return My}))},Py=Promise.resolve(null),My=((hy=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this)).submitted=!1,r._directives=[],r.ngSubmit=new ec,r.form=new Iy({},ey(e),ty(n)),r}return _createClass(i,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;Py.then((function(){var i=t._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Xg(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Py.then((function(){var i=t._findContainer(e.path);i&&i.removeControl(e.name),oy(t._directives,e)}))}},{key:"addFormGroup",value:function(e){var t=this;Py.then((function(){var i=t._findContainer(e.path),n=new Iy({});Qg(n,e),i.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;Py.then((function(){var i=t._findContainer(e.path);i&&i.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var i=this;Py.then((function(){i.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,ry(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),i}(ig)).\u0275fac=function(e){return new(e||hy)(Lo(dg,10),Lo(pg,10))},hy.\u0275dir=_t({type:hy,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&Ko("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xs([Ry]),Ps]}),hy),Ly=((uy=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return Kg(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return ey(this._validators)}},{key:"asyncValidator",get:function(){return ty(this._asyncValidators)}}]),i}(ig)).\u0275fac=function(e){return Ny(e||uy)},uy.\u0275dir=_t({type:uy,features:[Ps]}),uy),Ny=pn(Ly),Fy=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(Rg,'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(Pg,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(Mg))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(Pg,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(Mg))}}]),e}(),By={provide:ig,useExisting:Ae((function(){return Vy}))},Vy=((dy=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this))._parent=e,a._validators=n,a._asyncValidators=r,a}return _createClass(i,[{key:"_checkParentType",value:function(){this._parent instanceof i||this._parent instanceof My||Fy.modelGroupParentException()}}]),i}(Ly)).\u0275fac=function(e){return new(e||dy)(Lo(ig,5),Lo(dg,10),Lo(pg,10))},dy.\u0275dir=_t({type:dy,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[Xs([By]),Ps]}),dy),jy={provide:sg,useExisting:Ae((function(){return Uy}))},Hy=Promise.resolve(null),Uy=((fy=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this)).control=new xy,o._registered=!1,o.update=new ec,o._parent=e,o._rawValidators=n||[],o._rawAsyncValidators=r||[],o.valueAccessor=ay(_assertThisInitialized(o),a),o}return _createClass(i,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),iy(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Xg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof Vy)&&this._parent instanceof Ly?Fy.formGroupNameException():this._parent instanceof Vy||this._parent instanceof My||Fy.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Fy.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;Hy.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,i=e.isDisabled.currentValue,n=""===i||i&&"false"!==i;Hy.then((function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()}))}},{key:"path",get:function(){return this._parent?Kg(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return ey(this._rawValidators)}},{key:"asyncValidator",get:function(){return ty(this._rawAsyncValidators)}}]),i}(sg)).\u0275fac=function(e){return new(e||fy)(Lo(ig,9),Lo(dg,10),Lo(pg,10),Lo(Xm,10))},fy.\u0275dir=_t({type:fy,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xs([jy]),Ps,Vs]}),fy),qy=((py=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||py)},py.\u0275dir=_t({type:py,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),py),Wy=new qe("NgModelWithFormControlWarning"),zy={provide:sg,useExisting:Ae((function(){return Gy}))},Gy=((vy=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this))._ngModelWarningConfig=a,o.update=new ec,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=n||[],o.valueAccessor=ay(_assertThisInitialized(o),r),o}return _createClass(i,[{key:"ngOnChanges",value:function(e){this._isControlChanged(e)&&(Xg(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),iy(e,this.viewModel)&&(function(e,t,i,n){xn()&&"never"!==n&&((null!==n&&"once"!==n||t._ngModelWarningSentOnce)&&("always"!==n||i._ngModelWarningSent)||(Lg.ngModelWarning("formControl"),t._ngModelWarningSentOnce=!0,i._ngModelWarningSent=!0))}(0,i,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_isControlChanged",value:function(e){return e.hasOwnProperty("form")}},{key:"isDisabled",set:function(e){Lg.disabledAttrWarning()}},{key:"path",get:function(){return[]}},{key:"validator",get:function(){return ey(this._rawValidators)}},{key:"asyncValidator",get:function(){return ty(this._rawAsyncValidators)}},{key:"control",get:function(){return this.form}}]),i}(sg)).\u0275fac=function(e){return new(e||vy)(Lo(dg,10),Lo(pg,10),Lo(Xm,10),Lo(Wy,8))},vy.\u0275dir=_t({type:vy,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Xs([zy]),Ps,Vs]}),vy._ngModelWarningSentOnce=!1,vy),Yy={provide:ig,useExisting:Ae((function(){return Ky}))},Ky=((my=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this))._validators=e,r._asyncValidators=n,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new ec,r}return _createClass(i,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return Xg(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){oy(this.directives,e)}},{key:"addFormGroup",value:function(e){var t=this.form.get(e.path);Qg(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(e){}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){var t=this.form.get(e.path);Qg(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(e){}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,ry(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach((function(t){var i=e.form.get(t.path);t.control!==i&&(function(e,t){t.valueAccessor.registerOnChange((function(){return Zg(t)})),t.valueAccessor.registerOnTouched((function(){return Zg(t)})),t._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),t._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),e&&e._clearChangeFns()}(t.control,t),i&&Xg(i,t),t.control=i)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var e=ey(this._validators);this.form.validator=vg.compose([this.form.validator,e]);var t=ty(this._asyncValidators);this.form.asyncValidator=vg.composeAsync([this.form.asyncValidator,t])}},{key:"_checkFormPresent",value:function(){this.form||Lg.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),i}(ig)).\u0275fac=function(e){return new(e||my)(Lo(dg,10),Lo(pg,10))},my.\u0275dir=_t({type:my,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&Ko("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xs([Yy]),Ps,Vs]}),my),Xy={provide:dg,useExisting:Ae((function(){return Jy})),multi:!0},Jy=((gy=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"validate",value:function(e){return this.required?vg.required(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}}]),e}()).\u0275fac=function(e){return new(e||gy)},gy.\u0275dir=_t({type:gy,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&Do("required",t.required?"":null)},inputs:{required:"required"},features:[Xs([Xy])]}),gy),Qy={provide:dg,useExisting:Ae((function(){return Zy})),multi:!0},Zy=((yy=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"validate",value:function(e){return this._enabled?vg.email(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"email",set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()}}]),e}()).\u0275fac=function(e){return new(e||yy)},yy.\u0275dir=_t({type:yy,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[Xs([Qy])]}),yy),$y={provide:dg,useExisting:Ae((function(){return eb})),multi:!0},eb=((by=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null==this.minlength?null:this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=vg.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),e}()).\u0275fac=function(e){return new(e||by)},by.\u0275dir=_t({type:by,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Do("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[Xs([$y]),Vs]}),by),tb={provide:dg,useExisting:Ae((function(){return ib})),multi:!0},ib=((ky=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null!=this.maxlength?this._validator(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=vg.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}]),e}()).\u0275fac=function(e){return new(e||ky)},ky.\u0275dir=_t({type:ky,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Do("maxlength",t.maxlength?t.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Xs([tb]),Vs]}),ky),nb={provide:dg,useExisting:Ae((function(){return rb})),multi:!0},rb=((Ey=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=vg.pattern(this.pattern)}}]),e}()).\u0275fac=function(e){return new(e||Ey)},Ey.\u0275dir=_t({type:Ey,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&Do("pattern",t.pattern?t.pattern:null)},inputs:{pattern:"pattern"},features:[Xs([nb]),Vs]}),Ey),ab=((Sy=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Sy}),Sy.\u0275inj=ve({factory:function(e){return new(e||Sy)}}),Sy),ob=((_y=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"group",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._reduceControls(e),n=null,r=null,a=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(n=null!=t.validators?t.validators:null,r=null!=t.asyncValidators?t.asyncValidators:null,a=null!=t.updateOn?t.updateOn:void 0):(n=null!=t.validator?t.validator:null,r=null!=t.asyncValidator?t.asyncValidator:null)),new Iy(i,{asyncValidators:r,updateOn:a,validators:n})}},{key:"control",value:function(e,t,i){return new xy(e,t,i)}},{key:"array",value:function(e,t,i){var n=this,r=e.map((function(e){return n._createControl(e)}));return new Dy(r,t,i)}},{key:"_reduceControls",value:function(e){var t=this,i={};return Object.keys(e).forEach((function(n){i[n]=t._createControl(e[n])})),i}},{key:"_createControl",value:function(e){return e instanceof xy||e instanceof Iy||e instanceof Dy?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}()).\u0275fac=function(e){return new(e||_y)},_y.\u0275prov=pe({token:_y,factory:_y.\u0275fac}),_y),sb=((wy=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:wy}),wy.\u0275inj=ve({factory:function(e){return new(e||wy)},providers:[Og],imports:[ab]}),wy),lb=((Cy=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:Wy,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}()).\u0275mod=Ct({type:Cy}),Cy.\u0275inj=ve({factory:function(e){return new(e||Cy)},providers:[ob,Og],imports:[ab]}),Cy),cb=function e(){_classCallCheck2(this,e),this.learningAreas=[]},ub=function e(){_classCallCheck2(this,e)},hb=function e(){_classCallCheck2(this,e)},db=function e(){_classCallCheck2(this,e),this.educationalQualifications=[],this.previousOrganisations=[],this.areaOfExpertise=[]},pb=function e(){_classCallCheck2(this,e)},fb=function e(){_classCallCheck2(this,e)},vb=function e(){_classCallCheck2(this,e),this.approvalStatus="Pending",this.isLive=!1,this.timeLeft=""},mb=((Ay=function(){function e(){_classCallCheck2(this,e),this.cancelBooking=new vb,this.meeting=new fb}return _createClass(e,[{key:"setBooking",value:function(e){this.bookingDetails=e}},{key:"getBooking",value:function(){return this.bookingDetails}},{key:"setMeeting",value:function(e){this.meeting.role=e.role,this.meeting.roomId=e.roomId,this.meeting.roomName=e.roomName,this.meeting.userName=e.userName,this.meeting.userId=e.userId}},{key:"getMeeting",value:function(){return this.meeting}},{key:"setDeleteBooking",value:function(e){this.cancelBooking=e}},{key:"getDeleteBooking",value:function(){return this.cancelBooking}},{key:"refreshBookingList",value:function(e){this.deleteBooking=e}},{key:"getNewBookingList",value:function(){return this.deleteBooking}},{key:"studentPendingRequests",value:function(e){this.pendingRequests=e}},{key:"getStudentPendingRequests",value:function(){return this.pendingRequests}}]),e}()).\u0275fac=function(e){return new(e||Ay)},Ay.\u0275prov=pe({token:Ay,factory:Ay.\u0275fac,providedIn:"root"}),Ay),gb=((Ty=function(){function e(){_classCallCheck2(this,e),this.studentLoginModel=new hb}return _createClass(e,[{key:"setLoginType",value:function(e){this.loginType=e}},{key:"getLoginType",value:function(){return this.loginType}},{key:"setUserId",value:function(e){this.userId=e}},{key:"getUserId",value:function(){return this.userId}},{key:"setTrType",value:function(e){this.trType=e}},{key:"getTrType",value:function(){return this.trType}}]),e}()).\u0275fac=function(e){return new(e||Ty)},Ty.\u0275prov=pe({token:Ty,factory:Ty.\u0275fac,providedIn:"root"}),Ty),yb=function e(){_classCallCheck2(this,e)},bb=function e(){_classCallCheck2(this,e)},kb=function e(){_classCallCheck2(this,e)},Cb=function(){function e(t){var i=this;_classCallCheck2(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){i.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var n=e.slice(0,t),r=n.toLowerCase(),a=e.slice(t+1).trim();i.maybeSetNormalizedName(n,r),i.headers.has(r)?i.headers.get(r).push(a):i.headers.set(r,[a])}}))}:function(){i.headers=new Map,Object.keys(t).forEach((function(e){var n=t[e],r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(i.headers.set(r,n),i.maybeSetNormalizedName(e,r))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(i){t.headers.set(i,e.headers.get(i)),t.normalizedNames.set(i,e.normalizedNames.get(i))}))}},{key:"clone",value:function(t){var i=new e;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([t]),i}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);var n=("a"===e.op?this.headers.get(t):void 0)||[];n.push.apply(n,_toConsumableArray2(i)),this.headers.set(t,n);break;case"d":var r=e.value;if(r){var a=this.headers.get(t);if(!a)return;0===(a=a.filter((function(e){return-1===r.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(i){return e(t.normalizedNames.get(i),t.headers.get(i))}))}}]),e}(),wb=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return _b(e)}},{key:"encodeValue",value:function(e){return _b(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function _b(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Sb=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck2(this,e),this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new wb,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var i=new Map;return e.length>0&&e.split("&").forEach((function(e){var n=e.indexOf("="),r=_slicedToArray(-1==n?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,n)),t.decodeValue(e.slice(n+1))],2),a=r[0],o=r[1],s=i.get(a)||[];s.push(o),i.set(a,s)})),i}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach((function(e){var n=i.fromObject[e];t.map.set(e,Array.isArray(n)?n:[n])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var i=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return i+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var i=new e({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat([t]),i}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var i=("a"===t.op?e.map.get(t.param):void 0)||[];i.push(t.value),e.map.set(t.param,i);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var n=e.map.get(t.param)||[],r=n.indexOf(t.value);-1!==r&&n.splice(r,1),n.length>0?e.map.set(t.param,n):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function Eb(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Tb(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Ab(e){return"undefined"!=typeof FormData&&e instanceof FormData}var Ob=function(){function e(t,i,n,r){var a;if(_classCallCheck2(this,e),this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,a=r):a=n,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.params&&(this.params=a.params)),this.headers||(this.headers=new Cb),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=i;else{var s=i.indexOf("?");this.urlWithParams=i+(-1===s?"?":s<i.length-1?"&":"")+o}}else this.params=new Sb,this.urlWithParams=i}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:Eb(this.body)||Tb(this.body)||Ab(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sb?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Ab(this.body)?null:Tb(this.body)?this.body.type||null:Eb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sb?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,l=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((function(e,i){return e.set(i,t.setHeaders[i])}),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,i){return e.set(i,t.setParams[i])}),c)),new e(i,n,a,{params:c,headers:l,reportProgress:s,responseType:r,withCredentials:o})}}]),e}(),xb=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),Ib=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck2(this,e),this.headers=t.headers||new Cb,this.status=void 0!==t.status?t.status:i,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},Db=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck2(this,i),(e=t.call(this,n)).type=xb.ResponseHeader,e}return _createClass(i,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),i}(Ib),Rb=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck2(this,i),(e=t.call(this,n)).type=xb.Response,e.body=void 0!==n.body?n.body:null,e}return _createClass(i,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),i}(Ib),Pb=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),n.error=e.error||null,n}return i}(Ib);function Mb(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var Lb,Nb,Fb,Bb,Vb,jb,Hb,Ub,qb,Wb,zb,Gb=((Lb=function(){function e(t){_classCallCheck2(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var i,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Ob)i=e;else{var a=void 0;a=r.headers instanceof Cb?r.headers:new Cb(r.headers);var o=void 0;r.params&&(o=r.params instanceof Sb?r.params:new Sb({fromObject:r.params})),i=new Ob(e,t,void 0!==r.body?r.body:null,{headers:a,params:o,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}var s=Gd(i).pipe(Lp((function(e){return n.handler.handle(e)})));if(e instanceof Ob||"events"===r.observe)return s;var l=s.pipe(np((function(e){return e instanceof Rb})));switch(r.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return l.pipe(j((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return l.pipe(j((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return l.pipe(j((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return l.pipe(j((function(e){return e.body})))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type ".concat(r.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new Sb).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,Mb(i,t))}},{key:"post",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,Mb(i,t))}},{key:"put",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,Mb(i,t))}}]),e}()).\u0275fac=function(e){return new(e||Lb)(Ze(bb))},Lb.\u0275prov=pe({token:Lb,factory:Lb.\u0275fac}),Lb),Yb=function(){function e(t,i){_classCallCheck2(this,e),this.next=t,this.interceptor=i}return _createClass(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),Kb=new qe("HTTP_INTERCEPTORS"),Xb=((Nb=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Nb)},Nb.\u0275prov=pe({token:Nb,factory:Nb.\u0275fac}),Nb),Jb=/^\)\]\}',?\n/,Qb=function e(){_classCallCheck2(this,e)},Zb=((Bb=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}()).\u0275fac=function(e){return new(e||Bb)},Bb.\u0275prov=pe({token:Bb,factory:Bb.\u0275fac}),Bb),$b=((Fb=function(){function e(t){_classCallCheck2(this,e),this.xhrFactory=t}return _createClass(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new _((function(i){var n=t.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((function(e,t){return n.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var r=e.detectContentTypeHeader();null!==r&&n.setRequestHeader("Content-Type",r)}if(e.responseType){var a=e.responseType.toLowerCase();n.responseType="json"!==a?a:"text"}var o=e.serializeBody(),s=null,l=function(){if(null!==s)return s;var t=1223===n.status?204:n.status,i=n.statusText||"OK",r=new Cb(n.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(n)||e.url;return s=new Db({headers:r,status:t,statusText:i,url:a})},c=function(){var t=l(),r=t.headers,a=t.status,o=t.statusText,s=t.url,c=null;204!==a&&(c=void 0===n.response?n.responseText:n.response),0===a&&(a=c?200:0);var u=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof c){var h=c;c=c.replace(Jb,"");try{c=""!==c?JSON.parse(c):null}catch(d){c=h,u&&(u=!1,c={error:d,text:c})}}u?(i.next(new Rb({body:c,headers:r,status:a,statusText:o,url:s||void 0})),i.complete()):i.error(new Pb({error:c,headers:r,status:a,statusText:o,url:s||void 0}))},u=function(e){var t=l().url,r=new Pb({error:e,status:n.status||0,statusText:n.statusText||"Unknown Error",url:t||void 0});i.error(r)},h=!1,d=function(t){h||(i.next(l()),h=!0);var r={type:xb.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(r.total=t.total),"text"===e.responseType&&n.responseText&&(r.partialText=n.responseText),i.next(r)},p=function(e){var t={type:xb.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),i.next(t)};return n.addEventListener("load",c),n.addEventListener("error",u),e.reportProgress&&(n.addEventListener("progress",d),null!==o&&n.upload&&n.upload.addEventListener("progress",p)),n.send(o),i.next({type:xb.Sent}),function(){n.removeEventListener("error",u),n.removeEventListener("load",c),e.reportProgress&&(n.removeEventListener("progress",d),null!==o&&n.upload&&n.upload.removeEventListener("progress",p)),n.abort()}}))}}]),e}()).\u0275fac=function(e){return new(e||Fb)(Ze(Qb))},Fb.\u0275prov=pe({token:Fb,factory:Fb.\u0275fac}),Fb),ek=new qe("XSRF_COOKIE_NAME"),tk=new qe("XSRF_HEADER_NAME"),ik=function e(){_classCallCheck2(this,e)},nk=((zb=function(){function e(t,i,n){_classCallCheck2(this,e),this.doc=t,this.platform=i,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=_h(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}()).\u0275fac=function(e){return new(e||zb)(Ze(Su),Ze(Oc),Ze(ek))},zb.\u0275prov=pe({token:zb,factory:zb.\u0275fac}),zb),rk=((Wb=function(){function e(t,i){_classCallCheck2(this,e),this.tokenService=t,this.headerName=i}return _createClass(e,[{key:"intercept",value:function(e,t){var i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return t.handle(e);var n=this.tokenService.getToken();return null===n||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,n)})),t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Wb)(Ze(ik),Ze(tk))},Wb.\u0275prov=pe({token:Wb,factory:Wb.\u0275fac}),Wb),ak=((qb=function(){function e(t,i){_classCallCheck2(this,e),this.backend=t,this.injector=i,this.chain=null}return _createClass(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(Kb,[]);this.chain=t.reduceRight((function(e,t){return new Yb(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||qb)(Ze(kb),Ze(fo))},qb.\u0275prov=pe({token:qb,factory:qb.\u0275fac}),qb),ok=((Ub=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:rk,useClass:Xb}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:ek,useValue:t.cookieName}:[],t.headerName?{provide:tk,useValue:t.headerName}:[]]}}}]),e}()).\u0275mod=Ct({type:Ub}),Ub.\u0275inj=ve({factory:function(e){return new(e||Ub)},providers:[rk,{provide:Kb,useExisting:rk,multi:!0},{provide:ik,useClass:nk},{provide:ek,useValue:"XSRF-TOKEN"},{provide:tk,useValue:"X-XSRF-TOKEN"}]}),Ub),sk=((Hb=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Hb}),Hb.\u0275inj=ve({factory:function(e){return new(e||Hb)},providers:[Gb,{provide:bb,useClass:ak},$b,{provide:kb,useExisting:$b},Zb,{provide:Qb,useExisting:Zb}],imports:[[ok.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Hb),lk=((jb=function(){function e(t){_classCallCheck2(this,e),this.http=t}return _createClass(e,[{key:"updatePassword",value:function(e,t){var i={userId:e.toString(),password:t};return this.http.post("http://localhost:5000/fellowGenius/updatePassword",i)}},{key:"resetPasswordLink",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/sendResetLink",{params:{email:e}})}},{key:"checkUser",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/userExists",{params:{email:e}})}},{key:"applyFilters",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/filtersApplied",e)}},{key:"fetchPendingReviewsList",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/fetchPendingReviewsList",{params:{sid:e.toString()}})}},{key:"fetchExpertRecentReviews",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/expertRecentReviews",{params:{tid:e.toString()}})}},{key:"giveFeedback",value:function(e,t,i,n){return this.http.get("http://localhost:5000/fellowGenius/meeting/saveTutorRatings",{params:{meetingId:e,rating:t.toString(),reviewText:i,tid:n.toString()}})}},{key:"registerUser",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/registerUser",e)}},{key:"verifyEmail",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/sendEmail",{params:{email:e}})}},{key:"updateStudentProfile",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/updateStudentProfile",e)}},{key:"checkLogin",value:function(e){return this.http.post("http://localhost:5000/authenticate",{email:e.email,password:e.password})}},{key:"getStudentDetails",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/getStudentDetails",{params:{userId:e.toString()}})}},{key:"saveTutorProfile",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/registerTutor",e)}},{key:"updateTutorProfile",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/updateTutorBasicInfo",e)}},{key:"fetchAllLinkedTutors",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/fetchAllLinkedTutors",{params:{userId:e.toString()}})}},{key:"updateTutorProfileDetails",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/updateTutor",e)}},{key:"updateTutorVerification",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/updateTutorVerification",e)}},{key:"checkTutorLogin",value:function(e){return this.http.post("http://localhost:5000/authenticateTutor",{email:e.email,password:e.password})}},{key:"getTutorDetails",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/getTutorDetails",{params:{userId:e.toString()}})}},{key:"getTutorList",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/fetchTutorList",{params:{subject:e.toString()}})}},{key:"fetchTopTutors",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/fetchTopTutorList",{params:{subject:e}})}},{key:"updateBookingStatus",value:function(e,t){return this.http.get("http://localhost:5000/fellowGenius/meeting/updateBookingStatus",{params:{bid:e.toString(),approvalStatus:t}})}},{key:"getTutorProfileDetails",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/getTutorProfileDetails",{params:{tid:e.toString()}})}},{key:"saveBooking",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/meeting/saveMeeting",e)}},{key:"getTutorBookings",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/findTutorBookings",{params:{tid:e.toString()}})}},{key:"findStudentBookings",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/findStudentBookings",{params:{studentid:e.toString()}})}},{key:"deleteMyBooking",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/deleteMyBooking",{params:{bid:e.toString()}})}},{key:"fetchApprovedMeetings",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/fetchApprovedList",{params:{studentid:e.toString()}})}},{key:"fetchApprovedMeetingsTutor",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/fetchApprovedListTutor",{params:{tutorId:e.toString()}})}},{key:"fetchLiveMeetingsTutor",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/fetchLiveMeetingListTutor",{params:{tutorId:e.toString()}})}},{key:"fetchLiveMeetingsStudent",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/fetchLiveMeetingListStudent",{params:{sid:e.toString()}})}},{key:"saveSocialLogin",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/registerSocialLogin",e)}},{key:"checkSocialLogin",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/ckeckSocialLogin",{params:{email:e}})}},{key:"editTutorProfileDetails",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/editTutorProfileDetails",e)}},{key:"editBasicInfo",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/editTutorBasicInfo",e)}},{key:"editBasicProfile",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/editTutorBasicInfo",e)}},{key:"saveScheduleData",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/meeting/saveSchedule",e)}},{key:"getScheduleData",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/getSchedule",{params:{tid:e.toString()}})}},{key:"getTutorTimeAvailabilityTimeArray",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/getTutorTimeArray",{params:{tid:e.toString()}})}},{key:"changeAvailabilityStatus",value:function(e,t){return this.http.get("http://localhost:5000/fellowGenius/changeAvailabilityStatus",{params:{tid:e.toString(),isAavailable:t}})}},{key:"getStudentSchedule",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/getStudentSchedule",{params:{sid:e.toString()}})}},{key:"getTutorIsAvailable",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/getTutorIsAvailable",{params:{bookingId:e.toString()}})}},{key:"isBookingValid",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/meeting/isBookingValid",{params:{sh:e.startTimeHour.toString(),sm:e.startTimeMinute.toString(),eh:e.endTimeHour.toString(),em:e.endTimeMinute.toString(),tid:e.tutorId.toString(),date:e.dateOfMeeting}})}},{key:"subtractArea",value:function(e,t,i){return this.http.get("http://localhost:5000/fellowGenius/subtractArea",{params:{userId:e.toString(),role:t,subject:i}})}},{key:"fetchTutorProfileDetails",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/fetchTutorProfileDetails",{params:{tid:e.toString()}})}},{key:"fetchBookingTutorProfileDetails",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/fetchBookingTutorProfileDetails",{params:{bookingId:e.toString()}})}},{key:"addNewCategory",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/addCategories",{category:e.category,subCategory:e.subCategory})}},{key:"getAllCategories",value:function(){return this.http.get("http://localhost:5000/fellowGenius/getAllCategories")}},{key:"addNewSubCategory",value:function(e){return this.http.post("http://localhost:5000/fellowGenius/addSubCategories",{category:e.category,subCategory:e.subCategory})}},{key:"getSubCategories",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/getSubCategories",{params:{category:e}})}},{key:"getAllSubCategories",value:function(){return this.http.get("http://localhost:5000/fellowGenius/getAllSubCategories")}},{key:"fetchNotifications",value:function(e){return this.http.get("http://localhost:5000/fellowGenius/fetchNotifications",{params:{userId:e}})}},{key:"randomApi",value:function(){return this.http.get("http://localhost:5000/fellowGenius/randomapi")}}]),e}()).\u0275fac=function(e){return new(e||jb)(Ze(Gb))},jb.\u0275prov=pe({token:jb,factory:jb.\u0275fac,providedIn:"root"}),jb),ck=((Vb=function(){function e(t,i){_classCallCheck2(this,e),this.loginService=t,this.httpService=i,this.tutorProfileDetails=new db,this.tutorProfile=new ub,this.tutorLogin=new yb,this.bookingList=[],this.pendingRequestsCount=0,this.bookingRequestMessage="",this.bookingsChanged=new x}return _createClass(e,[{key:"setTutorLogin",value:function(e){this.tutorLogin=e}},{key:"getTutorLogin",value:function(){return this.tutorLogin}},{key:"setTutorDetails",value:function(e){this.tutorProfile=e}},{key:"getTutorDetials",value:function(){return this.tutorProfile}},{key:"setTutorProfileDetails",value:function(e){this.tutorProfileDetails=e}},{key:"getTutorProfileDetails",value:function(){return this.tutorProfileDetails}},{key:"setEditFuntion",value:function(e){this.editVariable=e}},{key:"getEditFunction",value:function(){return this.editVariable}},{key:"setPersonalAvailabilitySchedule",value:function(e){this.personalAvailablitySchedule=e,this.manipulateMeetingSchedule()}},{key:"getPersonalAvailabilitySchedule",value:function(){return this.personalAvailablitySchedule}},{key:"getBookings",value:function(){return this.bookingList.slice()}},{key:"setBookings",value:function(e){this.bookingList=e,this.bookingsChanged.next(this.bookingList.slice())}},{key:"manipulateMeetingSchedule",value:function(){var e,t=_createForOfIteratorHelper(this.getPersonalAvailabilitySchedule().allMeetingsSchedule);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=new Date(i.StartTime.toString()),r=new Date(i.EndTime.toString());i.StartTime=n.toString(),i.EndTime=r.toString(),i.Subject=i.Subject.concat(" : ",i.Description.split("=")[0])}}catch(s){t.e(s)}finally{t.f()}var a,o=_createForOfIteratorHelper(this.getPersonalAvailabilitySchedule().allAvailabilitySchedule);try{for(o.s();!(a=o.n()).done;)a.value.Type="availability"}catch(s){o.e(s)}finally{o.f()}}},{key:"fetchTutorPendingBookings",value:function(){var e=this;"Expert"==this.loginService.getLoginType()&&this.httpService.getTutorBookings(this.getTutorDetials().bookingId).subscribe((function(t){e.setBookings(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Vb)(Ze(gb),Ze(lk))},Vb.\u0275prov=pe({token:Vb,factory:Vb.\u0275fac,providedIn:"root"}),Vb);function uk(e){return null!=e&&""+e!="false"}function hk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function dk(e){return Array.isArray(e)?e:[e]}function pk(e){return null==e?"":"string"==typeof e?e:e+"px"}function fk(e){return e instanceof $s?e.nativeElement:e}function vk(e,t,i,n){return r(i)&&(n=i,i=void 0),n?vk(e,t,i).pipe(j((function(e){return c(e)?n.apply(void 0,_toConsumableArray2(e)):n(e)}))):new _((function(n){!function e(t,i,n,r,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(i,n,a),o=function(){return s.removeEventListener(i,n,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var l=t;t.on(i,n),o=function(){return l.off(i,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(i,n),o=function(){return c.removeListener(i,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,h=t.length;u<h;u++)e(t[u],i,n,r,a)}r.add(o)}(e,t,(function(e){n.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),n,i)}))}var mk=function(t){_inherits(n,t);var i=_createSuper(n);function n(e,t){var r;return _classCallCheck2(this,n),(r=i.call(this,e,t)).scheduler=e,r.work=t,r.pending=!1,r}return _createClass(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),i)}},{key:"recycleAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==i&&this.delay===i&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,i){var n=!1,r=void 0;try{this.work(t)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,i=t.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this)}return _createClass(i,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),i}(p)),gk=function(){var e=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck2(this,e),this.SchedulerAction=t,this.now=i}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(i,t)}}]),e}();return e.now=function(){return Date.now()},e}(),yk=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gk.now;return _classCallCheck2(this,i),(n=t.call(this,e,(function(){return i.delegate&&i.delegate!==_assertThisInitialized(n)?i.delegate.now():r()}))).actions=[],n.active=!1,n.scheduled=void 0,n}return _createClass(i,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):_get(_getPrototypeOf(i.prototype),"schedule",this).call(this,e,t,n)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}}]),i}(gk),bk=1,kk=Promise.resolve(),Ck={};function wk(e){return e in Ck&&(delete Ck[e],!0)}var _k=function(e){var t=bk++;return Ck[t]=!0,kk.then((function(){return wk(t)&&e()})),t},Sk=function(e){wk(e)},Ek=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).scheduler=e,r.work=n,r}return _createClass(i,[{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==n&&n>0?_get(_getPrototypeOf(i.prototype),"requestAsyncId",this).call(this,e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=_k(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&n>0||null===n&&this.delay>0)return _get(_getPrototypeOf(i.prototype),"recycleAsyncId",this).call(this,e,t,n);0===e.actions.length&&(Sk(t),e.scheduled=void 0)}}]),i}(mk),Tk=new(function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,i=this.actions,n=-1,r=i.length;e=e||i.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<r&&(e=i.shift()));if(this.active=!1,t){for(;++n<r&&(e=i.shift());)e.unsubscribe();throw t}}}]),i}(yk))(Ek),Ak=function(){function e(t,i){_classCallCheck2(this,e),this.compare=t,this.keySelector=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ok(e,this.compare,this.keySelector))}}]),e}(),Ok=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e)).keySelector=r,a.hasKey=!1,"function"==typeof n&&(a.compare=n),a}return _createClass(i,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var i=this.keySelector;t=i?i(e):e}catch(r){return this.destination.error(r)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}]),i}(m),xk=new yk(mk),Ik=function(){function e(t){_classCallCheck2(this,e),this.durationSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Dk(e,this.durationSelector))}}]),e}(),Dk=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).durationSelector=n,r.hasValue=!1,r}return _createClass(i,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(n){return this.destination.error(n)}var i=B(this,t);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,i=this.throttled;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(e,t,i,n){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),i}(V);function Rk(e){return!c(e)&&e-parseFloat(e)+1>=0}function Pk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=-1;return Rk(t)?n=Number(t)<1?1:Number(t):D(t)&&(i=t),D(i)||(i=xk),new _((function(t){var r=Rk(e)?e:+e-i.now();return i.schedule(Mk,r,{index:0,period:n,subscriber:t})}))}function Mk(e){var t=e.index,i=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===i)return n.complete();e.index=t+1,this.schedule(e,i)}}function Lk(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xk;return t=function(){return Pk(e,i)},function(e){return e.lift(new Ik(t))}}function Nk(e){return function(t){return t.lift(new Vk(e))}}var Fk,Bk,Vk=function(){function e(t){_classCallCheck2(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var i=new jk(e),n=B(i,this.notifier);return n&&!i.seenValue?(i.add(n),t.subscribe(i)):i}}]),e}(),jk=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).seenValue=!1,n}return _createClass(i,[{key:"notifyNext",value:function(e,t,i,n,r){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),i}(V),Hk=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Uk(e))}}]),e}(),Uk=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).hasPrev=!1,n}return _createClass(i,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),i}(m),qk=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).scheduler=e,r.work=n,r}return _createClass(i,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?_get(_getPrototypeOf(i.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?_get(_getPrototypeOf(i.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==n&&n>0||null===n&&this.delay>0?_get(_getPrototypeOf(i.prototype),"requestAsyncId",this).call(this,e,t,n):e.flush(this)}}]),i}(mk),Wk=new(function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(yk))(qk),zk=((Bk=function(){function e(t,i,n){_classCallCheck2(this,e),this.kind=t,this.value=i,this.error=n,this.hasValue="N"===t}return _createClass(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return i&&i()}}},{key:"accept",value:function(e,t,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,i)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Gd(this.value);case"E":return e=this.error,new _((function(t){return t.error(e)}));case"C":return ep()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}()).completeNotification=new Bk("C"),Bk.undefinedValueNotification=new Bk("N",void 0),Bk);function Gk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(i){return i.lift(new Yk(e,t))}}var Yk=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck2(this,e),this.scheduler=t,this.delay=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Kk(e,this.scheduler,this.delay))}}]),e}(),Kk=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck2(this,i),(r=t.call(this,e)).scheduler=n,r.delay=a,r}return _createClass(i,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(i.dispatch,this.delay,new Xk(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(zk.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(zk.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(zk.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,i=e.destination;t.observe(i),this.unsubscribe()}}]),i}(m),Xk=function e(t,i){_classCallCheck2(this,e),this.notification=t,this.destination=i},Jk=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return _classCallCheck2(this,i),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=n<1?1:n,e._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return _createClass(i,[{key:"nextInfiniteTimeWindow",value:function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),_get(_getPrototypeOf(i.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this._events.push(new Qk(this._getNow(),e)),this._trimBufferThenGetEvents(),_get(_getPrototypeOf(i.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,i=this._infiniteTimeWindow,n=i?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,a=n.length;if(this.closed)throw new T;if(this.isStopped||this.hasError?t=p.EMPTY:(this.observers.push(e),t=new A(this,e)),r&&e.add(e=new Kk(e,r)),i)for(var o=0;o<a&&!e.closed;o++)e.next(n[o]);else for(var s=0;s<a&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Wk).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,i=this._windowTime,n=this._events,r=n.length,a=0;a<r&&!(e-n[a].time<i);)a++;return r>t&&(a=Math.max(a,r-t)),a>0&&n.splice(0,a),n}}]),i}(x),Qk=function e(t,i){_classCallCheck2(this,e),this.time=t,this.value=i};try{Fk="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(H$){Fk=!1}var Zk,$k,eC,tC,iC=((tC=function e(t){_classCallCheck2(this,e),this._platformId=t,this.isBrowser=this._platformId?nd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Fk)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(e){return new(e||tC)(Ze(Oc,8))},tC.\u0275prov=pe({factory:function(){return new tC(Ze(Oc,8))},token:tC,providedIn:"root"}),tC),nC=((eC=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:eC}),eC.\u0275inj=ve({factory:function(e){return new(e||eC)}}),eC);function rC(e){return function(){if(null==Zk&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Zk=!0}}))}finally{Zk=Zk||!1}return Zk}()?e:!!e.capture}function aC(e){if(function(){if(null==$k){var e="undefined"!=typeof document?document.head:null;$k=!(!e||!e.createShadowRoot&&!e.attachShadow)}return $k}()){var t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}var oC,sC,lC,cC,uC,hC,dC,pC=new qe("cdk-dir-doc",{providedIn:"root",factory:function(){return $e(Su)}}),fC=((sC=function(){function e(t){if(_classCallCheck2(this,e),this.value="ltr",this.change=new ec,t){var i=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||i;this.value="ltr"===n||"rtl"===n?n:"ltr"}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}()).\u0275fac=function(e){return new(e||sC)(Ze(pC,8))},sC.\u0275prov=pe({factory:function(){return new sC(Ze(pC,8))},token:sC,providedIn:"root"}),sC),vC=((oC=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:oC}),oC.\u0275inj=ve({factory:function(e){return new(e||oC)}}),oC),mC=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck2(this,e),this._multiple=i,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new x,n&&n.length&&(i?n.forEach((function(e){return t._markSelected(e)})):this._markSelected(n[0]),this._selectedToEmit.length=0)}return _createClass(e,[{key:"select",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];this._verifyValueAssignment(i),i.forEach((function(t){return e._markSelected(t)})),this._emitChangeEvent()}},{key:"deselect",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];this._verifyValueAssignment(i),i.forEach((function(t){return e._unmarkSelected(t)})),this._emitChangeEvent()}},{key:"toggle",value:function(e){this.isSelected(e)?this.deselect(e):this.select(e)}},{key:"clear",value:function(){this._unmarkAll(),this._emitChangeEvent()}},{key:"isSelected",value:function(e){return this._selection.has(e)}},{key:"isEmpty",value:function(){return 0===this._selection.size}},{key:"hasValue",value:function(){return!this.isEmpty()}},{key:"sort",value:function(e){this._multiple&&this.selected&&this._selected.sort(e)}},{key:"isMultipleSelection",value:function(){return this._multiple}},{key:"_emitChangeEvent",value:function(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}},{key:"_markSelected",value:function(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}},{key:"_unmarkSelected",value:function(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}},{key:"_unmarkAll",value:function(){var e=this;this.isEmpty()||this._selection.forEach((function(t){return e._unmarkSelected(t)}))}},{key:"_verifyValueAssignment",value:function(e){if(e.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}},{key:"selected",get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}}]),e}(),gC=((dC=function(){function e(){_classCallCheck2(this,e),this._listeners=[]}return _createClass(e,[{key:"notify",value:function(e,t){var i,n=_createForOfIteratorHelper(this._listeners);try{for(n.s();!(i=n.n()).done;)(0,i.value)(e,t)}catch(r){n.e(r)}finally{n.f()}}},{key:"listen",value:function(e){var t=this;return this._listeners.push(e),function(){t._listeners=t._listeners.filter((function(t){return e!==t}))}}},{key:"ngOnDestroy",value:function(){this._listeners=[]}}]),e}()).\u0275fac=function(e){return new(e||dC)},dC.\u0275prov=pe({factory:function(){return new dC},token:dC,providedIn:"root"}),dC),yC=((hC=function(){function e(t,i,n){_classCallCheck2(this,e),this._ngZone=t,this._platform=i,this._scrolled=new x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}return _createClass(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe((function(){return t._scrolled.next(e)})))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new _((function(i){e._globalSubscription||e._addGlobalListener();var n=t>0?e._scrolled.pipe(Lk(t)).subscribe(i):e._scrolled.subscribe(i);return e._scrolledCount++,function(){n.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}})):Gd()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(t,i){return e.deregister(i)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(np((function(e){return!e||i.indexOf(e)>-1})))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,i=[];return this.scrollContainers.forEach((function(n,r){t._scrollableContainsElement(r,e)&&i.push(r)})),i}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_scrollableContainsElement",value:function(e,t){var i=t.nativeElement,n=e.getElementRef().nativeElement;do{if(i==n)return!0}while(i=i.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return vk(e._getWindow().document,"scroll").subscribe((function(){return e._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}()).\u0275fac=function(e){return new(e||hC)(Ze(Wc),Ze(iC),Ze(Su,8))},hC.\u0275prov=pe({factory:function(){return new hC(Ze(Wc),Ze(iC),Ze(Su,8))},token:hC,providedIn:"root"}),hC),bC=((uC=function(){function e(t,i,n){var r=this;_classCallCheck2(this,e),this._platform=t,this._document=n,i.runOutsideAngular((function(){var e=r._getWindow();r._change=t.isBrowser?J(vk(e,"resize"),vk(e,"orientationchange")):Gd(),r._invalidateCache=r.change().subscribe((function(){return r._updateViewportSize()}))}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),i=t.width,n=t.height;return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+i,height:n,width:i}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=this._getDocument(),t=this._getWindow(),i=e.documentElement,n=i.getBoundingClientRect();return{top:-n.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,left:-n.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(Lk(e)):this._change}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_updateViewportSize",value:function(){var e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}]),e}()).\u0275fac=function(e){return new(e||uC)(Ze(iC),Ze(Wc),Ze(Su,8))},uC.\u0275prov=pe({factory:function(){return new uC(Ze(iC),Ze(Wc),Ze(Su,8))},token:uC,providedIn:"root"}),uC),kC=((cC=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:cC}),cC.\u0275inj=ve({factory:function(e){return new(e||cC)}}),cC),CC=((lC=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:lC}),lC.\u0275inj=ve({factory:function(e){return new(e||lC)},imports:[[vC,nC,kC],vC,kC]}),lC);function wC(){throw Error("Host already has a portal attached")}var _C,SC,EC=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"attach",value:function(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&wC(),this._attachedHost=e,e.attach(this)}},{key:"detach",value:function(){var e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}},{key:"isAttached",get:function(){return null!=this._attachedHost}}]),e}(),TC=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this)).component=e,o.viewContainerRef=n,o.injector=r,o.componentFactoryResolver=a,o}return i}(EC),AC=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this)).templateRef=e,a.viewContainerRef=n,a.context=r,a}return _createClass(i,[{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=t,_get(_getPrototypeOf(i.prototype),"attach",this).call(this,e)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(i.prototype),"detach",this).call(this)}},{key:"origin",get:function(){return this.templateRef.elementRef}}]),i}(EC),OC=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).element=e instanceof $s?e.nativeElement:e,n}return i}(EC),xC=function(){function e(){_classCallCheck2(this,e),this._isDisposed=!1,this.attachDomPortal=null}return _createClass(e,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&wC(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof TC?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof AC?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof OC?(this._attachedPortal=e,this.attachDomPortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),e}(),IC=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o){var s,l;return _classCallCheck2(this,i),(l=t.call(this)).outletElement=e,l._componentFactoryResolver=n,l._appRef=r,l._defaultInjector=a,l.attachDomPortal=function(e){if(!l._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");var n=l._document.createComment("dom-portal");t.parentNode.insertBefore(n,t),l.outletElement.appendChild(t),_get((s=_assertThisInitialized(l),_getPrototypeOf(i.prototype)),"setDisposeFn",s).call(s,(function(){n.parentNode&&n.parentNode.replaceChild(t,n)}))},l._document=o,l}return _createClass(i,[{key:"attachComponentPortal",value:function(e){var t,i=this,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn((function(){return t.destroy()}))):(t=n.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn((function(){i._appRef.detachView(t.hostView),t.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(t)),t}},{key:"attachTemplatePortal",value:function(e){var t=this,i=e.viewContainerRef,n=i.createEmbeddedView(e.templateRef,e.context);return n.detectChanges(),n.rootNodes.forEach((function(e){return t.outletElement.appendChild(e)})),this.setDisposeFn((function(){var e=i.indexOf(n);-1!==e&&i.remove(e)})),n}},{key:"dispose",value:function(){_get(_getPrototypeOf(i.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),i}(xC),DC=((SC=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a,o;return _classCallCheck2(this,i),(o=t.call(this))._componentFactoryResolver=e,o._viewContainerRef=n,o._isInitialized=!1,o.attached=new ec,o.attachDomPortal=function(e){if(!o._document)throw Error("Cannot attach DOM portal without _document constructor parameter");var t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");var n=o._document.createComment("dom-portal");e.setAttachedHost(_assertThisInitialized(o)),t.parentNode.insertBefore(n,t),o._getRootNode().appendChild(t),_get((a=_assertThisInitialized(o),_getPrototypeOf(i.prototype)),"setDisposeFn",a).call(a,(function(){n.parentNode&&n.parentNode.replaceChild(t,n)}))},o._document=r,o}return _createClass(i,[{key:"ngOnInit",value:function(){this._isInitialized=!0}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(i.prototype),"dispose",this).call(this),this._attachedPortal=null,this._attachedRef=null}},{key:"attachComponentPortal",value:function(e){e.setAttachedHost(this);var t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r=t.createComponent(n,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),_get(_getPrototypeOf(i.prototype),"setDisposeFn",this).call(this,(function(){return r.destroy()})),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}},{key:"attachTemplatePortal",value:function(e){var t=this;e.setAttachedHost(this);var n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return _get(_getPrototypeOf(i.prototype),"setDisposeFn",this).call(this,(function(){return t._viewContainerRef.clear()})),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}},{key:"_getRootNode",value:function(){var e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}},{key:"portal",get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&_get(_getPrototypeOf(i.prototype),"detach",this).call(this),e&&_get(_getPrototypeOf(i.prototype),"attach",this).call(this,e),this._attachedPortal=e)}},{key:"attachedRef",get:function(){return this._attachedRef}}]),i}(xC)).\u0275fac=function(e){return new(e||SC)(Lo(Zs),Lo(El),Lo(Su))},SC.\u0275dir=_t({type:SC,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ps]}),SC),RC=((_C=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:_C}),_C.\u0275inj=ve({factory:function(e){return new(e||_C)}}),_C),PC=function(){function e(t,i){_classCallCheck2(this,e),this._parentInjector=t,this._customTokens=i}return _createClass(e,[{key:"get",value:function(e,t){var i=this._customTokens.get(e);return void 0!==i?i:this._parentInjector.get(e,t)}}]),e}();function MC(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.length?i.some((function(t){return e[t]})):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var LC=function(){function e(t,i){_classCallCheck2(this,e),this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}return _createClass(e,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=pk(-this._previousScrollPosition.left),e.style.top=pk(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var e=this._document.documentElement,t=e.style,i=this._document.body.style,n=t.scrollBehavior||"",r=i.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=i.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=n,i.scrollBehavior=r}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}]),e}();function NC(){return Error("Scroll strategy has already been attached.")}var FC=function(){function e(t,i,n,r){var a=this;_classCallCheck2(this,e),this._scrollDispatcher=t,this._ngZone=i,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=function(){a.disable(),a._overlayRef.hasAttached()&&a._ngZone.run((function(){return a._overlayRef.detach()}))}}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw NC();this._overlayRef=e}},{key:"enable",value:function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe((function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()}))):this._scrollSubscription=t.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),BC=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),e}();function VC(e,t){return t.some((function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right}))}function jC(e,t){return t.some((function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right}))}var HC,UC=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=n,this._config=r,this._scrollSubscription=null}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw NC();this._overlayRef=e}},{key:"enable",value:function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),i=e._viewportRuler.getViewportSize(),n=i.width,r=i.height;VC(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(e.disable(),e._ngZone.run((function(){return e._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),qC=((HC=function e(t,i,n,r){var a=this;_classCallCheck2(this,e),this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=n,this.noop=function(){return new BC},this.close=function(e){return new FC(a._scrollDispatcher,a._ngZone,a._viewportRuler,e)},this.block=function(){return new LC(a._viewportRuler,a._document)},this.reposition=function(e){return new UC(a._scrollDispatcher,a._viewportRuler,a._ngZone,e)},this._document=r}).\u0275fac=function(e){return new(e||HC)(Ze(yC),Ze(bC),Ze(Wc),Ze(Su))},HC.\u0275prov=pe({factory:function(){return new HC(Ze(yC),Ze(bC),Ze(Wc),Ze(Su))},token:HC,providedIn:"root"}),HC),WC=function e(t){if(_classCallCheck2(this,e),this.scrollStrategy=new BC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t)for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];void 0!==t[r]&&(this[r]=t[r])}},zC=function e(t,i,n,r,a){_classCallCheck2(this,e),this.offsetX=n,this.offsetY=r,this.panelClass=a,this.originX=t.originX,this.originY=t.originY,this.overlayX=i.overlayX,this.overlayY=i.overlayY},GC=function e(t,i){_classCallCheck2(this,e),this.connectionPair=t,this.scrollableViewProperties=i};function YC(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". Expected "top", "bottom" or "center".'))}function KC(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". Expected "start", "end" or "center".'))}var XC,JC,QC=((XC=function(){function e(t){var i=this;_classCallCheck2(this,e),this._attachedOverlays=[],this._keydownListener=function(e){for(var t=i._attachedOverlays,n=t.length-1;n>-1;n--)if(t[n]._keydownEvents.observers.length>0){t[n]._keydownEvents.next(e);break}},this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}},{key:"remove",value:function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),e}()).\u0275fac=function(e){return new(e||XC)(Ze(Su))},XC.\u0275prov=pe({factory:function(){return new XC(Ze(Su))},token:XC,providedIn:"root"}),XC),ZC=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine),$C=((JC=function(){function e(t,i){_classCallCheck2(this,e),this._platform=i,this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){var e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var e=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(e||ZC)for(var t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]'),i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i]);var n=this._document.createElement("div");n.classList.add("cdk-overlay-container"),ZC?n.setAttribute("platform","test"):e||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}]),e}()).\u0275fac=function(e){return new(e||JC)(Ze(Su),Ze(iC))},JC.\u0275prov=pe({factory:function(){return new JC(Ze(Su),Ze(iC))},token:JC,providedIn:"root"}),JC),ew=function(){function e(t,i,n,r,a,o,s,l){var c=this;_classCallCheck2(this,e),this._portalOutlet=t,this._host=i,this._pane=n,this._config=r,this._ngZone=a,this._keyboardDispatcher=o,this._document=s,this._location=l,this._backdropElement=null,this._backdropClick=new x,this._attachments=new x,this._detachments=new x,this._locationChanges=p.EMPTY,this._backdropClickHandler=function(e){return c._backdropClick.next(e)},this._keydownEvents=new x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}return _createClass(e,[{key:"attach",value:function(e){var t=this,i=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Cp(1)).subscribe((function(){t.hasAttached()&&t.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return t.dispose()}))),i}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}}},{key:"dispose",value:function(){var e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEvents.asObservable()}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}},{key:"setDirection",value:function(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}},{key:"addPanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!0)}},{key:"removePanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!1)}},{key:"getDirection",value:function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}},{key:"updateScrollStrategy",value:function(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var e=this._pane.style;e.width=pk(this._config.width),e.height=pk(this._config.height),e.minWidth=pk(this._config.minWidth),e.minHeight=pk(this._config.minHeight),e.maxWidth=pk(this._config.maxWidth),e.maxHeight=pk(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(e){this._pane.style.pointerEvents=e?"auto":"none"}},{key:"_attachBackdrop",value:function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var e,t=this,i=this._backdropElement;if(i){var n=function n(){i&&(i.removeEventListener("click",t._backdropClickHandler),i.removeEventListener("transitionend",n),i.parentNode&&i.parentNode.removeChild(i)),t._backdropElement==i&&(t._backdropElement=null),t._config.backdropClass&&t._toggleClasses(i,t._config.backdropClass,!1),clearTimeout(e)};i.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){i.addEventListener("transitionend",n)})),i.style.pointerEvents="none",e=this._ngZone.runOutsideAngular((function(){return setTimeout(n,500)}))}}},{key:"_toggleClasses",value:function(e,t,i){var n=e.classList;dk(t).forEach((function(e){e&&(i?n.add(e):n.remove(e))}))}},{key:"_detachContentWhenStable",value:function(){var e=this;this._ngZone.runOutsideAngular((function(){var t=e._ngZone.onStable.asObservable().pipe(Nk(J(e._attachments,e._detachments))).subscribe((function(){e._pane&&e._host&&0!==e._pane.children.length||(e._pane&&e._config.panelClass&&e._toggleClasses(e._pane,e._config.panelClass,!1),e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),t.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}},{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}}]),e}(),tw=/([A-Za-z%]+)$/,iw=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this._viewportRuler=i,this._document=n,this._platform=r,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new x,this._resizeSubscription=p.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}return _createClass(e,[{key:"attach",value:function(e){var t=this;if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){t._isInitialRender=!0,t.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var e,t,i=this._originRect,n=this._overlayRect,r=this._viewportRect,a=[],o=_createForOfIteratorHelper(this._preferredPositions);try{for(o.s();!(t=o.n()).done;){var s=t.value,l=this._getOriginPoint(i,s),c=this._getOverlayPoint(l,n,s),u=this._getOverlayFit(c,n,r,s);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,l);this._canFitWithFlexibleDimensions(u,c,r)?a.push({position:s,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,s)}):(!e||e.overlayFit.visibleArea<u.visibleArea)&&(e={overlayFit:u,overlayPoint:c,originPoint:l,position:s,overlayRect:n})}}catch(g){o.e(g)}finally{o.f()}if(a.length){var h,d=null,p=-1,f=_createForOfIteratorHelper(a);try{for(f.s();!(h=f.n()).done;){var v=h.value,m=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);m>p&&(p=m,d=v)}}catch(g){f.e(g)}finally{f.f()}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&nw(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}},{key:"withScrollableContainers",value:function(e){return this._scrollables=e,this}},{key:"withPositions",value:function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(e){return this._viewportMargin=e,this}},{key:"withFlexibleDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=e,this}},{key:"withGrowAfterOpen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=e,this}},{key:"withPush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=e,this}},{key:"withLockedPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=e,this}},{key:"setOrigin",value:function(e){return this._origin=e,this}},{key:"withDefaultOffsetX",value:function(e){return this._offsetX=e,this}},{key:"withDefaultOffsetY",value:function(e){return this._offsetY=e,this}},{key:"withTransformOriginOn",value:function(e){return this._transformOriginSelector=e,this}},{key:"_getOriginPoint",value:function(e,t){var i;if("center"==t.originX)i=e.left+e.width/2;else{var n=this._isRtl()?e.right:e.left,r=this._isRtl()?e.left:e.right;i="start"==t.originX?n:r}return{x:i,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}},{key:"_getOverlayPoint",value:function(e,t,i){var n,r;return n="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+n,y:e.y+r}}},{key:"_getOverlayFit",value:function(e,t,i,n){var r=e.x,a=e.y,o=this._getOffset(n,"x"),s=this._getOffset(n,"y");o&&(r+=o),s&&(a+=s);var l=0-a,c=a+t.height-i.height,u=this._subtractOverflows(t.width,0-r,r+t.width-i.width),h=this._subtractOverflows(t.height,l,c),d=u*h;return{visibleArea:d,isCompletelyWithinViewport:t.width*t.height===d,fitsInViewportVertically:h===t.height,fitsInViewportHorizontally:u==t.width}}},{key:"_canFitWithFlexibleDimensions",value:function(e,t,i){if(this._hasFlexibleDimensions){var n=i.bottom-t.y,r=i.right-t.x,a=rw(this._overlayRef.getConfig().minHeight),o=rw(this._overlayRef.getConfig().minWidth),s=e.fitsInViewportHorizontally||null!=o&&o<=r;return(e.fitsInViewportVertically||null!=a&&a<=n)&&s}return!1}},{key:"_pushOverlayOnScreen",value:function(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};var n,r,a=this._viewportRect,o=Math.max(e.x+t.width-a.right,0),s=Math.max(e.y+t.height-a.bottom,0),l=Math.max(a.top-i.top-e.y,0),c=Math.max(a.left-i.left-e.x,0);return n=t.width<=a.width?c||-o:e.x<this._viewportMargin?a.left-i.left-e.x:0,r=t.height<=a.height?l||-s:e.y<this._viewportMargin?a.top-i.top-e.y:0,this._previousPushAmount={x:n,y:r},{x:e.x+n,y:e.y+r}}},{key:"_applyPosition",value:function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){var i=this._getScrollVisibility(),n=new GC(e,i);this._positionChanges.next(n)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(e){if(this._transformOriginSelector){var t,i=this._boundingBox.querySelectorAll(this._transformOriginSelector),n=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var r=0;r<i.length;r++)i[r].style.transformOrigin="".concat(t," ").concat(n)}}},{key:"_calculateBoundingBoxRect",value:function(e,t){var i,n,r,a,o,s,l=this._viewportRect,c=this._isRtl();if("top"===t.overlayY)n=e.y,i=l.height-n+this._viewportMargin;else if("bottom"===t.overlayY)r=l.height-e.y+2*this._viewportMargin,i=l.height-r+this._viewportMargin;else{var u=Math.min(l.bottom-e.y+l.top,e.y),h=this._lastBoundingBoxSize.height;i=2*u,n=e.y-u,i>h&&!this._isInitialRender&&!this._growAfterOpen&&(n=e.y-h/2)}if("end"===t.overlayX&&!c||"start"===t.overlayX&&c)s=l.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!c||"end"===t.overlayX&&c)o=e.x,a=l.right-e.x;else{var d=Math.min(l.right-e.x+l.left,e.x),p=this._lastBoundingBoxSize.width;a=2*d,o=e.x-d,a>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.x-p/2)}return{top:n,left:o,bottom:r,right:s,width:a,height:i}}},{key:"_setBoundingBoxStyles",value:function(e,t){var i=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));var n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{var r=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;n.height=pk(i.height),n.top=pk(i.top),n.bottom=pk(i.bottom),n.width=pk(i.width),n.left=pk(i.left),n.right=pk(i.right),n.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",n.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(n.maxHeight=pk(r)),a&&(n.maxWidth=pk(a))}this._lastBoundingBoxSize=i,nw(this._boundingBox.style,n)}},{key:"_resetBoundingBoxStyles",value:function(){nw(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){nw(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(e,t){var i={},n=this._hasExactPosition(),r=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(n){var o=this._viewportRuler.getViewportScrollPosition();nw(i,this._getExactOverlayY(t,e,o)),nw(i,this._getExactOverlayX(t,e,o))}else i.position="static";var s="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(s+="translateX(".concat(l,"px) ")),c&&(s+="translateY(".concat(c,"px)")),i.transform=s.trim(),a.maxHeight&&(n?i.maxHeight=pk(a.maxHeight):r&&(i.maxHeight="")),a.maxWidth&&(n?i.maxWidth=pk(a.maxWidth):r&&(i.maxWidth="")),nw(this._pane.style,i)}},{key:"_getExactOverlayY",value:function(e,t,i){var n={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i));var a=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=a,"bottom"===e.overlayY?n.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":n.top=pk(r.y),n}},{key:"_getExactOverlayX",value:function(e,t,i){var n={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,i)),"right"===(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?n.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":n.left=pk(r.x),n}},{key:"_getScrollVisibility",value:function(){var e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map((function(e){return e.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:jC(e,i),isOriginOutsideView:VC(e,i),isOverlayClipped:jC(t,i),isOverlayOutsideView:VC(t,i)}}},{key:"_subtractOverflows",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.reduce((function(e,t){return e-Math.max(t,0)}),e)}},{key:"_getNarrowedViewportRect",value:function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(e){KC("originX",e.originX),YC("originY",e.originY),KC("overlayX",e.overlayX),YC("overlayY",e.overlayY)}))}},{key:"_addPanelClasses",value:function(e){var t=this;this._pane&&dk(e).forEach((function(e){""!==e&&-1===t._appliedPanelClasses.indexOf(e)&&(t._appliedPanelClasses.push(e),t._pane.classList.add(e))}))}},{key:"_clearPanelClasses",value:function(){var e=this;this._pane&&(this._appliedPanelClasses.forEach((function(t){e._pane.classList.remove(t)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var e=this._origin;if(e instanceof $s)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();var t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}},{key:"positions",get:function(){return this._preferredPositions}}]),e}();function nw(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function rw(e){if("number"!=typeof e&&null!=e){var t=_slicedToArray(e.split(tw),2),i=t[0],n=t[1];return n&&"px"!==n?null:parseFloat(i)}return e||null}var aw,ow,sw,lw,cw,uw=function(){function e(t,i,n,r,a,o,s){_classCallCheck2(this,e),this._preferredPositions=[],this._positionStrategy=new iw(n,r,a,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,i)}return _createClass(e,[{key:"attach",value:function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(e){this._positionStrategy.withScrollableContainers(e)}},{key:"withFallbackPosition",value:function(e,t,i,n){var r=new zC(e,t,i,n);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}},{key:"withOffsetX",value:function(e){return this._positionStrategy.withDefaultOffsetX(e),this}},{key:"withOffsetY",value:function(e){return this._positionStrategy.withDefaultOffsetY(e),this}},{key:"withLockedPosition",value:function(e){return this._positionStrategy.withLockedPosition(e),this}},{key:"withPositions",value:function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(e){return this._positionStrategy.setOrigin(e),this}},{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}}]),e}(),hw=function(){function e(){_classCallCheck2(this,e),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(e,[{key:"attach",value:function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}},{key:"left",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}},{key:"right",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}},{key:"width",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}},{key:"centerHorizontally",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(e),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(e),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),n=i.width,r=i.height,a=i.maxWidth,o=i.maxHeight,s=!("100%"!==n&&"100vw"!==n||a&&"100%"!==a&&"100vw"!==a),l=!("100%"!==r&&"100vh"!==r||o&&"100%"!==o&&"100vh"!==o);e.position=this._cssPosition,e.marginLeft=s?"0":this._leftOffset,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,s?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=l?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove("cdk-global-overlay-wrapper"),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}}]),e}(),dw=((ow=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._viewportRuler=t,this._document=i,this._platform=n,this._overlayContainer=r}return _createClass(e,[{key:"global",value:function(){return new hw}},{key:"connectedTo",value:function(e,t,i){return new uw(t,i,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(e){return new iw(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),e}()).\u0275fac=function(e){return new(e||ow)(Ze(bC),Ze(Su),Ze(iC),Ze($C))},ow.\u0275prov=pe({factory:function(){return new ow(Ze(bC),Ze(Su),Ze(iC),Ze($C))},token:ow,providedIn:"root"}),ow),pw=0,fw=((aw=function(){function e(t,i,n,r,a,o,s,l,c,u){_classCallCheck2(this,e),this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=a,this._injector=o,this._ngZone=s,this._document=l,this._directionality=c,this._location=u}return _createClass(e,[{key:"create",value:function(e){var t=this._createHostElement(),i=this._createPaneElement(t),n=this._createPortalOutlet(i),r=new WC(e);return r.direction=r.direction||this._directionality.value,new ew(n,t,i,r,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-"+pw++,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}},{key:"_createHostElement",value:function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}},{key:"_createPortalOutlet",value:function(e){return this._appRef||(this._appRef=this._injector.get(uu)),new IC(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),e}()).\u0275fac=function(e){return new(e||aw)(Ze(qC),Ze($C),Ze(Zs),Ze(dw),Ze(QC),Ze(fo),Ze(Wc),Ze(Su),Ze(fC),Ze(Wu,8))},aw.\u0275prov=pe({token:aw,factory:aw.\u0275fac}),aw),vw=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],mw=new qe("cdk-connected-overlay-scroll-strategy"),gw=((lw=function e(t){_classCallCheck2(this,e),this.elementRef=t}).\u0275fac=function(e){return new(e||lw)(Lo($s))},lw.\u0275dir=_t({type:lw,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),lw),yw=((sw=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this._overlay=t,this._dir=a,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=p.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new ec,this.positionChange=new ec,this.attach=new ec,this.detach=new ec,this.overlayKeydown=new ec,this._templatePortal=new AC(i,n),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}},{key:"_createOverlay",value:function(){var e=this;this.positions&&this.positions.length||(this.positions=vw),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe((function(t){e.overlayKeydown.next(t),27!==t.keyCode||MC(t)||(t.preventDefault(),e._detachOverlay())}))}},{key:"_buildConfig",value:function(){var e=this._position=this.positionStrategy||this._createPositionStrategy(),t=new WC({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}},{key:"_updatePositionStrategy",value:function(e){var t=this,i=this.positions.map((function(e){return{originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||t.offsetX,offsetY:e.offsetY||t.offsetY,panelClass:e.panelClass||void 0}}));return e.setOrigin(this.origin.elementRef).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}},{key:"_createPositionStrategy",value:function(){var e=this,t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t.positionChanges.subscribe((function(t){return e.positionChange.emit(t)})),t}},{key:"_attachOverlay",value:function(){var e=this;this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe((function(t){e.backdropClick.emit(t)})):this._backdropSubscription.unsubscribe()}},{key:"_detachOverlay",value:function(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}},{key:"offsetX",get:function(){return this._offsetX},set:function(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"offsetY",get:function(){return this._offsetY},set:function(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=uk(e)}},{key:"lockPosition",get:function(){return this._lockPosition},set:function(e){this._lockPosition=uk(e)}},{key:"flexibleDimensions",get:function(){return this._flexibleDimensions},set:function(e){this._flexibleDimensions=uk(e)}},{key:"growAfterOpen",get:function(){return this._growAfterOpen},set:function(e){this._growAfterOpen=uk(e)}},{key:"push",get:function(){return this._push},set:function(e){this._push=uk(e)}},{key:"overlayRef",get:function(){return this._overlayRef}},{key:"dir",get:function(){return this._dir?this._dir.value:"ltr"}}]),e}()).\u0275fac=function(e){return new(e||sw)(Lo(fw),Lo(_l),Lo(El),Lo(mw),Lo(fC,8))},sw.\u0275dir=_t({type:sw,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown"},exportAs:["cdkConnectedOverlay"],features:[Vs]}),sw),bw={provide:mw,deps:[fw],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},kw=((cw=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:cw}),cw.\u0275inj=ve({factory:function(e){return new(e||cw)},providers:[fw,bw],imports:[[vC,RC,CC],CC]}),cw);function Cw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xk;return function(i){return i.lift(new ww(e,t))}}var ww=function(){function e(t,i){_classCallCheck2(this,e),this.dueTime=t,this.scheduler=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new _w(e,this.dueTime,this.scheduler))}}]),e}(),_w=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e)).dueTime=n,a.scheduler=r,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return _createClass(i,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Sw,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),i}(m);function Sw(e){e.debouncedNext()}var Ew,Tw,Aw,Ow,xw,Iw=((Ow=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"create",value:function(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}]),e}()).\u0275fac=function(e){return new(e||Ow)},Ow.\u0275prov=pe({factory:function(){return new Ow},token:Ow,providedIn:"root"}),Ow),Dw=((Aw=function(){function e(t){_classCallCheck2(this,e),this._mutationObserverFactory=t,this._observedElements=new Map}return _createClass(e,[{key:"ngOnDestroy",value:function(){var e=this;this._observedElements.forEach((function(t,i){return e._cleanupObserver(i)}))}},{key:"observe",value:function(e){var t=this,i=fk(e);return new _((function(e){var n=t._observeElement(i).subscribe(e);return function(){n.unsubscribe(),t._unobserveElement(i)}}))}},{key:"_observeElement",value:function(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{var t=new x,i=this._mutationObserverFactory.create((function(e){return t.next(e)}));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:t,count:1})}return this._observedElements.get(e).stream}},{key:"_unobserveElement",value:function(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}},{key:"_cleanupObserver",value:function(e){if(this._observedElements.has(e)){var t=this._observedElements.get(e),i=t.observer,n=t.stream;i&&i.disconnect(),n.complete(),this._observedElements.delete(e)}}}]),e}()).\u0275fac=function(e){return new(e||Aw)(Ze(Iw))},Aw.\u0275prov=pe({factory:function(){return new Aw(Ze(Iw))},token:Aw,providedIn:"root"}),Aw),Rw=((Tw=function(){function e(t,i,n){_classCallCheck2(this,e),this._contentObserver=t,this._elementRef=i,this._ngZone=n,this.event=new ec,this._disabled=!1,this._currentSubscription=null}return _createClass(e,[{key:"ngAfterContentInit",value:function(){this._currentSubscription||this.disabled||this._subscribe()}},{key:"ngOnDestroy",value:function(){this._unsubscribe()}},{key:"_subscribe",value:function(){var e=this;this._unsubscribe();var t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular((function(){e._currentSubscription=(e.debounce?t.pipe(Cw(e.debounce)):t).subscribe(e.event)}))}},{key:"_unsubscribe",value:function(){this._currentSubscription&&this._currentSubscription.unsubscribe()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=uk(e),this._disabled?this._unsubscribe():this._subscribe()}},{key:"debounce",get:function(){return this._debounce},set:function(e){this._debounce=hk(e),this._subscribe()}}]),e}()).\u0275fac=function(e){return new(e||Tw)(Lo(Dw),Lo($s),Lo(Wc))},Tw.\u0275dir=_t({type:Tw,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Tw),Pw=((Ew=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Ew}),Ew.\u0275inj=ve({factory:function(e){return new(e||Ew)},providers:[Iw]}),Ew),Mw=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"setActiveItem",value:function(e){this.activeItem&&this.activeItem.setInactiveStyles(),_get(_getPrototypeOf(i.prototype),"setActiveItem",this).call(this,e),this.activeItem&&this.activeItem.setActiveStyles()}}]),i}(function(){function e(t){var i=this;_classCallCheck2(this,e),this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new x,this._typeaheadSubscription=p.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=function(e){return e.disabled},this._pressedLetters=[],this.tabOut=new x,this.change=new x,t instanceof ic&&t.changes.subscribe((function(e){if(i._activeItem){var t=e.toArray().indexOf(i._activeItem);t>-1&&t!==i._activeItemIndex&&(i._activeItemIndex=t)}}))}return _createClass(e,[{key:"skipPredicate",value:function(e){return this._skipPredicateFn=e,this}},{key:"withWrap",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=e,this}},{key:"withVerticalOrientation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=e,this}},{key:"withHorizontalOrientation",value:function(e){return this._horizontal=e,this}},{key:"withAllowedModifierKeys",value:function(e){return this._allowedModifierKeys=e,this}},{key:"withTypeAhead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;if(this._items.length&&this._items.some((function(e){return"function"!=typeof e.getLabel})))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Bp((function(t){return e._pressedLetters.push(t)})),Cw(t),np((function(){return e._pressedLetters.length>0})),j((function(){return e._pressedLetters.join("")}))).subscribe((function(t){for(var i=e._getItemsArray(),n=1;n<i.length+1;n++){var r=(e._activeItemIndex+n)%i.length,a=i[r];if(!e._skipPredicateFn(a)&&0===a.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(r);break}}e._pressedLetters=[]})),this}},{key:"setActiveItem",value:function(e){var t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(e){var t=this,i=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every((function(i){return!e[i]||t._allowedModifierKeys.indexOf(i)>-1}));switch(i){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((n||MC(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i))))}this._pressedLetters=[],e.preventDefault()}},{key:"isTyping",value:function(){return this._pressedLetters.length>0}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(e){var t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),n=t[i];this._activeItem=null==n?null:n,this._activeItemIndex=i}},{key:"_setActiveItemByDelta",value:function(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}},{key:"_setActiveInWrapMode",value:function(e){for(var t=this._getItemsArray(),i=1;i<=t.length;i++){var n=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[n]))return void this.setActiveItem(n)}}},{key:"_setActiveInDefaultMode",value:function(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}},{key:"_setActiveItemByIndex",value:function(e,t){var i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}},{key:"_getItemsArray",value:function(){return this._items instanceof ic?this._items.toArray():this._items}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}}]),e}()),Lw=((xw=function(){function e(t){_classCallCheck2(this,e),this._platform=t}return _createClass(e,[{key:"isDisabled",value:function(e){return e.hasAttribute("disabled")}},{key:"isVisible",value:function(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}},{key:"isTabbable",value:function(e){if(!this._platform.isBrowser)return!1;var t,i=function(e){try{return e.frameElement}catch(H$){return null}}((t=e).ownerDocument&&t.ownerDocument.defaultView||window);if(i){var n=i&&i.nodeName.toLowerCase();if(-1===Fw(i))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===n)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(i))return!1}var r=e.nodeName.toLowerCase(),a=Fw(e);if(e.hasAttribute("contenteditable"))return-1!==a;if("iframe"===r)return!1;if("audio"===r){if(!e.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!e.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){var t=e.nodeName.toLowerCase(),i="input"===t&&e.type;return"text"===i||"password"===i||"select"===t||"textarea"===t}(e))&&e.tabIndex>=0}},{key:"isFocusable",value:function(e){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||Nw(e))}(e)&&!this.isDisabled(e)&&this.isVisible(e)}}]),e}()).\u0275fac=function(e){return new(e||xw)(Ze(iC))},xw.\u0275prov=pe({factory:function(){return new xw(Ze(iC))},token:xw,providedIn:"root"}),xw);function Nw(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;var t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function Fw(e){if(!Nw(e))return null;var t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}var Bw,Vw=function(){function e(t,i,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck2(this,e),this._element=t,this._checker=i,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=function(){return a.focusLastTabbableElement()},this.endAnchorListener=function(){return a.focusFirstTabbableElement()},this._enabled=!0,o||this.attachAnchors()}return _createClass(e,[{key:"destroy",value:function(){var e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null}},{key:"attachAnchors",value:function(){var e=this;return!!this._hasAttached||(this._ngZone.runOutsideAngular((function(){e._startAnchor||(e._startAnchor=e._createAnchor(),e._startAnchor.addEventListener("focus",e.startAnchorListener)),e._endAnchor||(e._endAnchor=e._createAnchor(),e._endAnchor.addEventListener("focus",e.endAnchorListener))})),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}},{key:"focusInitialElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusInitialElement())}))}))}},{key:"focusFirstTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusFirstTabbableElement())}))}))}},{key:"focusLastTabbableElementWhenReady",value:function(){var e=this;return new Promise((function(t){e._executeOnStable((function(){return t(e.focusLastTabbableElement())}))}))}},{key:"_getRegionBoundary",value:function(e){for(var t=this._element.querySelectorAll("[cdk-focus-region-".concat(e,"], [cdkFocusRegion").concat(e,"], [cdk-focus-").concat(e,"]")),i=0;i<t.length;i++)t[i].hasAttribute("cdk-focus-"+e)?console.warn("Found use of deprecated attribute 'cdk-focus-".concat(e,"', use 'cdkFocusRegion").concat(e,"' instead. The deprecated attribute will be removed in 8.0.0."),t[i]):t[i].hasAttribute("cdk-focus-region-"+e)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-".concat(e,"', use 'cdkFocusRegion").concat(e,"' instead. The deprecated attribute will be removed in 8.0.0."),t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}},{key:"focusInitialElement",value:function(){var e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return e?(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),xn()&&!this._checker.isFocusable(e)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",e),e.focus(),!0):this.focusFirstTabbableElement()}},{key:"focusFirstTabbableElement",value:function(){var e=this._getRegionBoundary("start");return e&&e.focus(),!!e}},{key:"focusLastTabbableElement",value:function(){var e=this._getRegionBoundary("end");return e&&e.focus(),!!e}},{key:"hasAttached",value:function(){return this._hasAttached}},{key:"_getFirstTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,i=0;i<t.length;i++){var n=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(n)return n}return null}},{key:"_getLastTabbableElement",value:function(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;for(var t=e.children||e.childNodes,i=t.length-1;i>=0;i--){var n=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(n)return n}return null}},{key:"_createAnchor",value:function(){var e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}},{key:"_toggleAnchorTabIndex",value:function(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}},{key:"toggleAnchors",value:function(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}},{key:"_executeOnStable",value:function(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(Cp(1)).subscribe(e)}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}}]),e}(),jw=((Bw=function(){function e(t,i,n){_classCallCheck2(this,e),this._checker=t,this._ngZone=i,this._document=n}return _createClass(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Vw(e,this._checker,this._ngZone,this._document,t)}}]),e}()).\u0275fac=function(e){return new(e||Bw)(Ze(Lw),Ze(Wc),Ze(Su))},Bw.\u0275prov=pe({factory:function(){return new Bw(Ze(Lw),Ze(Wc),Ze(Su))},token:Bw,providedIn:"root"}),Bw);"undefined"!=typeof Element&&Element;var Hw,Uw=new qe("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),qw=new qe("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Ww=((Hw=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._ngZone=i,this._defaultOptions=r,this._document=n,this._liveElement=t||this._createLiveElement()}return _createClass(e,[{key:"announce",value:function(e){for(var t,i,n,r=this,a=this._defaultOptions,o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return 1===s.length&&"number"==typeof s[0]?n=s[0]:(i=(t=_slicedToArray(s,2))[0],n=t[1]),this.clear(),clearTimeout(this._previousTimeout),i||(i=a&&a.politeness?a.politeness:"polite"),null==n&&a&&(n=a.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular((function(){return new Promise((function(t){clearTimeout(r._previousTimeout),r._previousTimeout=setTimeout((function(){r._liveElement.textContent=e,t(),"number"==typeof n&&(r._previousTimeout=setTimeout((function(){return r.clear()}),n))}),100)}))}))}},{key:"clear",value:function(){this._liveElement&&(this._liveElement.textContent="")}},{key:"ngOnDestroy",value:function(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}},{key:"_createLiveElement",value:function(){for(var e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div"),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}]),e}()).\u0275fac=function(e){return new(e||Hw)(Ze(Uw,8),Ze(Wc),Ze(Su),Ze(qw,8))},Hw.\u0275prov=pe({factory:function(){return new Hw(Ze(Uw,8),Ze(Wc),Ze(Su),Ze(qw,8))},token:Hw,providedIn:"root"}),Hw);function zw(e){return 0===e.buttons}var Gw,Yw=new qe("cdk-focus-monitor-default-options"),Kw=rC({passive:!0,capture:!0}),Xw=((Gw=function(){function e(t,i,n,r){var a=this;_classCallCheck2(this,e),this._ngZone=t,this._platform=i,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=function(){a._lastTouchTarget=null,a._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(e){if(!a._lastTouchTarget){var t=zw(e)?"keyboard":"mouse";a._setOriginForCurrentEventQueue(t)}},this._documentTouchstartListener=function(e){null!=a._touchTimeoutId&&clearTimeout(a._touchTimeoutId),a._lastTouchTarget=Jw(e),a._touchTimeoutId=setTimeout((function(){return a._lastTouchTarget=null}),650)},this._windowFocusListener=function(){a._windowFocused=!0,a._windowFocusTimeoutId=setTimeout((function(){return a._windowFocused=!1}))},this._rootNodeFocusAndBlurListener=function(e){for(var t=Jw(e),i="focus"===e.type?a._onFocus:a._onBlur,n=t;n;n=n.parentElement)i.call(a,e,n)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}return _createClass(e,[{key:"monitor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return Gd(null);var i=fk(e),n=aC(i)||this._getDocument(),r=this._elementInfo.get(i);if(r)return t&&(r.checkChildren=!0),r.subject.asObservable();var a={checkChildren:t,subject:new x,rootNode:n};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject.asObservable()}},{key:"stopMonitoring",value:function(e){var t=fk(e),i=this._elementInfo.get(t);i&&(i.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._removeGlobalListeners(i))}},{key:"focusVia",value:function(e,t,i){var n=fk(e);this._setOriginForCurrentEventQueue(t),"function"==typeof n.focus&&n.focus(i)}},{key:"ngOnDestroy",value:function(){var e=this;this._elementInfo.forEach((function(t,i){return e.stopMonitoring(i)}))}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(e,t,i){i?e.classList.add(t):e.classList.remove(t)}},{key:"_getFocusOrigin",value:function(e){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"}},{key:"_setClasses",value:function(e,t){this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t)}},{key:"_setOriginForCurrentEventQueue",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){t._origin=e,0===t._detectionMode&&(t._originTimeoutId=setTimeout((function(){return t._origin=null}),1))}))}},{key:"_wasCausedByTouch",value:function(e){var t=Jw(e);return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(e,t){var i=this._elementInfo.get(t);if(i&&(i.checkChildren||t===Jw(e))){var n=this._getFocusOrigin(e);this._setClasses(t,n),this._emitOrigin(i.subject,n),this._lastFocusOrigin=n}}},{key:"_onBlur",value:function(e,t){var i=this._elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(i.subject,null))}},{key:"_emitOrigin",value:function(e,t){this._ngZone.run((function(){return e.next(t)}))}},{key:"_registerGlobalListeners",value:function(e){var t=this;if(this._platform.isBrowser){var i=e.rootNode,n=this._rootNodeFocusListenerCount.get(i)||0;n||this._ngZone.runOutsideAngular((function(){i.addEventListener("focus",t._rootNodeFocusAndBlurListener,Kw),i.addEventListener("blur",t._rootNodeFocusAndBlurListener,Kw)})),this._rootNodeFocusListenerCount.set(i,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular((function(){var e=t._getDocument(),i=t._getWindow();e.addEventListener("keydown",t._documentKeydownListener,Kw),e.addEventListener("mousedown",t._documentMousedownListener,Kw),e.addEventListener("touchstart",t._documentTouchstartListener,Kw),i.addEventListener("focus",t._windowFocusListener)}))}}},{key:"_removeGlobalListeners",value:function(e){var t=e.rootNode;if(this._rootNodeFocusListenerCount.has(t)){var i=this._rootNodeFocusListenerCount.get(t);i>1?this._rootNodeFocusListenerCount.set(t,i-1):(t.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Kw),t.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Kw),this._rootNodeFocusListenerCount.delete(t))}if(!--this._monitoredElementCount){var n=this._getDocument(),r=this._getWindow();n.removeEventListener("keydown",this._documentKeydownListener,Kw),n.removeEventListener("mousedown",this._documentMousedownListener,Kw),n.removeEventListener("touchstart",this._documentTouchstartListener,Kw),r.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}]),e}()).\u0275fac=function(e){return new(e||Gw)(Ze(Wc),Ze(iC),Ze(Su,8),Ze(Yw,8))},Gw.\u0275prov=pe({factory:function(){return new Gw(Ze(Wc),Ze(iC),Ze(Su,8),Ze(Yw,8))},token:Gw,providedIn:"root"}),Gw);function Jw(e){return e.composedPath?e.composedPath()[0]:e.target}var Qw,Zw=((Qw=function(){function e(t,i){_classCallCheck2(this,e),this._platform=t,this._document=i}return _createClass(e,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);var t=this._document.defaultView||window,i=t&&t.getComputedStyle?t.getComputedStyle(e):null,n=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),n){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(this._platform.isBrowser&&this._document.body){var e=this._document.body.classList;e.remove("cdk-high-contrast-active"),e.remove("cdk-high-contrast-black-on-white"),e.remove("cdk-high-contrast-white-on-black");var t=this.getHighContrastMode();1===t?(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-black-on-white")):2===t&&(e.add("cdk-high-contrast-active"),e.add("cdk-high-contrast-white-on-black"))}}}]),e}()).\u0275fac=function(e){return new(e||Qw)(Ze(iC),Ze(Su))},Qw.\u0275prov=pe({factory:function(){return new Qw(Ze(iC),Ze(Su))},token:Qw,providedIn:"root"}),Qw),$w=new ol("9.2.4"),e_=function e(){_classCallCheck2(this,e)};function t_(e,t){return{type:7,name:e,definitions:t,options:{}}}function i_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function n_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function r_(e){return{type:6,styles:e,offset:null}}function a_(e,t,i){return{type:0,name:e,styles:t,options:i}}function o_(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:e,animation:t,options:i}}function s_(e){Promise.resolve(null).then(e)}var l_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck2(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+i}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;s_((function(){return e._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(e){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),c_=function(){function e(t){var i=this;_classCallCheck2(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,r=0,a=0,o=this.players.length;0==o?s_((function(){return i._onFinish()})):this.players.forEach((function(e){e.onDone((function(){++n==o&&i._onFinish()})),e.onDestroy((function(){++r==o&&i._onDestroy()})),e.onStart((function(){++a==o&&i._onStart()}))})),this.totalTime=this.players.reduce((function(e,t){return Math.max(e,t.totalTime)}),0)}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(e){return e.init()}))}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(e){return e.play()}))}},{key:"pause",value:function(){this.players.forEach((function(e){return e.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(e){return e.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(e){return e.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(e){return e.destroy()})),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(e){return e.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach((function(e){var i=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(i)}))}},{key:"getPosition",value:function(){var e=0;return this.players.forEach((function(t){var i=t.getPosition();e=Math.min(i,e)})),e}},{key:"beforeDestroy",value:function(){this.players.forEach((function(e){e.beforeDestroy&&e.beforeDestroy()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}();function u_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function h_(e){switch(e.length){case 0:return new l_;case 1:return e[0];default:return new c_(e)}}function d_(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=[],s=[],l=-1,c=null;if(n.forEach((function(e){var i=e.offset,n=i==l,u=n&&c||{};Object.keys(e).forEach((function(i){var n=i,s=e[i];if("offset"!==i)switch(n=t.normalizePropertyName(n,o),s){case"!":s=r[i];break;case"*":s=a[i];break;default:s=t.normalizeStyleValue(i,n,s,o)}u[n]=s})),n||s.push(u),c=u,l=i})),o.length){var u="\n - ";throw new Error("Unable to animate due to the following errors:".concat(u).concat(o.join(u)))}return s}function p_(e,t,i,n){switch(t){case"start":e.onStart((function(){return n(i&&f_(i,"start",e))}));break;case"done":e.onDone((function(){return n(i&&f_(i,"done",e))}));break;case"destroy":e.onDestroy((function(){return n(i&&f_(i,"destroy",e))}))}}function f_(e,t,i){var n=i.totalTime,r=v_(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==n?e.totalTime:n,!!i.disabled),a=e._data;return null!=a&&(r._data=a),r}function v_(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:i,toState:n,phaseName:r,totalTime:a,disabled:!!o}}function m_(e,t,i){var n;return e instanceof Map?(n=e.get(t))||e.set(t,n=i):(n=e[t])||(n=e[t]=i),n}function g_(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var y_=function(e,t){return!1},b_=function(e,t){return!1},k_=function(e,t,i){return[]},C_=u_();(C_||"undefined"!=typeof Element)&&(y_=function(e,t){return e.contains(t)},b_=function(){if(C_||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,i){return t.apply(e,[i])}:b_}(),k_=function(e,t,i){var n=[];if(i)n.push.apply(n,_toConsumableArray2(e.querySelectorAll(t)));else{var r=e.querySelector(t);r&&n.push(r)}return n});var w_=null,__=!1;function S_(e){w_||(w_=("undefined"!=typeof document?document.body:null)||{},__=!!w_.style&&"WebkitAppearance"in w_.style);var t=!0;return w_.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(!(t=e in w_.style)&&__)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in w_.style),t}var E_=b_,T_=y_,A_=k_;function O_(e){var t={};return Object.keys(e).forEach((function(i){var n=i.replace(/([a-z])([A-Z])/g,"$1-$2");t[n]=e[i]})),t}var x_,I_=((x_=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return S_(e)}},{key:"matchesElement",value:function(e,t){return E_(e,t)}},{key:"containsElement",value:function(e,t){return T_(e,t)}},{key:"query",value:function(e,t,i){return A_(e,t,i)}},{key:"computeStyle",value:function(e,t,i){return i||""}},{key:"animate",value:function(e,t,i,n,r){return arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6],new l_(i,n)}}]),e}()).\u0275fac=function(e){return new(e||x_)},x_.\u0275prov=pe({token:x_,factory:x_.\u0275fac}),x_),D_=function(){var e=function e(){_classCallCheck2(this,e)};return e.NOOP=new I_,e}();function R_(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:P_(parseFloat(t[1]),t[2])}function P_(e,t){switch(t){case"s":return 1e3*e;default:return e}}function M_(e,t,i){return e.hasOwnProperty("duration")?e:function(e,t,i){var n,r=0,a="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};n=P_(parseFloat(o[1]),o[2]);var s=o[3];null!=s&&(r=P_(parseFloat(s),o[4]));var l=o[5];l&&(a=l)}else n=e;if(!i){var c=!1,u=t.length;n<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(u,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:n,delay:r,easing:a}}(e,t,i)}function L_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach((function(i){t[i]=e[i]})),t}function N_(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var n in e)i[n]=e[n];else L_(e,i);return i}function F_(e,t,i){return i?t+":"+i+";":""}function B_(e){for(var t="",i=0;i<e.style.length;i++){var n=e.style.item(i);t+=F_(0,n,e.style.getPropertyValue(n))}for(var r in e.style)e.style.hasOwnProperty(r)&&!r.startsWith("_")&&(t+=F_(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[r]));e.setAttribute("style",t)}function V_(e,t,i){e.style&&(Object.keys(t).forEach((function(n){var r=Y_(n);i&&!i.hasOwnProperty(n)&&(i[n]=e.style[r]),e.style[r]=t[n]})),u_()&&B_(e))}function j_(e,t){e.style&&(Object.keys(t).forEach((function(t){var i=Y_(t);e.style[i]=""})),u_()&&B_(e))}function H_(e){return Array.isArray(e)?1==e.length?e[0]:n_(e):e}var U_=new RegExp("{{\\s*(.+?)\\s*}}","g");function q_(e){var t=[];if("string"==typeof e){for(var i;i=U_.exec(e);)t.push(i[1]);U_.lastIndex=0}return t}function W_(e,t,i){var n=e.toString(),r=n.replace(U_,(function(e,n){var r=t[n];return t.hasOwnProperty(n)||(i.push("Please provide a value for the animation param "+n),r=""),r.toString()}));return r==n?e:r}function z_(e){for(var t=[],i=e.next();!i.done;)t.push(i.value),i=e.next();return t}var G_=/-+([a-z0-9])/g;function Y_(e){return e.replace(G_,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t[1].toUpperCase()}))}function K_(e,t){return 0===e||0===t}function X_(e,t,i){var n=Object.keys(i);if(n.length&&t.length){var r=t[0],a=[];if(n.forEach((function(e){r.hasOwnProperty(e)||a.push(e),r[e]=i[e]})),a.length)for(var o=function(){var i=t[s];a.forEach((function(t){i[t]=Q_(e,t)}))},s=1;s<t.length;s++)o()}return t}function J_(e,t,i){switch(t.type){case 7:return e.visitTrigger(t,i);case 0:return e.visitState(t,i);case 1:return e.visitTransition(t,i);case 2:return e.visitSequence(t,i);case 3:return e.visitGroup(t,i);case 4:return e.visitAnimate(t,i);case 5:return e.visitKeyframes(t,i);case 6:return e.visitStyle(t,i);case 8:return e.visitReference(t,i);case 9:return e.visitAnimateChild(t,i);case 10:return e.visitAnimateRef(t,i);case 11:return e.visitQuery(t,i);case 12:return e.visitStagger(t,i);default:throw new Error("Unable to resolve animation metadata node #"+t.type)}}function Q_(e,t){return window.getComputedStyle(e)[t]}var Z_=new Set(["true","1"]),$_=new Set(["false","0"]);function eS(e,t){var i=Z_.has(e)||$_.has(e),n=Z_.has(t)||$_.has(t);return function(r,a){var o="*"==e||e==r,s="*"==t||t==a;return!o&&i&&"boolean"==typeof r&&(o=r?Z_.has(e):$_.has(e)),!s&&n&&"boolean"==typeof a&&(s=a?Z_.has(t):$_.has(t)),o&&s}}var tS=new RegExp("s*:selfs*,?","g");function iS(e,t,i){return new nS(e).build(t,i)}var nS=function(){function e(t){_classCallCheck2(this,e),this._driver=t}return _createClass(e,[{key:"build",value:function(e,t){var i=new rS(t);return this._resetContextStyleTimingState(i),J_(this,H_(e),i)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var i=this,n=t.queryCount=0,r=t.depCount=0,a=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach((function(e){if(i._resetContextStyleTimingState(t),0==e.type){var s=e,l=s.name;l.toString().split(/\s*,\s*/).forEach((function(e){s.name=e,a.push(i.visitState(s,t))})),s.name=l}else if(1==e.type){var c=i.visitTransition(e,t);n+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:e.name,states:a,transitions:o,queryCount:n,depCount:r,options:null}}},{key:"visitState",value:function(e,t){var i=this.visitStyle(e.styles,t),n=e.options&&e.options.params||null;if(i.containsDynamicStyles){var r=new Set,a=n||{};if(i.styles.forEach((function(e){if(aS(e)){var t=e;Object.keys(t).forEach((function(e){q_(t[e]).forEach((function(e){a.hasOwnProperty(e)||r.add(e)}))}))}})),r.size){var o=z_(r.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(o.join(", ")))}}return{type:0,name:e.name,style:i,options:n?{params:n}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var i,n,r,a=J_(this,H_(e.animation),t);return{type:1,matchers:(i=e.expr,n=t.errors,r=[],"string"==typeof i?i.split(/\s*,\s*/).forEach((function(e){return function(e,t,i){if(":"==e[0]){var n=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,i);if("function"==typeof n)return void t.push(n);e=n}var r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return i.push('The provided transition expression "'.concat(e,'" is not supported')),t;var a=r[1],o=r[2],s=r[3];t.push(eS(a,s)),"<"!=o[0]||"*"==a&&"*"==s||t.push(eS(s,a))}(e,r,n)})):r.push(i),r),animation:a,queryCount:t.queryCount,depCount:t.depCount,options:oS(e.options)}}},{key:"visitSequence",value:function(e,t){var i=this;return{type:2,steps:e.steps.map((function(e){return J_(i,e,t)})),options:oS(e.options)}}},{key:"visitGroup",value:function(e,t){var i=this,n=t.currentTime,r=0,a=e.steps.map((function(e){t.currentTime=n;var a=J_(i,e,t);return r=Math.max(r,t.currentTime),a}));return t.currentTime=r,{type:3,steps:a,options:oS(e.options)}}},{key:"visitAnimate",value:function(e,t){var i,n=function(e,t){var i=null;if(e.hasOwnProperty("duration"))i=e;else if("number"==typeof e)return sS(M_(e,t).duration,0,"");var n=e;if(n.split(/\s+/).some((function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)}))){var r=sS(0,0,"");return r.dynamic=!0,r.strValue=n,r}return sS((i=i||M_(n,t)).duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;var r=e.styles?e.styles:r_({});if(5==r.type)i=this.visitKeyframes(r,t);else{var a=e.styles,o=!1;if(!a){o=!0;var s={};n.easing&&(s.easing=n.easing),a=r_(s)}t.currentTime+=n.duration+n.delay;var l=this.visitStyle(a,t);l.isEmptyStep=o,i=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}},{key:"visitStyle",value:function(e,t){var i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}},{key:"_makeStyleAst",value:function(e,t){var i=[];Array.isArray(e.styles)?e.styles.forEach((function(e){"string"==typeof e?"*"==e?i.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):i.push(e)})):i.push(e.styles);var n=!1,r=null;return i.forEach((function(e){if(aS(e)){var t=e,i=t.easing;if(i&&(r=i,delete t.easing),!n)for(var a in t)if(t[a].toString().indexOf("{{")>=0){n=!0;break}}})),{type:6,styles:i,easing:r,offset:e.offset,containsDynamicStyles:n,options:null}}},{key:"_validateStyleAst",value:function(e,t){var i=this,n=t.currentAnimateTimings,r=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach((function(e){"string"!=typeof e&&Object.keys(e).forEach((function(n){if(i._driver.validateStyleProperty(n)){var o,s,l,c,u,h=t.collectedStyles[t.currentQuerySelector],d=h[n],p=!0;d&&(a!=r&&a>=d.startTime&&r<=d.endTime&&(t.errors.push('The CSS property "'.concat(n,'" that exists between the times of "').concat(d.startTime,'ms" and "').concat(d.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(a,'ms" and "').concat(r,'ms"')),p=!1),a=d.startTime),p&&(h[n]={startTime:a,endTime:r}),t.options&&(o=e[n],s=t.options,l=t.errors,c=s.params||{},(u=q_(o)).length&&u.forEach((function(e){c.hasOwnProperty(e)||l.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})))}else t.errors.push('The provided animation property "'.concat(n,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(e,t){var i=this,n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;var r=0,a=[],o=!1,s=!1,l=0,c=e.steps.map((function(e){var n=i._makeStyleAst(e,t),c=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach((function(e){if(aS(e)&&e.hasOwnProperty("offset")){var i=e;t=parseFloat(i.offset),delete i.offset}}));else if(aS(e)&&e.hasOwnProperty("offset")){var i=e;t=parseFloat(i.offset),delete i.offset}return t}(n.styles),u=0;return null!=c&&(r++,u=n.offset=c),s=s||u<0||u>1,o=o||u<l,l=u,a.push(u),n}));s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");var u=e.steps.length,h=0;r>0&&r<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(h=1/(u-1));var d=u-1,p=t.currentTime,f=t.currentAnimateTimings,v=f.duration;return c.forEach((function(e,r){var o=h>0?r==d?1:h*r:a[r],s=o*v;t.currentTime=p+f.delay+s,f.duration=s,i._validateStyleAst(e,t),e.offset=o,n.styles.push(e)})),n}},{key:"visitReference",value:function(e,t){return{type:8,animation:J_(this,H_(e.animation),t),options:oS(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:oS(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:oS(e.options)}}},{key:"visitQuery",value:function(e,t){var i=t.currentQuerySelector,n=e.options||{};t.queryCount++,t.currentQuery=e;var r=_slicedToArray(function(e){var t=!!e.split(/\s*,\s*/).find((function(e){return":self"==e}));return t&&(e=e.replace(tS,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(e){return".ng-trigger-"+e.substr(1)})).replace(/:animating/g,".ng-animating"),t]}(e.selector),2),a=r[0],o=r[1];t.currentQuerySelector=i.length?i+" "+a:a,m_(t.collectedStyles,t.currentQuerySelector,{});var s=J_(this,H_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:a,limit:n.limit||0,optional:!!n.optional,includeSelf:o,animation:s,originalSelector:e.selector,options:oS(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var i="full"===e.timings?{duration:0,delay:0,easing:"full"}:M_(e.timings,t.errors,!0);return{type:12,animation:J_(this,H_(e.animation),t),timings:i,options:null}}}]),e}(),rS=function e(t){_classCallCheck2(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function aS(e){return!Array.isArray(e)&&"object"==typeof e}function oS(e){var t;return e?(e=L_(e)).params&&(e.params=(t=e.params)?L_(t):null):e={},e}function sS(e,t,i){return{duration:e,delay:t,easing:i}}function lS(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:i,postStyleProps:n,duration:r,delay:a,totalTime:r+a,easing:o,subTimeline:s}}var cS=function(){function e(){_classCallCheck2(this,e),this._map=new Map}return _createClass(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var i,n=this._map.get(e);n||this._map.set(e,n=[]),(i=n).push.apply(i,_toConsumableArray2(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),uS=new RegExp(":enter","g"),hS=new RegExp(":leave","g");function dS(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new pS).buildKeyframes(e,t,i,n,r,a,o,s,l,c)}var pS=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"buildKeyframes",value:function(e,t,i,n,r,a,o,s,l){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];l=l||new cS;var u=new vS(e,t,l,n,r,c,[]);u.options=s,u.currentTimeline.setStyles([a],null,u.errors,s),J_(this,i,u);var h=u.timelines.filter((function(e){return e.containsAnimation()}));if(h.length&&Object.keys(o).length){var d=h[h.length-1];d.allowOnlyTimelineStyles()||d.setStyles([o],null,u.errors,s)}return h.length?h.map((function(e){return e.buildKeyframes()})):[lS(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var i=t.subInstructions.consume(t.element);if(i){var n=t.createSubContext(e.options),r=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,n,n.options);r!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,i){var n=t.currentTimeline.currentTime,r=null!=i.duration?R_(i.duration):null,a=null!=i.delay?R_(i.delay):null;return 0!==r&&e.forEach((function(e){var i=t.appendInstructionToTimeline(e,r,a);n=Math.max(n,i.duration+i.delay)})),n}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),J_(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var i=this,n=t.subContextCount,r=t,a=e.options;if(a&&(a.params||a.delay)&&((r=t.createSubContext(a)).transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=fS);var o=R_(a.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach((function(e){return J_(i,e,r)})),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var i=this,n=[],r=t.currentTimeline.currentTime,a=e.options&&e.options.delay?R_(e.options.delay):0;e.steps.forEach((function(o){var s=t.createSubContext(e.options);a&&s.delayNextStep(a),J_(i,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)})),n.forEach((function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)})),t.transformIntoNewTimeline(r),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var i=e.strValue;return M_(t.params?W_(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var i=t.currentAnimateTimings=this._visitTiming(e.timings,t),n=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),n.snapshotCurrentStyles());var r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),n.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var i=t.currentTimeline,n=t.currentAnimateTimings;!n&&i.getCurrentStyleProperties().length&&i.forwardFrame();var r=n&&n.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var i=t.currentAnimateTimings,n=t.currentTimeline.duration,r=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach((function(e){a.forwardTime((e.offset||0)*r),a.setStyles(e.styles,e.easing,t.errors,t.options),a.applyStylesToKeyframe()})),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(n+r),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var i=this,n=t.currentTimeline.currentTime,r=e.options||{},a=r.delay?R_(r.delay):0;a&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=fS);var o=n,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=s.length;var l=null;s.forEach((function(n,r){t.currentQueryIndex=r;var s=t.createSubContext(e.options,n);a&&s.delayNextStep(a),n===t.element&&(l=s.currentTimeline),J_(i,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)})),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var i=t.parentContext,n=t.currentTimeline,r=e.timings,a=Math.abs(r.duration),o=a*(t.currentQueryTotal-1),s=a*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":s=o-s;break;case"full":s=i.currentStaggerTime}var l=t.currentTimeline;s&&l.delayNextStep(s);var c=l.currentTime;J_(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=n.currentTime-c+(n.startTime-i.currentTimeline.startTime)}}]),e}(),fS={},vS=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this._driver=t,this.element=i,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=a,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new mS(this._driver,i,0),s.push(this.currentTimeline)}return _createClass(e,[{key:"updateOptions",value:function(e,t){var i=this;if(e){var n=e,r=this.options;null!=n.duration&&(r.duration=R_(n.duration)),null!=n.delay&&(r.delay=R_(n.delay));var a=n.params;if(a){var o=r.params;o||(o=this.options.params={}),Object.keys(a).forEach((function(e){t&&o.hasOwnProperty(e)||(o[e]=W_(a[e],o,i.errors))}))}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var i=e.params={};Object.keys(t).forEach((function(e){i[e]=t[e]}))}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=i||this.element,a=new e(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(t),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=fS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,i){var n={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},r=new gS(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,n,e.stretchStartingKeyframe);return this.timelines.push(r),n}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,i,n,r,a){var o=[];if(n&&o.push(this.element),e.length>0){e=(e=e.replace(uS,"."+this._enterClassName)).replace(hS,"."+this._leaveClassName);var s=this._driver.query(this.element,e,1!=i);0!==i&&(s=i<0?s.slice(s.length+i,s.length):s.slice(0,i)),o.push.apply(o,_toConsumableArray2(s))}return r||0!=o.length||a.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),o}},{key:"params",get:function(){return this.options.params}}]),e}(),mS=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._driver=t,this.element=i,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,i){return this.applyStylesToKeyframe(),new e(this._driver,t,i||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach((function(e){t._backFill[e]=t._globalTimelineStyles[e]||"*",t._currentKeyframe[e]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,i,n){var r=this;t&&(this._previousKeyframe.easing=t);var a=n&&n.params||{},o=function(e,t){var i,n={};return e.forEach((function(e){"*"===e?(i=i||Object.keys(t)).forEach((function(e){n[e]="*"})):N_(e,!1,n)})),n}(e,this._globalTimelineStyles);Object.keys(o).forEach((function(e){var t=W_(o[e],a,i);r._pendingStyles[e]=t,r._localTimelineStyles.hasOwnProperty(e)||(r._backFill[e]=r._globalTimelineStyles.hasOwnProperty(e)?r._globalTimelineStyles[e]:"*"),r._updateStyle(e,t)}))}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,i=Object.keys(t);0!=i.length&&(this._pendingStyles={},i.forEach((function(i){e._currentKeyframe[i]=t[i]})),Object.keys(this._localTimelineStyles).forEach((function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])})))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach((function(t){var i=e._localTimelineStyles[t];e._pendingStyles[t]=i,e._updateStyle(t,i)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach((function(i){var n=t._styleSummary[i],r=e._styleSummary[i];(!n||r.time>n.time)&&t._updateStyle(i,r.value)}))}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,i=new Set,n=1===this._keyframes.size&&0===this.duration,r=[];this._keyframes.forEach((function(a,o){var s=N_(a,!0);Object.keys(s).forEach((function(e){var n=s[e];"!"==n?t.add(e):"*"==n&&i.add(e)})),n||(s.offset=o/e.duration),r.push(s)}));var a=t.size?z_(t.values()):[],o=i.size?z_(i.values()):[];if(n){var s=r[0],l=L_(s);s.offset=0,l.offset=1,r=[s,l]}return lS(this.element,r,a,o,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}}]),e}(),gS=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o,s){var l,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck2(this,i),(l=t.call(this,e,n,s.delay)).element=n,l.keyframes=r,l.preStyleProps=a,l.postStyleProps=o,l._stretchStartingKeyframe=c,l.timings={duration:s.duration,delay:s.delay,easing:s.easing},l}return _createClass(i,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,i=t.delay,n=t.duration,r=t.easing;if(this._stretchStartingKeyframe&&i){var a=[],o=n+i,s=i/o,l=N_(e[0],!1);l.offset=0,a.push(l);var c=N_(e[0],!1);c.offset=yS(s),a.push(c);for(var u=e.length-1,h=1;h<=u;h++){var d=N_(e[h],!1);d.offset=yS((i+d.offset*n)/o),a.push(d)}n=o,i=0,r="",e=a}return lS(this.element,e,this.preStyleProps,this.postStyleProps,n,i,r,!0)}}]),i}(mS);function yS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=Math.pow(10,t-1);return Math.round(e*i)/i}var bS=function e(){_classCallCheck2(this,e)},kS=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"normalizePropertyName",value:function(e,t){return Y_(e)}},{key:"normalizeStyleValue",value:function(e,t,i,n){var r="",a=i.toString().trim();if(CS[t]&&0!==i&&"0"!==i)if("number"==typeof i)r="px";else{var o=i.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&n.push("Please provide a CSS unit value for ".concat(e,":").concat(i))}return a+r}}]),i}(bS),CS=function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function wS(e,t,i,n,r,a,o,s,l,c,u,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:i,fromStyles:a,toState:n,toStyles:o,timelines:s,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}var _S={},SS=function(){function e(t,i,n){_classCallCheck2(this,e),this._triggerName=t,this.ast=i,this._stateStyles=n}return _createClass(e,[{key:"match",value:function(e,t,i,n){return function(e,t,i,n,r){return e.some((function(e){return e(t,i,n,r)}))}(this.ast.matchers,e,t,i,n)}},{key:"buildStyles",value:function(e,t,i){var n=this._stateStyles["*"],r=this._stateStyles[e],a=n?n.buildStyles(t,i):{};return r?r.buildStyles(t,i):a}},{key:"build",value:function(e,t,i,n,r,a,o,s,l,c){var u=[],h=this.ast.options&&this.ast.options.params||_S,d=this.buildStyles(i,o&&o.params||_S,u),p=s&&s.params||_S,f=this.buildStyles(n,p,u),v=new Set,m=new Map,g=new Map,y="void"===n,b={params:Object.assign(Object.assign({},h),p)},k=c?[]:dS(e,t,this.ast.animation,r,a,d,f,b,l,u),C=0;if(k.forEach((function(e){C=Math.max(e.duration+e.delay,C)})),u.length)return wS(t,this._triggerName,i,n,y,d,f,[],[],m,g,C,u);k.forEach((function(e){var i=e.element,n=m_(m,i,{});e.preStyleProps.forEach((function(e){return n[e]=!0}));var r=m_(g,i,{});e.postStyleProps.forEach((function(e){return r[e]=!0})),i!==t&&v.add(i)}));var w=z_(v.values());return wS(t,this._triggerName,i,n,y,d,f,k,w,m,g,C)}}]),e}(),ES=function(){function e(t,i){_classCallCheck2(this,e),this.styles=t,this.defaultParams=i}return _createClass(e,[{key:"buildStyles",value:function(e,t){var i={},n=L_(this.defaultParams);return Object.keys(e).forEach((function(t){var i=e[t];null!=i&&(n[t]=i)})),this.styles.styles.forEach((function(e){if("string"!=typeof e){var r=e;Object.keys(r).forEach((function(e){var a=r[e];a.length>1&&(a=W_(a,n,t)),i[e]=a}))}})),i}}]),e}(),TS=function(){function e(t,i){var n=this;_classCallCheck2(this,e),this.name=t,this.ast=i,this.transitionFactories=[],this.states={},i.states.forEach((function(e){n.states[e.name]=new ES(e.style,e.options&&e.options.params||{})})),AS(this.states,"true","1"),AS(this.states,"false","0"),i.transitions.forEach((function(e){n.transitionFactories.push(new SS(t,e,n.states))})),this.fallbackTransition=new SS(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(e,[{key:"matchTransition",value:function(e,t,i,n){return this.transitionFactories.find((function(r){return r.match(e,t,i,n)}))||null}},{key:"matchStyles",value:function(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),e}();function AS(e,t,i){e.hasOwnProperty(t)?e.hasOwnProperty(i)||(e[i]=e[t]):e.hasOwnProperty(i)&&(e[t]=e[i])}var OS=new cS,xS=function(){function e(t,i,n){_classCallCheck2(this,e),this.bodyNode=t,this._driver=i,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}return _createClass(e,[{key:"register",value:function(e,t){var i=[],n=iS(this._driver,t,i);if(i.length)throw new Error("Unable to build the animation due to the following errors: "+i.join("\n"));this._animations[e]=n}},{key:"_buildPlayer",value:function(e,t,i){var n=e.element,r=d_(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(n,r,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var i,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=this._animations[e],s=new Map;if(o?(i=dS(this._driver,t,o,"ng-enter","ng-leave",{},{},r,OS,a)).forEach((function(e){var t=m_(s,e.element,{});e.postStyleProps.forEach((function(e){return t[e]=null}))})):(a.push("The requested animation doesn't exist or has already been destroyed"),i=[]),a.length)throw new Error("Unable to create the animation due to the following errors: "+a.join("\n"));s.forEach((function(e,t){Object.keys(e).forEach((function(i){e[i]=n._driver.computeStyle(t,i,"*")}))}));var l=h_(i.map((function(e){var t=s.get(e.element);return n._buildPlayer(e,{},t)})));return this._playersById[e]=l,l.onDestroy((function(){return n.destroy(e)})),this.players.push(l),l}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by "+e);return t}},{key:"listen",value:function(e,t,i,n){var r=v_(t,"","","");return p_(this._getPlayer(e),i,r,n),function(){}}},{key:"command",value:function(e,t,i,n){if("register"!=i)if("create"!=i){var r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,n[0]||{});else this.register(e,n[0])}}]),e}(),IS=[],DS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},RS={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},PS=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck2(this,e),this.namespaceId=i;var n,r=t&&t.hasOwnProperty("value");if(this.value=null!=(n=r?t.value:t)?n:null,r){var a=L_(t);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}return _createClass(e,[{key:"absorbOptions",value:function(e){var t=e.params;if(t){var i=this.options.params;Object.keys(t).forEach((function(e){null==i[e]&&(i[e]=t[e])}))}}},{key:"params",get:function(){return this.options.params}}]),e}(),MS=new PS("void"),LS=function(){function e(t,i,n){_classCallCheck2(this,e),this.id=t,this.hostElement=i,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,US(i,this._hostClassName)}return _createClass(e,[{key:"listen",value:function(e,t,i,n){var r,a=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(i,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==i||0==i.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if("start"!=(r=i)&&"done"!=r)throw new Error('The provided animation trigger event "'.concat(i,'" for the animation trigger "').concat(t,'" is not supported!'));var o=m_(this._elementListeners,e,[]),s={name:t,phase:i,callback:n};o.push(s);var l=m_(this._engine.statesByElement,e,{});return l.hasOwnProperty(t)||(US(e,"ng-trigger"),US(e,"ng-trigger-"+t),l[t]=MS),function(){a._engine.afterFlush((function(){var e=o.indexOf(s);e>=0&&o.splice(e,1),a._triggers[t]||delete l[t]}))}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,i){var n=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=this._getTrigger(t),o=new FS(this.id,t,e),s=this._engine.statesByElement.get(e);s||(US(e,"ng-trigger"),US(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));var l=s[t],c=new PS(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),s[t]=c,l||(l=MS),"void"===c.value||l.value!==c.value){var u=m_(this._engine.playersByElement,e,[]);u.forEach((function(e){e.namespaceId==n.id&&e.triggerName==t&&e.queued&&e.destroy()}));var h=a.matchTransition(l.value,c.value,e,c.params),d=!1;if(!h){if(!r)return;h=a.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:l,toState:c,player:o,isFallbackTransition:d}),d||(US(e,"ng-animate-queued"),o.onStart((function(){qS(e,"ng-animate-queued")}))),o.onDone((function(){var t=n.players.indexOf(o);t>=0&&n.players.splice(t,1);var i=n._engine.playersByElement.get(e);if(i){var r=i.indexOf(o);r>=0&&i.splice(r,1)}})),this.players.push(o),u.push(o),o}if(!function(e,t){var i=Object.keys(e),n=Object.keys(t);if(i.length!=n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r];if(!t.hasOwnProperty(a)||e[a]!==t[a])return!1}return!0}(l.params,c.params)){var p=[],f=a.matchStyles(l.value,l.params,p),v=a.matchStyles(c.value,c.params,p);p.length?this._engine.reportError(p):this._engine.afterFlush((function(){j_(e,f),V_(e,v)}))}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach((function(t,i){delete t[e]})),this._elementListeners.forEach((function(i,n){t._elementListeners.set(n,i.filter((function(t){return t.name!=e})))}))}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach((function(e){return e.destroy()})),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var i=this,n=this._engine.driver.query(e,".ng-trigger",!0);n.forEach((function(e){if(!e.__ng_removed){var n=i._engine.fetchNamespacesByElement(e);n.size?n.forEach((function(i){return i.triggerLeaveAnimation(e,t,!1,!0)})):i.clearElementCache(e)}})),this._engine.afterFlushAnimationsDone((function(){return n.forEach((function(e){return i.clearElementCache(e)}))}))}},{key:"triggerLeaveAnimation",value:function(e,t,i,n){var r=this,a=this._engine.statesByElement.get(e);if(a){var o=[];if(Object.keys(a).forEach((function(t){if(r._triggers[t]){var i=r.trigger(e,t,"void",n);i&&o.push(i)}})),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&h_(o).onDone((function(){return r._engine.processLeaveNode(e)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,i=this._elementListeners.get(e);if(i){var n=new Set;i.forEach((function(i){var r=i.name;if(!n.has(r)){n.add(r);var a=t._triggers[r].fallbackTransition,o=t._engine.statesByElement.get(e)[r]||MS,s=new PS("void"),l=new FS(t.id,r,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:r,transition:a,fromState:o,toState:s,player:l,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(e,t){var i=this,n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),!this.triggerLeaveAnimation(e,t,!0)){var r=!1;if(n.totalAnimations){var a=n.players.length?n.playersByQueriedElement.get(e):[];if(a&&a.length)r=!0;else for(var o=e;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{var s=e.__ng_removed;s&&s!==DS||(n.afterFlush((function(){return i.clearElementCache(e)})),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}}},{key:"insertNode",value:function(e,t){US(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,i=[];return this._queue.forEach((function(n){var r=n.player;if(!r.destroyed){var a=n.element,o=t._elementListeners.get(a);o&&o.forEach((function(t){if(t.name==n.triggerName){var i=v_(a,n.triggerName,n.fromState.value,n.toState.value);i._data=e,p_(n.player,t.phase,i,t.callback)}})),r.markedForDestroy?t._engine.afterFlush((function(){r.destroy()})):i.push(n)}})),this._queue=[],i.sort((function(e,i){var n=e.transition.ast.depCount,r=i.transition.ast.depCount;return 0==n||0==r?n-r:t._engine.driver.containsElement(e.element,i.element)?1:-1}))}},{key:"destroy",value:function(e){this.players.forEach((function(e){return e.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find((function(t){return t.element===e}))||t}}]),e}(),NS=function(){function e(t,i,n){_classCallCheck2(this,e),this.bodyNode=t,this.driver=i,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return _createClass(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"createNamespace",value:function(e,t){var i=new LS(e,t,this);return t.parentNode?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}},{key:"_balanceNamespaceList",value:function(e,t){var i=this._namespaceList.length-1;if(i>=0){for(var n=!1,r=i;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,t)){this._namespaceList.splice(r+1,0,e),n=!0;break}n||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}},{key:"registerTrigger",value:function(e,t,i){var n=this._namespaceLookup[e];n&&n.register(t,i)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var i=this;if(e){var n=this._fetchNamespace(e);this.afterFlush((function(){i.namespacesByHostElement.delete(n.hostElement),delete i._namespaceLookup[e];var t=i._namespaceList.indexOf(n);t>=0&&i._namespaceList.splice(t,1)})),this.afterFlushAnimationsDone((function(){return n.destroy(t)}))}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,i=this.statesByElement.get(e);if(i)for(var n=Object.keys(i),r=0;r<n.length;r++){var a=i[n[r]].namespaceId;if(a){var o=this._fetchNamespace(a);o&&t.add(o)}}return t}},{key:"trigger",value:function(e,t,i,n){if(BS(t)){var r=this._fetchNamespace(e);if(r)return r.trigger(t,i,n),!0}return!1}},{key:"insertNode",value:function(e,t,i,n){if(BS(t)){var r=t.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;var a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(t,i)}n&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),US(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qS(e,"ng-animate-disabled"))}},{key:"removeNode",value:function(e,t,i,n){if(BS(t)){var r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n),i){var a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,n)}}else this._onRemovalComplete(t,n)}},{key:"markElementAsRemoved",value:function(e,t,i,n){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:n,hasAnimation:i,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,i,n,r){return BS(t)?this._fetchNamespace(e).listen(t,i,n,r):function(){}}},{key:"_buildInstruction",value:function(e,t,i,n,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,n,e.fromState.options,e.toState.options,t,r)}},{key:"destroyInnerAnimations",value:function(e){var t=this,i=this.driver.query(e,".ng-trigger",!0);i.forEach((function(e){return t.destroyActiveAnimationsForElement(e)})),0!=this.playersByQueriedElement.size&&(i=this.driver.query(e,".ng-animating",!0)).forEach((function(e){return t.finishActiveQueriedAnimationOnElement(e)}))}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach((function(e){e.queued?e.markedForDestroy=!0:e.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach((function(e){return e.finish()}))}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise((function(t){if(e.players.length)return h_(e.players).onDone((function(){return t()}));t()}))}},{key:"processLeaveNode",value:function(e){var t=this,i=e.__ng_removed;if(i&&i.setForRemoval){if(e.__ng_removed=DS,i.namespaceId){this.destroyInnerAnimations(e);var n=this._fetchNamespace(i.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach((function(e){t.markElementAsDisabled(e,!1)}))}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(t,i){return e._balanceNamespaceList(t,i)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var n=0;n<this.collectedEnterElements.length;n++)US(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{i=this._flushAnimations(r,t)}finally{for(var a=0;a<r.length;a++)r[a]()}}else for(var o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(e){return e()})),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],i.length?h_(i).onDone((function(){s.forEach((function(e){return e()}))})):s.forEach((function(e){return e()}))}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+e.join("\n"))}},{key:"_flushAnimations",value:function(e,t){var i=this,n=new cS,r=[],a=new Map,o=[],s=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach((function(e){u.add(e);for(var t=i.driver.query(e,".ng-animate-queued",!0),n=0;n<t.length;n++)u.add(t[n])}));var h=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=HS(d,this.collectedEnterElements),f=new Map,v=0;p.forEach((function(e,t){var i="ng-enter"+v++;f.set(t,i),e.forEach((function(e){return US(e,i)}))}));for(var m=[],g=new Set,y=new Set,b=0;b<this.collectedLeaveElements.length;b++){var k=this.collectedLeaveElements[b],C=k.__ng_removed;C&&C.setForRemoval&&(m.push(k),g.add(k),C.hasAnimation?this.driver.query(k,".ng-star-inserted",!0).forEach((function(e){return g.add(e)})):y.add(k))}var w=new Map,_=HS(d,Array.from(g));_.forEach((function(e,t){var i="ng-leave"+v++;w.set(t,i),e.forEach((function(e){return US(e,i)}))})),e.push((function(){p.forEach((function(e,t){var i=f.get(t);e.forEach((function(e){return qS(e,i)}))})),_.forEach((function(e,t){var i=w.get(t);e.forEach((function(e){return qS(e,i)}))})),m.forEach((function(e){i.processLeaveNode(e)}))}));for(var S=[],E=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(t).forEach((function(e){var t=e.player,a=e.element;if(S.push(t),i.collectedEnterElements.length){var u=a.__ng_removed;if(u&&u.setForMove)return void t.destroy()}var d=!h||!i.driver.containsElement(h,a),p=w.get(a),v=f.get(a),m=i._buildInstruction(e,n,v,p,d);if(m.errors&&m.errors.length)E.push(m);else{if(d)return t.onStart((function(){return j_(a,m.fromStyles)})),t.onDestroy((function(){return V_(a,m.toStyles)})),void r.push(t);if(e.isFallbackTransition)return t.onStart((function(){return j_(a,m.fromStyles)})),t.onDestroy((function(){return V_(a,m.toStyles)})),void r.push(t);m.timelines.forEach((function(e){return e.stretchStartingKeyframe=!0})),n.append(a,m.timelines),o.push({instruction:m,player:t,element:a}),m.queriedElements.forEach((function(e){return m_(s,e,[]).push(t)})),m.preStyleProps.forEach((function(e,t){var i=Object.keys(e);if(i.length){var n=l.get(t);n||l.set(t,n=new Set),i.forEach((function(e){return n.add(e)}))}})),m.postStyleProps.forEach((function(e,t){var i=Object.keys(e),n=c.get(t);n||c.set(t,n=new Set),i.forEach((function(e){return n.add(e)}))}))}}));if(E.length){var A=[];E.forEach((function(e){A.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach((function(e){return A.push("- ".concat(e,"\n"))}))})),S.forEach((function(e){return e.destroy()})),this.reportError(A)}var O=new Map,x=new Map;o.forEach((function(e){var t=e.element;n.has(t)&&(x.set(t,t),i._beforeAnimationBuild(e.player.namespaceId,e.instruction,O))})),r.forEach((function(e){var t=e.element;i._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach((function(e){m_(O,t,[]).push(e),e.destroy()}))}));var I=m.filter((function(e){return zS(e,l,c)})),D=new Map;jS(D,this.driver,y,c,"*").forEach((function(e){zS(e,l,c)&&I.push(e)}));var R=new Map;p.forEach((function(e,t){jS(R,i.driver,new Set(e),l,"!")})),I.forEach((function(e){var t=D.get(e),i=R.get(e);D.set(e,Object.assign(Object.assign({},t),i))}));var P=[],M=[],L={};o.forEach((function(e){var t=e.element,o=e.player,s=e.instruction;if(n.has(t)){if(u.has(t))return o.onDestroy((function(){return V_(t,s.toStyles)})),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);var l=L;if(x.size>1){for(var c=t,h=[];c=c.parentNode;){var d=x.get(c);if(d){l=d;break}h.push(c)}h.forEach((function(e){return x.set(e,l)}))}var p=i._buildAnimation(o.namespaceId,s,O,a,R,D);if(o.setRealPlayer(p),l===L)P.push(o);else{var f=i.playersByElement.get(l);f&&f.length&&(o.parentPlayer=h_(f)),r.push(o)}}else j_(t,s.fromStyles),o.onDestroy((function(){return V_(t,s.toStyles)})),M.push(o),u.has(t)&&r.push(o)})),M.forEach((function(e){var t=a.get(e.element);if(t&&t.length){var i=h_(t);e.setRealPlayer(i)}})),r.forEach((function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()}));for(var N=0;N<m.length;N++){var F=m[N],B=F.__ng_removed;if(qS(F,"ng-leave"),!B||!B.hasAnimation){var V=[];if(s.size){var j=s.get(F);j&&j.length&&V.push.apply(V,_toConsumableArray2(j));for(var H=this.driver.query(F,".ng-animating",!0),U=0;U<H.length;U++){var q=s.get(H[U]);q&&q.length&&V.push.apply(V,_toConsumableArray2(q))}}var W=V.filter((function(e){return!e.destroyed}));W.length?WS(this,F,W):this.processLeaveNode(F)}}return m.length=0,P.forEach((function(e){i.players.push(e),e.onDone((function(){e.destroy();var t=i.players.indexOf(e);i.players.splice(t,1)})),e.play()})),P}},{key:"elementContainsData",value:function(e,t){var i=!1,n=t.__ng_removed;return n&&n.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,i,n,r){var a=[];if(t){var o=this.playersByQueriedElement.get(e);o&&(a=o)}else{var s=this.playersByElement.get(e);if(s){var l=!r||"void"==r;s.forEach((function(e){e.queued||(l||e.triggerName==n)&&a.push(e)}))}}return(i||n)&&(a=a.filter((function(e){return!(i&&i!=e.namespaceId||n&&n!=e.triggerName)}))),a}},{key:"_beforeAnimationBuild",value:function(e,t,i){var n,r=this,a=t.element,o=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName,l=_createForOfIteratorHelper(t.timelines);try{var c=function(){var e=n.value.element,l=e!==a,c=m_(i,e,[]);r._getPreviousPlayers(e,l,o,s,t.toState).forEach((function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)}))};for(l.s();!(n=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}j_(a,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,i,n,r,a){var o=this,s=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,d=t.timelines.map((function(t){var d=t.element;u.add(d);var p=d.__ng_removed;if(p&&p.removedBeforeQueried)return new l_(t.duration,t.delay);var f,v,m=d!==l,g=(f=(i.get(d)||IS).map((function(e){return e.getRealPlayer()})),v=[],function e(t,i){for(var n=0;n<t.length;n++){var r=t[n];r instanceof c_?e(r.players,i):i.push(r)}}(f,v),v).filter((function(e){return!!e.element&&e.element===d})),y=r.get(d),b=a.get(d),k=d_(0,o._normalizer,0,t.keyframes,y,b),C=o._buildPlayer(t,k,g);if(t.subTimeline&&n&&h.add(d),m){var w=new FS(e,s,d);w.setRealPlayer(C),c.push(w)}return C}));c.forEach((function(e){m_(o.playersByQueriedElement,e.element,[]).push(e),e.onDone((function(){return function(e,t,i){var n;if(e instanceof Map){if(n=e.get(t)){if(n.length){var r=n.indexOf(i);n.splice(r,1)}0==n.length&&e.delete(t)}}else if(n=e[t]){if(n.length){var a=n.indexOf(i);n.splice(a,1)}0==n.length&&delete e[t]}return n}(o.playersByQueriedElement,e.element,e)}))})),u.forEach((function(e){return US(e,"ng-animating")}));var p=h_(d);return p.onDestroy((function(){u.forEach((function(e){return qS(e,"ng-animating")})),V_(l,t.toStyles)})),h.forEach((function(e){m_(n,e,[]).push(p)})),p}},{key:"_buildPlayer",value:function(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new l_(e.duration,e.delay)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach((function(t){t.players.forEach((function(t){t.queued&&e.push(t)}))})),e}}]),e}(),FS=function(){function e(t,i,n){_classCallCheck2(this,e),this.namespaceId=t,this.triggerName=i,this.element=n,this._player=new l_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach((function(i){t._queuedCallbacks[i].forEach((function(t){return p_(e,i,void 0,t)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,i=this._player;i.triggerCallback&&e.onStart((function(){return i.triggerCallback("start")})),e.onDone((function(){return t.finish()})),e.onDestroy((function(){return t.destroy()}))}},{key:"_queueEvent",value:function(e,t){m_(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function BS(e){return e&&1===e.nodeType}function VS(e,t){var i=e.style.display;return e.style.display=null!=t?t:"none",i}function jS(e,t,i,n,r){var a=[];i.forEach((function(e){return a.push(VS(e))}));var o=[];n.forEach((function(i,n){var a={};i.forEach((function(e){var i=a[e]=t.computeStyle(n,e,r);i&&0!=i.length||(n.__ng_removed=RS,o.push(n))})),e.set(n,a)}));var s=0;return i.forEach((function(e){return VS(e,a[s++])})),o}function HS(e,t){var i=new Map;if(e.forEach((function(e){return i.set(e,[])})),0==t.length)return i;var n=new Set(t),r=new Map;return t.forEach((function(e){var t=function e(t){if(!t)return 1;var a=r.get(t);if(a)return a;var o=t.parentNode;return a=i.has(o)?o:n.has(o)?1:e(o),r.set(t,a),a}(e);1!==t&&i.get(t).push(e)})),i}function US(e,t){if(e.classList)e.classList.add(t);else{var i=e.$$classes;i||(i=e.$$classes={}),i[t]=!0}}function qS(e,t){if(e.classList)e.classList.remove(t);else{var i=e.$$classes;i&&delete i[t]}}function WS(e,t,i){h_(i).onDone((function(){return e.processLeaveNode(t)}))}function zS(e,t,i){var n=i.get(e);if(!n)return!1;var r=t.get(e);return r?n.forEach((function(e){return r.add(e)})):t.set(e,n),i.delete(e),!0}var GS=function(){function e(t,i,n){var r=this;_classCallCheck2(this,e),this.bodyNode=t,this._driver=i,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new NS(t,i,n),this._timelineEngine=new xS(t,i,n),this._transitionEngine.onRemovalComplete=function(e,t){return r.onRemovalComplete(e,t)}}return _createClass(e,[{key:"registerTrigger",value:function(e,t,i,n,r){var a=e+"-"+n,o=this._triggerCache[a];if(!o){var s=[],l=iS(this._driver,r,s);if(s.length)throw new Error('The animation trigger "'.concat(n,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));o=function(e,t){return new TS(e,t)}(n,l),this._triggerCache[a]=o}this._transitionEngine.registerTrigger(t,n,o)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,i,n){this._transitionEngine.insertNode(e,t,i,n)}},{key:"onRemove",value:function(e,t,i,n){this._transitionEngine.removeNode(e,t,n||!1,i)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,t,i,n){if("@"==i.charAt(0)){var r=_slicedToArray(g_(i),2),a=r[0],o=r[1];this._timelineEngine.command(a,t,o,n)}else this._transitionEngine.trigger(e,t,i,n)}},{key:"listen",value:function(e,t,i,n,r){if("@"==i.charAt(0)){var a=_slicedToArray(g_(i),2),o=a[0],s=a[1];return this._timelineEngine.listen(o,t,s,r)}return this._transitionEngine.listen(e,t,i,n,r)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),e}();function YS(e,t){var i=null,n=null;return Array.isArray(t)&&t.length?(i=XS(t[0]),t.length>1&&(n=XS(t[t.length-1]))):t&&(i=XS(t)),i||n?new KS(e,i,n):null}var KS=function(){var e=function(){function e(t,i,n){_classCallCheck2(this,e),this._element=t,this._startStyles=i,this._endStyles=n,this._state=0;var r=e.initialStylesByElement.get(t);r||e.initialStylesByElement.set(t,r={}),this._initialStyles=r}return _createClass(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&V_(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(V_(this._element,this._initialStyles),this._endStyles&&(V_(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(j_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(j_(this._element,this._endStyles),this._endStyles=null),V_(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function XS(e){for(var t=null,i=Object.keys(e),n=0;n<i.length;n++){var r=i[n];JS(r)&&((t=t||{})[r]=e[r])}return t}function JS(e){return"display"===e||"position"===e}var QS=function(){function e(t,i,n,r,a,o,s){var l=this;_classCallCheck2(this,e),this._element=t,this._name=i,this._duration=n,this._delay=r,this._easing=a,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return l._handleCallback(e)}}return _createClass(e,[{key:"apply",value:function(){var e,t,i;e=this._element,t="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(i=nE(e,"").trim()).length&&(function(e,t){for(var i=0;i<e.length;i++)e.charAt(i)}(i),t="".concat(i,", ").concat(t)),iE(e,"",t),tE(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){ZS(this._element,this._name,"paused")}},{key:"resume",value:function(){ZS(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=$S(this._element,this._name);this._position=e*this._duration,iE(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),tE(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){var i=nE(e,"").split(","),n=eE(i,t);n>=0&&(i.splice(n,1),iE(e,"",i.join(",")))}(this._element,this._name))}}]),e}();function ZS(e,t,i){iE(e,"PlayState",i,$S(e,t))}function $S(e,t){var i=nE(e,"");return i.indexOf(",")>0?eE(i.split(","),t):eE([i],t)}function eE(e,t){for(var i=0;i<e.length;i++)if(e[i].indexOf(t)>=0)return i;return-1}function tE(e,t,i){i?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function iE(e,t,i,n){var r="animation"+t;if(null!=n){var a=e.style[r];if(a.length){var o=a.split(",");o[n]=i,i=o.join(",")}}e.style[r]=i}function nE(e,t){return e.style["animation"+t]}var rE=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this.element=t,this.keyframes=i,this.animationName=n,this._duration=r,this._delay=a,this._finalStyles=s,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+a,this._buildStyler()}return _createClass(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new QS(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return e.finish()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var i=this._state>=3;Object.keys(this._finalStyles).forEach((function(n){"offset"!=n&&(t[n]=i?e._finalStyles[n]:Q_(e.element,n))}))}this.currentSnapshot=t}}]),e}(),aE=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this)).element=e,r._startingStyles={},r.__initialized=!1,r._styles=O_(n),r}return _createClass(i,[{key:"init",value:function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(t){e._startingStyles[t]=e.element.style[t]})),_get(_getPrototypeOf(i.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(t){return e.element.style.setProperty(t,e._styles[t])})),_get(_getPrototypeOf(i.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(t){var i=e._startingStyles[t];i?e.element.style.setProperty(t,i):e.element.style.removeProperty(t)})),this._startingStyles=null,_get(_getPrototypeOf(i.prototype),"destroy",this).call(this))}}]),i}(l_),oE=function(){function e(){_classCallCheck2(this,e),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return S_(e)}},{key:"matchesElement",value:function(e,t){return E_(e,t)}},{key:"containsElement",value:function(e,t){return T_(e,t)}},{key:"query",value:function(e,t,i){return A_(e,t,i)}},{key:"computeStyle",value:function(e,t,i){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,i){i=i.map((function(e){return O_(e)}));var n="@keyframes ".concat(t," {\n"),r="";i.forEach((function(e){r=" ";var t=parseFloat(e.offset);n+="".concat(r).concat(100*t,"% {\n"),r+=" ",Object.keys(e).forEach((function(t){var i=e[t];switch(t){case"offset":return;case"easing":return void(i&&(n+="".concat(r,"animation-timing-function: ").concat(i,";\n")));default:return void(n+="".concat(r).concat(t,": ").concat(i,";\n"))}})),n+=r+"}\n"})),n+="}\n";var a=document.createElement("style");return a.innerHTML=n,a}},{key:"animate",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;o&&this._notifyFaultyScrubber();var s=a.filter((function(e){return e instanceof rE})),l={};K_(i,n)&&s.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return l[e]=t[e]}))}));var c=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach((function(e){Object.keys(e).forEach((function(i){"offset"!=i&&"easing"!=i&&(t[i]=e[i])}))})),t}(t=X_(e,t,l));if(0==i)return new aE(e,c);var u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,u,t);document.querySelector("head").appendChild(h);var d=YS(e,t),p=new rE(e,t,u,i,n,r,c,d);return p.onDestroy((function(){var e;(e=h).parentNode.removeChild(e)})),p}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),e}(),sE=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.element=t,this.keyframes=i,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return e._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,i){return e.animate(t,i)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(i){"offset"!=i&&(t[i]=e._finished?e._finalKeyframe[i]:Q_(e.element,i))})),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),e}(),lE=function(){function e(){_classCallCheck2(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(cE().toString()),this._cssKeyframesDriver=new oE}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return S_(e)}},{key:"matchesElement",value:function(e,t){return E_(e,t)}},{key:"containsElement",value:function(e,t){return T_(e,t)}},{key:"query",value:function(e,t,i){return A_(e,t,i)}},{key:"computeStyle",value:function(e,t,i){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,n,r,a);var s={duration:i,delay:n,fill:0==n?"both":"forwards"};r&&(s.easing=r);var l={},c=a.filter((function(e){return e instanceof sE}));K_(i,n)&&c.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return l[e]=t[e]}))}));var u=YS(e,t=X_(e,t=t.map((function(e){return N_(e,!1)})),l));return new sE(e,t,s,u)}}]),e}();function cE(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var uE,hE=((uE=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this))._nextAnimationId=0,r._renderer=e.createRenderer(n.body,{id:"0",encapsulation:pt.None,styles:[],data:{animation:[]}}),r}return _createClass(i,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var i=Array.isArray(e)?n_(e):e;return fE(this._renderer,null,t,"register",[i]),new dE(t,this._renderer)}}]),i}(e_)).\u0275fac=function(e){return new(e||uE)(Ze(tl),Ze(Su))},uE.\u0275prov=pe({token:uE,factory:uE.\u0275fac}),uE),dE=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this))._id=e,r._renderer=n,r}return _createClass(i,[{key:"create",value:function(e,t){return new pE(this._id,e,t||{},this._renderer)}}]),i}(function(){return function e(){_classCallCheck2(this,e)}}()),pE=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.id=t,this.element=i,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return _createClass(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return fE(this._renderer,this.element,this.id,e,i)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){return 0}}]),e}();function fE(e,t,i,n,r){return e.setProperty(t,"@@".concat(i,":").concat(n),r)}var vE,mE,gE,yE,bE=((vE=function(){function e(t,i,n){_classCallCheck2(this,e),this.delegate=t,this.engine=i,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return _createClass(e,[{key:"createRenderer",value:function(e,t){var i=this,n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var r=this._rendererCache.get(n);return r||(r=new kE("",n,this.engine),this._rendererCache.set(n,r)),r}var a=t.id,o=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(o,e),t.data.animation.forEach((function t(n){Array.isArray(n)?n.forEach(t):i.engine.registerTrigger(a,o,e,n.name,n)})),new CE(this,o,n,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then((function(){e._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(e,t,i){var n=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return t(i)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){n._zone.run((function(){n._animationCallbacksBuffer.forEach((function(e){var t=_slicedToArray(e,2);(0,t[0])(t[1])})),n._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([t,i]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}()).\u0275fac=function(e){return new(e||vE)(Ze(tl),Ze(GS),Ze(Wc))},vE.\u0275prov=pe({token:vE,factory:vE.\u0275fac}),vE),kE=function(){function e(t,i,n){_classCallCheck2(this,e),this.namespaceId=t,this.delegate=i,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(e){return i.destroyNode(e)}:null}return _createClass(e,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,i){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,!0)}},{key:"removeChild",value:function(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,i,n){this.delegate.setAttribute(e,t,i,n)}},{key:"removeAttribute",value:function(e,t,i){this.delegate.removeAttribute(e,t,i)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,i,n){this.delegate.setStyle(e,t,i,n)}},{key:"removeStyle",value:function(e,t,i){this.delegate.removeStyle(e,t,i)}},{key:"setProperty",value:function(e,t,i){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,i){return this.delegate.listen(e,t,i)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}},{key:"data",get:function(){return this.delegate.data}}]),e}(),CE=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this,n,r,a)).factory=e,o.namespaceId=n,o}return _createClass(i,[{key:"setProperty",value:function(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}},{key:"listen",value:function(e,t,i){var n,r,a=this;if("@"==t.charAt(0)){var o,s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),l=t.substr(1),c="";return"@"!=l.charAt(0)&&(r=(n=l).indexOf("."),l=(o=_slicedToArray([n.substring(0,r),n.substr(r+1)],2))[0],c=o[1]),this.engine.listen(this.namespaceId,s,l,c,(function(e){a.factory.scheduleListenerCallback(e._data||-1,i,e)}))}return this.delegate.listen(e,t,i)}}]),i}(kE),wE=((mE=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){return _classCallCheck2(this,i),t.call(this,e.body,n,r)}return i}(GS)).\u0275fac=function(e){return new(e||mE)(Ze(Su),Ze(D_),Ze(bS))},mE.\u0275prov=pe({token:mE,factory:mE.\u0275fac}),mE),_E=new qe("AnimationModuleType"),SE=[{provide:e_,useClass:hE},{provide:bS,useFactory:function(){return new kS}},{provide:GS,useClass:wE},{provide:tl,useFactory:function(e,t,i){return new bE(e,t,i)},deps:[Dd,GS,Wc]}],EE=[{provide:D_,useFactory:function(){return"function"==typeof cE()?new lE:new oE}},{provide:_E,useValue:"BrowserAnimations"}].concat(SE),TE=[{provide:D_,useClass:I_},{provide:_E,useValue:"NoopAnimations"}].concat(SE),AE=((yE=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:yE}),yE.\u0275inj=ve({factory:function(e){return new(e||yE)},providers:EE,imports:[zd]}),yE),OE=((gE=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:gE}),gE.\u0275inj=ve({factory:function(e){return new(e||gE)},providers:TE,imports:[zd]}),gE),xE=["*",[["mat-option"],["ng-container"]]],IE=["*","mat-option, ng-container"];function DE(e,t){if(1&e&&Uo(0,"mat-pseudo-checkbox",3),2&e){var i=$o();Bo("state",i.selected?"checked":"unchecked")("disabled",i.disabled)}}var RE,PE=["*"],ME=new ol("9.2.4"),LE=new qe("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),NE=((RE=function(){function e(t,i,n){_classCallCheck2(this,e),this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(e,[{key:"_getDocument",value:function(){var e=this._document||document;return"object"==typeof e&&e?e:null}},{key:"_getWindow",value:function(){var e=this._getDocument(),t=(null==e?void 0:e.defaultView)||window;return"object"==typeof t&&t?t:null}},{key:"_checksAreEnabled",value:function(){return xn()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var e=this._getWindow();return e&&(e.__karma__||e.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){var e=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),t=this._getDocument();e&&t&&!t.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){var e=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,t=this._getDocument();if(!e&&t&&t.body&&"function"==typeof getComputedStyle){var i=t.createElement("div");i.classList.add("mat-theme-loaded-marker"),t.body.appendChild(i);var n=getComputedStyle(i);n&&"none"!==n.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.body.removeChild(i)}}},{key:"_checkCdkVersionMatch",value:function(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ME.full!==$w.full&&console.warn("The Angular Material version ("+ME.full+") does not match the Angular CDK version ("+$w.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),e}()).\u0275mod=Ct({type:RE}),RE.\u0275inj=ve({factory:function(e){return new(e||RE)(Ze(Zw),Ze(LE,8),Ze(Su,8))},imports:[[vC],vC]}),RE);function FE(e){return function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;_classCallCheck2(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._disabled=!1,e}return _createClass(i,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=uk(e)}}]),i}(e)}function BE(e,t){return function(e){_inherits(n,e);var i=_createSuper(n);function n(){var e;_classCallCheck2(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=i.call.apply(i,[this].concat(a))).color=t,e}return _createClass(n,[{key:"color",get:function(){return this._color},set:function(e){var i=e||t;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),i&&this._elementRef.nativeElement.classList.add("mat-"+i),this._color=i)}}]),n}(e)}function VE(e){return function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;_classCallCheck2(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._disableRipple=!1,e}return _createClass(i,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(e){this._disableRipple=uk(e)}}]),i}(e)}function jE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){_inherits(n,e);var i=_createSuper(n);function n(){var e;_classCallCheck2(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=i.call.apply(i,[this].concat(a)))._tabIndex=t,e}return _createClass(n,[{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=null!=e?e:t}}]),n}(e)}try{"undefined"!=typeof Intl}catch(H$){!1}var HE,UE,qE,WE,zE,GE,YE,KE=((HE=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"isErrorState",value:function(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}]),e}()).\u0275fac=function(e){return new(e||HE)},HE.\u0275prov=pe({factory:function(){return new HE},token:HE,providedIn:"root"}),HE),XE=function(){function e(t,i,n){_classCallCheck2(this,e),this._renderer=t,this.element=i,this.config=n,this.state=3}return _createClass(e,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),e}(),JE={enterDuration:450,exitDuration:400},QE=rC({passive:!0}),ZE=["mousedown","touchstart"],$E=["mouseup","mouseleave","touchend","touchcancel"],eT=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._target=t,this._ngZone=i,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=fk(n))}return _createClass(e,[{key:"fadeInRipple",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},JE),n.animation);n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);var o=n.radius||function(e,t,i){var n=Math.max(Math.abs(e-i.left),Math.abs(e-i.right)),r=Math.max(Math.abs(t-i.top),Math.abs(t-i.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),s=e-r.left,l=t-r.top,c=a.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=s-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=c+"ms",this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";var h=new XE(this,u,n);return h.state=0,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var e=h===i._mostRecentTransientRipple;h.state=1,n.persistent||e&&i._isPointerDown||h.fadeOut()}),c),h}},{key:"fadeOutRipple",value:function(e){var t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),t){var i=e.element,n=Object.assign(Object.assign({},JE),e.config.animation);i.style.transitionDuration=n.exitDuration+"ms",i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone((function(){e.state=3,i.parentNode.removeChild(i)}),n.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(e){return e.fadeOut()}))}},{key:"setupTriggerEvents",value:function(e){var t=fk(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(ZE))}},{key:"handleEvent",value:function(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents($E),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(e){var t=zw(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||t||i||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(e){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var t=e.changedTouches,i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach((function(e){!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()})))}},{key:"_runTimeoutOutsideZone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(e,t)}))}},{key:"_registerEvents",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){e.forEach((function(e){t._triggerElement.addEventListener(e,t,QE)}))}))}},{key:"_removeTriggerEvents",value:function(){var e=this;this._triggerElement&&(ZE.forEach((function(t){e._triggerElement.removeEventListener(t,e,QE)})),this._pointerUpEventsRegistered&&$E.forEach((function(t){e._triggerElement.removeEventListener(t,e,QE)})))}}]),e}(),tT=new qe("mat-ripple-global-options"),iT=((zE=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new eT(this,i,t,n)}return _createClass(e,[{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}}]),e}()).\u0275fac=function(e){return new(e||zE)(Lo($s),Lo(Wc),Lo(iC),Lo(tT,8),Lo(_E,8))},zE.\u0275dir=_t({type:zE,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,t){2&e&&hs("mat-ripple-unbounded",t.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),zE),nT=((WE=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:WE}),WE.\u0275inj=ve({factory:function(e){return new(e||WE)},imports:[[NE,nC],NE]}),WE),rT=((qE=function e(t){_classCallCheck2(this,e),this._animationMode=t,this.state="unchecked",this.disabled=!1}).\u0275fac=function(e){return new(e||qE)(Lo(_E,8))},qE.\u0275cmp=gt({type:qE,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,t){2&e&&hs("mat-pseudo-checkbox-indeterminate","indeterminate"===t.state)("mat-pseudo-checkbox-checked","checked"===t.state)("mat-pseudo-checkbox-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),qE),aT=((UE=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:UE}),UE.\u0275inj=ve({factory:function(e){return new(e||UE)}}),UE),oT=FE((function e(){_classCallCheck2(this,e)})),sT=0,lT=((GE=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck2(this,i),(e=t.apply(this,arguments))._labelId="mat-optgroup-label-"+sT++,e}return i}(oT)).\u0275fac=function(e){return cT(e||GE)},GE.\u0275cmp=gt({type:GE,selectors:[["mat-optgroup"]],hostAttrs:["role","group",1,"mat-optgroup"],hostVars:4,hostBindings:function(e,t){2&e&&(Do("aria-disabled",t.disabled.toString())("aria-labelledby",t._labelId),hs("mat-optgroup-disabled",t.disabled))},inputs:{disabled:"disabled",label:"label"},exportAs:["matOptgroup"],features:[Ps],ngContentSelectors:IE,decls:4,vars:2,consts:[[1,"mat-optgroup-label",3,"id"]],template:function(e,t){1&e&&(ts(xE),jo(0,"label",0),Ss(1),is(2),Ho(),is(3,1)),2&e&&(Bo("id",t._labelId),_r(1),Ts("",t.label," "))},styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px;vertical-align:middle}.mat-optgroup-label .mat-icon svg{vertical-align:top}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),GE),cT=pn(lT),uT=0,hT=function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck2(this,e),this.source=t,this.isUserInput=i},dT=new qe("MAT_OPTION_PARENT_COMPONENT"),pT=((YE=function(){function e(t,i,n,r){_classCallCheck2(this,e),this._element=t,this._changeDetectorRef=i,this._parent=n,this.group=r,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+uT++,this.onSelectionChange=new ec,this._stateChanges=new x}return _createClass(e,[{key:"select",value:function(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}},{key:"focus",value:function(e,t){var i=this._getHostElement();"function"==typeof i.focus&&i.focus(t)}},{key:"setActiveStyles",value:function(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}},{key:"setInactiveStyles",value:function(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}},{key:"getLabel",value:function(){return this.viewValue}},{key:"_handleKeydown",value:function(e){13!==e.keyCode&&32!==e.keyCode||MC(e)||(this._selectViaInteraction(),e.preventDefault())}},{key:"_selectViaInteraction",value:function(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}},{key:"_getAriaSelected",value:function(){return this.selected||!this.multiple&&null}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._element.nativeElement}},{key:"ngAfterViewChecked",value:function(){if(this._selected){var e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_emitSelectionChangeEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onSelectionChange.emit(new hT(this,e))}},{key:"multiple",get:function(){return this._parent&&this._parent.multiple}},{key:"selected",get:function(){return this._selected}},{key:"disabled",get:function(){return this.group&&this.group.disabled||this._disabled},set:function(e){this._disabled=uk(e)}},{key:"disableRipple",get:function(){return this._parent&&this._parent.disableRipple}},{key:"active",get:function(){return this._active}},{key:"viewValue",get:function(){return(this._getHostElement().textContent||"").trim()}}]),e}()).\u0275fac=function(e){return new(e||YE)(Lo($s),Lo(Qa),Lo(dT,8),Lo(lT,8))},YE.\u0275cmp=gt({type:YE,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,t){1&e&&Ko("click",(function(){return t._selectViaInteraction()}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&(Is("id",t.id),Do("tabindex",t._getTabIndex())("aria-selected",t._getAriaSelected())("aria-disabled",t.disabled.toString()),hs("mat-selected",t.selected)("mat-option-multiple",t.multiple)("mat-active",t.active)("mat-option-disabled",t.disabled))},inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:PE,decls:4,vars:3,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"]],template:function(e,t){1&e&&(ts(),Po(0,DE,1,2,"mat-pseudo-checkbox",0),jo(1,"span",1),is(2),Ho(),Uo(3,"div",2)),2&e&&(Bo("ngIf",t.multiple),_r(3),Bo("matRippleTrigger",t._getHostElement())("matRippleDisabled",t.disabled||t.disableRipple))},directives:[Dh,iT,rT],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.cdk-high-contrast-active .mat-option .mat-option-ripple{opacity:.5}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),YE);function fT(e,t,i){if(i.length){for(var n=t.toArray(),r=i.toArray(),a=0,o=0;o<e+1;o++)n[o].group&&n[o].group===r[a]&&a++;return a}return 0}function vT(e,t,i,n){var r=e*t;return r<i?r:r+t>i+n?Math.max(0,r-n+t):i}var mT,gT=((mT=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:mT}),mT.\u0275inj=ve({factory:function(e){return new(e||mT)},imports:[[nT,id,aT]]}),mT),yT=new qe("mat-label-global-options");function bT(e,t){}var kT=function e(){_classCallCheck2(this,e),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0},CT={dialogContainer:t_("dialogContainer",[a_("void, exit",r_({opacity:0,transform:"scale(0.7)"})),a_("enter",r_({transform:"none"})),o_("* => enter",i_("150ms cubic-bezier(0, 0, 0.2, 1)",r_({transform:"none",opacity:1}))),o_("* => void, * => exit",i_("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",r_({opacity:0})))])};function wT(){throw Error("Attempting to attach dialog content after content is already attached")}var _T,ST,ET,TT,AT,OT=((_T=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o){var s;return _classCallCheck2(this,i),(s=t.call(this))._elementRef=e,s._focusTrapFactory=n,s._changeDetectorRef=r,s._config=o,s._elementFocusedBeforeDialogWasOpened=null,s._state="enter",s._animationStateChanged=new ec,s.attachDomPortal=function(e){return s._portalOutlet.hasAttached()&&wT(),s._setupFocusTrap(),s._portalOutlet.attachDomPortal(e)},s._ariaLabelledBy=o.ariaLabelledBy||null,s._document=a,s}return _createClass(i,[{key:"attachComponentPortal",value:function(e){return this._portalOutlet.hasAttached()&&wT(),this._setupFocusTrap(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._portalOutlet.hasAttached()&&wT(),this._setupFocusTrap(),this._portalOutlet.attachTemplatePortal(e)}},{key:"_recaptureFocus",value:function(){this._containsFocus()||this._focusTrap.focusInitialElement()||this._elementRef.nativeElement.focus()}},{key:"_trapFocus",value:function(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}},{key:"_restoreFocus",value:function(){var e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){var t=this._document.activeElement,i=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==i&&!i.contains(t)||e.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_setupFocusTrap",value:function(){var e=this;this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then((function(){return e._elementRef.nativeElement.focus()})))}},{key:"_containsFocus",value:function(){var e=this._elementRef.nativeElement,t=this._document.activeElement;return e===t||e.contains(t)}},{key:"_onAnimationDone",value:function(e){"enter"===e.toState?this._trapFocus():"exit"===e.toState&&this._restoreFocus(),this._animationStateChanged.emit(e)}},{key:"_onAnimationStart",value:function(e){this._animationStateChanged.emit(e)}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),i}(xC)).\u0275fac=function(e){return new(e||_T)(Lo($s),Lo(jw),Lo(Qa),Lo(Su,8),Lo(kT))},_T.\u0275cmp=gt({type:_T,selectors:[["mat-dialog-container"]],viewQuery:function(e,t){var i;1&e&&dc(DC,!0),2&e&&hc(i=yc())&&(t._portalOutlet=i.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,t){1&e&&Xo("@dialogContainer.start",(function(e){return t._onAnimationStart(e)}))("@dialogContainer.done",(function(e){return t._onAnimationDone(e)})),2&e&&(Do("id",t._id)("role",t._config.role)("aria-labelledby",t._config.ariaLabel?null:t._ariaLabelledBy)("aria-label",t._config.ariaLabel)("aria-describedby",t._config.ariaDescribedBy||null),Ds("@dialogContainer",t._state))},features:[Ps],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&Po(0,bT,0,0,"ng-template",0)},directives:[DC],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[CT.dialogContainer]}}),_T),xT=0,IT=function(){function e(t,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mat-dialog-"+xT++;_classCallCheck2(this,e),this._overlayRef=t,this._containerInstance=i,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new x,this._afterClosed=new x,this._beforeClosed=new x,this._state=0,i._id=r,i._animationStateChanged.pipe(np((function(e){return"done"===e.phaseName&&"enter"===e.toState})),Cp(1)).subscribe((function(){n._afterOpened.next(),n._afterOpened.complete()})),i._animationStateChanged.pipe(np((function(e){return"done"===e.phaseName&&"exit"===e.toState})),Cp(1)).subscribe((function(){clearTimeout(n._closeFallbackTimeout),n._finishDialogClose()})),t.detachments().subscribe((function(){n._beforeClosed.next(n._result),n._beforeClosed.complete(),n._afterClosed.next(n._result),n._afterClosed.complete(),n.componentInstance=null,n._overlayRef.dispose()})),t.keydownEvents().pipe(np((function(e){return 27===e.keyCode&&!n.disableClose&&!MC(e)}))).subscribe((function(e){e.preventDefault(),n.close()})),t.backdropClick().subscribe((function(){n.disableClose?n._containerInstance._recaptureFocus():n.close()}))}return _createClass(e,[{key:"close",value:function(e){var t=this;this._result=e,this._containerInstance._animationStateChanged.pipe(np((function(e){return"start"===e.phaseName})),Cp(1)).subscribe((function(i){t._beforeClosed.next(e),t._beforeClosed.complete(),t._overlayRef.detachBackdrop(),t._closeFallbackTimeout=setTimeout((function(){return t._finishDialogClose()}),i.totalTime+100)})),this._containerInstance._startExitAnimation(),this._state=1}},{key:"afterOpened",value:function(){return this._afterOpened.asObservable()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"beforeClosed",value:function(){return this._beforeClosed.asObservable()}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(e){var t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(e).height(t),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(e){return this._overlayRef.addPanelClass(e),this}},{key:"removePanelClass",value:function(e){return this._overlayRef.removePanelClass(e),this}},{key:"getState",value:function(){return this._state}},{key:"_finishDialogClose",value:function(){this._state=2,this._overlayRef.dispose()}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),e}(),DT=new qe("MatDialogData"),RT=new qe("mat-dialog-default-options"),PT=new qe("mat-dialog-scroll-strategy"),MT={provide:PT,deps:[fw],useFactory:function(e){return function(){return e.scrollStrategies.block()}}},LT=((AT=function(){function e(t,i,n,r,a,o,s){var l=this;_classCallCheck2(this,e),this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new x,this._afterOpenedAtThisLevel=new x,this._ariaHiddenElements=new Map,this.afterAllClosed=tp((function(){return l.openDialogs.length?l._afterAllClosed:l._afterAllClosed.pipe(Dp(void 0))})),this._scrollStrategy=a}return _createClass(e,[{key:"open",value:function(e,t){var i=this;if((t=function(e,t){return Object.assign(Object.assign({},t),e)}(t,this._defaultOptions||new kT)).id&&this.getDialogById(t.id))throw Error('Dialog with id "'.concat(t.id,'" exists already. The dialog id must be unique.'));var n=this._createOverlay(t),r=this._attachDialogContainer(n,t),a=this._attachDialogContent(e,r,n,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.afterClosed().subscribe((function(){return i._removeOpenDialog(a)})),this.afterOpened.next(a),a}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(e){return this.openDialogs.find((function(t){return t.id===e}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(e){var t=this._getOverlayConfig(e);return this._overlay.create(t)}},{key:"_getOverlayConfig",value:function(e){var t=new WC({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}},{key:"_attachDialogContainer",value:function(e,t){var i=fo.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:kT,useValue:t}]}),n=new TC(OT,t.viewContainerRef,i,t.componentFactoryResolver);return e.attach(n).instance}},{key:"_attachDialogContent",value:function(e,t,i,n){var r=new IT(i,t,n.id);if(e instanceof _l)t.attachTemplatePortal(new AC(e,null,{$implicit:n.data,dialogRef:r}));else{var a=this._createInjector(n,r,t),o=t.attachComponentPortal(new TC(e,n.viewContainerRef,a));r.componentInstance=o.instance}return r.updateSize(n.width,n.height).updatePosition(n.position),r}},{key:"_createInjector",value:function(e,t,i){var n=e&&e.viewContainerRef&&e.viewContainerRef.injector,r=[{provide:OT,useValue:i},{provide:DT,useValue:e.data},{provide:IT,useValue:t}];return!e.direction||n&&n.get(fC,null)||r.push({provide:fC,useValue:{value:e.direction,change:Gd()}}),fo.create({parent:n||this._injector,providers:r})}},{key:"_removeOpenDialog",value:function(e){var t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(e,t){e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var e=this._overlayContainer.getContainerElement();if(e.parentElement)for(var t=e.parentElement.children,i=t.length-1;i>-1;i--){var n=t[i];n===e||"SCRIPT"===n.nodeName||"STYLE"===n.nodeName||n.hasAttribute("aria-live")||(this._ariaHiddenElements.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(e){for(var t=e.length;t--;)e[t].close()}},{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}},{key:"_afterAllClosed",get:function(){var e=this._parentDialog;return e?e._afterAllClosed:this._afterAllClosedAtThisLevel}}]),e}()).\u0275fac=function(e){return new(e||AT)(Ze(fw),Ze(fo),Ze(Wu,8),Ze(RT,8),Ze(PT),Ze(AT,12),Ze($C))},AT.\u0275prov=pe({token:AT,factory:AT.\u0275fac}),AT),NT=((TT=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:TT}),TT.\u0275inj=ve({factory:function(e){return new(e||TT)},providers:[LT,MT],imports:[[kw,RC,NE],NE]}),TT),FT=((ET=function(){function e(t,i){_classCallCheck2(this,e),this.httpService=t,this.loginService=i,this.studentProfile=new cb,this.bookingList=[],this.approvedList=[],this.liveMeetingList=[],this.approvedBookingsChanged=new x,this.bookingsChanged=new x,this.liveMeetingsChanged=new x}return _createClass(e,[{key:"setPendingBookings",value:function(e){this.bookingList=e,this.bookingsChanged.next(this.bookingList.slice())}},{key:"getPendingBookings",value:function(){return this.bookingList.slice()}},{key:"setApprovedBookings",value:function(e){this.approvedList=e,this.approvedBookingsChanged.next(this.approvedList.slice())}},{key:"getApprovedBookings",value:function(){return this.approvedList.slice()}},{key:"setLiveBookings",value:function(e){this.liveMeetingList=e,this.liveMeetingsChanged.next(this.liveMeetingList.slice())}},{key:"getLiveBookings",value:function(){return this.liveMeetingList.slice()}},{key:"setProfileCompleted",value:function(e){this.profileCompleted=e}},{key:"getProfileCompleted",value:function(){return this.profileCompleted}},{key:"setEditFuntion",value:function(e){this.editVariable=e}},{key:"getEditFunction",value:function(){return this.editVariable}},{key:"setStudentProfileDetails",value:function(e){this.studentProfile=e}},{key:"getStudentProfileDetails",value:function(){return this.studentProfile}},{key:"setStudentBookings",value:function(e){this.studentBookings=e,this.manipulateMeetingSchedule()}},{key:"getStudentBookings",value:function(){return this.studentBookings}},{key:"manipulateMeetingSchedule",value:function(){var e,t=_createForOfIteratorHelper(this.studentBookings);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=new Date(i.StartTime.toString()),r=new Date(i.EndTime.toString());i.StartTime=n.toString(),i.EndTime=r.toString(),i.Type="booking"}}catch(a){t.e(a)}finally{t.f()}}},{key:"fetchStudentPendingBookings",value:function(){var e=this;"Learner"==this.loginService.getLoginType()&&this.studentProfile.sid&&this.httpService.findStudentBookings(this.studentProfile.sid).subscribe((function(t){e.setPendingBookings(t)}))}},{key:"fetchApprovedStudentMeetings",value:function(){var e=this;"Learner"==this.loginService.getLoginType()&&this.studentProfile.sid&&this.httpService.fetchApprovedMeetings(this.studentProfile.sid).subscribe((function(t){e.setApprovedBookings(t)}))}},{key:"fetchLiveMeetings",value:function(){var e=this;"Learner"==this.loginService.getLoginType()&&this.studentProfile.sid&&this.httpService.fetchLiveMeetingsStudent(this.studentProfile.sid).subscribe((function(t){e.setLiveBookings(t)}))}}]),e}()).\u0275fac=function(e){return new(e||ET)(Ze(lk),Ze(gb))},ET.\u0275prov=pe({token:ET,factory:ET.\u0275fac,providedIn:"root"}),ET),BT=((ST=function(){function e(t,i){_classCallCheck2(this,e),this.document=t,this.platformId=i,this.documentIsAccessible=nd(this.platformId)}return _createClass(e,[{key:"check",value:function(e){return!!this.documentIsAccessible&&(e=encodeURIComponent(e),this.getCookieRegExp(e).test(this.document.cookie))}},{key:"get",value:function(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);var t=this.getCookieRegExp(e).exec(this.document.cookie);return this.safeDecodeURIComponent(t[1])}return""}},{key:"getAll",value:function(){var e=this;if(!this.documentIsAccessible)return{};var t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach((function(i){var n=_slicedToArray(i.split("="),2),r=n[0],a=n[1];t[e.safeDecodeURIComponent(r.replace(/^ /,""))]=e.safeDecodeURIComponent(a)})),t}},{key:"set",value:function(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Lax";if(this.documentIsAccessible){var s=encodeURIComponent(e)+"="+encodeURIComponent(t)+";";i&&(s+="number"==typeof i?"expires="+new Date((new Date).getTime()+1e3*i*60*60*24).toUTCString()+";":"expires="+i.toUTCString()+";"),n&&(s+="path="+n+";"),r&&(s+="domain="+r+";"),!1===a&&"None"===o&&(a=!0,console.warn("[ngx-cookie-service] Cookie ".concat(e," was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130"))),a&&(s+="secure;"),s+="sameSite="+o+";",this.document.cookie=s}}},{key:"delete",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Lax";this.documentIsAccessible&&this.set(e,"",new Date("Thu, 01 Jan 1970 00:00:01 GMT"),t,i,n,r)}},{key:"deleteAll",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Lax";if(this.documentIsAccessible){var r=this.getAll();for(var a in r)r.hasOwnProperty(a)&&this.delete(a,e,t,i,n)}}},{key:"getCookieRegExp",value:function(e){var t=e.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}},{key:"safeDecodeURIComponent",value:function(e){try{return decodeURIComponent(e)}catch(H$){return e}}}]),e}()).\u0275fac=function(e){return new(e||ST)(Ze(Su),Ze(Oc))},ST.\u0275prov=pe({factory:function(){return new ST(Ze(Su),Ze(Oc))},token:ST,providedIn:"root"}),ST);function VT(e){return function(t){return t.lift(new qT(e))}}var jT,HT,UT,qT=function(){function e(t){_classCallCheck2(this,e),this.total=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new WT(e,this.total))}}]),e}(),WT=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e)).total=n,r.count=0,r}return _createClass(i,[{key:"_next",value:function(e){++this.count>this.total&&this.destination.next(e)}}]),i}(m),zT=((jT=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:jT}),jT.\u0275inj=ve({factory:function(e){return new(e||jT)}}),jT),GT=new Set,YT=((UT=function(){function t(e){_classCallCheck2(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):KT}return _createClass(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!GT.has(t))try{HT||((HT=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(HT)),HT.sheet&&(HT.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),GT.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}]),t}()).\u0275fac=function(e){return new(e||UT)(Ze(iC))},UT.\u0275prov=pe({factory:function(){return new UT(Ze(iC))},token:UT,providedIn:"root"}),UT);function KT(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var XT,JT=((XT=function(){function e(t,i){_classCallCheck2(this,e),this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new x}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(e){var t=this;return QT(dk(e)).some((function(e){return t._registerQuery(e).mql.matches}))}},{key:"observe",value:function(e){var t=this,i=Jd(QT(dk(e)).map((function(e){return t._registerQuery(e).observable})));return(i=Ip(i.pipe(Cp(1)),i.pipe(VT(1),Cw(0)))).pipe(j((function(e){var t={matches:!1,breakpoints:{}};return e.forEach((function(e){t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches})),t})))}},{key:"_registerQuery",value:function(e){var t=this;if(this._queries.has(e))return this._queries.get(e);var i=this._mediaMatcher.matchMedia(e),n={observable:new _((function(e){var n=function(i){return t._zone.run((function(){return e.next(i)}))};return i.addListener(n),function(){i.removeListener(n)}})).pipe(Dp(i),j((function(t){return{query:e,matches:t.matches}})),Nk(this._destroySubject)),mql:i};return this._queries.set(e,n),n}}]),e}()).\u0275fac=function(e){return new(e||XT)(Ze(YT),Ze(Wc))},XT.\u0275prov=pe({factory:function(){return new XT(Ze(YT),Ze(Wc))},token:XT,providedIn:"root"}),XT);function QT(e){return e.map((function(e){return e.split(",")})).reduce((function(e,t){return e.concat(t)})).map((function(e){return e.trim()}))}var ZT,$T,eA,tA,iA,nA,rA,aA,oA,sA,lA,cA,uA=function e(){_classCallCheck2(this,e)},hA=n("BOF4"),dA=function e(){_classCallCheck2(this,e)},pA=function e(){_classCallCheck2(this,e)},fA=n("dNE1"),vA=n("zH15"),mA=((iA=function(){function e(){_classCallCheck2(this,e),this.chat=[]}return _createClass(e,[{key:"getIdSelected",value:function(){return this.idSelected}},{key:"setIdSelected",value:function(e){this.idSelected=e}},{key:"getChat",value:function(){return this.chat}},{key:"setChat",value:function(e){this.chat.push(e)}}]),e}()).\u0275fac=function(e){return new(e||iA)},iA.\u0275prov=pe({token:iA,factory:iA.\u0275fac,providedIn:"root"}),iA),gA=((tA=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.loginService=t,this.tutorService=i,this.studentService=n,this.httpService=r,this.notificationCount=0,this.notificationList=[],this.notificationsChanged=new x}return _createClass(e,[{key:"increaseNotificationCount",value:function(e){this.notificationCount+=e}},{key:"getNotificationCount",value:function(){return this.notificationCount}},{key:"getNotifications",value:function(){return this.notificationList.slice()}},{key:"setNotification",value:function(e){this.notificationList=e,this.notificationCount=0;var t=0;this.notificationList.forEach((function(e){0==e.readStatus&&t++})),console.log(t),this.increaseNotificationCount(t),this.notificationsChanged.next(this.notificationList.slice())}},{key:"fetchNotification",value:function(){var e=this,t=this.loginService.getLoginType();t&&"Expert"==t?this.userId=this.tutorService.getTutorDetials().bookingId:t&&"Learner"==t&&(this.userId=this.studentService.getStudentProfileDetails().sid),this.userId&&this.httpService.fetchNotifications(this.userId).subscribe((function(t){console.log("notifications:",t),e.setNotification(t)}))}}]),e}()).\u0275fac=function(e){return new(e||tA)(Ze(gb),Ze(ck),Ze(FT),Ze(lk))},tA.\u0275prov=pe({token:tA,factory:tA.\u0275fac,providedIn:"root"}),tA),yA=((eA=function(){function e(t,i,n,r,a,o){_classCallCheck2(this,e),this.loginService=t,this.tutorService=i,this.studentService=n,this.chatService=r,this.notificationService=a,this.zone=o,this.greetings=[]}return _createClass(e,[{key:"connectToUserWebSocket",value:function(e){var t=this,i=new vA("http://localhost:5000/fellowGenius");this.ws=fA.over(i);var n=this;this.ws.connect({},(function(i){t.loginType=t.loginService.getLoginType(),n.ws.subscribe("/errors",(function(e){alert("Error "+e.body)})),n.ws.subscribe("/user/Notifications/"+e,(function(e){console.log(e),"updateNotification"==e.body&&(console.log("message matched"),t.loginType&&"Expert"==t.loginType&&null!=t.tutorService.getTutorDetials().tid?(t.notificationService.fetchNotification(),t.tutorService.fetchTutorPendingBookings()):t.loginType&&"Learner"==t.loginType&&null!=t.studentService.getStudentProfileDetails().sid&&(t.notificationService.fetchNotification(),t.studentService.fetchStudentPendingBookings(),t.studentService.fetchApprovedStudentMeetings()))}))}),(function(i){e&&(console.log("re initiating the connection !"),setTimeout((function(){t.connectToUserWebSocket(e)}),5e3))}))}},{key:"sendAppointmentNotfication",value:function(e,t){this.ws.send("/sendNotification/"+t,{},e)}}]),e}()).\u0275fac=function(e){return new(e||eA)(Ze(gb),Ze(ck),Ze(FT),Ze(mA),Ze(gA),Ze(Wc))},eA.\u0275prov=pe({token:eA,factory:eA.\u0275fac,providedIn:"root"}),eA),bA=(($T=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this.router=t,this.loginDetailsService=i,this.httpService=n,this.studentService=r,this.tutorService=a,this.cookieService=o,this.webSocketService=s,this.notificationService=l,this.authStatusListener=new x,this.socialLogin=new dA,this.isLoading=!1,this.hideSocialLogin="hideBlock",this.hide=!0,this.hideContainer="",this.studentLoginDetails=new hb,this.tutorLoginDetails=new yb,this.tutorAvailabilitySchedule=new pA,this.incorrectLoginDetails=!1,this.loginModel=new uA}return _createClass(e,[{key:"getUserId",value:function(){return this.userId}},{key:"isTokenValid",value:function(){return!(!this.cookieService.get("token")||this.isTokenExpired())||(this.cookieService.delete("token"),this.cookieService.delete("userId"),!1)}},{key:"isTokenExpired",value:function(e){if(e||(e=this.getToken()),!e)return!0;var t=this.getTokenExpirationDate(e);return void 0!==t&&!(t.valueOf()>(new Date).valueOf())}},{key:"getTokenExpirationDate",value:function(e){var t=hA(e);if(void 0===t.exp)return null;var i=new Date(0);return i.setUTCSeconds(t.exp),i}},{key:"getToken",value:function(){return this.cookieService.get("token")}},{key:"toFacade",value:function(){this.router.navigate(["facade"])}},{key:"getAuthStatusListener",value:function(){return this.authStatusListener.asObservable()}},{key:"getIsAuth",value:function(){return this.isAuthenticated}},{key:"autoAuthUser",value:function(){var e=this;this.userId=this.cookieService.get("userId"),"Learner"==hA(this.cookieService.get("token")).ROLE?(this.loginType="Learner",this.loginDetailsService.setTrType("login"),this.loginDetailsService.setLoginType(this.loginType),this.httpService.getStudentDetails(this.userId).subscribe((function(t){e.studentProfile=t,e.studentService.setStudentProfileDetails(e.studentProfile),e.httpService.getStudentSchedule(e.userId).subscribe((function(t){e.studentService.setStudentBookings(t),e.isAuthenticated=!0,e.webSocketService.connectToUserWebSocket(e.userId),e.notificationService.fetchNotification()}))}))):"Expert"==hA(this.cookieService.get("token")).ROLE&&(this.loginType="Expert",this.loginDetailsService.setTrType("login"),this.loginDetailsService.setLoginType(this.loginType),this.httpService.getTutorDetails(this.userId).subscribe((function(t){e.tutorProfile=t,e.tutorService.setTutorDetails(e.tutorProfile),e.httpService.getTutorProfileDetails(e.userId).subscribe((function(t){e.tutorProfileDetails=t,e.tutorService.setTutorProfileDetails(t),e.httpService.getScheduleData(e.tutorProfileDetails.bookingId).subscribe((function(t){e.tutorService.setPersonalAvailabilitySchedule(t),e.isAuthenticated=!0,e.webSocketService.connectToUserWebSocket(e.tutorProfile.bookingId),e.notificationService.fetchNotification()}))}))})))}},{key:"onLogin",value:function(e){var t=this;console.log(e),this.httpService.checkLogin(e).subscribe((function(e){if(console.log("login result->",e),"false"!=e.response){t.cookieService.set("token",e.response),t.cookieService.set("userId",hA(e.response).sub);var i=hA(e.response).ROLE;t.userId=t.cookieService.get("userId"),"Learner"==i?t.httpService.getStudentDetails(t.userId).subscribe((function(e){t.studentProfile=e,t.studentService.setStudentProfileDetails(t.studentProfile),t.loginDetailsService.setTrType("login"),t.loginDetailsService.setLoginType("Learner"),t.httpService.getStudentSchedule(t.studentProfile.sid).subscribe((function(e){t.studentService.setStudentBookings(e),t.isLoading=!1,t.webSocketService.connectToUserWebSocket(t.userId),t.isAuthenticated=!0,t.authStatusListener.next(!0),t.notificationService.fetchNotification()}))})):"Expert"==i&&t.httpService.getTutorDetails(t.userId).subscribe((function(e){t.tutorProfile=e,t.tutorService.setTutorDetails(t.tutorProfile),t.httpService.getTutorProfileDetails(t.tutorProfile.tid).subscribe((function(e){t.tutorProfileDetails=e,t.tutorService.setTutorProfileDetails(t.tutorProfileDetails),t.httpService.getScheduleData(t.tutorProfile.bookingId).subscribe((function(e){t.tutorAvailabilitySchedule=e,t.tutorService.setPersonalAvailabilitySchedule(t.tutorAvailabilitySchedule),t.loginDetailsService.setTrType("login"),t.loginDetailsService.setLoginType("Expert"),t.isLoading=!1,t.isAuthenticated=!0,t.authStatusListener.next(!0),t.webSocketService.connectToUserWebSocket(t.tutorProfile.bookingId),t.notificationService.fetchNotification()}))}))}))}else t.authStatusListener.next(!1),t.isAuthenticated=!1}))}},{key:"onSignUp",value:function(e){var t=this;this.httpService.registerUser(e).subscribe((function(i){1==i?(t.loginModel.email=e.email,t.loginModel.password=e.password,console.log("login model in auth=>",t.loginModel),t.httpService.checkLogin(t.loginModel).subscribe((function(i){t.cookieService.set("token",i.response),t.cookieService.set("userId",hA(i.response).sub),t.userId=t.cookieService.get("userId"),"Learner"==e.role?t.httpService.getStudentDetails(t.userId).subscribe((function(e){t.studentProfile=e,t.studentService.setStudentProfileDetails(t.studentProfile),t.loginDetailsService.setLoginType("Learner"),t.loginDetailsService.setTrType("signUp"),t.isAuthenticated=!0,t.authStatusListener.next(!0),t.webSocketService.connectToUserWebSocket(t.userId),t.notificationService.fetchNotification()})):"Expert"==e.role&&t.httpService.getTutorDetails(t.userId).subscribe((function(e){t.tutorProfile=e,t.tutorService.setTutorDetails(t.tutorProfile),t.httpService.getTutorProfileDetails(t.tutorProfile.tid).subscribe((function(e){t.tutorService.setTutorProfileDetails(e),t.httpService.getScheduleData(t.tutorProfile.bookingId).subscribe((function(e){t.tutorAvailabilitySchedule=e,t.tutorService.setPersonalAvailabilitySchedule(t.tutorAvailabilitySchedule),t.loginDetailsService.setLoginType("Expert"),t.loginDetailsService.setTrType("signUp"),t.isAuthenticated=!0,t.authStatusListener.next(!0),t.webSocketService.connectToUserWebSocket(t.tutorProfile.bookingId),t.notificationService.fetchNotification()}))}))}))}))):0==i&&(t.authStatusListener.next(!1),t.isAuthenticated=!1)}))}},{key:"saveSocialLogin",value:function(e){var t=this;console.log(e),this.httpService.registerUser(e).subscribe((function(i){1==i&&(t.loginModel.email=e.email,t.loginModel.password=e.password,t.httpService.checkLogin(t.loginModel).subscribe((function(i){t.cookieService.set("token",i.response),t.cookieService.set("userId",hA(i.response).sub),t.userId=t.cookieService.get("userId"),"Learner"==e.role?t.httpService.getStudentDetails(t.userId).subscribe((function(e){t.studentProfile=e,t.studentService.setStudentProfileDetails(t.studentProfile),t.loginDetailsService.setLoginType("Learner"),t.loginDetailsService.setTrType("signUp"),t.isAuthenticated=!0,t.authStatusListener.next(!0),t.webSocketService.connectToUserWebSocket(t.userId),t.notificationService.fetchNotification()})):"Expert"==e.role&&t.httpService.getTutorDetails(t.userId).subscribe((function(e){t.tutorProfile=e,t.tutorService.setTutorDetails(t.tutorProfile),t.httpService.getTutorProfileDetails(t.tutorProfile.tid).subscribe((function(e){t.tutorService.setTutorProfileDetails(e),t.httpService.getScheduleData(t.tutorProfile.bookingId).subscribe((function(e){t.tutorAvailabilitySchedule=e,t.tutorService.setPersonalAvailabilitySchedule(t.tutorAvailabilitySchedule),t.loginDetailsService.setLoginType("Expert"),t.loginDetailsService.setTrType("signUp"),t.isAuthenticated=!0,t.authStatusListener.next(!0),t.webSocketService.connectToUserWebSocket(t.tutorProfile.bookingId),t.notificationService.fetchNotification()}))}))}))}))),t.isAuthenticated=!1,t.authStatusListener.next(!1)}))}}]),e}()).\u0275fac=function(e){return new(e||$T)(Ze(cm),Ze(gb),Ze(lk),Ze(FT),Ze(ck),Ze(BT),Ze(yA),Ze(gA))},$T.\u0275prov=pe({token:$T,factory:$T.\u0275fac,providedIn:"root"}),$T),kA=((ZT=function(){function e(t,i,n,r,a,o,s,l,c,u){_classCallCheck2(this,e),this.router=t,this.meetingService=i,this.loginService=n,this.tutorService=r,this.dialog=a,this.httpService=o,this.studentService=s,this.cookieService=l,this.breakpointObserver=c,this.authService=u,this.checked=!1,this.studentProfile=new cb,this.tutorProfile=new ub,this.tutorProfileDetails=new db,this.studentLoginDetails=new hb,this.myControl=new xy,this.profilePictureUrl="../../../assets/images/default-user-image.png"}return _createClass(e,[{key:"ngOnInit",value:function(){this.authService.isTokenValid()&&(this.loginType=this.loginService.getLoginType(),this.loginType?this.authService.autoAuthUser():this.handleRefresh())}},{key:"handleRefresh",value:function(){this.authService.autoAuthUser()}}]),e}()).\u0275fac=function(e){return new(e||ZT)(Lo(cm),Lo(mb),Lo(gb),Lo(ck),Lo(LT),Lo(lk),Lo(FT),Lo(BT),Lo(JT),Lo(bA))},ZT.\u0275cmp=gt({type:ZT,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&Uo(0,"router-outlet")},directives:[km],styles:[".e-schedule-dialog[_ngcontent-%COMP%]   .e-numeric.e-control-wrapper.e-input-group[_ngcontent-%COMP%]   .e-input-group-icon[_ngcontent-%COMP%]{pointer-events:none}.e-schedule-dialog[_ngcontent-%COMP%]   .e-all-day-time-zone-row[_ngcontent-%COMP%]{display:none}"]}),ZT),CA=n("a1+y"),wA=((rA=function(){function e(t){_classCallCheck2(this,e),this.config=t,this.audioDevices=[],this.videoDevices=[],this.AgoraRTC=e.AgoraRTC,this.checkSystemRequirements()?this.collectDevices():this.AgoraRTC.Logger.error("Web RTC is not supported in this browser")}return _createClass(e,[{key:"checkSystemRequirements",value:function(){return this.AgoraRTC.checkSystemRequirements()}},{key:"createClient",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this.client=this.AgoraRTC.createClient(e),t&&this.init(this.config.AppID,i,n),this.client}},{key:"createStream",value:function(e){if(!e.microphoneId&&this.audioDevices&&this.audioDevices.length&&(e.microphoneId=this.audioDevices[0].deviceId),!e.cameraId&&this.videoDevices&&this.videoDevices.length){var t=this.videoDevices[0].deviceId;e.cameraId=e.cameraId||t}return this.AgoraRTC.createStream(e)}},{key:"init",value:function(e,t,i){this.client.init(e,t,i)}},{key:"collectDevices",value:function(){var e=this;this.AgoraRTC.getDevices((function(t){var i=t.filter((function(e){return"audioinput"===e.kind&&"default"!==e.deviceId})),n=t.filter((function(e){return"videoinput"===e.kind&&"default"!==e.deviceId}));e.audioDevices=i,e.videoDevices=n}))}}]),e}()).\u0275fac=function(e){return new(e||rA)(Ze("config"))},rA.\u0275prov=pe({token:rA,factory:rA.\u0275fac,providedIn:"root"}),rA.AgoraRTC=CA,rA.ngInjectableDef=fe({factory:function(){return new rA($e("config"))},token:rA,providedIn:"root"}),rA),_A=((nA=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[wA,{provide:"config",useValue:t}]}}}]),e}()).\u0275mod=Ct({type:nA}),nA.\u0275inj=ve({factory:function(e){return new(e||nA)}}),nA),SA=function e(t){_classCallCheck2(this,e),this.name=t},EA=((aA=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"setSocialDetails",value:function(e){this.socialDetails=e}},{key:"getSocialDetails",value:function(){return this.socialDetails}}]),e}()).\u0275fac=function(e){return new(e||aA)},aA.\u0275prov=pe({token:aA,factory:aA.\u0275fac,providedIn:"root"}),aA),TA=["input"],AA=function(){return{enterDuration:150}},OA=["*"],xA=new qe("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}}),IA=0,DA={provide:Xm,useExisting:Ae((function(){return PA})),multi:!0},RA=function e(t,i){_classCallCheck2(this,e),this.source=t,this.value=i},PA=((oA=function(){function e(t){_classCallCheck2(this,e),this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+IA++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=function(){},this.onTouched=function(){},this.change=new ec}return _createClass(e,[{key:"_checkSelectedRadioButton",value:function(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}},{key:"ngAfterContentInit",value:function(){this._isInitialized=!0}},{key:"_touch",value:function(){this.onTouched&&this.onTouched()}},{key:"_updateRadioButtonNames",value:function(){var e=this;this._radios&&this._radios.forEach((function(t){t.name=e.name,t._markForCheck()}))}},{key:"_updateSelectedRadioFromValue",value:function(){var e=this;this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach((function(t){t.checked=e.value===t.value,t.checked&&(e._selected=t)})))}},{key:"_emitChangeEvent",value:function(){this._isInitialized&&this.change.emit(new RA(this._selected,this._value))}},{key:"_markRadiosForCheck",value:function(){this._radios&&this._radios.forEach((function(e){return e._markForCheck()}))}},{key:"writeValue",value:function(e){this.value=e,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(e){this._controlValueAccessorChangeFn=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetector.markForCheck()}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,this._updateRadioButtonNames()}},{key:"labelPosition",get:function(){return this._labelPosition},set:function(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}},{key:"value",get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=uk(e),this._markRadiosForCheck()}},{key:"required",get:function(){return this._required},set:function(e){this._required=uk(e),this._markRadiosForCheck()}}]),e}()).\u0275fac=function(e){return new(e||oA)(Lo(Qa))},oA.\u0275dir=_t({type:oA,selectors:[["mat-radio-group"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,NA,!0),2&e&&hc(n=yc())&&(t._radios=n)},hostAttrs:["role","radiogroup",1,"mat-radio-group"],inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[Xs([DA])]}),oA),MA=VE(jE((function e(t){_classCallCheck2(this,e),this._elementRef=t}))),LA=((lA=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o,s,l){var c;return _classCallCheck2(this,i),(c=t.call(this,n))._changeDetector=r,c._focusMonitor=a,c._radioDispatcher=o,c._animationMode=s,c._providerOverride=l,c._uniqueId="mat-radio-"+ ++IA,c.id=c._uniqueId,c.change=new ec,c._checked=!1,c._value=null,c._removeUniqueSelectionListener=function(){},c.radioGroup=e,c._removeUniqueSelectionListener=o.listen((function(e,t){e!==c.id&&t===c.name&&(c.checked=!1)})),c}return _createClass(i,[{key:"focus",value:function(e){this._focusMonitor.focusVia(this._inputElement,"keyboard",e)}},{key:"_markForCheck",value:function(){this._changeDetector.markForCheck()}},{key:"ngOnInit",value:function(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.name=this.radioGroup.name)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe((function(t){!t&&e.radioGroup&&e.radioGroup._touch()}))}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}},{key:"_emitChangeEvent",value:function(){this.change.emit(new RA(this,this._value))}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"_onInputChange",value:function(e){e.stopPropagation();var t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}},{key:"_setDisabled",value:function(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}},{key:"checked",get:function(){return this._checked},set:function(e){var t=uk(e);this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}},{key:"value",get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}},{key:"labelPosition",get:function(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"},set:function(e){this._labelPosition=e}},{key:"disabled",get:function(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled},set:function(e){this._setDisabled(uk(e))}},{key:"required",get:function(){return this._required||this.radioGroup&&this.radioGroup.required},set:function(e){this._required=uk(e)}},{key:"color",get:function(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"},set:function(e){this._color=e}},{key:"inputId",get:function(){return(this.id||this._uniqueId)+"-input"}}]),i}(MA)).\u0275fac=function(e){return new(e||lA)(Lo(PA,8),Lo($s),Lo(Qa),Lo(Xw),Lo(gC),Lo(_E,8),Lo(xA,8))},lA.\u0275dir=_t({type:lA,viewQuery:function(e,t){var i;1&e&&pc(TA,!0),2&e&&hc(i=yc())&&(t._inputElement=i.first)},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[Ps]}),lA),NA=((sA=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(LA)).\u0275fac=function(e){return FA(e||sA)},sA.\u0275cmp=gt({type:sA,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(e,t){1&e&&Ko("focus",(function(){return t._inputElement.nativeElement.focus()})),2&e&&(Do("tabindex",-1)("id",t.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),hs("mat-radio-checked",t.checked)("mat-radio-disabled",t.disabled)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-primary","primary"===t.color)("mat-accent","accent"===t.color)("mat-warn","warn"===t.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[Ps],ngContentSelectors:OA,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(e,t){if(1&e&&(ts(),jo(0,"label",0,1),jo(2,"div",2),Uo(3,"div",3),Uo(4,"div",4),jo(5,"input",5,6),Ko("change",(function(e){return t._onInputChange(e)}))("click",(function(e){return t._onInputClick(e)})),Ho(),jo(7,"div",7),Uo(8,"div",8),Ho(),Ho(),jo(9,"div",9),jo(10,"span",10),Ss(11,"\xa0"),Ho(),is(12),Ho(),Ho()),2&e){var i=Mo(1);Do("for",t.inputId),_r(5),Bo("id",t.inputId)("checked",t.checked)("disabled",t.disabled)("tabIndex",t.tabIndex)("required",t.required),Do("name",t.name)("value",t.value)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby)("aria-describedby",t.ariaDescribedby),_r(2),Bo("matRippleTrigger",i)("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Ul(18,AA)),_r(2),hs("mat-radio-label-before","before"==t.labelPosition)}},directives:[iT],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(0.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5)}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),sA),FA=pn(NA),BA=((cA=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:cA}),cA.\u0275inj=ve({factory:function(e){return new(e||cA)},imports:[[nT,NE],NE]}),cA);function VA(e,t){if(1&e&&(jo(0,"span",9),Ss(1),Ho()),2&e){var i=$o(2);_r(1),Es(i.studentProfile.fullName)}}function jA(e,t){if(1&e&&(jo(0,"span",9),Ss(1),Ho()),2&e){var i=$o(2);_r(1),Es(i.tutorProfile.fullName)}}function HA(e,t){if(1&e&&(jo(0,"span",7),Ss(1,"Hey , "),Po(2,VA,2,1,"span",8),Po(3,jA,2,1,"span",8),Ho()),2&e){var i=$o();_r(2),Bo("ngIf","Learner"==i.loginType),_r(1),Bo("ngIf","Expert"==i.loginType)}}function UA(e,t){if(1&e&&(jo(0,"span",10),jo(1,"span",9),Ss(2),Ho(),Ho()),2&e){var i=$o();_r(2),Ts("Hey, ",i.socialLoginName,"")}}function qA(e,t){if(1&e){var i=zo();jo(0,"span"),Ss(1,"Your registration is almost complete. Please update your profile now by visiting your Dashboard. "),Uo(2,"br"),jo(3,"div",11),jo(4,"button",12),Ko("click",(function(){return ti(i),$o().continue()})),Ss(5," Go to Dashboard "),Ho(),Ho(),Ho()}}function WA(e,t){1&e&&(jo(0,"span"),Ss(1,"Your registration is almost complete. Please select your role and enter a password below to get proceed. "),Ho())}function zA(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"button",23),Ko("click",(function(){return ti(i),$o(2).toDashboard()})),Ss(2," Continue "),Ho(),Ho()}if(2&e){$o();var n=Mo(14);_r(1),Bo("disabled",!n.valid)}}function GA(e,t){if(1&e){var i=zo();jo(0,"div",13),jo(1,"div",14),jo(2,"label",15),Ss(3,"Choose Role"),Ho(),jo(4,"div"),jo(5,"mat-radio-group",16),Ko("ngModelChange",(function(e){return ti(i),$o().role=e})),jo(6,"mat-radio-button",17),Ss(7,"Learner"),Ho(),jo(8,"mat-radio-button",18),Ss(9,"Expert"),Ho(),Ho(),Ho(),Ho(),jo(10,"div",14),jo(11,"label",19),Ss(12,"Password"),Ho(),jo(13,"input",20,21),Ko("ngModelChange",(function(e){return ti(i),$o().data.name=e})),Ho(),jo(15,"span",22),Ss(16,"Your password must be a minimum of 8 characters long. Your PW must contain at least one uppercase letter (A-Z), one lowercase (a-z), one number (0-9), and one special character (@, #,&, %)."),Ho(),Ho(),Po(17,zA,3,1,"div",5),Ho()}if(2&e){var n=$o();_r(5),Bo("ngModel",n.role),_r(8),Bo("ngModel",n.data.name)("pattern",n.passwordPattern),_r(4),Bo("ngIf",!n.loginType)}}var YA,KA=((YA=function(){function e(t,i,n,r,a,o,s){_classCallCheck2(this,e),this.tutorService=t,this.studentService=i,this.loginService=n,this.dialog=r,this.socialService=a,this.dialogRef=o,this.tutorProfile=new ub,this.tutorProfileDetails=new db,this.studentProfile=new cb,this.login=!1,this.socialLogin=!1,this.role="Learner",this.hide=!0,this.password=" ",this.data=new SA(""),this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.login=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.loginService.getLoginType()?(this.loginType=this.loginService.getLoginType(),this.login=!0,"Learner"==this.loginType?this.studentProfile=this.studentService.getStudentProfileDetails():"Expert"==this.loginType&&(this.tutorProfile=this.tutorService.getTutorDetials())):(this.socialLogin=!0,this.socialLoginName=this.socialService.getSocialDetails().fullName)}},{key:"chooseRole",value:function(e){this.role=e}},{key:"continue",value:function(){this.dialog.closeAll()}},{key:"toDashboard",value:function(){console.log(this.role),console.log(this.data.name),"Learner"!=this.role&&"Expert"!=this.role||null==this.data.name||this.dialogRef.close({role:this.role,password:this.data.name})}}]),e}()).\u0275fac=function(e){return new(e||YA)(Lo(ck),Lo(FT),Lo(gb),Lo(LT),Lo(EA),Lo(IT),Lo(DT))},YA.\u0275cmp=gt({type:YA,selectors:[["app-welcome"]],decls:10,vars:5,consts:[[1,"bg-thankyou-container"],[1,"thankyou-container"],["class","user-name-container","style","font-size: larger",4,"ngIf"],["class","user-name-container",4,"ngIf"],[1,"greet"],[4,"ngIf"],["style","margin-top: 10px",4,"ngIf"],[1,"user-name-container",2,"font-size","larger"],["class","user-name",4,"ngIf"],[1,"user-name"],[1,"user-name-container"],[1,"goToDashboard-margin"],["type","button",1,"btn","btn-primary",3,"click"],[2,"margin-top","10px"],[1,"form-group"],["for","role",1,"form-control-placeholder"],["ngDefaultControl","",3,"ngModel","ngModelChange"],["value","Learner",1,"example-margin"],["value","Expert",1,"example-margin"],["for","password",1,"form-control-placeholder"],["type","password","name","password","required","","minlength","8","maxlength","20",1,"form-control",3,"ngModel","pattern","ngModelChange"],["password","ngModel"],[1,"help-block"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(jo(0,"body"),jo(1,"div",0),jo(2,"div",1),Po(3,HA,4,2,"span",2),Po(4,UA,3,1,"span",3),jo(5,"span",4),Ss(6,"Thank you"),Ho(),Po(7,qA,6,0,"span",5),Po(8,WA,2,0,"span",5),Po(9,GA,18,4,"div",6),Ho(),Ho(),Ho()),2&e&&(_r(3),Bo("ngIf",t.loginType),_r(1),Bo("ngIf",!t.loginType),_r(3),Bo("ngIf",t.loginType),_r(1),Bo("ngIf",!t.loginType),_r(1),Bo("ngIf",!t.loginType))},directives:[Dh,PA,eg,cg,Uy,NA,Jy,eb,ib,rb],styles:["img[_ngcontent-%COMP%]{width:40vw;height:40vh;margin:auto}.width100[_ngcontent-%COMP%]{width:100%}.example-margin[_ngcontent-%COMP%]{margin:0 10px}.goToDashboard-margin[_ngcontent-%COMP%]{margin-top:2rem}"]}),YA),XA=["underline"],JA=["connectionContainer"],QA=["inputContainer"],ZA=["label"];function $A(e,t){1&e&&(qo(0),jo(1,"div",14),Uo(2,"div",15),Uo(3,"div",16),Uo(4,"div",17),Ho(),jo(5,"div",18),Uo(6,"div",15),Uo(7,"div",16),Uo(8,"div",17),Ho(),Wo())}function eO(e,t){1&e&&(jo(0,"div",19),is(1,1),Ho())}function tO(e,t){if(1&e&&(qo(0),is(1,2),jo(2,"span"),Ss(3),Ho(),Wo()),2&e){var i=$o(2);_r(3),Es(i._control.placeholder)}}function iO(e,t){1&e&&is(0,3,["*ngSwitchCase","true"])}function nO(e,t){1&e&&(jo(0,"span",23),Ss(1," *"),Ho())}function rO(e,t){if(1&e){var i=zo();jo(0,"label",20,21),Ko("cdkObserveContent",(function(){return ti(i),$o().updateOutlineGap()})),Po(2,tO,4,1,"ng-container",12),Po(3,iO,1,0,void 0,12),Po(4,nO,2,0,"span",22),Ho()}if(2&e){var n=$o();hs("mat-empty",n._control.empty&&!n._shouldAlwaysFloat)("mat-form-field-empty",n._control.empty&&!n._shouldAlwaysFloat)("mat-accent","accent"==n.color)("mat-warn","warn"==n.color),Bo("cdkObserveContentDisabled","outline"!=n.appearance)("id",n._labelId)("ngSwitch",n._hasLabel()),Do("for",n._control.id)("aria-owns",n._control.id),_r(2),Bo("ngSwitchCase",!1),_r(1),Bo("ngSwitchCase",!0),_r(1),Bo("ngIf",!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}}function aO(e,t){1&e&&(jo(0,"div",24),is(1,4),Ho())}function oO(e,t){if(1&e&&(jo(0,"div",25,26),Uo(2,"span",27),Ho()),2&e){var i=$o();_r(2),hs("mat-accent","accent"==i.color)("mat-warn","warn"==i.color)}}function sO(e,t){1&e&&(jo(0,"div"),is(1,5),Ho()),2&e&&Bo("@transitionMessages",$o()._subscriptAnimationState)}function lO(e,t){if(1&e&&(jo(0,"div",31),Ss(1),Ho()),2&e){var i=$o(2);Bo("id",i._hintLabelId),_r(1),Es(i.hintLabel)}}function cO(e,t){if(1&e&&(jo(0,"div",28),Po(1,lO,2,2,"div",29),is(2,6),Uo(3,"div",30),is(4,7),Ho()),2&e){var i=$o();Bo("@transitionMessages",i._subscriptAnimationState),_r(1),Bo("ngIf",i.hintLabel)}}var uO,hO,dO=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],pO=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],fO=0,vO=((uO=function e(){_classCallCheck2(this,e),this.id="mat-error-"+fO++}).\u0275fac=function(e){return new(e||uO)},uO.\u0275dir=_t({type:uO,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(e,t){2&e&&Do("id",t.id)},inputs:{id:"id"}}),uO),mO={transitionMessages:t_("transitionMessages",[a_("enter",r_({opacity:1,transform:"translateY(0%)"})),o_("void => enter",[r_({opacity:0,transform:"translateY(-100%)"}),i_("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},gO=((hO=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||hO)},hO.\u0275dir=_t({type:hO}),hO);function yO(e){return Error("A hint was already declared for 'align=\"".concat(e,"\"'."))}var bO,kO,CO,wO,_O,SO,EO,TO=0,AO=((_O=function e(){_classCallCheck2(this,e),this.align="start",this.id="mat-hint-"+TO++}).\u0275fac=function(e){return new(e||_O)},_O.\u0275dir=_t({type:_O,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,t){2&e&&(Do("id",t.id)("align",null),hs("mat-right","end"==t.align))},inputs:{align:"align",id:"id"}}),_O),OO=((wO=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||wO)},wO.\u0275dir=_t({type:wO,selectors:[["mat-label"]]}),wO),xO=((CO=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||CO)},CO.\u0275dir=_t({type:CO,selectors:[["mat-placeholder"]]}),CO),IO=((kO=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||kO)},kO.\u0275dir=_t({type:kO,selectors:[["","matPrefix",""]]}),kO),DO=((bO=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||bO)},bO.\u0275dir=_t({type:bO,selectors:[["","matSuffix",""]]}),bO),RO=0,PO=BE((function e(t){_classCallCheck2(this,e),this._elementRef=t}),"primary"),MO=new qe("MAT_FORM_FIELD_DEFAULT_OPTIONS"),LO=new qe("MatFormField"),NO=((EO=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o,s,l,c){var u;return _classCallCheck2(this,i),(u=t.call(this,e))._elementRef=e,u._changeDetectorRef=n,u._dir=a,u._defaults=o,u._platform=s,u._ngZone=l,u._outlineGapCalculationNeededImmediately=!1,u._outlineGapCalculationNeededOnStable=!1,u._destroyed=new x,u._showAlwaysAnimate=!1,u._subscriptAnimationState="",u._hintLabel="",u._hintLabelId="mat-hint-"+RO++,u._labelId="mat-form-field-label-"+RO++,u._labelOptions=r||{},u.floatLabel=u._getDefaultFloatLabelState(),u._animationsEnabled="NoopAnimations"!==c,u.appearance=o&&o.appearance?o.appearance:"legacy",u._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker,u}return _createClass(i,[{key:"getConnectedOverlayOrigin",value:function(){return this._connectionContainerRef||this._elementRef}},{key:"ngAfterContentInit",value:function(){var e=this;this._validateControlChild();var t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+t.controlType),t.stateChanges.pipe(Dp(null)).subscribe((function(){e._validatePlaceholders(),e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Nk(this._destroyed)).subscribe((function(){return e._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.asObservable().pipe(Nk(e._destroyed)).subscribe((function(){e._outlineGapCalculationNeededOnStable&&e.updateOutlineGap()}))})),J(this._prefixChildren.changes,this._suffixChildren.changes).subscribe((function(){e._outlineGapCalculationNeededOnStable=!0,e._changeDetectorRef.markForCheck()})),this._hintChildren.changes.pipe(Dp(null)).subscribe((function(){e._processHints(),e._changeDetectorRef.markForCheck()})),this._errorChildren.changes.pipe(Dp(null)).subscribe((function(){e._syncDescribedByIds(),e._changeDetectorRef.markForCheck()})),this._dir&&this._dir.change.pipe(Nk(this._destroyed)).subscribe((function(){"function"==typeof requestAnimationFrame?e._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){return e.updateOutlineGap()}))})):e.updateOutlineGap()}))}},{key:"ngAfterContentChecked",value:function(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}},{key:"ngAfterViewInit",value:function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_shouldForward",value:function(e){var t=this._control?this._control.ngControl:null;return t&&t[e]}},{key:"_hasPlaceholder",value:function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}},{key:"_hasLabel",value:function(){return!!this._labelChild}},{key:"_shouldLabelFloat",value:function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}},{key:"_hideControlPlaceholder",value:function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}},{key:"_hasFloatingLabel",value:function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}},{key:"_getDisplayedMessages",value:function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}},{key:"_animateAndLockLabel",value:function(){var e=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,vk(this._label.nativeElement,"transitionend").pipe(Cp(1)).subscribe((function(){e._showAlwaysAnimate=!1}))),this.floatLabel="always",this._changeDetectorRef.markForCheck())}},{key:"_validatePlaceholders",value:function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}},{key:"_processHints",value:function(){this._validateHints(),this._syncDescribedByIds()}},{key:"_validateHints",value:function(){var e,t,i=this;this._hintChildren&&this._hintChildren.forEach((function(n){if("start"===n.align){if(e||i.hintLabel)throw yO("start");e=n}else if("end"===n.align){if(t)throw yO("end");t=n}}))}},{key:"_getDefaultFloatLabelState",value:function(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}},{key:"_syncDescribedByIds",value:function(){if(this._control){var e=[];if("hint"===this._getDisplayedMessages()){var t=this._hintChildren?this._hintChildren.find((function(e){return"start"===e.align})):null,i=this._hintChildren?this._hintChildren.find((function(e){return"end"===e.align})):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&(e=this._errorChildren.map((function(e){return e.id})));this._control.setDescribedByIds(e)}}},{key:"_validateControlChild",value:function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}},{key:"updateOutlineGap",value:function(){var e=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser)if(this._isAttachedToDOM()){var t=0,i=0,n=this._connectionContainerRef.nativeElement,r=n.querySelectorAll(".mat-form-field-outline-start"),a=n.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){var o=n.getBoundingClientRect();if(0===o.width&&0===o.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);var s,l=this._getStartEnd(o),c=this._getStartEnd(e.children[0].getBoundingClientRect()),u=0,h=_createForOfIteratorHelper(e.children);try{for(h.s();!(s=h.n()).done;)u+=s.value.offsetWidth}catch(f){h.e(f)}finally{h.f()}t=Math.abs(c-l)-5,i=u>0?.75*u+10:0}for(var d=0;d<r.length;d++)r[d].style.width=t+"px";for(var p=0;p<a.length;p++)a[p].style.width=i+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}else this._outlineGapCalculationNeededImmediately=!0}},{key:"_getStartEnd",value:function(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}},{key:"_isAttachedToDOM",value:function(){var e=this._elementRef.nativeElement;if(e.getRootNode){var t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}},{key:"appearance",get:function(){return this._appearance},set:function(e){var t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}},{key:"hideRequiredMarker",get:function(){return this._hideRequiredMarker},set:function(e){this._hideRequiredMarker=uk(e)}},{key:"_shouldAlwaysFloat",get:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}},{key:"_canLabelFloat",get:function(){return"never"!==this.floatLabel}},{key:"hintLabel",get:function(){return this._hintLabel},set:function(e){this._hintLabel=e,this._processHints()}},{key:"floatLabel",get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}},{key:"_control",get:function(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic},set:function(e){this._explicitFormFieldControl=e}},{key:"_labelChild",get:function(){return this._labelChildNonStatic||this._labelChildStatic}}]),i}(PO)).\u0275fac=function(e){return new(e||EO)(Lo($s),Lo(Qa),Lo(yT,8),Lo(fC,8),Lo(MO,8),Lo(iC),Lo(Wc),Lo(_E,8))},EO.\u0275cmp=gt({type:EO,selectors:[["mat-form-field"]],contentQueries:function(e,t,i){var n;1&e&&(vc(i,gO,!0),mc(i,gO,!0),vc(i,OO,!0),mc(i,OO,!0),vc(i,xO,!0),vc(i,vO,!0),vc(i,AO,!0),vc(i,IO,!0),vc(i,DO,!0)),2&e&&(hc(n=yc())&&(t._controlNonStatic=n.first),hc(n=yc())&&(t._controlStatic=n.first),hc(n=yc())&&(t._labelChildNonStatic=n.first),hc(n=yc())&&(t._labelChildStatic=n.first),hc(n=yc())&&(t._placeholderChild=n.first),hc(n=yc())&&(t._errorChildren=n),hc(n=yc())&&(t._hintChildren=n),hc(n=yc())&&(t._prefixChildren=n),hc(n=yc())&&(t._suffixChildren=n))},viewQuery:function(e,t){var i;1&e&&(pc(XA,!0),dc(JA,!0),pc(QA,!0),pc(ZA,!0)),2&e&&(hc(i=yc())&&(t.underlineRef=i.first),hc(i=yc())&&(t._connectionContainerRef=i.first),hc(i=yc())&&(t._inputContainerRef=i.first),hc(i=yc())&&(t._label=i.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(e,t){2&e&&hs("mat-form-field-appearance-standard","standard"==t.appearance)("mat-form-field-appearance-fill","fill"==t.appearance)("mat-form-field-appearance-outline","outline"==t.appearance)("mat-form-field-appearance-legacy","legacy"==t.appearance)("mat-form-field-invalid",t._control.errorState)("mat-form-field-can-float",t._canLabelFloat)("mat-form-field-should-float",t._shouldLabelFloat())("mat-form-field-has-label",t._hasFloatingLabel())("mat-form-field-hide-placeholder",t._hideControlPlaceholder())("mat-form-field-disabled",t._control.disabled)("mat-form-field-autofilled",t._control.autofilled)("mat-focused",t._control.focused)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)("ng-untouched",t._shouldForward("untouched"))("ng-touched",t._shouldForward("touched"))("ng-pristine",t._shouldForward("pristine"))("ng-dirty",t._shouldForward("dirty"))("ng-valid",t._shouldForward("valid"))("ng-invalid",t._shouldForward("invalid"))("ng-pending",t._shouldForward("pending"))("_mat-animation-noopable",!t._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Xs([{provide:LO,useExisting:EO}]),Ps],ngContentSelectors:pO,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,t){1&e&&(ts(dO),jo(0,"div",0),jo(1,"div",1,2),Ko("click",(function(e){return t._control.onContainerClick&&t._control.onContainerClick(e)})),Po(3,$A,9,0,"ng-container",3),Po(4,eO,2,0,"div",4),jo(5,"div",5,6),is(7),jo(8,"span",7),Po(9,rO,5,16,"label",8),Ho(),Ho(),Po(10,aO,2,0,"div",9),Ho(),Po(11,oO,3,4,"div",10),jo(12,"div",11),Po(13,sO,2,1,"div",12),Po(14,cO,5,2,"div",13),Ho(),Ho()),2&e&&(_r(3),Bo("ngIf","outline"==t.appearance),_r(1),Bo("ngIf",t._prefixChildren.length),_r(5),Bo("ngIf",t._hasFloatingLabel()),_r(1),Bo("ngIf",t._suffixChildren.length),_r(1),Bo("ngIf","outline"!=t.appearance),_r(1),Bo("ngSwitch",t._getDisplayedMessages()),_r(1),Bo("ngSwitchCase","error"),_r(1),Bo("ngSwitchCase","hint"))},directives:[Dh,jh,Hh,Rw],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[mO.transitionMessages]},changeDetection:0}),EO),FO=((SO=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:SO}),SO.\u0275inj=ve({factory:function(e){return new(e||SO)},imports:[[id,NE,Pw],NE]}),SO);function BO(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xk,n=(t=e)instanceof Date&&!isNaN(+t)?+e-i.now():Math.abs(e);return function(e){return e.lift(new VO(n,i))}}var VO=function(){function e(t,i){_classCallCheck2(this,e),this.delay=t,this.scheduler=i}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new jO(e,this.delay,this.scheduler))}}]),e}(),jO=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this,e)).delay=n,a.scheduler=r,a.queue=[],a.active=!1,a.errored=!1,a}return _createClass(i,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(i.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,i=new HO(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(zk.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(zk.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,i=t.queue,n=e.scheduler,r=e.destination;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(r);if(i.length>0){var a=Math.max(0,i[0].time-n.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1}}]),i}(m),HO=function e(t,i){_classCallCheck2(this,e),this.time=t,this.notification=i},UO=["panel"];function qO(e,t){if(1&e&&(jo(0,"div",0,1),is(2),Ho()),2&e){var i=$o();Bo("id",i.id)("ngClass",i._classList)}}var WO,zO,GO,YO=["*"],KO=0,XO=function e(t,i){_classCallCheck2(this,e),this.source=t,this.option=i},JO=VE((function e(){_classCallCheck2(this,e)})),QO=new qe("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}}),ZO=((WO=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;return _classCallCheck2(this,i),(a=t.call(this))._changeDetectorRef=e,a._elementRef=n,a._activeOptionChanges=p.EMPTY,a.showPanel=!1,a._isOpen=!1,a.displayWith=null,a.optionSelected=new ec,a.opened=new ec,a.closed=new ec,a.optionActivated=new ec,a._classList={},a.id="mat-autocomplete-"+KO++,a._autoActiveFirstOption=!!r.autoActiveFirstOption,a}return _createClass(i,[{key:"ngAfterContentInit",value:function(){var e=this;this._keyManager=new Mw(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe((function(t){e.optionActivated.emit({source:e,option:e.options.toArray()[t]||null})})),this._setVisibility()}},{key:"ngOnDestroy",value:function(){this._activeOptionChanges.unsubscribe()}},{key:"_setScrollTop",value:function(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}},{key:"_getScrollTop",value:function(){return this.panel?this.panel.nativeElement.scrollTop:0}},{key:"_setVisibility",value:function(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}},{key:"_emitSelectEvent",value:function(e){var t=new XO(this,e);this.optionSelected.emit(t)}},{key:"_setVisibilityClasses",value:function(e){e["mat-autocomplete-visible"]=this.showPanel,e["mat-autocomplete-hidden"]=!this.showPanel}},{key:"isOpen",get:function(){return this._isOpen&&this.showPanel}},{key:"autoActiveFirstOption",get:function(){return this._autoActiveFirstOption},set:function(e){this._autoActiveFirstOption=uk(e)}},{key:"classList",set:function(e){this._classList=e&&e.length?e.split(" ").reduce((function(e,t){return e[t.trim()]=!0,e}),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}}]),i}(JO)).\u0275fac=function(e){return new(e||WO)(Lo(Qa),Lo($s),Lo(QO))},WO.\u0275cmp=gt({type:WO,selectors:[["mat-autocomplete"]],contentQueries:function(e,t,i){var n;1&e&&(vc(i,pT,!0),vc(i,lT,!0)),2&e&&(hc(n=yc())&&(t.options=n),hc(n=yc())&&(t.optionGroups=n))},viewQuery:function(e,t){var i;1&e&&(dc(_l,!0),pc(UO,!0)),2&e&&(hc(i=yc())&&(t.template=i.first),hc(i=yc())&&(t.panel=i.first))},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple",displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",classList:["class","classList"],panelWidth:"panelWidth"},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[Xs([{provide:dT,useExisting:WO}]),Ps],ngContentSelectors:YO,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,t){1&e&&(ts(),Po(0,qO,3,2,"ng-template"))},directives:[Ah],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),WO),$O=new qe("mat-autocomplete-scroll-strategy"),ex={provide:$O,deps:[fw],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},tx={provide:Xm,useExisting:Ae((function(){return ix})),multi:!0},ix=((GO=function(){function e(t,i,n,r,a,o,s,l,c,u){var h=this;_classCallCheck2(this,e),this._element=t,this._overlay=i,this._viewContainerRef=n,this._zone=r,this._changeDetectorRef=a,this._dir=s,this._formField=l,this._document=c,this._viewportRuler=u,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=p.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new x,this._windowBlurHandler=function(){h._canOpenOnNextFocus=h._document.activeElement!==h._element.nativeElement||h.panelOpen},this._onChange=function(){},this._onTouched=function(){},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=tp((function(){return h.autocomplete&&h.autocomplete.options?J.apply(void 0,_toConsumableArray2(h.autocomplete.options.map((function(e){return e.onSelectionChange})))):h._zone.onStable.asObservable().pipe(Cp(1),Ap((function(){return h.optionSelections})))})),this._scrollStrategy=o}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this,t=this._getWindow();void 0!==t&&this._zone.runOutsideAngular((function(){return t.addEventListener("blur",e._windowBlurHandler)}))}},{key:"ngOnChanges",value:function(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}},{key:"ngOnDestroy",value:function(){var e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}},{key:"openPanel",value:function(){this._attachOverlay(),this._floatLabel()}},{key:"closePanel",value:function(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}},{key:"updatePosition",value:function(){this._overlayAttached&&this._overlayRef.updatePosition()}},{key:"_getOutsideClickStream",value:function(){var e=this;return J(vk(this._document,"click"),vk(this._document,"touchend")).pipe(np((function(t){var i=e._isInsideShadowRoot&&t.composedPath?t.composedPath()[0]:t.target,n=e._formField?e._formField._elementRef.nativeElement:null;return e._overlayAttached&&i!==e._element.nativeElement&&(!n||!n.contains(i))&&!!e._overlayRef&&!e._overlayRef.overlayElement.contains(i)})))}},{key:"writeValue",value:function(e){var t=this;Promise.resolve(null).then((function(){return t._setTriggerValue(e)}))}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this._element.nativeElement.disabled=e}},{key:"_handleKeydown",value:function(e){var t=e.keyCode;if(27===t&&e.preventDefault(),this.activeOption&&13===t&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){var i=this.autocomplete._keyManager.activeItem,n=38===t||40===t;this.panelOpen||9===t?this.autocomplete._keyManager.onKeydown(e):n&&this._canOpen()&&this.openPanel(),(n||this.autocomplete._keyManager.activeItem!==i)&&this._scrollToOption()}}},{key:"_handleInput",value:function(e){var t=e.target,i=t.value;"number"===t.type&&(i=""==i?null:parseFloat(i)),this._previousValue!==i&&(this._previousValue=i,this._onChange(i),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}},{key:"_handleFocus",value:function(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}},{key:"_floatLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}},{key:"_resetLabel",value:function(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}},{key:"_scrollToOption",value:function(){var e=this.autocomplete._keyManager.activeItemIndex||0,t=fT(e,this.autocomplete.options,this.autocomplete.optionGroups);if(0===e&&1===t)this.autocomplete._setScrollTop(0);else{var i=vT(e+t,48,this.autocomplete._getScrollTop(),256);this.autocomplete._setScrollTop(i)}}},{key:"_subscribeToClosingActions",value:function(){var e=this;return J(this._zone.onStable.asObservable().pipe(Cp(1)),this.autocomplete.options.changes.pipe(Bp((function(){return e._positionStrategy.reapplyLastPosition()})),BO(0))).pipe(Ap((function(){var t=e.panelOpen;return e._resetActiveItem(),e.autocomplete._setVisibility(),e.panelOpen&&(e._overlayRef.updatePosition(),t!==e.panelOpen&&e.autocomplete.opened.emit()),e.panelClosingActions})),Cp(1)).subscribe((function(t){return e._setValueAndClose(t)}))}},{key:"_destroyPanel",value:function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}},{key:"_setTriggerValue",value:function(e){var t=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,i=null!=t?t:"";this._formField?this._formField._control.value=i:this._element.nativeElement.value=i,this._previousValue=i}},{key:"_setValueAndClose",value:function(e){e&&e.source&&(this._clearPreviousSelectedOption(e.source),this._setTriggerValue(e.source.value),this._onChange(e.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(e.source)),this.closePanel()}},{key:"_clearPreviousSelectedOption",value:function(e){this.autocomplete.options.forEach((function(t){t!=e&&t.selected&&t.deselect()}))}},{key:"_attachOverlay",value:function(){var e=this;if(!this.autocomplete)throw Error("Attempting to open an undefined instance of `mat-autocomplete`. Make sure that the id passed to the `matAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.");null==this._isInsideShadowRoot&&(this._isInsideShadowRoot=!!aC(this._element.nativeElement));var t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new AC(this.autocomplete.template,this._viewContainerRef),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,t.keydownEvents().subscribe((function(t){(27===t.keyCode||38===t.keyCode&&t.altKey)&&(e._resetActiveItem(),e._closeKeyEventStream.next(),t.stopPropagation(),t.preventDefault())})),this._viewportRuler&&(this._viewportSubscription=this._viewportRuler.change().subscribe((function(){e.panelOpen&&t&&t.updateSize({width:e._getPanelWidth()})})))),t&&!t.hasAttached()&&(t.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());var i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&i!==this.panelOpen&&this.autocomplete.opened.emit()}},{key:"_getOverlayConfig",value:function(){return new WC({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir})}},{key:"_getOverlayPosition",value:function(){var e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}},{key:"_setStrategyPositions",value:function(e){var t,i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],n=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"}];t="above"===this.position?n:"below"===this.position?i:[].concat(i,n),e.withPositions(t)}},{key:"_getConnectedElement",value:function(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}},{key:"_getPanelWidth",value:function(){return this.autocomplete.panelWidth||this._getHostWidth()}},{key:"_getHostWidth",value:function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}},{key:"_resetActiveItem",value:function(){this.autocomplete._keyManager.setActiveItem(this.autocomplete.autoActiveFirstOption?0:-1)}},{key:"_canOpen",value:function(){var e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}},{key:"_getWindow",value:function(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}},{key:"autocompleteDisabled",get:function(){return this._autocompleteDisabled},set:function(e){this._autocompleteDisabled=uk(e)}},{key:"panelOpen",get:function(){return this._overlayAttached&&this.autocomplete.showPanel}},{key:"panelClosingActions",get:function(){var e=this;return J(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(np((function(){return e._overlayAttached}))),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(np((function(){return e._overlayAttached}))):Gd()).pipe(j((function(e){return e instanceof hT?e:null})))}},{key:"activeOption",get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}}]),e}()).\u0275fac=function(e){return new(e||GO)(Lo($s),Lo(fw),Lo(El),Lo(Wc),Lo(Qa),Lo($O),Lo(fC,8),Lo(LO,9),Lo(Su,8),Lo(bC))},GO.\u0275dir=_t({type:GO,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,t){1&e&&Ko("focusin",(function(){return t._handleFocus()}))("blur",(function(){return t._onTouched()}))("input",(function(e){return t._handleInput(e)}))("keydown",(function(e){return t._handleKeydown(e)})),2&e&&Do("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-owns",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",!t.autocompleteDisabled)},inputs:{position:["matAutocompletePosition","position"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"],autocomplete:["matAutocomplete","autocomplete"],connectedTo:["matAutocompleteConnectedTo","connectedTo"]},exportAs:["matAutocompleteTrigger"],features:[Xs([tx]),Vs]}),GO),nx=((zO=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:zO}),zO.\u0275inj=ve({factory:function(e){return new(e||zO)},providers:[ex],imports:[[gT,kw,NE,id],kC,gT,NE]}),zO),rx=function(e){return{"background-image":e}};function ax(e,t){if(1&e){var i=zo();jo(0,"div",22),Ko("click",(function(){ti(i);var e=$o();return e.openProfile(),e.onNavigationClick()})),Ho()}if(2&e){var n=$o();Bo("ngStyle",ql(1,rx,"url("+n.tutorService.getTutorDetials().profilePictureUrl+")"))}}function ox(e,t){if(1&e){var i=zo();jo(0,"div",22),Ko("click",(function(){ti(i);var e=$o();return e.openProfile(),e.onNavigationClick()})),Ho()}if(2&e){var n=$o();Bo("ngStyle",ql(1,rx,"url("+n.studentServce.getStudentProfileDetails().profilePictureUrl+")"))}}function sx(e,t){if(1&e){var i=zo();jo(0,"span",23),Ko("click",(function(){ti(i);var e=$o();return e.openProfile(),e.onNavigationClick()})),Ss(1),Ho()}if(2&e){var n=$o();_r(1),Es(n.studentProfile.fullName)}}function lx(e,t){if(1&e){var i=zo();jo(0,"span",23),Ko("click",(function(){ti(i);var e=$o();return e.openProfile(),e.onNavigationClick()})),Ss(1),Ho()}if(2&e){var n=$o();_r(1),Es(n.tutorProfile.fullName)}}function cx(e,t){1&e&&Uo(0,"span",24)}function ux(e,t){if(1&e&&(jo(0,"span",25),jo(1,"div",26),jo(2,"div",27),Uo(3,"div",28),Ho(),Ho(),Ho()),2&e){var i=$o();_r(3),us("width",i.tutorProfileDetails.profileCompleted,"%")}}function hx(e,t){if(1&e&&(jo(0,"span",25),jo(1,"div",26),jo(2,"div",27),Uo(3,"div",28),Ho(),Ho(),Ho()),2&e){var i=$o();_r(3),us("width",i.studentProfileCompleted,"%")}}function dx(e,t){if(1&e){var i=zo();jo(0,"div",29),jo(1,"span"),Ss(2,"Your profile is "),jo(3,"label"),Ss(4),Ho(),Ss(5," incomplete."),Ho(),jo(6,"span",30),Ss(7,"Get a head start by "),jo(8,"a",31),Ko("click",(function(){ti(i);var e=$o();return e.openProfile(),e.onNavigationClick()})),Ss(9,"completing it now"),Ho(),Ho(),Ho()}if(2&e){var n=$o();_r(4),Ts("",100-n.tutorProfileDetails.profileCompleted,"% ")}}function px(e,t){if(1&e){var i=zo();jo(0,"div",29),jo(1,"span",30),Ss(2," You have "),jo(3,"label"),Ss(4),Ho(),Ss(5," left. Please get a head start by "),jo(6,"a",31),Ko("click",(function(){ti(i);var e=$o();return e.openProfile(),e.onNavigationClick()})),Ss(7,"completing your profile"),Ho(),Ho(),Ho()}if(2&e){var n=$o();_r(4),Ts("",100-n.studentProfileCompleted,"% ")}}function fx(e,t){if(1&e){var i=zo();jo(0,"span"),jo(1,"p",32),Ss(2,"Available?"),Ho(),jo(3,"label",33),jo(4,"input",34),Ko("click",(function(){return ti(i),$o().toggleAvailability()})),Ho(),Uo(5,"span",35),Ho(),Ho()}if(2&e){var n=$o();_r(4),Bo("checked",n.checked)}}var vx=function(){return{exact:!0}};function mx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",37),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Dashboard"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function gx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",38),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Dashboard"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function yx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",39),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Experts"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function bx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",40),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Schedule"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function kx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",41),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Recordings"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function Cx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",42),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Knowledge Base"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function wx(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",43),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Bookings"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function _x(e,t){if(1&e){var i=zo();jo(0,"li",36),jo(1,"a",44),Ko("click",(function(){return ti(i),$o().onNavigationClick()})),Ss(2,"Session Notes"),Ho(),Ho()}2&e&&Bo("routerLinkActiveOptions",Ul(1,vx))}function Sx(e,t){if(1&e&&(jo(0,"mat-option",53),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i),_r(1),Ts(" ",i," ")}}function Ex(e,t){if(1&e){var i=zo();jo(0,"div",45),jo(1,"div",46),jo(2,"form"),jo(3,"button",47),Ko("click",(function(){return ti(i),$o().displaySelectedSubjects()})),Uo(4,"i",48),Ho(),jo(5,"input",49),Ko("ngModelChange",(function(e){return ti(i),$o().selectedSubject=e})),Ho(),jo(6,"mat-autocomplete",50,51),Po(8,Sx,2,2,"mat-option",52),Xl(9,"async"),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(7),r=$o();_r(5),Bo("formControl",r.myControl)("matAutocomplete",n)("ngModel",r.selectedSubject),_r(3),Bo("ngForOf",Jl(9,4,r.filteredOptions))}}function Tx(e,t){if(1&e&&(jo(0,"span",54),Ss(1),Ho()),2&e){var i=$o();_r(1),Es(i.getNotificationCount())}}function Ax(e,t){1&e&&(jo(0,"p"),Ss(1,"No new notifications !"),Ho())}function Ox(e,t){1&e&&(jo(0,"span"),Ss(1,"\u2022"),Ho())}function xx(e,t){if(1&e&&(jo(0,"div",57),jo(1,"div",58),Uo(2,"img",59),Ho(),jo(3,"div",60),jo(4,"p"),Ss(5),Ho(),jo(6,"span",61),Ss(7),Xl(8,"date"),Ho(),Ho(),jo(9,"div",62),Po(10,Ox,2,0,"span",9),Ho(),Ho()),2&e){var i=t.$implicit;_r(2),Bo("src",i.pictureUrl,ir),_r(3),Es(i.message),_r(2),Es(Ql(8,4,i.timestamp,"short")),_r(3),Bo("ngIf",0==i.readStatus)}}function Ix(e,t){if(1&e&&(jo(0,"div",55),jo(1,"h3"),Ss(2,"Notifications"),Ho(),Po(3,Ax,2,0,"p",9),Po(4,xx,11,7,"div",56),Ho()),2&e){var i=$o();_r(3),Bo("ngIf",0==i.notifications.length),_r(1),Bo("ngForOf",i.notifications)}}var Dx,Rx,Px,Mx=((Dx=function(){function e(t,i,n,r,a,o,s,l,c,u,h,d){_classCallCheck2(this,e),this.router=t,this.meetingService=i,this.studentServce=n,this.loginService=r,this.tutorService=a,this.dialog=o,this.httpService=s,this.studentService=l,this.cookieService=c,this.breakpointObserver=u,this.locationStrategy=h,this.notificationService=d,this.checked=!1,this.joinMeeting=new fb,this.hostMeeting=new fb,this.studentProfile=new cb,this.tutorProfile=new ub,this.tutorProfileDetails=new db,this.dashboardUrl="/home/studentDashboard",this.studentLoginDetails=new hb,this.notificationCount=0,this.profilePictureUrl="../../../assets/images/default-user-image.png",this.options=["Tools","Marketing","Content","Project Management","Sales","E-comm","Industry Consulation","Strategy","Finance","HR","Operations","IT Support"],this.myControl=new xy,this.toggleNavigation=!1,this.notifications=[],this.showNotifications=!1,this.getScreenSize()}return _createClass(e,[{key:"getScreenSize",value:function(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}},{key:"ngOnInit",value:function(){var e=this;this.preventBackButton(),this.toggleNavigation=!0,this.breakpointObserver.observe(["(min-width: 800px)"]).subscribe((function(t){t.matches?e.openNav():e.closeNav()})),this.isTokenValid()?(this.loginType=this.loginService.getLoginType(),this.loginType&&"Learner"==this.loginType&&null!=this.studentService.getStudentProfileDetails().fullName?(this.studentProfile=this.studentServce.getStudentProfileDetails(),null==this.studentServce.getStudentProfileDetails().profilePictureUrl&&(this.studentServce.getStudentProfileDetails().profilePictureUrl=this.profilePictureUrl),this.calculateStudentProfilePercentage(),this.router.navigate(["home/studentDashboard"]),"signUp"==this.loginService.getTrType()&&this.dialog.open(KA,{width:"auto",height:"auto"})):this.loginType&&"Expert"==this.loginType&&null!=this.tutorService.getTutorDetials().fullName?(this.tutorProfile=this.tutorService.getTutorDetials(),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),null==this.tutorService.getTutorDetials().profilePictureUrl&&(this.tutorService.getTutorDetials().profilePictureUrl=this.profilePictureUrl),this.checked="yes"==this.tutorService.getPersonalAvailabilitySchedule().isAvailable,this.router.navigate(["home/tutorDashboard"]),"signUp"==this.loginService.getTrType()&&this.dialog.open(KA,{width:"auto",height:"auto"})):this.handleRefresh(),this.initialiseNotifications()):this.router.navigate(["facade"]),this.filteredOptions=this.myControl.valueChanges.pipe(Dp(""),j((function(t){return e._filter(t)})))}},{key:"initialiseNotifications",value:function(){var e=this;this.notificationService.fetchNotification(),this.notificationService.notificationsChanged.subscribe((function(t){e.notifications=t,console.log(e.notifications)}))}},{key:"displayNotifications",value:function(){this.showNotifications=!this.showNotifications}},{key:"getNotificationCount",value:function(){return this.notificationService.getNotificationCount()}},{key:"onNavigationClick",value:function(){this.screenWidth<=500&&this.closeNav()}},{key:"toFacade",value:function(){this.router.navigate([""])}},{key:"openNav",value:function(){this.screenWidth>=450?(document.getElementById("sidenav").style.width="230px",document.getElementById("mainContent").style.marginLeft="230px"):document.getElementById("sidenav").style.width="100%",this.toggleNavigation=!0}},{key:"closeNav",value:function(){document.getElementById("sidenav").style.width="0px",document.getElementById("mainContent").style.marginLeft="0px",this.toggleNavigation=!1,setTimeout((function(){"230px"==document.getElementById("sidenav").style.width&&(document.getElementById("sidenav").style.width="0px",document.getElementById("mainContent").style.marginLeft="0px")}),100)}},{key:"navAction",value:function(e){e%2==1?(this.index=e+1,this.closeNav()):(this.index=e+1,this.openNav())}},{key:"toggleNav",value:function(){this.toggleNavigation?this.closeNav():this.openNav()}},{key:"isTokenValid",value:function(){return!(!this.cookieService.get("token")||this.isTokenExpired())||(this.cookieService.delete("token"),this.cookieService.delete("userId"),!1)}},{key:"calculateStudentProfilePercentage",value:function(){var e=2;null!=this.studentProfile.dateOfBirth&&(e+=1),null!=this.studentProfile.contact&&(e+=1),null!=this.studentProfile.learningAreas&&(e+=1),null!=this.studentProfile.profilePictureUrl&&(e+=1),e<=6&&(this.studentProfileCompleted=Math.trunc(e/6*100))}},{key:"isTokenExpired",value:function(e){if(e||(e=this.getToken()),!e)return!0;var t=this.getTokenExpirationDate(e);return void 0!==t&&!(t.valueOf()>(new Date).valueOf())}},{key:"getTokenExpirationDate",value:function(e){var t=hA(e);if(void 0===t.exp)return null;var i=new Date(0);return i.setUTCSeconds(t.exp),i}},{key:"getToken",value:function(){return this.cookieService.get("token")}},{key:"toggleAvailability",value:function(){1==this.checked?(this.checked=!1,this.tutorService.personalAvailablitySchedule.isAvailable="no"):(this.checked=!0,this.tutorService.personalAvailablitySchedule.isAvailable="yes"),this.httpService.changeAvailabilityStatus(this.tutorService.getPersonalAvailabilitySchedule().tid,this.tutorService.getPersonalAvailabilitySchedule().isAvailable).subscribe((function(e){}))}},{key:"onSignOut",value:function(){this.cookieService.delete("token"),this.cookieService.delete("userId"),this.loginService.setLoginType(null),this.loginService.setTrType(null),this.router.navigate([""])}},{key:"openProfile",value:function(){"Learner"==this.loginType?this.router.navigate(["home/studentProfile"]):"Expert"==this.loginType&&this.router.navigate(["home/profile"])}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.options.filter((function(e){return e.toLowerCase().includes(t)}))}},{key:"displaySelectedSubjects",value:function(){this.selectedSubject&&(this.loginService.setLoginType(this.loginType),this.router.navigate(["searchResults"],{queryParams:{subject:this.selectedSubject}}))}},{key:"preventBackButton",value:function(){history.pushState(null,null,location.href),this.locationStrategy.onPopState((function(){history.pushState(null,null,location.href)}))}},{key:"handleRefresh",value:function(){var e=this;this.userId=this.cookieService.get("userId"),"Learner"==hA(this.cookieService.get("token")).ROLE?(this.loginType="Learner",this.loginService.setTrType("login"),this.loginService.setLoginType(this.loginType),this.httpService.getStudentDetails(this.userId).subscribe((function(t){e.studentProfile=t,e.calculateStudentProfilePercentage(),e.studentService.setStudentProfileDetails(e.studentProfile),console.log(e.studentServce.getStudentProfileDetails().profilePictureUrl),null==e.studentServce.getStudentProfileDetails().profilePictureUrl&&(console.log(e.profilePictureUrl),e.studentServce.getStudentProfileDetails().profilePictureUrl=e.profilePictureUrl),e.httpService.getStudentSchedule(e.userId).subscribe((function(t){e.studentService.setStudentBookings(t)})),e.initialiseNotifications()}))):"Expert"==hA(this.cookieService.get("token")).ROLE&&(this.loginType="Expert",this.loginService.setTrType("login"),this.loginService.setLoginType(this.loginType),this.httpService.getTutorDetails(this.userId).subscribe((function(t){e.tutorProfile=t,e.tutorService.setTutorDetails(e.tutorProfile),e.httpService.getTutorProfileDetails(e.userId).subscribe((function(t){e.tutorProfileDetails=t,null==e.tutorService.getTutorDetials().profilePictureUrl&&(e.tutorService.getTutorDetials().profilePictureUrl=e.profilePictureUrl),e.tutorService.setTutorProfileDetails(t),e.httpService.getScheduleData(e.tutorProfile.bookingId).subscribe((function(t){e.tutorService.setPersonalAvailabilitySchedule(t),e.checked="yes"==e.tutorService.getPersonalAvailabilitySchedule().isAvailable})),e.initialiseNotifications()}))})))}}]),e}()).\u0275fac=function(e){return new(e||Dx)(Lo(cm),Lo(mb),Lo(FT),Lo(gb),Lo(ck),Lo(LT),Lo(lk),Lo(FT),Lo(BT),Lo(JT),Lo(Nu),Lo(gA))},Dx.\u0275cmp=gt({type:Dx,selectors:[["app-home"]],hostBindings:function(e,t){1&e&&Ko("resize",(function(e){return t.getScreenSize(e)}),!1,Gi)},decls:37,vars:29,consts:[["id","sidenav",1,"sidenav"],[1,"material-icons","close","closeButton",2,"cursor","pointer",3,"click"],[1,"profile-section-sidenav"],["class","profile-thumbnail","style","cursor: pointer",3,"ngStyle","click",4,"ngIf"],[1,"profile-secondaryinformaiton"],["class","profile-varient","style","cursor: pointer",3,"click",4,"ngIf"],["class","profile-varient",4,"ngIf"],["class","progressbar-container",4,"ngIf"],["class","progressbar-information",4,"ngIf"],[4,"ngIf"],[1,"navbar-nav"],["class","nav-item","routerLinkActive","nav-item-active",3,"routerLinkActiveOptions",4,"ngIf"],["id","mainContent",1,"main-content",2,"position","relative"],["id","headerContent",1,"header"],[1,"fa","fa-bars","hum-burger",3,"click"],[1,"logo",3,"click"],["class","search-box-container",4,"ngIf"],[1,"dropdown-icon-container"],[1,"fa","fa-sign-out-alt",2,"cursor","pointer",3,"click"],[1,"fa","fa-bell",2,"cursor","pointer","margin-right","20px","position","relative",3,"click"],["class","notificationNum",4,"ngIf"],["class","box",4,"ngIf"],[1,"profile-thumbnail",2,"cursor","pointer",3,"ngStyle","click"],[1,"profile-varient",2,"cursor","pointer",3,"click"],[1,"profile-varient"],[1,"progressbar-container"],[1,"progress-Bar"],[1,"outer-progressBar"],[1,"inner-progressBar"],[1,"progressbar-information"],[1,"hyperlink-cont"],["href","javascript:;",3,"click"],[2,"display","inline","margin","5px"],[1,"switch"],["type","checkbox",3,"checked","click"],[1,"slider","round"],["routerLinkActive","nav-item-active",1,"nav-item",3,"routerLinkActiveOptions"],["routerLink","/home/studentDashboard",1,"nav-link",3,"click"],["routerLink","/home/tutorDashboard",1,"nav-link",3,"click"],["routerLink","/home/experts",1,"nav-link",3,"click"],["routerLink","tutorSchedule",1,"nav-link",3,"click"],["routerLink","recordings",1,"nav-link",3,"click"],["routerLink","knowledgeBase",1,"nav-link",3,"click"],["routerLink","studentBookings",1,"nav-link",3,"click"],["routerLink","sessionNotes",1,"nav-link",3,"click"],[1,"search-box-container"],[1,"input-group"],[1,"searchButton",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["type","search","name","search","placeholder","Find Tutor by Subjects",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"notificationNum"],[1,"box"],["class","notify_item",4,"ngFor","ngForOf"],[1,"notify_item"],[1,"notify_img"],["alt","img",2,"border-radius","50%","width","40px","height","40px",3,"src"],[1,"notify_ingo"],[1,"notify_time"],[1,"notify_read"]],template:function(e,t){1&e&&(jo(0,"body"),jo(1,"div",0),jo(2,"span",1),Ko("click",(function(){return t.closeNav()})),Ss(3," close "),Ho(),jo(4,"div",2),Po(5,ax,1,3,"div",3),Po(6,ox,1,3,"div",3),jo(7,"div",4),Po(8,sx,2,1,"span",5),Po(9,lx,2,1,"span",5),Po(10,cx,1,0,"span",6),Po(11,ux,4,2,"span",7),Po(12,hx,4,2,"span",7),Po(13,dx,10,1,"div",8),Po(14,px,8,1,"div",8),Po(15,fx,6,1,"span",9),Ho(),Ho(),jo(16,"ul",10),Po(17,mx,3,2,"li",11),Po(18,gx,3,2,"li",11),Po(19,yx,3,2,"li",11),Po(20,bx,3,2,"li",11),Po(21,kx,3,2,"li",11),Po(22,Cx,3,2,"li",11),Po(23,wx,3,2,"li",11),Po(24,_x,3,2,"li",11),Ho(),Ho(),jo(25,"div",12),Uo(26,"div"),jo(27,"div",13),jo(28,"span",14),Ko("click",(function(){return t.toggleNav()})),Ho(),jo(29,"div",15),Ko("click",(function(){return t.toFacade()})),Ho(),Po(30,Ex,10,6,"div",16),jo(31,"div",17),jo(32,"span",18),Ko("click",(function(){return t.onSignOut()})),Ho(),jo(33,"span",19),Ko("click",(function(){return t.displayNotifications()})),Po(34,Tx,2,1,"span",20),Ho(),Po(35,Ix,5,2,"div",21),Ho(),Ho(),Uo(36,"router-outlet"),Ho(),Ho()),2&e&&(_r(4),hs("hideBlock",!t.toggleNavigation),_r(1),Bo("ngIf","Expert"==t.loginType),_r(1),Bo("ngIf","Learner"==t.loginType),_r(2),Bo("ngIf","Learner"==t.loginType),_r(1),Bo("ngIf","Expert"==t.loginType),_r(1),Bo("ngIf",null!=t.subject),_r(1),Bo("ngIf",100!=t.tutorProfileDetails.profileCompleted&&"Expert"==t.loginType),_r(1),Bo("ngIf","Learner"==t.loginType&&t.studentProfileCompleted&&100!=t.studentProfileCompleted),_r(1),Bo("ngIf",100!=t.tutorProfileDetails.profileCompleted&&"Expert"==t.loginType),_r(1),Bo("ngIf","Learner"==t.loginType&&t.studentProfileCompleted&&100!=t.studentProfileCompleted),_r(1),Bo("ngIf","Expert"==t.loginType&&100==t.tutorProfileDetails.profileCompleted),_r(1),hs("hideBlock",!t.toggleNavigation),_r(1),Bo("ngIf","Learner"==t.loginType),_r(1),Bo("ngIf","Expert"==t.loginType),_r(1),Bo("ngIf","Learner"==t.loginType),_r(1),Bo("ngIf","Expert"==t.loginType),_r(1),Bo("ngIf","Expert"==t.loginType),_r(1),Bo("ngIf","Expert"==t.loginType),_r(1),Bo("ngIf","Learner"==t.loginType),_r(1),Bo("ngIf","Learner"==t.loginType),_r(2),ds(t.overlay),_r(1),hs("expertNavHeight","Expert"==t.loginType),_r(3),Bo("ngIf","Learner"==t.loginType),_r(4),Bo("ngIf",0!=t.getNotificationCount()),_r(1),Bo("ngIf",t.showNotifications))},directives:[Dh,km,qh,gm,hm,qy,ug,My,eg,ix,cg,Gy,ZO,xh,pT],pipes:[$h,td],styles:['body[_ngcontent-%COMP%]{height:100%}.progressbar-container[_ngcontent-%COMP%]{display:block;float:left;width:100%;margin-top:10px;margin-bottom:10px}.progressbar-information[_ngcontent-%COMP%]{text-transform:none;font-size:12px}.progressbar-information[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#fff}.progressbar-information[_ngcontent-%COMP%]   .hyperlink-cont[_ngcontent-%COMP%]{line-height:12px}.progressbar-information[_ngcontent-%COMP%]   .hyperlink-cont[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px;text-decoration:underline}.navbar-brand[_ngcontent-%COMP%]{margin-left:3vw;margin-right:22vw}.marginZero[_ngcontent-%COMP%]{margin:0}.paddingZero[_ngcontent-%COMP%]{padding:0}.image[_ngcontent-%COMP%]{width:50vw;height:17vh}img[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%}input[type=text][_ngcontent-%COMP%]{resize:vertical}p[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{margin-right:1vw;padding:7px}.userButton[_ngcontent-%COMP%]{padding:5px;background:none;outline:none;border:none;color:#ccc}.userButton[_ngcontent-%COMP%]:hover{border:1px solid #ccc;border-radius:4px}.navbar-brand[_ngcontent-%COMP%]{color:#fff;font-size:30px;font-weight:500;margin-left:10px;border-radius:5px;cursor:pointer}.berlinText[_ngcontent-%COMP%]{font-family:custom}.switch[_ngcontent-%COMP%]{margin-top:13px;position:relative;display:inline-block;width:35px;height:15px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;left:0;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:22px;width:22px;bottom:-3px;background-color:#fff;-webkit-transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#5cb85c}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #5cb85c}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(17px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.leftBox[_ngcontent-%COMP%]{border-right:1px solid #a4a2a2}.learningArea-fields[_ngcontent-%COMP%]{margin-bottom:2.5vh}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btn-circle.btn-sm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:15px;font-size:8px;padding:0 0 6px;text-align:center}.btn-success[_ngcontent-%COMP%]{margin-right:3vw}label[_ngcontent-%COMP%]{font-size:small;color:#000}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:5;top:0;left:0;background-color:#3f023f;overflow-x:hidden;transition:.5s;padding-top:60px}.sidenav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item-active[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#7d0f7d}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:15px;color:#fff;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}#headerContent[_ngcontent-%COMP%], #mainContent[_ngcontent-%COMP%]{transition:margin-left .5s}.header[_ngcontent-%COMP%]{height:60px;background:#fff;border-bottom:1px solid rgba(177,165,165,.48);width:100%;display:block;float:left;box-shadow:0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important}.closeButton[_ngcontent-%COMP%]{display:none}.profile-section-sidenav[_ngcontent-%COMP%]{width:100%;display:flex;position:relative;margin-bottom:10px}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-thumbnail[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:100px;background-size:cover;background-repeat:no-repeat;background-position:50%;box-shadow:10px 10px 23px -16px rgba(0,0,0,.46);border:1px solid #dbdbdb;position:absolute;left:40px}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-secondaryinformaiton[_ngcontent-%COMP%]{color:#fff;width:100%;text-align:center;text-transform:uppercase;margin-top:160px}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-secondaryinformaiton[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;float:left;width:100%}.profile-section-sidenav[_ngcontent-%COMP%]   .profile-secondaryinformaiton[_ngcontent-%COMP%]   .profile-varient[_ngcontent-%COMP%]{font-size:16px;color:#fff}.progress-Bar[_ngcontent-%COMP%]{height:8px;width:40%;margin:auto}.outer-progressBar[_ngcontent-%COMP%]{background-color:#fff;height:inherit}.inner-progressBar[_ngcontent-%COMP%]{background-color:#e30084;height:inherit;width:0}.item-one[_ngcontent-%COMP%]{margin-top:2.5rem}.hideBlock[_ngcontent-%COMP%]{display:none}.expertNavHeight[_ngcontent-%COMP%]{height:65px!important}.notificationNum[_ngcontent-%COMP%]{background-color:red;position:absolute;padding-left:7px;padding-right:7px;border-radius:45%;line-height:20px;color:#fff;top:-6px}.box[_ngcontent-%COMP%]{background:#fff;border:1px solid #3f023f;box-shadow:0 2px 34px 0 rgb(0 0 0/9%);border-radius:12px;width:350px;padding:10px;position:absolute;float:left;top:42px;right:0;z-index:1000}.notify_item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 0;border-bottom:1px solid #dbdaff}.notify_item[_ngcontent-%COMP%]:last-child{border-bottom:0}.notify_img[_ngcontent-%COMP%]{margin-right:15px}.notify_time[_ngcontent-%COMP%]{color:#c5c5a6;font-size:12px}.notify_read[_ngcontent-%COMP%]{font-size:25px;margin-left:10px}']}),Dx),Lx=function e(){_classCallCheck2(this,e)},Nx=["mat-button",""],Fx=["*"],Bx=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Vx=BE(FE(VE((function e(t){_classCallCheck2(this,e),this._elementRef=t})))),jx=((Px=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;_classCallCheck2(this,i),(a=t.call(this,e))._focusMonitor=n,a._animationMode=r,a.isRoundButton=a._hasHostAttributes("mat-fab","mat-mini-fab"),a.isIconButton=a._hasHostAttributes("mat-icon-button");var o,s=_createForOfIteratorHelper(Bx);try{for(s.s();!(o=s.n()).done;){var l=o.value;a._hasHostAttributes(l)&&a._getHostElement().classList.add(l)}}catch(c){s.e(c)}finally{s.f()}return e.nativeElement.classList.add("mat-button-base"),a._focusMonitor.monitor(a._elementRef,!0),a.isRoundButton&&(a.color="accent"),a}return _createClass(i,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),e,t)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.some((function(t){return e._getHostElement().hasAttribute(t)}))}}]),i}(Vx)).\u0275fac=function(e){return new(e||Px)(Lo($s),Lo(Xw),Lo(_E,8))},Px.\u0275cmp=gt({type:Px,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,t){var i;1&e&&pc(iT,!0),2&e&&hc(i=yc())&&(t.ripple=i.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:3,hostBindings:function(e,t){2&e&&(Do("disabled",t.disabled||null),hs("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ps],attrs:Nx,ngContentSelectors:Fx,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,t){1&e&&(ts(),jo(0,"span",0),is(1),Ho(),Uo(2,"div",1),Uo(3,"div",2)),2&e&&(_r(2),hs("mat-button-ripple-round",t.isRoundButton||t.isIconButton),Bo("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",t.isIconButton)("matRippleTrigger",t._getHostElement()))},directives:[iT],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),Px),Hx=((Rx=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Rx}),Rx.\u0275inj=ve({factory:function(e){return new(e||Rx)},imports:[[nT,NE],NE]}),Rx);function Ux(e,t){if(1&e){var i=zo();jo(0,"div",1),jo(1,"button",2),Ko("click",(function(){return ti(i),$o().action()})),Ss(2),Ho(),Ho()}if(2&e){var n=$o();_r(2),Es(n.data.action)}}function qx(e,t){}var Wx,zx,Gx,Yx,Kx,Xx=Math.pow(2,31)-1,Jx=function(){function e(t,i){var n=this;_classCallCheck2(this,e),this._overlayRef=i,this._afterDismissed=new x,this._afterOpened=new x,this._onAction=new x,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe((function(){return n.dismiss()})),t._onExit.subscribe((function(){return n._finishDismiss()}))}return _createClass(e,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(e){var t=this;this._durationTimeoutId=setTimeout((function(){return t.dismiss()}),Math.min(e,Xx))}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed.asObservable()}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),e}(),Qx=new qe("MatSnackBarData"),Zx=function e(){_classCallCheck2(this,e),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},$x=((Wx=function(){function e(t,i){_classCallCheck2(this,e),this.snackBarRef=t,this.data=i}return _createClass(e,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),e}()).\u0275fac=function(e){return new(e||Wx)(Lo(Jx),Lo(Qx))},Wx.\u0275cmp=gt({type:Wx,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(jo(0,"span"),Ss(1),Ho(),Po(2,Ux,3,1,"div",0)),2&e&&(_r(1),Es(t.data.message),_r(1),Bo("ngIf",t.hasAction))},directives:[Dh,jx],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Wx),eI={snackBarState:t_("state",[a_("void, hidden",r_({transform:"scale(0.8)",opacity:0})),a_("visible",r_({transform:"scale(1)",opacity:1})),o_("* => visible",i_("150ms cubic-bezier(0, 0, 0.2, 1)")),o_("* => void, * => hidden",i_("75ms cubic-bezier(0.4, 0.0, 1, 1)",r_({opacity:0})))])},tI=((Gx=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;return _classCallCheck2(this,i),(o=t.call(this))._ngZone=e,o._elementRef=n,o._changeDetectorRef=r,o.snackBarConfig=a,o._destroyed=!1,o._onExit=new x,o._onEnter=new x,o._animationState="void",o.attachDomPortal=function(e){return o._assertNotAttached(),o._applySnackBarClasses(),o._portalOutlet.attachDomPortal(e)},o._role="assertive"!==a.politeness||a.announcementMessage?"off"===a.politeness?null:"status":"alert",o}return _createClass(i,[{key:"attachComponentPortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}},{key:"onAnimationEnd",value:function(e){var t=e.fromState,i=e.toState;if(("void"===i&&"void"!==t||"hidden"===i)&&this._completeExit(),"visible"===i){var n=this._onEnter;this._ngZone.run((function(){n.next(),n.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var e=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(Cp(1)).subscribe((function(){e._onExit.next(),e._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach((function(t){return e.classList.add(t)})):e.classList.add(t)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}]),i}(xC)).\u0275fac=function(e){return new(e||Gx)(Lo(Wc),Lo($s),Lo(Qa),Lo(Zx))},Gx.\u0275cmp=gt({type:Gx,selectors:[["snack-bar-container"]],viewQuery:function(e,t){var i;1&e&&dc(DC,!0),2&e&&hc(i=yc())&&(t._portalOutlet=i.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(e,t){1&e&&Xo("@state.done",(function(e){return t.onAnimationEnd(e)})),2&e&&(Do("role",t._role),Ds("@state",t._animationState))},features:[Ps],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&Po(0,qx,0,0,"ng-template",0)},directives:[DC],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[eI.snackBarState]}}),Gx),iI=((zx=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:zx}),zx.\u0275inj=ve({factory:function(e){return new(e||zx)},imports:[[kw,RC,id,Hx,NE],NE]}),zx),nI=new qe("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Zx}}),rI=((Kx=function(){function e(t,i,n,r,a,o){_classCallCheck2(this,e),this._overlay=t,this._live=i,this._injector=n,this._breakpointObserver=r,this._parentSnackBar=a,this._defaultConfig=o,this._snackBarRefAtThisLevel=null}return _createClass(e,[{key:"openFromComponent",value:function(e,t){return this._attach(e,t)}},{key:"openFromTemplate",value:function(e,t){return this._attach(e,t)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,n=Object.assign(Object.assign({},this._defaultConfig),i);return n.data={message:e,action:t},n.announcementMessage||(n.announcementMessage=e),this.openFromComponent($x,n)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(e,t){var i=new PC(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[Zx,t]])),n=new TC(tI,t.viewContainerRef,i),r=e.attach(n);return r.instance.snackBarConfig=t,r.instance}},{key:"_attach",value:function(e,t){var i=Object.assign(Object.assign(Object.assign({},new Zx),this._defaultConfig),t),n=this._createOverlay(i),r=this._attachSnackBarContainer(n,i),a=new Jx(r,n);if(e instanceof _l){var o=new AC(e,null,{$implicit:i.data,snackBarRef:a});a.instance=r.attachTemplatePortal(o)}else{var s=this._createInjector(i,a),l=new TC(e,void 0,s),c=r.attachComponentPortal(l);a.instance=c.instance}return this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait)").pipe(Nk(n.detachments())).subscribe((function(e){var t=n.overlayElement.classList;e.matches?t.add("mat-snack-bar-handset"):t.remove("mat-snack-bar-handset")})),this._animateSnackBar(a,i),this._openedSnackBarRef=a,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(e,t){var i=this;e.afterDismissed().subscribe((function(){i._openedSnackBarRef==e&&(i._openedSnackBarRef=null),t.announcementMessage&&i._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){e.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),t.duration&&t.duration>0&&e.afterOpened().subscribe((function(){return e._dismissAfter(t.duration)})),t.announcementMessage&&this._live.announce(t.announcementMessage,t.politeness)}},{key:"_createOverlay",value:function(e){var t=new WC;t.direction=e.direction;var i=this._overlay.position().global(),n="rtl"===e.direction,r="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!n||"end"===e.horizontalPosition&&n,a=!r&&"center"!==e.horizontalPosition;return r?i.left("0"):a?i.right("0"):i.centerHorizontally(),"top"===e.verticalPosition?i.top("0"):i.bottom("0"),t.positionStrategy=i,this._overlay.create(t)}},{key:"_createInjector",value:function(e,t){return new PC(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[Jx,t],[Qx,e.data]]))}},{key:"_openedSnackBarRef",get:function(){var e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}}]),e}()).\u0275fac=function(e){return new(e||Kx)(Ze(fw),Ze(Ww),Ze(fo),Ze(JT),Ze(Kx,12),Ze(nI))},Kx.\u0275prov=pe({factory:function(){return new Kx(Ze(fw),Ze(Ww),Ze(We),Ze(JT),Ze(Kx,12),Ze(nI))},token:Kx,providedIn:iI}),Kx),aI=((Yx=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60);return("00"+t).slice(-2)+":"+("00"+i).slice(-2)+":"+("00"+Math.floor(e-60*i)).slice(-2)}}]),e}()).\u0275fac=function(e){return new(e||Yx)},Yx.\u0275pipe=St({name:"formatTime",type:Yx,pure:!0}),Yx),oI=["canvas"],sI=["canvasScreenShare"],lI=["chatWindow"];function cI(e,t){if(1&e&&(jo(0,"span",6),jo(1,"span"),Ss(2),Xl(3,"formatTime"),Ho(),Ho()),2&e){var i=$o();_r(2),Es(Jl(3,1,i.timeLeft))}}function uI(e,t){if(1&e&&(jo(0,"span",6),jo(1,"span"),Ss(2),Xl(3,"formatTime"),Ho(),Ho()),2&e){var i=$o();_r(2),Es(Jl(3,1,i.timeLeft))}}function hI(e,t){1&e&&(jo(0,"div",55),Ss(1," File size exceeded..upload upto 100 MB "),Ho())}function dI(e,t){if(1&e){var i=zo();jo(0,"div",50),Po(1,hI,2,0,"div",51),jo(2,"div"),Ss(3),Ho(),jo(4,"div"),Ss(5),Ho(),jo(6,"div",52),jo(7,"button",53),Ko("click",(function(){return ti(i),$o(2).closeFileUploadedBox()})),Ss(8," Close "),Ho(),jo(9,"button",54),Ko("click",(function(){return ti(i),$o(2).getBase64()})),Ss(10," Send "),Ho(),Ho(),Ho()}if(2&e){var n=$o(2);_r(1),Bo("ngIf",n.fileSizeExceeded),_r(2),Es(n.fileName),_r(2),Es(n.fileSize),_r(4),Bo("disabled",n.fileSizeExceeded)}}function pI(e,t){if(1&e&&(jo(0,"p"),Ss(1),Ho()),2&e){var i=$o(2).$implicit;_r(1),Es(i.messageText)}}function fI(e,t){1&e&&Uo(0,"img",68),2&e&&Bo("src",$o(3).$implicit.dataSource,ir)}function vI(e,t){if(1&e&&(jo(0,"div",69),Ss(1),Ho()),2&e){var i=$o(3).$implicit;_r(1),Ts(" ",i.fileName," ")}}function mI(e,t){if(1&e&&(jo(0,"div",63),Po(1,fI,1,1,"img",64),Po(2,vI,2,1,"div",65),jo(3,"a",66),Uo(4,"img",67),Ho(),Ho()),2&e){var i=$o(2).$implicit;_r(1),Bo("ngIf","image/jpeg"==i.fileType),_r(1),Bo("ngIf","image/jpeg"!=i.fileType),_r(1),Bo("href",i.dataSource,ir)("download",i.fileName)}}function gI(e,t){if(1&e&&(jo(0,"div",58),jo(1,"div",59),jo(2,"div",60),jo(3,"b",61),Ss(4),Ho(),Po(5,pI,2,1,"p",5),Po(6,mI,5,4,"div",62),Ho(),Ho(),Ho()),2&e){var i=$o().$implicit;_r(4),Es(i.senderName),_r(1),Bo("ngIf",!i.dataSource),_r(1),Bo("ngIf",!i.messageText)}}function yI(e,t){if(1&e&&(jo(0,"p"),Ss(1),Ho()),2&e){var i=$o(2).$implicit;_r(1),Es(i.messageText)}}function bI(e,t){1&e&&Uo(0,"img",68),2&e&&Bo("src",$o(3).$implicit.dataSource,ir)}function kI(e,t){if(1&e&&(jo(0,"div",69),Ss(1),Ho()),2&e){var i=$o(3).$implicit;_r(1),Ts(" ",i.fileName," ")}}function CI(e,t){if(1&e&&(jo(0,"div",63),Po(1,bI,1,1,"img",64),Po(2,kI,2,1,"div",65),Ho()),2&e){var i=$o(2).$implicit;_r(1),Bo("ngIf","image/jpeg"==i.fileType),_r(1),Bo("ngIf","image/jpeg"!=i.fileType)}}function wI(e,t){if(1&e&&(jo(0,"div",70),jo(1,"div",71),Po(2,yI,2,1,"p",5),Po(3,CI,3,2,"div",62),Ho(),Ho()),2&e){var i=$o().$implicit;_r(2),Bo("ngIf",!i.dataSource),_r(1),Bo("ngIf",!i.messageText)}}function _I(e,t){if(1&e&&(jo(0,"div"),Po(1,gI,7,3,"div",56),Po(2,wI,4,2,"div",57),Ho()),2&e){var i=t.$implicit,n=$o(2);_r(1),Bo("ngIf",i.senderId!=n.senderId),_r(1),Bo("ngIf",i.senderId==n.senderId)}}function SI(e,t){1&e&&(jo(0,"div",72),jo(1,"span",73),Ss(2," videocam_off "),Ho(),Ho())}function EI(e,t){1&e&&(jo(0,"div",74),jo(1,"span",73),Ss(2," videocam_off "),Ho(),Ho())}function TI(e,t){1&e&&Uo(0,"i",80)}function AI(e,t){1&e&&Uo(0,"i",81)}function OI(e,t){if(1&e){var i=zo();jo(0,"button",77),Ko("click",(function(){return ti(i),$o(3).expandScreen()})),Po(1,TI,1,0,"i",78),Po(2,AI,1,0,"i",79),Ho()}if(2&e){var n=$o(3);_r(1),Bo("ngIf",!n.expandedScreen),_r(1),Bo("ngIf",n.expandedScreen)}}function xI(e,t){if(1&e&&(jo(0,"div",75),jo(1,"p",37),Ss(2),Ho(),Po(3,OI,3,2,"button",76),Ho()),2&e){var i=t.$implicit,n=$o(2);Bo("id",i)("ngClass",n.expandedScreen?"screen":"remote"),_r(2),Es(n.bookingDetails.studentName),_r(1),Bo("ngIf",n.expandEnabled)}}function II(e,t){1&e&&(jo(0,"span",47),Ss(1," videocam_off "),Ho())}function DI(e,t){1&e&&(jo(0,"span",47),Ss(1," videocam "),Ho())}function RI(e,t){1&e&&(jo(0,"span",47),Ss(1,"mic_off "),Ho())}function PI(e,t){1&e&&(jo(0,"span",47),Ss(1,"mic "),Ho())}function MI(e,t){1&e&&(jo(0,"span",47),Ss(1,"stop_screen_share "),Ho())}function LI(e,t){1&e&&(jo(0,"span",47),Ss(1,"screen_share "),Ho())}function NI(e,t){if(1&e){var i=zo();jo(0,"button",43),Ko("click",(function(){return ti(i),$o(2).openWhiteBoard()})),Uo(1,"img",82),Ho()}}function FI(e,t){1&e&&Uo(0,"span",83)}function BI(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",7),jo(2,"button",8),Ko("click",(function(){return ti(i),$o().closeSideNav()})),Uo(3,"img",9),Ho(),jo(4,"div",10),jo(5,"div",11),jo(6,"h1",12),Ss(7,"Meeting Chat"),Ho(),Ho(),jo(8,"div",13,14),Po(10,dI,11,4,"div",15),Po(11,_I,3,2,"div",16),Ho(),jo(12,"div",17),jo(13,"div",18),jo(14,"div",19),jo(15,"input",20),Ko("ngModelChange",(function(e){return ti(i),$o().messageText=e}))("keydown",(function(e){return ti(i),$o().handleSubmit(e)})),Ho(),jo(16,"button",21),Ko("click",(function(){return ti(i),$o().sendChatMessage()})),Uo(17,"img",22),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(18,"div",23),jo(19,"div",24),jo(20,"div",25),jo(21,"button",26),Ko("click",(function(){return ti(i),$o().erase()})),Uo(22,"img",27),Ho(),jo(23,"button",26),Ko("click",(function(e){return ti(i),$o().pencil(e,"red")})),Uo(24,"img",28),Ho(),jo(25,"button",26),Ko("click",(function(e){return ti(i),$o().pencil(e,"blue")})),Uo(26,"img",29),Ho(),jo(27,"button",26),Ko("click",(function(e){return ti(i),$o().pencil(e,"black")})),Uo(28,"img",30),Ho(),jo(29,"button",26),Ko("click",(function(){return ti(i),$o().undo()})),Uo(30,"img",31),Ho(),jo(31,"button",26),Ko("click",(function(){return ti(i),$o().redo()})),Uo(32,"img",32),Ho(),jo(33,"button",33),Ko("click",(function(){return ti(i),$o().reset()})),Ss(34," Reset "),Ho(),Ho(),Uo(35,"canvas",null,34),Ho(),Ho(),Uo(37,"div",35),jo(38,"div",36),jo(39,"p",37),Ss(40),Ho(),Ho(),Po(41,SI,3,0,"div",38),Po(42,EI,3,0,"div",39),Po(43,xI,4,4,"div",40),jo(44,"div",41),jo(45,"div",42),jo(46,"button",43),Ko("click",(function(){return ti(i),$o().muteVideo()})),Po(47,II,2,0,"span",44),Po(48,DI,2,0,"span",44),Ho(),jo(49,"button",43),Ko("click",(function(){return ti(i),$o().muteAudio()})),Po(50,RI,2,0,"span",44),Po(51,PI,2,0,"span",44),Ho(),jo(52,"button",43),Ko("click",(function(){return ti(i),$o().screenShare()})),Po(53,MI,2,0,"span",44),Po(54,LI,2,0,"span",44),Ho(),Po(55,NI,2,0,"button",45),jo(56,"button",46),Ko("click",(function(){return ti(i),$o().openChatWindow()})),jo(57,"span",47),Ss(58,"chat "),Ho(),Po(59,FI,1,0,"span",48),Ho(),jo(60,"button",49),Ko("click",(function(){return ti(i),$o().stopStream()})),jo(61,"span",47),Ss(62," call_end "),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(9),r=$o();_r(8),Bo("scrollTop",n.scrollHeight),_r(2),Bo("ngIf",r.fileUploadedBox),_r(1),Bo("ngForOf",r.meetingChat),_r(4),Bo("ngModel",r.messageText),_r(3),ds(r.myClass),_r(19),Bo("id",r.screenCallId),_r(1),Bo("id",r.localCallId),_r(2),Es(r.bookingDetails.tutorName),_r(1),Bo("ngIf","unmute host video"==r.muteHostVideoStatus),_r(1),Bo("ngIf",r.remoteVideoMute),_r(1),Bo("ngForOf",r.remoteCalls),_r(4),Bo("ngIf","unmute host video"==r.muteHostVideoStatus),_r(1),Bo("ngIf","mute host video"==r.muteHostVideoStatus),_r(2),Bo("ngIf","unmute host mic"==r.muteHostAudioStatus),_r(1),Bo("ngIf","mute host mic"==r.muteHostAudioStatus),_r(2),Bo("ngIf",0==r.hostScreenShareStatus),_r(1),Bo("ngIf",1==r.hostScreenShareStatus),_r(1),Bo("ngIf",r.screenWidth>=700),_r(4),Bo("ngIf",r.newMessageNotification)}}function VI(e,t){1&e&&(jo(0,"div",55),Ss(1," File size exceeded..upload upto 100 MB "),Ho())}function jI(e,t){if(1&e){var i=zo();jo(0,"div",87),Po(1,VI,2,0,"div",51),jo(2,"div"),Ss(3),Ho(),jo(4,"div"),Ss(5),Ho(),jo(6,"div",52),jo(7,"button",53),Ko("click",(function(){return ti(i),$o(2).closeFileUploadedBox()})),Ss(8," Close "),Ho(),jo(9,"button",54),Ko("click",(function(){return ti(i),$o(2).getBase64()})),Ss(10," Send "),Ho(),Ho(),Ho()}if(2&e){var n=$o(2);_r(1),Bo("ngIf",n.fileSizeExceeded),_r(2),Es(n.fileName),_r(2),Es(n.fileSize),_r(4),Bo("disabled",n.fileSizeExceeded)}}function HI(e,t){if(1&e&&(jo(0,"p"),Ss(1),Ho()),2&e){var i=$o(2).$implicit;_r(1),Es(i.messageText)}}function UI(e,t){1&e&&Uo(0,"img",68),2&e&&Bo("src",$o(3).$implicit.dataSource,ir)}function qI(e,t){if(1&e&&(jo(0,"div",69),Ss(1),Ho()),2&e){var i=$o(3).$implicit;_r(1),Ts(" ",i.fileName," ")}}function WI(e,t){if(1&e&&(jo(0,"div",63),Po(1,UI,1,1,"img",64),Po(2,qI,2,1,"div",65),jo(3,"a",66),Uo(4,"img",67),Ho(),Ho()),2&e){var i=$o(2).$implicit;_r(1),Bo("ngIf","image/jpeg"==i.fileType),_r(1),Bo("ngIf","image/jpeg"!=i.fileType),_r(1),Bo("href",i.dataSource,ir)("download",i.fileName)}}function zI(e,t){if(1&e&&(jo(0,"div",58),jo(1,"div",59),jo(2,"div",60),jo(3,"b",61),Ss(4),Ho(),Po(5,HI,2,1,"p",5),Po(6,WI,5,4,"div",62),Ho(),Ho(),Ho()),2&e){var i=$o().$implicit;_r(4),Es(i.senderName),_r(1),Bo("ngIf",!i.dataSource),_r(1),Bo("ngIf",!i.messageText)}}function GI(e,t){if(1&e&&(jo(0,"p"),Ss(1),Ho()),2&e){var i=$o(2).$implicit;_r(1),Es(i.messageText)}}function YI(e,t){1&e&&Uo(0,"img",68),2&e&&Bo("src",$o(3).$implicit.dataSource,ir)}function KI(e,t){if(1&e&&(jo(0,"div",69),Ss(1),Ho()),2&e){var i=$o(3).$implicit;_r(1),Ts(" ",i.fileName," ")}}function XI(e,t){if(1&e&&(jo(0,"div",63),Po(1,YI,1,1,"img",64),Po(2,KI,2,1,"div",65),Ho()),2&e){var i=$o(2).$implicit;_r(1),Bo("ngIf","image/jpeg"==i.fileType),_r(1),Bo("ngIf","image/jpeg"!=i.fileType)}}function JI(e,t){if(1&e&&(jo(0,"div",70),jo(1,"div",71),Po(2,GI,2,1,"p",5),Po(3,XI,3,2,"div",62),Ho(),Ho()),2&e){var i=$o().$implicit;_r(2),Bo("ngIf",!i.dataSource),_r(1),Bo("ngIf",!i.messageText)}}function QI(e,t){if(1&e&&(jo(0,"div"),Po(1,zI,7,3,"div",56),Po(2,JI,4,2,"div",57),Ho()),2&e){var i=t.$implicit,n=$o(2);_r(1),Bo("ngIf",i.senderId!=n.senderId),_r(1),Bo("ngIf",i.senderId==n.senderId)}}function ZI(e,t){1&e&&Uo(0,"div",35),2&e&&Bo("id",t.$implicit)}function $I(e,t){1&e&&(jo(0,"div",72),jo(1,"span",73),Ss(2," videocam_off "),Ho(),Ho())}function eD(e,t){1&e&&(jo(0,"div",74),jo(1,"span",73),Ss(2," videocam_off "),Ho(),Ho())}function tD(e,t){1&e&&(jo(0,"span",47),Ss(1," videocam_off "),Ho())}function iD(e,t){1&e&&(jo(0,"span",47),Ss(1," videocam "),Ho())}function nD(e,t){1&e&&(jo(0,"span",47),Ss(1,"mic_off "),Ho())}function rD(e,t){1&e&&(jo(0,"span",47),Ss(1,"mic "),Ho())}function aD(e,t){1&e&&Uo(0,"span",83)}function oD(e,t){1&e&&Uo(0,"i",80)}function sD(e,t){1&e&&Uo(0,"i",81)}function lD(e,t){if(1&e){var i=zo();jo(0,"button",77),Ko("click",(function(){return ti(i),$o(3).expandScreen()})),Po(1,oD,1,0,"i",78),Po(2,sD,1,0,"i",79),Ho()}if(2&e){var n=$o(3);_r(1),Bo("ngIf",!n.expandedScreen),_r(1),Bo("ngIf",n.expandedScreen)}}function cD(e,t){if(1&e&&(jo(0,"div",75),jo(1,"p",37),Ss(2),Ho(),Po(3,lD,3,2,"button",76),Ho()),2&e){var i=t.$implicit,n=$o(2);Bo("id",i)("ngClass",n.expandedScreen?"screen":"remote"),_r(2),Es(n.bookingDetails.tutorName),_r(1),Bo("ngIf",n.expandEnabled)}}function uD(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",7),jo(2,"button",8),Ko("click",(function(){return ti(i),$o().closeSideNav()})),Uo(3,"img",9),Ho(),jo(4,"div",10),jo(5,"div",11),jo(6,"h1",12),Ss(7,"Meeting Chat"),Ho(),Ho(),jo(8,"div",13,14),Po(10,jI,11,4,"div",84),Po(11,QI,3,2,"div",16),Ho(),jo(12,"div",17),jo(13,"div",18),jo(14,"div",19),jo(15,"input",20),Ko("ngModelChange",(function(e){return ti(i),$o().messageText=e}))("keydown",(function(e){return ti(i),$o().handleSubmit(e)})),Ho(),jo(16,"button",21),Ko("click",(function(){return ti(i),$o().sendChatMessage()})),Uo(17,"img",22),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(18,"div",23),jo(19,"div",24),Uo(20,"canvas",null,34),Ho(),Ho(),Po(22,ZI,1,1,"div",85),jo(23,"div",36),jo(24,"p",37),Ss(25),Ho(),Ho(),Po(26,$I,3,0,"div",38),Po(27,eD,3,0,"div",39),jo(28,"div",41),jo(29,"div",42),jo(30,"button",43),Ko("click",(function(){return ti(i),$o().muteVideo()})),Po(31,tD,2,0,"span",44),Po(32,iD,2,0,"span",44),Ho(),jo(33,"button",43),Ko("click",(function(){return ti(i),$o().muteAudio()})),Po(34,nD,2,0,"span",44),Po(35,rD,2,0,"span",44),Ho(),jo(36,"button",46),Ko("click",(function(){return ti(i),$o().openChatWindow()})),jo(37,"span",47),Ss(38,"chat "),Ho(),Po(39,aD,1,0,"span",48),Ho(),jo(40,"button",86),Ko("click",(function(){return ti(i),$o().stopStream()})),jo(41,"span",47),Ss(42," call_end "),Ho(),Ho(),Ho(),Ho(),Po(43,cD,4,4,"div",40),Ho()}if(2&e){var n=Mo(9),r=$o();_r(8),Bo("scrollTop",n.scrollHeight),_r(2),Bo("ngIf",r.fileUploadedBox),_r(1),Bo("ngForOf",r.meetingChat),_r(4),Bo("ngModel",r.messageText),_r(3),ds(r.myClass),_r(4),Bo("ngForOf",r.screenRemoteCalls),_r(1),Bo("id",r.localCallId),_r(2),Es(r.bookingDetails.studentName),_r(1),Bo("ngIf","unmute host video"==r.muteHostVideoStatus),_r(1),Bo("ngIf",r.remoteVideoMute),_r(4),Bo("ngIf","unmute host video"==r.muteHostVideoStatus),_r(1),Bo("ngIf","mute host video"==r.muteHostVideoStatus),_r(2),Bo("ngIf","unmute host mic"==r.muteHostAudioStatus),_r(1),Bo("ngIf","mute host mic"==r.muteHostAudioStatus),_r(4),Bo("ngIf",r.newMessageNotification),_r(4),Bo("ngForOf",r.remoteCalls)}}var hD,dD,pD,fD,vD,mD=Pk(3e3,1e3),gD=((pD=function(){function e(t,i,n,r,a,o,s,l,c){_classCallCheck2(this,e),this.ngxAgoraService=t,this.meetingService=i,this.router=n,this.snackbar=r,this.sanitizer=a,this.locationStrategy=o,this.loginService=s,this.httpService=l,this.cookieService=c,this.width=1175,this.height=650,this.newMessageNotification=!1,this.meetingChat=[],this.greetings=[],this.showConversation=!1,this.chatOpen=!1,this.myClass="hideBlock",this.myScreenShareClass="hideBlock",this.uploadedProfilePicture=null,this.undoStack=[],this.redoStack=[],this.list=[],this.expandedScreen=!1,this.expandEnabled=!0,this.remoteJoined=!1,this.meeting=new fb,this.localCallId="agora_local",this.screenCallId="agora_screen",this.remoteCalls=[],this.screenRemoteCalls=[],this.localStreams=[],this.remoteVideoMute=!1,this.muteHostVideoStatus="mute host video",this.hostVideo=!0,this.muteHostAudioStatus="mute host mic",this.hostScreenShareStatus=!1,this.timelimit=0,this.timeLeft=this.timelimit,this.openWhiteBoardStatus=!1,this.message=new Lx,this.fileMessage=new Lx,this.messageToAdd=new Lx,this.fileUploadedBox=!1,this.fileSizeExceeded=!1,this.fileName="",this.fileSize="",this.config={duration:7e3,horizontalPosition:"center",verticalPosition:"top"},this.uid=Math.floor(100*Math.random()),this.sid=76}return _createClass(e,[{key:"getScreenSize",value:function(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}},{key:"ngAfterViewInit",value:function(){this.canvasEl=this.canvas.nativeElement,this.cx=this.canvasEl.getContext("2d"),this.canvasEl.width=this.width,this.canvasEl.height=this.height,this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#000",this.connectToMeetingWebSocket(this.meeting.roomName),this.captureEvents(this.canvasEl),this.getMousePosition(this.canvasEl)}},{key:"ngOnInit",value:function(){var e=this;null==this.meetingService.getMeeting().roomId&&this.handleRefresh(),this.preventBackButton(),this.width=window.screen.width/100*97,this.height=window.screen.height/100*80,this.screenWidth=window.screen.width,this.screenHeight=window.screen.height,this.meeting=this.meetingService.getMeeting(),this.senderName=this.meeting.userName,this.senderId=this.meeting.userId,this.bookingDetails=this.meetingService.getBooking(),this.timelimit=60*this.calculateRemainingTime(),this.shortName(),this.client=this.ngxAgoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers(),this.localStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.assignLocalStreamHandlers(),this.initLocalStream((function(){return e.join((function(t){return e.publish()}),(function(e){return console.error(e)}))}))}},{key:"handleRefresh",value:function(){"Learner"==hA(this.cookieService.get("token")).ROLE?this.router.navigate(["home/studentDashboard"]):"Expert"==hA(this.cookieService.get("token")).ROLE&&this.router.navigate(["home/tutorDashboard"])}},{key:"calculateRemainingTime",value:function(){var e=60*this.bookingDetails.endTimeHour+this.bookingDetails.endTimeMinute,t=new Date,i=60*t.getHours()+t.getMinutes();return e>i?e-i:null}},{key:"preventBackButton",value:function(){history.pushState(null,null,location.href),this.locationStrategy.onPopState((function(){history.pushState(null,null,location.href)}))}},{key:"shareScreen",value:function(){var e=this;"host"==this.meetingService.getMeeting().role&&(this.screenClient=this.ngxAgoraService.createClient({mode:"rtc",codec:"h264"}),this.assignScreenClientHandlers(),this.screenStream=this.ngxAgoraService.createStream({streamID:this.uid,audio:!1,video:!1,screen:!0}),this.initScreenStream((function(){return e.screenJoin((function(t){return e.screenPublish()}),(function(e){return console.error(e)}))})))}},{key:"endCall",value:function(){"host"==this.meeting.role&&null!=this.screenStream&&(this.screenStream.stop(),this.screenClient.leave(),this.screenStream.close()),this.client.unpublish(this.localStream,(function(e){})),this.client.leave(),this.localStream.stop(),this.localStream.close(),"host"==this.meeting.role?this.router.navigate(["home/tutorDashboard"]):"student"==this.meeting.role&&this.router.navigate(["home/studentDashboard"])}},{key:"limitStream",value:function(){var e=this;this.remoteJoined=!0;var t=this.timelimit-600;this.subscription=mD.subscribe((function(i){e.timeLeft=e.timelimit-i,i==t&&"/meeting"===e.router.url&&e.snackbar.open("10 Minutes Left ! Hurry up","close",e.config),i==e.timelimit&&e.httpService.updateBookingStatus(e.bookingDetails.bid,"Successful").subscribe((function(t){e.localStream.stop(),e.subscription.unsubscribe(),e.endCall()}))}))}},{key:"assignClientHandlers",value:function(){var e=this;this.client.on("stream-published",(function(e){})),this.client.on("error",(function(t){"DYNAMIC_KEY_TIMEOUT"===t.reason&&e.client.renewChannelKey("",(function(){return function(e){return console.error("Renew channel key failed: ",e)}}))})),this.client.on("stream-added",(function(t){var i=t.stream,n=i.getId();e.localStreams.includes(n.toString())||76==n?"student"==e.meetingService.getMeeting().role&&76==n&&e.client.subscribe(i,{audio:!0,video:!0},(function(e){})):e.client.subscribe(i,{audio:!0,video:!0},(function(e){}))})),this.client.on("stream-subscribed",(function(t){var i=t.stream,n=e.getRemoteId(i);76==i.getId()?(e.screenRemoteCalls.push(n),setTimeout((function(){return i.play(n)}),1e3)):e.remoteCalls.length||(e.remoteCalls.push(n),setTimeout((function(){return i.play(n)}),1e3),e.limitStream())})),this.client.on("stream-removed",(function(t){var i=t.stream,n=(e.getRemoteId(i),i.getId());76!=n?i&&(i.stop(),e.remoteCalls=[],e.endCall()):76==n&&(i.stop(),i.close())})),this.client.on("mute-video",(function(t){e.remoteVideoMute=!0})),this.client.on("unmute-video",(function(t){e.remoteVideoMute=!1})),this.client.on("peer-leave",(function(t){var i=t.stream;i&&(i.stop(),e.endCall(),e.remoteCalls=e.remoteCalls.filter((function(t){return t!==""+e.getRemoteId(i)})))}))}},{key:"assignScreenClientHandlers",value:function(){this.screenClient.on("stream-published",(function(e){}))}},{key:"getRemoteId",value:function(e){return"agora_remote-"+e.getId()}},{key:"assignLocalStreamHandlers",value:function(){this.localStream.on("accessAllowed",(function(){})),this.localStream.on("accessDenied",(function(){}))}},{key:"initLocalStream",value:function(e){var t=this;this.localStream.init((function(){t.localStream.play(t.localCallId),e&&e()}),(function(e){return console.error("getUserMedia failed",e)}))}},{key:"initScreenStream",value:function(e){var t=this;this.screenStream.init((function(){t.screenStream.play(t.screenCallId),e&&e()}),(function(e){return console.error("getUserMedia failed",e)}))}},{key:"join",value:function(e,t){this.client.join(null,this.meetingService.getMeeting().roomName,this.uid,e,t)}},{key:"publish",value:function(){this.client.publish(this.localStream,(function(e){}))}},{key:"screenJoin",value:function(e,t){this.localStreams.push(this.sid.toString()),this.screenClient.join(null,this.meetingService.getMeeting().roomName,this.sid,e,t)}},{key:"screenPublish",value:function(){this.screenClient.publish(this.screenStream,(function(e){}))}},{key:"stopStream",value:function(){confirm("Are you sure you want to cancel !")&&this.endCall()}},{key:"muteVideo",value:function(){"mute host video"==this.muteHostVideoStatus?(this.localStream.muteVideo(),this.muteHostVideoStatus="unmute host video"):"unmute host video"==this.muteHostVideoStatus&&(this.localStream.unmuteVideo(),this.muteHostVideoStatus="mute host video")}},{key:"muteAudio",value:function(){"mute host mic"==this.muteHostAudioStatus?(this.localStream.muteAudio(),this.muteHostAudioStatus="unmute host mic"):(this.localStream.unmuteAudio(),this.muteHostAudioStatus="mute host mic")}},{key:"screenShare",value:function(){0==this.hostScreenShareStatus?(this.hostScreenShareStatus=!0,this.shareScreen()):(this.hostScreenShareStatus=!1,this.screenStream.stop(),this.screenClient.unpublish(this.screenStream,(function(e){})),this.screenClient.leave(),this.screenStream.close())}},{key:"expandScreen",value:function(){this.expandedScreen=!this.expandedScreen}},{key:"openWhiteBoard",value:function(){0==this.openWhiteBoardStatus?(this.openWhiteBoardStatus=!0,this.myClass="",this.expandEnabled=!1,this.myScreenShareClass="hideBlock",this.initiateWhiteBoardForStudent()):(this.openWhiteBoardStatus=!this.openWhiteBoardStatus,this.myClass="hideBlock",this.expandEnabled=!0,this.closeWhiteBoardForStudent())}},{key:"openChatWindow",value:function(){0==this.chatOpen?(this.openSideNav(),this.chatOpen=!0,this.newMessageNotification=!1):(this.chatOpen=!1,this.closeSideNav())}},{key:"scrollToBottom",value:function(){try{this.chatWindow.nativeElement.scrollTop=this.chatWindow.nativeElement.scrollHeight}catch(e){}}},{key:"openSideNav",value:function(){document.getElementById("mySidenav").style.width=this.screenWidth<=500?"100%":"400px"}},{key:"closeSideNav",value:function(){document.getElementById("mySidenav").style.width="0",this.chatOpen=!1,this.newMessageNotification=!1}},{key:"captureEvents",value:function(e){var t=this;vk(e,"mousedown").pipe(Ap((function(t){return vk(e,"mousemove").pipe(Nk(vk(e,"mouseup")),Nk(vk(e,"mouseleave")),(function(e){return e.lift(new Hk)}))}))).subscribe((function(i){var n=e.getBoundingClientRect(),r={x:i[0].clientX-n.left,y:i[0].clientY-n.top},a={x:i[1].clientX-n.left,y:i[1].clientY-n.top};t.sendCoordinates("drawing",null,t.cx.strokeStyle,t.cx.lineWidth,r,a),t.drawOnCanvas(r,a)}))}},{key:"getMousePosition",value:function(e){var t=this;e.addEventListener("mouseup",(function(){var i=e.toDataURL("image/png");t.list.push(i),t.undoStack.push(i)}))}},{key:"drawOnCanvas",value:function(e,t){this.cx&&(this.cx.beginPath(),e&&(this.cx.moveTo(e.x,e.y),this.cx.lineTo(t.x,t.y),this.cx.stroke()))}},{key:"erase",value:function(){this.cx.lineWidth=50,this.cx.lineCap="round",this.cx.strokeStyle="#fff"}},{key:"pencil",value:function(e,t){"black"==t?(this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#000"):"red"==t?(this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#FF0000"):"blue"==t&&(this.cx.lineWidth=5,this.cx.lineCap="round",this.cx.strokeStyle="#0000FF")}},{key:"reset",value:function(){this.sendCoordinates("reset",null,null,null,null,null),this.cx.clearRect(0,0,this.cx.canvas.width,this.cx.canvas.height)}},{key:"undo",value:function(){var e=this;if(0==this.undoStack.length)this.cx.clearRect(0,0,this.width,this.height);else{var t=this.undoStack.pop();this.redoStack.push(this.list.pop());var i=document.createElement("img");i.src=t.toString(),i.setAttribute("width","1000"),i.setAttribute("height","480"),this.sendCoordinates("undo",i.src,null,null,null,null),i.onload=function(t){e.cx.clearRect(0,0,e.width,e.height),e.cx.drawImage(i,0,0)}}}},{key:"redo",value:function(){var e=this,t=this.redoStack.pop();this.list.push(t),this.undoStack.push(t);var i=document.createElement("img");i.src=t.toString(),i.setAttribute("width","1000"),i.setAttribute("height","480"),this.sendCoordinates("redo",i.src,null,null,null,null),i.onload=function(t){e.cx.clearRect(0,0,e.width,e.height),e.cx.drawImage(i,0,0)}}},{key:"connectToMeetingWebSocket",value:function(e){var t=this,i=new vA("https://backend.fellowgenius.com/fellowGenius");this.ws=fA.over(i);var n=this;this.ws.connect({},(function(i){n.ws.subscribe("/errors",(function(e){alert("Error "+e.body)})),n.ws.subscribe("/inbox/whiteBoard/"+e,(function(e){var i=JSON.parse(e.body);if("initiateWhiteBoard"==i.action)"student"==t.meetingService.getMeeting().role&&(t.expandEnabled=!1,t.myClass="");else if("drawing"==i.action)"student"==t.meetingService.getMeeting().role&&(t.cx.strokeStyle=i.color,t.cx.lineWidth=i.lineWidth,"#ffffff"==i.color&&(t.cx.lineCap="round"),t.drawOnCanvas(i.prevPos,i.currentPos));else if("closeWhiteBoard"==i.action)"student"==t.meetingService.getMeeting().role&&(t.expandEnabled=!0,t.myClass="hideBlock");else if("reset"==i.action)"student"==t.meetingService.getMeeting().role&&t.cx.clearRect(0,0,t.cx.canvas.width,t.cx.canvas.height);else if(("undo"==i.action||"redo"==i.action)&&"student"==t.meetingService.getMeeting().role){var n=document.createElement("img");n.src=i.dataSource.toString(),n.setAttribute("width","1000"),n.setAttribute("height","480"),n.onload=function(e){t.cx.clearRect(0,0,t.width,t.height),t.cx.drawImage(n,0,0)}}})),n.ws.subscribe("/inbox/MeetingChat/"+e,(function(e){var t=JSON.parse(e.body),i=new Lx;i.messageText=t.message.messageText,i.senderName=t.message.senderName,i.senderId=t.message.senderId,i.dataSource=t.message.dataSource,i.fileName=t.message.fileName,i.fileType=t.message.fileType,n.scrollToBottom(),i.senderId!=n.meeting.userId&&0==n.chatOpen&&(n.newMessageNotification=!0),null==i.messageText&&n.openBlob(i),n.meetingChat.push(i)}))}),(function(e){console.log("re initiating the connection !"),setTimeout((function(){t.connectToMeetingWebSocket(t.meeting.roomName)}),5e3)}))}},{key:"sendCoordinates",value:function(e,t,i,n,r,a){var o=JSON.stringify({action:e,dataSource:t,color:i,lineWidth:n,prevPos:r,currentPos:a});this.ws.send("/sendData/"+this.meeting.roomName,{},o)}},{key:"initiateWhiteBoardForStudent",value:function(){this.sendCoordinates("initiateWhiteBoard",null,null,null,null,null)}},{key:"closeWhiteBoardForStudent",value:function(){this.sendCoordinates("closeWhiteBoard",null,null,null,null,null)}},{key:"sendChatMessage",value:function(){""!=this.messageText&&(this.message.messageText=this.messageText,this.message.senderId=this.senderId,this.message.senderName=this.senderName,this.message.sentTime=(new Date).toTimeString(),this.message.date=(new Date).toLocaleString(),this.sendMessageToMeeting(this.message,this.meeting.roomName),this.messageText="")}},{key:"sendMessageToMeeting",value:function(e,t){var i=JSON.stringify({message:e});this.ws.send("/sendChat/"+t,{},i)}},{key:"handleSubmit",value:function(e){13===e.keyCode&&this.sendChatMessage()}},{key:"handleFileInput",value:function(e){var t=e.item(0);this.uploadedFile=t,this.fileUploadedBox=!0,this.fileName=t.name,t.size<=104857600?this.fileSize=t.size>1048576?(t.size/1048576).toFixed(2).toString()+" MB":(t.size/1024).toFixed(2).toString()+" KB":this.fileSizeExceeded=!0}},{key:"getBase64",value:function(){var e=this,t=new FileReader;t.readAsDataURL(this.uploadedFile),t.onload=function(){var i=t.result,n=new Lx;n.senderName=e.senderName,n.dataSource=i,n.fileName=e.uploadedFile.name,n.fileType=e.uploadedFile.type,e.fileType=n.fileType,n.senderId=e.senderId,e.sendFile(n,e.meeting.roomName)},t.onerror=function(e){}}},{key:"openBlob",value:function(e){var t=this.b64toBlob(e.dataSource,e.fileType);e.dataSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t))}},{key:"b64toBlob",value:function(e,t){for(var i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),r=new Uint8Array(n),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);return new Blob([n],{type:t})}},{key:"sendFile",value:function(e,t){var i=JSON.stringify({message:e});this.ws.send("/sendChat/"+t,{},i),this.closeFileUploadedBox()}},{key:"closeFileUploadedBox",value:function(){this.uploadedFile=null,this.fileUploadedBox=!1,this.fileSizeExceeded=!1}},{key:"shortName",value:function(){var e=this.meeting.userName.split(" ");if(null!=e[1])var t=e[0],i=e[1];else t=e[0];if(null==i){var n=t[0].toString();this.meeting.userName=n}else n=t[0].toString().concat(i[0].toString()),this.meeting.userName=n}}]),e}()).\u0275fac=function(e){return new(e||pD)(Lo(wA),Lo(mb),Lo(cm),Lo(rI),Lo(Hd),Lo(Nu),Lo(gb),Lo(lk),Lo(BT))},pD.\u0275cmp=gt({type:pD,selectors:[["app-meeting"]],viewQuery:function(e,t){var i;1&e&&(pc(oI,!0),pc(sI,!0),pc(lI,!0)),2&e&&(hc(i=yc())&&(t.canvas=i.first),hc(i=yc())&&(t.canvasScreenShare=i.first),hc(i=yc())&&(t.chatWindow=i.first))},hostBindings:function(e,t){1&e&&Ko("resize",(function(e){return t.getScreenSize(e)}),!1,Gi)},inputs:{width:"width",height:"height"},decls:10,vars:7,consts:[[2,"max-width","100vw","max-height","100vh"],[1,"box"],[1,"short-name"],[1,"shortNameText"],["class","durationContainer",4,"ngIf"],[4,"ngIf"],[1,"durationContainer"],["id","mySidenav",1,"sidenav","boxShadow",2,"position","absolute"],["title","close",1,"closeIconButton",3,"click"],["src","../../../assets/icons/close.svg","alt","",2,"height","15px"],[2,"padding","30px","height","100%"],[1,"sideNavHeader"],[2,"margin","0"],[1,"sideNavBody",2,"position","relative",3,"scrollTop"],["chatWindow",""],["style","\n              position: absolute;\n              bottom: 5px;\n              width: 98%;\n              left: 3px;\n              padding: 20px;\n              background-color: white;\n              box-shadow: 0px 0px 5px rgb(199, 203, 217, 0.7);\n            ",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"sideNavFooter"],[1,"type_msg"],[1,"input_msg_write"],["type","text","placeholder","Type a message",1,"write_msg",3,"ngModel","ngModelChange","keydown"],["type","button",1,"msg_send_btn",3,"click"],["src","../../../../assets/icons/send.png","height","15px","width","15px"],[1,"canvasWrapper"],[1,"canvas-body"],[1,"tools"],[1,"toolButtons",3,"click"],["src","../../../assets/icons/rubber.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/redPencil.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/bluePencil.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/blackPencil.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/undo.svg",2,"width","30px","height","30px"],["src","../../../assets/icons/redo.svg",2,"width","30px","height","30px"],[1,"toolButtons",2,"width","70px",3,"click"],["canvas",""],[1,"screen",3,"id"],[1,"local",3,"id"],[1,"nameText"],["class","bg-image local",4,"ngIf"],["class","bg-image remote",4,"ngIf"],[3,"id","ngClass",4,"ngFor","ngForOf"],[1,"control-nav"],[2,"width","max-content","margin","auto"],[1,"btn","btn-primary",3,"click"],["class","material-icons control-icons",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-success",2,"position","relative","padding","8px 16px",3,"click"],[1,"material-icons","control-icons"],["style","\n              background-color: #32cd32;\n              width: 10px;\n              height: 10px;\n              border-radius: 50%;\n              position: absolute;\n              top: -5px;\n              right: -5px;\n            ",4,"ngIf"],[1,"btn","btn-danger",2,"margin-right","10px","padding","8px 16px",3,"click"],[2,"position","absolute","bottom","5px","width","98%","left","3px","padding","20px","background-color","white","box-shadow","0px 0px 5px rgb(199, 203, 217, 0.7)"],["style","color: red",4,"ngIf"],[2,"float","right"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[2,"color","red"],["class","incoming_msg",4,"ngIf"],["class","outgoing_msg",4,"ngIf"],[1,"incoming_msg"],[1,"received_msg"],[1,"received_withd_msg"],[2,"color","black"],["class","fileWrapper",4,"ngIf"],[1,"fileWrapper"],["alt","","class","imageTransfer",3,"src",4,"ngIf"],["class","fileName",4,"ngIf"],[1,"downloadButton",3,"href","download"],["src","../../../assets/icons/download_black.svg","alt","",2,"height","30px","width","30px","margin","10px"],["alt","",1,"imageTransfer",3,"src"],[1,"fileName"],[1,"outgoing_msg"],[1,"sent_msg"],[1,"bg-image","local"],[1,"material-icons","blurred-icons"],[1,"bg-image","remote"],[3,"id","ngClass"],["class","expand-button",3,"click",4,"ngIf"],[1,"expand-button",3,"click"],["class","fa fa-expand","aria-hidden","true",4,"ngIf"],["class","fa fa-compress","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-expand"],["aria-hidden","true",1,"fa","fa-compress"],["src","../../../assets/icons/whiteboard.svg","alt","",2,"width","21px","height","32px"],[2,"background-color","#32cd32","width","10px","height","10px","border-radius","50%","position","absolute","top","-5px","right","-5px"],["style","\n              position: absolute;\n              bottom: 5px;\n              width: 98%;\n              left: 3px;\n              padding: 20px;\n              box-shadow: 0px 0px 5px rgb(199, 203, 217, 0.7);\n            ",4,"ngIf"],["class","screen",3,"id",4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"padding","8px 16px",3,"click"],[2,"position","absolute","bottom","5px","width","98%","left","3px","padding","20px","box-shadow","0px 0px 5px rgb(199, 203, 217, 0.7)"]],template:function(e,t){1&e&&(jo(0,"body",0),Uo(1,"div",1),jo(2,"div",2),jo(3,"p",3),Ss(4),Xl(5,"uppercase"),Ho(),Ho(),Po(6,cI,4,3,"span",4),Po(7,uI,4,3,"span",4),Po(8,BI,63,20,"div",5),Po(9,uD,44,17,"div",5),Ho()),2&e&&(_r(4),Ts(" ",Jl(5,5,t.meeting.userName)," "),_r(2),Bo("ngIf",t.remoteJoined&&"host"==t.meeting.role),_r(1),Bo("ngIf",t.remoteJoined&&"student"==t.meeting.role),_r(1),Bo("ngIf","host"==t.meeting.role),_r(1),Bo("ngIf","student"==t.meeting.role))},directives:[Dh,xh,eg,cg,Uy,Ah],pipes:[ed,aI],styles:[".local[_ngcontent-%COMP%]{bottom:1rem}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{position:fixed;left:1rem;width:20vw;height:20vh;border-radius:5px;overflow:hidden;z-index:10}.remote[_ngcontent-%COMP%]{bottom:14rem}.screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:4}.control-nav[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:.5rem;z-index:10}button[_ngcontent-%COMP%]{margin:.5vh 1vw .5vh .5vw;border-radius:50%}.control-icons[_ngcontent-%COMP%]{box-shadow:0 0 50px #1d1900;margin-top:5px;font-size:20px}.control-nav-div[_ngcontent-%COMP%]{float:right;margin-top:.6vh}.timer[_ngcontent-%COMP%]{color:silver;font-size:25px;margin-left:10px;border-right:1px solid silver;padding-right:10px}.bg-image[_ngcontent-%COMP%]{background-color:#7d0f7d;text-align:center;z-index:11}.blurred-icons[_ngcontent-%COMP%]{color:#fff;font-size:50px;margin-top:50px}.short-name[_ngcontent-%COMP%]{position:relative;display:table;z-index:3;margin-left:auto;margin-right:auto;border-radius:100%;background-color:#c7cbd9;top:20vh;box-shadow:0 0 50px #1d1d00;width:180px;height:180px;text-align:center;border-radius:3px solid #00f;border-style:hidden}.container[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,rgba(192,33,236,.9),#f4e5f8)}.box[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed}.box[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,#fff,#ffc8ef)}.shortNameText[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;display:table-cell;font-size:11vh;margin:0 auto}.nameText[_ngcontent-%COMP%]{bottom:0;font-size:larger;background-color:#000;padding:4px 7px;font-weight:300}.expand-button[_ngcontent-%COMP%], .nameText[_ngcontent-%COMP%]{color:#fff;position:absolute;z-index:1;right:0;margin:0}.expand-button[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);font-size:15px;border-radius:1px;top:0;padding:8px;cursor:pointer;outline:none;border:none;width:40px;height:40px}.tools[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1;margin-top:5px;margin-left:5px}.canvas-body[_ngcontent-%COMP%]{position:relative;overflow:auto;max-height:100%}.toolButtons[_ngcontent-%COMP%]{margin:5px;background:#fff;box-shadow:0 0 4px rgba(199,203,217,.7);border:none;outline:none;height:50px;width:50px;padding:10px}.whiteBoard[_ngcontent-%COMP%]{background-color:#fff}.canvasWrapper[_ngcontent-%COMP%]{background-color:#fff}.canvasWrapper[_ngcontent-%COMP%], .canvasWrapperScreenShare[_ngcontent-%COMP%]{position:fixed;top:0;z-index:10;height:100vh;width:100vw}canvas[_ngcontent-%COMP%]{display:block}.hideBlock[_ngcontent-%COMP%]{display:none}.redBackground[_ngcontent-%COMP%]{background-color:red}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;z-index:1001;right:0;top:0;background-color:#fff;overflow-x:hidden;transition:.4s}.boxShadow[_ngcontent-%COMP%]{box-shadow:0 0 5px rgba(199,203,217,.7)}.sideNavBody[_ngcontent-%COMP%]{height:85%;margin-bottom:15px;overflow-y:auto;margin-top:20px}.sideNavFooter[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:10px}.closeIconButton[_ngcontent-%COMP%]{background-color:#fff;border:none;position:absolute;width:30px;height:30px;top:15px;right:20px;font-size:larger;cursor:pointer;color:#8d89aa;outline:none}.closeIconButton[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:50%;color:#000}.input_msg_write[_ngcontent-%COMP%]{float:left;width:86%;padding-left:25px;margin-right:7px}.input_msg_write[_ngcontent-%COMP%], .write_msg[_ngcontent-%COMP%]{background-color:#ebebeb;border:none;color:#000;font-size:15px;min-height:48px;border-radius:26px;outline:none}.write_msg[_ngcontent-%COMP%]{width:84%}.type_msg[_ngcontent-%COMP%]{border-top:none;position:relative;margin-bottom:20px}.msg_send_btn[_ngcontent-%COMP%]{background:#36404a none repeat scroll 0 0;border:none;border-radius:50%;color:#fff;cursor:pointer;font-size:17px;height:33px;position:absolute;right:50px;top:4px;width:33px}img[_ngcontent-%COMP%]{max-width:100%}.incoming_msg_img[_ngcontent-%COMP%]{display:inline-block;width:6%}.received_msg[_ngcontent-%COMP%]{color:#fff;display:inline-block;vertical-align:top;width:100%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#c8c8c8 none repeat scroll 0 0;border-radius:3px;color:#000;font-size:14px;padding:5px 10px 5px 12px;width:100%}.time_date[_ngcontent-%COMP%]{color:#fff;display:block;font-size:12px;margin:8px 0 0}.received_withd_msg[_ngcontent-%COMP%]{width:57%}.mesgs[_ngcontent-%COMP%]{float:left;padding:30px 15px 0 25px;width:60%}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#2d6b86 none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px;width:60%}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0}.uploadButton[_ngcontent-%COMP%]{background:none;border:1px solid #210184;padding-top:5px;padding-bottom:5px;outline:none;color:#210184;border-radius:5px;height:40px;width:40px;font-size:large;margin:4px 0 0;border-radius:50%}.uploadButton[_ngcontent-%COMP%]:hover{background-color:#210184;color:#fff}.sent_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%]{background:#2d6b86 none repeat scroll 0 0;color:#fff}.received_withd_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%], .sent_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%]{border-radius:3px;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.received_withd_msg[_ngcontent-%COMP%]   .fileWrapper[_ngcontent-%COMP%]{background:#c8c8c8 none repeat scroll 0 0;color:#000}.imageTransfer[_ngcontent-%COMP%]{height:10vw;width:10vw;margin:5px;border-radius:5px}.downloadButton[_ngcontent-%COMP%]{background:none;outline:none;border:none}.fileName[_ngcontent-%COMP%]{border:1px solid #000;border-radius:5px}.fileName[_ngcontent-%COMP%], .fileNameOutgoing[_ngcontent-%COMP%]{display:inline-block;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:10px}.fileNameOutgoing[_ngcontent-%COMP%]{border:1px solid #fff;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}[id^=video][_ngcontent-%COMP%]{-o-object-fit:inherit!important;object-fit:inherit!important}.durationContainer[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;background-color:#892687;padding:6px 10px;color:#fff;border-radius:5px;font-size:1.35rem}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (min-device-height:501px) and (-webkit-min-device-pixel-ratio:2){.local[_ngcontent-%COMP%]{right:1rem}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{position:fixed;width:20vw;height:17vh;top:1rem!important;border-radius:5px;overflow:hidden;z-index:10;left:unset}.remote[_ngcontent-%COMP%]{right:8rem}.control-nav[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.local[_ngcontent-%COMP%]   .nameText[_ngcontent-%COMP%]{display:none}.nameText[_ngcontent-%COMP%]{color:#fff;position:absolute;bottom:0;z-index:1;font-size:xx-small;right:0;background-color:rgba(0,0,0,.5);margin:0;padding:4px 7px;font-weight:400}.expand-button[_ngcontent-%COMP%]{display:none}.short-name[_ngcontent-%COMP%]{top:25vh}.screen[_ngcontent-%COMP%]{position:fixed;top:7rem;left:0;width:100vw;height:73vh;z-index:4}[id^=video][_ngcontent-%COMP%]{-o-object-fit:inherit!important;object-fit:inherit!important}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.blurred-icons[_ngcontent-%COMP%]{color:#fff;font-size:30px;margin-top:40px}.local[_ngcontent-%COMP%]{right:1rem}.local[_ngcontent-%COMP%], .remote[_ngcontent-%COMP%]{position:fixed;width:20vw;height:17vh;top:1rem!important;border-radius:5px;overflow:hidden;z-index:10;left:unset}.remote[_ngcontent-%COMP%]{right:8rem}.control-nav[_ngcontent-%COMP%]{margin-top:61vh}.local[_ngcontent-%COMP%]   .nameText[_ngcontent-%COMP%]{display:none}.nameText[_ngcontent-%COMP%]{color:#fff;position:absolute;bottom:0;width:100%;z-index:1;font-size:xx-small;right:0;background-color:rgba(0,0,0,.5);margin:0;padding:4px 7px;font-weight:400}.expand-button[_ngcontent-%COMP%]{display:none}.short-name[_ngcontent-%COMP%]{top:25vh}.screen[_ngcontent-%COMP%]{position:fixed;top:7rem;left:0;width:100vw;height:73vh;z-index:4}[id^=video][_ngcontent-%COMP%]{-o-object-fit:inherit!important;object-fit:inherit!important}}}"]}),pD),yD=((dD=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:dD}),dD.\u0275inj=ve({factory:function(e){return new(e||dD)},imports:[[nC]]}),dD),bD=((hD=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:hD}),hD.\u0275inj=ve({factory:function(e){return new(e||hD)},providers:[KE],imports:[[yD,FO],yD,FO]}),hD),kD=new qe("mat-chips-default-options"),CD={separatorKeyCodes:[13]},wD=((vD=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:vD}),vD.\u0275inj=ve({factory:function(e){return new(e||vD)},providers:[KE,{provide:kD,useValue:CD}]}),vD),_D=((fD=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:fD}),fD.\u0275inj=ve({factory:function(e){return new(e||fD)},imports:[[NE],NE]}),fD),SD=0;function ED(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function TD(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!PD(i);r++)i=i[n[r]];return i}function AD(e,t,i){var n,r,a=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=i||{},s=o,l=a.length;for(n=0;n<l;n++)r=a[n],n+1===l?s[r]=void 0===t?{}:t:RD(s[r])&&(s[r]={}),s=s[r];return o}function OD(e,t){delete e[t]}function xD(e){return!RD(e)&&e.constructor==={}.constructor}function ID(e,t){if(!RD(t))for(var i=e,n=t,r=0,a=Object.keys(t);r<a.length;r++){var o=a[r];RD(i.deepMerge)||-1===i.deepMerge.indexOf(o)||!xD(n[o])&&!Array.isArray(n[o])?i[o]=n[o]:DD(i[o],i[o],n[o],!0)}}function DD(e,t,i,n){var r=arguments,a=e&&"object"==typeof e?e:{},o=arguments.length;n&&(o-=1);for(var s=function(e){if(!r[e])return"continue";var t=r[e];Object.keys(t).forEach((function(e){var i,r=a[e],o=t[e];Array.isArray(o)&&Array.isArray(r),n&&(xD(o)||Array.isArray(o))?xD(o)?(i=r||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?DD(i,{},o,n):a[e]=DD(i,{},o,n)):(i=r||[],a[e]=DD([],i,o,n)):a[e]=o}))},l=1;l<o;l++)s(l);return a}function RD(e){return null==e}function PD(e){return void 0===e}function MD(e){return e+"_"+SD++}function LD(e,t){return e===t||!(e===document||!e)&&LD(e.parentNode,t)}function ND(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}}function FD(e){var t=e+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"}function BD(){return!1}function VD(e){return Node,e}function jD(e,t){var i="string"==typeof e?document.querySelector(e):e;if(i.ej2_instances){var n,r=_createForOfIteratorHelper(i.ej2_instances);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a instanceof t)return a}}catch(o){r.e(o)}finally{r.f()}}return null}var HD,UD={latn:{_digits:"0123456789",_type:"numeric"}},qD={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},WD=[0,1,2,3,4,5,6,7,8,9],zD=function(){var e=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"getMainObject",value:function(e,t){return TD("main."+t,e)}},{key:"getNumberingSystem",value:function(e){return TD("supplemental.numberingSystems",e)||this.numberingSystems}},{key:"reverseObject",value:function(e,t){var i,n={},r=_createForOfIteratorHelper(t||Object.keys(e));try{for(r.s();!(i=r.n()).done;){var a=i.value;n.hasOwnProperty(e[a])||(n[e[a]]=a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"getSymbolRegex",value:function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")}},{key:"getSymbolMatch",value:function(e){for(var t={},i=0,n=Object.keys(qD);i<n.length;i++){var r=n[i];t[e[r]]=qD[r]}return t}},{key:"constructRegex",value:function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i}},{key:"convertValueParts",value:function(e,t,i){return e.replace(t,(function(e){return i[e]}))}},{key:"getDefaultNumberingSystem",value:function(e){var t={};return t.obj=TD("numbers",e),t.nSystem=TD("defaultNumberingSystem",t.obj),t}},{key:"getCurrentNumericOptions",value:function(e,t,i,n){var r={},a=this.getDefaultNumberingSystem(e);if(!PD(a.nSystem)||n){var o=n?TD("obj.mapperDigits",a):TD(a.nSystem+"._digits",t);PD(o)||(r.numericPair=this.reverseObject(o,WD),r.numberParseRegex=new RegExp(this.constructRegex(o),"g"),r.numericRegex="["+o[0]+"-"+o[9]+"]",i&&(r.numericRegex=o[0]+"-"+o[9],r.symbolNumberSystem=TD(n?"numberSymbols":"symbols-numberSystem-"+a.nSystem,a.obj),r.symbolMatch=this.getSymbolMatch(r.symbolNumberSystem),r.numberSystem=a.nSystem))}return r}},{key:"getNumberMapper",value:function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!PD(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=TD("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=TD("timeSeparator",n.numberSymbols);var a=TD(r.nSystem+"._digits",t);if(!PD(a)){var o,s=_createForOfIteratorHelper(WD);try{for(s.s();!(o=s.n()).done;){var l=o.value;n.mapper[l]=a[l]}}catch(c){s.e(c)}finally{s.f()}}}return n}}]),e}();return e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=UD,e}(),GD={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),r=e.getFullYear(),a=n+1,o=r;a<3&&(o-=1,a+=12);var s=Math.floor(o/100),l=s-Math.floor(s/4)-2,c=Math.floor(365.25*(o+4716))+Math.floor(30.6001*(a+1))+i-l-1524,u=c+(l=(s=Math.floor((c-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,h=Math.floor((u-122.1)/365.25),d=Math.floor(365.25*h),p=Math.floor((u-d)/30.6001);i=u-d-Math.floor(30.6001*p),(n=Math.floor((u-d)/20.6001))>13&&(h+=1,n-=12),n-=1,r=h-4716;var f=c-24e5,v=c-1948084,m=Math.floor(v/10631);v-=10631*m;var g=Math.floor((v-.1335)/(10631/30)),y=30*m+g;v-=Math.floor(g*(10631/30)+.1335);var b=Math.floor((v+28.5001)/29.5);13===b&&(b=12);for(var k=v-Math.floor(29.5001*b-29),C=0;C<t.length&&!(t[C]>f);C++);var w=C+16260,_=Math.floor((w-1)/12),S=_+1,E=w-12*_,T=f-t[C-1]+1;return(T+"").length>2&&(T=k,E=b,S=y),{year:S,month:E,date:T}},e.toGregorian=function(e,i,n){var r=Math.floor(n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5+.5),a=Math.floor((r-1867216.25)/36524.25),o=(a=r+1+a-Math.floor(a/4))+1524,s=Math.floor((o-122.1)/365.25),l=Math.floor(365.25*s),c=Math.floor((o-l)/30.6001),u=o-l-Math.floor(30.6001*c),h=c-(c>13.5?13:1),d=s-(h>2.5?4716:4715);return d<=0&&h--,new Date(d+"/"+h+"/"+u)}}(HD||(HD={}));var YD=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,KD=["sun","mon","tue","wed","thu","fri","sat"],XD={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},JD={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},QD=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"dateFormat",value:function(e,t,i){var n=this,r=fR.getDependables(i,e,t.calendar),a=(TD("parserObject.numbers",r),r.dateObject),o={isIslamic:fR.islamicRegex.test(t.calendar)},s=t.format||fR.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,"");if(o.dateSeperator=fR.getDateSeparator(r.dateObject),PD(s))ND("Format options or type given must be invalid");else{s=fR.ConvertDateToWeekFormat(s),o.pattern=s,o.numMapper=zD.getNumberMapper(r.parserObject,zD.getNumberingSystem(i));var l,c=_createForOfIteratorHelper(s.match(YD)||[]);try{for(c.s();!(l=c.n()).done;){var u=l.value,h=u.length,d=u[0];switch("K"===d&&(d="h"),d){case"E":case"c":o.weekday=r.dateObject[fR.days]["stand-alone"][fR.monthIndex[h]];break;case"M":case"L":o.month=r.dateObject[fR.month]["stand-alone"][fR.monthIndex[h]];break;case"a":o.designator=TD("dayPeriods.format.wide",a);break;case"G":o.era=TD("eras."+(h<=3?"eraAbbr":4===h?"eraNames":"eraNarrow"),r.dateObject);break;case"z":o.timeZone=TD("dates.timeZoneNames",r.parserObject)}}}catch(p){c.e(p)}finally{c.f()}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,o)}}},{key:"intDateFormatter",value:function(e,t){var i,n="",r=t.pattern.match(fR.dateParseRegex),a=this.getCurrentDateValue(e,t.isIslamic),o=_createForOfIteratorHelper(r);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=void 0,c=s.length,u=s[0];"K"===u&&(u="h");var h=void 0,d=void 0,p="",f="";switch(u){case"M":case"L":l=a.month,c>2?n+=t.month[l]:h=!0;break;case"E":case"c":n+=t.weekday[KD[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(h=!0,"d"===u)l=a.date;else if("f"===u){h=!1,d=!0;var v=(p=(p=e[XD[u]]().toString()).substring(0,c)).length;if(c!==v){if(c>3)continue;for(var m=0;m<c-v;m++)p="0"+p.toString()}f+=p}else l=e[XD[u]]();"h"===u&&(l=l%12||12);break;case"y":d=!0,f+=a.year,2===c&&(f=f.substr(f.length-2));break;case"a":var g=e.getHours()<12?"am":"pm";n+=t.designator[g];break;case"G":var y=e.getFullYear()<0?0:1,b=t.era[y];RD(b)&&(b=t.era[y?0:1]),n+=b||"";break;case"'":n+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var k=e.getTimezoneOffset(),C=c<4?"+H;-H":t.timeZone.hourFormat;C=C.replace(/:/g,t.numMapper.timeSeparator),0===k?n+=t.timeZone.gmtZeroFormat:(d=!0,f=this.getTimeZoneValue(k,C)),f=t.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":n+=t.numMapper.numberSymbols.timeSeparator;break;case"/":n+=t.dateSeperator;break;case"W":h=!0,l=fR.getWeekOfYear(e);break;default:n+=s}h&&(d=!0,f=this.checkTwodigitNumber(l,c)),d&&(n+=zD.convertValueParts(f,fR.latnParseRegex,t.numMapper.mapper))}}catch(w){o.e(w)}finally{o.f()}return n}},{key:"getCurrentDateValue",value:function(e,t){return t?HD.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}}},{key:"checkTwodigitNumber",value:function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i}},{key:"getTimeZoneValue",value:function(e,t){var i=this,n=t.split(";")[e>0?1:0],r=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),t)}))}}]),e}(),ZD={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},$D=["infinity","nan","group","decimal","exponential"],eR=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"numberFormatter",value:function(e,t,i){var n,r=this,a=DD({},t),o={},s={},l=fR.getDependables(i,e,"",!0);s.numberMapper=zD.getNumberMapper(l.parserObject,zD.getNumberingSystem(i),!0),s.currencySymbol=fR.getCurrencySymbol(l.numericObject,a.currency||cR,t.altSymbol),s.percentSymbol=s.numberMapper.numberSymbols.percentSign,s.minusSymbol=s.numberMapper.numberSymbols.minusSign;var c=s.numberMapper.numberSymbols;if(t.format&&!fR.formatRegex.test(t.format))o=fR.customFormat(t.format,s,l.numericObject);else{DD(a,fR.getProperNumericSkeleton(t.format||"N")),a.isCurrency="currency"===a.type,a.isPercent="percent"===a.type,n=fR.getSymbolPattern(a.type,s.numberMapper.numberSystem,l.numericObject,a.isAccount),a.groupOne=this.checkValueRange(a.maximumSignificantDigits,a.minimumSignificantDigits,!0),this.checkValueRange(a.maximumFractionDigits,a.minimumFractionDigits,!1,!0),PD(a.fractionDigits)||(a.minimumFractionDigits=a.maximumFractionDigits=a.fractionDigits),PD(a.useGrouping)&&(a.useGrouping=!0),a.isCurrency&&(n=n.replace(/\u00A4/g,fR.defaultCurrency));var u=n.split(";");if(o.nData=fR.getFormatData(u[1]||"-"+u[0],!0,s.currencySymbol),o.pData=fR.getFormatData(u[0],!1,s.currencySymbol),a.useGrouping&&(a.groupSeparator=c[$D[2]],a.groupData=this.getGroupingDetails(u[0])),PD(a.minimumFractionDigits)&&(a.minimumFractionDigits=o.nData.minimumFraction),PD(a.maximumFractionDigits)){var h=o.nData.maximumFraction;a.maximumFractionDigits=PD(h)&&a.isPercent?0:h}var d=a.minimumFractionDigits,p=a.maximumFractionDigits;PD(d)||PD(p)||d>p&&(a.maximumFractionDigits=d)}return DD(o.nData,a),DD(o.pData,a),function(e){return isNaN(e)?c[$D[1]]:isFinite(e)?r.intNumberFormatter(e,o,s):c[$D[0]]}}},{key:"getGroupingDetails",value:function(e){var t={},i=e.match(fR.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var a=n.split(".")[0];t.primary=a.length-r-1;var o=n.lastIndexOf(",",r-1);-1!==o&&(t.secondary=r-1-o)}}return t}},{key:"checkValueRange",value:function(e,t,i,n){var r=n?"f":"s",a=0,o=ZD["l"+r],s=ZD["m"+r];if(PD(e)||(this.checkRange(e,o,n),a++),PD(t)||(this.checkRange(t,s,n),a++),2===a){if(!(e<t))return!0;ND(s+"specified must be less than the"+o)}else i&&1===a&&ND("Both"+s+"and"+s+"must be present");return!1}},{key:"checkRange",value:function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&ND(t+"value must be within the range"+n[0]+"to"+n[1])}},{key:"intNumberFormatter",value:function(e,t,i){var n;if(!PD(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var r="";return n.isPercent&&(e*=100),n.groupOne?r=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[$D[4]])),r=r.replace(".",i.numberMapper.numberSymbols[$D[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[$D[3]]||".",n.groupData.secondary)),r=zD.convertValueParts(r,fR.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}}},{key:"processSignificantDigits",value:function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""}},{key:"groupNumbers",value:function(e,t,i,n,r){for(var a=!RD(r)&&0!==r,o=e.split(n),s=o[0],l=s.length,c="";l>t;)c=s.slice(l-t,l)+(c.length?i+c:""),l-=t,a&&(t=r,a=!1);return o[0]=s.slice(0,l)+(c.length?i:"")+c,o.join(n)}},{key:"processFraction",value:function(e,t,i){var n=(e+"").split(".")[1],r=n?n.length:0;if(t&&r<t){var a="";if(0!==r){a+=e;for(var o=0;o<t-r;o++)a+="0";return a}return a=e.toFixed(t),e.toFixed(t)}return!RD(i)&&(r>i||0===i)?e.toFixed(i):e+""}},{key:"processMinimumIntegers",value:function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var a=0;a<t-r;a++)n="0"+n;i[0]=n}return i.join(".")}}]),e}(),tR=/^[0-9]*$/,iR={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},nR=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,rR=/,/g,aR=["minusSign","infinity"],oR=function(){function t(e){_classCallCheck2(this,t),this.ranArray=[],this.boundedEvents={},RD(e)||(this.context=e)}return _createClass(t,[{key:"on",value:function(e,t,i,n){if(!RD(t)){var r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:RD(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:r,id:n}))}}},{key:"off",value:function(e,t,i){if(!this.notExist(e)){var n=TD(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var a=this.ranArray.indexOf(i);-1!==a&&this.ranArray.splice(a,1);break}}else if(t===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[e]}}},{key:"notify",value:function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var r=TD(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(r,t,i,n,0);var a,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.handler.call(s.context,t)}}catch(l){o.e(l)}finally{o.f()}i&&i.call(this,t)}}},{key:"blazorCallback",value:function(e,t,i,n,r){var a=this,o=r===e.length-1;if(r<e.length){var s=e[r],l=s.handler.call(s.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then((function(l){if(l="string"==typeof l&&a.isJson(l)?JSON.parse(l,a.dateReviver):l,DD(t,t,l,!0),!i||!o)return a.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)})).catch((function(e){n&&n.call(s.context,"string"==typeof e&&a.isJson(e)?JSON.parse(e,a.dateReviver):e)}))}else{if(!i||!o)return this.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}}}},{key:"dateReviver",value:function(e,t){return BD&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t}},{key:"isJson",value:function(t){try{JSON.parse(t)}catch(e){return!1}return!0}},{key:"destroy",value:function(){this.boundedEvents=this.context=void 0}},{key:"notExist",value:function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0}},{key:"isHandlerPresent",value:function(e,t){var i,n=_createForOfIteratorHelper(e);try{for(n.s();!(i=n.n()).done;){if(i.value.handler===t)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}}]),t}(),sR=new oR,lR={},cR="USD",uR=["numericObject","dateObject"],hR=function(){function e(t){_classCallCheck2(this,e),t&&(this.culture=t)}return _createClass(e,[{key:"getDateFormat",value:function(e){return QD.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},lR)}},{key:"getNumberFormat",value:function(e){return e&&!e.currency&&(e.currency=cR),eR.numberFormatter(this.getCulture(),e||{},lR)}},{key:"getDateParser",value:function(e){return function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"dateParser",value:function(e,t,i){var n,r=this,a=fR.getDependables(i,e,t.calendar),o=zD.getCurrentNumericOptions(a.parserObject,zD.getNumberingSystem(i),!1,!1),s={},l=t.format||fR.getResultantPattern(t.skeleton,a.dateObject,t.type,!1,""),c="";if(PD(l))ND("Format options or type given must be invalid");else{l=fR.ConvertDateToWeekFormat(l),s={isIslamic:fR.islamicRegex.test(t.calendar),pattern:l,evalposition:{},culture:e};for(var u=l.match(fR.dateParseRegex)||[],h=u.length,d=0,p=0,f=!1,v=o.numericRegex,m=zD.getNumberMapper(a.parserObject,zD.getNumberingSystem(i)),g=0;g<h;g++){var y=void 0,b=void 0,k=u[g],C=k.length,w="K"===k[0]?"h":k[0],_=JD[w],S=2===C?"":"?";switch(f&&(d=p,f=!1),w){case"E":case"c":var E;E=a.dateObject[fR.days]["stand-alone"][fR.monthIndex[C]];var T=zD.reverseObject(E);c+="("+Object.keys(T).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(b=!0,("M"===w||"L"===w)&&C>2){var A;A=a.dateObject.months["stand-alone"][fR.monthIndex[C]],s[_]=zD.reverseObject(A),c+="("+Object.keys(s[_]).join("|")+")"}else if("f"===w){if(C>3)continue;y=!0,c+="("+v+v+"?"+v+"?)"}else y=!0,c+="("+v+v+S+")";"h"===w&&(s.hour12=!0);break;case"W":c+="("+v+(1===C?"?":"")+v+")";break;case"y":b=y=!0,c+=2===C?"("+v+v+")":"("+v+"{"+C+",})";break;case"a":b=!0;var O=TD("dayPeriods.format.wide",a.dateObject);s[_]=zD.reverseObject(O),c+="("+Object.keys(s[_]).join("|")+")";break;case"G":b=!0,s[_]=zD.reverseObject(TD("eras."+(C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow"),a.dateObject)),c+="("+Object.keys(s[_]).join("|")+"?)";break;case"z":b=0!==(new Date).getTimezoneOffset(),s[_]=TD("dates.timeZoneNames",a.parserObject);var x=s[_],I=(n=C<4)?"+H;-H":x.hourFormat;I=I.replace(/:/g,m.timeSeparator),c+="("+this.parseTimeZoneRegx(I,x,v)+")?",f=!0,p=n?6:12;break;case"'":c+="("+k.replace(/\'/g,"")+")?";break;default:c+="([\\D])"}b&&(s.evalposition[_]={isNumber:y,pos:g+1+d,hourOnly:n}),g!==h-1||RD(c)||(s.parserRegex=new RegExp("^"+c+"$","i"))}}return function(e){var t=r.internalDateParse(e,s,o);if(RD(t)||!Object.keys(t).length)return null;if(s.isIslamic){var i={},n=t.year,a=t.day,l=t.month,c=n?n+"":"",u=2===c.length;n&&l&&a&&!u||(i=HD.getHijriDate(new Date)),u&&(n=parseInt((i.year+"").slice(0,2)+c,10));var h=HD.toGregorian(n||i.year,l||i.month,a||i.date);t.year=h.getFullYear(),t.month=h.getMonth()+1,t.day=h.getDate()}return r.getDateObject(t)}}},{key:"getDateObject",value:function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,r=e.designator,a=e.timeZone;PD(n)||((n+"").length<=2&&(n+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(n));for(var o=0,s=["hour","minute","second","milliseconds","month","day"];o<s.length;o++){var l=s[o],c=e[l];if(PD(c)&&"day"===l&&i.setDate(1),!PD(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var u=i.getDate();i.setDate(1),i[iR[l]](c);var h=new Date(i.getFullYear(),c+1,0).getDate();i.setDate(u<h?u:h)}else{if("day"===l){var d=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(c<1||c>d)return null}i[iR[l]](c)}}if(!PD(r)){var p=i.getHours();"pm"===r?i.setHours(p+(12===p?0:12)):12===p&&i.setHours(0)}if(!PD(a)){var f=a-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i}},{key:"internalDateParse",value:function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};if(RD(n))return null;for(var a=0,o=Object.keys(t.evalposition);a<o.length;a++){var s=o[a],l=t.evalposition[s],c=n[l.pos];if(l.isNumber)r[s]=this.internalNumberParser(c,i);else if("timeZone"!==s||PD(c))c="month"!==s||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?c:c[0].toUpperCase()+c.substring(1).toLowerCase(),r[s]=t[s][c];else{var u=void 0,h=l.pos,d=n[h+1],p=!PD(d);l.hourOnly?u=60*this.getZoneValue(p,d,n[h+4],i):(u=60*this.getZoneValue(p,d,n[h+7],i),u+=this.getZoneValue(p,n[h+4],n[h+10],i)),RD(u)||(r[s]=u)}}return t.hour12&&(r.hour12=!0),r}},{key:"internalNumberParser",value:function(e,t){return e=zD.convertValueParts(e,t.numberParseRegex,t.numericPair),tR.test(e)?+e:null}},{key:"parseTimeZoneRegx",value:function(e,t,i){var n,r,a=t.gmtFormat,o="("+i+")("+i+")";return n=e.replace("+","\\+"),r=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+o+")"):n.replace(/H|m/g,"("+o+"?)")).split(";").map((function(e){return a.replace("{0}",e)})),n=r.join("|")+"|"+t.gmtZeroFormat}},{key:"getZoneValue",value:function(e,t,i,n){var r=e?t:i;if(!r)return 0;var a=this.internalNumberParser(r,n);return e?-a:a}}]),e}().dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},lR)}},{key:"getNumberParser",value:function(e){return function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"numberParser",value:function(e,t,i){var n,r,a=this,o=fR.getDependables(i,e,"",!0),s={custom:!0};if(fR.formatRegex.test(t.format)||!t.format?(DD(s,fR.getProperNumericSkeleton(t.format||"N")),s.custom=!1):DD(s,fR.customFormat(t.format,null,null)),TD("numbers",o.parserObject),n=zD.getCurrentNumericOptions(o.parserObject,zD.getNumberingSystem(i),!0,!1),s.symbolRegex=zD.getSymbolRegex(Object.keys(n.symbolMatch)),s.infinity=n.symbolNumberSystem[aR[1]],r=fR.getSymbolPattern(s.type,n.numberSystem,o.numericObject,s.isAccount)){var l=(r=r.replace(/\u00A4/g,fR.defaultCurrency)).split(";");s.nData=fR.getFormatData(l[1]||"-"+l[0],!0,""),s.pData=fR.getFormatData(l[0],!0,"")}return function(e){return a.getParsedNumber(e,s,n)}}},{key:"getParsedNumber",value:function(e,t,i){var n,r,a,o,s,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=zD.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=zD.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(nR);if(RD(c))return NaN;o=c[1],a=c[2];var u=c[5];return s=c[6],r=(n=t.custom?o===t.nData.nlead&&s===t.nData.nend:-1!==o.indexOf(t.nData.nlead)&&-1!==s.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,a=a.replace(rR,""),u&&(a+=u),l=+a,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l}}]),e}().numberParser(this.getCulture(),e||{format:"N"},lR)}},{key:"formatNumber",value:function(e,t){return this.getNumberFormat(t)(e)}},{key:"formatDate",value:function(e,t){return this.getDateFormat(t)(e)}},{key:"parseDate",value:function(e,t){return this.getDateParser(t)(e)}},{key:"parseNumber",value:function(e,t){return this.getNumberParser(t)(e)}},{key:"getDatePattern",value:function(e,t){return fR.getActualDateTimeFormat(this.getCulture(),e,lR,t)}},{key:"getNumberPattern",value:function(e,t){return fR.getActualNumberFormat(this.getCulture(),e,lR,t)}},{key:"getFirstDayOfWeek",value:function(){return fR.getWeekData(this.getCulture(),lR)}},{key:"getCulture",value:function(){return this.culture||"en-US"}}]),e}();function dR(e,t){var i=fR.getDependables(lR,e,"",!0)[uR[0]],n=fR.getDependables(lR,e,"")[uR[1]],r=TD("defaultNumberingSystem",i),a=TD("symbols-numberSystem-"+r,i),o=fR.getSymbolPattern(t||"decimal",r,i,!1);return DD(a,fR.getFormatData(o,!0,"",!0),{dateSeparator:fR.getDateSeparator(n)})}function pR(e){return fR.getDependables(lR,"",e,!1)[uR[1]]}var fR,vR={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi,e.islamicRegex=/^islamic/;var a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var o={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function s(t,i,n,r,a){var o,s=n||"date";if(a)o=h({skeleton:t},a).format||h({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(o=TD(s+"Formats."+t,i),"dateTime"===s){var l=TD("dateFormats."+t,i),c=TD("timeFormats."+t,i);o=o.replace("{1}",l).replace("{0}",c)}}else o=TD("dateTimeFormats.availableFormats."+t,i);PD(o)&&"yMd"===t&&(o="M/d/y")}return o}function l(t,i,n,r){var a={},o=n||"gregorian";return a.parserObject=zD.getMainObject(t,i)||e.defaultObject,r?a.numericObject=TD("numbers",a.parserObject):a.dateObject=TD("dates.calendars."+o,a.parserObject),a}function c(e,t,i,n){return TD(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?TD(e+"Formats-numberSystem-"+t+".standard",i):"")}function u(t){return t.match(e.dateConverterMapper),t}function h(e,t){var i=e.format||e.skeleton,n=TD((t||"en-US")+"."+i,vR);return n||(n=TD("en-US."+i,vR)),n&&(n=u(n),e.format=n.replace(/tt/,"a")),e}function d(t){var i=t.match(e.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=e.patternMatcher[r],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function p(i,n,r,a){var o=a?{}:{nlead:"",nend:""},s=i.match(e.customRegex);if(s){a||(o.nlead=f(s[1],r),o.nend=f(s[10],r),o.groupPattern=s[4]);var l=s[7];if(l&&n){var c=l.match(t);o.minimumFraction=RD(c)?0:c.length,o.maximumFraction=l.length-1}}return o}function f(t,i){return t?t.replace(e.defaultCurrency,i):""}function v(e,t,i){return TD("currencies."+t+(i?"."+i:".symbol"),e)||TD("currencies."+t+".symbol-alt-narrow",e)||"$"}function m(t,n,r){var a={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},o=t.match(e.customRegex);if(RD(o)||""===o[5]&&"N/A"!==t)return a.type=void 0,a;a.nlead=o[1],a.nend=o[10];var s=o[6];a.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=o[7];if(-1!==s.indexOf("0")&&(a.minimumIntegerDigits=s.length-s.indexOf("0")),RD(l)||(a.minimumFractionDigits=l.lastIndexOf("0"),a.maximumFractionDigits=l.lastIndexOf("#"),-1===a.minimumFractionDigits&&(a.minimumFractionDigits=0),(-1===a.maximumFractionDigits||a.maximumFractionDigits<a.minimumFractionDigits)&&(a.maximumFractionDigits=a.minimumFractionDigits)),RD(n)?DD(a,g([a.nlead,a.nend],"%","%")):(DD(a,g([a.nlead,a.nend],"$",n.currencySymbol)),a.isCurrency||DD(a,g([a.nlead,a.nend],"%",n.percentSymbol))),!RD(r)){var u=c(a.type,n.numberMapper.numberSystem,r,!1);a.useGrouping&&(a.groupSeparator=n.numberMapper.numberSymbols[i[2]],a.groupData=eR.getGroupingDetails(u.split(";")[0])),a.nlead=a.nlead.replace(/\'/g,""),a.nend=a.nend.replace(/\'/g,"")}return a}function g(e,t,i){for(var n={nlead:e[0],nend:e[1]},r=0;r<2;r++){var a=e[r],s=a.indexOf(t);if(-1!==s&&(s<a.indexOf("'")||s>a.lastIndexOf("'"))){n[o[r]]=a.substr(0,s)+i+a.substr(s+1),n[o[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=s,e.getDependables=l,e.getSymbolPattern=c,e.ConvertDateToWeekFormat=u,e.compareBlazorDateFormats=h,e.getProperNumericSkeleton=d,e.getFormatData=p,e.getCurrencySymbol=v,e.customFormat=function(e,t,i){for(var n={},r=e.split(";"),a=["pData","nData","zeroData"],o=0;o<r.length;o++)n[a[o]]=m(r[o],t,i);return RD(n.nData)&&(n.nData=DD({},n.pData),n.nData.nlead=RD(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=g,e.getDateSeparator=function(e){var t=(TD("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,a){var o=l(i,e,t.calendar),c=t.format||s(t.skeleton,o.dateObject,t.type);if(a){if(-1!==(c=c.replace(n,(function(e){return r[e]}))).indexOf("z")){var u,h=c.match(/z/g).length,d={timeZone:{}};d.numMapper=zD.getNumberMapper(o.parserObject,zD.getNumberingSystem(i)),d.timeZone=TD("dates.timeZoneNames",o.parserObject);var p=(new Date).getTimezoneOffset(),f=h<4?"+H;-H":d.timeZone.hourFormat;f=f.replace(/:/g,d.numMapper.timeSeparator),0===p?u=d.timeZone.gmtZeroFormat:(u=QD.getTimeZoneValue(p,f),u=d.timeZone.gmtFormat.replace(/\{0\}/,u)),c=c.replace(/[z]+/,'"'+u+'"')}c=c.replace(/ $/,"")}return c},e.getActualNumberFormat=function(t,i,n,r){var a,o,s=l(n,t,"",!0),u={custom:!0},h={},f=(i.format||"").match(e.currencyFormatRegex),m=(e.formatRegex.test(i.format)&&d(i.format||"N"),{});if(f){m.numberMapper=zD.getNumberMapper(s.parserObject,zD.getNumberingSystem(n),!0);var g=v(s.numericObject,i.currency||cR,i.altSymbol),y=c("currency",m.numberMapper.numberSystem,s.numericObject,/a/i.test(i.format)),b=(y=y.replace(/\u00A4/g,g)).split(";");h.hasNegativePattern=b.length>1,h.nData=p(b[1]||"-"+b[0],!0,g),h.pData=p(b[0],!1,g),f[2]||i.minimumFractionDigits||i.maximumFractionDigits||(a=p(y.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(DD(u,d(i.format||"N")),u.custom=!1,o="###0",u.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||a){u.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=u.fractionDigits),o=function(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var r=i-t,a=0;a<r;a++)e+="#";return e}(o,a||u.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)}if(i.minimumIntegerDigits&&(o=function(e,t){for(var i=e.split("."),n="",r=0;r<t;r++)n+="0";return i[1]?n+"."+i[1]:n}(o,i.minimumIntegerDigits)),i.useGrouping&&(o=function(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)e=","+i[r-2]+i[r-1]+i[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(o)),"currency"===u.type){var k=o;o=h.pData.nlead+k+h.pData.nend,h.hasNegativePattern&&(o+=";"+h.nData.nlead+k+h.nData.nend)}"percent"!==u.type||(o+=" %")}else o=i.format.replace(/\'/g,'"');return Object.keys(m).length>0&&(o=r?o:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+TD("numberMapper.numberSymbols.group",t)+i[1].replace(".",TD("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",TD("numberMapper.numberSymbols.decimal",t));return e}(o,m)),o},e.getWeekData=function(e,t){var i="sun",n=TD("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||"sun"),a[i]},e.replaceBlazorCurrency=function(e,t,i){var n=TD(i||"",GD);if(t!==n){var r,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.nend=o.nend.replace(t,n),o.nlead=o.nlead.replace(t,n)}}catch(s){a.e(s)}finally{a.f()}}},e.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var r=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((r+n-1)/7)+1)>52){var a=new Date(this.getFullYear()+1,0,1).getDay();t=(a=a>=0?a:a+7)<4?1:53}}else t=Math.floor((r+n-1)/7);return t}}(fR||(fR={}));var mR=/^(.*?):[ \t]*([^\r\n]*)$/gm,gR=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=i?i.toUpperCase():"GET",this.mode=!!RD(n)||n):"object"==typeof t&&(this.options=t,ID(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:r}return _createClass(e,[{key:"send",value:function(e){var t=this;this.data=RD(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},RD(t.onLoad)||(t.httpRequest.onload=t.onLoad),RD(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),RD(t.onAbort)||(t.httpRequest.onabort=t.onAbort),RD(t.onError)||(t.httpRequest.onerror=t.onError),RD(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),RD(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(RD(t.data)?null:t.data)}))}},{key:"successHandler",value:function(e){return this.onSuccess&&this.onSuccess(e,this),e}},{key:"failureHandler",value:function(e){return this.onFailure&&this.onFailure(this.httpRequest),e}},{key:"stateChange",value:function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())}},{key:"getResponseHeader",value:function(e){var t,i;t={};for(var n=mR.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=mR.exec(this.httpRequest.getAllResponseHeaders());return RD(i=t[e.toLowerCase()])?null:i}}]),e}(),yR=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,bR=/msie|trident/i,kR=/Trident\/7\./,CR=/(ipad|iphone|ipod touch)/i,wR=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,_R=/android/i,SR=/trident|windows phone|edge/i,ER=/(version)[ \/]([\w.]+)/i,TR={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var AR=function(){var e=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"extractBrowserDetail",value:function(){for(var t={culture:{}},i=[],n=0,r=Object.keys(TR);n<r.length;n++){var a=r[n];if(i=e.userAgent.match(TR[a])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(kR)){t.name="msie";break}var o=e.userAgent.match(ER);"safari"===t.name&&o&&(t.version=o[2]);break}}return t}},{key:"getEvent",value:function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice}},{key:"getTouchStartEvent",value:function(){return e.getEvent("start")}},{key:"getTouchEndEvent",value:function(){return e.getEvent("end")}},{key:"getTouchMoveEvent",value:function(){return e.getEvent("move")}},{key:"getTouchCancelEvent",value:function(){return e.getEvent("cancel")}},{key:"getValue",value:function(t,i){var n=window.browserDetails;return void 0===n[t]?n[t]=i.test(e.userAgent):n[t]}},{key:"userAgent",set:function(t){e.uA=t,window.browserDetails={}},get:function(){return e.uA}},{key:"info",get:function(){return PD(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info}},{key:"isIE",get:function(){return e.getValue("isIE",bR)}},{key:"isTouch",get:function(){return PD(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch}},{key:"isPointer",get:function(){return PD(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer}},{key:"isMSPointer",get:function(){return PD(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer}},{key:"isDevice",get:function(){return e.getValue("isDevice",yR)}},{key:"isIos",get:function(){return e.getValue("isIos",CR)}},{key:"isIos7",get:function(){return e.getValue("isIos7",wR)}},{key:"isAndroid",get:function(){return e.getValue("isAndroid",_R)}},{key:"isWebView",get:function(){return PD(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(PD(window.cordova)&&PD(window.PhoneGap)&&PD(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView}},{key:"isWindows",get:function(){return e.getValue("isWindows",SR)}},{key:"touchStartEvent",get:function(){return PD(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent}},{key:"touchMoveEvent",get:function(){return PD(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent}},{key:"touchEndEvent",get:function(){return PD(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent}},{key:"touchCancelEvent",get:function(){return PD(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent}}]),e}();return e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),OR=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"addOrGetEventData",value:function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])}},{key:"add",value:function(t,i,n,r,a){var o,s,l,c,u=e.addOrGetEventData(t);o=a?(s=n,l=a,function(){var e=this,t=arguments,i=function(){return c=null,s.apply(e,t)};clearTimeout(c),c=setTimeout(i,l)}):n,r&&(o=o.bind(r));for(var h=i.split(" "),d=0;d<h.length;d++)u.push({name:h[d],listener:n,debounce:o}),AR.isIE?t.addEventListener(h[d],o):t.addEventListener(h[d],o,{passive:!1});return o}},{key:"remove",value:function(t,i,n){for(var r=e.addOrGetEventData(t),a=i.split(" "),o=function(e){var i=void 0,o=-1;r&&0!==r.length&&r.some((function(t,r){return t.name===a[e]&&t.listener===n&&(o=r,i=t.debounce,!0)})),-1!==o&&r.splice(o,1),i&&t.removeEventListener(a[e],i)},s=0;s<a.length;s++)o(s)}},{key:"clearEvents",value:function(t){var i,n;n=DD([],n,i=e.addOrGetEventData(t));for(var r=0;r<n.length;r++)t.removeEventListener(n[r].name,n[r].debounce),i.shift()}},{key:"trigger",value:function(t,i,n){var r,a=_createForOfIteratorHelper(e.addOrGetEventData(t));try{for(a.s();!(r=a.n()).done;){var o=r.value;o.name===i&&o.debounce.call(this,n)}}catch(s){a.e(s)}finally{a.f()}}}]),e}(),xR=new RegExp("\\n|\\r|\\s\\s+","g"),IR=new RegExp(/'|"/g),DR=new RegExp("if ?\\("),RR=new RegExp("else if ?\\("),PR=new RegExp("else"),MR=new RegExp("for ?\\("),LR=new RegExp("(/if|/for)"),NR=new RegExp("\\((.*)\\)",""),FR=new RegExp("^[0-9]+$","g"),BR=new RegExp("[\\w\"'.\\s+]+","g"),VR=new RegExp('"(.*?)"',"g"),jR=new RegExp("[\\w\"'@#$.\\s+]+","g"),HR=new RegExp("\\${([^}]*)}","g"),UR=/^\..*/gm,qR=/\\/gi,WR=/\\\\/gi,zR=new RegExp("[\\w\"'@#$.\\s+]+","g"),GR=/\window\./gm;function YR(e,t,i,n){return t&&!FR.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}function KR(e,t,i,n){return t&&!FR.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function XR(e){return e.match(WR)?e:e.replace(qR,"\\\\")}function JR(e,t,i){if(e=e.trim(),/\window\./gm.test(e))return e;var n=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=KR(e,-1===i.indexOf(e),t,i)+'"]'),UR.test(e)?function(e,t,i,n){return!t||FR.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):YR(e,!n.test(e)&&-1===i.indexOf(e),t,i)}var QR=/^[\n\r.]+\<tr|^\<tr/,ZR=/^[\n\r.]+\<svg|^\<path|^\<g/,$R={};function eP(){return"-"+Math.random().toString(36).substr(2,5)}function tP(e,t){var i=rP.compile(e,t);return function(e,t,n,r,a,o){var s=i(e,t,n);return"string"==typeof s?ZR.test(s)?CP("svg",{innerHTML:s}).childNodes:CP(QR.test(s)?"table":"div",{innerHTML:s}).childNodes:s}}function iP(e,t,i){var n=document.getElementById(e);if(n)for(var r=n.getElementsByClassName("blazor-inner-template"),a=0;a<r.length;a++){var o;o=RD(i)?r[a].getAttribute("data-templateId"):r[i].getAttribute("data-templateId");var s=document.getElementById(o);if(s)for(var l=s.childNodes.length,c=0;c<l;c++)RD(i)?r[a].appendChild(s.childNodes[0]):(r[i].appendChild(s.childNodes[0]),a=r.length)}}var nP,rP={compile:(new(function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"compile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){var i=function(e,t,i){var n=0,r=[],a=e.match(/class="([^\"]+|)\s{2}/g),o="";return a&&a.forEach((function(t){o=t.replace(/\s\s+/g," "),e=e.replace(t,o)})),e.replace(xR,"").replace(VR,"'$1'").replace(HR,(function(e,t,a,o){var s=t.match(NR);if(s){var l=s[1];if(RR.test(t))t='";} '+t.replace(s[1],l.replace(BR,(function(e){return YR(e=e.trim(),!IR.test(e)&&-1===r.indexOf(e),"data",r)})))+'{ \n str = str + "';else if(DR.test(t))t='"; '+t.replace(s[1],l.replace(jR,(function(e){return JR(e,"data",r)})))+'{ \n str = str + "';else if(MR.test(t)){var c=s[1].split(" of ");t='"; '+t.replace(s[1],(function(e){return r.push(c[0]),r.push(c[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+YR(c[1],!0,"data",r)+".length; i"+n+"++"}))+"{ \n "+c[0]+"= "+YR(c[1],!0,"data",r)+"[i"+n+"]; \n var "+c[0]+"Index=i"+n+'; \n str = str + "'}else{var u=t.split("("),h=i&&i.hasOwnProperty(u[0])?"this.":"global";h=/\./.test(u[0])?"":h;var d=s[1].split(",");0===s[1].length||/data/.test(d[0])||/window./.test(d[0])||(s[1]="global"===h?"data."+s[1]:s[1]);GR.test(t)&&/\]\./gm.test(t)||/\@|\$|\#/gm.test(t)?/\@|\$|\#|\]\./gm.test(t)&&(t='"+ '+("global"===h?"":h)+t.replace(s[1],l.replace(zR,(function(e){return JR(e,"data",r)})))+'+ "'):t='" + '+("global"===h?"":h)+t.replace(l,YR(s[1].replace(/,( |)data.|,/gi,",data.").replace(/,( |)data.window/gi,",window"),"global"!==h,"data",r))+'+"'}}else PR.test(t)?t='"; '+t.replace(PR,'} else { \n str = str + "'):t.match(LR)?t=t.replace(LR,'"; \n } \n str = str + "'):/\@|\#|\$/gm.test(t)?(t.match(qR)&&(t=XR(t)),t='"+'+KR(t,-1===r.indexOf(t),"data",r)+'"]+"'):t=t.match(qR)?'"+'+KR(t=XR(t),-1===r.indexOf(t),"data",r)+'"]+"':'"+'+YR(t.replace(/\,/gi,"+data."),-1===r.indexOf(t),"data",r)+'+"';return t}))}(e,0,t);return new Function("data",'var str="'.concat(i,'"; return str;')).bind(t)}(e,t)}}]),e}())).compile},aP=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oP=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,sP=/^(\.|#)/,lP={".":"className","#":"id"},cP={className:"attributes.className",id:"attributes.id",tagName:"tagName"},uP=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],hP=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],dP=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],pP=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],fP=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],vP=["Script","style"],mP={tabindex:"tabIndex"},gP=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,yP=/^<\/([-A-Za-z0-9_]+)[^>]*>/,bP=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(e){function t(e,t){t&&e&&e.forEach((function(e){return xD(e)&&(e.parent&&i(e),e.parent=t),e}))}function i(e){var t=e.parent;if(t){var i=t.children.indexOf(e);-1!==i&&t.children.splice(i)}return t}function n(e,t){var i=e.match(sP),n={};if(i){var r=lP[i[0]];if("className"===r){var a=t.filter((function(e){return e.hasOwnProperty("className")}))[0],o=!1;a||(o=!0,a={}),a[r]=(a[r]||"")+"(?=.*?\\b{value}\\b)".replace("{value}",e.replace(".","")),o&&t.push(a)}else n[r]=e.replace(i[0],""),t.push(n)}else t.push({tagName:e})}function r(e,t,i,n){if(e.children){var a=e.children.filter((function(e){if("string"!=typeof e){var i,n=!0,r=_createForOfIteratorHelper(t);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=Object.keys(a)[0],s=a[o],l=TD(cP[o],e);if("className"===o){if(!new RegExp("^"+s+".*$").test(l)){n=!1;break}}else if(l!==s){n=!1;break}}}catch(c){r.e(c)}finally{r.f()}return n}return!1}));return n||a.length&&!i||e.children.forEach((function(e){xD(e)&&(a=a.concat(r(e,t,i)))})),a}return[]}function a(e){for(var t,i=[],n=[],r=[];e;){t=!0;var a=o(n);if(a&&s(vP,a))e=e.replace(new RegExp("([\\s\\S]*?)</"+o(r)+"[^>]*>"),(function(e,t){return f(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""})),p(0,o(n));else{if(0===e.indexOf("</")){var l=e.match(yP);l&&(e=e.substring(l[0].length),l[0].replace(yP,p)),t=!1}else if(0===e.indexOf("<")){var c=e.match(gP);c&&(e=e.substring(c[0].length),c[0].replace(gP,d)),t=!1}if(t){var u=e.indexOf("<"),h=u<0?e:e.substring(0,u);e=u<0?"":e.substring(u),f(h)}}}function d(e,t,a){if(t=t.toLowerCase(),s(hP,t))for(;o(n)&&s(dP,o(n));)p(0,o(n));s(pP,t)&&o(n)&&p(0,t);var l=s(uP,t);l||n.push(t);var c={};a.replace(bP,(function(e,t){var i=(arguments.length<=4?void 0:arguments[4])?arguments.length<=4?void 0:arguments[4]:(arguments.length<=5?void 0:arguments[5])?arguments.length<=5?void 0:arguments[5]:(arguments.length<=6?void 0:arguments[6])?arguments.length<=6?void 0:arguments[6]:s(fP,t)?t:"";if("style"===t){for(var n=i.split(";"),r={},a=0,o=n.length;a<o;a++){var l=n[a].split(":");r[l[0]]=l[1]}i=r}c[t=mP[t]||t]=i})),c["data-id"]=eP();var u={tagName:t,attributes:c};if(l){var h=r[0]||i;void 0===h.children&&(h.children=[]),u.parent=h,h.children.push(u)}else r.unshift(u)}function p(e,t){var a;if(t)for(a=n.length-1;a>=0&&n[a]!==t;a--);else a=0;if(a>=0){for(var o=r.length-1;o>=a;o--){var s=r.shift();if(0===r.length)i.push(s);else{var l=r[0];void 0===l.children&&(l.children=[]),s.parent=l,l.children.push(s)}}n.length=a}}function f(e){if(0===r.length)i.push(e);else{var t=r[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return i}function o(e){return e[e.length-1]}function s(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){var i=[],n=DD({},{},t,!0);if(!RD(t)&&Object.keys(t).length&&(n.innerHTML&&(i=a(n.innerHTML),delete n.innerHTML),n.attrs&&(DD(n,n.attrs),delete n.attrs),n.styles)){for(var r=n.styles.split(";"),o={},s=0,l=r.length;s<l;s++){var c=r[s].split(":");o[c[0]]=c[1]}delete n.styles,n.style=o}return{tagName:e,attributes:n||{},children:i}},e.assignParent=t,e.append=function(e,i){t(e,i),i.children=i.children?i.children.concat(e):[].concat(e)},e.prepend=function(e,i){if(t(e,i),i.children&&i.children.length)for(var n=e.length-1;n>=0;n--)i.children.unshift(e[n]);else i.children=[],i.children.concat(e)},e.detach=i,e.vDomSelector=function e(t){for(var i=t.ele,a=t.selector,o=t.selectAll,s=t.immediateParent,l=a.split(" "),c=i,u=0,h=l.length;u<h;u++){var d=!1,p=c,f=l[u],v=[];if(aP.test(f))n(f,v);else if(-1===f.indexOf(">")){var m,g=_createForOfIteratorHelper(f.match(oP));try{for(g.s();!(m=g.n()).done;){n(m.value,v)}}catch(R){g.e(R)}finally{g.f()}}else if(-1!==f.indexOf(">")){d=!0;var y,b=void 0,k=i,C=0,w=_createForOfIteratorHelper(f.split(">"));try{for(w.s();!(y=w.n()).done;){var _=y.value;if(!k)break;if(k.length){var S,E=[],T=_createForOfIteratorHelper(k);try{for(T.s();!(S=T.n()).done;){var A=S.value;E=E.concat(e({ele:A,selector:_,selectAll:o,immediateParent:!!C}))}}catch(R){T.e(R)}finally{T.f()}b=E}else b=e({ele:k,selector:_,selectAll:o,immediateParent:!!C});C++,k=b}}catch(R){w.e(R)}finally{w.f()}b&&(c=b)}if(!d)if(p.length){var O,x=[],I=_createForOfIteratorHelper(p);try{for(I.s();!(O=I.n()).done;){var D=O.value;x=x.concat(r(D,v,o,s))}}catch(R){I.e(R)}finally{I.f()}c=x}else c=r(p,v,o,s)}return o?c:c[0]||null},e.accessElement=r,e.ConvertHTMLToJSon=a,e.cloneNode=function(e,t){return xD(e)?t?DD({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style=DD(e.attributes.style?{}:e.attributes.style,t)}}(nP||(nP={}));var kP=/^svg|^path|^g/;function CP(e,t){var i=kP.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&DP(i,t.attrs)),i}function wP(e,t){var i,n=SP(t),r=_createForOfIteratorHelper(e);try{for(r.s();!(i=r.n()).done;){var a,o=i.value,s=_createForOfIteratorHelper(n);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(xD(o)){var c=TD("attributes.className",o);RD(c)?AD("attributes.className",l,o):new RegExp("\\b"+l+"\\b","i").test(c)||AD("attributes.className",c+" "+l,o)}else o.classList.contains(l)||o.classList.add(l)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}return e}function _P(e,t){var i,n=SP(t),r=_createForOfIteratorHelper(e);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=xD(a);if(o?TD("attributes.className",a):""!==a.className){var s,l=_createForOfIteratorHelper(n);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(o){var u=TD("attributes.className",a).split(" "),h=u.indexOf(c);-1!==h&&u.splice(h,1),AD("attributes.className",u.join(" "),a)}else a.classList.remove(c)}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){r.e(d)}finally{r.f()}return e}function SP(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function EP(e){return""===e.style.visibility&&e.offsetWidth>0}function TP(e,t,i){if(xD(t))nP.prepend(e,t);else{var n,r=document.createDocumentFragment(),a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.appendChild(o)}}catch(s){a.e(s)}finally{a.f()}t.insertBefore(r,t.firstElementChild),i&&OP(t)}return e}function AP(e,t,i){if(xD(t))nP.append(e,t);else{var n,r=document.createDocumentFragment(),a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.appendChild(o)}}catch(s){a.e(s)}finally{a.f()}t.appendChild(r),i&&OP(t)}return e}function OP(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),xP(t)}))}function xP(e){return xD(e)?nP.detach(e):e.parentNode.removeChild(e)}function IP(e){if(xD(e))nP.detach(e);else{var t=e.parentNode;OR.clearEvents(e),t.removeChild(e)}}function DP(e,t){for(var i=e,n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];if(xD(i)){var o=a;"tabindex"===a&&(o="tabIndex"),i.attributes[o]=t[a]}else i.setAttribute(a,t[a])}return i}function RP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=arguments.length>2?arguments[2]:void 0;return xD(t)&&i?nP.vDomSelector({ele:t,selector:e,selectAll:!1}):t.querySelector(e)}function PP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,i=arguments.length>2?arguments[2]:void 0;return xD(t)&&!i?nP.vDomSelector({ele:t,selector:e,selectAll:!0}):t.querySelectorAll(e)}function MP(e,t){var i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(FP(i,t))return i;i=i.parentNode}return null}function LP(e,t){void 0!==t&&(xD(e)?nP.setStyleAttribute(e,t):Object.keys(t).forEach((function(i){e.style[i]=t[i]})))}function NP(e,t,i){wP([e],t),_P([e],i)}function FP(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var BP=new RegExp("]"),VP=function(){function e(t,i){_classCallCheck2(this,e),this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new oR(this),PD(i)||(this.element="string"==typeof i?document.querySelector(i):i,RD(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),PD(t)||this.setProperties(t,!0),this.isDestroyed=!1}return _createClass(e,[{key:"setProperties",value:function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,ID(this,e),!0!==t&&(ID(this.changedProperties,e),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i}},{key:"clearChanges",value:function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}}},{key:"dataBind",value:function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}}},{key:"serverDataBind",value:function(e){}},{key:"saveChanges",value:function(e,t,i){this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),r=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),e=r=n=void 0}}(this.dataBind.bind(this)))}},{key:"addEventListener",value:function(e,t){this.modelObserver.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.modelObserver.off(e,t)}},{key:"trigger",value:function(e,t,i,n){var r=this;if(!0!==this.isDestroyed){var a=this.isProtectedOnChange;this.isProtectedOnChange=!1;var o=this.modelObserver.notify(e,t,i,n);if(BP.test(e)){var s=TD(e,this);if(s)if(window.Blazor){var l=s.call(this,t);l&&"function"==typeof l.then?i?l.then((function(e){i&&(e="string"==typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,i.call(r,e))})).catch((function(e){n&&(e="string"==typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,n.call(r,e))})):o=l:i&&i.call(this,t)}else s.call(this,t),i&&i.call(this,t);else i&&i.call(this,t)}return this.isProtectedOnChange=a,o}}},{key:"addInstance",value:function(){var e="e-"+this.getModuleName().toLowerCase();wP([this.element],["e-lib",e]),RD(this.element.ej2_instances)?AD("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)}},{key:"destroy",value:function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),_P([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&_P([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0}}],[{key:"callChildDataBind",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(t[r]instanceof Array){var a,o=_createForOfIteratorHelper(t[r]);try{for(o.s();!(a=o.n()).done;){var s=a.value;void 0!==s.dataBind&&s.dataBind()}}catch(l){o.e(l)}finally{o.f()}}else t[r].dataBind()}}}]),e}();function jP(e,t){var i,n,r="string"==typeof e?document.getElementById(e):e;for(n=0;n<r.ej2_instances.length;n++)if(i=r.ej2_instances[n],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}function HP(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=ED(n,[e,t,i])),e.properties[t]}function UP(e,t,i,n,r,a){for(var o=[],s=i?i.length:0,l=0;l<s;l++){var c=n;if(a&&(c=n(i[l],e)),r){var u=ED(c,[e,t,{},!0]);u.setProperties(i[l],!0),o.push(u)}else o.push(ED(c,[e,t,i[l],!1]))}return o}function qP(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function WP(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function zP(e,t,i){return function(){return HP(this,t,e,i)}}function GP(e,t,i){return function(n){HP(this,t,e,i).setProperties(n)}}function YP(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var r=UP(this,t,e,i,!1);this.properties[t]=r}var a=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||a||["push","pop"].forEach((function(e){var i={value:XP(e,t,0,n.properties[t]).bind(n),configurable:!0};Object.defineProperty(n.properties[t],e,i)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function KP(e,t,i){return function(n){this.isComplexArraySetter=!0;var r=UP(this,t,e,i,!1),a=UP(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,a,r),this.properties[t]=a}}function XP(e,t,i,n){return function(){var i=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var r=0;r<arguments.length;r++){Array.prototype[e].apply(n,[r<0||arguments.length<=r?void 0:arguments[r]]);var a=JP(i+(n.length-1),r<0||arguments.length<=r?void 0:arguments[r],!this.controlParent,e);this.serverDataBind(a,r<0||arguments.length<=r?void 0:arguments[r],!1,e)}break;case"pop":Array.prototype[e].apply(n);var o=JP(i+n.length,null,!this.controlParent,e);this.serverDataBind(o,{ejsAction:"pop"},!1,e)}return n}}function JP(e,t,i,n){var r=e;return i&&((r={})[e]=t,t&&"object"==typeof t)&&(r[e].ejsAction=n),r}function QP(e){return function(t,i){var n={set:WP(e,i),get:qP(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),iM(t,i,"prop",e)}}function ZP(e,t){return function(i,n){var r={set:GP(e,n,t),get:zP(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),iM(i,n,"complexProp",e,t)}}function $P(e,t){return function(i,n){var r={set:KP(e,n,t),get:YP(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),iM(i,n,"colProp",e,t)}}function eM(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=TD("propName",t);return n&&(i=n+"-"+i),e(TD("parentObj",t),i)}(this,t);!1===PD(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:qP(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),iM(e,t,"event")}}function tM(e){}function iM(e,t,i,n,r){PD(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:r}),e.propList[i+"Names"].push(t)}var nM,rM,aM=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},oM=(rM=nM=function(t){_inherits(n,t);var i=_createSuper(n);function n(e){var t;return _classCallCheck2(this,n),(t=i.call(this,e,void 0)).easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},t}return _createClass(n,[{key:"animate",value:function(e,t){var i=this.getModel(t=t||{});if("string"==typeof e){var n,r=_createForOfIteratorHelper(Array.prototype.slice.call(PP(e,document)));try{for(r.s();!(n=r.n()).done;){var a=n.value;i.element=a,nM.delayAnimation(i)}}catch(o){r.e(o)}finally{r.f()}}else i.element=e,nM.delayAnimation(i)}},{key:"getModel",value:function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}}},{key:"onPropertyChanged",value:function(e,t){}},{key:"getModuleName",value:function(){return"animation"}},{key:"destroy",value:function(){}}],[{key:"stop",value:function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)}},{key:"delayAnimation",value:function(e){e.delay?setTimeout((function(){nM.applyAnimation(e)}),e.delay):nM.applyAnimation(e)}},{key:"applyAnimation",value:function(t){var i=this;t.timeStamp=0;var n=0,r=0,a=0,o=t.duration;t.element.setAttribute("e-animate","true"),function s(l){try{if(l){a=0===a?l:a,t.timeStamp=l+t.timeStamp-a,a=l,!n&&t.begin&&t.begin.call(i,t),n+=1;var c=t.timeStamp/n;t.timeStamp<o&&t.timeStamp+c<o&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(i,t),requestAnimationFrame(s)):(cancelAnimationFrame(r),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(i,t))}else performance.now(),r=requestAnimationFrame(s),t.element.setAttribute("e-animation-id",r.toString())}catch(e){cancelAnimationFrame(r),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(i,e)}}()}}]),n}(VP),aM([QP("FadeIn")],rM.prototype,"name",void 0),aM([QP(400)],rM.prototype,"duration",void 0),aM([QP("ease")],rM.prototype,"timingFunction",void 0),aM([QP(0)],rM.prototype,"delay",void 0),aM([eM()],rM.prototype,"progress",void 0),aM([eM()],rM.prototype,"begin",void 0),aM([eM()],rM.prototype,"end",void 0),aM([eM()],rM.prototype,"fail",void 0),rM=nM=aM([tM],rM));function sM(e,t,i){var n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!fM?Function:(e.setAttribute("data-ripple","true"),OR.add(e,"mousedown",lM,{parent:e,rippleOptions:n}),OR.add(e,"mouseup",cM,{parent:e,rippleOptions:n,done:i}),OR.add(e,"mouseleave",uM,{parent:e,rippleOptions:n}),AR.isPointer&&OR.add(e,"transitionend",uM,{parent:e,rippleOptions:n}),function(){e.removeAttribute("data-ripple"),OR.remove(e,"mousedown",lM),OR.remove(e,"mouseup",cM),OR.remove(e,"mouseleave",uM),OR.remove(e,"transitionend",uM)})}function lM(e){var t=e.target,i=this.rippleOptions.selector,n=i?MP(t,i):t;if(!(!n||this.rippleOptions&&MP(t,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),a=e.pageX-document.body.scrollLeft,o=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),s=Math.max(Math.abs(a-r.left),Math.abs(a-r.right)),l=Math.max(Math.abs(o-r.top),Math.abs(o-r.bottom)),c=Math.sqrt(s*s+l*l),u=2*c+"px",h=a-r.left-c,d=o-r.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(h=0,d=0,u="100%"),n.classList.add("e-ripple");var p=CP("div",{className:"e-ripple-element",styles:"width: "+u+";height: "+u+";left: "+h+"px;top: "+d+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(p),window.getComputedStyle(p).getPropertyValue("opacity"),p.style.transform="scale(1)",n!==this.parent&&OR.add(n,"mouseleave",uM,{parent:this.parent,rippleOptions:this.rippleOptions})}}function cM(e){hM(e,this)}function uM(e){hM(e,this)}function hM(e,t){var i=t.rippleOptions.duration,n=e.target,r=t.rippleOptions.selector,a=r?MP(n,r):n;if(a&&(!a||-1!==a.className.indexOf("e-ripple"))){var o=PP(".e-ripple-element",a),s=o[o.length-1];s&&(s.style.opacity="0.5"),t.parent!==a&&OR.remove(a,"mouseleave",uM),setTimeout((function(){s&&s.parentNode&&s.parentNode.removeChild(s),a.getElementsByClassName("e-ripple-element").length||a.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}var dM,pM,fM=!1,vM=function(){function e(t){_classCallCheck2(this,e),this.loadedModules=[],this.parent=t}return _createClass(e,[{key:"inject",value:function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++){var r,a=e[n],o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=a.member;if(s.prototype.getModuleName()===a.member&&!this.isModuleLoaded(l)){var c=ED(s,a.args),u=this.getMemberName(l);AD(u,a.isProperty?s:c,this.parent);var h=a;h.member=u,this.loadedModules.push(h)}}}catch(d){o.e(d)}finally{o.f()}}}else this.clean()}},{key:"clean",value:function(){var e,t=_createForOfIteratorHelper(this.loadedModules);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.isProperty||TD(i.member,this.parent).destroy()}}catch(n){t.e(n)}finally{t.f()}this.loadedModules=[]}},{key:"clearUnusedModule",value:function(e){var t,i=this,n=e.map((function(e){return i.getMemberName(e.member)})),r=_createForOfIteratorHelper(this.loadedModules.filter((function(e){return-1===n.indexOf(e.member)})));try{for(r.s();!(t=r.n()).done;){var a=t.value;a.isProperty||TD(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),OD(this.parent,a.member)}}catch(o){r.e(o)}finally{r.f()}}},{key:"getMemberName",value:function(e){return e[0].toLowerCase()+e.substring(1)+"Module"}},{key:"isModuleLoaded",value:function(e){var t,i=_createForOfIteratorHelper(this.loadedModules);try{for(i.s();!(t=i.n()).done;){if(t.value.member===this.getMemberName(e))return!0}}catch(n){i.e(n)}finally{i.f()}return!1}}]),e}(),mM=function(){function e(t,i,n,r){_classCallCheck2(this,e),this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=TD("callChildDataBind",VP),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=i,this.isParentArray=r,this.setProperties(n,!0)}return _createClass(e,[{key:"updateChange",value:function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)}},{key:"updateTimeOut",value:function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}}},{key:"clearChanges",value:function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}}},{key:"setProperties",value:function(e,t){!0===t?(ID(this,e),this.updateChange(!1,this.propName),this.clearChanges()):ID(this,e)}},{key:"dataBind",value:function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(AD(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),AD(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()}},{key:"saveChanges",value:function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())}},{key:"serverDataBind",value:function(e,t,i,n){}},{key:"getParentKey",value:function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i}}]),e}(),gM=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},yM=0,bM=0,kM=(pM=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).randomId=function(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),r.isStringTemplate=!1,r.needsID=!1,r.isReactHybrid=!1,RD(r.enableRtl)&&r.setProperties({enableRtl:!1},!0),RD(r.locale)&&r.setProperties({locale:"en-US"},!0),r.moduleLoader=new vM(_assertThisInitialized(r)),r.localObserver=new oR(_assertThisInitialized(r)),sR.on("notifyExternalChange",r.detectFunction,_assertThisInitialized(r),r.randomId),PD(n)||r.appendTo(),r}return _createClass(i,[{key:"requiredModules",value:function(){return[]}},{key:"destroy",value:function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(_P([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),this.moduleLoader.clean(),sR.off("notifyExternalChange",this.detectFunction,this.randomId)))}},{key:"refresh",value:function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new oR(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1}},{key:"accessMount",value:function(){this.mount&&!this.isReactHybrid&&this.mount()}},{key:"getRootElement",value:function(){return this.isReactHybrid?this.actualElement:this.element}},{key:"appendTo",value:function(e){if(RD(e)||"string"!=typeof e?RD(e)||(this.element=e):this.element=document.querySelector(e),!RD(this.element)){var t="e-"+this.getModuleName().toLowerCase();wP([this.element],["e-control",t]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=TD("ej2_instances",this.element);n&&-1!==n.indexOf(this)||_get(_getPrototypeOf(i.prototype),"addInstance",this).call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}}},{key:"renderComplete",value:function(e){this.isRendered=!0}},{key:"dataBind",value:function(){this.injectModules(),_get(_getPrototypeOf(i.prototype),"dataBind",this).call(this)}},{key:"on",value:function(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else{var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.localObserver.on(a.event,a.handler,a.context)}}catch(o){r.e(o)}finally{r.f()}}}},{key:"off",value:function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else{var i,n=_createForOfIteratorHelper(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;this.localObserver.off(r.event,r.handler)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"notify",value:function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)}},{key:"getInjectedModules",value:function(){return this.injectedModules}},{key:"createElement",value:function(e,t,i){return i&&this.isReactHybrid?(t&&(t={}),t["data-id"]=eP(),nP.createElement(e,t)):CP(e,t)}},{key:"triggerStateChange",value:function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})}},{key:"injectModules",value:function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)}},{key:"detectFunction",value:function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])}},{key:"mergePersistData",value:function(){var e=window.localStorage.getItem(this.getModuleName()+this.element.id);RD(e)||""===e||this.setProperties(JSON.parse(e),!0)}},{key:"setPersistData",value:function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())}},{key:"clearTemplate",value:function(e,t){}},{key:"getUniqueID",value:function(e){return this.isHistoryChanged()&&(yM=0),dM=this.pageID(location.href),bM=history.length,e+"_"+dM+"_"+yM++}},{key:"pageID",value:function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}},{key:"isHistoryChanged",value:function(){return dM!==this.pageID(location.href)||bM!==history.length}},{key:"addOnPersist",value:function(e){var t,i=this,n={},r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a,o=t.value;PD(a=TD(o,this))||AD(o,this.getActualProperties(a),n)}}catch(s){r.e(s)}finally{r.f()}return JSON.stringify(n,(function(e,t){return i.getActualProperties(t)}))}},{key:"getActualProperties",value:function(e){return e instanceof mM?TD("properties",e):e}},{key:"ignoreOnPersist",value:function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))}},{key:"iterateJsonProperties",value:function(e,t){for(var i=this,n={},r=function(){var r=o[a];if(-1===t.indexOf(r)){var s=e[r];if("object"!=typeof s||s instanceof Array)n[r]=s;else{var l=t.filter((function(e){return new RegExp(r+".").test(e)})).map((function(e){return e.replace(r+".","")}));n[r]=i.iterateJsonProperties(i.getActualProperties(s),l)}}},a=0,o=Object.keys(e);a<o.length;a++)r();return n}}],[{key:"Inject",value:function(){this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var n=0;n<t.length;n++)-1===this.prototype.injectedModules.indexOf(t[n])&&this.prototype.injectedModules.push(t[n])}}]),i}(VP),gM([QP(!1)],pM.prototype,"enablePersistence",void 0),gM([QP()],pM.prototype,"enableRtl",void 0),gM([QP()],pM.prototype,"locale",void 0),pM=gM([tM],pM));"undefined"!=typeof window&&window.addEventListener("popstate",(function(){yM=0}));var CM,wM,_M=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},SM={left:0,top:0,bottom:0,right:0},EM={isDragged:!1},TM=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM);return _M([QP(0)],e.prototype,"left",void 0),_M([QP(0)],e.prototype,"top",void 0),e}(),AM=function(){var e=CM=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n,e)).dragLimit=CM.getDefaultPosition(),r.borderWidth=CM.getDefaultPosition(),r.padding=CM.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}return _createClass(i,[{key:"bind",value:function(){this.toggleEvents(),AR.isIE&&wP([this.element],"e-block-touch"),this.droppables[this.scope]={}}},{key:"toggleEvents",value:function(e){var t;PD(this.handle)||(t=RP(this.handle,this.element));var i=this.enableTapHold&&AR.isDevice&&AR.isTouch?this.mobileInitialize:this.initialize;e?OR.remove(t||this.element,AR.touchStartEvent,i):OR.add(t||this.element,AR.touchStartEvent,i,this)}},{key:"mobileInitialize",value:function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),OR.add(document,AR.touchMoveEvent,this.removeTapholdTimer,this),OR.add(document,AR.touchEndEvent,this.removeTapholdTimer,this)}},{key:"removeTapholdTimer",value:function(){clearTimeout(this.tapHoldTimer),OR.remove(document,AR.touchMoveEvent,this.removeTapholdTimer),OR.remove(document,AR.touchEndEvent,this.removeTapholdTimer)}},{key:"getScrollableParent",value:function(e,t){return RD(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),RD(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)}},{key:"getScrollableValues",value:function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")}},{key:"initialize",value:function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!RD(MP(e.target,i[n])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!PD(e.changedTouches)&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var r=this.getCoordinates(e);if(this.initialPosition={x:r.pageX,y:r.pageY},!this.clone){var a=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=r.pageX-(a.left+this.parentScrollX),this.relativeYPosition=r.pageY-(a.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(OR.add(document,AR.touchMoveEvent,this.intDragStart,this),OR.add(document,AR.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,OR.trigger(document.documentElement,AR.touchStartEvent,e)}}},{key:"intDragStart",value:function(e){this.removeTapholdTimer();var t=!PD(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,n=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var a=this.element;if(this.clone&&this.dragTarget){var o=MP(e.target,this.dragTarget);RD(o)||(a=o)}this.offset=this.calculateParentPosition(a),this.position=this.getMousePosition(e,this.isDragScroll);var s=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(s*s+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||RD(c))return;var u=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(u.offsetParent),this.dragStart){var h={event:e,element:a,target:this.getProperTargetElement(e),bindEvents:null,dragElement:u};this.trigger("dragStart",h)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var d=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},LP(u,this.getDragPosition({position:"absolute",left:d.left,top:d.top})),OR.remove(document,AR.touchMoveEvent,this.intDragStart),OR.remove(document,AR.touchEndEvent,this.intDestroy),this.bindDragEvents(u)}}}},{key:"bindDragEvents",value:function(e){EP(e)?(OR.add(document,AR.touchMoveEvent,this.intDrag,this),OR.add(document,AR.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))}},{key:"elementInViewport",value:function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)this.top+=(e=e.offsetParent).offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth}},{key:"getProcessedPositionValue",value:function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e}},{key:"calculateParentPosition",value:function(e){if(RD(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}}},{key:"intDrag",value:function(e){if(PD(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var a=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:a})}var o=this.checkTargetElement(e);if(o.target&&o.instance){var s=!0;this.hoverObject&&(this.hoverObject.instance!==o.instance?this.triggerOutFunction(e,o):s=!1),s&&(o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intOver(e,o.target),this.hoverObject=o)}else this.hoverObject&&this.triggerOutFunction(e,o);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var c=this.parentClientRect.left,u=this.parentClientRect.top,h=this.getCoordinates(e),d=h.pageX,p=h.pageY,f=this.position.left-this.diffX,v=this.position.top-this.diffY;if(this.dragArea){var m=getComputedStyle(l);if(this.pageX!==d||this.skipDistanceCheck){var g=l.offsetWidth+(parseFloat(m.marginLeft)+parseFloat(m.marginRight));t=this.dragLimit.left>f&&f>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<f+g&&f>0?f-(f-this.dragLimit.right)+window.pageXOffset-g:f<0?this.dragLimit.left:f}if(this.pageY!==p||this.skipDistanceCheck){var y=l.offsetHeight+(parseFloat(m.marginTop)+parseFloat(m.marginBottom));i=this.dragLimit.top>v&&v>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<v+y&&v>0?v-(v-this.dragLimit.bottom)+window.pageYOffset-y:v<0?this.dragLimit.top:v}}else t=f,i=v;var b,k,C=u+this.borderWidth.top,w=c+this.borderWidth.left;this.dragProcessStarted&&(RD(i)&&(i=this.prevTop),RD(t)&&(t=this.prevLeft)),this.dragArea?(b=i-C<0?this.dragLimit.top:i-C,k=t-w<0?this.dragElePosition.left:t-w):(b=i-C,k=t-w);var _=this.getProcessedPositionValue({top:b+"px",left:k+"px"});LP(l,this.getDragPosition(_)),!this.elementInViewport(l)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=d,this.pageY=p}}},{key:"triggerOutFunction",value:function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null}},{key:"getDragPosition",value:function(e){var t=DD({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t}},{key:"getDocumentWidthHeight",value:function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])}},{key:"intDragStop",value:function(e){if(this.dragProcessStarted=!1,PD(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}}},{key:"intDestroy",value:function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),OR.remove(document,AR.touchMoveEvent,this.intDragStart),OR.remove(document,AR.touchEndEvent,this.intDragStop),OR.remove(document,AR.touchEndEvent,this.intDestroy),OR.remove(document,AR.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)}},{key:"onPropertyChanged",value:function(e,t){}},{key:"getModuleName",value:function(){return"draggable"}},{key:"isDragStarted",value:function(e){return e&&(EM.isDragged=!EM.isDragged),EM.isDragged}},{key:"setDragArea",value:function(){var e,t,i,n=0,r=0;if(i="string"==typeof this.dragArea?RP(this.dragArea):this.dragArea){var a=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:a.right-a.left,t=i.scrollHeight?i.scrollHeight:a.bottom-a.top;for(var o=["Top","Left","Bottom","Right"],s=getComputedStyle(i),l=0;l<o.length;l++){var c=o[l],u=s["border"+c+"Width"],h=s["padding"+c],d=c.toLowerCase();this.borderWidth[d]=isNaN(parseFloat(u))?0:parseFloat(u),this.padding[d]=isNaN(parseFloat(h))?0:parseFloat(h)}n=a.top,r=a.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}}},{key:"getProperTargetElement",value:function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return LD(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t}},{key:"getMousePosition",value:function(e,t){var i,n,r=void 0!==e.srcElement?e.srcElement:e.target,a=this.getCoordinates(e),o=RD(r.offsetParent);return t?(i=this.clone?a.pageX:a.pageX+(o?0:r.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?a.pageY:a.pageY+(o?0:r.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?a.pageX:a.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?a.pageY:a.pageY+window.pageYOffset-this.relativeYPosition),{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}}},{key:"getCoordinates",value:function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e}},{key:"getHelperElement",value:function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=CP("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t}},{key:"setGlobalDroppables",value:function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}}},{key:"checkTargetElement",value:function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!RD(t.parentNode)){var n=MP(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}}},{key:"getDropInstance",value:function(e){var t,i=e&&e.ej2_instances;if(i){var n,r=_createForOfIteratorHelper(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;if("droppable"===a.getModuleName()){t=a;break}}}catch(o){r.e(o)}finally{r.f()}}return t}},{key:"destroy",value:function(){this.toggleEvents(!0),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}}],[{key:"getDefaultPosition",value:function(){return DD({},SM)}}]),i}(VP);return _M([ZP({},TM)],e.prototype,"cursorAt",void 0),_M([QP(!0)],e.prototype,"clone",void 0),_M([QP()],e.prototype,"dragArea",void 0),_M([QP()],e.prototype,"isDragScroll",void 0),_M([eM()],e.prototype,"drag",void 0),_M([eM()],e.prototype,"dragStart",void 0),_M([eM()],e.prototype,"dragStop",void 0),_M([QP(1)],e.prototype,"distance",void 0),_M([QP()],e.prototype,"handle",void 0),_M([QP()],e.prototype,"abort",void 0),_M([QP()],e.prototype,"helper",void 0),_M([QP("default")],e.prototype,"scope",void 0),_M([QP("")],e.prototype,"dragTarget",void 0),_M([QP()],e.prototype,"axis",void 0),_M([QP()],e.prototype,"queryPositionInfo",void 0),_M([QP(!1)],e.prototype,"enableTailMode",void 0),_M([QP(!1)],e.prototype,"skipDistanceCheck",void 0),_M([QP(!0)],e.prototype,"preventDefault",void 0),_M([QP(!1)],e.prototype,"enableAutoScroll",void 0),_M([QP(!1)],e.prototype,"enableTapHold",void 0),_M([QP(750)],e.prototype,"tapHoldThreshold",void 0),e=CM=_M([tM],e)}(),OM=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},xM=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n,e)).mouseOver=!1,r.dragData={},r.dragStopCalled=!1,r.bind(),r}return _createClass(i,[{key:"bind",value:function(){this.wireEvents()}},{key:"wireEvents",value:function(){OR.add(this.element,AR.touchEndEvent,this.intDrop,this)}},{key:"onPropertyChanged",value:function(e,t){}},{key:"getModuleName",value:function(){return"droppable"}},{key:"intOver",value:function(e,t){this.mouseOver||(this.trigger("over",{event:e,target:t,dragData:this.dragData[this.scope]}),this.mouseOver=!0)}},{key:"intOut",value:function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)}},{key:"intDrop",value:function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],a=!!r&&r.helper&&EP(r.helper);a&&(i=this.isDropArea(e,r.helper,t),this.accept&&(n=FP(r.helper,this.accept))),a&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}}},{key:"isDropArea",value:function(e,t,i){var n={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||n.target===t){t.style.display="none";var a=r?e.changedTouches[0]:e,o=document.elementFromPoint(a.clientX,a.clientY);n.canDrop=!1,n.canDrop=LD(o,this.element),n.canDrop&&(n.target=o),t.style.display=""}return n}},{key:"destroy",value:function(){OR.remove(this.element,AR.touchEndEvent,this.intDrop),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}}]),i}(VP);return OM([QP()],e.prototype,"accept",void 0),OM([QP("default")],e.prototype,"scope",void 0),OM([eM()],e.prototype,"drop",void 0),OM([eM()],e.prototype,"over",void 0),OM([eM()],e.prototype,"out",void 0),e=OM([tM],e)}(),IM=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},DM={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},RM=function(){var e=wM=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n,e)).keyPressHandler=function(e){for(var t=e.altKey,i=e.ctrlKey,n=e.shiftKey,a=e.which,o=0,s=Object.keys(r.keyConfigs);o<s.length;o++){var l,c=s[o],u=_createForOfIteratorHelper(r.keyConfigs[c].split(","));try{for(u.s();!(l=u.n()).done;){var h=l.value,d=wM.getKeyConfigData(h.trim());t===d.altKey&&i===d.ctrlKey&&n===d.shiftKey&&a===d.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}}catch(p){u.e(p)}finally{u.f()}}},r.bind(),r}return _createClass(i,[{key:"destroy",value:function(){this.unwireEvents(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"onPropertyChanged",value:function(e,t){}},{key:"bind",value:function(){this.wireEvents()}},{key:"getModuleName",value:function(){return"keyboard"}},{key:"wireEvents",value:function(){this.element.addEventListener(this.eventName,this.keyPressHandler)}},{key:"unwireEvents",value:function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)}}],[{key:"getKeyConfigData",value:function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),i={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return i.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):wM.getKeyCode(t[t.length-1]),wM.configCache[e]=i,i}},{key:"getKeyCode",value:function(e){return DM[e]||e.toUpperCase().charCodeAt(0)}}]),i}(VP);return e.configCache={},IM([QP({})],e.prototype,"keyConfigs",void 0),IM([QP("keyup")],e.prototype,"eventName",void 0),IM([eM()],e.prototype,"keyAction",void 0),e=wM=IM([tM],e)}(),PM=function(){var e=function(){function e(t,i,n){_classCallCheck2(this,e),this.controlName=t,this.localeStrings=i,this.setLocale(n||"en-US")}return _createClass(e,[{key:"setLocale",value:function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings}},{key:"getConstant",value:function(e){return RD(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]}},{key:"intGetControlConstant",value:function(e,t){return e[t]?e[t][this.controlName]:null}}],[{key:"load",value:function(e){this.locale=DD(this.locale,e,{},!0)}}]),e}();return e.locale={},e}(),MM=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},LM=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM);return MM([QP(50)],e.prototype,"swipeThresholdDistance",void 0),e}(),NM=/(Up|Down)/,FM=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n,e)).touchAction=!0,r.tapCount=0,r.startEvent=function(e){if(!0===r.touchAction){var t=r.updateChangeTouches(e);void 0!==e.changedTouches&&(r.touchAction=!1),r.isTouchMoved=!1,r.movedDirection="",r.startPoint=r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},r.startEventData=t,r.hScrollLocked=r.vScrollLocked=!1,r.tStampStart=Date.now(),r.timeOutTapHold=setTimeout((function(){r.tapHoldEvent(e)}),r.tapHoldThreshold),OR.add(r.element,AR.touchMoveEvent,r.moveEvent,_assertThisInitialized(r)),OR.add(r.element,AR.touchEndEvent,r.endEvent,_assertThisInitialized(r)),OR.add(r.element,AR.touchCancelEvent,r.cancelEvent,_assertThisInitialized(r))}},r.moveEvent=function(e){var t=r.updateChangeTouches(e);r.movedPoint=t,r.isTouchMoved=!(t.clientX===r.startPoint.clientX&&t.clientY===r.startPoint.clientY);var i={};r.isTouchMoved&&(clearTimeout(r.timeOutTapHold),r.calcScrollPoints(e),i=DD(i,{},{startEvents:r.startEventData,originalEvent:e,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,scrollDirection:r.scrollDirection,velocity:r.getVelocity(t)}),r.trigger("scroll",i),r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},r.cancelEvent=function(e){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap),r.tapCount=0,r.swipeFn(e),OR.remove(r.element,AR.touchCancelEvent,r.cancelEvent)},r.endEvent=function(e){r.swipeFn(e),r.isTouchMoved||"function"==typeof r.tap&&(r.trigger("tap",{originalEvent:e,tapCount:++r.tapCount}),r.timeOutTap=setTimeout((function(){r.tapCount=0}),r.tapThreshold)),r.modeclear()},r.swipeFn=function(e){clearTimeout(r.timeOutTapHold),clearTimeout(r.timeOutTap);var t=r.updateChangeTouches(e),i=t.clientX-r.startPoint.clientX,n=t.clientY-r.startPoint.clientY;i=Math.floor(i<0?-1*i:i),n=Math.floor(n<0?-1*n:i),r.isTouchMoved=i>1||n>1,r.endPoint=t,r.calcPoints(e);var a={originalEvent:e,startEvents:r.startEventData,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,swipeDirection:r.movedDirection,velocity:r.getVelocity(t)};if(r.isTouchMoved){var o,s=r.swipeSettings.swipeThresholdDistance;o=DD(o,r.defaultArgs,a);var l=!1,c=r.element,u=r.isScrollable(c),h=NM.test(r.movedDirection);(s<r.distanceX&&!h||s<r.distanceY&&h)&&(l=!u||r.checkSwipe(c,h)),l&&r.trigger("swipe",o)}r.modeclear()},r.modeclear=function(){r.modeClear=setTimeout((function(){r.touchAction=!0}),"function"!=typeof r.tap?0:20),r.lastTapTime=(new Date).getTime(),OR.remove(r.element,AR.touchMoveEvent,r.moveEvent),OR.remove(r.element,AR.touchEndEvent,r.endEvent),OR.remove(r.element,AR.touchCancelEvent,r.cancelEvent)},r.bind(),r}return _createClass(i,[{key:"onPropertyChanged",value:function(e,t){}},{key:"bind",value:function(){this.wireEvents(),AR.isIE&&this.element.classList.add("e-block-touch")}},{key:"destroy",value:function(){this.unwireEvents(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"wireEvents",value:function(){OR.add(this.element,AR.touchStartEvent,this.startEvent,this)}},{key:"unwireEvents",value:function(){OR.remove(this.element,AR.touchStartEvent,this.startEvent)}},{key:"getModuleName",value:function(){return"touch"}},{key:"isScrollable",value:function(e){var t=getComputedStyle(e);return!!/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}},{key:"tapHoldEvent",value:function(e){var t;this.tapCount=0,this.touchAction=!0,OR.remove(this.element,AR.touchMoveEvent,this.moveEvent),OR.remove(this.element,AR.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),OR.remove(this.element,AR.touchCancelEvent,this.cancelEvent)}},{key:"calcPoints",value:function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"}},{key:"calcScrollPoints",value:function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)}},{key:"getVelocity",value:function(e){var t=e.clientX,i=e.clientY,n=Date.now(),r=t-this.startPoint.clientX,a=i-this.startPoint.clientX,o=n-this.tStampStart;return Math.sqrt(r*r+a*a)/o}},{key:"checkSwipe",value:function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]]}},{key:"updateChangeTouches",value:function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e}}]),i}(VP);return MM([eM()],e.prototype,"tap",void 0),MM([eM()],e.prototype,"tapHold",void 0),MM([eM()],e.prototype,"swipe",void 0),MM([eM()],e.prototype,"scroll",void 0),MM([QP(350)],e.prototype,"tapThreshold",void 0),MM([QP(750)],e.prototype,"tapHoldThreshold",void 0),MM([ZP({},LM)],e.prototype,"swipeSettings",void 0),e=MM([tM],e)}(),BM=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],VM=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],jM=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],HM=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"beforeSanitize",value:function(){return{selectors:{tags:BM,attributes:VM}}}},{key:"sanitize",value:function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)}},{key:"serializeValue",value:function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i}},{key:"removeElement",value:function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[t].attributes,n=0;n<i.length;n++)this.wrapElement.children[t].removeAttribute(i[n].localName)}},{key:"removeXssTags",value:function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){xP(e)}))}},{key:"removeJsEvents",value:function(){var e=this.wrapElement.querySelectorAll("["+jM.join("],[")+"]");e.length>0&&e.forEach((function(e){jM.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))}},{key:"removeXssAttrs",value:function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))}}]),e}();function UM(e,t,i){var n={};if(e&&e.length){for(var r=0,a=e;r<a.length;r++){var o=a[r];!0===i?(t.propCollection[o]=new ec(!1),t[o]=t.propCollection[o]):n[o]=new ec(!1)}!0!==i&&t.setProperties(n,!0)}}function qM(e,t,i){var n=Object.keys(e.registeredTemplate);if(n.length)for(var r=t&&t.filter((function(e){return!/\./g.test(e)})),a=0,o=r&&r||n;a<o.length;a++){var s=o[a];if(i&&i.length)for(var l=0;l<i.length;l++)for(var c=0;c<e.registeredTemplate.template.length;c++)e.registeredTemplate.template[c].rootNodes[0]===i[l]&&(d=e.registeredTemplate[s])[c].destroy();else for(var u=0,h=e.registeredTemplate[s];u<h.length;u++){var d;if(!(d=h[u]).destroyed){if(d._view){var p=d._view.renderer.parentNode(d.rootNodes[0]);if(!RD(p))for(c=0;c<d.rootNodes.length;c++)p.appendChild(d.rootNodes[c])}d.destroy()}}delete e.registeredTemplate[s]}for(var f=function(e){e.instance&&e.instance.clearTemplate(t&&t.filter((function(t){return!!new RegExp(e.name).test(t)})))},v=0,m=e.tagObjects;v<m.length;v++)f(m[v])}function WM(e,t,i){for(var n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=i||{},a=0;a<n.length;a++){var o=n[a];a+1===n.length?r[o]=void 0===t?{}:t:void 0===r[o]&&(r[o]={}),r=r[o]}return r}var zM=function(){function e(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return e.prototype.ngOnInit=function(){this.registeredTemplate={};for(var e=0,t=this.tags;e<t.length;e++){var i=t[e],n=TD("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var r=Object.keys(this),a=0,o=r=r.filter((function(e){return/Ref$/i.test(e)}));a<o.length;a++){var s=o[a].replace("Ref","");AD(s.replace("_","."),TD(s,this),this.propCollection)}var l=Object.keys(this);if(this.directivePropList){for(var c=0;c<this.directivePropList.length;c++){var u=this.directivePropList[c];-1!==l.indexOf(u)&&AD(u,TD(u,this),this.propCollection)}this.hasChanges=!0}},e.prototype.registerEvents=function(e){UM(e,this,!0)},e.prototype.ngOnChanges=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];this.propCollection[n]=e[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},e.prototype.clearTemplate=function(e){qM(this,e)},e.prototype.getProperties=function(){for(var e=0,t=this.tagObjects;e<t.length;e++){var i=t[e];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},e.prototype.isChanged=function(){for(var e=this.hasChanges,t=0,i=this.tagObjects;t<i.length;t++)e=e||i[t].instance.hasChanges;return e},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=Object.keys(this),t=0,i=e=e.filter((function(e){return/Ref$/i.test(e)}));t<i.length;t++){var n=i[t].replace("Ref","");AD(n.replace("_","."),TD(n,this),this.propCollection)}},e.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},e}(),GM=function(){function e(e){this.list=[],this.hasChanges=!1,this.propertyName=e}return e.prototype.ngOnInit=function(){this.isInitChanges=!0},e.prototype.ngAfterContentInit=function(){var e=this,t=0;this.list=this.children.map((function(i){return i.index=t++,i.property=e.propertyName,i})),this.hasChanges=!0},e.prototype.getProperties=function(){for(var e=[],t=0,i=this.list;t<i.length;t++)e.push(i[t].getProperties());return e},e.prototype.isChanged=function(){var e=this,t=!1,i=0,n=!1,r=this.children.map((function(e){return e}));if(this.list.length===this.children.length)for(var a=0;a<this.list.length;a++){var o=Object.keys(this.list[a]);if(this.list[a].directivePropList)for(var s=0;s<this.list[a].directivePropList.length;s++){var l=this.list[a].directivePropList[s];if(-1!==o.indexOf(l)){var c=this.list[a];JSON.stringify(c[l])!==JSON.stringify(c.propCollection[l])&&(AD(l,TD(l,this.list[a]),this.list[a].propCollection),this.list[a].hasChanges=!0,this.list[a].isUpdated=!1)}}if(this.list[a].propCollection.dataSource)this.list[a].dataSource&&this.list[a].propCollection.dataSource!==this.list[a].dataSource&&(this.list[a].propCollection.dataSource=this.list[a].dataSource,this.list[a].hasChanges=!0),n=JSON.stringify(this.list[a].propCollection.dataSource)!==JSON.stringify(r[a].propCollection.dataSource);else for(var u=Object.keys(this.list[a].propCollection),h=0;h<u.length;h++)if(this.list[a].propCollection[u[h]]&&"TemplateRef_"===this.list[a].propCollection[u[h]].constructor.name){n=!0;break}}this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map((function(t){return t.index=i++,t.property=e.propertyName,t})));for(var d=0,p=this.list;d<p.length;d++)t=t||p[d].hasChanges;return!!this.list.length&&t},e.prototype.clearTemplate=function(e){for(var t=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(e&&e.map((function(e){return new RegExp(t.propertyName).test(e)?e.replace(t.propertyName+".",""):e})))},e.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var e=0;e<this.list.length;e++)this.list[e].isUpdated=!0},e.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},e}(),YM=function(){function e(){this.isProtectedOnChange=!0}return e.prototype.saveChanges=function(e,t,i){if(!this.isProtectedOnChange){this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},e.prototype.ngOnInit=function(e){var t=e||this;t.registeredTemplate={},t.ngBoundedEvents={},t.isAngular=!0,e&&(this.tags=e.tags),t.tags=this.tags||[],t.complexTemplate=this.complexTemplate||[],t.tagObjects=[],t.ngAttr=this.getAngularAttr(t.element),t.createElement=function(e,i){var n=t.srenderer?t.srenderer.createElement(e):CP(e);return void 0===i||(n.innerHTML=i.innerHTML?i.innerHTML:"",void 0!==i.className&&(n.className=i.className),void 0!==i.id&&(n.id=i.id),void 0!==i.styles&&n.setAttribute("style",i.styles),void 0!==t.ngAttr&&n.setAttribute(t.ngAttr,""),void 0!==i.attrs&&DP(n,i.attrs)),n};for(var i=0,n=t.tags;i<n.length;i++){var r=n[i],a={instance:TD("child"+r.substring(0,1).toUpperCase()+r.substring(1),t),name:r};t.tagObjects.push(a)}for(var o=Object.keys(t),s=0,l=o=o.filter((function(e){return/Ref$/i.test(e)&&/\_/i.test(e)}));s<l.length;s++){var c=l[s].replace("Ref",""),u={};AD(c.replace("_","."),TD(c,t),u),t.setProperties(u,!0)}},e.prototype.getAngularAttr=function(e){for(var t,i=e.attributes,n=i.length,r=0;r<n;r++)/_ngcontent/g.test(i[r].name)&&(t=i[r].name);return t},e.prototype.ngAfterViewInit=function(e){var t=e||this;/ejs-tab|ejs-accordion/g.test(t.ngEle.nativeElement.outerHTML)&&(t.ngEle.nativeElement.style.visibility="hidden");for(var i=Object.keys(t),n=0,r=i=i.filter((function(e){return/Ref$/i.test(e)}));n<r.length;n++){var a=r[n].replace("Ref","");AD(a.replace("_","."),TD(a+"Ref",t),t)}setTimeout((function(){"undefined"!=typeof window&&(t.appendTo(t.element),t.ngEle.nativeElement.style.visibility="")}))},e.prototype.ngOnDestroy=function(e){var t=e||this;"undefined"!=typeof window&&t.element.classList.contains("e-control")&&(t.destroy(),t.clearTemplate(null))},e.prototype.clearTemplate=function(e,t){qM(this,e,t)},e.prototype.ngAfterContentChecked=function(e){for(var t=e||this,i=0,n=t.tagObjects;i<n.length;i++){var r=n[i];if(!PD(r.instance)&&(r.instance.isInitChanges||r.instance.hasChanges||r.instance.hasNewChildren))if(r.instance.isInitChanges){var a={},o=void 0;(w=TD("instance.list",r))&&w.length&&(o=w[0].directivePropList);var s=!0;if(t.getModuleName&&"gantt"===t.getModuleName()&&(s=!1),o&&s&&-1===o.indexOf(r.instance.propertyName))for(var l=Object.keys(r.instance.list[0].propCollection),c=0;c<r.instance.list.length;c++){r.instance.list[c].propCollection[r.instance.propertyName]=[];for(var u={},h=0;h<l.length;h++){var d=l[h];u[d]=r.instance.list[c].propCollection[d]}for(var p=0;p<r.instance.list[c].tags.length;p++){var f=r.instance.list[c].tags[p],v=TD("child"+f.substring(0,1).toUpperCase()+f.substring(1),r.instance.list[c]);if(v){var m=r.instance.list[c]["child"+f.substring(0,1).toUpperCase()+f.substring(1)];if(m)for(var g=0;g<m.list.length;g++){var y=m.list[0].tags[0];if(y){var b=TD("child"+y.substring(0,1).toUpperCase()+y.substring(1),m.list[g]);b&&m.list[g].tagObjects.push({instance:b,name:y})}}r.instance.list[c].tagObjects.push({instance:v,name:f})}}r.instance.list[c].propCollection[r.instance.propertyName].push(u)}a[r.name]=r.instance.getProperties(),t.setProperties(a,r.instance.isInitChanges)}else{t[r.name].length!==r.instance.list.length&&(t[r.name]=r.instance.list);for(var k=0,C=r.instance.list;k<C.length;k++){var w,_=r.instance.list.indexOf(w=C[k]),S=TD(r.name,t)[_];void 0!==S&&void 0!==S.setProperties&&("DashboardLayout"===t.getModuleName()?S.setProperties(w.getProperties(),!0):S.setProperties(w.getProperties())),w.isUpdated=!0}}}},e.prototype.registerEvents=function(e){UM(e,this)},e.prototype.twoWaySetter=function(e,t){var i=TD(t,this.properties);i!==e&&(this.saveChanges(t,e,i),AD(t,RD(e)?null:e,this.properties),TD(t+"Change",this).emit(e))},e.prototype.addTwoWay=function(e){for(var t=this,i=function(e){TD(e,n),Object.defineProperty(n,e,{get:function(){return TD(e,t.properties)},set:function(i){return t.twoWaySetter(i,e)}}),AD(e+"Change",new ec,n)},n=this,r=0,a=e;r<a.length;r++)i(a[r])},e.prototype.addEventListener=function(e,t){var i=TD(e,this);PD(i)||(this.ngBoundedEvents[e]||(this.ngBoundedEvents[e]=new Map),this.ngBoundedEvents[e].set(t,i.subscribe(t)))},e.prototype.removeEventListener=function(e,t){PD(TD(e,this))||this.ngBoundedEvents[e].get(t).unsubscribe()},e.prototype.trigger=function(e,t,i){var n=TD(e,this),r=this.isProtectedOnChange;this.isProtectedOnChange=!1,t&&(t.name=e),PD(n)||n.next(t);var a=TD("local"+e.charAt(0).toUpperCase()+e.slice(1),this);PD(a)||a.call(this,t),this.isProtectedOnChange=r,i&&i.call(this,t)},e}(),KM=rP.compile;function XM(e){return function(t,i){var n={set:JM(i),get:QM(i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n)}}function JM(e){return function(t){void 0!==t&&(AD(e+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=e):this.saveChanges&&(this.saveChanges(e,t,void 0),this.dataBind()))}}function QM(e,t){return function(){return TD(e+"Ref",this)||t}}function ZM(e,t,i,n,r,a){var o=n;if(n.tagName===t){var s=TD("ej2_instances",n);o=e("input",{attrs:{type:i}});for(var l=["change","cssClass","label","labelPosition","id"],c=0,u=n.attributes.length;c<u;c++)-1===l.indexOf(n.attributes[c].nodeName)&&o.setAttribute(n.attributes[c].nodeName,n.attributes[c].nodeValue);DP(n,{class:r,role:a,"aria-checked":"false"}),n.appendChild(o),AD("ej2_instances",s,o),OD(n,"ej2_instances")}return o}function $M(e){for(var t,i=e.childNodes,n=0;n<i.length;n++)if(3===(t=i[n]).nodeType)return t;return null}function eL(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&wP([n],i.cssClass.split(" ")),i.enableRtl&&n.classList.add("e-rtl"),t){var r=e("span",{className:"e-ripple-container"});sM(r,{isCenterRipple:!0,duration:400}),n.appendChild(r)}var a=e("span",{className:"e-frame e-icons"});if(i.checked&&a.classList.add("e-check"),n.appendChild(a),i.label){var o=e("span",{className:"e-label",innerHTML:i.label});n.appendChild(o)}return n}function tL(e,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}}rP.compile=function(e,t){if("string"==typeof e)return KM(e,t);var i=e.elementRef.nativeElement._viewContainerRef,n=e.elementRef.nativeElement.propName;return function(t,r,a){var o=i||r.viewContainerRef,s=o.createEmbeddedView(e,{$implicit:t});s.markForCheck();var l=r?r.registeredTemplate:TD("currentInstance.registeredTemplate",o);return void 0===l[a=a||n]&&(l[a]=[]),l[a].push(s),s.rootNodes}};var iL,nL,rL,aL,oL,sL,lL,cL,uL,hL,dL=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},pL=(iL=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"preRender",value:function(){}},{key:"render",value:function(){this.initialize(),this.removeRippleEffect=sM(this.element,{selector:".e-btn"}),this.renderComplete()}},{key:"initialize",value:function(){if(this.cssClass&&wP([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?HM.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled?this.controlStatus(this.disabled):this.wireEvents()}},{key:"controlStatus",value:function(e){this.element.disabled=e}},{key:"setIconCss",value:function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var t=this.element.childNodes[0];!t||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,t)}}},{key:"wireEvents",value:function(){this.isToggle&&OR.add(this.element,"click",this.btnClickHandler,this)}},{key:"unWireEvents",value:function(){this.isToggle&&OR.remove(this.element,"click",this.btnClickHandler)}},{key:"btnClickHandler",value:function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")}},{key:"destroy",value:function(){var e,t=["e-primary","e-rtl","e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),_P([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,"")),(e=this.element.querySelector("span.e-btn-icon"))&&xP(e),this.unWireEvents(),fM&&this.removeRippleEffect()}},{key:"getModuleName",value:function(){return"btn"}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":var r=this.element.querySelector("span.e-btn-icon");r?e.iconCss?(r.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&r.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):xP(r):this.setIconCss();break;case"iconPosition":_P([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(r=this.element.querySelector("span.e-btn-icon"))&&xP(r),this.setIconCss();break;case"cssClass":t.cssClass&&_P([this.element],t.cssClass.split(" ")),e.cssClass&&wP([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl");break;case"content":$M(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=HM.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?OR.add(this.element,"click",this.btnClickHandler,this):(OR.remove(this.element,"click",this.btnClickHandler),_P([this.element],["e-active"]))}}},{key:"click",value:function(){this.element.click()}},{key:"focusIn",value:function(){this.element.focus()}}],[{key:"Inject",value:function(){}}]),i}(kM),dL([QP("Left")],iL.prototype,"iconPosition",void 0),dL([QP("")],iL.prototype,"iconCss",void 0),dL([QP(!1)],iL.prototype,"disabled",void 0),dL([QP(!1)],iL.prototype,"isPrimary",void 0),dL([QP("")],iL.prototype,"cssClass",void 0),dL([QP("")],iL.prototype,"content",void 0),dL([QP(!1)],iL.prototype,"isToggle",void 0),dL([QP()],iL.prototype,"locale",void 0),dL([QP(!1)],iL.prototype,"enableHtmlSanitizer",void 0),dL([eM()],iL.prototype,"created",void 0),iL=dL([tM],iL)),fL=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},vL="e-frame",mL="e-ripple-container",gL=["title","class","style","disabled","readonly","name","value"],yL=(nL=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).isFocused=!1,r.isMouseClick=!1,r}return _createClass(i,[{key:"changeState",value:function(e){var t,i,n=this.getWrapper().getElementsByClassName(vL)[0];fM&&(i=this.getWrapper().getElementsByClassName(mL)[0]),"check"===e?(n.classList.remove("e-stop"),n.classList.add("e-check"),i&&(i.classList.remove("e-ripple-stop"),i.classList.add("e-ripple-check")),t="true",this.element.checked=!0):"uncheck"===e?(_P([n],["e-check","e-stop"]),i&&_P([i],["e-ripple-check","e-ripple-stop"]),t="false",this.element.checked=!1):(n.classList.remove("e-check"),n.classList.add("e-stop"),i&&(i.classList.remove("e-ripple-check"),i.classList.add("e-ripple-stop")),t="mixed",this.element.indeterminate=!0),this.getWrapper().setAttribute("aria-checked",t)}},{key:"clickHandler",value:function(e){this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0),this.trigger("change",{checked:this.element.checked,event:e})}},{key:"destroy",value:function(){var e=this,t=this.getWrapper();this.wrapper&&(t=this.wrapper,_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&t.parentNode.insertBefore(this.element,t),xP(t),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach((function(t){e.element.removeAttribute(t)}))):(["role","aria-checked","class"].forEach((function(e){t.removeAttribute(e)})),t.innerHTML=""))}},{key:"focusHandler",value:function(){this.isFocused=!0}},{key:"focusOutHandler",value:function(){this.getWrapper().classList.remove("e-focus"),this.isFocused=!1}},{key:"getModuleName",value:function(){return"checkbox"}},{key:"getPersistData",value:function(){return this.addOnPersist(["checked","indeterminate"])}},{key:"getWrapper",value:function(){return this.element.parentElement?this.element.parentElement.parentElement:null}},{key:"initialize",value:function(){RD(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()}},{key:"initWrapper",value:function(){var e=this.element.parentElement;e.classList.contains("e-checkbox-wrapper")||(e=this.createElement("div",{className:"e-checkbox-wrapper",attrs:{role:"checkbox","aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));var t,i,n=this.createElement("label",{attrs:{for:this.element.id}}),r=this.createElement("span",{className:"e-icons "+vL});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&wP([e],this.cssClass.split(" ")),e.appendChild(n),n.appendChild(this.element),i=n,(t=this).element.getAttribute("ejs-for")&&i.appendChild(t.createElement("input",{attrs:{name:t.name||t.element.name,value:"false",type:"hidden"}})),n.appendChild(r),fM){var a=this.createElement("span",{className:mL});"Before"===this.labelPosition?n.appendChild(a):n.insertBefore(a,r),sM(a,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)}},{key:"keyUpHandler",value:function(){this.isFocused&&this.getWrapper().classList.add("e-focus")}},{key:"labelMouseHandler",value:function(e){this.isMouseClick=!0,tL(e,this.getWrapper().getElementsByClassName(mL)[0])}},{key:"onPropertyChanged",value:function(e,t){for(var i=this.getWrapper(),n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove("e-checkbox-disabled"),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":t.cssClass&&_P([i],t.cssClass.split(" ")),e.cssClass&&wP([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":var a=i.getElementsByClassName("e-label")[0],o=i.getElementsByTagName("label")[0];xP(a),"After"===e.labelPosition?o.appendChild(a):o.insertBefore(a,i.getElementsByClassName(vL)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}},{key:"preRender",value:function(){var e=this.element;this.formElement=MP(this.element,"form"),this.tagName=this.element.tagName,e=ZM(this.createElement,"EJS-CHECKBOX","checkbox",e,"e-checkbox-wrapper","checkbox"),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=MD("e-"+this.getModuleName()))}},{key:"render",value:function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.renderComplete(),this.wrapper=this.getWrapper()}},{key:"setDisabled",value:function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add("e-checkbox-disabled"),e.setAttribute("aria-disabled","true")}},{key:"setText",value:function(e){var t=this.getWrapper().getElementsByClassName("e-label")[0];if(t)t.textContent=e;else{e=this.enableHtmlSanitizer?HM.sanitize(e):e,t=this.createElement("span",{className:"e-label",innerHTML:e});var i=this.getWrapper().getElementsByTagName("label")[0];"Before"===this.labelPosition?i.insertBefore(t,this.getWrapper().getElementsByClassName(vL)[0]):i.appendChild(t)}}},{key:"changeHandler",value:function(e){e.stopPropagation()}},{key:"formResetHandler",value:function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue}},{key:"unWireEvents",value:function(){var e=this.wrapper;OR.remove(this.element,"click",this.clickHandler),OR.remove(this.element,"keyup",this.keyUpHandler),OR.remove(this.element,"focus",this.focusHandler),OR.remove(this.element,"focusout",this.focusOutHandler);var t=e.getElementsByTagName("label")[0];OR.remove(t,"mousedown",this.labelMouseHandler),OR.remove(t,"mouseup",this.labelMouseHandler),this.formElement&&OR.remove(this.formElement,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&OR.remove(this.element,"change",this.changeHandler)}},{key:"wireEvents",value:function(){var e=this.getWrapper();OR.add(this.element,"click",this.clickHandler,this),OR.add(this.element,"keyup",this.keyUpHandler,this),OR.add(this.element,"focus",this.focusHandler,this),OR.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByTagName("label")[0];OR.add(t,"mousedown",this.labelMouseHandler,this),OR.add(t,"mouseup",this.labelMouseHandler,this),this.formElement&&OR.add(this.formElement,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&OR.add(this.element,"change",this.changeHandler,this)}},{key:"updateHtmlAttributeToWrapper",value:function(){if(!RD(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(gL.indexOf(i)>-1){var n=this.getWrapper();"class"===i?wP([n],this.htmlAttributes[i].split(" ")):"title"===i?n.setAttribute(i,this.htmlAttributes[i]):"style"===i?this.getWrapper().getElementsByClassName(vL)[0].setAttribute(i,this.htmlAttributes[i]):this.element.setAttribute(i,this.htmlAttributes[i])}}}},{key:"click",value:function(){this.element.click()}},{key:"focusIn",value:function(){this.element.focus()}}]),i}(kM),fL([eM()],nL.prototype,"change",void 0),fL([eM()],nL.prototype,"created",void 0),fL([QP(!1)],nL.prototype,"checked",void 0),fL([QP("")],nL.prototype,"cssClass",void 0),fL([QP(!1)],nL.prototype,"disabled",void 0),fL([QP(!1)],nL.prototype,"indeterminate",void 0),fL([QP("")],nL.prototype,"label",void 0),fL([QP("After")],nL.prototype,"labelPosition",void 0),fL([QP("")],nL.prototype,"name",void 0),fL([QP("")],nL.prototype,"value",void 0),fL([QP(!1)],nL.prototype,"enableHtmlSanitizer",void 0),fL([QP({})],nL.prototype,"htmlAttributes",void 0),nL=fL([tM],nL)),bL=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},kL=(hL=rL=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).isFocused=!1,r}return _createClass(i,[{key:"changeHandler",value:function(e){this.checked=!0,this.dataBind(),this.trigger("change",{value:this.value,event:e}),"EJS-RADIOBUTTON"===this.tagName&&e.stopPropagation()}},{key:"updateChange",value:function(e){for(var t,i,n=this.getRadioGroup(),r=0;r<n.length;r++)(t=n[r])!==this.element&&((i=jD(t,rL)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(i.angularValue=this.value))}},{key:"destroy",value:function(){var e=this,t=this.element.parentElement;_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(t.parentNode.insertBefore(this.element,t),xP(t),this.element.checked=!1,["name","value","disabled"].forEach((function(t){e.element.removeAttribute(t)}))):(["role","aria-checked","class"].forEach((function(e){t.removeAttribute(e)})),t.innerHTML="")}},{key:"focusHandler",value:function(){this.isFocused=!0}},{key:"focusOutHandler",value:function(){this.getLabel().classList.remove("e-focus")}},{key:"getModuleName",value:function(){return"radio"}},{key:"getSelectedValue",value:function(){for(var e,t=this.getRadioGroup(),i=0,n=t.length;i<n;i++)if((e=t[i]).checked)return e.value;return""}},{key:"getRadioGroup",value:function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')}},{key:"getPersistData",value:function(){return this.addOnPersist(["checked"])}},{key:"getLabel",value:function(){return this.element.nextElementSibling}},{key:"initialize",value:function(){RD(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()}},{key:"initWrapper",value:function(){var e,t=this.element.parentElement;t.classList.contains("e-radio-wrapper")||(t=this.createElement("div",{className:"e-radio-wrapper"}),this.element.parentNode.insertBefore(t,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),fM&&(e=this.createElement("span",{className:"e-ripple-container"}),i.appendChild(e),sM(e,{duration:400,isCenterRipple:!0})),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add("e-rtl"),this.cssClass&&wP([i],this.cssClass.split(" ")),this.label&&this.setText(this.label)}},{key:"keyUpHandler",value:function(){this.isFocused&&this.getLabel().classList.add("e-focus")}},{key:"labelRippleHandler",value:function(e){tL(e,this.getLabel().getElementsByClassName("e-ripple-container")[0])}},{key:"formResetHandler",value:function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&DP(this.element,{checked:"true"})}},{key:"onPropertyChanged",value:function(e,t){for(var i=this.getLabel(),n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"checked":e.checked&&this.updateChange(e.checked),this.element.checked=e.checked;break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":t.cssClass&&_P([i],t.cssClass.split(" ")),e.cssClass&&wP([i],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?i.classList.add("e-rtl"):i.classList.remove("e-rtl");break;case"label":this.setText(e.label);break;case"labelPosition":"Before"===e.labelPosition?i.classList.add("e-right"):i.classList.remove("e-right");break;case"name":this.element.setAttribute("name",e.name);break;case"value":this.element.setAttribute("value",e.value)}}},{key:"preRender",value:function(){var e=this.element;if(this.formElement=MP(this.element,"form"),this.tagName=this.element.tagName,e=ZM(this.createElement,"EJS-RADIOBUTTON","radio",e,"e-radio-wrapper","radio"),this.element=e,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=MD("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var t=this.element.getAttribute("formcontrolname");t&&(this.setProperties({name:t},!0),this.element.setAttribute("name",t))}}},{key:"render",value:function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()}},{key:"setDisabled",value:function(){this.element.disabled=!0}},{key:"setText",value:function(e){var t=this.getLabel(),i=t.getElementsByClassName("e-label")[0];i?i.textContent=e:(e=this.enableHtmlSanitizer?HM.sanitize(e):e,i=this.createElement("span",{className:"e-label",innerHTML:e}),t.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")}},{key:"unWireEvents",value:function(){var e=this.getLabel();OR.remove(this.element,"change",this.changeHandler),OR.remove(this.element,"focus",this.focusHandler),OR.remove(this.element,"focusout",this.focusOutHandler),OR.remove(this.element,"keyup",this.keyUpHandler);var t=e.getElementsByClassName("e-label")[0];t&&(OR.remove(t,"mousedown",this.labelRippleHandler),OR.remove(t,"mouseup",this.labelRippleHandler)),this.formElement&&OR.remove(this.formElement,"reset",this.formResetHandler)}},{key:"wireEvents",value:function(){var e=this.getLabel();OR.add(this.element,"change",this.changeHandler,this),OR.add(this.element,"keyup",this.keyUpHandler,this),OR.add(this.element,"focus",this.focusHandler,this),OR.add(this.element,"focusout",this.focusOutHandler,this);var t=e.getElementsByClassName("e-label")[0];t&&(OR.add(t,"mousedown",this.labelRippleHandler,this),OR.add(t,"mouseup",this.labelRippleHandler,this)),this.formElement&&OR.add(this.formElement,"reset",this.formResetHandler,this)}},{key:"click",value:function(){this.element.click()}},{key:"focusIn",value:function(){this.element.focus()}}]),i}(kM),bL([eM()],hL.prototype,"change",void 0),bL([eM()],hL.prototype,"created",void 0),bL([QP(!1)],hL.prototype,"checked",void 0),bL([QP("")],hL.prototype,"cssClass",void 0),bL([QP(!1)],hL.prototype,"disabled",void 0),bL([QP("")],hL.prototype,"label",void 0),bL([QP("After")],hL.prototype,"labelPosition",void 0),bL([QP("")],hL.prototype,"name",void 0),bL([QP("")],hL.prototype,"value",void 0),bL([QP(!1)],hL.prototype,"enableHtmlSanitizer",void 0),hL=rL=bL([tM],hL)),CL=!1;function wL(e,t,i,n,r){return oL=i+t==="topright"?void 0:r,oL=r,CL=!!n,e?(t||(t="left"),i||(i="top"),lL=e.ownerDocument,sL=e,function(e,t,i){switch(aL=sL.getBoundingClientRect(),t+e){case"topcenter":_L(RL(),i),SL(xL(),i);break;case"topright":_L(DL(),i),SL(xL(),i);break;case"centercenter":_L(RL(),i),SL(OL(),i);break;case"centerright":_L(DL(),i),SL(OL(),i);break;case"centerleft":_L(IL(),i),SL(OL(),i);break;case"bottomcenter":_L(RL(),i),SL(AL(),i);break;case"bottomright":_L(DL(),i),SL(AL(),i);break;case"bottomleft":_L(IL(),i),SL(AL(),i);break;default:case"topleft":_L(IL(),i),SL(xL(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function _L(e,t){t.left=e}function SL(e,t){t.top=e}function EL(){return lL.documentElement.scrollTop||lL.body.scrollTop}function TL(){return lL.documentElement.scrollLeft||lL.body.scrollLeft}function AL(){return CL?aL.bottom:aL.bottom+EL()}function OL(){return xL()+aL.height/2}function xL(){return CL?aL.top:aL.top+EL()}function IL(){return aL.left+TL()}function DL(){return aL.right+TL()-(oL?oL.width:0)}function RL(){return IL()+aL.width/2}function PL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{X:!1,Y:!1},n=arguments.length>3?arguments[3]:void 0;if(!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(uL=t,cL=e.ownerDocument,n||(n=wL(e,"left","top")),i.X){var a=uL?BL():XL(),o=qL(),s=WL(),l=o-n.left,c=n.left+r.width-s;r.width>a?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?o:l>c?s-r.width:o:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var u=uL?VL():KL(),h=UL(),d=zL(),p=h-n.top,f=n.top+r.height-d;r.height>u?n.top=p>0&&f<=0?d-r.height:f>0&&p<=0?h:p>f?d-r.height:h:p>0?n.top+=p:f>0&&(n.top-=f)}return n}function ML(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=wL(e,"left","top");i&&(r.left=i),n&&(r.top=n);var a=[];uL=t,cL=e.ownerDocument;var o=e.getBoundingClientRect(),s=r.left,l=r.left+o.width,c=FL(r.top,r.top+o.height),u=NL(s,l);return c.topSide&&a.push("top"),u.rightSide&&a.push("right"),u.leftSide&&a.push("left"),c.bottomSide&&a.push("bottom"),a}function LL(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function NL(e,t){var i=!1,n=!1;return e-YL()<qL()&&(i=!0),t>WL()&&(n=!0),{leftSide:i,rightSide:n}}function FL(e,t){var i=!1,n=!1;return e-GL()<UL()&&(i=!0),t>zL()&&(n=!0),{topSide:i,bottomSide:n}}function BL(){return uL.getBoundingClientRect().width}function VL(){return uL.getBoundingClientRect().height}function jL(){return uL.getBoundingClientRect().left}function HL(){return uL.getBoundingClientRect().top}function UL(){return uL?HL():0}function qL(){return uL?jL():0}function WL(){return uL?YL()+jL()+BL():YL()+XL()}function zL(){return uL?GL()+HL()+VL():GL()+KL()}function GL(){return cL.documentElement.scrollTop||cL.body.scrollTop}function YL(){return cL.documentElement.scrollLeft||cL.body.scrollLeft}function KL(){return window.innerHeight}function XL(){var e=window.innerWidth;return e-(e-(RD(document.documentElement)?0:document.documentElement.offsetWidth))}var JL,QL,ZL=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},$L=(QL=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),ZL([QP("left")],QL.prototype,"X",void 0),ZL([QP("top")],QL.prototype,"Y",void 0),QL),eN=(JL=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,n,e)}return _createClass(i,[{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"width":LP(this.element,{width:FD(e.width)});break;case"height":LP(this.element,{height:FD(e.height)});break;case"zIndex":LP(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var a=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+a).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},{key:"getModuleName",value:function(){return"popup"}},{key:"resolveCollision",value:function(){this.checkCollision()}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"destroy",value:function(){this.element.classList.remove("e-popup","e-rtl","e-popup-open","e-popup-close"),this.unwireEvents(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"render",value:function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=FD(this.width)),"auto"!==this.height&&(e.height=FD(this.height)),LP(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}},{key:"wireEvents",value:function(){AR.isDevice&&OR.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}},{key:"wireScrollEvents",value:function(){if(this.getRelateToElement()){var e,t=_createForOfIteratorHelper(this.getScrollableParent(this.getRelateToElement()));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.add(i,"scroll",this.scrollRefresh,this)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"unwireEvents",value:function(){AR.isDevice&&OR.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}},{key:"unwireScrollEvents",value:function(){if(this.getRelateToElement()){var e,t=_createForOfIteratorHelper(this.getScrollableParent(this.getRelateToElement()));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.remove(i,"scroll",this.scrollRefresh)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"getRelateToElement",value:function(){var e=""===this.relateTo||RD(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}},{key:"scrollRefresh",value:function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}},{key:"isElementOnViewport",value:function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0}},{key:"isElementVisible",value:function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(RD(this.checkGetBoundingClientRect(t))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},a=wL(e),o={top:a.top,left:a.left,right:a.left+i.width,bottom:a.top+i.height},s={top:r.bottom-o.top,left:r.right-o.left,bottom:o.bottom-r.top,right:o.right-r.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)}},{key:"preRender",value:function(){}},{key:"setEnableRtl",value:function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},{key:"setContent",value:function(){RD(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))}},{key:"orientationOnChange",value:function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)}},{key:"refreshPosition",value:function(e,t){RD(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()}},{key:"reposition",value:function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n,r=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=r,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){var a=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=a}else e={left:0,top:0};RD(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")}},{key:"checkGetBoundingClientRect",value:function(e){try{return e.getBoundingClientRect()}catch(t){return null}}},{key:"getAnchorPosition",value:function(e,t,i,n,r){var a=this.checkGetBoundingClientRect(t),o=this.checkGetBoundingClientRect(e);if(RD(a)||RD(o))return null;var s=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=wL(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(t=t.parentElement),l=function(e,t){var i=!1,n={left:0,top:0},r=e;if(!e||!t)return n;for(RD(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=r;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(s,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-a.width/2:l.left+="container"===this.targetType?o.width/2-a.width/2:o.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth-a.width:l.left+="container"===this.targetType?o.width-a.width:o.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-a.height/2:l.top+="container"===this.targetType?o.height/2-a.height/2:o.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight-a.height:l.top+="container"===this.targetType?o.height-a.height:o.height}return l.left+=n,l.top+=r,l}},{key:"callFlip",value:function(e){var t=this.getRelateToElement();!function(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{X:!0,Y:!0},l=arguments.length>8?arguments[8]:void 0;if(t&&e&&r&&a&&(s.X||s.Y)){var c={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null},h=e.getBoundingClientRect(),d={posX:r,posY:a,offsetX:i,offsetY:n,position:{left:0,top:0}};uL=o,cL=t.ownerDocument,function(e,t,i,n,r){i.position=wL(e,i.posX,i.posY,n,r),t.TL=wL(e,"left","top",n,r),t.TR=wL(e,"right","top",n,r),t.BR=wL(e,"left","bottom",n,r),t.BL=wL(e,"right","bottom",n,r)}(t,c,d,l,h),LL(u,d,h),s.X&&function e(t,i,n,r,a,o){var s=NL(i.TL.left,i.TR.left);n.TL.left-YL()<=qL()&&(s.leftSide=!1),n.TR.left>=WL()&&(s.rightSide=!1),(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&(r.posX="right"===r.posX?"left":"right",r.offsetX=r.offsetX+a.width,r.offsetX=-1*r.offsetX,r.position=wL(t,r.posX,r.posY,!1),LL(i,r,a),o&&e(t,i,n,r,a,!1))}(t,u,c,d,h,!0),s.Y&&c.TL.top>-1&&function e(t,i,n,r,a,o){var s=FL(i.TL.top,i.BL.top);n.TL.top-GL()<=UL()&&(s.topSide=!1),n.BL.top>=zL()&&(s.bottomSide=!1),(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&(r.posY="top"===r.posY?"bottom":"top",r.offsetY=r.offsetY+a.height,r.offsetY=-1*r.offsetY,r.position=wL(t,r.posX,r.posY,!1,a),LL(i,r,a),o&&e(t,i,n,r,a,!1))}(t,u,c,d,h,!0),function(e,t,i){var n=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var a=wL(e.offsetParent,"left","top",!1,i);n=a.left,r=a.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,d,h)}}(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)}},{key:"callFit",value:function(e){if(0!==ML(this.element,this.viewPortElement).length)if(RD(this.viewPortElement)){var t=PL(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(RD(i)||RD(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}}},{key:"checkCollision",value:function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))}},{key:"show",value:function(e,t){var i=this;if(this.wireEvents(),1e3===this.zIndex||!RD(t)){var n=RD(t)?this.element:t;this.zIndex=tN(n),LP(this.element,{zIndex:this.zIndex})}e=RD(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(_P([this.element],"e-popup-close"),wP([this.element],"e-popup-open"),this.checkCollision(),_P([this.element],"e-popup-open"),wP([this.element],"e-popup-close")),RD(e)?(_P([this.element],"e-popup-close"),wP([this.element],"e-popup-open"),this.trigger("open")):(e.begin=function(){i.isDestroyed||(_P([i.element],"e-popup-close"),wP([i.element],"e-popup-open"))},e.end=function(){i.isDestroyed||i.trigger("open")},new oM(e).animate(this.element))}},{key:"hide",value:function(e){var t=this;e=RD(e)||"object"!=typeof e?this.hideAnimation:e,RD(e)?(_P([this.element],"e-popup-open"),wP([this.element],"e-popup-close"),this.trigger("close")):(e.end=function(){t.isDestroyed||(_P([t.element],"e-popup-open"),wP([t.element],"e-popup-close"),t.trigger("close"))},new oM(e).animate(this.element)),this.unwireEvents()}},{key:"getScrollableParent",value:function(e){return this.checkFixedParent(e),function(e,t){for(var i=getComputedStyle(e),n=[],r=/(auto|scroll)/,a=e.parentElement;a&&"HTML"!==a.tagName;){var o=getComputedStyle(a);"absolute"===i.position&&"static"===o.position||!r.test(o.overflow+o.overflowY+o.overflowX)||n.push(a),a=a.parentElement}return t||n.push(document),n}(e,this.fixedParent)}},{key:"checkFixedParent",value:function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,RD(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}}]),i}(kM),ZL([QP("auto")],JL.prototype,"height",void 0),ZL([QP("auto")],JL.prototype,"width",void 0),ZL([QP(null)],JL.prototype,"content",void 0),ZL([QP("container")],JL.prototype,"targetType",void 0),ZL([QP(null)],JL.prototype,"viewPortElement",void 0),ZL([QP({X:"none",Y:"none"})],JL.prototype,"collision",void 0),ZL([QP("")],JL.prototype,"relateTo",void 0),ZL([ZP({},$L)],JL.prototype,"position",void 0),ZL([QP(0)],JL.prototype,"offsetX",void 0),ZL([QP(0)],JL.prototype,"offsetY",void 0),ZL([QP(1e3)],JL.prototype,"zIndex",void 0),ZL([QP(!1)],JL.prototype,"enableRtl",void 0),ZL([QP("reposition")],JL.prototype,"actionOnScroll",void 0),ZL([QP(null)],JL.prototype,"showAnimation",void 0),ZL([QP(null)],JL.prototype,"hideAnimation",void 0),ZL([eM()],JL.prototype,"open",void 0),ZL([eM()],JL.prototype,"close",void 0),ZL([eM()],JL.prototype,"targetExitViewport",void 0),JL=ZL([tM],JL));function tN(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),t=t.parentElement}for(var a=[],o=0;o<document.body.children.length;o++)if(!e.isEqualNode(document.body.children[o])){var s=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),l=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position");"auto"!==s&&"static"!==l&&a.push(s)}a.push("999");var c=[];if(!RD(e.parentElement)&&"BODY"!==e.parentElement.tagName)for(var u=[].slice.call(e.parentElement.children),h=0;h<u.length;h++){var d=document.defaultView.getComputedStyle(u[h],null).getPropertyValue("z-index"),p=document.defaultView.getComputedStyle(u[h],null).getPropertyValue("position");"auto"!==d&&"static"!==p&&c.push(d)}var f=i.concat(a,c),v=Math.max.apply(Math,f)+1;return v>2147483647?2147483647:v}var iN,nN,rN,aN,oN,sN,lN,cN,uN=["north-west","north","north-east","west","east","south-west","south","south-east"],hN=0,dN=0,pN=0,fN=0,vN=0,mN=0,gN=["e-restrict-left"],yN=null,bN=null,kN=null,CN=!0,wN=0,_N=!0;function SN(e){var t;return RD(e)||(t="string"==typeof e?document.querySelector(e):e),t}function EN(e){RD(e)&&(e=this);for(var t=iN.querySelectorAll(".e-resize-handle"),i=0;i<t.length;i++)nN=t[i],OR.add(nN,"mousedown",AN,e),OR.add(nN,"msie"===AR.info.name?"pointerdown":"touchstart",IN,e)}function TN(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function AN(e){if(e.preventDefault(),iN=e.target.parentElement,xN(),vN=e.pageX,mN=e.pageY,e.target.classList.add("e-focused-handle"),RD(yN)||!0!==yN(e,this)){var t=RD(lN)?document:lN;OR.add(t,"mousemove",DN,this),OR.add(document,"mouseup",ON,this);for(var i=0;i<gN.length;i++)CN=!iN.classList.contains(gN[i])}}function ON(e){var t="msie"===AR.info.name?"pointermove":"touchmove",i="msie"===AR.info.name?"pointerup":"touchend",n=RD(lN)?document:lN;OR.remove(n,"mousemove",DN),OR.remove(n,t,DN),OR.remove(n,"msie"===AR.info.name?"pointerdown":"touchstart",DN),RD(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),RD(kN)||kN(e,this),OR.remove(document,"mouseup",ON),OR.remove(document,i,ON)}function xN(){hN=parseFloat(getComputedStyle(iN,null).getPropertyValue("width").replace("px","")),dN=parseFloat(getComputedStyle(iN,null).getPropertyValue("height").replace("px","")),pN=iN.getBoundingClientRect().left,fN=iN.getBoundingClientRect().top}function IN(e){iN=e.target.parentElement,xN();var t=e.touches?e.changedTouches[0]:e;if(vN=t.pageX,mN=t.pageY,RD(yN)||!0!==yN(e,this)){var i="msie"===AR.info.name?"pointermove":"touchmove",n="msie"===AR.info.name?"pointerup":"touchend",r=RD(lN)?document:lN;OR.add(r,i,DN,this),OR.add(document,n,ON)}}function DN(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?nN=e.target:RD(document.body.querySelector(".e-focused-handle"))||(nN=document.body.querySelector(".e-focused-handle")),!RD(nN)){for(var t="",i=0;i<uN.length;i++)nN.classList.contains("e-"+uN[i])&&(t=uN[i]);switch(RD(bN)||bN(e,this),t){case"south":PN(e);break;case"north":MN(e);break;case"west":LN(e);break;case"east":NN(e);break;case"south-east":PN(e),NN(e);break;case"south-west":PN(e),LN(e);break;case"north-east":MN(e),NN(e);break;case"north-west":MN(e),LN(e)}}}function RN(e){return e.getBoundingClientRect()}function PN(e){var t,i=document.documentElement.clientHeight,n=!1,r=(e.touches?e.changedTouches[0]:e).pageY,a=RN(iN);RD(lN)||(t=RN(lN)),RD(lN)?RD(lN)&&(i-r>=0||a.top<0)&&(n=!0):n=!0;var o=dN+(r-mN);o=o>rN?o:rN;var s=0;RD(lN)||(s=t.top);var l=RD(lN)?0:lN.offsetHeight-lN.clientHeight,c=a.top-s-l/2;if(c=c<0?0:c,a.top>0&&c+o>aN){if(n=!1,iN.classList.contains("e-resize-viewport"))return;iN.style.height=aN-parseInt(c.toString(),10)+"px"}else{var u=0;if(n){a.top<0&&i+(a.height+a.top)>0&&(o+(u=a.top)<=30&&(o=a.height-(a.height+a.top)+30)),o+a.top>=aN&&(iN.style.height=a.height+(i-(a.height+a.top))+"px");var h=RD(lN)?u:c;o>=rN&&o+h<=aN&&(iN.style.height=o+"px")}}}function MN(e){var t,i=!1,n="mouse"===TN(e.type)?e.pageY:e.touches[0].pageY,r=RN(iN);RD(lN)||(t=RN(lN)),(!RD(lN)&&r.top-t.top>0||RD(lN)&&n>0)&&(i=!0);var a=dN-(n-mN);if(RN(iN).bottom+a>aN&&(i=!1,iN.style.height=aN-RN(iN).bottom+"px"),i&&a>=rN&&a<=aN){var o=0;RD(lN)||(o=t.top);var s=fN-o+(n-mN);s=s>0?s:1,iN.style.height=a+"px",iN.style.top=s+"px"}}function LN(e){var t,i=document.documentElement.clientWidth,n=!1;RD(lN)||(t=RN(lN));var r="mouse"===TN(e.type)?e.pageX:e.touches[0].pageX,a=RN(iN),o=RD(lN)?0:lN.offsetWidth-lN.clientWidth,s=RD(lN)?0:t.left,l=RD(lN)?0:t.width;RD(cN)&&(RD(lN)?cN=i:(cN=a.left-s-o/2+a.width,cN+=l-o-cN)),(!RD(lN)&&a.left-t.left+a.width+(t.right-a.right)-o<=sN||RD(lN)&&r>=0)&&(n=!0);var c=hN-(r-vN);if(CN&&(c=c>cN?cN:c),n&&c>=oN&&c<=sN){var u=0;RD(lN)||(u=t.left);var h=pN-u+(r-vN);h=h>0?h:1,c!==wN&&_N&&(iN.style.width=c+"px"),CN&&(iN.style.left=h+"px",_N=1!==h)}wN=c}function NN(e){var t,i=document.documentElement.clientWidth,n=!1;RD(lN)||(t=RN(lN));var r=(e.touches?e.changedTouches[0]:e).pageX,a=RN(iN);(!RD(lN)&&(a.left-t.left+a.width<sN||a.right-t.left>a.width)||RD(lN)&&i-r>0)&&(n=!0);var o=hN+(r-vN),s=0;if(RD(lN)||(s=t.left),a.left-s+o>sN){if(n=!1,iN.classList.contains("e-resize-viewport"))return;iN.style.width=sN-(a.left-s)+"px"}n&&o>=oN&&o<=sN&&(iN.style.width=o+"px")}function FN(){for(var e=iN.querySelectorAll(".e-resize-handle"),t=0;t<e.length;t++)xP(e[t])}var BN,VN,jN,HN,UN=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},qN=(VN=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),UN([QP()],VN.prototype,"buttonModel",void 0),UN([QP("Button")],VN.prototype,"type",void 0),UN([eM()],VN.prototype,"click",void 0),VN),WN=(BN=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),UN([QP("Fade")],BN.prototype,"effect",void 0),UN([QP(400)],BN.prototype,"duration",void 0),UN([QP(0)],BN.prototype,"delay",void 0),BN),zN="e-dialog",GN="e-dlg-target",YN="e-scroll-disabled",KN="e-dlg-fullscreen",XN=(jN=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"render",value:function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}},{key:"preRender",value:function(){var e=this;if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(t){e.hide(t)},this.dlgOverlayClickEventHandler=function(t){e.trigger("overlayClick",t),e.focusContent()},this.l10n=new PM("dialog",{close:"Close"},this.locale),this.checkPositionData(),RD(this.target)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}}},{key:"isNumberValue",value:function(e){return/^[-+]?\d*\.?\d+$/.test(e)}},{key:"checkPositionData",value:function(){if(!RD(this.position)){if(!RD(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!RD(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}}},{key:"getEle",value:function(e,t){for(var i=void 0,n=0;n<e.length;n++)if(e[n].classList.contains(t)){i=e[n];break}return i}},{key:"getMinHeight",value:function(){var e="0px",t="0px";RD(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,"e-footer-content");RD(i)||(t=getComputedStyle(i).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),r=parseInt(t.slice(0,t.indexOf("p")),10);return rN=n+30+r,n+30+r}},{key:"onResizeStart",value:function(e,t){return t.trigger("resizeStart",e),e.cancel}},{key:"onResizing",value:function(e,t){t.trigger("resizing",e)}},{key:"onResizeComplete",value:function(e,t){t.trigger("resizeStop",e)}},{key:"setResize",value:function(){if(this.enableResize){if(this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");var e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,i=this.enableRtl?"south-west":"south-east";this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){yN=e.resizeBegin,bN=e.resizing,kN=e.resizeComplete,iN=SN(e.element),lN=SN(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++){var n=CP("div",{className:"e-icons e-resize-handle e-"+t[i]});iN.appendChild(n)}rN=e.minHeight,oN=e.minWidth,sN=e.maxWidth,aN=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?EN(e.proxy):EN()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this})}else FN(),this.element.classList.remove(this.isModal?"e-restrict-left":"e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")}},{key:"keyDown",value:function(e){var t=this;if(9===e.keyCode&&this.isModal){var i;if(RD(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),RD(this.btnObj)&&!RD(this.ftrTemplateContent)){var n=this.ftrTemplateContent.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');i={element:n[n.length-1]}}RD(i)||document.activeElement!==i.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),RD(i)||i.element.focus())}var r,a=document.activeElement,o=["input","textarea"].indexOf(a.tagName.toLowerCase())>-1,s=!1;o||(s=a.hasAttribute("contenteditable")&&"true"===a.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==a.tagName.toLowerCase()&&o&&!RD(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===a.tagName.toLowerCase()||s)&&!RD(this.primaryButtonEle))&&this.buttons.some((function(e,t){r=t;var i=e.buttonModel;return!RD(i)&&!0===i.isPrimary}))&&"function"==typeof this.buttons[r].click&&setTimeout((function(){t.buttons[r].click.call(t,e)}))}},{key:"initialize",value:function(){RD(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||wP([this.element],zN),AR.isDevice&&wP([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}},{key:"initRender",value:function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||DP(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&RD(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&RD(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||RD(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||RD(this.footerTemplate)?RD(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(RD(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!RD(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(DP(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&RD(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var t=0,i=this.dlgContainer.children;t<i.length;t++)i[t].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=i[t])}if(!0!==this.element.classList.contains("e-alert-dialog")&&!0!==this.element.classList.contains("e-confirm-dialog")&&!RD(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}RD(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new eN(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(t){var i={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",i,(function(t){t.preventFocus||e.focusContent()}))},close:function(t){e.isModal&&wP([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var i=document.activeElement;RD(i)||RD(i.blur)||i.blur(),RD(e.storeActiveElement)||RD(e.storeActiveElement.focus)||e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(wP([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}},{key:"resetResizeIcon",value:function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));RD(t)||(t.style.bottom="-"+e.toString()+"px")}}},{key:"setOverlayZindex",value:function(e){var t;t=RD(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}},{key:"positionChange",value:function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}},{key:"setPopupPosition",value:function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}},{key:"setAllowDragging",value:function(){var e=this;this.dragObj=new AM(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(t){e.trigger("dragStart",t,(function(e){}))},dragStop:function(t){e.isModal&&(RD(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",t),e.element.classList.remove("e-restrict-left")},drag:function(t){e.trigger("drag",t)}}),RD(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}},{key:"setButton",value:function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var t=RD(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}for(var n,r=0,a=this.element.children;r<a.length;r++)a[r].classList.contains("e-footer-content")&&(n=a[r].querySelectorAll("button"));for(var o=0;o<this.buttons.length;o++)this.isBlazorServerRender()||(this.btnObj[o]=new pL(this.buttons[o].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!RD(this.ftrTemplateContent)&&"function"==typeof this.buttons[o].click&&n.length>0&&OR.add(n[o],"click",this.buttons[o].click,this),this.isBlazorServerRender()||RD(this.ftrTemplateContent)||(this.btnObj[o].appendTo(this.ftrTemplateContent.children[o]),this.btnObj[o].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}},{key:"setContent",value:function(){DP(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(RD(this.content)||""===this.content)&&this.initialRender||("string"!=typeof this.content?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),RD(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!AR.isIE||""!==this.element.style.width||RD(this.width)||(this.element.style.width=FD(this.width)),this.setMaxHeight())}},{key:"setTemplate",value:function(e,t){var i,n;n=t.classList.contains("e-dlg-header")?this.element.id+"header":t.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",RD(e.outerHTML)?"string"!=typeof e?i=tP(e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);var r=[];if(!RD(i)){var a,o=_createForOfIteratorHelper(i({},null,null,n,!0));try{for(o.s();!(a=o.n()).done;){var s=a.value;r.push(s)}}catch(l){o.e(l)}finally{o.f()}AP([].slice.call(r),t)}}},{key:"sanitizeHelper",value:function(e){if(this.enableHtmlSanitizer){var t=HM.beforeSanitize();DD(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!RD(t.helper)?e=t.helper(e):t.cancel||(e=HM.serializeValue(t,e))}return e}},{key:"setMaxHeight",value:function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!RD(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,AR.isIE&&"auto"===this.height&&!RD(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}}},{key:"setEnableRTL",value:function(){this.isBlazorServerRender()||(this.enableRtl?wP([this.element],"e-rtl"):_P([this.element],"e-rtl")),RD(this.element.querySelector(".e-resize-handle"))||(FN(),this.setResize())}},{key:"setTargetContent",value:function(){var e=this;if(RD(this.content)||""===this.content){var t=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||t)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach((function(t){8!==t.nodeType&&e.innerContentElement.appendChild(t)})))}}},{key:"setHeader",value:function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle),DP(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])}},{key:"setFooterTemplate",value:function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||RD(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent),this.element.appendChild(this.ftrTemplateContent)}},{key:"createHeaderContent",value:function(){RD(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))}},{key:"renderCloseIcon",value:function(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new pL({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),RD(this.headerContent)?(this.createHeaderContent(),TP([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):TP([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)}},{key:"closeIconTitle",value:function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}},{key:"setCSSClass",value:function(e){this.cssClass&&wP([this.element],this.cssClass.split(" ")),e&&_P([this.element],e.split(" "))}},{key:"setIsModal",value:function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),wP([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}},{key:"getValidFocusNode",value:function(e){for(var t,i=0;i<e.length;i++)if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;return t}},{key:"focusableElements",value:function(e){if(!RD(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null}},{key:"getAutoFocusNode",value:function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(RD(n)){if(!RD(n=this.focusableElements(this.contentEle)))return n;if(!RD(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t}},{key:"disableElement",value:function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}},{key:"focusContent",value:function(){var e=this.getAutoFocusNode(this.element);(RD(e)?this.element:e).focus(),this.bindEvent(this.element)}},{key:"bindEvent",value:function(e){OR.add(e,"keydown",this.keyDown,this)}},{key:"unBindEvent",value:function(e){OR.remove(e,"keydown",this.keyDown)}},{key:"updateSanitizeContent",value:function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}},{key:"isBlazorServerRender",value:function(){return!1}},{key:"getModuleName",value:function(){return"dialog"}},{key:"onPropertyChanged",value:function(e,t){if(this.element.classList.contains(zN))for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"content":RD(this.content)||""===this.content?RD(this.contentEle)||(xP(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),RD(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||RD(this.header)?this.headerEle&&(xP(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||RD(this.footerTemplate)){if(!this.ftrTemplateContent)return;xP(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!RD(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():xP(this.closeIcon):(xP(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":LP(this.element,{height:FD(e.height)});break;case"width":LP(this.element,{width:FD(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":var r=this.buttons.length;RD(this.ftrTemplateContent)||this.isBlazorServerRender()||(xP(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var a=0;a<r;a++)RD(this.buttons[a].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!RD(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var o=RD(t.position.X)?this.position.X:t.position.X,s=RD(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+o+"-"+s)&&this.dlgContainer.classList.remove("e-dlg-"+o+"-"+s)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}},{key:"setTarget",value:function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}},{key:"updateIsModal",value:function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",RD(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(_P([this.element],"e-dlg-modal"),_P([document.body],[GN,YN]),xP(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&OR.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}},{key:"setzIndex",value:function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=tN(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"destroy",value:function(){if(!this.isDestroyed){var e=["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left",KN,"e-device"],t=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(_P([this.targetEle],[GN,YN]),this.element.classList.contains(KN)&&_P([document.body],[GN,YN]),this.isModal&&_P([RD(this.targetEle)?document.body:this.targetEle],YN),this.unWireEvents(),!RD(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(RD(this.dragObj)||this.dragObj.destroy(),this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),_P([this.element],e),RD(this.cssClass)||""===this.cssClass||_P([this.element],this.cssClass.split(" ")),RD(this.refElement)||RD(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),xP(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(xP(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),xP(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!RD(this.element.children))for(var r=0;r<=this.element.children.length;r++)r-=r,xP(this.element.children[r]);for(var a=0;a<t.length;a++)this.element.removeAttribute(t[a]);this.isBlazorServerRender()?this.isDestroyed=!0:_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}}},{key:"wireEvents",value:function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&OR.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&OR.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}},{key:"unWireEvents",value:function(){if(this.showCloseIcon&&OR.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&OR.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!RD(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&OR.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}},{key:"refreshPosition",value:function(){this.popupObj.refreshPosition()}},{key:"show",value:function(e){var t=this;if(this.element.classList.contains(zN)&&(!this.element.classList.contains("e-popup-open")||!RD(e))){RD(e)||this.fullScreen(e);var i={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,(function(e){if(!e.cancel){t.element.style.maxHeight!==i.maxHeight&&(t.allowMaxHeight=!1,t.element.style.maxHeight=i.maxHeight),t.storeActiveElement=document.activeElement,t.element.tabIndex=-1,t.isModal&&!RD(t.dlgOverlay)&&(t.dlgOverlay.style.display="block",t.dlgContainer.style.display="flex",_P([t.dlgOverlay],"e-fade"),RD(t.targetEle)?wP([document.body],[GN,YN]):(t.dlgContainer.style.position=t.targetEle===document.body?"fixed":"absolute",t.dlgOverlay.style.position="absolute",t.element.style.position="relative",wP([t.targetEle],[GN,YN])));var n={name:t.animationSettings.effect+"In",duration:t.animationSettings.duration,delay:t.animationSettings.delay},r=t.isModal?t.element.parentElement:t.element;t.calculatezIndex&&(t.setzIndex(r,!0),LP(t.element,{zIndex:t.zIndex}),t.isModal&&t.setOverlayZindex(t.zIndex)),"None"===t.animationSettings.effect?t.popupObj.show():t.popupObj.show(n),t.dialogOpen=!0;var a=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!0,t.preventVisibility=!0,t.isProtectedOnChange=a}}))}}},{key:"hide",value:function(e){var t=this;if(this.element.classList.contains(zN)&&this.preventVisibility){var i={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};this.closeArgs=i,this.trigger("beforeClose",i,(function(e){if(!e.cancel){t.isModal&&(RD(t.targetEle)?_P([document.body],[GN,YN]):_P([t.targetEle],[GN,YN]));var i={name:t.animationSettings.effect+"Out",duration:t.animationSettings.duration,delay:t.animationSettings.delay};"None"===t.animationSettings.effect?t.popupObj.hide():t.popupObj.hide(i),t.dialogOpen=!1;var n=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!1,t.preventVisibility=!1,t.isProtectedOnChange=n}}))}}},{key:"fullScreen",value:function(e){if(e){wP([this.element],KN);var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=RD(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,wP([document.body],[GN,YN]),this.allowDragging&&!RD(this.dragObj)&&this.dragObj.destroy()}else _P([this.element],KN),_P([document.body],[GN,YN]),this.allowDragging&&!RD(this.headerContent)&&this.setAllowDragging();return e}},{key:"getButtons",value:function(e){return RD(e)?this.btnObj:this.btnObj[e]}}]),i}(kM),UN([QP("")],jN.prototype,"content",void 0),UN([QP(!0)],jN.prototype,"enableHtmlSanitizer",void 0),UN([QP(!1)],jN.prototype,"showCloseIcon",void 0),UN([QP(!1)],jN.prototype,"isModal",void 0),UN([QP("")],jN.prototype,"header",void 0),UN([QP(!0)],jN.prototype,"visible",void 0),UN([QP(!1)],jN.prototype,"enableResize",void 0),UN([QP("auto")],jN.prototype,"height",void 0),UN([QP("")],jN.prototype,"minHeight",void 0),UN([QP("100%")],jN.prototype,"width",void 0),UN([QP("")],jN.prototype,"cssClass",void 0),UN([QP(1e3)],jN.prototype,"zIndex",void 0),UN([QP(null)],jN.prototype,"target",void 0),UN([QP("")],jN.prototype,"footerTemplate",void 0),UN([QP(!1)],jN.prototype,"allowDragging",void 0),UN([$P([{}],qN)],jN.prototype,"buttons",void 0),UN([QP(!0)],jN.prototype,"closeOnEscape",void 0),UN([ZP({},WN)],jN.prototype,"animationSettings",void 0),UN([ZP({X:"center",Y:"center"},$L)],jN.prototype,"position",void 0),UN([eM()],jN.prototype,"created",void 0),UN([eM()],jN.prototype,"open",void 0),UN([eM()],jN.prototype,"beforeSanitizeHtml",void 0),UN([eM()],jN.prototype,"beforeOpen",void 0),UN([eM()],jN.prototype,"close",void 0),UN([eM()],jN.prototype,"beforeClose",void 0),UN([eM()],jN.prototype,"dragStart",void 0),UN([eM()],jN.prototype,"dragStop",void 0),UN([eM()],jN.prototype,"drag",void 0),UN([eM()],jN.prototype,"overlayClick",void 0),UN([eM()],jN.prototype,"resizeStart",void 0),UN([eM()],jN.prototype,"resizing",void 0),UN([eM()],jN.prototype,"resizeStop",void 0),UN([eM()],jN.prototype,"destroyed",void 0),jN=UN([tM],jN));!function(e){function t(e,t){var i=new XN(e);return i.appendTo(t),i}function i(e,t){return e.header=RD(t.title)?"Information":t.title,e.content=RD(t.content)?"":t.content,e.isModal=!!RD(t.isModal)||t.isModal,e.showCloseIcon=!RD(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!RD(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!RD(t.closeOnEscape)&&t.closeOnEscape,e.position=RD(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=RD(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=RD(t.cssClass)?"":t.cssClass,e.zIndex=RD(t.zIndex)?1e3:t.zIndex,e.open=RD(t.open)?null:t.open,e}function n(e,t,i){var n=i;return RD(t.text)||(n.buttonModel.content=t.text),RD(t.icon)||(n.buttonModel.iconCss=t.icon),RD(t.cssClass)||(n.buttonModel.cssClass=t.cssClass),RD(t.click)||(n.click=t.click),n}e.alert=function(e){var r,a,o=CP("div",{className:"e-alert-dialog"});return document.body.appendChild(o),(r=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e,t){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return RD(t.okButton)?e.buttons=i:e.buttons[0]=n(0,t.okButton,i[0]),e}(i({buttons:[]},a=e),a),o)).close=function(){e&&e.close&&e.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove("e-scroll-disabled")):r.element.remove()},r},e.confirm=function(e){var r,a,o=CP("div",{className:"e-confirm-dialog"});return document.body.appendChild(o),(r=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e,t){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},r={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=RD(t.okButton)?i:n(0,t.okButton,i),e.buttons[1]=RD(t.cancelButton)?r:n(0,t.cancelButton,r),e}(i({buttons:[]},a=e),a),o)).close=function(){e&&e.close&&e.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove("e-scroll-disabled")):r.element.remove()},r}}(HN||(HN={}));var JN,QN,ZN=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},$N=(QN=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),ZN([QP({effect:"FadeIn",duration:150,delay:0})],QN.prototype,"open",void 0),ZN([QP({effect:"FadeOut",duration:150,delay:0})],QN.prototype,"close",void 0),QN),eF=(JN=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).isBlazorTooltip=!1,r.contentTargetValue=null,r.contentEvent=null,r.contentAnimation=null,r}return _createClass(i,[{key:"initialize",value:function(){this.formatPosition(),this.isServerRender()||wP([this.element],"e-tooltip")}},{key:"isServerRender",value:function(){return!1}},{key:"formatPosition",value:function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=_slicedToArray(this.position.split(/(?=[A-Z])/),2),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=_slicedToArray(this.position.split(/(?=[A-Z])/),2),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])}},{key:"renderArrow",value:function(){if(this.setTipClass(this.position),this.isServerRender()){var e=this.tooltipEle.querySelector(".e-arrow-tip");wP([e.querySelector(".e-arrow-tip-outer")],this.tipClass),wP([e.querySelector(".e-arrow-tip-inner")],this.tipClass),this.tooltipEle.appendChild(e)}else{var t=this.createElement("div",{className:"e-arrow-tip "+this.tipClass});t.appendChild(this.createElement("div",{className:"e-arrow-tip-outer "+this.tipClass})),t.appendChild(this.createElement("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(t)}}},{key:"setTipClass",value:function(e){this.tipClass=0===e.indexOf("Right")?"e-tip-left":0===e.indexOf("Bottom")?"e-tip-top":0===e.indexOf("Left")?"e-tip-right":"e-tip-bottom"}},{key:"renderPopup",value:function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new eN(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})}},{key:"getTooltipPosition",value:function(e){this.tooltipEle.style.display="block";var t=wL(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",n}},{key:"reposition",value:function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()}},{key:"openPopupHandler",value:function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)}},{key:"closePopupHandler",value:function(){iP(this.element.id+"content"),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)}},{key:"calculateTooltipOffset",value:function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),a=r?r.offsetWidth:0,o=r?r.offsetHeight:0,s=this.showTipPointer?0:8,l=o/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=a/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(s+=2),e){case"RightTop":t.left+=a+s,t.top-=n-l;break;case"RightCenter":t.left+=a+s,t.top-=n/2;break;case"RightBottom":t.left+=a+s,t.top-=l;break;case"BottomRight":t.top+=o+s,t.left-=c;break;case"BottomCenter":t.top+=o+s,t.left-=i/2;break;case"BottomLeft":t.top+=o+s,t.left-=i-c;break;case"LeftBottom":t.left-=a+i+s,t.top-=l;break;case"LeftCenter":t.left-=a+i+s,t.top-=n/2;break;case"LeftTop":t.left-=a+i+s,t.top-=n-l;break;case"TopLeft":t.top-=n+o+s,t.left-=i-c;break;case"TopRight":t.top-=n+o+s,t.left-=c;break;default:t.top-=n+o+s,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t}},{key:"updateTipPosition",value:function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner");_P(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]),this.setTipClass(e),wP(t,this.tipClass)}},{key:"adjustArrow",value:function(e,t,i,n){if(!1!==this.showTipPointer){var r,a;this.updateTipPosition(t),this.tooltipEle.style.display="block";var o=this.tooltipEle.clientWidth,s=this.tooltipEle.clientHeight,l=this.tooltipEle.querySelector(".e-arrow-tip"),c=this.tooltipEle.querySelector(".e-arrow-tip-inner"),u=l.offsetWidth,h=l.offsetHeight;if(this.tooltipEle.style.display="","e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(a="99.9%",c.style.top="-"+(h-2)+"px"):(a=-(h-1)+"px",c.style.top="-"+(h-6)+"px"),e){var d="Center"!==i||o>e.offsetWidth||this.mouseTrail;r=d&&"Left"===i||!d&&"End"===this.tipPointerPosition?o-u-2+"px":d&&"Right"===i||!d&&"Start"===this.tipPointerPosition?"2px":o/2-u/2+"px"}}else{"e-tip-right"===this.tipClass?(r="99.9%",c.style.left="-"+(u-2)+"px"):(r=-(u-1)+"px",c.style.left=u-2-u+"px");var p="Center"!==n||s>e.offsetHeight||this.mouseTrail;a=p&&"Top"===n||!p&&"End"===this.tipPointerPosition?s-h-2+"px":p&&"Bottom"===n||!p&&"Start"===this.tipPointerPosition?"2px":s/2-h/2+"px"}l.style.top=a,l.style.left=r}}},{key:"renderContent",value:function(e){var t=this.tooltipEle.querySelector(".e-tip-content");this.cssClass&&wP([this.tooltipEle],this.cssClass.split(" ")),e&&!RD(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),RD(this.content)?e&&!RD(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content")):!this.isBlazorTooltip&&this.isServerRender()||(t.innerHTML="",this.content instanceof HTMLElement?t.appendChild(this.content):"string"==typeof this.content&&this.content.indexOf("<div>Blazor")<0?(this.enableHtmlSanitizer&&this.setProperties({content:HM.sanitize(this.content)},!0),t.innerHTML=this.content):(AP(tP(this.content)({},null,null,this.element.id+"content"),t),"string"==typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0)))}},{key:"renderCloseIcon",value:function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),OR.add(e,AR.touchStartEvent,this.onStickyClose,this)}}},{key:"addDescribedBy",value:function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),DP(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})}},{key:"removeDescribedBy",value:function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var r=i.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")}},{key:"tapHoldHandler",value:function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)}},{key:"touchEndHandler",value:function(e){var t=this;this.isSticky||(this.autoCloseTimer=setTimeout((function(){t.close()}),1500))}},{key:"targetClick",value:function(e){var t;RD(t=this.target?MP(e.target,this.target):this.element)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))}},{key:"targetHover",value:function(e){var t;if(!RD(t=this.target?MP(e.target,this.target):this.element)&&null===t.getAttribute("data-tooltip-id")){var i,n=_createForOfIteratorHelper([].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]")));try{for(n.s();!(i=n.n()).done;){var r=i.value;this.restoreElement(r)}}catch(a){n.e(a)}finally{n.f()}this.showTooltip(t,this.animation.open,e)}}},{key:"showTooltip",value:function(e,t,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!RD(i)},this.trigger("beforeRender",this.tooltipEventArgs,(function(r){n.beforeRenderCallback(r,e,i,t)}).bind(this))}},{key:"beforeRenderCallback",value:function(e,t,i,n){var r=!1;e.cancel?(this.isHidden=!0,this.clear()):(this.isHidden=!1,RD(this.tooltipEle)?(this.isServerRender()?(this.contentTargetValue=t,this.contentEvent=i,this.contentAnimation=n,this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),r=!0):(this.ctrlId=this.element.getAttribute("id")?MD(this.element.getAttribute("id")):MD("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+FD(this.width)+";height:"+FD(this.height)+";position:absolute;"}),this.beforeRenderBlazor(t,this)),r||this.afterRenderBlazor(t,i,n,this)):(this.isServerRender()&&(wP([this.tooltipEle],"e-popup-open"),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(t)),t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),oM.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,i,n,this))))}},{key:"contentUpdated",value:function(e){RD(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+FD(this.width)+";height:"+FD(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))}},{key:"beforeRenderBlazor",value:function(e,t){e&&(AR.isDevice&&wP([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=FD(t.width)),this.isServerRender()||t.tooltipEle.appendChild(t.createElement("div",{className:"e-tip-content"})),document.body.appendChild(t.tooltipEle),_P([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),wP([t.tooltipEle],"e-popup-open"),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),oM.stop(t.tooltipEle),t.reposition(e))}},{key:"afterRenderBlazor",value:function(e,t,i,n){e&&(_P([n.tooltipEle],"e-popup-open"),wP([n.tooltipEle],"e-popup-close"),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:n.tooltipEle,isInteracted:!RD(t)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none"),n.trigger("beforeOpen",n.tooltipEventArgs,(function(r){n.beforeOpenCallback(r,e,i,t)}).bind(n)))}},{key:"beforeOpenCallback",value:function(e,t,i,n){var r=this;if(e.cancel)this.isHidden=!0,this.clear(),this.restoreElement(t);else{var a={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};"None"===i.effect&&(a=void 0),this.openDelay>0?this.showTimer=setTimeout((function(){r.popupObj&&r.popupObj.show(a,t)}),this.openDelay):this.popupObj&&this.popupObj.show(a,t)}n&&this.wireMouseEvents(n,t)}},{key:"needTemplateReposition",value:function(){return!RD(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate}},{key:"checkCollision",value:function(e,t,i){var n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=ML(this.tooltipEle,this.target?this.element:null,t,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n}},{key:"collisionFlipFit",value:function(e,t,i){var n=this.checkCollision(e,t,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var a=wL(e,n.horizontal,n.vertical);this.adjustArrow(e,r,n.horizontal,n.vertical);var o=this.calculateTooltipOffset(r);o.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,o.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=a.left+o.left,n.top=a.top+o.top}else this.adjustArrow(e,r,n.horizontal,n.vertical);var s={left:n.left,top:n.top},l=PL(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},s).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var c=this.tooltipEle.querySelector(".e-arrow-tip"),u=parseInt(c.style.left,10)-(l-n.left);u<0?u=0:u+c.offsetWidth>this.tooltipEle.clientWidth&&(u=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=u.toString()+"px"}return this.tooltipEle.style.display="",s.left=l,s}},{key:"hideTooltip",value:function(e,t,i){var n,r=this;n=t?this.target?i||t.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:n,event:t||null,element:this.tooltipEle,isInteracted:!RD(t)},this.trigger("beforeClose",this.tooltipEventArgs,(function(t){t.cancel?r.isHidden=!1:r.isServerRender()?r.blazorHide(e,n):r.popupHide(e,n)}))}},{key:"blazorHide",value:function(e,t){var i=this;this.popupObj?this.popupHide(e,t):setTimeout((function(){i.popupHide(e,t)}),200)}},{key:"popupHide",value:function(e,t){var i=this;this.clearTemplate(),t&&this.restoreElement(t),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(n=void 0),this.closeDelay>0?this.hideTimer=setTimeout((function(){i.popupObj&&i.popupObj.hide(n)}),this.closeDelay):this.popupObj&&this.popupObj.hide(n)}},{key:"restoreElement",value:function(e){this.unwireMouseEvents(e),RD(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)}},{key:"clear",value:function(){this.tooltipEle&&(_P([this.tooltipEle],"e-popup-close"),wP([this.tooltipEle],"e-popup-open")),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle?(this.tooltipEle.style.display="none",this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),IP(this.tooltipEle)):this.tooltipEle&&IP(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)}},{key:"onMouseOut",value:function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=MP(t,".e-tooltip-wrap.e-lib.e-popup");i?(OR.add(i,"mouseleave",this.tooltipElementMouseOut,this),this.unwireMouseEvents(e.target)):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()}},{key:"tooltipElementMouseOut",value:function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),OR.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()}},{key:"onStickyClose",value:function(e){this.close()}},{key:"onMouseMove",value:function(e){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),oM.stop(this.tooltipEle),_P([this.tooltipEle],"e-popup-close"),wP([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),r=this.checkCollision(e.target,t+n.left+this.offsetX,i+n.top+this.offsetY);if(this.tooltipPositionX!==r.horizontal||this.tooltipPositionY!==r.vertical){var a=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?r.vertical+r.horizontal:r.horizontal+r.vertical;r.position=a,this.adjustArrow(e.target,r.position,r.horizontal,r.vertical);var o=this.calculateTooltipOffset(r.position);r.left=t+o.left-this.offsetX,r.top=i+o.top-this.offsetY}this.tooltipEle.style.left=r.left+"px",this.tooltipEle.style.top=r.top+"px"}},{key:"keyDown",value:function(e){this.tooltipEle&&27===e.keyCode&&this.close()}},{key:"touchEnd",value:function(e){this.tooltipEle&&null===MP(e.target,".e-tooltip")&&this.close()}},{key:"scrollHandler",value:function(e){this.tooltipEle&&(MP(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())}},{key:"render",value:function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()}},{key:"preRender",value:function(){this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0}},{key:"wireEvents",value:function(e){var t,i=_createForOfIteratorHelper(this.getTriggerList(e));try{for(i.s();!(t=i.n()).done;){var n=t.value;if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&OR.add(this.element,AR.touchStartEvent,this.targetClick,this),"Hover"===n&&(AR.isDevice?(this.touchModule=new FM(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),OR.add(this.element,AR.touchEndEvent,this.touchEndHandler,this)):(OR.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&OR.add(this.element,"mouseleave",this.onMouseOut,this)))}}catch(r){i.e(r)}finally{i.f()}OR.add(document,"touchend",this.touchEnd,this),OR.add(document,"scroll wheel",this.scrollHandler,this),OR.add(document,"keydown",this.keyDown,this)}},{key:"getTriggerList",value:function(e){return"Auto"===e&&(e=AR.isDevice?"Hover":"Hover Focus"),e.split(" ")}},{key:"wireFocusEvents",value:function(){if(RD(this.target))OR.add(this.element,"focus",this.targetHover,this);else{var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(this.target)));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.add(i,"focus",this.targetHover,this)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"wireMouseEvents",value:function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&OR.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&(this.isServerRender()||OR.add(t,"mouseleave",this.onMouseOut,this))),this.mouseTrail&&OR.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))}},{key:"unwireEvents",value:function(e){var t,i=_createForOfIteratorHelper(this.getTriggerList(e));try{for(i.s();!(t=i.n()).done;){var n=t.value;if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&OR.remove(this.element,AR.touchStartEvent,this.targetClick),"Hover"===n&&(AR.isDevice?(this.touchModule&&this.touchModule.destroy(),OR.remove(this.element,AR.touchEndEvent,this.touchEndHandler)):(OR.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&OR.remove(this.element,"mouseleave",this.onMouseOut)))}}catch(r){i.e(r)}finally{i.f()}OR.remove(document,"touchend",this.touchEnd),OR.remove(document,"scroll wheel",this.scrollHandler),OR.remove(document,"keydown",this.keyDown)}},{key:"unwireFocusEvents",value:function(){if(RD(this.target))OR.remove(this.element,"focus",this.targetHover);else{var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(this.target)));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.remove(i,"focus",this.targetHover)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"unwireMouseEvents",value:function(e){if(!this.isSticky){var t,i=_createForOfIteratorHelper(this.getTriggerList(this.opensOn));try{for(i.s();!(t=i.n()).done;){var n=t.value;"Focus"===n&&OR.remove(e,"blur",this.onMouseOut),"Hover"!==n||AR.isDevice||this.isServerRender()||OR.remove(e,"mouseleave",this.onMouseOut)}}catch(r){i.e(r)}finally{i.f()}}this.mouseTrail&&OR.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)}},{key:"findTarget",value:function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")}},{key:"getModuleName",value:function(){return"tooltip"}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"onPropertyChanged",value:function(e,t){for(var i=this.findTarget(),n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=FD(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=FD(e.height),this.reposition(i));break;case"content":this.tooltipEle?(this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent()):this.isServerRender()&&this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{content:e.content});break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var a=this.tooltipEle.querySelector(".e-arrow-tip-inner");a.style.top=a.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var o=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+o).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var s=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+s).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&_P([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&wP([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?wP([this.tooltipEle],"e-rtl"):_P([this.tooltipEle],"e-rtl"))}}},{key:"open",value:function(e,t){RD(t)&&(t=this.animation.open),RD(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)}},{key:"close",value:function(e){e||(e=this.animation.close),this.hideTooltip(e)}},{key:"refresh",value:function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)}},{key:"destroy",value:function(){if(this.isServerRender()||(_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),this.tooltipEle&&IP(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){var e=document.querySelector("#"+this.ctrlId+"_content_placeholder");e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),_P([this.element],"e-tooltip"),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null}}]),i}(kM),ZN([QP("auto")],JN.prototype,"width",void 0),ZN([QP("auto")],JN.prototype,"height",void 0),ZN([QP()],JN.prototype,"content",void 0),ZN([QP()],JN.prototype,"target",void 0),ZN([QP("TopCenter")],JN.prototype,"position",void 0),ZN([QP(0)],JN.prototype,"offsetX",void 0),ZN([QP(0)],JN.prototype,"offsetY",void 0),ZN([QP(!0)],JN.prototype,"showTipPointer",void 0),ZN([QP("Auto")],JN.prototype,"tipPointerPosition",void 0),ZN([QP("Auto")],JN.prototype,"opensOn",void 0),ZN([QP(!1)],JN.prototype,"mouseTrail",void 0),ZN([QP(!1)],JN.prototype,"isSticky",void 0),ZN([ZP({},$N)],JN.prototype,"animation",void 0),ZN([QP(0)],JN.prototype,"openDelay",void 0),ZN([QP(0)],JN.prototype,"closeDelay",void 0),ZN([QP()],JN.prototype,"cssClass",void 0),ZN([QP(!1)],JN.prototype,"enableHtmlSanitizer",void 0),ZN([eM()],JN.prototype,"beforeRender",void 0),ZN([eM()],JN.prototype,"beforeOpen",void 0),ZN([eM()],JN.prototype,"afterOpen",void 0),ZN([eM()],JN.prototype,"beforeClose",void 0),ZN([eM()],JN.prototype,"afterClose",void 0),ZN([eM()],JN.prototype,"beforeCollision",void 0),ZN([eM()],JN.prototype,"created",void 0),ZN([eM()],JN.prototype,"destroyed",void 0),JN=ZN([tM],JN)),tF={};function iF(e,t){if(e.target){var i,n=RD(t)?CP:t,r=function(e,t){var i=t("div",{});i.classList.add("e-spinner-pane");var n=t("div",{});return n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,n);if(RD(e.cssClass)||r.wrap.classList.add(e.cssClass),RD(e.template)&&RD(null)){var a=RD(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(r.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(RD(e.width)?void 0:e.width,a),function(e,t,i,n){var r=t.querySelector(".e-spinner-inner"),a=r.querySelector("svg");switch(RD(a)||r.removeChild(a),e){case"Material":!function(e,t,i){var n=nF();tF[n]={timeOut:0,type:"Material",radius:t},aF(e,n,0,"e-spin-material"),oF(t,e,"Material","e-spin-material")}(r,i);break;case"Fabric":!function(e,t,i){var n=nF();tF[n]={timeOut:0,type:"Fabric",radius:t},rF(e,n,"e-spin-fabric"),uF(t,e,"e-spin-fabric")}(r,i);break;case"Bootstrap":!function(e,t,i){var n=nF();tF[n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var r=0;r<=7;r++){var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("class","e-path-circle_"+r),a.setAttribute("r","2"),a.setAttribute("transform","translate(32,32)"),n.appendChild(a)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,r=0;r<=7;r++){var a=hF(0,0,24,n),o=i.querySelector(".e-path-circle_"+r);o.setAttribute("cx",a.x+""),o.setAttribute("cy",a.y+""),n=n>=360?0:n,n+=45}}(e,t)}(r,i);break;case"HighContrast":!function(e,t,i){var n=nF();tF[n]={timeOut:0,type:"HighContrast",radius:t},rF(e,n,"e-spin-high-contrast"),uF(t,e,"e-spin-high-contrast")}(r,i);break;case"Bootstrap4":!function(e,t,i){var n=nF();tF[n]={timeOut:0,type:"Bootstrap4",radius:t},aF(e,n,0,"e-spin-bootstrap4"),oF(t,e,"Bootstrap4","e-spin-bootstrap4")}(r,i)}}(a,r.wrap,i),RD(e.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.textContent=t,e.appendChild(n)}(r.inner_wrap,e.label,n)}else{var o=RD(e.template)?null:e.template;r.wrap.classList.add("e-spin-template"),function(e,t,i){RD(null)||e.classList.add(null),e.querySelector(".e-spinner-inner").innerHTML=t}(r.wrap,o)}r.wrap.classList.add("e-spin-hide"),r=null}}function nF(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function rF(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",t),r.setAttribute("class",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-circle");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),e.insertBefore(r,e.firstChild),r.appendChild(a),r.appendChild(o)}function aF(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class",n),r.setAttribute("id",t);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-circle"),e.insertBefore(r,e.firstChild),r.appendChild(a)}function oF(e,t,i,n){var r=2*e,a=t.querySelector("svg."+n),o=a.querySelector("path.e-path-circle"),s=sF(r),l=r/2+"px";a.setAttribute("viewBox","0 0 "+r+" "+r),a.style.width=a.style.height=r+"px",a.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(r,s)),"Material"===i&&(o.setAttribute("stroke-width",s+""),o.setAttribute("stroke-dasharray",(r-s)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",lF(r,s,1,75)+""))}function sF(e){return.1*e}function lF(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function cF(e,t,i,n){var r=(e/=n)*e,a=r*e;return t+i*(6*a*r+-15*r*r+10*a)}function uF(e,t,i){var n=e,r=e,a=2*e,o=t.querySelector("."+i),s=o.querySelector(".e-path-circle"),l=o.querySelector(".e-path-arc"),c=a/2+"px";s.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,r,e)),l.setAttribute("d",function(e,t,i,n,r){var a=hF(e,t,i,45),o=hF(e,t,i,315);return["M",a.x,a.y,"A",i,i,0,0,0,o.x,o.y].join(" ")}(n,r,e)),o.setAttribute("viewBox","0 0 "+a+" "+a),o.style.transformOrigin=c+" "+c+" "+c,o.style.width=o.style.height=a+"px"}function hF(e,t,i,n){var r=(n-90)*Math.PI/180;return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}}function dF(e){pF(e,!1),e=null}function pF(e,t){var i;if(e&&(i=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&i){var n=i.querySelector(".e-spinner-inner");if(t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show")){var r=i.querySelector("svg");if(RD(r))return;var a=r.getAttribute("id");switch(tF[a].isAnimate=!t,tF[a].type){case"Material":t?clearTimeout(tF[a].timeOut):function(e,t,i){var n={};tF[t].timeOut=0,n[t]=function(e,t,i,n){return{radius:t,count:0,previousId:0}}(0,i),function e(t){!function(t,i,n,r,a,o,s){var l=++s.globalInfo[s.uniqueID].previousId,c=(new Date).getTime(),u=parseFloat(2*s.globalInfo[s.uniqueID].radius+""),h=sF(u),d=-90*(s.globalInfo[s.uniqueID].count||0);!function t(i){var r=Math.max(0,Math.min((new Date).getTime()-c,1333));!function(e,t){if(!RD(t.querySelector("svg.e-spin-material"))&&!RD(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",lF(u,h,e,75)+""),i.setAttribute("transform","rotate("+d+" "+u/2+" "+u/2+")")}}(n(r,1,148,1333),i.container),l===i.globalInfo[i.uniqueID].previousId&&r<1333?tF[i.uniqueID].timeOut=setTimeout(t.bind(null,i),1):e(i)}(s)}(0,0,cF,0,0,0,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(n,a,tF[a].radius);break;case"Bootstrap":t?clearTimeout(tF[a].timeOut):function(e){for(var t,i,n,r,a,o=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),s=1;s<=8;s++)l(e.getElementsByClassName("e-path-circle_"+(8===s?0:s))[0],s,0,(t=void 0,i=void 0,n=void 0,r=void 0,a=void 0,t=[],n=s,r=!1,a=1,function e(o){t.push(o),(o!==n||1===a)&&(o<=i&&o>1&&!r?o=parseFloat((o-.2).toFixed(2)):1===o?(o=7,o=parseFloat((o+.2).toFixed(2)),r=!0):o<8&&r?8===(o=parseFloat((o+.2).toFixed(2)))&&(r=!1):o<=8&&!r&&(o=parseFloat((o-.2).toFixed(2))),++a,e(o))}(i=s),t),o);function l(e,t,i,n,r){var a=0;!function t(i){tF[r].isAnimate&&(++a,e.setAttribute("r",i+""),a>=n.length&&(a=0),tF[r].timeOut=setTimeout(t.bind(null,n[a]),18))}(t)}}(n)}}t?NP(i,["e-spin-hide"],["e-spin-show"]):NP(i,["e-spin-show"],["e-spin-hide"]),e=null}}function fF(e){pF(e,!0),e=null}var vF,mF,gF=function(){function e(t){return _classCallCheck2(this,e),this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this}return _createClass(e,[{key:"setKey",value:function(e){return this.key=e,this}},{key:"using",value:function(e){return this.dataManager=e,this}},{key:"execute",value:function(e,t,i,n){return(e=e||this.dataManager)?e.executeQuery(this,t,i,n):bF.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')}},{key:"executeLocal",value:function(e){return(e=e||this.dataManager)?e.executeLocal(this):bF.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')}},{key:"clone",value:function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t}},{key:"from",value:function(e){return this.fromTable=e,this}},{key:"addParams",value:function(e,t){return this.params.push("function"==typeof t?{key:e,fn:t}:{key:e,value:t}),this}},{key:"distinct",value:function(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this}},{key:"expand",value:function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this}},{key:"where",value:function(e,t,i,n,r){t=t?t.toLowerCase():null;var a=null;return"string"==typeof e?a=new yF(e,t,i,n,r):e instanceof yF&&(a=e),this.queries.push({fn:"onWhere",e:a}),this}},{key:"search",value:function(e,t,i,n,r){return"string"==typeof t&&(t=[t]),i&&"none"!==i||(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:n,ignoreAccent:r,comparer:bF.fnOperators[i]}}),this}},{key:"sortBy",value:function(t,i,n){var r,a,o="ascending";if("string"==typeof t&&bF.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),i&&"string"!=typeof i||(o=i?i.toLowerCase():"ascending",i=bF.fnSort(i)),n){r=e.filterQueries(this.queries,"onSortBy");for(var s=0;s<r.length;s++)if("string"==typeof(a=r[s].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var l=0;l<a.length;l++)if(a[l]===t||t.toLowerCase()===a[l]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:o}}),this}},{key:"sortByDesc",value:function(e){return this.sortBy(e,"descending")}},{key:"group",value:function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this}},{key:"page",value:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this}},{key:"range",value:function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this}},{key:"take",value:function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this}},{key:"skip",value:function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this}},{key:"select",value:function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this}},{key:"hierarchy",value:function(e,t){return this.subQuerySelector=t,this.subQuery=e,this}},{key:"foreignKey",value:function(e){return this.fKey=e,this}},{key:"requiresCount",value:function(){return this.isCountRequired=!0,this}},{key:"aggregate",value:function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this}}],[{key:"filterQueries",value:function(e,t){return e.filter((function(e){return e.fn===t}))}},{key:"filterQueryLists",value:function(e,t){for(var i=e.filter((function(e){return-1!==t.indexOf(e.fn)})),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n}}]),e}(),yF=function(){function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;return _classCallCheck2(this,e),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=i.toLowerCase(),this.value=n,this.ignoreCase=r,this.ignoreAccent=a,this.isComplex=!1,this.comparer=bF.fnOperators.processOperator(this.operator)):(t instanceof e&&n instanceof e||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return _createClass(e,[{key:"and",value:function(t,i,n,r,a){return e.combine(this,t,i,n,"and",r,a)}},{key:"or",value:function(t,i,n,r,a){return e.combine(this,t,i,n,"or",r,a)}},{key:"validate",value:function(e){var t,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,bF.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var r=0;r<n.length;r++)if(i=n[r].validate(e),t){if(!i)return!1}else if(i)return!0;return t}},{key:"toJson",value:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}}}],[{key:"and",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.combinePredicates([].slice.call(i,0),"and")}},{key:"or",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.combinePredicates([].slice.call(i,0),"or")}},{key:"fromJson",value:function(e){if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}return this.fromJSONData(e)}},{key:"combinePredicates",value:function(t,i){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],i,t.slice(1))}},{key:"combine",value:function(t,i,n,r,a,o,s){return i instanceof e?e[a](t,i):"string"==typeof i?e[a](t,new e(i,n,r,o,s)):bF.throwError("Predicate - "+a+" : invalid arguments")}},{key:"fromJSONData",value:function(t){for(var i=t.predicates||[],n=i.length,r=[],a=0;a<n;a++)r.push(this.fromJSONData(i[a]));return t.isComplex?new e(r[0],t.condition,r.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)}}]),e}(),bF=((vF=function(){function t(){_classCallCheck2(this,t)}return _createClass(t,null,[{key:"getValue",value:function(e,t){return"function"==typeof e?e.call(t||{}):e}},{key:"endsWith",value:function(e,t){return e.slice&&e.slice(-t.length)===t}},{key:"startsWith",value:function(e,t){return e.slice(0,t.length)===t}},{key:"fnSort",value:function(e){return"ascending"===(e=e?t.toLowerCase(e):"ascending")?this.fnAscending:this.fnDescending}},{key:"fnAscending",value:function(e,t){return RD(e)&&RD(t)||null==t?-1:"string"==typeof e?e.localeCompare(t):null==e?1:e-t}},{key:"fnDescending",value:function(e,t){return RD(e)&&RD(t)?-1:null==t?1:"string"==typeof e?-1*e.localeCompare(t):null==e?-1:t-e}},{key:"extractFields",value:function(e,t){for(var i={},n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i}},{key:"select",value:function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i}},{key:"group",value:function(e,i,n,r,a,o){var s=this;r=r||1;var l=e;if("{271bbba0-1ee7}"===l.GroupGuid){for(var c=function(e){if(RD(a))l[e].items=s.group(l[e].items,i,n,l.level+1,null,o),l[e].count=l[e].items.length;else{var t,r=a.filter((function(t){return t.key===l[e].key}));t=a.indexOf(r[0]),l[e].items=s.group(l[e].items,i,n,l.level+1,a[t].items,o),l[e].count=a[t].count}},u=0;u<l.length;u++)c(u);return l.childLevels+=1,l}var h={},d=[];d.GroupGuid="{271bbba0-1ee7}",d.level=r,d.childLevels=0,d.records=l;for(var p=function(e){var t=s.getVal(l,e,i);if(RD(o)||(t=o(t,i)),!h[t]&&(h[t]={key:t,count:0,items:[],aggregates:{},field:i},d.push(h[t]),!RD(a))){var n=a.filter((function(e){return e.key===h[t].key}));h[t].count=n[0].count}h[t].count=RD(a)?h[t].count+=1:h[t].count,h[t].items.push(l[e])},f=0;f<l.length;f++)p(f);if(n&&n.length)for(var v=function(e){for(var i=void 0,r={},o=n,s=0;s<n.length;s++)if(i=t.aggregates[n[s].type],RD(a))i&&(r[o[s].field+" - "+o[s].type]=i(d[e].items,o[s].field));else{var l=a.filter((function(t){return t.key===d[e].key}));i&&(r[o[s].field+" - "+o[s].type]=i(l[0].items,o[s].field))}d[e].aggregates=r},m=0;m<d.length;m++)v(m);return l.length&&d||l}},{key:"buildHierarchy",value:function(e,t,i,n,r){var a,o={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),a=0;a<n.length;a++){var s=this.getObject(e,n[a]);(o[s]||(o[s]=[])).push(n[a])}for(a=0;a<i.length;a++){var l=this.getObject(r||e,i[a]);i[a][t]=o[l]}}},{key:"getFieldList",value:function(e,t,i){if(void 0===i&&(i=""),null==t)return this.getFieldList(e,[],i);for(var n=e,r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];"object"!=typeof n[o]||n[o]instanceof Array?t.push(i+o):this.getFieldList(n[o],t,i+o+".")}return t}},{key:"getObject",value:function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var i=t,n=e.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i}}},{key:"setValue",value:function(e,t,i){var n,r,a=e.toString().split("."),o=i||{},s=o,l=a.length;for(n=0;n<l;n++)r=a[n],n+1===l?s[r]=void 0===t?void 0:t:RD(s[r])&&(s[r]={}),s=s[r];return o}},{key:"sort",value:function(e,t,i){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),r=e.slice(0,n),a=e.slice(n);return r=this.sort(r,t,i),a=this.sort(a,t,i),this.merge(r,a,t,i)}},{key:"ignoreDiacritics",value:function(e){return"string"!=typeof e?e:e.split("").map((function(e){return e in t.diacritics?t.diacritics[e]:e})).join("")}},{key:"merge",value:function(e,t,i,n){for(var r,a=[];e.length>0||t.length>0;)r=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,a.push(r.shift());return a}},{key:"getVal",value:function(e,t,i){return i?this.getObject(i,e[t]):e[t]}},{key:"toLowerCase",value:function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""}},{key:"callAdaptorFunction",value:function(e,t,i,n){if(t in e){var r=e[t](i,n);RD(r)||(i=r)}return i}},{key:"getAddParams",value:function(e,i,n){var r={};return t.callAdaptorFunction(e,"addParams",{dm:i,query:n,params:n.params,reqParams:r}),r}},{key:"isPlainObject",value:function(e){return!!e&&e.constructor===Object}},{key:"isCors",value:function(){var t=null;try{t=new window.XMLHttpRequest}catch(e){}return!!t&&"withCredentials"in t}},{key:"getGuid",value:function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]}))}},{key:"isNull",value:function(e){return null==e}},{key:"getItemFromComparer",value:function(e,i,n){var r,a,o,s=0,l="string"==typeof t.getVal(e,0,i);if(e.length)for(;RD(r)&&s<e.length;)r=t.getVal(e,s,i),o=e[s++];for(;s<e.length;s++)RD(a=t.getVal(e,s,i))||(l&&(r=+r,a=+a),n(r,a)>0&&(r=a,o=e[s]));return o}},{key:"distinct",value:function(e,i,n){n=!RD(n)&&n;var r,a=[],o={};return e.forEach((function(s,l){(r="object"==typeof e[l]?t.getVal(e,l,i):e[l])in o||(a.push(n?e[l]:r),o[r]=1)})),a}}]),t}()).serverTimezoneOffset=null,vF.timeZoneHandling=!0,vF.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},vF.aggregates={sum:function(e,t){for(var i,n=0,r="number"!=typeof vF.getVal(e,0,t),a=0;a<e.length;a++)i=vF.getVal(e,a,t),isNaN(i)||null===i||(r&&(i=+i),n+=i);return n},average:function(e,t){return vF.aggregates.sum(e,t)/e.length},min:function(e,t){var i;return"function"==typeof t&&(i=t,t=null),vF.getObject(t,vF.getItemFromComparer(e,t,i||vF.fnAscending))},max:function(e,t){var i;return"function"==typeof t&&(i=t,t=null),vF.getObject(t,vF.getItemFromComparer(e,t,i||vF.fnDescending))},truecount:function(e,t){return new TF(e).executeLocal((new gF).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new TF(e).executeLocal((new gF).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},vF.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},vF.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},vF.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},vF.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},vF.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},vF.fnOperators={equal:function(e,t,i,n){return n&&(e=vF.ignoreDiacritics(e),t=vF.ignoreDiacritics(t)),i?vF.toLowerCase(e)===vF.toLowerCase(t):e===t},notequal:function(e,t,i,n){return n&&(e=vF.ignoreDiacritics(e),t=vF.ignoreDiacritics(t)),!vF.fnOperators.equal(e,t,i)},lessthan:function(e,t,i){return i?vF.toLowerCase(e)<vF.toLowerCase(t):e<t},greaterthan:function(e,t,i){return i?vF.toLowerCase(e)>vF.toLowerCase(t):e>t},lessthanorequal:function(e,t,i){return i?vF.toLowerCase(e)<=vF.toLowerCase(t):e<=t},greaterthanorequal:function(e,t,i){return i?vF.toLowerCase(e)>=vF.toLowerCase(t):e>=t},contains:function(e,t,i,n){return n&&(e=vF.ignoreDiacritics(e),t=vF.ignoreDiacritics(t)),i?!RD(e)&&!RD(t)&&-1!==vF.toLowerCase(e).indexOf(vF.toLowerCase(t)):!RD(e)&&!RD(t)&&-1!==e.toString().indexOf(t)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i,n){return n&&(e=vF.ignoreDiacritics(e),t=vF.ignoreDiacritics(t)),i?e&&t&&vF.startsWith(vF.toLowerCase(e),vF.toLowerCase(t)):e&&t&&vF.startsWith(e,t)},endswith:function(e,t,i,n){return n&&(e=vF.ignoreDiacritics(e),t=vF.ignoreDiacritics(t)),i?e&&t&&vF.endsWith(vF.toLowerCase(e),vF.toLowerCase(t)):e&&t&&vF.endsWith(e,t)},processSymbols:function(e){var t=vF.operatorSymbols[e];return t?vF.fnOperators[t]:vF.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){return vF.fnOperators[e]||vF.fnOperators.processSymbols(e)}},vF.parse={parseJson:function(e){return"string"==typeof e?e=JSON.parse(e,vF.parse.jsonReviver):e instanceof Array?vF.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&vF.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]&&null!==e[t]?vF.parse.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[t])?vF.parse.parseJson(e[t]):vF.parse.jsonReviver("",e[t])},iterateAndReviveJson:function(e){for(var t,i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];vF.startsWith(r,"__")||("object"==typeof(t=e[r])?t instanceof Array?vF.parse.iterateAndReviveArray(t):t&&vF.parse.iterateAndReviveJson(t):e[r]=vF.parse.jsonReviver(e[r],t))}},jsonReviver:function(e,t){if("string"==typeof t){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),n=vF.timeZoneHandling?vF.serverTimezoneOffset:null;if(i)return vF.dateParse.toTimeZone(new Date(parseInt(i[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var r=t.indexOf("Z")>-1||t.indexOf("z")>-1,a=t.split(/[^0-9.]/);if(r)t=vF.dateParse.toTimeZone(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),vF.serverTimezoneOffset,!1);else{var o=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),s=parseInt(a[6],10),l=parseInt(a[7],10);if(isNaN(s)&&isNaN(l))return o;t.indexOf("+")>-1?o.setHours(o.getHours()-s,o.getMinutes()-l):o.setHours(o.getHours()+s,o.getMinutes()+l),t=vF.dateParse.toTimeZone(o,vF.serverTimezoneOffset,!1)}null==vF.serverTimezoneOffset&&(t=vF.dateParse.addSelfOffset(t))}}return t},isJson:function(e){return"string"==typeof e[0]?e:vF.parse.parseJson(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,t){return vF.isPlainObject(e)?vF.parse.jsonReplacer(e,t):e instanceof Array?vF.parse.arrayReplacer(e):e instanceof Date?vF.parse.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){for(var i,n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];if((i=e[a])instanceof Date){var o=i;null==vF.serverTimezoneOffset?e[a]=vF.dateParse.toTimeZone(o,null).toJSON():(o=new Date(+o+36e5*vF.serverTimezoneOffset),e[a]=vF.dateParse.toTimeZone(vF.dateParse.addSelfOffset(o),null).toJSON())}}return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)vF.isPlainObject(e[t])?e[t]=vF.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=vF.parse.jsonReplacer({date:e[t]}).date);return e},jsonDateReplacer:function(e,t){if("value"===e&&t){if("string"==typeof t){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(i)t=vF.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var n=t.split(/[^0-9]/);t=vF.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(t instanceof Date)return t=vF.dateParse.addSelfOffset(t),null===vF.serverTimezoneOffset?vF.dateParse.toTimeZone(vF.dateParse.addSelfOffset(t),null).toJSON():(t=vF.dateParse.toTimeZone(t,t.getTimezoneOffset()/60*2-vF.serverTimezoneOffset,!1)).toJSON()}return t}},vF.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(e,t,i){if(null===t)return e;var n=i?vF.dateParse.toUTC(e):e;return new Date(+n-36e5*t)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",r=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+n+r(i/60)+":"+r(i%60)}},vF),kF=function(){function e(t){_classCallCheck2(this,e),this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return _createClass(e,[{key:"processResponse",value:function(e,t,i,n){return e}}]),e}(),CF=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"processQuery",value:function(e,t){for(var i,n,r=e.dataSource.json.slice(0),a=r.length,o=!0,s={},l=0;l<t.queries.length;l++)i=this[(n=t.queries[l]).fn].call(this,r,n.e,t),"onAggregates"===n.fn?s[n.e.field+" - "+n.e.type]=i:r=void 0!==i?i:r,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(o=!1),o&&(a=r.length);return t.isCountRequired&&(r={result:r,count:a,aggregates:s}),r}},{key:"batchRequest",value:function(e,t,i){var n,r=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,i.key,t.changedRecords[n]);for(n=0;n<r;n++)this.remove(e,i.key,t.deletedRecords[n]);return t}},{key:"onWhere",value:function(e,t){return e&&e.length?e.filter((function(e){if(t)return t.validate(e)})):e}},{key:"onAggregates",value:function(e,t){var i=bF.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null}},{key:"onSearch",value:function(e,t){return e&&e.length?(0===t.fieldNames.length&&bF.getFieldList(e[0],t.fieldNames),e.filter((function(e){for(var i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,bF.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1}))):e}},{key:"onSortBy",value:function(e,t,i){if(!e||!e.length)return e;var n,r=bF.getValue(t.fieldName,i);if(!r)return e.sort(t.comparer);if(r instanceof Array){for(var a=(r=r.slice(0)).length-1;a>=0;a--)r[a]&&(n=t.comparer,bF.endsWith(r[a]," desc")&&(n=bF.fnSort("descending"),r[a]=r[a].replace(" desc","")),e=bF.sort(e,r[a],n));return e}return bF.sort(e,r,t.comparer)}},{key:"onGroup",value:function(e,t,i){if(!e||!e.length)return e;var n=gF.filterQueries(i.queries,"onAggregates"),r=[];if(n.length)for(var a,o=0;o<n.length;o++)a=n[o].e,r.push({type:a.type,field:bF.getValue(a.field,i)});return bF.group(e,bF.getValue(t.fieldName,i),r,null,null,t.comparer)}},{key:"onPage",value:function(e,t,i){var n=bF.getValue(t.pageSize,i),r=(bF.getValue(t.pageIndex,i)-1)*n;return e&&e.length?e.slice(r,r+n):e}},{key:"onRange",value:function(e,t){return e&&e.length?e.slice(bF.getValue(t.start),bF.getValue(t.end)):e}},{key:"onTake",value:function(e,t){return e&&e.length?e.slice(0,bF.getValue(t.nos)):e}},{key:"onSkip",value:function(e,t){return e&&e.length?e.slice(bF.getValue(t.nos)):e}},{key:"onSelect",value:function(e,t){return e&&e.length?bF.select(e,bF.getValue(t.fieldNames)):e}},{key:"insert",value:function(e,t,i,n,r){return RD(r)?e.dataSource.json.push(t):e.dataSource.json.splice(r,0,t)}},{key:"remove",value:function(e,t,i,n){var r,a=e.dataSource.json;for("object"!=typeof i||i instanceof Date||(i=bF.getObject(t,i)),r=0;r<a.length&&bF.getObject(t,a[r])!==i;r++);return r!==a.length?a.splice(r,1):null}},{key:"update",value:function(e,t,i,n){var r,a,o=e.dataSource.json;for(RD(t)||(a=TD(t,i)),r=0;r<o.length&&(RD(t)||TD(t,o[r])!==a);r++);return r<o.length?ID(o[r],i):null}}]),i}(kF),wF=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return _createClass(i,[{key:"processQuery",value:function(e,t,i){var n,r,a=this.getQueryRequest(t),o=gF.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t.params,l=e.dataSource.url,c=null,u=this.options,h={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?(n=o.onPage,r=((r=bF.getValue(n.pageIndex,t))-1)*(c=bF.getValue(n.pageSize,t))):"onRange"in o&&(r=(n=o.onRange).start,c=n.end-n.start);for(var d=0;d<a.sorts.length;d++)n=bF.getValue(a.sorts[d].e.fieldName,t),h.sorts.push(bF.callAdaptorFunction(this,"onEachSort",{name:n,direction:a.sorts[d].e.direction},t));i&&((n=this.getFiltersFrom(i,t))&&h.filters.push(bF.callAdaptorFunction(this,"onEachWhere",n.toJson(),t)));for(var p=0;p<a.filters.length;p++){h.filters.push(bF.callAdaptorFunction(this,"onEachWhere",a.filters[p].e.toJson(),t));var f,v=_createForOfIteratorHelper("object"==typeof h.filters[p]?Object.keys(h.filters[p]):[]);try{for(v.s();!(f=v.n()).done;){var m=f.value;bF.isNull(h[m])&&delete h[m]}}catch(E){v.e(E)}finally{v.f()}}for(var g=0;g<a.searches.length;g++)n=a.searches[g].e,h.searches.push(bF.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(var y=0;y<a.groups.length;y++)h.groups.push(bF.getValue(a.groups[y].e.fieldName,t));for(var b=0;b<a.aggregates.length;b++)n=a.aggregates[b].e,h.aggregates.push({type:n.type,field:bF.getValue(n.field,t)});var k={};this.getRequestQuery(u,t,o,h,k),bF.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:s,reqParams:k});for(var C=0,w=Object.keys(k);C<w.length;C++){var _=w[C];(bF.isNull(k[_])||""===k[_]||0===k[_].length)&&delete k[_]}u.skip in k&&u.take in k||null===c||(k[u.skip]=bF.callAdaptorFunction(this,"onSkip",r,t),k[u.take]=bF.callAdaptorFunction(this,"onTake",c,t));var S=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(k,bF.parse.jsonDateReplacer),url:l,pvtData:S,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(k,t,e),{type:"GET",url:(n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n).length?l.replace(/\/*$/,n):l,pvtData:S})}},{key:"getRequestQuery",value:function(e,t,i,n,r){var a=r;a[e.from]=t.fromTable,e.apply&&t.distincts.length&&(a[e.apply]="onDistinct"in this?bF.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(a[e.expand]="onExpand"in this&&"onSelect"in i?bF.callAdaptorFunction(this,"onExpand",{selects:bF.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),a[e.select]="onSelect"in i&&!t.distincts.length?bF.callAdaptorFunction(this,"onSelect",bF.getValue(i.onSelect.fieldNames,t),t):"",a[e.count]=t.isCountRequired?bF.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",a[e.search]=n.searches.length?bF.callAdaptorFunction(this,"onSearch",n.searches,t):"",a[e.skip]="onSkip"in i?bF.callAdaptorFunction(this,"onSkip",bF.getValue(i.onSkip.nos,t),t):"",a[e.take]="onTake"in i?bF.callAdaptorFunction(this,"onTake",bF.getValue(i.onTake.nos,t),t):"",a[e.where]=n.filters.length||n.searches.length?bF.callAdaptorFunction(this,"onWhere",n.filters,t):"",a[e.sortBy]=n.sorts.length?bF.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",a[e.group]=n.groups.length?bF.callAdaptorFunction(this,"onGroup",n.groups,t):"",a[e.aggregates]=n.aggregates.length?bF.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",a.param=[]}},{key:"convertToQueryString",value:function(e,t,i){return""}},{key:"processResponse",value:function(e,t,i,n,r,a){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("application/json")){var o=bF.timeZoneHandling;t&&!t.timeZoneHandling&&(bF.timeZoneHandling=!1),e=bF.parse.parseJson(e),bF.timeZoneHandling=o}var s=r,l=s.pvtData||{},c=e?e.groupDs:[];if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var u=JSON.parse(s.data);if(u&&"batch"===u.action&&e&&e.addedRecords)return a.addedRecords=e.addedRecords,a;e&&e.d&&(e=e.d);var h={};return e&&"count"in e&&(h.count=e.count),h.result=e&&e.result?e.result:e,this.getAggregateResult(l,e,h,c,i),bF.isNull(h.count)?h.result:{result:h.result,count:h.count,aggregates:h.aggregates}}},{key:"onGroup",value:function(e){return this.pvt.groups=e,e}},{key:"onAggregates",value:function(e){this.pvt.aggregates=e}},{key:"batchRequest",value:function(e,t,i,n,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(DD({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[void 0],key:i[void 0]},bF.getAddParams(this,e,n)))}}},{key:"beforeSend",value:function(e,t){}},{key:"insert",value:function(e,t,i,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(DD({},{value:t,table:i,action:"insert"},bF.getAddParams(this,e,n)))}}},{key:"remove",value:function(e,t,i,n,r){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(DD({},{key:i,keyColumn:t,table:n,action:"remove"},bF.getAddParams(this,e,r)))}}},{key:"update",value:function(e,t,i,n,r){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(DD({},{value:i,action:"update",keyColumn:t,key:bF.getObject(t,i),table:n},bF.getAddParams(this,e,r)))}}},{key:"getFiltersFrom",value:function(e,t){var i,n=t.fKey,r=n,a=t.key,o=[];"object"!=typeof e[0]&&(r=null);for(var s=0;s<e.length;s++)i="object"==typeof e[0]?bF.getObject(a||r,e[s]):e[s],o.push(new yF(n,"equal",i));return yF.or(o)}},{key:"getAggregateResult",value:function(e,t,i,n,r){var a=t;if(t&&t.result&&(a=t.result),e&&e.aggregates&&e.aggregates.length){var o,s=e.aggregates,l=a,c={};t.aggregate&&(l=t.aggregate);for(var u=0;u<s.length;u++)(o=bF.aggregates[s[u].type])&&(c[s[u].field+" - "+s[u].type]=o(l,s[u].field));i.aggregates=c}if(e&&e.groups&&e.groups.length){for(var h=e.groups,d=0;d<h.length;d++){RD(n)||(n=bF.group(n,h[d]));var p=gF.filterQueries(r.queries,"onGroup")[d].e;a=bF.group(a,h[d],e.aggregates,null,n,p.comparer)}i.result=a}return i}},{key:"getQueryRequest",value:function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=gF.filterQueries(e.queries,"onSortBy"),t.groups=gF.filterQueries(e.queries,"onGroup"),t.filters=gF.filterQueries(e.queries,"onWhere"),t.searches=gF.filterQueries(e.queries,"onSearch"),t.aggregates=gF.filterQueries(e.queries,"onAggregates"),t}},{key:"addParams",value:function(e){var t=e.reqParams;e.params.length&&(t.params={});var i,n=_createForOfIteratorHelper(e.params);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(t[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[r.key]=r.value,r.fn&&(t[r.key]=r.fn.call(e.query,r.key,e.query,e.dm)),t.params[r.key]=t[r.key]}}catch(a){n.e(a)}finally{n.f()}}}]),i}(kF),_F=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).options=DD({},n.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),DD(n.options,e||{}),n}return _createClass(i,[{key:"getModuleName",value:function(){return"ODataAdaptor"}},{key:"onPredicate",value:function(e,t,n){var r,a,o="",s=e.value,l=typeof s,c=e.field?i.getField(e.field):null;if(s instanceof Date&&(s="datetime'"+bF.parse.replacer(s)+"'"),"string"===l&&(s="'"+(s=encodeURIComponent(s))+"'",n&&(c="cast("+c+", 'Edm.String')"),bF.parse.isGuid(s)&&(a="guid"),e.ignoreCase&&(a||(c="tolower("+c+")"),s=s.toLowerCase())),r=bF.odBiOperator[e.operator])return o+=c,o+=r,a&&(o+=a),o+s;if("substringof"===(r=RD(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?bF.odUniOperator[e.operator]:bF.odv4UniOperator[e.operator])){var u=s;s=c,c=u}return o+=r+"(",o+=c+",",a&&(o+=a),o+=s+")"}},{key:"addParams",value:function(e){_get(_getPrototypeOf(i.prototype),"addParams",this).call(this,e),delete e.reqParams.params}},{key:"onComplexPredicate",value:function(e,t,i){for(var n=[],r=0;r<e.predicates.length;r++)n.push("("+this.onEachWhere(e.predicates[r],t,i)+")");return n.join(" "+e.condition+" ")}},{key:"onEachWhere",value:function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)}},{key:"onWhere",value:function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")}},{key:"onEachSearch",value:function(e){e.fields&&0===e.fields.length&&bF.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new yF(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t}},{key:"onSearch",value:function(e){return this.pvt.search=yF.or(this.pvt.search),""}},{key:"onEachSort",value:function(e){var t=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)t.push(i.getField(e.name[n])+("descending"===e.direction?" desc":""));else t.push(i.getField(e.name)+("descending"===e.direction?" desc":""));return t.join(",")}},{key:"onSortBy",value:function(e){return e.reverse().join(",")}},{key:"onGroup",value:function(e){return this.pvt.groups=e,[]}},{key:"onSelect",value:function(e){for(var t=0;t<e.length;t++)e[t]=i.getField(e[t]);return e.join(",")}},{key:"onAggregates",value:function(e){return this.pvt.aggregates=e,""}},{key:"onCount",value:function(e){return!0===e?"allpages":""}},{key:"beforeSend",value:function(e,t,i){bF.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")}},{key:"processResponse",value:function(e,t,i,n,r,a){if(r&&"GET"===r.type&&!this.rootUrl&&e["odata.metadata"]){var o=e["odata.metadata"].split("/$metadata#");this.rootUrl=o[0],this.resourceTableName=o[1]}if(!RD(e.d)){var s=i&&i.isCountRequired?e.d.results:e.d;if(!RD(s))for(var l=0;l<s.length;l++)RD(s[l].__metadata)||delete s[l].__metadata}var c=r&&r.pvtData,u=this.processBatchResponse(e,i,n,r,a);if(u)return u;var h=n&&r.getResponseHeader("DataServiceVersion"),d=null,p=h&&parseInt(h,10)||2;if(i&&i.isCountRequired){(e.__count||e["odata.count"])&&(d=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(d=e.__count||e["odata.count"])}3===p&&e.value&&(e=e.value),e.d&&(e=e.d),p<3&&e.results&&(e=e.results);var f={};return f.count=d,f.result=e,this.getAggregateResult(c,e,f,null,i),bF.isNull(d)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}}},{key:"convertToQueryString",value:function(e,t,i){var n=[],r=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];n.push(s+"="+e[s])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""}},{key:"localTimeReplacer",value:function(e,t){var i,n=_createForOfIteratorHelper(RD(t)?[]:Object.keys(t));try{for(n.s();!(i=n.n()).done;){var r=i.value;t[r]instanceof Date&&(t[r]=bF.dateParse.toLocalTime(t[r]))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"insert",value:function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}}},{key:"remove",value:function(e,t,i,n){var r;return r="string"!=typeof i||bF.parse.isGuid(i)?"(".concat(i,")"):"('".concat(i,"')"),{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+r}}},{key:"update",value:function(e,t,i,n,r,a){var o;return"PATCH"!==this.options.updateType||RD(a)||(i=this.compareAndRemove(i,a,t)),o="string"!=typeof i[t]||bF.parse.isGuid(i[t])?"(".concat(i[t],")"):"('".concat(i[t],"')"),{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}}},{key:"batchRequest",value:function(e,t,i,n,r){var a=i.guid=bF.getGuid(this.options.batchPre),o=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var s={url:i.url,key:i.key,cid:1,cSet:bF.getGuid(this.options.changeSet)},l="--"+a+"\n";return l+="Content-Type: multipart/mixed; boundary="+s.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(t.addedRecords,s,e),l+=this.generateUpdateRequest(t.changedRecords,s,e,r?r.changedRecords:[]),l+=this.generateDeleteRequest(t.deletedRecords,s,e),l+=s.cSet+"--\n",{type:"POST",url:o,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:l+="--"+a+"--"}}},{key:"generateDeleteRequest",value:function(e,t,i){if(!e)return"";return this.generateBodyContent(e,t,{method:"DELETE ",url:function(e,t,i){var n=bF.getObject(i,e[t]);return"number"==typeof n||bF.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][i].toJSON()+")":"('".concat(n,"')")},data:function(e,t){return""}},i)+"\n"}},{key:"generateInsertRequest",value:function(e,t,i){if(!e)return"";return this.generateBodyContent(e,t,{method:"POST ",url:function(e,t,i){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}},i)}},{key:"generateUpdateRequest",value:function(e,t,i,n){var r=this;if(!e)return"";return e.forEach((function(e){return e=r.compareAndRemove(e,n.filter((function(i){return bF.getObject(t.key,i)===bF.getObject(t.key,e)}))[0],t.key)})),this.generateBodyContent(e,t,{method:this.options.updateType+" ",url:function(e,t,i){return"number"==typeof e[t][i]||bF.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":"('".concat(e[t][i],"')")},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}},i)}},{key:"generateBodyContent",value:function(e,t,i,n){for(var r="",a=0;a<e.length;a++)r+="\n"+t.cSet+"\n",r+=this.options.changeSetContent+"\n\n",r+=i.method,"POST "===i.method?r+=(n.dataSource.insertUrl||n.dataSource.crudUrl||t.url)+i.url(e,a,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?r+=(n.dataSource.updateUrl||n.dataSource.crudUrl||t.url)+i.url(e,a,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(r+=(n.dataSource.removeUrl||n.dataSource.crudUrl||t.url)+i.url(e,a,t.key)+" HTTP/1.1\n"),r+="Accept: "+this.options.accept+"\n",r+="Content-Id: "+this.pvt.changeSet+++"\n",r+=this.options.batchChangeSetContentType+"\n",RD(e[a]["@odata.etag"])?r+="\n":(r+="If-Match: "+e[a]["@odata.etag"]+"\n\n",delete e[a]["@odata.etag"]),r+=i.data(e,a);return r}},{key:"processBatchResponse",value:function(e,t,i,n,r){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&bF.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var a,o,s=i.getResponseHeader("Content-Type"),l=e+"";if(s=s.substring(s.indexOf("=batchresponse")+1),(l=l.split(s)).length<2)return{};l=l[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);c&&l.replace(c[0],"");for(var u=(l=l.split(c?c[1]:"")).length;u>-1;u--)/\bContent-ID:/i.test(l[u])&&/\bHTTP.+201/.test(l[u])&&(a=parseInt(/\bContent-ID: (\d+)/i.exec(l[u])[1],10),r.addedRecords[a]&&(o=bF.parse.parseJson(/^\{.+\}/m.exec(l[u])[0]),DD({},r.addedRecords[a],this.processResponse(o))));return r}return null}},{key:"compareAndRemove",value:function(e,t,i){var n=this;return RD(t)||Object.keys(e).forEach((function(r){r!==i&&"@odata.etag"!==r&&(bF.isPlainObject(e[r])?(n.compareAndRemove(e[r],t[r]),0===Object.keys(e[r]).filter((function(e){return"@odata.etag"!==e})).length&&delete e[r]):(e[r]===t[r]||e[r]&&t[r]&&e[r].valueOf()===t[r].valueOf())&&delete e[r])})),e}}],[{key:"getField",value:function(e){return e.replace(/\./g,"/")}}]),i}(wF),SF=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck2(this,i),e=t.call(this),AD("beforeSend",wF.prototype.beforeSend,_assertThisInitialized(e)),e}return _createClass(i,[{key:"insert",value:function(e,t,i,n,r){return this.pvt.position=r,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(DD({},{value:t,table:i,action:"insert"},bF.getAddParams(this,e,n)))}}},{key:"remove",value:function(e,t,n,r,a){return _get(_getPrototypeOf(i.prototype),"remove",this).call(this,e,t,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(DD({},{key:n,keyColumn:t,table:r,action:"remove"},bF.getAddParams(this,e,a)))}}},{key:"update",value:function(e,t,i,n,r){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(DD({},{value:i,action:"update",keyColumn:t,key:i[t],table:n},bF.getAddParams(this,e,r)))}}},{key:"processResponse",value:function(e,t,n,r,a,o,s){var l;if("add"===this.updateType&&_get(_getPrototypeOf(i.prototype),"insert",this).call(this,t,e,null,null,this.pvt.position),"update"===this.updateType&&_get(_getPrototypeOf(i.prototype),"update",this).call(this,t,this.updateKey,e),this.updateType=void 0,e.added)for(l=0;l<e.added.length;l++)_get(_getPrototypeOf(i.prototype),"insert",this).call(this,t,e.added[l]);if(e.changed)for(l=0;l<e.changed.length;l++)_get(_getPrototypeOf(i.prototype),"update",this).call(this,t,s.key,e.changed[l]);if(e.deleted)for(l=0;l<e.deleted.length;l++)_get(_getPrototypeOf(i.prototype),"remove",this).call(this,t,s.key,e.deleted[l]);return e}},{key:"batchRequest",value:function(e,t,i,n,r){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(DD({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},bF.getAddParams(this,e,n)))}}},{key:"addParams",value:function(e){(new wF).addParams(e)}}]),i}(CF),EF=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r){var a;_classCallCheck2(this,i),(a=t.call(this)).isCrudAction=!1,a.isInsertAction=!1,RD(e)||(a.cacheAdaptor=e),a.pageSize=r,a.guidId=bF.getGuid("cacheAdaptor"),window.localStorage.setItem(a.guidId,JSON.stringify({keys:[],results:[]}));var o=a.guidId;return RD(n)||setInterval((function(){var e;e=bF.parse.parseJson(window.localStorage.getItem(o));for(var t=[],i=0;i<e.results.length;i++){var r=+new Date,a=+new Date(e.results[i].timeStamp);e.results[i].timeStamp=r-a,r-a>n&&t.push(i)}for(var s=0;s<t.length;s++)e.results.splice(t[s],1),e.keys.splice(t[s],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(e))}),n),a}return _createClass(i,[{key:"generateKey",value:function(e,t){var i=this.getQueryRequest(t),n=gF.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e;"onPage"in n&&(r+=n.onPage.pageIndex),i.sorts.forEach((function(e){r+=e.e.direction+e.e.fieldName})),i.groups.forEach((function(e){r+=e.e.fieldName})),i.searches.forEach((function(e){r+=e.e.searchKey}));for(var a=0;a<i.filters.length;a++){var o=i.filters[a];if(o.e.isComplex){var s=t.clone();s.queries=[];for(var l=0;l<o.e.predicates.length;l++)s.queries.push({fn:"onWhere",e:o.e.predicates[l],filter:t.queries.filter});r+=o.e.condition+this.generateKey(e,s)}else r+=o.e.field+o.e.operator+o.e.value}return r}},{key:"processQuery",value:function(e,t,i){var n,r=this.generateKey(e.dataSource.url,t),a=(n=bF.parse.parseJson(window.localStorage.getItem(this.guidId)))?n.results[n.keys.indexOf(r)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a}},{key:"processResponse",value:function(e,t,i,n,r,a){if(this.isInsertAction||r&&this.cacheAdaptor.options.batch&&bF.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,n,r,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var o=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,s={},l=(s=bF.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(o);for(-1!==l&&(s.results.splice(l,1),s.keys.splice(l,1)),s.results[s.keys.push(o)-1]={keys:o,result:e.result,timeStamp:new Date,count:e.count};s.results.length>this.pageSize;)s.results.splice(0,1),s.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(s)),e}},{key:"beforeSend",value:function(e,t,i){!RD(this.cacheAdaptor.options.batch)&&bF.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)}},{key:"update",value:function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,n)}},{key:"insert",value:function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)}},{key:"remove",value:function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,n)}},{key:"batchRequest",value:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}}]),i}(wF),TF=function(){function t(e,i,n){var r,a=this;return _classCallCheck2(this,t),this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),n=n||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?r={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),r={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof SF||e.url),requiresFormat:e.requiresFormat}):bF.throwError("DataManager: Invalid arguments"),void 0!==r.requiresFormat||bF.isCors()||(r.requiresFormat=!!RD(r.crossDomain)||r.crossDomain),void 0===r.dataType&&(r.dataType="json"),this.dataSource=r,this.defaultQuery=i,r.url&&r.offline&&!r.json.length?(this.isDataAvailable=!1,this.adaptor=n||new _F,this.dataSource.offline=!1,this.ready=this.executeQuery(i||new gF),this.ready.then((function(e){a.dataSource.offline=!0,a.isDataAvailable=!0,r.json=e.result,a.adaptor=new CF}))):this.adaptor=r.offline?new CF:new _F,!r.jsonp&&this.adaptor instanceof _F&&(r.jsonp="callback"),this.adaptor=n||this.adaptor,r.enableCaching&&(this.adaptor=new EF(this.adaptor,r.timeTillExpiration,r.cachingPageSize)),this}return _createClass(t,[{key:"setDefaultQuery",value:function(e){return this.defaultQuery=e,this}},{key:"executeLocal",value:function(e){this.defaultQuery||e instanceof gF||bF.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||bF.throwError("DataManager - executeLocal() : Json data is required to execute");var i=this.adaptor.processQuery(this,e=e||this.defaultQuery);if(e.subQuery){var n=e.subQuery.fromTable,r=e.subQuery.lookups,a=e.isCountRequired?i.result:i;r&&r instanceof Array&&bF.buildHierarchy(e.subQuery.fKey,n,a,r,e.subQuery.key);for(var o=0;o<a.length;o++)a[o][n]instanceof Array&&(a[o]=DD({},{},a[o]),a[o][n]=this.adaptor.processResponse(e.subQuery.using(new t(a[o][n].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(i,this,e)}},{key:"executeQuery",value:function(e,i,n,r){var a=this;"function"==typeof e&&(r=n,n=i,i=e,e=null),e||(e=this.defaultQuery),e instanceof gF||bF.throwError("DataManager - executeQuery() : A query is required to execute");var o=new AF,s={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!RD(this.adaptor.makeRequest)){var l=this.adaptor.processQuery(this,e);RD(this.adaptor.makeRequest)?RD(l.url)?(s=t.getDeferedArgs(e,l,s),o.resolve(s)):this.makeRequest(l,o,s,e):this.adaptor.makeRequest(l,o,s,e)}else t.nextTick((function(){var i=a.executeLocal(e);s=t.getDeferedArgs(e,i,s),o.resolve(s)}));return(i||n)&&o.promise.then(i,n),r&&o.promise.then(r,r),o.promise}},{key:"extendRequest",value:function(e,t,i){return DD({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)}},{key:"makeRequest",value:function(e,t,i,n){var r=this,a=!!n.subQuerySelector,o=function(e){i.error=e,t.reject(i)},s=function(e,n,r,a,o,s,l){i.xhr=r,i.count=n?parseInt(n.toString(),10):0,i.result=e,i.request=a,i.aggregates=s,i.actual=o,i.virtualSelectRecords=l,t.resolve(i)},l=function(e,t){var l=new AF,c={parent:i};n.subQuery.isChild=!0;var u=r.adaptor.processQuery(r,n.subQuery,e?r.adaptor.processResponse(e):t),h=r.makeRequest(u,l,c,n.subQuery);return a||l.then((function(t){e&&(bF.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,e,t,n.subQuery.key),s(e,t.count,t.xhr))}),o),h},c=this.extendRequest(e,(function(e,t){-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&r.dateParse&&(e=bF.parse.parseJson(e));var i=r.adaptor.processResponse(e,r,n,t.httpRequest,t),o=0,c=null,u=e.virtualSelectRecords;n.isCountRequired&&(o=i.count,c=i.aggregates,i=i.result),n.subQuery?a||l(i,t):s(i,o,t.httpRequest,t.type,e,c,u)}),o),u=new gR(c);if(u.beforeSend=function(){r.beforeSend(u.httpRequest,u)},(c=u.send()).catch((function(e){return!0})),this.requests.push(u),a){var h=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});h&&h.length?Promise.all([c,l(null,h)]).then((function(){var e=arguments.length<=0?void 0:arguments[0],t=r.adaptor.processResponse(e[0],r,n,r.requests[0].httpRequest,r.requests[0]),i=0;n.isCountRequired&&(i=t.count,t=t.result);var o=r.adaptor.processResponse(e[1],r,n.subQuery,r.requests[1].httpRequest,r.requests[1]);i=0,n.subQuery.isCountRequired&&(i=o.count,o=o.result),bF.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,t,o,n.subQuery.key),a=!1,s(t,i,r.requests[0].httpRequest)})):a=!1}return c}},{key:"beforeSend",value:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,n=this.dataSource.headers,r=0;n&&r<n.length;r++){i=[];for(var a=0,o=Object.keys(n[r]);a<o.length;a++){var s=o[a];i.push(s),e.setRequestHeader(s,n[r][s])}}}},{key:"saveChanges",value:function(e,t,i,n,r){var a=this;i instanceof gF&&(n=i,i=null);var o={url:i,key:t||this.dataSource.key},s=this.adaptor.batchRequest(this,e,o,n||new gF,r);if(this.dataSource.offline)return s;if(RD(this.adaptor.doAjaxRequest)){var l=new AF,c=new gR(s);return c.beforeSend=function(){a.beforeSend(c.httpRequest,c)},c.onSuccess=function(t,i){l.resolve(a.adaptor.processResponse(t,a,null,i.httpRequest,i,e,o))},c.onFailure=function(e){l.reject([{error:e}])},c.send().catch((function(e){return!0})),l.promise}return this.adaptor.doAjaxRequest(s)}},{key:"insert",value:function(e,t,i,n){t instanceof gF&&(i=t,t=null);var r=this.adaptor.insert(this,e,t,i,n);return this.dataSource.offline?r:RD(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)}},{key:"remove",value:function(e,t,i,n){"object"==typeof t&&(t=bF.getObject(e,t)),i instanceof gF&&(n=i,i=null);var r=this.adaptor.remove(this,e,t,i,n);return this.dataSource.offline?r:RD(this.adaptor.doAjaxRequest)?this.doAjaxRequest(r):this.adaptor.doAjaxRequest(r)}},{key:"update",value:function(e,t,i,n,r){i instanceof gF&&(n=i,i=null);var a=this.adaptor.update(this,e,t,i,n,r);return this.dataSource.offline?a:RD(this.adaptor.doAjaxRequest)?this.doAjaxRequest(a):this.adaptor.doAjaxRequest(a)}},{key:"doAjaxRequest",value:function(t){var i=this,n=new AF;t=DD({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t);var r=new gR(t);return r.beforeSend=function(){i.beforeSend(r.httpRequest,r)},r.onSuccess=function(t,r){try{bF.parse.parseJson(t)}catch(e){t=[]}t=i.adaptor.processResponse(bF.parse.parseJson(t),i,null,r.httpRequest,r),n.resolve(t)},r.onFailure=function(e){n.reject([{error:e}])},r.send().catch((function(e){return!0})),n.promise}}],[{key:"getDeferedArgs",value:function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i}},{key:"nextTick",value:function(e){(window.setImmediate||window.setTimeout)(e,0)}}]),t}(),AF=function e(){var t=this;_classCallCheck2(this,e),this.promise=new Promise((function(e,i){t.resolve=e,t.reject=i})),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)},OF={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function xF(e,t){var i={};if(RD(e)||"string"==typeof e||"number"==typeof e||!RD(e.isHeader))return e;for(var n=0,r=Object.keys(t);n<r.length;n++){var a=t[r[n]],o=RD(a)||"string"!=typeof a?void 0:TD(a,e);RD(o)||(i[a]=o)}return i}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(e,t,i,n){return b(e,r(e,t,i,n),null,n)}function r(e,t,n,r){var a=[],o=DD({},i,r);OF=m(o.moduleName);for(var s=p(),l=0;l<t.length;l++)if(!RD(t[l])){var c;o.itemCreating&&"function"==typeof o.itemCreating&&o.itemCreating({dataSource:t,curData:t[l],text:t[l],options:o}),c=n?v(e,t[l],void 0,null,null,[],null,s,l,r):y(e,t[l],void 0,null,null,r),o.itemCreated&&"function"==typeof o.itemCreated&&o.itemCreated({dataSource:t,curData:t[l],text:t[l],item:c,options:o}),a.push(c)}return a}function a(n,r,a,o,s){var l=DD({},i,a);OF=m(l.moduleName);var c,d=DD({},e.defaultMappedFields,l.fields),g=DD({},t,l.ariaAttributes),b=[];o&&(g.level=o);var k,C,w=[];r&&r.length&&!RD(u(r).item)&&!u(r).item.hasOwnProperty(d.id)&&(c=p());for(var _=0;_<r.length;_++){var S=xF(r[_],d);if(!RD(r[_])){l.itemCreating&&"function"==typeof l.itemCreating&&l.itemCreating({dataSource:r,curData:r[_],text:S[d.text],options:l,fields:d});var E=r[_];l.itemCreating&&"function"==typeof l.itemCreating&&(S=xF(r[_],d)),S.hasOwnProperty(d.id)&&!RD(S[d.id])&&(c=S[d.id]);var T=[];if(l.showCheckBox&&(l.itemNavigable&&(S[d.url]||S[d.urlAttributes])?b.push(n("input",{className:OF.check,attrs:{type:"checkbox"}})):T.push(n("input",{className:OF.check,attrs:{type:"checkbox"}}))),!0===s)l.showIcon&&S.hasOwnProperty(d.iconCss)&&!RD(S[d.iconCss])&&T.push(n("span",{className:OF.icon+" "+S[d.iconCss]})),C=(k=v(n,E,S,d,l.itemClass,T,!(!E.hasOwnProperty("isHeader")||!E.isHeader),c,_,a)).querySelector("."+OF.anchorWrap),l.itemNavigable&&b.length&&TP(b,k.firstElementChild);else{if((k=y(n,E,S,d,l.itemClass,a)).classList.add(OF.level+"-"+g.level),k.setAttribute("aria-level",g.level.toString()),C=k.querySelector("."+OF.anchorWrap),S.hasOwnProperty(d.tooltip)&&k.setAttribute("title",S[d.tooltip]),S.hasOwnProperty(d.htmlAttributes)&&S[d.htmlAttributes]&&h(k,S[d.htmlAttributes]),S.hasOwnProperty(d.enabled)&&!1===S[d.enabled]&&k.classList.add(OF.disabled),S.hasOwnProperty(d.isVisible)&&!1===S[d.isVisible]&&(k.style.display="none"),S.hasOwnProperty(d.imageUrl)&&!RD(S[d.imageUrl])&&!l.template){var A={src:S[d.imageUrl]};ID(A,S[d.imageAttributes]);var O=n("img",{className:OF.image,attrs:A});C?C.insertAdjacentElement("afterbegin",O):TP([O],k.firstElementChild)}if(l.showIcon&&S.hasOwnProperty(d.iconCss)&&!RD(S[d.iconCss])&&!l.template){var x;x=n("div",{className:OF.icon+" "+S[d.iconCss]}),C?C.insertAdjacentElement("afterbegin",x):TP([x],k.firstElementChild)}T.length&&TP(T,k.firstElementChild),l.itemNavigable&&b.length&&TP(b,k.firstElementChild),f(n,S,d,0,l,k,g.level)}C&&wP([k],[OF.navigable]),l.itemCreated&&"function"==typeof l.itemCreated&&l.itemCreated({dataSource:r,curData:r[_],text:S[d.text],item:k,options:l,fields:d}),b=[],w.push(k)}}return w}function o(e,t,n,r,o){var s=DD({},i,n);return b(e,a(e,t,n,r,o),s.listClass,n)}function s(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function l(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gF;if("Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function c(e,t){return new TF(e).executeLocal(t)}function u(e){for(var t=0;t<e.length;t++)if(!RD(e[t]))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}function h(e,t){var i={};ID(i,t),i.class&&(wP([e],i.class.split(" ")),delete i.class),DP(e,i)}function d(e){for(var t={},i=e.attributes,n=0;n<i.length;n++)t[i[n].nodeName]=i[n].nodeValue;return t}function p(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function f(e,t,i,n,r,a,s){var l=t[i.child]||[],c=t[i.hasChildren];if(l.length&&(c=!0,a.classList.add(OF.hasChild),r.processSubChild)){var u=o(e,l,r,++s);a.appendChild(u)}r.expandCollapse&&c&&!r.template&&(a.firstElementChild.classList.add(OF.iconWrapper),("Left"===r.expandIconPosition?TP:AP)([e("div",{className:"e-icons "+r.expandIconClass})],a.querySelector("."+OF.textContent)))}function v(e,n,r,a,o,s,l,c,u,d){var p,f,v=DD({},i,d),m=DD({},t,v.ariaAttributes),y=n,b=n;"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&(p=n,y="boolean"==typeof r[a.text]||"number"==typeof r[a.text]?r[a.text]:r[a.text]||"",b=r[a.value]),f=RD(p)||RD(r[a.id])||""===r[a.id]?c+"-"+u:c;var k=e("li",{className:(!0===l?OF.group:OF.li)+" "+(RD(o)?"":o),id:f,attrs:""!==m.groupItemRole&&""!==m.itemRole?{role:!0===l?m.groupItemRole:m.itemRole}:{}});return p&&r.hasOwnProperty(a.enabled)&&"false"===r[a.enabled].toString()&&k.classList.add(OF.disabled),l?k.innerText=y:(k.setAttribute("data-value",RD(b)?"null":b),k.setAttribute("role","option"),p&&r.hasOwnProperty(a.htmlAttributes)&&r[a.htmlAttributes]&&h(k,r[a.htmlAttributes]),s.length&&!v.itemNavigable&&AP(s,k),p&&(r[a.url]||r[a.urlAttributes]&&r[a.urlAttributes].href)?k.appendChild(g(e,p,a,y,s,v.itemNavigable)):(s.length&&v.itemNavigable&&AP(s,k),k.appendChild(document.createTextNode(y)))),k}function m(e){return{li:"e-".concat(e,"-item"),ul:"e-".concat(e,"-parent e-ul"),group:"e-".concat(e,"-group-item"),icon:"e-".concat(e,"-icon"),text:"e-".concat(e,"-text"),check:"e-".concat(e,"-check"),checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-".concat(e,"-url"),collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-".concat(e,"-img"),iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function g(e,t,i,n,r,a){var o,s=xF(t,i),l={href:s[i.url]};if(s.hasOwnProperty(i.urlAttributes)&&s[i.urlAttributes]&&(ID(l,s[i.urlAttributes]),l.href=s[i.url]?s[i.url]:s[i.urlAttributes].href),a){o=e("a",{className:OF.text+" "+OF.url});var c=e("div",{className:OF.anchorWrap});r&&r.length&&AP(r,c),c.appendChild(document.createTextNode(n)),AP([c],o)}else o=e("a",{className:OF.text+" "+OF.url,innerHTML:n});return h(o,l),o}function y(e,n,r,a,o,s){var l,c,u,h=DD({},i,s),d=DD({},t,h.ariaAttributes),f=n;"string"!=typeof n&&"number"!=typeof n&&(u=n,f=r[a.text]||"",l=RD(r._id)?r[a.id]:r._id,c=!(!n.hasOwnProperty("isHeader")||!n.isHeader)),s&&s.enableHtmlSanitizer&&(f=HM.sanitize(f));var v=e("li",{className:(!0===c?OF.group:OF.li)+" "+(RD(o)?"":o),attrs:""!==d.groupItemRole&&""!==d.itemRole?{role:!0===c?d.groupItemRole:d.itemRole}:{}});if(RD(l)?v.setAttribute("data-uid",p()):v.setAttribute("data-uid",l),s&&s.removeBlazorID&&"object"==typeof n&&n.hasOwnProperty("BlazId")&&delete n.BlazId,c&&s&&s.groupTemplate)AP(tP(s.groupTemplate)(n,s,"groupTemplate",h.groupTemplateID,!!h.isStringTemplate),v);else if(!c&&s&&s.template)AP(tP(s.template)(n,s,"template",h.templateID,!!h.isStringTemplate),v);else{var m=e("div",{className:OF.textContent,attrs:""!==d.wrapperRole?{role:d.wrapperRole}:{}});if(u&&(r[a.url]||r[a.urlAttributes]&&r[a.urlAttributes].href))m.appendChild(g(e,u,a,f,null,h.itemNavigable));else{var y=e("span",{className:OF.text,attrs:""!==d.itemText?{role:d.itemText}:{}});s&&s.enableHtmlSanitizer?y.innerText=HM.sanitize(f):y.innerHTML=f,m.appendChild(y)}v.appendChild(m)}return v}function b(e,n,r,a){var o=DD({},i,a),s=DD({},t,o.ariaAttributes),l=e("ul",{className:(OF=m(o.moduleName)).ul+" "+(RD(r)?"":r),attrs:""!==s.listRole?{role:s.listRole}:{}});return AP(n,l),l}e.createList=function(e,r,a,s){var l=DD({},i,a),c=DD({},t,l.ariaAttributes),h=u(r).typeof;return"string"===h||"number"===h?n(e,r,s,a):o(e,r,a,c.level,s)},e.createListFromArray=n,e.createListItemFromArray=r,e.createListItemFromJson=a,e.createListFromJson=o,e.getSiblingLI=function(e,t,n){if(OF=m(i.moduleName),e&&e.length){var r,a,o=Array.prototype.slice.call(e);for(r=o[(a=t?s(t,o):!0===n?o.length:-1)+(!0===n?-1:1)];r&&(!EP(r)||r.classList.contains(OF.disabled));)r=o[a+=!0===n?-1:1];return r}},e.indexOf=s,e.groupDataSource=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"None",r=DD({},e.defaultMappedFields,i),a=(new gF).group(r.groupBy),o=c(t,a=l(n,"key",a));t=[];for(var s=0;s<o.length;s++){var u=o[s].items,h={},d="isHeader";h[r.text]=o[s].key,h[d]=!0;var p=r.text;"id"===p&&(h[p="text"]=o[s].key),h._id="group-list-item-"+(o[s].key?o[s].key.toString().trim():"undefined"),h.items=u,t.push(h);for(var f=0;f<u.length;f++)t.push(u[f])}return t},e.addSorting=l,e.getDataSource=c,e.createJsonFromElement=function t(n,r){var a=DD({},i,r),o=DD({},e.defaultMappedFields,a.fields),s=n.cloneNode(!0),l=[];s.classList.add("json-parent");var c=s.querySelectorAll(".json-parent>li");s.classList.remove("json-parent");for(var u=0;u<c.length;u++){for(var h=c[u],f=h.querySelector("a"),v=h.querySelector("ul"),m={},g=f?f.childNodes:h.childNodes,y=Object.keys(g),b=0;b<g.length;b++)g[Number(y[b])].hasChildNodes()||(m[o.text]=g[Number(y[b])].textContent);var k=d(h);k.id?(m[o.id]=k.id,delete k.id):m[o.id]=p(),Object.keys(k).length&&(m[o.htmlAttributes]=k),f&&(k=d(f),Object.keys(k).length&&(m[o.urlAttributes]=k)),v&&(m[o.child]=t(v,r)),l.push(m)}return l},e.renderContentTemplate=function(t,n,r,a,o,s){for(var l=t("ul",{className:(OF=m(i.moduleName)).ul,attrs:{role:"presentation"}}),c=DD({},i,o),u=DD({},e.defaultMappedFields,a),h=tP(n),d=[],f=p(),v=0;v<r.length;v++){var g=xF(r[v],u),y=r[v],b=y.isHeader,k=g[u.value];c.itemCreating&&"function"==typeof c.itemCreating&&c.itemCreating({dataSource:r,curData:y,text:k,options:c,fields:u}),c.itemCreating&&"function"==typeof c.itemCreating&&(k=(g=xF(r[v],u))[u.value]);var C=t("li",{id:f+"-"+v,className:b?OF.group:OF.li,attrs:{role:"presentation"}});b?C.innerText=g[u.text]:(AP(h(y,o,b?"groupTemplate":"template",b?c.groupTemplateID:c.templateID,!!c.isStringTemplate),C),C.setAttribute("data-value",RD(k)?"null":k),C.setAttribute("role","option")),c.itemCreated&&"function"==typeof c.itemCreated&&c.itemCreated({dataSource:r,curData:y,text:k,item:C,options:c,fields:u}),d.push(C)}return AP(d,l),l},e.renderGroupTemplate=function(t,n,r,a,o){var s,l=tP(t),c=DD({},e.defaultMappedFields,r),u=DD({},i,o),h=c.groupBy,d=_createForOfIteratorHelper(a);try{for(d.s();!(s=d.n()).done;){var p=s.value,f={};f[h]=p.textContent,p.innerHTML="",AP(l(f,o,"groupTemplate",u.groupTemplateID,!!u.isStringTemplate),p)}}catch(v){d.e(v)}finally{d.f()}return a},e.generateId=p,e.generateUL=b,e.generateIcon=function(e,t,n,r){var a=DD({},i,r);return OF=m(a.moduleName),("Left"===a.expandIconPosition?TP:AP)([e("div",{className:"e-icons "+a.expandIconClass+" "+(RD(n)?"":n)})],t.querySelector("."+OF.textContent)),t}}(mF||(mF={}));var IF=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},DF={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},RF={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},PF={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},MF=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM);IF([QP("id")],MF.prototype,"id",void 0),IF([QP("text")],MF.prototype,"text",void 0),IF([QP("isChecked")],MF.prototype,"isChecked",void 0),IF([QP("isVisible")],MF.prototype,"isVisible",void 0),IF([QP("enabled")],MF.prototype,"enabled",void 0),IF([QP("iconCss")],MF.prototype,"iconCss",void 0),IF([QP("child")],MF.prototype,"child",void 0),IF([QP("tooltip")],MF.prototype,"tooltip",void 0),IF([QP("groupBy")],MF.prototype,"groupBy",void 0),IF([QP("text")],MF.prototype,"sortBy",void 0),IF([QP("htmlAttributes")],MF.prototype,"htmlAttributes",void 0),IF([QP("tableName")],MF.prototype,"tableName",void 0);var LF=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).itemReRender=!1,r.previousSelectedItems=[],r.hiddenItems=[],r.enabledItems=[],r.disabledItems=[],r}return _createClass(i,[{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":RD(this.contentContainer)||xP(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"sortOrder":case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}}},{key:"setHTMLAttribute",value:function(){Object.keys(this.htmlAttributes).length&&DP(this.element,this.htmlAttributes)}},{key:"setCSSClass",value:function(e){this.cssClass&&wP([this.element],this.cssClass.split(" ").filter((function(e){return e}))),e&&_P([this.element],e.split(" ").filter((function(e){return e})))}},{key:"setSize",value:function(){this.element.style.height=FD(this.height),this.element.style.width=FD(this.width),this.isWindow=!this.element.clientHeight}},{key:"setEnable",value:function(){this.enableElement(this.element,this.enable)}},{key:"setEnableRTL",value:function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},{key:"enableElement",value:function(e,t){t?e.classList.remove(PF.disable):e.classList.add(PF.disable)}},{key:"header",value:function(e,t,i){if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:HM.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:PF.header});var n=this.createElement("span",{className:PF.headerText,innerHTML:this.headerTitle}),r=this.createElement("div",{className:PF.text,innerHTML:n.outerHTML}),a=this.createElement("div",{className:PF.icon+" "+PF.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(a),this.headerEle.appendChild(r),this.headerTemplate){var o=tP(this.headerTemplate),s=this.createElement("div",{className:PF.headerTemplateText});AP(o({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID),s),AP([s],this.headerEle),this.updateBlazorTemplates(!1,!0,!0)}this.headerTemplate&&this.headerTitle&&r.classList.add("header"),this.element.classList.add("e-has-header"),TP([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";var l=this.headerEle.querySelector("."+PF.headerText),c=this.headerEle.querySelector("."+PF.backIcon);this.enableHtmlSanitizer&&(e=HM.sanitize(e)),l.innerHTML=e,this.headerTemplate&&t&&(l.parentElement.classList.remove("header"),this.headerEle.querySelector("."+PF.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(l.parentElement.classList.add("header"),this.headerEle.querySelector("."+PF.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+PF.headerTemplateText).classList.add("header")),c.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"}},{key:"switchView",value:function(e,t,i){var n=this;if(e&&t){var r,a=e.style.position,o="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var s=this.animation.duration;this.animation.effect?r=this.enableRtl?RF[this.animation.effect]:DF[this.animation.effect]:(r=DF.SlideLeft,i=this.enableRtl,s=0),this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?r[0]:r[1],duration:s,timingFunction:this.animation.easing,end:function(t){e.style.display="none",n.element.style.overflow=o,e.style.position=a,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?r[2]:r[3],duration:s,timingFunction:this.animation.easing,end:function(){n.trigger("actionComplete")}}),this.curUL=t}}},{key:"preRender",value:function(){this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"option",listRole:"presentation",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer,removeBlazorID:!0},this.initialization()}},{key:"updateLiElementHeight",value:function(){var e=this.element.querySelector("."+PF.virtualElementContainer);e.children[0]&&(this.liElementHeight=e.children[0].getBoundingClientRect().height,this.interopAdaptor.invokeMethodAsync("LiElementHeight",this.liElementHeight))}},{key:"initialization",value:function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new oM(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0}},{key:"renderCheckbox",value:function(e){if(e.item.classList.contains(PF.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var t;(t=eL(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:PF.listviewCheckbox})).setAttribute("role","checkbox");var i=t.querySelector("."+PF.checkboxIcon);e.item.classList.add(PF.itemCheckList),e.item.firstElementChild.classList.add(PF.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?xF(e.curData,this.listBaseOption.fields)[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,t):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,t),t.setAttribute("aria-checked",i.classList.contains(PF.checked)?"true":"false"),"Left"===this.checkBoxPosition?(t.classList.add(PF.checkboxLeft),e.item.firstElementChild.classList.add(PF.checkboxLeft),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0])):(t.classList.add(PF.checkboxRight),e.item.firstElementChild.classList.add(PF.checkboxRight),e.item.firstElementChild.appendChild(t)),this.currentLiElements.push(e.item),this.virtualCheckBox="Left"===this.checkBoxPosition?e.item.firstElementChild.children[0]:e.item.firstElementChild.lastElementChild}}},{key:"checkInternally",value:function(e,t){e.item.classList.add(PF.selected),e.item.setAttribute("aria-selected","true"),t.querySelector("."+PF.checkboxIcon).classList.add(PF.checked),t.setAttribute("aria-checked","true")}},{key:"checkItem",value:function(e){this.toggleCheckBase(e,!0)}},{key:"toggleCheckBase",value:function(e,t){if(this.showCheckBox){var i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!RD(i)){var n=i.querySelector("."+PF.checkboxIcon);t?i.classList.add(PF.selected):i.classList.remove(PF.selected),i.setAttribute("aria-selected",t?"true":"false"),t?n.classList.add(PF.checked):n.classList.remove(PF.checked),n.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i)}}},{key:"uncheckItem",value:function(e){this.toggleCheckBase(e,!1)}},{key:"checkAllItems",value:function(){this.toggleAllCheckBase(!0)}},{key:"uncheckAllItems",value:function(){this.toggleAllCheckBase(!1)}},{key:"toggleAllCheckBase",value:function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+PF.checkboxIcon);i&&(e?i.classList.contains(PF.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(PF.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e)}}},{key:"setCheckbox",value:function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+PF.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var n=e[i];t.item=n,t.curData=this.getItemData(n),n.querySelector("."+PF.checkboxWrapper)&&this.removeElement(n.querySelector("."+PF.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(PF.selected)&&this.checkInternally(t,t.item.querySelector("."+PF.checkboxWrapper))}else{for(var r=Array.prototype.slice.call(this.element.querySelectorAll("."+PF.itemCheckList)),a=0;a<r.length;a++){var o=r[a];o.classList.remove(PF.selected),o.firstElementChild.classList.remove(PF.checkbox),this.removeElement(o.querySelector("."+PF.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(PF.selected)}}},{key:"refreshItemHeight",value:function(){this.virtualizationModule.refreshItemHeight()}},{key:"clickHandler",value:function(e){var t,i=e.target,n=i.classList;if(n.contains(PF.backIcon)||n.contains(PF.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var r=MP(i.parentNode,"."+PF.listItem);if(null===r&&(r=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(r))if(e.target.classList.contains(PF.checkboxIcon)){if(r.classList.add(PF.focused),RD(r.querySelector("."+PF.checked))){var a={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:r};this.checkInternally(a,a.item.querySelector("."+PF.checkboxWrapper))}else this.uncheckItem(r),r.classList.add(PF.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(r,e),e){var o=this.selectEventData(r,e);ID(o,{isChecked:r.querySelector("."+PF.checkboxIcon).classList.contains(PF.checked)}),this.trigger("select",o)}}else r.classList.contains(PF.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(r),this.setSelectLI(r,e),r.classList.remove(PF.selected)):this.setCheckboxLI(r,e);else this.setSelectLI(r,e);RD(t=MP(e.target,"li"))||t.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&t.classList.add(PF.disable)}}},{key:"removeElement",value:function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"hoverHandler",value:function(e){var t=MP(e.target.parentNode,"."+PF.listItem);this.setHoverLI(t)}},{key:"leaveHandler",value:function(e){this.removeHover()}},{key:"homeKeyHandler",value:function(e,t){if(Object.keys(this.dataSource).length&&this.curUL){this.selectedItems&&this.selectedItems.item.setAttribute("aria-selected","false");var i=this.curUL.querySelectorAll("."+PF.listItem),n=this.curUL.querySelector("."+PF.focused)||this.curUL.querySelector("."+PF.selected);n&&(n.classList.remove(PF.focused),this.showCheckBox||n.classList.remove(PF.selected));var r=t?i.length-1:0;i[r].classList.contains(PF.hasChild)||this.showCheckBox?i[r].classList.add(PF.focused):this.setSelectLI(i[r],e),i[r]?this.element.setAttribute("aria-activedescendant",i[r].id.toString()):this.element.removeAttribute("aria-activedescendant")}}},{key:"onArrowKeyDown",value:function(e,t){var i,n;return!RD(this.curUL.querySelector("."+PF.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+PF.focused)||this.curUL.querySelector("."+PF.selected),RD(i=mF.getSiblingLI(this.curUL.querySelectorAll("."+PF.listItem),n,t))||(n&&(n.classList.remove(PF.focused),this.showCheckBox||n.classList.remove(PF.selected)),i.classList.contains(PF.hasChild)||this.showCheckBox?i.classList.add(PF.focused):this.setSelectLI(i,e))):(n=this.curUL.querySelector("."+PF.selected),i=mF.getSiblingLI(this.curUL.querySelectorAll("."+PF.listItem),n,t),this.setSelectLI(i,e)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i}},{key:"arrowKeyHandler",value:function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var n,r,a=this.onArrowKeyDown(e,t),o=this.element.getBoundingClientRect().top,s=this.element.getBoundingClientRect().height,l=this.curUL.querySelector("."+PF.listItem).getBoundingClientRect();if(this.fields.groupBy&&(r=this.curUL.querySelector("."+PF.groupListItem).getBoundingClientRect()),a){var c=a.getBoundingClientRect().top,u=a.getBoundingClientRect().height;if(t)(n=this.isWindow?c:c-o)<0&&(this.isWindow?window.scroll(0,pageYOffset+n):this.element.scrollTop=this.element.scrollTop+n);else{var h=this.isWindow?window.innerHeight:s;(n=this.isWindow?c+u:c-o+u)>h&&(this.isWindow?window.scroll(0,pageYOffset+(n-h)):this.element.scrollTop=this.element.scrollTop+(n-h))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},n=this.virtualizationModule.listItemHeight,this.isWindow?window.scroll(0,pageYOffset-n):this.element.scrollTop=this.element.scrollTop-n;else if(t)if(this.showHeader&&this.headerEle){var d=r?r.top:l.top,p=this.headerEle.getBoundingClientRect();n=p.top<0?p.height-d:0,this.isWindow?window.scroll(0,pageYOffset-n):this.element.scrollTop=0}else this.fields.groupBy&&(n=this.isWindow?r.top<0?r.top:0:o-l.top+r.height,this.isWindow?window.scroll(0,pageYOffset+n):this.element.scrollTop=this.element.scrollTop-n)}}},{key:"enterKeyHandler",value:function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!RD(this.curUL.querySelector("."+PF.hasChild)),i=this.curUL.querySelector("."+PF.focused);t&&i&&(i.classList.remove(PF.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}}},{key:"spaceKeyHandler",value:function(e){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+PF.focused);if(!RD(t)&&RD(t.querySelector("."+PF.checked))){var i={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};this.checkInternally(i,i.item.querySelector("."+PF.checkboxWrapper))}else this.uncheckItem(t)}}},{key:"keyActionHandler",value:function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(e)}}},{key:"swipeActionHandler",value:function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())}},{key:"focusout",value:function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+PF.focused),t=this.curUL.querySelector("[aria-selected = true]");e&&(e.classList.remove(PF.focused),t&&!this.showCheckBox&&t.classList.add(PF.selected))}}},{key:"wireEvents",value:function(){OR.add(this.element,"keydown",this.keyActionHandler,this),OR.add(this.element,"click",this.clickHandler,this),this.enableVirtualization||(OR.add(this.element,"mouseover",this.hoverHandler,this),OR.add(this.element,"mouseout",this.leaveHandler,this)),OR.add(this.element,"focusout",this.focusout,this),this.touchModule=new FM(this.element,{swipe:this.swipeActionHandler.bind(this)})}},{key:"unWireEvents",value:function(){OR.remove(this.element,"click",this.clickHandler),this.enableVirtualization||(OR.remove(this.element,"mouseover",this.hoverHandler),OR.remove(this.element,"mouseout",this.leaveHandler)),OR.remove(this.element,"mouseover",this.hoverHandler),OR.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()}},{key:"removeFocus",value:function(){var e,t=_createForOfIteratorHelper(this.element.querySelectorAll("."+PF.focused));try{for(t.s();!(e=t.n()).done;){e.value.classList.remove(PF.focused)}}catch(i){t.e(i)}finally{t.f()}}},{key:"removeHover",value:function(){var e=this.element.querySelector("."+PF.hover);e&&e.classList.remove(PF.hover)}},{key:"removeSelect",value:function(e){if(RD(e)){var t,i=_createForOfIteratorHelper(this.element.querySelectorAll("."+PF.selected));try{for(i.s();!(t=i.n()).done;){var n=t.value;this.showCheckBox&&n.querySelector("."+PF.checked)||(n.setAttribute("aria-selected","false"),n.classList.remove(PF.selected))}}catch(r){i.e(r)}finally{i.f()}}else e.classList.remove(PF.selected),e.setAttribute("aria-selected","false")}},{key:"isValidLI",value:function(e){return e&&e.classList.contains(PF.listItem)&&!e.classList.contains(PF.groupListItem)&&!e.classList.contains(PF.disable)}},{key:"setCheckboxLI",value:function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+PF.focused)&&this.curUL.querySelector("."+PF.focused).classList.remove(PF.focused),e.classList.add(PF.focused);var i=e.querySelector("."+PF.checkboxWrapper),n=i.querySelector("."+PF.checkboxIcon+"."+PF.icon);this.removeHover(),n.classList.contains(PF.checked)?(n.classList.remove(PF.checked),e.classList.remove(PF.selected),e.setAttribute("aria-selected","false")):(n.classList.add(PF.checked),e.classList.add(PF.selected),e.setAttribute("aria-selected","true")),i.setAttribute("aria-checked",n.classList.contains(PF.checked)?"true":"false");var r=this.selectEventData(e,t);ID(r,{isChecked:n.classList.contains(PF.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",r),this.setSelectedItemData(e),this.renderSubList(e)}}},{key:"selectEventData",value:function(e,t){var i=this.getItemData(e),n=xF(i,this.listBaseOption.fields),r={};return ID(r,!RD(i)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:n&&n[this.listBaseOption.fields.text],data:i}),t&&ID(r,{isInteracted:!0,event:t,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),r}},{key:"setSelectedItemData",value:function(e){var t=this.getItemData(e),i=xF(t,this.listBaseOption.fields);this.selectedItems=RD(t)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?{item:e,text:i&&i[this.listBaseOption.fields.text],data:t}:{item:e,text:e&&e.innerText.trim(),data:this.dataSource}}},{key:"setSelectLI",value:function(e,t){if(this.isValidLI(e)&&!e.classList.contains(PF.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(PF.selected),e.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var i=this.selectEventData(e,t);this.trigger("select",i),this.selectedLI=e,this.renderSubList(e)}}},{key:"setHoverLI",value:function(e){if(this.isValidLI(e)&&!e.classList.contains(PF.hover)&&this.enable){var t=this.element.querySelectorAll("."+PF.hover);t&&t.length&&_P(t,PF.hover),e.classList.contains(PF.selected)&&!this.showCheckBox||e.classList.add(PF.hover)}}},{key:"getSubDS",value:function(){var e=this.curDSLevel;if(e.length){var t,i=this.localData,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a={};a[this.fields.id]=r,this.curDSJSON=this.findItemFromDS(i,a);var o=xF(this.curDSJSON,this.listBaseOption.fields);i=this.curDSJSON?o[this.fields.child]:i}}catch(s){n.e(s)}finally{n.f()}return i}return this.localData}},{key:"getItemData",value:function(e){var t,i=this.dataSource instanceof TF?this.localData:this.dataSource,n=this.getElementUID(e);return t=RD(this.element.querySelector("."+PF.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,n)}},{key:"findItemFromDS",value:function(e,t,i){var n,r=this;return e&&e.length&&t?e.some((function(a){var o=xF(a,r.listBaseOption.fields);if(!t[r.fields.id]&&!t[r.fields.text]||t[r.fields.id]&&(!RD(o[r.fields.id])&&o[r.fields.id].toString())!==t[r.fields.id].toString()||t[r.fields.text]&&o[r.fields.text]!==t[r.fields.text])if("object"!=typeof a&&-1!==e.indexOf(a))n=i?e:a;else if(!RD(t[r.fields.id])&&RD(o[r.fields.id])){var s=r.element.querySelector('[data-uid="'+t[r.fields.id]+'"]');s&&s.innerText.trim()===o[r.fields.text]&&(n=a)}else o.hasOwnProperty(r.fields.child)&&o[r.fields.child].length&&(n=r.findItemFromDS(o[r.fields.child],t,i));else n=i?e:a;return!!n})):n=e,n}},{key:"getQuery",value:function(){var e=[],t=this.query?this.query:new gF;if(!this.query){for(var i=0,n=Object.keys(this.fields.properties);i<n.length;i++){var r=n[i];"tableName"!==r&&this.fields[r]&&this.fields[r]!==mF.defaultMappedFields[r]&&-1===e.indexOf(this.fields[r])&&e.push(this.fields[r])}t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t}},{key:"setViewDataSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localData;this.curViewDS=e&&this.fields.groupBy?mF.groupDataSource("None"!==this.sortOrder?mF.getDataSource(e,mF.addSorting(this.sortOrder,this.fields.sortBy)):e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?mF.getDataSource(e,mF.addSorting(this.sortOrder,this.fields.sortBy)):e}},{key:"isInAnimation",value:function(){return this.curUL.classList.contains(".e-animate")}},{key:"setLocalData",value:function(){var e=this;this.trigger("actionBegin");var t=this;if(this.dataSource instanceof TF)this.dataSource.executeQuery(this.getQuery()).then((function(i){e.isDestroyed||(e.localData=i.result,t.removeElement(t.contentContainer),e.renderList(),e.trigger("actionComplete",i))})).catch((function(t){e.isDestroyed||e.trigger("actionFailure",t)}));else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&(IP(i),this.setProperties({dataSource:mF.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}}},{key:"reRender",value:function(){this.resetBlazorTemplates(),this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()}},{key:"resetCurrentList",value:function(){this.resetBlazorTemplates(),this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)}},{key:"setAttributes",value:function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("aria-selected","false"),i.setAttribute("tabindex","-1"))}}},{key:"createList",value:function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=mF.createList(this.createElement,this.curViewDS,this.listBaseOption),this.liCollection=this.curUL.querySelectorAll("."+PF.listItem),this.setAttributes(this.liCollection),this.updateBlazorTemplates(!0)}},{key:"resetBlazorTemplates",value:function(){var e=$R;this.template&&(e[this.LISTVIEW_TEMPLATE_ID]=[],iP(this.LISTVIEW_TEMPLATE_ID)),this.groupTemplate&&(e[this.LISTVIEW_GROUPTEMPLATE_ID]=[],iP(this.LISTVIEW_GROUPTEMPLATE_ID)),this.headerTemplate&&iP(this.LISTVIEW_HEADERTEMPLATE_ID)}},{key:"updateBlazorTemplates",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"exceptionEvent",value:function(e){this.trigger("actionFailure",e)}},{key:"UpdateCurrentUL",value:function(){this.ulElement=this.curUL=this.element.querySelector("."+PF.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+PF.listItem))}},{key:"removeActiveClass",value:function(){var e=this;setTimeout((function(){for(var t=e.element.querySelector("."+PF.virtualElementContainer),i=0;i<t.childElementCount;i++){var n=void 0,r=void 0,a=t.children[i];if(e.showCheckBox)if(e.previousSelectedItems.length>0)for(var o=0;o<e.previousSelectedItems.length;o++)a.getAttribute("data-uid")===e.previousSelectedItems[o]?(a.classList.add("e-active"),a.setAttribute("aria-selected","true"),a.querySelector(".e-frame.e-icons")&&a.querySelector(".e-frame.e-icons").classList.add("e-check"),n=i):n!==i&&(a.classList.remove("e-active"),a.removeAttribute("aria-selected"),a.querySelector(".e-check")&&a.querySelector(".e-check").classList.remove("e-check"));else a.classList.remove("e-active"),a.removeAttribute("aria-selected"),a.querySelector(".e-check")&&a.querySelector(".e-check").classList.remove("e-check");else a.getAttribute("data-uid")===e.previousSelectedItems[0]?(a.classList.add("e-active"),a.setAttribute("aria-selected","true")):(a.classList.remove("e-active"),a.removeAttribute("aria-selected"));if(e.hiddenItems.length>0)for(var s=0;s<e.hiddenItems.length;s++)a.getAttribute("data-uid")===e.previousSelectedItems[s]?(a.style.display="none",r=i):r!==i&&(a.style.display=null);if(e.enabledItems.length>0)for(var l=0;l<e.enabledItems.length;l++)a.getAttribute("data-uid")===e.enabledItems[l]&&a.classList.contains("e-disabled")&&a.classList.remove("e-disabled");if(e.disabledItems.length>0)for(var c=0;c<e.disabledItems.length;c++)a.getAttribute("data-uid")===e.disabledItems[c]&&(a.classList.contains("e-disabled")||a.classList.add("e-disabled"))}}),200)}},{key:"renderingNestedList",value:function(){var e=MP(this.liElement.parentNode,"."+PF.parentItem),t=document.getElementById(this.element.id),i=t.getElementsByTagName("UL")[t.getElementsByTagName("UL").length-1];this.switchView(e,i),this.liElement=null}},{key:"renderSubList",value:function(e){this.liElement=e;var t=e.getAttribute("data-uid");if(e.classList.contains(PF.hasChild)&&t){var i=MP(e.parentNode,"."+PF.parentItem),n=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!n){var r=(n=mF.createListFromJson(this.createElement,this.curViewDS,this.listBaseOption,this.curDSLevel.length)).querySelectorAll("."+PF.listItem);this.setAttributes(r),n.setAttribute("pID",t),n.style.display="none",this.renderIntoDom(n),this.updateBlazorTemplates(!0)}if(this.switchView(i,n),this.liCollection=this.curUL.querySelectorAll("."+PF.listItem),this.selectedItems){var a=xF(this.selectedItems.data,this.listBaseOption.fields);this.header(a[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}}},{key:"renderIntoDom",value:function(e){this.contentContainer.appendChild(e)}},{key:"renderList",value:function(e){this.setViewDataSource(e),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:PF.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement))}},{key:"getElementUID",value:function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t}},{key:"render",value:function(){this.element.classList.add(PF.root),DP(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=sM(this.element,{selector:"."+PF.listItem}),this.renderComplete()}},{key:"initBlazor",value:function(e){null===e&&(e=!1),this.setLocalData(),this.setViewDataSource(this.localData),this.contentContainer=this.element.querySelector("."+PF.content),e&&this.wireEvents()}},{key:"destroy",value:function(){this.resetBlazorTemplates(),this.unWireEvents();var e=[PF.root,PF.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter((function(e){return e})));_P([this.element],e),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"back",value:function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var n=xF(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();var r=this.element.querySelector("[data-uid='"+e+"']");r.classList.remove(PF.disable),r.classList.add(PF.focused),this.showCheckBox&&r.querySelector("."+PF.checkboxIcon).classList.contains(PF.checked)?r.setAttribute("aria-selected","true"):(r.classList.remove(PF.selected),r.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+PF.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:HM.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length,"header")}}},{key:"selectItem",value:function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):RD(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))}},{key:"getLiFromObjOrElement",value:function(e){var t,i=this.dataSource instanceof TF?this.localData:this.dataSource;if(!RD(e))if("string"==typeof i[0]||"number"==typeof i[0])if(e instanceof Element){for(var n=e.getAttribute("data-uid").toString(),r=0;r<this.liCollection.length;r++)if(this.liCollection[r].getAttribute("data-uid").toString()===n){t=this.liCollection[r];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+PF.listItem),(function(i){return i.innerText.trim()===e.toString()&&(t=i,!0)}));else{var a=this.getItemData(e),o=xF(a,this.listBaseOption.fields);if(a&&(t=this.element.querySelector('[data-uid="'+o[this.fields.id]+'"]'),!this.enableVirtualization&&RD(t)))for(var s=this.element.querySelectorAll("."+PF.listItem),l=0;l<s.length;l++)s[l].innerText.trim()===o[this.fields.text]&&(t=s[l])}return t}},{key:"selectMultipleItems",value:function(e){if(!RD(e))for(var t=0;t<e.length;t++)RD(e[t])||this.selectItem(e[t])}},{key:"getParentId",value:function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e}},{key:"getSelectedItems",value:function(){var e,t=!1;this.selectedId=[];var i=this.dataSource instanceof TF?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){var n=this.curUL.getElementsByClassName(PF.selected),r=[],a=[];this.selectedId=[];for(var o=[],s=0;s<n.length;s++)if("string"==typeof i[0]||"number"==typeof i[0])r.push(n[s].innerText.trim());else{var l=this.getItemData(n[s]),c=xF(l,this.listBaseOption.fields);this.isNestedList?o.push({data:l,parentId:this.getParentId()}):a.push(l),c?(r.push(c[this.listBaseOption.fields.text]),this.selectedId.push(c[this.listBaseOption.fields.id])):(r.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||t||(e={item:n,data:i,text:r},t=!0),this.isNestedList&&!t?(e={item:n,data:o,text:r},t=!0):t||(e={item:n,data:a,text:r},t=!0)}else if(!t){var u=this.element.getElementsByClassName(PF.selected)[0],h=xF(this.getItemData(u),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||t?t||(RD(h)||RD(u)?(e=void 0,t=!0):(this.selectedId.push(h[this.listBaseOption.fields.id]),e={text:h[this.listBaseOption.fields.text],item:u,data:this.getItemData(u)},t=!0)):(e=RD(u)?void 0:{item:u,data:i,text:u.innerText.trim()},t=!0)}return e}},{key:"blazorGetSelectedItems",value:function(e){var t={data:[],index:[],parentId:[],text:[]};if(!RD(e)){if(!RD(e.data))if(this.showCheckBox&&this.isNestedList){for(var i=0;i<e.data.length;i++)t.data.push(e.data[i].data);RD(e.data[0])||RD(e.data[0].parentId)||(t.parentId=e.data[0].parentId)}else t.data=this.convertItemsToArray(e.data);RD(e.text)||(t.text=this.convertItemsToArray(e.text)),RD(e.index)||(t.index=this.convertItemsToArray(e.index))}return t}},{key:"convertItemsToArray",value:function(e){return Array.isArray(e)?_toConsumableArray2(e):[e]}},{key:"findItem",value:function(e){return this.getItemData(e)}},{key:"enableItem",value:function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)}},{key:"disableItem",value:function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)}},{key:"setItemState",value:function(e,t){var i=this.getItemData(e),n=xF(i,this.listBaseOption.fields);if(i){var r=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');t?(r&&r.classList.remove(PF.disable),delete i[this.fields.enabled]):t||(r&&r.classList.add(PF.disable),i[this.fields.enabled]=!1)}}},{key:"showItem",value:function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)}},{key:"hideItem",value:function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)}},{key:"showHideItem",value:function(e,t,i){var n=this.getItemData(e),r=xF(n,this.listBaseOption.fields);if(n){var a=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]');a&&(a.style.display=i),t?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}}},{key:"addItem",value:function(e,t){this.addItemInternally(e,t,this.dataSource instanceof TF?this.localData:this.dataSource)}},{key:"addItemInternally",value:function(e,t,i){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,i);else{var n,r=this.findItemFromDS(i,t);if(r&&((n=xF(r,this.listBaseOption.fields)[this.fields.child])||(n=[]),n=n.concat(e)),r instanceof Array){for(var a=0;a<e.length;a++){i.push(e[a]),this.setViewDataSource(i);var o=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&o?this.addItemIntoDom(e[a],o,this.curViewDS):this.reRender()}this.curUL&&this.updateBlazorTemplates(!0),this.liCollection=this.curUL.querySelectorAll("."+PF.listItem)}else r&&(r[this.fields.child]=n,this.addItemInNestedList(r,e))}}},{key:"addItemInNestedList",value:function(e,t){var i=e[this.fields.id],n=e[this.fields.child],r=this.element.querySelector("[pid='"+i+"']"),a=this.element.querySelector("[data-uid='"+i+"']"),o=r||(a?MP(a,"ul"):null),s=r?n:[e],l=!1;if(a&&!a.classList.contains(PF.hasChild)){var c=mF.createListItemFromJson(this.createElement,s,this.listBaseOption);this.setAttributes(c),o.insertBefore(c[0],a),xP(a),l=!0}if(r&&t){for(var u=0;u<t.length;u++)s.push(t[u]),this.addItemIntoDom(t[u],o,s);l=!0}l&&this.updateBlazorTemplates(!0)}},{key:"addItemIntoDom",value:function(e,t,i){var n=i.indexOf(e);this.addListItem(e,n,t,i);var r=i[n-1];r&&r.isHeader&&1===r.items.length&&this.addListItem(r,n-1,t,i)}},{key:"addListItem",value:function(e,t,i,n){var r=this.getLiFromObjOrElement(n[t+1])||this.getLiFromObjOrElement(n[t+2])||null,a=mF.createListItemFromJson(this.createElement,[e],this.listBaseOption);this.setAttributes(a),i.insertBefore(a[0],r)}},{key:"removeItem",value:function(e){var t=this.dataSource instanceof TF?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):(this.removeItemFromList(e,t),this.updateBlazorTemplates(!0))}},{key:"removeItemFromList",value:function(e,t){var i,n=this,r=this.curViewDS,a=e instanceof Element?this.getElementUID(e):e;if(i=this.findItemFromDS(t,a,!0)){var o;o=this.findItemFromDS(i,a);var s,l=r.indexOf(o),c=this.getLiFromObjOrElement(e);this.validateNestedView(c),this.fields.groupBy&&this.curViewDS[l-1]&&r[l-1].isHeader&&1===r[l-1].items.length&&c&&c.previousElementSibling.classList.contains(PF.groupListItem)&&(RD(c.nextElementSibling)||c.nextElementSibling&&c.nextElementSibling.classList.contains(PF.groupListItem))&&(s=c.previousElementSibling),c&&xP(c),s&&xP(s);var u=i.length-1<=0?this.findParent(this.localData,this.fields.id,(function(e){return e===o[n.fields.id]}),null):null,h=i.indexOf(o);if(i.splice(h,1),this.setViewDataSource(t),u&&u.parent&&Array.isArray(u.parent[this.fields.child])&&u.parent[this.fields.child].length<=0){var d=this.getLiFromObjOrElement(u.parent);if(d){var p=mF.createListItemFromJson(this.createElement,[u.parent],this.listBaseOption);this.setAttributes(p),d.parentElement.insertBefore(p[0],d),d.parentElement.removeChild(d)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+PF.listItem))}}},{key:"validateNestedView",value:function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some((function(e){return e.toString().toLowerCase()===t}));)this.back()}},{key:"removeMultipleItems",value:function(e){if(e.length){for(var t=0;t<e.length;t++)this.removeItem(e[t]);this.updateBlazorTemplates(!0)}}},{key:"findParent",value:function(e,t,i,n){if(e.hasOwnProperty(t)&&!0===i(e[t]))return DD({},e);for(var r=0;r<Object.keys(e).length;r++)if(e[Object.keys(e)[r]]&&"object"==typeof e[Object.keys(e)[r]]){var a=this.findParent(e[Object.keys(e)[r]],t,i,e);if(null!=a)return a.parent||(a.parent=n),a}return null}},{key:"getModuleName",value:function(){return"listview"}},{key:"requiredModules",value:function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e}},{key:"getPersistData",value:function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])}}]),i}(kM);IF([QP("")],LF.prototype,"cssClass",void 0),IF([QP(!1)],LF.prototype,"enableVirtualization",void 0),IF([QP({})],LF.prototype,"htmlAttributes",void 0),IF([QP(!0)],LF.prototype,"enable",void 0),IF([QP([])],LF.prototype,"dataSource",void 0),IF([QP()],LF.prototype,"query",void 0),IF([ZP(mF.defaultMappedFields,MF)],LF.prototype,"fields",void 0),IF([QP({effect:"SlideLeft",duration:400,easing:"ease"})],LF.prototype,"animation",void 0),IF([QP("None")],LF.prototype,"sortOrder",void 0),IF([QP(!1)],LF.prototype,"showIcon",void 0),IF([QP(!1)],LF.prototype,"showCheckBox",void 0),IF([QP("Left")],LF.prototype,"checkBoxPosition",void 0),IF([QP("")],LF.prototype,"headerTitle",void 0),IF([QP(!1)],LF.prototype,"showHeader",void 0),IF([QP(!1)],LF.prototype,"enableHtmlSanitizer",void 0),IF([QP("")],LF.prototype,"height",void 0),IF([QP("")],LF.prototype,"width",void 0),IF([QP(null)],LF.prototype,"template",void 0),IF([QP(null)],LF.prototype,"headerTemplate",void 0),IF([QP(null)],LF.prototype,"groupTemplate",void 0),IF([eM()],LF.prototype,"select",void 0),IF([eM()],LF.prototype,"actionBegin",void 0),IF([eM()],LF.prototype,"actionComplete",void 0),IF([eM()],LF.prototype,"actionFailure",void 0),LF=IF([tM],LF);var NF,FF,BF,VF,jF,HF=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},UF=NF=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n,e)).getHelper=function(e){var t,i=r.getSortableElement(e.sender.target);return!!r.isValidTarget(i,_assertThisInitialized(r))&&(r.helper?t=r.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),wP([t],["e-sortableclone"]),document.body.appendChild(t),t)},r.onDrag=function(e){r.trigger("drag",{event:e.event,element:r.element,target:e.target});var t,i=r.getSortableInstance(e.target),n=r.getSortableElement(e.target,i);if((r.isValidTarget(n,i)||e.target.className.indexOf("e-list-group-item")>-1)&&r.curTarget!==n&&(!i.placeHolderElement||i.placeHolderElement!==e.target)){e.target.className.indexOf("e-list-group-item")>-1&&(n=e.target),r.curTarget=n;var a=r.getIndex(i.placeHolderElement,i);a=RD(a)?r.getIndex(r.target):r.getIndex(n,i)<a||!a?a:a-1,i.placeHolderElement=r.getPlaceHolder(n,i);var o=r.getIndex(n,i),s=i.element!==r.element?o:a<o?o+1:o;i.placeHolderElement?(e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[o]):i.element!==r.element&&s===i.element.childElementCount-1?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[s]),r.refreshDisabled(a,o,i)):(r.updateItemClass(i),i.element.insertBefore(r.target,i.element.children[s]),r.refreshDisabled(a,o,i),r.curTarget=r.target,r.trigger("drop",{droppedElement:r.target,element:i.element,previousIndex:a,currentIndex:o,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:r.scope}))}(i=r.getSortableInstance(r.curTarget),RD(n)&&e.target!==i.placeHolderElement)?r.isPlaceHolderPresent(i)&&r.removePlaceHolder(i):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach((function(e){(t=r.getSortableInstance(e)).element&&t!==i&&r.removePlaceHolder(t)}))},r.onDragStart=function(e){r.target=r.getSortableElement(e.target);var t=!1;r.target.classList.add("e-grabbed"),r.curTarget=r.target,e.helper=document.getElementsByClassName("e-sortableclone")[0],r.trigger("beforeDragStart",{cancel:!1,element:r.element,target:r.target},(function(i){i.cancel&&(t=i.cancel,r.onDragStop(e))})),t||r.trigger("dragStart",BD?{event:e.event,element:r.element,target:r.target,bindEvents:e.bindEvents,dragElement:e.dragElement}:{event:e.event,element:r.element,target:r.target})},r.onDragStop=function(e){var t,i,n,a=r.getSortableInstance(r.curTarget);if(t=r.getIndex(r.target),r.isPlaceHolderPresent(a)){var o=r.getIndex(a.placeHolderElement,a);r.trigger("beforeDrop",{previousIndex:t,currentIndex:o,target:e.target,droppedElement:r.target,helper:e.helper,cancel:!1,handled:!1},(function(i){if(!i.cancel){if(n=i.handled,r.updateItemClass(a),i.handled){var o=r.target.cloneNode(!0);r.target.classList.remove("e-grabbed"),r.target=o}a.element.insertBefore(r.target,a.placeHolderElement);var s=r.getIndex(r.target,a);t=_assertThisInitialized(r)===a&&t-s>1?t-1:t,r.trigger("drop",{event:e.event,element:a.element,previousIndex:t,currentIndex:s,target:e.target,helper:e.helper,droppedElement:r.target,scopeName:r.scope,handled:n})}IP(a.placeHolderElement)}))}a=r.getSortableInstance(e.target),i=a.element.childElementCount,t=r.getIndex(r.target),a.element===e.target&&r.trigger("beforeDrop",{previousIndex:t,currentIndex:i,target:e.target,droppedElement:r.target,helper:e.helper,cancel:!1},(function(n){n.cancel||(r.updateItemClass(a),a.element.appendChild(r.target),r.trigger("drop",{event:e.event,element:a.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:r.target,scopeName:r.scope}))})),r.target.classList.remove("e-grabbed"),r.target=null,r.curTarget=null,IP(e.helper),jP(r.element,AM).intDestroy(e.event)},r.bind(),r}return _createClass(i,[{key:"bind",value:function(){this.element.id||(this.element.id=MD("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()}},{key:"initializeDraggable",value:function(){new AM(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo})}},{key:"getPlaceHolder",value:function(e,t){return t.placeHolder?(this.isPlaceHolderPresent(t)&&IP(t.placeHolderElement),t.placeHolderElement=t.placeHolder({element:t.element,grabbedElement:this.target,target:e}),t.placeHolderElement.classList.add("e-sortable-placeholder"),t.placeHolderElement):null}},{key:"isValidTarget",value:function(e,t){return e&&LD(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")}},{key:"removePlaceHolder",value:function(e){IP(e.placeHolderElement),e.placeHolderElement=null}},{key:"updateItemClass",value:function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))}},{key:"getSortableInstance",value:function(e){if(e=MP(e,".e-"+this.getModuleName())){var t=jP(e,NF);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this}},{key:"refreshDisabled",value:function(e,t,i){if(i===this)for(var n,r,a=e<t,o=a?e:t,s=a?t:e;o<=s;)(n=this.element.children[o]).classList.contains("e-disabled")?(r=this.getIndex(n),this.element.insertBefore(n,this.element.children[a?r+2:r-1]),o=a?r+2:r+1):o++}},{key:"getIndex",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return[].slice.call(i.element.children).forEach((function(i,n){i===e&&(t=n)})),t}},{key:"getSortableElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return MP(e,"."+t.itemClass)}},{key:"queryPositionInfo",value:function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e}},{key:"isPlaceHolderPresent",value:function(e){return e.placeHolderElement&&!!MP(e.placeHolderElement,"#"+e.element.id)}},{key:"moveTo",value:function(e,t,i){!function(e,t,i,n){var r=[];if(t||(t=e),i&&i.length?i.forEach((function(t){r.push(e.children[t])})):r=[].slice.call(e.children),RD(n))r.forEach((function(e){t.appendChild(e)}));else{var a=t.children[n];r.forEach((function(e){t.insertBefore(e,a)}))}}(this.element,e,t,i)}},{key:"destroy",value:function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),jP(this.element,AM).destroy(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"getModuleName",value:function(){return"sortable"}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"itemClass":[].slice.call(this.element.children).forEach((function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)}))}}}}]),i}(VP);HF([QP(!1)],UF.prototype,"enableAnimation",void 0),HF([QP(null)],UF.prototype,"itemClass",void 0),HF([QP(null)],UF.prototype,"scope",void 0),HF([QP()],UF.prototype,"helper",void 0),HF([QP()],UF.prototype,"placeHolder",void 0),HF([eM()],UF.prototype,"drag",void 0),HF([eM()],UF.prototype,"beforeDragStart",void 0),HF([eM()],UF.prototype,"dragStart",void 0),HF([eM()],UF.prototype,"beforeDrop",void 0),HF([eM()],UF.prototype,"drop",void 0),UF=NF=HF([tM],UF);var qF,WF,zF=!1;function GF(e,t,i,n,r){return BF=i+t==="topright"?void 0:r,BF=r,zF=!!n,e?(t||(t="left"),i||(i="top"),jF=e.ownerDocument,VF=e,function(e,t,i){switch(FF=VF.getBoundingClientRect(),t+e){case"topcenter":YF(iB(),i),KF($F(),i);break;case"topright":YF(tB(),i),KF($F(),i);break;case"centercenter":YF(iB(),i),KF(ZF(),i);break;case"centerright":YF(tB(),i),KF(ZF(),i);break;case"centerleft":YF(eB(),i),KF(ZF(),i);break;case"bottomcenter":YF(iB(),i),KF(QF(),i);break;case"bottomright":YF(tB(),i),KF(QF(),i);break;case"bottomleft":YF(eB(),i),KF(QF(),i);break;default:case"topleft":YF(eB(),i),KF($F(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function YF(e,t){t.left=e}function KF(e,t){t.top=e}function XF(){return jF.documentElement.scrollTop||jF.body.scrollTop}function JF(){return jF.documentElement.scrollLeft||jF.body.scrollLeft}function QF(){return zF?FF.bottom:FF.bottom+XF()}function ZF(){return $F()+FF.height/2}function $F(){return zF?FF.top:FF.top+XF()}function eB(){return FF.left+JF()}function tB(){return FF.right+JF()-(BF?BF.width:0)}function iB(){return eB()+FF.width/2}function nB(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function rB(e,t){var i=!1,n=!1;return e-vB()<hB()&&(i=!0),t>dB()&&(n=!0),{leftSide:i,rightSide:n}}function aB(e,t){var i=!1,n=!1;return e-fB()<uB()&&(i=!0),t>pB()&&(n=!0),{topSide:i,bottomSide:n}}function oB(){return WF.getBoundingClientRect().width}function sB(){return WF.getBoundingClientRect().height}function lB(){return WF.getBoundingClientRect().left}function cB(){return WF.getBoundingClientRect().top}function uB(){return WF?cB():0}function hB(){return WF?lB():0}function dB(){return WF?vB()+lB()+oB():vB()+gB()}function pB(){return WF?fB()+cB()+sB():fB()+mB()}function fB(){return qF.documentElement.scrollTop||qF.body.scrollTop}function vB(){return qF.documentElement.scrollLeft||qF.body.scrollLeft}function mB(){return window.innerHeight}function gB(){var e=window.innerWidth;return e-(e-(RD(document.documentElement)?0:document.documentElement.offsetWidth))}var yB=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},bB=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM);return yB([QP("left")],e.prototype,"X",void 0),yB([QP("top")],e.prototype,"Y",void 0),e}(),kB=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,n,e)}return _createClass(i,[{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":LP(this.element,{width:FD(e.width)});break;case"height":LP(this.element,{height:FD(e.height)});break;case"zIndex":LP(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var r=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+r).toString()+"px";break;case"offsetY":var a=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+a).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}}},{key:"getModuleName",value:function(){return"popup"}},{key:"resolveCollision",value:function(){this.checkCollision()}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"destroy",value:function(){this.element.classList.remove("e-popup","e-rtl","e-popup-open","e-popup-close"),this.unwireEvents(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"render",value:function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=FD(this.width)),"auto"!==this.height&&(e.height=FD(this.height)),LP(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()}},{key:"wireEvents",value:function(){AR.isDevice&&OR.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()}},{key:"wireScrollEvents",value:function(){if(this.getRelateToElement()){var e,t=_createForOfIteratorHelper(this.getScrollableParent(this.getRelateToElement()));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.add(i,"scroll",this.scrollRefresh,this)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"unwireEvents",value:function(){AR.isDevice&&OR.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()}},{key:"unwireScrollEvents",value:function(){if(this.getRelateToElement()){var e,t=_createForOfIteratorHelper(this.getScrollableParent(this.getRelateToElement()));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.remove(i,"scroll",this.scrollRefresh)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"getRelateToElement",value:function(){var e=""===this.relateTo||RD(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo}},{key:"scrollRefresh",value:function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}}},{key:"isElementOnViewport",value:function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0}},{key:"isElementVisible",value:function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(RD(this.checkGetBoundingClientRect(t))){var n=window,r={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},a=GF(e),o={top:a.top,left:a.left,right:a.left+i.width,bottom:a.top+i.height},s={top:r.bottom-o.top,left:r.right-o.left,bottom:o.bottom-r.top,right:o.right-r.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)}},{key:"preRender",value:function(){}},{key:"setEnableRtl",value:function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},{key:"setContent",value:function(){RD(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))}},{key:"orientationOnChange",value:function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)}},{key:"refreshPosition",value:function(e,t){RD(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()}},{key:"reposition",value:function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n,r=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=r,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){var a=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=a}else e={left:0,top:0};RD(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")}},{key:"checkGetBoundingClientRect",value:function(e){try{return e.getBoundingClientRect()}catch(t){return null}}},{key:"getAnchorPosition",value:function(e,t,i,n,r){var a=this.checkGetBoundingClientRect(t),o=this.checkGetBoundingClientRect(e);if(RD(a)||RD(o))return null;var s=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=GF(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(t=t.parentElement),l=function(e,t){var i=!1,n={left:0,top:0},r=e;if(!e||!t)return n;for(RD(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=r;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(s,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-a.width/2:l.left+="container"===this.targetType?o.width/2-a.width/2:o.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.left+=window.innerWidth-a.width:l.left+="container"===this.targetType?o.width-a.width:o.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-a.height/2:l.top+="container"===this.targetType?o.height/2-a.height/2:o.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?l.top+=window.innerHeight-a.height:l.top+="container"===this.targetType?o.height-a.height:o.height}return l.left+=n,l.top+=r,l}},{key:"callFlip",value:function(e){var t=this.getRelateToElement();!function(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{X:!0,Y:!0},l=arguments.length>8?arguments[8]:void 0;if(t&&e&&r&&a&&(s.X||s.Y)){var c={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null},h=e.getBoundingClientRect(),d={posX:r,posY:a,offsetX:i,offsetY:n,position:{left:0,top:0}};WF=o,qF=t.ownerDocument,function(e,t,i,n,r){i.position=GF(e,i.posX,i.posY,n,r),t.TL=GF(e,"left","top",n,r),t.TR=GF(e,"right","top",n,r),t.BR=GF(e,"left","bottom",n,r),t.BL=GF(e,"right","bottom",n,r)}(t,c,d,l,h),nB(u,d,h),s.X&&function e(t,i,n,r,a,o){var s=rB(i.TL.left,i.TR.left);n.TL.left-vB()<=hB()&&(s.leftSide=!1),n.TR.left>=dB()&&(s.rightSide=!1),(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&(r.posX="right"===r.posX?"left":"right",r.offsetX=r.offsetX+a.width,r.offsetX=-1*r.offsetX,r.position=GF(t,r.posX,r.posY,!1),nB(i,r,a),o&&e(t,i,n,r,a,!1))}(t,u,c,d,h,!0),s.Y&&c.TL.top>-1&&function e(t,i,n,r,a,o){var s=aB(i.TL.top,i.BL.top);n.TL.top-fB()<=uB()&&(s.topSide=!1),n.BL.top>=pB()&&(s.bottomSide=!1),(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&(r.posY="top"===r.posY?"bottom":"top",r.offsetY=r.offsetY+a.height,r.offsetY=-1*r.offsetY,r.position=GF(t,r.posX,r.posY,!1,a),nB(i,r,a),o&&e(t,i,n,r,a,!1))}(t,u,c,d,h,!0),function(e,t,i){var n=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var a=GF(e.offsetParent,"left","top",!1,i);n=a.left,r=a.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,d,h)}}(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)}},{key:"callFit",value:function(e){if(0!==function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=GF(e,"left","top");i&&(r.left=i),n&&(r.top=n);var a=[];WF=t,qF=e.ownerDocument;var o=e.getBoundingClientRect(),s=r.left,l=r.left+o.width,c=aB(r.top,r.top+o.height),u=rB(s,l);return c.topSide&&a.push("top"),u.rightSide&&a.push("right"),u.leftSide&&a.push("left"),c.bottomSide&&a.push("bottom"),a}(this.element,this.viewPortElement).length)if(RD(this.viewPortElement)){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{X:!1,Y:!1},n=arguments.length>3?arguments[3]:void 0;if(!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(WF=t,qF=e.ownerDocument,n||(n=GF(e,"left","top")),i.X){var a=WF?oB():gB(),o=hB(),s=dB(),l=o-n.left,c=n.left+r.width-s;r.width>a?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?o:l>c?s-r.width:o:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var u=WF?sB():mB(),h=uB(),d=pB(),p=h-n.top,f=n.top+r.height-d;r.height>u?n.top=p>0&&f<=0?d-r.height:f>0&&p<=0?h:p>f?d-r.height:h:p>0?n.top+=p:f>0&&(n.top-=f)}return n}(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(RD(i)||RD(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}}},{key:"checkCollision",value:function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))}},{key:"show",value:function(e,t){var i=this;if(this.wireEvents(),1e3===this.zIndex||!RD(t)){var n=RD(t)?this.element:t;this.zIndex=CB(n),LP(this.element,{zIndex:this.zIndex})}e=RD(e)||"object"!=typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(_P([this.element],"e-popup-close"),wP([this.element],"e-popup-open"),this.checkCollision(),_P([this.element],"e-popup-open"),wP([this.element],"e-popup-close")),RD(e)?(_P([this.element],"e-popup-close"),wP([this.element],"e-popup-open"),this.trigger("open")):(e.begin=function(){i.isDestroyed||(_P([i.element],"e-popup-close"),wP([i.element],"e-popup-open"))},e.end=function(){i.isDestroyed||i.trigger("open")},new oM(e).animate(this.element))}},{key:"hide",value:function(e){var t=this;e=RD(e)||"object"!=typeof e?this.hideAnimation:e,RD(e)?(_P([this.element],"e-popup-open"),wP([this.element],"e-popup-close"),this.trigger("close")):(e.end=function(){t.isDestroyed||(_P([t.element],"e-popup-open"),wP([t.element],"e-popup-close"),t.trigger("close"))},new oM(e).animate(this.element)),this.unwireEvents()}},{key:"getScrollableParent",value:function(e){return this.checkFixedParent(e),function(e,t){for(var i=getComputedStyle(e),n=[],r=/(auto|scroll)/,a=e.parentElement;a&&"HTML"!==a.tagName;){var o=getComputedStyle(a);"absolute"===i.position&&"static"===o.position||!r.test(o.overflow+o.overflowY+o.overflowX)||n.push(a),a=a.parentElement}return t||n.push(document),n}(e,this.fixedParent)}},{key:"checkFixedParent",value:function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,RD(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}}}]),i}(kM);return yB([QP("auto")],e.prototype,"height",void 0),yB([QP("auto")],e.prototype,"width",void 0),yB([QP(null)],e.prototype,"content",void 0),yB([QP("container")],e.prototype,"targetType",void 0),yB([QP(null)],e.prototype,"viewPortElement",void 0),yB([QP({X:"none",Y:"none"})],e.prototype,"collision",void 0),yB([QP("")],e.prototype,"relateTo",void 0),yB([ZP({},bB)],e.prototype,"position",void 0),yB([QP(0)],e.prototype,"offsetX",void 0),yB([QP(0)],e.prototype,"offsetY",void 0),yB([QP(1e3)],e.prototype,"zIndex",void 0),yB([QP(!1)],e.prototype,"enableRtl",void 0),yB([QP("reposition")],e.prototype,"actionOnScroll",void 0),yB([QP(null)],e.prototype,"showAnimation",void 0),yB([QP(null)],e.prototype,"hideAnimation",void 0),yB([eM()],e.prototype,"open",void 0),yB([eM()],e.prototype,"close",void 0),yB([eM()],e.prototype,"targetExitViewport",void 0),e=yB([tM],e)}();function CB(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==r&&i.push(n),t=t.parentElement}for(var a=[],o=0;o<document.body.children.length;o++)if(!e.isEqualNode(document.body.children[o])){var s=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),l=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position");"auto"!==s&&"static"!==l&&a.push(s)}a.push("999");var c=[];if(!RD(e.parentElement)&&"BODY"!==e.parentElement.tagName)for(var u=[].slice.call(e.parentElement.children),h=0;h<u.length;h++){var d=document.defaultView.getComputedStyle(u[h],null).getPropertyValue("z-index"),p=document.defaultView.getComputedStyle(u[h],null).getPropertyValue("position");"auto"!==d&&"static"!==p&&c.push(d)}var f=i.concat(a,c),v=Math.max.apply(Math,f)+1;return v>2147483647?2147483647:v}var wB,_B,SB,EB,TB,AB,OB,xB,IB=["north-west","north","north-east","west","east","south-west","south","south-east"],DB=0,RB=0,PB=0,MB=0,LB=0,NB=0,FB=["e-restrict-left"],BB=null,VB=null,jB=null,HB=!0,UB=0,qB=!0;function WB(e){var t;return RD(e)||(t="string"==typeof e?document.querySelector(e):e),t}function zB(e){RD(e)&&(e=this);for(var t=wB.querySelectorAll(".e-resize-handle"),i=0;i<t.length;i++)_B=t[i],OR.add(_B,"mousedown",YB,e),OR.add(_B,"msie"===AR.info.name?"pointerdown":"touchstart",JB,e)}function GB(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function YB(e){if(e.preventDefault(),wB=e.target.parentElement,XB(),LB=e.pageX,NB=e.pageY,e.target.classList.add("e-focused-handle"),RD(BB)||!0!==BB(e,this)){var t=RD(OB)?document:OB;OR.add(t,"mousemove",QB,this),OR.add(document,"mouseup",KB,this);for(var i=0;i<FB.length;i++)HB=!wB.classList.contains(FB[i])}}function KB(e){var t="msie"===AR.info.name?"pointermove":"touchmove",i="msie"===AR.info.name?"pointerup":"touchend",n=RD(OB)?document:OB;OR.remove(n,"mousemove",QB),OR.remove(n,t,QB),OR.remove(n,"msie"===AR.info.name?"pointerdown":"touchstart",QB),RD(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),RD(jB)||jB(e,this),OR.remove(document,"mouseup",KB),OR.remove(document,i,KB)}function XB(){DB=parseFloat(getComputedStyle(wB,null).getPropertyValue("width").replace("px","")),RB=parseFloat(getComputedStyle(wB,null).getPropertyValue("height").replace("px","")),PB=wB.getBoundingClientRect().left,MB=wB.getBoundingClientRect().top}function JB(e){wB=e.target.parentElement,XB();var t=e.touches?e.changedTouches[0]:e;if(LB=t.pageX,NB=t.pageY,RD(BB)||!0!==BB(e,this)){var i="msie"===AR.info.name?"pointermove":"touchmove",n="msie"===AR.info.name?"pointerup":"touchend",r=RD(OB)?document:OB;OR.add(r,i,QB,this),OR.add(document,n,KB)}}function QB(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?_B=e.target:RD(document.body.querySelector(".e-focused-handle"))||(_B=document.body.querySelector(".e-focused-handle")),!RD(_B)){for(var t="",i=0;i<IB.length;i++)_B.classList.contains("e-"+IB[i])&&(t=IB[i]);switch(RD(VB)||VB(e,this),t){case"south":$B(e);break;case"north":eV(e);break;case"west":tV(e);break;case"east":iV(e);break;case"south-east":$B(e),iV(e);break;case"south-west":$B(e),tV(e);break;case"north-east":eV(e),iV(e);break;case"north-west":eV(e),tV(e)}}}function ZB(e){return e.getBoundingClientRect()}function $B(e){var t,i=document.documentElement.clientHeight,n=!1,r=(e.touches?e.changedTouches[0]:e).pageY,a=ZB(wB);RD(OB)||(t=ZB(OB)),RD(OB)?RD(OB)&&(i-r>=0||a.top<0)&&(n=!0):n=!0;var o=RB+(r-NB);o=o>SB?o:SB;var s=0;RD(OB)||(s=t.top);var l=RD(OB)?0:OB.offsetHeight-OB.clientHeight,c=a.top-s-l/2;if(c=c<0?0:c,a.top>0&&c+o>EB){if(n=!1,wB.classList.contains("e-resize-viewport"))return;wB.style.height=EB-parseInt(c.toString(),10)+"px"}else{var u=0;if(n){a.top<0&&i+(a.height+a.top)>0&&(o+(u=a.top)<=30&&(o=a.height-(a.height+a.top)+30)),o+a.top>=EB&&(wB.style.height=a.height+(i-(a.height+a.top))+"px");var h=RD(OB)?u:c;o>=SB&&o+h<=EB&&(wB.style.height=o+"px")}}}function eV(e){var t,i=!1,n="mouse"===GB(e.type)?e.pageY:e.touches[0].pageY,r=ZB(wB);RD(OB)||(t=ZB(OB)),(!RD(OB)&&r.top-t.top>0||RD(OB)&&n>0)&&(i=!0);var a=RB-(n-NB);if(ZB(wB).bottom+a>EB&&(i=!1,wB.style.height=EB-ZB(wB).bottom+"px"),i&&a>=SB&&a<=EB){var o=0;RD(OB)||(o=t.top);var s=MB-o+(n-NB);s=s>0?s:1,wB.style.height=a+"px",wB.style.top=s+"px"}}function tV(e){var t,i=document.documentElement.clientWidth,n=!1;RD(OB)||(t=ZB(OB));var r="mouse"===GB(e.type)?e.pageX:e.touches[0].pageX,a=ZB(wB),o=RD(OB)?0:OB.offsetWidth-OB.clientWidth,s=RD(OB)?0:t.left,l=RD(OB)?0:t.width;RD(xB)&&(RD(OB)?xB=i:(xB=a.left-s-o/2+a.width,xB+=l-o-xB)),(!RD(OB)&&a.left-t.left+a.width+(t.right-a.right)-o<=AB||RD(OB)&&r>=0)&&(n=!0);var c=DB-(r-LB);if(HB&&(c=c>xB?xB:c),n&&c>=TB&&c<=AB){var u=0;RD(OB)||(u=t.left);var h=PB-u+(r-LB);h=h>0?h:1,c!==UB&&qB&&(wB.style.width=c+"px"),HB&&(wB.style.left=h+"px",qB=1!==h)}UB=c}function iV(e){var t,i=document.documentElement.clientWidth,n=!1;RD(OB)||(t=ZB(OB));var r=(e.touches?e.changedTouches[0]:e).pageX,a=ZB(wB);(!RD(OB)&&(a.left-t.left+a.width<AB||a.right-t.left>a.width)||RD(OB)&&i-r>0)&&(n=!0);var o=DB+(r-LB),s=0;if(RD(OB)||(s=t.left),a.left-s+o>AB){if(n=!1,wB.classList.contains("e-resize-viewport"))return;wB.style.width=AB-(a.left-s)+"px"}n&&o>=TB&&o<=AB&&(wB.style.width=o+"px")}function nV(){for(var e=wB.querySelectorAll(".e-resize-handle"),t=0;t<e.length;t++)xP(e[t])}var rV,aV=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},oV=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM);return aV([QP()],e.prototype,"buttonModel",void 0),aV([QP("Button")],e.prototype,"type",void 0),aV([eM()],e.prototype,"click",void 0),e}(),sV=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM);return aV([QP("Fade")],e.prototype,"effect",void 0),aV([QP(400)],e.prototype,"duration",void 0),aV([QP(0)],e.prototype,"delay",void 0),e}(),lV=function(){var e=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"render",value:function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=this.minHeight.toString()),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()}},{key:"preRender",value:function(){var e=this;if(this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(t){e.hide(t)},this.dlgOverlayClickEventHandler=function(t){e.trigger("overlayClick",t),e.focusContent()},this.l10n=new PM("dialog",{close:"Close"},this.locale),this.checkPositionData(),RD(this.target)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=t}}},{key:"isNumberValue",value:function(e){return/^[-+]?\d*\.?\d+$/.test(e)}},{key:"checkPositionData",value:function(){if(!RD(this.position)){if(!RD(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}if(!RD(this.position.Y)&&"number"!=typeof this.position.Y&&this.isNumberValue(this.position.Y)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}}},{key:"getEle",value:function(e,t){for(var i=void 0,n=0;n<e.length;n++)if(e[n].classList.contains(t)){i=e[n];break}return i}},{key:"getMinHeight",value:function(){var e="0px",t="0px";RD(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,"e-footer-content");RD(i)||(t=getComputedStyle(i).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),r=parseInt(t.slice(0,t.indexOf("p")),10);return SB=n+30+r,n+30+r}},{key:"onResizeStart",value:function(e,t){return t.trigger("resizeStart",e),e.cancel}},{key:"onResizing",value:function(e,t){t.trigger("resizing",e)}},{key:"onResizeComplete",value:function(e,t){t.trigger("resizeStop",e)}},{key:"setResize",value:function(){if(this.enableResize){if(this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add("e-dlg-resizable");var e=getComputedStyle(this.element).minHeight,t=getComputedStyle(this.element).minWidth,i=this.enableRtl?"south-west":"south-east";this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):this.isModal&&this.target===document.body&&this.element.classList.add("e-resize-viewport"),function(e){BB=e.resizeBegin,VB=e.resizing,jB=e.resizeComplete,wB=WB(e.element),OB=WB(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++){var n=CP("div",{className:"e-icons e-resize-handle e-"+t[i]});wB.appendChild(n)}SB=e.minHeight,TB=e.minWidth,AB=e.maxWidth,EB=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?zB(e.proxy):zB()}({element:this.element,direction:i,minHeight:parseInt(e.slice(0,t.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(t.slice(0,t.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this})}else nV(),this.element.classList.remove(this.isModal?"e-restrict-left":"e-resize-viewport"),this.element.classList.remove("e-dlg-resizable")}},{key:"keyDown",value:function(e){var t=this;if(9===e.keyCode&&this.isModal){var i;if(RD(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),RD(this.btnObj)&&!RD(this.ftrTemplateContent)){var n=this.ftrTemplateContent.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');i={element:n[n.length-1]}}RD(i)||document.activeElement!==i.element||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),RD(i)||i.element.focus())}var r,a=document.activeElement,o=["input","textarea"].indexOf(a.tagName.toLowerCase())>-1,s=!1;(o||(s=a.hasAttribute("contenteditable")&&"true"===a.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&this.hide(e),13===e.keyCode&&!e.ctrlKey&&"textarea"!==a.tagName.toLowerCase()&&o&&!RD(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===a.tagName.toLowerCase()||s)&&!RD(this.primaryButtonEle))&&(this.buttons.some((function(e,t){r=t;var i=e.buttonModel;return!RD(i)&&!0===i.isPrimary}))&&"function"==typeof this.buttons[r].click&&setTimeout((function(){t.buttons[r].click.call(t,e)})))}},{key:"initialize",value:function(){RD(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||wP([this.element],"e-dialog"),AR.isDevice&&wP([this.element],"e-device"),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()}},{key:"initRender",value:function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||DP(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&RD(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&RD(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""===this.header||RD(this.header)||this.setHeader(),this.showCloseIcon&&this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||RD(this.footerTemplate)?RD(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&(RD(this.buttons[0].buttonModel)||""!==this.footerTemplate||this.setButton()),this.allowDragging&&!RD(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(DP(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&RD(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var t=0,i=this.dlgContainer.children;t<i.length;t++)i[t].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=i[t])}if(!0!==this.element.classList.contains("e-alert-dialog")&&!0!==this.element.classList.contains("e-confirm-dialog")&&!RD(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}RD(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new kB(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(t){var i={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",i,(function(t){t.preventFocus||e.focusContent()}))},close:function(t){e.isModal&&wP([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var i=document.activeElement;RD(i)||RD(i.blur)||i.blur(),RD(e.storeActiveElement)||RD(e.storeActiveElement.focus)||e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(wP([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1}},{key:"resetResizeIcon",value:function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));RD(t)||(t.style.bottom="-"+e.toString()+"px")}}},{key:"setOverlayZindex",value:function(e){var t;t=RD(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()}},{key:"positionChange",value:function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()}},{key:"setPopupPosition",value:function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})}},{key:"setAllowDragging",value:function(){var e=this;this.dragObj=new AM(this.element,{clone:!1,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(t){e.trigger("dragStart",t,(function(e){}))},dragStop:function(t){e.isModal&&(RD(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",t),e.element.classList.remove("e-restrict-left")},drag:function(t){e.trigger("drag",t)}}),RD(this.targetEle)||(this.dragObj.dragArea=this.targetEle)}},{key:"setButton",value:function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var t=RD(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),i=this.createElement("button",{attrs:{type:t}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}for(var n,r=0,a=this.element.children;r<a.length;r++)a[r].classList.contains("e-footer-content")&&(n=a[r].querySelectorAll("button"));for(var o=0;o<this.buttons.length;o++)this.isBlazorServerRender()||(this.btnObj[o]=new pL(this.buttons[o].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector(".e-footer-content")),!RD(this.ftrTemplateContent)&&"function"==typeof this.buttons[o].click&&n.length>0&&OR.add(n[o],"click",this.buttons[o].click,this),this.isBlazorServerRender()||RD(this.ftrTemplateContent)||(this.btnObj[o].appendTo(this.ftrTemplateContent.children[o]),this.btnObj[o].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])}},{key:"setContent",value:function(){DP(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(RD(this.content)||""===this.content)&&this.initialRender||("string"!=typeof this.content?this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle):this.contentEle.innerHTML=this.sanitizeHelper(this.content)),RD(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!AR.isIE||""!==this.element.style.width||RD(this.width)||(this.element.style.width=FD(this.width)),this.setMaxHeight())}},{key:"setTemplate",value:function(e,t){var i,n;n=t.classList.contains("e-dlg-header")?this.element.id+"header":t.classList.contains("e-footer-content")?this.element.id+"footerTemplate":this.element.id+"content",RD(e.outerHTML)?"string"!=typeof e?i=tP(e):t.innerHTML=this.sanitizeHelper(e):t.appendChild(e);var r=[];if(!RD(i)){var a,o=_createForOfIteratorHelper(i({},null,null,n,!0));try{for(o.s();!(a=o.n()).done;){var s=a.value;r.push(s)}}catch(l){o.e(l)}finally{o.f()}AP([].slice.call(r),t)}}},{key:"sanitizeHelper",value:function(e){if(this.enableHtmlSanitizer){var t=HM.beforeSanitize();DD(t,t,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",t),t.cancel&&!RD(t.helper)?e=t.helper(e):t.cancel||(e=HM.serializeValue(t,e))}return e}},{key:"setMaxHeight",value:function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!RD(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,AR.isIE&&"auto"===this.height&&!RD(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}}},{key:"setEnableRTL",value:function(){this.isBlazorServerRender()||(this.enableRtl?wP([this.element],"e-rtl"):_P([this.element],"e-rtl")),RD(this.element.querySelector(".e-resize-handle"))||(nV(),this.setResize())}},{key:"setTargetContent",value:function(){var e=this;if(RD(this.content)||""===this.content){var t=""!==this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g,"");(this.element.children.length>0||t)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach((function(t){8!==t.nodeType&&e.innerContentElement.appendChild(t)})))}}},{key:"setHeader",value:function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:"e-dlg-header"}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle),DP(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0])}},{key:"setFooterTemplate",value:function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:"e-footer-content"}),""===this.footerTemplate||RD(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent),this.element.appendChild(this.ftrTemplateContent)}},{key:"createHeaderContent",value:function(){RD(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:"e-dlg-header-content"}))}},{key:"renderCloseIcon",value:function(){this.closeIcon=this.createElement("button",{className:"e-dlg-closeicon-btn",attrs:{type:"button"}}),this.closeIconBtnObj=new pL({cssClass:"e-flat",iconCss:"e-icon-dlg-close e-icons"}),this.closeIconTitle(),RD(this.headerContent)?(this.createHeaderContent(),TP([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):TP([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon)}},{key:"closeIconTitle",value:function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)}},{key:"setCSSClass",value:function(e){this.cssClass&&wP([this.element],this.cssClass.split(" ")),e&&_P([this.element],e.split(" "))}},{key:"setIsModal",value:function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.element.classList.remove("e-popup-open"),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),wP([this.element],"e-dlg-modal"),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)}},{key:"getValidFocusNode",value:function(e){for(var t,i=0;i<e.length;i++)if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;return t}},{key:"focusableElements",value:function(e){if(!RD(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null}},{key:"getAutoFocusNode",value:function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(RD(n)){if(!RD(n=this.focusableElements(this.contentEle)))return n;if(!RD(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t}},{key:"disableElement",value:function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msMatchesSelector:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null}},{key:"focusContent",value:function(){var e=this.getAutoFocusNode(this.element);(RD(e)?this.element:e).focus(),this.bindEvent(this.element)}},{key:"bindEvent",value:function(e){OR.add(e,"keydown",this.keyDown,this)}},{key:"unBindEvent",value:function(e){OR.remove(e,"keydown",this.keyDown)}},{key:"updateSanitizeContent",value:function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))}},{key:"isBlazorServerRender",value:function(){return!1}},{key:"getModuleName",value:function(){return"dialog"}},{key:"onPropertyChanged",value:function(e,t){if(this.element.classList.contains("e-dialog"))for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"content":RD(this.content)||""===this.content?RD(this.contentEle)||(xP(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),RD(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-dlg-content"))||this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||RD(this.header)?this.headerEle&&(xP(this.headerEle),this.headerEle=null):this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-dlg-header-content"))||this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||RD(this.footerTemplate)){if(!this.ftrTemplateContent)return;xP(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.isBlazorServerRender()&&!RD(this.element.querySelector(".e-footer-content"))||this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName("e-icon-dlg-close").length>0?this.showCloseIcon||""!==this.header&&!RD(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():xP(this.closeIcon):(xP(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":LP(this.element,{height:FD(e.height)});break;case"width":LP(this.element,{width:FD(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(t.cssClass);break;case"buttons":var r=this.buttons.length;RD(this.ftrTemplateContent)||this.isBlazorServerRender()||(xP(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var a=0;a<r;a++)RD(this.buttons[a].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!RD(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var o=RD(t.position.X)?this.position.X:t.position.X,s=RD(t.position.Y)?this.position.Y:t.position.Y;this.dlgContainer.classList.contains("e-dlg-"+o+"-"+s)&&this.dlgContainer.classList.remove("e-dlg-"+o+"-"+s)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}}}},{key:"setTarget",value:function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()}},{key:"updateIsModal",value:function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",RD(this.targetEle)||this.targetEle.appendChild(this.dlgContainer);else{for(_P([this.element],"e-dlg-modal"),_P([document.body],["e-dlg-target","e-scroll-disabled"]),xP(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&OR.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}},{key:"setzIndex",value:function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.zIndex=CB(e),this.isProtectedOnChange=i,t&&(this.popupObj.zIndex=this.zIndex)}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"destroy",value:function(){if(!this.isDestroyed){var e=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(_P([this.targetEle],["e-dlg-target","e-scroll-disabled"]),this.element.classList.contains("e-dlg-fullscreen")&&_P([document.body],["e-dlg-target","e-scroll-disabled"]),this.isModal&&_P([RD(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.unWireEvents(),!RD(this.btnObj))for(var t=0;t<this.btnObj.length;t++)this.btnObj[t].destroy();if(RD(this.dragObj)||this.dragObj.destroy(),this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),_P([this.element],["e-rtl","e-dlg-modal","e-dlg-resizable","e-restrict-left","e-dlg-fullscreen","e-device"]),RD(this.cssClass)||""===this.cssClass||_P([this.element],this.cssClass.split(" ")),RD(this.refElement)||RD(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),xP(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(xP(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),xP(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!RD(this.element.children))for(var n=0;n<=this.element.children.length;n++)n-=n,xP(this.element.children[n]);for(var r=0;r<e.length;r++)this.element.removeAttribute(e[r]);this.isBlazorServerRender()?this.isDestroyed=!0:_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}}},{key:"wireEvents",value:function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&OR.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&OR.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)}},{key:"unWireEvents",value:function(){if(this.showCloseIcon&&OR.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&OR.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!RD(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&OR.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)}},{key:"refreshPosition",value:function(){this.popupObj.refreshPosition()}},{key:"show",value:function(e){var t=this;if(this.element.classList.contains("e-dialog")&&(!this.element.classList.contains("e-popup-open")||!RD(e))){RD(e)||this.fullScreen(e);var i={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,(function(e){if(!e.cancel){t.element.style.maxHeight!==i.maxHeight&&(t.allowMaxHeight=!1,t.element.style.maxHeight=i.maxHeight),t.storeActiveElement=document.activeElement,t.element.tabIndex=-1,t.isModal&&!RD(t.dlgOverlay)&&(t.dlgOverlay.style.display="block",t.dlgContainer.style.display="flex",_P([t.dlgOverlay],"e-fade"),RD(t.targetEle)?wP([document.body],["e-dlg-target","e-scroll-disabled"]):(t.dlgContainer.style.position=t.targetEle===document.body?"fixed":"absolute",t.dlgOverlay.style.position="absolute",t.element.style.position="relative",wP([t.targetEle],["e-dlg-target","e-scroll-disabled"])));var n={name:t.animationSettings.effect+"In",duration:t.animationSettings.duration,delay:t.animationSettings.delay},r=t.isModal?t.element.parentElement:t.element;t.calculatezIndex&&(t.setzIndex(r,!0),LP(t.element,{zIndex:t.zIndex}),t.isModal&&t.setOverlayZindex(t.zIndex)),"None"===t.animationSettings.effect?t.popupObj.show():t.popupObj.show(n),t.dialogOpen=!0;var a=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!0,t.preventVisibility=!0,t.isProtectedOnChange=a}}))}}},{key:"hide",value:function(e){var t=this;if(this.element.classList.contains("e-dialog")&&this.preventVisibility){var i={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e};this.closeArgs=i,this.trigger("beforeClose",i,(function(e){if(!e.cancel){t.isModal&&(RD(t.targetEle)?_P([document.body],["e-dlg-target","e-scroll-disabled"]):_P([t.targetEle],["e-dlg-target","e-scroll-disabled"]));var i={name:t.animationSettings.effect+"Out",duration:t.animationSettings.duration,delay:t.animationSettings.delay};"None"===t.animationSettings.effect?t.popupObj.hide():t.popupObj.hide(i),t.dialogOpen=!1;var n=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.visible=!1,t.preventVisibility=!1,t.isProtectedOnChange=n}}))}}},{key:"fullScreen",value:function(e){if(e){wP([this.element],"e-dlg-fullscreen");var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=RD(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=t,wP([document.body],["e-dlg-target","e-scroll-disabled"]),this.allowDragging&&!RD(this.dragObj)&&this.dragObj.destroy()}else _P([this.element],"e-dlg-fullscreen"),_P([document.body],["e-dlg-target","e-scroll-disabled"]),this.allowDragging&&!RD(this.headerContent)&&this.setAllowDragging();return e}},{key:"getButtons",value:function(e){return RD(e)?this.btnObj:this.btnObj[e]}}]),i}(kM);return aV([QP("")],e.prototype,"content",void 0),aV([QP(!0)],e.prototype,"enableHtmlSanitizer",void 0),aV([QP(!1)],e.prototype,"showCloseIcon",void 0),aV([QP(!1)],e.prototype,"isModal",void 0),aV([QP("")],e.prototype,"header",void 0),aV([QP(!0)],e.prototype,"visible",void 0),aV([QP(!1)],e.prototype,"enableResize",void 0),aV([QP("auto")],e.prototype,"height",void 0),aV([QP("")],e.prototype,"minHeight",void 0),aV([QP("100%")],e.prototype,"width",void 0),aV([QP("")],e.prototype,"cssClass",void 0),aV([QP(1e3)],e.prototype,"zIndex",void 0),aV([QP(null)],e.prototype,"target",void 0),aV([QP("")],e.prototype,"footerTemplate",void 0),aV([QP(!1)],e.prototype,"allowDragging",void 0),aV([$P([{}],oV)],e.prototype,"buttons",void 0),aV([QP(!0)],e.prototype,"closeOnEscape",void 0),aV([ZP({},sV)],e.prototype,"animationSettings",void 0),aV([ZP({X:"center",Y:"center"},bB)],e.prototype,"position",void 0),aV([eM()],e.prototype,"created",void 0),aV([eM()],e.prototype,"open",void 0),aV([eM()],e.prototype,"beforeSanitizeHtml",void 0),aV([eM()],e.prototype,"beforeOpen",void 0),aV([eM()],e.prototype,"close",void 0),aV([eM()],e.prototype,"beforeClose",void 0),aV([eM()],e.prototype,"dragStart",void 0),aV([eM()],e.prototype,"dragStop",void 0),aV([eM()],e.prototype,"drag",void 0),aV([eM()],e.prototype,"overlayClick",void 0),aV([eM()],e.prototype,"resizeStart",void 0),aV([eM()],e.prototype,"resizing",void 0),aV([eM()],e.prototype,"resizeStop",void 0),aV([eM()],e.prototype,"destroyed",void 0),e=aV([tM],e)}();!function(e){function t(e,t){var i=new lV(e);return i.appendTo(t),i}function i(e,t){return e.header=RD(t.title)?"Information":t.title,e.content=RD(t.content)?"":t.content,e.isModal=!!RD(t.isModal)||t.isModal,e.showCloseIcon=!RD(t.showCloseIcon)&&t.showCloseIcon,e.allowDragging=!RD(t.isDraggable)&&t.isDraggable,e.closeOnEscape=!RD(t.closeOnEscape)&&t.closeOnEscape,e.position=RD(t.position)?{X:"center",Y:"top"}:t.position,e.animationSettings=RD(t.animationSettings)?{effect:"Fade",duration:400,delay:0}:t.animationSettings,e.cssClass=RD(t.cssClass)?"":t.cssClass,e.zIndex=RD(t.zIndex)?1e3:t.zIndex,e.open=RD(t.open)?null:t.open,e}function n(e,t,i){var n=i;return RD(t.text)||(n.buttonModel.content=t.text),RD(t.icon)||(n.buttonModel.iconCss=t.icon),RD(t.cssClass)||(n.buttonModel.cssClass=t.cssClass),RD(t.click)||(n.click=t.click),n}e.alert=function(e){var r,a,o=CP("div",{className:"e-alert-dialog"});return document.body.appendChild(o),(r=t("string"==typeof e?{content:e,position:{X:"center",Y:"top"},isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(e,t){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return RD(t.okButton)?e.buttons=i:e.buttons[0]=n(0,t.okButton,i[0]),e}(i({buttons:[]},a=e),a),o)).close=function(){e&&e.close&&e.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove("e-scroll-disabled")):r.element.remove()},r},e.confirm=function(e){var r,a,o=CP("div",{className:"e-confirm-dialog"});return document.body.appendChild(o),(r=t("string"==typeof e?{position:{X:"center",Y:"top"},content:e,isModal:!0,header:"Information",buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(e,t){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},r={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return e.buttons[0]=RD(t.okButton)?i:n(0,t.okButton,i),e.buttons[1]=RD(t.cancelButton)?r:n(0,t.cancelButton,r),e}(i({buttons:[]},a=e),a),o)).close=function(){e&&e.close&&e.close.apply(r),r.destroy(),r.element.classList.contains("e-dlg-modal")?(r.element.parentElement.remove(),r.target.classList.remove("e-scroll-disabled")):r.element.remove()},r}}(rV||(rV={}));var cV,uV={};function hV(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function dV(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",t),r.setAttribute("class",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-circle");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),e.insertBefore(r,e.firstChild),r.appendChild(a),r.appendChild(o)}function pV(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class",n),r.setAttribute("id",t);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-circle"),e.insertBefore(r,e.firstChild),r.appendChild(a)}function fV(e,t,i,n){var r=2*e,a=t.querySelector("svg."+n),o=a.querySelector("path.e-path-circle"),s=vV(r),l=r/2+"px";a.setAttribute("viewBox","0 0 "+r+" "+r),a.style.width=a.style.height=r+"px",a.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(r,s)),"Material"===i&&(o.setAttribute("stroke-width",s+""),o.setAttribute("stroke-dasharray",(r-s)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",mV(r,s,1,75)+""))}function vV(e){return.1*e}function mV(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function gV(e,t,i,n){var r=(e/=n)*e,a=r*e;return t+i*(6*a*r+-15*r*r+10*a)}function yV(e,t,i){var n=e,r=e,a=2*e,o=t.querySelector("."+i),s=o.querySelector(".e-path-circle"),l=o.querySelector(".e-path-arc"),c=a/2+"px";s.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,r,e)),l.setAttribute("d",function(e,t,i,n,r){var a=bV(e,t,i,45),o=bV(e,t,i,315);return["M",a.x,a.y,"A",i,i,0,0,0,o.x,o.y].join(" ")}(n,r,e)),o.setAttribute("viewBox","0 0 "+a+" "+a),o.style.transformOrigin=c+" "+c+" "+c,o.style.width=o.style.height=a+"px"}function bV(e,t,i,n){var r=(n-90)*Math.PI/180;return{x:e+i*Math.cos(r),y:t+i*Math.sin(r)}}function kV(e,t){var i;if(e&&(i=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&i){var n=i.querySelector(".e-spinner-inner");if(t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show")){var r=i.querySelector("svg");if(RD(r))return;var a=r.getAttribute("id");switch(uV[a].isAnimate=!t,uV[a].type){case"Material":t?clearTimeout(uV[a].timeOut):function(e,t,i){var n={};uV[t].timeOut=0,n[t]=function(e,t,i,n){return{radius:t,count:0,previousId:0}}(0,i),function e(t){!function(t,i,n,r,a,o,s){var l=++s.globalInfo[s.uniqueID].previousId,c=(new Date).getTime(),u=parseFloat(2*s.globalInfo[s.uniqueID].radius+""),h=vV(u),d=-90*(s.globalInfo[s.uniqueID].count||0);!function t(i){var r=Math.max(0,Math.min((new Date).getTime()-c,1333));!function(e,t){if(!RD(t.querySelector("svg.e-spin-material"))&&!RD(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",mV(u,h,e,75)+""),i.setAttribute("transform","rotate("+d+" "+u/2+" "+u/2+")")}}(n(r,1,148,1333),i.container),l===i.globalInfo[i.uniqueID].previousId&&r<1333?uV[i.uniqueID].timeOut=setTimeout(t.bind(null,i),1):e(i)}(s)}(0,0,gV,0,0,0,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(n,a,uV[a].radius);break;case"Bootstrap":t?clearTimeout(uV[a].timeOut):function(e){for(var t,i,n,r,a,o=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),s=1;s<=8;s++)l(e.getElementsByClassName("e-path-circle_"+(8===s?0:s))[0],s,0,(t=void 0,i=void 0,n=void 0,r=void 0,a=void 0,t=[],n=s,r=!1,a=1,function e(o){t.push(o),(o!==n||1===a)&&(o<=i&&o>1&&!r?o=parseFloat((o-.2).toFixed(2)):1===o?(o=7,o=parseFloat((o+.2).toFixed(2)),r=!0):o<8&&r?8===(o=parseFloat((o+.2).toFixed(2)))&&(r=!1):o<=8&&!r&&(o=parseFloat((o-.2).toFixed(2))),++a,e(o))}(i=s),t),o);function l(e,t,i,n,r){var a=0;!function t(i){uV[r].isAnimate&&(++a,e.setAttribute("r",i+""),a>=n.length&&(a=0),uV[r].timeOut=setTimeout(t.bind(null,n[a]),18))}(t)}}(n)}}t?NP(i,["e-spin-hide"],["e-spin-show"]):NP(i,["e-spin-show"],["e-spin-hide"]),e=null}}!function(e){var t;function i(e){n(e.floatLabelType,e.element),e.element.addEventListener("focus",(function(){var e=h(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.add("e-input-focus")})),e.element.addEventListener("blur",(function(){var e=h(this);(e.classList.contains("e-input-group")||e.classList.contains("e-outline")||e.classList.contains("e-filled"))&&e.classList.remove("e-input-focus")})),e.element.addEventListener("input",(function(){n(t,e.element)}))}function n(e,t){var i=t.value;""===i||RD(i)?"Always"!==e&&t.parentElement&&t.parentElement.classList.remove("e-valid-input"):t.parentElement.classList.add("e-valid-input")}function r(){var e=h(this).getElementsByClassName("e-float-text")[0];RD(e)||(wP([e],"e-label-top"),e.classList.contains("e-label-bottom")&&_P([e],"e-label-bottom"))}function a(){var e=h(this);if(e.getElementsByTagName("textarea")[0]?""===e.getElementsByTagName("textarea")[0].value:""===e.getElementsByTagName("input")[0].value){var t=e.getElementsByClassName("e-float-text")[0];RD(t)||(t.classList.contains("e-label-top")&&_P([t],"e-label-top"),wP([t],"e-label-bottom"))}}function o(e){e.addEventListener("focus",r),e.addEventListener("blur",a)}function s(e,t,i){var n,r,a=RD(i)?CP:i;if("Auto"===e.floatLabelType&&o(e.element),RD(t.container)?(t.container=f(e,"e-float-input","e-float-custom-tag","div",a),e.element.parentNode.insertBefore(t.container,e.element)):(RD(e.customTag)||t.container.classList.add("e-float-custom-tag"),t.container.classList.add("e-float-input")),n=a("span",{className:"e-float-line"}),r=a("label",{className:"e-float-text"}),RD(e.element.id)||""===e.element.id||(r.id="label_"+e.element.id.replace(/ /g,"_"),DP(e.element,{"aria-labelledby":r.id})),RD(e.element.placeholder)||""===e.element.placeholder||(r.innerText=v(e.element.placeholder),e.element.removeAttribute("placeholder")),RD(e.properties)||RD(e.properties.placeholder)||""===e.properties.placeholder||(r.innerText=v(e.properties.placeholder)),r.innerText||t.container.classList.add("e-no-float-label"),t.container.classList.contains("e-float-icon-left")){var s=t.container.querySelector(".e-input-in-wrap");s.appendChild(e.element),s.appendChild(n),s.appendChild(r)}else t.container.appendChild(e.element),t.container.appendChild(n),t.container.appendChild(r);u(e.element.value,r),"Always"===e.floatLabelType&&(r.classList.contains("e-label-bottom")&&_P([r],"e-label-bottom"),wP([r],"e-label-top")),"Auto"===e.floatLabelType&&(e.element.addEventListener("input",(function(t){u(e.element.value,r)})),e.element.addEventListener("blur",(function(t){u(e.element.value,r)}))),RD(e.element.getAttribute("id"))||r.setAttribute("for",e.element.getAttribute("id"))}function l(e,t){"Always"===e&&t.classList.contains("e-outline")&&t.classList.add("e-valid-input")}function c(e,t){e?_P([t],"e-clear-icon-hide"):wP([t],"e-clear-icon-hide")}function u(e,t){e?(wP([t],"e-label-top"),t.classList.contains("e-label-bottom")&&_P([t],"e-label-bottom")):(t.classList.contains("e-label-top")&&_P([t],"e-label-top"),wP([t],"e-label-bottom"))}function h(e){var t=RD(e.parentNode)?e:e.parentNode;return t&&t.classList.contains("e-input-in-wrap")&&(t=t.parentNode),t}function d(e,t,i){t.addEventListener("click",(function(i){e.classList.contains("e-disabled")||e.readOnly||(i.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",wP([t],"e-clear-icon-hide"))})),e.addEventListener("input",(function(i){c(e.value,t)})),e.addEventListener("focus",(function(i){c(e.value,t)})),e.addEventListener("blur",(function(e){setTimeout((function(){wP([t],"e-clear-icon-hide")}),200)}))}function p(e,t){if(h(e).classList.contains("e-float-input")&&"Auto"===t){var i=h(e).getElementsByClassName("e-float-text")[0];u(e.value,i)}}function f(e,t,i,n,r){var a,o=RD(r)?CP:r;return RD(e.customTag)?a=o(n,{className:t}):(a=o(e.customTag,{className:t})).classList.add(i),a.classList.add("e-control-wrapper"),a}function v(e){var t="";if(!RD(e)&&""!==e){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+e+'"/>',t=i.children[0].placeholder}return t}function m(e,t,i){RD(i)||""===i||_P(t,i.split(" ")),RD(e)||""===e||wP(t,e.split(" "))}function g(e,t){var i;e=v(e),(i=h(t)).classList.contains("e-float-input")?RD(e)||""===e?(i.classList.add("e-no-float-label"),i.getElementsByClassName("e-float-text")[0].textContent=""):(i.getElementsByClassName("e-float-text")[0].textContent=e,i.classList.remove("e-no-float-label"),t.removeAttribute("placeholder")):RD(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):DP(t,{placeholder:e,"aria-placeholder":e})}function y(e,t,i){e?DP(t,{readonly:""}):t.removeAttribute("readonly"),RD(i)||p(t,i)}function b(e,t){e?wP(t,"e-rtl"):_P(t,"e-rtl")}function k(e,t,i,n){var r={disabled:"disabled","aria-disabled":"true"},a=!RD(n);e?(t.classList.remove("e-disabled"),w(r,t),a&&_P([n],"e-disabled")):(t.classList.add("e-disabled"),_(r,t),a&&wP([n],"e-disabled")),RD(i)||p(t,i)}function C(e,t,i,n,r){var a=RD(r)?CP:r;e?i.clearButton=function(e,t,i,n){var r=(RD(n)?CP:n)("span",{className:"e-clear-icon"}),a=t.container;return RD(i)?(t.container.classList.contains("e-float-input")?t.container.querySelector(".e-float-text"):e).insertAdjacentElement("afterend",r):a.appendChild(r),!RD(a)&&a.classList.contains("e-float-input")&&wP([a],"e-input-group"),wP([r],"e-clear-icon-hide"),d(e,r),r.setAttribute("aria-label","close"),r}(t,i,n,a):(i.clearButton.remove(),i.clearButton=null)}function w(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i],a=void 0;a=h(t),"disabled"===r&&t.classList.remove("e-disabled"),"disabled"===r&&a.classList.contains("e-input-group")&&a.classList.remove("e-disabled"),"placeholder"===r&&a.classList.contains("e-float-input")?a.getElementsByClassName("e-float-text")[0].textContent="":t.removeAttribute(r)}}function _(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i],a=void 0;a=h(t),"disabled"===r&&t.classList.add("e-disabled"),"disabled"===r&&a.classList.contains("e-input-group")&&a.classList.add("e-disabled"),"placeholder"===r&&a.classList.contains("e-float-input")?a.getElementsByClassName("e-float-text")[0].textContent=e[r]:t.setAttribute(r,e[r])}}function S(e,t,i){var n=[];n.push(i);var r=RD(i)?t.querySelectorAll(".e-input-group-icon"):n;if(e&&r.length>0)for(var a=0;a<r.length;a++)r[a].addEventListener("mousedown",E,!1),r[a].addEventListener("mouseup",T,!1);else if(r.length>0)for(var o=0;o<r.length;o++)r[o].removeEventListener("mousedown",E,this),r[o].removeEventListener("mouseup",T,this)}function E(){for(var e,t=this.parentElement;!t.classList.contains("e-input-group");)t=t.parentElement;(e=t).classList.contains("e-disabled")||e.querySelector("input").readOnly||this.classList.add("e-input-btn-ripple")}function T(){var e=this;setTimeout((function(){e.classList.remove("e-input-btn-ripple")}),500)}function A(e,t){var i=t("span",{className:e});return i.classList.add("e-input-group-icon"),i}function O(e,t,i,n){var r=RD(n)?CP:n,a=A(e,r);t.classList.add("e-float-icon-left");var o=t.querySelector(".e-input-in-wrap");if(RD(o)){o=r("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(o,i);var s=t.querySelectorAll(i.tagName+" ~ *");o.appendChild(i);for(var l=0;l<s.length;l++)o.appendChild(s[l])}return o.parentNode.insertBefore(a,o),t.classList.contains("e-input-group")||t.classList.add("e-input-group"),S(!0,t,a),a}function x(e,t,i){var n=A(e,RD(i)?CP:i);return t.classList.contains("e-input-group")||t.classList.add("e-input-group"),(t.classList.contains("e-float-icon-left")?t.querySelector(".e-input-in-wrap"):t).appendChild(n),S(!0,t,n),n}e.createInput=function(e,n){var r=RD(n)?CP:n,a={container:null,buttons:[],clearButton:null};if(t=e.floatLabelType,RD(e.floatLabelType)||"Never"===e.floatLabelType?(a.container=f(e,"e-input-group","e-input-custom-tag","span",r),e.element.parentNode.insertBefore(a.container,e.element),wP([e.element],"e-input"),a.container.appendChild(e.element)):s(e,a,r),i(e),RD(e.properties)||RD(e.properties.showClearButton)||!e.properties.showClearButton||"TEXTAREA"===e.element.tagName||(C(e.properties.showClearButton,e.element,a,!0,r),a.clearButton.setAttribute("role","button"),a.container.classList.contains("e-float-input")&&wP([a.container],"e-input-group")),!RD(e.buttons)&&"TEXTAREA"!==e.element.tagName)for(var o=0;o<e.buttons.length;o++)a.buttons.push(x(e.buttons[o],a.container,r));return RD(e.element)||"TEXTAREA"!==e.element.tagName||wP([a.container],"e-multi-line-input"),a=function(e,t){if(!RD(e.properties))for(var i=0,n=Object.keys(e.properties);i<n.length;i++){switch(n[i]){case"cssClass":m(e.properties.cssClass,[t.container]),l(e.floatLabelType,t.container);break;case"enabled":k(e.properties.enabled,e.element,e.floatLabelType,t.container);break;case"enableRtl":b(e.properties.enableRtl,[t.container]);break;case"placeholder":g(e.properties.placeholder,e.element);break;case"readonly":y(e.properties.readonly,e.element)}}return t}(e,a)},e.bindInitialEvent=i,e.wireFloatingEvents=o,e.wireClearBtnEvents=d,e.setValue=function(e,t,i,r){if(t.value=e,RD(i)||"Auto"!==i||p(t,i),!RD(r)&&r){var a=h(t);if(!RD(a)){var o=a.getElementsByClassName("e-clear-icon")[0];t.value&&a.classList.contains("e-input-focus")?_P([o],"e-clear-icon-hide"):wP([o],"e-clear-icon-hide")}}n(i,t)},e.setCssClass=m,e.setWidth=function(e,t){"number"==typeof e?t.style.width=FD(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:FD(e))},e.setPlaceholder=g,e.setReadonly=y,e.setEnableRtl=b,e.setEnabled=k,e.setClearButton=C,e.removeAttributes=w,e.addAttributes=_,e.removeFloating=function(e){var t,i=e.container;if(!RD(i)&&i.classList.contains("e-float-input")){var n=i.querySelector("textarea")?i.querySelector("textarea"):i.querySelector("input"),o=i.querySelector(".e-float-text").textContent,s=null!==i.querySelector(".e-clear-icon");xP(i.querySelector(".e-float-line")),xP(i.querySelector(".e-float-text")),NP(i,["e-input-group"],["e-float-input"]),(t=n).removeEventListener("focus",r),t.removeEventListener("blur",a),DP(n,{placeholder:o}),n.classList.add("e-input"),s||"INPUT"!==n.tagName||n.removeAttribute("required")}},e.addFloating=function(e,i,n,r){var a=RD(r)?CP:r,o=MP(e,".e-input-group");if(t=i,"Never"!==i){var c=o.tagName,u={element:e,floatLabelType:i,customTag:c="DIV"!==c&&"SPAN"!==c?c:null,properties:{placeholder:n}},h=o.querySelector(".e-clear-icon"),d={container:o};e.classList.remove("e-input"),s(u,d,a);var p=o.classList.contains("e-float-icon-left");if(RD(h)&&(h=p?o.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):o.querySelector(".e-input-group-icon")),RD(h))p&&(h=o.querySelector(".e-input-group-icon")),RD(h)&&o.classList.remove("e-input-group");else{var f=o.querySelector(".e-float-line"),v=o.querySelector(".e-float-text"),m=p?o.querySelector(".e-input-in-wrap"):o;m.insertBefore(e,h),m.insertBefore(f,h),m.insertBefore(v,h)}}l(i,e.parentElement)},e.setRipple=function(e,t){for(var i=0;i<t.length;i++)S(e,t[i].container)},e.addIcon=function(e,t,i,n,r){var a="string"==typeof t?t.split(","):t;if("append"===e.toLowerCase()){var o,s=_createForOfIteratorHelper(a);try{for(s.s();!(o=s.n()).done;){x(o.value,i,r)}}catch(u){s.e(u)}finally{s.f()}}else{var l,c=_createForOfIteratorHelper(a);try{for(c.s();!(l=c.n()).done;){O(l.value,i,n,r)}}catch(u){c.e(u)}finally{c.f()}}},e.prependSpan=O,e.appendSpan=x}(cV||(cV={}));var CV,wV,_V,SV,EV,TV,AV,OV,xV,IV,DV,RV,PV,MV,LV,NV,FV=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},BV="e-input-group-icon",VV=new RegExp("^(-)?(\\d*)$"),jV=["title","style","class"],HV=(CV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).isVue=!1,r.preventChange=!1,r.numericOptions=e,r}return _createClass(i,[{key:"preRender",value:function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=TD("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),_P([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=MP(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var t=this.createElement("input"),i=0;i<this.element.attributes.length;i++)"id"!==this.element.attributes[i].nodeName&&(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML);this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,AD("ej2_instances",e,this.element)}DP(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new PM("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null!==this.placeholder||this.updatePlaceholder()}},{key:"render",value:function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.renderComplete())}},{key:"checkAttributes",value:function(e){var t,i=_createForOfIteratorHelper(e?RD(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"]);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(!RD(this.element.getAttribute(n)))switch(n){case"disabled":if(RD(this.numericOptions)||void 0===this.numericOptions.enabled||e){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!e)}break;case"readonly":if(RD(this.numericOptions)||void 0===this.numericOptions.readonly||e){var a="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:a},!e)}break;case"placeholder":(RD(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(RD(this.numericOptions)||void 0===this.numericOptions.value||e){var o=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(AD(n,o,{}),!e)}break;case"min":if(RD(this.numericOptions)||void 0===this.numericOptions.min||e){var s=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===s||isNaN(s)||this.setProperties(AD(n,s,{}),!e)}break;case"max":if(RD(this.numericOptions)||void 0===this.numericOptions.max||e){var l=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===l||isNaN(l)||this.setProperties(AD(n,l,{}),!e)}break;case"step":if(RD(this.numericOptions)||void 0===this.numericOptions.step||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===c||isNaN(c)||this.setProperties(AD(n,c,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(null!==u&&!isNaN(u)||"value"===n)&&this.setProperties(AD(n,u,{}),!0)}}}catch(h){i.e(h)}finally{i.f()}}},{key:"updatePlaceholder",value:function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)}},{key:"initCultureFunc",value:function(){this.instance=new hR(this.locale)}},{key:"initCultureInfo",value:function(){this.cultureInfo.format=this.format,null!==TD("currency",this)&&(AD("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))}},{key:"createWrapper",value:function(){var e=this.cssClass;RD(this.cssClass)||""===this.cssClass||(e=this.getNumericValidClassList(this.cssClass));var t=cV.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&DP(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),DP(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&DP(this.container,{style:this.inputStyle})}},{key:"updateDataAttribute",value:function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];0===a.indexOf("data")&&this.hiddenInput.setAttribute(a,t[a])}}},{key:"updateHTMLAttrToElement",value:function(){if(!RD(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];jV.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[i])}}},{key:"updateCssClass",value:function(e,t){cV.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))}},{key:"getNumericValidClassList",value:function(e){var t=e;return RD(e)||""===e||(t=e.replace(/\s+/g," ").trim()),t}},{key:"updateHTMLAttrToWrapper",value:function(){if(!RD(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(jV.indexOf(i)>-1)if("class"===i){var n=this.getNumericValidClassList(this.htmlAttributes[i]);""!==n&&wP([this.container],n.split(" "))}else if("style"===i){var r=this.container.getAttribute(i);r=RD(r)?this.htmlAttributes[i]:r+this.htmlAttributes[i],this.container.setAttribute(i,r)}else this.container.setAttribute(i,this.htmlAttributes[i])}}},{key:"setElementWidth",value:function(e){RD(e)||("number"==typeof e?this.container.style.width=FD(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:FD(e)))}},{key:"spinBtnCreation",value:function(){this.spinDown=cV.appendSpan(BV+" e-spin-down",this.container,this.createElement),DP(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),this.spinUp=cV.appendSpan(BV+" e-spin-up",this.container,this.createElement),DP(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()}},{key:"validateMinMax",value:function(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),DP(this.element,{"aria-valuemin":this.min.toString(),"aria-valuemax":this.max.toString()})}},{key:"formattedValue",value:function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)}},{key:"validateStep",value:function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)}},{key:"action",value:function(e,t){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)}},{key:"checkErrorClass",value:function(){this.isValidState?_P([this.container],"e-error"):wP([this.container],"e-error"),DP(this.element,{"aria-invalid":this.isValidState?"false":"true"})}},{key:"bindClearEvent",value:function(){this.showClearButton&&OR.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}},{key:"resetHandler",value:function(e){e.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)}},{key:"clear",value:function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",MP(this.element,"form")){var t=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),t.dispatchEvent(i)}}},{key:"resetFormHandler",value:function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)}},{key:"setSpinButton",value:function(){RD(this.spinDown)||DP(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),RD(this.spinUp)||DP(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})}},{key:"wireEvents",value:function(){OR.add(this.element,"focus",this.focusHandler,this),OR.add(this.element,"blur",this.focusOutHandler,this),OR.add(this.element,"keydown",this.keyDownHandler,this),OR.add(this.element,"keyup",this.keyUpHandler,this),OR.add(this.element,"input",this.inputHandler,this),OR.add(this.element,"keypress",this.keyPressHandler,this),OR.add(this.element,"change",this.changeHandler,this),OR.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&OR.add(this.formEle,"reset",this.resetFormHandler,this))}},{key:"wireSpinBtnEvents",value:function(){OR.add(this.spinUp,AR.touchStartEvent,this.mouseDownOnSpinner,this),OR.add(this.spinDown,AR.touchStartEvent,this.mouseDownOnSpinner,this),OR.add(this.spinUp,AR.touchEndEvent,this.mouseUpOnSpinner,this),OR.add(this.spinDown,AR.touchEndEvent,this.mouseUpOnSpinner,this),OR.add(this.spinUp,AR.touchMoveEvent,this.touchMoveOnSpinner,this),OR.add(this.spinDown,AR.touchMoveEvent,this.touchMoveOnSpinner,this)}},{key:"unwireEvents",value:function(){OR.remove(this.element,"focus",this.focusHandler),OR.remove(this.element,"blur",this.focusOutHandler),OR.remove(this.element,"keyup",this.keyUpHandler),OR.remove(this.element,"input",this.inputHandler),OR.remove(this.element,"keydown",this.keyDownHandler),OR.remove(this.element,"keypress",this.keyPressHandler),OR.remove(this.element,"change",this.changeHandler),OR.remove(this.element,"paste",this.pasteHandler),this.formEle&&OR.remove(this.formEle,"reset",this.resetFormHandler)}},{key:"unwireSpinBtnEvents",value:function(){OR.remove(this.spinUp,AR.touchStartEvent,this.mouseDownOnSpinner),OR.remove(this.spinDown,AR.touchStartEvent,this.mouseDownOnSpinner),OR.remove(this.spinUp,AR.touchEndEvent,this.mouseUpOnSpinner),OR.remove(this.spinDown,AR.touchEndEvent,this.mouseUpOnSpinner),OR.remove(this.spinUp,AR.touchMoveEvent,this.touchMoveOnSpinner),OR.remove(this.spinDown,AR.touchMoveEvent,this.touchMoveOnSpinner)}},{key:"changeHandler",value:function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)}},{key:"raiseChangeEvent",value:function(e){if(this.prevValue!==this.value){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),ID(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}}},{key:"pasteHandler",value:function(){var e=this;if(this.enabled&&!this.readonly){var t=this.element.value;setTimeout((function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)}))}}},{key:"preventHandler",value:function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout((function(){if(e.element.selectionStart>0){var i,n=e.element.selectionStart,r=e.element.selectionStart-1,a=e.element.value.split("");i=TD("decimal",dR(e.locale)).charCodeAt(0)," "===e.element.value[r]&&e.element.selectionStart>0&&!t?(RD(e.prevVal)?e.element.value=e.element.value.trim():0!==r?e.element.value=e.prevVal:0===r&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(r,r)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(a.indexOf(e.element.value[e.element.selectionStart-1])!==a.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===i||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==i)&&(e.element.value=e.element.value.substring(0,r)+e.element.value.substring(n,e.element.value.length),e.element.setSelectionRange(r,r),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(a.indexOf(e.element.value[e.element.selectionStart-2])!==a.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===i||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==i)&&(e.element.setSelectionRange(r,r),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(e.element.value=RD(e.prevVal)?e.element.value:e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.prevVal=e.element.value}}))}},{key:"keyUpHandler",value:function(e){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&AR.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);if(t=null===t||isNaN(t)?null:t,this.hiddenInput.value=t||0===t?t.toString():null,MP(this.element,"form")){var i=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}}}},{key:"inputHandler",value:function(e){if(this.enabled&&!this.readonly){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||t)&&AR.isDevice&&this.preventHandler(),this.isVue){var i=this.instance.getNumberParser({format:"n"})(this.element.value),n=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),r={event:e,value:null===i||isNaN(i)?null:i,previousValue:null===n||isNaN(n)?null:n};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",r)}}}},{key:"keyDownHandler",value:function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action("increment",e);break;case 40:e.preventDefault(),this.action("decrement",e)}}},{key:"performAction",value:function(e,t,i){(null===e||isNaN(e))&&(e=0);var n="increment"===i?e+t:e-t;return n=this.correctRounding(e,t,n),this.strictMode?this.trimValue(n):n}},{key:"correctRounding",value:function(e,t,i){var n=new RegExp("[,.](.*)"),r=(e.toString(),t.toString(),n.test(e.toString())),a=n.test(t.toString());if(r||a){var o=r?n.exec(e.toString())[0].length:0,s=a?n.exec(t.toString())[0].length:0,l=Math.max(o,s);return this.roundValue(i,l)}return i}},{key:"roundValue",value:function(e,t){t=t||0;var i=Math.pow(10,t);return Math.round(e*=i)/i}},{key:"updateValue",value:function(e,t){t&&(this.isInteract=!0),null===e||isNaN(e)||this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),(!this.isVue||this.isVue&&!this.preventChange)&&this.raiseChangeEvent(t)}},{key:"updateCurrency",value:function(e,t){AD(e,t,this.cultureInfo),this.updateValue(this.value)}},{key:"changeValue",value:function(e){var t;e||0===e?(t=this.getNumberOfDecimals(e),this.setProperties({value:this.roundNumber(e,t)},!0)):this.setProperties({value:e=null},!0),this.modifyText(),this.strictMode||this.validateState()}},{key:"modifyText",value:function(){if(this.value||0===this.value){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),DP(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null}},{key:"setElementValue",value:function(e,t){cV.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)}},{key:"validateState",value:function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()}},{key:"getNumberOfDecimals",value:function(e){var t,i=new RegExp("[eE][-+]?([0-9]+)"),n=e.toString();if(i.test(n)){var r=i.exec(n);RD(r)||(n=e.toFixed(Math.min(parseInt(r[1],10),20)))}var a=n.split(".")[1];return t=a&&a.length?a.length:0,null!==this.decimals&&(t=t<this.decimals?t:this.decimals),t}},{key:"formatNumber",value:function(){var e;return e=this.getNumberOfDecimals(this.value),this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)}},{key:"trimValue",value:function(e){return e>this.max?this.max:e<this.min?this.min:e}},{key:"roundNumber",value:function(e,t){var i=e,n=t||0,r=i.toString().split("e"),a=(i=Math.round(Number(r[0]+"e"+(r[1]?Number(r[1])+n:n)))).toString().split("e");return i=Number(a[0]+"e"+(a[1]?Number(a[1])-n:-n)),Number(i.toFixed(n))}},{key:"cancelEvent",value:function(e){return e.preventDefault(),!1}},{key:"keyPressHandler",value:function(e){if(!this.enabled||this.readonly)return!0;if(!AR.isDevice&&"11.0"===AR.info.version&&13===e.keyCode){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var i=String.fromCharCode(e.which),n=this.element.value;return n=n.substring(0,this.element.selectionStart)+i+n.substring(this.element.selectionEnd),!!this.numericRegex().test(n)||(e.preventDefault(),e.stopPropagation(),!1)}},{key:"numericRegex",value:function(){var e=TD("decimal",dR(this.locale)),t="*";return"."===e&&(e="\\"+e),0===this.decimals&&this.validateDecimalOnType?VV:(this.decimals&&this.validateDecimalOnType&&(t="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+e+"\\d"+t+")?)|("+e+"\\d"+t+")))?$"))}},{key:"mouseWheel",value:function(e){var t;e.preventDefault(),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t>0?this.action("increment",e):t<0&&this.action("decrement",e),this.cancelEvent(e)}},{key:"focusHandler",value:function(e){var t=this;if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,_P([this.container],"e-error"),this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();this.setElementValue(i),this.isPrevFocused||(AR.isDevice||"11.0"!==AR.info.version?setTimeout((function(){t.element.setSelectionRange(0,i.length)}),AR.isDevice&&AR.isIos?600:0):this.element.setSelectionRange(0,i.length))}AR.isDevice||OR.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}}},{key:"focusOutHandler",value:function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),AR.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout((function(){t.setElementValue(i,n)}),200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var r=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(r),AR.isDevice||OR.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(MP(this.element,"form")){var a=this.element.nextElementSibling,o=document.createEvent("FocusEvent");o.initEvent("focusout",!1,!0),a.dispatchEvent(o)}}}},{key:"mouseDownOnSpinner",value:function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var i=e.currentTarget,n=i.classList.contains("e-spin-up")?"increment":"decrement";OR.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.action(n,e)}),150),OR.add(document,"mouseup",this.mouseUpClick,this)}}},{key:"touchMoveOnSpinner",value:function(e){document.elementFromPoint(e.clientX,e.clientY).classList.contains(BV)||clearInterval(this.timeOut)}},{key:"mouseUpOnSpinner",value:function(e){if(this.isPrevFocused&&(this.element.focus(),AR.isDevice||(this.isPrevFocused=!1)),AR.isDevice||e.preventDefault(),this.getElementData(e)){var t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";if(OR.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,OR.remove(document,"mouseup",this.mouseUpClick),MP(this.element,"form")){var n=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),n.dispatchEvent(r)}}}},{key:"getElementData",value:function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))}},{key:"floatLabelTypeUpdate",value:function(){cV.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),cV.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])}},{key:"mouseUpClick",value:function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,OR.remove(this.spinUp,"mouseleave",this.mouseUpClick),OR.remove(this.spinDown,"mouseleave",this.mouseUpClick)}},{key:"increment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.step;this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"increment")),this.raiseChangeEvent()}},{key:"decrement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.step;this.isInteract=!1,this.changeValue(this.performAction(this.value,e,"decrement")),this.raiseChangeEvent()}},{key:"destroy",value:function(){this.unwireEvents(),xP(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),xP(this.spinUp),xP(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","autocorrect","aria-disabled","aria-placeholder","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),xP(this.container),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"getText",value:function(){return this.element.value}},{key:"focusIn",value:function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),wP([this.container],["e-input-focus"]))}},{key:"focusOut",value:function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),_P([this.container],["e-input-focus"]))}},{key:"getPersistData",value:function(){return this.addOnPersist(["value"])}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];switch(r){case"width":this.setElementWidth(e.width);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":cV.setEnabled(e.enabled,this.element);break;case"enableRtl":cV.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":cV.setReadonly(e.readonly,this.element),this.readonly?DP(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0);break;case"placeholder":cV.setPlaceholder(e.placeholder,this.element);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.updateValue(e.value),this.isVue&&this.preventChange&&(this.preventChange=!1);break;case"min":case"max":AD(r,TD(r,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),cV.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=TD(r,e);this.setProperties({currencyCode:a},!0),this.updateCurrency(r,a);break;case"currencyCode":var o=TD(r,e);this.setProperties({currency:o},!0),this.updateCurrency("currency",o);break;case"format":AD(r,TD(r,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}}},{key:"updateClearButton",value:function(e){cV.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()}},{key:"updateSpinButton",value:function(e){e.showSpinButton?this.spinBtnCreation():(xP(this.spinUp),xP(this.spinDown))}},{key:"getModuleName",value:function(){return"numerictextbox"}}]),i}(kM),FV([QP("")],CV.prototype,"cssClass",void 0),FV([QP(null)],CV.prototype,"value",void 0),FV([QP(-Number.MAX_VALUE)],CV.prototype,"min",void 0),FV([QP(Number.MAX_VALUE)],CV.prototype,"max",void 0),FV([QP(1)],CV.prototype,"step",void 0),FV([QP(null)],CV.prototype,"width",void 0),FV([QP(null)],CV.prototype,"placeholder",void 0),FV([QP({})],CV.prototype,"htmlAttributes",void 0),FV([QP(!0)],CV.prototype,"showSpinButton",void 0),FV([QP(!1)],CV.prototype,"readonly",void 0),FV([QP(!0)],CV.prototype,"enabled",void 0),FV([QP(!1)],CV.prototype,"showClearButton",void 0),FV([QP(!1)],CV.prototype,"enablePersistence",void 0),FV([QP("n2")],CV.prototype,"format",void 0),FV([QP(null)],CV.prototype,"decimals",void 0),FV([QP(null)],CV.prototype,"currency",void 0),FV([QP(null)],CV.prototype,"currencyCode",void 0),FV([QP(!0)],CV.prototype,"strictMode",void 0),FV([QP(!1)],CV.prototype,"validateDecimalOnType",void 0),FV([QP("Never")],CV.prototype,"floatLabelType",void 0),FV([eM()],CV.prototype,"created",void 0),FV([eM()],CV.prototype,"destroyed",void 0),FV([eM()],CV.prototype,"change",void 0),FV([eM()],CV.prototype,"focus",void 0),FV([eM()],CV.prototype,"blur",void 0),CV=FV([tM],CV)),UV=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},qV={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},WV=function(e){return e[e.Message=0]="Message",e[e.Label=1]="Label",e}({}),zV=((_V=wV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,n,e)).validated=[],r.errorRules=[],r.allowSubmit=!1,r.required="required",r.infoElement=null,r.inputElement=null,r.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",r.localyMessage={},r.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===r.rules&&(r.rules={}),r.l10n=new PM("formValidator",r.defaultMessages,r.locale),r.locale&&r.localeFunc(),sR.on("notifyExternalChange",r.afterLocalization,_assertThisInitialized(r)),e="string"==typeof e?RP(e,document):e,null!=r.element&&(r.element.setAttribute("novalidate",""),r.inputElements=PP(r.selectQuery,r.element),r.createHTML5Rules(),r.wireEvents()),r}return _createClass(i,[{key:"addRules",value:function(e,t){e&&(this.rules.hasOwnProperty(e)?DD(this.rules[e],t,{}):this.rules[e]=t)}},{key:"removeRules",value:function(e,t){if(e||t)if(this.rules[e]&&!t)delete this.rules[e];else{if(RD(this.rules[e]&&t))return;for(var i=0;i<t.length;i++)delete this.rules[e][t[i]]}else this.rules={}}},{key:"validate",value:function(e){var t=Object.keys(this.rules);if(e&&t.length)return this.validateRules(e),-1!==t.indexOf(e)&&0===this.errorRules.filter((function(t){return t.name===e})).length;this.errorRules=[];for(var i=0,n=t;i<n.length;i++){var r=n[i];this.validateRules(r)}return 0===this.errorRules.length}},{key:"reset",value:function(){this.element.reset(),this.clearForm()}},{key:"getInputElement",value:function(e){return this.inputElement=RP('[name="'+e+'"]',this.element),this.inputElement}},{key:"destroy",value:function(){this.reset(),this.unwireEvents(),this.rules={};var e,t=_createForOfIteratorHelper(PP("."+this.errorClass+", ."+this.validClass,this.element));try{for(t.s();!(e=t.n()).done;)xP(e.value)}catch(n){t.e(n)}finally{t.f()}_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),sR.off("notifyExternalChange",this.afterLocalization)}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"locale":this.localeFunc()}}},{key:"localeFunc",value:function(){for(var e=0,t=Object.keys(this.defaultMessages);e<t.length;e++){var i=t[e];this.l10n.setLocale(this.locale);var n=this.l10n.getConstant(i);this.localyMessage[i]=n}}},{key:"getModuleName",value:function(){return"formValidator"}},{key:"afterLocalization",value:function(e){this.locale=e.locale,this.localeFunc()}},{key:"refresh",value:function(){this.unwireEvents(),this.inputElements=PP(this.selectQuery,this.element),this.wireEvents()}},{key:"clearForm",value:function(){this.errorRules=[],this.validated=[];var e,t=_createForOfIteratorHelper(PP(this.selectQuery,this.element));try{for(t.s();!(e=t.n()).done;){var i=e.value;i.removeAttribute("aria-invalid"),i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),i.classList.remove(this.validClass)}}catch(n){t.e(n)}finally{t.f()}}},{key:"createHTML5Rules",value:function(){var e,t=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],i=["hidden","email","url","date","number","tel"],n=_createForOfIteratorHelper(this.inputElements);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,o={},s=_createForOfIteratorHelper(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(null!==a.getAttribute(l))switch(l){case"required":this.defRule(a,o,l,a.required);break;case"data-validation":l=a.getAttribute(l),this.defRule(a,o,l,!0);break;case"type":-1!==i.indexOf(a.type)&&this.defRule(a,o,a.type,!0);break;case"rangeLength":case"range":this.defRule(a,o,l,JSON.parse(a.getAttribute(l)));break;case"equalTo":var c=a.getAttribute(l);this.defRule(a,o,l,c);break;default:"true"===a.getAttribute("data-val")?this.annotationRule(a,o,l,a.getAttribute(l)):this.defRule(a,o,l,a.getAttribute(l))}}}catch(u){s.e(u)}finally{s.f()}0!==Object.keys(o).length&&this.addRules(a.name,o)}}catch(u){n.e(u)}finally{n.f()}}},{key:"annotationRule",value:function(e,t,i,n){var r=i.split("-"),a=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],o=r[r.length-1],s=r[r.length-2];if(-1!==a.indexOf(o))switch(o){case"required":this.defRule(e,t,"required",n);break;case"creditcard":this.defRule(e,t,"creditcard",n);break;case"phone":this.defRule(e,t,"tel",n)}else if(-1!==a.indexOf(s))switch(s){case"maxlength":this.defRule(e,t,"maxLength",n);break;case"minlength":this.defRule(e,t,"minLength",n);break;case"range":var l=e.getAttribute("data-val-range-min"),c=e.getAttribute("data-val-range-max");this.defRule(e,t,"range",[l,c]);break;case"equalto":var u=e.getAttribute(i).split(".");this.defRule(e,t,"equalTo",u[u.length-1]);break;case"regex":this.defRule(e,t,"regex",n)}}},{key:"defRule",value:function(e,t,i,n){var r,a=e.getAttribute("data-"+i+"-message"),o=e.getAttribute("data-val-"+i);this.rules[e.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(e.name),r=this.getErrorMessage(this.rules[e.name][i],i)),a?n=[n,a]:o?n=[n,o]:r&&(n=[n,r]),t[i]=n}},{key:"wireEvents",value:function(){var e,t=_createForOfIteratorHelper(this.inputElements);try{for(t.s();!(e=t.n()).done;){var i=e.value;wV.isCheckable(i)?OR.add(i,"click",this.clickHandler,this):"SELECT"===i.tagName?OR.add(i,"change",this.changeHandler,this):(OR.add(i,"focusout",this.focusOutHandler,this),OR.add(i,"keyup",this.keyUpHandler,this))}}catch(n){t.e(n)}finally{t.f()}OR.add(this.element,"submit",this.submitHandler,this),OR.add(this.element,"reset",this.resetHandler,this)}},{key:"unwireEvents",value:function(){var e,t=_createForOfIteratorHelper(this.inputElements);try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.clearEvents(i)}}catch(n){t.e(n)}finally{t.f()}OR.remove(this.element,"submit",this.submitHandler),OR.remove(this.element,"reset",this.resetHandler)}},{key:"focusOutHandler",value:function(e){this.trigger("focusout",e);var t=e.target;this.rules[t.name]&&(this.rules[t.name][this.required]||t.value.length>0?this.validate(t.name):-1===this.validated.indexOf(t.name)&&this.validated.push(t.name))}},{key:"keyUpHandler",value:function(e){this.trigger("keyup",e);var t=e.target;(9!==e.which||this.rules[t.name]&&(!this.rules[t.name]||this.rules[t.name][this.required]))&&-1!==this.validated.indexOf(t.name)&&this.rules[t.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(e.which)&&this.validate(t.name)}},{key:"clickHandler",value:function(e){this.trigger("click",e);var t=e.target;"submit"!==t.type?this.validate(t.name):null!==t.getAttribute("formnovalidate")&&(this.allowSubmit=!0)}},{key:"changeHandler",value:function(e){this.trigger("change",e),this.validate(e.target.name)}},{key:"submitHandler",value:function(e){this.trigger("submit",e),this.allowSubmit||this.validate()?this.allowSubmit=!1:e.preventDefault()}},{key:"resetHandler",value:function(){this.clearForm()}},{key:"validateRules",value:function(e){if(this.rules[e]){var t=Object.keys(this.rules[e]),i=!1,n=!1,r=t.indexOf("validateHidden"),a=t.indexOf("hidden");if(this.getInputElement(e),-1!==a&&(i=!0),-1!==r&&(n=!0),!i||i&&n){-1!==r&&t.splice(r,1),-1!==a&&t.splice(a-1,1),this.getErrorElement(e);var o,s=_createForOfIteratorHelper(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=this.getErrorMessage(this.rules[e][l],l),u={name:e,message:c},h={inputName:e,element:this.inputElement,message:c};if(!this.isValid(e,l)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(e),this.errorRules.push(u),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(u):this.createErrorElement(e,u.message,this.inputElement),h.errorElement=this.infoElement,h.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(e,h),this.trigger("validationComplete",h),"required"===l&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(e),h.status="success",this.trigger("validationComplete",h)}}catch(d){s.e(d)}finally{s.f()}}}}},{key:"optionalValidationStatus",value:function(e,t){this.rules[e][this.required]||this.inputElement.value.length||RD(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),t.status="",this.hideMessage(e))}},{key:"isValid",value:function(e,t){var i=this.rules[e][t],n=this.rules[e][t],r={value:this.inputElement.value,param:i instanceof Array&&"string"==typeof i[1]?i[0]:i,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",r),n&&"function"==typeof n[0]?n[0].call(this,{element:this.inputElement,value:this.inputElement.value}):wV.isCheckable(this.inputElement)?"required"!==t||PP("input[name="+e+"]:checked",this.element).length>0:wV.checkValidator[t](r)}},{key:"getErrorMessage",value:function(e,t){var i=this.inputElement.getAttribute("data-"+t+"-message")?this.inputElement.getAttribute("data-"+t+"-message"):e instanceof Array&&"string"==typeof e[1]?e[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[t]:this.defaultMessages[t],n=i.match(/{(\d)}/g);if(!RD(n))for(var r=0;r<n.length;r++)i=i.replace(n[r],e instanceof Array?e[r]:e);return i}},{key:"createErrorElement",value:function(e,t,i){var n=CP(this.errorElement,{className:this.errorClass,innerHTML:t,attrs:{for:e}});if(this.errorOption===WV.Message&&(n.classList.remove(this.errorClass),n.classList.add("e-message"),n=CP(this.errorContainer,{className:this.errorClass,innerHTML:n.outerHTML})),n.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(n);else if(!0===i.hasAttribute("data-msg-containerid")){var r=i.getAttribute("data-msg-containerid");this.element.querySelector("#"+r).appendChild(n)}else null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,n):this.inputElement.parentNode.insertBefore(n,this.inputElement.nextSibling);n.style.display="block",this.getErrorElement(e),this.validated.push(e),this.checkRequired(e)}},{key:"getErrorElement",value:function(e){return this.infoElement=RP(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=RP(this.errorElement+"."+this.errorClass+'[for="'+e+'"]',this.element)),this.infoElement}},{key:"removeErrorRules",value:function(e){for(var t=0;t<this.errorRules.length;t++)this.errorRules[t].name===e&&this.errorRules.splice(t,1)}},{key:"showMessage",value:function(e){this.infoElement.style.display="block",this.infoElement.innerHTML=e.message,this.checkRequired(e.name)}},{key:"hideMessage",value:function(e){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(e),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))}},{key:"checkRequired",value:function(e){this.rules[e][this.required]||this.inputElement.value.length||RD(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(e))}}],[{key:"isCheckable",value:function(e){var t=e.getAttribute("type");return t&&("checkbox"===t||"radio"===t||"submit"===t)}}]),i}(VP)).checkValidator={required:function(e){return isNaN(Date.parse(e.value))?e.value.toString().length>0:!isNaN(new Date(e.value).getTime())},email:function(e){return qV.EMAIL.test(e.value)},url:function(e){return qV.URL.test(e.value)},dateIso:function(e){return qV.DATE_ISO.test(e.value)},tel:function(e){return qV.PHONE.test(e.value)},creditcard:function(e){return qV.CREDITCARD.test(e.value)},number:function(e){return!isNaN(Number(e.value))&&-1===e.value.indexOf(" ")},digits:function(e){return qV.DIGITS.test(e.value)},maxLength:function(e){return e.value.length<=e.param},minLength:function(e){return e.value.length>=e.param},rangeLength:function(e){var t=e.param;return e.value.length>=t[0]&&e.value.length<=t[1]},range:function(e){var t=e.param;return!isNaN(Number(e.value))&&Number(e.value)>=t[0]&&Number(e.value)<=t[1]},date:function(e){return!isNaN(new Date(e.value).getTime())},max:function(e){return isNaN(Number(e.value))?new Date(e.value).getTime()<=new Date(JSON.parse(JSON.stringify(e.param))).getTime():+e.value<=e.param},min:function(e){if(isNaN(Number(e.value))){if(-1!==e.value.indexOf(",")){var t=e.value.replace(/,/g,"");return parseFloat(t)>=e.param}return new Date(e.value).getTime()>=new Date(JSON.parse(JSON.stringify(e.param))).getTime()}return+e.value>=e.param},regex:function(e){return new RegExp(e.param).test(e.value)},equalTo:function(e){var t=e.formElement.querySelector("#"+e.param);return e.param=t.value,e.param===e.value}},UV([QP("")],_V.prototype,"locale",void 0),UV([QP("e-hidden")],_V.prototype,"ignore",void 0),UV([QP()],_V.prototype,"rules",void 0),UV([QP("e-error")],_V.prototype,"errorClass",void 0),UV([QP("e-valid")],_V.prototype,"validClass",void 0),UV([QP("label")],_V.prototype,"errorElement",void 0),UV([QP("div")],_V.prototype,"errorContainer",void 0),UV([QP(WV.Label)],_V.prototype,"errorOption",void 0),UV([eM()],_V.prototype,"focusout",void 0),UV([eM()],_V.prototype,"keyup",void 0),UV([eM()],_V.prototype,"click",void 0),UV([eM()],_V.prototype,"change",void 0),UV([eM()],_V.prototype,"submit",void 0),UV([eM()],_V.prototype,"validationBegin",void 0),UV([eM()],_V.prototype,"validationComplete",void 0),UV([eM()],_V.prototype,"customPlacement",void 0),_V=wV=UV([tM],_V)),GV=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},YV=(SV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"preRender",value:function(){this.browser=AR.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=AR.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=MD("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")}},{key:"render",value:function(){this.touchModule=new FM(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),OR.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()}},{key:"setScrollState",value:function(){RD(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0}},{key:"initialize",value:function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");var i,n=this.element,r=_createForOfIteratorHelper([].slice.call(n.children));try{for(r.s();!(i=r.n()).done;){var a=i.value;e.appendChild(a)}}catch(o){r.e(o)}finally{r.f()}t.appendChild(e),n.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e}},{key:"getPersistData",value:function(){return this.addOnPersist(["scrollStep"])}},{key:"getModuleName",value:function(){return"hScroll"}},{key:"destroy",value:function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove("e-scroll-device");var t=PP(".e-"+e.id+"_nav.e-scroll-nav",e),n=PP(".e-scroll-overlay",e);[].slice.call(n).forEach((function(e){xP(e)}));var r,a=_createForOfIteratorHelper([].slice.call(this.scrollItems.children));try{for(a.s();!(r=a.n()).done;){var o=r.value;e.appendChild(o)}}catch(s){a.e(s)}finally{a.f()}this.uniqueId&&this.element.removeAttribute("id"),xP(this.scrollEle),t.length>0&&(xP(t[0]),RD(t[1])||xP(t[1])),OR.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"disable",value:function(e){var t=PP(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))}},{key:"createOverlay",value:function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:n}),a=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(a);var o=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(o,e.firstChild),this.eventBinding([r])}},{key:"createNavIcon",value:function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),a="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),o=this.createElement("div",{id:t.concat("_left"),className:a+" e-overlay"});o.setAttribute("aria-disabled","true");var s=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});o.appendChild(s),n.appendChild(r),e.appendChild(n),e.insertBefore(o,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),o.classList.add("e-ie-align")),this.eventBinding([n,o])}},{key:"onKeyPress",value:function(e){var t=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100))}},{key:"onKeyUp",value:function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}},{key:"eventBinding",value:function(e){var t=this;[].slice.call(e).forEach((function(e){new FM(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),OR.add(e,"click",t.clickEventHandler,t)}))}},{key:"repeatScroll",value:function(){clearInterval(this.timeout)}},{key:"tabHoldHandler",value:function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i,this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)}},{key:"contains",value:function(e,t){return e.classList.contains(t)}},{key:"eleScrolling",value:function(e,t,i){var n=this.element,r=t.classList;r.contains("e-scroll-nav")&&(r=t.querySelector(".e-nav-arrow").classList),this.contains(n,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?r.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):r.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)}},{key:"clickEventHandler",value:function(e){this.eleScrolling(this.scrollStep,e.target,!1)}},{key:"swipeHandler",value:function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function r(){var a=Math.sin(n);a<=0?window.cancelAnimationFrame(a):("Left"===e.swipeDirection?i.scrollLeft+=t*a:"Right"===e.swipeDirection&&(i.scrollLeft-=t*a),n-=.5,window.requestAnimationFrame(r))}()}},{key:"scrollUpdating",value:function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e}},{key:"frameScrollRequest",value:function(e,t,i){var n=this;i?this.scrollUpdating(e,t):(this.customStep||[].slice.call(PP(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth})),function i(){var r,a;n.contains(n.element,"e-rtl")&&n.browserCheck?(r=-e,a=-10):(r=e,a=10),r<10?window.cancelAnimationFrame(a):(n.scrollUpdating(a,t),e-=a,window.requestAnimationFrame(i))}())}},{key:"touchHandler",value:function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,"e-rtl")&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)}},{key:"arrowDisabling",value:function(e,t){if(this.isDevice){var i=(RD(e)?t:e).querySelector(".e-nav-arrow");RD(e)?NP(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):NP(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}},{key:"scrollHandler",value:function(e){var t=e.target,i=t.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),a=this.element.querySelector(".e-scroll-right-nav"),o=this.element.querySelector(".e-scroll-left-overlay"),s=this.element.querySelector(".e-scroll-right-overlay"),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector(".e-scroll-right-overlay"),s=this.element.querySelector(".e-scroll-left-overlay")),o.style.width=l<40?l+"px":"40px",s.style.width=t.scrollWidth-Math.ceil(i+l)<40?t.scrollWidth-Math.ceil(i+l)+"px":"40px"),0===l)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(r,a):this.arrowDisabling(a,r);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?this.arrowDisabling(a,r):this.arrowDisabling(r,a);else{var c=this.element.querySelector(".e-scroll-nav.e-overlay");c&&(c.classList.remove("e-overlay"),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}}]),i}(kM),GV([QP(null)],SV.prototype,"scrollStep",void 0),SV=GV([tM],SV)),KV=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},XV=(EV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"preRender",value:function(){this.browser=AR.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=AR.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=MD("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")}},{key:"render",value:function(){this.touchModule=new FM(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),OR.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),OR.add(this.element,"wheel",this.wheelEventHandler,this)}},{key:"setScrollState",value:function(){RD(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0}},{key:"initialize",value:function(){var e=CP("div",{className:"e-vscroll-content"}),t=CP("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");var i,n=this.element,r=_createForOfIteratorHelper([].slice.call(n.children));try{for(r.s();!(i=r.n()).done;){var a=i.value;e.appendChild(a)}}catch(o){r.e(o)}finally{r.f()}t.appendChild(e),n.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e}},{key:"getPersistData",value:function(){return this.addOnPersist(["scrollStep"])}},{key:"getModuleName",value:function(){return"vScroll"}},{key:"destroy",value:function(){var e=this.element;e.style.display="",_P([this.element],["e-vscroll","e-scroll-device"]);var t=PP(".e-"+e.id+"_nav.e-scroll-nav",e),n=PP(".e-scroll-overlay",e);[].slice.call(n).forEach((function(e){xP(e)}));var r,a=_createForOfIteratorHelper([].slice.call(this.scrollItems.children));try{for(a.s();!(r=a.n()).done;){var o=r.value;e.appendChild(o)}}catch(s){a.e(s)}finally{a.f()}this.uniqueId&&this.element.removeAttribute("id"),xP(this.scrollEle),t.length>0&&(xP(t[0]),RD(t[1])||xP(t[1])),OR.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"disable",value:function(e){var t=PP(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))}},{key:"createOverlayElement",value:function(e){var t=e.id.concat("_nav"),i=CP("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),r=CP("div",{id:t.concat("down"),className:n}),a=CP("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});r.appendChild(a);var o=CP("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(o,e.firstChild),this.eventBinding([r])}},{key:"createNavIcon",value:function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=CP("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var r=CP("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),a="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),o=CP("div",{id:t.concat("_up"),className:a+" e-overlay"});o.setAttribute("aria-disabled","true");var s=CP("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});o.appendChild(s),n.appendChild(r),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(o,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),o.classList.add("e-ie-align")),this.eventBinding([n,o])}},{key:"onKeyPress",value:function(e){var t=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100))}},{key:"onKeyUp",value:function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))}},{key:"eventBinding",value:function(e){var t=this;[].slice.call(e).forEach((function(e){new FM(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),OR.add(e,"click",t.clickEventHandler,t)}))}},{key:"repeatScroll",value:function(){clearInterval(this.timeout)}},{key:"tabHoldHandler",value:function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i,this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)}},{key:"contains",value:function(e,t){return e.classList.contains(t)}},{key:"eleScrolling",value:function(e,t,i){var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)}},{key:"clickEventHandler",value:function(e){this.eleScrolling(this.scrollStep,e.target,!1)}},{key:"wheelEventHandler",value:function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)}},{key:"swipeHandler",value:function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function r(){var a=Math.sin(n);a<=0?window.cancelAnimationFrame(a):("Up"===e.swipeDirection?i.scrollTop+=t*a:"Down"===e.swipeDirection&&(i.scrollTop-=t*a),n-=.02,window.requestAnimationFrame(r))}()}},{key:"scrollUpdating",value:function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e}},{key:"frameScrollRequest",value:function(e,t,i){var n=this;i?this.scrollUpdating(e,t):(this.customStep||[].slice.call(PP(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight})),function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}())}},{key:"touchHandler",value:function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)}},{key:"arrowDisabling",value:function(e,t){if(this.isDevice){var i=(RD(e)?t:e).querySelector(".e-nav-arrow");RD(e)?NP(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):NP(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()}},{key:"scrollEventHandler",value:function(e){var t=e.target,i=t.offsetHeight,n=this.element.querySelector(".e-scroll-up-nav"),r=this.element.querySelector(".e-scroll-down-nav"),a=this.element.querySelector(".e-scroll-up-overlay"),o=this.element.querySelector(".e-scroll-down-overlay"),s=t.scrollTop;if(s<=0&&(s=-s),this.isDevice&&(a.style.height=s<40?s+"px":"40px",o.style.height=t.scrollHeight-Math.ceil(i+s)<40?t.scrollHeight-Math.ceil(i+s)+"px":"40px"),0===s)this.arrowDisabling(n,r);else if(Math.ceil(i+s+.1)>=t.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}}]),i}(kM),KV([QP(null)],EV.prototype,"scrollStep",void 0),EV=KV([tM],EV)),JV=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},QV="e-toolbar-items",ZV="e-blazor-toolbar-items",$V="e-toolbar-item",ej="e-toolbar-popup",tj=(AV=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),JV([QP("")],AV.prototype,"id",void 0),JV([QP("")],AV.prototype,"text",void 0),JV([QP("auto")],AV.prototype,"width",void 0),JV([QP("")],AV.prototype,"cssClass",void 0),JV([QP(!1)],AV.prototype,"showAlwaysInPopup",void 0),JV([QP(!1)],AV.prototype,"disabled",void 0),JV([QP("")],AV.prototype,"prefixIcon",void 0),JV([QP("")],AV.prototype,"suffixIcon",void 0),JV([QP(!0)],AV.prototype,"visible",void 0),JV([QP("None")],AV.prototype,"overflow",void 0),JV([QP("")],AV.prototype,"template",void 0),JV([QP("Button")],AV.prototype,"type",void 0),JV([QP("Both")],AV.prototype,"showTextOn",void 0),JV([QP(null)],AV.prototype,"htmlAttributes",void 0),JV([QP("")],AV.prototype,"tooltipText",void 0),JV([QP("Left")],AV.prototype,"align",void 0),JV([eM()],AV.prototype,"click",void 0),AV),ij=(TV=function(t){_inherits(n,t);var i=_createSuper(n);function n(e,t){var r;return _classCallCheck2(this,n),(r=i.call(this,e,t)).resizeContext=r.resize.bind(_assertThisInitialized(r)),r.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},r}return _createClass(n,[{key:"destroy",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"destroy",this).call(this),this.unwireEvents(),this.tempId.forEach((function(t){RD(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")}));var t=this.element.querySelectorAll(".e-control");for([].slice.call(t).forEach((function(e){var t=e.ej2_instances;if(t){var i=t[0];i&&i.destroy()}}));this.element.lastElementChild&&!this.element.lastElementChild.classList.contains(ZV);)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&this.element.appendChild(this.ctrlTem),this.clearProperty(),this.popObj=null,this.tbarAlign=null,this.remove(this.element,"e-toolpop"),this.cssClass&&_P([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach((function(t){return e.element.removeAttribute(t)}))}},{key:"preRender",value:function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains("e-vertical"),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,"e-rtl")}},{key:"wireEvents",value:function(){OR.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()}},{key:"wireKeyboardEvent",value:function(){this.keyModule=new RM(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),OR.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")}},{key:"unwireKeyboardEvent",value:function(){this.keyModule&&(OR.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)}},{key:"docKeyDown",value:function(e){if("INPUT"!==e.target.tagName){var t=!RD(this.popObj)&&EP(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}}},{key:"unwireEvents",value:function(){OR.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),OR.remove(document,"scroll",this.docEvent),OR.remove(document,"click",this.docEvent)}},{key:"clearProperty",value:function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}}},{key:"docEvent",value:function(e){var t=MP(e.target,".e-popup");this.popObj&&EP(this.popObj.element)&&!t&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})}},{key:"destroyScroll",value:function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)}},{key:"destroyItems",value:function(){[].slice.call(this.element.querySelectorAll("."+$V)).forEach((function(e){xP(e)}));var e=this.element.querySelector("."+QV);this.tbarAlign&&([].slice.call(e.children).forEach((function(e){xP(e)})),this.tbarAlign=!1,this.remove(e,"e-tbar-pos")),this.clearProperty()}},{key:"destroyMode",value:function(){this.scrollModule&&(this.remove(this.scrollModule.element,"e-rtl"),this.destroyScroll()),this.remove(this.element,"e-tbar-extended"),this.remove(this.element,"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)}},{key:"add",value:function(e,t){e.classList.add(t)}},{key:"remove",value:function(e,t){e.classList.remove(t)}},{key:"elementFocus",value:function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()}},{key:"clstElement",value:function(e,t){return e&&this.popObj&&EP(this.popObj.element)?this.popObj.element.querySelector("."+$V):this.element===t||e?this.element.querySelector("."+$V+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):MP(t,"."+$V)}},{key:"keyHandling",value:function(e,t,i,n,r){var a=this.popObj,o=this.element,s={name:"FadeOut",duration:100};switch(t.action){case"moveRight":if(this.isVertical)return;o===i?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":var l,c;if(e){var u=MP(e,".e-popup");u?EP(this.popObj.element)&&(c=[].slice.call(u.children),l="home"===t.action?c[0]:c[c.length-1]):(c=this.element.querySelectorAll("."+QV+" ."+$V),l="home"===t.action?c[0]:c[c.length-1]),l&&this.elementFocus(l)}break;case"moveUp":case"moveDown":var h="moveUp"===t.action?"previous":"next";if(this.isVertical)this.eleFocus(e,"moveUp"===t.action?"previous":"next");else if(a&&MP(i,".e-popup")){var d=a.element,p=d.firstElementChild;if("previous"===h&&p===e||"next"===h&&d.lastElementChild===e)return;this.eleFocus(e,h)}else"moveDown"===t.action&&a&&EP(a.element)&&this.elementFocus(e);break;case"tab":if(!r&&!n){var f=e.firstElementChild;o===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(f),f.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(s);break;case"popupOpen":if(!n)return;a&&!EP(a.element)?(a.element.style.top=o.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(s)}}},{key:"keyActionHandler",value:function(e){var t,i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains("e-overlay")){e.preventDefault();var n=i.classList.contains("e-hor-nav"),r=i.classList.contains("e-scroll-nav");((t=this.clstElement(n,i))||r)&&this.keyHandling(t,e,i,n,r)}}},{key:"disable",value:function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),t.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(EP(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))}},{key:"eleContains",value:function(e){return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!EP(e)}},{key:"eleFocus",value:function(e,t){var i=Object(e)[t+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,t);this.elementFocus(i)}else if(this.tbarAlign){var n=Object(e.parentElement)[t+"ElementSibling"];if(RD(n)||0!==n.children.length||(n=Object(n)[t+"ElementSibling"]),!RD(n)&&n.children.length>0)if("next"===t){var r=n.querySelector("."+$V);this.eleContains(r)?this.eleFocus(r,t):(r.firstElementChild.focus(),this.activeEleSwitch(r))}else{var a=n.lastElementChild;this.eleContains(a)?this.eleFocus(a,t):this.elementFocus(a)}}}},{key:"clickHandler",value:function(e){var t,i=this,n=e.target,r=n.classList,a=this.element,o=!RD(MP(n,".e-toolbar-pop")),s=MP(n,".e-hor-nav");s||(s=n),a.children[0].classList.contains("e-hscroll")||a.children[0].classList.contains("e-vscroll")||!r.contains("e-hor-nav")||(r=n.querySelector(".e-icons").classList),(r.contains("e-popup-up-icon")||r.contains("e-popup-down-icon"))&&this.popupClickHandler(a,s,"e-rtl");var l=MP(e.target,"."+$V);if(!RD(l)&&!l.classList.contains("e-overlay")||s.classList.contains("e-hor-nav")){l&&(t=this.items[this.tbarEle.indexOf(l)]);var c={originalEvent:e,item:t};t&&!RD(t.click)&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",c),c.cancel||this.trigger("clicked",c,(function(e){!RD(i.popObj)&&o&&!e.cancel&&"Popup"===i.overflowMode&&e.item&&"Input"!==e.item.type&&i.popObj.hide({name:"FadeOut",duration:100})}))}}},{key:"popupClickHandler",value:function(e,t,i){var n=this.popObj;EP(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))}},{key:"render",value:function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()}},{key:"initialize",value:function(){var e=FD(this.width),t=FD(this.height);"msie"===AR.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||LP(this.element,{height:t}),LP(this.element,{width:e}),DP(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&wP([this.element],this.cssClass.split(" "))}},{key:"renderControl",value:function(){var e=this.element;this.trgtEle=e.children.length>0&&!this.isServerRendered?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()}},{key:"renderLayout",value:function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()}},{key:"itemsAlign",value:function(e,t){var i,n;this.tbarEle||(this.tbarEle=[]);for(var r=0;r<e.length;r++)i=this.renderSubComponent(e[r],r),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(e[r],t,r),(n=t.querySelector(".e-toolbar-"+e[r].align.toLowerCase()))?(e[r].showAlwaysInPopup&&"Show"!==e[r].overflow||this.tbarAlgEle[(e[r].align+"s").toLowerCase()].push(i),n.appendChild(i)):t.appendChild(i)}},{key:"serverItemsRerender",value:function(){this.destroyMode(),this.resetServerItems(),this.serverItemsRefresh()}},{key:"serverItemsRefresh",value:function(){this.element.querySelector("."+ZV).children.length>0&&(this.itemsAlign(this.items,this.element.querySelector("."+QV)),this.renderLayout(),this.refreshOverflow())}},{key:"resetServerItems",value:function(){var e=this.element.querySelector("."+ZV);AP([].slice.call(PP("."+QV+" ."+$V,this.element)),e),this.clearProperty()}},{key:"changeOrientation",value:function(){var e=this.element;this.isVertical?(e.classList.remove("e-vertical"),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add("e-vertical"),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),LP(this.element,{height:FD(this.height),width:FD(this.width)})),this.destroyMode(),this.refreshOverflow()}},{key:"initScroll",value:function(e,t){!this.scrollModule&&this.checkOverflow(e,t[0])&&(this.tbarAlign&&this.element.querySelector("."+QV+" .e-toolbar-center").removeAttribute("style"),this.scrollModule=this.isVertical?new XV({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]):new YV({scrollStep:this.scrollStep,enableRtl:this.enableRtl},t[0]),this.remove(this.scrollModule.element,"e-tbar-pos"),LP(this.element,{overflow:"hidden"}))}},{key:"itemWidthCal",value:function(e){var t,i=this,n=0;return[].slice.call(PP("."+$V,e)).forEach((function(e){EP(e)&&(t=window.getComputedStyle(e),n+=i.isVertical?e.offsetHeight:e.offsetWidth,n+=parseFloat(i.isVertical?t.marginTop:t.marginRight),n+=parseFloat(i.isVertical?t.marginBottom:t.marginLeft))})),n}},{key:"getScrollCntEle",value:function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")}},{key:"checkOverflow",value:function(e,t){if(RD(e)||RD(t)||!EP(e))return!1;var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var r=e.querySelector(".e-hor-nav"),a=e.querySelector(".e-scroll-nav"),o=0;return r?o=this.isVertical?r.offsetHeight:r.offsetWidth:a&&(o=this.isVertical?2*a.offsetHeight:2*a.offsetWidth),n>i-o}},{key:"refreshOverflow",value:function(){this.resize()}},{key:"toolbarAlign",value:function(e){this.tbarAlign&&(this.add(e,"e-tbar-pos"),this.itemPositioning())}},{key:"renderOverflowMode",value:function(){var e=this.element,t=e.querySelector("."+QV),i=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===AR.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":RD(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(QV)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,t)||i)&&this.setOverflowAttributes(e),this.toolbarAlign(t);break;case"MultiRow":this.add(t,"e-toolbar-multirow"),this.checkOverflow(e,t)&&this.tbarAlign&&(this.removePositioning(),this.add(t,"e-multirow-pos")),"hidden"===e.style.overflow&&(e.style.overflow=""),"msie"!==AR.info.name&&"auto"===e.style.height||(e.style.height="auto");break;case"Extended":this.add(this.element,"e-extended-toolbar"),(this.checkOverflow(e,t)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(t)}}},{key:"setOverflowAttributes",value:function(e){this.createPopupEle(e,[].slice.call(PP("."+QV+" ."+$V,e))),this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0"),this.element.querySelector(".e-hor-nav").setAttribute("role","list")}},{key:"separator",value:function(){var e,t=this.element,i=[].slice.call(t.querySelectorAll(".e-separator")),n=t.querySelector(".e-multirow-separator"),r=t.querySelector(".e-extended-separator");null!==(e="MultiRow"===this.overflowMode?n:r)&&("MultiRow"===this.overflowMode?e.classList.remove("e-multirow-separator"):"Extended"===this.overflowMode&&e.classList.remove("e-extended-separator"));for(var a=0;a<=i.length-1;a++)i[a].offsetLeft<30&&0!==i[a].offsetLeft&&("MultiRow"===this.overflowMode?i[a].classList.add("e-multirow-separator"):"Extended"===this.overflowMode&&i[a].classList.add("e-extended-separator"))}},{key:"createPopupEle",value:function(e,t){var i=e.querySelector(".e-hor-nav"),n=this.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var r=(n?e.offsetHeight:e.offsetWidth)-(n?i.offsetHeight:i.offsetWidth);this.element.classList.remove("e-rtl"),LP(this.element,{direction:"initial"}),this.checkPriority(e,t,r,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()}},{key:"pushingPoppedEle",value:function(e,t,i,n,r){var a=e.element,o=PP(".e-overflow-show",i),s=0,l=[].slice.call(PP("."+ej,a.querySelector("."+QV))),c=0;l.forEach((function(a,l){o=PP(".e-overflow-show",i),a.classList.contains("e-overflow-show")&&o.length>0?e.tbResize&&o.length>l?(i.insertBefore(a,o[l]),++c):(i.insertBefore(a,i.children[o.length]),++c):a.classList.contains("e-overflow-show")||e.tbResize&&a.classList.contains("e-overflow-hide")&&i.children.length>0&&0===o.length?(i.insertBefore(a,i.firstChild),++c):a.classList.contains("e-overflow-hide")?t.push(a):e.tbResize?(i.insertBefore(a,i.childNodes[s+c]),++s):i.appendChild(a),a.classList.contains("e-separator")?LP(a,{display:"",height:r+"px"}):LP(a,{display:"",height:n+"px"})})),t.forEach((function(e){i.appendChild(e)}));for(var u=PP("."+$V,a.querySelector("."+QV)),h=u.length-1;h>=0;h--){var d=u[h];if(!d.classList.contains("e-separator")||"Extended"===this.overflowMode)break;LP(d,{display:"none"})}}},{key:"createPopup",value:function(){var e,t,i,n,r,a=this.element;if("Extended"===this.overflowMode&&(n=a.querySelector(".e-separator:not(."+ej+")"),i="auto"===a.style.height||""===a.style.height?null:n.offsetHeight),t=a.querySelector("."+$V+":not(.e-separator):not(."+ej+")"),e="auto"===a.style.height||""===a.style.height?null:t&&t.offsetHeight,a.querySelector("#"+a.id+"_popup.e-toolbar-pop"))r=a.querySelector("#"+a.id+"_popup.e-toolbar-pop");else{var o=this.createElement("div",{id:a.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),s=this.createElement("div",{id:a.id+"_popup",className:"e-toolbar-pop"});r="Extended"===this.overflowMode?o:s}this.pushingPoppedEle(this,[],r,e,i),this.popupInit(a,r)}},{key:"getElementOffsetY",value:function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight}},{key:"popupInit",value:function(e,t){if(this.popObj){var i=this.popObj.element;LP(i,{maxHeight:"",display:"block"}),LP(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),LP(this.element,{overflow:""});var n=window.getComputedStyle(this.element),r=new kB(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(r.appendTo(t),"Extended"===this.overflowMode&&(r.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),r.offsetX=0),OR.add(document,"scroll",this.docEvent.bind(this)),OR.add(document,"click ",this.docEvent.bind(this)),r.element.style.maxHeight=r.element.offsetHeight+"px",this.isVertical&&(r.element.style.visibility="hidden"),this.isExtendedOpen){var a=this.element.querySelector(".e-hor-nav");a.classList.add("e-nav-active"),NP(a.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else r.hide();this.popObj=r,this.element.setAttribute("aria-haspopup","true")}}},{key:"tbarPopupHandler",value:function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,"e-tbar-extended"):this.remove(this.element,"e-tbar-extended"))}},{key:"popupOpen",value:function(e){var t=this.popObj;this.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,r=n.querySelector(".e-hor-nav");LP(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.overflowMode&&(t.element.style.minHeight="");var a=i.offsetTop+i.offsetHeight+GF(n).top,o=r.firstElementChild;r.classList.add("e-nav-active"),NP(o,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var s=RD(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+s<a&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(a-window.innerHeight-s+5);t.height=l+"px";for(var c=0;c<=i.childElementCount;c++){var u=i.children[c];if(u.offsetTop+u.offsetHeight>l){l=u.offsetTop;break}}LP(t.element,{maxHeight:l+"px"})}else if(this.isVertical){var h=this.element.getBoundingClientRect();LP(t.element,{maxHeight:h.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}t&&t.refreshPosition()}},{key:"popupClose",value:function(e){var t=this.element.querySelector(".e-hor-nav"),i=t.firstElementChild;t.classList.remove("e-nav-active"),NP(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)}},{key:"checkPriority",value:function(e,t,i,n){for(var r,a=this.popupPriCount>0,o=i,s=0,l=0,c=0,u=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},h=t.length-1;h>=0;h--){var d=void 0,p=window.getComputedStyle(t[h]);this.isVertical?(d=parseFloat(p.marginTop),d+=parseFloat(p.marginBottom)):(d=parseFloat(p.marginRight),d+=parseFloat(p.marginLeft));var f=t[h]===this.tbarEle[0];f&&(this.tbarEleMrgn=d),r=this.isVertical?t[h].offsetHeight:t[h].offsetWidth;var v=f?r+d:r;if(u(t[h],["e-popup-alone"])&&a&&(t[h].classList.add(ej),LP(t[h],this.isVertical?{display:"none",minHeight:v+"px"}:{display:"none",minWidth:v+"px"}),c++),this.isVertical?t[h].offsetTop+t[h].offsetHeight+d>i:t[h].offsetLeft+t[h].offsetWidth+d>i){if(t[h].classList.contains("e-separator")){if("Extended"===this.overflowMode)l===c&&u(t[h],["e-separator","e-ignore"])&&(t[h].classList.add(ej),c++),l++;else if("Popup"===this.overflowMode){if(s>0&&l===c){var m=t[h+l+(s-1)];u(m,["e-separator","e-ignore"])&&LP(m,{display:"none"})}s++,l=0,c=0}}else l++;t[h].classList.contains("e-overflow-show")&&n||u(t[h],["e-separator","e-ignore"])?i-=(this.isVertical?t[h].offsetHeight:t[h].offsetWidth)+d:(t[h].classList.add(ej),LP(t[h],this.isVertical?{display:"none",minHeight:v+"px"}:{display:"none",minWidth:v+"px"}),c++)}}if(n){var g=PP("."+$V+":not(."+ej+")",this.element);this.checkPriority(e,g,o,!1)}}},{key:"createPopupIcon",value:function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var n=this.createElement("div",{id:t,className:i});"msie"!==AR.info.name&&"edge"!==AR.info.name||n.classList.add("e-ie-align");var r=this.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(r),n.setAttribute("tabindex","0"),n.setAttribute("role","list"),e.appendChild(n)}},{key:"tbarPriRef",value:function(e,t,i,n,r,a,o,s){var l=s,c=PP("."+ej+":not(.e-overflow-show)",this.popObj.element).length,u=function(e,t){return e.classList.contains(t)};if(0===PP(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var h=e.children[t-(t-i)-1],d=!RD(h)&&u(h,"e-ignore");if(!RD(h)&&u(h,"e-separator")&&!EP(h)||d){h.style.display="inherit";var p=h.offsetWidth+2*parseFloat(window.getComputedStyle(h).marginRight),f=h.previousElementSibling;a+p<o||r?(e.insertBefore(n,e.children[t+l-(t-i)]),RD(f)||(f.style.display="")):f.classList.contains("e-separator")&&(f.style.display="none"),h.style.display=""}else e.insertBefore(n,e.children[t+l-(t-i)])}else e.insertBefore(n,e.children[t+l-c])}},{key:"popupRefresh",value:function(e,t){var i,n=this,r=this.element,a=this.isVertical,o=r.querySelector(".e-hor-nav"),s=r.querySelector("."+QV);if(!RD(o)){s.removeAttribute("style"),e.style.display="block",i=a?r.offsetHeight-(o.offsetHeight+s.offsetHeight):r.offsetWidth-(o.offsetWidth+s.offsetWidth);var l=0;[].slice.call(e.children).forEach((function(e){l+=n.popupEleWidth(e),LP(e,{position:""})})),i+(a?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(t=!0),this.popupEleRefresh(i,e,t),e.style.display="",0===e.children.length&&o&&this.popObj&&(xP(o),o=null,this.popObj.destroy(),xP(this.popObj.element),this.popObj=null,r.setAttribute("aria-haspopup","false"))}}},{key:"ignoreEleFetch",value:function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],r=0;return i.length>0?(i.forEach((function(e){n.push([].slice.call(t.children).indexOf(e))})),n.forEach((function(t){t<=e&&r++})),r):0}},{key:"checkPopupRefresh",value:function(e,t){t.style.display="block";var i=this.popupEleWidth(t.firstElementChild);t.firstElementChild.style.removeProperty("Position");var n=e.offsetWidth-e.querySelector(".e-hor-nav").offsetWidth,r=e.querySelector("."+QV).offsetWidth;return t.style.removeProperty("display"),n>i+r}},{key:"popupEleWidth",value:function(e){e.style.position="absolute";var t=this.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var n=e.children[0];!RD(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!RD(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",RD(i)||(i.style.display="")}return t}},{key:"popupEleRefresh",value:function(e,t,i){var n,r,a,o=this,s=this.popupPriCount>0,l=this.tbarEle,c=this.element.querySelector("."+QV),u=0,h=_createForOfIteratorHelper([].slice.call(t.children));try{for(h.s();!(a=h.n()).done;){var d=a.value;if(!d.classList.contains("e-popup-alone")||!s||i){var p=this.popupEleWidth(d);if(d===this.tbarEle[0]&&(p+=this.tbarEleMrgn),d.style.position="",!(p<e||i))break;!function(){if(LP(d,{minWidth:"",height:"",minHeight:""}),d.classList.contains("e-overflow-hide")||d.classList.remove(ej),r=o.tbarEle.indexOf(d),o.tbarAlign){var t=o.items[r].align;r=o.tbarAlgEle[(t+"s").toLowerCase()].indexOf(d),l=o.tbarAlgEle[(t+"s").toLowerCase()],c=o.element.querySelector("."+QV+" .e-toolbar-"+t.toLowerCase())}var a=0;"Extended"!==o.overflowMode&&l.slice(0,r).forEach((function(t){(t.classList.contains("e-overflow-show")||t.classList.contains("e-separator"))&&(t.classList.contains("e-separator")&&(t.style.display="",e-=t.offsetWidth),a++)})),u=o.ignoreEleFetch(r,c),d.classList.contains("e-overflow-show")?(o.tbarPriRef(c,r,a,d,i,p,e,u),e-=d.offsetWidth):0===r?(c.insertBefore(d,c.firstChild),e-=d.offsetWidth):(n=PP(".e-overflow-show",o.popObj.element).length,c.insertBefore(d,c.children[r+u-n]),e-=d.offsetWidth),d.style.height=""}()}}}catch(f){h.e(f)}finally{h.f()}this.checkOverflow(this.element,this.element.getElementsByClassName(QV)[0])&&!i&&this.renderOverflowMode()}},{key:"removePositioning",value:function(){var e=this.element.querySelector("."+QV);if(!RD(e)&&e.classList.contains("e-tbar-pos")){this.remove(e,"e-tbar-pos");var t=[].slice.call(e.childNodes);t[1].removeAttribute("style"),t[2].removeAttribute("style")}}},{key:"refreshPositioning",value:function(){var e=this.element.querySelector("."+QV);this.add(e,"e-tbar-pos"),this.itemPositioning()}},{key:"itemPositioning",value:function(){var e,t=this.element.querySelector("."+QV);if(!RD(t)&&t.classList.contains("e-tbar-pos")){var i,n=this.element.querySelector(".e-hor-nav");i=[].slice.call(this.scrollModule?t.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:t.childNodes),e=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var r=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){r-=this.isVertical?n.offsetHeight:n.offsetWidth;var a=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=a:i[2].style.bottom=a:this.enableRtl?i[2].style.left=a:i[2].style.right=a}if(!(r<=e)){var o=(r-e-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var s=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+o+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=s:i[1].style.marginTop=s:this.enableRtl?i[1].style.marginRight=s:i[1].style.marginLeft=s}}}},{key:"tbarItemAlign",value:function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var r=[];if(r.push(this.createElement("div",{className:"e-toolbar-left"})),r.push(this.createElement("div",{className:"e-toolbar-center"})),r.push(this.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)r.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,this.add(t,"e-tbar-pos");else if("Left"!==e.align){var a=r[0];[].slice.call(t.childNodes).forEach((function(e){n.tbarAlgEle.lefts.push(e),a.appendChild(e)})),t.appendChild(a),t.appendChild(r[1]),t.appendChild(r[2]),this.tbarAlign=!0,this.add(t,"e-tbar-pos")}}}},{key:"ctrlTemplate",value:function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,QV),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach((function(t){"DIV"===t.tagName&&(e.tbarEle.push(t),t.setAttribute("aria-disabled","false"),e.add(t,$V))}))}},{key:"renderItems",value:function(){var e=this.element,t=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&t.length>0){var i;e&&e.children.length>0&&(i=e.querySelector("."+QV)),i||(i=this.createElement("div",{className:QV})),this.itemsAlign(t,i),e.appendChild(i)}}},{key:"setAttr",value:function(e,t){for(var i,n=Object.keys(e),r=0;r<n.length;r++)"class"===(i=n[r])?this.add(t,e[i]):t.setAttribute(i,e[i])}},{key:"enableItems",value:function(e,t){var i,n=e,r=n.length;RD(t)&&(t=!0);var a=function(e,t){e?(t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false")):(t.classList.add("e-overlay"),t.setAttribute("aria-disabled","true"))};if(!RD(r)&&r>=1){for(var o=0,s=[].slice.call(n);o<r;o++){var l=s[o];if("number"==typeof l){if(RD(i=this.getElementByIndex(l)))return;n[o]=i}else i=l;a(t,i)}t?_P(n,"e-overlay"):wP(n,"e-overlay")}else{if("number"==typeof n){if(RD(i=this.getElementByIndex(n)))return}else i=e;a(t,i)}}},{key:"getElementByIndex",value:function(e){return this.tbarEle[e]?this.tbarEle[e]:null}},{key:"addItems",value:function(e,t){var i;this.extendedOpen();var n,r=this.element.querySelector("."+QV);if(RD(r))this.itemsRerender(e);else{var a="Left";RD(t)&&(t=0),e.forEach((function(e){RD(e.align)||"Left"===e.align||"Left"!==a||(a=e.align)}));var o,s=_createForOfIteratorHelper(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(RD(l.type)&&(l.type="Button"),i=PP("."+$V,this.element),l.align=a,n=this.renderSubComponent(l,t),this.tbarEle.length>=t&&i.length>=0){RD(this.scrollModule)&&this.destroyMode();var c=void 0,u="L"===l.align[0]?0:"C"===l.align[0]?1:2;this.tbarAlign||"Left"===a?this.tbarAlign?((c=MP(i[0],"."+QV).children[u]).insertBefore(n,c.children[t]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(t,0,n),this.refreshPositioning()):0===i.length?(i=PP("."+QV,this.element))[0].appendChild(n):i[0].parentNode.insertBefore(n,i[t]):(this.tbarItemAlign(l,r,1),this.tbarAlign=!0,(c=MP(i[0],"."+QV).children[u]).appendChild(n),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(n),this.refreshPositioning()),this.items.splice(t,0,l),this.tbarEle.splice(t,0,n),t++,this.offsetWid=r.offsetWidth}}}catch(h){s.e(h)}finally{s.f()}r.style.width="",this.renderOverflowMode()}}},{key:"removeItems",value:function(e){var t,i=e,n=[].slice.call(PP("."+$V,this.element));if("number"==typeof i)t=parseInt(e.toString(),10),this.removeItemByIndex(t,n);else if(i&&i.length>1){var r,a=_createForOfIteratorHelper([].slice.call(i));try{for(a.s();!(r=a.n()).done;){var o=r.value;t=this.tbarEle.indexOf(o),this.removeItemByIndex(t,n),n=PP("."+$V,this.element)}}catch(s){a.e(s)}finally{a.f()}}else t=n.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(t,n);this.resize()}},{key:"removeItemByIndex",value:function(e,t){if(this.tbarEle[e]&&t[e]){var i,n=this.tbarEle.indexOf(t[e]);this.tbarAlign&&(i=this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].indexOf(this.tbarEle[n]),this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].splice(i,1)),xP(t[e]),this.items.splice(n,1),this.tbarEle.splice(n,1)}}},{key:"templateRender",value:function(t,i,n,r){var a,o=t;if("object"==typeof t&&(a="function"==typeof o.appendTo),"string"!=typeof t&&a){if("Input"===n.type){var s=this.createElement("input");s.id=n.id?n.id:MD("tbr-ipt"),i.appendChild(s),o.appendTo(s)}}else{var l,c,u;u="string"==typeof t?t.trim():t;try{if("object"!=typeof t||RD(t.tagName)){if(document.querySelectorAll(u).length){var h=document.querySelector(u),d=h.outerHTML.trim();i.appendChild(h),h.style.display="",RD(d)||this.tempId.push(u)}}else i.appendChild(t)}catch(e){l=tP(u)}RD(l)||(c=l({},this,"template",this.element.id+r+"_template",this.isStringTemplate)),!RD(c)&&c.length>0&&[].slice.call(c).forEach((function(e){RD(e.tagName)||(e.style.display=""),i.appendChild(e)}))}this.add(i,"e-template"),this.tbarEle.push(i)}},{key:"buttonRendering",value:function(e,t){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var n,r,a=e.text;i.id=e.id?e.id:MD("e-tbr-btn");var o=this.createElement("span",{className:"e-tbar-btn-text"});a?(o.innerHTML=this.enableHtmlSanitizer?HM.sanitize(a):a,i.appendChild(o),i.classList.add("e-tbtn-txt")):this.add(t,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(n=e.prefixIcon+" e-icons",r="Left"):(n=e.suffixIcon+" e-icons",r="Right"));var s=new pL({iconCss:n,iconPosition:r});return s.createElement=this.createElement,s.appendTo(i),e.width&&LP(i,{width:FD(e.width)}),i}},{key:"renderSubComponent",value:function(e,t){var i,n;(i=this.createElement("div",{className:$V})).setAttribute("aria-disabled","false");var r=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?HM.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,i),e.tooltipText&&i.setAttribute("title",r.textContent),e.cssClass&&(i.className=i.className+" "+e.cssClass),e.template)this.templateRender(e.template,i,e,t);else switch(e.type){case"Button":(n=this.buttonRendering(e,i)).setAttribute("tabindex","-1"),n.setAttribute("aria-label",e.text||e.tooltipText),i.appendChild(n),i.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(i,"e-separator")}if(e.showTextOn){var a=e.showTextOn;"Toolbar"===a?(this.add(i,"e-toolbar-text"),this.add(i,"e-tbtn-align")):"Overflow"===a&&this.add(i,"e-popup-text")}if(e.overflow){var o=e.overflow;"Show"===o?this.add(i,"e-overflow-show"):"Hide"===o&&(i.classList.contains("e-separator")||this.add(i,"e-overflow-hide"))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!i.classList.contains("e-separator")&&(this.add(i,"e-popup-alone"),this.popupPriCount++),e.disabled&&this.add(i,"e-overlay"),!1===e.visible&&this.add(i,"e-hidden"),i}},{key:"itemClick",value:function(e){this.activeEleSwitch(e.currentTarget)}},{key:"activeEleSwitch",value:function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()}},{key:"activeEleRemove",value:function(e){RD(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,RD(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"getModuleName",value:function(){return"toolbar"}},{key:"itemsRerender",value:function(e){this.items=this.tbarItemsCol,this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode()}},{key:"resize",value:function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var t=this.checkOverflow(e,e.getElementsByClassName(QV)[0]);if(!t){this.destroyScroll();var i=e.querySelector("."+QV);RD(i)||(this.remove(i,"e-multirow-pos"),this.tbarAlign&&this.add(i,"e-tbar-pos"))}if(!t||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||t)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector(".e-hscroll-bar")&&(this.scrollStep=this.element.querySelector(".e-hscroll-bar").offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}}},{key:"extendedOpen",value:function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))}},{key:"onPropertyChanged",value:function(e,t){var i=this.element;this.extendedOpen();for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"items":if(e.items instanceof Array&&t.items instanceof Array||this.isServerRendered)this.itemsRerender(e.items);else for(var a=Object.keys(e.items),o=0;o<a.length;o++){var s=parseInt(Object.keys(e.items)[o],10),l=Object.keys(e.items[s])[0],c=Object(e.items[s])[l];if(this.tbarAlign||"align"===l){this.refresh(),this.trigger("created");break}var u="overflow"===l&&0!==this.popupPriCount;("showAlwaysInPopup"===l&&!c||this.items[s].showAlwaysInPopup&&u)&&--this.popupPriCount,RD(this.scrollModule)&&this.destroyMode(),xP([].slice.call(PP("."+QV+" ."+$V,i))[s]),this.tbarEle.splice(s,1),this.addItems([this.items[s]],s),this.items.splice(s,1),this.items[s].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":var h=i.offsetWidth;LP(i,{width:FD(e.width)}),this.renderOverflowMode(),this.popObj&&h<i.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":LP(this.element,{height:FD(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,"e-rtl"),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(i,"e-rtl"):this.remove(i,"e-rtl"),RD(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,"e-rtl"):this.remove(this.scrollModule.element,"e-rtl")),RD(this.popObj)||(e.enableRtl?this.add(this.popObj.element,"e-rtl"):this.remove(this.popObj.element,"e-rtl")),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":t.cssClass&&_P([this.element],t.cssClass.split(" ")),e.cssClass&&wP([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}}},{key:"hideItem",value:function(e,t){var i,n,r="object"==typeof e,a=e,o=[].slice.call(PP("."+$V,this.element));if(r?n=e:this.tbarEle[a]&&(n=[].slice.call(PP("."+$V,this.element))[a]),n){if(t?n.classList.add("e-hidden"):n.classList.remove("e-hidden"),t&&RD(this.element.getAttribute("tabindex"))&&!n.classList.contains("e-separator")){if(RD(n.firstElementChild.getAttribute("tabindex"))){n.firstElementChild.setAttribute("tabindex","-1");var s=[].slice.call(PP("."+$V,this.element));r&&(a=s.indexOf(n));for(var l=s[++a];l;){if(!this.eleContains(l)){l.firstElementChild.removeAttribute("tabindex");break}l=s[++a]}}}else if(RD(this.element.getAttribute("tabindex"))&&!n.classList.contains("e-separator"))for(var c=!1,u=!1,h=o[i=0];h;)if(h.classList.contains("e-separator"))h=o[++i];else if(RD(h.firstElementChild.getAttribute("tabindex")))h.firstElementChild.setAttribute("tabindex","-1"),c=!0;else{if(c&&u)break;this.eleContains(h)||(h.firstElementChild.removeAttribute("tabindex"),u=!0),h=o[++i]}this.refreshOverflow()}}}]),n}(kM),JV([$P([],tj)],TV.prototype,"items",void 0),JV([QP("auto")],TV.prototype,"width",void 0),JV([QP("auto")],TV.prototype,"height",void 0),JV([QP("")],TV.prototype,"cssClass",void 0),JV([QP("Scrollable")],TV.prototype,"overflowMode",void 0),JV([QP()],TV.prototype,"scrollStep",void 0),JV([QP(!0)],TV.prototype,"enableCollision",void 0),JV([QP(!0)],TV.prototype,"enableHtmlSanitizer",void 0),JV([QP(!0)],TV.prototype,"allowKeyboard",void 0),JV([eM()],TV.prototype,"clicked",void 0),JV([eM()],TV.prototype,"created",void 0),JV([eM()],TV.prototype,"destroyed",void 0),JV([eM()],TV.prototype,"beforeCreate",void 0),TV=JV([tM],TV)),nj=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},rj="e-icon-collapsible",aj="e-icon-expandable",oj="e-list-item",sj="e-list-text",lj="e-list-parent",cj="e-hover",uj="e-icons-spinner",hj="e-process",dj="e-text-content",pj="e-sibling",fj="e-drop-next",vj="e-checkbox-wrapper",mj="e-node-focus",gj={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},yj=(RV=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),nj([QP("child")],RV.prototype,"child",void 0),nj([QP([])],RV.prototype,"dataSource",void 0),nj([QP("expanded")],RV.prototype,"expanded",void 0),nj([QP("hasChildren")],RV.prototype,"hasChildren",void 0),nj([QP("htmlAttributes")],RV.prototype,"htmlAttributes",void 0),nj([QP("iconCss")],RV.prototype,"iconCss",void 0),nj([QP("id")],RV.prototype,"id",void 0),nj([QP("imageUrl")],RV.prototype,"imageUrl",void 0),nj([QP("isChecked")],RV.prototype,"isChecked",void 0),nj([QP("parentID")],RV.prototype,"parentID",void 0),nj([QP(null)],RV.prototype,"query",void 0),nj([QP("selected")],RV.prototype,"selected",void 0),nj([QP(null)],RV.prototype,"tableName",void 0),nj([QP("text")],RV.prototype,"text",void 0),nj([QP("tooltip")],RV.prototype,"tooltip",void 0),nj([QP("navigateUrl")],RV.prototype,"navigateUrl",void 0),RV),bj=(DV=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),nj([QP("SlideDown")],DV.prototype,"effect",void 0),nj([QP(400)],DV.prototype,"duration",void 0),nj([QP("linear")],DV.prototype,"easing",void 0),DV),kj=(IV=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),nj([ZP({effect:"SlideUp",duration:400,easing:"linear"},bj)],IV.prototype,"collapse",void 0),nj([ZP({effect:"SlideDown",duration:400,easing:"linear"},bj)],IV.prototype,"expand",void 0),IV),Cj=(xV=OV=function(t){_inherits(n,t);var i=_createSuper(n);function n(e,t){var r;return _classCallCheck2(this,n),(r=i.call(this,e,t)).isRefreshed=!1,r.preventExpand=!1,r.checkedElement=[],r.disableNode=[],r.validArr=[],r.expandChildren=[],r.isFieldChange=!1,r.changeDataSource=!1,r.isBlazorExpandedNodes=[],r.mouseDownStatus=!1,r}return _createClass(n,[{key:"getModuleName",value:function(){return"treeview"}},{key:"preRender",value:function(){var e=this;this.isBlazorPlatform=!1,this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:aj,ariaAttributes:gj,expandIconPosition:"Left",itemCreated:function(t){e.beforeNodeCreate(t)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new oM({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),RD(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),RD(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),RD(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0}},{key:"getPersistData",value:function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])}},{key:"render",value:function(){this.initialRender=!0,this.blazorInitialRender=!1,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.isBlazorPlatform||(this.initialRender=!1),this.renderComplete()}},{key:"initialize",value:function(){this.isBlazorPlatform||(this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect)),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)}},{key:"setDisabledMode",value:function(){this.disabled?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")}},{key:"setEnableRtl",value:function(){this.enableRtl?wP([this.element],"e-rtl"):_P([this.element],"e-rtl")}},{key:"setRipple",value:function(){this.rippleFn=sM(this.element,{selector:".e-fullrow,.e-text-content",ignore:"."+dj+" > .e-icons,.e-input-group,.e-input, ."+vj}),this.rippleIconFn=sM(this.element,{selector:"."+dj+" > .e-icons",isCenterRipple:!0})}},{key:"setFullRow",value:function(e){e?wP([this.element],"e-fullrow-wrap"):_P([this.element],"e-fullrow-wrap")}},{key:"setMultiSelect",value:function(e){var t=RP("."+lj,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")}},{key:"templateComplier",value:function(t){if(t)try{if(document.querySelectorAll(t).length)return tP(document.querySelector(t).innerHTML.trim())}catch(e){return tP(t)}}},{key:"setDataBinding",value:function(e){var t=this;this.treeList.push("false"),this.fields.dataSource instanceof TF?(this.isOffline=this.isBlazorPlatform?this.fields.dataSource.offline:this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then((function(e){t.isOffline=t.isBlazorPlatform?t.fields.dataSource.offline:t.fields.dataSource.dataSource.offline,t.fields.dataSource instanceof TF&&t.isOffline&&(t.treeList.pop(),t.treeData=e.result,t.isNumberTypeId=t.getType(),t.setRootData(),t.renderItems(!0),0!==t.treeList.length||t.isLoaded||t.finalize())})).catch((function(e){t.trigger("actionFailure",{error:e})})):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then((function(i){t.treeList.pop(),t.treeData=i.result,t.isNumberTypeId=t.getType(),t.setRootData(),e&&(t.changeDataSource=!0),t.renderItems(!0),t.changeDataSource=!1,0!==t.treeList.length||t.isLoaded||t.finalize()})).catch((function(e){t.trigger("actionFailure",{error:e})}))):(this.treeList.pop(),RD(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()}},{key:"getQuery",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(e.query)t=e.query.clone();else{t=new gF;for(var r=this.getActualProperties(e),a=0,o=Object.keys(r);a<o.length;a++){var s=o[a];"dataSource"!==s&&"tableName"!==s&&"child"!==s&&e[s]&&"url"!==s&&-1===n.indexOf(e[s])&&n.push(e[s])}t.select(n),r.hasOwnProperty("tableName")&&t.from(e.tableName)}return mF.addSorting(this.sortOrder,e.text,t),RD(i)||RD(e.parentID)||t.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(i):i),t}},{key:"getType",value:function(){return!!this.treeData[0]&&"number"==typeof TD(this.fields.id,this.treeData[0])}},{key:"setRootData",value:function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var e=this.getChildNodes(this.treeData,void 0,!0);this.rootData=RD(e)?[]:e}else this.rootData=this.treeData}},{key:"renderItems",value:function(e){if(!this.isBlazorPlatform||this.isBlazorPlatform&&this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName||this.changeDataSource){this.listBaseOption.ariaAttributes.level=1;var t=this.getSortedData(this.rootData);this.ulElement=mF.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var n=0;n<i.length;)this.renderChildNodes(i[n],!0,null,!0),n++;(1===PP("."+lj,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element)}this.updateTemplateForBlazor(),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()}},{key:"updateTemplateForBlazor",value:function(){this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate()}},{key:"updateCheckedStateFromDS",value:function(e){if(this.treeData&&this.showCheckBox)if(1===this.dataType){for(var t=this.fields,i=new TF(this.treeData).executeLocal((new gF).where(t.isChecked,"equal",!0,!1)),n=0;n<i.length;n++){var r=i[n][this.fields.id]?i[n][this.fields.id].toString():null;if(i[n][this.fields.parentID]&&i[n][this.fields.parentID].toString(),-1!==this.checkedNodes.indexOf(r)||this.isLoaded||this.checkedNodes.push(r),i[n][this.fields.hasChildren])for(var a=i[n][this.fields.id],o=new TF(this.treeData).executeLocal((new gF).where(t.parentID,"equal",a,!1)),s=0;s<o.length;s++){var l=o[s][this.fields.id]?o[s][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkedNodes.push(l)}}for(var c=0;c<this.checkedNodes.length;c++){var u=this.fields,h=new TF(this.treeData).executeLocal((new gF).where(u.id,"equal",this.checkedNodes[c],!0));h[0]&&this.autoCheck&&(this.getCheckedNodeDetails(u,h),this.checkIndeterminateState(h[0]));for(var d=new TF(this.treeData).executeLocal((new gF).where(u.parentID,"equal",this.checkedNodes[c],!0)),p=0;p<d.length;p++){var f=d[p][this.fields.id]?d[p][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(f)&&this.autoCheck&&this.checkedNodes.push(f)}}}else if(2===this.dataType||this.fields.dataSource instanceof TF&&this.isOffline)for(var v=0;v<this.treeData.length;v++){var m=this.treeData[v][this.fields.id]?this.treeData[v][this.fields.id].toString():"";this.treeData[v][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(m)&&this.checkedNodes.push(m);var g=TD(this.fields.child.toString(),this.treeData[v]);g&&this.updateChildCheckState(g,this.treeData[v])}}},{key:"getCheckedNodeDetails",value:function(e,t){var i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,n=0,r=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),a=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(r||a)a&&(RP(".e-check",a)||this.changeState(a,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var o=this.getChildNodes(this.treeData,i),s=0;s<o.length;s++){var l=o[s][this.fields.id]?o[s][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&n++,n===o.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}var c=new TF(this.treeData).executeLocal((new gF).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,c)}}},{key:"updateParentCheckState",value:function(){for(var e,t=PP(".e-stop",this.element),i=0;i<t.length;i++){var n=MP(t[i],"."+oj),r=n.getAttribute("data-uid").toString(),a=0;if(e=1===this.dataType?new TF(this.treeData).executeLocal((new gF).where(this.fields.parentID,"equal",r,!0)):this.getChildNodes(this.treeData,r)){for(var o=0;o<e.length;o++){var s=e[o][this.fields.id].toString();-1!==this.checkedNodes.indexOf(s)&&a++}if(a===e.length){var l=n.getAttribute("data-uid");-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),this.changeState(n,"check",null,!0,!0)}else 0===a&&0===this.checkedNodes.length&&this.changeState(n,"uncheck",null,!0,!0)}}}},{key:"checkIndeterminateState",value:function(e){var t;(t=this.element.querySelector(1===this.dataType?'[data-uid="'+e[this.fields.parentID]+'"]':'[data-uid="'+e[this.fields.id]+'"]'))?"true"!==t.querySelector("."+vj).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}},{key:"updateChildCheckState",value:function(e,t){for(var i=0,n=t[this.fields.id]?t[this.fields.id].toString():"",r=0;r<e.length;r++){var a=e[r][this.fields.id]?e[r][this.fields.id].toString():"";e[r][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a),-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(a)&&this.autoCheck&&this.checkedNodes.push(a),-1!==this.checkedNodes.indexOf(a)&&this.autoCheck&&i++;var o=TD(this.fields.child.toString(),e[r]);o&&(this.parentCheckData.push(t),this.updateChildCheckState(o,e[r])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(var s=0;s<this.parentCheckData.length;s++)t!==this.parentCheckData[s]&&this.parentCheckData[s]&&this.checkIndeterminateState(this.parentCheckData[s])}this.parentCheckData=[]}},{key:"beforeNodeCreate",value:function(e){if(this.showCheckBox){var t=eL(this.createElement,!0,{cssClass:this.touchClass});t.setAttribute("role","checkbox");var i=RP("div.e-icons",e.item),n=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(t,e.item.childNodes[0].childNodes[RD(i)?0:1]);var r=TD(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(n)>-1?(RP(".e-frame",t).classList.add("e-check"),t.setAttribute("aria-checked","true"),this.addCheck(e.item)):RD(r)||"true"!==r.toString()?t.setAttribute("aria-checked","false"):(RP(".e-frame",t).classList.add("e-check"),t.setAttribute("aria-checked","true"),this.addCheck(e.item));var a=RP(".e-frame",t);OR.add(a,"mousedown",this.frameMouseHandler,this),OR.add(a,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains("e-selected")&&e.item.setAttribute("aria-selected","false");var o=e.fields;if(this.addActionClass(e,o.selected,"e-selected"),this.addActionClass(e,o.expanded,"e-expanded"),!RD(this.nodeTemplateFn)){var s=e.item.querySelector("."+sj);s.innerHTML="";var l=this.nodeTemplateFn(e.curData,void 0,void 0,this.element.id+"nodeTemplate",this.isStringTemplate);AP(l=Array.prototype.slice.call(l),s)}this.isRefreshed||this.trigger("drawNode",{node:e.item,nodeData:e.curData,text:e.text})}},{key:"frameMouseHandler",value:function(e){tL(e,RP(".e-ripple-container",e.target.parentElement))}},{key:"addActionClass",value:function(e,t,i){var n=TD(t,e.curData);RD(n)||"false"===n.toString()||e.item.classList.add(i)}},{key:"getDataType",value:function(e,t){if(this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName){for(var i=0;i<e.length;i++)if(this.isOffline){if("string"==typeof t.child&&RD(TD(t.child,e[i]))&&!RD(TD(t.parentID,e[i])))return 1}else if("string"==typeof t.child&&RD(TD(t.child,e[i])))return 1;return 2}for(var n=0,r=e.length;n<r;n++){if("string"==typeof t.child&&!RD(TD(t.child,e[n])))return 2;if(!RD(TD(t.parentID,e[n]))||!RD(TD(t.hasChildren,e[n])))return 1}return 1}},{key:"getGroupedData",value:function(e,t){for(var i=(new gF).group(t),n=mF.getDataSource(e,i),r=[],a=0;a<n.length;a++)r.push(n[a].items);return r}},{key:"getSortedData",value:function(e){return e&&"None"!==this.sortOrder&&(e=mF.getDataSource(e,mF.addSorting(this.sortOrder,this.fields.text))),e}},{key:"finalizeNode",value:function(e){for(var t=PP(".e-list-img",e),i=0;i<t.length;i++)t[i].setAttribute("alt","e-list-img");if(this.isLoaded){for(var n=PP(".e-selected",e),r=0;r<n.length;r++){this.selectNode(n[r],null);break}_P(n,"e-selected")}for(var a=PP("."+oj+":not(.e-expanded)",e),o=0;o<a.length;o++){var s=RP("div.e-icons",a[o]);s&&s.classList.contains(aj)&&this.disableExpandAttr(a[o])}var l=PP(".e-expanded",e);if(!this.isInitalExpand)for(var c=0;c<l.length;c++)this.renderChildNodes(l[c]);_P(l,"e-expanded"),this.updateList(),this.isLoaded&&this.updateCheckedProp()}},{key:"updateCheckedProp",value:function(){if(this.showCheckBox){var e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}}},{key:"ensureIndeterminate",value:function(){if(this.autoCheck)for(var e=PP("li",this.element),t=0;t<e.length;t++)e[t].classList.contains(oj)&&(RP("."+lj,e[t])?this.ensureParentCheckState(e[t]):this.ensureChildCheckState(e[t]));else for(var i=PP(".e-stop",this.element),n=0;n<i.length;n++)i[n].classList.remove("e-stop")}},{key:"ensureParentCheckState",value:function(e){if(!RD(e)){if(e.classList.contains("e-treeview"))return;var t=e;e.classList.contains(oj)&&(t=RP("."+lj,e));var i=PP(".e-check",t),n=PP(".e-stop",t),r=PP("."+oj,t),a=e.getElementsByClassName(vj)[0];r.length===i.length?this.changeState(a,"check",null,!0,!0):i.length>0||n.length>0?this.changeState(a,"indeterminate",null,!0,!0):0===i.length&&this.changeState(a,"uncheck",null,!0,!0);var o=MP(e,"."+lj);if(!RD(o)){var s=MP(o,"."+oj);this.ensureParentCheckState(s)}}}},{key:"ensureChildCheckState",value:function(e,t){if(!RD(e)){var i,n=RP("."+lj,e);if(!RD(n)){i=PP("."+vj,n);var r,a=e.getElementsByClassName("e-frame")[0].classList.contains("e-check"),o=e.getElementsByClassName("e-frame")[0].classList.contains("e-stop"),s=n.querySelectorAll("li");n.parentElement.getAttribute("aria-expanded");for(var l=0;l<i.length;l++){var c=s[l].getAttribute("data-uid");if(RD(this.currentLoadData)||RD(TD(this.fields.isChecked,this.currentLoadData[l]))){var u=i[l].getElementsByClassName("e-frame")[0].classList.contains("e-check");a||u&&!this.isLoaded||-1!==this.checkedNodes.indexOf(c)&&this.isLoaded&&(o||a)?r="check":s[l].classList.contains("e-has-child")&&!PD(this.parentNodeCheck)&&this.autoCheck&&(a||o)&&-1!==this.parentNodeCheck.indexOf(c)||1===this.dataType&&!PD(this.parentNodeCheck)&&this.autoCheck&&(a||o)&&-1!==this.parentNodeCheck.indexOf(c)?(r="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(c),1)):r="uncheck"}else r=TD(this.fields.isChecked,this.currentLoadData[l])?"check":"uncheck",-1!==this.ele&&(r=a?"check":"uncheck"),"uncheck"===r&&!PD(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(c)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(c),1),r="indeterminate");this.changeState(i[l],r,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}}},{key:"doCheckBoxAction",value:function(e,t){if(PP("."+oj,this.element),RD(e)){var i=PP("."+vj,this.element);if(this.loadOnDemand)for(var n=0;n<i.length;n++)this.updateFieldChecked(i[n],t),this.changeState(i[n],t?"check":"uncheck",null,null,null,t);else for(var r=0;r<i.length;r++)this.updateFieldChecked(i[r],t),this.changeState(i[r],t?"check":"uncheck")}else for(var a=e.length;a>=0;a--){var o;if(RD(o=this.getElement(1===e.length?e[a-1]:e[a]))){var s;if(""!==(s=e[a-e.length]?e[a-e.length].toString():e[a]?e[a].toString():null)&&t&&s)this.setValidCheckedNode(s),this.dynamicCheckState(s,t);else if(-1!==this.checkedNodes.indexOf(s)&&""!==s&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(s),1);var l=this.getChildNodes(this.treeData,s);if(l){for(var c=0;c<l.length;c++){var u=l[c][this.fields.id]?l[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&this.checkedNodes.splice(this.checkedNodes.indexOf(u),1)}-1!==this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s),1)}s&&this.dynamicCheckState(s,t),this.updateField(this.treeData,this.fields,s,"isChecked",null)}}else{var h=RP("."+lj+" ."+vj,o);this.validateCheckNode(h,!t,o,null)}}if(e)for(var d=0;d<e.length;d++){var p=e[d]?e[d].toString():"";t||this.updateField(this.treeData,this.fields,p,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()}},{key:"updateFieldChecked",value:function(e,t){var i=MP(e,"."+oj),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||t||this.updateField(this.treeData,this.fields,n,"isChecked",null)}},{key:"dynamicCheckState",value:function(e,t){if(1===this.dataType){var i=0,n=new TF(this.treeData).executeLocal((new gF).where(this.fields.id,"equal",e,!0));if(n[0]){var r=n[0][this.fields.id]?n[0][this.fields.id].toString():null,a=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=this.element.querySelector('[data-uid="'+a+'"]'),s=(o&&RP(".e-stop",o),o&&RP(".e-check",o),this.element.querySelector('[data-uid="'+r+'"]')),l=this.getChildNodes(this.treeData,a);if(l)for(var c=0;c<l.length;c++){var u=l[c][this.fields.id]?l[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&i++}-1!==this.checkedNodes.indexOf(e)&&o&&r===e&&this.autoCheck?this.changeState(o,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&s&&r===e&&!t?this.changeState(s,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&s&&r===e&&t?this.changeState(s,"check",null):-1===this.checkedNodes.indexOf(e)&&!s&&o&&r===e&&this.autoCheck&&0!==i?this.changeState(o,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!s&&o&&r===e&&this.autoCheck&&0===i?this.changeState(o,"uncheck",null):s||o||r!==e||!this.autoCheck||this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof TF&&this.isOffline)for(var h,d,p,f=0;f<this.treeData.length;f++){h=this.treeData[f][this.fields.id]?this.treeData[f][this.fields.id].toString():"",p=(d=this.element.querySelector('[data-uid="'+h+'"]'))?RP(".e-check",d):null,-1===this.checkedNodes.indexOf(h)&&d&&p&&!t&&this.changeState(d,"uncheck",null);var v=TD(this.fields.child.toString(),this.treeData[f]);v&&this.updateChildIndeterminate(v,h,e,t,h)}}},{key:"updateIndeterminate",value:function(e,t){var i,n=this.getTreeData(e),r=0;1===this.dataType&&(i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);var a=this.getChildNodes(this.treeData,i);if(a)for(var o=0;o<a.length;o++){var s=a[o][this.fields.id]?a[o][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(s)&&r++}var l=this.element.querySelector('[data-uid="'+i+'"]');l&&t||!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0!==r?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0===r?this.changeState(l,"uncheck",null):l||(t||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?t&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):t||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===r||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,t),-1===this.checkedNodes.indexOf(i)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))}},{key:"updateChildIndeterminate",value:function(e,t,i,n,r){for(var a=0,o=0;o<e.length;o++){var s=e[o][this.fields.id]?e[o][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(s)&&a++;var l=this.element.querySelector('[data-uid="'+t+'"]'),c=l?RP(".e-stop",l):null,u=l?RP(".e-check",l):null,h=this.element.querySelector('[data-uid="'+s+'"]'),d=h?RP(".e-check",h):null;if(-1!==this.checkedNodes.indexOf(i)&&l&&s===i&&this.autoCheck)this.changeState(l,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!l||h||s!==i||n){if(-1===this.checkedNodes.indexOf(i)&&h&&s===i&&!n)this.changeState(h,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&c&&s===i&&this.autoCheck&&0===a&&!n)c.classList.remove("e-stop");else if(-1===this.checkedNodes.indexOf(i)&&!h&&u&&s===i&&0===a)this.changeState(l,"uncheck",null);else if(-1===this.checkedNodes.indexOf(s)&&h&&d&&0===a)this.changeState(h,"uncheck",null);else if(!h&&!l&&s===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){var p=this.element.querySelector('[data-uid="'+r+'"]');n&&0!==a?this.changeState(p,"indeterminate",null):n&&a===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):n||0!==a||-1===this.parentNodeCheck.indexOf(t)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.changeState(l,this.autoCheck?"uncheck":0!==a?"indeterminate":"uncheck",null);var f=TD(this.fields.child.toString(),e[o]);f&&this.updateChildIndeterminate(f,s,i,n,r)}}},{key:"changeState",value:function(e,t,i,n,r,a){var o,s=this,l=MP(e,"."+oj);n?this.nodeCheckAction(e,t,l,o,i,n,r,a):(this.checkActionNodes=[],o=this.getCheckEvent(l,t,i),this.trigger("nodeChecking",o,(function(o){o.cancel||s.nodeCheckAction(e,t,l,o,i,n,r,a)})))}},{key:"nodeCheckAction",value:function(e,t,i,n,r,a,o,s){var l,c=e.getElementsByClassName("e-frame")[0];if("check"!==t||c.classList.contains("e-check")?"uncheck"===t&&(c.classList.contains("e-check")||c.classList.contains("e-stop"))?(_P([c],["e-check","e-stop"]),this.removeCheck(i),l="false"):"indeterminate"===t&&!c.classList.contains("e-stop")&&this.autoCheck&&(c.classList.remove("e-check"),c.classList.add("e-stop"),this.removeCheck(i),l="mixed"):(c.classList.remove("e-stop"),c.classList.add("e-check"),this.addCheck(i),l="true"),RD(l="check"===t?"true":"uncheck"===t?"false":l)||e.setAttribute("aria-checked",l),o){var u=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,t,r),PD(a)&&(n.data=u)}void 0!==s&&this.ensureStateChange(i,s),a||RD(l)||(e.setAttribute("aria-checked",l),this.allowServerDataBinding=!0,this.updateServerProperties("check"),this.allowServerDataBinding=!1,n.data[0].checked=l,this.trigger("nodeChecked",n),this.checkActionNodes=[])}},{key:"addCheck",value:function(e){var t=e.getAttribute("data-uid");RD(t)||-1!==this.checkedNodes.indexOf(t)||this.checkedNodes.push(t)}},{key:"removeCheck",value:function(e){var t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)}},{key:"getCheckEvent",value:function(e,t,i){this.checkActionNodes.push(this.getNodeData(e));var n=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!RD(i),node:e,data:n}}},{key:"finalize",value:function(){var e=RP("."+lj,this.element);if(!RD(e)){e.setAttribute("role",gj.treeRole),this.setMultiSelect(this.allowMultiSelection);var t=RP("."+oj,this.element);t&&(wP([t],mj),this.updateIdAttr(null,t)),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}}},{key:"doExpandAction",value:function(){var e=this.expandedNodes;if(this.isInitalExpand&&e.length>0){if(this.setProperties({expandedNodes:[]},!0),this.isBlazorPlatform&&!this.initialRender)return;if(this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName)this.expandGivenNodes(e);else{for(var t=0;t<e.length;t++){var i=RP('[data-uid="'+e[t]+'"]',this.element);if(RD(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{var n=RP("."+aj,RP("."+dj,i));RD(n)||this.expandAction(i,n,null)}}this.afterFinalized()}}else this.afterFinalized()}},{key:"expandGivenNodes",value:function(e){var t=this;this.expandCallback(e[this.index],(function(){t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()}))}},{key:"expandCallback",value:function(e,t){var i=RP('[data-uid="'+e+'"]',this.element);if(RD(i))t();else{var n=RP("."+aj,RP("."+dj,i));RD(n)?t():this.expandAction(i,n,null,!1,t)}}},{key:"afterFinalized",value:function(){(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender)&&this.doSelectionAction(),this.updateCheckedProp(),this.isBlazorPlatform&&(this.initialRender&&this.setCheckedNodes(this.checkedNodes),this.updateInstance(),this.initialRender=!1),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0}},{key:"doSelectionAction",value:function(){var e=PP(".e-selected",this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<t.length;i++){var n=RP('[data-uid="'+t[i]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(t[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);_P(e,"e-selected")}},{key:"selectGivenNodes",value:function(e){for(var t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);}},{key:"clickHandler",value:function(e){var t=e.originalEvent.target;if(OR.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){var i=t.classList,n=MP(t,"."+oj);if(!n)return;if(3!==e.originalEvent.which){var r=RP(".e-ripple-element",n),a=RP(".e-icons",n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){var o=MP(t,"."+vj);if(!RD(o)){var s=RP(".e-frame",o);return this.validateCheckNode(o,s.classList.contains("e-check"),n,e.originalEvent),void this.triggerClickEvent(e.originalEvent,n)}}i.contains(aj)?this.expandAction(n,t,e):i.contains(rj)?this.collapseNode(n,t,e):r&&a?a.classList.contains("e-ripple")&&a.classList.contains(aj)?this.expandAction(n,a,e):a.classList.contains("e-ripple")&&a.classList.contains(rj)?this.collapseNode(n,a,e):i.contains(lj)||i.contains(oj)||this.toggleSelect(n,e.originalEvent,!1):i.contains(lj)||i.contains(oj)||this.toggleSelect(n,e.originalEvent,!1)}this.triggerClickEvent(e.originalEvent,n)}}},{key:"nodeCheckedEvent",value:function(e,t,i){MP(e,"."+oj);var n=this.getCheckEvent(e,t?"uncheck":"check",i);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)}},{key:"triggerClickEvent",value:function(e,t){this.trigger("nodeClicked",{event:e,node:t})}},{key:"expandNode",value:function(e,t,i){var n=this;if(t.classList.contains(uj)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){_P([t],aj),wP([t],rj);var r=0,a=0,o=this,s=RP("."+lj,e),l=e;this.setHeight(l,s);var c=RP("."+oj+".e-active",e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(s,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(t){l.style.overflow="hidden",!RD(c)&&c instanceof HTMLElement&&c.classList.add("e-animation-active"),r=l.offsetHeight,a=RP("."+dj,e).offsetHeight},progress:function(e){e.element.style.display="block",o.animateHeight(e,r,a)},end:function(e){e.element.style.display="block",!RD(c)&&c instanceof HTMLElement&&c.classList.remove("e-animation-active"),n.expandedNode(l,s,t)}}):this.expandedNode(l,s,t)}}else RP("."+lj,e).style.display="none",this.fields.dataSource instanceof TF==1&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")}},{key:"expandedNode",value:function(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",_P([i],hj),this.addExpand(e),this.allowServerDataBinding=!0,this.updateServerProperties("expand"),this.allowServerDataBinding=!1,this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))}},{key:"addExpand",value:function(e){e.setAttribute("aria-expanded","true"),_P([e],"e-node-collapsed");var t=e.getAttribute("data-uid");RD(t)||-1!==this.expandedNodes.indexOf(t)||this.expandedNodes.push(t)}},{key:"collapseNode",value:function(e,t,i){var n,r=this;t.classList.contains(hj)||(wP([t],hj),this.isLoaded?(n=this.getExpandEvent(e,i),this.trigger("nodeCollapsing",n,(function(i){i.cancel?_P([t],hj):r.nodeCollapseAction(e,t,i)}))):this.nodeCollapseAction(e,t,n))}},{key:"nodeCollapseAction",value:function(e,t,i){var n=this;_P([t],rj),wP([t],aj);var r=0,a=0,o=this,s=RP("."+lj,e),l=e,c=RP("."+oj+".e-active",e);this.isAnimate?this.aniObj.animate(s,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(t){l.style.overflow="hidden",!RD(c)&&c instanceof HTMLElement&&c.classList.add("e-animation-active"),r=RP("."+dj,e).offsetHeight,a=l.offsetHeight},progress:function(e){o.animateHeight(e,r,a)},end:function(e){e.element.style.display="none",!RD(c)&&c instanceof HTMLElement&&c.classList.remove("e-animation-active"),n.collapsedNode(l,s,t,i)}}):this.collapsedNode(l,s,t,i)}},{key:"collapsedNode",value:function(e,t,i,n){t.style.display="none",e.style.overflow="",e.style.height="",_P([i],hj),this.allowServerDataBinding=!0,this.updateServerProperties("expand"),this.allowServerDataBinding=!1,this.removeExpand(e),this.isLoaded&&this.trigger("nodeCollapsed",n)}},{key:"removeExpand",value:function(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);var i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)}},{key:"disableExpandAttr",value:function(e){e.setAttribute("aria-expanded","false"),wP([e],"e-node-collapsed")}},{key:"setHeight",value:function(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""}},{key:"animateHeight",value:function(e,t,i){e.element.parentElement.style.height=(e.duration-e.timeStamp)/e.duration*(i-t)+t+"px"}},{key:"renderChildNodes",value:function(e,t,i,n){var r,a=this,o=RP("div.e-icons",e);if(!RD(o))if(this.showSpinner(o),this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName){var s=this.parents(e,"."+lj).length,l=this.getChildFields(this.fields,s,1);if(RD(l)||RD(l.dataSource))return xP(o),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof TF&&this.isOffline?(this.treeList.pop(),r=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(r,l,o,e,t,i,n),this.updateTemplateForBlazor()):l.dataSource.executeQuery(this.getQuery(l,e.getAttribute("data-uid"))).then((function(s){a.treeList.pop(),r=s.result,1===a.dataType&&(a.dataType=2),a.loadChild(r,l,o,e,t,i,n),a.updateTemplateForBlazor()})).catch((function(e){a.trigger("actionFailure",{error:e})}))}else{if(r=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=r,RD(r)||0===r.length)return xP(o),void this.removeExpand(e,!0);this.isBlazorPlatform&&this.initialRender||(this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(mF.createList(this.createElement,this.getSortedData(r),this.listBaseOption))),this.expandNode(e,o,n),this.setSelectionForChildNodes(r),this.ensureCheckNode(e),this.finalizeNode(e),this.loadOnDemand&&this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate(),this.disableTreeNodes(r),this.renderSubChild(e,t,n)}}},{key:"loadChild",value:function(e,t,i,n,r,a,o){if(this.currentLoadData=e,RD(e)||0===e.length)xP(i),this.removeExpand(n,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof TF&&!this.isOffline){var s=n.getAttribute("data-uid");AD("child",e,this.getNodeObject(s))}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(mF.createList(this.createElement,e,this.listBaseOption)),this.expandNode(n,i,o),this.setSelectionForChildNodes(e),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(e),this.renderSubChild(n,r,o)}a&&a(),0!==this.treeList.length||this.isLoaded||this.finalize()}},{key:"disableTreeNodes",value:function(e){for(var t=0;t<e.length;){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}}},{key:"setSelectionForChildNodes",value:function(e){var t;for(t=0;t<e.length;t++){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}}},{key:"ensureCheckNode",value:function(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null}},{key:"getFields",value:function(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)}},{key:"getChildFields",value:function(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)}},{key:"getChildMapper",value:function(e){return"string"==typeof e.child||RD(e.child)?e:e.child}},{key:"getChildNodes",value:function(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(RD(e))return i;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,n);if("string"==typeof this.fields.child)for(var r=0,a=e.length;r<a;r++){var o=TD(this.fields.id,e[r]);if(o&&o.toString()===t)return TD(this.fields.child,e[r]);if(!RD(TD(this.fields.child,e[r]))&&void 0!==(i=this.getChildNodes(TD(this.fields.child,e[r]),t)))break}return i}},{key:"getChildGroup",value:function(e,t,i){if(!RD(e))for(var n=0,r=e.length;n<r;n++){if(RD(e[n][0])||RD(TD(this.fields.parentID,e[n][0])))return i?e[n]:[];if(TD(this.fields.parentID,e[n][0]).toString()===t)return e[n]}}},{key:"renderSubChild",value:function(e,t,i){if(t)for(var n=PP("."+aj,e),r=0,a=n.length;r<a;r++){var o=n[r];if(e.querySelector(".e-icons")!==n[r]){var s=MP(o,"."+oj);this.expandArgs=this.getExpandEvent(s,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(s,t,null,i)}}}},{key:"toggleSelect",value:function(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))}},{key:"isActive",value:function(e){return!!e.classList.contains("e-active")}},{key:"selectNode",value:function(e,t,i){var n,r=this;RD(e)||!this.allowMultiSelection&&this.isActive(e)&&!RD(t)?this.setFocusElement(e):this.isLoaded?(n=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",n,(function(n){n.cancel||r.nodeSelectAction(e,t,n,i)}))):this.nodeSelectAction(e,t,n,i)}},{key:"nodeSelectAction",value:function(e,t,i,n){if(this.allowMultiSelection&&(n||t&&(!t||t.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);var r=this.liList.indexOf(this.startNode),a=this.liList.indexOf(e);if(r>a){var o=r;r=a,a=o}for(var s=r;s<=a;s++){var l=this.liList[s];EP(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))}},{key:"unselectNode",value:function(e,t){var i,n=this;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,(function(t){t.cancel||(n.allowServerDataBinding=!0,n.updateServerProperties("select"),n.allowServerDataBinding=!1,n.nodeUnselectAction(e,t))}))):this.nodeUnselectAction(e,i)}},{key:"nodeUnselectAction",value:function(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(this.allowServerDataBinding=!0,this.updateServerProperties("select"),this.allowServerDataBinding=!1,t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))}},{key:"setFocusElement",value:function(e){if(!RD(e)){var t=this.getFocusedNode();t&&_P([t],mj),wP([e],mj),this.updateIdAttr(t,e)}}},{key:"addSelect",value:function(e){e.setAttribute("aria-selected","true"),wP([e],"e-active");var t=e.getAttribute("data-uid");RD(t)||-1!==this.selectedNodes.indexOf(t)||this.selectedNodes.push(t)}},{key:"removeSelect",value:function(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),_P([e],"e-active");var t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)}},{key:"removeSelectAll",value:function(){var e,t=this.element.querySelectorAll(".e-active"),i=_createForOfIteratorHelper(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.allowMultiSelection?n.setAttribute("aria-selected","false"):n.removeAttribute("aria-selected")}}catch(r){i.e(r)}finally{i.f()}_P(t,"e-active"),this.setProperties({selectedNodes:[]},!0)}},{key:"getSelectEvent",value:function(e,t,i){var n=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!RD(i),node:e,nodeData:n}}},{key:"setExpandOnType",value:function(){this.expandOnType="Auto"===this.expandOn?AR.isDevice?"Click":"DblClick":this.expandOn}},{key:"expandHandler",value:function(e){var t=e.originalEvent.target;!t||t.classList.contains("e-input")||t.classList.contains("e-treeview")||t.classList.contains(lj)||t.classList.contains(oj)||t.classList.contains("e-icons")||this.showCheckBox&&MP(t,"."+vj)||this.expandCollapseAction(MP(t,"."+oj),e)}},{key:"expandCollapseAction",value:function(e,t){var i=RP("div.e-icons",e);if(i&&!i.classList.contains(hj)){var n=i.classList;n.contains(aj)?this.expandAction(e,i,t):n.contains(rj)&&this.collapseNode(e,i,t)}}},{key:"expandAction",value:function(e,t,i,n,r){var a=this;t.classList.contains(hj)||(wP([t],hj),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.trigger("nodeExpanding",this.expandArgs,(function(i){i.cancel?_P([t],hj):a.nodeExpandAction(e,t,n,r)}))):this.nodeExpandAction(e,t,n,r))}},{key:"nodeExpandAction",value:function(e,t,i,n){var r=RP("."+lj,e);if(r&&"UL"===r.nodeName)this.expandNode(e,t);else{this.renderChildNodes(e,i,n);for(var a=PP("."+oj,e),o=0;o<a.length;o++){var s=this.getId(a[o]);if(-1!==this.expandChildren.indexOf(s)&&void 0!==this.expandChildren){var l=RP("."+aj,RP("."+dj,a[o]));RD(l)||this.expandAction(a[o],l,null),this.expandChildren.splice(this.expandChildren.indexOf(s),1)}}}}},{key:"keyActionHandler",value:function(e){var t=this,i=e.target,n=this.getFocusedNode();if(i&&i.classList.contains("e-input")){var r=i;"enter"===e.action?(r.blur(),this.element.focus(),wP([n],cj)):"escape"===e.action&&(r.value=this.oldText,r.blur(),this.element.focus(),wP([n],cj))}else e.preventDefault(),this.trigger("keyPress",{cancel:!1,event:e,node:n},(function(i){if(!i.cancel)switch(e.action){case"space":t.showCheckBox&&t.checkNode(e);break;case"moveRight":t.openNode(!t.enableRtl,e);break;case"moveLeft":t.openNode(!!t.enableRtl,e);break;case"shiftDown":t.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":t.navigateNode(!0);break;case"shiftUp":t.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":t.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":t.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":t.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.toggleSelect(n,e);break;case"f2":t.allowEditing&&!n.classList.contains("e-disable")&&t.createTextbox(n,e);break;case"ctrlA":if(t.allowMultiSelection){var r=PP("."+oj+":not(.e-active)",t.element);t.selectGivenNodes(r)}}}))}},{key:"navigateToFocus",value:function(e){var t=this.getFocusedNode().querySelector("."+dj),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!RD(n)){var r=n.getBoundingClientRect();i.bottom>r.bottom?n.scrollTop+=i.bottom-r.bottom:i.top<r.top&&(n.scrollTop-=r.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)}},{key:"isVisibleInViewport",value:function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},{key:"getScrollParent",value:function(e){return RD(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)}},{key:"shiftKeySelect",value:function(e,t){if(this.allowMultiSelection){var i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)}},{key:"checkNode",value:function(e){var t=this.getFocusedNode(),i=RP("."+vj,t),n=RP(" .e-frame",i).classList.contains("e-check");t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,t,e)}},{key:"validateCheckNode",value:function(e,t,i,n){var r=this,a=MP(e,"."+oj);this.checkActionNodes=[];var o=t?"false":"true";RD(o)||e.setAttribute("aria-checked",o);var s=this.getCheckEvent(a,t?"uncheck":"check",n);this.trigger("nodeChecking",s,(function(a){a.cancel||r.nodeCheckingAction(e,t,i,a,n)}))}},{key:"nodeCheckingAction",value:function(e,t,i,n,r){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))){this.checkedElement.push(i.getAttribute("data-uid"));var a=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==a?this.allCheckNode(a,this.checkedElement,null,null,!1):a=null}var o;this.changeState(e,t?"uncheck":"check",r,!0),this.autoCheck&&(this.ensureChildCheckState(i),this.ensureParentCheckState(MP(MP(i,"."+lj),"."+oj)),"check"===n.action?o=!0:"uncheck"===n.action&&(o=!1),this.ensureStateChange(i,o)),this.allowServerDataBinding=!0,this.updateServerProperties("check"),this.allowServerDataBinding=!1,this.nodeCheckedEvent(e,t,r)}},{key:"ensureStateChange",value:function(e,t){var i=RP("."+lj,e),n=e.getAttribute("data-uid"),r=this.fields;if(1===this.dataType&&this.autoCheck)for(var a=new TF(this.treeData).executeLocal((new gF).where(r.parentID,"equal",n,!0)),o=0;o<a.length;o++){var s=a[o][this.fields.id]?a[o][this.fields.id].toString():null,l=a[o][this.fields.isChecked]?a[o][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(s)){this.checkedNodes.push(s);var c=this.getChildNodes(this.treeData,s);this.getChildItems(c,t),-1!==this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s),1)}else if(-1===this.checkedNodes.indexOf(n)&&null===i&&-1!==this.checkedNodes.indexOf(s)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),"true"===l&&this.updateField(this.treeData,this.fields,s,"isChecked",null),-1===this.checkedNodes.indexOf(n)&&null===i||-1!==this.parentNodeCheck.indexOf(s)){var u=this.getChildNodes(this.treeData,s);this.getChildItems(u,t),-1!==this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s),1)}}else{var h=this.getChildNodes(this.treeData,s);this.getChildItems(h,t)}}else if(1!==this.dataType||this.autoCheck){var d=this.getChildNodes(this.treeData,n);d&&this.childStateChange(d,n,i,t)}else if(t)for(var p=0;p<this.treeData.length;p++){var f=this.treeData[p][this.fields.id]?this.treeData[p][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(f)&&this.checkedNodes.push(f)}else{for(var v=new TF(this.treeData).executeLocal((new gF).where(r.isChecked,"equal",!0,!1)),m=0;m<v.length;m++){var g=v[m][this.fields.id]?v[m][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(g)&&this.checkedNodes.splice(this.checkedNodes.indexOf(g),1),this.updateField(this.treeData,this.fields,g,"isChecked",null)}this.checkedNodes=[]}}},{key:"getChildItems",value:function(e,t){for(var i=0;i<e.length;i++){var n=e[i][this.fields.id]?e[i][this.fields.id].toString():null,r=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(n)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),-1===this.checkedNodes.indexOf(n)&&t&&this.checkedNodes.push(n),"true"!==r||t||this.updateField(this.treeData,this.fields,n,"isChecked",null);var a=this.getChildNodes(this.treeData,n);a.length>0&&this.getChildItems(a,t)}}},{key:"childStateChange",value:function(e,t,i,n){for(var r=0;r<e.length;r++){var a=e[r][this.fields.id]?e[r][this.fields.id].toString():"",o=e[r][this.fields.isChecked]?e[r][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(a)?(this.checkedNodes.push(a),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)):-1!==this.checkedNodes.indexOf(t)||-1===this.checkedNodes.indexOf(a)||n||(this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),"true"===o&&this.updateField(this.treeData,this.fields,a,"isChecked",null)):this.autoCheck||(n?-1===this.checkedNodes.indexOf(a)&&this.checkedNodes.push(a):(-1!==this.checkedNodes.indexOf(a)&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),this.updateField(this.treeData,this.fields,a,"isChecked",null),this.checkedNodes=[]));var s=this.getChildNodes([e[r]],a);s&&this.childStateChange(s,t,i,n)}}},{key:"allCheckNode",value:function(e,t,i,n,r){if(e)for(var a=0;a<e.length;a++){var o=TD(this.fields.id,e[a]),s=this.element.querySelector('[data-uid="'+o+'"]');if(!1!==r&&-1===this.checkedElement.indexOf(o.toString())&&(null===s&&!RD(e[a][this.fields.isChecked])&&-1===t.indexOf(o.toString())||0===n||2===i)&&(!1!==e[a][this.fields.isChecked]||2===i?t.push(o.toString()):n=null,n=!1!==e[a][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(o.toString())&&RD(i)&&t.push(o.toString()),!0===TD(this.fields.hasChildren,e[a])||TD(this.fields.child.toString(),e[a])){var l=TD(this.fields.id,e[a]),c=this.getChildNodes(this.treeData,l.toString());c&&(RD(r)?this.allCheckNode(c,t,i,n):this.allCheckNode(c,t,i,n,r),n=null)}n=null}}},{key:"openNode",value:function(e,t){var i=this.getFocusedNode(),n=RP("div.e-icons",i);if(e){if(!n)return;n.classList.contains(aj)?this.expandAction(i,n,t):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(rj))this.collapseNode(i,n,t);else{var r=MP(MP(i,"."+lj),"."+oj);if(!r)return;r.classList.contains("e-disable")||(this.setFocus(i,r),this.navigateToFocus(!0))}}},{key:"navigateNode",value:function(e){var t=this.getFocusedNode();this.focusNextNode(t,e)}},{key:"navigateRootNode",value:function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))}},{key:"getFocusedNode",value:function(){var e,t=RP("."+oj+"."+mj,this.element);return RD(t)&&(e=RP("."+oj,this.element)),RD(t)?RD(e)?this.element.firstElementChild:e:t}},{key:"focusNextNode",value:function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains("e-text-content")?this.focusNextNode(i,!1):this.focusNextNode(i,t)}}},{key:"getNextNode",value:function(e){var t,i=this.liList.indexOf(e);do{if(i++,RD(t=this.liList[i]))return e}while(!EP(t));return t}},{key:"getPrevNode",value:function(e){var t,i=this.liList.indexOf(e);do{if(i--,RD(t=this.liList[i]))return e}while(!EP(t));return t}},{key:"getRootNode",value:function(){var e,t=0;do{e=this.liList[t],t++}while(!EP(e));return e}},{key:"getEndNode",value:function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!EP(e));return e}},{key:"setFocus",value:function(e,t){_P([e],[cj,mj]),t.classList.contains("e-disable")||(wP([t],[cj,mj]),this.updateIdAttr(e,t))}},{key:"updateIdAttr",value:function(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")}},{key:"focusIn",value:function(){this.mouseDownStatus||wP([this.getFocusedNode()],cj),this.mouseDownStatus=!1}},{key:"focusOut",value:function(){_P([this.getFocusedNode()],cj)}},{key:"onMouseOver",value:function(e){var t=e.target,i=t.classList,n=MP(t,"."+oj);!n||i.contains(lj)||i.contains(oj)?this.removeHover():n&&!n.classList.contains("e-disable")&&this.setHover(n)}},{key:"setHover",value:function(e){e.classList.contains(cj)||(this.removeHover(),wP([e],cj))}},{key:"onMouseLeave",value:function(e){this.removeHover()}},{key:"removeHover",value:function(){var e=PP("."+cj,this.element);e&&e.length&&_P(e,cj)}},{key:"getNodeData",value:function(e,t){if(!RD(e)&&e.classList.contains(oj)&&!RD(MP(e,".e-control"))&&MP(e,".e-control").classList.contains("e-treeview")){var i=e.getAttribute("data-uid"),n=this.getText(e,t),r=MP(e.parentNode,"."+oj),a=r?r.getAttribute("data-uid"):null,o=e.classList.contains("e-active"),s="true"===e.getAttribute("aria-expanded"),l=null!==e.getAttribute("aria-expanded");this.isBlazorPlatform&&(l="true"===e.getAttribute("aria-expanded")||null!=(e.querySelector(".e-icon-expandable")||e.querySelector(".e-icon-collapsible")));var c=null;return this.showCheckBox&&(c=RP("."+vj,e).getAttribute("aria-checked")),{id:i,text:n,parentID:a,selected:o,expanded:s,isChecked:c,hasChildren:l}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}}},{key:"getText",value:function(e,t){if(t){var i=this.getNodeObject(e.getAttribute("data-uid")),n=parseFloat(e.getAttribute("aria-level"));return TD(this.getFields(this.fields,n,1).text,i)}return RP("."+sj,e).textContent}},{key:"getExpandEvent",value:function(e,t){var i=this.getNodeData(e);return{cancel:!1,isInteracted:!RD(t),node:e,nodeData:i,event:t}}},{key:"destroyTemplate",value:function(e){this.clearTemplate(["nodeTemplate"])}},{key:"reRenderNodes",value:function(){this.updateListProp(this.fields),iP(this.element.id+"nodeTemplate"),this.isBlazorPlatform?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",RD(this.nodeTemplateFn)||this.destroyTemplate(this.nodeTemplate),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)}},{key:"setCssClass",value:function(e,t){RD(e)||""===e||_P([this.element],e.split(" ")),RD(t)||""===t||wP([this.element],t.split(" "))}},{key:"editingHandler",value:function(e){var t=e.target;if(!(!t||t.classList.contains("e-treeview")||t.classList.contains(lj)||t.classList.contains(oj)||t.classList.contains("e-icons")||t.classList.contains("e-input")||t.classList.contains("e-input-group"))){var i=MP(t,"."+oj);this.createTextbox(i,e)}}},{key:"createTextbox",value:function(e,t){var i=this,n=RP(".e-tree-input",this.element);n&&n.blur();var r=RP("."+sj,e);this.updateOldText(e);var a=this.createElement("input",{className:"e-tree-input",attrs:{value:this.oldText}}),o=this.getEditEvent(e,null,a.outerHTML);this.trigger("nodeEditing",o,(function(t){if(!t.cancel){var n="width:"+(r.offsetWidth+5)+"px";wP([e],"e-editing"),r.innerHTML=o.innerHtml;var a=RP(".e-tree-input",r);i.inputObj=cV.createInput({element:a,properties:{enableRtl:i.enableRtl}},i.createElement),i.inputObj.container.setAttribute("style",n),a.focus(),a.setSelectionRange(0,a.value.length),i.wireInputEvents(a)}}))}},{key:"updateOldText",value:function(e){var t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);var i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=TD(this.editFields.text,this.editData)}},{key:"inputFocusOut",value:function(e){if(RP(".e-tree-input",this.element)){var t=e.target,i=t.value,n=MP(t,"."+sj),r=MP(t,"."+oj);xP(this.inputObj.container),this.fields.dataSource instanceof TF&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("update",null,r,i,null,null,!0):this.appendNewText(r,n,i,!0)}}},{key:"appendNewText",value:function(e,t,i,n){var r=this,a=this.getEditEvent(e,i,null);this.trigger("nodeEdited",a,(function(a){r.updateText(e,t,i=a.cancel?a.oldText:a.newText,n),a.oldText!==i&&r.triggerEvent()}))}},{key:"updateText",value:function(e,t,i,n){var r=AD(this.editFields.text,i,this.editData);if(RD(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";var a=this.nodeTemplateFn(r,void 0,void 0,this.element.id+"nodeTemplate",this.isStringTemplate);AP(a=Array.prototype.slice.call(a),t),this.updateBlazorTemplate()}n&&(_P([e],"e-editing"),t.focus())}},{key:"getElement",value:function(e){return RD(e)?null:"string"==typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"==typeof e?VD(e):null}},{key:"getId",value:function(e){return RD(e)?null:"string"==typeof e?e:"object"==typeof e?VD(e).getAttribute("data-uid"):null}},{key:"getEditEvent",value:function(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}}},{key:"getNodeObject",value:function(e){if(!RD(e)){if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(var t=0,i=this.treeData.length;t<i;t++){var n=TD(this.fields.id,this.treeData[t]);if(!RD(this.treeData[t])&&!RD(n)&&n.toString()===e)return this.treeData[t]}}}},{key:"getChildNodeObject",value:function(e,t,i){var n;if(RD(e))return n;for(var r=0,a=e.length;r<a;r++){var o=TD(t.id,e[r]);if(e[r]&&o&&o.toString()===i)return e[r];if("string"!=typeof t.child||RD(TD(t.child,e[r]))){if(this.fields.dataSource instanceof TF&&!RD(TD("child",e[r]))&&void 0!==(n=this.getChildNodeObject(TD("child",e[r]),this.getChildMapper(t),i)))break}else{var s=TD(t.child,e[r]);if(void 0!==(n=this.getChildNodeObject(s,this.getChildMapper(t),i)))break}}return n}},{key:"setDragAndDrop",value:function(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()}},{key:"initializeDrag",value:function(){var e,t=this,i=this;this.dragObj=new AM(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+dj,helper:function(n){t.dragTarget=n.sender.target;var r=MP(t.dragTarget,".e-treeview"),a=MP(t.dragTarget,"."+dj);if(t.dragLi=MP(t.dragTarget,"."+oj),t.fullRowSelect&&!a&&t.dragTarget.classList.contains("e-fullrow")&&(a=t.dragTarget.nextElementSibling),!t.dragTarget||!n.element.isSameNode(r)||!a||t.dragTarget.classList.contains("e-treeview")||t.dragTarget.classList.contains(lj)||t.dragTarget.classList.contains(oj)||t.dragLi.classList.contains("e-disable"))return!1;var o=a.cloneNode(!0);if(RD(RP("div.e-icons",o))){var s=i.createElement("div",{className:"e-icons "+aj});o.insertBefore(s,o.children[0])}(e=i.createElement("div",{className:"e-drag-item e-treeview "+t.cssClass+" "+(t.enableRtl?"e-rtl":"")})).appendChild(o);var l=t.selectedNodes.length;if(l>1&&t.allowMultiSelection&&t.dragLi.classList.contains("e-active")){var c=i.createElement("span",{className:"e-drop-count",innerHTML:""+l});e.appendChild(c)}return document.body.appendChild(e),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),e},dragStart:function(i){wP([t.element],"e-dragging");var n,r=MP(i.target,".e-list-item");r&&(n=parseInt(r.getAttribute("aria-level"),10));var a=t.getDragEvent(i.event,t,null,i.target,null,e,n);a.draggedNode.classList.contains("e-editing")?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.trigger("nodeDragStart",a,(function(n){n.cancel?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.dragStartAction=!0}))},drag:function(i){t.dragObj.setProperties({cursorAt:{top:!RD(i.event.targetTouches)||AR.isDevice?60:-20}}),t.dragAction(i,e)},dragStop:function(e){_P([t.element],"e-dragging"),t.removeVirtualEle();var i=e.target,n=MP(i,".e-droppable"),r=!0;i&&n||(xP(e.helper),document.body.style.cursor="",r=!1);var a,o=MP(i,".e-list-item");o&&(a=parseInt(o.getAttribute("aria-level"),10));var s=t.getDragEvent(e.event,t,i,i,null,e.helper,a);s.preventTargetExpand=!1,(t.isBlazorPlatform&&t.dragStartAction||!t.isBlazorPlatform)&&t.trigger("nodeDragStop",s,(function(i){t.dragParent=i.draggedParentNode,t.preventExpand=i.preventTargetExpand,i.cancel&&(e.helper.parentNode&&xP(e.helper),document.body.style.cursor="",r=!1),t.dragStartAction=!1,t.isBlazorPlatform&&r&&t.dropAction(e,!0)}))}}),this.dropObj=new xM(this.element,{out:function(e){RD(e)||e.target.classList.contains(pj)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""},drop:function(e){t.isBlazorPlatform||t.dropAction(e)}})}},{key:"dragCancelAction",value:function(e){xP(e),_P([this.element],"e-dragging"),this.dragStartAction=!1}},{key:"dragAction",value:function(e,t){var i=MP(e.target,".e-droppable"),n=MP(e.target,"."+dj),r=RP("div.e-icons",t);_P([r],["e-drop-in",fj,"e-drop-out","e-no-drop"]),this.removeVirtualEle(),document.body.style.cursor="";var a=e.target.classList;if(this.fullRowSelect&&!n&&!RD(a)&&a.contains("e-fullrow")&&(n=e.target.nextElementSibling),i){var o=MP(e.target,"."+oj),s=MP(e.target,"."+vj),l=MP(e.target,"."+rj),c=MP(e.target,"."+aj);if(!i.classList.contains("e-treeview")||n&&!o.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,o))if(o&&e&&!c&&!l&&e.event.offsetY<7&&!s||c&&e.event.offsetY<5||l&&e.event.offsetX<3){wP([r],fj);var u=this.createElement("div",{className:pj});o.insertBefore(u,o.children[this.fullRowSelect?1:0])}else if(o&&e&&!c&&!l&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!s||c&&e.event.offsetY>19||l&&e.event.offsetX>19){wP([r],fj);var h=this.createElement("div",{className:pj});o.insertBefore(h,o.children[this.fullRowSelect?2:1])}else wP([r],"e-drop-in");else"LI"!==e.target.nodeName||o.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,o)?e.target.classList.contains(pj)?wP([r],fj):wP([r],"e-drop-out"):(wP([r],fj),this.renderVirtualEle(e))}else wP([r],"e-no-drop"),document.body.style.cursor="not-allowed";var d,p=MP(e.target,".e-list-item");p&&(d=parseInt(p.getAttribute("aria-level"),10));var f=this.getDragEvent(e.event,this,e.target,e.target,null,t,d);f.dropIndicator&&_P([r],f.dropIndicator),this.trigger("nodeDragging",f),f.dropIndicator&&wP([r],f.dropIndicator)}},{key:"dropAction",value:function(e,t){var i,n,r,a=e.event.offsetY,o=e.target,s=!1;r=t?e.element:e.dragData.draggable;for(var l=0;l<r.ej2_instances.length;l++)if(r.ej2_instances[l]instanceof OV){i=r.ej2_instances[l];break}if(i&&i.dragTarget){var c=MP(i.dragTarget,"."+oj),u=MP(o,"."+oj);if(null==u&&o.classList.contains("e-treeview")&&(u=o.firstElementChild),xP(t?e.helper:e.droppedElement),document.body.style.cursor="",!u||u.isSameNode(c)||this.isDescendant(c,u))return void(this.fields.dataSource instanceof TF==0&&(this.preventExpand=!1));if(i.allowMultiSelection&&c.classList.contains("e-active")){var h=PP(".e-active",i.element);if(e.target.offsetHeight<=33&&a>e.target.offsetHeight-10&&a>6)for(var d=h.length-1;d>=0;d--)u.isSameNode(h[d])||this.isDescendant(h[d],u)||this.appendNode(o,h[d],u,e,i,a);else for(var p=0;p<h.length;p++)u.isSameNode(h[p])||this.isDescendant(h[p],u)||this.appendNode(o,h[p],u,e,i,a)}else this.appendNode(o,c,u,e,i,a);n=parseInt(c.getAttribute("aria-level"),10),s=!0}this.fields.dataSource instanceof TF==0&&(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(e.event,i,o,e.target,t?e.element:e.dragData.draggedElement,null,n,s)),this.triggerEvent()}},{key:"appendNode",value:function(e,t,i,n,r,a){var o=MP(e,"."+vj),s=MP(n.target,"."+rj),l=MP(n.target,"."+aj);t.classList.contains("e-disable")||o||!(l&&n.event.offsetY<5||s&&n.event.offsetX<3||l&&n.event.offsetY>19||s&&n.event.offsetX>19||!l&&!s)?this.dropAsChildNode(t,i,r,null,n,a,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,n,r):e.firstElementChild&&e.classList.contains("e-treeview")?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,n,r):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,n,r):this.dropAsChildNode(t,i,r,null,n,a)}},{key:"dropAsSiblingNode",value:function(e,t,i,n){var r,a=MP(t,"."+lj),o=MP(e,"."+lj),s=MP(o,"."+oj);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?r=!1:i.event.offsetY<2?r=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?r=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(r=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var l=i.target.closest("li");a.insertBefore(e,r?l:l.nextElementSibling)}else a.insertBefore(e,r?i.target:i.target.nextElementSibling);this.moveData(e,t,a,r,n),this.updateElement(o,s),this.updateAriaLevel(e),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())}},{key:"dropAsChildNode",value:function(e,t,i,n,r,a,o){var s=MP(e,"."+lj),l=MP(s,"."+oj),c=MP(t,"."+lj);if(r&&a<7&&!o)c.insertBefore(e,t),this.moveData(e,t,c,!0,i);else if(r&&r.target.offsetHeight>0&&a>r.target.offsetHeight-10&&!o)c.insertBefore(e,t.nextElementSibling),this.moveData(e,t,c,!1,i);else{var u=this.expandParent(t),h=u.childNodes[n];u.insertBefore(e,h),this.moveData(e,h,u,!0,i)}this.updateElement(s,l),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())}},{key:"moveData",value:function(e,t,i,n,r){var a=MP(i,"."+oj),o=this.getId(e),s=r.updateChildField(r.treeData,r.fields,o,null,null,!0),l=this.getId(t),c=this.getDataPos(this.treeData,this.fields,l),u=this.getId(a);if(1===this.dataType){this.updateField(this.treeData,this.fields,u,"hasChildren",!0);var h=RD(c)?this.treeData.length:n?c:c+1;if(RD(u)&&!this.hasPid)delete s[0][this.fields.parentID];else{var d=this.isNumberTypeId?parseFloat(u):u;AD(this.fields.parentID,d,s[0])}if(this.treeData.splice(h,0,s[0]),r.element.id!==this.element.id){var p=r.removeChildNodes(o);h++;for(var f=0,v=p.length;f<v;f++)this.treeData.splice(h,0,p[f]),h++;r.groupedData=r.getGroupedData(r.treeData,r.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,u,s,n?c:c+1)}},{key:"expandParent",value:function(e){var t=RP("div.e-icons",e);t&&t.classList.contains(aj)&&!0!==this.preventExpand&&this.expandAction(e,t,null);var i=RP("."+lj,e);if(!0===this.preventExpand&&!i&&t&&this.renderChildNodes(e),RD(i=RP("."+lj,e))||!0!==this.preventExpand||(i.style.display="none"),RD(i)||!1!==this.preventExpand||(i.style.display="block"),RD(i)&&!0===this.preventExpand){RD(t)&&mF.generateIcon(this.createElement,e,aj,this.listBaseOption);var n=RP("div.e-icons",e);n&&n.classList.add("e-icon-expandable"),i=mF.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),n?_P([n],rj):mF.generateIcon(this.createElement,e,aj,this.listBaseOption),e.setAttribute("aria-expanded","false"),i.style.display="none"}if(RD(i)){this.trigger("nodeExpanding",this.getExpandEvent(e,null)),RD(t)&&mF.generateIcon(this.createElement,e,rj,this.listBaseOption);var r=RP("div.e-icons",e);r||(mF.generateIcon(this.createElement,e,rj,this.listBaseOption),r=RP("div.e-icons",e)),_P([r],aj),i=mF.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(i),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null))}return i}},{key:"updateElement",value:function(e,t){if(t&&0===e.childElementCount){var i=RP("div.e-icons",t);xP(e),xP(i);var n=this.getId(t);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(t,!0)}}},{key:"updateAriaLevel",value:function(e){var t=this.parents(e,"."+lj).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel(RP("."+lj,e),t+1)}},{key:"updateChildAriaLevel",value:function(e,t){if(!RD(e))for(var i=e.childNodes,n=0,r=i.length;n<r;n++){var a=i[n];a.setAttribute("aria-level",""+t),this.updateChildAriaLevel(RP("."+lj,a),t+1)}}},{key:"renderVirtualEle",value:function(e){var t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);var i=this.createElement("div",{className:pj});e.target.insertBefore(i,e.target.children[this.fullRowSelect?t?1:2:t?0:1])}},{key:"removeVirtualEle",value:function(){var e=RP("."+pj);e&&xP(e)}},{key:"destroyDrag",value:function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())}},{key:"getDragEvent",value:function(e,t,i,n,r,a,o,s){var l=i?MP(i,"."+oj):null,c=l?this.getNodeData(l):null,u=t?t.dragLi:r,h=t?t.dragData:null,d=i?this.parents(i,"."+oj):null,p=t.dragLi.parentElement,f=t.dragLi?MP(p,"."+oj):null,v=null,m=null,g=[fj,"e-drop-in","e-drop-out","e-no-drop"],y=null,b=!0===s?u:l,k=b?MP(b,".e-list-parent"):null,C=0;if(f=t.dragLi&&null===f?MP(p,".e-treeview"):f,f=!0===s?this.dragParent:f,a)for(;C<4;){if(RP(".e-icons",a).classList.contains(g[C])){y=g[C];break}C++}if(k){var w=0;for(C=0;C<k.childElementCount;C++){if(w=!0!==s&&k.children[C]===u&&l!==u?++w:w,!0!==s&&k.children[C].classList.contains("e-hover")){m=e.offsetY>=23?C+1:C;break}if(k.children[C]===b){m=C;break}}m=0!==w?--m:m}if(i&&(v=0===d.length?null:i.classList.contains(oj)?d[0]:d[1]),l===u&&(v=l),i&&n.offsetHeight<=33&&e.offsetY<n.offsetHeight-10&&e.offsetY>6&&(v=l,!0!==s)){o=++o;var _=v?RP(".e-list-parent",v):null;if(m=_?_.children.length:0,!(this.fields.dataSource instanceof TF)&&null===_&&v){var S=v.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,v.getAttribute("data-uid").toString()):null;m=S?S.length:0}}return{cancel:!1,clonedNode:a,event:e,draggedNode:u,draggedNodeData:h,droppedNode:l,droppedNodeData:c,dropIndex:m,dropLevel:o,draggedParentNode:f,dropTarget:v,dropIndicator:y,target:n}}},{key:"addFullRow",value:function(e){var t=this.liList.length;if(e)for(var i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(var n=0;n<t;n++)xP(RP(".e-fullrow",this.liList[n]))}},{key:"createFullRow",value:function(e){var t=this.createElement("div",{className:"e-fullrow"});e.insertBefore(t,e.childNodes[0])}},{key:"addMultiSelect",value:function(e){if(e){var t,i=_createForOfIteratorHelper(PP("."+oj+':not([aria-selected="true"])',this.element));try{for(i.s();!(t=i.n()).done;)t.value.setAttribute("aria-selected","false")}catch(a){i.e(a)}finally{i.f()}}else{var n,r=_createForOfIteratorHelper(PP("."+oj+'[aria-selected="false"]',this.element));try{for(r.s();!(n=r.n()).done;)n.value.removeAttribute("aria-selected")}catch(a){r.e(a)}finally{r.f()}}}},{key:"collapseByLevel",value:function(e,t,i){if(t>0&&!RD(e))for(var n=this.getVisibleNodes(i,e.childNodes),r=0,a=n.length;r<a;r++){var o=n[r],s=RP("."+rj,RP("."+dj,o));RD(s)||this.collapseNode(o,s,null),this.collapseByLevel(RP("."+lj,o),t-1,i)}}},{key:"collapseAllNodes",value:function(e){for(var t=this.getVisibleNodes(e,PP("."+rj,this.element)),i=0,n=t.length;i<n;i++){var r=t[i],a=MP(r,"."+oj);this.collapseNode(a,r,null)}}},{key:"expandByLevel",value:function(e,t,i){if(t>0&&!RD(e))for(var n=this.getVisibleNodes(i,e.childNodes),r=0,a=n.length;r<a;r++){var o=n[r],s=RP("."+aj,RP("."+dj,o));RD(s)||this.expandAction(o,s,null),this.expandByLevel(RP("."+lj,o),t-1,i)}}},{key:"expandAllNodes",value:function(e){for(var t=this.getVisibleNodes(e,PP("."+aj,this.element)),i=0,n=t.length;i<n;i++){var r=t[i],a=MP(r,"."+oj);this.expandAction(a,r,null,!0)}}},{key:"getVisibleNodes",value:function(e,t){var i=Array.prototype.slice.call(t);if(e)for(var n=0;n<i.length;n++)EP(i[n])||(i.splice(n,1),n--);return i}},{key:"removeNode",value:function(e){var t=MP(e,"."+lj),i=MP(t,"."+oj);xP(e),this.updateElement(t,i),this.updateInstance(),this.removeData(e)}},{key:"updateInstance",value:function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes(),this.allowServerDataBinding=!1,this.updateServerProperties("expand"),this.updateServerProperties("check"),this.updateServerProperties("select"),this.allowServerDataBinding=!0}},{key:"updateServerProperties",value:function(e){this.isBlazorPlatform&&("expand"==e?(this.isBlazorExpandedNodes=this.expandedNodes,this.setProperties({expandedNodes:[]},!0)):this.setProperties("check"==e?{checkedNodes:this.checkedNodes}:{selectedNodes:this.selectedNodes},!0))}},{key:"updateList",value:function(){this.liList=Array.prototype.slice.call(PP("."+oj,this.element))}},{key:"updateSelectedNodes",value:function(){if(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender){this.setProperties({selectedNodes:[]},!0);var e=PP(".e-active",this.element);this.selectGivenNodes(e)}else if(this.isBlazorPlatform&&this.initialRender)for(var t=PP(".e-active",this.element),i=0;i<t.length;i++){var n=t[i].getAttribute("data-uid").toString();RD(n)||-1!==this.selectedNodes.indexOf(n)||this.selectedNodes.push(n)}}},{key:"updateExpandedNodes",value:function(){if(!this.isBlazorPlatform||this.isBlazorPlatform&&!this.initialRender){this.setProperties({expandedNodes:[]},!0);for(var e=PP('[aria-expanded="true"]',this.element),t=0,i=e.length;t<i;t++)this.addExpand(e[t])}else if(this.isBlazorPlatform&&this.initialRender)for(var n=PP('[aria-expanded="true"]',this.element),r=0;r<n.length;r++){var a=n[r].getAttribute("data-uid").toString();RD(a)||-1!==this.expandedNodes.indexOf(a)||this.expandedNodes.push(a)}}},{key:"removeData",value:function(e){if(1===this.dataType){var t=new TF(this.treeData),i=this.getId(e),n={},r=this.isNumberTypeId?parseFloat(i):i;n[this.fields.id]=r,t.remove(this.fields.id,n),this.removeChildNodes(i)}else{var a=this.getId(e);this.updateChildField(this.treeData,this.fields,a,null,null,!0)}}},{key:"removeChildNodes",value:function(e){var t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(var n=0,r=t.length;n<r;n++){var a=new TF(this.treeData),o=TD(this.fields.id,t[n]).toString(),s={},l=this.isNumberTypeId?parseFloat(o):o;s[this.fields.id]=l;var c=a.remove(this.fields.id,s);i.push(c[0]),this.removeChildNodes(o)}return i}},{key:"doGivenAction",value:function(e,t,i){for(var n=0,r=e.length;n<r;n++){var a=this.getElement(e[n]);if(!RD(a)){var o=RP("."+t,RP("."+dj,a));RD(o)||(i?this.expandAction(a,o,null):this.collapseNode(a,o,null))}}}},{key:"addGivenNodes",value:function(e,t,i,n,r){if(0!==e.length){var a=this.getSortedData(e),o=t?parseFloat(t.getAttribute("aria-level"))+1:1;n&&this.updateMapper(o);for(var s,l=mF.createListItemFromJson(this.createElement,a,this.listBaseOption,o),c=(s=r||(t?this.expandParent(t):RP("."+lj,this.element))).childNodes[i],u=0;u<l.length;u++)s.insertBefore(l[u],c);this.nodeTemplate&&this.isBlazorPlatform&&!this.isStringTemplate&&this.updateBlazorTemplate();var h=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,h,"hasChildren",!0);for(var d=this.getId(c),p=RD(d)?this.treeData.length:this.getDataPos(this.treeData,this.fields,d),f=0;f<e.length;f++){if(!RD(h)){var v=this.isNumberTypeId?parseFloat(h):h;AD(this.fields.parentID,v,e[f])}this.treeData.splice(p,0,e[f]),p++}}else this.addChildData(this.treeData,this.fields,h,e,i);this.finalizeNode(s)}}},{key:"updateMapper",value:function(e){var t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)}},{key:"updateListProp",value:function(e){var t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"}},{key:"getDataPos",value:function(e,t,i){for(var n=null,r=0,a=e.length;r<a;r++){var o=TD(t.id,e[r]);if(e[r]&&o&&o.toString()===i)return r;if("string"!=typeof t.child||RD(TD(t.child,e[r]))){if(this.fields.dataSource instanceof TF&&!RD(TD("child",e[r]))){var s=TD("child",e[r]);if(null!==(n=this.getDataPos(s,this.getChildMapper(t),i)))break}}else{var l=TD(t.child,e[r]);if(null!==(n=this.getDataPos(l,this.getChildMapper(t),i)))break}}return n}},{key:"addChildData",value:function(e,t,i,n,r){var a;if(RD(i)){r=RD(r)?e.length:r;for(var o=0,s=n.length;o<s;o++)e.splice(r,0,n[o]),r++;return a}for(var l=0,c=e.length;l<c;l++){var u=TD(t.id,e[l]);if(e[l]&&u&&u.toString()===i){if("string"==typeof t.child&&e[l].hasOwnProperty(t.child)&&null!==e[l][t.child]||this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName&&e[l].hasOwnProperty("child")){var h=TD("string"==typeof t.child?t.child:"child",e[l]);RD(h)&&(h=[]),r=RD(r)?h.length:r;for(var d=0,p=n.length;d<p;d++)h.splice(r,0,n[d]),r++}else e[l]["string"==typeof t.child?t.child:"child"]=n;return!0}if("string"!=typeof t.child||RD(TD(t.child,e[l]))){if(this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName&&!RD(TD("child",e[l]))){var f=TD("child",e[l]);if(void 0!==(a=this.addChildData(f,this.getChildMapper(t),i,n,r)))break}}else{var v=TD(t.child,e[l]);if(void 0!==(a=this.addChildData(v,this.getChildMapper(t),i,n,r)))break}}return a}},{key:"doDisableAction",value:function(e){var t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(var n=0,r=i.length;n<r;n++){var a=i[n][this.fields.id].toString();a&&-1===this.disableNode.indexOf(a)&&this.disableNode.push(a);var o=this.getElement(a);o&&(o.setAttribute("aria-disabled","true"),wP([o],"e-disable"))}}},{key:"doEnableAction",value:function(e){for(var t=this.nodeType(e),i=0,n=t.length;i<n;i++){var r=this.getElement(t[i]),a=t[i];a&&-1!==this.disableNode.indexOf(a)&&this.disableNode.splice(this.disableNode.indexOf(a),1),r&&(r.removeAttribute("aria-disabled"),_P([r],"e-disable"))}}},{key:"nodeType",value:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=void 0;"string"==typeof e[i]?r=e[i]?e[i].toString():null:"object"==typeof e[i]&&(r=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(r)&&t.push(r)}return t}},{key:"checkValidId",value:function(e){var t=this;if(1===this.dataType)this.validArr=this.treeData.filter((function(i){return-1!==e.indexOf(i[t.fields.id]?i[t.fields.id].toString():null)}));else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var n=this.treeData[i][this.fields.id]?this.treeData[i][this.fields.id].toString():null;-1!==e.indexOf(n)&&this.validArr.push(this.treeData[i]);var r=TD(this.fields.child.toString(),this.treeData[i]);r&&this.filterNestedChild(r,e)}return this.validArr}},{key:"filterNestedChild",value:function(e,t){for(var i=0;i<e.length;i++){var n=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(n)&&this.validArr.push(e[i]);var r=TD(this.fields.child.toString(),e[i]);r&&this.filterNestedChild(r,t)}}},{key:"setTouchClass",value:function(){var e=MP(this.element,".e-bigger");this.touchClass=RD(e)?"":"e-small"}},{key:"updatePersistProp",value:function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var e=this.selectedNodes,t=0,i=e.length;t<i;t++)this.updateField(this.treeData,this.fields,e[t],"selected",!0);var n=this.expandedNodes;this.isBlazorPlatform&&(n=this.isBlazorExpandedNodes);for(var r=0,a=n.length;r<a;r++)this.updateField(this.treeData,this.fields,n[r],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);for(var o=this.checkedNodes,s=0,l=o.length;s<l;s++)this.updateField(this.treeData,this.fields,o[s],"isChecked",!0)}}},{key:"removeField",value:function(e,t,i){if(!RD(e)&&!RD(t))for(var n=0,r=e.length;n<r;n++){for(var a=0;a<i.length;a++){var o=this.getMapperProp(t,i[a]);RD(e[n][o])||delete e[n][o]}"string"!=typeof t.child||RD(TD(t.child,e[n]))?this.fields.dataSource instanceof TF&&!RD(TD("child",e[n]))&&this.removeField(TD("child",e[n]),this.getChildMapper(t),i):this.removeField(TD(t.child,e[n]),this.getChildMapper(t),i)}}},{key:"getMapperProp",value:function(e,t){switch(t){case"selected":return RD(e.selected)?"selected":e.selected;case"expanded":return RD(e.expanded)?"expanded":e.expanded;case"isChecked":return RD(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return RD(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}}},{key:"updateField",value:function(e,t,i,n,r){if(!RD(i))if(1===this.dataType){var a=this.isNumberTypeId?parseFloat(i):i,o=new TF(this.treeData).executeLocal((new gF).where(t.id,"equal",a,!1));AD(this.getMapperProp(t,n),r,o[0])}else this.updateChildField(e,t,i,n,r)}},{key:"updateChildField",value:function(e,t,i,n,r,a){var o;if(RD(e))return o;for(var s=0,l=e.length;s<l;s++){var c=TD(t.id,e[s]);if(e[s]&&c&&c.toString()===i)return a?o=e.splice(s,1):(AD(this.getMapperProp(t,n),r,e[s]),o=[]),o;if("string"!=typeof t.child||RD(TD(t.child,e[s]))){if(this.fields.dataSource instanceof TF&&!RD(TD("child",e[s]))){var u=TD("child",e[s]);if(void 0!==(o=this.updateChildField(u,this.getChildMapper(t),i,n,r,a)))break}}else{var h=TD(t.child,e[s]);if(void 0!==(o=this.updateChildField(h,this.getChildMapper(t),i,n,r,a)))break}}return o}},{key:"triggerEvent",value:function(){this.updateTemplateForBlazor(),this.trigger("dataSourceChanged",{data:this.treeData})}},{key:"updateBlazorTemplate",value:function(){}},{key:"clientUpdateInitial",value:function(){this.blazorInitialRender=!0}},{key:"wireInputEvents",value:function(e){OR.add(e,"blur",this.inputFocusOut,this)}},{key:"wireEditingEvents",value:function(e){if(e&&!this.disabled){var t=this;this.touchEditObj=new FM(this.element,{tap:function(e){2===e.tapCount&&(e.originalEvent.preventDefault(),t.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()}},{key:"wireClickEvent",value:function(e){if(e){var t=this;this.touchClickObj=new FM(this.element,{tap:function(e){t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()}},{key:"wireExpandOnEvent",value:function(e){var t=this;if(e){var i=this;this.touchExpandObj=new FM(this.element,{tap:function(e){("Click"===t.expandOnType||"DblClick"===t.expandOnType&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()}},{key:"mouseDownHandler",value:function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&OR.add(this.element,"contextmenu",this.preventContextMenu,this)}},{key:"preventContextMenu",value:function(e){e.preventDefault()}},{key:"wireEvents",value:function(){OR.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),OR.add(this.element,"focus",this.focusIn,this),OR.add(this.element,"blur",this.focusOut,this),OR.add(this.element,"mouseover",this.onMouseOver,this),OR.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new RM(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}},{key:"unWireEvents",value:function(){OR.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),OR.remove(this.element,"focus",this.focusIn),OR.remove(this.element,"blur",this.focusOut),OR.remove(this.element,"mouseover",this.onMouseOver),OR.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()}},{key:"parents",value:function(e,t){for(var i=[],n=e.parentNode;!RD(n);)FP(n,t)&&i.push(n),n=n.parentNode;return i}},{key:"isDescendant",value:function(e,t){for(var i=t.parentNode;!RD(i);){if(i===e)return!0;i=i.parentNode}return!1}},{key:"showSpinner",value:function(e){wP([e],uj),function(e,t){if(e.target){var i,n=RD(t)?CP:t,r=function(e,t){var i=t("div",{});i.classList.add("e-spinner-pane");var n=t("div",{});return n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,n);if(RD(e.cssClass)||r.wrap.classList.add(e.cssClass),RD(e.template)&&RD(null)){var a=RD(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(r.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(RD(e.width)?void 0:e.width,a),function(e,t,i,n){var r=t.querySelector(".e-spinner-inner"),a=r.querySelector("svg");switch(RD(a)||r.removeChild(a),e){case"Material":!function(e,t,i){var n=hV();uV[n]={timeOut:0,type:"Material",radius:t},pV(e,n,0,"e-spin-material"),fV(t,e,"Material","e-spin-material")}(r,i);break;case"Fabric":!function(e,t,i){var n=hV();uV[n]={timeOut:0,type:"Fabric",radius:t},dV(e,n,"e-spin-fabric"),yV(t,e,"e-spin-fabric")}(r,i);break;case"Bootstrap":!function(e,t,i){var n=hV();uV[n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var r=0;r<=7;r++){var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("class","e-path-circle_"+r),a.setAttribute("r","2"),a.setAttribute("transform","translate(32,32)"),n.appendChild(a)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,r=0;r<=7;r++){var a=bV(0,0,24,n),o=i.querySelector(".e-path-circle_"+r);o.setAttribute("cx",a.x+""),o.setAttribute("cy",a.y+""),n=n>=360?0:n,n+=45}}(e,t)}(r,i);break;case"HighContrast":!function(e,t,i){var n=hV();uV[n]={timeOut:0,type:"HighContrast",radius:t},dV(e,n,"e-spin-high-contrast"),yV(t,e,"e-spin-high-contrast")}(r,i);break;case"Bootstrap4":!function(e,t,i){var n=hV();uV[n]={timeOut:0,type:"Bootstrap4",radius:t},pV(e,n,0,"e-spin-bootstrap4"),fV(t,e,"Bootstrap4","e-spin-bootstrap4")}(r,i)}}(a,r.wrap,i),RD(e.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.textContent=t,e.appendChild(n)}(r.inner_wrap,e.label,n)}else{var o=RD(e.template)?null:e.template;r.wrap.classList.add("e-spin-template"),function(e,t,i){RD(null)||e.classList.add(null),e.querySelector(".e-spinner-inner").innerHTML=t}(r.wrap,o)}r.wrap.classList.add("e-spin-hide"),r=null}}({target:e,width:AR.isDevice?16:14},this.createElement),kV(e,!1)}},{key:"hideSpinner",value:function(e){kV(e,!0),e.innerHTML="",_P([e],uj)}},{key:"setCheckedNodes",value:function(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)}},{key:"setValidCheckedNode",value:function(e){if(1===this.dataType){var t=this.fields,i=new TF(this.treeData).executeLocal((new gF).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){for(var n=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,r=this.getChildNodes(this.treeData,n),a=0,o=0;o<r.length;o++){var s=r[o][this.fields.id].toString();-1!==this.checkedNodes.indexOf(s)&&a++}a===r.length&&-1===this.checkedNodes.indexOf(n)&&n&&this.checkedNodes.push(n)}}else if(2===this.dataType)for(var l=0;l<this.treeData.length;l++){if((this.treeData[l][this.fields.id]?this.treeData[l][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}var c=TD(this.fields.child.toString(),this.treeData[l]);c&&this.setChildCheckState(c,e,this.treeData[l])}}},{key:"setChildCheckState",value:function(e,t,i){var n,r=0;if(1===this.dataType){i&&(n=i[this.fields.id]?i[this.fields.id].toString():null);for(var a=0;a<e.length;a++){var o=e[a][this.fields.id]?e[a][this.fields.id].toString():null;i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),o===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);var s=this.getChildNodes(this.treeData,o);s&&this.setChildCheckState(s,t,i)}}else{i&&(n=i[this.fields.id]?i[this.fields.id].toString():"");for(var l=0;l<e.length;l++){var c=e[l][this.fields.id]?e[l][this.fields.id].toString():"";i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(c)&&this.checkedNodes.push(c),c===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t);var u=TD(this.fields.child.toString(),e[l]);u&&this.setChildCheckState(u,t,e[l]),-1!==this.checkedNodes.indexOf(c)&&this.autoCheck&&r++,r===e.length&&-1===this.checkedNodes.indexOf(n)&&this.autoCheck&&this.checkedNodes.push(n)}}}},{key:"setIndeterminate",value:function(e){for(var t=0;t<e.length;t++)this.setValidCheckedNode(e[t])}},{key:"updatePosition",value:function(e,t,i,n){if(1===this.dataType){var r=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(r,1,t),i){this.removeChildNodes(e);for(var a=0;a<n.length;a++)this.treeData.splice(r,0,n[a]),r++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)}},{key:"updateChildPosition",value:function(e,t,i,n,r){for(var a,o=0,s=e.length;o<s;o++){var l=TD(t.id,e[o]);if(e[o]&&l&&l.toString()===i)return e[o]=n[0],!0;if("string"!=typeof t.child||RD(TD(t.child,e[o]))){if(this.fields.dataSource instanceof TF&&!RD(TD("child",e[o]))){var c=TD("child",e[o]);if(void 0!==(a=this.updateChildPosition(c,this.getChildMapper(t),i,n,r)))break}}else{var u=TD(t.child,e[o]);if(void 0!==(a=this.updateChildPosition(u,this.getChildMapper(t),i,n,r)))break}}return a}},{key:"dynamicState",value:function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())}},{key:"crudOperation",value:function(e,t,i,n,r,a,o){var s,l=this,c=this.fields.dataSource,u=[],h=this.getQuery(this.fields),d=this.fields.id,p={addedRecords:[],deletedRecords:[],changedRecords:[]},f=[];t?f=this.nodeType(t):i&&("string"==typeof i?f[0]=i.toString():"object"==typeof i&&(f[0]=i.getAttribute("data-uid").toString()));for(var v=0,m=f.length;v<m;v++)if(!RD(this.getElement(f[v]))){var g=this.getNodeObject(f[v]);u.push(g)}switch(e){case"delete":1==t.length?s=c.remove(d,u[0],h.fromTable,h):(p.deletedRecords=u,s=c.saveChanges(p,d,h.fromTable,h)),s.then((function(e){return l.deleteSuccess(f)})).catch((function(e){return l.dmFailure(e)}));break;case"update":u[0][this.fields.text]=n,(s=c.update(d,u[0],h.fromTable,h)).then((function(e){return l.editSucess(i,n,o)})).catch((function(e){return l.dmFailure(e,i,o)}));break;case"insert":if(1==r.length)s=c.insert(r[0],h.fromTable,h);else{for(var y=[],b=0,k=r.length;b<k;b++)y.push(r[b]);p.addedRecords=y,s=c.saveChanges(p,d,h.fromTable,h)}s.then((function(e){var t=l.getElement(i);l.addSuccess(r,t,a),l.preventExpand=!1})).catch((function(e){return l.dmFailure(e)}))}}},{key:"deleteSuccess",value:function(e){for(var t=0,i=e.length;t<i;t++){var n=this.getElement(e[t]);RD(n)||this.removeNode(n)}1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()}},{key:"editSucess",value:function(e,t,i){var n=this.getElement(e),r=RP("."+sj,n);this.appendNewText(n,r,t,i)}},{key:"addSuccess",value:function(e,t,i){var n,r=t?t.querySelector(".e-icons"):null,a=this;t&&r&&r.classList.contains(aj)&&null===t.querySelector("."+lj)?a.renderChildNodes(t,null,(function(){n=t.querySelector("."+lj),a.addGivenNodes(e,t,i,!0,n),a.triggerEvent()})):(this.addGivenNodes(e,t,i,!0),this.triggerEvent())}},{key:"dmFailure",value:function(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})}},{key:"updatePreviousText",value:function(e,t){var i=this.getElement(e),n=RP("."+sj,i);this.updateText(i,n,this.oldText,t)}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var r=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(r,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.isBlazorPlatform||this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.isBlazorPlatform||this.setProperties({expandedNodes:RD(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.blazorInitialRender||this.reRenderNodes(),this.blazorInitialRender=!1,this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect);break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var a=this.element.querySelectorAll("li"),o=0;o<a.length;)"true"!==a[o].getAttribute("aria-expanded")&&this.renderChildNodes(a[o],!0,null,!0),o++;this.onLoaded=!0}break;case"nodeTemplate":this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}},{key:"destroy",value:function(){iP(this.element.id+"nodeTemplate"),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.isBlazorPlatform&&(this.ulElement=this.element.querySelector(".e-list-parent.e-ul")),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.isBlazorPlatform||_get(_getPrototypeOf(n.prototype),"destroy",this).call(this)}},{key:"addNodes",value:function(e,t,i,n){if(!RD(e)){e=JSON.parse(JSON.stringify(e));var r=this.getElement(t);if(this.preventExpand=n,this.fields.dataSource instanceof TF&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName)this.isOffline?this.addSuccess(e,r,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,r,i);else{if(r)this.addGivenNodes(e,r,i);else{e=this.getSortedData(e);for(var a=0;a<e.length;a++){var o=TD(this.fields.parentID,e[a]);r=o?this.getElement(o.toString()):o,this.addGivenNodes([e[a]],r,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.showCheckBox&&r&&this.ensureParentCheckState(r),(this.fields.dataSource instanceof TF==0||this.fields.dataSource instanceof TF&&"BlazorAdaptor"===this.fields.dataSource.adaptorName)&&(this.preventExpand=!1,this.triggerEvent())}}},{key:"beginEdit",value:function(e){var t=this.getElement(e);RD(t)||this.disabled||this.createTextbox(t,null)}},{key:"checkAll",value:function(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)}},{key:"collapseAll",value:function(e,t,i){RD(e)?t>0?this.collapseByLevel(RP("."+lj,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,rj,!1)}},{key:"disableNodes",value:function(e){RD(e)||this.doDisableAction(e)}},{key:"enableNodes",value:function(e){RD(e)||this.doEnableAction(e)}},{key:"ensureVisible",value:function(e){var t=this.getElement(e);if(!RD(t)){var i=this.parents(t,"."+oj);this.expandAll(i),setTimeout((function(){t.scrollIntoView(!0)}),450)}}},{key:"expandAll",value:function(e,t,i){RD(e)?t>0?this.expandByLevel(RP("."+lj,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,aj,!0)}},{key:"getAllCheckedNodes",value:function(){return this.checkedNodes}},{key:"getDisabledNodes",value:function(){return this.disableNode}},{key:"getNode",value:function(e){var t=this.getElement(e);return this.getNodeData(t,!0)}},{key:"getTreeData",value:function(e){var t=this.getId(e);if(this.updatePersistProp(),RD(t))return this.treeData;var i=this.getNodeObject(t);return RD(i)?[]:[i]}},{key:"moveNodes",value:function(e,t,i,n){var r=this.getElement(t);if(!RD(r)){for(var a=0;a<e.length;a++){var o=this.getElement(e[a]);RD(o)||r.isSameNode(o)||this.isDescendant(o,r)||(this.preventExpand=n,this.dropAsChildNode(o,r,this,i))}this.fields.dataSource instanceof TF==0&&(this.preventExpand=!1),this.triggerEvent()}}},{key:"refreshNode",value:function(e,t){if(!RD(e)&&!RD(t)){var i,n=!1;1==this.dataType&&t.length>1?n=!0:2==this.dataType&&1===t.length&&(RD(TD(this.fields.child.toString(),t[0]))||(n=!0));var r,a,o=this.getElement(e);if(i=o?o.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&n){for(var s=0;s<t.length;s++)if(RD(t[s][this.fields.parentID])){a=t[s],t.splice(s,1);break}r=DD({},this.refreshData,a)}else r=DD({},this.refreshData,t[0]);if(RD(o))this.updatePosition(i,r,n,t);else{this.isRefreshed=!0;var l=parseFloat(o.getAttribute("aria-level")),c=mF.createListItemFromJson(this.createElement,[r],this.listBaseOption,l),u=RP("."+lj,o),h=TD(this.fields.child.toString(),r);if(n&&u||n&&!RD(h))o.innerHTML=c[0].innerHTML,this.updatePosition(i,r,n,t),n&&u&&this.expandAll([i]);else{var d=RP("."+dj,o),p=RP("."+dj,c[0]),f=RP("div.e-icons",d),v=RP("div.e-icons",p);f&&v&&(v.classList.contains(aj)&&f.classList.contains(rj)?(_P([v],aj),wP([v],rj)):v.classList.contains(rj)&&f.classList.contains(aj)?(_P([v],rj),wP([v],aj)):f.classList.contains("interaction")&&wP([v],"interaction")),d.innerHTML=p.innerHTML,this.updatePosition(i,r,n,t)}if(r[this.fields.tooltip]&&o.setAttribute("title",r[this.fields.tooltip]),r.hasOwnProperty(this.fields.htmlAttributes)&&r[this.fields.htmlAttributes]){var m={};ID(m,r[this.fields.htmlAttributes]),m.class?(wP([o],m.class.split(" ")),delete m.class):DP(o,m)}this.isRefreshed=!1,this.triggerEvent()}}}},{key:"removeNodes",value:function(e){RD(e)||(this.fields.dataSource instanceof TF&&!this.isOffline&&"BlazorAdaptor"!==this.fields.dataSource.adaptorName?this.crudOperation("delete",e):this.deleteSuccess(e))}},{key:"updateNode",value:function(e,t){var i=this;if(!RD(e)&&!RD(t)&&this.allowEditing){var n=this.getElement(e);if(!RD(n)){var r=RP("."+sj,n);this.updateOldText(n);var a=this.getEditEvent(n,null,null);this.trigger("nodeEditing",a,(function(a){a.cancel||(i.fields.dataSource instanceof TF&&!i.isOffline&&"BlazorAdaptor"!==i.fields.dataSource.adaptorName?i.crudOperation("update",null,e,t,null,null,!1):i.appendNewText(n,r,t,!1))}))}}}},{key:"uncheckAll",value:function(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)}}]),n}(kM),nj([QP(!1)],xV.prototype,"allowDragAndDrop",void 0),nj([QP(!1)],xV.prototype,"allowEditing",void 0),nj([QP(!1)],xV.prototype,"allowMultiSelection",void 0),nj([ZP({},kj)],xV.prototype,"animation",void 0),nj([QP()],xV.prototype,"checkedNodes",void 0),nj([QP("")],xV.prototype,"cssClass",void 0),nj([QP(!1)],xV.prototype,"disabled",void 0),nj([QP(null)],xV.prototype,"dragArea",void 0),nj([QP(!1)],xV.prototype,"enableHtmlSanitizer",void 0),nj([QP(!1)],xV.prototype,"enablePersistence",void 0),nj([QP()],xV.prototype,"expandedNodes",void 0),nj([QP("Auto")],xV.prototype,"expandOn",void 0),nj([ZP({},yj)],xV.prototype,"fields",void 0),nj([QP(!0)],xV.prototype,"fullRowSelect",void 0),nj([QP(!0)],xV.prototype,"loadOnDemand",void 0),nj([QP()],xV.prototype,"locale",void 0),nj([QP()],xV.prototype,"nodeTemplate",void 0),nj([QP()],xV.prototype,"selectedNodes",void 0),nj([QP("None")],xV.prototype,"sortOrder",void 0),nj([QP(!1)],xV.prototype,"showCheckBox",void 0),nj([QP(!0)],xV.prototype,"autoCheck",void 0),nj([QP(!1)],xV.prototype,"fullRowNavigable",void 0),nj([eM()],xV.prototype,"actionFailure",void 0),nj([eM()],xV.prototype,"created",void 0),nj([eM()],xV.prototype,"dataBound",void 0),nj([eM()],xV.prototype,"dataSourceChanged",void 0),nj([eM()],xV.prototype,"drawNode",void 0),nj([eM()],xV.prototype,"destroyed",void 0),nj([eM()],xV.prototype,"keyPress",void 0),nj([eM()],xV.prototype,"nodeChecked",void 0),nj([eM()],xV.prototype,"nodeChecking",void 0),nj([eM()],xV.prototype,"nodeClicked",void 0),nj([eM()],xV.prototype,"nodeCollapsed",void 0),nj([eM()],xV.prototype,"nodeCollapsing",void 0),nj([eM()],xV.prototype,"nodeDragging",void 0),nj([eM()],xV.prototype,"nodeDragStart",void 0),nj([eM()],xV.prototype,"nodeDragStop",void 0),nj([eM()],xV.prototype,"nodeDropped",void 0),nj([eM()],xV.prototype,"nodeEdited",void 0),nj([eM()],xV.prototype,"nodeEditing",void 0),nj([eM()],xV.prototype,"nodeExpanded",void 0),nj([eM()],xV.prototype,"nodeExpanding",void 0),nj([eM()],xV.prototype,"nodeSelected",void 0),nj([eM()],xV.prototype,"nodeSelecting",void 0),xV=OV=nj([tM],xV)),wj=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},_j="e-other-month",Sj="e-overlay",Ej="e-focused-date",Tj=(MV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).effect="",r.isPopupClicked=!1,r.isDateSelected=!0,r}return _createClass(i,[{key:"render",value:function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new hR(this.locale),(RD(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add("e-calendar"),this.enableRtl&&this.element.classList.add("e-rtl"),AR.isDevice&&this.element.classList.add("e-device"),DP(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add("e-calendar"),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),AR.isDevice&&this.calendarElement.classList.add("e-device"),DP(this.calendarElement,{role:"calendar"})),this.createHeader(),this.createContent(),this.wireEvents()}},{key:"rangeValidation",value:function(e,t){RD(e)&&this.setProperties({min:new Date(1900,0,1)},!0),RD(t)&&this.setProperties({max:new Date(2099,11,31)},!0)}},{key:"getDefaultKeyConfig",value:function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs}},{key:"validateDate",value:function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!RD(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))}},{key:"setOverlayIndex",value:function(e,t,i,n){if(n&&!RD(t)&&!RD(i)&&!RD(e)){var r=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(r-1).toString(),e.style.zIndex=r.toString()}}},{key:"minMaxUpdate",value:function(e){+this.min<=+this.max?_P([this.element],Sj):(this.setProperties({min:this.min},!0),wP([this.element],Sj)),this.min=RD(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=RD(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))}},{key:"createHeader",value:function(){this.headerElement=this.createElement("div",{className:"e-header"});var e=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),sM(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),DP(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),sM(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),DP(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),DP(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),e.appendChild(this.previousIcon),e.appendChild(this.nextIcon),this.headerElement.appendChild(e),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()}},{key:"createContent",value:function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":""}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()}},{key:"getCultureValues",value:function(){var e,t=[],i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();e="en"===this.locale||"en-US"===this.locale?TD(i,pR()):this.getCultureObjects(lR,""+this.locale);for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];t.push(TD(a,e))}return t}},{key:"toCapitalize",value:function(e){return!RD(e)&&e.length?e[0].toUpperCase()+e.slice(1):e}},{key:"createContentHeader",value:function(){"calendar"===this.getModuleName()?RD(this.element.querySelectorAll(".e-content .e-week-header")[0])||xP(this.element.querySelectorAll(".e-content .e-week-header")[0]):RD(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||xP(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(t+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?wP([this.element],"e-week-number"):wP([this.calendarElement],"e-week-number")),e=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek);for(var i=0;i<=6;i++)t+='<th  class="">'+this.toCapitalize(e[i])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)}},{key:"createContentBody",value:function(){switch("calendar"===this.getModuleName()?RD(this.element.querySelectorAll(".e-content tbody")[0])||xP(this.element.querySelectorAll(".e-content tbody")[0]):RD(this.calendarElement.querySelectorAll(".e-content tbody")[0])||xP(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}}},{key:"updateFooter",value:function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))}},{key:"createContentFooter",value:function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max);this.globalize=new hR(this.locale),this.l10=new PM(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),sM(this.todayElement),this.updateFooter(),wP([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0))&&!this.todayDisabled||wP([this.todayElement],"e-disabled"),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains("e-disabled")||OR.add(this.todayElement,"click",this.todayButtonClick,this)}}},{key:"wireEvents",value:function(e,t,i,n){OR.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=DD(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new RM(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new RM(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}},{key:"dateWireEvents",value:function(e,t,i,n){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=DD(this.defaultKeyConfigs,i),this.blazorRef=t,this.serverModuleName=n}},{key:"todayButtonClick",value:function(e){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(e))):this.navigateTo("Month",new Date(this.checkValue(e))))}},{key:"checkDeviceMode",value:function(e){}},{key:"keyActionHandle",value:function(e,t,i){var n,r=this.tableBodyElement.querySelector("tr td.e-focused-date");n=i?RD(r)||+t!==parseInt(r.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):r:this.tableBodyElement.querySelector("tr td.e-selected");var a=this.getViewNumber(this.currentView()),o=this.getViewNumber(this.depth),s=a===o&&this.getViewNumber(this.start)>=o;switch(this.effect="",e.action){case"moveLeft":this.KeyboardNavigate(-1,a,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.KeyboardNavigate(1,a,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.KeyboardNavigate(0===a?-7:-4,a,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.KeyboardNavigate(0===a?7:4,a,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(t);else{var l=RD(r)?n:r;if(!RD(l)&&!l.classList.contains("e-disabled"))if(s){var c=new Date(parseInt(""+l.id,0));this.selectDate(e,c,l)}else this.contentClick(null,--a,l,t)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":RD(r)&&(RD(n)||s)||this.contentClick(null,--a,r||n,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),xP(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),xP(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()}},{key:"KeyboardNavigate",value:function(e,t,i,n,r){var a=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(xP(this.tableBodyElement),this.renderDecades(i)):this.currentDate=a;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(xP(this.tableBodyElement),this.renderYears(i)):this.currentDate=a;break;case 0:this.addDay(this.currentDate,e,i,n,r),this.isMinMaxRange(this.currentDate)?(xP(this.tableBodyElement),this.renderMonths(i)):this.currentDate=a}}},{key:"preRender",value:function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(e){t.triggerNavigate(e)}}},{key:"minMaxDate",value:function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),n=new Date(new Date(+this.max).setHours(0,0,0,0));return+t!=+i&&+t!=+n||(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e}},{key:"renderMonths",value:function(e,t){var i,n=this.weekNumber?8:7;i="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,e,t):this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(i,n,"e-month",e,t):this.islamicModule.islamicRenderTemplate(i,n,"e-month",e,t)}},{key:"renderDays",value:function(e,t,i,n,r){var a,o=[],s=new Date(this.checkValue(e)),l=s.getMonth();this.titleUpdate(e,"days");var c=s;for(s=new Date(c.getFullYear(),c.getMonth(),0,c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());s.getDay()!==this.firstDayOfWeek;)this.setStartDate(s,-864e5);for(var u=0;u<42;++u){var h=this.createElement("td",{className:"e-cell"}),d=this.createElement("span");u%7==0&&this.weekNumber&&(d.textContent=""+this.getWeek(s),h.appendChild(d),wP([h],"e-week-number"),o.push(h)),a=new Date(+s),s=this.minMaxDate(s);var p={type:"dateTime",skeleton:"full"},f=this.globalize.parseDate(this.globalize.formatDate(s,p),p),v=this.dayCell(s),m=this.globalize.formatDate(s,{type:"date",skeleton:"full"}),g=this.createElement("span");g.textContent=this.globalize.formatDate(s,{format:"d",type:"date",skeleton:"yMd"});var y=this.min>s||this.max<s;y?(wP([v],"e-disabled"),wP([v],Sj)):g.setAttribute("title",""+m),l!==s.getMonth()&&wP([v],_j),0!==s.getDay()&&6!==s.getDay()||wP([v],"e-weekend"),v.appendChild(g),this.renderDayCellArgs={date:s,isDisabled:!1,element:v,isOutOfRange:y};var b=this.renderDayCellArgs;if(this.renderDayCellEvent(b),b.isDisabled){var k=new Date(this.checkValue(i)),C=new Date(this.checkValue(b.date));if(n){if(!RD(r)&&r.length>0)for(var w=0;w<r.length;w++)+new Date(this.globalize.formatDate(b.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(r[w],{type:"date",skeleton:"yMd"}))&&(r.splice(w,1),w=-1)}else k&&+k==+C&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!v.classList.contains("e-selected")&&(wP([v],"e-disabled"),wP([v],Sj),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var _=v.classList.contains(_j),S=v.classList.contains("e-disabled");if(S||OR.add(v,"click",this.clickHandler,this),!n||RD(r)||S)!S&&this.getDateVal(s,i)?wP([v],"e-selected"):this.updateFocus(_,S,s,v,e);else{for(var E=0;E<r.length;E++){var T="Gregorian"===this.calendarMode?"gregorian":"islamic",A={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:T};this.globalize.formatDate(s,A)===this.globalize.formatDate(r[E],A)&&this.getDateVal(s,r[E])||this.getDateVal(s,i)?wP([v],"e-selected"):this.updateFocus(_,S,s,v,e)}r.length<=0&&this.updateFocus(_,S,s,v,e)}f.getMonth()===(new Date).getMonth()&&f.getDate()===(new Date).getDate()&&f.getFullYear()===(new Date).getFullYear()&&wP([v],"e-today"),o.push(this.renderDayCellArgs.element),s=new Date(+a),this.addDay(s,1,null,this.max,this.min)}return o}},{key:"updateFocus",value:function(e,t,i,n,r){r.getDate()!==i.getDate()||e||t?(r>=this.max&&parseInt(n.id,0)===+this.max&&!e&&!t&&wP([n],Ej),r<=this.min&&parseInt(n.id,0)===+this.min&&!e&&!t&&wP([n],Ej)):wP([n],Ej)}},{key:"renderYears",value:function(e,t){this.removeTableHeadElement();var i=[],n=RD(t),r=new Date(this.checkValue(this.currentDate)),a=r.getMonth(),o=r.getFullYear(),s=r,l=s.getFullYear(),c=new Date(this.checkValue(this.min)).getFullYear(),u=new Date(this.checkValue(this.min)).getMonth(),h=new Date(this.checkValue(this.max)).getFullYear(),d=new Date(this.checkValue(this.max)).getMonth();s.setMonth(0),this.titleUpdate(this.currentDate,"months"),s.setDate(1);for(var p=0;p<12;++p){var f=this.dayCell(s),v=this.createElement("span"),m=t&&t.getMonth()===s.getMonth(),g=t&&t.getFullYear()===o&&m;v.textContent=this.toCapitalize(this.globalize.formatDate(s,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(l<c||p<u&&l===c)||this.max&&(l>h||p>d&&l>=h)?wP([f],"e-disabled"):!n&&g?wP([f],"e-selected"):s.getMonth()===a&&this.currentDate.getMonth()===a&&wP([f],Ej),s.setDate(1),s.setMonth(s.getMonth()+1),f.classList.contains("e-disabled")||OR.add(f,"click",this.clickHandler,this),f.appendChild(v),i.push(f)}this.renderTemplate(i,4,"e-year",e,t)}},{key:"renderDecades",value:function(e,t){this.removeTableHeadElement();var i=[],n=new Date(this.checkValue(this.currentDate));n.setMonth(0),n.setDate(1);var r=n.getFullYear(),a=new Date(n.setFullYear(r-r%10)),o=new Date(n.setFullYear(r-r%10+9)),s=a.getFullYear(),l=o.getFullYear(),c=this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"y"}),u=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=c+" - "+u;for(var h=new Date(r-r%10-1,0,1).getFullYear(),d=0;d<12;++d){var p=h+d;n.setFullYear(p);var f=this.dayCell(n);DP(f,{role:"gridcell"});var v=this.createElement("span");v.textContent=this.globalize.formatDate(n,{format:null,type:"dateTime",skeleton:"y"}),p<s||p>l?(wP([f],"e-other-year"),RD(t)||n.getFullYear()!==t.getFullYear()||wP([f],"e-selected"),(p<new Date(this.checkValue(this.min)).getFullYear()||p>new Date(this.checkValue(this.max)).getFullYear())&&wP([f],"e-disabled")):p<new Date(this.checkValue(this.min)).getFullYear()||p>new Date(this.checkValue(this.max)).getFullYear()?wP([f],"e-disabled"):RD(t)||n.getFullYear()!==t.getFullYear()?n.getFullYear()!==this.currentDate.getFullYear()||f.classList.contains("e-disabled")||wP([f],Ej):wP([f],"e-selected"),f.classList.contains("e-disabled")||OR.add(f,"click",this.clickHandler,this),f.appendChild(v),i.push(f)}this.renderTemplate(i,4,"e-decade",e,t)}},{key:"dayCell",value:function(e){var t={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},i={className:"e-cell",attrs:{id:""+MD(""+this.globalize.parseDate(this.globalize.formatDate(e,t),t).valueOf()),"aria-selected":"false",role:"gridcell"}};return this.createElement("td",i)}},{key:"firstDay",value:function(e){var t="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+_j):this.tableBodyElement.querySelectorAll("td:not(.e-other-year");if(t.length)for(var i=0;i<t.length;i++)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e}},{key:"lastDay",value:function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==t){var n=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return n&&i.setHours(this.firstDay(e).getHours()+n/60),this.findLastDay(i)}return this.findLastDay(this.firstDay(i))}},{key:"checkDateValue",value:function(e){return!RD(e)&&e instanceof Date&&!isNaN(+e)?e:null}},{key:"findLastDay",value:function(e){var t="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(.e-other-year"):this.tableBodyElement.querySelectorAll("td:not(."+_j);if(t.length)for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains("e-disabled")){e=new Date(parseInt(t[i].id,0));break}return e}},{key:"removeTableHeadElement",value:function(){"calendar"===this.getModuleName()?RD(this.element.querySelectorAll(".e-content table thead")[0])||xP(this.tableHeadElement):RD(this.calendarElement.querySelectorAll(".e-content table thead")[0])||xP(this.tableHeadElement)}},{key:"renderTemplate",value:function(e,t,i,n,r){var a,o=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),_P([this.contentElement,this.headerElement],["e-month","e-decade","e-year"]),wP([this.contentElement,this.headerElement],[i]);for(var s=t,l=0,c=0;c<e.length/t;++c){for(a=this.createElement("tr",{attrs:{role:"row"}}),l=0+l;l<s;l++)e[l].classList.contains("e-week-number")||RD(e[l].children[0])||(wP([e[l].children[0]],["e-day"]),sM(e[l].children[0],{duration:600,isCenterRipple:!0})),a.appendChild(e[l]),this.weekNumber&&7===l&&e[7].classList.contains(_j)&&wP([a],"e-month-hide"),!this.weekNumber&&6===l&&e[6].classList.contains(_j)&&wP([a],"e-month-hide"),this.weekNumber?41===l&&e[41].classList.contains(_j)&&wP([a],"e-month-hide"):35===l&&e[35].classList.contains(_j)&&wP([a],"e-month-hide");s+=t,l+=0,this.tableBodyElement.appendChild(a)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||0===o&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(n),this.setAriaActiveDescendant()}},{key:"clickHandler",value:function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,n=this.getViewNumber(this.currentView());i.classList.contains(_j)?this.contentClick(e,0,null,t):n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===n?this.contentClick(e,1,null,t):i.classList.contains(_j)||0!==n?this.contentClick(e,0,i,t):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()}},{key:"clickEventEmitter",value:function(e){e.preventDefault()}},{key:"contentClick",value:function(e,t,i,n){var r=this.getViewNumber(this.currentView()),a=this.getIdValue(e,i);switch(t){case 0:r===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(xP(this.tableBodyElement),this.currentDate=a,this.effect="e-zoomin",this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(a.getMonth()),a.getMonth()>0&&this.currentDate.getMonth()!==a.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(a.getFullYear())):this.currentDate=a,this.effect="e-zoomin",xP(this.tableBodyElement),this.renderMonths(e));break;case 1:if(r===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,a,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(a.getFullYear());else{var o=this.islamicModule.getIslamicDate(a);this.currentDate=this.islamicModule.toGregorian(o.year,o.month,1)}this.effect="e-zoomin",xP(this.tableBodyElement),this.renderYears(e)}}}},{key:"switchView",value:function(e,t,i){switch(e){case 0:xP(this.tableBodyElement),this.renderMonths(t),i&&!RD(this.tableBodyElement.querySelectorAll("."+Ej)[0])&&this.tableBodyElement.querySelectorAll("."+Ej)[0].classList.remove(Ej);break;case 1:xP(this.tableBodyElement),this.renderYears(t);break;case 2:xP(this.tableBodyElement),this.renderDecades(t)}}},{key:"getModuleName",value:function(){return"calendar"}},{key:"requiredModules",value:function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e}},{key:"getPersistData",value:function(){return this.addOnPersist(["value"])}},{key:"onPropertyChanged",value:function(e,t,i,n){this.effect="";for(var r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];switch(o){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===o?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),xP(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,n),this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(xP(this.todayElement),xP(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(_P([this.todayElement],"e-disabled"),xP(this.todayElement),xP(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":this.checkView(),this.createContentHeader(),this.createContentBody();break;case"locale":this.globalize=new hR(this.locale),this.createContentHeader(),this.createContentBody(),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():RD(this.todayElement)||RD(this.footer)||(xP(this.todayElement),xP(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}}},{key:"validateValues",value:function(e,t){if(e&&!RD(t)&&t.length>0){for(var i=this.copyValues(t),n=0;n<i.length;n++){var r,a="Gregorian"===this.calendarMode?"gregorian":"islamic";r=this.globalize.formatDate(i[n],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});var o=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:a}),s=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:a});(+new Date(r)<+new Date(o)||+new Date(r)>+new Date(s))&&(i.splice(n,1),n=-1)}this.setProperties({values:i},!0)}}},{key:"setValueUpdate",value:function(){RD(this.tableBodyElement)||(xP(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())}},{key:"copyValues",value:function(e){var t=[];if(!RD(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t}},{key:"titleUpdate",value:function(e,t){var i,n,r=new hR(this.locale),a="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(i=r.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:a}),n=r.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:a})):(i=r.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:a}),n=r.formatDate(e,{type:"dateTime",format:"y",calendar:a})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(i);break;case"months":this.headerTitleElement.textContent=n}}},{key:"setActiveDescendant",value:function(){var e,t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),r="Gregorian"===this.calendarMode?"gregorian":"islamic",a=this.currentView();return t=this.globalize.formatDate(this.currentDate,"Month"===a?{type:"date",skeleton:"full",calendar:r}:"Year"===a?"islamic"!==r?{type:"date",skeleton:"yMMMM",calendar:r}:{type:"date",skeleton:"GyMMM",calendar:r}:{format:null,type:"date",skeleton:"y",calendar:r}),(n||i)&&(RD(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",t),e=(i||n).getAttribute("id")),e}},{key:"iconHandler",value:function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}}},{key:"destroy",value:function(){("calendar"===this.getModuleName()||this.calendarElement)&&_P([this.element],["e-calendar"]),"calendar"===this.getModuleName()&&(OR.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&OR.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),RD(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element.innerHTML="",_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"title",value:function(e){var t=this.getViewNumber(this.currentView());this.effect="e-zoomin",this.switchView(++t,e)}},{key:"getViewNumber",value:function(e){return"Month"===e?0:"Year"===e?1:2}},{key:"navigateTitle",value:function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()}},{key:"previous",value:function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}}},{key:"navigatePrevious",value:function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}},{key:"next",value:function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}}},{key:"navigateNext",value:function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()}},{key:"navigateTo",value:function(e,t){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e))}},{key:"currentView",value:function(){return this.contentElement.classList.contains("e-year")?"Year":this.contentElement.classList.contains("e-decade")?"Decade":"Month"}},{key:"getDateVal",value:function(e,t){return!RD(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},{key:"getCultureObjects",value:function(e,t){var i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),n=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return TD("Gregorian"===this.calendarMode?"main."+this.locale+i:"main."+this.locale+n,e)}},{key:"getWeek",value:function(e){var t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil(((t-i)/864e5+new Date(i).getDay()+1)/7)}},{key:"setStartDate",value:function(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),r=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*r)}},{key:"addMonths",value:function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year,n.month+t,1)}}},{key:"addYears",value:function(e,t){if("Gregorian"===this.calendarMode){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var n=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(n.year+t,n.month,1)}}},{key:"getIdValue",value:function(e,t){var i;i=e?e.currentTarget:t;var n={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},r=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),n),a=this.globalize.parseDate(r,n),o=a.valueOf()-a.valueOf()%1e3;return new Date(o)}},{key:"adjustLongHeaderSize",value:function(){_P([this.element],"e-calendar-day-header-lg"),"Wide"===this.dayHeaderFormat&&wP(["calendar"===this.getModuleName()?this.element:this.calendarElement],"e-calendar-day-header-lg")}},{key:"selectDate",value:function(e,t,i,n,r){var a=i||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,t.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,t);else{if(n&&!this.checkPresentDate(t,r)){var o=this.copyValues(r);!RD(r)&&o.length>0?(o.push(new Date(this.checkValue(t))),this.setProperties({values:o},!0),this.setProperties({value:r[r.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var s=MP(a,".e-calendar");if(RD(s)&&(s=this.tableBodyElement),n||RD(s.querySelector(".e-selected"))||_P([s.querySelector(".e-selected")],"e-selected"),n||RD(s.querySelector("."+Ej))||_P([s.querySelector("."+Ej)],Ej),n){for(var l=this.copyValues(r),c=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),u=0;u<c.length;u++){var h=s.querySelectorAll("td."+Ej)[0],d=s.querySelectorAll("td.e-selected")[0];c[u]===h&&_P([c[u]],Ej),c[u]!==d||this.checkPresentDate(new Date(parseInt(d.getAttribute("id").split("_")[0],10)),r)||_P([c[u]],"e-selected")}if(a.classList.contains("e-selected")){_P([a],"e-selected");for(var p=0;p<l.length;p++){var f="Gregorian"===this.calendarMode?"gregorian":"islamic",v={format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:f};if(this.globalize.formatDate(t,v)===this.globalize.formatDate(l[p],v)){var m=l.indexOf(l[p]);l.splice(m,1),wP([a],Ej)}}this.setProperties({values:l},!0)}else wP([a],"e-selected")}else wP([a],"e-selected");this.isDateSelected=!0}},{key:"getFromatStringValue",value:function(){return null}},{key:"checkPresentDate",value:function(e,t){var i=!1;if(!RD(t))for(var n=0;n<t.length;n++){var r="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:r})===this.globalize.formatDate(t[n],{format:this.getFromatStringValue(),type:"date",skeleton:"short",calendar:r})&&(i=!0)}return i}},{key:"setAriaActiveDescendant",value:function(){DP(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})}},{key:"previousIconHandler",value:function(e){e?(OR.remove(this.previousIcon,"click",this.navigatePreviousHandler),wP([this.previousIcon],"e-disabled"),wP([this.previousIcon],""+Sj),this.previousIcon.setAttribute("aria-disabled","true")):(OR.add(this.previousIcon,"click",this.navigatePreviousHandler),_P([this.previousIcon],"e-disabled"),_P([this.previousIcon],""+Sj),this.previousIcon.setAttribute("aria-disabled","false"))}},{key:"renderDayCellEvent",value:function(e){DD(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)}},{key:"navigatedEvent",value:function(e){DD(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)}},{key:"triggerNavigate",value:function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)}},{key:"nextIconHandler",value:function(e){e?(OR.remove(this.nextIcon,"click",this.navigateNextHandler),wP([this.nextIcon],"e-disabled"),wP([this.nextIcon],Sj),this.nextIcon.setAttribute("aria-disabled","true")):(OR.add(this.nextIcon,"click",this.navigateNextHandler),_P([this.nextIcon],"e-disabled"),_P([this.nextIcon],Sj),this.nextIcon.setAttribute("aria-disabled","false"))}},{key:"compare",value:function(e,t,i){var n,r,a=t.getFullYear();return n=a,r=0,i&&(n=(a-=a%i)-a%i+i-1),e.getFullYear()>n?r=1:e.getFullYear()<a&&(r=-1),r}},{key:"isMinMaxRange",value:function(e){return+e>=+this.min&&+e<=+this.max}},{key:"isMonthYearRange",value:function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year}},{key:"compareYear",value:function(e,t){return this.compare(e,t,0)}},{key:"compareDecade",value:function(e,t){return this.compare(e,t,10)}},{key:"shiftArray",value:function(e,t){return e.slice(t).concat(e.slice(0,t))}},{key:"addDay",value:function(e,t,i,n,r){var a=t,o=new Date(+e);if(!RD(this.tableBodyElement)&&!RD(i)){for(;this.findNextTD(new Date(+e),a,n,r);)a+=t;var s=new Date(o.setDate(o.getDate()+a));a=+s>+n||+s<+r?a===t?t-t:t:a}e.setDate(e.getDate()+a)}},{key:"findNextTD",value:function(e,t,i,n){var r=new Date(e.setDate(e.getDate()+t)),a=[],o=!1;if(a=(!RD(r)&&r.getMonth())===(!RD(this.currentDate)&&this.currentDate.getMonth())?("Gregorian"===this.calendarMode?this.renderDays(r,null):this.islamicModule.islamicRenderDays(this.currentDate,r)).filter((function(e){return e.classList.contains("e-disabled")})):this.tableBodyElement.querySelectorAll("td.e-disabled"),+r<=+i&&+r>=+n&&a.length)for(var s=0;s<a.length&&!(o=+r==+new Date(parseInt(a[s].id,0)));s++);return o}},{key:"getMaxDays",value:function(e){var t,i,n=new Date(this.checkValue(e));for(t=28,i=n.getMonth();n.getMonth()===i;)++t,n.setDate(t);return t-1}},{key:"setDateDecade",value:function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)}},{key:"setDateYear",value:function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)}},{key:"compareMonth",value:function(e,t){return e.getFullYear()>t.getFullYear()?1:e.getFullYear()<t.getFullYear()?-1:e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1}},{key:"checkValue",value:function(e){return e instanceof Date?e.toUTCString():""+e}},{key:"checkView",value:function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)}}]),i}(kM),wj([QP(new Date(1900,0,1))],MV.prototype,"min",void 0),wj([QP(new Date(2099,11,31))],MV.prototype,"max",void 0),wj([QP(null)],MV.prototype,"firstDayOfWeek",void 0),wj([QP("Gregorian")],MV.prototype,"calendarMode",void 0),wj([QP("Month")],MV.prototype,"start",void 0),wj([QP("Month")],MV.prototype,"depth",void 0),wj([QP(!1)],MV.prototype,"weekNumber",void 0),wj([QP(!0)],MV.prototype,"showTodayButton",void 0),wj([QP("Short")],MV.prototype,"dayHeaderFormat",void 0),wj([QP(!1)],MV.prototype,"enablePersistence",void 0),wj([QP(null)],MV.prototype,"keyConfigs",void 0),wj([QP(null)],MV.prototype,"serverTimezoneOffset",void 0),wj([eM()],MV.prototype,"created",void 0),wj([eM()],MV.prototype,"destroyed",void 0),wj([eM()],MV.prototype,"navigated",void 0),wj([eM()],MV.prototype,"renderDayCell",void 0),MV=wj([tM],MV)),Aj=(PV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"render",value:function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&ND("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!RD(this.values)&&this.values.length>0){for(var e=[],t=[],n=0;n<this.values.length;n++)-1===e.indexOf(+this.values[n])&&(e.push(+this.values[n]),t.push(this.values[n]));this.setProperties({values:t},!0);for(var r=0;r<this.values.length;r++)if(!this.checkDateValue(this.values[r]))if("string"==typeof this.values[r]&&this.checkDateValue(new Date(this.checkValue(this.values[r])))){var a=new Date(this.checkValue(this.values[r]));this.values.splice(r,1),this.values.splice(r,0,a)}else this.values.splice(r,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),_get(_getPrototypeOf(i.prototype),"render",this).call(this),"calendar"===this.getModuleName()){var o=MP(this.element,"form");o&&OR.add(o,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()}},{key:"isDayLightSaving",value:function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)}},{key:"setTimeZone",value:function(e){if(!RD(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3)}}},{key:"formResetHandler",value:function(){this.setProperties({value:null},!0)}},{key:"validateDate",value:function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),_get(_getPrototypeOf(i.prototype),"validateDate",this).call(this,this.value),!RD(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)}},{key:"minMaxUpdate",value:function(){"calendar"===this.getModuleName()&&(!RD(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!RD(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||RD(this.value)?_get(_getPrototypeOf(i.prototype),"minMaxUpdate",this).call(this,this.value):!RD(this.value)&&this.value<this.min&&this.min<=this.max?_get(_getPrototypeOf(i.prototype),"minMaxUpdate",this).call(this,this.min):!RD(this.value)&&this.value>this.max&&this.min<=this.max&&_get(_getPrototypeOf(i.prototype),"minMaxUpdate",this).call(this,this.max)}},{key:"generateTodayVal",value:function(e){var t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t}},{key:"todayButtonClick",value:function(){if(this.showTodayButton){var e=this.generateTodayVal(this.value);if(this.setProperties({value:e},!0),this.isMultiSelection){var t=this.copyValues(this.values);_get(_getPrototypeOf(i.prototype),"checkPresentDate",this).call(this,e,this.values)||(t.push(e),this.setProperties({values:t}))}_get(_getPrototypeOf(i.prototype),"todayButtonClick",this).call(this,new Date(+this.value))}}},{key:"keyActionHandle",value:function(e){_get(_getPrototypeOf(i.prototype),"keyActionHandle",this).call(this,e,this.value,this.isMultiSelection)}},{key:"preRender",value:function(){var e=this;this.changeHandler=function(t){e.triggerChange(t)},this.checkView(),_get(_getPrototypeOf(i.prototype),"preRender",this).call(this,this.value)}},{key:"createContent",value:function(){this.previousDate=this.value,this.previousDateTime=this.value,_get(_getPrototypeOf(i.prototype),"createContent",this).call(this)}},{key:"minMaxDate",value:function(e){return _get(_getPrototypeOf(i.prototype),"minMaxDate",this).call(this,e)}},{key:"renderMonths",value:function(e){_get(_getPrototypeOf(i.prototype),"renderMonths",this).call(this,e,this.value)}},{key:"renderDays",value:function(e,t){var n=_get(_getPrototypeOf(i.prototype),"renderDays",this).call(this,e,t,this.value,this.isMultiSelection,this.values);return this.isMultiSelection&&_get(_getPrototypeOf(i.prototype),"validateValues",this).call(this,this.isMultiSelection,this.values),n}},{key:"renderYears",value:function(e){"Gregorian"===this.calendarMode?_get(_getPrototypeOf(i.prototype),"renderYears",this).call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)}},{key:"renderDecades",value:function(e){"Gregorian"===this.calendarMode?_get(_getPrototypeOf(i.prototype),"renderDecades",this).call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)}},{key:"renderTemplate",value:function(e,t,n,r){"Gregorian"===this.calendarMode?_get(_getPrototypeOf(i.prototype),"renderTemplate",this).call(this,e,t,n,r,this.value):this.islamicModule.islamicRenderTemplate(e,t,n,r,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},{key:"clickHandler",value:function(e){var t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(_j))if(this.isMultiSelection){var n=this.copyValues(this.values);n.push(this.getIdValue(e,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)}else this.setProperties({value:this.getIdValue(e,null)},!0);var r=this.currentView();_get(_getPrototypeOf(i.prototype),"clickHandler",this).call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!RD(this.tableBodyElement.querySelectorAll("."+Ej)[0])&&"Year"===r&&this.tableBodyElement.querySelectorAll("."+Ej)[0].classList.remove(Ej)}},{key:"switchView",value:function(e,t){_get(_getPrototypeOf(i.prototype),"switchView",this).call(this,e,t,this.isMultiSelection)}},{key:"getModuleName",value:function(){return _get(_getPrototypeOf(i.prototype),"getModuleName",this).call(this),"calendar"}},{key:"getPersistData",value:function(){return _get(_getPrototypeOf(i.prototype),"getPersistData",this).call(this),this.addOnPersist(["value","values"])}},{key:"onPropertyChanged",value:function(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{for(var a=this.copyValues(this.values),o=0;o<a.length;o++){var s=a[o];this.checkDateValue(s)&&!_get(_getPrototypeOf(i.prototype),"checkPresentDate",this).call(this,s,a)&&a.push(s)}this.setProperties({values:a},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;default:_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,e,t,this.isMultiSelection,this.values)}}},{key:"destroy",value:function(){if(_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),"calendar"===this.getModuleName()){var e=MP(this.element,"form");e&&OR.remove(e,"reset",this.formResetHandler.bind(this))}}},{key:"navigateTo",value:function(e,t){this.minMaxUpdate(),_get(_getPrototypeOf(i.prototype),"navigateTo",this).call(this,e,t)}},{key:"currentView",value:function(){return _get(_getPrototypeOf(i.prototype),"currentView",this).call(this)}},{key:"addDate",value:function(e){if("string"!=typeof e&&"number"!=typeof e){var t=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,r=0;r<n.length;r++)this.checkDateValue(n[r])&&!_get(_getPrototypeOf(i.prototype),"checkPresentDate",this).call(this,n[r],t)&&(!RD(t)&&t.length>0?t.push(n[r]):t=[new Date(+n[r])]);else this.checkDateValue(e)&&!_get(_getPrototypeOf(i.prototype),"checkPresentDate",this).call(this,e,t)&&(!RD(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}},{key:"removeDate",value:function(e){if("string"!=typeof e&&"number"!=typeof e&&!RD(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var i=e,n=0;n<i.length;n++)for(var r=0;r<t.length;r++)+t[r]==+i[n]&&t.splice(r,1);else for(var a=0;a<t.length;a++)+t[a]==+e&&t.splice(a,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}}},{key:"update",value:function(){this.validateDate(),this.minMaxUpdate(),_get(_getPrototypeOf(i.prototype),"setValueUpdate",this).call(this)}},{key:"selectDate",value:function(e,t,n){_get(_getPrototypeOf(i.prototype),"selectDate",this).call(this,e,t,n,this.isMultiSelection,this.values),this.isMultiSelection&&!RD(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)}},{key:"changeEvent",value:function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))}},{key:"triggerChange",value:function(e){this.changedArgs.event=e||null,this.changedArgs.isInteracted=!RD(e),RD(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||+this.value==+this.previousDate&&(null!=this.previousDate||isNaN(+this.value))?RD(this.values)||this.previousValues===this.values.length||(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)}}]),i}(Tj),wj([QP(null)],PV.prototype,"value",void 0),wj([QP(null)],PV.prototype,"values",void 0),wj([QP(!1)],PV.prototype,"isMultiSelection",void 0),wj([eM()],PV.prototype,"change",void 0),PV=wj([tM],PV)),Oj=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},xj=["title","class","style"],Ij=(LV=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).previousElementValue="",r.isDateIconClicked=!1,r.isAltKeyPressed=!1,r.isInteracted=!0,r.isBlazorServer=!1,r.invalidValueString=null,r.checkPreviousValue=null,r.datepickerOptions=e,r}return _createClass(i,[{key:"render",value:function(){this.initialize(),this.bindEvents(),this.renderComplete(),this.isBlazorServer||this.setTimeZone(this.serverTimezoneOffset)}},{key:"setTimeZone",value:function(e){if(!RD(this.serverTimezoneOffset)&&this.value){var t=e+(new Date).getTimezoneOffset()/60;t=this.isDayLightSaving()?t--:t,this.value=new Date(this.value.getTime()+60*t*60*1e3),this.updateInput()}}},{key:"isDayLightSaving",value:function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)}},{key:"setAllowEdit",value:function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):DP(this.inputElement,{readonly:""}),this.updateIconState()}},{key:"updateIconState",value:function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&_P([this.inputWrapper.container],["e-non-edit"]):""===this.inputElement.value?_P([this.inputWrapper.container],["e-non-edit"]):wP([this.inputWrapper.container],["e-non-edit"])}},{key:"initialize",value:function(){if(this.isBlazorServer){var e=this.element.parentElement;this.inputWrapper={container:e,clearButton:e.querySelector(".e-clear-icon"),buttons:[e.querySelector(".e-date-icon")]},cV.bindInitialEvent({element:this.inputElement,floatLabelType:this.floatLabelType}),this.showClearButton&&this.inputWrapper.clearButton&&cV.wireClearBtnEvents(this.inputElement,this.inputWrapper.clearButton,this.inputWrapper.container),this.setAllowEdit()}else this.checkInvalidValue(this.value),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput();this.previousElementValue=this.inputElement.value,this.previousDate=RD(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value}},{key:"createInput",value:function(){var e={"aria-live":"assertive","aria-atomic":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"};if("datepicker"===this.getModuleName()){var t={placeholder:this.placeholder};this.globalize=new hR(this.locale),this.l10n=new PM("datepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var i=this.cssClass;RD(this.cssClass)||""===this.cssClass||(i=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=cV.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:i,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),DP(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),cV.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),wP([this.inputWrapper.container],"e-date-wrapper")}},{key:"updateInput",value:function(){var e;if(this.value&&!this.isCalendar()&&(this.isBlazorServer||this.disabledDates()),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(_get(_getPrototypeOf(i.prototype),"validateDate",this).call(this),this.minMaxUpdates(),_get(_getPrototypeOf(i.prototype),"minMaxUpdate",this).call(this)),!RD(this.value)){var t,n=this.value,r=RD(this.formatString)?this.dateTimeFormat:this.formatString;if("datetimepicker"===this.getModuleName()?t=this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:r,type:"dateTime",skeleton:"yMd"}:{format:r,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(e="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.value,e)),+n<=+this.max&&+n>=+this.min)this.updateInputValue(t);else{var a=+n>=+this.max||!+this.value||!+this.value||+n<=+this.min;!this.strictMode&&a&&this.updateInputValue(t)}}RD(this.value)&&this.strictMode&&this.updateInputValue(""),!this.strictMode&&RD(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()}},{key:"minMaxUpdates",value:function(){!RD(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!RD(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})}},{key:"checkStringValue",value:function(e){var t=null,i=null,n=null;if("datetimepicker"===this.getModuleName()){var r=new hR(this.locale);"Gregorian"===this.calendarMode?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},n={format:r.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n={format:r.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else i="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return RD(t=this.checkDateValue(this.globalize.parseDate(e,i)))&&"datetimepicker"===this.getModuleName()&&(t=this.checkDateValue(this.globalize.parseDate(e,n))),t}},{key:"checkInvalidValue",value:function(e){if(!(e instanceof Date||RD(e))){var t=null,i=e;if("number"==typeof e&&(i=e.toString()),"datetimepicker"===this.getModuleName()){var n=new hR(this.locale);this.calendarMode,this.dateTimeFormat,n.getDatePattern({skeleton:"yMd"})}else this.calendarMode,this.formatString;var r=!1;if("string"!=typeof i)i=null,r=!0;else if("string"==typeof i&&(i=i.trim()),!(t=this.checkStringValue(i))){var a=null;a=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i)&&!a.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?r=!0:t=new Date(i)}r?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}}},{key:"bindInputEvent",value:function(){RD(this.formatString)||(-1===this.formatString.indexOf("y")?OR.add(this.inputElement,"input",this.inputHandler,this):OR.remove(this.inputElement,"input",this.inputHandler))}},{key:"bindEvents",value:function(){this.enabled?(OR.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler,this),OR.add(this.inputElement,"focus",this.inputFocusHandler,this),OR.add(this.inputElement,"blur",this.inputBlurHandler,this),this.bindInputEvent(),OR.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&OR.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&OR.add(this.formElement,"reset",this.resetFormHandler,this)):(OR.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.isBlazorServer?this.preventEventBubbling:this.dateIconHandler),OR.remove(this.inputElement,"focus",this.inputFocusHandler),OR.remove(this.inputElement,"blur",this.inputBlurHandler),OR.remove(this.inputElement,"change",this.inputChangeHandler),this.showClearButton&&(this.inputWrapper.clearButton||this.isBlazorServer)&&OR.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&OR.remove(this.formElement,"reset",this.resetFormHandler)),this.defaultKeyConfigs=DD(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new RM(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})}},{key:"resetFormHandler",value:function(){if(!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.isBlazorServer||(this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass()))}}},{key:"restoreValue",value:function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=RD(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})}},{key:"inputChangeHandler",value:function(e){e.stopPropagation()}},{key:"bindClearEvent",value:function(){this.showClearButton&&this.inputWrapper.clearButton&&OR.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)}},{key:"resetHandler",value:function(e){e.preventDefault(),this.clear(e)}},{key:"clear",value:function(e){this.isBlazorServer||this.setProperties({value:null},!0),this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.isBlazorServer||(this.updateInput(),this.popupUpdate(),this.changeEvent(e)),this.isBlazorServer&&this.interopAdaptor.invokeMethodAsync("OnValueCleared")}},{key:"preventEventBubbling",value:function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")}},{key:"updateInputValue",value:function(e){cV.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)}},{key:"dateIconHandler",value:function(e){AR.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),this.isBlazorServer||e.preventDefault(),this.readonly||(this.isCalendar()&&!this.isBlazorServer?this.hide(e):(!this.isBlazorServer||this.isBlazorServer&&this.inputWrapper.container.nextElementSibling)&&(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),wP([this.inputWrapper.container],["e-input-focus"]),wP(this.inputWrapper.buttons,"e-active")))}},{key:"updateHtmlAttributeToWrapper",value:function(){if(!RD(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!RD(this.htmlAttributes[i])&&xj.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&wP([this.inputWrapper.container],n.split(" "))}else if("style"===i){var r=this.inputWrapper.container.getAttribute(i);RD(r)?r=this.htmlAttributes[i]:";"===r.charAt(r.length-1)?r+=this.htmlAttributes[i]:r=r+";"+this.htmlAttributes[i],this.inputWrapper.container.setAttribute(i,r)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}}},{key:"updateHtmlAttributeToElement",value:function(){if(!RD(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];xj.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[i])}}},{key:"updateCssClass",value:function(e,t){RD(t)||(t=t.replace(/\s+/g," ").trim()),RD(e)||(e=e.replace(/\s+/g," ").trim()),cV.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&cV.setCssClass(e,[this.popupWrapper],t)}},{key:"CalendarKeyActionHandle",value:function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value==+this.currentDate||this.isCalendar()||this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}}},{key:"inputFocusHandler",value:function(){var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&this.show()}},{key:"inputHandler",value:function(e){this.isPopupClicked=!1}},{key:"inputBlurHandler",value:function(e){this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),""===this.inputElement.value&&RD(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=DD(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new RM(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.CalendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},{key:"documentHandler",value:function(e){!RD(this.popupObj)&&(this.inputWrapper.container.contains(e.target)||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();var t=e.target;MP(t,".e-datepicker.e-popup-wrapper")||MP(t,".e-input-group")===this.inputWrapper.container||t.classList.contains("e-day")?MP(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!RD(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&MP(t,".e-content")&&MP(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())||MP(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+_get(_getPrototypeOf(i.prototype),"generateTodayVal",this).call(this,this.value)&&!this.isBlazorServer)&&this.hide(e):(this.hide(e),this.focusOut())}},{key:"inputKeyActionHandle",value:function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e)),"datepicker"===this.getModuleName()&&(this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnPopupHide",!0):this.show(null,e));break;case"escape":this.hide(e);break;case"enter":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.isCalendar()||document.activeElement!==this.inputElement||this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":this.isBlazorServer?this.interopAdaptor.invokeMethodAsync("OnStrictModeUpdate",this.inputElement.value):(this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass()),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&t===this.depth&&this.hide(e)}}},{key:"defaultAction",value:function(e){this.previousDate=!RD(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(_get(_getPrototypeOf(i.prototype),"keyActionHandle",this).call(this,e),this.isBlazorServer||DP(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))}},{key:"popupUpdate",value:function(){if((RD(this.value)&&!RD(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll(".e-selected").length>0&&_P(this.popupObj.element.querySelectorAll(".e-selected"),["e-selected"]),!RD(this.value)&&!this.isBlazorServer&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));_get(_getPrototypeOf(i.prototype),"navigateTo",this).call(this,"Month",e)}}},{key:"strictModeUpdate",value:function(){var e,t,i,n;e="datetimepicker"===this.getModuleName()?RD(this.formatString)?this.dateTimeFormat:this.formatString:RD(this.formatString)?this.formatString:this.formatString.replace("dd","d"),RD(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),i="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:RD(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:RD(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:t="Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?this.checkDateValue(this.globalize.parseDate(this.inputElement.value,i))?n=this.globalize.parseDate(this.inputElement.value,i):(t="Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.parseDate(this.inputElement.value,t)):(n=this.globalize.parseDate(this.inputElement.value,i),!RD(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&n.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&n&&n.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&n?(this.updateInputValue(this.globalize.formatDate(n,i)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0),this.strictMode&&!n&&""===this.inputElement.value&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),RD(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))}},{key:"createCalendar",value:function(){var e=this;this.isBlazorServer?(this.popupWrapper=this.inputWrapper.container.nextElementSibling,this.calendarElement=this.popupWrapper.firstElementChild,this.tableBodyElement=RP("tbody",this.calendarElement),this.contentElement=RP(".e-content",this.calendarElement)):(this.popupWrapper=this.createElement("div",{className:"e-datepicker e-popup-wrapper"}),RD(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass)),AR.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className="e-datepicker e-date-modal",document.body.className+=" e-date-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new eN(this.popupWrapper,{content:this.isBlazorServer?null:this.calendarElement,relateTo:AR.isDevice?document.body:this.inputWrapper.container,position:AR.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:AR.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=DD(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new RM(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.CalendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new RM(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.CalendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&!e.isBlazorServer&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),xP(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.setAriaAttributes()},targetExitViewport:function(){AR.isDevice||e.hide()}}),this.isBlazorServer||(this.popupObj.element.className+=" "+this.cssClass),this.setAriaAttributes()}},{key:"setAriaDisabled",value:function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)}},{key:"modelHeader",value:function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),n=this.createElement("div"),r=this.createElement("span",{className:"e-model-day"}),a=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},r.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,e),t.appendChild(i),n.appendChild(r),n.appendChild(a),t.appendChild(n),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)}},{key:"changeTrigger",value:function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!RD(e),this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)}},{key:"navigatedEvent",value:function(){this.trigger("navigated",this.navigatedArgs)}},{key:"changeEvent",value:function(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())}},{key:"requiredModules",value:function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e}},{key:"selectCalendar",value:function(e){var t,i,n;i="datetimepicker"===this.getModuleName()&&RD(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&("datetimepicker"===this.getModuleName()?(n="Gregorian"===this.calendarMode?{format:i,type:"dateTime",skeleton:"yMd"}:{format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n)):(n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,n))),RD(t)||this.updateInputValue(t)}},{key:"isCalendar",value:function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-popup-wrapper"))}},{key:"setWidth",value:function(e){this.inputWrapper.container.style.width="number"==typeof e?FD(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:FD(this.width):"100%"}},{key:"show",value:function(e,t){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var r,a=!0;RD(this.value)||+this.value>=+this.min&&+this.value<=+this.max?r=this.value||null:(r=new Date(this.checkValue(this.value)),this.isBlazorServer||this.setProperties({value:null},!0)),this.isCalendar()||(this.isBlazorServer||(_get(_getPrototypeOf(i.prototype),"render",this).call(this),this.setProperties({value:r||null},!0)),this.previousDate=r,this.createCalendar()),AR.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){a=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:AR.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,(function(e){n.preventArgs=e,a&&!n.preventArgs.cancel?(n.isBlazorServer&&(n.popupWrapper.style.visibility="",n.popupWrapper.style.width="auto",n.popupWrapper.style.height="auto"),wP(n.inputWrapper.buttons,"e-active"),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement),n.popupObj.show(new oM({name:"FadeIn",duration:AR.isDevice?0:300}),1e3===n.zIndex?n.element:null),n.isBlazorServer||_get(_getPrototypeOf(i.prototype),"setOverlayIndex",n).call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,AR.isDevice),n.setAriaAttributes()):(n.popupObj.destroy(),n.isBlazorServer&&n.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),n.popupWrapper=n.popupObj=null),RD(n.inputElement)||""!==n.inputElement.value||!RD(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(wP([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),_P(n.tableBodyElement.querySelectorAll("td.e-selected"),"e-selected")),OR.add(document,"mousedown touchstart",n.documentHandler,n)}))}}},{key:"hide",value:function(e){var t=this;if(RD(this.popupWrapper))AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:this.popupObj,event:e||null,cancel:!1},_P(this.inputWrapper.buttons,"e-active"),_P([document.body],"e-date-overflow");var n=this.preventArgs;this.isCalendar()?this.trigger("close",n,(function(e){t.closeEventCallback(i,e)})):this.closeEventCallback(i,n)}}},{key:"closeEventCallback",value:function(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.isBlazorServer?(this.interopAdaptor.invokeMethodAsync("OnPopupHide",!1),this.isAltKeyPressed=!1,this.popupWrapper=this.popupObj=null):(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy()),_P(this.inputWrapper.buttons,"e-active")),this.setAriaAttributes(),AR.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),AR.isDevice&&(RD(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),OR.remove(document,"mousedown touchstart",this.documentHandler),AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}},{key:"focusIn",value:function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),wP([this.inputWrapper.container],["e-input-focus"]))}},{key:"focusOut",value:function(){document.activeElement===this.inputElement&&(_P([this.inputWrapper.container],["e-input-focus"]),this.inputElement.blur())}},{key:"currentView",value:function(){var e;return this.calendarElement&&(e=_get(_getPrototypeOf(i.prototype),"currentView",this).call(this)),e}},{key:"navigateTo",value:function(e,t){this.calendarElement&&_get(_getPrototypeOf(i.prototype),"navigateTo",this).call(this,e,t)}},{key:"destroy",value:function(){this.isBlazorServer||(_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)),this.inputElement&&(cV.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-disabled":"true","aria-haspopup":"true","aria-activedescendant":"null","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),RD(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),OR.remove(this.inputElement,"blur",this.inputBlurHandler),OR.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&xP(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.isBlazorServer||this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),_P([this.inputElement],["e-input"])),_P([this.element],["e-datepicker"]),xP(this.inputWrapper.container)),this.formElement&&OR.remove(this.formElement,"reset",this.resetFormHandler)}},{key:"ensureInputAttribute",value:function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(var i=0;i<e.length;i++)RD(this.inputElementCopy.getAttribute(e[i]))?("value"===e[i].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[i])):("value"===e[i].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[i])),this.inputElement.setAttribute(e[i],this.inputElementCopy.getAttribute(e[i])))}},{key:"preRender",value:function(){this.inputElementCopy=this.element.cloneNode(!0),_P([this.inputElementCopy],["e-datepicker","e-control","e-lib"]),this.inputElement=this.element,this.formElement=MP(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.isBlazorServer=!1,this.isBlazorServer||(this.ngTag=null,"EJS-DATEPICKER"!==this.element.tagName&&"EJS-DATETIMEPICKER"!==this.element.tagName||(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=MD("ej2-datetimepicker"),null!==this.ngTag&&DP(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=MD("ej2-datepicker"),null!==this.ngTag&&DP(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement()),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.isBlazorServer||(this.element.removeAttribute("tabindex"),_get(_getPrototypeOf(i.prototype),"preRender",this).call(this))}},{key:"getDefaultKeyConfig",value:function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs}},{key:"validationAttribute",value:function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],r=0;r<n.length;r++)if(!RD(e.getAttribute(n[r]))){var a=e.getAttribute(n[r]);t.setAttribute(n[r],a),e.removeAttribute(n[r])}}},{key:"checkFormat",value:function(){var e=new hR(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||RD(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{var t=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:t,type:"dateTime"}):e.getDatePattern({skeleton:t,type:"date"})}else this.formatString=null}},{key:"checkHtmlAttributes",value:function(e){this.globalize=new hR(this.locale),this.checkFormat(),this.checkView();var t,i=e?RD(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];t="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:RD(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:RD(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};var n,r=_createForOfIteratorHelper(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!RD(this.inputElement.getAttribute(a)))switch(a){case"disabled":if((RD(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e)&&!this.isBlazorServer){var o="disabled"!==this.inputElement.getAttribute(a)&&""!==this.inputElement.getAttribute(a)&&"true"!==this.inputElement.getAttribute(a);this.setProperties({enabled:o},!e)}break;case"readonly":if((RD(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e)&&!this.isBlazorServer){var s="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:s},!e)}break;case"placeholder":!RD(this.datepickerOptions)&&void 0!==this.datepickerOptions.placeholder&&!e||this.isBlazorServer||(this.inputElement.getAttribute(a),this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e));break;case"style":this.isBlazorServer||this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"name":this.isBlazorServer||this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"value":if((RD(this.datepickerOptions)||void 0===this.datepickerOptions.value||e)&&!this.isBlazorServer){var l=this.inputElement.getAttribute(a);this.setProperties(AD(a,this.globalize.parseDate(l,t),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var c=this.inputElement.getAttribute(a);this.setProperties(AD(a,this.globalize.parseDate(c),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var u=this.inputElement.getAttribute(a);this.setProperties(AD(a,this.globalize.parseDate(u),{}),!e)}break;case"type":"text"===this.inputElement.getAttribute(a)||this.isBlazorServer||this.inputElement.setAttribute("type","text")}}}catch(h){r.e(h)}finally{r.f()}}},{key:"getModuleName",value:function(){return"datepicker"}},{key:"disabledDates",value:function(){var e,t;e=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value));var n=this.previousDate;this.minMaxUpdates(),this.isBlazorServer||_get(_getPrototypeOf(i.prototype),"render",this).call(this),this.previousDate=n;var r,a='*[id^="/id"]'.replace("/id",""+(e&&+e));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+e)&&this.setProperties({value:e},!0),RD(this.calendarElement.querySelectorAll(a)[0])||this.calendarElement.querySelectorAll(a)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),"datetimepicker"===this.getModuleName()?r=this.globalize.formatDate(e,"Gregorian"===this.calendarMode?{format:RD(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:RD(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(t="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r=this.globalize.formatDate(e,t)),this.popupObj||this.updateInputValue(r)}},{key:"setAriaAttributes",value:function(){if(this.isBlazorServer)if(this.isCalendar()){var e=this.tableBodyElement.querySelector("tr td.e-focused-date"),t=this.tableBodyElement.querySelector("tr td.e-selected"),i=e||t?(e||t).getAttribute("id"):"null";DP(this.inputElement,{"aria-activedescendant":""+i})}else DP(this.inputElement,{"aria-activedescendant":"null"});else this.isCalendar()?(cV.addAttributes({"aria-expanded":"true"},this.inputElement),DP(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(cV.addAttributes({"aria-expanded":"false"},this.inputElement),DP(this.inputElement,{"aria-activedescendant":"null"}))}},{key:"errorClass",value:function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!RD(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&RD(this.value)||t?(wP([this.inputWrapper.container],"e-error"),DP(this.inputElement,{"aria-invalid":"true"})):(_P([this.inputWrapper.container],"e-error"),DP(this.inputElement,{"aria-invalid":"false"}))}},{key:"onPropertyChanged",value:function(e,t){this.calendarMode,this.formatString;for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"value":this.isInteracted=!1,this.invalidValueString=null,this.isBlazorServer||this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,this.isBlazorServer||(RD(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(),+this.previousDate!=+this.value&&this.changeTrigger(null)),this.isInteracted=!0;break;case"format":this.checkFormat(),this.bindInputEvent(),this.isBlazorServer||this.updateInput();break;case"allowEdit":this.setAllowEdit();break;case"placeholder":cV.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":cV.setReadonly(this.readonly,this.inputElement);break;case"enabled":cV.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled(),this.bindEvents();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new hR(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),cV.setPlaceholder(this.placeholder,this.inputElement),this.isBlazorServer||this.updateInput();break;case"enableRtl":cV.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&!this.isBlazorServer&&_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":cV.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.isBlazorServer||this.updateInput();break;case"width":this.setWidth(e.width);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,cV.removeFloating(this.inputWrapper),cV.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;default:this.calendarElement&&!this.isBlazorServer&&_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,e,t)}this.hide(null)}}}]),i}(Aj),Oj([QP(null)],LV.prototype,"width",void 0),Oj([QP(null)],LV.prototype,"value",void 0),Oj([QP(null)],LV.prototype,"cssClass",void 0),Oj([QP(!1)],LV.prototype,"strictMode",void 0),Oj([QP(null)],LV.prototype,"format",void 0),Oj([QP(!0)],LV.prototype,"enabled",void 0),Oj([QP({})],LV.prototype,"htmlAttributes",void 0),Oj([QP(null)],LV.prototype,"values",void 0),Oj([QP(!1)],LV.prototype,"isMultiSelection",void 0),Oj([QP(!0)],LV.prototype,"showClearButton",void 0),Oj([QP(!0)],LV.prototype,"allowEdit",void 0),Oj([QP(null)],LV.prototype,"keyConfigs",void 0),Oj([QP(!1)],LV.prototype,"enablePersistence",void 0),Oj([QP(1e3)],LV.prototype,"zIndex",void 0),Oj([QP(!1)],LV.prototype,"readonly",void 0),Oj([QP(null)],LV.prototype,"placeholder",void 0),Oj([QP("Never")],LV.prototype,"floatLabelType",void 0),Oj([QP(null)],LV.prototype,"serverTimezoneOffset",void 0),Oj([QP(!1)],LV.prototype,"openOnFocus",void 0),Oj([eM()],LV.prototype,"open",void 0),Oj([eM()],LV.prototype,"cleared",void 0),Oj([eM()],LV.prototype,"close",void 0),Oj([eM()],LV.prototype,"blur",void 0),Oj([eM()],LV.prototype,"focus",void 0),Oj([eM()],LV.prototype,"created",void 0),Oj([eM()],LV.prototype,"destroyed",void 0),LV=Oj([tM],LV));(NV||(NV={})).createListItems=function(e,t,i,n,r,a){var o,s,l=6e4*a,c=[],u=[];for(o=+t.setMilliseconds(0),s=+i.setMilliseconds(0);s>=o;)u.push(o),c.push(n.formatDate(new Date(o),{format:r,type:"time"})),o+=l;return{collection:u,list:mF.createList(e,c,null,!0)}};var Dj,Rj=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Pj=(new Date).getDate(),Mj=(new Date).getMonth(),Lj=(new Date).getFullYear(),Nj=(new Date).getHours(),Fj=(new Date).getMinutes(),Bj=(new Date).getSeconds(),Vj=(new Date).getMilliseconds(),jj="e-datetimepicker",Hj=(Dj=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).valueWithMinutes=null,r.dateTimeOptions=e,r}return _createClass(i,[{key:"focusHandler",value:function(){wP([this.inputWrapper.container],"e-input-focus")}},{key:"focusIn",value:function(){_get(_getPrototypeOf(i.prototype),"focusIn",this).call(this)}},{key:"focusOut",value:function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),_P([this.inputWrapper.container],["e-input-focus"]))}},{key:"blurHandler",value:function(e){if(this.isTimePopupOpen()&&this.isPreventBlur)this.inputElement.focus();else{_P([this.inputWrapper.container],"e-input-focus");var t={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",t)}}},{key:"destroy",value:function(){this.popupObject&&this.popupObject.element.classList.contains("e-popup")&&(this.popupObject.destroy(),xP(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],RD(this.rippleFn)||this.rippleFn()),this.inputElement&&(cV.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false","aria-haspopup":"true","aria-activedescendant":"null",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-owns":this.element.id+"_options","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.inputElement.removeAttribute("aria-placeholder")),this.isCalendar()&&(this.popupWrapper&&xP(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}},{key:"render",value:function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,_get(_getPrototypeOf(i.prototype),"updateHtmlAttributeToElement",this).call(this),this.checkAttributes(!1),this.l10n=new PM("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),_get(_getPrototypeOf(i.prototype),"render",this).call(this),this.createInputElement(),_get(_getPrototypeOf(i.prototype),"updateHtmlAttributeToWrapper",this).call(this),this.bindInputEvents(),this.setValue(),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.renderComplete()}},{key:"setValue",value:function(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var e=this.validateMinMaxRange(this.initValue);cV.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else RD(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,_get(_getPrototypeOf(i.prototype),"updateInput",this).call(this)}},{key:"validateMinMaxRange",value:function(e){var t=e;return this.isDateObject(e)?t=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(t),t}},{key:"checkValidState",value:function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()}},{key:"checkErrorState",value:function(){this.isValidState?_P([this.inputWrapper.container],"e-error"):wP([this.inputWrapper.container],"e-error"),DP(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})}},{key:"validateValue",value:function(e){var t=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),t=this.max):+e<+this.min?t=this.min:+e>+this.max&&(t=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),t=e),t}},{key:"disablePopupButton",value:function(e){e?(wP([this.inputWrapper.buttons[0],this.timeIcon],"e-disabled"),this.hide()):_P([this.inputWrapper.buttons[0],this.timeIcon],"e-disabled")}},{key:"getFormattedValue",value:function(e){var t;return RD(e)?null:(t="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,t))}},{key:"isDateObject",value:function(e){return!RD(e)&&!isNaN(+e)}},{key:"createInputElement",value:function(){_P([this.inputElement],"e-datepicker"),_P([this.inputWrapper.container],"e-date-wrapper"),wP([this.inputWrapper.container],"e-datetime-wrapper"),wP([this.inputElement],jj),this.renderTimeIcon()}},{key:"renderTimeIcon",value:function(){this.timeIcon=cV.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)}},{key:"bindInputEvents",value:function(){OR.add(this.timeIcon,"mousedown",this.timeHandler,this),OR.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),OR.add(this.inputElement,"blur",this.blurHandler,this),OR.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=DD(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new RM(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})}},{key:"unBindInputEvents",value:function(){OR.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),OR.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(OR.remove(this.inputElement,"blur",this.blurHandler),OR.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()}},{key:"cldrTimeFormat",value:function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?TD("timeFormats.short",pR()):this.getCultureTimeObject(lR,""+this.locale):this.timeFormat}},{key:"cldrDateTimeFormat",value:function(){var e=new hR(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?e+" "+this.getCldrFormat("time"):this.formatString}},{key:"getCldrFormat",value:function(e){return"en"===this.locale||"en-US"===this.locale?TD("timeFormats.short",pR()):this.getCultureTimeObject(lR,""+this.locale)}},{key:"isNullOrEmpty",value:function(e){return!!(RD(e)||"string"==typeof e&&""===e.trim())}},{key:"getCultureTimeObject",value:function(e,t){return TD("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)}},{key:"timeHandler",value:function(e){AR.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&_get(_getPrototypeOf(i.prototype),"hide",this).call(this,e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),wP([this.inputWrapper.container],["e-input-focus"])))}},{key:"dateHandler",value:function(e){e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),RD(this.popupWrapper)||this.popupCreation("date",e))}},{key:"show",value:function(e,t){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(t),_get(_getPrototypeOf(i.prototype),"show",this).call(this),this.popupCreation("date",t)):(this.isDatePopupOpen()&&this.hide(t),this.popupCreation("time",t)))}},{key:"toggle",value:function(e){this.isDatePopupOpen()?(_get(_getPrototypeOf(i.prototype),"hide",this).call(this,e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),_get(_getPrototypeOf(i.prototype),"show",this).call(this,null,e),this.popupCreation("date",null)):this.show(null,e)}},{key:"listCreation",value:function(){var e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var t=RD(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=t,this.listWrapper=CP("div",{className:"e-content",attrs:{tabindex:"0"}});var i=this.startTime(t),n=this.endTime(t),r=NV.createListItems(this.createElement,i,n,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=r.collection,this.listTag=r.list,DP(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),AP([r.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=sM(this.listWrapper,{duration:300,selector:".e-list-item"}),this.liCollections=this.listWrapper.querySelectorAll(".e-list-item")}},{key:"popupCreation",value:function(e,t){AR.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(wP([this.popupWrapper],"e-datetimepopup-wrapper"),DP(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=CP("div",{className:jj+" e-popup",attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),RD(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!RD(this.step)&&this.step>0&&(this.listCreation(),AP([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(t),this.popupObject.refreshPosition(this.inputElement))}},{key:"openPopup",value:function(e){var t=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,(function(e){t.preventArgs=e,t.preventArgs.cancel||t.readonly||(t.popupObject.show(new oM({name:"FadeIn",duration:100}),1e3===t.zIndex?t.element:null),wP([t.inputWrapper.container],["e-icon-anim"]),DP(t.inputElement,{"aria-expanded":"true"}),OR.add(document,"mousedown touchstart",t.documentClickHandler,t))}))}},{key:"documentClickHandler",value:function(e){var t=e.target;!RD(this.popupObject)&&(this.inputWrapper.container.contains(t)||this.popupObject.element&&this.popupObject.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault(),MP(t,"#"+(this.popupObject&&this.popupObject.element.id))||t===this.inputElement||t===this.timeIcon||t===this.inputWrapper.container?t!==this.inputElement&&(AR.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(AR.isIE||"edge"===AR.info.name)&&t===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut()),this.openOnFocus&&this.show()}},{key:"isTimePopupOpen",value:function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+jj))}},{key:"isDatePopupOpen",value:function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains("e-datetimepopup-wrapper"))}},{key:"renderPopup",value:function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),AR.isDevice&&(this.timeModal=CP("div"),this.timeModal.className=jj+" e-time-modal",document.body.className+=" e-time-overflow",this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new eN(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:AR.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:AR.isDevice?document.body:this.inputWrapper.container,position:AR.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",wP([e.timeIcon],"e-active"),AR.isDevice||(e.timekeyConfigure=DD(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new RM(e.inputWrapper.container,{keyAction:e.TimeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){_P([e.timeIcon],"e-active"),e.unWireTimeListEvents(),e.inputElement.setAttribute("aria-activedescendant","null"),IP(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){AR.isDevice||e.hide()}}),this.popupObject.element.style.maxHeight="250px"}},{key:"setDimension",value:function(e){return"number"==typeof e?FD(e):"string"==typeof e?e:"100%"}},{key:"setPopupWidth",value:function(){var e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e}},{key:"wireTimeListEvents",value:function(){OR.add(this.listWrapper,"click",this.onMouseClick,this),AR.isDevice||(OR.add(this.listWrapper,"mouseover",this.onMouseOver,this),OR.add(this.listWrapper,"mouseout",this.onMouseLeave,this))}},{key:"unWireTimeListEvents",value:function(){this.listWrapper&&(OR.remove(this.listWrapper,"click",this.onMouseClick),OR.remove(document,"mousedown touchstart",this.documentClickHandler),AR.isDevice||(OR.add(this.listWrapper,"mouseover",this.onMouseOver,this),OR.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))}},{key:"onMouseOver",value:function(e){var t=MP(e.target,".e-list-item");this.setTimeHover(t,"e-hover")}},{key:"onMouseLeave",value:function(){this.removeTimeHover("e-hover")}},{key:"setTimeHover",value:function(e,t){this.enabled&&this.isValidLI(e)&&!e.classList.contains(t)&&(this.removeTimeHover(t),wP([e],t))}},{key:"getPopupHeight",value:function(){var e=parseInt("250px",10),t=this.dateTimeWrapper.getBoundingClientRect().height;return t>e?e:t}},{key:"changeEvent",value:function(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(_get(_getPrototypeOf(i.prototype),"changeEvent",this).call(this,e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))}},{key:"updateValue",value:function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!RD(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.value)}},{key:"setTimeScrollPosition",value:function(){var e;RD(e=this.selectedElement)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)}},{key:"findScrollTop",value:function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,r=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=n+e.offsetTop>t?i?n-(t/2+r/2):n:0}},{key:"setScrollTo",value:function(){var e,t=this.dateTimeWrapper.querySelectorAll(".e-list-item");if(t.length>=0){var i=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;RD(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)}},{key:"setInputValue",value:function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var t=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));cV.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0)}this.updateIconState()}},{key:"getFullDateTime",value:function(){var e;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)}},{key:"combineDateTime",value:function(e){if(this.isDateObject(e)){var t=this.previousDate.getDate(),i=this.previousDate.getMonth(),n=this.previousDate.getFullYear(),r=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return new Date(n,i,t,r,a,o)}return this.previousDate}},{key:"onMouseClick",value:function(e){var t=this.selectedElement=MP(e.target,".e-list-item");t&&t.classList.contains("e-list-item")&&(this.timeValue=t.getAttribute("data-value"),this.hide(e)),this.setSelection(t,e)}},{key:"setSelection",value:function(e,t){if(this.isValidLI(e)&&!e.classList.contains("e-active")){e.getAttribute("data-value"),this.selectedElement=e;var i=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=i,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),wP([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(t)}}},{key:"setTimeActiveClass",value:function(){var e=RD(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!RD(e)){var t=e.querySelectorAll(".e-list-item");if(t.length)for(var i=0;i<t.length;i++)if(this.timeCollections[i]===+this.valueWithMinutes){t[i].setAttribute("aria-selected","true"),this.selectedElement=t[i],this.activeIndex=i,this.setTimeActiveDescendant();break}}}},{key:"setTimeActiveDescendant",value:function(){RD(this.selectedElement)?DP(this.inputElement,{"aria-activedescendant":"null"}):DP(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")})}},{key:"addTimeSelection",value:function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),RD(this.selectedElement)||(wP([this.selectedElement],"e-active"),this.selectedElement.setAttribute("aria-selected","true"))}},{key:"removeTimeSelection",value:function(){if(this.removeTimeHover("e-hover"),!RD(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll(".e-active");e.length&&(_P(e,"e-active"),e[0].removeAttribute("aria-selected"))}}},{key:"removeTimeHover",value:function(e){var t=this.getTimeHoverItem(e);t&&t.length&&_P(t,e)}},{key:"getTimeHoverItem",value:function(e){var t,i=RD(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return RD(i)||(t=i.querySelectorAll("."+e)),t}},{key:"isValidLI",value:function(e){return e&&e.classList.contains("e-list-item")&&!e.classList.contains("e-disabled")}},{key:"calculateStartEnd",value:function(e,t,i){var n=e.getDate(),r=e.getMonth(),a=e.getFullYear(),o=e.getHours(),s=e.getMinutes(),l=e.getSeconds(),c=e.getMilliseconds();return t?"starttime"===i?new Date(a,r,n,0,0,0):new Date(a,r,n,23,59,59):new Date(a,r,n,o,s,l,c)}},{key:"startTime",value:function(e){var t,i,n,r=this.min;return+(n=null===e?new Date:e).getDate()==+r.getDate()&&+n.getMonth()==+r.getMonth()&&+n.getFullYear()==+r.getFullYear()||+new Date(n.getFullYear(),n.getMonth(),n.getDate())<=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(i=!1,t=this.min):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n>=+this.max&&(i=!0,t=this.max),this.calculateStartEnd(t,i,"starttime")}},{key:"endTime",value:function(e){var t,i,n,r=this.max;return+(n=null===e?new Date:e).getDate()==+r.getDate()&&+n.getMonth()==+r.getMonth()&&+n.getFullYear()==+r.getFullYear()||+new Date(n.getUTCFullYear(),n.getMonth(),n.getDate())>=+new Date(r.getFullYear(),r.getMonth(),r.getDate())?(i=!1,t=this.max):+n<+this.max&&+n>+this.min?(i=!0,t=n):+n<=+this.min&&(i=!0,t=this.min),this.calculateStartEnd(t,i,"endtime")}},{key:"hide",value:function(e){var t=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var i=this.preventArgs;RD(this.popupObj)?this.trigger("close",i,(function(i){t.dateTimeCloseEventCallback(e,i)})):this.dateTimeCloseEventCallback(e,i)}else AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}},{key:"dateTimeCloseEventCallback",value:function(e,t){this.preventArgs=t,this.preventArgs.cancel||(this.isDatePopupOpen()?_get(_getPrototypeOf(i.prototype),"hide",this).call(this,e):this.isTimePopupOpen()&&(this.closePopup(e),_P([document.body],"e-time-overflow"),AR.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),AR.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()}},{key:"closePopup",value:function(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new oM({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove("e-icon-anim"),DP(this.inputElement,{"aria-expanded":"false"}),OR.remove(document,"mousedown touchstart",this.documentClickHandler))}},{key:"preRender",value:function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),_get(_getPrototypeOf(i.prototype),"preRender",this).call(this),_P([this.inputElementCopy],[jj])}},{key:"getProperty",value:function(e,t){this.setProperties("min"===t?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)}},{key:"checkAttributes",value:function(e){var t,i,n=_createForOfIteratorHelper(e?RD(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"]);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(!RD(this.inputElement.getAttribute(r)))switch(r){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(r));break;case"step":this.step=parseInt(this.inputElement.getAttribute(r),10);break;case"readonly":if(RD(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var a="disabled"===this.inputElement.getAttribute(r)||""===this.inputElement.getAttribute(r)||"true"===this.inputElement.getAttribute(r);this.setProperties({readonly:a},!e)}break;case"placeholder":(RD(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(r)},!e);break;case"min":(RD(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(t=new Date(this.inputElement.getAttribute(r)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({min:t},!e));break;case"disabled":if(RD(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var o="disabled"!==this.inputElement.getAttribute(r)&&"true"!==this.inputElement.getAttribute(r)&&""!==this.inputElement.getAttribute(r);this.setProperties({enabled:o},!e)}break;case"value":(RD(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(t=new Date(this.inputElement.getAttribute(r)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({value:t},!e));break;case"max":(RD(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(t=new Date(this.inputElement.getAttribute(r)),this.isNullOrEmpty(t)||isNaN(+t)||this.setProperties({max:t},!e))}}}catch(s){n.e(s)}finally{n.f()}}},{key:"requiredModules",value:function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e}},{key:"getTimeActiveElement",value:function(){return RD(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll(".e-active")}},{key:"createDateObj",value:function(e){return e instanceof Date?e:null}},{key:"getDateObject",value:function(e){if(!this.isNullOrEmpty(e)){var t=this.createDateObj(e),i=this.valueWithMinutes,n=!RD(i);if(this.checkDateValue(t)){var r=n?i.getDate():Pj,a=n?i.getMonth():Mj,o=n?i.getFullYear():Lj,s=n?i.getHours():Nj,l=n?i.getMinutes():Fj,c=n?i.getSeconds():Bj,u=n?i.getMilliseconds():Vj;return new Date(o,a,r,s,l,c,u)}}return null}},{key:"findNextTimeElement",value:function(e){var t=this.inputElement.value,i=RD(this.valueWithMinutes)?this.createDateObj(t):this.getDateObject(this.valueWithMinutes),n=null,r=this.liCollections.length;if(!RD(this.activeIndex)||!RD(this.checkDateValue(i))){if("home"===e.action)n=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)n=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var a=0;a<r;a++)if(+i<this.timeCollections[a]){n=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}else for(var o=r-1;o>=0;o--)if(+i>this.timeCollections[o]){n=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(RD(n)?null:new Date(n))}}},{key:"setTimeValue",value:function(e,t){var i,n,r=this.validateMinMaxRange(t),a=this.createDateObj(r);return this.getFormattedValue(a)!==(RD(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=RD(a)?null:a,n=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=a),this.valueWithMinutes=this.checkDateValue(e),n=new Date(+this.valueWithMinutes)),i=this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:RD(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:RD(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&RD(n),cV.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),n}},{key:"timeElementValue",value:function(e){if(!RD(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var t=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(t,e)}return null}},{key:"timeKeyHandler",value:function(e){if(!(RD(this.step)||this.step<=0)){var t=this.timeCollections.length;if(RD(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(RD(this.value)&&RD(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var i;if(e.keyCode>=37&&e.keyCode<=40){var n=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===t?0:this.activeIndex,this.activeIndex=n=this.activeIndex<0?t-1:this.activeIndex,i=RD(this.timeCollections[n])?this.timeCollections[0]:this.timeCollections[n]}else"home"===e.action?(this.activeIndex=0,i=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=t-1,i=this.timeCollections[t-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(i))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),!this.isTimePopupOpen()||null===this.selectedElement||e&&"click"===e.type||this.setTimeScrollPosition()}}},{key:"TimeKeyActionHandle",value:function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),wP([this.inputWrapper.container],"e-input-focus"),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}}},{key:"inputKeyAction",value:function(e){switch(e.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(e)}}},{key:"onPropertyChanged",value:function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];switch(a){case"value":this.cldrDateTimeFormat(),this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),cV.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null);break;case"min":case"max":this.getProperty(e,a),this.updateInput();break;case"enableRtl":cV.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":RD(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),RD(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),cV.setCssClass(e.cssClass,[this.inputWrapper.container],t.cssClass),this.dateTimeWrapper&&cV.setCssClass(e.cssClass,[this.dateTimeWrapper],t.cssClass);break;case"locale":this.globalize=new hR(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),cV.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),_get(_getPrototypeOf(i.prototype),"updateInput",this).call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue();break;case"placeholder":cV.setPlaceholder(e.placeholder,this.inputElement),this.inputElement.setAttribute("aria-placeholder",e.placeholder);break;case"enabled":cV.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1),this.bindEvents();break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width);break;case"readonly":cV.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,cV.removeFloating(this.inputWrapper),cV.addFloating(this.inputElement,this.floatLabelType,this.placeholder);break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:e.scrollTo},!0)):this.setProperties({scrollTo:null},!0);break;default:_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,e,t)}this.hide(null)}}},{key:"getModuleName",value:function(){return"datetimepicker"}},{key:"restoreValue",value:function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=RD(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)}}]),i}(Ij),Rj([QP(null)],Dj.prototype,"timeFormat",void 0),Rj([QP(30)],Dj.prototype,"step",void 0),Rj([QP(null)],Dj.prototype,"scrollTo",void 0),Rj([QP(1e3)],Dj.prototype,"zIndex",void 0),Rj([QP(null)],Dj.prototype,"value",void 0),Rj([QP(null)],Dj.prototype,"keyConfigs",void 0),Rj([QP({})],Dj.prototype,"htmlAttributes",void 0),Rj([QP(!1)],Dj.prototype,"enablePersistence",void 0),Rj([QP(!0)],Dj.prototype,"allowEdit",void 0),Rj([QP(!1)],Dj.prototype,"isMultiSelection",void 0),Rj([QP(null)],Dj.prototype,"values",void 0),Rj([QP(!0)],Dj.prototype,"showClearButton",void 0),Rj([QP(null)],Dj.prototype,"placeholder",void 0),Rj([QP(!1)],Dj.prototype,"strictMode",void 0),Rj([QP(null)],Dj.prototype,"serverTimezoneOffset",void 0),Rj([QP(new Date(1900,0,1))],Dj.prototype,"min",void 0),Rj([QP(new Date(2099,11,31))],Dj.prototype,"max",void 0),Rj([QP(null)],Dj.prototype,"firstDayOfWeek",void 0),Rj([QP("Gregorian")],Dj.prototype,"calendarMode",void 0),Rj([QP("Month")],Dj.prototype,"start",void 0),Rj([QP("Month")],Dj.prototype,"depth",void 0),Rj([QP(!1)],Dj.prototype,"weekNumber",void 0),Rj([QP(!0)],Dj.prototype,"showTodayButton",void 0),Rj([QP("Short")],Dj.prototype,"dayHeaderFormat",void 0),Rj([QP(!1)],Dj.prototype,"openOnFocus",void 0),Rj([eM()],Dj.prototype,"open",void 0),Rj([eM()],Dj.prototype,"close",void 0),Rj([eM()],Dj.prototype,"cleared",void 0),Rj([eM()],Dj.prototype,"blur",void 0),Rj([eM()],Dj.prototype,"focus",void 0),Rj([eM()],Dj.prototype,"created",void 0),Rj([eM()],Dj.prototype,"destroyed",void 0),Dj=Rj([tM],Dj)),Uj="",qj="",Wj=[],zj="";function Gj(e,t,i,n){var r=t;n=null==n||n;var a={item:null,index:null};if(e&&e.length){for(var o=e.length,s=n?e.toLocaleLowerCase():e,l=0,c=r;l<c.length;l++){var u=c[l],h=(n?u.textContent.toLocaleLowerCase():u.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&h===s||"StartsWith"===i&&h.substr(0,o)===s)return a.item=u,a.index=l,{item:u,index:l}}return a}return a}var Yj,Kj,Xj,Jj=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Qj=(Kj=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Jj([QP()],Kj.prototype,"text",void 0),Jj([QP()],Kj.prototype,"value",void 0),Jj([QP()],Kj.prototype,"iconCss",void 0),Jj([QP()],Kj.prototype,"groupBy",void 0),Jj([QP()],Kj.prototype,"htmlAttributes",void 0),Kj),Zj=(Yj=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"getPropObject",value:function(e,t,i){var n=new Object,r=new Object;n[e]=t[e],r[e]=i[e];var a=new Object;return a.newProperty=n,a.oldProperty=r,a}},{key:"getValueByText",value:function(e,t,i){var n=null;return RD(this.listData)||(n=this.checkValueCase(e,!!t,i)),n}},{key:"checkValueCase",value:function(e,t,i,n){var r=this,a=null;n&&(a=e);var o=this.listData,s=this.fields,l=this.typeOfData(o).typeof;if("string"===l||"number"===l||"boolean"===l){var c,u=_createForOfIteratorHelper(o);try{for(u.s();!(c=u.n()).done;){var h=c.value;RD(h)||(i?a=this.checkingAccent(String(h),e,t):t?this.checkIgnoreCase(String(h),e)&&(a=this.getItemValue(String(h),e,t)):this.checkNonIgnoreCase(String(h),e)&&(a=this.getItemValue(String(h),e,t,n)))}}catch(d){u.e(d)}finally{u.f()}}else o.filter(t?function(t){!RD(TD(s.value,t))&&r.checkIgnoreCase(TD(s.text,t).toString(),e)&&(a=TD(s.value,t))}:n?function(e){var t=TD(s.value,e);RD(t)||RD(a)||t.toString()!==a.toString()||(a=TD(s.text,e))}:function(t){r.checkNonIgnoreCase(TD(s.text,t),e)&&(a=TD(s.value,t))});return a}},{key:"checkingAccent",value:function(e,t,i){var n=bF.ignoreDiacritics(String(e)),r=bF.ignoreDiacritics(t.toString()),a=null;return i?this.checkIgnoreCase(n,r)&&(a=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(a=this.getItemValue(String(e),t,i)),a}},{key:"checkIgnoreCase",value:function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()}},{key:"checkNonIgnoreCase",value:function(e,t){return String(e)===t.toString()}},{key:"getItemValue",value:function(e,t,i,n){var r=this.typeOfData(this.listData).typeof;return n?e.toString():i?"string"===r?String(e):this.getFormattedValue(String(e)):"string"===r?t:this.getFormattedValue(t)}},{key:"templateCompiler",value:function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}},{key:"l10nUpdate",value:function(e){var t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);var i=e?this.actionFailureTemplate:this.noRecordsTemplate,n=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";var r,a=_createForOfIteratorHelper(tP(this.templateCompiler(i)?document.querySelector(i).innerHTML.trim():i)({},this,e?"actionFailureTemplate":"noRecordsTemplate",n,this.isStringTemplate));try{for(a.s();!(r=a.n()).done;){var o=r.value;t.appendChild(o)}}catch(u){a.e(u)}finally{a.f()}this.DropDownBaseupdateBlazorTemplates(!1,!1,!e,e,!1,!1,!1,!1)}else{var s=new PM(this.getLocaleName(),{},this.locale);this.l10n=""!==s.getConstant("actionFailureTemplate")?s:new PM("listbox"===this.getModuleName()?"listbox":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var l=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){var c=this.createElement("li");c.textContent=l,t.appendChild(c),c.classList.add("e-list-nrt")}else t.innerHTML=l}}},{key:"getLocaleName",value:function(){return"drop-down-base"}},{key:"getTextByValue",value:function(e){return this.checkValueCase(e,!1,!1,!0)}},{key:"getFormattedValue",value:function(e){if(this.listData&&this.listData.length){var t=this.typeOfData(this.listData);if("null"===e)return null;if("number"==typeof TD(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof TD(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e}return e}},{key:"setEnableRtl",value:function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?wP(this.enableRtlElements,"e-rtl"):_P(this.enableRtlElements,"e-rtl")}},{key:"initialize",value:function(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var e=mF.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!RD(this.dataSource))||this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query)}},{key:"DropDownBaseupdateBlazorTemplates",value:function(e,t,i,n,r,a,o,s){}},{key:"DropDownBaseresetBlazorTemplates",value:function(e,t,i,n,r,a,o){this.isStringTemplate||(this.itemTemplate&&e&&iP(this.itemTemplateId),this.groupTemplate&&t&&iP(this.groupTemplateId),this.noRecordsTemplate&&i&&iP(this.noRecordsTemplateId),this.actionFailureTemplate&&n&&iP(this.actionFailureTemplateId),r&&iP(this.valueTemplateId),a&&iP(this.headerTemplateId),o&&iP(this.footerTemplateId))}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"setEnabled",value:function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")}},{key:"updateDataAttribute",value:function(e){for(var t=["class","style","id","type"],i={},n=0;n<this.element.attributes.length;n++)-1!==t.indexOf(this.element.attributes[n].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[n].name||(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));DD(i,e,i),this.setProperties({htmlAttributes:i},!0)}},{key:"renderItemsBySelect",value:function(){var e=this.element,t={value:"value",text:"text"},i=[],n=e.querySelectorAll("select>optgroup"),r=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,r,t),n.length){for(var a=0;a<n.length;a++){var o=n[a],s={};s[t.text]=o.label,s.isHeader=!0;var l=o.querySelectorAll("option");i.push(s),this.getJSONfromOption(i,l,t)}e.querySelectorAll("select>option")}this.fields.text=t.text,this.fields.value=t.value,this.resetList(i,t)}},{key:"getJSONfromOption",value:function(e,t,i){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o={};o[i.text]=a.innerText,o[i.value]=a.getAttribute(i.value)?a.getAttribute(i.value):a.innerText,e.push(o)}}catch(s){r.e(s)}finally{r.f()}}},{key:"preRender",value:function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"}},{key:"setListData",value:function(e,t,i){var n,r=this;t=t||this.fields,this.isActive=!0,this.trigger("actionBegin",{cancel:!1,data:e,query:i},(function(i){if(!i.cancel)if(r.showSpinner(),e instanceof TF){if(r.isRequested=!0,r.isDataFetched)return void r.emptyDataRequest(t);i.data.executeQuery(r.getQuery(i.query)).then((function(e){r.trigger("actionComplete",e,(function(e){if(!e.cancel){var i=e.result;0===i.length&&(r.isDataFetched=!0),n=r.renderItems(i,t),r.onActionComplete(n,i,e),r.groupTemplate&&r.renderGroupTemplate(n),r.isRequested=!1,r.bindChildItems(i,n,t,e)}}))})).catch((function(e){r.isRequested=!1,r.onActionFailure(e),r.hideSpinner()}))}else{var a=new TF(i.data),o=r.getQuery(i.query).executeLocal(a);r.trigger("actionComplete",{cancel:!1,result:o},(function(e){e.cancel||(n=r.renderItems(e.result,t),r.onActionComplete(n,e.result),r.groupTemplate&&r.renderGroupTemplate(n),r.bindChildItems(e.result,n,t))}))}}))}},{key:"bindChildItems",value:function(e,t,i,n){var r=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout((function(){AP(r.remainingItems(r.sortedData,i),t),r.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),r.liCollections=r.list.querySelectorAll(".e-list-item"),r.updateListValues(),r.raiseDataBound(e,n)}),0):this.raiseDataBound(e,n)}},{key:"updateListValues",value:function(){}},{key:"findListElement",value:function(e,t,i,n){var r=null;if(e)for(var a=[].slice.call(e.querySelectorAll(t)),o=0;o<a.length;o++)if(a[o].getAttribute(i)===n+""){r=a[o];break}return r}},{key:"raiseDataBound",value:function(e,t){this.hideSpinner(),this.trigger("dataBound",{items:e,e:t})}},{key:"remainingItems",value:function(e,t){var i=new TF(e).executeLocal((new gF).skip(100));if(this.itemTemplate){var n=this.templateListItem(i,t);return[].slice.call(n.childNodes)}var r=this.typeOfData(i).typeof;return"string"===r||"number"===r||"boolean"===r?mF.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t)):mF.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0)}},{key:"emptyDataRequest",value:function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()}},{key:"showSpinner",value:function(){}},{key:"hideSpinner",value:function(){}},{key:"onActionFailure",value:function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),wP([this.list],"e-nodata")}},{key:"onActionComplete",value:function(e,t,i){this.listData=t,this.list.innerHTML="",this.fixedHeaderElement=RD(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)}},{key:"postRender",value:function(e,t,i){var n=e.querySelector(".e-list-item"),r=e.querySelector(".e-active");n&&!r&&n.classList.add("e-item-focus"),t.length<=0?(this.l10nUpdate(),wP([e],"e-nodata")):e.classList.remove("e-nodata")}},{key:"getQuery",value:function(e){return e||(this.query?this.query:new gF)}},{key:"renderGroupTemplate",value:function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector(".e-list-group-item")){var t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=e.querySelectorAll(".e-list-group-item");if(this.templateCompiler(this.groupTemplate)){var r=document.querySelector(this.groupTemplate).innerHTML.trim();mF.renderGroupTemplate(r,t,this.fields.properties,n,i)}else mF.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,n,i);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1,!1,!1,!1,!1)}}},{key:"createListItems",value:function(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=mF.groupDataSource(e,t.properties,this.sortOrder)),wP([this.list],"e-dd-group")):e=this.getSortedDataSource(e);var i=this.listOption(e,t),n=e.length>100?new TF(e).executeLocal((new gF).take(100)):e;return this.sortedData=e,mF.createList(this.createElement,"autocomplete"===this.getModuleName()?n:e,i,!0)}},{key:"listOption",value:function(e,t){var i=!RD(t.iconCss),n=RD(t.properties)?t:t.properties;return DD({},null!==t.text||null!==t.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},t,!0)}},{key:"setFloatingHeader",value:function(e){RD(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains("e-list-group-item")||(this.fixedHeaderElement.style.display="none"),TP([this.fixedHeaderElement],this.list),this.setFixedHeader()),RD(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)}},{key:"scrollStop",value:function(e){for(var t=e.target,i=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),n=Math.round(t.scrollTop/i),r=this.list.querySelectorAll("li"),a=n;a>-1;a--){if(!RD(r[a])&&r[a].classList.contains("e-list-group-item")){this.fixedHeaderElement.innerHTML=r[a].innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}}},{key:"renderItems",value:function(e,t){var i;if(this.itemTemplate&&e){var n=e;n&&t.groupBy?("None"!==this.sortOrder&&(n=this.getSortedDataSource(n)),n=mF.groupDataSource(n,t.properties,this.sortOrder)):n=this.getSortedDataSource(n),this.sortedData=n;var r=n.length>100?new TF(n).executeLocal((new gF).take(100)):n;i=this.templateListItem("autocomplete"===this.getModuleName()?r:n,t);var a="listbox"===this.getModuleName();this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,a)}else i=this.createListItems(e,t);return i}},{key:"templateListItem",value:function(e,t){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var n=document.querySelector(this.itemTemplate).innerHTML.trim();return mF.renderContentTemplate(this.createElement,n,e,t.properties,i)}return mF.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i)}},{key:"typeOfData",value:function(e){for(var t=0;!RD(e)&&t<e.length;t++)if(!RD(e[t])&&!RD("string"==typeof e[t]||"number"==typeof e[t]||"boolean"==typeof e[t]?e[t]:TD(this.fields.value?this.fields.value:"value",e[t])))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}},{key:"setFixedHeader",value:function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10)),this.fixedHeaderElement.style.width=(this.liCollections[0].offsetWidth-e).toString()+"px",LP(this.fixedHeaderElement,{zIndex:10});var t=this.ulElement.querySelector(".e-list-group-item");this.fixedHeaderElement.innerHTML=t.innerHTML}},{key:"getSortedDataSource",value:function(e){return e&&"None"!==this.sortOrder&&(e=mF.getDataSource(e,mF.addSorting(this.sortOrder,this.fields.text?this.fields.text:"text"))),e}},{key:"getIndexByValue",value:function(e){for(var t,i=this.getItems(),n=0;n<i.length;n++)if(!RD(e)&&i[n].getAttribute("data-value")===e.toString()){t=n;break}return t}},{key:"dispatchEvent",value:function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}},{key:"setFields",value:function(){this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!this.fields.value&&this.fields.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")}},{key:"resetList",value:function(e,t,i){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!RD(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),this.setListData(e,t,i))}},{key:"updateSelectElementData",value:function(e){e&&RD(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)}},{key:"updateSelection",value:function(){}},{key:"renderList",value:function(){this.render()}},{key:"updateDataSource",value:function(e){this.resetList(this.dataSource)}},{key:"setUpdateInitial",value:function(e,t){this.isDataFetched=!1;for(var i={},n=0;e.length>n;n++)t[e[n]]&&"fields"===e[n]?this.setFields():t[e[n]]&&(i[e[n]]=t[e[n]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))}},{key:"onPropertyChanged",value:function(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var r=this.ulElement.querySelector(".e-list-group-item");this.fixedHeaderElement.innerHTML=r.innerHTML}break;case"locale":this.list&&!RD(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}},{key:"render",value:function(e){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add("e-dropdownbase"),this.setFields(),this.rippleFun=sM(this.list,{duration:300,selector:".e-list-item"});var t=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&RD(t)||this.isGroupChecking||OR.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),_P([this.element],"e-dropdownbase"),this.element.style.display="none";var i=this.createElement("div");this.element.parentElement.insertBefore(i,this.element),i.appendChild(this.element),i.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()}},{key:"getModuleName",value:function(){return"dropdownbase"}},{key:"getItems",value:function(){return this.ulElement.querySelectorAll(".e-list-item")}},{key:"addItem",value:function(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&RD(t)){var i=[].slice.call(this.listData);i.push(e),i=this.getSortedDataSource(i),t=this.fields.groupBy?(i=mF.groupDataSource(i,this.fields.properties,this.sortOrder)).indexOf(e):i.indexOf(e)}this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var n,r=this.getItems().length,a=this.list.querySelector(".e-active");e=e instanceof Array?e:[e],n=RD(t)||t<0||t>r-1?r:t;var o=this.fields;e&&o.groupBy&&(e=mF.groupDataSource(e,o.properties));for(var s=[],l=0;l<e.length;l++){var c=e[l],u=c.isHeader,h=this.createElement("li",{className:u?"e-list-group-item":"e-list-item",id:"option-add-"+l}),d=c instanceof Object?TD(o.text,c):c;u&&(h.innerText=d),this.itemTemplate&&!u?(AP(tP(this.itemTemplate)(c,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate),h),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)):u||h.appendChild(document.createTextNode(d)),h.setAttribute("data-value",c instanceof Object?TD(o.value,c):c),h.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:h}),s.push(h),this.listData.push(c),this.updateActionCompleteData(h,c,n),this.trigger("beforeItemRender",{element:h,item:c})}if(0===r&&RD(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=s,AP(s,this.ulElement),this.updateAddItemList(this.list,r);else{"listbox"===this.getModuleName()&&0===r&&(this.ulElement.innerHTML="");for(var p=[],f=0;f<e.length;f++){for(var v=this.ulElement.querySelectorAll(".e-list-group-item"),m=0;m<v.length;m++)p[m]=v[m].innerText;if(p.indexOf(s[f].innerText)>-1&&o.groupBy){for(var g=0;g<v.length;g++)if(p[g]===s[f].innerText){this.ulElement.insertBefore(s[f+1],"None"===this.sortOrder?v[g+1]:this.ulElement.childNodes[t]),f+=1;break}}else this.liCollections[n]?this.liCollections[n].parentNode.insertBefore(s[f],this.liCollections[n]):this.ulElement.appendChild(s[f]);var y=[].slice.call(this.liCollections);y.splice(n,0,s[f]),this.liCollections=y,n+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(a||0===t)&&this.updateSelection()}},{key:"validationAttribute",value:function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var n=["required","aria-required","form"],r=0;r<n.length;r++)if(e.getAttribute(n[r])){var a=e.getAttribute(n[r]);t.setAttribute(n[r],a),e.removeAttribute(n[r])}}},{key:"setZIndex",value:function(){}},{key:"updateActionCompleteData",value:function(e,t,i){}},{key:"updateAddItemList",value:function(e,t){}},{key:"updateDataList",value:function(){}},{key:"getDataByValue",value:function(e){if(!RD(this.listData)){var t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t){var i,n=_createForOfIteratorHelper(this.listData);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(!RD(r)&&r===e)return r}}catch(l){n.e(l)}finally{n.f()}}else{var a,o=_createForOfIteratorHelper(this.listData);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(!RD(s)&&TD(this.fields.value?this.fields.value:"value",s)===e)return s}}catch(l){o.e(l)}finally{o.f()}}}return null}},{key:"destroy",value:function(){document.body.contains(this.list)&&(OR.remove(this.list,"scroll",this.setFloatingHeader),RD(this.rippleFun)||this.rippleFun(),xP(this.list)),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}}]),i}(kM),Jj([ZP({text:null,value:null,iconCss:null,groupBy:null},Qj)],Yj.prototype,"fields",void 0),Jj([QP(!1)],Yj.prototype,"enablePersistence",void 0),Jj([QP(null)],Yj.prototype,"itemTemplate",void 0),Jj([QP(null)],Yj.prototype,"groupTemplate",void 0),Jj([QP("No records found")],Yj.prototype,"noRecordsTemplate",void 0),Jj([QP("Request failed")],Yj.prototype,"actionFailureTemplate",void 0),Jj([QP("None")],Yj.prototype,"sortOrder",void 0),Jj([QP(!0)],Yj.prototype,"enabled",void 0),Jj([QP([])],Yj.prototype,"dataSource",void 0),Jj([QP(null)],Yj.prototype,"query",void 0),Jj([QP("StartsWith")],Yj.prototype,"filterType",void 0),Jj([QP(!0)],Yj.prototype,"ignoreCase",void 0),Jj([QP(1e3)],Yj.prototype,"zIndex",void 0),Jj([QP(!1)],Yj.prototype,"ignoreAccent",void 0),Jj([QP()],Yj.prototype,"locale",void 0),Jj([eM()],Yj.prototype,"actionBegin",void 0),Jj([eM()],Yj.prototype,"actionComplete",void 0),Jj([eM()],Yj.prototype,"actionFailure",void 0),Jj([eM()],Yj.prototype,"select",void 0),Jj([eM()],Yj.prototype,"dataBound",void 0),Jj([eM()],Yj.prototype,"created",void 0),Jj([eM()],Yj.prototype,"destroyed",void 0),Yj=Jj([tM],Yj)),$j=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},eH={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:"e-list-item",disable:"e-disabled",base:"e-dropdownbase",focus:"e-item-focus",input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},tH={container:null,buttons:[]},iH=(Xj=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).previousValue=null,r}return _createClass(i,[{key:"preRender",value:function(){this.isServerBlazor=!1,this.isServerBlazor?this.initializeData():(this.element.style.opacity="0",this.initializeData(),_get(_getPrototypeOf(i.prototype),"preRender",this).call(this)),this.activeIndex=this.index,this.queryString=""}},{key:"initializeData",value:function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}}},{key:"setZIndex",value:function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}},{key:"renderList",value:function(e){this.isServerBlazor?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):(_get(_getPrototypeOf(i.prototype),"render",this).call(this,e),this.wireListEvents())}},{key:"floatLabelChange",value:function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?NP(e,["e-label-top"],["e-label-bottom"]):NP(e,["e-label-bottom"],["e-label-top"])}}},{key:"resetHandler",value:function(e){e.preventDefault(),this.clearAll(e)}},{key:"resetFocusElement",value:function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!RD(this.ulElement)){var e=this.ulElement.querySelector("."+eH.li);e&&e.classList.add(eH.focus)}}},{key:"clearAll",value:function(e,t){!RD(t)&&(RD(t)||!RD(t.dataSource)&&(t.dataSource instanceof TF||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));var i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)}},{key:"resetSelection",value:function(e){if(this.list)if(RD(e)||!RD(e.dataSource)&&(e.dataSource instanceof TF||0!==e.dataSource.length)){if(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!RD(this.actionCompleteData.ulElement)&&!RD(this.actionCompleteData.list)){var t=this.actionCompleteData.ulElement.querySelector("li"),i=this.ulElement&&this.ulElement.querySelector("li");"EJS-COMBOBOX"===this.element.tagName&&t&&i&&t.childElementCount>0&&i.childElementCount>0&&t.textContent!==i.textContent&&this.itemTemplate&&this.cloneElements(),this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list)}this.resetFocusElement()}else this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource);this.isServerBlazor||(this.hiddenElement.innerHTML=""),this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(xP(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()}},{key:"setHTMLAttributes",value:function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i){var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&wP([this.inputWrapper.container],n.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.enabled=!1,this.setEnable();else if("readonly"!==i||RD(this.htmlAttributes[i]))if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[i]);else{var r=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||r.push("tabindex"),0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):r.indexOf(i)>-1?"placeholder"===i?cV.setPlaceholder(this.htmlAttributes[i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")}},{key:"getAriaAttributes",value:function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}}},{key:"setEnableRtl",value:function(){cV.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())}},{key:"setEnable",value:function(){cV.setEnabled(this.enabled,this.inputElement),this.enabled?(_P([this.inputWrapper.container],eH.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),wP([this.inputWrapper.container],eH.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)}},{key:"getPersistData",value:function(){return this.addOnPersist(["value"])}},{key:"getLocaleName",value:function(){return"drop-down-list"}},{key:"preventTabIndex",value:function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)}},{key:"targetElement",value:function(){return this.inputWrapper.container}},{key:"getNgDirective",value:function(){return"EJS-DROPDOWNLIST"}},{key:"getElementByText",value:function(e){return this.getElementByValue(this.getValueByText(e))}},{key:"getElementByValue",value:function(e){var t,i,n=_createForOfIteratorHelper(this.getItems());try{for(n.s();!(i=n.n()).done;){var r=i.value;if(this.getFormattedValue(r.getAttribute("data-value"))===e){t=r;break}}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"initValue",value:function(){this.renderList(),this.dataSource instanceof TF?this.initRemoteRender=!0:this.updateValues()}},{key:"updateValues",value:function(){if(RD(this.value))if(this.text&&RD(this.value)){var e=this.getElementByText(this.text);if(RD(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),cV.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}},{key:"onBlur",value:function(e){if(this.enabled){var t=e.relatedTarget,i=e.target,n=this.isPreventBlur;this.isPreventBlur=!1,!n||this.isDocumentClick||!this.isPopupOpen||RD(i)&&(this.isFilterLayout()||!RD(t))?this.isDocumentClick||!RD(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(eH.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(eH.inputFocus))||RD(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}}},{key:"focusOutAction",value:function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()}},{key:"onFocusOut",value:function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&wP([this.inputWrapper.clearButton],eH.clearIconHide),this.trigger("blur"))}},{key:"onFocus",value:function(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()}},{key:"resetValueHandler",value:function(e){var t=MP(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}}},{key:"wireEvent",value:function(){OR.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),OR.add(this.inputWrapper.container,"focus",this.focusIn,this),OR.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()}},{key:"bindCommonEvent",value:function(){OR.add(this.targetElement(),"blur",this.onBlur,this);var e=MP(this.inputElement,"form");e&&OR.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new RM(this.targetElement(),AR.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()}},{key:"bindClearEvent",value:function(){this.showClearButton&&OR.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)}},{key:"unBindCommonEvent",value:function(){OR.remove(this.targetElement(),"blur",this.onBlur);var e=MP(this.inputElement,"form");e&&OR.remove(e,"reset",this.resetValueHandler),AR.isDevice||this.keyboardModule.destroy(),this.showClearButton&&OR.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)}},{key:"updateIconState",value:function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?wP([this.inputWrapper.clearButton],eH.clearIconHide):_P([this.inputWrapper.clearButton],eH.clearIconHide))}},{key:"wireListEvents",value:function(){OR.add(this.list,"click",this.onMouseClick,this),OR.add(this.list,"mouseover",this.onMouseOver,this),OR.add(this.list,"mouseout",this.onMouseLeave,this)}},{key:"onSearch",value:function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&(this.isServerBlazor?(this.isServerIncrementalSearch=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1)):this.renderList()),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))}},{key:"onServerIncrementalSearch",value:function(e){this.isRequested||RD(this.list)||RD(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)}},{key:"onMouseClick",value:function(e){var t=MP(e.target,".e-list-item");this.isValidLI(t)&&(this.setSelection(t,e),AR.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100))}},{key:"onMouseOver",value:function(e){var t=MP(e.target,".e-list-item");this.setHover(t)}},{key:"setHover",value:function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),wP([e],"e-hover"))}},{key:"onMouseLeave",value:function(e){this.removeHover()}},{key:"removeHover",value:function(){if(this.list){var e=this.isServerBlazor&&this.popupObj&&this.popupObj.element?this.popupObj.element.querySelectorAll(".e-hover"):this.list.querySelectorAll(".e-hover");e&&e.length&&_P(e,"e-hover")}}},{key:"isValidLI",value:function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")}},{key:"incrementalSearch",value:function(e){if(this.liCollections.length>0){var t=function(e,t,i,n,r,a){var o;if(Uj+=String.fromCharCode(e),setTimeout((function(){Uj=""}),1e3),Uj=Uj.toLowerCase(),zj===r&&qj===Uj){for(var s=0;s<Wj.length;s++)if(Wj[s].classList.contains("e-active")){o=s;break}return Wj[o+=1]}var l,c=t,u=Uj.length,h=i=i?i+1:0;Wj=[];do{h===c.length&&(h=-1),l=c[o=-1===h?0:h],(a?l.textContent.trim().toLowerCase():l.innerText.toLowerCase()).substr(0,u)===Uj&&Wj.push(c[o]),h++}while(h!==i);return qj=Uj,zj=r,Wj[0]}(e.charCode,this.liCollections,this.activeIndex,0,this.element.id,this.isServerBlazor);RD(t)||(this.setSelection(t,e),this.setScrollPosition())}}},{key:"hideSpinner",value:function(){RD(this.spinnerElement)||(fF(this.spinnerElement),_P([this.spinnerElement],eH.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)}},{key:"showSpinner",value:function(){RD(this.spinnerElement)&&(this.spinnerElement=AR.isDevice&&!RD(this.filterInputObj)&&this.filterInputObj.buttons[1]||!RD(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],wP([this.spinnerElement],eH.disableIcon),iF({target:this.spinnerElement,width:AR.isDevice?"16px":"14px"},this.createElement),dF(this.spinnerElement))}},{key:"keyActionHandler",value:function(e){if(this.enabled){var t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var n="down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action,r="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){var a="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||a||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),((!this.isServerBlazor||"open"!==e.action&&"space"!==e.action)&&RD(this.list)||!RD(this.liCollections)&&r&&0===this.liCollections.length||this.isRequested)&&(!this.isServerBlazor||!n))return;switch((a&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!r&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}}},{key:"updateUpDownAction",value:function(e){if(this.isServerBlazor&&RD(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var t=this.list.querySelector("."+eH.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else{var i,n="down"===e.action?this.activeIndex+1:this.activeIndex-1,r=0;"autocomplete"===this.getModuleName()&&(r="down"===e.action&&RD(this.activeIndex)?0:this.liCollections.length-1,n=n<0?this.liCollections.length-1:n===this.liCollections.length?0:n),i=RD(this.activeIndex)?this.liCollections[r]:this.liCollections[n],RD(i)||this.setSelection(i,e)}e.preventDefault()}}},{key:"updateHomeEndAction",value:function(e){if("dropdownlist"===this.getModuleName())if(this.isServerBlazor&&RD(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{var t;if(this.isServerNavigation=!1,t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}}},{key:"selectCurrentValueOnTab",value:function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}},{key:"mobileKeyActionHandler",value:function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),RD(this.list)||!RD(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}}},{key:"selectCurrentItem",value:function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+eH.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()}},{key:"isSelectFocusItem",value:function(e){return!RD(e)}},{key:"getPageCount",value:function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))}},{key:"pageUpSelection",value:function(e,t){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],t)}},{key:"pageDownSelection",value:function(e,t){var i=this.getItems();this.setSelection(e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1],t)}},{key:"unWireEvent",value:function(){OR.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),OR.remove(this.inputWrapper.container,"keypress",this.onSearch),OR.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()}},{key:"unWireListEvents",value:function(){OR.remove(this.list,"click",this.onMouseClick),OR.remove(this.list,"mouseover",this.onMouseOver),OR.remove(this.list,"mouseout",this.onMouseLeave)}},{key:"checkSelector",value:function(e){return"#"+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")}},{key:"onDocumentClick",value:function(e){var t=e.target;if(!RD(this.popupObj)&&MP(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&AR.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(AR.isIE||"edge"===AR.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(eH.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;this.isInteracted=!1,this.hidePopup(e),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(eH.inputFocus))}}},{key:"activeStateChange",value:function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(eH.inputFocus))}},{key:"focusDropDown",value:function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)}},{key:"dropDownClick",value:function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(eH.disable)&&this.inputWrapper.clearButton!==e.target){var t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());var i=this,n=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout((function(){i.cloneElements(),i.isSecondClick=!0}),n)}}}},{key:"cloneElements",value:function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}}},{key:"updateSelectedItem",value:function(e,t,i,n){var r=this;this.removeSelection(),e.classList.add("e-active"),this.removeHover();var a=this.getFormattedValue(e.getAttribute("data-value")),o=this.getDataByValue(a);if(this.initial||i||RD(t))this.selectEventCallback(e,t,i,o,a),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerItemData",this.itemData),n&&this.setSelectOptions(e,t);else{var s=this.detachChanges(o);this.isSelected=!0,this.trigger("select",{e:t,item:e,itemData:s,isInteracted:!!t,cancel:!1},(function(s){s.cancel?e.classList.remove("e-active"):(r.selectEventCallback(e,t,i,o,a),r.isServerBlazor&&r.interopAdaptor.invokeMethodAsync("OnServerItemData",r.itemData),n&&r.setSelectOptions(e,t))}))}}},{key:"selectEventCallback",value:function(e,t,i,n,r){this.previousItemData=RD(this.itemData)?null:this.itemData,this.item=e,this.itemData=n;var a=this.list.querySelector(".e-item-focus");a&&_P([a],"e-item-focus"),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(r)}},{key:"activeItem",value:function(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))}},{key:"setValue",value:function(e){var t=this.getItemData();return cV.setValue(null===t.value?""!==t.text?t.text:null:t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerValueTemplate",t),this.valueTemplate&&null!==this.itemData&&!this.isServerBlazor?(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!0),this.setValueTemplate()):this.inputElement.previousSibling===this.valueTempElement&&(xP(this.valueTempElement),this.inputElement.style.display="block"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)}},{key:"setSelection",value:function(e,t){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)}},{key:"setSelectOptions",value:function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=RD(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||(this.isPopupOpen&&(DP(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&DP(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!RD(e)||this.isPopupOpen&&!RD(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||RD(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==AR.info.name&&(DP(this.inputElement,{"aria-label":this.inputElement.value}),DP(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))}},{key:"dropdownCompiler",value:function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}},{key:"setValueTemplate",value:function(){this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:eH.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";var e,t=this.itemData,i=_createForOfIteratorHelper(tP(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(t,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate));try{for(i.s();!(e=i.n()).done;){var n=e.value;this.valueTempElement.appendChild(n)}}catch(r){i.e(r)}finally{i.f()}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!0,!0)}},{key:"removeSelection",value:function(){if(this.list){var e=this.list.querySelectorAll(".e-active");e.length&&(_P(e,"e-active"),e[0].removeAttribute("aria-selected"))}}},{key:"getItemData",value:function(){var e,t,i,n=this.fields;return RD(i=this.itemData)||(e=TD(n.value,i),t=TD(n.text,i)),{value:RD(i)||PD(e)?i:e,text:RD(i)||PD(e)?i:t}}},{key:"onChangeEvent",value:function(e){var t=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:t.text,value:t.value},!0),this.detachChangeEvent(e)}},{key:"detachChanges",value:function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e}},{key:"detachChangeEvent",value:function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=RD(this.text)?"":this.text,!this.initial){var t,i=this.detachChanges(this.itemData);t="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue(),this.trigger("change",{e:e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:t,isInteracted:!!e,value:this.value,element:this.element}),this.isServerBlazor&&this.enablePersistence&&this.interopAdaptor.invokeMethodAsync("ServerChange")}!RD(this.value)&&""!==this.value||"Always"===this.floatLabelType||_P([this.inputWrapper.container],"e-valid-input")}},{key:"setHiddenValue",value:function(){if(RD(this.value))this.isServerBlazor||(this.hiddenElement.innerHTML="");else if(this.isServerBlazor&&this.hiddenElement.querySelector("option")){var e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else this.isServerBlazor||(this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",this.hiddenElement.querySelector("option").setAttribute("value",this.value.toString()))}},{key:"onFilterUp",value:function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}}},{key:"onFilterDown",value:function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}}},{key:"removeFillSelection",value:function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}}},{key:"getQuery",value:function(e){var t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new gF;var i=""===this.typedString?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;t.where((this.dataSource instanceof TF||"string"!==n)&&"number"!==n&&this.fields.text?this.fields.text:"",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new gF);return t}},{key:"getSelectionPoints",value:function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}}},{key:"searchLists",value:function(e){var t=this;if(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+eH.clearIcon)&&(this.filterInput.parentElement.querySelector("."+eH.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering())if(this.isServerBlazor)this.beforePopupOpen="combobox"===this.getModuleName()&&this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,""===this.filterInput.value&&"dropdownlist"!==this.getModuleName()?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value);else{var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,n,r){i.cancel||(t.isCustomFilter=!0,t.filteringAction(e,n,r))},baseEventArgs:e,cancel:!1};this.trigger("filtering",i,(function(e){e.cancel||t.isCustomFilter||e.preventDefaultAction||t.filteringAction(t.dataSource,null,t.fields)}))}}},{key:"filter",value:function(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)}},{key:"filteringAction",value:function(e,t,i){RD(this.filterInput)||(this.beforePopupOpen=!0,""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,RD(this.actionCompleteData.ulElement)||RD(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,RD(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0))}},{key:"setSearchBox",value:function(e){if(this.isFiltering()){var t=e.querySelector("."+eH.filterParent)?e.querySelector("."+eH.filterParent):this.createElement("span",{className:eH.filterParent});this.isServerBlazor&&(t.innerHTML=""),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:eH.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return AR.isDevice&&(i=!0),this.filterInputObj=cV.createInput({element:this.filterInput,buttons:i?[eH.backIcon,eH.filterBarClearIcon]:[eH.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),RD(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?wP([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&wP([this.filterInputObj.container],"e-filled")),AP([this.filterInputObj.container],t),TP([t],e),DP(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+eH.clearIcon),!AR.isDevice&&this.clearIconElement&&(OR.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new RM(this.filterInput,AR.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),OR.add(this.filterInput,"input",this.onInput,this),OR.add(this.filterInput,"keyup",this.onFilterUp,this),OR.add(this.filterInput,"keydown",this.onFilterDown,this),OR.add(this.filterInput,"blur",this.onBlur,this),OR.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return tH}},{key:"onInput",value:function(e){this.isValidKey=!0,AR.isDevice&&"mozilla"===AR.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))}},{key:"pasteHandler",value:function(e){var t=this;setTimeout((function(){t.typedString=t.filterInput.value,t.searchLists(e)}))}},{key:"onActionFailure",value:function(e){_get(_getPrototypeOf(i.prototype),"onActionFailure",this).call(this,e),this.beforePopupOpen&&this.renderPopup()}},{key:"onActionComplete",value:function(e,t,n,r){var a=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var o=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(_get(_getPrototypeOf(i.prototype),"onActionComplete",this).call(this,e,t,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!RD(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!RD(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,RD(e)||DP(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof TF)){var s=RD(this.fields.value)?this.fields.text:this.fields.value;t.some((function(e){return e[s]===a.value}))||this.dataSource.executeQuery(this.getQuery(this.query).where(new yF(s,"equal",this.value))).then((function(e){e.result.length>0&&(a.addItem(e.result,t.length),a.updateValues())}))}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||RD(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof TF||!RD(this.dataSource)&&!RD(this.dataSource.length)&&0!==this.dataSource.length))&&(this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0}),this.addNewItem(t,o),RD(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}}},{key:"addNewItem",value:function(e,t){var i=this;if(!RD(this.itemData)&&!RD(t)){var n=this.getItemData().value;e.some((function(e){return("string"==typeof e||"number"==typeof e)&&e===n||TD(i.fields.value,e)===n}))||this.addItem(this.itemData)}}},{key:"updateActionCompleteData",value:function(e,t,i){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t))}},{key:"focusIndexItem",value:function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()}},{key:"updateSelection",value:function(){var e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector(".e-list-item").classList.add(eH.focus))}},{key:"removeFocus",value:function(){var e=this.list.querySelectorAll("."+eH.focus);e&&e.length&&_P(e,eH.focus)}},{key:"renderPopup",value:function(){var e=this;this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},(function(t){if(t.cancel)e.beforePopupOpen=!1;else{var i=e.serverPopupEle?e.serverPopupEle:e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!=e.cssClass?e.cssClass:"")}),n=e.setSearchBox(i);if(e.listHeight=FD(e.popupHeight),e.headerTemplate&&!e.isServerBlazor&&e.setHeaderTemplate(i),AP([e.list],i),e.footerTemplate&&!e.isServerBlazor&&e.setFooterTemplate(i),e.isServerRendered&&i&&i.querySelector(".e-ddl-footer")&&i.appendChild(i.querySelector(".e-ddl-footer")),document.body.appendChild(i),e.updateServerPopup(i),i.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,RD(n.container)||(e.searchBoxHeight=n.container.parentElement.getBoundingClientRect().height,e.listHeight=(parseInt(e.listHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate||e.isServerRendered&&i&&i.querySelector(".e-ddl-header")){e.header=e.header?e.header:i.querySelector(".e-ddl-header");var r=Math.round(e.header.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(r+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate||e.isServerRendered&&i&&i.querySelector(".e-ddl-footer")){e.footer=e.footer?e.footer:i.querySelector(".e-ddl-footer");var a=Math.round(e.footer.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(a+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listHeight,10)-2).toString()+"px",i.style.maxHeight=FD(e.popupHeight)}else i.style.height="auto";var o,s=0;if(!RD(e.selectedLI)&&!RD(e.activeIndex)&&e.activeIndex>=0?e.setScrollPosition():e.list.scrollTop=0,AR.isDevice&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){s=e.getOffsetValue(i);var l=e.isEmptyList()?e.list:e.liCollections[0];o=-(parseInt(getComputedStyle(l).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10))}e.getFocusElement(),e.createPopup(i,s,o),e.checkCollision(i),AR.isDevice&&(e.popupObj.element.classList.add(eH.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&(e.popupObj.element.classList.add(eH.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),DP(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),wP([document.body,e.popupObj.element],eH.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=n.container.querySelector(".e-back-icon"),e.clearIconElement=n.container.querySelector("."+eH.clearIcon),OR.add(e.backIconElement,"click",e.clickOnBackIcon,e),OR.add(e.clearIconElement,"click",e.clearText,e))),i.style.visibility="visible",wP([i],"e-popup-close");var c,u=_createForOfIteratorHelper(e.popupObj.getScrollableParent(e.inputWrapper.container));try{for(u.s();!(c=u.n()).done;){var h=c.value;OR.add(h,"scroll",e.scrollHandler,e)}}catch(d){u.e(d)}finally{u.f()}AR.isDevice&&e.isFilterLayout()&&OR.add(e.list,"scroll",e.listScroll,e),DP(e.targetElement(),{"aria-expanded":"true"}),wP([e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container],[eH.inputFocus]),e.beforePopupOpen=!0,e.trigger("open",{popup:e.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}},(function(t){t.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):(e.serverBlazorUpdateSelection(),e.bindServerScrollEvent(),wP([e.inputWrapper.container],[eH.iconAnimation]),e.popupObj.show(new oM(t.animation),1e3===e.zIndex?e.element:null))}))}}))}},{key:"checkCollision",value:function(e){(!AR.isDevice||AR.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(ML(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())}},{key:"serverBlazorUpdateSelection",value:function(){(this.isServerBlazor&&(null!==this.value||null!==this.index||null!==this.text)||"dropdownlist"!==this.getModuleName()&&!this.isTyped)&&("dropdownlist"===this.getModuleName()&&(this.removeSelection(),this.removeFocus(),this.removeHover(),this.updateValues()),"combobox"===this.getModuleName()&&this.ulElement&&this.findListElement(this.ulElement,"li","data-value",this.value)&&!this.isTyped&&this.updateValues(),this.isServerBlazor&&"dropdownlist"!==this.getModuleName()&&(""===this.text||null===this.text)&&this.ulElement&&(this.ulElement.querySelector("li").classList.contains("e-hover")||wP([this.ulElement.querySelector("li")],"e-hover")))}},{key:"bindServerScrollEvent",value:function(){this.isServerBlazor&&this.list&&this.fields.groupBy&&!this.isGroupChecking&&(OR.remove(this.list,"scroll",this.setFloatingHeader),OR.add(this.list,"scroll",this.setFloatingHeader,this))}},{key:"updateServerPopup",value:function(e){this.isServerBlazor&&(e&&e.querySelector("li")&&_P([e.querySelector(".e-content")],["e-nodata"]),this.initial=!1,e.removeAttribute("style"))}},{key:"getOffsetValue",value:function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),n=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+n)}},{key:"createPopup",value:function(e,t,i){var n=this;this.popupObj=new eN(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown();var e="autocomplete"===n.getModuleName();n.DropDownBaseresetBlazorTemplates(e,e,!0,!0,!1,!0,!0),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup();var t=MP(n.inputElement,"form");n.isFiltering()&&t&&n.actionCompleteData.list&&n.actionCompleteData.list[0]&&(n.isActive=!0,n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0))},open:function(){OR.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var e=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),t=n.list.querySelector("ul li");n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&n.cloneElements(),n.isFilterLayout()&&(_P([n.inputWrapper.container],[eH.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&wP([n.inputWrapper.clearButton],eH.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){AR.isDevice||n.hidePopup()}})}},{key:"isEmptyList",value:function(){return!RD(this.liCollections)&&0===this.liCollections.length}},{key:"getFocusElement",value:function(){}},{key:"isFilterLayout",value:function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering}},{key:"scrollHandler",value:function(){AR.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()}},{key:"setSearchBoxPosition",value:function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector("."+eH.clearIcon);xP(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)}},{key:"setPopupPosition",value:function(e){var t,i=e,n=this.list.querySelector("."+eH.focus)||this.selectedLI,r=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],o=r.getBoundingClientRect().height,s=this.list.offsetHeight/2,l=RD(n)?r.offsetTop:n.offsetTop;if(a.offsetTop-s<l&&!RD(this.liCollections)&&this.liCollections.length>0&&!RD(n)){var c=this.list.offsetHeight/o,u=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(c-(this.liCollections.length-this.activeIndex))*o-i+u,this.list.scrollTop=n.offsetTop}else l>s?(t=s-o/2,this.list.scrollTop=l-s+o/2):t=l;return-(t=t+o+i-(o-this.inputWrapper.container.offsetHeight)/2)}},{key:"setWidth",value:function(){var e=FD(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),AR.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e}},{key:"scrollBottom",value:function(e){if(!RD(this.selectedLI)){var t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+i-t;n=e?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;var r=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;r=this.fields.groupBy&&!RD(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(r>0&&this.list.offsetHeight>r))&&(this.list.scrollTop=n)}}},{key:"scrollTop",value:function(){if(!RD(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!RD(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!RD(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}}},{key:"isEditTextBox",value:function(){return!1}},{key:"isFiltering",value:function(){return this.allowFiltering}},{key:"isPopupButton",value:function(){return!0}},{key:"setScrollPosition",value:function(e){if(RD(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}}},{key:"clearText",value:function(){this.filterInput.value="",this.searchLists(null)}},{key:"listScroll",value:function(){this.filterInput.blur()}},{key:"setEleWidth",value:function(e){RD(e)||("number"==typeof e?this.inputWrapper.container.style.width=FD(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:FD(e)))}},{key:"closePopup",value:function(e){var t=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){OR.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;var i,n=_createForOfIteratorHelper(this.popupObj.getScrollableParent(this.inputWrapper.container));try{for(n.s();!(i=n.n()).done;){var r=i.value;OR.remove(r,"scroll",this.scrollHandler)}}catch(a){n.e(a)}finally{n.f()}AR.isDevice&&this.isFilterLayout()&&(_P([document.body,this.popupObj.element],eH.popupFullScreen),OR.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(AR.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&OR.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(OR.remove(this.backIconElement,"click",this.clickOnBackIcon),OR.remove(this.clearIconElement,"click",this.clearText)),OR.remove(this.filterInput,"input",this.onInput),OR.remove(this.filterInput,"keyup",this.onFilterUp),OR.remove(this.filterInput,"keydown",this.onFilterDown),OR.remove(this.filterInput,"blur",this.onBlur),OR.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),DP(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(eH.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0}},(function(e){if(!RD(t.popupObj)&&!RD(t.popupObj.element.querySelector(".e-fixed-head"))){var i=t.popupObj.element.querySelector(".e-fixed-head");i.parentNode.removeChild(i),t.fixedHeaderElement=null}e.cancel||("autocomplete"!==t.getModuleName()||t.isServerBlazor||t.rippleFun(),t.isPopupOpen?t.popupObj.hide(new oM(e.animation)):t.destroyPopup())}))}}},{key:"destroyPopup",value:function(){var e=document.querySelector("#"+this.element.id+"_popup_holder");this.isServerBlazor&&this.serverPopupEle&&e&&(e.appendChild(this.serverPopupEle),this.interopAdaptor.invokeMethodAsync("OnServerClosePopup")),this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),xP(this.popupObj.element)}},{key:"clickOnBackIcon",value:function(){this.hidePopup(),this.focusIn()}},{key:"render",value:function(){if(this.isServerBlazor)this.inputElement=this.element,this.inputWrapper={container:this.element.parentElement},this.hiddenElement=this.inputWrapper.container.querySelector("select"),this.inputWrapper.buttons=[this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon")],this.showClearButton&&(this.inputWrapper.clearButton=this.inputWrapper.container.querySelector(".e-clear-icon"),cV.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),"Auto"===this.floatLabelType&&cV.wireFloatingEvents(this.element),cV.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties}),this.setFields(),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.enabled||(this.targetElement().tabIndex=-1),this.element.hasAttribute("autofocus")&&this.focusIn(),this.initial=!1;else{"INPUT"===this.element.tagName?(this.inputElement=this.element,RD(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),RD(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;RD(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=cV.createInput({element:this.inputElement,buttons:this.isPopupButton()?[eH.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:eH.hiddenElement}}),TP([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setFields(),this.inputWrapper.container.style.width=FD(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var t=this.element.getAttribute("id")?this.element.getAttribute("id"):MD("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),DP(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=i.options[i.selectedIndex].value,this.text=RD(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),RD(this.text)||this.inputElement.setAttribute("value",this.text)}this.renderComplete()}},{key:"setFooterTemplate",value:function(e){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),wP([this.footer],eH.footer));var t,i=_createForOfIteratorHelper(tP(this.dropdownCompiler(this.footerTemplate)?document.querySelector(this.footerTemplate).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate));try{for(i.s();!(t=i.n()).done;){var n=t.value;this.footer.appendChild(n)}}catch(r){i.e(r)}finally{i.f()}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),AP([this.footer],e)}},{key:"setHeaderTemplate",value:function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),wP([this.header],eH.header));var t,i=_createForOfIteratorHelper(tP(this.dropdownCompiler(this.headerTemplate)?document.querySelector(this.headerTemplate).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate));try{for(i.s();!(t=i.n()).done;){var n=t.value;this.header.appendChild(n)}}catch(a){i.e(a)}finally{i.f()}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1);var r=e.querySelector("div.e-content");e.insertBefore(this.header,r)}},{key:"setOldText",value:function(e){this.text=e}},{key:"setOldValue",value:function(e){this.value=e}},{key:"refreshPopup",value:function(){RD(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||AR.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(_P([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())}},{key:"checkData",value:function(e){e.dataSource&&!RD(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1});var t=-1!==Object.keys(e).indexOf("value")&&RD(e.value),i=-1!==Object.keys(e).indexOf("text")&&RD(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null)}},{key:"updateDataSource",value:function(e){""===this.inputElement.value&&(RD(e)||!RD(e.dataSource)&&(e.dataSource instanceof TF||0!==e.dataSource.length))||this.clearAll(null,e),(RD(e)||!RD(e.dataSource)&&(e.dataSource instanceof TF||0!==e.dataSource.length)||e.dataSource!==[])&&this.resetList(this.dataSource),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()}},{key:"checkCustomValue",value:function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({value:e.value,text:e.text})}},{key:"updateInputFields",value:function(){"dropdownlist"===this.getModuleName()&&cV.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)}},{key:"onPropertyChanged",value:function(e,t){"dropdownlist"===this.getModuleName()&&(this.isServerBlazor||(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e)));for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];switch(a){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(e.width);break;case"placeholder":cV.setPlaceholder(e.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&cV.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&cV.setReadonly(e.readonly,this.inputElement);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===e.text){this.clearAll();break}if(this.list||(this.dataSource instanceof TF&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var o=this.getElementByText(e.text);this.checkValidLi(o)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.text,t.text,"text"):this.isServerBlazor||this.setOldText(t.text)),this.updateInputFields()}break;case"value":if(null===e.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:e}),this.list||(this.dataSource instanceof TF&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var s=this.getElementByValue(e.value);this.checkValidLi(s)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.value,t.value,"value"):this.isServerBlazor||this.setOldValue(t.value)),this.updateInputFields()}break;case"index":if(null===e.index){this.clearAll();break}this.list||(this.dataSource instanceof TF&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender&&this.liCollections&&(this.checkValidLi(this.liCollections[e.index])||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(e.index,t.index,"index"):this.isServerBlazor||(this.index=t.index)),this.updateInputFields());break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":RD(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":cV.removeFloating(this.inputWrapper),cV.addFloating(this.inputElement,e.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":cV.setClearButton(e.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:var l;l=this.getPropObject(a,e,t),_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,l.newProperty,l.oldProperty)}}}},{key:"checkValidLi",value:function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)}},{key:"setSelectionData",value:function(e,t,i){var n,r=this;this.updateListValues=function(){"text"===i?(n=r.getElementByText(e),r.checkValidLi(n)||r.setOldText(t)):"value"===i?(n=r.getElementByValue(e),r.checkValidLi(n)||r.setOldValue(t)):"index"===i&&(n=r.liCollections[e],r.checkValidLi(n)||(r.index=t))}}},{key:"setCssClass",value:function(e,t){RD(t)||(t=t.replace(/\s+/g," ").trim()),RD(e)||(e=e.replace(/\s+/g," ").trim()),cV.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&cV.setCssClass(e,[this.popupObj.element],t)}},{key:"getModuleName",value:function(){return"dropdownlist"}},{key:"showPopup",value:function(){if(this.enabled)if(this.beforePopupOpen)this.refreshPopup();else{this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(RD(this.list)||!PD(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll(".e-list-item").length<=0)||this.isFiltering()&&this.isServerBlazor)&&this.renderList(),this.isServerBlazor||this.invokeRenderPopup();var e=!this.isFiltering()||document.querySelector("#"+this.element.id+"_popup_holder"),t="dropdownlist"===this.getModuleName()||!this.isFiltering();this.isServerBlazor&&e&&!RD(this.list)&&t&&this.invokeRenderPopup()}}},{key:"invokeRenderPopup",value:function(){if(AR.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}RD(this.list.children[0])&&!this.list.classList.contains("e-nodata")||this.renderPopup(),DP(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}},{key:"clientRenderPopup",value:function(e,t){t?(this.serverPopupEle=t,this.list=t.querySelector(".e-dropdownbase.e-content")?t.querySelector(".e-dropdownbase.e-content"):this.list,this.ulElement=this.list.querySelector("ul"),RD(this.ulElement)&&!this.list.classList.contains("e-nodata")&&wP([this.list],["e-nodata"]),this.liCollections=this.ulElement?this.ulElement.querySelectorAll(".e-list-item"):[],this.listData=e,"autocomplete"===this.getModuleName()&&this.liCollections.length>0&&this.renderHightSearch(),this.initRemoteRender=!1,this.isPopupOpen||this.serverBlazorUpdateSelection(),this.unWireListEvents(),this.wireListEvents(),this.isServerIncrementalSearch&&this.searchKeyEvent&&(this.isServerIncrementalSearch=!1,this.initial=!1,this.onServerIncrementalSearch(this.searchKeyEvent)),this.isServerNavigation&&this.searchKeyEvent&&("down"===this.searchKeyEvent.action||"up"===this.searchKeyEvent.action?(this.isServerNavigation=!1,this.updateUpDownAction(this.searchKeyEvent)):"home"!==this.searchKeyEvent.action&&"end"!==this.searchKeyEvent.action||(this.isServerNavigation=!1,this.updateHomeEndAction(this.searchKeyEvent))),this.beforePopupOpen&&this.invokeRenderPopup(),"dropdownlist"!==this.getModuleName()&&this.onActionComplete(this.ulElement,this.listData)):null!=e&&this.listData!==e&&(this.listData=e,this.initRemoteRender=!1)}},{key:"renderHightSearch",value:function(){}},{key:"updateclientItemData",value:function(e){this.listData=e}},{key:"initValueItemData",value:function(e){this.itemData=e,this.previousValue=this.value,this.initial=!1}},{key:"serverUpdateListElement",value:function(e,t){this.listData=e,this.ulElement&&(this.liCollections=this.ulElement.querySelectorAll(".e-list-item"))}},{key:"hidePopup",value:function(e){if(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!1,!!this.headerTemplate,!!this.headerTemplate),this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(cV.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,RD(this.index))this.resetSelection();else{var t=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||t,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();var i=this.getItemData(),n=this.isServerBlazor?!RD(this.value):!RD(this.selectedLI);""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==i.text)&&(this.isSelectCustom=!1,this.clearAll(e))}},{key:"focusIn",value:function(e){if(this.enabled&&!this.targetElement().classList.contains(eH.disable)){var t=!1;this.preventFocus&&AR.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),wP([this.inputWrapper.container],[eH.inputFocus]),this.onFocus(e)}}},{key:"focusOut",value:function(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement().blur(),_P([this.inputWrapper.container],[eH.inputFocus]))}},{key:"destroy",value:function(){if(this.isActive=!1,(!this.isServerBlazor||this.popupObj&&document.body.contains(this.popupObj.element))&&this.hidePopup(),this.unWireEvent(),this.list&&(this.unWireListEvents(),this.isServerBlazor&&this.fields.groupBy&&!this.isGroupChecking&&OR.remove(this.list,"scroll",this.setFloatingHeader)),!this.isServerBlazor){if(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))return;for(var e=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],t=0;t<e.length;t++)this.inputElement.removeAttribute(e[t]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),cV.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),xP(this.inputWrapper.container),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this)}}},{key:"getItems",value:function(){return this.list||(this.dataSource instanceof TF&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?_get(_getPrototypeOf(i.prototype),"getItems",this).call(this):[]}},{key:"getDataByValue",value:function(e){return _get(_getPrototypeOf(i.prototype),"getDataByValue",this).call(this,e)}},{key:"clear",value:function(){this.value=null}}]),i}(Zj),$j([QP(null)],Xj.prototype,"cssClass",void 0),$j([QP("100%")],Xj.prototype,"width",void 0),$j([QP("300px")],Xj.prototype,"popupHeight",void 0),$j([QP("100%")],Xj.prototype,"popupWidth",void 0),$j([QP(null)],Xj.prototype,"placeholder",void 0),$j([QP(null)],Xj.prototype,"filterBarPlaceholder",void 0),$j([QP({})],Xj.prototype,"htmlAttributes",void 0),$j([QP(null)],Xj.prototype,"query",void 0),$j([QP(null)],Xj.prototype,"valueTemplate",void 0),$j([QP(null)],Xj.prototype,"headerTemplate",void 0),$j([QP(null)],Xj.prototype,"footerTemplate",void 0),$j([QP(!1)],Xj.prototype,"allowFiltering",void 0),$j([QP(!1)],Xj.prototype,"readonly",void 0),$j([QP(null)],Xj.prototype,"text",void 0),$j([QP(null)],Xj.prototype,"value",void 0),$j([QP(null)],Xj.prototype,"index",void 0),$j([QP("Never")],Xj.prototype,"floatLabelType",void 0),$j([QP(!1)],Xj.prototype,"showClearButton",void 0),$j([eM()],Xj.prototype,"filtering",void 0),$j([eM()],Xj.prototype,"change",void 0),$j([eM()],Xj.prototype,"beforeOpen",void 0),$j([eM()],Xj.prototype,"open",void 0),$j([eM()],Xj.prototype,"close",void 0),$j([eM()],Xj.prototype,"blur",void 0),$j([eM()],Xj.prototype,"focus",void 0),Xj=$j([tM],Xj));eH.root="e-combobox",eH.root="e-autocomplete",eH.icon="e-input-group-icon e-ddl-icon e-search-icon";var nH="e-label-top",rH="e-label-bottom";function aH(e,t,i,n,r,a,o){var s,l;s=CP("span",{className:"e-float-line"}),l=CP("label",{className:"e-float-text"}),RD(i.id)||""===i.id||(l.id="label_"+i.id.replace(/ /g,"_"),DP(i,{"aria-labelledby":l.id})),RD(n.placeholder)||""===n.placeholder||(l.innerText=HM.sanitize(n.placeholder),n.removeAttribute("placeholder")),l.innerText=HM.sanitize(o),t.appendChild(s),t.appendChild(l),e.classList.add("e-float-input"),function(e,t){e&&e.length>0?(wP([t],nH),_P([t],rH)):(_P([t],nH),wP([t],rH))}(r,l),"Always"===a&&(l.classList.contains(rH)&&_P([l],rH),wP([l],nH))}function oH(e,t,i){t.placeholder=e&&e.length?"":i}var sH,lH=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},cH="e-hide-listitem",uH="e-chips",hH=(sH=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).isValidKey=!1,r.selectAllEventData=[],r.selectAllEventEle=[],r.isDynamicDataChange=!1,r.scrollFocusStatus=!1,r.keyDownStatus=!1,r}return _createClass(i,[{key:"enableRTL",value:function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())}},{key:"requiredModules",value:function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e}},{key:"updateHTMLAttribute",value:function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":var n=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==n&&(wP([this.overAllWrapper],n.split(" ")),wP([this.popupWrapper],n.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):0===i.indexOf("data")||["name","required","aria-required","form"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","role","style","class"].indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[i]):this.inputElement.setAttribute(i,this.htmlAttributes[i])}}}},{key:"updateReadonly",value:function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")}},{key:"updateClearButton",value:function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))}},{key:"updateCssClass",value:function(){if(!RD(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;""!==(e=this.cssClass.replace(/\s+/g," ").trim())&&(wP([this.overAllWrapper],e.split(" ")),wP([this.popupWrapper],e.split(" ")))}}},{key:"updateOldPropCssClass",value:function(e){RD(e)||""===e||""!==(e=e.replace(/\s+/g," ").trim())&&(_P([this.overAllWrapper],e.split(" ")),_P([this.popupWrapper],e.split(" ")))}},{key:"onPopupShown",value:function(){var e=this;if(AR.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var t=this;window.onpopstate=function(){t.hidePopup(),t.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}},(function(t){t.cancel||(e.focusAtFirstListItem(),document.body.appendChild(e.popupObj.element),"CheckBox"===e.mode&&e.enableGroupCheckBox&&!RD(e.fields.groupBy)&&e.updateListItems(e.list.querySelectorAll("li.e-list-item"),e.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===e.mode||e.showDropDownIcon)&&wP([e.overAllWrapper],["e-icon-anim"]),e.refreshPopup(),e.popupObj.show(t.animation,1e3===e.zIndex?e.element:null),DP(e.inputElement,{"aria-expanded":"true"}),e.isFirstClick&&e.loadTemplate())}))}},{key:"updateListItems",value:function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()}},{key:"loadTemplate",value:function(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}},{key:"setScrollPosition",value:function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!RD(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);RD(e)||this.scrollBottom(e)}}},{key:"focusAtFirstListItem",value:function(){if(this.ulElement&&this.ulElement.querySelector("li.e-list-item")){var e;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li.e-list-item:not(."+cH+")"))&&(this.removeFocus(),this.addListFocus(e))}}},{key:"focusAtLastListItem",value:function(e){var t;e?t=Gj(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?Gj(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))}},{key:"getAriaAttributes",value:function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}}},{key:"updateListARIA",value:function(){DP(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;DP(this.inputElement,this.getAriaAttributes()),e&&DP(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")}},{key:"ensureAriaDisabled",value:function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;DD(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}}},{key:"removelastSelection",value:function(e){var t,i=(t=this.chipCollectionWrapper.querySelectorAll("span."+uH))[t.length-1].getAttribute("data-value");RD(this.value)||(this.tempValues=this.value.slice()),this.removeValue(i,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()}},{key:"onActionFailure",value:function(e){_get(_getPrototypeOf(i.prototype),"onActionFailure",this).call(this,e),this.renderPopup(),this.onPopupShown()}},{key:"targetElement",value:function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value}},{key:"getForQuery",value:function(e){for(var t,i=RD(this.fields.value)?this.fields.text:this.fields.value,n=0;n<e.length;n++)t=0===n?new yF(i,"equal",e[n]):t.or(i,"equal",e[n]);return this.getQuery(this.query).where(t)}},{key:"onActionComplete",value:function(e,t,n,r){_get(_getPrototypeOf(i.prototype),"onActionComplete",this).call(this,e,t,n),this.updateSelectElementData(this.allowFiltering);var a=this,o=[];if(!RD(this.value)&&!this.allowCustomValue)for(var s=0;s<this.value.length;s++)this.findListElement(this.allowFiltering&&!RD(this.mainList)?this.mainList:e,"li","data-value",a.value[s])||o.push(a.value[s]);o.length>0&&this.dataSource instanceof TF&&!RD(this.value)?this.dataSource.executeQuery(this.getForQuery(o)).then((function(i){a.addItem(i.result,t.length),a.updateActionList(e,t,i)})):this.updateActionList(e,t,n),!(this.dataSource instanceof TF&&"CheckBox"===this.mode&&this.allowFiltering)||this.removeFocus()}},{key:"updateActionList",value:function(e,t,i,n){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?RD(this.mainData)||0!==this.mainData.length||(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value||"CheckBox"===this.mode)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),RD(this.setInitialValue)||this.setInitialValue(),RD(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(RD(this.text)||!RD(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))}},{key:"refreshSelection",value:function(){var e,t,i=this.hideSelectedItem?cH:"e-active";if(!RD(this.value))for(var n=0;!RD(this.value[n]);n++)if(e=this.value[n],t=this.findListElement(this.list,"li","data-value",e)){if(wP([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains("e-list-group-item")&&(!t.nextElementSibling||t.nextElementSibling.classList.contains("e-list-group-item"))&&wP([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(cH)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains("e-item-focus")){_P([t],"e-item-focus");var r=t.parentElement.querySelectorAll(".e-list-item:not(."+cH+")");r.length>0?wP([r[0]],"e-item-focus"):(this.ulElement=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement,this.l10nUpdate(),wP([this.list],"e-nodata"))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){var a=t.firstElementChild.getAttribute("aria-checked");(RD(a)||"false"===a)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null})}}this.checkSelectAll(),this.checkMaxSelection()}},{key:"hideGroupItem",value:function(e){var t,i,n=this.hideSelectedItem?cH:"e-active";i=t=this.findListElement(this.ulElement,"li","data-value",e);var r=0,a=0,o=!0,s=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(cH)&&t.previousElementSibling.classList.contains("e-list-item")&&(o=!1),!o||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains("e-list-group-item")?r=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(cH)&&i.nextElementSibling.classList.contains("e-list-item")&&(s=!1),!s||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains("e-list-group-item")?a=10:i=i.nextElementSibling}while(r<10||a<10);o&&s&&!t.previousElementSibling.classList.contains(cH)?wP([t.previousElementSibling],n):o&&s&&t.previousElementSibling.classList.contains(cH)&&_P([t.previousElementSibling],n)}},{key:"checkSelectAll",value:function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li.e-list-item").length,n=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!RD(this.fields.groupBy)&&(n-=e),i!==n&&n!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==n&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var r=0;r<t.length;r++)this.findGroupStart(t[r]);this.deselectHeader()}}},{key:"openClick",value:function(e){this.openOnClick||"CheckBox"===this.mode?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()}},{key:"KeyUp",value:function(e){"CheckBox"!==this.mode||this.openOnClick||RD(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(e))}},{key:"filter",value:function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)}},{key:"getQuery",value:function(e){var t=e?e.clone():this.query?this.query.clone():new gF;if(this.filterAction){if(null!==this.targetElement()){var i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof TF||"string"!==i)&&"number"!==i){var n=this.fields;t.where(RD(n.text)?"":n.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new gF)}},{key:"dataUpdater",value:function(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.onActionComplete(n,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof TF?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()}},{key:"checkForCustomValue",value:function(e,t){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){var n=this.inputElement.value,r=t||this.fields;if("string"!=typeof(!RD(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData)){var a={};AD(r.text,n,a),AD(r.value,n,a);var o=JSON.parse(JSON.stringify(this.listData));o.splice(0,0,a),this.resetList(o,r,e)}else this.resetList([this.inputElement.value],r)}this.value&&this.value.length&&this.refreshSelection()}},{key:"getNgDirective",value:function(){return"EJS-MULTISELECT"}},{key:"wrapperClick",value:function(e){if(this.setDynValue=!1,this.enabled)if(e.target!==this.overAllClear){if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf("e-chips-close"))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus")))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}else e.preventDefault()}},{key:"enable",value:function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),DP(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),DP(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()}},{key:"onBlur",value:function(e,t){var i;if(RD(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&wP([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(RD(this.value)||0===this.value.length)&&_P([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&AR.isIE&&!RD(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove("e-input-focus");if(this.scrollFocusStatus)return RD(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove("e-input-focus"),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0,!1,!0,!0),this.hidePopup()),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,AR.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(e,t,i,n,r){e.classList.remove("e-input-focus");var a=t.querySelector(".e-float-text");i&&i.length<=0&&"Auto"===n&&!RD(a)&&(a.classList.contains(nH)&&_P([a],nH),wP([a],rH))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!RD(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}}},{key:"checkPlaceholderSize",value:function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else RD(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)}},{key:"setPlaceholderSize",value:function(e){RD(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":wP([this.searchWrapper],"e-search-custom-width"):RD(this.value)||(this.searchWrapper.removeAttribute("style"),_P([this.searchWrapper],"e-search-custom-width"))}},{key:"refreshInputHight",value:function(){this.value&&this.value.length||!RD(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")}},{key:"validateValues",value:function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())}},{key:"updateValueState",value:function(e,t,i){this.initStatus&&this.validateValues(t||[],i||[])&&(this.trigger("change",{e:e,oldValue:i,value:t,isInteracted:!!e,element:this.element}),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change"))}},{key:"updateTempValue",value:function(){this.tempValues=this.value?this.value.slice():this.value}},{key:"getPagingCount",value:function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))}},{key:"pageUpSelection",value:function(e){var t,i=this.list.querySelectorAll("li.e-list-item:not(."+cH+"):not(.e-reorder-hide)");t=e>=0?i[e+1]:i[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))}},{key:"pageDownSelection",value:function(e){this.getItems();var t,i=this.list.querySelectorAll("li.e-list-item:not(."+cH+"):not(.e-reorder-hide)");t=e<=i.length?i[e-1]:i[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))}},{key:"getItems",value:function(){return this.list||_get(_getPrototypeOf(i.prototype),"render",this).call(this),this.ulElement&&this.ulElement.querySelectorAll(".e-list-item").length>0?this.ulElement.querySelectorAll(".e-list-item:not(."+cH+")"):[]}},{key:"focusInHandler",value:function(e){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!e,event:e}),this.focused=!1),this.overAllWrapper.classList.contains("e-input-focus")||this.overAllWrapper.classList.add("e-input-focus"),function(e,t){e.classList.add("e-input-focus");var i=t.querySelector(".e-float-text");RD(i)||(wP([i],nH),i.classList.contains(rH)&&_P([i],rH))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0)}},{key:"showDelimWrapper",value:function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")}},{key:"hideDelimWrapper",value:function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")}},{key:"expandTextbox",value:function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>e?this.inputElement.value.length:e}},{key:"isPopupOpen",value:function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement}},{key:"refreshPopup",value:function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())}},{key:"checkTextLength",value:function(){return this.targetElement().length<1}},{key:"popupKeyActions",value:function(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}}},{key:"updateAriaAttribute",value:function(){var e=this.list.querySelector(".e-item-focus");RD(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)}},{key:"homeNavigation",value:function(e){this.removeFocus();var t=this.ulElement.querySelectorAll("li.e-list-item:not(."+cH+"):not(.e-reorder-hide)");if(t.length>0){var i=t[e?0:t.length-1];i.classList.add("e-item-focus"),this.scrollBottom(i)}}},{key:"onKeyDown",value:function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124)))if(e.altKey)this.popupKeyActions(e);else{if(this.isPopupOpen()){var t=this.list.querySelector(".e-item-focus");switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add("e-input-focus")}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),this.refreshPopup()}}},{key:"arrowDown",value:function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&(this.list.focus(),OR.add(this.list,"keydown",this.onKeyDown,this)),this.updateAriaAttribute()}},{key:"arrowUp",value:function(e){e.preventDefault(),this.keyAction=!0;var t=this.list.querySelectorAll("li.e-list-item:not(."+cH+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!RD(this.fields.groupBy)&&(t=this.list.querySelectorAll("li.e-list-item,li.e-list-group-item:not(."+cH+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li.e-item-focus");Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering?(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})):this.list.focus(),this.moveByList(-1),this.updateAriaAttribute()}},{key:"spaceKeySelection",value:function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains("e-input-filter")||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()}},{key:"checkBackCommand",value:function(e){this.backCommand=8!==e.keyCode||""!==this.targetElement()}},{key:"keyNavigation",value:function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}}},{key:"selectByKey",value:function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()}},{key:"escapeAction",value:function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()}},{key:"scrollBottom",value:function(e,t){var i=this.list.offsetHeight,n=e.offsetTop+e.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+n-i,a=e.offsetTop+e.offsetHeight-this.list.scrollTop;a=this.fields.groupBy&&!RD(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,0===t?this.list.scrollTop=0:n>i?this.list.scrollTop=r:a>0&&this.list.offsetHeight>a||(this.list.scrollTop=r)}},{key:"scrollTop",value:function(e,t){var i=e.offsetTop-this.list.scrollTop;i=this.fields.groupBy&&!PD(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var n=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:n>0&&this.list.offsetHeight>n||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!PD(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},{key:"selectListByKey",value:function(e){var t,i=this.list.querySelector("li.e-item-focus"),n=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(n-=1),this.isValidLI(i)&&n<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!RD(this.fields.groupBy)&&(t=i.firstElementChild.lastElementChild,this.findGroupStart(t),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&n<this.maximumSelectionLength&&((t=i.firstElementChild.lastElementChild).classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()}},{key:"refreshListItems",value:function(e){var t;(this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData&&(t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList,this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection())}},{key:"removeSelectedChip",value:function(e){var t,i=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==i&&(RD(this.value)||(this.tempValues=this.value.slice()),null!==(t=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(t,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()}},{key:"moveByTop",value:function(e){var t,i=this.list.querySelectorAll("li.e-list-item");i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()}},{key:"moveByList",value:function(e){if(this.list){var t=this.list.querySelectorAll("li.e-list-item:not(."+cH+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!RD(this.fields.groupBy)&&(t=this.list.querySelectorAll("li.e-list-item,li.e-list-group-item:not(."+cH+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li.e-item-focus"),n=-1;if(t.length){for(var r=0;r<t.length;r++)if(t[r]===i){n=r;break}e>0?n<t.length-1&&(this.removeFocus(),this.addListFocus(t[++n]),this.updateCheck(t[n]),this.scrollBottom(t[n],n)):n>0&&(this.removeFocus(),this.addListFocus(t[--n]),this.updateCheck(t[n]),this.scrollTop(t[n],n))}}}},{key:"updateCheck",value:function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!RD(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))}},{key:"moveBy",value:function(e,t){var i,n,r;i=this.chipCollectionWrapper.querySelectorAll("span."+uH),null===(n=this.chipCollectionWrapper.querySelector("span.e-chip-selected"))?e<0&&this.addChipSelection(i[i.length-1],t):e<0?null!==(r=n.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(r,t)):(r=n.nextElementSibling,this.removeChipSelection(),null!==r&&this.addChipSelection(r,t))}},{key:"chipClick",value:function(e){if(this.enabled){var t=MP(e.target,"."+uH);this.removeChipSelection(),this.addChipSelection(t,e)}}},{key:"removeChipSelection",value:function(){this.chipCollectionWrapper&&this.removeChipFocus()}},{key:"addChipSelection",value:function(e,t){wP([e],"e-chip-selected"),this.trigger("chipSelection",t)}},{key:"onChipRemove",value:function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var t=e.target.parentElement.getAttribute("data-value"),i=this.getFormattedValue(t);if(this.allowCustomValue&&("false"!==t&&!1===i||!RD(i)&&"NaN"===i.toString())&&(i=t),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(i,e),RD(this.findListElement(this.list,"li","data-value",i))&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}}},{key:"makeTextBoxEmpty",value:function(){this.inputElement.value="",this.refreshPlaceHolder()}},{key:"refreshPlaceHolder",value:function(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!RD(this.text)&&""!==this.text?"":this.placeholder:this.setFloatLabelType(),this.expandTextbox()}},{key:"removeValue",value:function(e,t,i,n){var r=this,a=this.value.indexOf(this.getFormattedValue(e));-1===a&&this.allowCustomValue&&!RD(e)&&(a=this.value.indexOf(e.toString()));var o=t&&t.target;n=!!(n||o&&o.classList.contains("e-close-hooker"))||null;var s=this.hideSelectedItem?cH:"e-active";if(-1!==a){var l=this.findListElement(this.list,"li","data-value",e),c=this.getDataByValue(e);this.trigger("removing",{e:t,item:l,itemData:c,isInteracted:!!t,cancel:!1},(function(o){if(o.cancel)r.removeIndex++;else{var u=r.value.slice(0);if(u.splice(a,1),r.setProperties({value:[].concat([],u)},!0),null!==l){var h=r.findListElement(r.mainList,"li","data-value",e);l.setAttribute("aria-selected","false"),_P([l],s),h&&(h.setAttribute("aria-selected","false"),_P([l,h],s)),r.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,li:l,e:r,index:a}),r.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,li:l,e:t}),DP(r.inputElement,{"aria-activedescendant":l.id}),r.value&&r.value.length!==r.mainData.length&&"CheckBox"===r.mode&&r.showSelectAll&&r.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,value:"uncheck"})}r.hideSelectedItem&&r.fields.groupBy&&r.hideGroupItem(e),r.updateMainList(!0,e),r.removeChip(e),r.updateChipStatus(),(r.value&&r.value.length?r.value.length:0)<r.maximumSelectionLength&&_P(r.list.querySelectorAll("li.e-list-item:not(.e-active)"),"e-disable"),r.trigger("removed",o);var d=t&&t.currentTarget,p=!(!d||!d.classList.contains("e-selectall-parent"))||null;r.changeOnBlur||n||!t||!i||p||r.updateValueState(t,r.value,r.tempValues),i&&(r.selectAllEventData.push(c),r.selectAllEventEle.push(l)),1===i&&(r.changeOnBlur||r.updateValueState(t,r.value,r.tempValues),r.trigger("selectedAll",{event:t,items:r.selectAllEventEle,itemData:r.selectAllEventData,isInteracted:!!t,isChecked:!1}),r.selectAllEventData=[],r.selectAllEventEle=[]),!n||1!==i&&null!==i||r.clearAllCallback(t,n)}}))}}},{key:"updateMainList",value:function(e,t){if(this.allowFiltering||"CheckBox"===this.mode){var i=this.findListElement(this.mainList,"li","data-value",t);i&&(e?(i.setAttribute("aria-selected","false"),_P([i],this.hideSelectedItem?cH:"e-active"),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","false"),_P([i.firstElementChild.lastElementChild],"e-check"))):(i.setAttribute("aria-selected","true"),wP([i],this.hideSelectedItem?cH:"e-active"),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","true"),wP([i.firstElementChild.lastElementChild],"e-check"))))}}},{key:"removeChip",value:function(e){if(this.chipCollectionWrapper){var t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&IP(t)}}},{key:"setWidth",value:function(e){RD(e)||("number"==typeof e?this.overAllWrapper.style.width=FD(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:FD(e)))}},{key:"updateChipStatus",value:function(){this.value&&this.value.length?(RD(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(RD(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),RD(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())}},{key:"addValue",value:function(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var n=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),n&&(this.addListFocus(n),this.addListSelection(n)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()}},{key:"checkMaxSelection",value:function(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&wP(this.list.querySelectorAll("li.e-list-item:not(.e-active)"),"e-disable")}},{key:"dispatchSelect",value:function(e,t,i,n,r){var a=this;if(this.initStatus&&!n){var o=this.getDataByValue(e);this.trigger("select",{e:t,item:i,itemData:o,isInteracted:!!t,cancel:!1},(function(n){n.cancel||(r&&(a.selectAllEventData.push(o),a.selectAllEventEle.push(i)),1===r&&(a.trigger("selectedAll",{event:t,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!t,isChecked:!0}),a.selectAllEventData=[]),a.updateListSelectEventCallback(e,i,t))}))}}},{key:"addChip",value:function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)}},{key:"removeChipFocus",value:function(){var e,t;if(e=this.chipCollectionWrapper.querySelectorAll("span."+uH),t=this.chipCollectionWrapper.querySelectorAll("span."+"e-chips-close".split(" ")[0]),_P(e,"e-chip-selected"),AR.isDevice)for(var i=0;i<t.length;i++)t[i].style.display="none"}},{key:"onMobileChipInteraction",value:function(e){var t=MP(e.target,"."+uH),i=t.querySelector("span."+"e-chips-close".split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains("e-chip-selected")||(this.removeChipFocus(),i.style.display="",t.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())}},{key:"multiCompiler",value:function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(i){t=!1}return t}},{key:"getChip",value:function(e,t,i){var n=this,r={text:t,value:t},a=this.createElement("span",{className:uH,attrs:{"data-value":t,title:e}}),o=this.createElement("span",{className:"e-chipcontent"}),s=this.createElement("span",{className:"e-chips-close"});if(this.mainData&&(r=this.getDataByValue(t)),this.valueTemplate&&!RD(r)){var l,c=_createForOfIteratorHelper(tP(this.multiCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(r,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate));try{for(c.s();!(l=c.n()).done;){var u=l.value;o.appendChild(u)}}catch(h){c.e(h)}finally{c.f()}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!1,!1,!1)}else this.enableHtmlSanitizer?o.innerText=e:o.innerHTML=e;a.appendChild(o),this.trigger("tagging",{isInteracted:!!i,itemData:r,e:i,setClass:function(e){wP([a],e)},cancel:!1},(function(e){e.cancel||(AR.isDevice?(a.classList.add("e-mob-chip"),AP([s],a),s.style.display="none",OR.add(a,"click",n.onMobileChipInteraction,n)):(OR.add(a,"mousedown",n.chipClick,n),n.showClearButton&&a.appendChild(s)),OR.add(s,"mousedown",n.onChipRemove,n),n.chipCollectionWrapper.appendChild(a),!n.changeOnBlur&&i&&n.updateValueState(i,n.value,n.tempValues))}))}},{key:"calcPopupWidth",value:function(){var e=FD(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e}},{key:"mouseIn",value:function(){this.enabled&&!this.readonly&&this.showOverAllClear()}},{key:"mouseOut",value:function(){this.inputFocus||(this.overAllClear.style.display="none")}},{key:"listOption",value:function(e,t){var i=!RD(t.iconCss),n=RD(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},DD(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:n}),this.listCurrentOptions}},{key:"renderPopup",value:function(){var e=this;this.list||_get(_getPrototypeOf(i.prototype),"render",this).call(this),this.popupObj||this.trigger("beforeOpen",{cancel:!1},(function(t){if(!t.cancel){document.body.appendChild(e.popupWrapper);var i=e.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===e.mode&&!e.allowFiltering&&i&&e.filterParent&&(i.remove(),e.filterParent=null);var n=parseInt(e.popupHeight,10);if(e.popupWrapper.style.visibility="hidden",e.headerTemplate&&(e.setHeaderTemplate(),n-=e.header.offsetHeight),AP([e.list],e.popupWrapper),e.footerTemplate&&(e.setFooterTemplate(),n-=e.footer.offsetHeight),"CheckBox"===e.mode&&e.showSelectAll?(e.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode}),n-=e.selectAllHeight):"CheckBox"!==e.mode||e.showSelectAll||e.headerTemplate&&e.footerTemplate?"CheckBox"!==e.mode||e.showSelectAll||(e.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode}),n=parseInt(e.popupHeight,10),e.headerTemplate&&e.header&&(n-=e.header.offsetHeight),e.footerTemplate&&e.footer&&(n-=e.footer.offsetHeight)):(e.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode}),n=parseInt(e.popupHeight,10)),"CheckBox"===e.mode){var r={module:"CheckBoxSelection",enable:"CheckBox"===e.mode,popupElement:e.popupWrapper};e.allowFiltering&&(e.notify("searchBox",r),n-=e.searchBoxHeight),wP([e.popupWrapper],"e-checkbox")}"auto"!==e.popupHeight?(e.list.style.maxHeight=FD(n),e.popupWrapper.style.maxHeight=FD(e.popupHeight)):e.list.style.maxHeight=FD(e.popupHeight),e.popupObj=new eN(e.popupWrapper,{width:e.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:e.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:e.enableRtl,zIndex:e.zIndex,close:function(){e.popupObj.element.parentElement&&(e.popupObj.unwireScrollEvents(),xP(e.popupObj.element))},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var t=e.list.querySelector("ul");t&&("CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||(e.mainList=t.cloneNode?t.cloneNode(!0):t)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),"CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||e.loadTemplate(),e.setScrollPosition(),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"focus"})},targetExitViewport:function(){AR.isDevice||e.hidePopup()}}),"CheckBox"===e.mode&&AR.isDevice&&e.allowFiltering&&e.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode}),e.popupObj.close(),e.popupWrapper.style.visibility=""}}))}},{key:"setHeaderTemplate",value:function(){this.header&&this.header.remove(),this.header=this.createElement("div"),wP([this.header],"e-ddl-header");for(var e=tP(this.multiCompiler(this.headerTemplate)?document.querySelector(this.headerTemplate).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate),t=0;t<e.length;t++)this.header.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1),"CheckBox"===this.mode&&this.showSelectAll?TP([this.header],this.popupWrapper):AP([this.header],this.popupWrapper),OR.add(this.header,"mousedown",this.onListMouseDown,this)}},{key:"setFooterTemplate",value:function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),wP([this.footer],"e-ddl-footer");for(var e=tP(this.multiCompiler(this.footerTemplate)?document.querySelector(this.footerTemplate).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate),t=0;t<e.length;t++)this.footer.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),AP([this.footer],this.popupWrapper),OR.add(this.footer,"mousedown",this.onListMouseDown,this)}},{key:"ClearAll",value:function(e){var t;if(this.enabled&&!this.readonly)if(this.value&&this.value.length>0){var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length&&(this.removeValue(t,e,null,!0),1);t=this.value[this.removeIndex]);}else this.clearAllCallback(e)}},{key:"clearAllCallback",value:function(e,t){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),this.makeTextBoxEmpty(),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(RD(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),this.changeOnBlur||!t||!RD(this.value)&&0!==this.value.length||this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!RD(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()}},{key:"windowResize",value:function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()}},{key:"resetValueHandler",value:function(e){var t=MP(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}}},{key:"wireEvent",value:function(){OR.add(this.componentWrapper,"mousedown",this.wrapperClick,this),OR.add(window,"resize",this.windowResize,this),OR.add(this.inputElement,"focus",this.focusInHandler,this),OR.add(this.inputElement,"keydown",this.onKeyDown,this),OR.add(this.inputElement,"keyup",this.KeyUp,this),"CheckBox"!==this.mode&&OR.add(this.inputElement,"input",this.onInput,this),OR.add(this.inputElement,"blur",this.onBlur,this),OR.add(this.componentWrapper,"mousemove",this.mouseIn,this);var e=MP(this.inputElement,"form");e&&OR.add(e,"reset",this.resetValueHandler,this),OR.add(this.componentWrapper,"mouseout",this.mouseOut,this),OR.add(this.overAllClear,"mouseup",this.ClearAll,this),OR.add(this.inputElement,"paste",this.pasteHandler,this)}},{key:"onInput",value:function(e){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,AR.isDevice&&"mozilla"===AR.info.name&&this.search(e)}},{key:"pasteHandler",value:function(e){var t=this;setTimeout((function(){t.search(e)}))}},{key:"search",value:function(e){var t=this;if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&8!==e.keyCode)this.focusAtFirstListItem();else{var i=this.targetElement();if(this.keyCode=e.keyCode,this.allowFiltering){var n={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,r){n.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,r))},event:e,cancel:!1};this.trigger("filtering",n,(function(e){e.cancel||t.isFiltered||e.preventDefaultAction||(t.filterAction=!0,t.dataUpdater(t.dataSource,null,t.fields))}))}else if(this.allowCustomValue){var r=new gF;r=""!==i?r.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):r,this.dataUpdater(this.mainData,r,this.fields)}else{var a;a=this.list.querySelectorAll("li.e-list-item:not(.e-hide-listitem)");var o=Gj(this.targetElement(),a,"StartsWith",this.ignoreCase);o&&null!==o.item?(this.addListFocus(o.item),this.list.scrollTop=o.item.offsetHeight*o.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}}},{key:"preRender",value:function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),_get(_getPrototypeOf(i.prototype),"preRender",this).call(this)}},{key:"getLocaleName",value:function(){return"multi-select"}},{key:"initializeData",value:function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0}},{key:"updateData",value:function(e,t){var i,n="",r="Delimiter"===this.mode||"CheckBox"===this.mode,a=[],o=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!RD(this.value))for(var s=0;!RD(this.value[s]);s++)RD(this.findListElement(this.mainList,"li","data-value",this.value[s]))&&!this.allowCustomValue&&this.value.splice(s,1),n+=(i=this.listData?this.getTextByValue(this.value[s]):this.value[s])+e+" ",a.push(i),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[s]+'">'+s+"</option>";this.setProperties({text:a.toString()},!0),r&&(this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",MD("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var l=t&&t.target,c=!(!l||!l.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!c||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=o,this.addValidInputClass()}},{key:"initialTextUpdate",value:function(){if(RD(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],i=0;e.length>i;i++){var n=this.getValueByText(e[i]);RD(n)?this.allowCustomValue&&t.push(e[i]):t.push(n)}t&&t.length&&this.setProperties({value:t},!0)}}},{key:"renderList",value:function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),_get(_getPrototypeOf(i.prototype),"render",this).call(this,e),this.unwireListEvents(),this.wireListEvents()}},{key:"initialValueUpdate",value:function(){if(this.list){var e,t,i;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!RD(this.value))for(var n=0;!RD(this.value[n]);n++)if(i=this.value[n],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){var r=this.listData.length,a={};AD(this.fields.text,i,a),AD(this.fields.value,i,a);var o=this.popupWrapper.querySelector(".e-nodata");this.addItem(a,r),this.popupWrapper.contains(o)&&(this.list.setAttribute("style",o.getAttribute("style")),this.popupWrapper.replaceChild(this.list,o),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!RD(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}}},{key:"updateActionCompleteData",value:function(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,wP([e],cH))}},{key:"updateAddItemList",value:function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&e&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),IP(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup())}},{key:"updateDataList",value:function(){this.mainList&&this.ulElement&&this.mainList.childElementCount<this.ulElement.childElementCount&&(this.mainList=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement)}},{key:"isValidLI",value:function(e){return e&&!e.classList.contains("e-disabled")&&!e.classList.contains("e-list-group-item")&&e.classList.contains("e-list-item")}},{key:"updateListSelection",value:function(e,t,i){var n=e.getAttribute("data-value"),r=this.getFormattedValue(n);this.allowCustomValue&&("false"!==n&&!1===r||!RD(r)&&"NaN"===r.toString())&&(r=n),this.getTextByValue(r),this.removeHover(),this.value&&-1!==this.value.indexOf(r)?this.removeValue(r,t,i):this.dispatchSelect(r,t,e,"true"===e.getAttribute("aria-selected"),i)}},{key:"updateListSelectEventCallback",value:function(e,t,i){var n=this,r=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,r,i);else{var a=t.cloneNode(!0),o=this.getDataByValue(e);this.trigger("customValueSelection",{newData:o,cancel:!1},(function(t){t.cancel||(AP([a],n.mainList),n.mainData.push(o),n.remoteCustomValue=!1,n.addValue(e,r,i))}))}this.value.length===this.maximumSelectionLength&&(this.updatedataValueItems(i),this.checkPlaceholderSize())}},{key:"removeListSelection",value:function(){var e=this.hideSelectedItem?cH:"e-active",t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(_P(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!RD(this.mainList)){var n=this.mainList.querySelectorAll("."+e),r=n.length;if(n&&n.length)for(_P(n,e);r>0;)n[r-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>r-1&&(t[r-1].firstElementChild.setAttribute("aria-checked","false"),_P([t[r-1].firstElementChild.lastElementChild],"e-check")),n[r-1].firstElementChild.setAttribute("aria-checked","false"),_P([n[r-1].firstElementChild.lastElementChild],"e-check")),r--}}},{key:"removeHover",value:function(){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&_P(e,"e-hover")}},{key:"removeFocus",value:function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll(".e-item-focus"),t=this.mainList.querySelectorAll(".e-item-focus");e&&e.length&&(_P(e,"e-item-focus"),_P(t,"e-item-focus"))}}},{key:"addListHover",value:function(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!RD(this.fields.groupBy))&&(this.removeHover(),wP([e],"e-hover"))}},{key:"addListFocus",value:function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),wP([e],"e-item-focus")):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!RD(this.fields.groupBy)&&wP([e],"e-item-focus")}},{key:"addListSelection",value:function(e){var t=this.hideSelectedItem?cH:"e-active";if(this.isValidLI(e)&&!e.classList.contains("e-hover")){if(wP([e],t),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var i=e.firstElementChild.getAttribute("aria-checked");("false"===i||RD(i))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),null!==this.chipCollectionWrapper&&this.removeChipSelection(),DP(this.inputElement,{"aria-activedescendant":e.id})}}},{key:"updateDelimeter",value:function(e,t){this.updateData(e,t)}},{key:"onMouseClick",value:function(e){this.scrollFocusStatus=!1;var t=e.target,i=MP(t,".e-list-item");if(MP(t,".e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(t=t.classList.contains("e-list-group-item")?t.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),t.classList.remove("e-check"),t.classList.remove("e-stop"),MP(t,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),t.classList.remove("e-stop"),t.classList.add("e-check"),MP(t,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(i)){var n=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(n-=1),n<this.maximumSelectionLength&&(this.updateListSelection(i,e),this.checkPlaceholderSize(),this.addListFocus(i),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?("CheckBox"!==this.mode&&this.focusAtLastListItem(i.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(t)}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(RD(i)?null:i.textContent),this.refreshPlaceHolder(),this.deselectHeader()}}},{key:"findGroupStart",value:function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!RD(this.fields.groupBy)){var t;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),t=this.findGroupAttrtibutes(e,0,0,0,0),t=this.findGroupAttrtibutes(e,t[0],t[1],t[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,t[0],t[1],t[2])}}},{key:"findGroupAttrtibutes",value:function(e,t,i,n,r){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,n++,null!=(e=r?e.nextElementSibling:e.previousElementSibling)););return[t,i,n]}},{key:"updateCheckBox",value:function(e,t,i,n){if(null!==e){var r=e.getElementsByClassName("e-frame")[0];n===t?(r.classList.remove("e-stop"),r.classList.add("e-check"),MP(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):n===i?(r.classList.remove("e-check"),r.classList.remove("e-stop"),MP(r,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(r.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),MP(r,".e-list-group-item").classList.add("e-active"),r.classList.add("e-check")):(r.classList.remove("e-check"),r.classList.add("e-stop"),MP(r,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}}},{key:"deselectHeader",value:function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&_P(t,"e-disable"),e===this.maximumSelectionLength&&wP(t,"e-disable")}},{key:"onMouseOver",value:function(e){var t=MP(e.target,".e-list-item");null===t&&"CheckBox"===this.mode&&!RD(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=MP(e.target,".e-list-group-item")),this.addListHover(t)}},{key:"onMouseLeave",value:function(e){this.removeHover()}},{key:"onListMouseDown",value:function(e){e.preventDefault(),this.scrollFocusStatus=!0}},{key:"onDocumentClick",value:function(e){if("CheckBox"!==this.mode){var t=e.target;this.scrollFocusStatus=!!(!RD(this.popupObj)&&MP(t,"#"+this.popupObj.element.id)||this.overAllWrapper.contains(e.target))&&(AR.isIE||"edge"===AR.info.name)&&document.activeElement===this.inputElement}}},{key:"wireListEvents",value:function(){OR.add(document,"mousedown",this.onDocumentClick,this),OR.add(this.list,"mousedown",this.onListMouseDown,this),OR.add(this.list,"mouseup",this.onMouseClick,this),OR.add(this.list,"mouseover",this.onMouseOver,this),OR.add(this.list,"mouseout",this.onMouseLeave,this)}},{key:"unwireListEvents",value:function(){OR.remove(document,"mousedown",this.onDocumentClick),this.list&&(OR.remove(this.list,"mousedown",this.onListMouseDown),OR.remove(this.list,"mouseup",this.onMouseClick),OR.remove(this.list,"mouseover",this.onMouseOver),OR.remove(this.list,"mouseout",this.onMouseLeave))}},{key:"hideOverAllClear",value:function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")}},{key:"showOverAllClear",value:function(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"}},{key:"focusIn",value:function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()}},{key:"focusOut",value:function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()}},{key:"showSpinner",value:function(){RD(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),iF({target:this.spinnerElement,width:AR.isDevice?"16px":"14px"},this.createElement),wP([this.spinnerElement],"e-ddl-disable-icon"),dF(this.spinnerElement))}},{key:"hideSpinner",value:function(){RD(this.spinnerElement)||(fF(this.spinnerElement),_P([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?xP(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)}},{key:"updateWrapperText",value:function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=t:e.innerText=HM.sanitize(t)}},{key:"updateDelimView",value:function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total"),this.value&&this.value.length){var e,t,i,n,r,a="",o=1,s=0;this.updateWrapperText(this.viewWrapper,a);var l=new PM(this.getLocaleName(),{},this.locale);""===l.getConstant("actionFailureTemplate")&&(l=new PM("dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},this.locale));var c=l.getConstant("overflowCountTemplate"),u=this.createElement("span",{className:"e-remain"}),h=tP(c),d=tP(l.getConstant("totalCountTemplate"));u.appendChild(h({count:this.value.length},this,"overflowCountTemplate",null,!this.isStringTemplate)[0]),this.viewWrapper.appendChild(u);var p=u.offsetWidth;if(IP(u),this.showDropDownIcon&&(s=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),!RD(this.value))for(var f=0;!RD(this.value[f]);f++){if(a+=0===f?"":this.delimiterChar+" ",a+=e=this.getOverflowVal(f),e=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,a),(i=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10))+s>(r=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10))){for(void 0!==t&&""!==t&&(e=t,f=o+1),this.updateWrapperText(this.viewWrapper,e),n=this.value.length-f,i=this.viewWrapper.offsetWidth;i+p+s>r&&0!==i&&""!==this.viewWrapper.innerHTML;){var v=this.viewWrapper.innerHTML.split(this.delimiterChar);v.pop(),this.viewWrapper.innerHTML=v.join(this.delimiterChar),""===this.viewWrapper.innerHTML&&n++,i=this.viewWrapper.offsetWidth}break}i+p+s<=r?(t=a,o=f):0===f&&(t="",o=-1)}if(n>0){var m=r-s;this.viewWrapper.appendChild(this.updateRemainTemplate(u,this.viewWrapper,n,h,d,m)),this.updateRemainWidth(this.viewWrapper,m),this.updateRemainingText(u,s,n,h,d)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"}},{key:"updateRemainWidth",value:function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")}},{key:"updateRemainTemplate",value:function(e,t,i,n,r,a){return t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",e.appendChild(t.firstChild&&3===t.firstChild.nodeType?n({count:i},this,"overflowCountTemplate",null,!this.isStringTemplate)[0]:r({count:i},this,"totalCountTemplate",null,!this.isStringTemplate)[0]),t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,a)),e}},{key:"updateRemainingText",value:function(e,t,i,n,r){var a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(o+t>=a&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;o+t>a&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var s=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);s.pop(),this.viewWrapper.firstChild.nodeValue=s.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,o=this.viewWrapper.offsetWidth}this.updateRemainTemplate(e,this.viewWrapper,i,n,r,a-t)}}},{key:"getOverflowVal",value:function(e){var t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t}},{key:"unWireEvent",value:function(){OR.remove(this.componentWrapper,"mousedown",this.wrapperClick),OR.remove(window,"resize",this.windowResize),OR.remove(this.inputElement,"focus",this.focusInHandler),OR.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&OR.remove(this.inputElement,"input",this.onInput),OR.remove(this.inputElement,"keyup",this.KeyUp);var e=MP(this.inputElement,"form");e&&OR.remove(e,"reset",this.resetValueHandler),OR.remove(this.inputElement,"blur",this.onBlur),OR.remove(this.componentWrapper,"mousemove",this.mouseIn),OR.remove(this.componentWrapper,"mouseout",this.mouseOut),OR.remove(this.overAllClear,"mousedown",this.ClearAll),OR.remove(this.inputElement,"paste",this.pasteHandler)}},{key:"selectAllItem",value:function(e,t,i){var n;if(n=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&this.isPopupOpen()&&t&&t.target&&MP(t.target,".e-close-hooker")&&this.allowFiltering&&(n=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!RD(this.fields.groupBy)){var r=t?t.target:null;if((r=(r=t&&32===t.keyCode?i:r)&&r.classList.contains("e-frame")?r.parentElement.parentElement:r)&&r.classList.contains("e-list-group-item")){var a=r.nextElementSibling;if(RD(a))return;for(;a.classList.contains("e-list-item");){if(e){if(!a.firstElementChild.lastElementChild.classList.contains("e-check")){var o=this.value&&this.value.length?this.value.length:0;a.classList.contains("e-active")&&(o-=1),o<this.maximumSelectionLength&&this.updateListSelection(a,t)}}else a.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(a,t);if(null==(a=a.nextElementSibling))break}if(r.classList.contains("e-list-group-item")){var s=this.list.getElementsByClassName("e-item-focus")[0];s&&s.classList.remove("e-item-focus"),e?r.classList.add("e-active"):r.classList.remove("e-active"),r.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,n,e)}else this.updateValue(t,n,e)}},{key:"updateValue",value:function(e,t,i){var n=this,r=t.length;if(t&&t.length){var a,o=0;for(a=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength;o<r&&o<=50&&o<a;)this.updateListSelection(t[o],e,r-o),this.findGroupStart(t[o]),o++;r>50&&setTimeout((function(){for(;o<r&&o<a;)n.updateListSelection(t[o],e,r-o),n.findGroupStart(t[o]),o++;n.updatedataValueItems(e)}),0)}this.updatedataValueItems(e),this.checkPlaceholderSize()}},{key:"updatedataValueItems",value:function(e){this.deselectHeader(),this.textboxValueUpdate(e)}},{key:"textboxValueUpdate",value:function(e){"Box"===this.mode||this.isPopupOpen()?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()}},{key:"setZIndex",value:function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})}},{key:"updateDataSource",value:function(e){RD(this.list)?this.renderPopup():this.resetList(this.dataSource),!this.value||!this.value.length||(this.setProperties({value:this.value}),this.refreshSelection())}},{key:"onLoadSelect",value:function(){this.setDynValue=!0,this.renderPopup()}},{key:"selectAllItems",value:function(e,t){var n=this;RD(this.list)?(this.selectAllAction=function(){"CheckBox"===n.mode&&n.showSelectAll&&n.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:e?"check":"uncheck"}),n.selectAllItem(e,t),n.selectAllAction=null},_get(_getPrototypeOf(i.prototype),"render",this).call(this)):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(e,t))}},{key:"getPersistData",value:function(){return this.addOnPersist(["value"])}},{key:"onPropertyChanged",value:function(e,t){(e.dataSource&&!RD(Object.keys(e.dataSource))||e.query&&!RD(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];switch(a){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(RD(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,t.value,"value"),this.addValidInputClass();break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(e.enableRtl),_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,e,t);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:var o;o=this.getPropObject(a,e,t),_get(_getPrototypeOf(i.prototype),"onPropertyChanged",this).call(this,o.newProperty,o.oldProperty)}}}},{key:"reInitializePoup",value:function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()}},{key:"updateVal",value:function(e,t,i){this.list?this.inputFocus||("text"===i&&(this.initialTextUpdate(),e=this.value),(RD(this.value)||0===this.value.length)&&(this.tempValues=t),this.initialValueUpdate(),"Box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()):this.onLoadSelect(),this.changeOnBlur||this.updateValueState(null,e,t)}},{key:"addItem",value:function(e,t){_get(_getPrototypeOf(i.prototype),"addItem",this).call(this,e,t)}},{key:"hidePopup",value:function(){var e=this;this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100}},(function(t){t.cancel||(e.beforePopupOpen=!1,e.overAllWrapper.classList.remove("e-icon-anim"),e.popupObj.hide(new oM(t.animation)),DP(e.inputElement,{"aria-expanded":"false"}),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"clear"}),e.popupObj.hide(),_P([document.body,e.popupObj.element],"e-popup-full-page"),OR.remove(e.list,"keydown",e.onKeyDown))}))}},{key:"showPopup",value:function(){if(this.enabled){if(!this.ulElement)return this.beforePopupOpen=!0,_get(_getPrototypeOf(i.prototype),"render",this).call(this),void("CheckBox"===this.mode&&AR.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}));"CheckBox"===this.mode&&AR.isDevice&&this.allowFiltering&&this.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode});var e=this.ulElement.querySelectorAll("li.e-list-item").length,t=this.ulElement.querySelectorAll("li.e-list-item."+cH).length;e>0&&e===t&&t===this.mainData.length?this.beforePopupOpen=!1:this.onPopupShown()}}},{key:"selectAll",value:function(e){this.isSelectAll=!0,this.selectAllItems(e)}},{key:"getModuleName",value:function(){return"multiselect"}},{key:"clear",value:function(){this.selectAll(!1),this.setProperties({value:null},!0)}},{key:"render",value:function(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&wP([this.overAllWrapper],"e-checkbox"),AR.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",MD("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",MD("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!AR.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?aH(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):MD("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.renderComplete()}},{key:"checkInitialValue",value:function(){var e=this,t=this.dataSource instanceof Array?this.dataSource.length>0:!RD(this.dataSource);if((!this.value||!this.value.length)&&RD(this.text)&&!t&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var i=this.element.options,n=[],r="",a=0,o=i.length;a<o;a++){var s=i[a];RD(s.getAttribute("selected"))||(s.getAttribute("value")?n.push(s.getAttribute("value")):r+=s.text+this.delimiterChar)}n.length>0?this.setProperties({value:n},!0):""!==r&&this.setProperties({text:r},!0),(n.length>0||""!==r)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!RD(this.text))&&this.renderPopup(),RD(this.text)||!RD(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof TF?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),RD(this.text)||this.element.setAttribute("data-initial-value",this.text)}},{key:"checkAutoFocus",value:function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()}},{key:"setFloatLabelType",value:function(){var e,t,i,n,r,a,o,s,l;e=this.overAllWrapper,t=this.componentWrapper,i=this.searchWrapper,n=this.inputElement,r=this.value,a=this.placeholder,s=t.querySelector(".e-float-text"),l=t.querySelector(".e-float-line"),RD(s)?oH(r,n,o=null!==a?a:""):(o=s.innerText,xP(i.querySelector(".e-float-text")),oH(r,n,o),RD(l)||xP(i.querySelector(".e-float-line"))),e.classList.remove("e-float-input"),"Never"!==this.floatLabelType&&aH(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)}},{key:"addValidInputClass",value:function(){!RD(this.value)&&this.value.length||"Always"===this.floatLabelType?wP([this.overAllWrapper],"e-valid-input"):_P([this.overAllWrapper],"e-valid-input")}},{key:"dropDownIcon",value:function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),wP([this.componentWrapper],["e-down-icon"])):RD(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),_P([this.componentWrapper],["e-down-icon"]))}},{key:"initialUpdate",value:function(){"Box"!==this.mode&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()}},{key:"destroy",value:function(){this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,_get(_getPrototypeOf(i.prototype),"destroy",this).call(this);for(var e=["readonly","aria-disabled","aria-placeholder","placeholder"],t=e.length;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),IP(this.overAllWrapper))}}]),i}(Zj),lH([ZP({text:null,value:null,iconCss:null,groupBy:null},Qj)],sH.prototype,"fields",void 0),lH([QP(!1)],sH.prototype,"enablePersistence",void 0),lH([QP(null)],sH.prototype,"groupTemplate",void 0),lH([QP("No records found")],sH.prototype,"noRecordsTemplate",void 0),lH([QP("Request failed")],sH.prototype,"actionFailureTemplate",void 0),lH([QP("None")],sH.prototype,"sortOrder",void 0),lH([QP(!0)],sH.prototype,"enabled",void 0),lH([QP(!1)],sH.prototype,"enableHtmlSanitizer",void 0),lH([QP([])],sH.prototype,"dataSource",void 0),lH([QP(null)],sH.prototype,"query",void 0),lH([QP("StartsWith")],sH.prototype,"filterType",void 0),lH([QP(1e3)],sH.prototype,"zIndex",void 0),lH([QP(!1)],sH.prototype,"ignoreAccent",void 0),lH([QP()],sH.prototype,"locale",void 0),lH([QP(!1)],sH.prototype,"enableGroupCheckBox",void 0),lH([QP(null)],sH.prototype,"cssClass",void 0),lH([QP("100%")],sH.prototype,"width",void 0),lH([QP("300px")],sH.prototype,"popupHeight",void 0),lH([QP("100%")],sH.prototype,"popupWidth",void 0),lH([QP(null)],sH.prototype,"placeholder",void 0),lH([QP(null)],sH.prototype,"filterBarPlaceholder",void 0),lH([QP({})],sH.prototype,"htmlAttributes",void 0),lH([QP(null)],sH.prototype,"valueTemplate",void 0),lH([QP(null)],sH.prototype,"headerTemplate",void 0),lH([QP(null)],sH.prototype,"footerTemplate",void 0),lH([QP(null)],sH.prototype,"itemTemplate",void 0),lH([QP(null)],sH.prototype,"allowFiltering",void 0),lH([QP(!0)],sH.prototype,"changeOnBlur",void 0),lH([QP(!1)],sH.prototype,"allowCustomValue",void 0),lH([QP(!0)],sH.prototype,"showClearButton",void 0),lH([QP(1e3)],sH.prototype,"maximumSelectionLength",void 0),lH([QP(!1)],sH.prototype,"readonly",void 0),lH([QP(null)],sH.prototype,"text",void 0),lH([QP(null)],sH.prototype,"value",void 0),lH([QP(!0)],sH.prototype,"hideSelectedItem",void 0),lH([QP(!0)],sH.prototype,"closePopupOnSelect",void 0),lH([QP("Default")],sH.prototype,"mode",void 0),lH([QP(",")],sH.prototype,"delimiterChar",void 0),lH([QP(!0)],sH.prototype,"ignoreCase",void 0),lH([QP(!1)],sH.prototype,"showDropDownIcon",void 0),lH([QP("Never")],sH.prototype,"floatLabelType",void 0),lH([QP(!1)],sH.prototype,"showSelectAll",void 0),lH([QP("Select All")],sH.prototype,"selectAllText",void 0),lH([QP("Unselect All")],sH.prototype,"unSelectAllText",void 0),lH([QP(!0)],sH.prototype,"enableSelectionOrder",void 0),lH([QP(!0)],sH.prototype,"openOnClick",void 0),lH([eM()],sH.prototype,"change",void 0),lH([eM()],sH.prototype,"removing",void 0),lH([eM()],sH.prototype,"removed",void 0),lH([eM()],sH.prototype,"selectedAll",void 0),lH([eM()],sH.prototype,"beforeOpen",void 0),lH([eM()],sH.prototype,"open",void 0),lH([eM()],sH.prototype,"close",void 0),lH([eM()],sH.prototype,"blur",void 0),lH([eM()],sH.prototype,"focus",void 0),lH([eM()],sH.prototype,"chipSelection",void 0),lH([eM()],sH.prototype,"filtering",void 0),lH([eM()],sH.prototype,"tagging",void 0),lH([eM()],sH.prototype,"customValueSelection",void 0),sH=lH([tM],sH)),dH="data-ready",pH="scroll-ui-update";function fH(e,t){var i,n=CP("div",{className:t}).cloneNode();return n.style.visibility="hidden",n.style.position="absolute",e.appendChild(n),i=n.getBoundingClientRect().height,IP(n),i}function vH(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function mH(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function gH(e){var t=new Date(e.getFullYear(),0,1).valueOf(),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf();return Math.ceil((i-t+864e5)/864e5/7)}function yH(e,t){var i=e.getTimezoneOffset(),n=new Date(e.getTime()+t),r=n.getTimezoneOffset()-i;return e.setTime(n.getTime()+6e4*r),e}function bH(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function kH(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function CH(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function wH(e,t){var i,n=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,(i=e,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),e}function _H(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var r=new Date(e.getTime());return 0===i.getHours()?r=CH(r,1):(r.setHours(i.getHours()),r.setMinutes(i.getMinutes()),r.setSeconds(i.getSeconds())),{startHour:n,endHour:r}}function SH(e,t){var i=bH(new Date(e)),n=bH(new Date(t));return Math.round((n.getTime()-i.getTime())/864e5)}function EH(e){return-1!==e.indexOf("Date")?new Date(parseInt(e.match(/\d+/g).toString(),10)):-1!==e.indexOf("T")?new Date(e):new Date(e.replace(/-/g,"/"))}var TH=null;function AH(){if(null!==TH)return TH;var e,t=CP("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),TH=e}function OH(e,t,i,n,r){for(var a=0,o=e.length;a<o;a++)if(e[a][t]===i){if(!n)return a;var s=r.slice(-2)[0].field;if((n[s]instanceof Array?n[s]:[n[s]]).join(",").includes(e[a][r.slice(-1)[0].groupIDField]))return a}return-1}function xH(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function IH(e){var t,i=_createForOfIteratorHelper([].slice.call(e.children));try{for(i.s();!(t=i.n()).done;){var n=t.value;n.classList.contains("blazor-template")||e.removeChild(n)}}catch(r){i.e(r)}finally{i.f()}}function DH(e,t){return e}function RH(e,t){switch(t){case"multiple":e=e.split(" ").map((function(e){return e.charAt(0).toLocaleUpperCase()+e.substring(1)})).join(" ");break;case"single":if(e[0]>="0"&&e[0]<="9"){var i=e.match(/[a-zA-Z]/);e=RD(i)?e:e.slice(0,i.index)+e[i.index].toLocaleUpperCase()+e.slice(i.index+1)}e=e[0].toLocaleUpperCase()+e.slice(1)}return e}var PH="e-schedule-resource-toolbar-container",MH="e-text-ellipsis",LH="e-schedule-form",NH=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}return _createClass(e,[{key:"addEventListener",value:function(){this.parent.on("document-click",this.closeHeaderPopup,this)}},{key:"removeEventListener",value:function(){this.parent.off("document-click",this.closeHeaderPopup)}},{key:"closeHeaderPopup",value:function(e){RD(MP(e.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected"))&&this.hideHeaderPopup()}},{key:"hideHeaderPopup",value:function(){this.headerPopup&&this.headerPopup.hide()}},{key:"renderHeader",value:function(){this.element=CP("div",{className:"e-schedule-toolbar-container"});var e=CP("div",{className:"e-schedule-toolbar"});this.element.appendChild(e),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()}},{key:"renderToolbar",value:function(){var e={requestType:"toolbarItemRendering",items:this.getItems()};this.parent.trigger("actionBegin",e),this.toolbarObj=new ij({items:e.items,overflowMode:"Popup",clicked:this.toolbarClickHandler.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.toolbarObj.isStringTemplate=!0,this.toolbarObj.appendTo(this.parent.element.querySelector(".e-schedule-toolbar"));var t=this.toolbarObj.element.querySelector(".e-prev");t&&t.firstElementChild.setAttribute("title",this.l10n.getConstant("previous"));var i=this.toolbarObj.element.querySelector(".e-next");i&&i.firstElementChild.setAttribute("title",this.l10n.getConstant("next")),this.updateActiveView(),this.parent.trigger("actionComplete",{requestType:"toolBarItemRendered",items:this.toolbarObj.items})}},{key:"updateItems",value:function(){if(this.toolbarObj){var e={requestType:"toolbarItemRendering",items:this.getItems()};this.parent.trigger("actionBegin",e),this.toolbarObj.items=e.items,this.toolbarObj.dataBind(),this.parent.trigger("actionComplete",{requestType:"toolBarItemRendered",items:this.toolbarObj.items})}}},{key:"getPopUpRelativeElement",value:function(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")}},{key:"setDayOfWeek",value:function(e){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=e,this.headerCalendar.dataBind())}},{key:"setCalendarDate",value:function(e){this.headerCalendar&&(this.headerCalendar.value=e,this.headerCalendar.dataBind())}},{key:"setCalendarMinMaxDate",value:function(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())}},{key:"getCalendarView",value:function(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"}},{key:"setCalendarView",value:function(){if(this.headerCalendar){var e=this.getCalendarView();this.headerCalendar.depth=e,this.headerCalendar.start=e,this.headerCalendar.refresh()}}},{key:"updateActiveView",value:function(){var e=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));_P(e,["e-active-view"]),e.length>0&&e[this.parent.viewIndex]&&wP([e[this.parent.viewIndex]],["e-active-view"])}},{key:"updateDateRange",value:function(e){var t=this.toolbarObj.element.querySelector(".e-date-range");t&&(t.setAttribute("aria-label",e),t.querySelector(".e-tbar-btn-text").innerHTML=e,this.toolbarObj.refreshOverflow())}},{key:"getDateRangeText",value:function(){return RH(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}},{key:"getItems",value:function(){var e=[],t=this.parent.isAdaptive;if(e.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{"aria-label":"previous period",role:"navigation"}}),e.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{"aria-label":"next period",role:"navigation"}}),e.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive","aria-label":"title",role:"navigation"}}),this.parent.isAdaptive?(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&e.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1){var i,n=_createForOfIteratorHelper(this.parent.views);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.push(this.getItemObject(r))}}catch(a){n.e(a)}finally{n.f()}}return e}},{key:"getItemObject",value:function(e){var t,i,n;"string"==typeof e?(t=e.toLowerCase(),i=null):(t=e.option.toLowerCase(),i=e.displayName);var r=this.parent.isAdaptive;switch(t){case"day":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-day",text:i||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-week",text:i||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-workweek",text:i||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-month",text:i||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"year":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-year",text:i||this.l10n.getConstant("year"),cssClass:"e-views e-year"};break;case"agenda":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-agenda",text:this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-month-agenda",text:this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-day",text:i||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-week",text:i||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-workweek",text:i||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-month",text:i||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":n={align:"Right",showAlwaysInPopup:r,prefixIcon:"e-icon-timeline-year-"+("Vertical"===e.orientation?"vertical":"horizontal"),text:i||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"}}return n}},{key:"renderHeaderPopup",value:function(){var e=CP("div",{className:"e-header-popup"}),t=CP("div",{className:"e-header-calendar"});e.appendChild(t),this.element.appendChild(e),this.headerPopup=new eN(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl}),this.headerPopup.isStringTemplate=!0;var i=this.getCalendarView();this.headerCalendar=new Aj({value:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:i,start:i,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.headerCalendar.isStringTemplate=!0,this.headerCalendar.appendTo(t),this.headerPopup.hide()}},{key:"calendarChange",value:function(e){e.value.getTime()!==this.parent.selectedDate.getTime()&&this.parent.changeDate(e.value),this.headerPopup.hide()}},{key:"calculateViewIndex",value:function(e){var t=MP(e.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(t)}},{key:"toolbarClickHandler",value:function(e){if(e.item){switch(e.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains("e-popup-open")?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-week":this.parent.changeView("Week",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-work-week":this.parent.changeView("WorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month":this.parent.changeView("Month",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-year":this.parent.changeView("Year",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-agenda":this.parent.changeView("Agenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-day":this.parent.changeView("TimelineDay",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-year":this.parent.changeView("TimelineYear",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-today":this.parent.isSelectedDate(bH(this.parent.getCurrentTime()))||this.parent.changeDate(bH(this.parent.getCurrentTime()),e.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e.originalEvent);break;case"e-add":var t,i=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime();if(this.parent.activeCellsData&&!i)t=this.parent.activeCellsData;else{var n=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,r=new Date(this.parent.selectedDate.getTime()),a=this.parent.getCurrentTime();r.setHours(a.getHours(),Math.round(r.getMinutes()/n)*n,0);var o=new Date(new Date(r.getTime()).setMilliseconds(r.getMilliseconds()+n));t={startTime:r,endTime:o,isAllDay:!1}}this.parent.eventWindow.openEditor(DD(t,{cancel:!1,event:e.originalEvent}),"Add")}var s=this.toolbarObj.element.querySelector(".e-toolbar-pop");s&&"Input"!==e.item.type&&s.ej2_instances[0].hide({name:"SlideUp",duration:100})}}},{key:"getHeaderElement",value:function(){return this.toolbarObj.element}},{key:"updateHeaderItems",value:function(e){var t=this.toolbarObj.element.querySelector(".e-prev"),i=this.toolbarObj.element.querySelector(".e-next"),n=this.toolbarObj.element.querySelector(".e-date-range");t&&("add"===e?wP([t],"e-hidden"):_P([t],"e-hidden")),i&&("add"===e?wP([i],"e-hidden"):_P([i],"e-hidden")),n&&("add"===e?wP([n],MH):_P([n],MH))}},{key:"previousNextIconHandler",value:function(){var e,t=this.parent.getCurrentViewDates(),i=this.toolbarObj.element.querySelector(".e-prev"),n=this.toolbarObj.element.querySelector(".e-next"),r=new Date(t[0].getTime()),a=new Date(t[t.length-1].getTime());"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView||(a=CH(r=vH(bH(this.parent.selectedDate),this.parent.firstDayOfWeek),7*this.parent.activeViewOptions.interval)),"Month"===this.parent.currentView&&(e=this.parent.selectedDate,a=mH(wH(r=new Date(e.getFullYear(),e.getMonth()),this.parent.activeViewOptions.interval-1))),RD(i)||this.toolbarObj.enableItems(i,r>this.parent.minDate),RD(n)||this.toolbarObj.enableItems(n,a<this.parent.maxDate),this.setCalendarMinMaxDate()}},{key:"getModuleName",value:function(){return"headerbar"}},{key:"destroy",value:function(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),IP(this.element),this.toolbarObj=null)}}]),e}(),FH=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.addEventListener()}return _createClass(e,[{key:"getModuleName",value:function(){return"scroll"}},{key:"setWidth",value:function(){this.parent.element.style.width=FD(this.parent.width)}},{key:"setHeight",value:function(){this.parent.element.style.height=FD(this.parent.height)}},{key:"addEventListener",value:function(){this.parent.on("content-ready",this.setDimensions,this),this.parent.on("ui-update",this.onPropertyChanged,this)}},{key:"removeEventListener",value:function(){this.parent.off("content-ready",this.setDimensions),this.parent.off("ui-update",this.onPropertyChanged)}},{key:"setDimensions",value:function(){this.setWidth(),this.setHeight();var e={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(pH,e)}},{key:"onPropertyChanged",value:function(e){this.setDimensions()}},{key:"destroy",value:function(){this.removeEventListener()}}]),e}(),BH=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.element=this.parent.element.querySelector(".e-table-container"),this.touchObj=new FM(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),OR.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}return _createClass(e,[{key:"scrollHandler",value:function(e){if(!("Agenda"===this.parent.currentView||this.parent.uiStateValues.action||e.originalEvent&&(e.originalEvent.target.classList.contains("e-appointment")||MP(e.originalEvent.target,".e-appointment")))){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains("e-translate")&&this.onTransitionEnd(),"Left"===e.scrollDirection||"Right"===e.scrollDirection){var t={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};if(this.parent.trigger("actionBegin",t),t.cancel)return;var i=this.element.querySelector(".e-content-wrap");if(i&&i.scrollWidth>i.clientWidth)return;this.isScrollTriggered=!0,e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}if(e.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel("e-next-panel","next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.nextPanel.element));var n=this.parent.enableRtl?e.distanceX:-e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+n)+"px)"}else if(e.scrollDirection===this.touchRightDirection){var r=0;this.previousPanel||(this.renderPanel("e-previous-panel","previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.previousPanel.element),r=this.previousPanel.element.offsetWidth);var a=this.parent.enableRtl?r-e.distanceX:-r+e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+a)+"px)"}}}},{key:"swipeHandler",value:function(e){if(this.isScrollTriggered&&!this.parent.uiStateValues.action){this.isScrollTriggered=!1;var t="Left"===e.swipeDirection?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if("Left"===e.swipeDirection&&t<this.parent.maxDate||"Right"===e.swipeDirection&&t>=this.parent.minDate){var i=Date.now()-this.timeStampStart,n=e.distanceX*(AR.isDevice?6:1.66);n>i||e.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(e.swipeDirection),n>i&&e.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=n/i/10+"s"),this.confirmSwipe(e.swipeDirection)):this.cancelSwipe(),this.parent.trigger("actionComplete",{requestType:"dateNavigate",cancel:!1,event:e.originalEvent})}else this.cancelSwipe();this.timeStampStart=null}}},{key:"tapHoldHandler",value:function(e){RD(MP(e.originalEvent.target,".e-appointment"))||!this.parent.isAdaptive||this.parent.quickPopup.tapHoldEventPopup(e.originalEvent)}},{key:"renderPanel",value:function(e,t){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(t)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(e)}},{key:"swapPanels",value:function(e){if(e===this.touchLeftDirection){var t=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=t}else{var i=this.previousPanel;this.previousPanel=this.currentPanel,this.currentPanel=i}}},{key:"confirmSwipe",value:function(e){var t=this;this.parent.trigger("navigating",{action:"date",cancel:!1,previousDate:e===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate},(function(i){var n;i.cancel?(t.swapPanels(e),t.cancelSwipe()):(t.parent.activeView.setPanel(t.currentPanel.element),t.parent.setProperties({selectedDate:t.currentPanel.selectedDate},!0),n=t.parent.enableRtl?e===t.touchLeftDirection?t.previousPanel?t.previousPanel.element.offsetLeft:t.currentPanel.element.offsetWidth:0:e===t.touchLeftDirection?-t.currentPanel.element.offsetLeft:0,wP([t.element],"e-translate"),t.element.style.transform="translatex("+n+"px)",t.parent.headerModule&&t.parent.headerModule.updateDateRange(t.parent.activeView.getDateRangeText()),t.parent.renderModule.refreshDataManager())}))}},{key:"cancelSwipe",value:function(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.generateColumnLevels(),wP([this.element],"e-translate"),this.element.style.transform="translatex("+(this.parent.enableRtl?this.previousPanel?this.previousPanel.element.offsetWidth:0:-this.currentPanel.element.offsetLeft)+"px)"}},{key:"onTransitionEnd",value:function(){_P([this.element],"e-translate"),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&(IP(this.previousPanel.element),this.previousPanel=null,_P([this.currentPanel.element],"e-previous-panel"),wP([this.currentPanel.element],"e-current-panel")),this.nextPanel&&(IP(this.nextPanel.element),this.nextPanel=null,_P([this.currentPanel.element],"e-next-panel"),wP([this.currentPanel.element],"e-current-panel")),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""}},{key:"getTranslateX",value:function(e){var t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.webkitTransform).m41}},{key:"setDimensions",value:function(e){e.style.width=this.parent.element.clientWidth+"px"}},{key:"resetValues",value:function(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",IH(this.element),_P([this.element],"e-translate")}},{key:"destroy",value:function(){this.touchObj.destroy(),OR.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()}}]),e}(),VH=function(){function e(t){_classCallCheck2(this,e),this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab"},this.parent=t,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new RM(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}return _createClass(e,[{key:"keyActionHandler",value:function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":this.processDelete(e);break;case"escape":this.processEscape()}}},{key:"addEventListener",value:function(){this.parent.on("cell-mouse-down",this.onCellMouseDown,this)}},{key:"removeEventListener",value:function(){this.parent.off("cell-mouse-down",this.onCellMouseDown)}},{key:"onCellMouseDown",value:function(e){if(!e.event.shiftKey&&(this.initialTarget=this.getClosestCell(e.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(e.event.target.classList.contains("e-work-cells")&&3!==e.event.which&&(this.parent.removeSelectedClass(),OR.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),OR.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.event.target.classList.contains("e-all-day-cells")&&3!==e.event.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();OR.add(t,"mousemove",this.onMouseSelection,this),OR.add(t,"mouseup",this.onMoveup,this)}}},{key:"onMouseSelection",value:function(e){wP([].slice.call(this.parent.element.querySelectorAll(".e-appointment")),"e-allow-select");var t=this.parent.boundaryValidation(e.pageY,e.pageX);if(t.bottom||t.top||t.left||t.right){var i=this.parent.element.querySelector(".e-content-wrap"),n=i.offsetWidth<=i.scrollWidth&&i.scrollLeft>=0&&i.scrollLeft+i.offsetWidth<=i.scrollWidth;i.offsetHeight<=i.scrollHeight&&i.scrollTop>=0&&i.scrollTop+i.offsetHeight<=i.scrollHeight&&(t.top||t.bottom)&&(i.scrollTop+=t.top?-e.target.offsetHeight:e.target.offsetHeight),n&&(t.left||t.right)&&(i.scrollLeft+=t.left?-e.target.offsetWidth:e.target.offsetWidth)}var r=this.getClosestCell(e);r&&this.selectCells(!0,r)}},{key:"getClosestCell",value:function(e){return MP(e.target,".e-work-cells,.e-all-day-cells")}},{key:"onMoveup",value:function(e){var t=this;if(_P([].slice.call(this.parent.element.querySelectorAll(".e-appointment")),"e-allow-select"),e.target.classList.contains("e-work-cells")&&(OR.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),OR.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var i=this.parent.getAllDayRow();OR.remove(i,"mousemove",this.onMouseSelection),OR.remove(i,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var n=MP(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");this.parent.activeCellsData=this.getSelectedElements(n);var r={};this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,r),this.parent.trigger("select",{data:r,element:this.parent.activeCellsData.element,event:e,requestType:"cellSelect",showQuickPopup:!1},(function(i){if(i.showQuickPopup||t.parent.quickInfoOnSelectionEnd){var n=DD(t.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});t.parent.notify("cellClick",n)}}))}}},{key:"processEnter",value:function(e){if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var t=e.target;if(MP(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t);var i=DD(this.parent.activeCellsData,{cancel:!1,event:e});this.parent.allowInline?this.parent.notify("inlineClick",{element:i.element,groupIndex:i.groupIndex,type:"Cell"}):this.parent.notify("cellClick",i)}else if(t.classList.contains("e-inline-subject"))this.parent.inlineModule.inlineCrudActions(t);else{if(!(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator")))return t.classList.contains("e-header-date")?(this.parent.setScheduleProperties({selectedDate:this.parent.getDateFromElement(t)}),this.parent.changeView(this.parent.getNavigateView(),e),void this.processEscape()):void 0;t.click()}}}},{key:"getSelectedElements",value:function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t}},{key:"getCells",value:function(e,t,i){var n=this.parent.getContentTable(),r=[].slice.call(n.querySelectorAll("td")),a=n.rows.length,o=n.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var s=this.parent.getAllDayRow();r=[].slice.call(s.cells),a=1,o=s.cells.length}var l=r.indexOf(t),c=r.indexOf(i),u=[];if(e){for(var h=0;h<o;h++)for(var d=0;d<a;d++)u.push(r[o*d+h]);l=u.indexOf(t),c=u.indexOf(i)}if(l>c){var p=l;l=c,c=p}return(e?u:r).slice(l,c+1)}},{key:"focusFirstCell",value:function(){if("Agenda"===this.parent.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else this.selectCells(!1,this.parent.getWorkCellElements()[0])}},{key:"isInverseTableSelect",value:function(){return this.parent.activeView.isInverseTableSelect}},{key:"selectCells",value:function(e,t){var i=this;this.parent.removeSelectedClass();var n=t instanceof Array?t.slice(-1)[0]:t;if(e){var r,a=["Day","Week","WorkWeek","Month","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"],o={element:t,requestType:"mousemove",allowMultipleRow:!0};this.parent.inlineModule.removeInlineAppointmentElement(),this.parent.trigger("select",o,(function(e){(!e.allowMultipleRow||!i.parent.allowMultiRowSelection)&&a.indexOf(i.parent.currentView)>-1&&(n=n.parentElement.children[i.initialTarget.cellIndex]);var t=i.getCells(i.isInverseTableSelect(),i.initialTarget,n);if(i.parent.activeViewOptions.group.resources.length>0){r=i.initialTarget.getAttribute("data-group-index");var o,s=[],l=_createForOfIteratorHelper(t);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.getAttribute("data-group-index")===r&&s.push(c)}}catch(v){l.e(v)}finally{l.f()}t=s}if(i.parent.allowMultiCellSelection||(t=[i.initialTarget]),i.selectedCells=t,t.length>2&&!n.classList.contains("e-all-day-cells")){var u=i.getAllDayCells(t);if(i.parent.activeViewOptions.group.resources.length>0){var h,d=[],p=_createForOfIteratorHelper(u);try{for(p.s();!(h=p.n()).done;){var f=h.value;f.getAttribute("data-group-index")===r&&d.push(f)}}catch(v){p.e(v)}finally{p.f()}u=d}t=t.concat(u)}n.getAttribute("data-group-index")!==r&&i.parent.activeViewOptions.group.resources.length>0&&(n=i.selectedCells[i.selectedCells.length-1]),i.parent.addSelectedClass(t,n)}))}else this.initialTarget=n,this.selectedCells=[n],this.parent.addSelectedClass([n],n)}},{key:"selectAppointment",value:function(e,t){var i,n=this.getAppointmentElements();if(!(n.length<0)){if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var r=n.indexOf(t);i=n[e?r-1:r+1]}else i=e?n[n.length-1]:n[0];i&&(this.parent.eventBase.addSelectedAppointments([i]),i.focus(),wP([i],"e-active-appointment-agenda"))}}},{key:"selectAppointmentElementFromWorkCell",value:function(e,t){var i=this;if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){var n=this.getUniqueAppointmentElements(),r=[],a=this.parent.getDateFromElement(t).getTime();if(this.parent.eventsProcessed.filter((function(t){return e?t[i.parent.eventFields.startTime].getTime()<=a:t[i.parent.eventFields.startTime].getTime()>=a})).filter((function(e){n.filter((function(t){JSON.stringify(e.Guid)===JSON.stringify(t.getAttribute("data-guid"))&&r.push(t)}))})),r.length>0){var o=this.getAppointmentElementsByGuid((e?r[r.length-1]:r[0]).getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(o),o[o.length-1].focus()}}}},{key:"getAllDayCells",value:function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],r=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-r.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]}},{key:"getAppointmentElements",value:function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))}},{key:"getAppointmentElementsByGuid",value:function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))}},{key:"getUniqueAppointmentElements",value:function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,n,r){r.indexOf(i)===n&&t.push(e[n])})),t}},{key:"getWorkCellFromAppointmentElement",value:function(e){var t=this.parent.eventBase.getEventByGuid(e.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([t])}},{key:"processViewNavigation",value:function(e){var t=parseInt(e.key,10)-1;t<this.parent.views.length&&(this.parent.changeView(this.parent.viewCollections[t].option,e,void 0,t),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus())}},{key:"processUp",value:function(e,t){if(!t||!this.parent.activeView.isTimelineView()&&"MonthAgenda"!==this.parent.currentView){var i=e.target,n=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),o=this.getQuickPopupElement();if(n.length>0&&!e.target.classList.contains("e-work-cells")&&(i=n[n.length-1]),r.length>0&&!a.classList.contains("e-popup-open")&&!o.classList.contains("e-popup-open")&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),i)if(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector(".e-popup-open")){var s=this.parent.getTableRows(),l=s.indexOf(i.parentElement);l>0&&l<s.length&&this.selectCells(t,s[l-1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!0,i)}}},{key:"processDown",value:function(e,t){if(!t||!this.parent.activeView.isTimelineView()&&"MonthAgenda"!==this.parent.currentView){var i=e.target,n=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),o=this.getQuickPopupElement();n.length>0&&!e.target.classList.contains("e-work-cells")&&(i=n[n.length-1]),r.length>0&&!a.classList.contains("e-popup-open")&&!o.classList.contains("e-popup-open")&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var s=this.parent.getTableRows();if(i)if(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector(".e-popup-open")){var l=s.indexOf(i.parentElement);l>=0&&l<s.length-1&&this.selectCells(t,s[l+1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!1,i)}}},{key:"processLeftRight",value:function(e){var t=this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[i].cells.length}}},{key:"getQuickPopupElement",value:function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")}},{key:"isCancelLeftRightAction",value:function(e,t){if("Agenda"===this.parent.currentView||t&&"MonthAgenda"===this.parent.currentView)return!0;if(this.isPreventAction(e)&&t)return!0;var i=this.parent.element.querySelector(".e-more-popup-wrapper"),n=this.getQuickPopupElement();return!(!i.classList.contains("e-popup-open")&&!n.classList.contains("e-popup-open"))}},{key:"processRight",value:function(e,t){if(!this.isCancelLeftRightAction(e,t)){var i,n=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),a=e.target;if(n.length>0&&!a.classList.contains("e-work-cells")&&!a.classList.contains("e-all-day-cells")&&(a=n[n.length-1]),!(r.length>0)||(a=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),a))if(a.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var o=this.processLeftRight(a);if(o.columnIndex>=0&&o.columnIndex<o.maxIndex-1)RD(i=this.calculateNextPrevDate(a,o.element.rows[o.rowIndex].cells[a.cellIndex+1],"right"))||this.selectCells(t,i);else if(o.columnIndex===o.maxIndex-1)if(!this.isInverseTableSelect()&&o.rowIndex<o.element.rows.length-1)RD(i=this.calculateNextPrevDate(a,o.element.rows[o.rowIndex+1].cells[0],"right"))||this.selectCells(t,i);else if(!t){var s=this.isInverseTableSelect()?o.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var l=this.parent.getContentTable();this.selectCells(!1,l.rows[s].cells[0])}}else if(a.classList.contains("e-all-day-cells")){var c=a.cellIndex,u=this.parent.getAllDayRow(),h=u.cells.length;if(c>=0&&c<h-1)this.selectCells(t,u.cells[c+1]);else if(c===h-1&&!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var d=this.parent.getAllDayRow();this.selectCells(!1,d.cells[0])}}}}},{key:"processLeft",value:function(e,t){if(!this.isCancelLeftRightAction(e,t)){var i,n=e.target,r=this.parent.getSelectedElements();r.length>0&&!n.classList.contains("e-work-cells")&&!n.classList.contains("e-all-day-cells")&&(n=r[r.length-1]);var a=this.parent.eventBase.getSelectedAppointments();if(!(a.length>0)||(n=this.getWorkCellFromAppointmentElement(a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),n))if(e.target.classList.contains("e-work-cells")&&n.classList.contains("e-work-cells")){var o=this.processLeftRight(n);if(o.columnIndex>0&&o.columnIndex<o.maxIndex)RD(i=this.calculateNextPrevDate(n,o.element.rows[o.rowIndex].cells[n.cellIndex-1],"left"))||this.selectCells(t,i);else if(0===o.columnIndex)if(!this.isInverseTableSelect()&&o.rowIndex>0)RD(i=this.calculateNextPrevDate(n,o.element.rows[o.rowIndex-1].cells[o.maxIndex-1],"left"))||this.selectCells(t,i);else if(!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var s=this.parent.getContentTable(),l=this.isInverseTableSelect()?o.rowIndex:s.rows.length-1;this.selectCells(!1,s.rows[l].cells[o.maxIndex-1])}}else if(n.classList.contains("e-all-day-cells")){var c=n.cellIndex,u=this.parent.getAllDayRow(),h=u.cells.length;if(c>0&&c<h)this.selectCells(t,u.cells[c-1]);else if(0===c&&!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var d=this.parent.getAllDayRow();this.selectCells(!1,d.cells[h-1])}}}}},{key:"calculateNextPrevDate",value:function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){var r=this.parent.getDateFromElement(e),a="right"===i?new Date(r.setDate(r.getDate()+1)):new Date(r.setDate(r.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(a).toString()+'"][data-group-index="'+n+'"]'))[0]}return t}},{key:"getFocusableElements",value:function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))}},{key:"processTabOnPopup",value:function(e,t){var i=this,n=this.getFocusableElements(t),r=(n=n.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],a=n[n.length-1];RD(a)||document.activeElement!==a||e.shiftKey||(e.preventDefault(),r.focus()),!RD(r)&&document.activeElement===r&&e.shiftKey&&(e.preventDefault(),a.focus())}},{key:"processTab",value:function(e,t){var i=e.target,n=MP(i,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(n&&n.classList.contains("e-popup-open"))return n.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,n);if(i.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else{if(!i.classList.contains("e-appointment")){var r=this.parent.getSelectedElements();return r.length>0&&!i.classList.contains("e-appointment")?(i=r[r.length-1],this.selectAppointmentElementFromWorkCell(t,i),void e.preventDefault()):void 0}var a=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),o=this.parent.eventBase.getSelectedAppointments();if(o.length>0&&(i=o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!t&&i.getAttribute("data-guid")===a[a.length-1].getAttribute("data-guid")||t&&i.getAttribute("data-guid")===a[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||(this.selectAppointment(t,i),e.preventDefault())}}},{key:"processDelete",value:function(e){var t=document.activeElement;if("MonthAgenda"===this.parent.currentView){var i=this.parent.eventBase.getSelectedEvents().element;t=i&&RD(i.length)?i:i[0]}if(t&&t.classList.contains("e-appointment")){if(wP([t],"e-appointment-border"),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||t.classList.contains("e-read-only"))return;this.parent.quickPopup.deleteClick()}}},{key:"processEscape",value:function(){this.parent.quickPopup.onClosePopup(),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()}},{key:"isPreventAction",value:function(e){var t=MP(e.target,".e-resource-group-cells");return!(!this.parent.activeView.isTimelineView()||RD(t))}},{key:"getModuleName",value:function(){return"keyboard"}},{key:"destroy",value:function(){this.removeEventListener(),this.keyboardModule.destroy()}}]),e}(),jH=function(){function e(t,i){_classCallCheck2(this,e),this.initDataManager(t,i)}return _createClass(e,[{key:"initDataManager",value:function(e,t){this.dataManager=e instanceof TF?e:new TF(e),this.query=t instanceof gF?t:new gF}},{key:"generateQuery",value:function(e,t){var i=this.query.clone();return e&&i.addParams("StartDate",e.toISOString()),t&&i.addParams("EndDate",t.toISOString()),i}},{key:"getData",value:function(e){return this.dataManager.executeQuery(e)}}]),e}(),HH=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"firstDateOfMonth",value:function(e){return new Date(e.getFullYear(),e.getMonth())}},{key:"lastDateOfMonth",value:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}},{key:"isMonthStart",value:function(e){return 1===e.getDate()}},{key:"getLeapYearDaysCount",value:function(){return 366}},{key:"getYearDaysCount",value:function(e,t){return(e.getFullYear()+t)%4==0?366:365}},{key:"getDate",value:function(e){return e.getDate()}},{key:"getMonth",value:function(e){return e.getMonth()+1}},{key:"getFullYear",value:function(e){return e.getFullYear()}},{key:"getYearLastDate",value:function(e,t){return new Date(e.getFullYear()+t,0,0)}},{key:"getMonthDaysCount",value:function(e){return this.lastDateOfMonth(e).getDate()}},{key:"getMonthStartDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes())}},{key:"getMonthEndDate",value:function(e){return e.setDate(1),new Date(e.setMonth(e.getMonth()+1))}},{key:"getExpectedDays",value:function(e,t){return t}},{key:"setDate",value:function(e,t){e.setDate(t)}},{key:"setValidDate",value:function(e,t,i,n,r){RD(r)?e.setMonth(e.getMonth()+t,i):e.setMonth((r?n:e.getMonth())+t)}},{key:"setMonth",value:function(e,t,i){e.setFullYear(e.getFullYear()),e.setMonth(t-1),e.setDate(i)}},{key:"addYears",value:function(e,t){e.setFullYear(e.getFullYear()+t)}},{key:"isSameMonth",value:function(e,t){return e.getMonth()===t.getMonth()}},{key:"checkMonth",value:function(e,t){return-1===t.indexOf(e.getMonth()+1)}},{key:"compareMonth",value:function(e,t){return e.getMonth()>t.getMonth()}},{key:"isSameYear",value:function(e,t){return e.getFullYear()===t.getFullYear()}},{key:"isLastMonth",value:function(e){return 11===e.getMonth()}},{key:"isLeapYear",value:function(e,t){return(e+t)%4==0}}]),e}(),UH=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"firstDateOfMonth",value:function(e){var t=HD.getHijriDate(e);return HD.toGregorian(t.year,t.month,1)}},{key:"lastDateOfMonth",value:function(e){var t=this.getHijriDate(e),i=HD.toGregorian(t.year,t.month,this.getDaysInMonth(t.month,t.year)),n=new Date(i.getTime());new Date(n.setDate(n.getDate()+1));var r=this.getHijriDate(n);return t.month===r.month?n:(r=HD.getHijriDate(i),t.month===r.month?i:new Date(i.setDate(i.getDate()-1)))}},{key:"isMonthStart",value:function(e){return 1===this.getHijriDate(e).date}},{key:"getLeapYearDaysCount",value:function(){return 355}},{key:"getYearDaysCount",value:function(e,t){var i=this.getHijriDate(e);return this.isLeapYear(i.year,t)?355:354}},{key:"getDate",value:function(e){return this.getHijriDate(e).date}},{key:"getMonth",value:function(e){return this.getHijriDate(e).month}},{key:"getFullYear",value:function(e){return this.getHijriDate(e).year}},{key:"getYearLastDate",value:function(e,t){var i=HD.getHijriDate(e);return HD.toGregorian(i.year+t,1,0)}},{key:"getMonthDaysCount",value:function(e){var t=this.lastDateOfMonth(e);return this.getHijriDate(t).date}},{key:"getMonthStartDate",value:function(e){var t=this.firstDateOfMonth(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())}},{key:"getMonthEndDate",value:function(e){var t=this.lastDateOfMonth(e);return t.setDate(t.getDate()+1),new Date(t.setMonth(t.getMonth()))}},{key:"getExpectedDays",value:function(e,t){for(var i=this.getHijriDate(e),n=[],r=0;r<t.length;r++){var a=HD.toGregorian(i.year,i.month,t[r]);n.push(a.getDate())}return n}},{key:"setDate",value:function(e,t){var i=HD.getHijriDate(e),n=HD.toGregorian(i.year,i.month,t);this.updateDateObj(e,n)}},{key:"setValidDate",value:function(e,t,i,n,r){var a=RD(r)?e:this.firstDateOfMonth(r),o=HD.getHijriDate(a),s=HD.toGregorian(o.year,o.month+t,i);this.updateDateObj(e,s)}},{key:"setMonth",value:function(e,t,i){var n=HD.getHijriDate(e),r=HD.toGregorian(n.year,t,i);this.updateDateObj(e,r)}},{key:"addYears",value:function(e,t,i){var n=HD.getHijriDate(e),r=HD.toGregorian(n.year+t,i,1);this.updateDateObj(e,r)}},{key:"isSameMonth",value:function(e,t){var i=this.getHijriDate(e),n=this.getHijriDate(t);return i.month===n.month}},{key:"checkMonth",value:function(e,t){var i=this.getHijriDate(e);return-1===t.indexOf(i.month)}},{key:"compareMonth",value:function(e,t){var i=this.getHijriDate(e),n=this.getHijriDate(t);return i.month>n.month}},{key:"isSameYear",value:function(e,t){var i=this.getHijriDate(e),n=this.getHijriDate(t);return i.year===n.year}},{key:"isLastMonth",value:function(e){return 12===this.getHijriDate(e).month}},{key:"updateDateObj",value:function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())}},{key:"isLeapYear",value:function(e,t){return(14+11*(e+t))%30<11}},{key:"getDaysInMonth",value:function(e,t){var i=0;return i=29+(e+1)%2,11===e&&this.isLeapYear(t,0)&&i++,i}},{key:"getHijriDate",value:function(e){return HD.getHijriDate(e)}}]),e}(),qH=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"offset",value:function(e,t){var i=e.getTimezoneOffset();try{var n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(r){return 0}}},{key:"convert",value:function(e,t,i){"string"==typeof t&&(t=this.offset(e,t)),"string"==typeof i&&(i=this.offset(e,i));var n=e.getTimezoneOffset(),r=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(r-n))}},{key:"add",value:function(e,t){return this.convert(e,e.getTimezoneOffset(),t)}},{key:"remove",value:function(e,t){return this.convert(e,t,e.getTimezoneOffset())}},{key:"removeLocalOffset",value:function(e){return new Date(+e-6e4*e.getTimezoneOffset())}},{key:"getLocalTimezoneName",value:function(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}}]),e}(),WH=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}];function zH(e,t,i){var n="";if(e.monthDay.length)n+=e.monthDay[0];else if(e.day){var r=e.setPosition-1;n+=i.getConstant(TU[r>-1?r:TU.length-1])+" "+RH(TD(OU[e.day[0]],t),"single")}return n}function GH(e,t,i,n){var r,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:EU,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Gregorian",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=dU(t);CU=gU(s);var h=[],d=new Date(e.getTime());yU=[];var p=RD(i)?[]:i.split(","),f=new qH;if(p.forEach((function(e){var t=YH(e);l&&c&&(t=f.convert(new Date(t.getTime()),l,c)),yU.push(new Date(t.getTime()).setHours(0,0,0,0))})),u.recExceptionCount=RD(u.count)?0:yU.length,kU=o&&o>e&&!u.count?new Date(new Date(o.getTime()).setHours(0,0,0)):null,!u.until&&kU&&((r=new Date(kU.getTime())).setDate(kU.getDate()+a*u.interval),u.until=r),u.until&&e>u.until)return h;switch(bU=a,function(e){for(;_U[0]!==e;)vU(_U)}(SU[n]),u.freq){case"DAILY":!function(e,t,i,n){for(var r=new Date(e.getTime()),a=n.interval,o=XH(e,n),s=n.day;cU(r,t)&&(!0,!(mU(r,n)&&(s.indexOf(SU[r.getDay()])>-1||0===s.length)&&(KH(i,r.getTime()),o&&i.length+n.recExceptionCount>=o)));)r.setDate(r.getDate()+a)}(d,u.until,h,u);break;case"WEEKLY":!function(e,t,i,n){var r=new Date(e.getTime());n.day.length||n.day.push(SU[e.getDay()]);var a,o=n.interval,s=n.day,l=XH(e,n),c=!0,u=[];if(s.length>1)for((RD(n.wkst)||""===n.wkst)&&(n.wkst=_U[0]),a=SU.indexOf(n.wkst);cU(r,t);){var h=SU.indexOf(SU[r.getDay()])-a,d=CH(r,-(h=-1===h?6:h)),p=CH(d,6),f=new Date(r.getTime());for(bH(p),bH(f);p>=f&&(s.indexOf(SU[r.getDay()])>-1&&u.push([r.getTime()]),!(l&&i.length+n.recExceptionCount>=l));)r.setDate(r.getDate()+1),bH(f=new Date(r.getTime()));if(r.setDate(r.getDate()-1),l&&i.length+n.recExceptionCount>=l)break;r.setDate(r.getDate()+1+7*(o-1)),iU(u,c,e,t,i,n),u=[]}else{for(r=hU(e,n.day);cU(r,t)&&((c=mU(r,n))&&s.indexOf(SU[r.getDay()])>-1&&KH(i,r.getTime()),!(l&&i.length+n.recExceptionCount>=l));)r.setDate(r.getDate()+7*o);iU(u,c,e,t,i,n),u=[]}}(d,u.until,h,u);break;case"MONTHLY":JH(d,u.until,h,u);break;case"YEARLY":!function(e,t,i,n){switch(function(e){return e.yearDay.length?"YEARDAY":e.weekNo.length?"WEEKNO":"MONTH"}(n)){case"MONTH":JH(e,t,i,n);break;case"WEEKNO":!function(e,t,i,n){for(var r,a,o,s,l,c=CU.getYearLastDate(e,0),u=XH(e,n),h=n.weekNo,d=[],p=n.day;cU(c,t);){a=6-_U.indexOf(SU[c.getDay()])+1;for(var f=0;f<h.length;f++)for(s=1===(o=(o=h[f])>0?o:53+o+1)?a:a+7*(o-1),l=1===o?a-7:a+7*(o-2);l<s;)r=new Date(c.getTime()+864e5*l),(0===p.length||p.indexOf(SU[r.getDay()])>-1)&&(RD(n.setPosition)?oU(void 0,e,t,i,n,r.getTime()):d.push([r.getTime()])),l++;if(RD(n.setPosition)||lU(d,void 0,e,t,i,n),u&&i.length+n.recExceptionCount>=u)return;c=CU.getYearLastDate(r,n.interval),d=[]}}(e,t,i,n);break;case"YEARDAY":!function(e,t,i,n){for(var r,a,o=CU.getYearLastDate(e,0),s=XH(e,n),l=[],c=n.day;cU(o,t);){for(var u=0;u<n.yearDay.length;u++)a=n.yearDay[u],r=new Date(o.getTime()),a!==CU.getLeapYearDaysCount()&&a!==-CU.getLeapYearDaysCount()||CU.isLeapYear(CU.getFullYear(r),1)?(r.setDate(r.getDate()+(a<0?CU.getYearDaysCount(r,1)+1+a:a)),(0===c.length||c.indexOf(SU[r.getDay()])>-1)&&(null==n.setPosition?oU(void 0,e,t,i,n,r.getTime()):l.push([r.getTime()]))):r.setDate(r.getDate()+1);if(RD(n.setPosition)||lU(l,void 0,e,t,i,n),s&&i.length+n.recExceptionCount>=s)return;o=CU.getYearLastDate(r,n.interval),l=[]}}(e,t,i,n)}}(d,u.until,h,u)}return h}function YH(e){return new Date(e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,5)+":"+e.substr(11,2)+":"+e.substr(13))}function KH(e,t){var i=new Date(t).setHours(0,0,0,0);-1===yU.indexOf(i)&&(!kU||i>=kU.getTime())&&e.push(t)}function XH(e,t){var i=bU;return t.count?i=t.count:t.until&&("DAILY"===t.freq||"WEEKLY"===t.freq?i=Math.floor((t.until.getTime()-e.getTime())/864e5)+1:"MONTHLY"!==t.freq&&"YEARLY"!==t.freq||(i=Math.floor((t.until.getMonth()+12*t.until.getFullYear()-(e.getMonth()+12*e.getFullYear()))/t.interval)+(t.day.length>1?Math.floor((t.until.getTime()-e.getTime())/864e5)+1:1),"YEARLY"===t.freq&&(i=t.month.length>1?i*t.month.length:i))),i}function JH(e,t,i,n){switch(n.month.length||n.day.length||n.monthDay.length?n.month.length>0&&!n.day.length&&!n.monthDay.length&&n.monthDay.push(e.getDate()):(n.monthDay.push(e.getDate()),"YEARLY"===n.freq&&n.month.push(e.getMonth()+1)),function(e){return e.monthDay.length&&!e.day.length?"date":!e.monthDay.length&&e.day.length?"day":"both"}(n)){case"day":switch(n.freq){case"MONTHLY":tU(e,t,i,n);break;case"YEARLY":!function(e,t,i,n){var r=n.day,a=r.map((function(e){return xU.test(e)}));if(r.length>1&&a.indexOf(!0)>-1)!function(e,t,i,n){var r,a,o,s=n.day,l=XH(e,n),c=new Date(e.getTime()),u=n.interval,h=[],d=[],p=0;c=CU.getMonthStartDate(c);var f=[];for(n.month.length&&CU.setMonth(c,n.month[0],1),c=hU(c,n.day);cU(c,t);){a=new Date(c.getTime());for(var v=0;v<=n.month.length;v++)for(var m=0;m<=s.length-1;m++){for(c=hU(c=CU.getMonthStartDate(c),n.day),h=[];CU.isSameYear(a,c)&&l&&i.length+n.recExceptionCount<=l;)for(;CU.isSameYear(a,c);){if(a=new Date(c.getTime()),0===n.month.length||n.month.length>0&&n.month[v]===CU.getMonth(a)){var g=s[m].match(DU),y=parseInt(g[0],10);for(o=new Date(c.getTime());CU.isSameYear(o,c)&&CU.isSameMonth(o,c);)g[g.length-1]===SU[o.getDay()]&&h.push([o.getTime()]),o.setDate(o.getDate()+1);o.setDate(o.getDate()-1),r=g[0].indexOf("-")>-1?h.length- -1*y:y-1,r=isNaN(r)?0:r}p=eU(c,n,p,void 0,1),c=hU(c,n.day)}if(c=0===m&&o?new Date(o.getTime()):new Date(a.getTime()),h.length>0&&(RD(n.setPosition)?lU(h,void 0,e,t,i,n,r):d=[aU(h,r,f)]),l&&i.length+n.recExceptionCount>=l)return}RD(n.setPosition)||(sU(d,void 0,e,t,i,n),f=[]),CU.isLastMonth(c)?(CU.setValidDate(c,1,1),c.setFullYear(c.getFullYear()+u-1)):c.setFullYear(c.getFullYear()+u),c=hU(c,n.day),n.month.length&&CU.setMonth(c,n.month[0],c.getDate())}}(e,t,i,n);else if(n.month.length&&1===r.length&&a.indexOf(!0)>-1)tU(e,t,i,n);else{var o,s=new Date(e.getTime()),l=XH(e,n),c=n.interval,u=[];for(n.month.length&&CU.setMonth(s,n.month[0],s.getDate()),RD(n.setPosition)&&0===n.month.length&&0===n.weekNo.length&&s.setFullYear(e.getFullYear(),0,1),s=hU(s=CU.getMonthStartDate(s),n.day);cU(s,t);){for(o=new Date(s.getTime());CU.isSameYear(o,s)&&l&&i.length+n.recExceptionCount<=l;)for(o=new Date(s.getTime());CU.isSameYear(o,s);){if(!(0===n.month.length||n.month.length>0&&!CU.checkMonth(s,n.month))){CU.setValidDate(s,1,1),s=hU(s,n.day);break}if(r.length>1){if(CU.compareMonth(o,s)){CU.setValidDate(s,1,1),s=hU(s,n.day);break}r.indexOf(SU[o.getDay()])>-1&&u.push([o.getTime()]),o.setDate(o.getDate()+1)}else{if(o.getFullYear()>s.getFullYear()){CU.setValidDate(s,1,1),s=hU(s,n.day);break}var h=uU(r[0]);SU[o.getDay()]===h&&new Date(o.getFullYear(),o.getMonth(),0)>new Date(e.getFullYear())&&u.push([o.getTime()]),o.setDate(o.getDate()+7)}}if(s.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),rU(u,e,t,i,n),CU.isLastMonth(s)&&(CU.setValidDate(s,1,1),s=hU(s,n.day)),s.setFullYear(s.getFullYear()+c-1),l&&i.length+n.recExceptionCount>=l)return;s=hU(s,n.day),u=[]}}}(e,t,i,n)}break;case"both":case"date":switch(n.freq){case"MONTHLY":ZH(e,t,i,n);break;case"YEARLY":!function(e,t,i,n){if(n.month.length)ZH(e,t,i,n);else{var r,a=QH(e,n);for(a.tempDate=a.mainDate=CU.getMonthStartDate(a.tempDate);cU(a.tempDate,t);){for(r=new Date(a.tempDate.getTime());CU.isSameYear(r,a.tempDate)&&a.expectedCount&&i.length+n.recExceptionCount<=a.expectedCount;){if(!(0===n.month.length||n.month.length>0&&!CU.checkMonth(a.tempDate,n.month))){CU.setValidDate(a.tempDate,1,1),a.tempDate=hU(a.tempDate,n.day);break}$H(n,a,t,!1),a.beginDate=new Date(a.tempDate.getTime()),a.monthInit=eU(a.tempDate,n,a.monthInit,a.beginDate)}if(a.tempDate.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),iU(a.dateCollection,a.state,e,t,i,n),CU.isLastMonth(a.tempDate)&&(CU.setValidDate(a.tempDate,1,1),a.tempDate=hU(a.tempDate,n.day)),a.expectedCount&&i.length+n.recExceptionCount>=a.expectedCount)return;a.tempDate.setFullYear(a.tempDate.getFullYear()+n.interval-1),a.tempDate=hU(a.tempDate,n.day),a.monthInit=eU(a.tempDate,n,a.monthInit,a.beginDate),a.dateCollection=[]}}}(e,t,i,n)}}}function QH(e,t){var i={monthCollection:[],index:0,tempDate:new Date(e.getTime()),mainDate:new Date(e.getTime()),expectedCount:XH(e,t),monthInit:0,dateCollection:[]};return t.month.length&&CU.setMonth(i.tempDate,t.month[0],i.tempDate.getDate()),i}function ZH(e,t,i,n){var r=QH(e,n);if(r.tempDate=r.mainDate=CU.getMonthStartDate(r.tempDate),!(("MONTHLY"===n.freq&&12===n.interval||"YEARLY"===n.freq)&&CU.getMonthDaysCount(e)<n.monthDay[0]))for(;cU(r.tempDate,t);){if(r.beginDate=new Date(r.tempDate.getTime()),$H(n,r,t,!0,e,i),RD(n.setPosition)||lU(r.dateCollection,r.state,e,t,i,n),r.expectedCount&&i.length+n.recExceptionCount>=r.expectedCount)return;r.monthInit=eU(r.tempDate,n,r.monthInit,r.beginDate),r.dateCollection=[]}}function $H(e,t,i,n,r,a){for(var o=0;o<e.monthDay.length;o++){t.date=e.monthDay[o],t.tempDate=CU.getMonthStartDate(t.tempDate);var s=CU.getMonthDaysCount(t.tempDate);if(t.date=t.date>0?t.date:s+t.date+1,pU(t.tempDate,t.date,t.mainDate)&&t.date>0){if(CU.setDate(t.tempDate,t.date),i&&t.tempDate>i)return;(0===e.day.length||e.day.indexOf(SU[t.tempDate.getDay()])>-1)&&(n&&RD(e.setPosition)&&t.expectedCount&&a.length+e.recExceptionCount<t.expectedCount?oU(t.state,r,i,a,e,t.tempDate.getTime()):t.dateCollection.push([t.tempDate.getTime()]))}}}function eU(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4?arguments[4]:void 0,a=n?n.getMonth():0,o=CU.getMonthStartDate(e);return r=RD(r)?t.interval:r,e.setFullYear(o.getFullYear()),e.setMonth(o.getMonth()),e.setDate(o.getDate()),t.month.length?(i++,CU.setMonth(e,t.month[i%=t.month.length],1),0===i&&CU.addYears(e,r,t.month[0])):(n&&n.getFullYear()<e.getFullYear()&&(a=e.getMonth()-1),CU.setValidDate(e,r,1,a,n)),i}function tU(e,t,i,n){if(n.day.length>1)!function(e,t,i,n){var r=n.day,a=new Date(e.getTime());a=CU.getMonthStartDate(a);var o,s,l=[],c=[],u=[],h=XH(e,n),d=0;for(n.month.length&&CU.setMonth(a,n.month[0],1),a=hU(a,n.day);cU(a,t)&&h&&i.length+n.recExceptionCount<h;){var p=new Date(a.getTime());if(r.map((function(e){return xU.test(e)})).indexOf(!0)>-1){for(var f=0;f<=r.length-1;f++){var v=r[f].match(DU),m=parseInt(v[0],10);for(a=new Date(a.getTime()),a=hU(a=CU.getMonthStartDate(a),r),p.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());CU.isSameYear(p,a)&&CU.isSameMonth(p,a);)v[v.length-1]===SU[p.getDay()]&&l.push([p.getTime()]),p.setDate(p.getDate()+1);if(p.setDate(p.getDate()-1),o=v[0].indexOf("-")>-1?l.length- -1*m:m-1,o=isNaN(o)?0:o,l.length>0&&(RD(n.setPosition)?lU(l,void 0,e,t,i,n,o):c=[aU(l,o,u)]),h&&i.length+n.recExceptionCount>=h)return;l=[]}RD(n.setPosition)||(sU(c,void 0,e,t,i,n),u=[]),d=eU(a,n,d,s),a=hU(a,n.day),l=[]}else{var g=[],y=fU(r);p.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());var b=new Date(a.getTime());for(s=new Date(a.getTime());CU.isSameMonth(b,a);)g.push(a.getTime()),r.indexOf(SU[a.getDay()])>-1&&(l.push(g),g=[]),a.setDate(a.getDate()+y[SU[a.getDay()]]);if(o=n.setPosition<1?l.length+n.setPosition:n.setPosition-1,RD(n.setPosition)){o=0;for(var k=[],C=0;C<l.length;C++)for(var w=0;w<l[C].length;w++)k.push(l[C][w]);l=[k]}if(l.length>0&&lU(l,void 0,e,t,i,n,o),h&&i.length+n.recExceptionCount>=h)return;d=eU(a,n,d,s),a=hU(a,n.day),l=[]}}}(e,t,i,n);else{var r,a=new Date(e.getTime()),o=XH(e,n),s=[],l=0;for(a=CU.getMonthStartDate(a),n.month.length&&CU.setMonth(a,n.month[0],1),a=hU(a,n.day);cU(a,t)&&o&&i.length+n.recExceptionCount<o;){r=new Date(a.getTime());for(var c=new Date(a.getTime());CU.isSameMonth(a,c);)s.push([c.getTime()]),c.setDate(c.getDate()+7);rU(s,e,t,i,n),l=eU(a,n,l,r),a=hU(a,n.day),s=[]}}}function iU(e,t,i,n,r,a){var o=a.setPosition<1?e.length+a.setPosition:a.setPosition-1;RD(a.setPosition)&&(o=0,e=nU(e)),e.length>0&&lU(e,t,i,n,r,a,o)}function nU(e){for(var t=[],i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)t.push(new Date(e[i][n]).getTime());return t.length>0?[t]:[]}function rU(e,t,i,n,r){var a,o,s=[];o=function(e,t){var i,n={monthCollection:[],index:0};if(1===t.length){var r,a=t[0].match(DU);a.length>1?i=(r=parseInt(a[0],10))<1?e.length+r:r-1:(i=0,e=nU(e))}else i=0,e=nU(e);return n.monthCollection=e,n.index=i,n}(e,r.day),e=o.monthCollection,a=o.index,null!=r.setPosition?sU([aU(e,a,s)],void 0,t,i,n,r):e.length>0&&lU(e,void 0,t,i,n,r,a),s=[]}function aU(e,t,i){for(var n=0;n<e[t].length;n++)i.push(e[t][n]);return i}function oU(e,t,i,n,r,a){var o=XH(t,r),s=new Date(a);e=mU(s,r),s>=t&&cU(s,i)&&e&&o&&n.length+r.recExceptionCount<o&&KH(n,a)}function sU(e,t,i,n,r,a){if(e.length>0)for(var o=0;o<e.length;o++)e[o].sort(),oU(t,i,n,r,a,e[o][a.setPosition<1?e[o].length+a.setPosition:a.setPosition-1])}function lU(e,t,i,n,r,a,o){if(e.length>0){e[o=RD(o)?a.setPosition<1?e.length+a.setPosition:a.setPosition-1:o].sort();for(var s=0;s<e[o].length;s++)oU(t,i,n,r,a,e[o][s])}}function cU(e,t){return!t||e<=t}function uU(e){return e.replace(IU,"")}function hU(e,t){var i,n=new Date(e.getTime());if(t.length>0){for(var r=[],a=0;a<=t.length-1;a++)i=uU(t[a]),r.push(i);if(-1===r.indexOf(SU[n.getDay()]))do{n.setDate(n.getDate()+1)}while(-1===r.indexOf(SU[n.getDay()]))}return n}function dU(e){var t,i={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},n=e.split(";"),r=[];if(n.forEach((function(e){switch((r=e.split("="))[0]){case"UNTIL":t=r[1],i.until=YH(t);break;case"BYDAY":i.day=r[1].split(","),i.validRules.push(r[0]);break;case"BYMONTHDAY":i.monthDay=r[1].split(",").map(Number),i.validRules.push(r[0]);break;case"BYMONTH":i.month=r[1].split(",").map(Number),i.validRules.push(r[0]);break;case"BYYEARDAY":i.yearDay=r[1].split(",").map(Number),i.validRules.push(r[0]);break;case"BYWEEKNO":i.weekNo=r[1].split(",").map(Number),i.validRules.push(r[0]);break;case"INTERVAL":i.interval=parseInt(r[1],10);break;case"COUNT":i.count=parseInt(r[1],10);break;case"BYSETPOS":i.setPosition=parseInt(r[1],10)>4?-1:parseInt(r[1],10);break;case"FREQ":i.freq=r[1];break;case"WKST":i.wkst=r[1]}})),"MONTHLY"===i.freq&&0===i.monthDay.length){var a=i.validRules.indexOf("BYDAY");i.validRules.splice(a,1)}return i}function pU(e,t,i){return t<=CU.getMonthDaysCount(e)&&e>=i}function fU(e){var t={};return e.forEach((function(i,n){if(n===e.length-1){for(var r=_U.indexOf(i),a=r;a%7!==_U.indexOf(e[0]);)a++;t[i]=a-r}else t[i]=_U.indexOf(e[n+1])-_U.indexOf(i)})),t}function vU(e){var t=e.shift();e.push(t)}function mU(e,t){var i=!0,n=t.day,r=t.month,a=CU.getExpectedDays(e,t.monthDay),o=t.yearDay;return t.validRules.forEach((function(t){switch(t){case"BYDAY":(function(e,t){var i=[];return t.forEach((function(e){var t=e.match(DU);i.push(2===t.length?t[1]:t[0])})),-1===i.indexOf(SU[e])})(e.getDay(),n)&&(i=!1);break;case"BYMONTH":CU.checkMonth(e,r)&&(i=!1);break;case"BYMONTHDAY":(function(e,t){var i,n=t.slice(0),r=CU.getMonthDaysCount(e);for(i=n.shift();i;){if(i<0&&(i=i+r+1),i===e.getDate())return!1;i=n.shift()}return!0})(e,a)&&(i=!1);break;case"BYYEARDAY":(function(e,t){var i,n=t.slice(0),r=function(e){wU[CU.getFullYear(e)]||(wU[CU.getFullYear(e)]=CU.getYearLastDate(e,0));var t=wU[CU.getFullYear(e)],i=e.getTime()-t.getTime();return Math.ceil(i/864e5)}(e);for(i=n.shift();i;){if(i<0&&(i=i+CU.getYearDaysCount(e,0)+1),i===r)return!1;i=n.shift()}return!0})(e,o)&&(i=!1)}})),i}function gU(e){return"Islamic"===e?new UH:new HH}var yU,bU,kU,CU,wU={},_U=["SU","MO","TU","WE","TH","FR","SA"],SU=["SU","MO","TU","WE","TH","FR","SA"],EU=43,TU=["first","second","third","fourth","last"],AU="summaryOn",OU={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},xU=/\d/,IU=/[^A-Z]+/,DU=/[a-z]+|[^a-z]+/gi;function RU(e){return[e.getUTCFullYear(),PU(e.getUTCMonth()+1),PU(e.getUTCDate()),"T",PU(e.getUTCHours()),PU(e.getUTCMinutes()),PU(e.getUTCSeconds()),"Z"].join("")}function PU(e){return("0"+e).slice(-2)}var MU,LU,NU,FU,BU,VU,jU,HU,UU,qU,WU,zU,GU,YU=function(){function e(t){_classCallCheck2(this,e),this.slots=[],this.isDoubleTapped=!1,this.parent=t}return _createClass(e,[{key:"processData",value:function(e,t,i){var n=this,r=this.parent.activeView.startDate(),a=this.parent.activeView.endDate(),o=this.parent.eventFields,s=[],l=1,c=!1,u=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];e.length>0&&RD(e[0][o.id])&&(c=!0);var h,d=_createForOfIteratorHelper(e);try{var p=function(){var e,r,a=h.value;c&&(a[o.id]=l++),"string"==typeof a[o.startTime]&&(a[o.startTime]=EH(a[o.startTime])),"string"==typeof a[o.endTime]&&(a[o.endTime]=EH(a[o.endTime])),t?n.processTimezoneChange(a,i):a=n.processTimezone(a);for(var d=0;d<u.length;d++)null!==a[u[d].field]&&0!==a[u[d].field]||(a[u[d].field]=void 0);if(RD(a[o.recurrenceRule])||""!==a[o.recurrenceRule]||(a[o.recurrenceRule]=null),RD(a[o.recurrenceRule])||!RD(a[o.recurrenceID])||n.parent.crudModule&&n.parent.crudModule.crudObj.isCrudAction)if(n.parent.crudModule&&n.parent.crudModule.crudObj.isCrudAction)if(!RD(a[o.recurrenceRule])&&RD(a[o.recurrenceID])){e=n.generateOccurrence(a,null,i,!0);for(var p=0;p<e.length;p++)a=e[p],r=n.parent.eventsProcessed.filter((function(e){return e[n.parent.eventFields.startTime].getTime()-a[n.parent.eventFields.startTime].getTime()==0&&e[n.parent.eventFields.id]===a[n.parent.eventFields.id]})),a.Guid=r.length>0?r[0].Guid:n.generateGuid(),s.push(a)}else r=n.parent.eventsProcessed.filter((function(e){return e[n.parent.eventFields.id]===a[n.parent.eventFields.id]})),a.Guid=r.length>0?r[0].Guid:n.generateGuid(),s.push(a);else a.Guid=n.generateGuid(),s.push(a);else s=s.concat(n.generateOccurrence(a,null,i,!0))};for(d.s();!(h=d.n()).done;)p()}catch(b){d.e(b)}finally{d.f()}this.parent.eventsProcessed=[];var f=s.filter((function(e){return!e[n.parent.eventFields.isBlock]}));this.parent.eventsProcessed=this.filterEvents(r,a,f);for(var v=s.filter((function(e){return e[n.parent.eventFields.isBlock]})),m=0,g=v.length;m<g;m++){var y=v[m];y[o.isAllDay]&&(y[o.startTime]=bH(y[o.startTime]),y[o.endTime]=CH(bH(y[o.endTime]),1))}return this.parent.blockProcessed=v,f}},{key:"getProcessedEvents",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent.eventsData,i=[],n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;!RD(r[this.parent.eventFields.recurrenceRule])&&RD(r[this.parent.eventFields.recurrenceID])?i=i.concat(this.generateOccurrence(r)):i.push(r)}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"timezonePropertyChange",value:function(e){var t=this.parent.eventsData.concat(this.parent.blockData),i=this.processData(t,!0,e);this.parent.notify(dH,{processedData:i})}},{key:"timezoneConvert",value:function(e){var t=this.parent.eventFields;if(e[t.startTimezone]=e[t.startTimezone]||e[t.endTimezone],e[t.endTimezone]=e[t.endTimezone]||e[t.startTimezone],this.parent.timezone){var i=e[t.endTimezone];e[t.startTime]=this.parent.tzModule.convert(e[t.startTime],this.parent.timezone,e[t.startTimezone]),e[t.endTime]=this.parent.tzModule.convert(e[t.endTime],this.parent.timezone,i)}}},{key:"processTimezoneChange",value:function(e,t){var i=this.parent.eventFields;e[i.isAllDay]||(t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],t,this.parent.timezone),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],t,this.parent.timezone)):!t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)):t&&!this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],t),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],t)))}},{key:"processTimezone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.parent.eventFields;if(e[i.startTimezone]||e[i.endTimezone]){var n=e[i.startTimezone]||e[i.endTimezone],r=e[i.endTimezone]||e[i.startTimezone],a=this.parent.timezone;t?this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],n,a),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],r,a),e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],a),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],a)):(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],n),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],r)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],n),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],r),this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],n,a),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],r,a)))}else this.parent.timezone&&(t?(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],this.parent.timezone)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)));return e}},{key:"filterBlockEvents",value:function(e){var t,i=e[this.parent.eventFields.startTime],n=e[this.parent.eventFields.endTime];if(this.parent.activeViewOptions.group.resources.length>0){var r=this.getGroupIndexFromEvent(e);t=this.parent.resourceBase.lastResourceLevel[r]}return this.filterEvents(i,n,this.parent.blockProcessed,t)}},{key:"filterEvents",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parent.eventsProcessed,n=arguments.length>3?arguments[3]:void 0,r=this.parent.eventFields,a=new yF(r.startTime,"greaterthanorequal",e).and(new yF(r.endTime,"greaterthanorequal",e)).and(new yF(r.startTime,"lessthan",t)).or(new yF(r.startTime,"lessthanorequal",e).and(new yF(r.endTime,"greaterthan",e))),o=new TF({json:i}).executeLocal((new gF).where(a));return n&&(o=this.filterEventsByResource(n,o)),this.sortByTime(o)}},{key:"filterEventsByRange",value:function(e,t,i){var n,r=this;return n=t&&i?this.filterEvents(t,i,e):t&&!i?e.filter((function(e){return e[r.parent.eventFields.startTime]>=t})):!t&&i?e.filter((function(e){return e[r.parent.eventFields.endTime]<=i})):e,this.sortByTime(n)}},{key:"filterEventsByResource",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parent.eventsProcessed,i={},n=this.parent.resourceBase.resourceCollection,r=0;r<n.length;r++)i[n[r].field]=e.groupOrder[r];var a=Object.keys(i);return t.filter((function(e){return a.every((function(t){return e[t]instanceof Array?e[t].indexOf(i[t])>-1:e[t]===i[t]}))}))}},{key:"sortByTime",value:function(e){var t=this.parent.eventFields;return e.sort((function(e,i){var n=i[t.startTime];return e[t.startTime].getTime()-n.getTime()})),e}},{key:"sortByDateTime",value:function(e){var t=this.parent.eventFields;return e.sort((function(e,i){var n=e[t.startTime],r=i[t.startTime],a=i[t.endTime],o=e[t.endTime].getTime()-n.getTime(),s=a.getTime()-r.getTime();return n.getTime()-r.getTime()||s-o})),e}},{key:"getSmallestMissingNumber",value:function(e){for(var t=Math.max.apply(Math,e),i=0;i<t;i++)if(-1===e.indexOf(i))return i;return t+1}},{key:"splitEventByDay",value:function(e){var t=this.parent.eventFields,i=[],n=e[t.startTime],r=e[t.endTime];if(bH(new Date(n.getTime()))<bH(new Date(r.getTime())))for(var a=new Date(n.getTime()),o=CH(bH(new Date(n.getTime())),1),s=0===r.getHours()&&0===r.getMinutes()?r:CH(r,1),l=1,c=SH(n.getTime(),s.getTime());o<=r&&a.getTime()!==o.getTime();){var u=DD({},e);u[t.startTime]=a,u[t.endTime]=o,u.data={index:l,count:c},u.Guid=this.generateGuid(),u.isSpanned=!0,i.push(u),a=o,bH(new Date(a.getTime())).getTime()===bH(new Date(r.getTime())).getTime()&&o.getTime()!==r.getTime()?(o=new Date(a.getTime()),o=new Date(o.setHours(r.getHours(),r.getMinutes(),r.getSeconds()))):o=CH(bH(new Date(a.getTime())),1),l++}else i.push(e);return i}},{key:"splitEvent",value:function(e,t){var i=this.parent.eventFields,n=bH(new Date(e[i.startTime]+"")).getTime(),r=bH(new Date(e[i.endTime]+"")).getTime();if(kH(e[i.endTime])<=0){var a=CH(bH(new Date(e[i.endTime]+"")),-1).getTime();r=n>a?n:a}var o=n,s=r,l=[];if(n!==r){n<t[0].getTime()&&(n=t[0].getTime()),r>t[t.length-1].getTime()&&(r=t[t.length-1].getTime());for(var c=n,u=0;u<this.slots.length;u++){var h=this.slots[u];if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){var d,p=[],f=_createForOfIteratorHelper(h);try{for(f.s();!(d=f.n()).done;){var v=d.value;p.push(new Date(v))}}catch(x){f.e(x)}finally{f.f()}var m=this.getRenderedDates(p);if(!RD(m)&&m.length>0){h=[];var g,y=_createForOfIteratorHelper(m);try{for(y.s();!(g=y.n()).done;){var b=g.value;h.push(b.getTime())}}catch(x){y.e(x)}finally{y.f()}}}var k=h[0];if((c=c<=k&&r>=k?k:c)>r||k>r)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView){var C=h.indexOf(c);if(-1!==C){var w=h.indexOf(r),_=-1!==w;if(w=_?w:h.length-1,l.push(this.cloneEventObject(e,h[C],h[w],w-C+1,h[C]!==o,h[w]!==s)),_)break}}else if(this.dateInRange(c,h[0],h[h.length-1])){for(var S=[],E=0;E<h.length;E++)this.dateInRange(h[E],o,s)&&S.push(h[E]);if(S.length>0)if(this.parent.activeViewOptions.group.byDate){var T,A=_createForOfIteratorHelper(S);try{for(A.s();!(T=A.n()).done;){var O=T.value;l.push(this.cloneEventObject(e,O,O,1,O!==o,O!==s))}}catch(x){A.e(x)}finally{A.f()}}else l.push(this.cloneEventObject(e,S[0],S[S.length-1],S.length,S[0]!==o,S[S.length-1]!==s))}}}else l.push(this.cloneEventObject(e,n,r,1,!1,!1));return l}},{key:"cloneEventObject",value:function(e,t,i,n,r,a){var o=this.parent.eventFields,s=DD({},e,null,!0),l={count:n,isLeft:r,isRight:a};return l[o.startTime]=e[o.startTime],l[o.endTime]=e[o.endTime],s.data=l,s[o.startTime]=new Date(t),s[o.endTime]=new Date(i),s}},{key:"dateInRange",value:function(e,t,i){return t<=e&&e<=i}},{key:"getSelectedEventElements",value:function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0){var t,i='div[data-guid="'+e.getAttribute("data-guid")+'"]',n=_createForOfIteratorHelper([].slice.call(this.parent.element.querySelectorAll(i)));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.parent.selectedElements.push(r)}}catch(o){n.e(o)}finally{n.f()}}else{var a=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=a}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements}},{key:"getSelectedEvents",value:function(){var e=this,t=[],i=[];return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border")).filter((function(n){0===t.filter((function(e){return e.Guid===n.getAttribute("data-guid")})).length&&t.push(e.getEventByGuid(n.getAttribute("data-guid"))),i.push(n)})),{event:t.length>1?t:t[0],element:i.length>1?i:i[0]}}},{key:"removeSelectedAppointmentClass",value:function(){var e,t=this.getSelectedAppointments(),i=_createForOfIteratorHelper(t);try{for(i.s();!(e=i.n()).done;){e.value.setAttribute("aria-selected","false")}}catch(n){i.e(n)}finally{i.f()}_P(t,"e-appointment-border"),"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||_P(t,"e-active-appointment-agenda")}},{key:"addSelectedAppointments",value:function(e){var t,i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){t.value.setAttribute("aria-selected","true")}}catch(n){i.e(n)}finally{i.f()}"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass(),wP(e,"e-appointment-border")}},{key:"getSelectedAppointments",value:function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border,.e-appointment:focus"))}},{key:"focusElement",value:function(){if(!this.parent.eventWindow.dialogObject||!this.parent.eventWindow.dialogObject.visible){var e=this.parent.getSelectedElements();if(e.length>0){if(this.parent.keyboardInteractionModule){var t=!RD(this.parent.activeCellsData)&&this.parent.activeCellsData.element||e[e.length-1];this.parent.keyboardInteractionModule.selectCells(t instanceof Array,t)}}else{var i=this.getSelectedAppointments();i.length>0&&i[i.length-1].focus()}}}},{key:"selectWorkCellByTime",value:function(e){var t;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return t;if(e.length>0){var i,n=e[e.length-1],r=n[this.parent.eventFields.startTime],a=new Date(+r).setMinutes(0,0,0),o=this.isAllDayAppointment(n);("Month"===this.parent.currentView||o)&&(a=new Date(+r).setHours(0,0,0,0)),i=o&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();var s='[data-date="'+this.parent.getMsFromDate(new Date(a))+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(s+='[data-group-index="'+this.getGroupIndexFromEvent(n)+'"]'),t=i.querySelector(s))return this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,t),t}return t}},{key:"getGroupIndexFromEvent",value:function(e){var t=this.parent.resourceCollection.slice(-1)[0].name,i=this.parent.resourceCollection.length-1,n=this.parent.resourceCollection.slice(-1)[0].field,r=e[n]instanceof Array?e[n][0]:e[n],a=this.parent.resourceCollection.filter((function(e,n){return e.name===t?(i=n,e):null}))[0];return i>0?this.parent.resourceBase.getIndexFromResourceId(r,t,a,e,this.parent.resourceCollection[i-1].field):this.parent.resourceBase.getIndexFromResourceId(r,t,a)}},{key:"isAllDayAppointment",value:function(e){var t=this.parent.eventFields,i=e[t.isAllDay],n=(e[t.endTime].getTime()-e[t.startTime].getTime())/864e5>=1;return!(!i&&!n)}},{key:"addEventListener",value:function(){this.parent.on("document-click",this.appointmentBorderRemove,this)}},{key:"appointmentBorderRemove",value:function(e){var t=e.event.target;MP(t,".e-appointment")?"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass():MP(t,".e-popup-open")||this.removeSelectedAppointmentClass()}},{key:"wireAppointmentEvents",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!RD(t)&&t[this.parent.eventFields.isReadonly];OR.add(e,"click",this.eventClick,this),this.parent.isAdaptive||OR.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||n||OR.add(e,"dblclick",this.eventDoubleClick,this),this.parent.activeViewOptions.readonly||n||i||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))}},{key:"eventTouchClick",value:function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))}},{key:"renderResizeHandler",value:function(e,t,i){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly&&!i)for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n],o=CP("div",{className:"e-event-resize"});switch(a){case"isLeft":t.isLeft||(o.appendChild(CP("div",{className:"e-left-right-resize"})),wP([o],this.parent.enableRtl?"e-right-handler":"e-left-handler"),TP([o],e));break;case"isRight":t.isRight||(o.appendChild(CP("div",{className:"e-left-right-resize"})),wP([o],this.parent.enableRtl?"e-left-handler":"e-right-handler"),AP([o],e));break;case"isTop":t.isTop||(o.appendChild(CP("div",{className:"e-top-bottom-resize"})),wP([o],"e-top-handler"),TP([o],e));break;case"isBottom":t.isBottom||(o.appendChild(CP("div",{className:"e-top-bottom-resize"})),wP([o],"e-bottom-handler"),AP([o],e))}}}},{key:"eventClick",value:function(e){var t=this,i=e.target;if(!i.classList.contains("e-drag-clone")&&!i.classList.contains("e-resize-clone"))if(e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border"));var n=MP(e.target,".e-appointment");this.getSelectedEventElements(n),this.activeEventData(e,!1),this.parent.trigger("select",{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"});var r=DD(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger("eventClick",r)}else{this.removeSelectedAppointmentClass(),this.activeEventData(e,!0),this.parent.trigger("select",{data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"});var a=DD(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger("eventClick",a,(function(e){e.cancel?(t.removeSelectedAppointmentClass(),t.parent.quickPopup&&t.parent.quickPopup.quickPopupHide()):("Agenda"!==t.parent.currentView&&"MonthAgenda"!==t.parent.currentView||wP([t.parent.activeEventData.element],"e-active-appointment-agenda"),t.parent.allowInline?t.parent.notify("inlineClick",{data:e.event,element:e.element,type:"Event"}):t.parent.notify("eventClick",e))}))}}},{key:"eventDoubleClick",value:function(e){this.parent.quickPopup.quickPopupHide(!0),"touchstart"===e.type&&this.activeEventData(e,!0),this.removeSelectedAppointmentClass(),this.parent.activeEventData.element.classList.contains("e-inline-appointment")||this.parent.activeEventData.element.querySelector(".e-inline-subject")||(!RD(this.parent.activeEventData.event)&&RD(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])?this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save"):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert()))}},{key:"getEventByGuid",value:function(e){return this.parent.eventsProcessed.filter((function(t){return t.Guid===e}))[0]}},{key:"getEventById",value:function(e){var t=this;return this.parent.eventsData.filter((function(i){return i[t.parent.eventFields.id]===e}))[0]}},{key:"generateGuid",value:function(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},{key:"getEventIDType",value:function(){return 0!==this.parent.eventsData.length?typeof this.parent.eventsData[0][this.parent.eventFields.id]:0!==this.parent.blockData.length?typeof this.parent.blockData[0][this.parent.eventFields.id]:"string"}},{key:"getEventMaxID",value:function(e){var t=this;if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;var i,n=this.getEventIDType();if("string"===n&&(i=this.generateGuid()),"number"===n){var r=this.parent.eventsData.concat(this.parent.blockData),a=Math.max.apply(Math,r.map((function(e){return e[t.parent.eventFields.id]})));i=(a=RD(e)?a:a+e)+1}return i}},{key:"activeEventData",value:function(e,t){var i=this,n=MP(e.target,".e-appointment"),r=n.getAttribute("data-guid");t&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+r+'"]'))),n.focus());var a=this.getEventByGuid(r);a&&a.isSpanned&&(a=this.parent.eventsData.filter((function(e){return e[i.parent.eventFields.id]===a[i.parent.eventFields.id]}))[0]),this.parent.activeEventData={event:a,element:n}}},{key:"generateOccurrence",value:function(e,t,i,n){var r=e[this.parent.eventFields.startTime],a=e[this.parent.eventFields.recurrenceRule],o=e[this.parent.eventFields.endTime].getTime()-r.getTime();t=new Date((t||this.parent.activeView.startDate()).getTime()-o);var s,l=e[this.parent.eventFields.recurrenceException];"Agenda"!==this.parent.currentView&&n&&(s=function(e,t){return Math.ceil((t.getTime()-e.getTime())/864e5)}(this.parent.activeView.startDate(),this.parent.activeView.endDate())+1);var c=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),u=GH(r,a,l,this.parent.activeViewOptions.firstDayOfWeek,s,t,this.parent.calendarMode,i,c);"Agenda"===this.parent.currentView&&-1===a.indexOf("COUNT")&&-1===a.indexOf("UNTIL")&&(RD(e.generatedDates)?e.generatedDates={start:new Date(u[0]),end:new Date(u[u.length-1])}:(u[0]<e.generatedDates.start.getTime()&&(e.generatedDates.start=new Date(u[0])),u[u.length-1]>e.generatedDates.end.getTime()&&(e.generatedDates.end=new Date(u[u.length-1]))));var h,d=[],p=_createForOfIteratorHelper(u);try{for(p.s();!(h=p.n()).done;){var f=h.value,v=DD({},e,null,!0);v[this.parent.eventFields.startTime]=new Date(f),v[this.parent.eventFields.endTime]=new Date(new Date(f).setMilliseconds(o)),v[this.parent.eventFields.recurrenceID]=v[this.parent.eventFields.id],delete v[this.parent.eventFields.recurrenceException],delete v[this.parent.eventFields.followingID],v.Guid=this.generateGuid(),d.push(v)}}catch(m){p.e(m)}finally{p.f()}return d}},{key:"getParentEvent",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];do{(e=this.getFollowingEvent(e))&&(t=DD({},e,null,!0))}while(e&&i);if(i&&t){var n=this.getEventCollections(t),r=n.follow.slice(-1)[0];n.occurrence.length>0&&!t[this.parent.eventFields.recurrenceException]&&(r=n.occurrence.slice(-1)[0]),r&&(t[this.parent.eventFields.recurrenceRule]=r[this.parent.eventFields.recurrenceRule])}return t}},{key:"getEventCollections",value:function(e,t){var i=[],n=[],r=e;do{(r=this.getFollowingEvent(r,!0))&&i.push(r),n=n.concat(this.getOccurrenceEvent(r||e))}while(r);var a={};if(t){var o=this.parent.eventFields;a={follow:i.filter((function(e){return e[o.startTime]>=t[o.startTime]})),occurrence:n.filter((function(e){return e[o.startTime]>=t[o.startTime]}))}}else a={follow:i,occurrence:n};return a}},{key:"getFollowingEvent",value:function(e,t){var i,n=this.parent.eventFields;return i=t?e[n.id]:e[n.recurrenceID]||e[n.followingID],this.parent.eventsData.filter((function(e){return e[t?n.followingID:n.id]===i})).shift()}},{key:"isFollowingEvent",value:function(e,t){var i=e[this.parent.eventFields.startTime],n=t[this.parent.eventFields.startTime];return i.getHours()===n.getHours()&&i.getMinutes()===n.getMinutes()&&i.getSeconds()===n.getSeconds()}},{key:"getOccurrenceEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t?"Guid":i?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,r=t?"Guid":this.parent.eventFields.id;return(t?this.parent.eventsProcessed:this.parent.eventsData).filter((function(t){return t[n]===e[r]}))}},{key:"getOccurrencesByID",value:function(e){var t,i=this.parent.eventFields,n=[],r=_createForOfIteratorHelper(this.parent.eventsData.filter((function(t){return t[i.id]===e})));try{for(r.s();!(t=r.n()).done;){var a=t.value;RD(a[i.recurrenceRule])||(n=n.concat(this.generateOccurrence(a)))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"getOccurrencesByRange",value:function(e,t){var i,n=this.parent.eventFields,r=[],a=_createForOfIteratorHelper(this.parent.eventsData);try{for(a.s();!(i=a.n()).done;){var o=i.value;RD(o[n.recurrenceRule])||(r=r.concat(this.generateOccurrence(o)))}}catch(s){a.e(s)}finally{a.f()}return r.filter((function(i){return i[n.startTime]>=e&&i[n.endTime]<=t&&!RD(i[n.recurrenceID])}))}},{key:"getDeletedOccurrences",value:function(e){var t,i=this,n=this.parent.eventFields,r=[];return(t="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter((function(t){return t[n.id]===e}))[0]:DD({},e,null,!0))[n.recurrenceException]&&function(){for(var a=t[n.recurrenceException].split(","),o=function(o,s){if(0===i.parent.eventsData.filter((function(e){return e[n.recurrenceID]===t[n.id]&&e[n.recurrenceException]===a[s]})).length){var l=YH(a[s]),c=DD({},e,null,!0);c[n.recurrenceID]=t[n.id],delete c[n.followingID],c[n.recurrenceException]=a[s];var u=new Date(l.getTime()),h=t[n.endTime].getTime()-t[n.startTime].getTime(),d=new Date(u.getTime());d.setMilliseconds(h),c[n.startTime]=new Date(u.getTime()),c[n.endTime]=new Date(d.getTime()),r.push(c)}},s=0,l=a.length;s<l;s++)o(0,s)}(),r}},{key:"applyResourceColor",value:function(e,t,i,n,r){if(this.parent.resourceBase){var a=this.parent.resourceBase.getResourceColor(t,n);a&&(e.style[i]=RD(r)?a:function(e,t){return e=e.replace("#",""),"rgba(".concat(parseInt(e.substring(0,e.length/3),16),", ").concat(parseInt(e.substring(e.length/3,2*e.length/3),16),", ").concat(parseInt(e.substring(2*e.length/3,3*e.length/3),16),", ").concat(t,")")}(a,r))}}},{key:"createBlockAppointmentElement",value:function(e,t){var i,n=e[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,r=CP("div",{className:"e-block-appointment",attrs:{"data-id":"Appointment_"+e[this.parent.eventFields.id],"aria-readonly":"true","aria-selected":"false"}});if(RD(this.parent.activeViewOptions.eventTemplate))i=[CP("div",{className:"e-subject",innerHTML:n})];else{var a=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",o=DH(e);i=this.parent.getAppointmentTemplate()(o,this.parent,"eventTemplate",a,!1)}return AP(i,r),this.setWrapperAttributes(r,t),r}},{key:"setWrapperAttributes",value:function(e,t){RD(this.cssClass)||wP([e],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&e.setAttribute("data-group-index",t.toString())}},{key:"getReadonlyAttribute",value:function(e){return(e[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()}},{key:"isBlockRange",value:function(e){var t,i=e instanceof Array?e:[e],n=!1,r=this.parent.eventFields,a=_createForOfIteratorHelper(i);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=[];RD(o[r.recurrenceRule])||!RD(o[r.recurrenceID])&&o[r.id]!==o[r.recurrenceID]?s.push(o):s=this.generateOccurrence(o);var l,c=_createForOfIteratorHelper(s);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(this.filterBlockEvents(u).length>0){n=!0;break}}}catch(h){c.e(h)}finally{c.f()}}}catch(h){a.e(h)}finally{a.f()}return this.parent.uiStateValues.isBlock=n,n}},{key:"getFilterEventsList",value:function(e,t){return new TF(e).executeLocal((new gF).where(t))}},{key:"getSeriesEvents",value:function(e,t){var i,n,r=this.parent.eventFields;t=RD(t)?e[r.startTime]:t;var a,o=[],s=e[r.id],l=e[r.followingID],c="EditSeries"===this.parent.currentAction?"greaterthan":"greaterthanorequal";do{a=new yF(r.followingID,"equal",s).and(new yF(r.startTime,c,t)),RD(i=(n=this.getFilterEventsList(this.parent.eventsData,a)).slice(-1)[0])||i[r.id]===l?l=null:(o.push(i),s=i[r.id],l=i[r.followingID])}while(1===n.length&&!RD(i[r.followingID]));return o}},{key:"getEditedOccurrences",value:function(e,t){var i,n,r=this.parent.eventFields,a=[],o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=new yF(r.recurrenceID,"equal",s[r.id]).or(new yF(r.recurrenceID,"equal",s[r.followingID]).and(new yF(r.recurrenceID,"notequal",void 0)).and(new yF(r.recurrenceID,"notequal",null)));"EditFollowingEvents"!==this.parent.currentAction&&"DeleteFollowingEvents"!==this.parent.currentAction||(l=l.and(new yF(r.startTime,"greaterthanorequal",t))),i=this.getFilterEventsList(this.parent.eventsData,l),a=a.concat(i)}}catch(c){o.e(c)}finally{o.f()}return a}},{key:"getRenderedDates",value:function(e){var t,i=0,n=e.length;if(e[0]<this.parent.minDate&&e[e.length-1]>this.parent.maxDate){for(var r=0;r<e.length;r++)e[r].getTime()===this.parent.minDate.getTime()&&(i=r),e[r].getTime()===this.parent.maxDate.getTime()&&(n=r);t=e.filter((function(t){return t>=e[i]&&t<=e[n]}))}return t}},{key:"isValidEvent",value:function(e,t,i,n){var r=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),a=n.startHour.getTime()<=t.getTime()&&e[this.parent.eventFields.startTime].getTime()>=n.startHour.getTime()&&e[this.parent.eventFields.endTime].getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return r||a}}]),e}(),KU=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).dateRender=[],n.renderedEvents=[],n.renderedAllDayEvents=[],n.overlapEvents=[],n.moreEvents=[],n.overlapList=[],n.allDayEvents=[],n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.allDayLevel=0,n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.element=n.parent.activeView.getPanel(),n.fields=n.parent.eventFields,n.animation=new oM({progress:n.animationUiUpdate.bind(_assertThisInitialized(n))}),n.addEventListener(),n}return _createClass(i,[{key:"renderAppointments",value:function(){var e,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment,.e-appointment,.e-row-count-wrapper")),i=!(!this.parent.crudModule||!this.parent.crudModule.crudObj.isCrudAction),n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!i||r.classList.contains("e-all-day-appointment")||r.classList.contains("e-row-count-wrapper"))IP(r);else for(var a=parseInt(r.getAttribute("data-group-index"),10),o=0,s=this.parent.crudModule.crudObj.sourceEvent.length;o<s;o++)a!==this.parent.crudModule.crudObj.sourceEvent[o].groupIndex&&a!==this.parent.crudModule.crudObj.targetEvent[o].groupIndex||IP(r)}}catch(c){n.e(c)}finally{n.f()}if(this.element.querySelector(".e-work-cells")&&(this.allDayElement=[].slice.call(this.element.querySelectorAll(".e-all-day-cells")),this.setAllDayRowHeight(0),0!==this.parent.eventsProcessed.length||0!==this.parent.blockProcessed.length)){var l=this.element.querySelector(".e-all-day-appointment-section");OR.remove(l,"click",this.rowExpandCollapse),OR.add(l,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter((function(e,t,i){return t===i.map((function(e){return e.Guid})).indexOf(e.Guid)})),_P(this.allDayElement,"e-animate"),this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.renderEvents("allDayEvents")),this.parent.notify("content-ready",{}),wP(this.allDayElement,"e-animate"),i&&(this.parent.crudModule.crudObj.isCrudAction=!1)}}},{key:"initializeValues",value:function(){if(this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.cellHeight=parseFloat(this.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0)for(var e=0,t=this.resources.length;e<t;e++)this.dateRender[e]=this.resources[e].renderDates}},{key:"getHeight",value:function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i}},{key:"appendEvent",value:function(e,t,i,n){var r=[].slice.call(this.element.querySelectorAll(".e-appointment-wrapper"));LP(t,this.parent.enableRtl?{right:n}:{left:n});var a=t.classList.contains("e-block-appointment")?"blockEvent":"event",o={data:DD({},e,null,!0),element:t,cancel:!1,type:a};this.parent.trigger("eventRendered",o,(function(e){e.cancel||r[i].appendChild(t)}))}},{key:"processBlockEvents",value:function(){var e,t=0,i=_createForOfIteratorHelper(this.getResourceList());try{for(i.s();!(e=i.n()).done;)for(var n=e.value,r=this.dateRender[n],a=0,o=r.length;a<o;a++){var s,l=new Date(r[a].getTime()),c=CH(r[a],1),u=_createForOfIteratorHelper(this.filterEvents(l,c,this.parent.blockProcessed,this.resources[n]));try{for(u.s();!(s=u.n()).done;){var h=s.value;this.parent.resourceBase&&this.setValues(h,n),this.renderBlockEvents(h,a,n,t),this.cssClass=null,this.groupOrder=null}}catch(d){u.e(d)}finally{u.f()}t+=1}}catch(d){i.e(d)}finally{i.f()}}},{key:"renderBlockEvents",value:function(e,t,i,n){var r=this.isSpannedEvent(e,t,i),a=r[this.fields.startTime],o=r[this.fields.endTime],s=_H(bH(new Date(this.dateRender[i][t].getTime())),this.startHour,this.endHour);if(a<=o&&this.isValidEvent(e,a,o,s)){var l,c;r[this.fields.isAllDay]?(c=FD(this.parent.element.querySelector(".e-content-wrap table").offsetHeight),l=FD(0)):(c=FD(this.getHeight(a,o)),l=FD(this.getTopValue(a,t,i)));var u=this.createBlockAppointmentElement(e,i);LP(u,{width:"100%",height:c,top:l}),this.appendEvent(e,u,this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:n,"0px")}}},{key:"renderEvents",value:function(e){var t=this;_P(this.allDayElement,"e-animate");var i,n,r="allDayEvents"===e?this.sortByDateTime(this.allDayEvents):void 0,a=this.getResourceList(),o=0,s=_createForOfIteratorHelper(a);try{var l=function(){var a=n.value;i=!0,t.parent.crudModule&&t.parent.crudModule.crudObj.isCrudAction&&"allDayEvents"!==e&&0===t.parent.crudModule.crudObj.sourceEvent.filter((function(e){return e.groupIndex===a})).length&&0===t.parent.crudModule.crudObj.targetEvent.filter((function(e){return e.groupIndex===a})).length&&(i=!1),t.slots=[];var s=t.dateRender[a],l=t.getRenderedDates(s)||s;t.slots.push(s.map((function(e){return+e})));for(var c=0,u=s.length;c<u&&s[c]<=l[l.length-1];c++){t.renderedEvents=[];var h=new Date(s[c].getTime()),d=CH(s[c],1),p=t.filterEvents(h,d,r,t.resources[a]);if(i){var f,v=_createForOfIteratorHelper(p);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(t.parent.resourceBase&&t.setValues(m,a),"allDayEvents"===e)t.renderAllDayEvents(m,c,a,o);else if(t.isAllDayAppointment(m))t.allDayEvents.push(DD({},m,null,!0));else{if(t.parent.eventSettings.enableMaxHeight&&t.getOverlapIndex(m,c,!1,a)>0)continue;t.renderNormalEvents(m,c,a,o)}t.cssClass=null,t.groupOrder=null}}catch(k){v.e(k)}finally{v.f()}}else{var g,y=_createForOfIteratorHelper(p);try{for(y.s();!(g=y.n()).done;){var b=g.value;t.isAllDayAppointment(b)&&t.allDayEvents.push(DD({},b,null,!0))}}catch(k){y.e(k)}finally{y.f()}}o+=1}};for(s.s();!(n=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}}},{key:"setValues",value:function(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[t].cssClass,this.groupOrder=this.resources[t].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)}},{key:"getResourceList",value:function(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map((function(e,t){return t}))}},{key:"createAppointmentElement",value:function(e,t,i,n){var r=this.parent.eventFields,a=e[r.subject]||this.parent.eventSettings.fields.subject.default,o=CP("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[r.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e)}});e[this.fields.isReadonly]&&wP([o],"e-read-only");var s,l=CP("div",{className:"e-appointment-details"});o.appendChild(l),this.parent.activeViewOptions.group.resources.length>0&&o.setAttribute("data-group-index",(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:n).toString());var c=i;if(RD(this.parent.activeViewOptions.eventTemplate)){var u=CP("div",{className:"e-subject",innerHTML:a});if(t)if(e[r.isAllDay])s=[u];else{s=[];var h=CP("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(e[r.startTime])}),d=CP("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(e[r.endTime])});wP([u],"e-text-center"),c.isLeft||s.push(h),s.push(u),c.isRight||s.push(d)}else{var p=this.parent.getTimeString(e[r.startTime])+" - "+this.parent.getTimeString(e[r.endTime]);s=[u,CP("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:p}),CP("div",{className:"e-location",innerHTML:e[r.location]||this.parent.eventSettings.fields.location.default||""})]}}else{var f=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",v=DH(e);s=this.parent.getAppointmentTemplate()(v,this.parent,"eventTemplate",f,!1)}if(AP(s,l),!(this.parent.isAdaptive||RD(e[r.recurrenceRule])&&RD(e[r.recurrenceID]))){var m=CP("div",{className:"e-icons "+(e[r.id]===e[r.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")});t?l.appendChild(m):o.appendChild(m)}return this.renderSpannedIcon(t?l:o,c),RD(this.cssClass)||wP([o],this.cssClass),this.applyResourceColor(o,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(o,c,e[this.fields.isReadonly]),o}},{key:"createMoreIndicator",value:function(e,t,i){var n=i+t,r=e[n];if(r.childElementCount<=0){var a=CP("div",{className:"e-row-count-wrapper",id:"e-row-count-wrapper-"+n.toString()}),o=CP("div",{className:"e-more-indicator",attrs:{tabindex:"0",role:"list","data-index":n.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});a.appendChild(o),r.appendChild(a),OR.add(o,"click",this.rowExpandCollapse,this)}else{var s=r.querySelector(".e-more-indicator"),l=parseInt(s.getAttribute("data-count"),10)+1;s.setAttribute("data-count",l.toString()),s.innerHTML="+"+l+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}}},{key:"renderSpannedIcon",value:function(e,t){var i=CP("div",{className:"e-indicator e-icons"});if(t.isLeft){var n=i.cloneNode();wP([n],"e-left-icon"),TP([n],e)}if(t.isRight){var r=i.cloneNode();wP([r],"e-right-icon"),AP([r],e)}if(t.isTop){var a=i.cloneNode();wP([a],"e-up-icon"),TP([a],e)}if(t.isBottom){var o=i.cloneNode();wP([o],"e-down-icon"),AP([o],e)}}},{key:"isSpannedEvent",value:function(e,t,i){var n=bH(this.dateRender[i][t]),r=this.getRenderedDates(this.dateRender[i])||[n];0===r.filter((function(e){return e.getDay()===t})).length&&(n=bH(r[0]));var a=this.parent.eventFields,o=_H(n,this.startHour,this.endHour),s=DD({},e,null,!0);return s.isSpanned={isBottom:!1,isTop:!1},e[a.startTime].getTime()<o.startHour.getTime()&&(s[a.startTime]=o.startHour,s.isSpanned.isTop=!0),e[a.endTime].getTime()>o.endHour.getTime()&&(s[a.endTime]=o.endHour,s.isSpanned.isBottom=!0),s}},{key:"renderAllDayEvents",value:function(e,t,i,n,r){var a=this,o=this.getRenderedDates(this.dateRender[i])||this.dateRender[i];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[i][t].getTime()],o=[this.dateRender[i][t]]);var s=this.splitEvent(e,o)[0],l=this.element.querySelector(".e-all-day-cells:first-child"),c=l.offsetTop,u=new Date(s[this.parent.eventFields.startTime].getTime()),h=new Date(s[this.parent.eventFields.endTime].getTime()),d=0,p=1,f=o[0].getTime()<=u.getTime()&&CH(o.slice(-1)[0],1).getTime()>=u.getTime();if(u<=h&&f){var v=[];if(this.renderedAllDayEvents[i]&&(v=this.renderedAllDayEvents[i].filter((function(t){return t.Guid===e.Guid})),this.parent.activeViewOptions.group.byDate&&(v=v.filter((function(e){return e[a.parent.eventFields.startTime]>=o[t]&&e[a.parent.eventFields.endTime]<=CH(new Date(+o[t]),1)})))),0===v.length){var m=s.data.count,g=this.getOverlapIndex(s,t,!0,i);s.Index=g,this.allDayLevel=this.allDayLevel<g?g:this.allDayLevel;var y=s.data.isRight?0:"Day"===this.parent.currentView?4:7;m>=0&&(d=100*m-y),RD(this.renderedAllDayEvents[i])&&(this.renderedAllDayEvents[i]=[]),this.renderedAllDayEvents[i].push(DD({},s,null,!0));var b,k=[].slice.call(this.element.querySelector(".e-all-day-row").children),C=this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:n,w=this.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(C+1)+")");wP([b=r?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!0,s.data,i)],"e-all-day-appointment"),this.parent.trigger("eventRendered",{data:e,element:b,cancel:!1},(function(t){if(!t.cancel){w.appendChild(b);var i=b.offsetHeight;if(LP(b,{width:d+"%",top:FD(p+=(0===g?c:c+g*i)+1)}),g>1){a.moreEvents.push(b);for(var n=0,r=m;n<r;n++)a.createMoreIndicator(k,n,C)}l.setAttribute("data-count",a.allDayLevel.toString()),a.setAllDayRowHeight(4+(!a.parent.uiStateValues.expand&&a.allDayLevel>2?3*i:(a.allDayLevel+1)*i)),a.addOrRemoveClass(),a.wireAppointmentEvents(b,e)}}))}}}},{key:"renderNormalEvents",value:function(e,t,i,n,r){var a=this.isSpannedEvent(e,t,i),o=a[this.fields.startTime],s=a[this.fields.endTime],l="0%",c=0,u=_H(bH(new Date(this.dateRender[i][t].getTime())),this.startHour,this.endHour),h=this.isValidEvent(e,o,s,u);if(o<=s&&h){var d=this.getHeight(o,s);o.getTime()>u.startHour.getTime()&&(c=this.getTopValue(o,t,i));var p=this.getOverlapIndex(a,t,!1,i);a.Index=p,this.overlapList.push(a),this.overlapList.length>1?(RD(this.overlapEvents[p])&&(this.overlapEvents[p]=[]),this.overlapEvents[p].push(a)):(this.overlapEvents=[],this.overlapEvents.push([a])),l=this.getEventWidth();var f,v=this.adjustOverlapElements({index:p,left:"0%",width:l,day:t,dayIndex:n,record:a,resource:i});l=v.appWidth,RD(this.renderedEvents[i])&&(this.renderedEvents[i]=[]),this.renderedEvents[i].push(DD({},a,null,!0)),LP(f=r?this.parent.inlineModule.createInlineAppointmentElement(e):this.createAppointmentElement(e,!1,a.isSpanned,i),{width:this.parent.eventSettings.enableMaxHeight?"100%":v.appWidth,height:d+"px",top:c+"px"});var m=d-40-15*f.querySelectorAll(".e-indicator").length,g=f.querySelector(".e-subject");!this.parent.isAdaptive&&g&&(g.style.maxHeight=FD(m)),this.appendEvent(e,f,this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:n,v.appLeft),this.wireAppointmentEvents(f,e)}}},{key:"getEventWidth",value:function(){var e=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length;return(e<0?0:e)+"%"}},{key:"getEventLeft",value:function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"}},{key:"getTopValue",value:function(e,t,i){var n=_H(bH(this.dateRender[i][t]),this.startHour,this.endHour).startHour,r=60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes());return this.parent.activeViewOptions.timeScale.enable?r*this.cellHeight*this.slotCount/this.interval:0}},{key:"getOverlapIndex",value:function(e,t,i,n){var r=this,a=this.parent.eventFields,o=[],s=-1;if(this.overlapEvents=[],i){if(!RD(this.renderedAllDayEvents[n])){var l=bH(new Date(this.dateRender[n][t].getTime()));o=this.renderedAllDayEvents[n].filter((function(e){return bH(e[a.startTime]).getTime()<=l.getTime()&&bH(e[a.endTime]).getTime()>=l.getTime()})),this.parent.activeViewOptions.group.resources.length>0&&(o=this.filterEventsByResource(this.resources[n],o))}}else{var c=RD(this.renderedEvents[n])?[]:this.renderedEvents[n],u=[],h=e[a.startTime],d=e[a.endTime];this.overlapList=c.filter((function(e){return e[a.endTime]>h&&e[a.startTime]<d||e[a.startTime]>=d&&e[a.endTime]<=h})),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[n],this.overlapList)),this.overlapList.forEach((function(e){var t=c.filter((function(t){return t[a.endTime]>=e[a.startTime]&&t[a.startTime]<=e[a.endTime]}));r.parent.activeViewOptions.group.resources.length>0&&(t=r.filterEventsByResource(r.resources[n],t));var i=r.overlapList.filter((function(e){return-1===t.indexOf(e)}));return u.concat(i)})),this.overlapList=this.overlapList.concat(u);var p,f=_createForOfIteratorHelper(o=this.overlapList);try{for(f.s();!(p=f.n()).done;){var v=p.value,m=v.Index;RD(this.overlapEvents[m])?this.overlapEvents[m]=[v]:this.overlapEvents[m].push(v)}}catch(y){f.e(y)}finally{f.f()}}if(o.length>0){var g=o.map((function(e){return e.Index}));s=g.length>0?this.getSmallestMissingNumber(g):0}return-1===s?0:s}},{key:"adjustOverlapElements",value:function(e){for(var t={appWidth:e.width,appLeft:e.left},i=0,n=this.overlapEvents.length;i<n;i++)if(!RD(this.overlapEvents[i]))for(var r=0,a=this.overlapEvents[i].length;r<a;r++){var o=this.element.querySelector("#e-appointment-wrapper-"+(this.parent.activeViewOptions.group.byDate?this.resources.length*e.day+e.resource:e.dayIndex));if(o.childElementCount>0){var s=this.overlapEvents[i][r].Guid;if(o.querySelectorAll('div[data-guid="'+s+'"]').length>0&&s!==e.record.Guid){var l=o.querySelector('div[data-guid="'+s+'"]');parseFloat(e.width)<=parseFloat(l.style.width)&&(this.parent.enableRtl?l.style.right=this.getEventLeft(e.width,i):l.style.left=this.getEventLeft(e.width,i),l.style.width=parseFloat(e.width)+"%",t.appWidth=l.style.width)}else{var c=e.width;RD(this.overlapEvents[i-1])&&(c=this.getEventWidth()),t.appWidth=c,t.appLeft=this.getEventLeft(c,e.index)}}}return t}},{key:"setAllDayRowHeight",value:function(e){var t,i=_createForOfIteratorHelper(this.allDayElement);try{for(i.s();!(t=i.n()).done;){t.value.style.height=e/12+"em"}}catch(n){i.e(n)}finally{i.f()}this.animation.animate(this.allDayElement[0])}},{key:"addOrRemoveClass",value:function(){var e=this;this.moreEvents.filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(wP([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(_P([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(_P([t],"e-appointment-expand"),wP([t],"e-appointment-collapse")):(_P([t],"e-appointment-collapse"),wP([t],"e-appointment-expand")),this.allDayLevel>2?_P([t],"e-disable"):wP([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?_P([t],"e-disable"):wP([t],"e-disable")}))}},{key:"getEventHeight",value:function(){var e=CP("div",{className:"e-appointment",styles:"visibility:hidden"});this.element.querySelector(".e-all-day-appointment-wrapper:first-child").appendChild(e);var t=e.offsetHeight;return IP(e),t}},{key:"rowExpandCollapse",value:function(){var e,t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=t.classList.contains("e-appointment-expand"),this.parent.uiStateValues.expand?(t.setAttribute("title","Collapse-all-day-section"),t.setAttribute("aria-label","Collapse section"),e=(this.allDayLevel+1)*this.getEventHeight()+4):(t.setAttribute("title","Expand-all-day-section"),t.setAttribute("aria-label","Expand section"),e=3*this.getEventHeight()+4),this.setAllDayRowHeight(e),this.addOrRemoveClass(),this.animation.animate(t)}},{key:"animationUiUpdate",value:function(){this.parent.notify("content-ready",{})}}]),i}(YU),XU=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).renderedEvents=[],n.monthHeaderHeight=0,n.moreIndicatorHeight=19,n.renderType="day",n.element=n.parent.activeView.getPanel(),n.fields=n.parent.eventFields,n.maxHeight=n.parent.eventSettings.enableMaxHeight&&!n.parent.eventSettings.enableIndicator&&!n.parent.rowAutoHeight,n.withIndicator=n.parent.eventSettings.enableMaxHeight&&n.parent.eventSettings.enableIndicator&&!n.parent.rowAutoHeight,n.maxOrIndicator=n.maxHeight||n.withIndicator,n.moreIndicatorHeight=n.parent.rowAutoHeight&&n.parent.eventSettings.ignoreWhitespace?0:n.moreIndicatorHeight,n.addEventListener(),n}return _createClass(i,[{key:"removeEventWarapper",value:function(e){if(e.length>0){var t,i=_createForOfIteratorHelper(e="Month"===this.parent.currentView?e:[e[0]]);try{for(i.s();!(t=i.n()).done;){var n=t.value;!n.classList.contains("e-more-indicator")&&n.parentElement&&n.parentElement.parentNode&&IP(n.parentElement)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"renderAppointments",value:function(){var e=this.parent.element.querySelector(".e-content-wrap");this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=e.scrollTop,this.parent.uiStateValues.left=e.scrollLeft);var t=[].slice.call(this.element.querySelectorAll(".e-appointment-wrapper"));if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction)for(var i=0,n=this.parent.crudModule.crudObj.sourceEvent.length;i<n;i++){var r=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.sourceEvent[i].groupIndex+'"]'));if(this.removeEventWarapper(r),this.parent.crudModule.crudObj.sourceEvent[i].groupIndex!==this.parent.crudModule.crudObj.targetEvent[i].groupIndex){var a=[].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="'+this.parent.crudModule.crudObj.targetEvent[i].groupIndex+'"]'));this.removeEventWarapper(a)}}else{var o,s=_createForOfIteratorHelper(t);try{for(s.s();!(o=s.n()).done;){IP(o.value)}}catch(u){s.e(u)}finally{s.f()}}if(this.removeHeightProperty("e-content-table"),this.element.querySelector(".e-work-cells")){this.eventHeight=fH(this.element,"e-appointment");var l=e.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!RD(this.parent.currentAction)&&(e.scrollTop=e.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?this.renderResourceEvents():this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();var c={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&(this.parent.currentAction?(e.scrollTop=l,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.notify(pH,c)}}}},{key:"renderEventsHandler",value:function(e,t,i){var n,r;this.renderedEvents=[];var a=0;i?(a=i.groupIndex,this.cssClass=i.cssClass,this.groupOrder=i.groupOrder,n=this.parent.eventBase.filterEventsByResource(i,this.parent.eventsProcessed),r=this.parent.eventBase.filterEventsByResource(i,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll('.e-work-cells[data-group-index="'+a+'"]'))):(n=this.parent.eventsProcessed,r=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll(".e-work-cells"))),this.sortByDateTime(n),this.sortByDateTime(r);var o=this.workCells.slice(-1)[0].getBoundingClientRect();this.cellWidth=o.width,this.cellHeight=o.height,this.dateRender=e;var s=this.getRenderedDates(e);this.getSlotDates(t),this.processBlockEvents(r,a,i);var l,c=_createForOfIteratorHelper(n);try{for(c.s();!(l=c.n()).done;){var u=l.value;this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(u));var h,d=_createForOfIteratorHelper(this.splitEvent(u,s||this.dateRender));try{for(d.s();!(h=d.n()).done;){var p=h.value;if(this.maxHeight){var f="Month"===this.parent.currentView?p[this.fields.startTime]:this.getStartTime(p,p.data);if(this.getIndex(f)>0)continue}this.updateIndicatorIcon(p),this.renderEvents(p,a,n)}}catch(v){d.e(v)}finally{d.f()}}}catch(v){c.e(v)}finally{c.f()}this.cssClass=null,this.groupOrder=null}},{key:"processBlockEvents",value:function(e,t,i){var n,r=_createForOfIteratorHelper(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(a));var o=[];if("day"!==this.renderType||a[this.fields.isAllDay])o.push(a);else{var s=DD({},a,null,!0),l=this.isSameDate(s[this.fields.startTime],s[this.fields.endTime]);if(s.isBlockIcon=l,!l&&kH(s[this.fields.startTime])>0){var c=DD({},a,null,!0);c[this.fields.endTime]=CH(bH(new Date(a[this.fields.startTime]+"")),1),c.isBlockIcon=!0,s[this.fields.startTime]=c[this.fields.endTime],o.push(c)}if(!(l=this.isSameDate(s[this.fields.startTime],s[this.fields.endTime]))&&kH(s[this.fields.endTime])>0){var u=DD({},a,null,!0);u[this.fields.startTime]=bH(new Date(a[this.fields.endTime]+"")),u.isBlockIcon=!0,o.push(u),s[this.fields.endTime]=u[this.fields.startTime]}o.push(s)}for(var h=0,d=o;h<d.length;h++){var p,f=d[h],v=_createForOfIteratorHelper(this.splitEvent(f,this.dateRender));try{for(v.s();!(p=v.n()).done;){var m=p.value;this.renderBlockEvents(m,t,!!f.isBlockIcon)}}catch(g){v.e(g)}finally{v.f()}}}}catch(g){r.e(g)}finally{r.f()}}},{key:"isSameDate",value:function(e,t){return new Date(+e).setHours(0,0,0,0)===new Date(+t).setHours(0,0,0,0)}},{key:"renderBlockEvents",value:function(e,t,i){var n=e.data,r=this.getStartTime(e,n),a=this.getEndTime(e,n),o=this.parent.getIndexOfDate(this.dateRender,bH(new Date(r.getTime())));if(!(o<0||r>a)){var s=this.getCellTd(o),l=this.getPosition(r,a,e[this.fields.isAllDay],o);if(i)this.renderBlockIndicator(s,l,t);else{var c=this.getEventWidth(r,a,e[this.fields.isAllDay],n.count);c=c<=0?this.cellWidth:c;var u=this.parent.enableRtl?0:l,h=this.parent.enableRtl?l:0;this.renderWrapperElement(s);var d=this.cellHeight-this.monthHeaderHeight,p=this.getRowTop(t),f=this.createBlockAppointmentElement(e,t);LP(f,{width:c+"px",height:d+"px",left:u+"px",right:h+"px",top:p+"px"}),this.renderEventElement(e,f,s)}}}},{key:"renderBlockIndicator",value:function(e,t,i){var n=CP("div",{className:"e-icons e-block-indicator"});RD(e.querySelector(".e-block-indicator"))&&e.appendChild(n)}},{key:"getStartTime",value:function(e,t){return e[this.fields.startTime]}},{key:"getEndTime",value:function(e,t){return e[this.fields.endTime]}},{key:"getCellTd",value:function(e){return this.workCells[e]}},{key:"getEventWidth",value:function(e,t,i,n){return n*this.cellWidth-1}},{key:"getPosition",value:function(e,t,i,n){return 0}},{key:"getRowTop",value:function(e){return 0}},{key:"updateIndicatorIcon",value:function(e){if(-1!==this.parent.currentView.indexOf("Timeline")&&"TimelineMonth"!==this.parent.currentView&&!e[this.fields.isAllDay]){var t=e.data,i=_H(e[this.fields.startTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),n=_H(e[this.fields.endTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());t.isLeft=t.isLeft||t[this.fields.startTime].getTime()<i.startHour.getTime(),t.isRight=t.isRight||t[this.fields.endTime].getTime()>n.endHour.getTime()}}},{key:"renderResourceEvents",value:function(){var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,i=this.parent.crudModule.crudObj.sourceEvent.length;t<i;t++){var n=this.parent.crudModule.crudObj.sourceEvent[t];if(this.renderEventsHandler(n.renderDates,n.workDays,n),this.parent.crudModule.crudObj.sourceEvent[t].groupIndex!==this.parent.crudModule.crudObj.targetEvent[t].groupIndex){var r=this.parent.crudModule.crudObj.targetEvent[t];this.renderEventsHandler(r.renderDates,r.workDays,r)}}this.parent.crudModule.crudObj.isCrudAction=!1}else{var a,o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.renderEventsHandler(s.renderDates,s.workDays,s)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"getSlotDates",value:function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))}},{key:"createAppointmentElement",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default,r=CP("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[this.fields.id],role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e.data,n)}});i||r.setAttribute("data-guid",e.Guid),RD(this.cssClass)||wP([r],this.cssClass),e[this.fields.isReadonly]&&wP([r],"e-read-only");var a,o=CP("div",{className:"e-appointment-details"});r.appendChild(o),this.parent.activeViewOptions.group.resources.length>0&&r.setAttribute("data-group-index",t.toString());var s=e.data,l=this.getEventData(e);if(RD(this.parent.activeViewOptions.eventTemplate)){var c=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",u=CP("div",{className:"e-subject",innerHTML:n+(c?";&nbsp"+c:"")}),h=CP("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(s[this.fields.startTime])}),d=CP("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(s[this.fields.endTime])});if("Month"===this.parent.currentView)e[this.fields.isAllDay]?(a=[u],wP([u],"e-text-center")):s.count<=1&&!s.isLeft&&!s.isRight?a=[h,u]:(a=[],wP([u],"e-text-center"),s.isLeft||a.push(h),a.push(u),s.isRight||a.push(d));else{var p;if(e[this.fields.isAllDay])p=[u,CP("div",{className:"e-time",innerHTML:this.parent.localeObj.getConstant("allDay")})];else{var f=this.parent.getTimeString(s[this.fields.startTime])+" - "+this.parent.getTimeString(s[this.fields.endTime]);p=[u,CP("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:f}),CP("div",{className:"e-location",innerHTML:c})]}var v=CP("div",{className:"e-inner-wrap"});AP(p,v),a=[v]}}else{var m=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",g=DH(l);a=this.parent.getAppointmentTemplate()(g,this.parent,"eventTemplate",m,!1)}return AP(a,o),this.appendEventIcons(e,o),this.renderResizeHandler(r,e.data,e[this.fields.isReadonly]),r}},{key:"appendEventIcons",value:function(e,t){var i=e.data;RD(e[this.fields.recurrenceRule])&&RD(e[this.fields.recurrenceID])||t.appendChild(CP("div",{className:"e-icons "+(e[this.fields.id]===e[this.fields.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")+(this.parent.isAdaptive?" e-disable":"")})),i.isLeft&&TP([CP("div",{className:"e-indicator e-icons e-left-icon"})],t),i.isRight&&AP([CP("div",{className:"e-indicator e-icons e-right-icon"})],t)}},{key:"renderEvents",value:function(e,t,i){var n=e[this.fields.startTime],r=e[this.fields.endTime],a=this.parent.getIndexOfDate(this.dateRender,bH(n));if(!(a<0||n.getTime()<this.parent.minDate.getTime()||r.getTime()>this.parent.maxDate.getTime())){var o=this.getIndex(n);e.Index=o;var s=this.eventHeight;this.renderedEvents.push(DD({},e,null,!0));var l=e.data.count;if(n.getTime()<=r.getTime()){var c=l*this.cellWidth-5,u=this.workCells[a],h=o*(s+0);this.renderWrapperElement(u);var d,p=this.monthHeaderHeight+(o+1)*(s+0)+this.moreIndicatorHeight,f=this.maxOrIndicator?o<1:this.cellHeight>p;if(this.parent.rowAutoHeight||f)d=this.inlineValue?this.parent.inlineModule.createInlineAppointmentElement():this.createAppointmentElement(e,t),this.applyResourceColor(d,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(d,e),LP(d,{width:c+"px",top:h+"px"}),this.renderEventElement(e,d,u),this.parent.rowAutoHeight&&this.updateCellHeight(u.parentElement.firstElementChild,p);else for(var v=0;v<l;v++){var m=this.workCells[a+v];if(m&&RD(m.querySelector(".e-more-indicator"))){var g=new Date(this.dateRender[a+v].getTime()),y=CH(this.dateRender[a+v],1),b=m.getAttribute("data-group-index"),k=this.getFilteredEvents(g,y,b),C=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight;s=this.withIndicator?C:s;var w=Math.floor(C/(s+0)),_=this.getMoreIndicatorElement(k.length-w<=0?1:k.length-w,g,y);RD(b)||_.setAttribute("data-group-index",b),_.style.top=C+"px",_.style.width=m.offsetWidth-2+"px",this.renderElement(m,_),OR.add(_,"click",this.moreIndicatorClick,this)}}}}}},{key:"updateCellHeight",value:function(e,t){t>e.offsetHeight&&LP(e,{height:t+"px"})}},{key:"updateBlockElements",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-block-appointment")));try{for(t.s();!(e=t.n()).done;){var i=e.value,n=MP(i,"tr");this.monthHeaderHeight=i.offsetParent.offsetTop-n.offsetTop,i.style.height=n.offsetHeight-1-this.monthHeaderHeight+"px";var r=n.firstElementChild,a=Math.round(i.offsetWidth/r.offsetWidth);i.style.width=r.offsetWidth*a+"px"}}catch(o){t.e(o)}finally{t.f()}}},{key:"getFilteredEvents",value:function(e,t,i,n){var r;if(RD(i))r=this.filterEvents(e,t);else{var a=this.parent.resourceBase.lastResourceLevel[parseInt(i,10)];r=this.filterEvents(e,t,RD(n)?void 0:n,a)}return r}},{key:"getOverlapEvents",value:function(e,t){var i,n=[],r=_createForOfIteratorHelper(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;bH(a[this.fields.startTime]).getTime()<=bH(e).getTime()&&bH(a[this.fields.endTime]).getTime()>=bH(e).getTime()&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"getIndex",value:function(e){var t=-1,i=this.renderedEvents;if(i.length>0){var n=this.getOverlapEvents(e,i).map((function(e){return e.Index}));t=n.length>0?this.getSmallestMissingNumber(n):0}return-1===t?0:t}},{key:"moreIndicatorClick",value:function(e){var t=this,i=MP(e.target,".e-more-indicator"),n=new Date(parseInt(i.getAttribute("data-start-date"),10)),r=new Date(parseInt(i.getAttribute("data-end-date"),10)),a=i.getAttribute("data-group-index"),o={cancel:!1,event:e,element:i,isPopupOpen:!0,startTime:n,endTime:r,viewName:this.parent.getNavigateView()};a&&(o.groupIndex=parseInt(a,10)),this.parent.trigger("moreEventsClick",o,(function(i){if(!i.cancel)if(i.isPopupOpen){var o=t.getFilteredEvents(n,r,a);t.parent.quickPopup.moreEventClick({date:n,event:o,element:e.target},r,a)}else t.parent.setScheduleProperties({selectedDate:n}),t.parent.changeView(i.viewName,e)}))}},{key:"renderEventElement",value:function(e,t,i){var n=this,r=t.classList.contains("e-block-appointment")?"blockEvent":"event",a=t.classList.contains("e-appointment"),o=this.getEventData(e);this.parent.trigger("eventRendered",{data:o,element:t,cancel:!1,type:r},(function(e){e.cancel?n.renderedEvents.pop():n.renderElement(i,t,a)}))}},{key:"getEventData",value:function(e){var t=DD({},e,null,!0);return t[this.fields.startTime]=e.data[this.fields.startTime],t[this.fields.endTime]=e.data[this.fields.endTime],t}},{key:"renderElement",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.maxOrIndicator&&i&&this.setMaxEventHeight(t,e),e.querySelector(".e-appointment-wrapper"))e.querySelector(".e-appointment-wrapper").appendChild(t);else{var n=CP("div",{className:"e-appointment-wrapper"});n.appendChild(t),e.appendChild(n)}}},{key:"renderWrapperElement",value:function(e){var t=e.querySelector(".e-appointment-wrapper");if(RD(t)){var i=CP("div",{className:"e-appointment-wrapper"});e.appendChild(i),this.monthHeaderHeight=i.offsetTop-e.offsetTop}else this.monthHeaderHeight=t.offsetTop-e.offsetTop}},{key:"getMoreIndicatorElement",value:function(e,t,i){return CP("div",{className:"e-more-indicator",innerHTML:"+"+e+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more")),attrs:{tabindex:"0","data-start-date":t.getTime().toString(),"data-end-date":i.getTime().toString(),role:"list"}})}},{key:"removeHeightProperty",value:function(e){var t,i=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll("."+e+" tbody tr")));try{for(i.s();!(t=i.n()).done;){t.value.firstElementChild.style.height=""}}catch(n){i.e(n)}finally{i.f()}}},{key:"setMaxEventHeight",value:function(e,t){var i=xH(t.querySelector(".e-date-header"));LP(e,{height:t.offsetHeight-i-(this.maxHeight?0:this.moreIndicatorHeight)+"px","align-items":"center"})}}]),i}(YU),JU=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;_classCallCheck2(this,i),(r=t.call(this,e)).startHour=r.parent.activeView.getStartHour(),r.endHour=r.parent.activeView.getEndHour(),r.slotCount=r.parent.activeViewOptions.timeScale.slotCount,r.interval=r.parent.activeViewOptions.timeScale.interval,r.day=0,r.rowIndex=0,r.renderType=n,r.eventContainers=[].slice.call(r.element.querySelectorAll(".e-appointment-container"));var a=[].slice.call(r.element.querySelectorAll(".e-content-table tbody tr"));return r.dayLength=0===a.length?0:a[0].children.length,r.content=r.parent.element.querySelector(".e-content-table"),r}return _createClass(i,[{key:"getSlotDates",value:function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.headerRows.length>0&&"Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length}},{key:"getOverlapEvents",value:function(e,t){var i=[];if("day"===this.renderType){var n,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;bH(a[this.fields.startTime]).getTime()<=bH(new Date(e.getTime())).getTime()&&bH(a[this.fields.endTime]).getTime()>=bH(new Date(e.getTime())).getTime()&&i.push(a)}}catch(u){r.e(u)}finally{r.f()}}else{var o,s=_createForOfIteratorHelper(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=l.data;c.trimStartTime.getTime()<=e.getTime()&&c.trimEndTime.getTime()>e.getTime()&&i.push(l)}}catch(u){s.e(u)}finally{s.f()}}return i}},{key:"renderResourceEvents",value:function(){this.removeHeightProperty("e-resource-column-table");var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources;if(this.parent.crudModule&&this.parent.crudModule.crudObj.isCrudAction){for(var t=0,i=this.parent.crudModule.crudObj.sourceEvent.length;t<i;t++){var n=this.parent.crudModule.crudObj.sourceEvent[t];if(this.rowIndex=n.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,n),this.parent.crudModule.crudObj.sourceEvent[t].groupIndex!==this.parent.crudModule.crudObj.targetEvent[t].groupIndex){var r=this.parent.crudModule.crudObj.targetEvent[t];this.rowIndex=r.groupIndex,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,r)}}this.parent.crudModule.crudObj.isCrudAction=!1}else for(var a=0;a<e.length;a++)this.rowIndex=a,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,e[a])}},{key:"renderEvents",value:function(e,t,i){var n=e[this.fields.startTime],r=e[this.fields.endTime];if(!(n.getTime()<this.parent.minDate.getTime()||r.getTime()>this.parent.maxDate.getTime())){var a=e.data;if(n=this.getStartTime(e,a),r=this.getEndTime(e,a),this.day=this.parent.getIndexOfDate(this.dateRender,bH(new Date(n.getTime()))),!(this.day<0)){var o=this.getCellTd(),s=this.getIndex(n);e.Index=s;var l=this.eventHeight,c=a.count,u=DD({},e,null,!0);u[this.fields.startTime]=a[this.fields.startTime],u[this.fields.endTime]=a[this.fields.endTime];var h=_H(bH(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour),d=this.isValidEvent(u,n,r,h);if(n<=r&&d){var p=this.getEventWidth(n,r,e[this.fields.isAllDay],c);p="day"===this.renderType?p-2:p;var f,v,m=this.getPosition(n,r,e[this.fields.isAllDay],this.day);p=p<=0?this.cellWidth:p,this.renderedEvents.push(DD({},e,null,!0));var g=this.getRowTop(t),y=g+(this.maxHeight?0:2)+s*(l+2);f=this.parent.enableRtl?0:m,v=this.parent.enableRtl?m:0;var b,k=(s+1)*(l+2)+this.moreIndicatorHeight,C=this.maxOrIndicator?s<1:this.cellHeight>k;if(this.parent.rowAutoHeight||C){if(b=RD(this.inlineValue)?this.createAppointmentElement(e,t):this.parent.inlineModule.createInlineAppointmentElement(),this.applyResourceColor(b,e,"backgroundColor",this.groupOrder),LP(b,{width:p+"px",left:f+"px",right:v+"px",top:y+"px"}),this.wireAppointmentEvents(b,e),this.renderEventElement(e,b,o),this.parent.rowAutoHeight){var w=this.getFirstChild(t);this.updateCellHeight(w,k)}}else for(var _=0;_<c;_++){var S=o.querySelector(".e-more-indicator"),E=this.parent.enableRtl?v:f;if(E=Math.floor(E/this.cellWidth)*this.cellWidth,o&&RD(S)||!this.isAlreadyAvail(E,o)){var T=void 0,A=this.interval/this.slotCount,O=new Date(this.dateRender[this.day+_].getTime()),x=CH(this.dateRender[this.day+_],1),I=new Date(+n),D=new Date(I.setMinutes(Math.floor(I.getMinutes()/A)*A)),R=new Date(D.getTime()+6e4*A);this.parent.activeViewOptions.group.resources.length>0&&!RD(t)&&(T=t.toString());var P=this.getFilterEvents(O,x,D,R,T,i),M=this.cellHeight-this.moreIndicatorHeight;l=this.withIndicator?M-2:l;var L=void 0,N=Math.floor(M/(l+2)),F=P.length-N<=0?1:P.length-N;L="day"===this.renderType?this.getMoreIndicatorElement(F,O,x):this.getMoreIndicatorElement(F,D,R),RD(T)||L.setAttribute("data-group-index",T),L.style.top=g+M+"px",L.style.width=this.cellWidth+"px",L.style.left=Math.floor(f/this.cellWidth)*this.cellWidth+"px",L.style.right=Math.floor(v/this.cellWidth)*this.cellWidth+"px",this.renderElement(o,L),OR.add(L,"click",this.moreIndicatorClick,this)}}}}}}},{key:"updateCellHeight",value:function(e,t){if(t>e.offsetHeight){if(LP(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var i=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');i&&LP(i,{height:t+"px"})}var n=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");n&&LP(n,{height:t+"px"})}}},{key:"getFirstChild",value:function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)}},{key:"updateBlockElements",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-block-appointment")));try{for(t.s();!(e=t.n()).done;){var i=e.value,n=parseInt(i.getAttribute("data-group-index"),10),r=this.getFirstChild(n);i.style.height=r.offsetHeight+"px";var a=Math.round(i.offsetWidth/r.offsetWidth);i.style.width=r.offsetWidth*a+"px"}}catch(u){t.e(u)}finally{t.f()}var o,s=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-block-indicator")));try{for(s.s();!(o=s.n()).done;){var l=o.value,c=parseInt(l.getAttribute("data-group-index"),10);l.style.top=this.getRowTop(c)+this.getFirstChild(c).offsetHeight-18+"px"}}catch(u){s.e(u)}finally{s.f()}}},{key:"getStartTime",value:function(e,t){var i=e[this.fields.startTime],n=_H(i,this.startHour,this.endHour);return i=n.startHour.getTime()>=t[this.fields.startTime]?n.startHour:n.endHour.getTime()<=t[this.fields.startTime]?this.getNextDay(n.startHour,t):t[this.fields.startTime],t.trimStartTime=e[this.fields.isAllDay]?n.startHour:t[this.fields.startTime],i}},{key:"getNextDay",value:function(e,t){for(var i,n=1;n<=this.dateRender.length;n++)if(i=CH(e,n),-1!==this.parent.getIndexOfDate(this.dateRender,bH(new Date(e.getTime()))))return t.count=t.count-1,i;return i}},{key:"getEndTime",value:function(e,t){var i=e[this.fields.endTime],n=_H(i,this.startHour,this.endHour);return i=n.endHour.getTime()<=t[this.fields.endTime]?n.endHour:t[this.fields.endTime],t.trimEndTime=e[this.fields.isAllDay]?n.endHour:t[this.fields.endTime],i}},{key:"getEventWidth",value:function(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)}},{key:"getSameDayEventsWidth",value:function(e,t){return(t.getTime()-e.getTime())/6e4*(this.cellWidth*this.slotCount)/this.interval}},{key:"getSpannedEventsWidth",value:function(e,t,i){var n,r,a=i*this.slotsPerDay*this.cellWidth,o=_H(bH(new Date(e.getTime())),this.startHour,this.endHour);if(n=this.getSameDayEventsWidth(o.startHour,e),-1===this.parent.getIndexOfDate(this.dateRender,bH(new Date(t.getTime()))))r=0;else{var s=_H(bH(new Date(t.getTime())),this.startHour,this.endHour);r=this.getSameDayEventsWidth(t,s.endHour),r=this.slotsPerDay*this.cellWidth===r?0:r}var l=n+r;return a>l?a-l:r-n}},{key:"isSameDay",value:function(e,t){return this.parent.getIndexOfDate(this.dateRender,bH(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,bH(new Date(t.getTime())))}},{key:"getAppointmentLeft",value:function(e,t,i){var n=this.isSameDay(t,e.startHour)?(t.getTime()-e.startHour.getTime())/(6e4*this.interval)*this.slotCount:0;return 0===i?n:Math.round((e.endHour.getTime()-e.startHour.getTime())/6e4/this.interval*this.slotCount)*i+n}},{key:"getPosition",value:function(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;var r=_H(bH(new Date(this.dateRender[n].getTime())),this.startHour,this.endHour);return(r.endHour.getTime()<=t.getTime()&&r.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(r,r.startHour,n):r.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(r,e,n):r.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(r,r.startHour,n):this.getAppointmentLeft(r,e,n))*this.cellWidth}},{key:"getFilterEvents",value:function(e,t,i,n,r,a){return"day"===this.renderType?this.getFilteredEvents(e,t,r,a):this.getFilteredEvents(i,n,r,a)}},{key:"isAlreadyAvail",value:function(e,t){for(var i=[].slice.call(t.querySelectorAll(".e-more-indicator")),n=0;n<i.length;n++){var r=void 0;if(i&&(r=this.parent.enableRtl?i[n].style.right:i[n].style.left),parseInt(r,10)===Math.floor(e))return!0}return!1}},{key:"getRowTop",value:function(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.activeViewOptions.group.resources.length>1||this.parent.virtualScrollModule||this.parent.rowAutoHeight?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0}},{key:"getCellTd",value:function(){return this.eventContainers[this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex]}},{key:"renderBlockIndicator",value:function(e,t,i){if(!(this.parent.headerRows.length>0&&("Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option||"Date"!==this.parent.headerRows[this.parent.headerRows.length-1].option)||(t=Math.floor(t/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.isAlreadyAvail(t,e)))){var n=CP("div",{className:"e-icons e-block-indicator"});this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",i.toString()),this.parent.enableRtl?n.style.right=t+"px":n.style.left=t+"px",n.style.top=this.getRowTop(i)+this.cellHeight-18+"px",this.renderElement(e,n)}}},{key:"setMaxEventHeight",value:function(e,t){LP(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})}}]),i}(XU),QU=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.parent.on("inlineClick",this.inlineEdit,this)}return _createClass(e,[{key:"inlineEdit",value:function(e){this.parent.quickPopup.quickPopupHide(),"Cell"===e.type?(this.removeInlineAppointmentElement(),this.cellEdit(e)):(this.parent.element.querySelector(".e-inline-subject")!==e.element.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(e))}},{key:"cellEdit",value:function(e){var t=this.generateEventData(),i=e.element.cellIndex,n=this.getEventDaysCount(t);n>1&&(n=Math.round(n),i-=--n);var r=bH(new Date(""+t[this.parent.eventFields.startTime])).getTime(),a=bH(new Date(""+t[this.parent.eventFields.endTime])).getTime(),o=e.groupIndex||0;if("Day"===this.parent.currentView||"Week"===this.parent.currentView||"WorkWeek"===this.parent.currentView){var s=t[this.parent.eventFields.startTime].getDay();this.createVerticalViewInline(t,s,o,i)}else"Month"===this.parent.currentView?this.createMonthViewInline(t,o,r,a):this.createTimelineViewInline(t,r,a,o);var l=this.parent.element.querySelector(".e-inline-subject");l&&l.focus()}},{key:"eventEdit",value:function(e){var t,i=e.element.querySelector(".e-inline-subject");if(i)t=i.value;else{var n=e.element.querySelector(".e-subject"),r=e.element.querySelector(".e-time");if(i=CP("input",{className:"e-inline-subject",attrs:{value:t=n.innerText}}),wP([n],"e-disable"),MP(e.element,".e-more-popup-wrapper"))e.element.insertBefore(i,n);else if(["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1){var a=e.element.querySelector(".e-subject-wrap");a.insertBefore(i,a.firstChild)}else{var o=["TimelineWeek","TimelineMonth"].indexOf(this.parent.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.element.querySelector(o).insertBefore(i,r)}}i.focus(),i.setSelectionRange(t.length,t.length)}},{key:"createVerticalViewInline",value:function(e,t,i,n){var r=this.getEventDaysCount(e),a=new KU(this.parent);a.initializeValues();var o=a.dateRender[i].map((function(e){return e.getDay()})).indexOf(t);if(r>=1){a.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),a.slots.push(this.parent.activeView.renderDates.map((function(e){return+e})));var s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),l=0;s.length>0&&(l=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/s[0].offsetHeight)-1),a.allDayLevel=l,a.renderAllDayEvents(e,o,i,n,this.parent.allowInline)}else a.renderNormalEvents(e,o,i,n,this.parent.allowInline)}},{key:"createMonthViewInline",value:function(e,t,i,n){var r=this.getEventDaysCount(e),a=this.parent.eventBase.cloneEventObject(e,i,n,r,!1,!1),o=new XU(this.parent);o.dateRender=this.parent.activeView.renderDates,o.inlineValue=this.parent.allowInline;var s=this.parent.activeView.renderDates,l=this.parent.activeViewOptions.workDays,c=".e-work-cells";if(this.parent.activeViewOptions.group.resources.length>0){c+='[data-group-index="'+t+'"]';var u=this.parent.resourceBase.lastResourceLevel[t];s=u.renderDates,l=u.workDays}o.workCells=[].slice.call(this.parent.element.querySelectorAll(c)),o.cellWidth=o.workCells[0].offsetWidth,o.cellHeight=o.workCells[0].offsetHeight,o.eventHeight=fH(this.parent.monthModule.element,"e-appointment"),o.getSlotDates(l);var h,d=o.getRenderedDates(s),p=_createForOfIteratorHelper(o.splitEvent(a,d||s));try{for(p.s();!(h=p.n()).done;){var f=h.value;o.renderEvents(f,t)}}catch(v){p.e(v)}finally{p.f()}this.parent.element.querySelector(".e-inline-subject").focus()}},{key:"createTimelineViewInline",value:function(e,t,i,n){var r=this.getEventDaysCount(e),a=this.parent.eventBase.cloneEventObject(e,t,i,r,!1,!1),o=new JU(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");o.dateRender=this.parent.activeView.renderDates,o.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"));var s=this.parent.element.querySelector(".e-work-cells");o.inlineValue=this.parent.allowInline,o.cellWidth=s.offsetWidth,o.cellHeight=s.offsetHeight;var l=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;o.slotsPerDay=l/o.dateRender.length,o.eventHeight=fH(o.element,"e-appointment"),o.renderEvents(a,n)}},{key:"getEventDaysCount",value:function(e){var t=e[this.parent.eventFields.startTime];return Math.abs(e[this.parent.eventFields.endTime].getTime()-t.getTime())/864e5}},{key:"generateEventData",value:function(e){var t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",n={};return n[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),n[this.parent.eventFields.subject]=i,n[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,n[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,n[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.eventWindow.setDefaultValueToObject(n),this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(n,this.parent.activeCellsData.groupIndex),n}},{key:"documentClick",value:function(){var e=this.parent.element.querySelector(".e-inline-subject");e&&""!==e.value&&this.inlineCrudActions(e)}},{key:"inlineCrudActions",value:function(e){if(MP(e,".e-inline-appointment")){var t=this.generateEventData(e);this.parent.addEvent(t)}else{var i,n=MP(e,".e-appointment"),r=this.parent.getEventDetails(n);r[this.parent.eventFields.subject]=e.value,r[this.parent.eventFields.id]===r[this.parent.eventFields.recurrenceID]&&(i="EditOccurrence",r[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID()),this.parent.saveEvent(r,i)}this.removeInlineAppointmentElement()}},{key:"createInlineAppointmentElement",value:function(e){var t=CP("div",{className:"e-appointment e-inline-appointment"}),i=CP("div",{className:"e-appointment-details"});t.appendChild(i);var n=CP("input",{className:"e-inline-subject"});return i.appendChild(n),e&&this.parent.eventBase.applyResourceColor(t,e,"backgroundColor"),t}},{key:"removeInlineAppointmentElement",value:function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach((function(e){return IP(e)}));var t=this.parent.element.querySelector(".e-inline-subject");t&&(_P([MP(t,".e-appointment").querySelector(".e-subject")],"e-disable"),IP(t))}},{key:"destroy",value:function(){this.parent.off("inlineClick",this.inlineEdit)}}]),e}(),ZU=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"renderFormValidator",value:function(e,t,i){var n=this;this.element=i,this.formObj=new zV(e,{customPlacement:function(e,t){n.errorPlacement(e,t)},rules:t,validationComplete:function(e){n.validationComplete(e)},focusout:function(e){n.focusOut(e)}})}},{key:"focusOut",value:function(e){var t=e.relatedTarget;this.ignoreError=!(!t||!(t.classList.contains("e-dlg-closeicon-btn")||t.classList.contains("e-close")||t.classList.contains("e-all-day-cells")||t.classList.contains("e-header-cells")||t.classList.contains("e-event-details")||t.classList.contains("e-work-cells")||t.classList.contains("e-event-cancel")))}},{key:"validationComplete",value:function(e){var t=this.element.querySelector("#"+e.inputName+"_Error");t&&(t.style.display="failure"===e.status?"":"none")}},{key:"errorPlacement",value:function(e,t){var i=t.getAttribute("for");this.element.querySelector("#"+i+"_Error")||this.ignoreError||this.createTooltip(e,t,i,"")}},{key:"createTooltip",value:function(e,t,i,n){var r,a,o=e.getBoundingClientRect();this.element.classList.contains("e-quick-popup-wrapper")?(r=this.element,a=this.element.getBoundingClientRect()):a=(r=this.element.querySelector(".e-schedule-dialog .e-dlg-content")).getBoundingClientRect();var s=CP("div",{className:"e-tooltip-wrap e-popup e-schedule-error",id:i+"_Error",styles:"display:"+n+";top:"+(o.bottom-a.top+r.scrollTop+9)+"px;left:"+(o.left-a.left+r.scrollLeft+o.width/2)+"px;"}),l=CP("div",{className:"e-tip-content"});l.appendChild(t);var c=CP("div",{className:"e-arrow-tip e-tip-top"});c.appendChild(CP("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild(CP("div",{className:"e-arrow-tip-inner e-tip-top"})),s.appendChild(l),s.appendChild(c),r.appendChild(s),s.style.left=parseInt(s.style.left,10)-s.offsetWidth/2+"px"}},{key:"destroyToolTip",value:function(){if(this.element){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-schedule-error")));try{for(t.s();!(e=t.n()).done;){IP(e.value)}}catch(i){t.e(i)}finally{t.f()}}this.formObj&&this.formObj.element&&this.formObj.reset()}},{key:"destroy",value:function(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy()}}]),e}(),$U=function(){function e(t){_classCallCheck2(this,e),this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=t,this.l10n=this.parent.localeObj,this.fieldValidator=new ZU,this.render(),this.addEventListener()}return _createClass(e,[{key:"render",value:function(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()}},{key:"renderQuickPopup",value:function(){var e=CP("div",{className:"e-quick-popup-wrapper e-popup-close"});this.parent.isAdaptive?(document.body.appendChild(e),wP([e],"e-device")):this.parent.element.appendChild(e),this.quickPopup=new eN(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0}},{key:"renderMorePopup",value:function(){var e=CP("div",{className:"e-more-popup-wrapper e-popup-close",innerHTML:'<div class="e-more-event-popup"><div class="e-more-event-header"><div class="e-more-event-close" title="'.concat(this.l10n.getConstant("close"),'" tabindex="0"></div><div class="e-more-event-date-header"><div class="e-header-day"></div><div class="e-header-date e-navigate" tabindex="0"></div></div></div></div>')});this.parent.isAdaptive?(document.body.appendChild(e),wP([e],"e-device")):this.parent.element.appendChild(e),this.morePopup=new eN(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0;var t=this.morePopup.element.querySelector(".e-more-event-close");this.renderButton("e-round","e-icons e-close-icon",!1,t,this.closeClick),OR.add(this.morePopup.element.querySelector(".e-header-date"),"click",this.navigationClick,this)}},{key:"renderQuickDialog",value:function(){var e=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){var t={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};e.splice(1,0,t)}this.quickDialog=new XN({animationSettings:{effect:"Zoom"},buttons:e,cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});var i=CP("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(i),this.quickDialog.appendTo(i),this.quickDialog.isStringTemplate=!0;var n=this.quickDialog.element.querySelector(".e-quick-alertok");n&&(n.setAttribute("aria-label",this.l10n.getConstant("occurrence")),n.setAttribute("aria-label",n.innerHTML));var r=this.quickDialog.element.querySelector(".e-quick-alertcancel");r&&(r.setAttribute("aria-label",this.l10n.getConstant("series")),r.setAttribute("aria-label",r.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))}},{key:"renderButton",value:function(e,t,i,n,r){var a=new pL({cssClass:e,disabled:i,enableRtl:this.parent.enableRtl,iconCss:t});a.appendTo(n),a.isStringTemplate=!0,OR.add(n,"click",r,this)}},{key:"quickDialogClass",value:function(e){var t=this.quickDialog.element.querySelector(".e-quick-alertok"),i=this.quickDialog.element.querySelector(".e-quick-alertcancel"),n=this.quickDialog.element.querySelector(".e-quick-alertfollowing");switch(_P([t,i],["e-quick-dialog-occurrence-event","e-quick-dialog-series-event","e-quick-dialog-delete","e-quick-dialog-cancel","e-quick-dialog-alert-btn","e-disable"]),wP([this.quickDialog.element.querySelector(".e-quick-dialog-cancel")],"e-disable"),this.parent.eventSettings.editFollowingEvents&&(wP([n],"e-disable"),_P([this.quickDialog.element],"e-following-events-dialog")),e){case"Recurrence":wP([t],"e-quick-dialog-occurrence-event"),wP([i],"e-quick-dialog-series-event"),this.parent.eventSettings.editFollowingEvents&&(_P([n],"e-disable"),wP([this.quickDialog.element],"e-following-events-dialog"),wP([n],"e-quick-dialog-following-events"));break;case"Delete":wP([t],"e-quick-dialog-delete"),wP([i],"e-quick-dialog-cancel");break;case"Alert":wP([t],["e-quick-alertok","e-quick-dialog-alert-btn"]),wP([i],["e-quick-alertcancel","e-disable"])}}},{key:"applyFormValidation",value:function(){var e=this.quickPopup.element.querySelector("."+LH),t={};t[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(e,t,this.quickPopup.element)}},{key:"openRecurrenceAlert",value:function(){var e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector(".e-quick-alertfollowing");t&&(t.innerHTML=this.l10n.getConstant("editFollowingEvent"),t.setAttribute("aria-label",t.innerHTML));var i=this.quickDialog.element.querySelector(".e-quick-alertcancel");i&&(i.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries"),i.setAttribute("aria-label",i.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence");var n=this.parent.activeEventData.event;this.parent.eventSettings.editFollowingEvents&&"EditOccurrence"===this.parent.currentAction&&!RD(n[this.parent.eventFields.recurrenceID])&&n[this.parent.eventFields.recurrenceID]!==n[this.parent.eventFields.id]&&wP([this.quickDialog.element.querySelector(".e-quick-alertfollowing")],"e-disable"),this.showQuickDialog("RecurrenceAlert")}},{key:"openRecurrenceValidationAlert",value:function(e){this.quickDialogClass("Alert");var t=this.quickDialog.element.querySelector(".e-quick-alertok");t.innerHTML=this.l10n.getConstant("ok"),t.setAttribute("aria-label",t.innerHTML);var i=this.quickDialog.element.querySelector(".e-quick-alertcancel");switch(i.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",i.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert"),e){case"wrongPattern":wP([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":wP([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":wP([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":var n=this.quickDialog.element.querySelector(".e-quick-dialog-cancel");_P([i,n],"e-disable"),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),t.innerHTML=this.l10n.getConstant("yes"),i.innerHTML=this.l10n.getConstant("no"),n.innerHTML=this.l10n.getConstant("cancel")}(!this.parent.enableRecurrenceValidation&&"wrongPattern"===e||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")}},{key:"openDeleteAlert",value:function(){if(!this.parent.activeViewOptions.readonly){var e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("delete"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector(".e-quick-alertcancel");t&&(t.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",t.innerHTML)),this.quickDialog.content=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleContent":"deleteContent"),this.quickDialog.header=this.l10n.getConstant(this.parent.activeEventData.event.length>1?"deleteMultipleEvent":"deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}}},{key:"openValidationError",value:function(e,t){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(e);var i=this.quickDialog.element.querySelector(".e-quick-alertok");i&&(i.innerHTML=this.l10n.getConstant("ok"),i.setAttribute("aria-label",i.innerHTML));var n=this.quickDialog.element.querySelector(".e-quick-alertcancel");n&&(n.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",n.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert",t)}},{key:"showQuickDialog",value:function(e,t){var i=this;this.quickDialog.dataBind();var n={type:e,cancel:!1,data:DD({},t||this.parent.activeEventData.event,null,!0),element:this.quickDialog.element};this.parent.trigger("popupOpen",n,(function(e){e.cancel||i.quickDialog.show()}))}},{key:"createMoreEventList",value:function(e,t,i){var n=this,r=this.parent.eventFields,a=CP("div",{className:"e-more-event-content"}),o=CP("div",{className:"e-more-appointment-wrapper"});if(0===e.length)o=CP("div",{className:"e-more-event-content",innerHTML:this.l10n.getConstant("emptyContainer")});else{var s,l=_createForOfIteratorHelper(e);try{var c=function(){var e=s.value,a=e[r.subject]||n.parent.eventSettings.fields.subject.default,l=CP("div",{className:"e-appointment",attrs:{"data-id":""+e[r.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":n.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":n.parent.getAnnocementString(e)}});if(RD(n.parent.activeViewOptions.eventTemplate))l.appendChild(CP("div",{className:"e-subject",innerHTML:a}));else{var c=n.parent.element.id+"_"+n.parent.activeViewOptions.eventTemplateName+"eventTemplate",u=DH(e);AP(n.parent.getAppointmentTemplate()(u,n.parent,"eventTemplate",c,!1),l)}RD(i)||l.setAttribute("data-group-index",i),RD(e[r.recurrenceRule])||l.appendChild(CP("div",{className:"e-icons "+(e[r.id]===e[r.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")}));var h={data:DD({},e,null,!0),element:l,cancel:!1};n.parent.trigger("eventRendered",h,(function(i){i.cancel||(o.appendChild(l),n.parent.eventBase.wireAppointmentEvents(l,e,n.parent.isAdaptive),n.parent.eventBase.applyResourceColor(l,e,"backgroundColor",t))}))};for(l.s();!(s=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}}return a.appendChild(o),a}},{key:"tapHoldEventPopup",value:function(e){var t=MP(e.target,".e-appointment");this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(t),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();var i=t.getAttribute("data-guid"),n=this.parent.eventBase.getEventByGuid(i);if(!RD(n)){var r=n[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),a='<div class="e-multiple-event-popup"><div class="e-popup-header"><button class="e-close" title="'.concat(this.l10n.getConstant("close"),'"></button><div class="e-subject">').concat(r,'</div><button class="e-edit" title="').concat(this.l10n.getConstant("edit"),'"></button><button class="e-delete" title="').concat(this.l10n.getConstant("delete"),'"></button></div></div>');this.quickPopup.element.innerHTML=a;var o=this.quickPopup.element.querySelector(".e-close");this.renderButton("e-flat e-round e-small","e-icons e-close-icon",!1,o,this.closeClick);var s=this.parent.activeViewOptions.readonly||n[this.parent.eventFields.isReadonly],l=this.quickPopup.element.querySelector(".e-edit");this.renderButton("e-flat e-round e-small","e-icons e-edit-icon",s,l,this.editClick);var c=this.quickPopup.element.querySelector(".e-delete");this.renderButton("e-flat e-round e-small","e-icons e-delete-icon",s,c,this.deleteClick),this.beforeQuickPopupOpen(t)}}},{key:"isCellBlocked",value:function(e){var t={};if(t[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,t[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,t[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){var i=parseInt((e.element instanceof Array?e.element[0]:e.element).getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(t,isNaN(i)?null:i)}return this.parent.eventBase.isBlockRange(t)}},{key:"cellClick",value:function(e){var t=new Date(e.startTime.getTime());if(this.parent.showQuickInfo&&this.parent.eventSettings.allowAdding&&"MonthAgenda"!==this.parent.currentView&&!this.isCellBlocked(e)&&this.parent.isMinMaxDate(new Date(t.setHours(0,0,0,0)))){var i=e.event.target;if(this.parent.isAdaptive){this.quickPopupHide();var n=this.parent.element.querySelector(".e-new-event");RD(n)&&(n=CP("div",{className:"e-new-event",innerHTML:'<div class="e-title">+ '.concat(this.l10n.getConstant("newEvent"),"</div>")}));var r=MP(i,".e-work-cells,.e-all-day-cells");r&&r.appendChild(n)}else{var a=MP(i,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!RD(a)&&!i.classList.contains("e-more-indicator"))if(this.quickPopup.relateTo===a&&this.quickPopup.element.classList.contains("e-popup-open")){var o=this.quickPopup.element.querySelector(".e-subject");o&&o.focus()}else{this.resetQuickPopupTemplates();var s={};s[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,s[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,s[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;var l=CP("div",{className:"e-cell-popup"});l.appendChild(this.getPopupHeader("Cell",s)),l.appendChild(this.getPopupContent("Cell",e,s)),l.appendChild(this.getPopupFooter("Cell",s));var c=l.querySelector(".e-subject");c&&cV.createInput({element:c,properties:{placeholder:this.l10n.getConstant("addTitle")}}),RD(this.parent.eventSettings.fields.subject.default)||(c.value=this.parent.eventSettings.fields.subject.default);var u=l.querySelector(".e-close");u&&this.renderButton("e-flat e-round e-small","e-icons e-close-icon",!1,u,this.popupClose);var h=l.querySelector(".e-event-details");h&&this.renderButton("e-flat","",!1,h,this.detailsClick);var d=l.querySelector(".e-event-create");d&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,d,this.saveClick),this.quickPopup.content=l,this.quickPopup.dataBind(),this.applyFormValidation(),this.morePopup&&this.morePopup.hide(),this.quickPopup.relateTo=a,this.beforeQuickPopupOpen(a)}}}else this.quickPopupHide()}},{key:"isSameEventClick",value:function(e){if(this.quickPopup.relateTo===MP(e.element,".e-appointment")&&this.quickPopup.element.classList.contains("e-popup-open")){var t=this.quickPopup.element.querySelector(".e-edit");if(t&&t.focus(),!this.parent.isAdaptive){var i=this.quickPopup.element.querySelector(".e-event-edit");i&&i.focus()}return!0}return!1}},{key:"isQuickTemplate",value:function(e){return"Both"===this.parent.quickInfoTemplates.templateType||this.parent.quickInfoTemplates.templateType===e}},{key:"eventClick",value:function(e){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup(MP(e.element,".e-appointment"));else{if(this.isSameEventClick(e))return;this.resetQuickPopupTemplates();var t=e.event,i=CP("div",{className:"e-event-popup"});i.appendChild(this.getPopupHeader("Event",t)),i.appendChild(this.getPopupContent("Event",e,t)),i.appendChild(this.getPopupFooter("Event",t));var n=this.parent.activeViewOptions.readonly||t[this.parent.eventFields.isReadonly],r=!this.parent.eventSettings.allowEditing||n,a=!this.parent.eventSettings.allowDeleting||n,o=i.querySelector(".e-edit"),s="e-flat e-round e-small";o&&this.renderButton(s,"e-icons e-edit-icon",r,o,this.editClick);var l=i.querySelector(".e-delete");l&&this.renderButton(s,"e-icons e-delete-icon",a,l,this.deleteClick);var c=i.querySelector(".e-close");c&&this.renderButton(s,"e-icons e-close-icon",!1,c,this.popupClose);var u=i.querySelector(".e-event-edit");u&&this.renderButton("e-flat e-primary","",r,u,this.editClick);var h=i.querySelector(".e-event-delete");h&&this.renderButton("e-flat","",a,h,this.deleteClick),this.quickPopup.content=i,this.quickPopup.dataBind(),this.morePopup&&!MP(e.element,".e-more-appointment-wrapper")&&this.morePopup.hide(),this.quickPopup.relateTo=this.parent.isAdaptive?document.body:MP(e.element,".e-appointment"),this.beforeQuickPopupOpen(e.element)}}},{key:"getPopupHeader",value:function(e,t){var i=CP("div",{className:"e-popup-header"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.header){var n=DD({},t,{elementType:e.toLowerCase()},!0),r=this.parent.element.id,a=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(n,this.parent,"header",r+"_headerTemplate",!1));AP([].slice.call(a),i)}else{var o;switch(e){case"Cell":o='<div class="e-header-icon-wrapper"><button class="e-close" title="'.concat(this.l10n.getConstant("close"),'"></button></div>');break;case"Event":var s=this.getFormattedString(t);o='<div class="e-header-icon-wrapper"><button class="e-edit e-icons" title="'.concat(this.l10n.getConstant("edit"),'"></button><button class="e-delete e-icons" title="').concat(this.l10n.getConstant("delete"),'"></button><button class="e-close" title="').concat(this.l10n.getConstant("close"),'"></button></div><div class="e-subject-wrap"><div class="e-subject ').concat(MH,'" title="').concat(s.eventSubject,'">').concat(s.eventSubject,"</div></div >")}var l=CP("div",{innerHTML:o});AP([].slice.call(l.childNodes),i)}return i}},{key:"getPopupContent",value:function(e,t,i){var n=CP("div",{className:"e-popup-content"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.content){var r=DD({},i,{elementType:e.toLowerCase()},!0),a=this.parent.element.id,o=[].slice.call(this.parent.getQuickInfoTemplatesContent()(r,this.parent,"content",a+"_contentTemplate",!1));AP([].slice.call(o),n)}else{var s,l=this.getResourceText(t,e.toLowerCase());switch(e){case"Cell":var c=this.getFormattedString(i);s='<table class="e-popup-table"><tbody><tr><td><form class="'.concat(LH,'" onsubmit="return false;"><input class="e-subject e-field" type="text" name="').concat(this.parent.eventFields.subject,'" /></form></td></tr><tr><td><div class="e-date-time"><div class="e-date-time-icon e-icons"></div><div class="e-date-time-details ').concat(MH,'">').concat(c.details,"</div></div>")+(this.parent.activeViewOptions.group.resources.length>0?'<div class="e-resource"><div class="e-resource-icon e-icons "></div><div class="e-resource-details '.concat(MH,'">').concat(l,"</div></div>"):"")+"</td></tr></tbody></table>";break;case"Event":var u=this.getFormattedString(i);s='<div class="e-date-time"><div class="e-date-time-icon e-icons"></div><div class="e-date-time-wrapper '+MH+'"><div class="e-date-time-details '+MH+'">'+u.details+"</div>",i[this.parent.eventFields.recurrenceRule]&&(s+='<div class="e-recurrence-summary '+MH+'">'+this.getRecurrenceSummary(i)+"</div>"),s+="</div></div>",i[this.parent.eventFields.location]&&(s+='<div class="e-location"><div class="e-location-icon e-icons"></div><div class="e-location-details '+MH+'">'+i[this.parent.eventFields.location]+"</div></div>"),(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&(s+='<div class="e-time-zone"><div class="e-time-zone-icon e-icons"></div><div class="e-time-zone-details '+MH+'">'+this.getTimezone(i)+"</div></div>"),i[this.parent.eventFields.description]&&(s+='<div class="e-description"><div class="e-description-icon e-icons"></div><div class="e-description-details '+MH+'">'+i[this.parent.eventFields.description]+"</div></div>"),this.parent.resourceCollection.length>0&&(s+='<div class="e-resource"><div class="e-resource-icon e-icons"></div><div class="e-resource-details '+MH+'">'+l+"</div></div>")}var h=CP("div",{innerHTML:s});AP([].slice.call(h.childNodes),n)}return n}},{key:"getPopupFooter",value:function(e,t){var i=CP("div",{className:"e-popup-footer"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.footer){var n=DD({},t,{elementType:e.toLowerCase()},!0),r=this.parent.element.id,a=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(n,this.parent,"footer",r+"_footerTemplate",!1));AP([].slice.call(a),i)}else{var o;switch(e){case"Cell":o='<button class="'.concat("e-event-details "+MH,'" title="').concat(this.l10n.getConstant("moreDetails"),'">').concat(this.l10n.getConstant("moreDetails"),'</button><button class="e-event-create ').concat(MH,'" title="').concat(this.l10n.getConstant("save"),'">')+this.l10n.getConstant("save")+"</button>";break;case"Event":o=this.parent.isAdaptive?"":'<button class="e-event-edit '.concat(MH,'" title="').concat(this.l10n.getConstant("edit"),'">').concat(this.l10n.getConstant("edit"),'</button><button class="e-event-delete ').concat(MH,'" title="').concat(this.l10n.getConstant("delete"),'">')+this.l10n.getConstant("delete")+"</button>"}var s=CP("div",{innerHTML:o});AP([].slice.call(s.childNodes),i)}return i}},{key:"getResourceText",value:function(e,t){var i=this;if(0===this.parent.resourceCollection.length)return null;var n="";if(0===this.parent.activeViewOptions.group.resources.length)!function(){var r=i.parent.resourceBase.resourceCollection.slice(-1)[0],a=r.dataSource;if("event"===t){var o,s=e.event,l=_createForOfIteratorHelper(a);try{for(l.s();!(o=l.n()).done;){var c=o.value,u=s[r.field];u instanceof Array?u.indexOf(c[r.idField])>-1&&function(){var e=u[u.indexOf(c[r.idField])],t=a.filter((function(t){return t[r.idField]===e}))[0];n+=""===n?t[r.textField]:", "+t[r.textField]}():c[r.idField]===u&&(n=c[r.textField].toString())}}catch(h){l.e(h)}finally{l.f()}}else n=a[0][r.textField].toString()}();else if("event"===t){for(var r,a,o=e.event,s=this.parent.resourceBase.resourceCollection.length-1;s>=0;s--)if(!RD(r=o[this.parent.resourceBase.resourceCollection[s].field])){a=this.parent.resourceBase.resourceCollection[s];break}Array.isArray(r)||(r=[r]);var l=[],c=a.dataSource;r.map((function(e){var t=OH(c,a.idField,e),i=c[t][a.textField];i&&l.push(i)})),n=l.join(", ")}else{var u=e,h=RD(u.groupIndex)?0:u.groupIndex,d=this.parent.resourceBase.lastResourceLevel[h];n=d.resourceData[d.resource.textField]}return n}},{key:"getFormattedString",value:function(e){var t=this.parent.eventFields,i=e[t.subject]||this.l10n.getConstant("noTitle"),n=e[t.startTime],r=e[t.endTime],a=this.getDateFormat(n,"long","MMMM d, y"),o=e[t.isAllDay]&&0===r.getHours()&&0===r.getMinutes()?this.getDateFormat(CH(new Date(r.getTime()),-1),"long","MMMM d, y"):this.getDateFormat(r,"long","MMMM d, y"),s=this.parent.getTimeString(n),l=this.parent.getTimeString(r),c="",u=r.getDate()!==n.getDate()&&(r.getTime()-n.getTime())/36e5<24?1:0;return e[t.isAllDay]?(c=a+" ("+this.l10n.getConstant("allDay")+")",(r.getTime()-n.getTime())/864e5>1&&(c+="&nbsp;-&nbsp;"+o+" ("+this.l10n.getConstant("allDay")+")")):c=(r.getTime()-n.getTime())/864e5>=1||u>0?a+" ("+s+")&nbsp;-&nbsp;"+o+" ("+l+")":a+" ("+s+"&nbsp;-&nbsp;"+l+")",{eventSubject:i,details:c}}},{key:"moreEventClick",value:function(e,t,i){var n=this;this.quickPopupHide(!0);var r=this.morePopup.element.querySelector(".e-more-event-content");r&&IP(r);var a=e.date.getTime().toString(),o=MP(e.element,".e-more-indicator,.e-work-cells"),s=this.parent.globalize.formatDate(e.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector(".e-header-day").innerHTML=RH(s,"single");var l,c=this.morePopup.element.querySelector(".e-header-date");c.innerHTML=this.getDateFormat(e.date,"d","d"),c.setAttribute("data-date",a),c.setAttribute("data-end-date",t.getTime().toString()),RD(i)||(c.setAttribute("data-group-index",i),l=this.parent.resourceBase.lastResourceLevel[parseInt(i,10)].groupOrder);var u=this.createMoreEventList(e.event,l,i);if(this.morePopup.element.querySelector(".e-more-event-popup").appendChild(u),_P(this.morePopup.element.querySelector(".e-more-event-date-header").childNodes,"e-current-date"),bH(e.date).getTime()===bH(this.parent.getCurrentTime()).getTime()&&wP(this.morePopup.element.querySelector(".e-more-event-date-header").childNodes,"e-current-date"),!this.parent.isAdaptive)if(-1!==this.parent.currentView.indexOf("Timeline")){var h=o.getAttribute("data-group-index"),d=new Date(parseInt(o.getAttribute("data-start-date"),10));d.setHours(d.getHours(),d.getMinutes(),0);var p=this.parent.getMsFromDate(d).toString();this.morePopup.relateTo=RD(h)?this.parent.element.querySelector('.e-content-wrap tbody tr td[data-date="'+p+'"]'):this.parent.element.querySelector('.e-content-wrap tbody tr td[data-group-index="'+h+'"][data-date="'+p+'"]')}else this.morePopup.relateTo=MP(o,".e-work-cells");this.parent.updateEventTemplates();var f={type:"EventContainer",cancel:!1,element:this.morePopup.element};f.data=e,this.parent.trigger("popupOpen",f,(function(e){e.cancel||n.morePopup.show()}))}},{key:"saveClick",value:function(){this.isCrudAction=!0,this.quickPopupHide()}},{key:"detailsClick",value:function(){var e=this.quickPopup.element.querySelector(".e-subject");e&&""!==e.value&&DD(this.parent.activeCellsData,{subject:e.value}),this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}},{key:"editClick",value:function(){this.quickPopupHide(!0);var e=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",RD(e[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(e,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())}},{key:"deleteClick",value:function(){this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()}},{key:"updateMoreEventContent",value:function(){if(!this.morePopup.element.classList.contains("e-popup-close")){var e=this.morePopup.element.querySelector(".e-more-event-content");e&&IP(e);var t,i,n=this.morePopup.element.querySelector(".e-header-date"),r=new Date(parseInt(n.getAttribute("data-date"),10)),a=new Date(parseInt(n.getAttribute("data-end-date"),10)),o=n.getAttribute("data-group-index");RD(o)||(i=(t=this.parent.resourceBase.lastResourceLevel[parseInt(o,10)]).groupOrder);var s=this.parent.eventBase.filterEvents(r,a,this.parent.eventsProcessed,t),l=this.createMoreEventList(s,i,o);this.morePopup.element.querySelector(".e-more-event-popup").appendChild(l)}}},{key:"closeClick",value:function(){this.quickPopupHide(),this.morePopup.hide()}},{key:"dialogButtonClick",value:function(e){this.quickDialog.hide();var t=e.target,i=this.quickDialog.element.querySelector(".e-quick-alertcancel"),n=this.parent.activeEventData.event;if(t.classList.contains("e-quick-dialog-occurrence-event"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else if(t.classList.contains("e-quick-dialog-following-events"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(n,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else if(t.classList.contains("e-quick-dialog-series-event"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(n,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(n,this.parent.currentAction)}else t.classList.contains("e-quick-dialog-delete")?this.parent.crudModule.deleteEvent(n,this.parent.currentAction):!i.classList.contains("e-disable")&&(t.classList.contains("e-quick-alertok")||t.classList.contains("e-quick-alertcancel")&&!i.classList.contains("e-quick-dialog-cancel"))&&(this.parent.uiStateValues.isIgnoreOccurrence=t.classList.contains("e-quick-alertcancel"),this.parent.eventWindow.eventSave(this.l10n.getConstant("ok")))}},{key:"updateTapHoldEventPopup",value:function(e){var t=this.parent.eventBase.getSelectedEventElements(e);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),t.length>0){var i=this.parent.eventBase.getEventByGuid(t[0].getAttribute("data-guid")),n=1===t.length?i[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+t.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector(".e-subject").innerHTML=n,t.length>1?wP([this.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):_P([this.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.quickPopupHide()}},{key:"getTimezone",value:function(e){var t="";return t+=e[this.parent.eventFields.startTimezone]||"",t+=""===t?"":" - ",t+=e[this.parent.eventFields.endTimezone]||""}},{key:"getRecurrenceSummary",value:function(e){var t=this.parent.eventWindow.getRecurrenceEditorInstance();if(t){var i=t.getRuleSummary(e[this.parent.eventFields.recurrenceRule]);return i.charAt(0).toUpperCase()+i.slice(1)}return""}},{key:"getDateFormat",value:function(e,t,i){return RH(this.parent.globalize.formatDate(e,{skeleton:t,calendar:this.parent.getCalendarMode()}),"single")}},{key:"getDataFromTarget",value:function(e){if(e.classList.contains("e-appointment"))return this.parent.activeEventData.event;var t={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex};return this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,t),t}},{key:"beforeQuickDialogClose",value:function(){var e=this,t={type:RD(this.parent.activeEventData.event)?"ValidationAlert":RD(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger("popupClose",t,(function(t){(t=e.serializingData(t)).cancel||e.parent.eventBase.focusElement()}))}},{key:"beforeQuickPopupOpen",value:function(e,t){var i=this,n=this.quickPopup.element.querySelector(".e-event-popup"),r=this.parent.isAdaptive?n?"ViewEventInfo":"EditEventInfo":"QuickInfo",a={type:r,cancel:!1,data:DD({},this.getDataFromTarget(e),null,!0),target:e,element:this.quickPopup.element};this.parent.trigger("popupOpen",a,(function(t){if(t.cancel)i.quickPopupHide(),i.destroyButtons(),t.element.classList.contains("e-popup-open")&&i.quickPopupClose(),i.resetQuickPopupTemplates(),IH(i.quickPopup.element),i.isMultipleEventSelect=!1;else{var a=i.quickPopup.element.style.display;if(i.quickPopup.element.style.display="block",i.parent.isAdaptive)i.quickPopup.element.removeAttribute("style"),i.quickPopup.element.style.display="block",i.quickPopup.element.style.height=FD("EditEventInfo"===r?65:window.innerHeight);else{i.quickPopup.offsetX=10,i.quickPopup.collision={X:i.parent.enableRtl?"flip":"none",Y:"fit"},i.quickPopup.position={X:i.parent.enableRtl?"left":"right",Y:"top"},i.quickPopup.dataBind(),i.quickPopup.refreshPosition(null,!0);var o=ML(i.quickPopup.element,i.parent.element);if(o.indexOf(i.parent.enableRtl?"left":"right")>-1&&(i.quickPopup.offsetX=-e.offsetWidth-10-i.quickPopup.element.offsetWidth,i.quickPopup.dataBind(),ML(i.quickPopup.element,i.parent.element).indexOf("left")>-1&&(i.quickPopup.position={X:"center",Y:"center"},i.quickPopup.collision={X:"fit",Y:"fit"},i.quickPopup.offsetX=-i.quickPopup.element.offsetWidth/2,i.quickPopup.dataBind())),i.parent.virtualScrollModule&&(o.indexOf("top")>-1||o.indexOf("bottom")>-1)){var s=(l=i.parent.element.querySelector(".e-content-wrap table"),c=getComputedStyle(l),window.WebKitCSSMatrix?new WebKitCSSMatrix(c.webkitTransform).m42:0);i.quickPopup.offsetY=s,i.quickPopup.dataBind()}}n&&i.applyEventColor(),i.quickPopup.element.style.display=a,i.quickPopup.dataBind(),i.quickPopup.show()}var l,c}))}},{key:"isQuickInfoTemplates",value:function(){return!RD(this.parent.quickInfoTemplates.header||this.parent.quickInfoTemplates.content||this.parent.quickInfoTemplates.footer)}},{key:"applyEventColor",value:function(){var e;e="Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?this.parent.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.parent.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header"),n=this.quickPopup.element.querySelector(".e-popup-footer");n&&n.offsetParent&&((i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba(".concat(t.match(/\d+/g).join(),",0.3)"))),i&&(i.style.backgroundColor=t)}}},{key:"quickPopupOpen",value:function(){if(this.parent.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit");t&&t.focus();var i=this.quickPopup.element.querySelector(".e-edit");i&&i.focus()}}},{key:"updateQuickPopupTemplates",value:function(e){}},{key:"quickPopupShow",value:function(e,t){e.header&&e.content&&e.footer&&this.beforeQuickPopupOpen(t,!0)}},{key:"resetQuickPopupTemplates",value:function(){}},{key:"quickPopupClose",value:function(){this.resetQuickPopupTemplates(),this.parent.eventBase.focusElement(),this.quickPopup.relateTo="e-work-cells",this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyButtons(),IH(this.quickPopup.element)}},{key:"morePopupOpen",value:function(){if(this.parent.isAdaptive)return this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",void(this.morePopup.element.style.height=FD(window.innerHeight));this.morePopup.element.querySelector(".e-header-date").focus(),this.morePopup.refreshPosition()}},{key:"morePopupClose",value:function(){var e=this.parent.element.querySelector(".e-more-appointment-wrapper");e&&IP(e)}},{key:"popupClose",value:function(){this.isCrudAction=!1,this.quickPopupHide(!0)}},{key:"quickPopupHide",value:function(e){var t=this;if(this.quickPopup.element.classList.contains("e-popup-open")){var i,n=this.quickPopup.element.querySelector(".e-cell-popup");if(n){var r=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&r&&!r.ej2_instances[0].validate())return;var a=this.parent.eventFields,o=this.parent.eventWindow.getObjectFromFormData("e-quick-popup-wrapper");this.parent.eventWindow.setDefaultValueToObject(o),o[a.id]=this.parent.eventBase.getEventMaxID(),o[a.startTime]=this.parent.activeCellsData.startTime,o[a.endTime]=this.parent.activeCellsData.endTime,o[a.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(o),i=o}else i=this.parent.activeEventData.event;var s=this.quickPopup.element.querySelector(".e-event-popup");this.parent.trigger("popupClose",{type:this.parent.isAdaptive?s?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:i,element:this.quickPopup.element,target:n?this.parent.activeCellsData.element:this.parent.activeEventData.element},(function(i){if(!(i=t.serializingData(i)).cancel&&t.quickPopup.element.classList.contains("e-popup-open")){if(n&&t.isCrudAction&&(t.parent.currentAction="Add",t.parent.crudModule.addEvent(i.data)),e){var r=t.quickPopup.hideAnimation;t.quickPopup.hideAnimation=null,t.quickPopup.hide(),t.quickPopup.hideAnimation=r}else t.quickPopup.hide();t.isMultipleEventSelect=!1,t.isCrudAction=!1}}))}}},{key:"serializingData",value:function(e){return e}},{key:"navigationClick",value:function(e){if(!RD(MP(e.target,".e-navigate"))){var t=this.parent.getDateFromElement(e.currentTarget);this.parent.isServerRenderer()&&(t=new Date(+t-6e4*t.getTimezoneOffset())),RD(t)||(this.closeClick(),this.parent.setScheduleProperties({selectedDate:t}),this.parent.changeView(this.parent.getNavigateView(),e))}}},{key:"documentClick",value:function(e){var t=e.event.target,i=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",n=this.parent.element.querySelector(".e-quick-popup-wrapper");n&&n.childElementCount>0&&!MP(t,i)&&this.quickPopupHide();var r=this.parent.element.querySelector(".e-inline-subject");r&&r!==t&&this.parent.allowInline&&this.parent.inlineModule.documentClick(),MP(t,".e-appointment,.e-header-cells")&&this.parent.removeNewEventElement(),MP(t,i)||(this.quickPopupHide(),this.parent.removeNewEventElement()),MP(t,".e-more-popup-wrapper")||t.classList.contains("e-more-indicator")||MP(t,".e-popup-open")||MP(t,".e-work-cells")||this.morePopup.hide()}},{key:"onClosePopup",value:function(){this.quickPopupHide(),this.parent.eventBase.focusElement()}},{key:"addEventListener",value:function(){this.parent.on("cellClick",this.cellClick,this),this.parent.on("eventClick",this.eventClick,this),this.parent.on("document-click",this.documentClick,this),this.parent.on(dH,this.updateMoreEventContent,this)}},{key:"removeEventListner",value:function(){this.parent.off("cellClick",this.cellClick),this.parent.off("eventClick",this.eventClick),this.parent.off("document-click",this.documentClick),this.parent.off(dH,this.updateMoreEventContent)}},{key:"destroyButtons",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.quickPopup.element.querySelectorAll(".e-control.e-btn")));try{for(t.s();!(e=t.n()).done;){var i=e.value.ej2_instances[0];i&&i.destroy()}}catch(n){t.e(n)}finally{t.f()}}},{key:"refreshQuickDialog",value:function(){this.quickDialog.element&&(this.quickDialog.destroy(),IP(this.quickDialog.element),this.quickDialog.element=null),this.renderQuickDialog()}},{key:"refreshQuickPopup",value:function(){this.quickPopup.element&&(this.quickPopup.destroy(),IP(this.quickPopup.element),this.quickPopup.element=null),this.renderQuickPopup()}},{key:"refreshMorePopup",value:function(){this.morePopup.element&&(this.morePopup.destroy(),IP(this.morePopup.element),this.morePopup.element=null),this.renderMorePopup()}},{key:"destroy",value:function(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListner(),this.destroyButtons(),this.quickPopup.destroy(),IP(this.quickPopup.element),this.morePopup.destroy(),IP(this.morePopup.element),this.quickDialog.element&&(this.quickDialog.destroy(),IP(this.quickDialog.element),this.quickDialog.element=null)}}]),e}(),eq=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.tooltipObj=new eF({content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" e-schedule-event-tooltip",target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),enableRtl:this.parent.enableRtl}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0}return _createClass(e,[{key:"getTargets",value:function(){var e=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&e.push(".e-resource-cells"),this.parent.eventSettings.enableTooltip&&e.push(".e-appointment"),e.join(",")}},{key:"onBeforeOpen",value:function(){}},{key:"onBeforeClose",value:function(){this.parent.group.headerTooltipTemplate&&iP(this.parent.element.id+"_headerTooltipTemplate"),this.parent.eventSettings.tooltipTemplate&&iP(this.parent.element.id+"_tooltipTemplate")}},{key:"onBeforeRender",value:function(e){if(RD(e.target.getAttribute("data-tooltip-id"))){if(e.target.classList.contains("e-resource-cells")&&this.parent.activeViewOptions.group.resources.length>0){var t;if(this.parent.activeView.isTimelineView()){var i=parseInt(e.target.getAttribute("data-group-index"),0);t=this.parent.resourceBase.lastResourceLevel[i]}else{var n=e.target.parentNode.sectionRowIndex,r=e.target.cellIndex;t=this.parent.activeView.getColumnLevels()[n][r]}var a={resource:t.resource,resourceData:t.resourceData},o=CP("div"),s=this.parent.element.id+"_headerTooltipTemplate";return AP([].slice.call(this.parent.getHeaderTooltipTemplate()(a,this.parent,"headerTooltipTemplate",s,!1)),o),void this.setContent(o)}var l=this.parent.eventBase.getEventByGuid(e.target.getAttribute("data-guid"));if(RD(this.parent.eventSettings.tooltipTemplate)){var c=this.parent.globalize,u=this.parent.eventFields,h=new Date(""+l[u.startTime]),d=new Date(""+l[u.endTime]);d=0===d.getHours()&&0===d.getMinutes()?new Date(d.setMilliseconds(-1e3)):d;var p=bH(new Date(""+h)),f=bH(new Date(""+d)),v=l[u.subject]||this.parent.eventSettings.fields.subject.default,m=RD(l[u.location])?"":l[u.location],g="",y="",b="";g=c.formatDate(h,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),y=c.formatDate(h,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),b=c.formatDate(d,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),g=RH(g,"single"),y=RH(y,"single"),b=RH(b,"single");var k,C=c.formatDate(h,{type:"time",skeleton:"short",calendar:this.parent.getCalendarMode()}),w=c.formatDate(d,{type:"time",skeleton:"short",calendar:this.parent.getCalendarMode()});p.getTime()===f.getTime()?k=RH(k=c.formatDate(h,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),"single"):k=p.getFullYear()===f.getFullYear()?g+" - "+b:y+" - "+b;var _=l[u.isAllDay]?this.parent.localeObj.getConstant("allDay"):C+" - "+w;this.setContent('<div><div class="e-subject">'+v+'</div><div class="e-location">'+m+'</div><div class="e-details">'+k+'</div><div class="e-all-day">'+_+"</div></div>")}else{var S=CP("div"),E=this.parent.element.id+"_tooltipTemplate",T=DH(l);AP([].slice.call(this.parent.getEventTooltipTemplate()(T,this.parent,"tooltipTemplate",E,!1)),S),this.setContent(S)}}}},{key:"setContent",value:function(e){this.tooltipObj.setProperties({content:e},!0)}},{key:"close",value:function(){this.tooltipObj.close()}},{key:"destroy",value:function(){this.tooltipObj.destroy(),wP([this.parent.element],"e-control"),this.tooltipObj=null}}]),e}(),tq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},iq="e-input-wrapper",nq="e-form-left",rq="e-recurrence-count",aq="e-hide-recurrence-element",oq={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},sq={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},lq=["e-days","e-non-week","e-end-on","e-interval","e-year-expander","e-month-expander"],cq=["e-non-week"],uq=["e-days","e-year-expander"],hq=["e-days"],dq=["e-days","e-non-week","e-year-expander","e-month-expander"],pq=["e-end-on-date","e-end-on-count"],fq=["e-end-on-date"],vq=["e-end-on-count"],mq=(MU=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var r;return _classCallCheck2(this,i),(r=t.call(this,e,n)).defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},r.renderStatus=!1,r.dayButtons=[],r.monthButtons=[],r.calendarUtil=gU(r.calendarMode),r}return _createClass(i,[{key:"startState",value:function(e,t,i){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(i),this.updateUntilDate(i),this.onMonthDay.setProperties({checked:!0})}},{key:"preRender",value:function(){this.localeObj=new PM(this.getModuleName(),this.defaultLocale,this.locale)}},{key:"applyCustomClass",value:function(e){e&&wP([this.element],e.split(" "))}},{key:"initialize",value:function(){wP([this.element],"e-"+this.getModuleName()),this.renderComponent(),RD(this.value)||""===this.value?(RD(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),"never",this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)}},{key:"triggerChangeEvent",value:function(){var e=this;if(this.renderStatus){var t=this.getRecurrenceRule();this.trigger("change",{value:t},(function(t){return e.setProperties({value:t.value},!1)}))}}},{key:"resetDayButton",value:function(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach((function(e){return _P([e],["e-active","e-primary"])}))}},{key:"daySelection",value:function(e){this.resetDayButton();var t=[0,1,2,3,4,5,6];this.rotateArray(t,this.firstDayOfWeek);var i=this.element.querySelector('.e-days button[data-index="'+t.indexOf(e)+'"]');i&&wP([i],["e-active","e-primary"])}},{key:"rtlClass",value:function(e){e?wP([this.element],"e-rtl"):_P([this.element],"e-rtl")}},{key:"updateUntilDate",value:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})}},{key:"selectMonthDay",value:function(e){this.monthDate.setProperties({value:this.calendarUtil.getDate(e)}),this.monthWeekDays.setProperties({value:sq[["sun","mon","tue","wed","thu","fri","sat"][e.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(e)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())}},{key:"updateForm",value:function(e){var t=this;this.repeatType.setProperties({value:e});var i=this.element.querySelector(".e-end-on");switch("daily"===e?NP(i,[nq],["e-form-right"]):NP(i,["e-form-right"],[nq]),e){case"none":lq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}));break;case"weekly":cq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}));break;case"monthly":uq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}));break;case"yearly":hq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}));break;case"daily":dq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}))}}},{key:"updateEndOnForm",value:function(e){var t=this;switch(this.endType.setProperties({value:e}),e){case"never":pq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}));break;case"until":vq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}));break;case"count":fq.forEach((function(e){return wP([t.element.querySelector("."+e)],aq)}))}}},{key:"freshOnEndForm",value:function(){var e=this;pq.forEach((function(t){var i=e.element.querySelector("."+t);i&&_P([i],aq)}))}},{key:"showFormElement",value:function(){var e=this;lq.forEach((function(t){var i=e.element.querySelector("."+t);i&&_P([i],aq)}))}},{key:"renderDropdowns",value:function(){var e=this,t=this;this.repeatType=new iH({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:"text",value:"value"},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat")},change:function(i){t.setProperties({selectedType:e.frequencies.indexOf(i.value)},!1),t.element.querySelector(".e-repeat-content").innerHTML=t.localeObj.getConstant(oq[i.value]),t.showFormElement(),t.updateForm(i.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector(".e-repeat-element")),this.endType=new iH({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:"text",value:"value"},change:function(e){t.freshOnEndForm(),t.updateEndOnForm(e.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector(".e-end-on-element"));var i=function(i){return new iH({dataSource:i,popupWidth:e.getPopupWidth(),enableRtl:e.enableRtl,fields:{text:"text",value:"value"},index:1,change:function(e){t.onWeekDay.setProperties({checked:!0}),t.resetFormValues(),t.triggerChangeEvent()}})};this.monthWeekPos=i(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector(".e-month-pos")),this.monthWeekDays=i(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector(".e-month-week")),this.monthValue=new iH({dataSource:this.getMonthData(),fields:{text:"text",value:"value"},floatLabelType:"Always",enableRtl:this.enableRtl,index:7,change:function(e){t.resetFormValues(),t.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector(".e-year-expander-element"))}},{key:"setDefaultValue",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox")));try{for(t.s();!(e=t.n()).done;){var i=e.value.ej2_instances[0];i.element.classList.contains("e-repeat-interval")?(i.value=1,i.dataBind()):i.element.classList.contains(rq)&&(i.value=10,i.dataBind())}}catch(n){t.e(n)}finally{t.f()}}},{key:"resetFormValues",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll('.e-control [type="text"]')));try{for(t.s();!(e=t.n()).done;){var i=e.value,n=void 0;if(i.classList.contains("e-datepicker"))(n=i.ej2_instances[0]).value?(n.value=n.value,n.dataBind()):this.updateUntilDate(this.startDate);else if(i.classList.contains("e-dropdownlist"))(n=i.ej2_instances[0]).index=n.index||0,n.dataBind();else if(i.classList.contains("e-numerictextbox")){var r;r=(n=i.ej2_instances[0]).element.classList.contains("e-repeat-interval")?1:n.element.classList.contains(rq)?10:this.startDate.getDate(),n.value=n.value||r,n.dataBind()}}}catch(a){t.e(a)}finally{t.f()}}},{key:"getPopupWidth",value:function(){return AR.isDevice?"100%":"auto"}},{key:"renderDatePickers",value:function(){var e=this;this.untilDateObj=new Ij({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:RD(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:function(t){t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector(".e-until-date"))}},{key:"getFormat",value:function(e){return"en"===this.locale||"en-US"===this.locale?TD(e+".short",pR(this.getCalendarMode())):TD("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+e+".short",lR)}},{key:"dayButtonRender",value:function(){var e,t=this,i=[].slice.call(this.element.querySelectorAll(".e-days button")),n=this,r=_createForOfIteratorHelper(i);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=new pL({isToggle:!0,enableRtl:this.enableRtl},a);this.dayButtons.push(o),OR.add(a,"click",(function(e){var i=[].slice.call(t.element.querySelectorAll(".e-days button.e-primary")),r=e.target;r.classList.contains("e-primary")?i.length>1&&(_P([r],"e-primary"),n.triggerChangeEvent()):(wP([r],"e-primary"),n.triggerChangeEvent())}))}}catch(s){r.e(s)}finally{r.f()}}},{key:"radioButtonRender",value:function(){var e=this;this.onMonthDay=new kL({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:function(t){e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector(".e-month-expander-element")),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new kL({label:"",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:function(t){e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector(".e-month-expander-wrapper")),this.monthButtons.push(this.onWeekDay)}},{key:"numericTextboxRender",value:function(){var e=this;this.recurrenceCount=new HV({value:10,format:"#",enableRtl:this.enableRtl,floatLabelType:"Always",min:1,max:999,change:function(t){e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+rq)),this.monthDate=new HV({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:function(t){e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector(".e-month-day")),this.repeatInterval=new HV({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:function(t){e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector(".e-repeat-interval"))}},{key:"renderComponent",value:function(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()}},{key:"rotateArray",value:function(e,t){for(var i,n=0;n<t;n++)i=e.shift(),e.push(i)}},{key:"getEndData",value:function(){var e=this,t=[];return["never","until","count"].forEach((function(i){t.push({text:e.localeObj.getConstant(i),value:i})})),t}},{key:"getDayPosition",value:function(e){var t=new Date(e.getTime()),i=new Date(e.getTime()),n=e.getDay(),r=[];for(t=this.calendarUtil.getMonthStartDate(t),i=this.calendarUtil.getMonthEndDate(i);t<i;)t.getDay()===n&&r.push(t.getTime()),t.setDate(t.getDate()+1);return r.indexOf(e.getTime())===r.length-1?-1:r.indexOf(e.getTime())+1}},{key:"getRepeatData",value:function(){var e=[],t=this;return this.frequencies.forEach((function(i){e.push({text:t.localeObj.getConstant("none"===i?"never":i),value:i})})),e}},{key:"getMonthPosData",value:function(){var e={first:1,second:2,third:3,fourth:4,last:-1},t=this,i=[];return["first","second","third","fourth","last"].forEach((function(n){i.push({text:t.localeObj.getConstant(n),value:e[n]})})),i}},{key:"getDayData",value:function(e){var t,i=["sun","mon","tue","wed","thu","fri","sat"],n=[];this.rotateArray(i,this.firstDayOfWeek),t="en"===this.locale||"en-US"===this.locale?TD("days.stand-alone."+e,pR(this.getCalendarMode())):TD("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+e,lR);for(var r=0,a=i;r<a.length;r++){var o=a[r],s=TD(o,t);n.push({text:"narrow"===e?s:RH(s,"single"),value:sq[o]})}return n}},{key:"getMonthData",value:function(){var e,t=[];e="en"===this.locale||"en-US"===this.locale?TD("months.stand-alone.wide",pR(this.getCalendarMode())):TD("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide",lR);for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];t.push({text:RH(TD(r,e),"single"),value:r})}return t}},{key:"setTemplate",value:function(){var e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+iq+" "+nq+'"><input type="text" tabindex="0" class="e-repeat-element"label="'+"e-repeat-element".substr(2)+'" /></div><div class="'+iq+' e-interval e-form-right"><table  class="e-recurrence-table e-repeat-content-wrapper"><tr><td><input type="text" tabindex="0" class="e-repeat-interval"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="e-repeat-content"></span></td></tr></table></div><div class="e-input-wrapper-side e-days '+nq+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="e-input-wrapper-side e-non-week '+nq+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="e-year-expander"><input class="e-year-expander-element" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="e-month-expander"><table class="e-recurrence-table e-month-expand-wrapper"><tr><td><div class="'+iq+' e-month-expander-checkbox-wrapper"><input class="e-month-expander-element"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+iq+' e-monthday-element"><input type="text" tabindex="0" class="e-month-day"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+iq+' e-month-expander-checkbox-wrapper" style="min-width: 30px;margin-bottom:18px;"><input class="e-month-expander-wrapper"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+iq+' e-week-position" ><input type="text" tabindex="0" class="e-month-pos"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+iq+'" style="min-width: 120px;"><input type="text" tabindex="0" class="e-month-week"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="e-input-wrapper-side e-end-on e-form-right"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+iq+' e-end-on-left"><input type="text" tabindex="0" class="e-end-on-element"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+iq+' e-end-on-date" ><input type="text" tabindex="0" class="e-until-date"title="'+this.localeObj.getConstant("until")+'" /></div><div class="'+iq+' e-end-on-count"><input type="text" tabindex="0" class="'+rq+'"title="'+this.localeObj.getConstant("count")+'" /></div></div></div></div>'}},{key:"getSelectedDaysData",value:function(){var e="BYDAY=",t=[].slice.call(this.element.querySelectorAll(".e-days button.e-primary")),i=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(i,this.firstDayOfWeek);for(var n=0;n<t.length;n++)e+=i[parseInt(t[n].getAttribute("data-index"),10)]+(n===t.length-1?"":",");return e+";"}},{key:"getSelectedMonthData",value:function(){return this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+";":"BYMONTHDAY="+this.monthDate.value+";"}},{key:"getIntervalData",value:function(){return"INTERVAL="+this.repeatInterval.value+";"}},{key:"getEndOnCount",value:function(){return"COUNT="+this.recurrenceCount.value+";"}},{key:"getYearMonthRuleData",value:function(){return"BYMONTH="+this.monthValue.value+";"}},{key:"updateWeekButton",value:function(e){var t=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(t,this.firstDayOfWeek);var i,n=_createForOfIteratorHelper(this.dayButtons);try{for(n.s();!(i=n.n()).done;){var r=i.value,a=parseInt(r.element.getAttribute("data-index"),10);-1!==e.indexOf(t[a])?r.setProperties({isPrimary:!0}):r.setProperties({isPrimary:!1})}}catch(o){n.e(o)}finally{n.f()}}},{key:"updateMonthUI",value:function(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(var e=0,t=Object.keys(sq);e<t.length;e++){var i=t[e];if(sq[i]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}}}},{key:"updateUI",value:function(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case"until":this.untilDateObj.setProperties({value:this.ruleObject.until});break;case"count":this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(e){case"weekly":this.updateWeekButton(this.ruleObject.day);break;case"yearly":this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case"monthly":this.updateMonthUI()}}},{key:"getUntilData",value:function(){return this.untilDateObj.value?"UNTIL="+RU(this.untilDateObj.value)+";":""}},{key:"destroyComponents",value:function(){this.recurrenceCount.isDestroyed||this.recurrenceCount.destroy(),this.monthDate.isDestroyed||this.monthDate.destroy(),this.repeatInterval.isDestroyed||this.repeatInterval.destroy(),this.untilDateObj.isDestroyed||this.untilDateObj.destroy(),this.repeatType.isDestroyed||this.repeatType.destroy(),this.endType.isDestroyed||this.endType.destroy(),this.monthWeekPos.isDestroyed||this.monthWeekPos.destroy(),this.monthWeekDays.isDestroyed||this.monthWeekDays.destroy(),this.monthValue.isDestroyed||this.monthValue.destroy(),this.dayButtons.forEach((function(e){e.isDestroyed||e.destroy()})),this.dayButtons=[],this.monthButtons.forEach((function(e){e.isDestroyed||e.destroy()})),this.monthButtons=[]}},{key:"resetFields",value:function(){this.startState("none","never",this.startDate),this.setDefaultValue()}},{key:"updateRuleUntilDate",value:function(e){if(this.untilDateObj.value&&e){var t=this.untilDateObj.value,i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getMilliseconds());this.untilDateObj.setProperties({value:i})}}},{key:"getCalendarMode",value:function(){return this.calendarMode.toLowerCase()}},{key:"getRuleSummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getRecurrenceRule();return function(e,t,i){var n,r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Gregorian",o=dU(e),s=t.getConstant("every")+" ",l=a.toLowerCase();if("en"===i||"en-US"===i){var c="days.stand-alone.abbreviated";r=TD("months.stand-alone.abbreviated",pR(l)),n=TD(c,pR(l))}else{var u="main."+i+".dates.calendars."+l+".days.stand-alone.abbreviated";r=TD("main."+i+".dates.calendars."+l+".months.stand-alone.abbreviated",lR),n=TD(u,lR)}switch(o.interval>1&&(s+=o.interval+" "),o.freq){case"DAILY":s+=t.getConstant("summaryDay");break;case"WEEKLY":s+=t.getConstant("summaryWeek")+" "+t.getConstant(AU)+" ",o.day.forEach((function(e,t){s+=RH(TD(OU[e],n),"single"),s+=o.day.length-1===t?"":", "}));break;case"MONTHLY":s+=t.getConstant("summaryMonth")+" "+t.getConstant(AU)+" ",s+=zH(o,n,t);break;case"YEARLY":s+=t.getConstant("summaryYear")+" "+t.getConstant(AU)+" ",s+=RH(TD(o.month[0].toString(),r),"single")+" ",s+=zH(o,n,t)}if(o.count)s+=", "+o.count+" "+t.getConstant("summaryTimes");else if(o.until){var h=o.until;s+=", "+t.getConstant("summaryUntil")+" "+h.getDate()+" "+RH(TD((h.getMonth()+1).toString(),r),"single")+" "+h.getFullYear()}return s}(e,this.localeObj,this.locale,this.calendarMode)}},{key:"getRecurrenceDates",value:function(e,t,i,n,r){return r=RD(r)?this.startDate:r,GH(e,t,i,this.firstDayOfWeek,n,r,this.calendarMode)}},{key:"getRecurrenceRule",value:function(){var e="FREQ=";switch(this.repeatType.value){case"daily":e+="DAILY;";break;case"weekly":e+="WEEKLY;"+this.getSelectedDaysData();break;case"monthly":e+="MONTHLY;"+this.getSelectedMonthData();break;case"yearly":e+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case"none":return""}switch(e+=this.getIntervalData(),this.endType.value){case"until":e+=this.getUntilData();break;case"count":e+=this.getEndOnCount()}return e}},{key:"setRecurrenceRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startDate;if(e){this.renderStatus=!1,this.ruleObject=dU(e);var i=this.ruleObject.count?"count":this.ruleObject.until?"until":"never";switch(this.ruleObject.freq){case"DAILY":this.startState("daily",i,t),this.updateUI("daily",i);break;case"WEEKLY":this.startState("weekly",i,t),this.updateUI("weekly",i);break;case"MONTHLY":this.startState("monthly",i,t),this.updateUI("monthly",i);break;case"YEARLY":this.startState("yearly",i,t),this.updateUI("yearly",i)}this.renderStatus=!0,this.triggerChangeEvent()}else this.repeatType.setProperties({value:"none"})}},{key:"destroy",value:function(){this.destroyComponents(),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this);var e=["e-"+this.getModuleName()];for(this.cssClass&&(e=e.concat(this.cssClass.split(" "))),_P([this.element],e);this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)}},{key:"getModuleName",value:function(){return"recurrenceeditor"}},{key:"getPersistData",value:function(){return this.addOnPersist([])}},{key:"render",value:function(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()}},{key:"onPropertyChanged",value:function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":t.cssClass&&_P([this.element],t.cssClass.split(" ")),e.cssClass&&wP([this.element],e.cssClass.split(" "));break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=e.calendarMode,this.calendarUtil=gU(e.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:e.dateFormat})}}}]),i}(kM),tq([QP(["none","daily","weekly","monthly","yearly"])],MU.prototype,"frequencies",void 0),tq([QP(0)],MU.prototype,"firstDayOfWeek",void 0),tq([QP(new Date)],MU.prototype,"startDate",void 0),tq([QP()],MU.prototype,"dateFormat",void 0),tq([QP("Gregorian")],MU.prototype,"calendarMode",void 0),tq([QP()],MU.prototype,"cssClass",void 0),tq([QP()],MU.prototype,"value",void 0),tq([QP(new Date(1900,0,1))],MU.prototype,"minDate",void 0),tq([QP(new Date(2099,11,31))],MU.prototype,"maxDate",void 0),tq([QP(0)],MU.prototype,"selectedType",void 0),tq([eM()],MU.prototype,"change",void 0),MU=tq([tM],MU)),gq=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.fieldValidator=new ZU,this.renderEventWindow()}return _createClass(e,[{key:"renderEventWindow",value:function(){this.element=CP("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var e={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:"e-schedule-dialog",enableRtl:this.parent.enableRtl,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(e.cssClass="e-schedule-dialog e-device",e.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>'):(e.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:"e-event-delete",disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary e-event-save",isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:"e-event-cancel",content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}],e.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>"),this.dialogObject=new XN(e,this.element),this.dialogObject.isStringTemplate=!0,this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),wP([this.element.parentElement],"e-schedule-dialog-container"),this.parent.isAdaptive&&(OR.add(this.element.querySelector(".e-back-icon"),"click",this.dialogClose,this),OR.add(this.element.querySelector(".e-save-icon"),"click",this.eventSave,this)),this.applyFormValidation()}},{key:"updateEditorTemplate",value:function(){}},{key:"resetEditorTemplate",value:function(){this.parent.editorTemplate&&iP(this.parent.element.id+"_editorTemplate")}},{key:"refresh",value:function(){this.destroy(),this.renderEventWindow()}},{key:"refreshRecurrenceEditor",value:function(){if(this.recurrenceEditor){var e=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(e)}}},{key:"setRecurrenceEditor",value:function(e){this.parent.editorTemplate&&(this.recurrenceEditor=e)}},{key:"openEditor",value:function(e,t,i,n){if(this.parent.currentAction=t,this.parent.removeNewEventElement(),this.parent.quickPopup.quickPopupHide(!0),this.parent.inlineModule.removeInlineAppointmentElement(),"Add"===t){var r={};this.cellClickAction=!i,this.parent.activeCellsData=e;var a=e;this.cellClickAction?this.convertToEventData(a,r):(this.parent.activeCellsData={startTime:a.startTime||a[this.fields.startTime],endTime:a.endTime||a[this.fields.endTime],isAllDay:a.isAllDay||a[this.fields.isAllDay],element:a.element,groupIndex:a.groupIndex},r=a),e=r}switch(RD(this.parent.editorTemplate)||this.renderFormElements(this.element.querySelector(".e-schedule-form"),e),!this.parent.isAdaptive&&RD(this.parent.editorTemplate)&&_P([this.dialogObject.element.querySelector(".e-recurrenceeditor")],"e-disable"),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),t){case"Add":this.onCellDetailsUpdate(e,n);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":"EditOccurrence"===t&&!this.parent.isAdaptive&&RD(this.parent.editorTemplate)&&wP([this.dialogObject.element.querySelector(".e-recurrenceeditor")],"e-disable"),this.cellClickAction=!1,this.onEventDetailsUpdate(e)}}},{key:"setDialogContent",value:function(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind()}},{key:"onBeforeOpen",value:function(e){var t=this,i={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(i.duration=this.getSlotDuration());var n=this.getInstance("e-event-save");n&&(n.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),n.dataBind());var r=this.getInstance("e-event-delete");r&&(r.disabled=!this.parent.eventSettings.allowDeleting,r.dataBind());var a=new AF;return this.parent.trigger("popupOpen",i,(function(i){if(e.cancel=i.cancel,t.duration=t.cellClickAction?i.duration:null,t.refreshDateTimePicker(t.duration),t.cellClickAction&&i.duration!==t.getSlotDuration()&&RD(t.parent.editorTemplate)){var n=t.getInstance("e-start"),r=t.getInstance("e-end");r.value=new Date(n.value.getTime()+6e4*i.duration),r.dataBind()}t.parent.editorTemplate&&t.element.querySelector(".e-recurrenceeditor")&&!t.recurrenceEditor&&(t.recurrenceEditor=t.getInstance("e-recurrenceeditor")),a.resolve(e)})),a}},{key:"onBeforeClose",value:function(e){var t=this;e.isInteracted&&(this.isCrudAction=!1);var i={type:"Editor",data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},n=new AF;return this.parent.trigger("popupClose",i,(function(i){e.cancel=i.cancel,i.cancel||(t.resetEditorTemplate(),t.updateEditorTemplate(),t.isCrudAction&&(e.cancel=t.processCrudActions(i.data),t.isCrudAction=e.cancel),t.isCrudAction||(t.resetForm(),t.parent.eventBase.focusElement(),t.eventCrudData=null)),n.resolve(e)})),n}},{key:"getEventWindowContent",value:function(){var e=CP("div",{className:"e-form-container"}),t=CP("form",{id:this.parent.element.id+"EditForm",className:LH,attrs:{onsubmit:"return false;"}});return this.renderFormElements(t),e.appendChild(t),e}},{key:"renderFormElements",value:function(e,t){if(RD(this.parent.editorTemplate))e.appendChild(this.getDefaultEventWindowContent());else{if(t){this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents();var i,n=_createForOfIteratorHelper([].slice.call(e.children));try{for(n.s();!(i=n.n()).done;){IP(i.value)}}catch(a){n.e(a)}finally{n.f()}}var r=this.parent.element.id+"_editorTemplate";AP([].slice.call(this.parent.getEditorTemplate()(t||{},this.parent,"editorTemplate",r,!1)),e),this.updateEditorTemplate()}}},{key:"getDefaultEventWindowContent",value:function(){var e=this.createDivElement("e-dialog-parent"),t=this.createDivElement("e-title-location-row");e.appendChild(t),t.appendChild(this.renderTextBox("e-subject")),t.querySelector(".e-subject").setAttribute("title",this.parent.editorTitles.subject),t.appendChild(this.renderTextBox("e-location")),t.querySelector(".e-location").setAttribute("title",this.parent.editorTitles.location);var i=this.createDivElement("e-start-end-row");e.appendChild(i),i.appendChild(this.renderDateTimePicker("e-start",this.onTimeChange.bind(this))),i.querySelector(".e-start").setAttribute("title",this.parent.editorTitles.startTime),i.appendChild(this.renderDateTimePicker("e-end")),i.querySelector(".e-end").setAttribute("title",this.parent.editorTitles.endTime);var n=this.createDivElement("e-all-day-time-zone-row");e.appendChild(n),n.appendChild(this.renderCheckBox("e-all-day")),n.appendChild(this.renderCheckBox("e-time-zone"));var r=this.createDivElement("e-time-zone-row");e.appendChild(r),r.appendChild(this.renderDropDown("e-start-time-zone")),r.appendChild(this.renderDropDown("e-end-time-zone"));var a=this.createDivElement("e-repeat-parent-row");e.appendChild(a);var o=this.renderCheckBox("e-repeat"),s=CP("span",{className:"e-recurrence-container"}),l=CP("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});if(this.buttonObj=new pL({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),s.appendChild(l),this.buttonObj.appendTo(l),this.buttonObj.isStringTemplate=!0,o.appendChild(s),a.appendChild(o),this.parent.isAdaptive?OR.add(l,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(e),this.parent.resourceCollection.length>0){var c,u=this.createDivElement("e-resources-row"),h=_createForOfIteratorHelper(this.parent.resourceBase.resourceCollection);try{for(h.s();!(c=h.n()).done;){var d=c.value;u.appendChild(this.renderResourceDetails(d))}}catch(v){h.e(v)}finally{h.f()}e.appendChild(u)}var p=this.createDivElement("e-description-row");p.appendChild(this.renderTextBox("e-description")),p.querySelector(".e-description").setAttribute("title",this.parent.editorTitles.description),e.appendChild(p);var f=CP("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return e.appendChild(f),e}},{key:"createRecurrenceEditor",value:function(e){var t=this.createDivElement();e.appendChild(t),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(t)}},{key:"createDivElement",value:function(e){return CP("div",{className:e})}},{key:"createInputElement",value:function(e,t,i){return CP(i||"input",{className:e,attrs:{type:"text",name:t,value:"",id:t,title:""===this.l10n.getConstant(t.charAt(0).toLowerCase()+t.slice(1))?t:this.l10n.getConstant(t.charAt(0).toLowerCase()+t.slice(1))}})}},{key:"getSlotDuration",value:function(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount}},{key:"renderDateTimePicker",value:function(e,t){var i=this.createDivElement(e+"-container"),n=this.getFieldName(e),r=this.createInputElement(e+" e-field",n);i.appendChild(r);var a=new Hj({change:t,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:new Date(new Date(+this.parent.maxDate).setHours(23,59,59)),cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",format:(RD(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.getFormat("timeFormats"),placeholder:this.getFieldLabel(e),step:this.getSlotDuration(),width:"100%"});return a.isStringTemplate=!0,a.appendTo(r),i}},{key:"refreshDateTimePicker",value:function(e){var t,i=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-start,.e-end")));try{for(i.s();!(t=i.n()).done;){var n=t.value.ej2_instances[0];n.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek,n.step=e||this.getSlotDuration(),n.dataBind()}}catch(r){i.e(r)}finally{i.f()}}},{key:"onTimeChange",value:function(){var e=this.getInstance("e-start");if(e.element.parentElement.classList.contains("e-input-focus")){var t=this.getInstance("e-end"),i=0;this.cellClickAction?(i=6e4*this.duration,this.eventWindowTime.startTime=e.value):i=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();var n=RD(e.value)?null:new Date(e.value.getTime()+i);this.cellClickAction&&(this.eventWindowTime.endTime=n),t.value=n,t.dataBind()}}},{key:"renderResourceDetails",value:function(e){var t=e.field,i="e-"+t,n=e.title,r=this.createDivElement(i+"-container e-resources"),a=this.createInputElement(i+" e-field",t);r.appendChild(a);var o='<div class="e-resource-template"><div class="e-resource-color" style="background-color:${'+e.colorField+'}"></div><div class="e-resource-text">${'+e.textField+"}</div></div>";if(e.allowMultiple){var s=new hH({cssClass:this.parent.cssClass||"",dataSource:e.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:o,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:n,name:t},floatLabelType:"Always",placeholder:n,popupHeight:"230px",popupWidth:"447px",mode:"Box"});s.appendTo(a),s.isStringTemplate=!0}else{var l=new iH({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:e.dataSource,enableRtl:this.parent.enableRtl,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:n,name:t},floatLabelType:"Always",placeholder:n,popupHeight:"230px",popupWidth:"447px",itemTemplate:o});l.appendTo(a),l.isStringTemplate=!0}return r}},{key:"renderDropDown",value:function(e){var t=this.getFieldName(e),i=this.createDivElement(e+"-container"),n=this.createInputElement(e+" e-field",t);i.appendChild(n);var r=new iH({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:WH,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:"Search Timezone",filtering:function(e){var t=new gF;t=""!==e.text?t.where("Text","contains",e.text,!0):t,e.updateData(WH,t)},htmlAttributes:{title:this.getFieldLabel(e),name:t},floatLabelType:"Always",placeholder:this.getFieldLabel(e),popupHeight:"230px"});return r.appendTo(n),r.isStringTemplate=!0,i}},{key:"onMultiselectResourceChange",value:function(e){var t=this;if(e.value&&this.parent.activeViewOptions.group.byGroupID&&!(this.parent.resourceCollection.length<=1))for(var i=this.parent.resourceBase.resourceCollection,n=e.element.getAttribute("name")||this.getColumnName(e.element),r=0;r<i.length;r++)if(i[r].field===n&&r<i.length-1){for(var a=this.createInstance(r),o=[],s=function(n){var a=i[r+1],s=a.dataSource.filter((function(t){return t[a.groupIDField]===e.value[n]}))[0],l=t.filterDatasource(r,s[i[r+1].groupIDField]);o=o.concat(l)},l=0;l<e.value.length;l++)s(l);a.dataSource=o,a.dataBind()}}},{key:"createInstance",value:function(e){return this.element.querySelector(".e-"+this.parent.resourceBase.resourceCollection[e+1].field).ej2_instances[0]}},{key:"onDropdownResourceChange",value:function(e){if(e.value&&!(this.parent.resourceCollection.length<=1)&&this.parent.activeViewOptions.group.byGroupID)for(var t=e.element.getAttribute("name")||this.getColumnName(e.element),i=this.parent.resourceBase.resourceCollection,n=0;n<i.length;n++)if(n<i.length-1&&i[n].field===t){var r=this.createInstance(n);r.dataSource=this.filterDatasource(n,e.itemData[i[n].idField]),r.dataBind();var a=r.dataSource[0][i[n+1].idField];r.value=i[n+1].allowMultiple?[a]:a,r.dataBind()}}},{key:"filterDatasource",value:function(e,t){var i=this.parent.resourceBase.resourceCollection[e+1];return i.dataSource.filter((function(e){return e[i.groupIDField]===t}))}},{key:"onTimezoneChange",value:function(e){if((e.element.getAttribute("name")||this.getColumnName(e.element))===this.parent.eventFields.startTimezone){var t=this.getInstance("e-start-time-zone"),i=this.getInstance("e-end-time-zone");i.value=t.value,i.dataBind()}}},{key:"renderCheckBox",value:function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=this.createInputElement(e+" e-field",i);t.appendChild(n);var r=new yL({change:this.onChange.bind(this),cssClass:e+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,label:this.getFieldLabel(e)});return r.appendTo(n),r.isStringTemplate=!0,n.setAttribute("name",i),"Repeat"===i&&(this.repeatStatus=r),t}},{key:"renderTextBox",value:function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),n=this.createInputElement(e+" e-field",i,"e-description"===e?"textarea":"input");return t.appendChild(n),cV.createInput({element:n,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(e)}}),t}},{key:"getFieldName",value:function(e){var t="";switch(e){case"e-subject":t=this.fields.subject;break;case"e-location":t=this.fields.location;break;case"e-start":t=this.fields.startTime;break;case"e-end":t=this.fields.endTime;break;case"e-description":t=this.fields.description;break;case"e-all-day":t=this.fields.isAllDay;break;case"e-start-time-zone":t=this.fields.startTimezone;break;case"e-end-time-zone":t=this.fields.endTimezone;break;case"e-time-zone":t="Timezone";break;case"e-repeat":t="Repeat"}return t}},{key:"getFieldLabel",value:function(e){var t="";switch(e){case"e-subject":t=this.parent.editorTitles.subject;break;case"e-location":t=this.parent.editorTitles.location;break;case"e-description":t=this.parent.editorTitles.description;break;case"e-start":t=this.parent.editorTitles.startTime;break;case"e-end":t=this.parent.editorTitles.endTime;break;case"e-start-time-zone":t=this.parent.editorTitles.startTimezone;break;case"e-end-time-zone":t=this.parent.editorTitles.endTimezone;break;case"e-repeat":t=this.parent.editorTitles.recurrenceRule;break;case"e-all-day":t=this.parent.editorTitles.isAllDay;break;case"e-time-zone":t=this.l10n.getConstant("timezone")}return t}},{key:"onChange",value:function(e){var t=e.event.target;t.classList.contains("e-all-day")?this.onAllDayChange(e.checked):t.classList.contains("e-time-zone")?this.timezoneChangeStyle(e.checked):t.classList.contains("e-repeat")&&this.onRepeatChange(e.checked)}},{key:"renderRepeatDialog",value:function(){var e=CP("div");this.repeatDialogObject=new XN({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(e),this.repeatDialogObject.appendTo(e),this.repeatDialogObject.isStringTemplate=!0,this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))}},{key:"loadRecurrenceEditor",value:function(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)}},{key:"onRepeatChange",value:function(e){e?(this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor()):(this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule)),wP([this.element.querySelector(".e-recurrence-container")],"e-hide"))}},{key:"repeatSaveDialog",value:function(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();var e=this.element.querySelector(".e-recurrence-container");this.recurrenceEditor.getRecurrenceRule()?_P([e],"e-hide"):(wP([e],"e-hide"),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()}},{key:"closeRepeatDialog",value:function(){this.repeatDialogObject.hide()}},{key:"repeatCancelDialog",value:function(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})}},{key:"repeatOpenDialog",value:function(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()}},{key:"onCellDetailsUpdate",value:function(e,t){if(this.parent.eventSettings.allowAdding){this.element.querySelector("."+LH).removeAttribute("data-id"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("newEvent"),e.Timezone=!1,this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",RD(this.parent.eventSettings.fields.subject.default)||(e[this.fields.subject]=this.parent.eventSettings.fields.subject.default),RD(this.parent.eventSettings.fields.location.default)||(e[this.fields.location]=this.parent.eventSettings.fields.location.default),RD(this.parent.eventSettings.fields.description.default)||(e[this.fields.description]=this.parent.eventSettings.fields.description.default),this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]);var i=this.element.querySelector(".e-event-delete");if(i&&wP([i],"e-disable"),this.recurrenceEditor&&this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime],selectedType:RD(t)?RD(e[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:t}),this.parent.isAdaptive&&RD(this.parent.editorTemplate))wP([this.element.querySelector(".e-recurrence-container")],"e-hide"),this.updateRepeatLabel(this.repeatRule);else{var n=this.element.querySelector(".e-event-save");this.disableButton(n,!1)}this.dialogObject.show()}}},{key:"convertToEventData",value:function(e,t){e.subject&&(t[this.fields.subject]=e.subject),t[this.fields.startTime]=e.startTime,t[this.fields.endTime]=e.endTime,t[this.fields.isAllDay]=e.isAllDay,e.RecurrenceRule&&(t[this.fields.recurrenceRule]=e.RecurrenceRule),(this.parent.resourceCollection.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(t)}},{key:"applyFormValidation",value:function(){var e=function(e){return e&&Object.keys(e).length>0?e:void 0},t=this.element.querySelector("."+LH),i={};i[this.parent.eventSettings.fields.subject.name]=e(this.parent.eventSettings.fields.subject.validation),i[this.parent.eventSettings.fields.location.name]=e(this.parent.eventSettings.fields.location.validation),i[this.parent.eventSettings.fields.startTime.name]=e(this.parent.eventSettings.fields.startTime.validation),i[this.parent.eventSettings.fields.endTime.name]=e(this.parent.eventSettings.fields.endTime.validation),i[this.parent.eventSettings.fields.description.name]=e(this.parent.eventSettings.fields.description.validation),this.fieldValidator.renderFormValidator(t,i,this.element)}},{key:"showDetails",value:function(e){var t=DD({},e,null,!0);0===t[this.fields.endTime].getHours()&&0===t[this.fields.endTime].getMinutes()&&this.trimAllDay(t),this.eventData=t;var i,n=this.getFormElements("e-schedule-dialog"),r=Object.keys(t),a=_createForOfIteratorHelper(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.name||this.getColumnName(o);RD(s)||""===s||(-1!==r.indexOf(s)?this.setValueToElement(o,t[s]):this.setDefaultValueToElement(o))}}catch(c){a.e(c)}finally{a.f()}if(RD(this.parent.editorTemplate)){this.onAllDayChange(t[this.fields.isAllDay]);var l=this.getInstance("e-time-zone.e-field");RD(t[this.fields.startTimezone])&&RD(t[this.fields.endTimezone])||(l.checked=!0,l.dataBind()),this.timezoneChangeStyle(l.checked),delete t.Timezone}}},{key:"getColumnName",value:function(e){var t=e.getAttribute("data-name")||"";if(""===t){var i=!1,n="";e.classList.contains("e-dropdownlist")?(n="e-ddl",i=!0):e.classList.contains("e-multiselect")?(n="e-multiselect",i=!0):e.classList.contains("e-datetimepicker")?n="e-datetimepicker":e.classList.contains("e-datepicker")?n="e-datepicker":e.classList.contains("e-checkbox")&&(n="e-checkbox");var r=MP(e,i?".".concat(n,":not(.e-control)"):"."+n)||e.querySelector("."+n);if(r){var a=r.querySelector("[name]");a&&(t=a.name)}}return t}},{key:"onAllDayChange",value:function(e){var t,i=this.getInstance("e-start"),n=this.getInstance("e-end"),r=this.element.querySelector(".e-time-zone-container");e?(t=RD(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,wP(this.element.querySelectorAll(".e-time-icon"),"e-icon-disable"),wP([r],"e-disable"),this.element.querySelector(".e-time-zone-row")&&_P([this.element.querySelector(".e-time-zone-row")],"e-enable"),i.format=n.format=t):(t=RD(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.getFormat("timeFormats"):this.parent.dateFormat+" "+this.getFormat("timeFormats"),_P(this.element.querySelectorAll(".e-time-icon"),"e-icon-disable"),_P([r],"e-disable"),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&wP([this.element.querySelector(".e-time-zone-row")],"e-enable"),i.format=n.format=t),this.cellClickAction&&this.updateDateTime(e,i,n),i.dataBind(),n.dataBind(),RD(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(i.value)}},{key:"updateDateTime",value:function(e,t,i){var n,r;if(e)if(n=bH(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){var a=CH(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();r=+this.eventWindowTime.startTime>a?this.eventWindowTime.endTime:new Date(a)}else r=bH(new Date(this.eventWindowTime.endTime.getTime()));else{var o=this.parent.activeCellsData.startTime;if((n=new Date(this.eventWindowTime.startTime.getTime())).setHours(o.getHours(),o.getMinutes(),o.getSeconds()),this.parent.activeCellsData.isAllDay){var s=this.parent.getStartEndTime(this.parent.workHours.start);n.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),(r=new Date(n.getTime())).setMilliseconds(6e4*this.getSlotDuration())}else(r=new Date(n.getTime())).setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(n.getTime()),endTime:new Date(r.getTime())},t.value=n,i.value=r,t.dataBind(),i.dataBind()}},{key:"getFormat",value:function(e){return"en"===this.parent.locale||"en-US"===this.parent.locale?TD(e+".short",pR(this.parent.getCalendarMode())):TD("main."+this.parent.locale+".dates.calendars."+this.parent.getCalendarMode()+"."+e+".short",lR)}},{key:"onEventDetailsUpdate",value:function(e){if(this.parent.eventSettings.allowEditing){if(this.parent.isAdaptive||_P([this.element.querySelector(".e-event-delete")],"e-disable"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("editEvent"),this.element.querySelector("."+LH).setAttribute("data-id",e[this.fields.id].toString()),RD(this.parent.editorTemplate)){e=DD({},e,null,!0);var t,i=this.getInstance("e-time-zone.e-field");e[this.fields.startTimezone]||e[this.fields.endTimezone]?(t=!0,this.parent.eventBase.timezoneConvert(e)):t=!1,e.Timezone=t,i.checked=t,i.dataBind()}if(this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",e[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]),this.parent.isAdaptive&&RD(this.parent.editorTemplate)){var n=this.element.querySelector(".e-recurrence-container");e[this.fields.recurrenceRule]?(_P([n],"e-hide"),this.repeatStatus.setProperties({checked:!0})):(wP([n],"e-hide"),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}var r=this.parent.readonly||e[this.fields.isReadonly];if(this.parent.isAdaptive){var a=this.element.querySelector(".e-save-icon");a&&(r?wP([a],"e-icon-disable"):_P([a],"e-icon-disable"))}else{var o=this.element.querySelector(".e-event-save"),s=this.element.querySelector(".e-event-delete");this.disableButton(o,r),this.disableButton(s,r)}this.dialogObject.show()}}},{key:"disableButton",value:function(e,t){e&&(e.ej2_instances[0].disabled=t)}},{key:"renderRecurrenceEditor",value:function(){return new mq({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})}},{key:"updateRepeatLabel",value:function(e){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();var t=e?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(e):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:t})}},{key:"dialogClose",value:function(){this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide()}},{key:"resetForm",value:function(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),this.parent.isAdaptive||!this.recurrenceEditor||this.recurrenceEditor.isDestroyed||this.recurrenceEditor.resetFields()}},{key:"timezoneChangeStyle",value:function(e){var t=this.element.querySelector(".e-time-zone-row"),i=this.parent.tzModule.getLocalTimezoneName();if(e){wP([t],"e-enable");var n=this.getInstance("e-start-time-zone"),r=this.getInstance("e-end-time-zone"),a=n.dataSource;n.value&&this.parent.timezone||a.some((function(e){return e.Value===i}))||(a.push({Value:i,Text:i}),n.dataSource=a,r.dataSource=a,n.dataBind(),r.dataBind()),n.value=n.value||this.parent.timezone||i,r.value=r.value||this.parent.timezone||i,n.dataBind(),r.dataBind()}else _P([t],"e-enable")}},{key:"resetFormFields",value:function(){var e,t=_createForOfIteratorHelper(this.getFormElements("e-schedule-dialog"));try{for(t.s();!(e=t.n()).done;){var i=e.value,n=i.name||this.getColumnName(i);RD(n)||""===n||this.setDefaultValueToElement(i)}}catch(r){t.e(r)}finally{t.f()}}},{key:"eventSave",value:function(e){var t=this.element.querySelector("."+LH);if(!t||!t.classList.contains("e-formvalidator")||t.ej2_instances[0].validate()){var i=this.getEventDataFromEditor();this.processEventValidation(i.tempData,e)||(this.eventCrudData=i.eventData,this.isCrudAction=!0,this.dialogObject.hide())}}},{key:"getEventDataFromEditor",value:function(){var e=DD({},this.getObjectFromFormData("e-schedule-dialog"));e.Timezone||(e[this.fields.startTimezone]=null,e[this.fields.endTimezone]=null),delete e.Timezone,delete e.Repeat,this.setDefaultValueToObject(e),e[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;var t=DD({},e,null,!0);return e[this.fields.isAllDay]&&(e[this.fields.startTime]=RD(e[this.fields.startTime])?null:bH(new Date(e[this.fields.startTime].getTime())),e[this.fields.endTime]=RD(e[this.fields.endTime])?null:CH(bH(new Date(e[this.fields.endTime].getTime())),1)),{eventData:e,tempData:t}}},{key:"processEventValidation",value:function(e,t){var i;if(RD(this.parent.editorTemplate)){if(!e[this.fields.startTime]||!e[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(e[this.fields.startTime]>e[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value){var n=!0;if("seriesChangeAlert"===(i=this.recurrenceValidation(e[this.fields.startTime],e[this.fields.endTime],t))&&this.parent.uiStateValues.isIgnoreOccurrence&&(n=!1),!RD(i)&&n&&(!this.parent.enableRecurrenceValidation&&"wrongPattern"===i||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(i),!0}return!1}},{key:"processCrudActions",value:function(e){var t=this;this.parent.uiStateValues.isBlock=!1;var i=this.getResourceData(e),n=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!RD(i),r=this.getEventIdFromForm();if(RD(r))this.parent.currentAction="Add",n?this.resourceSaveEvent(e,this.parent.currentAction):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(e));else{var a,o="string"===this.parent.eventBase.getEventIDType()?r:parseInt(r,10),s=this.parent.eventsData.filter((function(e){return e[t.fields.id]===o}))[0];if((e=DD({},s,e))[this.fields.isReadonly])return!1;if(!RD(s[this.fields.recurrenceRule])){if(a=this.parent.currentAction,e.Guid=this.parent.activeEventData.event.Guid,"EditOccurrence"===this.parent.currentAction&&(e[this.fields.recurrenceID]?(o=e[this.fields.recurrenceID],a=null):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(o,e)))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;"EditSeries"===this.parent.currentAction||e[this.fields.id]!==s[this.fields.id]?e[this.fields.recurrenceID]=s[this.fields.id]:"EditFollowingEvents"===this.parent.currentAction&&(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e[this.fields.followingID]=s[this.fields.id])}n?this.resourceSaveEvent(e,"Save",a):this.parent.saveEvent(e,a)}return this.parent.uiStateValues.isBlock}},{key:"getResourceData",value:function(e){var t=null;return!RD(this.parent.resourceBase)&&!RD(this.parent.resourceBase.resourceCollection)&&this.parent.resourceBase.resourceCollection.length>0&&(t=e[this.parent.resourceBase.resourceCollection.slice(-1)[0].field]),t}},{key:"getObjectFromFormData",value:function(e){var t,i={},n=_createForOfIteratorHelper(this.getFormElements(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.name||this.getColumnName(r);RD(a)||""===a||(i[a]=this.getValueFromElement(r))}}catch(o){n.e(o)}finally{n.f()}return i}},{key:"setDefaultValueToObject",value:function(e){RD(e[this.fields.subject])||(e[this.fields.subject]=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default||this.l10n.getConstant("addTitle")),RD(e[this.fields.location])||(e[this.fields.location]=e[this.fields.location]||this.parent.eventSettings.fields.location.default),RD(e[this.fields.description])||(e[this.fields.description]=e[this.fields.description]||this.parent.eventSettings.fields.description.default)}},{key:"recurrenceValidation",value:function(e,t,i){var n,r=this.recurrenceEditor,a=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(i!==this.l10n.getConstant("ok")){var o=this.parent.activeEventData.event,s=[];if(("EditSeries"===this.parent.currentAction||"EditFollowingEvents"===this.parent.currentAction)&&!RD(o)){var l=o[this.parent.eventFields.startTime],c=this.parent.eventBase.getSeriesEvents(this.eventData,l);if(c.length>0)s=this.parent.eventBase.getEditedOccurrences(c,l);else{var u=this.parent.eventBase.getEventById(o[this.parent.eventFields.id]);s=this.parent.eventBase.getEditedOccurrences([u],l)}"EditSeries"!==this.parent.currentAction||RD(this.eventData[this.parent.eventFields.recurrenceException])||s.push(this.eventData)}if(s.length>0&&(n="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<e&&(n="wrongPattern"),RD(n))switch(r.value.split(";")[0].split("=")[1]){case"DAILY":(t.getTime()-e.getTime())/36e5>=24*a&&(n="createError");break;case"WEEKLY":for(var h=r.value.split(";")[1].split("=")[1].split(","),d={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},p=[],f=[],v=0;v<h.length*(a+1);v++)p[v]=h.length>v?d[h[v]]:p[v-h.length]+7*a;for(var m=p.sort((function(e,t){return e-t})),g=1;g<m.length;g++)f.push(m[g]-m[g-1]);((t.getTime()-e.getTime())/36e5>=24*Math.min.apply(Math,f)||RD(a))&&(n="createError");break;case"MONTHLY":t.getTime()>=new Date(+e).setMonth(e.getMonth()+a)&&(n="createError");break;case"YEARLY":t.getTime()>=new Date(+e).setFullYear(e.getFullYear()+a)&&(n="createError")}}else t.getTime()>=new Date(+e).setMonth(e.getMonth()+a)&&(n="createError"),RD(n)&&this.parent.quickPopup.quickDialog.hide();return n}},{key:"getRecurrenceIndex",value:function(e,t){for(var i,n=0;n<e.length;n++)if(t[this.fields.startTime].valueOf()===e[n][this.fields.startTime].valueOf()){i=n;break}return i}},{key:"trimAllDay",value:function(e){if(e[this.fields.isAllDay]){var t=CH(new Date(+e[this.fields.endTime]),-1).getTime();e[this.fields.endTime]=+e[this.fields.startTime]>t?e[this.fields.endTime]:new Date(t)}}},{key:"editOccurrenceValidation",value:function(e,t,i){var n=this;void 0===i&&(i=this.eventData);var r=this.parent.getOccurrencesByID(e);this.parent.eventsData.filter((function(t){return t[n.fields.recurrenceID]===e})).map((function(e){return r.push(DD({},e))})),t=DD({},t),this.trimAllDay(t);var a,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.trimAllDay(s)}}catch(c){o.e(c)}finally{o.f()}this.parent.eventBase.sortByTime(r);var l=this.getRecurrenceIndex(r,i);if(RD(l))return!1;if(0===l)return!(RD(r[l+1])||new Date(+r[l+1][this.fields.startTime]).setHours(0,0,0,0)>new Date(+t[this.fields.endTime]).setHours(0,0,0,0));if(l===r.length-1){if(!(new Date(+r[l-1][this.fields.endTime]).setHours(0,0,0,0)<new Date(+t[this.fields.startTime]).setHours(0,0,0,0)))return!0}else if(!(new Date(+r[l-1][this.fields.endTime]).setHours(0,0,0,0)<new Date(+t[this.fields.startTime]).setHours(0,0,0,0)&&new Date(+r[l+1][this.fields.startTime]).setHours(0,0,0,0)>new Date(+t[this.fields.endTime]).setHours(0,0,0,0)))return!0;return!1}},{key:"resourceSaveEvent",value:function(e,t,i){var n=this,r=this.parent.resourceBase.resourceCollection.slice(-1)[0],a=e[r.field];a=a instanceof Array?a:[a];for(var o=this.parent.resourceBase.lastResourceLevel,s=[],l=function(l){var c=DD({},e,null,!0);c[n.fields.id]=n.parent.eventBase.getEventMaxID();var u=[],h=function(){if("Save"===t&&l===a.length-1)if(u.length>0){u[0][n.fields.id]=e[n.fields.id];for(var r=1;r<u.length;r++)u[r][n.fields.id]=n.parent.eventBase.getEventMaxID(l),s.push(u[r]),n.parent.saveEvent(u[0],i)}else c[n.fields.id]=e[n.fields.id],n.parent.saveEvent(c,i);else if(u.length>0)for(var o=0;o<u.length;o++)u[o][n.fields.id]=n.parent.eventBase.getEventMaxID(o),s.push(u[o]);else c[n.fields.id]=n.parent.eventBase.getEventMaxID(l),s.push(c)};if(n.parent.activeViewOptions.group.byGroupID&&!RD(o)){var d,p=r.dataSource,f=n.parent.resourceCollection;if((d=f.length>1?OH(p,r.idField,a[l],c,f):OH(p,r.idField,a[l]))<0)return{v:void 0};for(var v=p[d][r.groupIDField],m=o.filter((function(e){return e.resourceData[r.idField]===a[l]})).filter((function(e){return e.resourceData[r.groupIDField]===v}))[0].groupOrder,g=0;g<n.parent.resourceBase.resourceCollection.length;g++)c[n.parent.resourceBase.resourceCollection[g].field]=m[g]instanceof Array?m[g][0]:m[g];h()}else{for(var y=0;y<n.parent.resourceBase.resourceCollection.length-1;y++){var b=n.parent.resourceBase.resourceCollection[y].field;if(c[b]instanceof Array&&c[b].length>1)for(var k=0;k<c[b].length;k++){var C=DD({},c,null,!0);C[b]=e[b][k],C[r.field]=a[l],u.push(C)}else if(0===u.length)c[b]=e[b]instanceof Array?e[b][0]:e[b],c[r.field]=a[l];else for(var w=0;w<u.length;w++)u[w][b]=e[b]instanceof Array?e[b][0]:e[b]}c[r.field]=a[l],h()}},c=0;c<a.length;c++){var u=l(c);if("object"==typeof u)return u.v}if(s.length>0){var h,d=_createForOfIteratorHelper(s);try{for(d.s();!(h=d.n()).done;){var p=h.value;p[this.fields.recurrenceException]=null,p[this.fields.recurrenceID]=null}}catch(f){d.e(f)}finally{d.f()}this.parent.addEvent(s)}}},{key:"getEventIdFromForm",value:function(){return this.element.querySelector("."+LH).getAttribute("data-id")}},{key:"getFormElements",value:function(e){return[].slice.call("e-schedule-dialog"===e?this.element.querySelectorAll(".e-field"):this.parent.element.querySelectorAll("."+e+" .e-field"))}},{key:"getValueFromElement",value:function(e){return e.classList.contains("e-datepicker")||e.classList.contains("e-datetimepicker")||e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:HM.sanitize(e.value)}},{key:"setValueToElement",value:function(e,t){if(e.classList.contains("e-datepicker")){var i=e.ej2_instances[0];i.value=t,i.dataBind()}else if(e.classList.contains("e-datetimepicker")){var n=e.ej2_instances[0];n.element.classList.contains("e-start")?this.eventWindowTime.startTime=new Date(""+t):this.eventWindowTime.endTime=new Date(""+t),n.value=t,n.dataBind()}else if(e.classList.contains("e-dropdownlist")){var r=e.ej2_instances[0];r.value=t,r.dataBind()}else if(e.classList.contains("e-multiselect")){var a=e.ej2_instances[0];a.value=[],a.value=t instanceof Array?t:[t],a.dataBind()}else if(e.classList.contains("e-checkbox")){var o=e.ej2_instances[0];o.checked=t,o.dataBind()}else"checkbox"!==e.type?e.value=t||"":e.checked=t}},{key:"setDefaultValueToElement",value:function(e){if(e.classList.contains("e-datepicker")){var t=e.ej2_instances[0];t.value=this.parent.getCurrentTime(),t.dataBind()}else if(e.classList.contains("e-datetimepicker")){var i=e.ej2_instances[0],n=this.parent.getCurrentTime();this.eventWindowTime={startTime:n,endTime:n},i.value=n,i.dataBind()}else if(e.classList.contains("e-dropdownlist")){var r=e.ej2_instances[0];r.value=null,r.dataBind()}else if(e.classList.contains("e-multiselect")){var a=e.ej2_instances[0];a.value=[],a.dataBind()}else if(e.classList.contains("e-checkbox")){var o=e.ej2_instances[0];o.checked=!1,o.dataBind()}else"checkbox"===e.type?e.checked=!1:e.value=""}},{key:"getInstance",value:function(e){var t=this.element.querySelector("."+e);return t?t.ej2_instances[0]:null}},{key:"eventDelete",value:function(){switch(this.parent.currentAction){case"EditOccurrence":this.parent.currentAction=RD(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"Delete":"DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete"}this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()}},{key:"getRecurrenceEditorInstance",value:function(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor}},{key:"destroyComponents",value:function(){var e,t=_createForOfIteratorHelper(this.getFormElements("e-schedule-dialog"));try{for(t.s();!(e=t.n()).done;){var i=e.value,n=void 0;(i.classList.contains("e-datetimepicker")||i.classList.contains("e-datepicker")||i.classList.contains("e-checkbox")||i.classList.contains("e-dropdownlist")||i.classList.contains("e-multiselect"))&&(n=i.ej2_instances),n&&n[0]&&n[0].destroy()}}catch(r){t.e(r)}finally{t.f()}this.buttonObj&&this.buttonObj.destroy()}},{key:"destroy",value:function(){this.parent.isDestroyed||(this.resetEditorTemplate(),this.updateEditorTemplate()),this.recurrenceEditor&&this.recurrenceEditor.destroy(),this.destroyComponents(),this.fieldValidator.destroy(),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),IP(this.repeatDialogObject.element)),this.dialogObject&&(this.dialogObject.destroy(),this.dialogObject=null),this.element&&(IP(this.element),this.element=null)}}]),e}(),yq=function(){function e(t){_classCallCheck2(this,e),this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.isScrollHeightNull=!0,this.previousTop=0,this.parent=t,this.addEventListener()}return _createClass(e,[{key:"addEventListener",value:function(){this.parent.isDestroyed||this.parent.on("virtual-scroll",this.virtualScrolling,this)}},{key:"removeEventListener",value:function(){this.parent.isDestroyed||this.parent.off("virtual-scroll",this.virtualScrolling)}},{key:"getRenderedCount",value:function(){return this.setItemSize(),Math.ceil(this.parent.element.clientHeight/this.itemSize)+this.bufferCount}},{key:"triggerScrolling",value:function(){this.parent.showSpinner(),this.parent.interopAdaptor.invokeMethodAsync("OnContentUpdate",this.startIndex)}},{key:"setTranslateValue",value:function(){var e=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline");this.renderVirtualTrackHeight(t,e),this.setTranslate(e,t,i,n)}},{key:"renderVirtualTrackHeight",value:function(e,t){if(this.parent.resourceBase.setExpandedResources(),this.isScrollHeightNull){var i=CP("div",{className:"e-virtual-track"}),n=[].slice.call(t.querySelectorAll("table td")),r=parseInt(n[0].getAttribute("data-group-index"),10),a=parseInt(n[n.length-1].getAttribute("data-group-index"),10);this.parent.resourceBase.renderedResources=this.parent.resourceBase.expandedResources.filter((function(e){return e.groupIndex>=r&&e.groupIndex<=a})),this.setItemSize(),i.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",this.isScrollHeightNull=!1;var o=this.parent.element.querySelector(".e-virtual-track");RD(o)||IP(o),e.appendChild(i)}}},{key:"renderVirtualTrack",value:function(e){var t=CP("div",{className:"e-virtual-track"});t.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",e.appendChild(t)}},{key:"updateVirtualScrollHeight",value:function(){var e=this.parent.element.querySelector(".e-virtual-track");if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex!==this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex){var t=this.parent.element.querySelector(".e-content-table");this.renderedLength=t.querySelector("tbody").children.length,e.style.height=t.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*t.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/this.parent.resourceBase.expandedResources.length}},{key:"updateVirtualTrackHeight",value:function(e){var t=this.parent.resourceBase.renderedResources.length;if(t!==this.getRenderedCount()){e.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";var i=this.parent.element.querySelector(".e-resource-column-wrap"),n=this.parent.element.querySelector(".e-content-wrap"),r=this.parent.element.querySelector(".e-event-table");this.translateY=0,this.setTranslate(i,n,r)}else{var a=t+(this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex-this.parent.resourceBase.renderedResources[t-1].groupIndex);a=a>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:a,e.style.height=a*this.itemSize+"px"}}},{key:"setItemSize",value:function(){this.itemSize=fH(this.parent.activeView.element,"e-work-cells")||this.itemSize}},{key:"beforeInvoke",value:function(e,t,i,n){}},{key:"virtualScrolling",value:function(){var e=this;this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide();var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=this.parent.element.querySelector(".e-content-wrap"),n=this.parent.element.querySelector(".e-event-table"),r=this.parent.element.querySelector(".e-current-timeline"),a=this.parent.element.querySelector(".e-content-table");this.renderedLength=t.querySelector("tbody").children.length;var o=parseInt(t.querySelector("tbody td").getAttribute("data-group-index"),10),s=this.parent.rowAutoHeight?a.offsetHeight-i.offsetHeight:this.bufferCount*this.itemSize;wP([i],"e-transition");var l=[];i.scrollTop-this.translateY<0?(l=this.upScroll(i,o),this.beforeInvoke(t,i,n,r)):i.scrollTop-this.translateY>s&&(l=this.downScroll(i,o),this.previousTop!==i.scrollTop&&this.beforeInvoke(t,i,n,r)),!RD(l)&&l.length>0&&(this.parent.showSpinner(),this.updateContent(t,i,n,l),this.setTranslate(t,i,n,r),this.parent.notify(dH,{}),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper(),window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){e.parent.hideSpinner()}),250))}},{key:"upScroll",value:function(e,t){var i=0;i=~~(e.scrollTop/this.itemSize)+Math.ceil(e.clientHeight/this.itemSize)-this.renderedLength,this.parent.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0;var n=this.getBufferCollection(i,i+this.renderedLength);if(this.parent.resourceBase.renderedResources=n,0===t)this.translateY=e.scrollTop;else{var r=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*r>0?e.scrollTop-this.bufferCount*r:0}return n}},{key:"downScroll",value:function(e,t){if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return null;var i=0;i=~~(e.scrollTop/this.itemSize),this.parent.rowAutoHeight&&(i=(i=~~((e.scrollTop-this.translateY)/this.averageRowHeight)+t)>t+this.bufferCount?i:t+this.bufferCount);var n=i+this.renderedLength;n=n>this.parent.resourceBase.expandedResources.length?i+(this.parent.resourceBase.expandedResources.length-i):n;var r=this.getBufferCollection(n-this.renderedLength,n);return this.translateY=e.scrollTop,r}},{key:"updateContent",value:function(e,t,i,n){for(var r=e.querySelector("tbody").children.length,a=0;a<r;a++)IP(e.querySelector("tbody tr")),IP(t.querySelector("tbody tr")),IP(i.querySelector("div"));this.parent.resourceBase.renderedResources=n;var o=this.parent.resourceBase.getContentRows(n),s=this.parent.activeView.getContentRows(),l=this.parent.activeView.getEventRows(n.length);AP(o,e.querySelector("tbody")),AP(s,t.querySelector("tbody")),AP(l,i)}},{key:"getBufferCollection",value:function(e,t){return this.parent.resourceBase.expandedResources.slice(e,t)}},{key:"setTranslate",value:function(e,t,i,n){LP(e.querySelector("table"),{transform:"translateY(".concat(this.translateY,"px)")}),LP(t.querySelector("table"),{transform:"translateY(".concat(this.translateY,"px)")}),LP(i,{transform:"translateY(".concat(this.translateY,"px)")}),RD(n)||LP(n,{transform:"translateY(".concat(this.translateY,"px)")})}},{key:"destroy",value:function(){this.removeEventListener()}}]),e}(),bq=function(){function e(t){_classCallCheck2(this,e),this.parent=t}return _createClass(e,[{key:"render",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.initializeLayout(e),t&&!this.parent.isServerRenderer()&&this.refreshDataManager()}},{key:"initializeLayout",value:function(e){switch(this.parent.activeView&&(this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),e){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Year":this.parent.activeView=this.parent.yearModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule}if(RD(this.parent.activeView)){var t=this.parent.viewCollections[0].option;if(t)return this.parent.setScheduleProperties({currentView:t}),this.parent.onServerDataBind(),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(t);throw Error("Inject required modules")}this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(e),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.isAdaptive&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.enableCompactView,this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),-1!==this.parent.currentView.indexOf("Timeline")&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new yq(this.parent),this.parent.uiStateValues.top=0),this.updateHeader(),this.parent.activeView.renderLayout("e-current-panel"),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new eq(this.parent))}},{key:"updateHeader",value:function(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?wP([this.parent.element],"e-read-only"):this.parent.element.classList.contains("e-read-only")&&_P([this.parent.element],"e-read-only"),this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))}},{key:"updateLabelText",value:function(e){var t=this.parent.activeView.getLabelText(e);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",t)}},{key:"refreshDataManager",value:function(){var e=this,t=this.parent.activeView.startDate(),i=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(t,i)).then((function(t){return e.dataManagerSuccess(t)})).catch((function(t){return e.dataManagerFailure(t)}))}},{key:"dataManagerSuccess",value:function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("dataBinding",e,(function(e){var i=DD([],e.result,null,!0);t.parent.eventsData=i.filter((function(e){return!e[t.parent.eventFields.isBlock]})),t.parent.blockData=i.filter((function(e){return e[t.parent.eventFields.isBlock]}));var n=t.parent.eventBase.processData(i);t.parent.notify(dH,{processedData:n}),t.parent.dragAndDropModule&&"drag"===t.parent.dragAndDropModule.actionObj.action&&t.parent.dragAndDropModule.navigationWrapper(),t.parent.renderCompleted(),t.parent.trigger("dataBound",null,(function(){return t.parent.hideSpinner()}))}))}},{key:"dataManagerFailure",value:function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},(function(){return t.parent.hideSpinner()}))}}]),e}(),kq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Cq=(LU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),kq([QP(!0)],LU.prototype,"highlight",void 0),kq([QP("09:00")],LU.prototype,"start",void 0),kq([QP("18:00")],LU.prototype,"end",void 0),LU),wq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},_q=(NU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),wq([QP(!0)],NU.prototype,"enable",void 0),wq([QP(60)],NU.prototype,"interval",void 0),wq([QP(2)],NU.prototype,"slotCount",void 0),wq([QP()],NU.prototype,"minorSlotTemplate",void 0),wq([QP()],NU.prototype,"majorSlotTemplate",void 0),NU),Sq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Eq=(FU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Sq([QP("Both")],FU.prototype,"templateType",void 0),Sq([QP()],FU.prototype,"header",void 0),Sq([QP()],FU.prototype,"content",void 0),Sq([QP()],FU.prototype,"footer",void 0),FU),Tq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Aq=(BU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Tq([QP()],BU.prototype,"option",void 0),Tq([QP()],BU.prototype,"template",void 0),BU),Oq=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.crudObj={sourceEvent:null,targetEvent:null,isCrudAction:!1}}return _createClass(e,[{key:"getQuery",value:function(){var e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(e,t)}},{key:"getTable",value:function(){return this.parent.eventSettings.query?this.parent.eventSettings.query.clone().fromTable:null}},{key:"refreshData",value:function(e){var t=this,i={requestType:e.requestType,cancel:!1,data:e.data,addedRecords:e.editParms.addedRecords,changedRecords:e.editParms.changedRecords,deletedRecords:e.editParms.deletedRecords};if(this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.activeViewOptions.group.allowGroupEdit&&!this.parent.rowAutoHeight&&!this.parent.virtualScrollModule&&this.parent.activeViewOptions.group.byGroupID&&("eventCreated"===e.requestType||"eventRemoved"===e.requestType)){this.crudObj.isCrudAction=!0,this.crudObj.sourceEvent=[];var n,r=_createForOfIteratorHelper(e.data instanceof Array?e.data:"string"!=typeof e.data&&"number"!=typeof e.data||"eventRemoved"!==e.requestType?[e.data]:e.editParms.deletedRecords);try{var a=function(){var i=n.value;t.crudObj.isCrudAction=!("eventRemoved"===e.requestType&&!RD(i.parent));var r=t.parent.eventBase.getGroupIndexFromEvent(i);0===t.parent.crudModule.crudObj.sourceEvent.filter((function(e){return e.groupIndex===r})).length&&t.crudObj.isCrudAction&&t.crudObj.sourceEvent.push(t.parent.resourceBase.lastResourceLevel[r])};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}this.crudObj.targetEvent=this.crudObj.sourceEvent}this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger("actionComplete",i,(function(e){e.cancel||t.parent.renderModule.refreshDataManager()})):e.promise.then((function(e){t.parent.isDestroyed||t.parent.trigger("actionComplete",i,(function(e){e.cancel||t.parent.renderModule.refreshDataManager()}))})).catch((function(e){t.parent.isDestroyed||t.parent.trigger("actionFailure",{error:e})}))}},{key:"addEvent",value:function(e){var t=this;if(this.parent.eventSettings.allowAdding){if(!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e instanceof Array?[e]:e);var i=e instanceof Array?e:[e],n={requestType:"eventCreate",cancel:!1,addedRecords:i,changedRecords:[],deletedRecords:[]};n.data=i,this.parent.trigger("actionBegin",n,(function(e){if(t.serializeData(e.addedRecords),!e.cancel){var i,n=t.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.addedRecords instanceof Array){var a,o=_createForOfIteratorHelper(e.addedRecords);try{for(o.s();!(a=o.n()).done;){var s=a.value;r.addedRecords.push(t.parent.eventBase.processTimezone(s,!0))}}catch(c){o.e(c)}finally{o.f()}i=t.parent.dataModule.dataManager.saveChanges(r,n.id,t.getTable(),t.getQuery())}else{var l=t.parent.eventBase.processTimezone(e.addedRecords,!0);r.addedRecords.push(l),i=t.parent.dataModule.dataManager.insert(l,t.getTable(),t.getQuery())}t.refreshData({requestType:"eventCreated",cancel:!1,data:e.addedRecords,promise:i,editParms:r})}}))}}},{key:"saveEvent",value:function(e,t){var i=this;if(this.parent.eventSettings.allowEditing){if("EditFollowingEvents"!==this.parent.currentAction&&!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e instanceof Array?[e]:e);if(this.parent.currentAction=t,t)switch(t){case"EditOccurrence":this.processOccurrences(e,t);break;case"EditFollowingEvents":this.processFollowSeries(e,t);break;case"EditSeries":this.processEntireSeries(e,t)}else{var n={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};n.data=e,this.parent.trigger("actionBegin",n,(function(e){if(i.serializeData(e.changedRecords),!e.cancel){var t,n=i.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.changedRecords instanceof Array){var a,o=_createForOfIteratorHelper(e.changedRecords);try{for(o.s();!(a=o.n()).done;){var s=a.value;r.changedRecords.push(i.parent.eventBase.processTimezone(s,!0))}}catch(c){o.e(c)}finally{o.f()}t=i.parent.dataModule.dataManager.saveChanges(r,n.id,i.getTable(),i.getQuery())}else{var l=i.parent.eventBase.processTimezone(e.changedRecords,!0);r.changedRecords.push(l),t=i.parent.dataModule.dataManager.update(n.id,l,i.getTable(),i.getQuery())}i.refreshData({requestType:"eventChanged",cancel:!1,data:e.changedRecords,promise:t,editParms:r})}}))}}}},{key:"deleteEvent",value:function(e,t){var i=this;if(this.parent.eventSettings.allowDeleting){this.parent.currentAction=t;var n;if(n="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter((function(t){return t[i.parent.eventFields.id]===e})):e instanceof Array?e:[e],t)switch(t){case"Delete":this.processEventDelete(n);break;case"DeleteOccurrence":this.processOccurrences(n,t);break;case"DeleteFollowingEvents":this.processFollowSeries(n,t);break;case"DeleteSeries":this.processEntireSeries(n,t)}else{var r={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n};r.data=e,this.parent.trigger("actionBegin",r,(function(e){if(i.serializeData(e.deletedRecords),!e.cancel){var t,n=i.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]};e.deletedRecords.length>1?(r.deletedRecords=r.deletedRecords.concat(e.deletedRecords),t=i.parent.dataModule.dataManager.saveChanges(r,n.id,i.getTable(),i.getQuery())):(r.deletedRecords.push(e.deletedRecords[0]),t=i.parent.dataModule.dataManager.remove(n.id,e.deletedRecords[0],i.getTable(),i.getQuery())),i.parent.eventBase.selectWorkCellByTime(e.deletedRecords),i.refreshData({requestType:"eventRemoved",cancel:!1,data:e.deletedRecords,promise:t,editParms:r})}}))}}}},{key:"processOccurrences",value:function(e,t){var i=this,n=[],r=!1;if(e instanceof Array){var a,o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;n.push({occurrence:s,parent:this.getParentEvent(s)})}}catch(c){o.e(c)}finally{o.f()}}else n={occurrence:e,parent:this.getParentEvent(e)};var l={requestType:"EditOccurrence"===t?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};l.data=n,this.parent.trigger("actionBegin",l,(function(e){if(i.serializeData(e.changedRecords),!e.cancel){for(var a=i.parent.eventFields,o={addedRecords:[],changedRecords:[],deletedRecords:[]},s=n instanceof Array?n:[n],l=function(n,l){var c=e.changedRecords[n],u=s[n].parent,h=u[a.recurrenceException];switch(t){case"EditOccurrence":var d=i.parent.eventsProcessed.filter((function(e){return e.Guid===c.Guid}))[0],p=i.excludeDateCheck(d[a.startTime],h);p!==u[a.recurrenceException]?(u[a.recurrenceException]=p,c[a.recurrenceException]=RU(d[a.startTime]),c[a.recurrenceID]=u[a.id],c[a.followingID]=null,o.changedRecords.push(i.parent.eventBase.processTimezone(u,!0)),o.addedRecords.push(i.parent.eventBase.processTimezone(c,!0))):o.changedRecords.push(i.parent.eventBase.processTimezone(c,!0));break;case"DeleteOccurrence":c[a.recurrenceException]||(u[a.recurrenceException]=i.excludeDateCheck(c[a.startTime],h),o.changedRecords.push(i.parent.eventBase.processTimezone(u,!0))),c[a.id]!==u[a.id]&&(o.deletedRecords.push(c),r=!0)}},c=0,u=e.changedRecords.length;c<u;c++)l(c);var h=i.parent.dataModule.dataManager.saveChanges(o,a.id,i.getTable(),i.getQuery());i.parent.eventBase.selectWorkCellByTime(e.changedRecords),i.refreshData({requestType:"EditOccurrence"===t?"eventChanged":"eventRemoved",cancel:!1,data:r?e.deletedRecords:e.changedRecords,promise:h,editParms:o})}}))}},{key:"processFollowSeries",value:function(e,t){var i=this,n=[];if(e instanceof Array){var r,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n.push({occurrence:o,parent:this.getParentEvent(o)})}}catch(l){a.e(l)}finally{a.f()}}else n={occurrence:e,parent:this.getParentEvent(e)};var s={requestType:"EditFollowingEvents"===t?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};s.data=n,this.parent.trigger("actionBegin",s,(function(e){i.serializeData(e.changedRecords),e.cancel||function(){for(var r=i.parent.eventFields,a={addedRecords:[],changedRecords:[],deletedRecords:[]},o=n instanceof Array?n:[n],s=function(n,s){var l=e.changedRecords[n],c=o[n].parent,u=i.parent.eventBase.getEventCollections(c,l);switch(t){case"EditFollowingEvents":i.processRecurrenceRule(c,l);var h=!i.parent.eventBase.isFollowingEvent(c,l);if(l[r.followingID]=h?null:c[r.id],l[r.recurrenceID]=null,a.addedRecords.push(i.parent.eventBase.processTimezone(l,!0)),a.changedRecords.push(i.parent.eventBase.processTimezone(c,!0)),!i.parent.uiStateValues.isIgnoreOccurrence){if(l[r.recurrenceException]=null,u.occurrence.length>0){var d=u.occurrence.slice(-1)[0][r.recurrenceRule];-1===d.indexOf("COUNT")&&(l[r.recurrenceRule]=d)}u.follow.length>0&&(l[r.recurrenceRule]=u.follow.slice(-1)[0][r.recurrenceRule],a.deletedRecords=a.deletedRecords.concat(u.follow)),h&&(u.occurrence=u.occurrence.filter((function(e){return e[r.recurrenceID]===l[r.id]}))),a.deletedRecords=a.deletedRecords.concat(u.occurrence)}break;case"DeleteFollowingEvents":i.processRecurrenceRule(c,l[r.startTime]),a.changedRecords.push(i.parent.eventBase.processTimezone(c,!0)),a.deletedRecords=a.deletedRecords.concat(u.occurrence).concat(u.follow)}},l=0,c=e.changedRecords.length;l<c;l++)s(l);var u=i.parent.dataModule.dataManager.saveChanges(a,r.id,i.getTable(),i.getQuery());i.parent.eventBase.selectWorkCellByTime(e.changedRecords),i.refreshData({requestType:"EditFollowingEvents"===t?"eventChanged":"eventRemoved",cancel:!1,data:e.changedRecords,promise:u,editParms:a})}()}))}},{key:"processEntireSeries",value:function(e,t){var i=this,n=[],r=!1;if(e instanceof Array){var a,o=_createForOfIteratorHelper(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;n.push(this.getParentEvent(s,!0))}}catch(c){o.e(c)}finally{o.f()}}else n=this.getParentEvent(e,!0);var l={requestType:"EditSeries"===t?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};l.data=n,this.parent.trigger("actionBegin",l,(function(e){i.serializeData(e.changedRecords),e.cancel||function(){for(var a=i.parent.eventFields,o={addedRecords:[],changedRecords:[],deletedRecords:[]},s=n instanceof Array?n:[n],l=function(n,l){var c=e.changedRecords[n],u=s[n],h=i.parent.eventBase.getEventCollections(u),d=h.follow.concat(h.occurrence);switch(t){case"EditSeries":if(c[a.startTime]>u[a.startTime]&&c[a.recurrenceRule]&&i.processRecurrenceRule(u,c),c[a.id]=u[a.id],c[a.recurrenceID]=null,c[a.followingID]=null,i.parent.uiStateValues.isIgnoreOccurrence&&c[a.recurrenceException]){var p=i.parent.eventsData.filter((function(e){return e[a.id]===c[a.id]}));p.length>0&&(c[a.recurrenceRule]=p[0][a.recurrenceRule])}else c[a.recurrenceException]=null,o.deletedRecords=o.deletedRecords.concat(d);o.changedRecords.push(i.parent.eventBase.processTimezone(c,!0)),i.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":o.deletedRecords=o.deletedRecords.concat(d.concat(u)),r=!0}},c=0,u=e.changedRecords.length;c<u;c++)l(c);var h=i.parent.dataModule.dataManager.saveChanges(o,a.id,i.getTable(),i.getQuery());i.parent.eventBase.selectWorkCellByTime(e.changedRecords),i.refreshData({requestType:"EditSeries"===t?"eventChanged":"eventRemoved",cancel:!1,data:r?e.deletedRecords:e.changedRecords,promise:h,editParms:o})}()}))}},{key:"processEventDelete",value:function(e){var t,i=this,n=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a[this.parent.eventFields.recurrenceRule]?{occurrence:a,parent:this.getParentEvent(a)}:a)}}catch(s){r.e(s)}finally{r.f()}var o={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:e};o.data=n,this.parent.trigger("actionBegin",o,(function(e){i.serializeData(e.deletedRecords),e.cancel||function(){for(var t=i.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},a=0,o=e.deletedRecords.length;a<o;a++){var s=RD(e.deletedRecords[a][i.parent.eventFields.recurrenceRule]);s||function(){var o=n[a].parent,l=r.changedRecords.filter((function(e){return e[t.id]===o[t.id]})),c=e.deletedRecords[a][t.startTime];if(l.length>0){var u=l[0];u[t.recurrenceException]=i.excludeDateCheck(c,u[t.recurrenceException])}else o[t.recurrenceException]=i.excludeDateCheck(c,o[t.recurrenceException]);0===l.length&&r.changedRecords.push(i.parent.eventBase.processTimezone(o,!0)),s=e.deletedRecords[a][t.id]!==o[t.id]}(),s&&r.deletedRecords.push(e.deletedRecords[a])}var l=i.parent.dataModule.dataManager.saveChanges(r,t.id,i.getTable(),i.getQuery());i.refreshData({requestType:"eventRemoved",cancel:!1,data:e.deletedRecords,promise:l,editParms:r})}()}))}},{key:"serializeData",value:function(e){}},{key:"getParentEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.parent.eventBase.getParentEvent(e,t)||e;return(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(i),i}},{key:"excludeDateCheck",value:function(e,t){var i=RU(e);return RD(t)?t=i:-1===t.indexOf(i)&&(t=RD(t)?i:t+","+i),t}},{key:"processRecurrenceRule",value:function(e,t){var i,n=this.parent.eventFields,r=e[n.recurrenceRule];if(t instanceof Date)i=new Date(+t);else{i=new Date(+t[n.startTime]);var a=t[n.recurrenceRule],o=e[n.startTime],s=GH(o,a,"DeleteFollowingEvents"===this.parent.currentAction?t[n.recurrenceException]:null,this.parent.activeViewOptions.firstDayOfWeek),l=new Date(s.slice(-1)[0]);l.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),i.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),t[n.recurrenceRule]=this.getUpdatedRecurrenceRule(a,new Date(+l),!1)}e[n.recurrenceRule]=this.getUpdatedRecurrenceRule(r,CH(new Date(i.getTime()),-1),!0)}},{key:"getUpdatedRecurrenceRule",value:function(e,t,i){var n,r="",a=_createForOfIteratorHelper(e.split(";"));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(""!==o){var s=o.split("=")[0],l=o.split("=")[1];"COUNT"!==s&&"UNTIL"!==s||(l=RU(t),o=o.replace(o,"UNTIL="+l)),r+=o+";"}}}catch(c){a.e(c)}finally{a.f()}return i&&-1===r.indexOf("UNTIL")&&(r+="UNTIL="+RU(t)),r}},{key:"isBlockEvent",value:function(e){var t,i=!1,n=_createForOfIteratorHelper(e instanceof Array?e:[e]);try{for(n.s();!(t=n.n()).done;){i=t.value[this.parent.eventFields.isBlock]||!1}}catch(r){n.e(r)}finally{n.f()}return i}}]),e}(),xq=function(){function e(t){_classCallCheck2(this,e),this.parent=t,OR.add(this.parent.element,"mouseover",this.onHover,this)}return _createClass(e,[{key:"cellMouseDown",value:function(e){this.isPreventAction(e)||this.parent.notify("cell-mouse-down",{event:e})}},{key:"cellClick",value:function(e){var t=this;if(!this.isPreventAction(e)){var i=MP(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!RD(i))if(RD(MP(e.target,".e-new-event"))){var n=MP(e.target,".e-navigate"),r=this.parent.getNavigateView(),a=this.parent.currentView===r;if(RD(n)||a||RD(this.parent.viewOptions[r.charAt(0).toLowerCase()+r.slice(1)])){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView)return void this.parent.quickPopup.quickPopupHide();if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||MP(e.target,".e-more-indicator")))return;var o=i.classList.contains("e-work-cells")||i.classList.contains("e-all-day-cells");if(o&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(i);var s=DD(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.trigger("cellClick",s,(function(n){(n=t.serializingData(n,e)).cancel?t.parent.quickPopup&&t.parent.quickPopup.quickPopupHide():(o&&t.parent.selectCell(i),t.parent.allowInline?t.parent.notify("inlineClick",{element:n.element,groupIndex:n.groupIndex,type:"Cell"}):t.parent.notify("cellClick",n))}))}else{var l=this.parent.getDateFromElement(i);RD(l)||this.parent.isAdaptive||!this.parent.isMinMaxDate(l)||(this.parent.setScheduleProperties({selectedDate:l}),this.parent.changeView(this.parent.getNavigateView(),e))}}else this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}}},{key:"cellDblClick",value:function(e){var t=this;if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var i=DD(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellDoubleClick"});this.parent.trigger("cellDoubleClick",i,(function(i){i=t.serializingData(i,e);var n=new Date(i.startTime.getTime());t.parent.isMinMaxDate(new Date(n.setHours(0,0,0,0)))&&(i.cancel||t.parent.eventWindow.openEditor(t.parent.activeCellsData,"Add"))}))}}},{key:"serializingData",value:function(e,t){return e}},{key:"onHover",value:function(e){var t=MP(e.target,".e-work-cells,.e-time-slots,.e-all-day-cells,.e-header-cells,.e-resource-cells,.e-appointment,.e-week-number,.e-month-header");t&&this.parent.trigger("hover",{element:t,event:e})}},{key:"isPreventAction",value:function(e){if(MP(e.target,".e-navigate"))return!1;if(MP(e.target,".e-appointment-wrapper")&&!MP(e.target,".e-more-indicator"))return!0;var t=MP(e.target,".e-appointment,.e-resource-group-cells");return!(RD(t)&&(t=MP(e.target,".e-header-cells"),!this.parent.activeView.isTimelineView()||RD(t)))}},{key:"destroy",value:function(){OR.remove(this.parent.element,"mouseover",this.onHover)}}]),e}(),Iq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Dq=(VU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Iq([QP()],VU.prototype,"name",void 0),Iq([QP()],VU.prototype,"default",void 0),Iq([QP()],VU.prototype,"title",void 0),Iq([QP({})],VU.prototype,"validation",void 0),VU),Rq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Pq=(jU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Rq([QP("Id")],jU.prototype,"id",void 0),Rq([QP("IsBlock")],jU.prototype,"isBlock",void 0),Rq([ZP({name:"Subject"},Dq)],jU.prototype,"subject",void 0),Rq([ZP({name:"StartTime"},Dq)],jU.prototype,"startTime",void 0),Rq([ZP({name:"EndTime"},Dq)],jU.prototype,"endTime",void 0),Rq([ZP({name:"StartTimezone"},Dq)],jU.prototype,"startTimezone",void 0),Rq([ZP({name:"EndTimezone"},Dq)],jU.prototype,"endTimezone",void 0),Rq([ZP({name:"Location"},Dq)],jU.prototype,"location",void 0),Rq([ZP({name:"Description"},Dq)],jU.prototype,"description",void 0),Rq([ZP({name:"IsAllDay"},Dq)],jU.prototype,"isAllDay",void 0),Rq([ZP({name:"RecurrenceID"},Dq)],jU.prototype,"recurrenceID",void 0),Rq([ZP({name:"RecurrenceRule"},Dq)],jU.prototype,"recurrenceRule",void 0),Rq([ZP({name:"RecurrenceException"},Dq)],jU.prototype,"recurrenceException",void 0),Rq([QP("IsReadonly")],jU.prototype,"isReadonly",void 0),Rq([QP("FollowingID")],jU.prototype,"followingID",void 0),jU),Mq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Lq=(HU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Mq([QP()],HU.prototype,"template",void 0),Mq([QP([])],HU.prototype,"dataSource",void 0),Mq([QP()],HU.prototype,"query",void 0),Mq([ZP({},Pq)],HU.prototype,"fields",void 0),Mq([QP(!1)],HU.prototype,"enableTooltip",void 0),Mq([QP()],HU.prototype,"tooltipTemplate",void 0),Mq([QP()],HU.prototype,"resourceColorField",void 0),Mq([QP(!1)],HU.prototype,"editFollowingEvents",void 0),Mq([QP(!0)],HU.prototype,"allowAdding",void 0),Mq([QP(!0)],HU.prototype,"allowEditing",void 0),Mq([QP(!0)],HU.prototype,"allowDeleting",void 0),Mq([QP(!1)],HU.prototype,"enableMaxHeight",void 0),Mq([QP(!1)],HU.prototype,"enableIndicator",void 0),Mq([QP(!1)],HU.prototype,"ignoreWhitespace",void 0),HU),Nq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Fq=(UU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Nq([QP(!1)],UU.prototype,"byDate",void 0),Nq([QP(!0)],UU.prototype,"byGroupID",void 0),Nq([QP(!1)],UU.prototype,"allowGroupEdit",void 0),Nq([QP([])],UU.prototype,"resources",void 0),Nq([QP(!0)],UU.prototype,"enableCompactView",void 0),Nq([QP()],UU.prototype,"headerTooltipTemplate",void 0),UU),Bq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Vq=(qU=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.apply(this,arguments)}return i}(mM),Bq([QP()],qU.prototype,"field",void 0),Bq([QP()],qU.prototype,"title",void 0),Bq([QP()],qU.prototype,"name",void 0),Bq([QP(!1)],qU.prototype,"allowMultiple",void 0),Bq([QP([])],qU.prototype,"dataSource",void 0),Bq([QP()],qU.prototype,"query",void 0),Bq([QP("Id")],qU.prototype,"idField",void 0),Bq([QP("Text")],qU.prototype,"textField",void 0),Bq([QP("Expanded")],qU.prototype,"expandedField",void 0),Bq([QP("GroupID")],qU.prototype,"groupIDField",void 0),Bq([QP("Color")],qU.prototype,"colorField",void 0),Bq([QP("StartHour")],qU.prototype,"startHourField",void 0),Bq([QP("EndHour")],qU.prototype,"endHourField",void 0),Bq([QP("WorkDays")],qU.prototype,"workDaysField",void 0),Bq([QP("CssClass")],qU.prototype,"cssClassField",void 0),qU),jq=function(){function e(t){_classCallCheck2(this,e),this.resourceCollection=[],this.leftPixel=25,this.parent=t}return _createClass(e,[{key:"renderResourceHeaderIndent",value:function(e){var t=CP("td",{className:"e-resource-left-td"}),i=CP("div",{className:"e-resource-text"});t.appendChild(i),this.parent.trigger("renderCell",{elementType:"emptyCells",element:t}),e.appendChild(t)}},{key:"hideResourceRows",value:function(e){if(!(this.resourceCollection.length<=1||this.parent.virtualScrollModule))for(var t=this.lastResourceLevel.length,i=0;i<t;i++){var n=this.lastResourceLevel[i].resourceData,r=this.lastResourceLevel[i].resource;"e-parent-node"!==n.ClassName||n[r.expandedField]||RD(n[r.expandedField])||wP([].slice.call(e.children).slice(i+1,i+(parseInt(n.Count,0)+1)),"e-hidden")}}},{key:"createResourceColumn",value:function(){var e=this.resourceCollection,t=CP("div",{className:"e-resource-column-wrap"}),i=this.parent.activeView.createTableLayout("e-resource-column-table");!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&wP([i],"e-auto-height");var n=i.querySelector("tbody"),r=this.generateTreeData(!0);if(this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){var a=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),r=this.expandedResources.slice(0,a),this.renderedResources=r}return AP(this.getContentRows(r),n),this.hideResourceRows(n),i.appendChild(n),t.appendChild(i),t}},{key:"setRenderedResources",value:function(){var e=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel}},{key:"setExpandedResources",value:function(){for(var e=[],t=0;t<this.lastResourceLevel.length;t++){var i=this.lastResourceLevel[t].resourceData,n=i.Count;e.push(this.lastResourceLevel[t]);var r=i[this.lastResourceLevel[t].resource.expandedField];!RD(r)&&!r&&n>0&&(t+=n)}this.expandedResources=e}},{key:"getContentRows",value:function(e){for(var t,i,n=[],r=this.resourceCollection,a=CP("tr"),o=CP("td"),s=0;s<e.length;s++){var l=o.cloneNode();if((i=OH(r,"name",e[s].resource.name))===r.length-1?(DD(e[s].resourceData,{ClassName:"e-child-node"}),this.renderedResources[s].className=["e-child-node"]):(DD(e[s].resourceData,{ClassName:"e-parent-node"}),this.renderedResources[s].className=["e-parent-node"]),t=i*this.leftPixel+"px","e-parent-node"===e[s].resourceData.ClassName&&!RD(e[s].resourceData.Count)&&e[s].resourceData.Count>0){var c;c=e[s].resourceData[r[i].expandedField]||RD(e[s].resourceData[r[i].expandedField])?"e-resource-collapse":"e-resource-expand";var u=CP("div");wP([u],["e-resource-tree-icon",c]),this.setMargin(u,t),l.appendChild(u),this.resourceCollection.length>1&&OR.add(u,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(l,e[s],"e-resource-text"),l.setAttribute("data-group-index",e[s].groupIndex.toString()),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(l.querySelector(".e-resource-text"),t),wP([l],["e-resource-cells",e[s].resourceData.ClassName]),this.parent.trigger("renderCell",{elementType:"resourceHeader",element:l,groupIndex:e[s].groupIndex});var h=a.cloneNode();h.appendChild(l),n.push(h)}return n}},{key:"setMargin",value:function(e,t){this.parent.enableRtl?e.style.marginRight=t:e.style.marginLeft=t}},{key:"countCalculation",value:function(e,t){for(var i,n=0;n<e.length;n++){for(var r=e[e.length-(n+1)].dataSource,a=0;a<r.length;a++){var o=0;i=this.parent.activeViewOptions.group.byGroupID?new TF(t[t.length-1].dataSource).executeLocal((new gF).where(t[t.length-1].groupIDField,"equal",r[a][e[e.length-(n+1)].idField])):t[t.length-1].dataSource;for(var s=0;s<i.length;s++)o+=parseInt(i[s].Count,0);o+=parseInt(r[a].Count,0),DD(r[a],{Count:o})}t=t.slice(0,-1)}}},{key:"onTreeIconClick",value:function(e){var t=this;this.parent.eventTooltip&&this.parent.eventTooltip.close();var i,n=e.target,r=MP(n,".e-parent-node").parentElement,a=parseInt(r.children[0].getAttribute("data-group-index"),10),o={cancel:!1,event:e,groupIndex:a,requestType:n.classList.contains("e-resource-collapse")?"resourceCollapse":"resourceExpand"};this.parent.trigger("actionBegin",o,(function(r){if(!r.cancel){n.classList.contains("e-resource-collapse")?(NP(n,["e-resource-expand"],["e-resource-collapse"]),i=!0):(NP(n,["e-resource-collapse"],["e-resource-expand"]),i=!1);var s,l=_createForOfIteratorHelper([].slice.call(t.parent.element.querySelectorAll(".e-appointment")));try{for(l.s();!(s=l.n()).done;){IP(s.value)}}catch(u){l.e(u)}finally{l.f()}t.parent.virtualScrollModule?t.updateVirtualContent(a,i,e,n):t.updateContent(a,i);var c={cssProperties:t.parent.getCssProperties(),module:"scroll"};t.parent.notify(pH,c),o={cancel:!1,event:e,groupIndex:a,requestType:n.classList.contains("e-resource-collapse")?"resourceExpanded":"resourceCollapsed"},t.parent.notify(dH,{}),t.parent.trigger("actionComplete",o)}}))}},{key:"updateContent",value:function(e,t){for(var i,n=[],r=[],a=[],o=this.lastResourceLevel[e].resourceData,s=[].slice.call(this.parent.element.querySelectorAll(".e-resource-column-wrap tr")),l=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap tbody tr")),c=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-appointment-container")),u=0;u<o.Count;u++)n.push(s[e+u+1]),r.push(l[e+u+1]),a.push(c[e+u+1]);for(var h=this.lastResourceLevel,d=0;d<n.length;d++){var p=!0;if(i=n[d].children[0].classList.contains("e-parent-node"),h[e].resourceData[h[e].resource.expandedField]=!t,t){if(i){var f=n[d].querySelector(".e-resource-tree-icon");f&&NP(f,["e-resource-expand"],["e-resource-collapse"])}n[d].classList.contains("e-hidden")||wP([n[d],r[d],a[d]],"e-hidden")}else{if(i){var v=n[d].rowIndex;if(h[v].resourceData[h[v].resource.expandedField]||RD(h[v].resourceData[h[v].resource.expandedField])||(n.splice(d+1,parseInt(h[v].resourceData.Count,0)),r.splice(d+1,parseInt(h[v].resourceData.Count,0)),a.splice(d+1,parseInt(h[v].resourceData.Count,0)),p=!1),p){var m=n[d].querySelector(".e-resource-tree-icon");m&&NP(m,["e-resource-collapse"],["e-resource-expand"])}}n[d].classList.contains("e-hidden")&&_P([n[d],r[d],a[d]],"e-hidden")}}}},{key:"updateVirtualContent",value:function(e,t,i,n){this.lastResourceLevel[e].resourceData[this.lastResourceLevel[e].resource.expandedField]=!t,this.setExpandedResources();var r=this.parent.virtualScrollModule.getRenderedCount(),a=this.expandedResources.indexOf(this.renderedResources[0]);if(this.renderedResources=this.expandedResources.slice(a,a+r),this.renderedResources.length<r){var o=this.expandedResources.length-r;o=o>0?o:0,this.renderedResources=this.expandedResources.slice(o,this.expandedResources.length)}var s=this.parent.element.querySelector(".e-virtual-track");this.parent.virtualScrollModule.updateVirtualTrackHeight(s);var l=this.parent.element.querySelector(".e-resource-column-wrap table"),c=this.parent.element.querySelector(".e-content-wrap table"),u=this.parent.element.querySelector(".e-event-table");this.parent.virtualScrollModule.updateContent(l,c,u,this.renderedResources);var h=this.parent.element.querySelector(".e-current-timeline");RD(h)||(h.style.height=this.parent.element.querySelector(".e-content-table").offsetHeight+"px")}},{key:"renderResourceHeader",value:function(){var e=CP("div",{className:PH});if(e.innerHTML='<div class="e-schedule-resource-toolbar"><div class="e-resource-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-resource-level-title"></div></div>',"MonthAgenda"===this.parent.currentView){var t=this.parent.activeView.getPanel().querySelector(".e-content-wrap");t.insertBefore(e,t.querySelector(".e-wrapper-container"))}else this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-table-container"));this.renderResourceHeaderText(),OR.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)}},{key:"renderResourceTree",value:function(){this.popupOverlay=CP("div",{className:"e-resource-tree-popup-overlay"});var e=CP("div",{className:"e-resource-tree-popup e-popup-close"});if("MonthAgenda"===this.parent.currentView){var t=this.parent.activeView.getPanel().querySelector(".e-wrapper-container");t.insertBefore(e,t.children[0]),t.appendChild(this.popupOverlay)}else this.parent.element.querySelector(".e-table-container").appendChild(e),this.parent.element.querySelector(".e-table-container").appendChild(this.popupOverlay);var i=CP("div",{className:"e-resource-tree"});e.appendChild(i),this.treeViewObj=new Cj({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this)}),this.treeViewObj.appendTo(i),this.treeViewObj.expandAll(),this.treePopup=new eN(e,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?"e-wrapper-container":"e-table-container"))}),this.parent.on("document-click",this.documentClick,this)}},{key:"generateTreeData",value:function(e){for(var t=this,i=[],n=[],r=0,a=function(a,o){var s=function i(a,o,s){var l,c,u=t.resourceCollection[o];e?(c={type:"resourceHeader",resource:a.resource,resourceData:a.resourceData,groupIndex:r,groupOrder:a.groupOrder},n.push(c),r++):l={resourceId:s,resourceName:a.resourceData[u.textField],resource:a.resource,resourceData:a.resourceData},a.child.length>0&&!e&&(l.resourceChild=[]);var h,d=1,p=_createForOfIteratorHelper(a.child);try{for(p.s();!(h=p.n()).done;){var f=h.value;e?i(f,o+1,s+"-"+d):l.resourceChild.push(i(f,o+1,s+"-"+d)),d+=1}}catch(v){p.e(v)}finally{p.f()}return e&&DD(c.resourceData,{Count:d-1}),l};e?s(t.resourceTreeLevel[o],0,(o+1).toString()):i.push(s(t.resourceTreeLevel[o],0,(o+1).toString()))},o=0,s=this.resourceTreeLevel.length;o<s;o++)a(0,o);return e?(this.lastResourceLevel=n,n):i}},{key:"renderResourceHeaderText",value:function(){for(var e=this,t=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],i=[],n=function(n,r){var a=e.resourceCollection[r],o=CP("div",{className:"e-resource-name",innerHTML:a.dataSource.filter((function(e){return e[a.idField]===t.groupOrder[r]}))[0][a.textField]});i.push(o);var s=CP("div",{className:"e-icons e-icon-next"});i.push(s)},r=0,a=t.groupOrder.length;r<a;r++)n(0,r);i.pop();var o=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector(".e-resource-level-title");IH(o);for(var s=0,l=i;s<l.length;s++){var c=l[s];o.appendChild(c)}1===this.lastResourceLevel.length&&wP([this.parent.element.querySelector(".e-resource-menu")],"e-disable")}},{key:"menuClick",value:function(e){if(this.parent.element.querySelector(".e-resource-tree-popup").classList.contains("e-popup-open"))this.treePopup.hide(),_P([this.popupOverlay],"e-enable");else{var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));_P(t,"e-active"),wP([t[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),wP([this.popupOverlay],"e-enable")}}},{key:"resourceClick",value:function(e){var t=this;if(!e.node.classList.contains("e-has-child")){this.treePopup.hide(),_P([this.popupOverlay],"e-enable");var i=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));if(this.parent.uiStateValues.groupIndex=i.indexOf(e.node),this.parent.isServerRenderer())this.parent.interopAdaptor.invokeMethodAsync("OnResourceClick",this.parent.uiStateValues.groupIndex).then((function(){if(!t.parent.isDestroyed){t.renderResourceHeaderText(),t.parent.activeView.serverRenderLayout();var e=t.parent.eventBase.processData(t.parent.eventsData);t.parent.notify(dH,{processedData:e})}})).catch((function(e){return t.parent.renderModule.dataManagerFailure(e)}));else{this.parent.renderModule.render(this.parent.currentView,!1);var n=this.parent.eventBase.processData([].concat(_toConsumableArray2(this.parent.blockData),_toConsumableArray2(this.parent.eventsData)));this.parent.notify(dH,{processedData:n})}}e.event.preventDefault()}},{key:"documentClick",value:function(e){if(!MP(e.event.target,".e-resource-tree-popup")){var t=this.parent.element.querySelector(".e-resource-tree-popup");t&&t.classList.contains("e-popup-open")&&(this.treePopup.hide(),_P([this.popupOverlay],"e-enable"))}}},{key:"bindResourcesData",value:function(e){var t=this;this.parent.showSpinner();for(var i=[],n=0;n<this.parent.resources.length;n++){var r=new jH(this.parent.resources[n].dataSource,this.parent.resources[n].query);i.push(r.getData(r.generateQuery()))}Promise.all(i).then((function(i){return t.dataManagerSuccess(i,e)})).catch((function(e){return t.parent.renderModule.dataManagerFailure(e)}))}},{key:"dataManagerSuccess",value:function(e,t){if(!this.parent.isDestroyed){this.parent.resourceCollection=[];for(var i=0,n=e.length;i<n;i++){var r=this.getResourceModel(this.parent.resources[i],e[i].result);this.parent.resourceCollection.push(r)}this.refreshLayout(t)}}},{key:"getResourceModel",value:function(e,t){return{field:e.field,title:e.title,name:e.name,allowMultiple:e.allowMultiple,dataSource:t||e.dataSource,idField:e.idField,textField:e.textField,groupIDField:e.groupIDField,colorField:e.colorField,startHourField:e.startHourField,endHourField:e.endHourField,workDaysField:e.workDaysField,expandedField:e.expandedField,cssClassField:e.cssClassField}}},{key:"refreshLayout",value:function(e){this.parent.uiStateValues.groupIndex=0,this.parent.renderElements(e)}},{key:"setResourceCollection",value:function(){var e=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0){var t,i=_createForOfIteratorHelper(this.parent.activeViewOptions.group.resources);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=OH(this.parent.resourceCollection,"name",n);r>=0&&e.push(this.parent.resourceCollection[r])}}catch(u){i.e(u)}finally{i.f()}}else this.parent.resourceCollection.length>0&&(e=this.parent.resourceCollection);var a,o=0,s=_createForOfIteratorHelper(e);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=this.getResourceModel(l);l.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=o),o++,this.resourceCollection.push(c)}}catch(u){s.e(u)}finally{s.f()}RD(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)}},{key:"generateResourceLevels",value:function(e,t){var i=this,n=[],r=[];return this.resourceTreeLevel=function t(a,o,s,l,c){var u=[],h=a[0];if(h){var d;if(l&&i.parent.activeViewOptions.group.byGroupID){var p=l[s.idField];d=h.dataSource.filter((function(e){return e[h.groupIDField]===p}))}else d=h.dataSource;for(var f=0;f<d.length;f++){var v=[];c&&c.length>0&&(v=v.concat(c)),v.push(d[f][h.idField]);var m=t(a.slice(1),o+1,h,d[f],v);if(!(0===o&&0===m.length&&i.resourceCollection.length>1)){var g=void 0,y=[],b=i.parent.activeView.renderDates;if(!i.parent.activeViewOptions.group.byDate&&o+1===i.resourceCollection.length){var k=d[f][h.workDaysField],C=d[f][h.startHourField],w=d[f][h.endHourField];k&&k.length>0?(b=i.parent.activeView.getRenderDates(k),g=k,y=i.parent.activeView.getDateSlots(b,k)):(g=i.parent.activeViewOptions.workDays,y=e);var _=i.generateCustomHours(y,C,w,v);r=r.concat(_)}u.push({type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:o,groupOrder:v,resource:h,resourceData:d[f],colSpan:i.parent.activeViewOptions.group.byDate?1:y.length,renderDates:b,workDays:g,cssClass:d[f][h.cssClassField],child:m})}}return n[o]||(n[o]=[]),n[o].push(u),u}return[]}(this.resourceCollection,0),t?[]:this.generateHeaderLevels(n,r,e)}},{key:"generateCustomHours",value:function(e,t,i,n){var r,a=DD([],e,null,!0),o=_createForOfIteratorHelper(a);try{for(o.s();!(r=o.n()).done;){var s=r.value;t&&(s.startHour=this.parent.getStartEndTime(t)),i&&(s.endHour=this.parent.getStartEndTime(i)),n&&(s.groupOrder=n)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"generateHeaderLevels",value:function(e,t,i){for(var n=[],r=e.length-1;r>=0;r--){var a,o=0,s=_createForOfIteratorHelper(e[r]);try{for(s.s();!(a=s.n()).done;){var l,c=_createForOfIteratorHelper(a.value);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(e[r+1]){var h,d=e[r+1][o],p=0,f=_createForOfIteratorHelper(d);try{for(f.s();!(h=f.n()).done;){var v=h.value;(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&v.resourceData[v.resource.groupIDField]===u.resourceData[u.resource.idField])&&(p+=v.colSpan)}}catch(N){f.e(N)}finally{f.f()}u.colSpan=p}u.groupIndex=o,o++,n[u.resourceLevelIndex]=n[u.resourceLevelIndex]||[],n[u.resourceLevelIndex].push(u)}}catch(N){c.e(N)}finally{c.f()}}}catch(N){s.e(N)}finally{s.f()}}if(this.lastResourceLevel=n.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){var m,g=0,y=_createForOfIteratorHelper(this.lastResourceLevel);try{for(y.s();!(m=y.n()).done;)for(var b=m.value,k=0;k<b.colSpan;k++)t[g].groupIndex=b.groupIndex,g++}catch(N){y.e(N)}finally{y.f()}return n.push(t),n}var C,w=[],_=DD([],n,null,!0),S=0,E=_createForOfIteratorHelper(_[0]);try{for(E.s();!(C=E.n()).done;){S+=C.value.colSpan}}catch(N){E.e(N)}finally{E.f()}var T,A=[],O=_createForOfIteratorHelper(i);try{for(O.s();!(T=O.n()).done;){var x=T.value;x.colSpan=S,A.push(x);for(var I=DD([],_,null,!0),D=0,R=I.length;D<R;D++){if(D===I.length-1){var P,M=_createForOfIteratorHelper(I[D]);try{for(M.s();!(P=M.n()).done;){var L=P.value;L.date=x.date,L.workDays=x.workDays,L.startHour=this.parent.getStartEndTime(L.resourceData[L.resource.startHourField])||x.startHour,L.endHour=this.parent.getStartEndTime(L.resourceData[L.resource.endHourField])||x.endHour}}catch(N){M.e(N)}finally{M.f()}}w[D]||(w[D]=[]),w[D]=w[D].concat(I[D])}}}catch(N){O.e(N)}finally{O.f()}return w.unshift(A),w}},{key:"setResourceValues",value:function(e,t){var i=this,n=function(t,n,r){e[n]=i.resourceCollection[t].allowMultiple&&i.parent.activeViewOptions.group.allowGroupEdit?[r]:r};if(void 0===t&&(t=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!RD(t))for(var r=this.lastResourceLevel[t].groupOrder,a=0;a<this.resourceCollection.length;a++)n(a,this.resourceCollection[a].field,r[a]);else if(this.parent.resourceCollection.length>0)for(var o=0;o<this.resourceCollection.length;o++){var s=this.resourceCollection[o].dataSource[0];s&&n(o,this.resourceCollection[o].field,s[this.resourceCollection[o].idField])}}},{key:"getResourceColor",value:function(e,t){var i=!RD(t)&&this.colorIndex>t.length-1?t.length-1:this.colorIndex,n=this.resourceCollection[i];if(!(RD(t)&&this.parent.activeViewOptions.group.allowGroupEdit&&n.allowMultiple)){var r=RD(t)?e[n.field]:t[i],a=this.filterData(n.dataSource,n.idField,r);return a.length>0?a[0][n.colorField]:void 0}}},{key:"getCssClass",value:function(e){var t=this.resourceCollection.slice(-1)[0];if(!this.parent.activeViewOptions.group.allowGroupEdit||!t.allowMultiple){var i=this.filterData(t.dataSource,t.idField,e[t.field]);return i.length>0?i[0][t.cssClassField]:void 0}}},{key:"getResourceRenderDates",value:function(){var e=[].concat.apply([],this.lastResourceLevel.map((function(e){return e.renderDates}))).filter((function(e,t,i){return i.map((function(e){return e.getTime()})).indexOf(e.getTime())===t}));return e.sort((function(e,t){return e.getTime()-t.getTime()})),e}},{key:"filterData",value:function(e,t,i){return e.filter((function(e){return e[t]===i}))}},{key:"getResourceData",value:function(e,t,i){if(this.parent.activeViewOptions.group.allowGroupEdit){var n,r={},a=_createForOfIteratorHelper(i);try{for(a.s();!(n=a.n()).done;)for(var o=n.value,s=this.lastResourceLevel[o].groupOrder,l=0,c=s.length;l<c;l++){var u=this.resourceCollection[l].field;RD(r[u])&&(r[u]=[]),r[u].push(s[l])}}catch(p){a.e(p)}finally{a.f()}e=DD(e,r)}else for(var h=0,d=this.resourceCollection.length;h<d;h++)e[this.resourceCollection[h].field]=this.lastResourceLevel[t].groupOrder[h]}},{key:"addResource",value:function(e,t,i){var n,r=e instanceof Array?e:[e],a=_createForOfIteratorHelper(this.parent.resourceCollection);try{var o=function(){var e=n.value;if(e.name===t)return r.forEach((function(t,n){return new TF({json:e.dataSource}).insert(t,null,null,i+n)})),"break"};for(a.s();!(n=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}this.refreshLayout(!0)}},{key:"removeResource",value:function(e,t){var i,n=e instanceof Array?e:[e],r=_createForOfIteratorHelper(this.parent.resourceCollection);try{var a=function(){var e=i.value;if(e.name===t)return n.forEach((function(t){return new TF({json:e.dataSource}).remove(e.idField,t)})),"break"};for(r.s();!(i=r.n()).done;){if("break"===a())break}}catch(o){r.e(o)}finally{r.f()}this.refreshLayout(!0)}},{key:"getIndexFromResourceId",value:function(e,t,i,n,r){var a=i.dataSource.filter((function(t){return n&&t[i.idField]===e?t[i.groupIDField]===n[r]?t[i.idField]===e:null:t[i.idField]===e}))[0];return this.lastResourceLevel.map((function(e){return e.resourceData})).indexOf(a)}},{key:"resourceExpand",value:function(e,t,i){var n,r=this.parent.resourceCollection.filter((function(e){return e.name===t?e:null}))[0],a=r.dataSource.filter((function(t){return t[r.idField]===e}))[0];n=this.parent.activeViewOptions.group.byGroupID?this.lastResourceLevel.map((function(e){return e.resourceData})).indexOf(a):this.getIndexFromResourceId(e,t,r);var o=this.parent.element.querySelector('.e-resource-column-wrap [data-group-index="'.concat(n,'"] .e-resource-tree-icon'));o&&(o.classList.contains("e-resource-expand")&&!i||o.classList.contains("e-resource-collapse")&&i)&&o.click()}},{key:"resourceScroll",value:function(e,t){if(!(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)){var i=t||this.parent.resourceCollection.slice(-1)[0].name,n=this.parent.resourceCollection.length-1,r=this.parent.resourceCollection.filter((function(e,t){return e.name===i?(n=t,e):null}))[0],a=this.parent.element.querySelector(".e-content-wrap"),o=0;if(this.parent.activeView.isTimelineView()){if(this.parent.activeViewOptions.group.byGroupID){var s=r.dataSource.filter((function(t){return t[r.idField]===e}))[0];o=this.lastResourceLevel.map((function(e){return e.resourceData})).indexOf(s)}else o=this.getIndexFromResourceId(e,i,r);if(this.parent.virtualScrollModule){var l=this.parent.element.querySelector(".e-virtual-track"),c=Math.round(l.offsetHeight/this.expandedResources.length);if(this.parent.rowAutoHeight&&(a.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),a.scrollTop=o*c-(this.parent.virtualScrollModule.bufferCount-1)*c,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight){var u=this.parent.element.querySelector('.e-work-cells[data-group-index="'.concat(o,'"]'));u&&!u.parentElement.classList.contains("e-hidden")&&(a.scrollTop=a.scrollTop<u.offsetTop?u.offsetTop:a.scrollTop+u.offsetTop)}else a.scrollTop=o*c}else{var h=this.parent.element.querySelector('.e-work-cells[data-group-index="'.concat(o,'"]'));h&&!h.parentElement.classList.contains("e-hidden")&&(a.scrollTop=h.offsetTop)}}else{o=this.parent.activeViewOptions.group.byGroupID?r.dataSource.map((function(e){return e[r.idField]})).indexOf(e):this.getIndexFromResourceId(e,i,r);var d=this.parent.element.querySelector(".e-header-row:nth-child(".concat(n+1,")")),p=[].slice.call(d.children).map((function(e){return e.offsetLeft}));a.scrollLeft=p[o]}}}},{key:"destroy",value:function(){this.parent.off("document-click",this.documentClick),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,IP(this.parent.element.querySelector(".e-resource-tree-popup")),IP(this.parent.element.querySelector(".e-resource-tree-popup-overlay")));var e=this.parent.element.querySelector("."+PH);e&&IP(e)}}]),e}(),Hq=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},Uq=(WU=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){return _classCallCheck2(this,i),t.call(this,e,n)}return _createClass(i,[{key:"render",value:function(){var e=[],t=[];if(e.push("e-schedule"),this.enableRtl?e.push("e-rtl"):t.push("e-rtl"),this.isAdaptive?e.push("e-device"):t.push("e-device"),this.cssClass){var i,n=_createForOfIteratorHelper(this.cssClass.split(" "));try{for(n.s();!(i=n.n()).done;){var r=i.value;e.push(r)}}catch(a){n.e(a)}finally{n.f()}}NP(this.element,e,t),this.validateDate(),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer),iF({target:this.element}),this.scrollModule=new FH(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new bq(this),this.eventBase=new YU(this),this.workCellAction=new xq(this),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new VH(this)),this.inlineModule=new QU(this),this.initializeDataModule(),this.on(dH,this.resetEventTemplates,this),this.on("events-loaded",this.updateEventTemplates,this),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources(),this.wireEvents()}},{key:"renderTableContainer",value:function(){this.element.querySelector(".e-table-container")||this.element.appendChild(this.createElement("div",{className:"e-table-container"}))}},{key:"isServerRenderer",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentView,!1}},{key:"renderCompleted",value:function(){this.renderComplete()}},{key:"layoutReady",value:function(e,t,i){e&&e.length>0&&(t||i)&&(this.resourceCollection=e,this.resourceBase&&this.resourceBase.refreshLayout(i)),this.isServerRenderer()&&this.activeView&&(this.activeView.serverRenderLayout(),this.renderModule&&this.renderModule.refreshDataManager())}},{key:"refreshLayout",value:function(e){this.uiStateValues.groupIndex=0,this.resourceCollection=e,this.renderElements(!0),this.layoutReady()}},{key:"updateLayoutTemplates",value:function(){this.isServerRenderer(this.views[this.viewIndex].option)}},{key:"resetLayoutTemplates",value:function(){var e=this.viewCollections[this.activeView.viewIndex];this.isServerRenderer(e.option)||(this.cellHeaderTemplate&&iP(this.element.id+"_cellHeaderTemplate"),""!==e.cellHeaderTemplate&&iP(this.element.id+"_"+e.cellHeaderTemplateName+"cellHeaderTemplate"),this.dateHeaderTemplate&&iP(this.element.id+"_dateHeaderTemplate"),""!==e.dateHeaderTemplateName&&iP(this.element.id+"_"+e.dateHeaderTemplateName+"dateHeaderTemplate"),this.cellTemplate&&iP(this.element.id+"_cellTemplate"),""!==e.cellTemplateName&&iP(this.element.id+"_"+e.cellTemplateName+"cellTemplate"),this.resourceHeaderTemplate&&iP(this.element.id+"_resourceHeaderTemplate"),""!==e.resourceHeaderTemplateName&&iP(this.element.id+"_"+e.resourceHeaderTemplateName+"resourceHeaderTemplate"),this.timeScale.minorSlotTemplate&&iP(this.element.id+"_minorSlotTemplate"),this.timeScale.majorSlotTemplate&&iP(this.element.id+"_majorSlotTemplate"))}},{key:"updateEventTemplates",value:function(){var e=this.viewCollections[this.viewIndex];"Agenda"!==e.option&&"MonthAgenda"!==e.option&&"TimelineYear"!==e.option||this.updateLayoutTemplates()}},{key:"resetEventTemplates",value:function(){var e=this.viewCollections[this.activeView.viewIndex];this.eventSettings.template&&($R[this.element.id+"_eventTemplate"]=[]),""!==e.eventTemplateName&&($R[this.element.id+"_"+e.eventTemplateName+"eventTemplate"]=[]),"Agenda"!==e.option&&"MonthAgenda"!==e.option&&"TimelineYear"!==e.option||this.resetLayoutTemplates()}},{key:"initializeResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.resources.length>0?(this.resourceBase=new jq(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(e))}},{key:"renderElements",value:function(e){if(e)return this.initializeView(this.currentView),void this.eventWindow.refresh();this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new NH(this)),this.renderTableContainer(),(AR.isDevice||AR.isTouch)&&(this.scheduleTouchModule=new BH(this)),this.initializeView(this.currentView),this.destroyPopups(),this.initializePopups()}},{key:"validateDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedDate,t=e instanceof Date?new Date(e.getTime()):new Date(e),i=this.minDate instanceof Date?new Date(this.minDate.getTime()):new Date(this.minDate),n=this.maxDate instanceof Date?new Date(this.maxDate.getTime()):new Date(this.maxDate);if(!(i<=n))throw Error("minDate should be equal or less than maxDate");t<i&&(t=i),t>n&&(t=n),this.setScheduleProperties({selectedDate:new Date(""+t),minDate:new Date(""+i),maxDate:new Date(""+n)})}},{key:"getViewIndex",value:function(e){for(var t=0;t<this.viewCollections.length;t++)if(this.viewCollections[t].option===e)return t;return-1}},{key:"setViewOptions",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.viewOptions={},this.viewCollections=[];var n=this.viewIndex,r=0;this.viewIndex=-1;var a,o=_createForOfIteratorHelper(this.views);try{for(o.s();!(a=o.n()).done;){var s=a.value,l="string"!=typeof s;"string"==typeof s?(e=s,this.currentView===e&&(t=e,this.viewIndex=r)):(e=s.option,s.isSelected&&(t=e,this.viewIndex=r));var c=DD({option:e},l?s:{}),u=e.charAt(0).toLowerCase()+e.slice(1);c.cellHeaderTemplateName=c.cellHeaderTemplate?c.option:"",c.dateHeaderTemplateName=c.dateHeaderTemplate?c.option:"",c.cellTemplateName=c.cellTemplate?c.option:"",c.resourceHeaderTemplateName=c.resourceHeaderTemplate?c.option:"",c.eventTemplateName=c.eventTemplate?c.option:"",RD(c.firstDayOfWeek)||0!==c.firstDayOfWeek||delete c.firstDayOfWeek,RD(c.interval)||1!==c.interval||delete c.interval,this.viewCollections.push(c),RD(this.viewOptions[u])?this.viewOptions[u]=[c]:this.viewOptions[u].push(c),r++}}catch(d){o.e(d)}finally{o.f()}if(!i&&t&&(this.setScheduleProperties({currentView:t}),this.onServerDataBind()),-1===this.viewIndex){var h=this.getViewIndex(this.currentView);this.viewIndex="string"==typeof this.views[0]||RD(n)||-1===n?-1===h?0:h:n}}},{key:"onServerDataBind",value:function(){this.bulkChanges&&this.bulkChanges.selectedDate&&(this.bulkChanges.selectedDate=this.bulkChanges.selectedDate),this.serverDataBind()}},{key:"getActiveViewOptions",value:function(){var e=this.viewCollections[this.viewIndex],t=DD({dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,cellHeaderTemplate:this.cellHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,firstDayOfWeek:this.firstDayOfWeek,workDays:this.viewCollections[this.viewIndex].workDays?[]:this.workDays,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:{enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},group:{byDate:this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView},headerRows:this.headerRows,orientation:"Horizontal"},e,void 0,!0);return 0!==this.firstDayOfWeek&&e.firstDayOfWeek&&this.firstDayOfWeek!==e.firstDayOfWeek&&(t.firstDayOfWeek=this.firstDayOfWeek),t}},{key:"initializeDataModule",value:function(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new jH(this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new Oq(this)}},{key:"setEditorTitles",value:function(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}}},{key:"initializeView",value:function(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)}},{key:"initializeTemplates",value:function(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate)}},{key:"initializePopups",value:function(){this.eventWindow=new gq(this),this.quickPopup=new $U(this)}},{key:"getDayNames",value:function(e){var t,i=[];t="en"===this.locale||"en-US"===this.locale?TD("days.stand-alone."+e,pR(this.getCalendarMode())):TD("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+e,lR);for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];i.push(TD(a,t))}return i}},{key:"setCldrTimeFormat",value:function(){this.timeFormat="en"===this.locale||"en-US"===this.locale?TD("timeFormats.short",pR(this.getCalendarMode())):TD("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",lR)}},{key:"getCalendarMode",value:function(){return this.calendarMode.toLowerCase()}},{key:"getTimeString",value:function(e){return this.globalize.formatDate(e,{format:this.timeFormat,type:"time",calendar:this.getCalendarMode()}).toLocaleUpperCase()}},{key:"getDateTime",value:function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)}},{key:"setCalendarMode",value:function(){this.calendarUtil="Islamic"===this.calendarMode?new UH:new HH}},{key:"setScheduleProperties",value:function(e){this.allowServerDataBinding=!1,this.setProperties(e,!0),this.allowServerDataBinding=!0}},{key:"changeView",value:function(e,t,i,n){var r=this;if(RD(n)&&(n=this.getViewIndex(e)),!(!i&&n===this.viewIndex||n<0)){this.viewIndex=n;var a={requestType:"viewNavigate",cancel:!1,event:t};this.trigger("actionBegin",a,(function(i){i.cancel||r.trigger("navigating",{action:"view",cancel:!1,previousView:r.currentView,currentView:e,viewIndex:r.viewIndex},(function(i){i.cancel||(r.viewIndex=i.viewIndex,r.setScheduleProperties({currentView:e}),r.headerModule&&(r.headerModule.updateActiveView(),r.headerModule.setCalendarDate(r.selectedDate),r.headerModule.setCalendarView()),r.initializeView(r.currentView),r.onServerDataBind(),r.animateLayout(),a={requestType:"viewNavigate",cancel:!1,event:t},r.trigger("actionComplete",a))}))}))}}},{key:"changeDate",value:function(e,t){var i=this,n={requestType:"dateNavigate",cancel:!1,event:t};this.trigger("actionBegin",n,(function(r){r.cancel||i.trigger("navigating",{action:"date",cancel:!1,previousDate:i.selectedDate,currentDate:e},(function(r){r.cancel||(i.uiStateValues.isInitial=!!i.activeView.isTimelineView()||i.uiStateValues.isInitial,i.validateDate(e),i.headerModule&&i.headerModule.setCalendarDate(e),i.initializeView(i.currentView),i.onServerDataBind(),i.animateLayout(),n={requestType:"dateNavigate",cancel:!1,event:t},i.trigger("actionComplete",n))}))}))}},{key:"resetScrollTop",value:function(){var e=this.element.querySelector(".e-resource-column-wrap"),t=this.element.querySelector(".e-content-wrap");RD(t)||(t.scrollTop=0),RD(e)||(e.scrollTop=0)}},{key:"isMinMaxDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedDate;return e.getTime()>=this.minDate.getTime()&&e.getTime()<=this.maxDate.getTime()}},{key:"isSelectedDate",value:function(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)}},{key:"getCurrentTime",value:function(){if(this.timezone){var e=(new Date).getTimezoneOffset();return this.tzModule.convert(new Date,e,this.timezone)}return new Date}},{key:"getNavigateView",value:function(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView||"TimelineYear"===this.currentView?"TimelineDay":"Agenda":"Day"}},{key:"animateLayout",value:function(){this.activeView.element&&new oM({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)}},{key:"requiredModules",value:function(){var e=[];this.setViewOptions(!0);for(var t=0,i=Object.keys(this.viewOptions);t<i.length;t++){var n=i[t];n="timelineDay"===n||"timelineWeek"===n||"timelineWorkWeek"===n?"timelineViews":n,e.push({member:n,args:[this]})}return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),e.push({member:"excelExport",args:[this]}),e.push({member:"iCalendarExport",args:[this]}),e.push({member:"iCalendarImport",args:[this]}),e.push({member:"print",args:[this]}),e}},{key:"preRender",value:function(){this.isAdaptive=AR.isDevice,this.globalize=new hR(this.locale),this.tzModule=new qH,this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1},this.activeCellsData={startTime:this.getCurrentTime(),endTime:this.getCurrentTime(),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new PM(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()}},{key:"getDefaultLocale",value:function(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",ok:"Ok",yes:"Yes",no:"No",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At"}}},{key:"wireEvents",value:function(){OR.add(window,"resize",this.onScheduleResize,this),OR.add(window,"orientationchange",this.onScheduleResize,this),OR.add(document,AR.touchStartEvent,this.onDocumentClick,this)}},{key:"removeSelectedClass",value:function(){var e,t=this.getSelectedElements(),i=_createForOfIteratorHelper(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}}catch(r){i.e(r)}finally{i.f()}_P(t,"e-selected-cell")}},{key:"addSelectedClass",value:function(e,t){var i,n=_createForOfIteratorHelper(e);try{for(n.s();!(i=n.n()).done;)i.value.setAttribute("aria-selected","true")}catch(r){n.e(r)}finally{n.f()}wP(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())}},{key:"selectCell",value:function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)}},{key:"getAllDayRow",value:function(){return this.element.querySelector(".e-all-day-row")}},{key:"getContentTable",value:function(){return this.activeView.element.querySelector(".e-content-table tbody")}},{key:"getTableRows",value:function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))}},{key:"getWorkCellElements",value:function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))}},{key:"getIndexOfDate",value:function(e,t){return e.map(Number).indexOf(+t)}},{key:"isAllDayCell",value:function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable&&!(this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option))}},{key:"getDateFromElement",value:function(e){var t=e.getAttribute("data-date");if(!RD(t)){var i=parseInt(t,10),n=new Date(i);if(this.isServerRenderer()){var r=new Date(+n+6e4*n.getTimezoneOffset());return new Date(r.getTime()+6e4*(r.getTimezoneOffset()-n.getTimezoneOffset()))}return n}}},{key:"getMsFromDate",value:function(e){return this.isServerRenderer()?new Date(+e-6e4*e.getTimezoneOffset()).getTime():e.getTime()}},{key:"getTargetElement",value:function(e,t,i){var n,r=document.elementFromPoint(t,i);return r&&(n=r.closest(e)),n?[n]:null}},{key:"getCellHeaderTemplate",value:function(){return this.cellHeaderTemplateFn}},{key:"getCellTemplate",value:function(){return this.cellTemplateFn}},{key:"getDateHeaderTemplate",value:function(){return this.dateHeaderTemplateFn}},{key:"getMajorSlotTemplate",value:function(){return this.majorSlotTemplateFn}},{key:"getMinorSlotTemplate",value:function(){return this.minorSlotTemplateFn}},{key:"getAppointmentTemplate",value:function(){return this.appointmentTemplateFn}},{key:"getEventTooltipTemplate",value:function(){return this.eventTooltipTemplateFn}},{key:"getHeaderTooltipTemplate",value:function(){return this.headerTooltipTemplateFn}},{key:"getEditorTemplate",value:function(){return this.editorTemplateFn}},{key:"getQuickInfoTemplatesHeader",value:function(){return this.quickInfoTemplatesHeaderFn}},{key:"getQuickInfoTemplatesContent",value:function(){return this.quickInfoTemplatesContentFn}},{key:"getQuickInfoTemplatesFooter",value:function(){return this.quickInfoTemplatesFooterFn}},{key:"getResourceHeaderTemplate",value:function(){return this.resourceHeaderTemplateFn}},{key:"getCssProperties",value:function(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"}}},{key:"removeNewEventElement",value:function(){var e=this.element.querySelector(".e-new-event");RD(e)||IP(e)}},{key:"getStartEndTime",value:function(e){if(!RD(e)&&""!==e){var t=bH(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null}},{key:"onDocumentClick",value:function(e){this.notify("document-click",{event:e})}},{key:"onScheduleResize",value:function(){RD(this.activeView)||(this.quickPopup&&this.quickPopup.onClosePopup(),("Month"===this.currentView||"Agenda"!==this.currentView&&"MonthAgenda"!==this.currentView&&!this.activeViewOptions.timeScale.enable||this.activeView.isTimelineView())&&(this.activeView.resetColWidth(),this.notify(pH,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.notify(dH,{})))}},{key:"templateParser",value:function(e){if(e)try{if(document.querySelectorAll(e).length)return tP(document.querySelector(e).innerHTML.trim())}catch(t){return tP(e)}}},{key:"getAnnocementString",value:function(e,t){var i=t||e[this.eventFields.subject]||this.eventSettings.fields.subject.default,n=this.globalize.formatDate(e[this.eventFields.startTime],{type:"dateTime",skeleton:"full",calendar:this.getCalendarMode()}),r=this.globalize.formatDate(e[this.eventFields.endTime],{type:"dateTime",skeleton:"full",calendar:this.getCalendarMode()});return i+" "+this.localeObj.getConstant("beginFrom")+" "+n+" "+this.localeObj.getConstant("endAt")+" "+r}},{key:"boundaryValidation",value:function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i}},{key:"unwireEvents",value:function(){OR.remove(window,"resize",this.onScheduleResize),OR.remove(window,"orientationchange",this.onScheduleResize),OR.remove(document,AR.touchStartEvent,this.onDocumentClick)}},{key:"getModuleName",value:function(){return"schedule"}},{key:"getPersistData",value:function(){return this.addOnPersist(["currentView","selectedDate"])}},{key:"onPropertyChanged",value:function(e,t){for(var i={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1},n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];switch(a){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),i.isView=!0;break;case"currentView":i.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":i.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange(this.activeView.getDateRangeText());break;case"showHeaderBar":this.destroyHeaderModule(),e.showHeaderBar&&(this.headerModule=new NH(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),this.notify(pH,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.notify(dH,{});break;case"showWeekend":case"workDays":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":i.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new hR(this.locale),this.localeObj=new PM(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),i.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=e.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),i.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=e.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),i.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),i.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),i.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=e.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),i.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(t.timezone);break;case"enableRtl":this.setRtlClass(),i.isRefresh=!0;break;case"rowAutoHeight":i.isLayout=!0;break;default:this.extendedPropertyChange(a,e,t,i)}}this.propertyChangeAction(i)}},{key:"propertyChangeAction",value:function(e){e.isRefresh?this.refresh():e.isResource?this.initializeResources(!0):e.isView?this.changeView(this.currentView,null,!0):e.isDate?this.changeDate(this.selectedDate):e.isLayout?this.initializeView(this.currentView):e.isDataManager&&this.renderModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",_P([this.element],"e-event-action")),this.renderModule.refreshDataManager())}},{key:"extendedPropertyChange",value:function(e,t,i,n){switch(e){case"width":case"height":this.notify("ui-update",{module:"scroll",properties:{width:t.width,height:t.height}});break;case"cssClass":i.cssClass&&_P([this.element],i.cssClass.split(" ")),t.cssClass&&wP([this.element],t.cssClass.split(" "));break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),n.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(t.eventSettings,i.eventSettings,n);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),t.allowKeyboardInteraction&&(this.keyboardInteractionModule=new VH(this));break;case"editorTemplate":RD(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(t.group,i.group,n);break;case"resources":n.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=t.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=t.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),n.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":this.notify(dH,{processedData:this.eventBase.processData(this.eventsData)});break;case"eventDragArea":this.notify(dH,{})}}},{key:"setRtlClass",value:function(){this.enableRtl?wP([this.element],"e-rtl"):_P([this.element],"e-rtl")}},{key:"refresh",value:function(){this.isServerRenderer()?(this.setEditorTitles(),this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new NH(this),this.renderModule.updateHeader()),this.destroyPopups(),this.initializePopups(),this.notify(pH,{cssProperties:this.getCssProperties()}),this.notify(dH,{})):(this.tempResourceCollection=this.resourceCollection,_get(_getPrototypeOf(i.prototype),"refresh",this).call(this),this.tempResourceCollection=null)}},{key:"onGroupSettingsPropertyChanged",value:function(e,t,i){for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];"headerTooltipTemplate"===a?this.headerTooltipTemplateFn=this.templateParser(e[a]):(i.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())}}},{key:"onEventSettingsPropertyChanged",value:function(e,t,i){for(var n=0,r=Object.keys(e);n<r.length;n++)switch(r[n]){case"dataSource":case"query":case"fields":this.initializeDataModule(),i.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),i.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new eq(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),i.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.eventWindow&&this.eventWindow.refresh();break;case"enableMaxHeight":case"enableIndicator":this.notify(dH,{processedData:this.eventBase.processData(this.eventsData)});break;case"ignoreWhitespace":i.isLayout=!0}}},{key:"destroyHeaderModule",value:function(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)}},{key:"destroyPopups",value:function(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)}},{key:"showSpinner",value:function(){dF(this.element)}},{key:"hideSpinner",value:function(){fF(this.element)}},{key:"setWorkHours",value:function(e,t,i,n){wP(this.getWorkHourCells(e,t,i,n),"e-work-hours")}},{key:"resetWorkHours",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeView.renderDates,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;_P(e&&t&&i?this.getWorkHourCells(e,t,i,n):[].slice.call(this.element.querySelectorAll(".e-work-hours")),"e-work-hours")}},{key:"getWorkHourCells",value:function(e,t,i,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];var r=this.getStartEndTime(t),a=this.getStartEndTime(i),o=this.getContentTable();if(RD(r)||RD(a)||!o)return[];r.setMilliseconds(0),a.setMilliseconds(0);var s=this.activeView.getStartHour();r<s&&(r=s);var l=this.activeView.getEndHour();a>l&&(a=l);var c,u=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,h=Math.round((r.getTime()-s.getTime())/u),d=Math.ceil((a.getTime()-s.getTime())/u),p=h,f=d,v=[],m=_createForOfIteratorHelper(e);try{for(m.s();!(c=m.n()).done;){var g=c.value;bH(g=this.getDateTime(g));var y=this.activeView.renderDates;RD(n)||!this.resourceBase||this.activeView.isTimelineView()||(y=this.resourceBase.lastResourceLevel[n].renderDates);var b=this.getIndexOfDate(y,g);if(b>=0){if(this.activeView.isTimelineView()){var k=Math.round((l.getTime()-s.getTime())/u);h=p+b*k,d=f+b*k}for(var C=h;C<d;C++)if(this.activeView.isTimelineView()){var w=RD(n)?0:n;v.push(o.rows[w].cells[C])}else if(RD(n))v.push(o.rows[C].cells[b]);else{var _=[].slice.call(o.rows[C].querySelectorAll('.e-work-cells[data-group-index="'+n+'"]'));v.push(_[b])}}}}catch(S){m.e(S)}finally{m.f()}return v}},{key:"getCellDetails",value:function(e){var t=e instanceof Array?e:[e],i=VD(t[0]),n=VD(t.slice(-1)[0]),r=this.getDateFromElement(i),a=this.getDateFromElement(n);if(!RD(r)&&!RD(a)){var o=this.activeView.isTimelineView()&&!RD(n.getAttribute("colSpan"))&&this.headerRows.length>0,s=o?parseInt(n.getAttribute("colSpan"),10):1,l={startTime:r,endTime:a=!this.activeViewOptions.timeScale.enable||o||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells")?CH(new Date(a.getTime()),s):this.activeView.getEndDateFromStartDate(a),isAllDay:this.isAllDayCell(i),element:e},c=i.getAttribute("data-group-index");return RD(c)||(l.groupIndex=parseInt(c,10)),l}}},{key:"getSelectedElements",value:function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))}},{key:"getResourceCollections",value:function(){return this.resourceCollection}},{key:"changeCurrentView",value:function(e,t){var i=this.getViewIndex(e),n=e.charAt(0).toLowerCase()+e.slice(1),r=this.viewOptions[n];r&&(i=this.viewCollections.indexOf(r[t||0])),-1!==i&&i!==this.viewIndex&&this.changeView(e,null,null,i)}},{key:"getResourcesByIndex",value:function(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(e<0||e>=this.resourceBase.lastResourceLevel.length)return;var t=this.resourceBase.lastResourceLevel[e],i={};return this.resourceBase.setResourceValues(i,e),{resource:t.resource,resourceData:t.resourceData,groupData:i}}}},{key:"expandResource",value:function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!1)}},{key:"collapseResource",value:function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!0)}},{key:"scrollTo",value:function(e,t){this.activeView.scrollToDate&&RD(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)}},{key:"scrollToResource",value:function(e,t){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(e,t)}},{key:"exportToICalendar",value:function(e,t){if(!this.iCalendarExportModule)throw Error("Inject ICalendarExport module");this.iCalendarExportModule.initializeCalendarExport(e,t)}},{key:"importICalendar",value:function(e){if(!this.iCalendarImportModule)throw Error("Inject ICalendarImport module");this.iCalendarImportModule.initializeCalendarImport(e)}},{key:"addEvent",value:function(e){this.crudModule.addEvent(e)}},{key:"exportToExcel",value:function(e){if(!this.excelExportModule)throw Error("Inject ExcelExport module");this.excelExportModule.initializeExcelExport(e||{})}},{key:"print",value:function(){if(!this.printModule)throw Error("Inject Print module");this.printModule.printScheduler()}},{key:"saveEvent",value:function(e,t){this.crudModule.saveEvent(e,t)}},{key:"deleteEvent",value:function(e,t){this.crudModule.deleteEvent(e,t)}},{key:"getEvents",value:function(e,t,i){var n=[];return n=i?this.eventBase.getProcessedEvents():this.eventsData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),n=this.eventBase.filterEventsByRange(n,e,t)}},{key:"getBlockEvents",value:function(e,t,i){var n=[];return n=i?this.eventBase.getProcessedEvents(this.blockData):this.blockData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),n=this.eventBase.filterEventsByRange(n,e,t)}},{key:"getOccurrencesByID",value:function(e){return this.eventBase.getOccurrencesByID(e)}},{key:"getOccurrencesByRange",value:function(e,t){return e=this.getDateTime(e),t=this.getDateTime(t),this.eventBase.getOccurrencesByRange(e,t)}},{key:"getCurrentViewDates",value:function(){return this.activeView?this.activeView.renderDates:[]}},{key:"setRecurrenceEditor",value:function(e){this.eventWindow.setRecurrenceEditor(e)}},{key:"getEventMaxID",value:function(){return this.eventBase.getEventMaxID()}},{key:"getDeletedOccurrences",value:function(e){return this.eventBase.getDeletedOccurrences(e)}},{key:"getCurrentViewEvents",value:function(){return this.eventsProcessed}},{key:"refreshEvents",value:function(){this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",_P([this.element],"e-event-action")),this.renderModule.refreshDataManager()}},{key:"getEventDetails",value:function(e){var t=(e=VD(e)).getAttribute("data-guid");return t?this.eventBase.getEventByGuid(t):{}}},{key:"isSlotAvailable",value:function(e,t,i){var n,r,a=this,o=this.activeEventData.event;if(e instanceof Date||"string"==typeof e?(n=e,r=t):(o=e,n=e[this.eventFields.startTime],r=e[this.eventFields.endTime],this.resourceBase&&(i=this.eventBase.getGroupIndexFromEvent(e))),RD(n)||RD(r))return!0;n=this.getDateTime(n),r=this.getDateTime(r);var s=this.eventBase.filterEvents(n,r);return!RD(i)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(s=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[i],s)),o&&(s=s.filter(o.Guid?function(e){return e.Guid!==o.Guid}:function(e){return e[a.eventFields.id]!==o[a.eventFields.id]})),!(s.length>0)}},{key:"openEditor",value:function(e,t,i,n){"Add"!==t||i?(e[this.eventFields.startTime]=this.getDateTime(e[this.eventFields.startTime]),e[this.eventFields.endTime]=this.getDateTime(e[this.eventFields.endTime])):(e.startTime=this.getDateTime(e.startTime),e.endTime=this.getDateTime(e.endTime),RD(e.element)||(e.element=VD(e.element))),this.currentAction=t,"Add"!==t&&(this.activeEventData.event=e),this.eventWindow.openEditor(e,t,i,n)}},{key:"closeEditor",value:function(){this.eventWindow&&this.eventWindow.dialogClose()}},{key:"closeQuickInfoPopup",value:function(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)}},{key:"addResource",value:function(e,t,i){this.resourceBase.addResource(e,t,i)}},{key:"removeResource",value:function(e,t){this.resourceBase.removeResource(e,t)}},{key:"destroy",value:function(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.unwireEvents(),this.destroyHeaderModule(),this.workCellAction.destroy(),this.inlineModule.destroy(),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.activeView&&(this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),_get(_getPrototypeOf(i.prototype),"destroy",this).call(this),IH(this.element);var e=["e-schedule"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),_P([this.element],e)}}]),i}(kM),Hq([QP("auto")],WU.prototype,"width",void 0),Hq([QP("auto")],WU.prototype,"height",void 0),Hq([QP(!0)],WU.prototype,"showHeaderBar",void 0),Hq([QP(!0)],WU.prototype,"showTimeIndicator",void 0),Hq([QP("Week")],WU.prototype,"currentView",void 0),Hq([QP(["Day","Week","WorkWeek","Month","Agenda"])],WU.prototype,"views",void 0),Hq([QP(new Date)],WU.prototype,"selectedDate",void 0),Hq([QP(new Date(1900,0,1))],WU.prototype,"minDate",void 0),Hq([QP(new Date(2099,11,31))],WU.prototype,"maxDate",void 0),Hq([QP()],WU.prototype,"dateFormat",void 0),Hq([QP("Gregorian")],WU.prototype,"calendarMode",void 0),Hq([QP(!0)],WU.prototype,"showWeekend",void 0),Hq([QP(0)],WU.prototype,"firstDayOfWeek",void 0),Hq([QP([1,2,3,4,5])],WU.prototype,"workDays",void 0),Hq([QP("00:00")],WU.prototype,"startHour",void 0),Hq([QP("24:00")],WU.prototype,"endHour",void 0),Hq([QP(!0)],WU.prototype,"allowResizing",void 0),Hq([ZP({},Cq)],WU.prototype,"workHours",void 0),Hq([ZP({},_q)],WU.prototype,"timeScale",void 0),Hq([QP(!0)],WU.prototype,"allowKeyboardInteraction",void 0),Hq([QP(!0)],WU.prototype,"allowDragAndDrop",void 0),Hq([QP()],WU.prototype,"dateHeaderTemplate",void 0),Hq([QP()],WU.prototype,"cellHeaderTemplate",void 0),Hq([QP()],WU.prototype,"cellTemplate",void 0),Hq([QP(!1)],WU.prototype,"readonly",void 0),Hq([QP(!0)],WU.prototype,"showQuickInfo",void 0),Hq([QP(!1)],WU.prototype,"allowInline",void 0),Hq([QP(!0)],WU.prototype,"allowMultiCellSelection",void 0),Hq([QP(!0)],WU.prototype,"allowMultiRowSelection",void 0),Hq([QP(!1)],WU.prototype,"quickInfoOnSelectionEnd",void 0),Hq([QP(!1)],WU.prototype,"showWeekNumber",void 0),Hq([QP(!1)],WU.prototype,"rowAutoHeight",void 0),Hq([QP()],WU.prototype,"editorTemplate",void 0),Hq([ZP({},Eq)],WU.prototype,"quickInfoTemplates",void 0),Hq([QP(7)],WU.prototype,"agendaDaysCount",void 0),Hq([QP(!0)],WU.prototype,"hideEmptyAgendaDays",void 0),Hq([QP(!0)],WU.prototype,"enableRecurrenceValidation",void 0),Hq([QP()],WU.prototype,"timezone",void 0),Hq([ZP({},Lq)],WU.prototype,"eventSettings",void 0),Hq([QP()],WU.prototype,"resourceHeaderTemplate",void 0),Hq([ZP({},Fq)],WU.prototype,"group",void 0),Hq([$P([],Vq)],WU.prototype,"resources",void 0),Hq([$P([],Aq)],WU.prototype,"headerRows",void 0),Hq([QP()],WU.prototype,"cssClass",void 0),Hq([QP()],WU.prototype,"eventDragArea",void 0),Hq([eM()],WU.prototype,"created",void 0),Hq([eM()],WU.prototype,"destroyed",void 0),Hq([eM()],WU.prototype,"cellClick",void 0),Hq([eM()],WU.prototype,"cellDoubleClick",void 0),Hq([eM()],WU.prototype,"moreEventsClick",void 0),Hq([eM()],WU.prototype,"hover",void 0),Hq([eM()],WU.prototype,"select",void 0),Hq([eM()],WU.prototype,"actionBegin",void 0),Hq([eM()],WU.prototype,"actionComplete",void 0),Hq([eM()],WU.prototype,"actionFailure",void 0),Hq([eM()],WU.prototype,"navigating",void 0),Hq([eM()],WU.prototype,"renderCell",void 0),Hq([eM()],WU.prototype,"eventClick",void 0),Hq([eM()],WU.prototype,"eventRendered",void 0),Hq([eM()],WU.prototype,"dataBinding",void 0),Hq([eM()],WU.prototype,"popupOpen",void 0),Hq([eM()],WU.prototype,"popupClose",void 0),Hq([eM()],WU.prototype,"dragStart",void 0),Hq([eM()],WU.prototype,"drag",void 0),Hq([eM()],WU.prototype,"dragStop",void 0),Hq([eM()],WU.prototype,"resizeStart",void 0),Hq([eM()],WU.prototype,"resizing",void 0),Hq([eM()],WU.prototype,"resizeStop",void 0),Hq([eM()],WU.prototype,"dataBound",void 0),WU=Hq([tM],WU));(GU=zU||(zU={})).getDayName=function(e,t){return e.getDayNames("abbreviated")[t.getDay()]},GU.getDate=function(e,t){return e.globalize.formatDate(t,{format:"d",calendar:e.getCalendarMode()})},GU.getTime=function(e,t){return e.isAdaptive?e.globalize.formatDate(t,"HH:mm"===e.timeFormat||"HH.mm"===e.timeFormat?{format:"H",calendar:e.getCalendarMode()}:{skeleton:"h",calendar:e.getCalendarMode()}):e.getTimeString(t)},GU.getTimelineDate=function(e,t){return RH(e.globalize.formatDate(t,{skeleton:"MMMd",calendar:e.getCalendarMode()})+", "+e.getDayNames("wide")[t.getDay()],"multiple")};var qq,Wq,zq,Gq,Yq,Kq,Xq,Jq,Qq,Zq,$q,eW=function(){function e(t){_classCallCheck2(this,e),this.parent=t}return _createClass(e,[{key:"isTimelineView",value:function(){return-1!==this.parent.currentView.indexOf("Timeline")}},{key:"getContentRows",value:function(){return[]}},{key:"serverRenderLayout",value:function(){}},{key:"createEventTable",value:function(e){var t=CP("div",{className:"e-event-table"});return AP(this.getEventRows(e),t),t}},{key:"getEventRows",value:function(e){for(var t,i=[],n=0;n<e;n++)t=CP("div",{className:"e-appointment-container"}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&t.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[n].groupIndex.toString()),i.push(t);return i}},{key:"collapseRows",value:function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(e.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(e.querySelector(".e-event-table")))}},{key:"createTableLayout",value:function(e){var t=CP("table",{className:"e-schedule-table "+(e||"")}),i=CP("tbody");return t.appendChild(i),t}},{key:"createColGroup",value:function(e,t){var i=t.length;t[0]&&t[0].colSpan&&(i=t.map((function(e){return e.colSpan})).reduce((function(e,t){return e+t})));for(var n=CP("colgroup"),r=0;r<i;r++)n.appendChild(CP("col"));TP([n],e)}},{key:"getScrollXIndent",value:function(e){return e.offsetHeight-e.clientHeight>0?AH():0}},{key:"scrollTopPanel",value:function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft}},{key:"scrollHeaderLabels",value:function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=function(t,n){var r,a,o=0,s=0,l=n?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft,c=_createForOfIteratorHelper(t);try{for(c.s();!(a=c.n()).done;){var u=a.value;if((s+=parseInt(u.getAttribute("colSpan"),10))>Math.floor(l/i)){r=u;break}o+=u.offsetWidth}}catch(h){c.e(h)}finally{c.f()}r.children[0].style[n?"right":"left"]=l-o+"px"},r=0,a=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];r<a.length;r++){var o=a[r],s=[].slice.call(this.element.querySelectorAll(o));if(s.length>0){var l,c=_createForOfIteratorHelper(s);try{for(c.s();!(l=c.n()).done;){l.value.children[0].style[this.parent.enableRtl?"right":"left"]=""}}catch(u){c.e(u)}finally{c.f()}n(s,this.parent.enableRtl)}}}},{key:"addAttributes",value:function(e,t){e.template&&AP(e.template,t),e.colSpan&&t.setAttribute("colspan",e.colSpan.toString()),e.className&&wP([t],e.className)}},{key:"getHeaderBarHeight",value:function(){var e=2;if(this.parent.headerModule&&(e+=xH(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){var t=this.parent.element.querySelector(".e-schedule-resource-toolbar");t&&(e+=t.offsetHeight)}return e}},{key:"renderPanel",value:function(e){"e-previous-panel"===e?TP([this.element],this.parent.element.querySelector(".e-table-container")):this.parent.element.querySelector(".e-table-container").appendChild(this.element)}},{key:"setPanel",value:function(e){this.element=e}},{key:"getPanel",value:function(){return this.element}},{key:"getDatesHeaderElement",value:function(){return this.element.querySelector(".e-date-header-container")}},{key:"getDateSlots",value:function(e,t){return[]}},{key:"generateColumnLevels",value:function(){return[]}},{key:"getColumnLevels",value:function(){return this.colLevels}},{key:"highlightCurrentTime",value:function(){}},{key:"startDate",value:function(){return this.renderDates[0]}},{key:"endDate",value:function(){return CH(this.renderDates[this.renderDates.length-1],1)}},{key:"getStartHour",value:function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return RD(e)&&(e=new Date(2e3,0,0,0)),e}},{key:"getEndHour",value:function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return RD(e)&&(e=new Date(2e3,0,0,0)),e}},{key:"isCurrentDate",value:function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)}},{key:"isCurrentMonth",value:function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()}},{key:"isWorkDay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parent.activeViewOptions.workDays;return t.indexOf(e.getDay())>=0}},{key:"isWorkHour",value:function(e,t,i,n){return!(RD(t)||RD(i)||(t.setMilliseconds(0),i.setMilliseconds(0),kH(e)<kH(t)||kH(e)>=kH(i)||!this.isWorkDay(e,n)))}},{key:"getRenderDates",value:function(e){var t=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView)for(var i=vH(bH(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0,r=7*this.parent.activeViewOptions.interval;n<r;n++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=CH(i,1);else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView)for(var a=vH(bH(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),o=0,s=7*this.parent.activeViewOptions.interval;o<s;o++)this.isWorkDay(a,e)&&t.push(a),a=CH(a,1);else{var l=bH(this.parent.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(l,e))&&t.push(l),l=CH(l,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t}},{key:"getNextPreviousDate",value:function(e){if("Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){if(this.parent.activeViewOptions.showWeekend){var t=this.parent.activeViewOptions.interval;return CH(this.parent.selectedDate,"next"===e?t:-t)}var i;if("next"===e)for(i=CH(this.renderDates.slice(-1)[0],1);!this.isWorkDay(i);)i=CH(i,1);else{i=CH(this.renderDates[0],-1);var n=0;do{this.isWorkDay(i)&&(n+=1),this.parent.activeViewOptions.interval!==n&&(i=CH(i,-1))}while(this.parent.activeViewOptions.interval!==n)}return i}return CH(this.parent.selectedDate,("next"===e?7:-7)*this.parent.activeViewOptions.interval)}},{key:"getLabelText",value:function(e){var t=e.charAt(0).toLowerCase()+e.substring(1);return this.parent.localeObj.getConstant(t)+" of "+RH(this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long",calendar:this.parent.getCalendarMode()}),"single")}},{key:"getDateRangeText",value:function(){return this.parent.isAdaptive?RH(this.parent.globalize.formatDate(this.parent.selectedDate,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single"):this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])}},{key:"formatDateRange",value:function(e,t){var i,n=this.parent.globalize,r=this.parent.getCalendarMode();if(e===t&&(t=null),!RD(this.parent.activeViewOptions.dateFormat)){return t?RH(n.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r})+" - "+n.formatDate(t,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),"multiple"):RH(n.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:r}),"multiple")}if(i="en"===this.parent.locale||"en-US"===this.parent.locale?TD("dateFormats.long",pR(r)):TD("main."+this.parent.locale+".dates.calendars."+r+".dateFormats.long",lR),!t)return RH(n.formatDate(e,{format:i,calendar:r}),"single");var a=i.trim().toLocaleLowerCase();return RH("d"===a.substr(0,1)?e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?n.formatDate(e,{format:"dd",calendar:r})+" - "+n.formatDate(t,{format:"dd MMMM yyyy",calendar:r}):n.formatDate(e,{format:"dd MMM",calendar:r})+" - "+n.formatDate(t,{format:"dd MMM yyyy",calendar:r}):n.formatDate(e,{format:"dd MMM yyyy",calendar:r})+" - "+n.formatDate(t,{format:"dd MMM yyyy",calendar:r}):"m"===a.substr(0,1)?e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?n.formatDate(e,{format:"MMMM dd",calendar:r})+" - "+n.formatDate(t,{format:"dd, yyyy",calendar:r}):n.formatDate(e,{format:"MMM dd",calendar:r})+" - "+n.formatDate(t,{format:"MMM dd, yyyy",calendar:r}):n.formatDate(e,{format:"MMM dd, yyyy",calendar:r})+" - "+n.formatDate(t,{format:"MMM dd, yyyy",calendar:r}):n.formatDate(e,{format:i,calendar:r})+" - "+n.formatDate(t,{format:i,calendar:r}),"multiple")}},{key:"getMobileDateElement",value:function(e,t){return CP("div",{className:t,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(e,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+RH(this.parent.globalize.formatDate(e,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"})}},{key:"setResourceHeaderContent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MH;if(this.parent.activeViewOptions.resourceHeaderTemplate){var n={resource:t.resource,resourceData:t.resourceData},r=this.parent.element.id+"_"+this.parent.activeViewOptions.resourceHeaderTemplateName+"resourceHeaderTemplate";AP([].slice.call(this.parent.getResourceHeaderTemplate()(n,this.parent,"resourceHeaderTemplate",r,!1)),e)}else e.appendChild(CP("div",{className:i,innerHTML:t.resourceData[t.resource.textField]}))}},{key:"renderResourceMobileLayout",value:function(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())}},{key:"addAutoHeightClass",value:function(e){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&wP([e],"e-auto-height")}},{key:"getColElements",value:function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))}},{key:"setColWidth",value:function(e){if(this.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody"),n=Math.ceil(i.offsetWidth/(t.length/2));if(t.forEach((function(e){return LP(e,{width:FD(n)})})),e.offsetHeight!==e.clientHeight){var r=this.parent.element.querySelector(".e-resource-column-wrap");RD(r)||LP(r,{height:FD(e.clientHeight)})}}}},{key:"resetColWidth",value:function(){var e,t=_createForOfIteratorHelper(this.getColElements());try{for(t.s();!(e=t.n()).done;){e.value.style.width=""}}catch(i){t.e(i)}finally{t.f()}}},{key:"getContentAreaElement",value:function(){return this.element.querySelector(".e-content-wrap")}},{key:"wireExpandCollapseIconEvents",value:function(){if(this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-resource-tree-icon")));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.clearEvents(i),OR.add(i,"click",this.parent.resourceBase.onTreeIconClick,this.parent.resourceBase)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"scrollToDate",value:function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.currentView)&&!RD(e)){var t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(bH(new Date(+e)).getTime())),n=t.querySelector('.e-work-cells[data-date="'.concat(i,'"]'));"Month"===this.parent.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.currentView&&n&&(t.scrollLeft=n.offsetLeft)}}}]),e}(),tW=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).viewClass="e-day-view",n.isInverseTableSelect=!0,n.baseCssClass="e-vertical-view",n}return _createClass(i,[{key:"addEventListener",value:function(){this.parent.on(pH,this.scrollUiUpdate,this),this.parent.on(dH,this.renderEvents,this)}},{key:"removeEventListener",value:function(){this.parent.off(pH,this.scrollUiUpdate),this.parent.off(dH,this.renderEvents)}},{key:"renderEvents",value:function(){this.parent.activeViewOptions.timeScale.enable?new KU(this.parent).renderAppointments():new XU(this.parent).renderAppointments(),this.parent.notify("events-loaded",{})}},{key:"onContentScroll",value:function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.notify("virtual-scroll",e),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,RD(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide()}},{key:"onApaptiveMove",value:function(e){this.parent.uiStateValues.action&&e.preventDefault()}},{key:"onApaptiveScroll",value:function(e){this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop}},{key:"scrollLeftPanel",value:function(e){var t=this.getLeftPanelElement();RD(t)||(t.scrollTop=e.scrollTop)}},{key:"scrollUiUpdate",value:function(e){var t=this.getHeaderBarHeight(),i=this.getLeftPanelElement(),n=this.getScrollableElement(),r=this.getDatesHeaderElement(),a=this.parent.element.offsetHeight-t-r.offsetHeight;this.setColWidth(n),this.setContentHeight(n,i,a);var o=AH();r.firstElementChild.style[e.cssProperties.rtlBorder]="",r.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(r.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",r.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(r.firstElementChild.style[e.cssProperties.border]="",r.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(i&&(i.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime()}},{key:"setContentHeight",value:function(e,t,i){!this.parent.isAdaptive||this.isTimelineView()||this.parent.isServerRenderer()?(RD(t)||(t.style.height="auto"===this.parent.height?"auto":FD(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.height?"auto":FD(i)):e.style.height="auto"===this.parent.height?"auto":FD(i)}},{key:"scrollToWorkHour",value:function(){if(this.parent.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}}},{key:"scrollToHour",value:function(e,t){var i=this.parent.getStartEndTime(e);!RD(i)&&RD(t)&&(this.getScrollableElement().scrollTop=this.getTopFromDateTime(i))}},{key:"generateColumnLevels",value:function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];t=[this.getDateSlots(i.renderDates,i.workDays,i.resourceData[i.resource.startHourField],i.resourceData[i.resource.endHourField])]}}else t.push(e);return this.colLevels=t,t}},{key:"getDateSlots",value:function(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parent.workHours.start,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.parent.workHours.end,a=[],o=this.parent.getStartEndTime(n),s=this.parent.getStartEndTime(r),l=_createForOfIteratorHelper(e);try{for(l.s();!(i=l.n()).done;){var c=i.value,u=["e-header-cells"];this.isCurrentDate(c)&&u.push("e-current-day"),a.push({date:c,type:"dateHeader",className:u,colSpan:1,workDays:t,startHour:new Date(+o),endHour:new Date(+s)})}}catch(h){l.e(h)}finally{l.f()}return a}},{key:"isWorkHourRange",value:function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()}},{key:"highlightCurrentTime",value:function(){var e=this;if(!(this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option)){if(this.parent.isServerRenderer()){var t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&_P(t,"e-current-day");var i,n='.e-date-header[data-date="'+new Date((new Date).setHours(0,0,0,0)).getTime().toString()+'"]',r=_createForOfIteratorHelper(t=[].slice.call(this.element.querySelectorAll(n)));try{for(r.s();!(i=r.n()).done;){wP([i.value],"e-current-day")}}catch(a){r.e(a)}finally{r.f()}}this.parent.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())&&this.getCurrentTimeIndicatorIndex().length>0?([].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),RD(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4))):this.clearCurrentTimeIndicatorTimer()}}},{key:"getCurrentTimeIndicatorIndex",value:function(){var e=[];if(!RD(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t,i=0,n=_createForOfIteratorHelper(this.parent.resourceBase.lastResourceLevel);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=this.parent.getIndexOfDate(r.renderDates,bH(this.parent.getCurrentTime()));a>=0&&e.push(this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*a+i:i+a),i+=this.parent.activeViewOptions.group.byDate?1:r.renderDates.length}}catch(s){n.e(s)}finally{n.f()}}else{var o=this.parent.getIndexOfDate(this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates,bH(this.parent.getCurrentTime()));o>=0&&e.push(o)}return e}},{key:"clearCurrentTimeIndicatorTimer",value:function(){RD(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())}},{key:"removeCurrentTimeIndicatorElements",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time")));try{for(t.s();!(e=t.n()).done;){IP(e.value)}}catch(i){t.e(i)}finally{t.f()}}},{key:"changeCurrentTimePosition",value:function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),n=FD(i),r=Math.floor(i/t.cells[0].offsetHeight);if(!RD(r)&&!isNaN(r)){for(var a=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),o=0,s=e[0];o<s;o++)a[o].appendChild(CP("div",{className:"e-previous-timeline",styles:"top:"+n}));var l,c=_createForOfIteratorHelper(e);try{for(c.s();!(l=c.n()).done;){a[l.value].appendChild(CP("div",{className:"e-current-timeline",styles:"top:"+n}))}}catch(p){c.e(p)}finally{c.f()}var u=CP("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+n}),h=this.getLeftPanelElement(),d=[].slice.call(h.querySelectorAll("tr"));r<=d.length&&(_P(h.querySelectorAll(".e-hide-childs"),"e-hide-childs"),wP([d[r].lastElementChild],"e-hide-childs"),TP([u],h),u.style.top=FD(u.offsetTop-u.offsetHeight/2))}}}},{key:"getTopFromDateTime",value:function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval}},{key:"getWorkCellHeight",value:function(){return this.element.querySelector(".e-work-cells").offsetHeight}},{key:"getTdContent",value:function(e,t,i){var n,r=CP("div"),a="",o=this.parent.element.id+"_",s=e;switch(t){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){a="dateHeaderTemplate";var l={date:s,type:t},c=this.parent.activeViewOptions.dateHeaderTemplateName;n=[].slice.call(this.parent.getDateHeaderTemplate()(l,this.parent,a,o+c+a,!1))}else r.innerHTML=this.parent.activeView.isTimelineView()?'<span class="e-header-date e-navigate">'.concat(zU.getTimelineDate(this.parent,e),"</span>"):'<div class="e-header-day">'.concat(RH(zU.getDayName(this.parent,e),"single"),'</div><div class="e-header-date e-navigate" role="link">').concat(zU.getDate(this.parent,e),"</div>"),n=[].slice.call(r.childNodes);break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){a="majorSlotTemplate";var u={date:s,type:t};n=[].slice.call(this.parent.getMajorSlotTemplate()(u,this.parent,a,o+a,!1))}else r.innerHTML="<span>".concat(zU.getTime(this.parent,e),"</span>"),n=[].slice.call(r.childNodes);break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){a="minorSlotTemplate";var h={date:s,type:t};n=[].slice.call(this.parent.getMinorSlotTemplate()(h,this.parent,a,o+a,!1))}else r.innerHTML="&nbsp;",n=[].slice.call(r.childNodes);break;case"alldayCells":if(this.parent.activeViewOptions.cellTemplate){var d=this.parent.activeViewOptions.cellTemplateName;a="cellTemplate";var p={date:s,type:t,groupIndex:i};n=[].slice.call(this.parent.getCellTemplate()(p,this.parent,a,o+d+a,!1))}}return n}},{key:"serverRenderLayout",value:function(){this.setPanel(this.parent.element.querySelector(".e-table-wrap")),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+PH)&&this.renderResourceMobileLayout();var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells")));try{for(t.s();!(e=t.n()).done;){var i=e.value;OR.clearEvents(i),this.wireMouseEvents(i)}}catch(l){t.e(l)}finally{t.f()}var n,r=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells")));try{for(r.s();!(n=r.n()).done;){var a=n.value;OR.clearEvents(a),this.wireCellEvents(a)}}catch(l){r.e(l)}finally{r.f()}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var o=this.element.querySelector(".e-content-wrap"),s=this.element.querySelector(".e-content-table tbody");OR.clearEvents(s),this.wireCellEvents(s),OR.clearEvents(o),OR.add(o,"scroll",this.onContentScroll,this),OR.add(o,AR.touchMoveEvent,this.onApaptiveMove,this),this.wireExpandCollapseIconEvents(),this.parent.notify("content-ready",{})}},{key:"renderLayout",value:function(e){if(this.parent.isServerRenderer())return this.colLevels=this.generateColumnLevels(),void(this.parent.resourceBase&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.activeView.isTimelineView()&&this.parent.resourceBase.setRenderedResources());this.setPanel(CP("div",{className:"e-table-wrap"}));var t=[this.baseCssClass,this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||wP([this.element],["e-timescale-disable",this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&t.push("e-virtual-scroll"),this.parent.eventSettings.ignoreWhitespace&&t.push("e-ignore-whitespace"),this.renderPanel(e),wP([this.element],t),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+PH)&&this.renderResourceMobileLayout(),this.parent.notify("content-ready",{}),this.parent.updateLayoutTemplates()}},{key:"renderHeader",value:function(){var e=CP("tr"),t=CP("td");if(t.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var i=CP("td",{className:"e-left-indent"});i.appendChild(this.renderLeftIndent()),e.appendChild(i)}e.appendChild(t),TP([e],this.element.querySelector("tbody"))}},{key:"renderContent",value:function(){var e=CP("tr"),t=CP("td");if(this.parent.isAdaptive){t.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var i=CP("div",{className:"e-scroll-container"});this.parent.activeViewOptions.timeScale.enable&&i.appendChild(this.renderTimeCells()),i.appendChild(this.renderContentArea()),t.appendChild(i),OR.add(i,"scroll",this.onApaptiveScroll,this),OR.add(i,AR.touchMoveEvent,this.onApaptiveMove,this),e.appendChild(t)}else{if(t.appendChild(this.renderContentArea()),this.parent.activeViewOptions.timeScale.enable){var n=CP("td");n.appendChild(this.renderTimeCells()),e.appendChild(n)}e.appendChild(t)}this.element.querySelector("tbody").appendChild(e)}},{key:"renderLeftIndent",value:function(){for(var e,t,i,n,r=CP("div",{className:"e-left-indent-wrap"}),a=this.createTableLayout(),o=CP("tr"),s=this.colLevels.length,l=0;l<s;l++){var c=o.cloneNode(),u={className:[this.colLevels[l][0]&&this.colLevels[l][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==u.className.indexOf("e-header-cells")){u.className.push("e-week-number");var h=(e=this.renderDates.slice(-1)[0],t=this.parent.firstDayOfWeek,i=void 0,n=void 0,i=vH(e,t),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6),new Date(n.getTime())),d=gH("Day"===this.parent.currentView?h:this.renderDates.slice(-1)[0]);u.template=[CP("span",{innerHTML:""+d,attrs:{title:this.parent.localeObj.getConstant("week")+" "+d}})]}c.appendChild(this.createTd(u)),a.querySelector("tbody").appendChild(c)}var p=o.cloneNode(),f=CP("div",{attrs:{tabindex:"0",role:"list",title:"Expand-all-day-section","aria-disabled":"false","aria-label":"Expand section"},className:"e-all-day-appointment-section e-appointment-expand e-icons e-disable"}),v=this.createTd({className:["e-all-day-cells"],type:"emptyCells"});return v.appendChild(f),p.appendChild(v),a.querySelector("tbody").appendChild(p),r.appendChild(a),r}},{key:"renderDatesHeader",value:function(){var e=CP("div",{className:"e-date-header-container"}),t=CP("div",{className:"e-date-header-wrap"});e.appendChild(t);var i=this.createTableLayout(),n=CP("tr"),r=this.colLevels.length,a=this.colLevels[r-1];this.createColGroup(i,a);for(var o=0;o<r;o++){var s=n.cloneNode();wP([s],"e-header-row");for(var l=this.colLevels[o],c=0;c<l.length;c++)s.appendChild(this.createTd(l[c]));i.querySelector("tbody").appendChild(s)}return this.createAllDayRow(i,a),t.appendChild(i),e}},{key:"createAllDayRow",value:function(e,t){var i=CP("tr");wP([i],"e-all-day-row");for(var n=0;n<t.length;n++){var r=DD({},t[n]);r.className=["e-all-day-cells"],r.type="alldayCells";var a=this.createTd(r);a.setAttribute("data-date",r.date.getTime().toString()),RD(r.groupIndex)||a.setAttribute("data-group-index",""+r.groupIndex),this.wireCellEvents(a),i.appendChild(a)}e.querySelector("tbody").appendChild(i);var o=CP("thead");o.appendChild(this.createEventWrapper("allDay")),TP([o],e)}},{key:"createTd",value:function(e){var t=CP("td");if(this.addAttributes(e,t),e.date&&e.type){var i=this.getTdContent(e.date,e.type,e.groupIndex);i&&i.length&&AP(i,t)}return this.parent.isMinMaxDate(bH(new Date(""+e.date)))||wP([t],"e-disable-dates"),"resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type&&e.className.indexOf("e-header-cells")>=0&&(t.setAttribute("data-date",e.date.getTime().toString()),RD(e.groupIndex)||t.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(t)),this.parent.trigger("renderCell",{elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex}),t}},{key:"wireCellEvents",value:function(e){OR.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)}},{key:"wireMouseEvents",value:function(e){OR.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||OR.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)}},{key:"renderTimeCells",value:function(){var e=this,t=CP("div",{className:"e-time-cells-wrap"}),i=this.createTableLayout(),n=CP("tr");return this.getTimeSlotRows((function(t){t.type=t.first?"majorSlot":"minorSlot",t.className=t.last?["e-time-cells","e-time-slots"]:["e-time-slots"];var r=n.cloneNode();return r.appendChild(e.createTd({date:t.date,type:t.type,className:t.className})),i.querySelector("tbody").appendChild(r),t})),t.appendChild(i),t}},{key:"renderContentArea",value:function(){var e=CP("div",{className:"e-content-wrap"}),t=this.createTableLayout("e-content-table");return this.addAutoHeightClass(t),this.createColGroup(t,this.colLevels.slice(-1)[0]),this.renderContentTable(t),e.appendChild(t),this.wireCellEvents(t.querySelector("tbody")),OR.add(e,"scroll",this.onContentScroll,this),OR.add(e,AR.touchMoveEvent,this.onApaptiveMove,this),e}},{key:"renderContentTable",value:function(e){var t=this,i=CP("tr",{attrs:{role:"row"}}),n=CP("td",{attrs:{role:"gridcell","aria-selected":"false"}}),r=e.querySelector("tbody");this.getTimeSlotRows((function(e){var a,o=i.cloneNode(),s=_createForOfIteratorHelper(t.colLevels[t.colLevels.length-1]);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=t.createContentTd(l,e,n);o.appendChild(c)}}catch(u){s.e(u)}finally{s.f()}return r.appendChild(o),e})),this.renderContentTableHeader(e)}},{key:"createContentTd",value:function(e,t,i){var n=i.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString());var r=this.getContentTdClass(t);this.parent.isMinMaxDate(bH(new Date(""+e.date)))||r.push("e-disable-dates");var a=bH(new Date(""+e.date));yH(a,kH(t.date));var o="workCells";if(-1!==e.className.indexOf("e-parent-node")&&(r.push("e-resource-group-cells"),o="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(a,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(a,e.workDays))&&r.push("e-work-hours"),wP([n],r),this.parent.activeViewOptions.cellTemplate){var s={date:a,type:o,groupIndex:e.groupIndex},l=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate";AP([].slice.call(this.parent.getCellTemplate()(s,this.parent,"cellTemplate",l,!1)),n)}return n.setAttribute("data-date",a.getTime().toString()),(!RD(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&n.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex)),this.parent.trigger("renderCell",{elementType:o,element:n,date:a,groupIndex:e.groupIndex}),n}},{key:"getContentTdClass",value:function(e){return e.last?["e-work-cells"]:["e-work-cells","e-alternate-cells"]}},{key:"renderContentTableHeader",value:function(e){var t=CP("thead");t.appendChild(this.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&t.appendChild(this.createEventWrapper("timeIndicator")),TP([t],e)}},{key:"createEventWrapper",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=CP("tr"),i=this.colLevels.slice(-1)[0],n=0,r=i.length;n<r;n++){var a=i[n],o=CP("td",{className:"allDay"===e?"e-all-day-appointment-wrapper":"timeIndicator"===e?"e-timeline-wrapper":"e-day-wrapper",attrs:{"data-date":a.date.getTime().toString()}});if(RD(a.groupIndex)||o.setAttribute("data-group-index",a.groupIndex.toString()),""===e){var s=CP("div",{id:"e-appointment-wrapper-"+n.toString(),className:"e-appointment-wrapper"});o.appendChild(s)}t.appendChild(o)}return t}},{key:"getScrollableElement",value:function(){return!this.parent.isAdaptive||this.isTimelineView()||this.parent.isServerRenderer()?this.getContentAreaElement():this.element.querySelector(".e-scroll-container")}},{key:"getLeftPanelElement",value:function(){return this.element.querySelector(".e-time-cells-wrap")}},{key:"getEndDateFromStartDate",value:function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i}},{key:"getTimeSlotRows",value:function(e){var t=[],i=this.getStartHour(),n=this.getEndHour(),r=6e4*this.parent.activeViewOptions.timeScale.interval,a=r/this.parent.activeViewOptions.timeScale.slotCount,o=Math.round(864e5/a),s=i.getTime(),l=n.getTime();s!==l&&(o=Math.abs(l-s)/a-(new Date(l).getTimezoneOffset()-new Date(s).getTimezoneOffset())/(60/this.parent.activeViewOptions.timeScale.slotCount)),this.parent.activeViewOptions.timeScale.enable||(o=1);for(var c,u,h,d=this.parent.getStartEndTime(this.parent.workHours.start),p=this.parent.getStartEndTime(this.parent.workHours.end),f=0;f<o;f++){var v=new Date(s+a*f);if(c=v,u=void 0,h=void 0,u=new Date(c.getFullYear(),0,1),h=new Date(c.getFullYear(),6,1),c.getTimezoneOffset()<Math.max(u.getTimezoneOffset(),h.getTimezoneOffset())||new Date(s).getTimezoneOffset()!==v.getTimezoneOffset()){var m=new Date(s).getTimezoneOffset()-v.getTimezoneOffset();v=new Date(v.getTime()-6e4*m)}var g=f%(r/a),y={date:new Date(""+v),startHour:d,endHour:p,first:0===g,middle:g<this.parent.activeViewOptions.timeScale.slotCount-1,last:g===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(y),t.push(y)}return t}},{key:"getModuleName",value:function(){return"verticalView"}},{key:"destroy",value:function(){if(!this.parent.isDestroyed&&(this.clearCurrentTimeIndicatorTimer(),this.element)){var e=this.getContentAreaElement();e&&OR.remove(e,"scroll",this.onContentScroll),this.parent.resourceBase&&this.parent.resourceBase.destroy(),IP(this.element),this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues()}}}]),i}(eW),iW=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).dayNameFormat="wide",n.viewClass="e-month-view",n.isInverseTableSelect=!1,n.monthDates={},n}return _createClass(i,[{key:"addEventListener",value:function(){this.parent.on(pH,this.onScrollUIUpdate,this),this.parent.on(dH,this.onDataReady,this),this.parent.on("cellClick",this.onCellClick,this)}},{key:"removeEventListener",value:function(){this.parent.off(pH,this.onScrollUIUpdate),this.parent.off(dH,this.onDataReady),this.parent.off("cellClick",this.onCellClick)}},{key:"onDataReady",value:function(e){new XU(this.parent).renderAppointments(),this.parent.notify("events-loaded",{})}},{key:"onCellClick",value:function(e){}},{key:"onContentScroll",value:function(e){this.parent.removeNewEventElement(),this.parent.notify("virtual-scroll",e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target)}},{key:"scrollLeftPanel",value:function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)}},{key:"getLeftPanelElement",value:function(){return this.element.querySelector(".e-week-number-wrapper")}},{key:"onScrollUIUpdate",value:function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),r=this.parent.element.offsetHeight-t-i.offsetHeight,a=this.getLeftPanelElement();this.setContentHeight(n,a,r);var o=AH();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",i.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition)a&&(a.scrollTop=e.scrollPosition.top),n.scrollTop=e.scrollPosition.top,n.scrollLeft=e.scrollPosition.left;else{var s=document.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.selectedDate)+'"]');n.scrollLeft=null!==s?s.offsetLeft:0}}},{key:"setContentHeight",value:function(e,t,i){e.style.height="auto","Month"===this.parent.currentView&&(e.style.height=FD(i)),t&&("MonthAgenda"===this.parent.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=FD(i-this.getScrollXIndent(e)))}},{key:"generateColumnLevels",value:function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),"MonthAgenda"===this.parent.currentView&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots(i.renderDates,i.workDays)]}}else e.push(t);return this.colLevels=e,e}},{key:"getDateSlots",value:function(e,t){for(var i=this.parent.activeViewOptions.showWeekend?7:t.length,n=[],r=0;r<i;r++){var a=["e-header-cells"],o=e.slice(0,i).map((function(e){return e.getDay()}));this.isCurrentMonth(this.parent.selectedDate)&&o.indexOf(this.parent.getCurrentTime().getDay())===r&&a.push("e-current-day"),n.push({date:e[r],type:"monthDay",className:a,colSpan:1,workDays:t})}return n}},{key:"getDayNameFormat",value:function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"}},{key:"serverRenderLayout",value:function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-current-day"));e.length>0&&_P(e,"e-current-day");var t=new Date((new Date).setHours(0,0,0,0)),i='.e-work-cells[data-date="'+t.getTime().toString()+'"]';if("Month"===this.parent.currentView||"MonthAgenda"===this.parent.currentView){(e=[].slice.call(this.parent.element.querySelectorAll(".e-current-date"))).length>0&&_P(e,"e-current-date");var n,r=_createForOfIteratorHelper([].slice.call(this.parent.element.querySelectorAll(i)));try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.cellIndex,s=[].slice.call(this.parent.element.querySelectorAll(".e-header-cells"))[o];wP([a],"e-current-date"),wP([s],"e-current-day")}}catch(v){r.e(v)}finally{r.f()}}if("TimelineMonth"===this.parent.currentView){var l=this.parent.element.querySelector('.e-header-cells[data-date="'+t.getTime().toString()+'"]');RD(l)||wP([l],"e-current-day")}this.setPanel(this.parent.element.querySelector(".e-table-wrap"));var c,u="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element,h=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells")));try{for(h.s();!(c=h.n()).done;){var d=c.value;OR.clearEvents(d),this.wireCellEvents(d)}}catch(v){h.e(v)}finally{h.f()}var p=this.element.querySelector(".e-content-table tbody");OR.clearEvents(p),this.wireCellEvents(p),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var f=this.element.querySelector(".e-content-wrap");OR.clearEvents(f),OR.add(f,"scroll",this.onContentScroll,this),this.wireExpandCollapseIconEvents(),this.renderAppointmentContainer(),this.parent.uiStateValues.isGroupAdaptive&&!u.querySelector("."+PH)&&this.renderResourceMobileLayout(),this.parent.notify("content-ready",{})}},{key:"renderLayout",value:function(e){if(this.dayNameFormat=this.getDayNameFormat(),this.parent.isServerRenderer())return this.colLevels=this.generateColumnLevels(),void(this.parent.activeView.isTimelineView()&&this.parent.resourceBase&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.setRenderedResources());this.setPanel(CP("div",{className:"e-table-wrap"}));var t=[this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.allowVirtualScrolling&&t.push("e-virtual-scroll"),this.parent.eventSettings.ignoreWhitespace&&t.push("e-ignore-whitespace"),wP([this.element],t),this.renderPanel(e),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var i="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!i.querySelector("."+PH)&&this.renderResourceMobileLayout(),this.parent.notify("content-ready",{}),this.parent.updateLayoutTemplates()}},{key:"wireCellEvents",value:function(e){OR.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),OR.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||OR.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)}},{key:"renderHeader",value:function(){var e=CP("tr");this.renderLeftIndent(e);var t=CP("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),TP([e],this.element.querySelector("tbody"))}},{key:"renderLeftIndent",value:function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(CP("td",{className:"e-left-indent"}))}},{key:"renderContent",value:function(){var e=CP("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var t=CP("td"),i=CP("div",{className:"e-content-wrap"}),n=this.renderContentArea();if("Month"===this.parent.currentView)i.appendChild(n);else{var r=CP("div",{className:"e-table-container"});r.appendChild(n),i.appendChild(r)}OR.add(i,"scroll",this.onContentScroll,this),t.appendChild(i),e.appendChild(t),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()}},{key:"renderWeekNumberContent",value:function(){var e=this.renderDates.map((function(e){return new Date(+e)})),t=CP("td"),i=CP("div",{className:"e-week-number-wrapper"});t.appendChild(i);var n=this.createTableLayout();i.appendChild(n);for(var r=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,a=0,o=this.renderDates.length/r;a<o;a++){var s=gH(e.splice(0,r).slice(-1)[0]).toString();n.querySelector("tbody").appendChild(this.createWeekNumberElement(s))}return t}},{key:"renderAppointmentContainer",value:function(){}},{key:"renderDatesHeader",value:function(){var e=CP("div",{className:"e-date-header-container"}),t=CP("div",{className:"e-date-header-wrap"});e.appendChild(t);var i=this.createTableLayout();this.createColGroup(i,this.colLevels[this.colLevels.length-1]);for(var n=CP("tr"),r=0;r<this.colLevels.length;r++){for(var a=this.colLevels[r],o=n.cloneNode(),s=0;s<a.length;s++)o.appendChild(this.createHeaderCell(a[s]));i.querySelector("tbody").appendChild(o)}return t.appendChild(i),e}},{key:"createHeaderCell",value:function(e){var t=CP("td");if(this.addAttributes(e,t),"monthDay"===e.type){var i=CP("span",{innerHTML:RH(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});t.appendChild(i)}if("resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type){if(wP([t],"e-date-header"),t.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var n={date:e.date,type:e.type},r=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",a=[].slice.call(this.parent.getDateHeaderTemplate()(n,this.parent,"dateHeaderTemplate",r,!1));a&&a.length&&AP(a,t)}else{var o=CP("span",{className:"e-navigate"}),s=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});o.setAttribute("title",RH(s,"multiple"));var l=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});o.innerHTML=RH(l,"single"),t.appendChild(o)}this.wireCellEvents(t)}return this.parent.trigger("renderCell",{elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex}),t}},{key:"getContentSlots",value:function(){if(!this.colLevels[this.colLevels.length-1]||!this.colLevels[this.colLevels.length-1][0])return[];var e=[],t=function(t,i,n,r){var a={date:new Date(+i),groupIndex:n.groupIndex,workDays:n.workDays,type:"monthCells",className:r||["e-work-cells"]};e[t]||(e[t]=[]),e[t].push(a)},i="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!i||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate)for(var n=this.renderDates.map((function(e){return new Date(+e)})),r=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,a=0;a<this.renderDates.length/r;a++){var o,s=_createForOfIteratorHelper(n.splice(0,r));try{for(s.s();!(o=s.n()).done;){var l=o.value;if(i)for(var c=this.colLevels[this.colLevels.length-1],u=c.slice(0,c.length/r),h=0;h<u.length;h++){var d=void 0;0!==h&&(d=["e-work-cells","e-disable-date"]),t(a,l,u[h],d)}else t(a,l,this.colLevels[this.colLevels.length-1][0])}}catch(C){s.e(C)}finally{s.f()}}else{var p,f=_createForOfIteratorHelper(this.colLevels[this.colLevels.length-2]);try{for(f.s();!(p=f.n()).done;)for(var v=p.value,m=v.renderDates.map((function(e){return new Date(+e)})),g=this.parent.activeViewOptions.showWeekend?7:v.workDays.length,y=0;y<v.renderDates.length/g;y++){var b,k=_createForOfIteratorHelper(m.splice(0,g));try{for(k.s();!(b=k.n()).done;){t(y,b.value,v)}}catch(C){k.e(C)}finally{k.f()}}}catch(C){f.e(C)}finally{f.f()}}return e}},{key:"updateClassList",value:function(e){this.isOtherMonth(e.date)&&e.className.push("e-other-month"),this.parent.isMinMaxDate(e.date)||e.className.push("e-disable-dates"),"MonthAgenda"===this.parent.currentView&&this.parent.isSelectedDate(e.date)&&e.className.push("e-selected-cell")}},{key:"isOtherMonth",value:function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()}},{key:"renderContentArea",value:function(){var e=this.createTableLayout("e-content-table");this.addAutoHeightClass(e),"TimelineMonth"===this.parent.currentView&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var t=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(t),end:this.parent.calendarUtil.lastDateOfMonth(wH(t,this.parent.activeViewOptions.interval-1))};var i=e.querySelector("tbody");return AP(this.getContentRows(),i),this.wireCellEvents(i),e}},{key:"getContentRows",value:function(){for(var e=[],t=CP("tr",{attrs:{role:"row"}}),i=CP("td",{attrs:{role:"gridcell","aria-selected":"false"}}),n=this.getContentSlots(),r=0;r<n.length;r++){for(var a=t.cloneNode(),o=0;o<n[r].length;o++){var s=this.createContentTd(n[r][o],i);a.appendChild(s)}e.push(a)}return e}},{key:"createContentTd",value:function(e,t){var i=t.cloneNode();e.colSpan&&i.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var n=e.type;if(-1!==e.className.indexOf("e-parent-node")&&(e.className.push("e-resource-group-cells"),n="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push("e-work-days"),this.isCurrentDate(e.date)&&e.className.push("e-current-date"),wP([i],e.className),i.setAttribute("data-date",e.date.getTime().toString()),(!RD(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive)&&i.setAttribute("data-group-index",""+(this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex)),this.renderDateHeaderElement(e,i),this.parent.activeViewOptions.cellTemplate){var r={date:e.date,type:n,groupIndex:e.groupIndex},a=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate";AP([].slice.call(this.parent.getCellTemplate()(r,this.parent,"cellTemplate",a,!1)),i)}return this.parent.trigger("renderCell",{elementType:n,element:i,date:e.date,groupIndex:e.groupIndex}),i}},{key:"renderDateHeaderElement",value:function(e,t){if("TimelineMonth"!==this.parent.currentView){var i=CP("div",{className:"e-date-header"});if(this.parent.activeViewOptions.cellHeaderTemplate){var n={date:e.date,type:e.type,groupIndex:e.groupIndex},r=this.parent.element.id+"_"+this.parent.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate";AP([].slice.call(this.parent.getCellHeaderTemplate()(n,this.parent,"cellHeaderTemplate",r,!1)),i)}else{var a=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});i.innerHTML=RH(a,"single")}if(t.appendChild(i),"month"===this.getModuleName()){wP([i],"e-navigate");var o=this.parent.globalize.formatDate(e.date,{skeleton:"full",calendar:this.parent.getCalendarMode()});i.setAttribute("aria-label",o)}}}},{key:"getMonthStart",value:function(e){var t=vH(this.parent.calendarUtil.firstDateOfMonth(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())}},{key:"getMonthEnd",value:function(e){var t=wH(e,this.parent.activeViewOptions.interval-1);return CH(vH(this.parent.calendarUtil.lastDateOfMonth(t),this.parent.activeViewOptions.firstDayOfWeek),6)}},{key:"getRenderDates",value:function(e){var t=[],i=bH(this.parent.selectedDate),n=this.getMonthStart(i),r=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=CH(n,1)}while(n.getTime()<=r.getTime());return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t}},{key:"getNextPreviousDate",value:function(e){return wH(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval)}},{key:"getEndDateFromStartDate",value:function(e){return CH(new Date(e.getTime()),1)}},{key:"getDateRangeText",value:function(){if(this.parent.isAdaptive||RD(this.parent.activeViewOptions.dateFormat)){if(this.parent.activeViewOptions.interval>1){var e=wH(mH(this.parent.selectedDate),this.parent.activeViewOptions.interval-1);return this.parent.selectedDate.getFullYear()===e.getFullYear()?RH(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(e,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+e.getFullYear(),"single"):RH(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+this.parent.selectedDate.getFullYear()+" - "+this.parent.globalize.formatDate(e,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+e.getFullYear(),"single")}return RH(this.parent.globalize.formatDate(this.parent.selectedDate,{format:this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.parent.selectedDate)}},{key:"getLabelText",value:function(e){return this.parent.localeObj.getConstant(e)+" of "+RH(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}},{key:"createWeekNumberElement",value:function(e){var t=CP("tr"),i=CP("td",{className:"e-week-number",attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});return t.appendChild(i),this.parent.trigger("renderCell",{elementType:"weekNumberCell",element:i}),t}},{key:"unwireEvents",value:function(){}},{key:"getModuleName",value:function(){return"month"}},{key:"destroy",value:function(){!this.parent.isDestroyed&&this.element&&(this.unwireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),IP(this.element),this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues())}}]),i}(eW),nW=function(){function e(t){_classCallCheck2(this,e),this.parent=t,this.viewBase=new eW(t)}return _createClass(e,[{key:"createAgendaContentElement",value:function(e,t,i,n,r){var a,o=this,s=this.parent.eventFields;if("noEvents"===e){var l=[{subject:this.parent.localeObj.getConstant("noEvents")}];a=mF.createList(this.parent.createElement,l,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:"<div class=e-no-event>${subject}</div>"})}else{a=mF.createList(this.parent.createElement,t,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass});for(var c=function(e,i){var l=void 0,c=CP("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+t[e][o.parent.eventFields.id],"data-guid":t[e].Guid,role:"button",tabindex:"0","aria-readonly":o.parent.eventBase.getReadonlyAttribute(t[e]),"aria-selected":"false","aria-grabbed":"true","aria-label":o.parent.getAnnocementString(t[e])}});if(RD(r)||c.setAttribute("data-group-index",r.toString()),o.parent.eventBase.applyResourceColor(c,t[e],"borderColor",n),RD(o.parent.activeViewOptions.eventTemplate))l=o.createAppointment(t[e]);else{wP([c],"e-template");var u=o.parent.element.id+"_"+o.parent.activeViewOptions.eventTemplateName+"eventTemplate",h=DH(t[e]);l=o.parent.getAppointmentTemplate()(h,o.parent,"eventTemplate",u,!1),RD(t[e][s.recurrenceRule])||c.appendChild(CP("div",{className:"e-icons "+(t[e][s.id]===t[e][s.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")}))}AP([].slice.call(l),c),IH(a.children[e]),a.children[e].appendChild(c);var d={data:DD({},t[e],null,!0),element:a.children[e],cancel:!1};o.parent.trigger("eventRendered",d,(function(t){t.cancel&&IP(a.children[e])}))},u=0,h=t.length;u<h;u++)c(u)}return i.appendChild(a),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&wP([i],"e-day-border"),i}},{key:"createAppointment",value:function(e){var t=this.parent.eventFields,i=e[t.subject]||this.parent.eventSettings.fields.subject.default,n=e[t.location]||this.parent.eventSettings.fields.location.default,r=CP("div",{className:"e-subject-wrap"});RD(n)||""===n||(i+=","),r.appendChild(CP("div",{className:"e-subject",innerHTML:i})),RD(n)||""===n||r.appendChild(CP("div",{className:"e-location",innerHTML:n})),RD(e[t.recurrenceRule])||r.appendChild(CP("div",{className:"e-icons "+(e[t.id]===e[t.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon")}));var a=e[t.startTime],o=e[t.endTime],s=e[t.isAllDay],l=this.parent.localeObj.getConstant("allDay"),c=this.parent.getTimeString(a)+" - "+this.parent.getTimeString(o);return RD(e.data)||(l=((o.getTimezoneOffset()!==a.getTimezoneOffset()?o.getTime()-a.getTime()+36e5:o.getTime()-a.getTime())/864e5>=1?l:c)+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")"),[r,CP("div",{className:"e-date-time",innerHTML:!RD(e.data)||s?l:c})]}},{key:"processAgendaEvents",value:function(e){var t=[];if(RD(e))return t;var i,n=_createForOfIteratorHelper(e);try{for(n.s();!(i=n.n()).done;){var r=i.value,a=this.parent.eventBase.splitEventByDay(r);t=t.concat(a.length>1?a:r)}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"wireEventActions",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.parent.element.querySelectorAll(".e-appointment")));try{for(t.s();!(e=t.n()).done;){var i=e.value;this.parent.eventBase.wireAppointmentEvents(i,null,!0)}}catch(o){t.e(o)}finally{t.f()}var n,r=_createForOfIteratorHelper([].slice.call(this.parent.element.querySelectorAll(".e-m-date")));try{for(r.s();!(n=r.n()).done;){var a=n.value;OR.add(a,"click",this.parent.agendaModule.dayNavigationClick,this)}}catch(o){r.e(o)}finally{r.f()}}},{key:"calculateResourceTableElement",value:function(e,t,i){if(RD(this.parent.resourceBase.lastResourceLevel)){var n=this.viewBase.getDateSlots(this.viewBase.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(n)}for(var r=CH(new Date(i.getTime()),t),a=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?t:1,o=this.parent.resourceBase.resourceCollection,s=this.parent.resourceBase.lastResourceLevel,l=i,c=0;c<a;c++){var u=void 0,h=void 0,d=[],p=[],f=0,v=CH(l,c),m=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?CH(v,1):r,g=this.parent.eventBase.filterEvents(v,m);if(g.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(var y=0;y<s.length;y++){t=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:t;var b=[],k=this.parent.eventBase.filterEvents(i=v,r,g,s[y]);if(k.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(var C=0;C<t;C++){var w=this.parent.eventBase.filterEvents(i,CH(i,1),k,void 0);if((w.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(b.push(w[0]),u={rowSpan:1,type:"eventColumn",resource:o[o.length-1],groupIndex:s[y].groupIndex,groupOrder:s[y].groupOrder,resourceData:s[y].resourceData,eventData:w,date:i},h={rowSpan:1,type:"dateColumn",resource:o[o.length-1],groupOrder:s[y].groupOrder,resourceData:s[y].resourceData,date:i},d[f]||(d[f]=[]),d[f].push(u),d[f].push(h),f++),(i=CH(i,1)).getTime()>=r.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){d[d.length-1][1].cssClass="e-day-border";var _={rowSpan:b.length,type:"resourceColumn",resource:o[o.length-1],groupOrder:s[y].groupOrder.slice(0,-1),resourceData:s[y].resourceData,groupIndex:d.length-b.length,className:["e-resource-name"],date:i};d[d.length-b.length].push(_),p.push(DD({},_,null,!0));break}}}for(var S=o.slice(0,-1),E=[],T=0,A=0;A<S.length;A++)for(var O=S[S.length-(A+1)].dataSource,x=0;x<O.length;x++)for(var I=0,D=0;D<p.length;D++)p[D].groupOrder[S.length-(A+1)]===O[x][S[S.length-(A+1)].idField]&&(T+=p[D].rowSpan,E.push(DD({},p[D],null,!0))),++I===p.length&&E.length>0&&(E[0].rowSpan=T,E[0].type="parentColumnLevel_"+(A+1),E[0].resource=S[S.length-(A+1)],E[0].resourceData=O[x],E[0].date=i,d[E[0].groupIndex].push(E[0]),E=[],T=0);this.createResourceTableRow(d,e)}}0===this.parent.eventBase.filterEvents(l,r).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,l)}},{key:"createResourceTableRow",value:function(e,t){var i,n,r,a=CP("tr",{attrs:{role:"row"}}),o=CP("td",{attrs:{role:"gridcell","aria-selected":"false"}}),s=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){for(var l=[],c=this.parent.resourceBase.resourceCollection.slice(0,-1),u=0;u<e.length;u++)l=l.concat(e[u]);r=c.length>0?"parentColumnLevel_"+c.length:"resourceColumn";for(var h=l.filter((function(e){return e.type===r})),d=0;d<h.length;d++)s+=h[d].rowSpan}for(var p=0;p<e.length;p++){i=a.cloneNode();for(var f=e[p].length-1;f>=0;f--){var v=e[p][f],m=o.cloneNode();if("dateColumn"===v.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){n=e[p][f];continue}m.setAttribute("data-date",v.date.getTime().toString()),m.appendChild(this.createDateHeaderElement(v.date));var g=["e-agenda-cells","e-date-column"];v.cssClass&&g.push(v.cssClass),wP([m],g),i.appendChild(m)}else"eventColumn"===v.type?((m=this.createAgendaContentElement(0===v.eventData.length?"noEvents":"data",v.eventData,m,v.groupOrder,v.groupIndex)).setAttribute("data-date",v.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&wP([m],["e-agenda-cells","e-day-padding"]),i.appendChild(m)):(m.setAttribute("rowspan",v.rowSpan.toString()),wP([m],"e-resource-column"),this.viewBase.setResourceHeaderContent(m,v,v.className[0]),i.appendChild(m))}if(this.parent.activeViewOptions.group.byDate&&0===p&&"MonthAgenda"!==this.parent.currentView){var y=o.cloneNode();y.setAttribute("data-date",n.date.getTime().toString()),y.setAttribute("rowspan",s.toString()),y.appendChild(this.createDateHeaderElement(n.date)),wP([y],["e-agenda-cells","e-date-column","e-date-border"]);var b=SH(this.parent.selectedDate.getTime(),n.date.getTime());if(i.setAttribute("aria-rowindex",b.toString()),this.parent.element.querySelector('.e-agenda-view tr[aria-rowindex="'.concat(b,'"]')))break;i.insertBefore(y,i.childNodes[0])}t.appendChild(i)}}},{key:"createDateHeaderElement",value:function(e){var t;if(this.parent.activeViewOptions.dateHeaderTemplate){t=CP("div",{className:"e-day-date-header"});var i={date:e,type:"dateHeader"},n=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate";AP([].slice.call(this.parent.getDateHeaderTemplate()(i,this.parent,"dateHeaderTemplate",n,!1)),t)}else t=this.viewBase.getMobileDateElement(e,"e-day-date-header");return t}},{key:"renderEmptyContent",value:function(e,t){var i=this.createTableRowElement(t,"noEvents"),n=i.children[0],r=CP("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});n.appendChild(r),e.appendChild(i)}},{key:"createTableRowElement",value:function(e,t){var i=SH(this.parent.selectedDate.getTime(),e.getTime()),n=CP("tr",{attrs:{role:"row","aria-rowindex":i.toString()}}),r=CP("td",{attrs:{class:"monthHeader"===t?"e-month-header":"e-agenda-cells",role:"gridcell","aria-selected":"false","aria-colindex":i.toString(),"data-date":e.getTime().toString()}}),a=r.cloneNode(),o=r.cloneNode();return n.appendChild(a),"noEvents"!==t&&n.appendChild(o),n}}]),e}(),rW=["dateHeaderTemplate"],aW=["cellHeaderTemplate"],oW=["cellTemplate"],sW=["eventTemplate"],lW=["resourceHeaderTemplate"],cW=["timeScaleMinorSlotTemplate"],uW=["timeScaleMajorSlotTemplate"],hW=["groupHeaderTooltipTemplate"],dW=["template"],pW=["eventSettingsTooltipTemplate"],fW=["eventSettingsTemplate"],vW=["editorTemplate"],mW=["quickInfoTemplatesHeader"],gW=["quickInfoTemplatesContent"],yW=["quickInfoTemplatesFooter"],bW=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},kW=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},CW=["allowVirtualScrolling","cellHeaderTemplate","cellTemplate","dateFormat","dateHeaderTemplate","displayName","endHour","eventTemplate","firstDayOfWeek","group","headerRows","interval","isSelected","option","orientation","readonly","resourceHeaderTemplate","showWeekNumber","showWeekend","startHour","timeScale","workDays"],wW=[],_W=((Gq=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).viewContainerRef=e,WM("currentInstance",_assertThisInitialized(n),n.viewContainerRef),n.registerEvents(wW),n.directivePropList=CW,n}return i}(zM)).\u0275fac=function(e){return new(e||Gq)(Lo(El))},Gq.\u0275dir=_t({type:Gq,selectors:[["e-view"]],contentQueries:function(e,t,i){var n;1&e&&(vc(i,rW,!0),vc(i,aW,!0),vc(i,oW,!0),vc(i,sW,!0),vc(i,lW,!0),vc(i,cW,!0),vc(i,uW,!0),vc(i,hW,!0)),2&e&&(hc(n=yc())&&(t.dateHeaderTemplate=n.first),hc(n=yc())&&(t.cellHeaderTemplate=n.first),hc(n=yc())&&(t.cellTemplate=n.first),hc(n=yc())&&(t.eventTemplate=n.first),hc(n=yc())&&(t.resourceHeaderTemplate=n.first),hc(n=yc())&&(t.timeScale_minorSlotTemplate=n.first),hc(n=yc())&&(t.timeScale_majorSlotTemplate=n.first),hc(n=yc())&&(t.group_headerTooltipTemplate=n.first))},inputs:{allowVirtualScrolling:"allowVirtualScrolling",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",displayName:"displayName",endHour:"endHour",eventTemplate:"eventTemplate",firstDayOfWeek:"firstDayOfWeek",group:"group",headerRows:"headerRows",interval:"interval",isSelected:"isSelected",option:"option",orientation:"orientation",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeScale:"timeScale",workDays:"workDays"},features:[Ps]}),bW([XM(),kW("design:type",Object)],Gq.prototype,"dateHeaderTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"cellHeaderTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"cellTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"eventTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"resourceHeaderTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"timeScale_minorSlotTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"timeScale_majorSlotTemplate",void 0),bW([XM(),kW("design:type",Object)],Gq.prototype,"group_headerTooltipTemplate",void 0),Gq),SW=((zq=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.call(this,"views")}return i}(GM)).\u0275fac=function(e){return new(e||zq)},zq.\u0275dir=_t({type:zq,selectors:[["e-views"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,_W,!1),2&e&&hc(n=yc())&&(t.children=n)},features:[Ps]}),zq),EW=["allowMultiple","colorField","cssClassField","dataSource","endHourField","expandedField","field","groupIDField","idField","name","query","startHourField","textField","title","workDaysField"],TW=[],AW=((Wq=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).viewContainerRef=e,WM("currentInstance",_assertThisInitialized(n),n.viewContainerRef),n.registerEvents(TW),n.directivePropList=EW,n}return i}(zM)).\u0275fac=function(e){return new(e||Wq)(Lo(El))},Wq.\u0275dir=_t({type:Wq,selectors:[["e-resource"]],inputs:{allowMultiple:"allowMultiple",colorField:"colorField",cssClassField:"cssClassField",dataSource:"dataSource",endHourField:"endHourField",expandedField:"expandedField",field:"field",groupIDField:"groupIDField",idField:"idField",name:"name",query:"query",startHourField:"startHourField",textField:"textField",title:"title",workDaysField:"workDaysField"},features:[Ps]}),Wq),OW=((qq=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.call(this,"resources")}return i}(GM)).\u0275fac=function(e){return new(e||qq)},qq.\u0275dir=_t({type:qq,selectors:[["e-resources"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,AW,!1),2&e&&hc(n=yc())&&(t.children=n)},features:[Ps]}),qq),xW=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},IW=["option","template"],DW=[],RW=((Kq=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this)).viewContainerRef=e,WM("currentInstance",_assertThisInitialized(n),n.viewContainerRef),n.registerEvents(DW),n.directivePropList=IW,n}return i}(zM)).\u0275fac=function(e){return new(e||Kq)(Lo(El))},Kq.\u0275dir=_t({type:Kq,selectors:[["e-header-row"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,dW,!0),2&e&&hc(n=yc())&&(t.template=n.first)},inputs:{option:"option",template:"template"},features:[Ps]}),function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);a>3&&o&&Object.defineProperty(t,i,o)}([XM(),xW("design:type",Object)],Kq.prototype,"template",void 0),Kq),PW=((Yq=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.call(this,"headerrows")}return i}(GM)).\u0275fac=function(e){return new(e||Yq)},Yq.\u0275dir=_t({type:Yq,selectors:[["e-header-rows"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,RW,!1),2&e&&hc(n=yc())&&(t.children=n)},features:[Ps]}),Yq),MW=function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},LW=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},NW=["actionBegin","actionComplete","actionFailure","cellClick","cellDoubleClick","created","dataBinding","dataBound","destroyed","drag","dragStart","dragStop","eventClick","eventRendered","hover","moreEventsClick","navigating","popupClose","popupOpen","renderCell","resizeStart","resizeStop","resizing","select","currentViewChange","selectedDateChange"],FW=["currentView","selectedDate"],BW=((Qq=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a){var o;_classCallCheck2(this,i),(o=t.call(this)).ngEle=e,o.srenderer=n,o.viewContainerRef=r,o.injector=a,o.tags=["views","resources","headerRows"],o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[];try{var s=o.injector.get("ScheduleDay");-1===o.injectedModules.indexOf(s)&&o.injectedModules.push(s)}catch(H$){}try{var l=o.injector.get("ScheduleWeek");-1===o.injectedModules.indexOf(l)&&o.injectedModules.push(l)}catch(_){}try{var c=o.injector.get("ScheduleWorkWeek");-1===o.injectedModules.indexOf(c)&&o.injectedModules.push(c)}catch(S){}try{var u=o.injector.get("ScheduleMonth");-1===o.injectedModules.indexOf(u)&&o.injectedModules.push(u)}catch(E){}try{var h=o.injector.get("ScheduleYear");-1===o.injectedModules.indexOf(h)&&o.injectedModules.push(h)}catch(T){}try{var d=o.injector.get("ScheduleAgenda");-1===o.injectedModules.indexOf(d)&&o.injectedModules.push(d)}catch(A){}try{var p=o.injector.get("ScheduleMonthAgenda");-1===o.injectedModules.indexOf(p)&&o.injectedModules.push(p)}catch(O){}try{var f=o.injector.get("ScheduleTimelineViews");-1===o.injectedModules.indexOf(f)&&o.injectedModules.push(f)}catch(x){}try{var v=o.injector.get("ScheduleTimelineMonth");-1===o.injectedModules.indexOf(v)&&o.injectedModules.push(v)}catch(I){}try{var m=o.injector.get("ScheduleTimelineYear");-1===o.injectedModules.indexOf(m)&&o.injectedModules.push(m)}catch(D){}try{var g=o.injector.get("ScheduleResize");-1===o.injectedModules.indexOf(g)&&o.injectedModules.push(g)}catch(R){}try{var y=o.injector.get("ScheduleDragAndDrop");-1===o.injectedModules.indexOf(y)&&o.injectedModules.push(y)}catch(P){}try{var b=o.injector.get("ScheduleExcelExport");-1===o.injectedModules.indexOf(b)&&o.injectedModules.push(b)}catch(M){}try{var k=o.injector.get("ScheduleICalendarExport");-1===o.injectedModules.indexOf(k)&&o.injectedModules.push(k)}catch(L){}try{var C=o.injector.get("ScheduleICalendarImport");-1===o.injectedModules.indexOf(C)&&o.injectedModules.push(C)}catch(N){}try{var w=o.injector.get("SchedulePrint");-1===o.injectedModules.indexOf(w)&&o.injectedModules.push(w)}catch(F){}return o.registerEvents(NW),o.addTwoWay.call(_assertThisInitialized(o),FW),WM("currentInstance",_assertThisInitialized(o),o.viewContainerRef),o.context=new YM,o}return _createClass(i,[{key:"ngOnInit",value:function(){this.context.ngOnInit(this)}},{key:"ngAfterViewInit",value:function(){this.context.ngAfterViewInit(this)}},{key:"ngOnDestroy",value:function(){this.context.ngOnDestroy(this)}},{key:"ngAfterContentChecked",value:function(){this.tagObjects[0].instance=this.childViews,this.childResources&&(this.tagObjects[1].instance=this.childResources),this.childHeaderRows&&(this.tagObjects[2].instance=this.childHeaderRows),this.context.ngAfterContentChecked(this)}}]),i}(Uq)).\u0275fac=function(e){return new(e||Qq)(Lo($s),Lo(nl),Lo(El),Lo(fo))},Qq.\u0275cmp=gt({type:Qq,selectors:[["ejs-schedule"]],contentQueries:function(e,t,i){var n;1&e&&(vc(i,rW,!0),vc(i,oW,!0),vc(i,aW,!0),vc(i,pW,!0),vc(i,fW,!0),vc(i,vW,!0),vc(i,cW,!0),vc(i,uW,!0),vc(i,lW,!0),vc(i,mW,!0),vc(i,gW,!0),vc(i,yW,!0),vc(i,hW,!0),vc(i,SW,!0),vc(i,OW,!0),vc(i,PW,!0)),2&e&&(hc(n=yc())&&(t.dateHeaderTemplate=n.first),hc(n=yc())&&(t.cellTemplate=n.first),hc(n=yc())&&(t.cellHeaderTemplate=n.first),hc(n=yc())&&(t.eventSettings_tooltipTemplate=n.first),hc(n=yc())&&(t.eventSettings_template=n.first),hc(n=yc())&&(t.editorTemplate=n.first),hc(n=yc())&&(t.timeScale_minorSlotTemplate=n.first),hc(n=yc())&&(t.timeScale_majorSlotTemplate=n.first),hc(n=yc())&&(t.resourceHeaderTemplate=n.first),hc(n=yc())&&(t.quickInfoTemplates_header=n.first),hc(n=yc())&&(t.quickInfoTemplates_content=n.first),hc(n=yc())&&(t.quickInfoTemplates_footer=n.first),hc(n=yc())&&(t.group_headerTooltipTemplate=n.first),hc(n=yc())&&(t.childViews=n.first),hc(n=yc())&&(t.childResources=n.first),hc(n=yc())&&(t.childHeaderRows=n.first))},inputs:{agendaDaysCount:"agendaDaysCount",allowDragAndDrop:"allowDragAndDrop",allowInline:"allowInline",allowKeyboardInteraction:"allowKeyboardInteraction",allowMultiCellSelection:"allowMultiCellSelection",allowMultiRowSelection:"allowMultiRowSelection",allowResizing:"allowResizing",calendarMode:"calendarMode",cellHeaderTemplate:"cellHeaderTemplate",cellTemplate:"cellTemplate",cssClass:"cssClass",currentView:"currentView",dateFormat:"dateFormat",dateHeaderTemplate:"dateHeaderTemplate",editorTemplate:"editorTemplate",enablePersistence:"enablePersistence",enableRecurrenceValidation:"enableRecurrenceValidation",enableRtl:"enableRtl",endHour:"endHour",eventDragArea:"eventDragArea",eventSettings:"eventSettings",firstDayOfWeek:"firstDayOfWeek",group:"group",headerRows:"headerRows",height:"height",hideEmptyAgendaDays:"hideEmptyAgendaDays",locale:"locale",maxDate:"maxDate",minDate:"minDate",quickInfoOnSelectionEnd:"quickInfoOnSelectionEnd",quickInfoTemplates:"quickInfoTemplates",readonly:"readonly",resourceHeaderTemplate:"resourceHeaderTemplate",resources:"resources",rowAutoHeight:"rowAutoHeight",selectedDate:"selectedDate",showHeaderBar:"showHeaderBar",showQuickInfo:"showQuickInfo",showTimeIndicator:"showTimeIndicator",showWeekNumber:"showWeekNumber",showWeekend:"showWeekend",startHour:"startHour",timeScale:"timeScale",timezone:"timezone",views:"views",width:"width",workDays:"workDays",workHours:"workHours"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",cellClick:"cellClick",cellDoubleClick:"cellDoubleClick",created:"created",dataBinding:"dataBinding",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",dragStop:"dragStop",eventClick:"eventClick",eventRendered:"eventRendered",hover:"hover",moreEventsClick:"moreEventsClick",navigating:"navigating",popupClose:"popupClose",popupOpen:"popupOpen",renderCell:"renderCell",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",select:"select",currentViewChange:"currentViewChange",selectedDateChange:"selectedDateChange"},features:[Ps],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),MW([XM(),LW("design:type",Object)],Qq.prototype,"dateHeaderTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"cellTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"cellHeaderTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"eventSettings_tooltipTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"eventSettings_template",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"editorTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"timeScale_minorSlotTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"timeScale_majorSlotTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"resourceHeaderTemplate",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"quickInfoTemplates_header",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"quickInfoTemplates_content",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"quickInfoTemplates_footer",void 0),MW([XM(),LW("design:type",Object)],Qq.prototype,"group_headerTooltipTemplate",void 0),Qq=MW([(Jq=[YM],function(e){!function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(i){e.prototype.hasOwnProperty(i)&&!t.isFormBase||(e.prototype[i]=t.prototype[i])}))}))}(e,Jq)}),LW("design:paramtypes",[$s,nl,El,fo])],Qq)),VW=((Xq=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Xq}),Xq.\u0275inj=ve({factory:function(e){return new(e||Xq)},imports:[[id]]}),Xq),jW={provide:"ScheduleDay",useValue:function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).viewClass="e-day-view",n}return _createClass(i,[{key:"getModuleName",value:function(){return"day"}}]),i}(tW)},HW={provide:"ScheduleWeek",useValue:function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).viewClass="e-week-view",n}return _createClass(i,[{key:"getModuleName",value:function(){return"week"}}]),i}(tW)},UW={provide:"ScheduleWorkWeek",useValue:function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).viewClass="e-work-week-view",n}return _createClass(i,[{key:"startDate",value:function(){var e=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&(e=this.parent.resourceBase.getResourceRenderDates()[0]),e}},{key:"endDate",value:function(){var e=CH(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&(e=CH(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),e}},{key:"getModuleName",value:function(){return"workWeek"}}]),i}(tW)},qW={provide:"ScheduleMonth",useValue:iW},WW={provide:"ScheduleMonthAgenda",useValue:function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n;return _classCallCheck2(this,i),(n=t.call(this,e)).dayNameFormat="narrow",n.viewClass="e-month-agenda-view",n.agendaDates={},n.agendaBase=new nW(e),n.monthAgendaDate=new Date(""+e.selectedDate),n}return _createClass(i,[{key:"renderAppointmentContainer",value:function(){if(this.parent.isServerRenderer())this.setEventWrapperHeight();else{var e=this.getContentAreaElement(),t=CP("div",{className:"e-wrapper-container"});e.appendChild(t);var i=CP("div",{className:"e-appointment-wrap"});t.appendChild(i),this.appendAppContainer(i),this.setEventWrapperHeight()}}},{key:"getDayNameFormat",value:function(){return this.parent.isAdaptive?"narrow":"abbreviated"}},{key:"setEventWrapperHeight",value:function(){var e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,t=this.parent.element.querySelector(".e-schedule-resource-toolbar");t&&(e+=t.offsetHeight);var i=this.getContentAreaElement().firstElementChild,n=this.element.querySelector(".e-date-header-wrap"),r=this.parent.element.offsetHeight-e-n.offsetHeight-i.offsetHeight,a=this.element.querySelector(".e-wrapper-container"),o=this.element.querySelector(".e-appointment-wrap");a.style.height=o.style.height=FD(r)}},{key:"onDataReady",value:function(e){this.setEventWrapperHeight(),this.clearElements();var t=e.processedData;this.parent.uiStateValues.isGroupAdaptive&&(t=this.parent.eventBase.filterEventsByResource(this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],t)),this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(t);var i,n=0,r=_createForOfIteratorHelper(this.renderDates);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=this.appointmentFiltering(a),s=this.element.querySelectorAll(".e-work-cells")[n];o.length>0&&(s.querySelector(".e-appointment-indicator")||s.appendChild(CP("div",{className:"e-appointment-indicator"})),a.getTime()===bH(new Date(this.monthAgendaDate.getTime())).getTime()&&this.onEventRender(o,a)),n++}}catch(l){r.e(l)}finally{r.f()}this.parent.notify("events-loaded",{})}},{key:"onCellClick",value:function(e){this.parent.quickPopup.quickPopupHide();var t=this.appointmentFiltering(e.startTime);this.parent.resetEventTemplates(),this.onEventRender(t,e.startTime),this.parent.notify("events-loaded",{}),this.monthAgendaDate=new Date(""+e.startTime)}},{key:"onEventRender",value:function(e,t){var i=this.element.querySelector(".e-appointment-wrap");if(IH(i),0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive)if(e.length>0){var n=CP("div",{className:"e-appointment-container"});i.appendChild(this.agendaBase.createAgendaContentElement("data",e,n))}else this.appendAppContainer(i);else if(e.length>0){var r=this.createTableLayout(),a=r.querySelector("tbody");this.agendaBase.calculateResourceTableElement(a,1,t),r.appendChild(a),i.appendChild(r)}else this.appendAppContainer(i);this.agendaBase.wireEventActions()}},{key:"appointmentFiltering",value:function(e){var t=bH(new Date(e.getTime())),i=yH(new Date(t.getTime()),864e5);return this.parent.eventBase.filterEvents(t,i)}},{key:"clearElements",value:function(){var e,t=_createForOfIteratorHelper([].slice.call(this.element.querySelectorAll(".e-appointment-indicator")));try{for(t.s();!(e=t.n()).done;){IP(e.value)}}catch(i){t.e(i)}finally{t.f()}this.appendAppContainer(this.element.querySelector(".e-appointment-wrap"))}},{key:"appendAppContainer",value:function(e){var t=CP("div",{className:"e-appointment-container"});wP([t],"e-no-event"),t.innerHTML=this.parent.localeObj.getConstant("noEvents"),IH(e),e.appendChild(t)}},{key:"getNextPreviousDate",value:function(e){var t=this.parent.selectedDate,i=wH(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval),n="next"===e?2:0,r=new Date(t.getFullYear(),t.getMonth()+n,0).getDate(),a=r>=this.monthAgendaDate.getDate()?this.monthAgendaDate.getDate():r;return this.monthAgendaDate=new Date(i.getFullYear(),i.getMonth(),a),this.monthAgendaDate}},{key:"getModuleName",value:function(){return"monthAgenda"}}]),i}(iW)},zW=((Zq=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:Zq}),Zq.\u0275inj=ve({factory:function(e){return new(e||Zq)},imports:[[id]]}),Zq),GW=["scheduleObj"],YW=(($q=function(){function e(t,i){_classCallCheck2(this,e),this.tutorService=t,this.httpService=i,this.scheduleViews=["Day","Week","WorkWeek","Month"],this.tutorAvailabilitySchedule=new pA,this.availabilitySchedule=[],this.availableSchedules=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.personalAvailabilitySchedule=this.tutorService.getPersonalAvailabilitySchedule(),this.personalAvailabilitySchedule?this.meetingSchedule=this.personalAvailabilitySchedule.allMeetingsSchedule:this.handleRefresh()}},{key:"onEventRendered",value:function(e){"booking"==e.data.Type&&(e.element.style.backgroundColor="#e30084")}},{key:"handleRefresh",value:function(){var e=this;setTimeout((function(){e.httpService.getScheduleData(e.tutorService.getTutorDetials().bookingId).subscribe((function(t){e.tutorService.setPersonalAvailabilitySchedule(t),e.meetingSchedule=t.allMeetingsSchedule,e.scheduleObj.eventSettings.dataSource=e.meetingSchedule}))}),1e3)}}]),e}()).\u0275fac=function(e){return new(e||$q)(Lo(ck),Lo(lk))},$q.\u0275cmp=gt({type:$q,selectors:[["app-bookings"]],viewQuery:function(e,t){var i;1&e&&pc(GW,!0),2&e&&hc(i=yc())&&(t.scheduleObj=i.first)},decls:4,vars:2,consts:[[2,"background-color","#f9fafc"],[1,"Box",2,"width","95%","margin","auto","padding-top","70px"],["width","100%","height","600px",3,"readonly","views"],["meetingObj",""]],template:function(e,t){1&e&&(jo(0,"body",0),jo(1,"div",1),Uo(2,"ejs-schedule",2,3),Ho(),Ho()),2&e&&(_r(2),Bo("readonly",!0)("views",t.scheduleViews))},directives:[BW],styles:[".box[_ngcontent-%COMP%]{width:80vw;height:85vh;background-color:#fafafa;margin:auto;border:1.5px solid #eee;overflow:hidden;padding:0}.row[_ngcontent-%COMP%]{margin:0}.booking-top[_ngcontent-%COMP%]{border-bottom:1.5px solid #eee}.calendar[_ngcontent-%COMP%]{display:inline-block;width:70%;height:100%}.bookings-button[_ngcontent-%COMP%]{font-size:smaller;margin-left:10px;padding:10px;background:none;color:#000;border:none;border-bottom:3px solid #2a608f;text-decoration:none}.bookings-button[_ngcontent-%COMP%]:hover{background-color:#2a608f;color:#fff}hr[_ngcontent-%COMP%]{margin-bottom:1px}.bookings[_ngcontent-%COMP%]{background:#f8f8f8 none repeat scroll 0 0;float:left;width:100%;height:100%;border-left:1px solid #c4c4c4}.booking-header[_ngcontent-%COMP%]{padding:20px 10px 10px}.booking-list[_ngcontent-%COMP%]{padding:10px;overflow-y:scroll;height:66vh}.calendar[_ngcontent-%COMP%]{width:100%;height:inherit}.calendar-nav[_ngcontent-%COMP%]{width:auto;height:6vh;background-color:#f8f8f8;font-size:medium}.calendar-main[_ngcontent-%COMP%]{width:auto;background-color:brown;overflow-y:scroll;height:inherit}h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:larger}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px}.calendar-buttons[_ngcontent-%COMP%]{font-size:smaller;padding:0;background:none;border:none;text-decoration:none;text-align:center;color:#333;font-weight:lighter;outline:none;margin-top:10px}.calendar-buttons[_ngcontent-%COMP%]:hover, .todayButton[_ngcontent-%COMP%]:hover{color:#2a608f}.todayButton[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;background:none;border:none;text-decoration:none;text-align:center;color:#333;outline:none}.bookingListButton[_ngcontent-%COMP%]{color:#2a608f;margin-left:2px;outline:none}.sidenav[_ngcontent-%COMP%]{height:inherit;width:0;position:fixed;z-index:7;right:5vw;background-color:#fff;overflow-x:hidden;transition:.4s}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}"]}),$q);function KW(e,t){if(1&e){var i=zo();jo(0,"div",13),jo(1,"button",14),Ko("click",(function(){return ti(i),$o().onSignUp()})),Ss(2," Sign Up "),Ho(),jo(3,"button",15),Ko("click",(function(){return ti(i),$o().toLoginPage()})),Ss(4," Login "),Ho(),Ho()}}function XW(e,t){if(1&e&&(jo(0,"a",23),Ss(1),Ho()),2&e){var i=$o(2);_r(1),Ts("Hi ",i.studentService.getStudentProfileDetails().fullName,"")}}function JW(e,t){if(1&e&&(jo(0,"a",23),Ss(1),Ho()),2&e){var i=$o(2);_r(1),Ts("Hi ",i.tutorService.getTutorDetials().fullName,"")}}function QW(e,t){if(1&e){var i=zo();jo(0,"div",13),jo(1,"div",16),jo(2,"a",17),Uo(3,"span",18),Ho(),jo(4,"div",19),Po(5,XW,2,1,"a",20),Po(6,JW,2,1,"a",20),Uo(7,"div",21),jo(8,"a",22),Ko("click",(function(){return ti(i),$o().toDashboard()})),Ss(9,"Dashboard"),Ho(),jo(10,"a",22),Ko("click",(function(){return ti(i),$o().onSignOut()})),Ss(11,"Signout"),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=$o();_r(5),Bo("ngIf","Learner"==n.loginService.getLoginType()),_r(1),Bo("ngIf","Expert"==n.loginService.getLoginType())}}function ZW(e,t){if(1&e){var i=zo();jo(0,"a",24),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().displaySelectedSubjects(e)})),Ss(1),Ho()}if(2&e){var n=t.$implicit;_r(1),Es(n)}}var $W,ez,tz=((ez=function(){function e(t,i,n,r,a,o){_classCallCheck2(this,e),this.router=t,this.route=i,this.loginService=n,this.cookieService=r,this.studentService=a,this.tutorService=o,this.options=["Tools","Marketing","Content","Project Management","Sales","E-comm"]}return _createClass(e,[{key:"ngOnInit",value:function(){this.loginType=this.loginService.getLoginType(),"Learner"==this.loginType?this.studentProfile=this.studentService.getStudentProfileDetails():"Expert"==this.loginType&&(this.tutorProfile=this.tutorService.getTutorDetials())}},{key:"toFacade",value:function(){this.router.navigate([""])}},{key:"onSignUp",value:function(){this.router.navigate(["signUp"])}},{key:"toLoginPage",value:function(){this.router.navigate(["login"])}},{key:"toDashboard",value:function(){"Learner"==this.loginService.getLoginType()?this.router.navigate(["home/studentDashboard"]):"Expert"==this.loginService.getLoginType()&&this.router.navigate(["home/tutorDashboard"])}},{key:"displaySelectedSubjects",value:function(e){null!=e&&this.router.navigate(["searchResults"],{queryParams:{subject:e}})}},{key:"onSignOut",value:function(){var e=this.route.snapshot.routeConfig.component.name;this.cookieService.delete("token"),this.cookieService.delete("userId"),this.loginService.setLoginType(null),this.loginService.setTrType(null),"ExpertProfileComponent"!=e&&this.router.navigate([""])}}]),e}()).\u0275fac=function(e){return new(e||ez)(Lo(cm),Lo($f),Lo(gb),Lo(BT),Lo(FT),Lo(ck))},ez.\u0275cmp=gt({type:ez,selectors:[["app-nav-bar"]],decls:18,vars:3,consts:[[1,"header"],[1,"logo",3,"click"],["class","header-buttons-container",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light"],["type","button","data-toggle","collapse","data-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["class","nav-item nav-link active","style","\n            margin-right: 1vw;\n            cursor: pointer;\n            color: #3f023f;\n            font-weight: bolder;\n          ",3,"click",4,"ngFor","ngForOf"],["href","#",1,"nav-item","nav-link","active"],["routerLink","/how-it-works",1,"nav-item","nav-link","active"],["routerLink","/faq",1,"nav-item","nav-link","active"],["routerLink","/signUp",1,"nav-item","nav-link","hide"],[1,"header-buttons-container"],["type","button showin",1,"btn","btn-secondary","showin",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"nav-item","dropdown"],["data-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fa","fa-user-circle"],[1,"dropdown-menu"],["class","dropdown-item",4,"ngIf"],[1,"dropdown-divider"],["href","javascript:;",1,"dropdown-item",3,"click"],[1,"dropdown-item"],[1,"nav-item","nav-link","active",2,"margin-right","1vw","cursor","pointer","color","#3f023f","font-weight","bolder",3,"click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Ko("click",(function(){return t.toFacade()})),Ho(),Po(2,KW,5,0,"div",2),Po(3,QW,12,2,"div",2),jo(4,"nav",3),jo(5,"button",4),Uo(6,"span",5),Ho(),jo(7,"div",6),jo(8,"div",7),Po(9,ZW,2,1,"a",8),jo(10,"a",9),Ss(11,"Home"),Ho(),jo(12,"a",10),Ss(13,"How it works"),Ho(),jo(14,"a",11),Ss(15,"FAQ"),Ho(),jo(16,"a",12),Ss(17,"Sign Up"),Ho(),Ho(),Ho(),Ho(),Ho()),2&e&&(_r(2),Bo("ngIf",null==t.loginService.getLoginType()),_r(1),Bo("ngIf",null!=t.loginService.getLoginType()),_r(6),Bo("ngForOf",t.options))},directives:[Dh,xh,hm],styles:[".nav-link[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:25px;color:#201e20}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;will-change:transform;top:-18px;left:-65px;transform:translate3d(-5px,57px,0)}"]}),ez),iz=(($W=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||$W)},$W.\u0275cmp=gt({type:$W,selectors:[["app-advertisement-banner"]],decls:19,vars:0,consts:[[1,"advertise-container"],[1,"advertisement"],[1,"advertisement-header"],[1,"fa","fa-user-check"],[1,"advertisement-content"],[1,"advertisement","secondary-advertisement"],[1,"fa","fa-people-arrows"],[1,"fa","fa-lock"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),jo(2,"span",2),Uo(3,"span",3),Ss(4,"Verified Experts "),Ho(),jo(5,"span",4),Ss(6," Only the most qualified instructors enrolled in our program. "),Ho(),Ho(),jo(7,"div",5),jo(8,"span",2),Uo(9,"span",6),Ss(10," Personalized coaching "),Ho(),jo(11,"span",4),Ss(12," 1-on-1 learning enabled through video, chats, and digital boards. "),Ho(),Ho(),jo(13,"div",1),jo(14,"span",2),Uo(15,"span",7),Ss(16," Trusted & secured "),Ho(),jo(17,"span",4),Ss(18," 100% safe to use. Data encryption for the max security. "),Ho(),Ho(),Ho())},styles:[""]}),$W);function nz(e,t,i){return 0===i?[t]:(e.push(t),e)}var rz=function(e,t){return{isMouseDragable:e,isTouchDragable:t}};function az(e,t){if(1&e&&(jo(0,"div",4),Uo(1,"owl-stage",5),Ho()),2&e){var i=$o();_r(1),Bo("owlDraggable",Wl(3,rz,null==i.owlDOMData?null:i.owlDOMData.isMouseDragable,null==i.owlDOMData?null:i.owlDOMData.isTouchDragable))("stageData",i.stageData)("slidesData",i.slidesData)}}var oz=function(e,t){return{active:e,"owl-dot-text":t}};function sz(e,t){if(1&e){var i=zo();jo(0,"div",11),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).moveByDot(e.id)})),Uo(1,"span",12),Ho()}if(2&e){var n=t.$implicit;Bo("ngClass",Wl(2,oz,n.active,n.showInnerContent)),_r(1),Bo("innerHTML",n.innerContent,tr)}}var lz=function(e){return{disabled:e}};function cz(e,t){if(1&e){var i=zo();qo(0),jo(1,"div",6),jo(2,"div",7),Ko("click",(function(){return ti(i),$o().prev()})),Ho(),jo(3,"div",8),Ko("click",(function(){return ti(i),$o().next()})),Ho(),Ho(),jo(4,"div",9),Po(5,sz,2,5,"div",10),Ho(),Wo()}if(2&e){var n=$o();_r(1),Bo("ngClass",ql(7,lz,null==n.navData?null:n.navData.disabled)),_r(1),Bo("ngClass",ql(9,lz,null==n.navData||null==n.navData.prev?null:n.navData.prev.disabled))("innerHTML",null==n.navData||null==n.navData.prev?null:n.navData.prev.htmlText,tr),_r(1),Bo("ngClass",ql(11,lz,null==n.navData||null==n.navData.next?null:n.navData.next.disabled))("innerHTML",null==n.navData||null==n.navData.next?null:n.navData.next.htmlText,tr),_r(1),Bo("ngClass",ql(13,lz,null==n.dotsData?null:n.dotsData.disabled)),_r(1),Bo("ngForOf",null==n.dotsData?null:n.dotsData.dots)}}var uz=function(e,t,i,n,r){return{"owl-rtl":e,"owl-loaded":t,"owl-responsive":i,"owl-drag":n,"owl-grab":r}};function hz(e,t){}function dz(e,t){1&e&&Po(0,hz,0,0,"ng-template",4),2&e&&Bo("ngTemplateOutlet",$o().$implicit.tplRef)}var pz=function(e,t,i,n){return{width:e,"margin-left":t,"margin-right":i,left:n}};function fz(e,t){if(1&e){var i=zo();qo(0),jo(1,"div",2),Ko("animationend",(function(){ti(i);var e=t.$implicit;return $o().clear(e.id)})),Po(2,dz,1,1,void 0,3),Ho(),Wo()}if(2&e){var n=t.$implicit;_r(1),Bo("ngClass",n.classes)("ngStyle",(4,r=pz,a=n.width+"px",o=n.marginL?n.marginL+"px":"",s=n.marginR?n.marginR+"px":"",l=n.left,function(e,t,i,n,r,a,o,s,l){var c=t+4;return Io(e,c,r,a,o,s)?To(e,c+4,n(r,a,o,s)):Gl(e,c+4)}($t(),li(),0,r,a,o,s,l)))("@autoHeight",n.heightState),_r(1),Bo("ngIf",n.load)}var r,a,o,s,l}var vz,mz,gz,yz,bz,kz,Cz,wz,_z,Sz,Ez,Tz,Az,Oz,xz,Iz,Dz=function(e,t,i,n,r){return{width:e,transform:t,transition:i,"padding-left":n,"padding-right":r}},Rz=((vz=function(){function e(t){_classCallCheck2(this,e),this.eventManager=t,this.resizeSubject=new x,this.eventManager.addGlobalEventListener("window","resize",this.onResize.bind(this)),this.eventManager.addGlobalEventListener("window","onload",this.onLoaded.bind(this))}return _createClass(e,[{key:"onResize",value:function(e){this.resizeSubject.next(e.target)}},{key:"onLoaded",value:function(e){this.windowWidth=e.target}},{key:"onResize$",get:function(){return this.resizeSubject.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||vz)(Ze(gd))},vz.\u0275prov=pe({token:vz,factory:vz.\u0275fac}),vz),Pz=function e(){_classCallCheck2(this,e),this.items=3,this.skip_validateItems=!1,this.loop=!1,this.center=!1,this.rewind=!1,this.mouseDrag=!0,this.touchDrag=!0,this.pullDrag=!0,this.freeDrag=!1,this.margin=0,this.stagePadding=0,this.merge=!1,this.mergeFit=!0,this.autoWidth=!1,this.startPosition=0,this.rtl=!1,this.smartSpeed=250,this.fluidSpeed=!1,this.dragEndSpeed=!1,this.responsive={},this.responsiveRefreshRate=200,this.nav=!1,this.navText=["prev","next"],this.navSpeed=!1,this.slideBy=1,this.dots=!0,this.dotsEach=!1,this.dotsData=!1,this.dotsSpeed=!1,this.autoplay=!1,this.autoplayTimeout=5e3,this.autoplayHoverPause=!1,this.autoplaySpeed=!1,this.autoplayMouseleaveTimeout=1,this.lazyLoad=!1,this.lazyLoadEager=0,this.slideTransition="",this.animateOut=!1,this.animateIn=!1,this.autoHeight=!1,this.URLhashListener=!1},Mz=function e(){_classCallCheck2(this,e),this.items="number",this.skip_validateItems="boolean",this.loop="boolean",this.center="boolean",this.rewind="boolean",this.mouseDrag="boolean",this.touchDrag="boolean",this.pullDrag="boolean",this.freeDrag="boolean",this.margin="number",this.stagePadding="number",this.merge="boolean",this.mergeFit="boolean",this.autoWidth="boolean",this.startPosition="number|string",this.rtl="boolean",this.smartSpeed="number",this.fluidSpeed="boolean",this.dragEndSpeed="number|boolean",this.responsive={},this.responsiveRefreshRate="number",this.nav="boolean",this.navText="string[]",this.navSpeed="number|boolean",this.slideBy="number|string",this.dots="boolean",this.dotsEach="number|boolean",this.dotsData="boolean",this.dotsSpeed="number|boolean",this.autoplay="boolean",this.autoplayTimeout="number",this.autoplayHoverPause="boolean",this.autoplaySpeed="number|boolean",this.autoplayMouseleaveTimeout="number",this.lazyLoad="boolean",this.lazyLoadEager="number",this.slideTransition="string",this.animateOut="string|boolean",this.animateIn="string|boolean",this.autoHeight="boolean",this.URLhashListener="boolean"},Lz=((mz=function(){function e(t){_classCallCheck2(this,e),this.errorHandler=t}return _createClass(e,[{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];xn()&&(t=console).log.apply(t,[e].concat(n))}},{key:"error",value:function(e){this.errorHandler.handleError(e)}},{key:"warn",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=console).warn.apply(t,[e].concat(n))}}]),e}()).\u0275fac=function(e){return new(e||mz)(Ze(gn))},mz.\u0275prov=pe({token:mz,factory:mz.\u0275fac}),mz),Nz=((gz={}).Event="event",gz.State="state",gz),Fz=function(e){return e.Default="default",e.Inner="inner",e.Outer="outer",e}({}),Bz=((bz=function(){function e(t){var i=this;_classCallCheck2(this,e),this.logger=t,this._viewSettingsShipper$=new x,this._initializedCarousel$=new x,this._changeSettingsCarousel$=new x,this._changedSettingsCarousel$=new x,this._translateCarousel$=new x,this._translatedCarousel$=new x,this._resizeCarousel$=new x,this._resizedCarousel$=new x,this._refreshCarousel$=new x,this._refreshedCarousel$=new x,this._dragCarousel$=new x,this._draggedCarousel$=new x,this.settings={items:0},this.owlDOMData={rtl:!1,isResponsive:!1,isRefreshed:!1,isLoaded:!1,isLoading:!1,isMouseDragable:!1,isGrab:!1,isTouchDragable:!1},this.stageData={transform:"translate3d(0px,0px,0px)",transition:"0s",width:0,paddingL:0,paddingR:0},this._items=[],this._widths=[],this._supress={},this._plugins={},this._current=null,this._clones=[],this._mergers=[],this._speed=null,this._coordinates=[],this._breakpoint=null,this.clonedIdPrefix="cloned-",this._options={},this._invalidated={},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},this._pipe=[{filter:["width","items","settings"],run:function(e){e.current=i._items&&i._items[i.relative(i._current)].id}},{filter:["width","items","settings"],run:function(e){var t=i.settings.margin||"",n=i.settings.rtl,r={"margin-left":n?t:"","margin-right":n?"":t};!i.settings.autoWidth||i.slidesData.forEach((function(e){e.marginL=r["margin-left"],e.marginR=r["margin-right"]})),e.css=r}},{filter:["width","items","settings"],run:function(e){var t=+(i.width()/i.settings.items).toFixed(3)-i.settings.margin,n=!i.settings.autoWidth,r=[],a=null,o=i._items.length;for(e.items={merge:!1,width:t};o--;)a=i._mergers[o],a=i.settings.mergeFit&&Math.min(a,i.settings.items)||a,e.items.merge=a>1||e.items.merge,r[o]=n?t*a:i._items[o].width?i._items[o].width:t;i._widths=r,i.slidesData.forEach((function(t,n){t.width=i._widths[n],t.marginR=e.css["margin-right"],t.marginL=e.css["margin-left"]}))}},{filter:["items","settings"],run:function(){var e=[],t=i._items,n=i.settings,r=Math.max(2*n.items,4),a=2*Math.ceil(t.length/2),o=[],s=[],l=n.loop&&t.length?n.rewind?r:Math.max(r,a):0;for(l/=2;l--;)e.push(i.normalize(e.length/2,!0)),o.push(Object.assign({},i.slidesData[e[e.length-1]])),e.push(i.normalize(t.length-1-(e.length-1)/2,!0)),s.unshift(Object.assign({},i.slidesData[e[e.length-1]]));i._clones=e,o=o.map((function(e){return e.id="".concat(i.clonedIdPrefix).concat(e.id),e.isActive=!1,e.isCloned=!0,e})),s=s.map((function(e){return e.id="".concat(i.clonedIdPrefix).concat(e.id),e.isActive=!1,e.isCloned=!0,e})),i.slidesData=s.concat(i.slidesData).concat(o)}},{filter:["width","items","settings"],run:function(){for(var e=i.settings.rtl?1:-1,t=i._clones.length+i._items.length,n=[],r=-1,a=0,o=0;++r<t;)a=n[r-1]||0,o=i._widths[i.relative(r)]+i.settings.margin,n.push(a+o*e);i._coordinates=n}},{filter:["width","items","settings"],run:function(){var e=i.settings.stagePadding,t=i._coordinates,n={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};i.stageData.width=n.width,i.stageData.paddingL=n["padding-left"],i.stageData.paddingR=n["padding-right"]}},{filter:["width","items","settings"],run:function(e){var t=e.current?i.slidesData.findIndex((function(t){return t.id===e.current})):0;t=Math.max(i.minimum(),Math.min(i.maximum(),t)),i.reset(t)}},{filter:["position"],run:function(){i.animate(i.coordinates(i._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,n,r,a,o,s=i.settings.rtl?1:-1,l=2*i.settings.stagePadding,c=[];if("number"==typeof(e=i.coordinates(i.current()))?e+=l:e=0,t=e+i.width()*s,-1===s&&i.settings.center){var u=i._coordinates.filter((function(t){return i.settings.items%2==1?t>=e:t>e}));e=u.length?u[u.length-1]:e}for(a=0,o=i._coordinates.length;a<o;a++)n=Math.ceil(i._coordinates[a-1]||0),r=Math.ceil(Math.abs(i._coordinates[a])+l*s),(i._op(n,"<=",e)&&i._op(n,">",t)||i._op(r,"<",e)&&i._op(r,">",t))&&c.push(a);i.slidesData.forEach((function(e){return e.isActive=!1,e})),c.forEach((function(e){i.slidesData[e].isActive=!0})),i.settings.center&&(i.slidesData.forEach((function(e){return e.isCentered=!1,e})),i.slidesData[i.current()].isCentered=!0)}}]}return _createClass(e,[{key:"getViewCurSettings",value:function(){return this._viewSettingsShipper$.asObservable()}},{key:"getInitializedState",value:function(){return this._initializedCarousel$.asObservable()}},{key:"getChangeState",value:function(){return this._changeSettingsCarousel$.asObservable()}},{key:"getChangedState",value:function(){return this._changedSettingsCarousel$.asObservable()}},{key:"getTranslateState",value:function(){return this._translateCarousel$.asObservable()}},{key:"getTranslatedState",value:function(){return this._translatedCarousel$.asObservable()}},{key:"getResizeState",value:function(){return this._resizeCarousel$.asObservable()}},{key:"getResizedState",value:function(){return this._resizedCarousel$.asObservable()}},{key:"getRefreshState",value:function(){return this._refreshCarousel$.asObservable()}},{key:"getRefreshedState",value:function(){return this._refreshedCarousel$.asObservable()}},{key:"getDragState",value:function(){return this._dragCarousel$.asObservable()}},{key:"getDraggedState",value:function(){return this._draggedCarousel$.asObservable()}},{key:"setOptions",value:function(e){var t=new Pz,i=this._validateOptions(e,t);this._options=Object.assign(Object.assign({},t),i)}},{key:"_validateOptions",value:function(e,t){var i=this,n=Object.assign({},e),r=new Mz,a=function(n,r){return i.logger.log("options.".concat(r," must be type of ").concat(n,"; ").concat(r,"=").concat(e[r]," skipped to defaults: ").concat(r,"=").concat(t[r])),t[r]};for(var o in n)if(n.hasOwnProperty(o))if("number"===r[o])this._isNumeric(n[o])?(n[o]=+n[o],n[o]="items"===o?this._validateItems(n[o],n.skip_validateItems):n[o]):n[o]=a(r[o],o);else if("boolean"===r[o]&&"boolean"!=typeof n[o])n[o]=a(r[o],o);else if("number|boolean"!==r[o]||this._isNumberOrBoolean(n[o]))if("number|string"!==r[o]||this._isNumberOrString(n[o]))if("string|boolean"!==r[o]||this._isStringOrBoolean(n[o])){if("string[]"===r[o])if(Array.isArray(n[o])){var s=!1;n[o].forEach((function(e){s="string"==typeof e})),s||(n[o]=a(r[o],o))}else n[o]=a(r[o],o)}else n[o]=a(r[o],o);else n[o]=a(r[o],o);else n[o]=a(r[o],o);return n}},{key:"_validateItems",value:function(e,t){var i=e;return e>this._items.length?t?this.logger.log("The option 'items' in your options is bigger than the number of slides. The navigation got disabled"):(i=this._items.length,this.logger.log("The option 'items' in your options is bigger than the number of slides. This option is updated to the current number of slides and the navigation got disabled")):e===this._items.length&&(this.settings.dots||this.settings.nav)&&this.logger.log("Option 'items' in your options is equal to the number of slides. So the navigation got disabled"),i}},{key:"setCarouselWidth",value:function(e){this._width=e}},{key:"setup",value:function(e,t,i){this.setCarouselWidth(e),this.setItems(t),this._defineSlidesData(),this.setOptions(i),this.settings=Object.assign({},this._options),this.setOptionsForViewport(),this._trigger("change",{property:{name:"settings",value:this.settings}}),this.invalidate("settings"),this._trigger("changed",{property:{name:"settings",value:this.settings}})}},{key:"setOptionsForViewport",value:function(){var e=this,t=this._width,i=this._options.responsive,n=-1;if(Object.keys(i).length)if(t){for(var r in i)i.hasOwnProperty(r)&&+r<=t&&+r>n&&(n=Number(r));this.settings=Object.assign(Object.assign(Object.assign({},this._options),i[n]),{items:i[n]&&i[n].items?this._validateItems(i[n].items,this._options.skip_validateItems):this._options.items}),delete this.settings.responsive,this.owlDOMData.isResponsive=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag;var a=[];this._items.forEach((function(t){a.push(e.settings.merge?t.dataMerge:1)})),this._mergers=a,this._breakpoint=n,this.invalidate("settings")}else this.settings.items=1}},{key:"initialize",value:function(e){var t=this;this.enter("initializing"),this.owlDOMData.rtl=this.settings.rtl,this._mergers.length&&(this._mergers=[]),e.forEach((function(e){t._mergers.push(t.settings.merge?e.dataMerge:1)})),this._clones=[],this.reset(this._isNumeric(this.settings.startPosition)?+this.settings.startPosition:0),this.invalidate("items"),this.refresh(),this.owlDOMData.isLoaded=!0,this.owlDOMData.isMouseDragable=this.settings.mouseDrag,this.owlDOMData.isTouchDragable=this.settings.touchDrag,this.sendChanges(),this.leave("initializing"),this._trigger("initialized")}},{key:"sendChanges",value:function(){this._viewSettingsShipper$.next({owlDOMData:this.owlDOMData,stageData:this.stageData,slidesData:this.slidesData,navData:this.navData,dotsData:this.dotsData})}},{key:"_optionsLogic",value:function(){this.settings.autoWidth&&(this.settings.stagePadding=0,this.settings.merge=!1)}},{key:"update",value:function(){for(var e=this,t=0,i=this._pipe.length,n=function(t){return e._invalidated[t]},r={};t<i;){var a=this._pipe[t].filter.filter(n);(this._invalidated.all||a.length>0)&&this._pipe[t].run(r),t++}this.slidesData.forEach((function(t){return t.classes=e.setCurSlideClasses(t)})),this.sendChanges(),this._invalidated={},this.is("valid")||this.enter("valid")}},{key:"width",value:function(e){switch(e=e||Fz.Default){case Fz.Inner:case Fz.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}}},{key:"refresh",value:function(){this.enter("refreshing"),this._trigger("refresh"),this._defineSlidesData(),this.setOptionsForViewport(),this._optionsLogic(),this.update(),this.leave("refreshing"),this._trigger("refreshed")}},{key:"onResize",value:function(e){if(!this._items.length)return!1;this.setCarouselWidth(e),this.enter("resizing"),this._trigger("resize"),this.invalidate("width"),this.refresh(),this.leave("resizing"),this._trigger("resized")}},{key:"prepareDragging",value:function(e){var t,i;return i={x:+(t=this.stageData.transform.replace(/.*\(|\)| |[^,-\d]\w|\)/g,"").split(","))[0],y:+t[1]},this.is("animating")&&this.invalidate("position"),"mousedown"===e.type&&(this.owlDOMData.isGrab=!0),this.speed(0),i}},{key:"enterDragging",value:function(){this.enter("dragging"),this._trigger("drag")}},{key:"defineNewCoordsDrag",value:function(e,t){var i=null,n=null,r=null,a=this.difference(t.pointer,this.pointer(e)),o=this.difference(t.stage.start,a);return!!this.is("dragging")&&(this.settings.loop?(i=this.coordinates(this.minimum()),n=+this.coordinates(this.maximum()+1)-i,o.x=((o.x-i)%n+n)%n+i):(i=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),n=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),r=this.settings.pullDrag?-1*a.x/5:0,o.x=Math.max(Math.min(o.x,i+r),n+r)),o)}},{key:"finishDragging",value:function(e,t,i){var n,r=this.difference(t.pointer,this.pointer(e)),a=t.stage.current,o=["right","left"][+(this.settings.rtl?r.x<+this.settings.rtl:r.x>+this.settings.rtl)];(0!==r.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(+this.settings.dragEndSpeed||this.settings.smartSpeed),n=this.closest(a.x,0!==r.x?o:t.direction),this.current()!==this.current(-1===n?void 0:n)&&(this.invalidate("position"),this.update()),t.direction=o,(Math.abs(r.x)>3||(new Date).getTime()-t.time>300)&&i()),this.is("dragging")&&(this.leave("dragging"),this._trigger("dragged"))}},{key:"closest",value:function(e,t){var i=this.width(),n=this.coordinates(),r=-1;this.settings.center&&(n=n.map((function(e){return 0===e&&(e+=1e-6),e})));for(var a=0;a<n.length&&("left"===t&&e>n[a]-30&&e<n[a]+30?r=a:"right"===t&&e>n[a]-i-30&&e<n[a]-i+30?r=a+1:this._op(e,"<",n[a])&&this._op(e,">",n[a+1]||n[a]-i)?r="left"===t?a+1:a:null===t&&e>n[a]-30&&e<n[a]+30&&(r=a),-1===r);a++);return this.settings.loop||(this._op(e,">",n[this.minimum()])?r=e=this.minimum():this._op(e,"<",n[this.maximum()])&&(r=e=this.maximum())),r}},{key:"animate",value:function(e){var t=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),t&&(this.enter("animating"),this._trigger("translate")),this.stageData.transform="translate3d("+e+"px,0px,0px)",this.stageData.transition=this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}},{key:"is",value:function(e){return this._states.current[e]&&this._states.current[e]>0}},{key:"current",value:function(e){return void 0===e?this._current:0!==this._items.length?(e=this.normalize(e),this._current!==e&&(this._trigger("change",{property:{name:"position",value:e}}),this._current=e,this.invalidate("position"),this._trigger("changed",{property:{name:"position",value:this._current}})),this._current):void 0}},{key:"invalidate",value:function(e){return"string"==typeof e&&(this._invalidated[e]=!0,this.is("valid")&&this.leave("valid")),Object.keys(this._invalidated)}},{key:"reset",value:function(e){void 0!==(e=this.normalize(e))&&(this._speed=0,this._current=e,this._suppress(["translate","translated"]),this.animate(this.coordinates(e)),this._release(["translate","translated"]))}},{key:"normalize",value:function(e,t){var i=this._items.length,n=t?0:this._clones.length;return!this._isNumeric(e)||i<1?e=void 0:(e<0||e>=i+n)&&(e=((e-n/2)%i+i)%i+n/2),e}},{key:"relative",value:function(e){return this.normalize(e-=this._clones.length/2,!0)}},{key:"maximum",value:function(){var e,t,i,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.settings,a=this._coordinates.length;if(r.loop)a=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){for(e=this._items.length,t=this.slidesData[--e].width,i=this._width;e--&&!((t+=+this.slidesData[e].width+this.settings.margin)>i););a=e+1}else a=r.center?this._items.length-1:this._items.length-r.items;return n&&(a-=this._clones.length/2),Math.max(a,0)}},{key:"minimum",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?0:this._clones.length/2}},{key:"items",value:function(e){return void 0===e?this._items.slice():(e=this.normalize(e,!0),[this._items[e]])}},{key:"mergers",value:function(e){return void 0===e?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])}},{key:"clones",value:function(e){var t=this._clones.length/2,i=t+this._items.length,n=function(e){return e%2==0?i+e/2:t-(e+1)/2};return void 0===e?this._clones.map((function(e,t){return n(t)})):this._clones.map((function(t,i){return t===e?n(i):null})).filter((function(e){return e}))}},{key:"speed",value:function(e){return void 0!==e&&(this._speed=e),this._speed}},{key:"coordinates",value:function(e){var t,i=this,n=1,r=e-1;return void 0===e?this._coordinates.map((function(e,t){return i.coordinates(t)})):(this.settings.center?(this.settings.rtl&&(n=-1,r=e+1),t=this._coordinates[e],t+=(this.width()-t+(this._coordinates[r]||0))/2*n):t=this._coordinates[r]||0,t=Math.ceil(t))}},{key:"_duration",value:function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(+i||this.settings.smartSpeed)}},{key:"to",value:function(e,t){var i=this,n=this.current(),r=null,a=e-this.relative(n),o=this.maximum(),s=0,l=+(a>0)-+(a<0),c=this._items.length,u=this.minimum();this.settings.loop?(!this.settings.rewind&&Math.abs(a)>c/2&&(a+=-1*l*c),(r=(((e=n+a)-u)%c+c)%c+u)!==e&&r-a<=o&&r-a>0&&(n=r-a,e=r,s=30,this.reset(n),this.sendChanges())):e=this.settings.rewind?(e%(o+=1)+o)%o:Math.max(u,Math.min(o,e)),setTimeout((function(){i.speed(i._duration(n,e,t)),i.current(e),i.update()}),s)}},{key:"next",value:function(e){e=e||!1,this.to(this.relative(this.current())+1,e)}},{key:"prev",value:function(e){e=e||!1,this.to(this.relative(this.current())-1,e)}},{key:"onTransitionEnd",value:function(e){if(void 0!==e)return!1;this.leave("animating"),this._trigger("translated")}},{key:"_viewport",value:function(){var e;return this._width?e=this._width:this.logger.log("Can not detect viewport width."),e}},{key:"setItems",value:function(e){this._items=e}},{key:"_defineSlidesData",value:function(){var e;this.slidesData&&this.slidesData.length&&(e=new Map,this.slidesData.forEach((function(t){t.load&&e.set(t.id,t.load)}))),this.slidesData=this._items.map((function(t){return{id:""+t.id,isActive:!1,tplRef:t.tplRef,dataMerge:t.dataMerge,width:0,isCloned:!1,load:!!e&&e.get(t.id),hashFragment:t.dataHash}}))}},{key:"setCurSlideClasses",value:function(e){var t={active:e.isActive,center:e.isCentered,cloned:e.isCloned,animated:e.isAnimated,"owl-animated-in":e.isDefAnimatedIn,"owl-animated-out":e.isDefAnimatedOut};return this.settings.animateIn&&(t[this.settings.animateIn]=e.isCustomAnimatedIn),this.settings.animateOut&&(t[this.settings.animateOut]=e.isCustomAnimatedOut),t}},{key:"_op",value:function(e,t,i){var n=this.settings.rtl;switch(t){case"<":return n?e>i:e<i;case">":return n?e<i:e>i;case">=":return n?e<=i:e>=i;case"<=":return n?e>=i:e<=i}}},{key:"_trigger",value:function(e,t,i,n,r){switch(e){case"initialized":this._initializedCarousel$.next(e);break;case"change":this._changeSettingsCarousel$.next(t);break;case"changed":this._changedSettingsCarousel$.next(t);break;case"drag":this._dragCarousel$.next(e);break;case"dragged":this._draggedCarousel$.next(e);break;case"resize":this._resizeCarousel$.next(e);break;case"resized":this._resizedCarousel$.next(e);break;case"refresh":this._refreshCarousel$.next(e);break;case"refreshed":this._refreshedCarousel$.next(e);break;case"translate":this._translateCarousel$.next(e);break;case"translated":this._translatedCarousel$.next(e)}}},{key:"enter",value:function(e){var t=this;[e].concat(this._states.tags[e]||[]).forEach((function(e){void 0===t._states.current[e]&&(t._states.current[e]=0),t._states.current[e]++}))}},{key:"leave",value:function(e){var t=this;[e].concat(this._states.tags[e]||[]).forEach((function(e){(0===t._states.current[e]||t._states.current[e])&&t._states.current[e]--}))}},{key:"register",value:function(e){var t=this;e.type===Nz.State&&(this._states.tags[e.name]=this._states.tags[e.name]?this._states.tags[e.name].concat(e.tags):e.tags,this._states.tags[e.name]=this._states.tags[e.name].filter((function(i,n){return t._states.tags[e.name].indexOf(i)===n})))}},{key:"_suppress",value:function(e){var t=this;e.forEach((function(e){t._supress[e]=!0}))}},{key:"_release",value:function(e){var t=this;e.forEach((function(e){delete t._supress[e]}))}},{key:"pointer",value:function(e){var t={x:null,y:null};return(e=(e=e.originalEvent||e||window.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(t.x=e.pageX,t.y=e.pageY):(t.x=e.clientX,t.y=e.clientY),t}},{key:"_isNumeric",value:function(e){return!isNaN(parseFloat(e))}},{key:"_isNumberOrBoolean",value:function(e){return this._isNumeric(e)||"boolean"==typeof e}},{key:"_isNumberOrString",value:function(e){return this._isNumeric(e)||"string"==typeof e}},{key:"_isStringOrBoolean",value:function(e){return"string"==typeof e||"boolean"==typeof e}},{key:"difference",value:function(e,t){return{x:e.x-t.x,y:e.y-t.y}}},{key:"invalidated",get:function(){return this._invalidated}},{key:"states",get:function(){return this._states}}]),e}()).\u0275fac=function(e){return new(e||bz)(Ze(Lz))},bz.\u0275prov=pe({token:bz,factory:bz.\u0275fac}),bz),Vz=((yz=function(){function e(t){_classCallCheck2(this,e),this.carouselService=t,this._initialized=!1,this._pages=[],this._navData={disabled:!1,prev:{disabled:!1,htmlText:""},next:{disabled:!1,htmlText:""}},this._dotsData={disabled:!1,dots:[]},this.spyDataStreams()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.navSubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this,t=J(this.carouselService.getInitializedState().pipe(Bp((function(t){e.initialize(),e._updateNavPages(),e.draw(),e.update(),e.carouselService.sendChanges()}))),this.carouselService.getChangedState().pipe(np((function(e){return"position"===e.property.name})),Bp((function(t){e.update()}))),this.carouselService.getRefreshedState().pipe(Bp((function(){e._updateNavPages(),e.draw(),e.update(),e.carouselService.sendChanges()}))));this.navSubscription=t.subscribe((function(){}))}},{key:"initialize",value:function(){this._navData.disabled=!0,this._navData.prev.htmlText=this.carouselService.settings.navText[0],this._navData.next.htmlText=this.carouselService.settings.navText[1],this._dotsData.disabled=!0,this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}},{key:"_updateNavPages",value:function(){var e,t,i=this.carouselService.clones().length/2,n=i+this.carouselService.items().length,r=this.carouselService.maximum(!0),a=[],o=this.carouselService.settings,s=o.center||o.autoWidth||o.dotsData?1:o.dotsEach||o.items;if(s=+s,"page"!==o.slideBy&&(o.slideBy=Math.min(+o.slideBy,o.items)),o.dots||"page"===o.slideBy)for(e=i,t=0;e<n;e++){if(t>=s||0===t){if(a.push({start:Math.min(r,e-i),end:e-i+s-1}),Math.min(r,e-i)===r)break;t=0}t+=this.carouselService.mergers(this.carouselService.relative(e))}this._pages=a}},{key:"draw",value:function(){var e,t=this,i=this.carouselService.settings,n=this.carouselService.items(),r=n.length<=i.items;if(this._navData.disabled=!i.nav||r,this._dotsData.disabled=!i.dots||r,i.dots)if(e=this._pages.length-this._dotsData.dots.length,i.dotsData&&0!==e)this._dotsData.dots=[],n.forEach((function(e){t._dotsData.dots.push({active:!1,id:"dot-"+e.id,innerContent:e.dotContent,showInnerContent:!0})}));else if(e>0)for(var a=this._dotsData.dots.length>0?this._dotsData.dots.length:0,o=0;o<e;o++)this._dotsData.dots.push({active:!1,id:"dot-"+(o+a),innerContent:"",showInnerContent:!1});else e<0&&this._dotsData.dots.splice(e,Math.abs(e));this.carouselService.navData=this._navData,this.carouselService.dotsData=this._dotsData}},{key:"update",value:function(){this._updateNavButtons(),this._updateDots()}},{key:"_updateNavButtons",value:function(){var e=this.carouselService.settings,t=e.loop||e.rewind,i=this.carouselService.relative(this.carouselService.current());e.nav&&(this._navData.prev.disabled=!t&&i<=this.carouselService.minimum(!0),this._navData.next.disabled=!t&&i>=this.carouselService.maximum(!0)),this.carouselService.navData=this._navData}},{key:"_updateDots",value:function(){var e;this.carouselService.settings.dots&&(this._dotsData.dots.forEach((function(e){!0===e.active&&(e.active=!1)})),e=this._current(),this._dotsData.dots.length&&(this._dotsData.dots[e].active=!0),this.carouselService.dotsData=this._dotsData)}},{key:"_current",value:function(){var e=this.carouselService.relative(this.carouselService.current()),t=this._pages.filter((function(t,i){return t.start<=e&&t.end>=e})).pop();return this._pages.findIndex((function(e){return e.start===t.start&&e.end===t.end}))}},{key:"_getPosition",value:function(e){var t,i,n=this.carouselService.settings;return"page"===n.slideBy?(t=this._current(),i=this._pages.length,e?++t:--t,t=this._pages[(t%i+i)%i].start):(t=this.carouselService.relative(this.carouselService.current()),i=this.carouselService.items().length,e?t+=+n.slideBy:t-=+n.slideBy),t}},{key:"next",value:function(e){this.carouselService.to(this._getPosition(!0),e)}},{key:"prev",value:function(e){this.carouselService.to(this._getPosition(!1),e)}},{key:"to",value:function(e,t,i){var n;!i&&this._pages.length?(n=this._pages.length,this.carouselService.to(this._pages[(e%n+n)%n].start,t)):this.carouselService.to(e,t)}},{key:"moveByDot",value:function(e){var t=this._dotsData.dots.findIndex((function(t){return e===t.id}));this.to(t,this.carouselService.settings.dotsSpeed)}},{key:"toSlideById",value:function(e){var t=this.carouselService.slidesData.findIndex((function(t){return t.id===e&&!1===t.isCloned}));-1!==t&&t!==this.carouselService.current()&&this.carouselService.to(this.carouselService.relative(t),!1)}}]),e}()).\u0275fac=function(e){return new(e||yz)(Ze(Bz))},yz.\u0275prov=pe({token:yz,factory:yz.\u0275fac}),yz),jz=new qe("WindowToken"),Hz=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"nativeWindow",get:function(){throw new Error("Not implemented.")}}]),e}(),Uz=[{provide:Hz,useClass:(kz=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.call(this)}return _createClass(i,[{key:"nativeWindow",get:function(){return window}}]),i}(Hz),kz.\u0275fac=function(e){return new(e||kz)},kz.\u0275prov=pe({token:kz,factory:kz.\u0275fac}),kz)},{provide:jz,useFactory:function(e,t){return nd(t)?e.nativeWindow:{setTimeout:function(e,t){},clearTimeout:function(e){}}},deps:[Hz,Oc]}],qz=new qe("DocumentToken"),Wz=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"nativeDocument",get:function(){throw new Error("Not implemented.")}}]),e}(),zz=[{provide:Wz,useClass:(Cz=function(e){_inherits(i,e);var t=_createSuper(i);function i(){return _classCallCheck2(this,i),t.call(this)}return _createClass(i,[{key:"nativeDocument",get:function(){return document}}]),i}(Wz),Cz.\u0275fac=function(e){return new(e||Cz)},Cz.\u0275prov=pe({token:Cz,factory:Cz.\u0275fac}),Cz)},{provide:qz,useFactory:function(e,t){return nd(t)?e.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[Wz,Oc]}],Gz=((Iz=function(){function e(t,i,n){_classCallCheck2(this,e),this.carouselService=t,this._timeout=null,this._paused=!1,this.winRef=i,this.docRef=n,this.spyDataStreams()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.autoplaySubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this,t=J(this.carouselService.getInitializedState().pipe(Bp((function(){e.carouselService.settings.autoplay&&e.play()}))),this.carouselService.getChangedState().pipe(Bp((function(t){e._handleChangeObservable(t)}))),this.carouselService.getResizedState().pipe(Bp((function(){e.carouselService.settings.autoplay?e.play():e.stop()}))));this.autoplaySubscription=t.subscribe((function(){}))}},{key:"play",value:function(e,t){this._paused&&(this._paused=!1,this._setAutoPlayInterval(this.carouselService.settings.autoplayMouseleaveTimeout)),this.carouselService.is("rotating")||(this.carouselService.enter("rotating"),this._setAutoPlayInterval())}},{key:"_getNextTimeout",value:function(e,t){var i=this;return this._timeout&&this.winRef.clearTimeout(this._timeout),this._isArtificialAutoplayTimeout=!!e,this.winRef.setTimeout((function(){i._paused||i.carouselService.is("busy")||i.carouselService.is("interacting")||i.docRef.hidden||i.carouselService.next(t||i.carouselService.settings.autoplaySpeed)}),e||this.carouselService.settings.autoplayTimeout)}},{key:"_setAutoPlayInterval",value:function(e){this._timeout=this._getNextTimeout(e)}},{key:"stop",value:function(){this.carouselService.is("rotating")&&(this._paused=!0,this.winRef.clearTimeout(this._timeout),this.carouselService.leave("rotating"))}},{key:"pause",value:function(){this.carouselService.is("rotating")&&(this._paused=!0)}},{key:"_handleChangeObservable",value:function(e){"settings"===e.property.name?this.carouselService.settings.autoplay?this.play():this.stop():"position"===e.property.name&&this.carouselService.settings.autoplay&&this._setAutoPlayInterval()}},{key:"_playAfterTranslated",value:function(){var e=this;Gd("translated").pipe(Ap((function(t){return e.carouselService.getTranslatedState()})),Sp(),np((function(){return e._isArtificialAutoplayTimeout})),Bp((function(){return e._setAutoPlayInterval()}))).subscribe((function(){}))}},{key:"startPausing",value:function(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&this.pause()}},{key:"startPlayingMouseLeave",value:function(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}},{key:"startPlayingTouchEnd",value:function(){this.carouselService.settings.autoplayHoverPause&&this.carouselService.is("rotating")&&(this.play(),this._playAfterTranslated())}}]),e}()).\u0275fac=function(e){return new(e||Iz)(Ze(Bz),Ze(jz),Ze(qz))},Iz.\u0275prov=pe({token:Iz,factory:Iz.\u0275fac}),Iz),Yz=((xz=function(){function e(t){_classCallCheck2(this,e),this.carouselService=t,this.spyDataStreams()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.lazyLoadSubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this,t=J(this.carouselService.getInitializedState().pipe(Bp((function(){var t=e.carouselService.settings&&!e.carouselService.settings.lazyLoad;e.carouselService.slidesData.forEach((function(e){return e.load=!!t}))}))),this.carouselService.getChangeState(),this.carouselService.getResizedState()).pipe(Bp((function(t){return e._defineLazyLoadSlides(t)})));this.lazyLoadSubscription=t.subscribe((function(){}))}},{key:"_defineLazyLoadSlides",value:function(e){var t=this;if(this.carouselService.settings&&this.carouselService.settings.lazyLoad&&(e.property&&"position"===e.property.name||"initialized"===e||"resized"===e)){var i=this.carouselService.settings,n=this.carouselService.clones().length,r=i.center&&Math.ceil(i.items/2)||i.items,a=i.center&&-1*r||0,o=(e.property&&void 0!==e.property.value?e.property.value:this.carouselService.current())+a;for(i.lazyLoadEager>0&&(r+=i.lazyLoadEager,i.loop&&(o-=i.lazyLoadEager,r++));a++<r;)this._load(n/2+this.carouselService.relative(o)),n&&this.carouselService.clones(this.carouselService.relative(o)).forEach((function(e){return t._load(e)})),o++}}},{key:"_load",value:function(e){this.carouselService.slidesData[e].load||(this.carouselService.slidesData[e].load=!0)}}]),e}()).\u0275fac=function(e){return new(e||xz)(Ze(Bz))},xz.\u0275prov=pe({token:xz,factory:xz.\u0275fac}),xz),Kz=((Oz=function(){function e(t){_classCallCheck2(this,e),this.carouselService=t,this.swapping=!0,this.previous=void 0,this.next=void 0,this.spyDataStreams()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.animateSubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this,t=this.carouselService.getChangeState().pipe(Bp((function(t){"position"===t.property.name&&(e.previous=e.carouselService.current(),e.next=t.property.value)}))),i=J(this.carouselService.getDragState(),this.carouselService.getDraggedState(),this.carouselService.getTranslatedState()).pipe(Bp((function(t){return e.swapping="translated"===t}))),n=J(t,this.carouselService.getTranslateState().pipe(Bp((function(t){e.swapping&&(e.carouselService._options.animateOut||e.carouselService._options.animateIn)&&e._swap()}))),i).pipe();this.animateSubscription=n.subscribe((function(){}))}},{key:"_swap",value:function(){if(1===this.carouselService.settings.items){var e;this.carouselService.speed(0);var t=this.carouselService.slidesData[this.previous],i=this.carouselService.slidesData[this.next],n=this.carouselService.settings.animateIn,r=this.carouselService.settings.animateOut;this.carouselService.current()!==this.previous&&(r&&(e=+this.carouselService.coordinates(this.previous)-+this.carouselService.coordinates(this.next),this.carouselService.slidesData.forEach((function(i){i.id===t.id&&(i.left=e+"px",i.isAnimated=!0,i.isDefAnimatedOut=!0,i.isCustomAnimatedOut=!0)}))),n&&this.carouselService.slidesData.forEach((function(e){e.id===i.id&&(e.isAnimated=!0,e.isDefAnimatedIn=!0,e.isCustomAnimatedIn=!0)})))}}},{key:"clear",value:function(e){var t=this;this.carouselService.slidesData.forEach((function(i){i.id===e&&(i.left="",i.isAnimated=!1,i.isDefAnimatedOut=!1,i.isCustomAnimatedOut=!1,i.isDefAnimatedIn=!1,i.isCustomAnimatedIn=!1,i.classes=t.carouselService.setCurSlideClasses(i))})),this.carouselService.onTransitionEnd()}}]),e}()).\u0275fac=function(e){return new(e||Oz)(Ze(Bz))},Oz.\u0275prov=pe({token:Oz,factory:Oz.\u0275fac}),Oz),Xz=((Az=function(){function e(t){_classCallCheck2(this,e),this.carouselService=t,this.spyDataStreams()}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.autoHeightSubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this,t=J(this.carouselService.getInitializedState().pipe(Bp((function(t){e.carouselService.settings.autoHeight?e.update():e.carouselService.slidesData.forEach((function(e){return e.heightState="full"}))}))),this.carouselService.getChangedState().pipe(Bp((function(t){e.carouselService.settings.autoHeight&&"position"===t.property.name&&e.update()}))),this.carouselService.getRefreshedState().pipe(Bp((function(t){e.carouselService.settings.autoHeight&&e.update()}))));this.autoHeightSubscription=t.subscribe((function(){}))}},{key:"update",value:function(){var e=this.carouselService.settings.items,t=this.carouselService.current(),i=t+e;this.carouselService.settings.center&&(t=e%2==1?t-(e-1)/2:t-e/2,i=e%2==1?t+e:t+e+1),this.carouselService.slidesData.forEach((function(e,n){e.heightState=n>=t&&n<i?"full":"nulled"}))}}]),e}()).\u0275fac=function(e){return new(e||Az)(Ze(Bz))},Az.\u0275prov=pe({token:Az,factory:Az.\u0275fac}),Az),Jz=((Tz=function(){function e(t,i,n){_classCallCheck2(this,e),this.carouselService=t,this.route=i,this.router=n,this.spyDataStreams(),this.route||(this.route={fragment:Gd("no route").pipe(Cp(1))}),this.router||(this.router={navigate:function(e,t){}})}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.hashSubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this,t=J(this.carouselService.getInitializedState().pipe(Bp((function(){return e.listenToRoute()}))),this.carouselService.getChangedState().pipe(Bp((function(t){if(e.carouselService.settings.URLhashListener&&"position"===t.property.name){var i=e.carouselService.current(),n=e.carouselService.slidesData[i].hashFragment;if(!n||n===e.currentHashFragment)return;e.router.navigate(["./"],{fragment:n,relativeTo:e.route})}}))));this.hashSubscription=t.subscribe((function(){}))}},{key:"rewind",value:function(e){var t=this.carouselService.slidesData.findIndex((function(t){return t.hashFragment===e&&!1===t.isCloned}));-1!==t&&t!==this.carouselService.current()&&this.carouselService.to(this.carouselService.relative(t),!1)}},{key:"listenToRoute",value:function(){var e=this;this.route.fragment.pipe(VT("URLHash"===this.carouselService.settings.startPosition?0:2)).subscribe((function(t){e.currentHashFragment=t,e.rewind(t)}))}}]),e}()).\u0275fac=function(e){return new(e||Tz)(Ze(Bz),Ze($f,8),Ze(cm,8))},Tz.\u0275prov=pe({token:Tz,factory:Tz.\u0275fac}),Tz),Qz=0,Zz=((Ez=function(){function e(t){_classCallCheck2(this,e),this.tplRef=t,this.id="owl-slide-"+Qz++,this._dataMerge=1,this.width=0,this.dotContent="",this.dataHash=""}return _createClass(e,[{key:"isNumeric",value:function(e){return!isNaN(parseFloat(e))}},{key:"dataMerge",set:function(e){this._dataMerge=this.isNumeric(e)?e:1},get:function(){return this._dataMerge}}]),e}()).\u0275fac=function(e){return new(e||Ez)(Lo(_l))},Ez.\u0275dir=_t({type:Ez,selectors:[["ng-template","carouselSlide",""]],inputs:{id:"id",width:"width",dotContent:"dotContent",dataHash:"dataHash",dataMerge:"dataMerge"}}),Ez),$z=((Sz=function(){function e(t,i,n,r,a,o,s,l,c,u,h,d){_classCallCheck2(this,e),this.el=t,this.resizeService=i,this.carouselService=n,this.navigationService=r,this.autoplayService=a,this.lazyLoadService=o,this.animateService=s,this.autoHeightService=l,this.hashService=c,this.logger=u,this.changeDetectorRef=h,this.translated=new ec,this.dragging=new ec,this.change=new ec,this.changed=new ec,this.initialized=new ec,this.slidesData=[],this.carouselLoaded=!1,this.docRef=d}return _createClass(e,[{key:"onVisibilityChange",value:function(e){if(this.carouselService.settings.autoplay)switch(this.docRef.visibilityState){case"visible":this.autoplayService.play();break;case"hidden":this.autoplayService.stop()}}},{key:"ngOnInit",value:function(){this.spyDataStreams(),this.carouselWindowWidth=this.el.nativeElement.querySelector(".owl-carousel").clientWidth}},{key:"ngAfterContentChecked",value:function(){}},{key:"ngAfterContentInit",value:function(){var e=this;this.slides.toArray().length?(this.carouselService.setup(this.carouselWindowWidth,this.slides.toArray(),this.options),this.carouselService.initialize(this.slides.toArray()),this._winResizeWatcher()):this.logger.log("There are no slides to show. So the carousel won't be rendered"),this._slidesChangesSubscription=this.slides.changes.pipe(Bp((function(t){t.toArray().length?(e.carouselService.setup(e.carouselWindowWidth,t.toArray(),e.options),e.carouselService.initialize(t.toArray())):(e.carouselLoaded=!1,e.logger.log("There are no slides to show. So the carousel won't be re-rendered"))}))).subscribe((function(){}))}},{key:"ngOnDestroy",value:function(){this.resizeSubscription&&this.resizeSubscription.unsubscribe(),this._slidesChangesSubscription&&this._slidesChangesSubscription.unsubscribe(),this._allObservSubscription&&this._allObservSubscription.unsubscribe()}},{key:"spyDataStreams",value:function(){var e=this;this._viewCurSettings$=this.carouselService.getViewCurSettings().pipe(Bp((function(t){e.owlDOMData=t.owlDOMData,e.stageData=t.stageData,e.slidesData=t.slidesData,e.carouselLoaded||(e.carouselLoaded=!0),e.navData=t.navData,e.dotsData=t.dotsData,e.changeDetectorRef.markForCheck()}))),this._initializedCarousel$=this.carouselService.getInitializedState().pipe(Bp((function(){e.gatherTranslatedData(),e.initialized.emit(e.slidesOutputData)}))),this._translatedCarousel$=this.carouselService.getTranslatedState().pipe(Bp((function(){e.gatherTranslatedData(),e.translated.emit(e.slidesOutputData)}))),this._changeCarousel$=this.carouselService.getChangeState().pipe(Bp((function(){e.gatherTranslatedData(),e.change.emit(e.slidesOutputData)}))),this._changedCarousel$=this.carouselService.getChangeState().pipe(Ap((function(t){return J(Gd(t).pipe(np((function(){return"position"===t.property.name})),Ap((function(){return W(e.slidesData)})),VT(t.property.value),Cp(e.carouselService.settings.items),j((function(t){var i=e.carouselService.clonedIdPrefix,n=t.id.indexOf(i)>=0?t.id.slice(i.length):t.id;return Object.assign(Object.assign({},t),{id:n,isActive:!0})})),Np(nz,[]),j((function(i){return{slides:i,startPosition:e.carouselService.relative(t.property.value)}}))))})),Bp((function(t){e.gatherTranslatedData(),e.changed.emit(t.slides.length?t:e.slidesOutputData)}))),this._draggingCarousel$=this.carouselService.getDragState().pipe(Bp((function(){e.gatherTranslatedData(),e.dragging.emit({dragging:!0,data:e.slidesOutputData})})),Ap((function(){return e.carouselService.getDraggedState().pipe(j((function(){return!!e.carouselService.is("animating")})))})),Ap((function(t){return t?e.carouselService.getTranslatedState().pipe(Sp()):Gd("not animating")})),Bp((function(){e.dragging.emit({dragging:!1,data:e.slidesOutputData})}))),this._carouselMerge$=J(this._viewCurSettings$,this._translatedCarousel$,this._draggingCarousel$,this._changeCarousel$,this._changedCarousel$,this._initializedCarousel$),this._allObservSubscription=this._carouselMerge$.subscribe((function(){}))}},{key:"_winResizeWatcher",value:function(){var e=this;Object.keys(this.carouselService._options.responsive).length&&(this.resizeSubscription=this.resizeService.onResize$.pipe(np((function(){return e.carouselWindowWidth!==e.el.nativeElement.querySelector(".owl-carousel").clientWidth})),BO(this.carouselService.settings.responsiveRefreshRate)).subscribe((function(){e.carouselService.onResize(e.el.nativeElement.querySelector(".owl-carousel").clientWidth),e.carouselWindowWidth=e.el.nativeElement.querySelector(".owl-carousel").clientWidth})))}},{key:"onTransitionEnd",value:function(){this.carouselService.onTransitionEnd()}},{key:"next",value:function(){this.carouselLoaded&&this.navigationService.next(this.carouselService.settings.navSpeed)}},{key:"prev",value:function(){this.carouselLoaded&&this.navigationService.prev(this.carouselService.settings.navSpeed)}},{key:"moveByDot",value:function(e){this.carouselLoaded&&this.navigationService.moveByDot(e)}},{key:"to",value:function(e){this.carouselLoaded&&this.navigationService.toSlideById(e)}},{key:"gatherTranslatedData",value:function(){var e,t=this.carouselService.clonedIdPrefix,i=this.slidesData.filter((function(e){return!0===e.isActive})).map((function(e){return{id:e.id.indexOf(t)>=0?e.id.slice(t.length):e.id,width:e.width,marginL:e.marginL,marginR:e.marginR,center:e.isCentered}}));e=this.carouselService.relative(this.carouselService.current()),this.slidesOutputData={startPosition:e,slides:i}}},{key:"startPausing",value:function(){this.autoplayService.startPausing()}},{key:"startPlayML",value:function(){this.autoplayService.startPlayingMouseLeave()}},{key:"startPlayTE",value:function(){this.autoplayService.startPlayingTouchEnd()}}]),e}()).\u0275fac=function(e){return new(e||Sz)(Lo($s),Lo(Rz),Lo(Bz),Lo(Vz),Lo(Gz),Lo(Yz),Lo(Kz),Lo(Xz),Lo(Jz),Lo(Lz),Lo(Qa),Lo(qz))},Sz.\u0275cmp=gt({type:Sz,selectors:[["owl-carousel-o"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,Zz,!1),2&e&&hc(n=yc())&&(t.slides=n)},hostBindings:function(e,t){1&e&&Ko("visibilitychange",(function(e){return t.onVisibilityChange(e)}),!1,Yi)},inputs:{options:"options"},outputs:{translated:"translated",dragging:"dragging",change:"change",changed:"changed",initialized:"initialized"},features:[Xs([Vz,Gz,Bz,Yz,Kz,Xz,Jz])],decls:4,vars:9,consts:[[1,"owl-carousel","owl-theme",3,"ngClass","mouseover","mouseleave","touchstart","touchend"],["owlCarousel",""],["class","owl-stage-outer",4,"ngIf"],[4,"ngIf"],[1,"owl-stage-outer"],[3,"owlDraggable","stageData","slidesData"],[1,"owl-nav",3,"ngClass"],[1,"owl-prev",3,"ngClass","innerHTML","click"],[1,"owl-next",3,"ngClass","innerHTML","click"],[1,"owl-dots",3,"ngClass"],["class","owl-dot",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"owl-dot",3,"ngClass","click"],[3,"innerHTML"]],template:function(e,t){1&e&&(jo(0,"div",0,1),Ko("mouseover",(function(){return t.startPausing()}))("mouseleave",(function(){return t.startPlayML()}))("touchstart",(function(){return t.startPausing()}))("touchend",(function(){return t.startPlayTE()})),Po(2,az,2,6,"div",2),Po(3,cz,6,15,"ng-container",3),Ho()),2&e&&(Bo("ngClass",zl(3,uz,null==t.owlDOMData?null:t.owlDOMData.rtl,null==t.owlDOMData?null:t.owlDOMData.isLoaded,null==t.owlDOMData?null:t.owlDOMData.isResponsive,null==t.owlDOMData?null:t.owlDOMData.isMouseDragable,null==t.owlDOMData?null:t.owlDOMData.isGrab)),_r(2),Bo("ngIf",t.carouselLoaded),_r(1),Bo("ngIf",t.slides.toArray().length))},directives:function(){return[Ah,Dh,eG,xh]},styles:[".owl-theme[_ngcontent-%COMP%] { display: block; }"]}),Sz),eG=((_z=function(){function e(t,i,n,r,a){var o=this;_classCallCheck2(this,e),this.zone=t,this.el=i,this.renderer=n,this.carouselService=r,this.animateService=a,this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this._oneDragMove$=new x,this.bindOneMouseTouchMove=function(e){o._oneMouseTouchMove(e)},this.bindOnDragMove=function(e){o._onDragMove(e)},this.bindOnDragEnd=function(e){o._onDragEnd(e)},this._oneClickHandler=function(){o.listenerOneClick=o.renderer.listen(o._drag.target,"click",(function(){return!1})),o.listenerOneClick()}}return _createClass(e,[{key:"onMouseDown",value:function(e){this.owlDraggable.isMouseDragable&&this._onDragStart(e)}},{key:"onTouchStart",value:function(e){this.owlDraggable.isTouchDragable&&this._onDragStart(e)}},{key:"onTouchCancel",value:function(e){this._onDragEnd(e)}},{key:"onDragStart",value:function(){if(this.owlDraggable.isMouseDragable)return!1}},{key:"onSelectStart",value:function(){if(this.owlDraggable.isMouseDragable)return!1}},{key:"ngOnInit",value:function(){var e=this;this._oneMoveSubsription=this._oneDragMove$.pipe(Sp()).subscribe((function(){e._sendChanges()}))}},{key:"ngOnDestroy",value:function(){this._oneMoveSubsription.unsubscribe()}},{key:"_onDragStart",value:function(e){var t=this,i=null;3!==e.which&&(i=this._prepareDragging(e),this._drag.time=(new Date).getTime(),this._drag.target=e.target,this._drag.stage.start=i,this._drag.stage.current=i,this._drag.pointer=this._pointer(e),this.listenerMouseUp=this.renderer.listen(document,"mouseup",this.bindOnDragEnd),this.listenerTouchEnd=this.renderer.listen(document,"touchend",this.bindOnDragEnd),this.zone.runOutsideAngular((function(){t.listenerOneMouseMove=t.renderer.listen(document,"mousemove",t.bindOneMouseTouchMove),t.listenerOneTouchMove=t.renderer.listen(document,"touchmove",t.bindOneMouseTouchMove)})))}},{key:"_oneMouseTouchMove",value:function(e){var t=this._difference(this._drag.pointer,this._pointer(e));this.listenerATag&&this.listenerATag(),Math.abs(t.x)<3&&Math.abs(t.y)<3&&this._is("valid")||Math.abs(t.x)<3&&Math.abs(t.x)<Math.abs(t.y)&&this._is("valid")||(this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving=!0,this.blockClickAnchorInDragging(e),this.listenerMouseMove=this.renderer.listen(document,"mousemove",this.bindOnDragMove),this.listenerTouchMove=this.renderer.listen(document,"touchmove",this.bindOnDragMove),e.preventDefault(),this._enterDragging(),this._oneDragMove$.next(e))}},{key:"blockClickAnchorInDragging",value:function(e){for(var t=e.target;t&&!(t instanceof HTMLAnchorElement);)t=t.parentElement;t instanceof HTMLAnchorElement&&(this.listenerATag=this.renderer.listen(t,"click",(function(){return!1})))}},{key:"_onDragMove",value:function(e){var t,i=this.carouselService.defineNewCoordsDrag(e,this._drag);!1!==i&&(t=i,e.preventDefault(),this._drag.stage.current=t,this._animate(t.x-this._drag.stage.start.x))}},{key:"_animate",value:function(e){this.renderer.setStyle(this.el.nativeElement.children[0],"transform","translate3d(".concat(e,"px,0px,0px")),this.renderer.setStyle(this.el.nativeElement.children[0],"transition","0s")}},{key:"_onDragEnd",value:function(e){this.carouselService.owlDOMData.isGrab=!1,this.listenerOneMouseMove(),this.listenerOneTouchMove(),this._drag.moving&&(this.renderer.setStyle(this.el.nativeElement.children[0],"transform",""),this.renderer.setStyle(this.el.nativeElement.children[0],"transition",this.carouselService.speed(+this.carouselService.settings.dragEndSpeed||this.carouselService.settings.smartSpeed)/1e3+"s"),this._finishDragging(e),this.listenerMouseMove(),this.listenerTouchMove()),this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null,active:!1,moving:!1},this.listenerMouseUp(),this.listenerTouchEnd()}},{key:"_prepareDragging",value:function(e){return this.carouselService.prepareDragging(e)}},{key:"_finishDragging",value:function(e){this.carouselService.finishDragging(e,this._drag,this._oneClickHandler)}},{key:"_pointer",value:function(e){return this.carouselService.pointer(e)}},{key:"_difference",value:function(e,t){return this.carouselService.difference(e,t)}},{key:"_is",value:function(e){return this.carouselService.is(e)}},{key:"_enter",value:function(e){this.carouselService.enter(e)}},{key:"_sendChanges",value:function(){this.carouselService.sendChanges()}},{key:"onTransitionEnd",value:function(){this.carouselService.onTransitionEnd()}},{key:"_enterDragging",value:function(){this.carouselService.enterDragging()}},{key:"clear",value:function(e){this.animateService.clear(e)}}]),e}()).\u0275fac=function(e){return new(e||_z)(Lo(Wc),Lo($s),Lo(nl),Lo(Bz),Lo(Kz))},_z.\u0275cmp=gt({type:_z,selectors:[["owl-stage"]],hostBindings:function(e,t){1&e&&Ko("mousedown",(function(e){return t.onMouseDown(e)}))("touchstart",(function(e){return t.onTouchStart(e)}))("touchcancel",(function(e){return t.onTouchCancel(e)}))("dragstart",(function(){return t.onDragStart()}))("selectstart",(function(){return t.onSelectStart()}))},inputs:{owlDraggable:"owlDraggable",stageData:"stageData",slidesData:"slidesData"},decls:3,vars:8,consts:[[1,"owl-stage",3,"ngStyle","transitionend"],[4,"ngFor","ngForOf"],[1,"owl-item",3,"ngClass","ngStyle","animationend"],[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(e,t){1&e&&(jo(0,"div"),jo(1,"div",0),Ko("transitionend",(function(){return t.onTransitionEnd()})),Po(2,fz,3,9,"ng-container",1),Ho(),Ho()),2&e&&(_r(1),Bo("ngStyle",zl(2,Dz,t.stageData.width+"px",t.stageData.transform,t.stageData.transition,t.stageData.paddingL?t.stageData.paddingL+"px":"",t.stageData.paddingR?t.stageData.paddingR+"px":"")),_r(1),Bo("ngForOf",t.slidesData))},directives:[qh,xh,Ah,Dh,Wh],encapsulation:2,data:{animation:[t_("autoHeight",[a_("nulled",r_({height:0})),a_("full",r_({height:"*"})),o_("full => nulled",[i_("700ms 350ms")]),o_("nulled => full",[i_(350)])])]}}),_z),tG=((wz=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:wz}),wz.\u0275inj=ve({factory:function(e){return new(e||wz)},providers:[Uz,Rz,zz,Lz],imports:[[id]]}),wz);function iG(e,t){if(1&e&&(jo(0,"mat-option",31),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i),_r(1),Ts(" ",i," ")}}var nG=function(e){return{"background-image":e}};function rG(e,t){if(1&e&&(jo(0,"div",33),jo(1,"div",34),Uo(2,"div",35),jo(3,"div",36),Uo(4,"span",37),jo(5,"span",38),Ss(6," Exterior University - politics [bachelors] "),Ho(),jo(7,"div",39),Uo(8,"div",40),Ho(),Ho(),jo(9,"div",41),jo(10,"div",42),jo(11,"div"),Uo(12,"span",43),jo(13,"span",44),Ss(14,"STUDENTS"),Ho(),Ho(),Uo(15,"div",45),jo(16,"div"),jo(17,"span",43),Ss(18,"2007"),Ho(),jo(19,"span",44),Ss(20,"Sessions"),Ho(),Ho(),Ho(),Uo(21,"div",46),Ho(),Ho(),Ho()),2&e){var i=$o().$implicit;_r(2),Bo("ngStyle",ql(8,nG,"url("+i.imageUrl+")")),_r(2),Bo("innerHTML",i.name,tr),_r(1),Bo("innerHTML",i.specialisation,tr),_r(3),us("width",i.rating,"%"),_r(4),Bo("innerHTML",i.studentsCount,tr),_r(5),Bo("innerHTML",i.sessionsCount,tr),_r(4),Bo("innerHTML",i.review,tr)}}function aG(e,t){1&e&&(qo(0),Po(1,rG,22,10,"ng-template",32),Wo())}var oG,sG,lG,cG=((sG=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.router=t,this.loginDetailsService=i,this.breakpointObserver=n,this.httpService=r,this.webSocketService=a,this.switchView=!1,this.showContainer=!1,this.reviewsView=!0,this.firstName="shubham",this.lastName="sharma",this.myControl=new xy,this.options=["Tools","Marketing","Content","Project Management","Sales","E-comm","Industry Consulation","Strategy","Finance","HR","Operations","IT Support"],this.customOptions={loop:!0,autoplay:!0,center:!0,dots:!0,autoHeight:!0,autoWidth:!0,responsive:{0:{items:1},300:{items:1},600:{items:2},800:{items:3},1e3:{items:3},1300:{items:4}}},this.slidesStore=[{id:1,imageUrl:"../../assets/images/suyashKejriwal.jpg",name:"Suyash Kejriwal",specialisation:"PIET - B.tech[CSE]",studentsCount:50,sessionsCount:98,rating:85,review:"Fellowgenius is a standalone peer to peer online classes platform. its beautiful user interface make Experts and learner feel at home. it is a great platform to promote online educators."},{id:2,imageUrl:"../../assets/images/vaibhav.jpeg",name:"Vaibhav Vishal Jha",specialisation:"PIET - B.tech[CSE]",review:"As a teaching expert, it was an awesome experience being a part of this wonderful platform. The layout is very clean anyone would appreciate its simplicity",studentsCount:30,sessionsCount:46,rating:90},{id:3,imageUrl:"../../assets/images/ajayVerma.jpg",name:"Ajay Verma",specialisation:"PIET - B.tech[CSE]",review:"I really loved the experience of teaching here, not only the quality of the platform but also the ease to understand its functionality. Most of the features are self explanatory here, Good job guyz",studentsCount:21,sessionsCount:53,rating:100}]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.filteredOptions=this.myControl.valueChanges.pipe(Dp(""),j((function(t){return e._filter(t)})))}},{key:"sendData",value:function(){this.httpService.randomApi().subscribe((function(e){console.log(e)}))}},{key:"getAllCategories",value:function(){var e=this;console.log("///fetching all categories"),this.httpService.getAllCategories().subscribe((function(t){var i=t;if(console.log(i),i.length>0){console.log("inside if");for(var n=0;n<i.length;n++)console.log(i[n].category),e.options.push(i[n].category)}console.log(e.options)}))}},{key:"switchReviewsView",value:function(){this.reviewsView=!this.reviewsView}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.options.filter((function(e){return e.toLowerCase().includes(t)}))}},{key:"displaySelectedSubjects",value:function(){this.selectedSubject&&this.router.navigate(["searchResults"],{queryParams:{subject:this.selectedSubject}})}},{key:"onSignUp",value:function(){this.router.navigate(["signUp"])}},{key:"toLoginPage",value:function(){this.router.navigate(["login"])}}]),e}()).\u0275fac=function(e){return new(e||sG)(Lo(cm),Lo(gb),Lo(JT),Lo(lk),Lo(yA))},sG.\u0275cmp=gt({type:sG,selectors:[["app-facade"]],decls:76,vars:12,consts:[[1,"search-container"],[1,"search-bg-left"],[1,"search-box-container"],[1,"input-group"],[1,"input-group-header"],[1,"searchButton",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["type","search","name","search","placeholder","Search by Subjects",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group-footer"],[1,"how-it-works-container"],[1,"header-panel"],[1,"process"],[1,"process__item"],[1,"process__number"],[1,"process__title"],[1,"process__subtitle"],[1,"wrapper",2,"padding-top","20px"],[1,"whyFGContainer"],["role","group","aria-label","Basic example",1,"btn-group","carousel-btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],[2,"width","70%","margin","auto",3,"options"],[4,"ngFor","ngForOf"],[1,"footer-container"],[1,"footer-inner"],[1,"footer-item"],["href","#"],["routerLink","/about-us"],[1,"copyright-container"],[3,"value"],["carouselSlide",""],[1,"why_fg_container"],[1,"search-result-card"],[1,"result-profile-pic",3,"ngStyle"],[1,"result-card-header"],[1,"result-card-name",3,"innerHTML"],[1,"result-card-specalizaiton",3,"innerHTML"],[1,"stars-outer"],[1,"stars-inner"],[1,"result-card-content"],[1,"numbers-container"],[1,"number",3,"innerHTML"],[1,"info"],[1,"separtor"],[1,"result-card-descirption",3,"innerHTML"]],template:function(e,t){if(1&e&&(Uo(0,"app-nav-bar"),jo(1,"div",0),Uo(2,"div",1),jo(3,"div",2),jo(4,"div",3),jo(5,"span",4),Ss(6,"Find a Genius Coach"),Ho(),jo(7,"form"),jo(8,"button",5),Ko("click",(function(){return t.displaySelectedSubjects()})),Uo(9,"i",6),Ho(),jo(10,"input",7),Ko("ngModelChange",(function(e){return t.selectedSubject=e})),Ho(),jo(11,"mat-autocomplete",8,9),Po(13,iG,2,2,"mat-option",10),Xl(14,"async"),Ho(),Ho(),jo(15,"span",11),Ss(16,"Learn from the world\u2019s best experts. It\u2019s fast and easy with fellowGenius! "),Ho(),Ho(),Ho(),Ho(),Uo(17,"app-advertisement-banner"),jo(18,"div",12),jo(19,"h1",13),Ss(20,"How it works?"),Ho(),jo(21,"ul",14),jo(22,"li",15),jo(23,"span",16),Ss(24,"1"),Ho(),jo(25,"span",17),Ss(26,"REGISTER"),Ho(),jo(27,"span",18),Ss(28,"Create your account in few easy steps. Verify."),Ho(),Ho(),jo(29,"li",15),jo(30,"span",16),Ss(31,"2"),Ho(),jo(32,"span",17),Ss(33,"SEARCH"),Ho(),jo(34,"span",18),Ss(35,"Find an Expert. Send a request to schedule a class. "),Ho(),Ho(),jo(36,"li",15),jo(37,"span",16),Ss(38,"3"),Ho(),jo(39,"span",17),Ss(40,"Start learning"),Ho(),jo(41,"span",18),Ss(42,"Pay the fee and start your classes immediately."),Ho(),Ho(),Ho(),Ho(),jo(43,"div",19),jo(44,"div",20),jo(45,"h1",13),Ss(46,"WHY FELLOWGENIUS ?"),Ho(),jo(47,"div",21),jo(48,"button",22),Ko("click",(function(){return t.switchReviewsView()})),Ss(49," Expert "),Ho(),jo(50,"button",22),Ko("click",(function(){return t.switchReviewsView()})),Ss(51," Learner "),Ho(),Ho(),jo(52,"owl-carousel-o",23),Po(53,aG,2,0,"ng-container",24),Ho(),Ho(),jo(54,"div",25),jo(55,"div",26),jo(56,"section",27),jo(57,"ul"),jo(58,"li"),jo(59,"a",28),Ss(60,"Home"),Ho(),Ho(),jo(61,"li"),jo(62,"a",29),Ss(63,"About us"),Ho(),Ho(),jo(64,"li"),jo(65,"a",28),Ss(66,"Terms and Conditions"),Ho(),Ho(),jo(67,"li"),jo(68,"a",28),Ss(69,"Privacy Policy"),Ho(),Ho(),jo(70,"li"),jo(71,"a",28),Ss(72,"Contact Us"),Ho(),Ho(),Ho(),Ho(),jo(73,"div",30),jo(74,"span"),Ss(75,"\xa9 copyright 2020"),Ho(),Ho(),Ho(),Ho(),Ho()),2&e){var i=Mo(12);_r(10),Bo("formControl",t.myControl)("matAutocomplete",i)("ngModel",t.selectedSubject),_r(3),Bo("ngForOf",Jl(14,10,t.filteredOptions)),_r(35),hs("btnActive",t.reviewsView),_r(2),hs("btnActive",!t.reviewsView),_r(2),Bo("options",t.customOptions),_r(1),Bo("ngForOf",t.slidesStore)}},directives:[tz,qy,ug,My,eg,ix,cg,Gy,ZO,xh,iz,$z,hm,pT,Zz,qh],pipes:[$h],styles:[".search-container[_ngcontent-%COMP%]{height:250px;width:100%;display:block;float:left;position:relative}.search-container[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]{width:350px;margin:0 auto;position:relative;top:80px}.search-container[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-header[_ngcontent-%COMP%]{font-size:16px;text-align:center;width:100%;display:inline-block;margin-bottom:10px;font-weight:600;color:#761175;text-transform:uppercase}.search-container[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-footer[_ngcontent-%COMP%]{font-size:14px;text-align:center;width:100%;display:inline-block;margin-top:10px}.search-container[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]{width:100%;height:34px;text-align:left;padding-left:16px;border:1px solid #cfd8dc;border-radius:100px;top:-2px;position:relative;left:4px;width:350px;font-size:13px;padding-right:40px}.search-container[_ngcontent-%COMP%]   .search-box-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-btn[_ngcontent-%COMP%]{width:20px;position:absolute;right:43px;top:-5px;padding-left:16px;background:transparent;cursor:pointer;border:0;height:24px;outline:none}.search-container[_ngcontent-%COMP%]   .search-bg-left[_ngcontent-%COMP%]{background-size:contain;width:265px;height:220px;position:absolute;right:10px;top:27px}.searchButton[_ngcontent-%COMP%]{background:none;outline:none;border:none;color:#761175;font-size:larger;position:absolute;right:4px;top:37px;z-index:1}.searchButton[_ngcontent-%COMP%]:hover{background:#e0e0e0;border-radius:50%}.carousel-btn-group[_ngcontent-%COMP%]{margin-bottom:10px}.whyFGContainer[_ngcontent-%COMP%]{max-width:1000px;margin:auto auto 5vh}@media only screen and (min-width:1600px){.whyFGContainer[_ngcontent-%COMP%]{max-width:1300px}}@media only screen and (max-width:600px){.whyFGContainer[_ngcontent-%COMP%]{padding-left:5vw}}.btnActive[_ngcontent-%COMP%]{background-color:#7d0f7d!important;border-color:#7d0f7d!important;box-shadow:0 0 0 .2rem #f7e4f9!important;color:#fff!important}"]}),sG),uG=((oG=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||oG)},oG.\u0275cmp=gt({type:oG,selectors:[["app-terms-and-conditions"]],decls:1056,vars:1,consts:[[2,"height","80vh"],[2,"overflow","scroll",3,"scrollTop"],["body",""],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","1.5em","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial"],[2,"box-sizing","border-box","outline","none","font-weight","bolder"],[2,"box-sizing","border-box","outline","none","text-decoration","underline"],[2,"box-sizing","border-box","outline","none","margin-bottom","1.5em","margin-top","0px","padding","0px","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial"],[2,"box-sizing","border-box","outline","none","display","list-item","margin","0px 0px 0.5em 1.5em"],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","1.27551em","font-family",'Montserrat, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-weight","inherit","line-height","1.2","font-size","1.176em","color","rgb(77, 77, 77)","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial"],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","1.5em","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial","padding-left","40px"],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","1.5em","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial","padding-left","80px"],[2,"box-sizing","border-box","outline","none","display","list-item","margin","0px 0px 0.5em 1.5em","list-style-type","none"],[2,"box-sizing","border-box","outline","none","margin-bottom","1.5em","margin-top","0px","padding","0px"],["href","https://elearningindustry.com/legal/purchase-terms-and-conditions","rel","",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://elearningindustry.com/privacy-policy","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","1.5em","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial","padding-left","120px"],["href","https://elearningindustry.com/advertise/categories/articles","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://help.disqus.com/en/articles/1717102-terms-of-service","rel","",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://elearningindustry.com/advertise/categories/ebooks","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://elearningindustry.com/advertise/categories/webinars","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://elearningindustry.com/advertise/products/promote-your-elearning-job","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","1.5em","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial","padding-left","160px"],["href","https://elearningindustry.com/advertise/categories/online-ppc-advertising","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://elearningindustry.com/advertise/products/promote-event","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],["href","https://elearningindustry.com/advertise/products/promote-press-release","rel","noopener noreferrer","target","_blank",2,"box-sizing","border-box","outline","none","color","rgb(3, 146, 217)","background-color","transparent","text-decoration","none"],[2,"box-sizing","border-box","outline","none","margin-top","0px","margin-bottom","0px","color","rgb(77, 77, 77)","font-family",'"Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',"font-size","16px","font-style","normal","font-variant-ligatures","normal","font-variant-caps","normal","font-weight","400","letter-spacing","normal","orphans","2","text-align","left","text-indent","0px","text-transform","none","white-space","normal","widows","2","word-spacing","0px","-webkit-text-stroke-width","0px","background-color","rgb(255, 255, 255)","text-decoration-style","initial","text-decoration-color","initial","padding-left","40px"]],template:function(e,t){if(1&e){jo(0,"body",0),jo(1,"div",1,2),jo(3,"p",3),Ss(4,"The following terms and conditions (\u201c"),jo(5,"b",4),Ss(6,"Terms & Conditions"),Ho(),Ss(7,"\u201d or \u201c"),jo(8,"b",4),Ss(9,"Terms"),Ho(),Ss(10,"\u201d or \u201c"),jo(11,"strong",4),Ss(12,"T&Cs"),Ho(),Ss(13,"\u201d) govern all use of the eLearningIndustry.com website platform (the \u201c"),jo(14,"strong",4),Ss(15,"Platform"),Ho(),Ss(16,"\u201d), including any use or viewing of any Content (defined below), services and products available at or through the Platform (collectively, \u201c"),jo(17,"b",4),Ss(18,"Services"),Ho(),Ss(19,"\u201d), by Platform visitors and participants (collectively, \u201c"),jo(20,"strong",4),Ss(21,"Users"),Ho(),Ss(22,"\u201d), both unregistered and registered (\u201c"),jo(23,"b",4),Ss(24,"Registered Users"),Ho(),Ss(25,"\u201d). The Platform is owned and operated by ELEARNING INDUSTRY INC, with a business address 401 Ryland Street, Suite 200-A; Reno, NV 89502 and a mailing address 220 Sansome Street, Suite 900, San Francisco, CA 94104, e-mail ["),jo(26,"span",5),Ss(27,"info@elearningindustry.com"),Ho(),Ss(28,"], (\u201c"),jo(29,"b",4),Ss(30,"eLearning Industry"),Ho(),Ss(31,"\u201d or the \u201c"),jo(32,"b",4),Ss(33,"Company"),Ho(),Ss(34,"\u201d). The Services are offered to each User subject to such User\u2019s acceptance of all of these Terms & Conditions and all other applicable terms and conditions, operating rules, policies and procedures that are communicated from time to time on or through the Platform by eLearning Industry."),Ho(),jo(35,"p",3),Ss(36,"A User should read the T&Cs carefully before browsing or accessing the Platform or any Content or using any Services. By browsing, accessing or using any part of the Platform, including the registration by a Registered User to open an account (a \u201c"),jo(37,"b",4),Ss(38,"User Account"),Ho(),Ss(39,"\u201d), a User agrees to be bound by these Terms & Conditions. If a User disagrees with or cannot follow these Terms & Conditions (in part or in whole), then such User should not browse or access the Platform, use any Services or register to create a User Account."),Ho(),jo(40,"p",3),Ss(41,"These T&Cs include the following sections:"),Ho(),jo(42,"ol",6),jo(43,"li",7),Ss(44,"Platform general description"),Ho(),jo(45,"li",7),Ss(46,"Categories of Users"),Ho(),jo(47,"li",7),Ss(48,"\xa0User Registration with the Platform"),Ho(),jo(49,"li",7),Ss(50,"Specific provisions for Content hosted on the Platform"),Ho(),jo(51,"li",7),Ss(52,"General rules for User generated Content"),Ho(),jo(53,"li",7),Ss(54,"Legal nature of the Platform - Disclaimers \u2013 Limitation of Liability"),Ho(),jo(55,"li",7),Ss(56,"Notice & take down process \u2013 Report to competent authorities"),Ho(),jo(57,"li",7),Ss(58,"Intellectual Property"),Ho(),jo(59,"li",7),Ss(60,"Termination"),Ho(),jo(61,"li",7),Ss(62,"Confidentiality"),Ho(),jo(63,"li",7),Ss(64,"Indemnification"),Ho(),jo(65,"li",7),Ss(66,"Applicable Law and Jurisdiction"),Ho(),jo(67,"li",7),Ss(68,"Miscellaneous"),Ho(),Ho(),jo(69,"h2",8),Ss(70,"1. Platform General Description"),Ho(),jo(71,"p",9),Ss(72,"1.1 Welcome to the eLearning Industry Platform, the largest online community for the \u201ceLearning industry\u201d market, created as an informative, educational and knowledge-sharing platform targeted mainly to professionals with the aim to provide Content and Services to enable Users to:"),Ho(),jo(73,"p",10),Ss(74,"1.1.1 access an online platform where Users can stay up to date with the latest industry news and technologies as well as have access to educational and informative material\u2014including, for instance, the ability to read industry-related articles and eBooks; participate in webinars; find projects, events or job; and participate in other activities offered on the Platform;"),Ho(),jo(75,"p",10),Ss(76,"1.1.2 share/post Content created by the Company"),Ho(),jo(77,"p",10),Ss(78,"1.1.3 share/post free and sponsored third-party Content (i.e., Content not created by the Company, which is referred to as \u201c"),jo(79,"b",4),Ss(80,"User Generated Content"),Ho(),Ss(81,"\u201d) to be hosted in the Platform related to the e-Learning market and industry;"),Ho(),jo(82,"p",10),Ss(83,"1.1.4 connect with e-Learning market professionals and businesses;"),Ho(),jo(84,"p",10),Ss(85,"1.1.5 receive promotional news and information;"),Ho(),jo(86,"p",10),Ss(87,"1.1.6 promote products and services that are related to the e-Learning market and industry; and"),Ho(),jo(88,"p",10),Ss(89,"1.1.7 have access to additional paid Services provided by the Platform (collectively, \u201c"),jo(90,"b",4),Ss(91,"Additional Services"),Ho(),Ss(92,"\u201d), which Additional Services may be purchased under separate orders or agreements with the Company ("),jo(93,"b",4),Ss(94,"Purchase T&Cs"),Ho(),Ss(95,")."),Ho(),jo(96,"p",9),Ss(97,"1.2\xa0"),jo(98,"span",5),Ss(99,"Content hosted on the Platform"),Ho(),Ss(100,": The Content hosted on the Platform can be distinguished as follows (all such content, including Company created content and User Generated Content is referred to collectively herein as \u201c"),jo(101,"b",4),Ss(102,"Content"),Ho(),Ss(103,"\u201d):"),Ho(),jo(104,"p",10),Ss(105,"1.2.1\xa0"),jo(106,"span",5),Ss(107,"eLearning Industry Content"),Ho(),Ss(108,": The Platform hosts its own Content, including Articles, eBooks, Webinars and other items it creates."),Ho(),jo(109,"p",10),Ss(110,"1.2.2\xa0"),jo(111,"span",5),Ss(112,"Third party Content hosted on the Platform for free"),Ho(),Ss(113,": The Platform hosts User Generated Content that is contributed by Registered Users (which User Generated Content is not controlled by the Company), which may include:"),Ho(),jo(114,"ul",6),jo(115,"li",11),Uo(116,"br"),jo(117,"ul",12),jo(118,"li",11),Uo(119,"br"),jo(120,"ul",12),jo(121,"li",11),Uo(122,"br"),jo(123,"ul",12),jo(124,"li",11),Uo(125,"br"),jo(126,"ul",12),jo(127,"li",7),Ss(128,"non promotional Articles;"),Ho(),jo(129,"li",7),Ss(130,"free directory listings;"),Ho(),jo(131,"li",7),Ss(132,"comments;"),Ho(),jo(133,"li",7),Ss(134,"reviews; and"),Ho(),jo(135,"li",7),Ss(136,"sales-qualified leads."),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(137,"p",9),Ss(138,"Free non-promotional Articles are Articles that include only generic informational Content as further described in article 4.1.2 below, that meets the criteria of articles 1.2.4. and 5 of the present terms and is not designed to promote the specific products or services of any specific party or business. Promotional articles are only hosted as sponsored paid Content (see below)."),Ho(),jo(139,"p",10),Ss(140,"1.2.3\xa0"),jo(141,"span",5),Ss(142,"Third-party Sponsored Content"),Ho(),Ss(143,": Sponsored Content is paid Content contributed by Registered Users that promotes (directly or indirectly) products and services of professionals and businesses operating in the e-Learning market and industry. Promotional Content is posted subject to payment of the relevant fees by Registered Users under the terms and conditions set forth in these T&Cs as well as additional terms and conditions applicable for the purchase of such Additional Services as set forth in the\xa0"),jo(144,"a",13),Ss(145,"purchase terms"),Ho(),Ss(146," (\u201c"),jo(147,"b",4),Ss(148,"Purchase T&Cs"),Ho(),Ss(149,"\u201d)."),Ho(),jo(150,"p",10),Ss(151,"Sponsored Content includes the following types of Content:"),Ho(),jo(152,"ul",6),jo(153,"li",11),Uo(154,"br"),jo(155,"ul",12),jo(156,"li",11),Uo(157,"br"),jo(158,"ul",12),jo(159,"li",11),Uo(160,"br"),jo(161,"ul",12),jo(162,"li",11),Uo(163,"br"),jo(164,"ul",12),jo(165,"li",7),Ss(166,"promotional Articles,"),Ho(),jo(167,"li",7),Ss(168,"commissioned Articles,"),Ho(),jo(169,"li",7),Ss(170,"promotional Directory listings,"),Ho(),jo(171,"li",7),Ss(172,"Event advertisements,"),Ho(),jo(173,"li",7),Ss(174,"Press Releases,"),Ho(),jo(175,"li",7),Ss(176,"Job postings,"),Ho(),jo(177,"li",7),Ss(178,"eBooks and"),Ho(),jo(179,"li",7),Ss(180,"Webinars."),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(181,"p",10),Ss(182,"1.2.4 All User-Generated Content (either free or sponsored, collectively referred as \u201c"),jo(183,"b",4),Ss(184,"User Generated Content"),Ho(),Ss(185,"\u201d) must contribute to and be consistent with the informative and educational nature of the Platform regarding the e-Learning market and must follow the general rules of article 5 below as well as any specific rules and guidelines provided in the Platform, including at the point of submission of the Content and/or the purchase of the related hosting Services. The Platform is not involved in any way in the creation of User Generated Content nor does the Company control or initiate User Generated Content. Unless otherwise provisioned in the applicable Terms and/or the Purchase T&Cs, the Company reserves the right (but is under no legal or statutory obligation) to conduct a preliminary review of such Content as provisioned in article 5.3. below and may refuse to post any Content that the Company determines violates or is against the rules or policies of the Platform and/or applicable law. In any case the Platform reserves the right to delete or suspend any Content when it comes to our attention (including but not limited further to a Takedown Notice described in article 7 below) that any Content violates any of our standards or these T&Cs. The Company\u2019s policies aim at ensuring the Platform\u2019s primary nature as an online community and a knowledge-sharing informative Platform of lawful Content for the eLearning market professionals."),Ho(),jo(186,"p",10),Ss(187,"1.2.5 Throughout these T&Cs there are references to instances where there may be links to third party websites. For any link to any third party website, we have no control over the contents of those sites or resources and accept no responsibility for them or for any loss or damage that may arise from a User\u2019s use of any such third party website. If a User decides to access any third party website, it is done at the User\u2019s own risk."),Ho(),jo(188,"p",3),Ss(189,"\xa0"),Ho(),jo(190,"h2",8),Ss(191,"2. Categories of Users"),Ho(),jo(192,"p",3),jo(193,"span",5),Ss(194,"General Notes"),Ho(),Ss(195,": The Platform\u2019s Content is mainly targeted to professionals. Some parts of the Platform require a User to register and create a User Account in order to preliminarily verify the user\u2019s professional status. Please note, however, that the Platform is not able (and is under no legal or statutory obligation) to confirm or warrant the professional status of any User nor of the correctness, accuracy and the truth of any User\u2019s data. The registration process is used only as a basic verification mechanism to potentially discourage non-professional Users as well as to avoid registrations by malicious systems and bots to the extent possible. Overall, the purpose of such registration is to enhance, the reliability of the Platform as a professional knowledge sharing community and to promote the goals of the Platform."),Ho(),jo(196,"p",3),Ss(197,"Users can be divided into the following categories, depending on the Content they can access and/or contribute, as well as their purchase of Additional Services from the Platform:"),Ho(),jo(198,"p",9),Ss(199,"2.1\xa0"),jo(200,"span",5),Ss(201,"Users"),Ho(),Ss(202,": All Users visiting the Platform, can browse the Platform and have access to informative Content. Where the Content posted on the Platform is sponsored by contributors, we will identify that such Content is sponsored. All Users can access Articles, comments, reviews, Directory listings, Events, Press Releases and Job postings and they can also submit sales-qualified leads."),Ho(),jo(203,"p",9),Ss(204,"2.2\xa0"),jo(205,"span",5),Ss(206,"Registered Users"),Ho(),Ss(207,": Registered Users are Users who register and create a User Account with the Platform in order to have access to more advanced informative and educational material as well as to be able to contribute Content to the Platform. Registered Users can:"),Ho(),jo(208,"p",10),Ss(209,"2.1.1 obtain access to premium informative Content;"),Ho(),jo(210,"p",10),Ss(211,"2.1.2 contribute/upload informative, non-marketing/non-promotional Content to the Platform for free,"),Ho(),jo(212,"p",10),Ss(213,"2.1.3 download eBooks and Webinars hosted on the Platform;"),Ho(),jo(214,"p",10),Ss(215,"2.1.4 submit Reviews; and"),Ho(),jo(216,"p",10),Ss(217,"2.1.5 submit free Directory listings."),Ho(),jo(218,"p",9),Ss(219,"2.3\xa0"),jo(220,"span",5),Ss(221,"Clients"),Ho(),Ss(222,": (\u201c"),jo(223,"b",4),Ss(224,"Client Users"),Ho(),Ss(225,"\u201d or \u201c"),jo(226,"b",4),Ss(227,"Clients"),Ho(),Ss(228,"\u201d) are Registered Users who purchase any of the Additional Services provided from the Platform from time to time as provisioned in the Purchase T&Cs."),Ho(),jo(229,"p",3),Ss(230,"\xa0"),Ho(),jo(231,"h2",8),Ss(232,"3. User Registration with the Platform"),Ho(),jo(233,"p",9),Ss(234,"3.1 To register with the Platform and create a User Account, a User may either:"),Ho(),jo(235,"p",10),Ss(236,"3.1.1 register on-site, by filling in certain professional personal details (name and e-mail address); a User is then required to confirm registration by clicking on an activation link which is sent to the User at the email provided, for verification purposes; or"),Ho(),jo(237,"p",10),Ss(238,"3.1.2 register via a profile on LinkedIn; Users who sign-up through LinkedIn are automatically activated, as it is considered that their email verification (double opt-in) has been already executed at the time of their registration in LinkedIn."),Ho(),jo(239,"p",9),Ss(240,"3.2 Upon registering to the Platform, a Registered User creates: i) a User Account, including the above mandatory professional personal data and ii) a User Profile where each registered User can provide any personal data it wishes to voluntarily provide. More specifically:"),Ho(),jo(241,"p",10),Ss(242,"3.2.1 \u201c"),jo(243,"span",5),Ss(244,"User Account"),Ho(),Ss(245,"\u201d: is only used by the Platform for internal purposes (relationship between the User and Platform)\u2014User Account data is not visible to other Users and is not transferred to any third party."),Ho(),jo(246,"p",10),Ss(247,"3.2.2 \u201c"),jo(248,"span",5),Ss(249,"User Profile"),Ho(),Ss(250,"\u201d: is the profile that the User wishes to have in the Platform, which may be visible to other Users. Each User can decide what information to include in the User Profile and the extent such information will be visible to the public and other Users. However, note that for some actions it might be necessary to make the User Profile visible to other Users and reveal some User Profile data depending on the nature of the Content uploaded by the User (for example data necessary for Content reliability and attribution purposes)."),Ho(),jo(251,"p",9),Ss(252,"3.3 (a) Where a Registered User is a legal entity, the natural person that opens the User Account on behalf of such Registered User warrants that he/she has the legal capacity and power to (i) act on behalf of and to represent the specific legal entity/Registered User, (ii) proceed with the registration of the User to the Platform and the creation of the User Account and the User Profile, (iii) accept the present Terms and Conditions and all other policy and informative documents in the Platform (including but not limited the warranties, declarations and assignments undertaken from time to time by the Registered Users) and (iv) provide orders (such as indicative purchase orders) and to make payments to the Platform on behalf of and in the name of the registered legal entity."),Ho(),jo(253,"p",3),Ss(254,"(b) Where a Registered User is a legal entity represented by another legal entity (i.e. a Marketing Agent or other agent\u2014the \u201c"),jo(255,"b",4),Ss(256,"Agent"),Ho(),Ss(257,"\u201d), the Agent acting through the natural person that creates the User Account and the User Profile on behalf of the Registered User-legal entity provides the same warranties and representations as above. The same warranties and representations apply in case an Agent acts on behalf of diverse legal entities and/or professionals through its (the Agent\u2019s) Account."),Ho(),jo(258,"p",9),Ss(259,"In both a) and b) above, the legal entity registered as a Registered User and/or Client shall be responsible and liable towards the Company/Platform for all of the above as further provided in article 3.8 below."),Ho(),jo(260,"p",9),Ss(261,"3.4 Users understand and acknowledge that they should provide the Platform only with data and information that is true, accurate and updated, as well as lawfully acquired and to keep this data and information accurate, true and updated at all times (and make any changes/updates necessary by using the appropriate settings in their User Account and/or User Profile). The Platform does not necessarily audit nor verify any of the data provided. However, the Platform reserves the right (but is under no obligation) to ask for more information from the Registered User and/or to seek clarifications regarding specific information and/or to refuse registration and/or to suspend or delete any User Account and Profile if any violation of the above comes to the Company\u2019s attention. In any event, Users agree to hold harmless and bear full responsibility for all damages accrued to the Company in case of violation of the above obligations. Other Users or third parties can submit a complaint with regard to untrue or fault third party data following the Notice and Take Down Process of article 7. Processing of User\u2019s personal data is subject to the terms of our\xa0"),jo(262,"a",14),Ss(263,"Privacy Policy"),Ho(),Ss(264,"."),Ho(),jo(265,"p",9),Ss(266,"3.5 The Platform reserves the right to refuse to open a User Account and/or to refuse any Content submitted by a Registered User, and/or to delete or suspend the User Account and the related User Profile if it comes to the attention of the Platform and/or if it is notified by a third party that the Registered User is not a professional and/or the User Account/Profile has fake or false or non-accurate data, at any time. Also, the Platform reserves the right to terminate the User Account as provided in article 9 below."),Ho(),jo(267,"p",9),Ss(268,"3.6\xa0"),jo(269,"span",5),Ss(270,"Account name and Password"),Ho(),Ss(271,":"),Ho(),jo(272,"p",10),Ss(273,"3.6.1\xa0"),jo(274,"span",5),Ss(275,"Registration on-site"),Ho(),Ss(276,": If a User signs up on site in the Platform, his/her registered email shall automatically become the account name; the User can change it any time with another account name. This practically means that, to change his/her account name to the Platform, the User will also have to change the e-mail address or use another e-mail address. \u03a4o complete the creation of the personal User Account, Platform shall automatically generate a default password and send it to the email address of the User. The User shall then enter the User\u2019s User Account by activating the default password. A User must then select a secret password. Users are advised to regularly change the password for security reasons; Users should also avoid using the same and/or easily detectable password(s) by introducing, where possible, not only letters and numbers, but also symbols in multiple combinations. In the event the User forgets the password, he/she may select the relevant \u201cForgot my Password\u201d field and instructions will be sent to the User\u2019s email in order to change the password. The account name and password shall identify uniquely each User in the Platform."),Ho(),jo(277,"p",10),Ss(278,"3.6.2\xa0"),jo(279,"span",5),Ss(280,"Registration via LinkedIn"),Ho(),Ss(281,": In case a User registers via his/her LinkedIn account, the name such User uses on LinkedIn will also appear as his/her Account name. In this case, where a User logs in using LinkedIn, the User will not select a new password, but will sign-in through LinkedIn. In case a User forgets his/her password, he/she must follow the password retrieval procedures of LinkedIn further to its (LinkedIn) applicable Terms and Conditions and processes. Otherwise access and use of his/her Account and Profile in the Platform will not be possible."),Ho(),jo(282,"p",10),Ss(283,"3.6.3 Each User Account and User Profile are personal and non-transferable. Each Registered User is responsible to retain the secrecy and non-disclosure of such Use\u2019s password from third parties. The Platform also highly recommends that a Registered User not allow the access and use of its User Account and User Profile by any third party and not to share their secret password with anyone else."),Ho(),jo(284,"p",9),Ss(285,"3.7 Any act and/or omission through the User Account (including, but not limited to, the posting of Content, reviews, comments etc., the provision of information in the User Account, the submission of a takedown notice, the submission of a purchase and/or payment order etc.) shall be reasonably considered by the Platform as the act and/or omission of the Registered User, conducted with the Registered User\u2019s prior approval and shall be binding on that Registered User. Each Registered User is solely responsible for the safety of his/her User Account and User Profile as well as for any loss or damage occurred to the User and/or to a third party and/or to the Platform from the use of that User Account up to the moment the User explicitly notifies us, at support@elearningindustry.com, of any unauthorized access and/or use of his/her Account or any other breaches of security. This notification applies for any subsequent use. eLearning Industry will not be liable for any acts or omissions by Users, including any damages of any kind incurred as a result of such acts or omissions and, where applicable, shall reasonably rely on the warranties and representations of the User referred to in 3.4. above."),Ho(),jo(286,"p",9),Ss(287,"3.8\xa0"),jo(288,"span",5),Ss(289,"Deletion of a User Account"),Ho(),Ss(290,":"),Ho(),jo(291,"p",10),Ss(292,"3.8.1 If a Registered User wishes to delete the Registered User\u2019s applicable User Account, such Registered User may e-mail the Platform at support@elearningindustry.com with a request to delete the User Account. As soon as the User Account is deleted the associated User Profile will also be automatically deleted. Following such a request, eLearning Industry will permanently delete the User Account, as well as any data contained in the User Account and in the User Profile and all Content the User has submitted to the Platform as a Registered User, within fifteen (15) days from the submission of the User\u2019s deletion request. The provisions of article 9 below also apply."),Ho(),jo(293,"p",10),Ss(294,"3.8.2 A Registered User acknowledges that by submitting a request to delete the applicable User Account, eLearning Industry will permanently delete the User\u2019s data and Content hosted in the Platform as well as any other data hosted in the applicable User Account on behalf of the Registered User and that such User will no longer be able to retrieve such information. The Platform shall not be liable for any damages caused from this deletion of the data and Content."),Ho(),jo(295,"p",10),Ss(296,"3.8.3 If a User has purchased Additional Services, the deletion of the User Account might not allow the execution or the continuance of some Additional Services, if in order to receive those Services it is necessary to have an active User Account. In this context, the Purchase T&Cs for the provision of Additional Service would apply as well, as provided in the\xa0"),jo(297,"a",13),Ss(298,"purchase terms"),Ho(),Ss(299,"."),Ho(),jo(300,"p",10),Ss(301,"3.8.4 eLearning Industry reserves without limitation the right to suspend and/or delete any User Account and User Profile according to the provisions of the Terms and Conditions, including but not limited to the provisions of article 9.4 below as well as the applicable overall Purchase T&Cs (in case of Additional Services); all other provisions of the present article 3.9 shall apply respectively."),Ho(),jo(302,"p",3),Ss(303,"\xa0"),Ho(),jo(304,"h2",8),Ss(305,"4. Specific Provisions For Content Hosted On The Platform"),Ho(),jo(306,"p",9),Ss(307,"4.1\xa0"),jo(308,"span",5),Ss(309,"Articles"),Ho(),Ss(310,":"),Ho(),jo(311,"p",10),Ss(312,"4.1.1\xa0"),jo(313,"span",5),Ss(314,"Access and reading of Articles"),Ho(),Ss(315,":"),Ho(),jo(316,"p",15),Ss(317,"(a) All Users can access and read articles hosted in the Platform subject however to their User category as laid down in articles 2.1.-2.3. above; these articles are created by the Platform or by the Registered Users (as free or sponsored User Generated Content)"),Ho(),jo(318,"p",15),Ss(319,"(b) Users can generally browse the articles by category and topic; at the end of each article Users may also find tabs with proposed topics related to the topic of the chosen article in order to re-direct to the suggested article category in the Platform or other relevant Content."),Ho(),jo(320,"p",15),Ss(321,"(c) Articles remain available to the Platform for as long as the Registered User/author of the article maintains an active User Account."),Ho(),jo(322,"p",10),Ss(323,"4.1.2\xa0"),jo(324,"span",5),Ss(325,"Ability to post Articles for free and/or sponsored"),Ho(),Ss(326,":"),Ho(),jo(327,"p",15),Ss(328,"(a) Registered Users can submit non-promotional articles of generic informative nature for the e-Learning market to be uploaded in the Platform for free as User Generated Content as provisioned in article 1.2.2 above."),Ho(),jo(329,"p",15),Ss(330,"(b) Unless otherwise provided in the Platform or herein, submitted articles must be original and have not been published previously through the Registered User\u2019s or any other third party\u2019s digital means (e.g. platform, blog, website, social media account, or similar mediums)."),Ho(),jo(331,"p",15),Ss(332,"(c) 10 business days after the posting of an original Article in the Platform, a Registered User can then re-publish/upload that article through its own or third party digital means (e.g. platform, blog, website, social media account etc.)\u2014the applicable period of time shall be determined based on the specific guidelines provided by the Platform."),Ho(),jo(333,"p",15),Ss(334,"(d) When a Registered User posts an Article, its User Profile data will become visible to other Users for attribution and credibility purposes. Each Registered User though has control over the volume and the type of data to be included in the User Profile as mentioned in article 3.3.2 above."),Ho(),jo(335,"p",15),Ss(336,"(e) Registered Users who wish to upload sponsored, promotional articles, must become a Client and purchase Additional Hosting Services - click\xa0"),jo(337,"a",16),Ss(338,"here"),Ho(),Ss(339,"."),Ho(),jo(340,"p",9),Ss(341,"4.2\xa0"),jo(342,"span",5),Ss(343,"Ability to submit Comments"),Ho(),Ss(344,":"),Ho(),jo(345,"p",10),Ss(346,"4.2.1 All Users may read and post (as User Generated Content) comments on any Article (free or sponsored) hosted in the Platform, using the third party online public comment sharing platform used by the Platform, which sharing platform has its own terms and conditions as set forth in its\xa0"),jo(347,"a",17),Ss(348,"terms of service"),Ho(),Ss(349," (the \u201c"),jo(350,"b",4),Ss(351,"Comments Platform"),Ho(),Ss(352,"\u201d)."),Ho(),jo(353,"p",10),Ss(354,"4.2.2 To post comments, a User is not required to have a User Account in the Platform, but must register and open an account with the Comments Platform; a User must maintain that account in order for the applicable comment to remain visible on the Platform. It is noted that if a User deletes his/her account with the Comments Platform, any comments posted in the Platform could be also deleted and no longer be visible on the Platform either, subject to the Comments Platform terms and conditions."),Ho(),jo(355,"p",10),Ss(356,"4.2.3 Registration in the Comments Platform, as well as the posting of comments shall be subject to the Comments Platform\u2019s Terms and Conditions (including all policy documents and privacy notices therein) which the User accepts upon opening an account with the Comments Platform and/or at any other time. The Company is not party to the above agreement(s) and does not control or have any responsibility regarding the Comments Platform\u2019s Terms and Conditions and/or its services."),Ho(),jo(357,"p",10),Ss(358,"4.2.4 The Company does not (and is under no legal obligation) to review the comments Users upload in the Platform via the Comments Platform. However comments must also follow the rules set in article 5 below and Platform reserves the right to delete a comment if it determines in its discretion that there is a violation, in case it receives a Takedown Notice pursuant to article 7 herein, or for any reason it determines."),Ho(),jo(359,"p",10),Ss(360,"4.2.5 In any case the Comments Platform may, prior to uploading the comments, submit them to the Company for high level review for consistency and obvious infringements purposes; the above process is subject to the Comments Platform terms and conditions and at the Comments Platform\u2019s own discretion when it considers that any comment is infringing and/or violates applicable legislation. In such case too, the Company does not control or initiate in any ways the third party content and its actions are only limited in the aforementioned high level review. eLearning Industry reserves the right to request the Comments Platform to remove a comment where it violates the Platform\u2019s rules for User Generated Content, as per article 5 below, or as otherwise determined by the Platform."),Ho(),jo(361,"p",10),Ss(362,"4.2.6 eLearning Industry shall in no manner be liable for any damage caused as a result to the use of the Comments Platform, as well as in case it takes down any Content uploaded in violation of article 5 below or further to a Takedown Notice as per article 7. eLearning Industry does not endorse nor in any way represents any opinion expressed by the Users through the comments. eLearning Industry holds no responsibility for any loss or damage that may be caused to any third party and/or User due to the views of the Users posting the comments."),Ho(),jo(363,"p",10),Ss(364,"4.2.7 The present Terms and Conditions apply mutatis mutandis to the posting of comments by Users through the Comments Platform."),Ho(),jo(365,"p",9),Ss(366,"4.3\xa0"),jo(367,"span",5),Ss(368,"eBooks"),Ho(),Ss(369,":"),Ho(),jo(370,"p",10),Ss(371,"4.3.1 e-Books are either created by the Platform or sponsored by Clients (as sponsored User Generated Content)."),Ho(),jo(372,"p",10),Ss(373,"4.3.2 Registered Users can only upload eBooks subject to payment of a subscription fee. Those who are interested in uploading an e-Book can click\xa0"),jo(374,"a",18),Ss(375,"here"),Ho(),Ss(376," to purchase the relevant paid hosting service, which is subject to the Purchase T&Cs . A Client who uploads an e-Book is referred to as a \u201c"),jo(377,"b",4),Ss(378,"Client/author"),Ho(),Ss(379,".\u201d"),Ho(),jo(380,"p",9),jo(381,"strong",4),Ss(382,"(a) Access and downloading of eBooks"),Ho(),Ho(),jo(383,"p",10),Ss(384,"4.3.3 The content of e-Books is addressed to professionals who are interested in being further informed and to learn additional details with regard to processes, services and products available in the eLearning market. In order to ensure, to the extent possible, that only professionals will have access to such e-Books, access is limited to only Registered Users as provisioned in article 3 above. Such registration data are not available and are not transferred to any third party (including but not limited to the Client/author of the e-Books)."),Ho(),jo(385,"p",9),jo(386,"strong",4),Ss(387,"(b) Special rules applicable for e-Books created by Clients/authors and hosted in the Platform"),Ho(),Ho(),jo(388,"p",10),Ss(389,"4.3.4 Registered Users can download eBooks created by Clients/authors that are posted in the Platform. eBooks are hosted in the Platform for a specific period of time and are available for as long as the Client/author has an active subscription with eLearning Industry. After the lapse of such period, the eBook will no longer be available for downloading from the Platform."),Ho(),jo(390,"p",10),Ss(391,"4.3.5 eBooks are either Premium eBooks, created originally for the Platform, or Imported eBooks, i.e. eBooks that Clients republish in the Platform. Users can browse eBooks by topic category and/or other available criteria."),Ho(),jo(392,"p",10),Ss(393,"4.3.6 In order to permit a User to download of its eBook, the applicable Client/author may request the Registered User to provide the Client/author with some personal data. The amount and type of the data requested, the purpose(s) and the means of collection, as well as whether the provision of the data is optional or mandatory are determined exclusively by the Client/author. Prior to providing any information to the Client/author, Registered Users must read and accept the Client\u2019s Privacy Policy. Each Registered User shall choose what personal data he/she wishes to provide to the Client/author. This personal data is collected independent of and not associated with the personal data provided to the Platform for the creation of the Registered User\u2019s User Account and User Profile."),Ho(),jo(394,"p",10),Ss(395,"4.3.7 A Registered User will receive an e-mail from the Platform, on behalf of the Client/author, informing the Registered User about the data that he/she has submitted, the Client/author\u2019s Privacy Policy that the User has already accepted, as well as the contact details for exercising his/her rights as a data subject (including the User\u2019s right to opt-out) before the Client/author as data controller."),Ho(),jo(396,"p",10),Ss(397,"4.3.8 With regard to the personal data collected by the Client/author as explained in Section 4.3.6, the Platform acts solely as a data processor and/or service provider under the instructions of the Client/author who is the data controller. Platform does not determine, and does not control the collection, use and processing of such data by the Client. Platform merely provides collection and hosting services to the Client/author for as long as the Client has an active paid hosting contract with the Platform. Registered Users can contact directly the Data Controller for any issue with regard to their personal data and the exercise of their rights."),Ho(),jo(398,"p",9),jo(399,"strong",4),Ss(400,"(c) Special rules applicable for e-Books created by the Platform"),Ho(),Ho(),jo(401,"p",10),Ss(402,"4.3.9 Registered Users can download eBooks created by the Platform."),Ho(),jo(403,"p",10),Ss(404,"4.3.10 eLearning Industry eBooks shall be available on the Platform for as long as the Platform decides at its discretion."),Ho(),jo(405,"p",10),Ss(406,"4.3.11 In order to download a Platform eBook, the Platform might request the Registered User to provide additional personal data for communication purposes. Prior to providing any information to the Platform, Registered Users must read and accept the applicable\xa0"),jo(407,"a",14),Ss(408,"Privacy Policy"),Ho(),Ss(409,". Registered Users shall determine the data they wish to provide to the Platform; those data are independent from the data provided to the Platform for the creation of the User Account and the User Profile in the Platform. After that process the Registered User shall receive an e-mail from the Platform informing him/her about the details referred to in article 4.3.7."),Ho(),jo(410,"p",10),Ss(411,"4.3.12 Register Users can exercise their rights as a data subject (including the right to opt-out), before the Platform as data controller of the above data. Platform will use those data only for its own purposes based on its applicable\xa0"),jo(412,"a",14),Ss(413,"Privacy Policy"),Ho(),Ss(414," and will not share with nor transfer those data to with any third party (including its Clients)."),Ho(),jo(415,"p",9),Ss(416,"4.4\xa0"),jo(417,"span",5),Ss(418,"Webinars"),Ho(),Ss(419,":"),Ho(),jo(420,"p",10),Ss(421,"4.4.1 Webinars are either created by the Platform or sponsored by Clients (as sponsored User Generated Content);"),Ho(),jo(422,"p",10),Ss(423,"4.4.2 Registered Users can only upload Webinars subject to payment of a subscription fee. Those who are interested in uploading a Webinar, can click\xa0"),jo(424,"a",19),Ss(425,"here"),Ho(),Ss(426," to purchase the relevant paid hosting service. Clients who upload Webinar Content are referred as \u201cClient/organizers\u201d"),Ho(),jo(427,"p",9),jo(428,"strong",4),Ss(429,"(a) Access and participation in /viewing of Webinars"),Ho(),Ho(),jo(430,"p",9),Ss(431,"The content of Webinars to be uploaded to the Platform is to be addressed to professionals who are interested in being further informed and learning additional details with regard to processes, services and products available in the eLearning market. So, in order to reassure, to the extent possible, that only professionals will have access to such Webinars, access is limited to only Registered Users , as provisioned in article 3 above. Such registration data are not available and are not transferred to any third party (including but not limited to the Client/organizer of the Webinars)."),Ho(),jo(432,"p",9),jo(433,"strong",4),Ss(434,"(b) Special rules applicable for Webinars organized by Clients/organizers and hosted in the Platform"),Ho(),Ho(),jo(435,"p",10),Ss(436,"4.4.3 Webinars may be scheduled to take place on a specific time/date set by the Client/organizer; Registered Users can opt to participate real-time or watch them on demand, if that option is available from the Client/organizer. At the point of registration to the Webinar, the Registered User will be informed accordingly."),Ho(),jo(437,"p",10),Ss(438,"4.4.4 Registered Users can browse Webinars by topic category and/or other available criteria. Each on-demand Webinar shall be available to the Registered User for as long as the Client has an active subscription and Client Account with eLearning Industry. After the lapse of such period, the Webinar will no longer be available on the Platform."),Ho(),jo(439,"p",10),Ss(440,"4.4.5 Registered Users are in some cases provided with the option to select to receive a free consultation after the Webinar from the Client/Organizer. The request for the provision of a free consultation is sent directly from the Registered User to the Client/organizer; then the Client/organizer may contact the Registered User. Consultation is arranged and executed directly between Client/organizer and the Registered User; in any case consultation is provided by the Client outside of the framework of the Platform. The Platform is not involved in the provision of any consultation services by a Client and as such does not guarantee the quality of and the reliability of the services offered by the Client/organizer. Platform shall not be liable for any damages caused to the User and/or the Client/organizer and/or any third party from the provision of the free consultation as per the above."),Ho(),jo(441,"p",10),Ss(442,"4.4.6 In order to register a User for a Webinar, the Client/organizer shall request the Registered User to provide some personal data a) in order to be able to book a participation at the Webinar and/or b) for additional purposes identified by the Client/organizer at its sole discretion. In the above cases too, Platform shall process data only as data processor on behalf of the Client/organizer who is the data controller; the provisions of articles 4.3.6.-4.3.8. above shall further apply."),Ho(),jo(443,"p",10),Ss(444,"4.4.7 Each Client/organizer that organizes and uploads a Webinar in the Platform is solely responsible for the content of the Webinar as well as its appropriate execution. Indicatively (but not exhaustively) each Client/organizer shall be responsible for the selection of the Webinar presenters/speakers (their qualifications, level of education, suitability for the Webinar, etc.), the topics to be discussed, the availability of the tickets and/or the free slots to each Webinar and/or if the Webinar is cancelled and/or rescheduled, as well as for the Content included and presented in the Webinar. Platform cannot (and is under no obligation to) review any of the above and bears no responsibility for such items or Content."),Ho(),jo(445,"p",9),jo(446,"strong",4),Ss(447,"(c) Special rules applicable to webinars organized by the Platform."),Ho(),Ho(),jo(448,"p",10),Ss(449,"4.4.8 Registered Users can also participate in Webinars that are organized by the Platform."),Ho(),jo(450,"p",10),Ss(451,"4.4.9 For Webinars that are scheduled to take place on a specific time/date; Registered Users can opt to participate real-time or watch them on demand, if that option is available by the Platform for a specific Webinar. At the point of registration to the Webinar, the Registered User will be informed accordingly."),Ho(),jo(452,"p",10),Ss(453,"4.4.10 Each on-demand Webinar shall be available to the User for the time specified at that point of registration to the Webinar."),Ho(),jo(454,"p",10),Ss(455,"4.4.11 In order to process registration for a Webinar, the Company might request the Registered User to provide additional personal data for communication purposes In that case articles 4.3.12 and 4.3.13. shall apply respectively."),Ho(),jo(456,"p",9),Ss(457,"4.5\xa0"),jo(458,"span",5),Ss(459,"Jobs"),Ho(),Ss(460,":"),Ho(),jo(461,"p",10),Ss(462,"4.5.1 Platform operates a \u201cJob Openings\u201d section. Registered Users can publish their job listings to find candidates for their Job Openings (positions must be related to the e-Learning market) subject to payment of the relevant fee (sponsored User Generated Content). Those who are interested in uploading a job listing can click\xa0"),jo(463,"a",20),Ss(464,"here"),Ho(),Ss(465," to purchase the relevant paid hosting service."),Ho(),jo(466,"p",10),Ss(467,"4.5.2 Users can search for a Job Opening to which they can apply for free. In order to search for a job that matches their criteria, Users can apply certain filters (e.g. industry, level of education, employment type, functions etc.). Users can then directly submit their application to the relevant Clients under the applicable terms and conditions of each Client. A Job listing shall be available on the Platform at the applicable Client\u2019s discretion (Client\u2019s contact details shall be available for as long as the Client has an active listing contract with the Platform). Clients can delete a Job Opening listing, at any time, by contacting\xa0"),jo(468,"span",5),Ss(469,"support@elearningindustry.com"),Ho(),Ss(470,"."),Ho(),jo(471,"p",10),Ss(472,"4.5.3 Platform provides this Job Opening section as an open forum where the Users may find companies/Clients offering jobs that match their criteria and, accordingly, companies/Clients may find candidates for their job openings. Platform does not guarantee that Users will find a job opening that matches their criteria and/or that they will be hired by any company/Client searching for candidates to fill their job openings nor does it participate in the recruitment process. Also, Platform is not responsible for the duration of the job opening and if the job has been covered."),Ho(),jo(473,"p",9),Ss(474,"4.6\xa0"),jo(475,"span",5),Ss(476,"Directories"),Ho(),Ss(477,":"),Ho(),jo(478,"p",10),Ss(479,"4.6.1\xa0"),jo(480,"span",5),Ss(481,"Access and viewing of Directory listings"),Ho(),Ss(482,":"),Ho(),jo(483,"p",15),Ss(484,"(a) All Users can access the Platform listings that are included in a Directory where they can find, compare and review professionals and businesses engaged in the e-Learning market. The Directory tool in the Platform operates as an automated search engine, allowing Users to find eLearning professionals and businesses, enabling the eLearning professionals and businesses to be visible to the Platform\u2019s online community."),Ho(),jo(485,"p",15),Ss(486,"(b) Listings are:"),Ho(),jo(487,"p",21),Ss(488,"(i) Free (see paragraph 4.6.2 below);"),Ho(),jo(489,"p",3),Ss(490,"(ii) Sponsored by Clients who wish to optimize their visibility and promote their listing; and/or"),Ho(),jo(491,"p",3),Ss(492,"(iii) Posted by the Platform, which collects the listings from publicly available sources where the listings were published for similar, compatible purposes."),Ho(),jo(493,"p",10),Ss(494,"Where a listing is sponsored, it will be noted in the Directory. A sponsored listing may vary based on the amount paid by the sponsor. Listing a business or individual in a directory does not represent that the Platform has vetted or recommends any such business or individual."),Ho(),jo(495,"p",15),Ss(496,"(c) Users can browse through the listings per product category (e.g. authoring tools, project management software etc.) and/or other available criteria. The Directory listings in each product category are displayed by default in the following order:"),Ho(),jo(497,"p",21),Ss(498,"(i) Sponsored results, i.e. listings paid by Platform Clients. The order in which sponsored results are displayed is further determined by the amount paid by each Client."),Ho(),jo(499,"p",21),Ss(500,"(ii) Free Listings are categorized according to their rating (pursuant to reviews submitted by Registered Users \u2013 see paragraph 4.6.3 below)."),Ho(),jo(501,"p",21),Ss(502,"(iii) The remaining listings in the Directory are in alphabetical order and eLearning Industry does not determine the order of display."),Ho(),jo(503,"p",15),Ss(504,"(d) Users can specify their search and sort the results by applying certain criteria (e.g., indicatively but not exhaustively, pricing model, type of license, features, use cases etc.). Also, Users can compare each listing with other similar competitive products under specific criteria indicated in the Platform by using the relevant tool available in the Platform. The comparison results are automated and based on the information provided by the Registered User who uploads the listings and therefor the Platform disclaims and is not liable for any inaccuracy and/or fault of the results."),Ho(),jo(505,"p",15),Ss(506,"(e) The Directory listings may include links to third party websites which include Content for which eLearning Industry has no control or liability as laid down in article 1.2.5. above."),Ho(),jo(507,"p",15),Ss(508,"(f) The Platform may also conduct a statistical analysis of the listings and make such data available to Users, together with a guide on how to read and evaluate the information. Any statistical analysis will include only anonymous aggregated data and will not identify any individual User."),Ho(),jo(509,"p",10),Ss(510,"4.6.2\xa0"),jo(511,"span",5),Ss(512,"Submit a free and/or sponsored Directory listing"),Ho(),Ss(513,":"),Ho(),jo(514,"p",15),Ss(515,"(a) Registered Users can get listed in the Directory for free (through User Generated Content)."),Ho(),jo(516,"p",15),Ss(517,"(b) To submit a free listing, a Registered User must choose the product/service category in which such Registered User wants to be listed and provide applicable company professional information, as well as a detailed description of the User\u2019s business and e-Learning solutions/products. Registered Users must also follow the rules and guidelines of the Platform defined in article 1.2.4. above. The Platform is not involved in the creation of the listing and/or the links provided by the Registered Users."),Ho(),jo(518,"p",15),Ss(519,"(c) By submitting Content for a free listing, in addition to any other representations made by the User, the submitting User declares that: i) such User acknowledges that the User\u2019s products/services will be subject to review from other Users and, based on those reviews, a rating shall be generated that will be visible to all Users and that those ratings will determine the order of display of the listing in the Directory; ii) such User warrants that any links to another website will direct Users to lawful Content and/or transactions, for which the Registered Users or third party will bear full responsibility and liability."),Ho(),jo(520,"p",15),Ss(521,"(d) Registered Users can delete their Directory listing, at any time, by contacting\xa0"),jo(522,"span",5),Ss(523,"support@elearningindustry.com"),Ho(),Ss(524,"."),Ho(),jo(525,"p",15),Ss(526,"(e) \u0399f a User wishes to purchase a sponsored listing in the Directory, the User should click\xa0"),jo(527,"a",22),Ss(528,"here"),Ho(),Ho(),jo(529,"p",10),Ss(530,"4.6.3\xa0"),jo(531,"span",5),Ss(532,"Reviews"),Ho(),Ss(533,":"),Ho(),jo(534,"p",15),Ss(535,"(a) Registered Users can submit a review of a product or service which is listed and appears in the Directory in order to assess specific criteria and features of the products and services listed included in the relevant questionnaire."),Ho(),jo(536,"p",15),Ss(537,"(b) In order to ensure the validity and truth of the reviews, the following shall apply:"),Ho(),jo(538,"p",21),Ss(539,"(i) Registered Users who want to submit reviews shall be required to provide additional information regarding the use of the product/service under review. Platform will process and host such information only for the above purpose and according to the terms of our\xa0"),jo(540,"a",14),Ss(541,"Privacy Policy"),Ho(),Ss(542,"."),Ho(),jo(543,"p",21),Ss(544,"(ii) Portions of the Registered User\u2019s Profile User data shall be visible to the public along with its review. The User can determine which data will be visible. It is noted that by default, the Platform will not make visible for the review data that are filled in under the field \u201csurname\u201d. eLearning Industry shall extract automatically the ratings provided by the Registered Users based on the information provided in the reviews by Users and the Platform disclaims and is not liable for any inaccuracy and/or fault of the ratings."),Ho(),jo(545,"p",9),Ss(546,"4.7\xa0"),jo(547,"span",5),Ss(548,"Events"),Ho(),Ss(549,":");Ho(),jo(550,"p",10),Ss(551,"4.7.1 The Platform operates an Event listing section. Registered Users can publish Events that are relevant to the e-Learning market, (including for example scheduled conferences, congresses, events, seminars, symposiums, and workshops) in the Events section, subject to payment of the relevant fee for sponsored User Generated Content. Registered Users who are interested in uploading an Event can click\xa0"),jo(552,"a",23),Ss(553,"here"),Ho(),Ss(554," to purchase the relevant paid hosting service."),Ho(),jo(555,"p",10),Ss(556,"4.7.2 All Users can access information about Events and browse Events by category and/or other available criteria."),Ho(),jo(557,"p",10),Ss(558,"4.7.3 Registered Users sponsoring Events are responsible for the lawfulness of the Events and of the accuracy and truth of all information provided. The Platform shall in no manner be responsible or liable for the availability of any tickets and/or seats and/or places for any Event, including if the Event is cancelled and/or rescheduled."),Ho(),jo(559,"p",10),Ss(560,"4.7.4 Events may include links to third party websites which include Content for which eLearning Industry has no control or liability (see also articles 5 and 6 below).Where links are provided to third party websites, Users are redirected directly to that third party\u2019s website and content, outside of the Platform\u2019s environment and hosting services."),Ho(),jo(561,"p",10),Ss(562,"4.7.5 Registered Users who want to post an Event can click\xa0"),jo(563,"a",23),Ss(564,"here"),Ho(),Ss(565," to purchase a paid hosting account. In order to post an Event, the Registered User must follow the general guidelines of article 5 as well as the specific guidelines provided from the Platform at the point of submission of the event. Registered Users can delete their Events listing, at any time, by contacting\xa0"),jo(566,"span",5),Ss(567,"support@elearningindustry.com"),Ho(),Ss(568,"."),Ho(),jo(569,"p",9),Ss(570,"4.8\xa0"),jo(571,"span",5),Ss(572,"Press releases"),Ho(),Ss(573,":"),Ho(),jo(574,"p",10),Ss(575,"4.8.1 The Platform operates a Press Releases section. Registered Users can publish their press releases that are relevant to the e-Learning market, subject to payment of the relevant fee (sponsored User Generated Content). Those who are interested in uploading a Press Release can click\xa0"),jo(576,"a",24),Ss(577,"here"),Ho(),Ss(578," to purchase the relevant paid hosting service"),Ho(),jo(579,"p",10),Ss(580,"4.8.2 All Users can access Press Releases posted by Platform\u2019s Clients in the Press Releases section."),Ho(),jo(581,"p",10),Ss(582,"4.8.3 The Press Releases may include links to third party websites, for the Content of which eLearning Industry has no liability (see further article 6). Where links are provided to third party websites, Users are redirected directly to that third party\u2019s website, outside of the Platform\u2019s environment; in that case, no third party content is hosted in the Platform."),Ho(),jo(583,"p",10),Ss(584,"4.8.4 Registered Users who want to post a Press Release can click\xa0"),jo(585,"a",24),Ss(586,"here"),Ho(),Ss(587," to purchase a paid hosting. In order to submit a press release, the Client must follow the general guidelines of article 5 as well as the specific guidelines provided from the Platform at the point of submission of the Press Release. Registered Users can delete their Press Releases, at any time, by contacting\xa0"),jo(588,"span",5),Ss(589,"support@elearningindustry.com"),Ho(),Ss(590,"."),Ho(),jo(591,"p",9),Ss(592,"4.9\xa0"),jo(593,"span",5),Ss(594,"Newsletters"),Ho(),Ss(595,":"),Ho(),jo(596,"p",10),Ss(597,"4.9.1 Users may subscribe to the Platform\u2019s newsletter to receive news about the eLearning market from the Platform and from its Clients (consent). Newsletters may include news in general about the eLearning market, the Platform and its Clients or news dedicated to a specific Client. Newsletters are sent on a daily or weekly basis, depending on the frequency selected by the User. Subscription to the newsletter is effective when the subscribing User activates the subscription link, he/she will receive at his/her email address after requesting to subscribe (confirmation of consent)."),Ho(),jo(598,"p",10),Ss(599,"4.9.2 Each User can unsubscribe from the newsletter at any time, by clicking the \u201cunsubscribe\u201d button at the end of each newsletter."),Ho(),jo(600,"p",10),Ss(601,"4.9.3 To subscribe to the newsletter database, a User is required to provide a name and e-mail address, as well as some additional information for User segmentation purposes (to be submitted voluntarily from the Users)."),Ho(),jo(602,"p",10),Ss(603,"4.9.4 Users can read more on how the Platform treats the data Users provide to it for subscription in the newsletters database of the Platform in the\xa0"),jo(604,"a",14),Ss(605,"Privacy Policy"),Ho(),Ss(606,"."),Ho(),jo(607,"p",9),Ss(608,"Articles in the newsletter may include links to third party websites and Content, for which eLearning Industry has no control or liability as laid down in article 1.2.5. above."),Ho(),jo(609,"p",9),Ss(610,"4.10\xa0"),jo(611,"span",5),Ss(612,"Qualified Leads"),Ho(),Ss(613,":"),Ho(),jo(614,"p",10),Ss(615,"4.10.1 Users who are looking for specific e-Learning market products or services, can submit their interest (\u201clead\u201d) by filling in a form with all necessary information (e.g. specs, price range, period of availability, quantity, and other relevant information) regarding the product or service they wish to purchase from professionals and businesses operating in the e-Learning market that are Registered Users of the Platform. The submitted form will be considered as a request for proposal (RFP) directed to Registered Users who are Clients of the Platform registered in the Qualified Leads section. By submitting an RFP, the User is consenting that the User\u2019s name and contact information, as well as other information included in the RFP, will be provided to the applicable Clients and that Clients who are interested in responding to the RFP may contact Users directly as described in article 4.10.3 . There will not be a mechanism permitting the submitting User to limit or customize what Clients may receive the RFP and such information."),Ho(),jo(616,"p",10),Ss(617,"4.10.2 The Platform will automatically match the submitted RFP with services and/or products provided by those Clients. This automated matching process is based on information provided by the Client regarding such Client\u2019s services and products in a specific questionnaire submitted to the Platform, and therefore Platform is not liable for any inaccuracy and/or fault of the matching results, due to inaccurate or faulty information provided by the Client."),Ho(),jo(618,"p",10),Ss(619,"4.10.3 The Platform shall then inform Clients who have been awarded with the best matching scores vis a vis the RFP whether they wish to send an offer for that RFP. The Clients who wish to contact the User will be provided with User contact details upon submission of a relevant fee to the Platform (as a remuneration for the matching process) subject to payment criteria set by the Platform. Client may then contact the User directly."),Ho(),jo(620,"p",10),Ss(621,"4.10.4 Users are under no obligation to accept any offer submitted by a Client as a reply to the User\u2019s RFP nor to reply or to make any actions with regard to any such offer. In any case negotiations and/or any contract execution and purchase based on the RFP and the offer shall be conducted and/or concluded directly between Users and Clients outside of the Platform and without involvement of eLearning Industry."),Ho(),jo(622,"p",10),Ss(623,"4.10.5 eLearning Industry will not be involved with nor participate in the negotiations and/or contracts between a User and a Client. eLearning Industry\u2019s involvement is strictly confined to conducting the above \u201cmatch-making\u201d process based on the information provided by the User in the RFP and the Clients in the questionnaire, respectively. The Platform does not (and is under no obligation to) review the information provided by either a User or a Client and cannot (and is under no obligation to) guarantee the appropriateness and the fitness for a particular purpose of the product or services provided by the Client."),Ho(),jo(624,"p",10),Ss(625,"4.10.6 Users that submit a lead hereby acknowledge that the Platform will transfer the User\u2019s contact data submitted in the RFP to the Clients as above, in order to contact him/her with regard to the RFP submitted. Client acts as an independent data controller and Platform is not liable for any actions and/or omissions of the Client. User should contact directly the Client to exercise the applicable data subjects\u2019 rights. Users can however inform Platform if they do not wish to get contacted by the specific Client in the future via the Platform. Platform reserves the right to suspend and/or delete any Client in case it is notified from any User of any violation of the above."),Ho(),jo(626,"p",3),Ss(627,"\xa0"),Ho(),jo(628,"h2",8),Ss(629,"5. General Rules for User Generated Content"),Ho(),jo(630,"p",9),Ss(631,"5.1\xa0"),jo(632,"span",5),Ss(633,"What can be posted"),Ho(),Ss(634,":"),Ho(),jo(635,"p",10),Ss(636,"5.1.1 As already mentioned in article 2 above, Registered Users can upload to the Platform without payment to the Platform only informative, \u201cnon-promotional\u201d Content, i.e. Content focusing in general on the e-Learning market that does not serve as promotional activities (directly or indirectly) of the products and/or services of one (or more) professionals or businesses. This free Content must be lawful as well as consistent and relevant to the Platform\u2019s informative nature for the e-Learning market and its targeted audience. Further, a Registered User submitting any Content must have the legal rights to submit such Content as contemplated by the Platform."),Ho(),jo(637,"p",10),Ss(638,"5.1.2 For example such free Content may be related to non-promotional information regarding indicatively (but not exhaustively) the following topics:"),Ho(),jo(639,"ul",6),jo(640,"li",11),Uo(641,"br"),jo(642,"ul",12),jo(643,"li",11),Uo(644,"br"),jo(645,"ul",12),jo(646,"li",11),Uo(647,"br"),jo(648,"ul",12),jo(649,"li",11),Uo(650,"br"),jo(651,"ul",12),jo(652,"li",7),Ss(653,"eLearning and instructional design best practices"),Ho(),jo(654,"li",7),Ss(655,"eLearning industry news"),Ho(),jo(656,"li",7),Ss(657,"eLearning demos"),Ho(),jo(658,"li",7),Ss(659,"eLearning problems and how you solve them"),Ho(),jo(660,"li",7),Ss(661,"Personal experience with educational technologies such as LMS and authoring tools"),Ho(),jo(662,"li",7),Ss(663,"eLearning\u2014company/product directory listings"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(664,"p",10),Ss(665,"5.1.3 \xa0In case any Registered User wishes to upload any promotional Article (namely Content that promotes directly or indirectly the products and/or services of one or more professionals or businesses) it can purchase a paid hosting subscription as following:"),Ho(),jo(666,"ul",6),jo(667,"li",11),Uo(668,"br"),jo(669,"ul",12),jo(670,"li",11),Uo(671,"br"),jo(672,"ul",12),jo(673,"li",11),Uo(674,"br"),jo(675,"ul",12),jo(676,"li",11),Uo(677,"br"),jo(678,"ul",12),jo(679,"li",7),jo(680,"a",16),Ss(681,"eLearning-related Articles"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(682,"p",15),Ss(683,"(a) Registered Users can also upload for free Directory Listings or chose to enhance visibility of their listing by paying an additional fee"),Ho(),jo(684,"ul",6),jo(685,"li",11),Uo(686,"br"),jo(687,"ul",12),jo(688,"li",11),Uo(689,"br"),jo(690,"ul",12),jo(691,"li",11),Uo(692,"br"),jo(693,"ul",12),jo(694,"li",11),Uo(695,"br"),jo(696,"ul",12),jo(697,"li",7),jo(698,"a",22),Ss(699,"eLearning-paid Directory Listing"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(700,"p",15),Ss(701,"(b) Registered Users can also upload the following Content after paying the relevant subscription/fee:"),Ho(),jo(702,"ul",6),jo(703,"li",11),Uo(704,"br"),jo(705,"ul",12),jo(706,"li",11),Uo(707,"br"),jo(708,"ul",12),jo(709,"li",11),Uo(710,"br"),jo(711,"ul",12),jo(712,"li",11),Uo(713,"br"),jo(714,"ul",12),jo(715,"li",7),jo(716,"a",18),Ss(717,"eLearning \u2013 related eBooks"),Ho(),Ho(),jo(718,"li",7),jo(719,"a",19),Ss(720,"eLearning \u2013 related Webinars"),Ho(),Ho(),jo(721,"li",7),jo(722,"a",23),Ss(723,"eLearning \u2013 related Events"),Ho(),Ho(),jo(724,"li",7),jo(725,"a",24),Ss(726,"eLearning \u2013 related press releases"),Ho(),Ho(),jo(727,"li",7),jo(728,"a",20),Ss(729,"job listings"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(730,"p",9),Ss(731,"5.2 User responsibility for any type of Content (free or sponsored) submitted in the Platform:"),Ho(),jo(732,"p",10),Ss(733,"5.2.1 Each Registered User is responsible for any User Generated Content created and/or uploaded in the Platform by such User. eLearning Industry does not participate in the creation of such User Generated Content and does not initiate nor does it have any knowledge or control over any such User Generated Content. Registered Users must take all prudence not to upload any User Generated Content that contains illegal material (of any type) nor to create Content that could result in any illegal act or omission (of any type) nor violate the Terms and Conditions nor any other guidelines posted in the Platform and declaration undertaken by the Registered User with regard to the Content."),Ho(),jo(734,"p",10),Ss(735,"5.2.2 By submitting any Content to upload to the Platform, the User represents, warrants and agrees as follows:"),Ho(),jo(736,"p",15),Ss(737,"(a) All Content submitted for posting in the Platform does not infringe third party rights; the User is in compliance with and shall comply with all laws, rules and regulations applicable to the use of the Platform and the uploaded Content, including but not limited to applicable copyright and data protection laws;"),Ho(),jo(738,"p",15),Ss(739,"(b) The User is either the copyright owner of the Content being uploaded or has the lawful right to upload such Content to the Platform and to provide a license agreement to the Platform in order to host the Content and make it available to the public through the Platform without territorial or other limitations, as well as to other social media accounts owned by the Company (indicatively LinkedIn, Facebook, Twitter and Google+ and/or as is further and in specific provisioned in the Platform from time to time) under the provisions set forth herein."),Ho(),jo(740,"p",15),Ss(741,"(c) The User acknowledges that the Content generated and posted represents the User\u2019s views and opinions and not the Platform\u2019s opinions or views and that the Platform does not necessarily endorse or agree with any such views and opinions by hosting the Content on the Platform;"),Ho(),jo(742,"p",15),Ss(743,"(d) The User is responsible to mention, where applicable, the sources of the Content as well as not to use Content deriving from illegal sources. The terms of use of sources from which the User displays any links to third party Content should at least permit the reproduction without subscription or any other form of remuneration;"),Ho(),jo(744,"p",15),Ss(745,"(e) Where the Content includes the images and/or any other personal data of third parties (e.g. Webinar presenters), the Client is the sole responsible party to inform such third parties in detail about the use of their images and to ensure that the third parties have granted their free and informed consent to include the third party personal data in the content that the Client uploads in the Platform and to provide appropriate proof when so requested. The Client represents and warrants that all such permissions and licenses have been obtained or granted before uploading any Content."),Ho(),jo(746,"p",15),Ss(747,"(f) Without limitation, the Registered User represents, warrants, agrees and guarantees that it shall not upload any Content (or link to any Content) nor proceed to any action in or through the Platform that is illegal. Indicatively and non-exhaustively, and will not post nor act in any way that:"),Ho(),jo(748,"p",21),Ss(749,"(i) infringes or violates another party\u2019s intellectual property rights (such as content, music, videos, photos or other materials for which they do not have written authority from the owner of such materials to post on the Platform), including any party\u2019s right of publicity or right of privacy; or"),Ho(),jo(750,"p",21),Ss(751,"(ii) promotes illegal or unauthorized copying of another person\u2019s copyrighted work or links to them or providing information to circumvent security measures; or"),Ho(),jo(752,"p",21),Ss(753,"(iii) violates any law, statute, ordinance or regulation; or"),Ho(),jo(754,"p",21),Ss(755,"(iv) is threatening, harassing or that promotes racism, bigotry or hatred of any kind against any group or individual; or"),Ho(),jo(756,"p",21),Ss(757,"(v) promotes or encourages violence against a person or damage or destruction of property; or"),Ho(),jo(758,"p",21),Ss(759,"(vi) is inaccurate, false or misleading in any way; or"),Ho(),jo(760,"p",21),Ss(761,"(vii) promotes any illegal activities; or"),Ho(),jo(762,"p",21),Ss(763,"(viii) contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer software or hardware or telecommunications equipment; or"),Ho(),jo(764,"p",21),Ss(765,"(ix) contains any advertising, promotional materials, \u201cjunk mail,\u201d \u201cspam,\u201d \u201cchain letters,\u201d \u201cpyramid schemes,\u201d or any other form of solicitation; or"),Ho(),jo(766,"p",21),Ss(767,"(x) infringes the personality right as well the right of privacy and/or protection of personal data; or"),Ho(),jo(768,"p",21),Ss(769,"(xi)promotes unfair competition and unfair commercial practices and/or violates competition rules"),Ho(),jo(770,"p",15),Ss(771,"(g) Notwithstanding the above, each User submitting Content further and more specifically guarantees that, where the submitted Content includes the images and/or any other personal data of third parties (overall \u201cthird party personal data\u201d), such third parties have been informed in detail about the use of the Content and third party personal data on the Platform pursuant to the Platform\u2019s Terms and Conditions and\xa0"),jo(772,"a",14),Ss(773,"Privacy Policy"),Ho(),Ss(774," and have granted their free and informed consent to include the third party personal data in the Content created or uploaded in the Platform. If so requested, Users shall promptly provide the Platform with any proof necessary to verify the above consent. The Platform reserves the right to take down or to request from the Users to take down any third party personal data indicated by a third party if that third party so notifies the Platform (third party opt-out). Notwithstanding any other rights of the Platform, the same above applies in case that any third party notifies the Platform regarding the violation of the above from the Users."),Ho(),jo(775,"p",15),Ss(776,"(h) When under the guidelines set by the Platform a Registered User must upload a new original Content (created especially for the Platform), the Registered User solemnly declares and represents and warrants that such Content is original and has not been previously posted or circulated."),Ho(),jo(777,"p",10),Ss(778,"The above reflect solely examples of prohibited material and are not intended to be exhaustive of what constitutes prohibited User Generated Content."),Ho(),jo(779,"p",10),Ss(780,"5.2.3 Warranties and Liability of the User: By submitting any content to be uploaded in the Users warrant to the Platform compliance with the provisions of article 5.2.1. and 5.2.2. above, as well as with the terms of the present and with any other declarations and acknowledgements undertaken in the Platform from time to time. Each User acknowledges that he/she bears the responsibility to compensate, defend, hold harmless and exempt the Platform and its directors, officers, employees, consultants, representatives and affiliates from any, and all, claims by third parties\u2019 liability, damages and/or costs (including, but not limited to legal consultants\u2019 fees) which occur as a result of or in connection with the Content they upload or from the breach of the present terms or in case any other User or third party turns against the Platform in relation to any Content they have uploaded to the Platform or in connection to the use of the Platform or the services. In addition, Users acknowledge that they shall respect the notice and take down process of the Platform set in article 7."),Ho(),jo(781,"p",9),Ss(782,"5.3\xa0"),jo(783,"span",5),Ss(784,"Review of Content"),Ho(),Ss(785,":"),Ho(),jo(786,"p",10),Ss(787,"5.3.1 Platform does not and is under no legal obligation to systematically monitor and/or review any Content created or uploaded in the Platform."),Ho(),jo(788,"p",10),Ss(789,"5.3.2 In some cases, in order to ensure that the Content the Users post on the Platform is in line with the Platform\u2019s scope as an informative and educational online community of lawful content for the e-Learning market professionals, Platform conducts a preliminary high-level review of the Content. This review focuses mainly on assessing whether Content is consistent with the Platform\u2019s purpose, that Content is legible and can be easily found by Users as well as to identify potential obvious infringements. Such high-level screening is in principle automated, based on general predefined rules and guidelines provided to Users and includes:"),Ho(),jo(790,"p",15),Ss(791,"(a) assessing:"),Ho(),jo(792,"p",21),Ss(793,"(i) relevance to the topics within the eLearning industry, as analyzed above under paragraph 5.1;"),Ho(),jo(794,"p",21),Ss(795,"(ii) suitability for the eLearning audience;"),Ho(),jo(796,"p",21),Ss(797,"(iii) \xa0(for free Articles) that the Content is not evidently self-promotional (i.e. principally with the purpose to market the products and/or the services of the Registered User) and does not solely serve promotional purposes (in line with the Platform\u2019s business model whereby Registered Users who wish to be provided with paid hosting, marketing and consulting services must pay for them\u2014see also article 2.3 above);"),Ho(),jo(798,"p",21),Ss(799,"(iv) (where applicable) that the Content has not already been published on the User\u2019s or third party\u2019s digital means; and/or"),Ho(),jo(800,"p",21),Ss(801,"(v) that the Content is not obviously and evidently infringing any third party intellectual property rights or otherwise illegal or inappropriate. Without limiting the foregoing, any Content submitted by a User must not:"),Ho(),jo(802,"ul",6),jo(803,"li",11),Uo(804,"br"),jo(805,"ul",12),jo(806,"li",11),Uo(807,"br"),jo(808,"ul",12),jo(809,"li",11),Uo(810,"br"),jo(811,"ul",12),jo(812,"li",11),Uo(813,"br"),jo(814,"ul",12),jo(815,"li",11),Uo(816,"br"),jo(817,"ul",12),jo(818,"li",11),Uo(819,"br"),jo(820,"ul",12),jo(821,"li",11),Uo(822,"br"),jo(823,"ul",12),jo(824,"li",7),Ss(825,"contain any defamatory, obscene, indecent, abusive, offensive, harassing, violent, hateful, inflammatory or otherwise objectionable material;"),Ho(),jo(826,"li",7),Ss(827,"promote sexually explicit or pornographic material, violence, or discrimination based on race, sex, religion, nationality, disability, sexual orientation or age;"),Ho(),jo(828,"li",7),Ss(829,"violate any party\u2019s legal rights (including rights of publicity and privacy);"),Ho(),jo(830,"li",7),Ss(831,"contain any material that could result in civil or criminal liability;"),Ho(),jo(832,"li",7),Ss(833,"conflict with these T&Cs or any other applicable policy;"),Ho(),jo(834,"li",7),Ss(835,"be likely to deceive any person;"),Ho(),jo(836,"li",7),Ss(837,"advocate, promote or assist any illegal or unlawful activity;"),Ho(),jo(838,"li",7),Ss(839,"cause annoyance, inconvenience or needless anxiety or be likely to upset, embarrass, alarm or annoy any other person;"),Ho(),jo(840,"li",7),Ss(841,"impersonate any person, or misrepresent the identity or affiliation of the user or any other party;"),Ho(),jo(842,"li",7),Ss(843,"involve commercial activities or sales, such as contests, sweepstakes and other sales promotions, barter or advertising, other than as conducted by the Platform; or"),Ho(),jo(844,"li",7),Ss(845,"appear as if they are sent by or endorsed by us or any other person, if this is not the case."),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(846,"p",15),Ss(847,"(b) Extracting metadata provided by Registered Users to help other Platform and Registered Users locate the Content."),Ho(),jo(848,"p",15),Ss(849,"(c) Indexing and displaying links to related Content based on an automated algorithm."),Ho(),jo(850,"p",15),Ss(851,"(d) For legibility and presentation purposes (indicatively, breaking-down the text into smaller paragraphs, adjusting the fonts and applying other formatting characteristics)."),Ho(),jo(852,"p",10),Ss(853,"It is specified that review of the Content by the Platform can include some or all of the above activities depending on the type of Content uploaded in the Platform. It is clarified that some parts of Content uploaded cannot be reviewed by the Platform such as (indicatively) the contents of a Webinar; the truth and accuracy of Events, Job Openings, Press Releases; or the links to third party websites and Content."),Ho(),jo(854,"p",10),Ss(855,"5.3.3 The Platform reserves the right to refuse to upload any Content that does not successfully pass the above high-level review in the Platform\u2019s sole discretion. In addition, the Platform reserves the right (but is under no legal obligation) to make grammatical or spelling corrections to the Content. Any manual intervention that could be necessary is solely made to facilitate this typical check. In any case whatsoever, the above review, when conducted by the Platform is conducted notwithstanding the Users obligations and the guarantees undertaken by Users with regard to the Content as laid down in article 5.2. above and does not limit nor exclude in any way that liability of each User and his/her obligation to hold harmless the Platform in case of any breach or violation, as further described in article 6 below."),Ho(),jo(856,"p",10),Ss(857,"5.3.4 The Platform acts principally as the automated, technical and neutral host of the Content that is uploaded by Users. Any Content review of User Generated Content only aims to ensure that Content is coherent and consistent with the Platform\u2019s purpose and to identify obvious infringement and we do not guarantee (nor control or initiate) the Content\u2019s lawfulness and/or fitness for a specific purpose. Regarding the legal nature and the limitations of liability of the Platform article 6 below is applicable."),Ho(),jo(858,"p",3),Ss(859,"\xa0"),Ho(),jo(860,"h2",8),Ss(861,"6. Legal Nature of the Platform - Disclaimers \u2013 Limitation of Liability"),Ho(),jo(862,"p",9),Ss(863,"6.1\xa0"),jo(864,"span",5),Ss(865,"Legal nature of the Platform"),Ho(),Ss(866,":"),Ho(),jo(867,"p",10),Ss(868,"6.1.1 In addition to hosting its own Content, the Platform principally acts as an intermediary service provider that: (a) Hosts and stores information and data at the direction of its Users and (b) Provides links or other tools for locating content online"),Ho(),jo(869,"p",10),Ss(870,"6.1.2 Platform is also a provider of Additional Services including: (a) consulting services and (b) marketing tools"),Ho(),jo(871,"p",10),Ss(872,"6.1.3 With regard to the Services referred to in article 6.1.1 the Platform acts as an intermediary information service provider that hosts information and data at the direction of its Users\u2014the Platform does not control or solicit User Generated Content but allows Registered Users to upload such Content to promote the purposes of the Platform. In this context, Platform acts as the automated, technical and neutral host of the Content that is uploaded by Users. It is each User\u2019s obligation to follow the strict rules of the Platform regarding copyright protection and lawful Content provision in general. Given the nature of the Platform and the Content, it is not possible for the Platform (and it is under no legal obligation) to constantly monitor the Content uploaded by User\u2019s nor to actively seek facts or circumstances to confirm intellectual property rights and monitor for all inappropriate or illegal activity. However, the Platform intends to take reasonable precautionary measures (including but not limited to the measures specified under article 5.3 above and article 7 below) to prohibit obviously illegal activity."),Ho(),jo(873,"p",10),Ss(874,"6.1.4 It is clarified that except for Content it expressly creates, the Platform is not intended to act and should not be regarded as a publisher. To mitigate the possibility of inappropriate content, the Platform has put in place and apply the aforementioned reasonable precautionary measures and undertakes reasonable efforts not to post infringing, unlawful or undesirable Content. In addition as also mentioned in the present terms, the User Generated Content depicts the opinions and the views of the User/author which are not initiated, controller or endorsed by the Platform."),Ho(),jo(875,"p",10),Ss(876,"6.1.5 In any case whatsoever, in any Services provided by the Platform (including Additional Services), Platform does not conduct a comprehensive review of any Content, does not control nor initiate User Generated Content nor the actions of the User, nor does Platform guarantee (nor control or initiate) the Content\u2019s nor any activities\u2019 undertaken by the Users lawfulness and fitness for a specific purpose. Although as part of consulting services the Platform may identify topics and areas of Content a User may wish to explore or publish on, it is ultimately the decision and action of the Registered User in determining what Content to create or upload. Each registered User uploads Content and conducts any activity in or through the Platform must make those representations, warranties and guarantees to the Platform as set forth in article 5.2 above and without any interference nor control by the Platform. All User Generated Content and actions undertaken by the Users express their own opinion and views and hosting of any Content is not an endorsement of any opinions and views expressed by the Users."),Ho(),jo(877,"p",9),Ss(878,"6.2 The Platform and the User Generated Content uploaded in it may contain hyperlinks (links) to third-party websites. Platform does not control nor review the Content of such links and bears no responsibility for the Content and the services of those third party websites, nor does it warrant the continuous and safe accessibility to them as laid down in article 1.2.5. above."),Ho(),jo(879,"p",10),Ss(880,"6.2.1 The Platform does not guarantee and is not responsible or liable for the accuracy, legitimacy, truth, reliability, quality, or adequacy for the intended purpose of the User Generated Content (both sponsored and free) uploaded in the Platform. Each User accesses the User Generated Content hosted in the Platform as well as any other third-party website at his /her own exclusive risk, subject to any terms or agreements with the providers of such Content or websites. In any case, eLearning Industry bears no responsibility for User Generated Content (both sponsored and free) hosted in the Platform, as well as the activities undertaken by Users through the Platform. Each User shall be fully liable for any Content created and distributed by such User (as laid down in article 5 above)."),Ho(),jo(881,"p",9),Ss(882,"6.3 The Platform and the Services are provided \u201cas is\u201d and \u201cas available\u201d using a commercially reasonable level of skill and care. Except as expressly stated in these Terms & Conditions, eLearning Industry does not provide and expressly disclaims warranties, conditions or undertakings of any kind in relation to the Services, either express or implied, including, without limitation, warranties of merchantability and fitness for a particular purpose. No advice or information, whether oral or written, obtained by Users from eLearning Industry or through the Services will create any warranty not expressly stated or incorporated herein. Without limiting the foregoing, eLearning Industry, its subsidiaries, its licensors and affiliates, do not warrant that any Content is accurate, true, reliable, correct or complete."),Ho(),jo(883,"p",9),Ss(884,"EXCEPT AS EXPRESSLY PROVIDED IN WRITING, A USER\u2019S USE OF THE PLATFORM, ITS CONTENT AND ANY SERVICES THROUGH THE PLATFORM IS AT THE USER\u2019S OWN RISK AND THE PLATFORM IS PROVIDED ON AN \u201cAS IS\u201d AND \u201cAS AVAILABLE\u201d BASIS, WITHOUT ANY WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. NEITHER COMPANY NOR ANY PERSON ASSOCIATED WITH COMPANY MAKES ANY WARRANTY OR REPRESENTATION WITH RESPECT TO THE COMPLETENESS, SECURITY, RELIABILITY, QUALITY, ACCURACY OR AVAILABILITY OF THE PLATFORM. WITHOUT LIMITING THE FOREGOING, NEITHER COMPANY NOR ANYONE ASSOCIATED WITH COMPANY REPRESENTS OR WARRANTS THAT THE PLATFORM, ITS CONTENT OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE PLATFORM WILL BE ACCURATE, RELIABLE, ERROR-FREE OR UNINTERRUPTED, THAT DEFECTS WILL BE CORRECTED, THAT THE PLATFORM OR THE SERVER THAT MAKES IT AVAILABLE ARE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS OR THAT THE PLATFORM OR ANY SERVICES OR ITEMS OBTAINED THROUGH THE PLATFORM WILL OTHERWISE MEET YOUR NEEDS OR EXPECTATIONS."),Ho(),jo(885,"p",9),Ss(886,"COMPANY HEREBY DISCLAIMS ALL WARRANTIES OF ANY KIND, WHETHER EXPRESS OR IMPLIED, STATUTORY OR OTHERWISE, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, NON-INFRINGEMENT AND FITNESS FOR PARTICULAR PURPOSE."),Ho(),jo(887,"p",9),Ss(888,"6.4 eLearning Industry agrees to undertake reasonable efforts and technical measures so that the Services and access to the Platform can take place smoothly and without interruption and that an adequate level of security is maintained. However, eLearning Industry does not guarantee that the Services and the Platform will be available without interruption and without errors. We are not liable, though, if for any reason, negligence included, despite the maintained security measures adopted by us, the operation of the Platform is interrupted or access to the Platform or the User Profiles becomes difficult and / or impossible or if viruses or other harmful software is identified and transmitted to the terminals of the users / visitors, or if third unauthorized parties intervene in any way to the Content and operation of the Platform making the use of it difficult or causing problems to its proper function. Moreover, we are not liable if the Platform is not accessible for reasons beyond our control as well as for reasons due to technical or other failure of the backbone network or for reasons of force majeure or incidental facts. In case of any loss or damage of the Content our sole liability and responsibility will be to repost the Content to the extent technically feasible from our periodic back-ups."),Ho(),jo(889,"p",9),Ss(890,"6.5 We reserve the right: (a) to change at any time, without justification and without prior notice, partially or in total, the Terms & Conditions, the features and services provided, the Platform\u2019s functionalities as well as the Platform\u2019s versions or the provided Content and features, (b) to renew or upgrade or discontinue / stop, partially or in total, all of the Content of the Platform and/or any User Account, (c) to renew or upgrade partially or in total the external appearance (interface), the structure or composition (configuration) of the Platform and/or any User Account as well as their technical specifications, (d) to limit the access of the entire Platform to any registered or unregistered User. Moreover, eLearning Industry reserves the right at any time, to cancel, suspend or pause or shut down its operation."),Ho(),jo(891,"p",9),Ss(892,"6.6 Furthermore, Platform reserves the right to suspend and/or delete a User Account and/or refuse the opening of a User Account, at any time, for any reason, including in the event we become aware of a repeatedly infringing use of the Platform from any User and/or any Platform visitor and/or any third party, or in case we receive takedown notices regarding a User\u2019s repeatedly infringing behavior."),Ho(),jo(893,"p",9),Ss(894,"6.7 TO THE FULLEST EXTENT PROVIDED BY LAW, IN NO EVENT WILL COMPANY, ITS AFFILIATES OR THEIR LICENSORS, SERVICE PROVIDERS, EMPLOYEES, AGENTS, OFFICERS OR DIRECTORS BE LIABLE FOR DAMAGES OF ANY KIND, UNDER ANY LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH YOUR USE, OR INABILITY TO USE, THE PLATFORM OR ANY CONTENT ON THE PLATFORM INCLUDING ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, INCLUDING BUT NOT LIMITED TO, PERSONAL INJURY, PAIN AND SUFFERING, EMOTIONAL DISTRESS, LOSS OF REVENUE, LOSS OF PROFITS, LOSS OF BUSINESS OR ANTICIPATED SAVINGS, LOSS OF USE, LOSS OF GOODWILL, LOSS OF DATA, AND WHETHER CAUSED BY TORT (INCLUDING NEGLIGENCE), BREACH OF CONTRACT OR OTHERWISE, EVEN IF FORESEEABLE. THE FOREGOING DOES NOT AFFECT ANY LIABILITY WHICH CANNOT BE EXCLUDED OR LIMITED UNDER APPLICABLE LAW."),Ho(),jo(895,"p",9),Ss(896,"In no event shall eLearning Industry, its officers, directors, employees, or agents, be liable to Users for any direct, indirect, incidental, special, punitive, or consequential damages whatsoever. This limitation on liability includes, but is not limited to, (i) personal injury or property damage, of any nature whatsoever, resulting from the Users\u2019 use of the Platform, (ii) any loss or damage due to unauthorized access to or use of our servers and/or any and all business information stored therein, (iii) any loss or damage due to interruption or cessation of transmission to or from our Platform or interoperability problems, (iv) any loss or damage due to bugs, viruses, trojan horses, or the like, which may be transmitted to or through our website by any third party, (v) any errors or omissions in any Content, (vi) any defamatory, offensive, or illegal conduct of any third party, (vii) any statement or conduct of any third party on the Platform (viii) any loss or damage resulting from the use, or inability to use, any portion of our website or the Platform or for any loss or damage of any kind in the User data, or (ix) any loss of revenue, profits, goodwill or any special, indirect, consequential or pure economic loss, costs, damages, charges or expenses. In any case whatsoever to the extent permitted by applicable law, liability of the Platform is limited to the amount paid by such User in the prior six months. The limitations on liability apply whether liability is based on warranty, contract, tort, or any other legal theory, and whether or not eLearning industry is advised of the possibility of such damages."),Ho(),jo(897,"h2",8),Ss(898,"7. Notice and Take Down Process\u2014Report to Competent Authorities"),Ho(),jo(899,"p",9),Ss(900,"7.1 The Platform reserves and has the right to suspend temporarily or permanently delete, any User Account and Profile or User Generated Content any time at its sole discretion, including when it becomes aware of any breach of law or the present Terms & Conditions by any User or by any third party."),Ho(),jo(901,"p",9),Ss(902,"7.2 More specifically, the Platform reserves the right to remove from the Platform any allegedly infringing Content following the submission of a takedown notice. Anyone who wants to send to the Platform a claim asking to take down any Content (notice and take down process), as provisioned in the law, should take every reasonable measure to ensure that the grounds for this claim are adequate and concern specific Content uploaded or posted by a specific registered User. Notice and take down notices submitted to the Platform must be clear and explicit, specifically indicating the (allegedly) infringing Content to be taken down. The claimant should provide to us adequate data to be able to identify the potential unlawful act or omission, as well as to avoid unjustified, unsubstantiated, untrue and unfair disclosures."),Ho(),jo(903,"p",9),Ss(904,"7.3 The Platform will respond to notices of alleged copyright infringement that comply with applicable law. If any person believes that any materials accessible on or from the Platform infringes that person\u2019s copyright, that person may request removal of those materials (or access to them) from the Platform by submitting Copyright Infringement Liability Limitation Act of the Digital Millennium Copyright Act (17 U.S.C. \xa7 512) (\u201cDMCA\u201d), the written notice (the \u201cDMCA Notice\u201d) must include substantially the following:"),Ho(),jo(905,"p",10),Ss(906,"7.3.1 Include the complaining party\u2019s contact information. The information must be reasonably sufficient for the Platform to contact the complaining party."),Ho(),jo(907,"p",10),Ss(908,"7.3.2 Identify the copyrighted or otherwise protected work or works claimed to be infringed."),Ho(),jo(909,"p",10),Ss(910,"7.3.3 Identify (a) for material stored by the Platform, the allegedly infringing and/or unlawful material, or (b) for information location tools, the reference or link to the allegedly infringing material or activity. This information must be sufficient to allow the Company to locate the material, reference, or link."),Ho(),jo(911,"p",10),Ss(912,"7.3.4 Include a physical or electronic signature of a person authorized to act on the rightsholder\u2019s behalf."),Ho(),jo(913,"p",10),Ss(914,"7.3.5 Include a statement that the complaining party has a good faith belief that the infringing material is not authorized by the copyright owner, the copyright owner\u2019s agent, or law."),Ho(),jo(915,"p",10),Ss(916,"7.3.6 Include a statement that the information in the notice is accurate and, under penalty of perjury, that the complaining party is authorized to act on behalf of the rightsholder."),Ho(),jo(917,"p",10),Ss(918,"A takedown notice that does not substantially comply with the above requirements generally does not require the Platform to take down the allegedly infringing material."),Ho(),jo(919,"p",9),Ss(920,"7.4 Counter-notice: Further to the submission of a takedown notice as per the above, the alleged infringer may submit a counter-notice, which must substantially include:"),Ho(),jo(921,"p",10),Ss(922,"7.4.1 The counter-claimant\u2019s name, address, telephone number, and physical or electronic signature."),Ho(),jo(923,"p",10),Ss(924,"7.4.2 Identification of the material that was taken down."),Ho(),jo(925,"p",10),Ss(926,"7.4.3 The counter-claimant\u2019s statement, under penalty of perjury, of its good faith belief that the material was taken down due to a mistake or misidentification."),Ho(),jo(927,"p",9),Ss(928,"7.5 For the purposes of the notice & takedown process described above, the Platform has designated, as an agent for the receipt of notifications of claimed infringements, Christopher Pappas with contact information cpappas@eLearningIndustry.com"),Ho(),jo(929,"p",9),Ss(930,"7.6 If any damage occurs to the Platform because of the Platform\u2019s actions further to a notice submitted by a claimant, that claimant assumes all responsibility for covering the damage and any related expenses of the Company. We shall disregard any claim that does not fulfill the above prerequisites. Any claimant and/or counter-claimant that knowingly makes a material misrepresentation that Content is infringing and, following such misrepresentation, eLearning Industry takes down any Content, shall be fully liable towards eLearning Industry for any damage caused as a result to such misrepresentations."),Ho(),jo(931,"p",9),Ss(932,"7.7 In any case and notwithstanding the above, if any breach of the present Terms & Conditions comes to the attention of the Platform (following any automated control or complaint as per the above) may at its discretion (depending to the severity of each case) (a) give notice to the User and request to refrain from any such violation, and/or (b) block a User from the Platform (temporarily or permanently) and withdraw the relevant credentials, and/or (c) delete the User Account (see also article 9 below)."),Ho(),jo(933,"p",9),Ss(934,"7.8 Notwithstanding the above, we shall proceed to suspension or termination of any Content further to a Court or a Competent Authority order."),Ho(),jo(935,"p",9),Ss(936,"7.9 eLearning Industry shall in no manner be liable towards the Users and/or any third party for taking down Content, pursuant to the above process, and each User acknowledges that eLearning Industry is in no position and has no obligation to examine the accuracy of any notice and take down request and/or counter-notice submitted by any User, Client and/or any third party."),Ho(),jo(937,"p",9),Ss(938,"7.10 Report to the competent Authorities: The Platform further reserves its right to report any breach coming to its attention to the relevant law enforcement authorities under the conditions laid down in the applicable laws of Nevada. Also, eLearning Industry could provide any information requested by any competent authority (including personal or business data) with regard to the Users and the User Account in the Platform, with or without prior notice to such Users, subject to the applicable laws of Nevada."),Ho(),jo(939,"h2",8),Ss(940,"8. Intellectual Property"),Ho(),jo(941,"p",9),Ss(942,"8.1\xa0"),jo(943,"span",5),Ss(944,"eLearning Industry Intellectual Property rights"),Ho(),Ho(),jo(945,"p",10),Ss(946,"8.1.1 Except as otherwise indicated for User Generated Content in the present terms, the Platform and all text, images, marks, logos and other Content contained herein, including, without limitation, the logo and all designs, text, graphics, pictures, information, data, software, sound files, other files, and the selection and arrangement thereof are the proprietary property of eLearning Industry or its licensors and are protected by applicable intellectual property laws. You may not modify, reproduce or publicly display, perform, or distribute or otherwise use any such information or materials for any public or commercial purpose except in accordance with the terms of the COMPANY Platform. A User may not copy, reproduce, publish, transmit, distribute, perform, display, post, modify, create derivative works from, sell, license, or otherwise exploit the Platform or any materials on the Site, except as expressly permitted by these T&Cs or other applicable policies. You must not delete or alter any copyright, trademark or other proprietary rights notices from copies of materials."),Ho(),jo(947,"p",10),Ss(948,"8.1.2 The eLearning Industry logo and name and all other product or service names or slogans of eLearning Industry displayed on the Platform are trademarks of eLearning Industry and may not be copied, imitated or used, in whole or in part, without the prior written permission of eLearning Industry. In addition, the look and feel of the Platform may not be copied, imitated or used, in whole or in part, without the prior written permission of eLearning Industry. All other trademarks, including registered trademarks, product names and company names or logos mentioned in the Platform are the property of their respective owners. Reference to any products, services, processes or other information, by trade name, trademark, manufacturer, supplier or otherwise does not constitute or imply endorsement, sponsorship or recommendation thereof by eLearning Industry."),Ho(),jo(949,"p",10),Ss(950,"8.1.3 As soon as anyone becomes a User, the Platform provides him/her with a personal, non-transferable, non-exploitable, non-exclusive, open-ended one user license to access the Content hosted in the Platform only for legitimate private use purposes under the present terms and conditions. It is expressly forbidden to use the Content for illegal purposes and/or for professional exploitation. Users may not sublicense the use of, or the access to the Platform and the services to any third party with or without remuneration. The present license shall be automatically terminated when the relationship with the Platform is terminated for any reason, as provisioned in article 9."),Ho(),jo(951,"p",10),Ss(952,"8.1.4 Providing access and allowing the use of the features, tools and Services provided by the Platform does not give any User or any other third-party ownership of any of the Company\u2019s intellectual property rights to any of the above. We retain ownership of all intellectual property rights in and to the Platform, its features, tools and Services including copies, improvements, enhancements, derivative works and modifications thereof. The rights to use the Platform are limited to those expressly granted hereby. No other rights with respect to the Platform or any related intellectual property rights are granted or implied."),Ho(),jo(953,"p",9),Ss(954,"8.2\xa0"),jo(955,"span",5),Ss(956,"Intellectual property rights on the Content uploaded by registered Users"),Ho(),Ho(),jo(957,"p",10),Ss(958,"8.2.1 By submitting Content to upload in the Platform each User provides to the Platform the license referred to in article 5.2.2.b) above. eLearning Industry shall not accept previously published articles from registered Users, if this is indicated in the specific guidelines posted in the Platform at the point of submission. Authors or submitters of articles are not entitled to compensation and shall not be paid for any access or use of the Articles from the Platform. After an Article is uploaded to the Platform, the Registered User submitting such Article may be featured as an eLearning Industry contributor/blogger. Features articles are selected based on the Registered User\u2019s seniority."),Ho(),jo(959,"p",10),Ss(960,"8.2.2 The Platform is not liable for any access or use of any User Generated Content, including any that is uploaded by Registered Users in violation of any User\u2019s and/or any other third party\u2019s intellectual property rights. Platform bears no liability for any dispute that may arise between the Users, registered Users and Clients and/or between the Users, registered Users and Clients on the one hand and any third party on the other, regarding intellectual property rights in relation to the Content uploaded by the registered Users on the Platform. The provisions and warranties provided by the Registered User in article 5 apply in such case as well."),Ho(),jo(961,"p",10),Ss(962,"8.2.3 All Users browsing and having access to Content in the Platform are expressly prohibited to engage in any unlawful act which may undermine the rights of the registered Users-owners or right holders of the Content uploaded at the Platform. Indicatively, but not exclusively, Users are prohibited from engaging into any unlawful act or omission, including (but not limited to ) the following activities:"),Ho(),jo(963,"ul",6),jo(964,"li",11),Uo(965,"br"),jo(966,"ul",12),jo(967,"li",11),Uo(968,"br"),jo(969,"ul",12),jo(970,"li",11),Uo(971,"br"),jo(972,"ul",12),jo(973,"li",11),Uo(974,"br"),jo(975,"ul",12),jo(976,"li",7),Ss(977,"Recording and direct or indirect, temporary or permanent reproduction of the Content by any means and in any form, in whole or in part, except as expressly allowed within the Platform."),Ho(),jo(978,"li",7),Ss(979,"Translation of the Content."),Ho(),jo(980,"li",7),Ss(981,"Arrangement, adaptation or other alteration of the Content."),Ho(),jo(982,"li",7),Ss(983,"Unauthorized and/or illegal distribution to the public in any form by sale or otherwise."),Ho(),jo(984,"li",7),Ss(985,"Renting and public lending of the original or copies of their work."),Ho(),jo(986,"li",7),Ss(987,"Public performance of the Content."),Ho(),jo(988,"li",7),Ss(989,"Transmission or retransmission of the Content to the public by radio and television, by electromagnetic waves or cables or pipes or other material in any other way, parallel to the surface of the earth or through satellites."),Ho(),jo(990,"li",7),Ss(991,"Any other act or action contrary to these Terms & Conditions."),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(992,"h2",8),Ss(993,"9. Termination"),Ho(),jo(994,"p",9),Ss(995,"9.1 A Registered User may at any time decide to delete such User\u2019s User Account and Profile by e-mailing us at\xa0"),jo(996,"span",5),Ss(997,"support@eLearningIndustry.com"),Ho(),Ss(998," with a request to delete the User Account and Profile. In this case article 3.8 shall apply. Register Users who wish to delete their User Account and Profile and terminate their relationship with the Platform, will no longer be able to make use of the services provided in the Platform for Registered Users (as per article 2.2)."),Ho(),jo(999,"p",9),Ss(1e3,"9.2 The Platform may terminate a User\u2019s access to all or any part of the Platform and/or his/her User Account at any time, without cause, with or without a prior notice."),Ho(),jo(1001,"p",9),Ss(1002,"9.3 The Platform reserves without limitation the right to suspend and/or delete any User Account and terminate the Platform\u2019s relationship with any registered User for due cause, including (indicatively but not exclusively) the following:"),Ho(),jo(1003,"p",10),Ss(1004,"9.3.1 any violation of the present terms and conditions or any other illegal act or omission violating any laws or statutory provisions;"),Ho(),jo(1005,"p",10),Ss(1006,"9.3.2 provision of false/inaccurate information in the User Account;"),Ho(),jo(1007,"p",10),Ss(1008,"9.3.3 violation of any right of a third person that has come to our attention;"),Ho(),jo(1009,"p",10),Ss(1010,"9.3.4 following a complaint received by another User or by a third parties for breach of the present terms, violation of any law or statute;"),Ho(),jo(1011,"p",10),Ss(1012,"9.3.5 following the request of any Authority and/or Court decision and/or relevant competent Body;"),Ho(),jo(1013,"p",10),Ss(1014,"9.3.6 any other or omission that could damage or harm in any ways the Platform (i.e. indicatively its operation, its reputation, its tradename and IPRs, its technical specifications, its software etc.);"),Ho(),jo(1015,"p",10),Ss(1016,"9.3.7 repeatedly infringing and unlawful conduct on behalf of any User;"),Ho(),jo(1017,"p",10),Ss(1018,"9.3.8 as a result of the notice and take down process described in article 7 above."),Ho(),jo(1019,"p",10),Ss(1020,"9.3.9 In any case whatsoever the provisions of article 3.9 above apply also respectively."),Ho(),jo(1021,"h2",8),Ss(1022,"10. Confidentiality"),Ho(),jo(1023,"p",3),Ss(1024,"As a result of the provision of the Platform services to Users, and whether due to any intentional or negligent act or omission, we may disclose to Users or they may otherwise learn of or discover, our non-public documents, business practices, object code, source code, management styles, day-to-day business operations, capabilities, systems, current and future strategies, marketing information, financial information, software, technologies, processes, procedures, methods and applications, or other aspects of our business (\u201cConfidential Information\u201d). Users hereby agree and acknowledge that such information is confidential and shall be our sole and exclusive intellectual property and proprietary information. Users agree to use our Confidential Information only for the specific purposes as allowed in these Terms. Any disclosure of our Confidential Information to a third party specifically including a direct competitor is strictly prohibited and will be vigorously challenged in a court of law. All obligations contained herein shall survive the termination of these Terms. Furthermore, Users acknowledge that our information is proprietary, confidential and extremely valuable to us, and that we would be materially damaged by any disclosure of our Confidential Information. Users acknowledge and agree that monetary damages provide an insufficient remedy for the breach of this confidentiality obligation, and that we shall be entitled to injunctive relief."),Ho(),jo(1025,"p",3),Ss(1026,"\xa0"),Ho(),jo(1027,"h2",8),Ss(1028,"11. Indemnification"),Ho(),jo(1029,"p",3),Ss(1030,"In addition to any other warranty, indemnification and declaration of Users, all Users also agree to indemnify and hold harmless eLearning Industry, its contractors, and its licensors, and their respective directors, officers, employees and agents from and against any and all claims and expenses including attorneys\u2019 fees, arising out of their use of the Platform, including but not limited to the violation of the Terms & Conditions."),Ho(),jo(1031,"p",3),Ss(1032,"\xa0"),Ho(),jo(1033,"h2",8),Ss(1034,"12. Applicable Law and Jurisdiction"),Ho(),jo(1035,"p",3),Ss(1036,"These terms are considered as terms between business (B2B) and are governed by and construed according to the laws of Nevada. Both parties agree that they are subject to the exclusive jurisdiction of the courts of the city of Reno in Nevada."),Ho(),jo(1037,"p",3),Ss(1038,"At our sole discretion, we may require you to submit any disputes arising from the use of the Platform or any violation of these T&C\u2019s, including disputes arising from or concerning their interpretation, violation, invalidity, non-performance, or termination, to final and binding arbitration under the Rules of Arbitration of the American Arbitration Association applying Nevada law."),Ho(),jo(1039,"p",3),Ss(1040,"\xa0"),Ho(),jo(1041,"h2",8),Ss(1042,"13. Miscellaneous"),Ho(),jo(1043,"p",9),Ss(1044,"13.1 Above Terms and Conditions and the\xa0"),jo(1045,"a",14),Ss(1046,"Privacy Policy"),Ho(),Ss(1047," shall bind all parties and constitute the entire agreement of the parties and prevail in any and all prior and existing contracts between the User and eLearning Industry."),Ho(),jo(1048,"p",9),Ss(1049,"13.2 If individual terms of the Terms & Conditions become partially or wholly invalid or unenforceable, the validity of the remaining provisions shall not be affected."),Ho(),jo(1050,"p",9),Ss(1051,"13.3 The Company\u2019s failure to enforce any right or provisions of the present Terms & Conditions will not constitute a waiver of such or any other provision."),Ho(),jo(1052,"p",9),Ss(1053,"13.4 Users may not assign any of their rights under the present Terms & Conditions to any third party. eLearning Industry reserves the right to assign its rights under the present to any other individual or entity at its sole discretion."),Ho(),jo(1054,"p",25),Ss(1055,"13.5 eLearning Industry reserves the right, at its own discretion to modify or replace any part of these Terms. It is the Users\u2019 responsibility to check the Terms & Conditions periodically for changes. The Users\u2019 continued use of or access to the Platform following the posting of any changes to the Terms & Conditions constitutes acceptance of those changes. eLearning Industry may also, in the future offer new services and/or features through the Platform. Such new features and/or services shall be subject to the Terms & Conditions."),Ho(),Ho(),Ho()}2&e&&(_r(1),Bo("scrollTop",0))},styles:[""]}),oG),hG=function e(){_classCallCheck2(this,e)},dG=((lG=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||lG)},lG.\u0275cmp=gt({type:lG,selectors:[["app-loading"]],decls:9,vars:0,consts:[[1,"lds-roller"]],template:function(e,t){1&e&&(jo(0,"div",0),Uo(1,"div"),Uo(2,"div"),Uo(3,"div"),Uo(4,"div"),Uo(5,"div"),Uo(6,"div"),Uo(7,"div"),Uo(8,"div"),Ho())},styles:['.lds-roller[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:40px 40px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;width:7px;height:7px;border-radius:50%;background:#4c57e9;margin:-4px 0 0 -4px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{-webkit-animation-delay:-36ms;animation-delay:-36ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child:after{top:63px;left:63px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2):after{top:68px;left:56px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.108s;animation-delay:-.108s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3):after{top:71px;left:48px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:-.144s;animation-delay:-.144s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4):after{top:72px;left:40px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5):after{top:71px;left:32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-delay:-.216s;animation-delay:-.216s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6):after{top:68px;left:24px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-delay:-.252s;animation-delay:-.252s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7):after{top:63px;left:17px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-delay:-.288s;animation-delay:-.288s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8):after{top:56px;left:12px}@-webkit-keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}']}),lG),pG=["googleSignUp"];function fG(e,t){1&e&&(jo(0,"div",27),Uo(1,"app-loading"),Ho())}function vG(e,t){if(1&e&&(jo(0,"p",28),Ss(1),Ho()),2&e){var i=$o();_r(1),Es(i.errorText)}}var mG,gG=((mG=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this.router=t,this.loginDetailsService=i,this.httpService=n,this.snackBar=r,this.socialService=a,this.zone=o,this.dialogRef=s,this.authService=l,this.socialLogin=new dA,this.isLoading=!1,this.hideSocialLogin="hideBlock",this.hide=!0,this.hideContainer="",this.studentLoginDetails=new hb,this.tutorLoginDetails=new yb,this.tutorAvailabilitySchedule=new pA,this.incorrectLoginDetails=!1,this.loginModel=new uA,this.registrationModel=new hG,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top"}}return _createClass(e,[{key:"ngOnInit",value:function(){this.googleSDK()}},{key:"toFacade",value:function(){this.router.navigate(["facade"])}},{key:"onLogin",value:function(e){var t=this;setTimeout((function(){t.isLoading=!1,t.hideContainer=""}),2e4),this.isLoading=!0,this.hideContainer="hideBlock",this.loginModel.email=e.value.email,this.loginModel.password=e.value.password,this.authService.onLogin(this.loginModel),this.authService.getAuthStatusListener().subscribe((function(e){0==e?(t.errorText="Incorrect email or password",t.isLoading=!1,t.hideContainer="",t.incorrectLoginDetails=!0):1==e&&("Learner"==t.loginDetailsService.getLoginType()?t.toFacade():"Expert"==t.loginDetailsService.getLoginType()&&t.toHome())}))}},{key:"toSignUp",value:function(){this.router.navigate(["signUp"])}},{key:"toHome",value:function(){this.router.navigate(["home"])}},{key:"toResetPassword",value:function(){this.router.navigate(["resetPassword"])}},{key:"openThankYouPage",value:function(){var e=this,t=new kT;t.disableClose=!0,this.dialogRef.open(KA,t).afterClosed().subscribe((function(t){e.role=t,e.authService.saveSocialLogin(e.registrationModel),e.authService.getAuthStatusListener().subscribe((function(t){1==t&&("Learner"==e.loginDetailsService.getLoginType()?e.toFacade():"Expert"==e.loginDetailsService.getLoginType()&&e.toHome())}))}))}},{key:"openTermsAndConditions",value:function(){this.dialogRef.open(uG,{width:"auto",height:"auto"})}},{key:"prepareLoginButton",value:function(){var e=this;null==this.auth2&&location.reload(),this.incorrectLoginDetails=!1,this.auth2.attachClickHandler(this.googleSignUp.nativeElement,{},(function(t){var i=t.getBasicProfile();e.socialLogin.id=i.getId(),e.socialLogin.fullName=i.getName(),e.socialLogin.email=i.getEmail(),e.socialService.setSocialDetails(e.socialLogin),e.zone.run((function(){setTimeout((function(){e.isLoading=!1,e.hideContainer=""}),2e4),e.isLoading=!0,e.hideContainer="hideBlock",e.loginModel.email=e.socialLogin.email,e.loginModel.password=e.socialLogin.id,e.authService.onLogin(e.loginModel),e.authService.getAuthStatusListener().subscribe((function(t){0==t?e.httpService.checkUser(e.socialLogin.email).subscribe((function(t){t?(e.isLoading=!1,e.hideContainer="",e.snackBar.open("registration not successful ! email already exists !","close",e.config)):e.zone.run((function(){e.openThankYouPage()}))})):1==t&&("Learner"==e.loginDetailsService.getLoginType()?e.toFacade():"Expert"==e.loginDetailsService.getLoginType()&&e.toHome())}))}))}),(function(e){}))}},{key:"googleSDK",value:function(){var e,t,i,n,r=this;window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){r.auth2=window.gapi.auth2.init({client_id:"254899928533-k6lru4oe7sbmpe22ns0m11rvtbokk3qk.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),r.prepareLoginButton()}))},t="google-jssdk",n=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((i=e.createElement("script")).id=t,i.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",n.parentNode.insertBefore(i,n))}}]),e}()).\u0275fac=function(e){return new(e||mG)(Lo(cm),Lo(gb),Lo(lk),Lo(rI),Lo(EA),Lo(Wc),Lo(LT),Lo(bA))},mG.\u0275cmp=gt({type:mG,selectors:[["app-login"]],viewQuery:function(e,t){var i;1&e&&dc(pG,!0),2&e&&hc(i=yc())&&(t.googleSignUp=i.first)},decls:43,vars:6,consts:[["style","width: max-content; margin: auto; padding-top: 35vh",4,"ngIf"],[1,"login-container"],[1,"login-header"],[1,"header-container"],[1,"info-class"],[1,"logo"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[1,"login-parameter-container"],["style","color: red",4,"ngIf"],[3,"ngSubmit"],["l","ngForm"],[1,"form-group"],["for","email",1,"form-control-placeholder"],["type","email","id","email","ngModel","","name","email","required","","email","","maxlength","64",1,"form-control"],["email","ngModel"],["for","password",1,"form-control-placeholder"],["type","password","id","password","name","password","ngModel","","required","","maxlength","40",1,"form-control",3,"type"],["password","ngModel"],[1,"form-group","button-container"],["href","javascript:;",1,"forgot-password",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"login-instead"],[1,"btn","btn-secondary",3,"click"],["googleSignUp",""],[1,"fa","fa-google","social-icons",2,"margin-right","5px"],[2,"display","inline","font-size","larger"],["routerLink","/signUp",1,"forgot-password"],[2,"width","max-content","margin","auto","padding-top","35vh"],[2,"color","red"]],template:function(e,t){if(1&e){var i=zo();jo(0,"body"),Po(1,fG,2,0,"div",0),jo(2,"div",1),jo(3,"div",2),jo(4,"div",3),jo(5,"span"),Ss(6,"Login"),Ho(),jo(7,"span",4),Ss(8,"Login with your registered email & password. Or login with your Google account. "),Ho(),Ho(),Uo(9,"div",5),jo(10,"span",6),Ko("click",(function(){return t.toFacade()})),Ss(11," close "),Ho(),Ho(),jo(12,"div",7),Po(13,vG,2,1,"p",8),jo(14,"form",9,10),Ko("ngSubmit",(function(){ti(i);var e=Mo(15);return t.onLogin(e)})),jo(16,"div",11),jo(17,"label",12),Ss(18,"Email Address"),Ho(),Uo(19,"input",13,14),Ho(),jo(21,"div",11),jo(22,"label",15),Ss(23,"Password"),Ho(),Uo(24,"input",16,17),Ho(),jo(26,"div",18),jo(27,"a",19),Ko("click",(function(){return t.toResetPassword()})),Ss(28," Forgot-Password "),Ho(),jo(29,"button",20),Ss(30," Sign in "),Ho(),Ho(),Ho(),jo(31,"div",21),jo(32,"span"),Ss(33,"Login instead"),Ho(),jo(34,"button",22,23),Ko("click",(function(){return t.prepareLoginButton()})),Uo(36,"i",24),jo(37,"p",25),Ss(38,"Login Using Google"),Ho(),Ho(),jo(39,"span"),Ss(40," New to FellowGenius? "),Ho(),jo(41,"a",26),Ss(42,"Sign up"),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(15);_r(1),Bo("ngIf",t.isLoading),_r(1),ds(t.hideContainer),_r(11),Bo("ngIf",t.incorrectLoginDetails),_r(11),Bo("type",t.hide?"password":"text"),_r(5),Bo("disabled",!n.valid)}},directives:[Dh,qy,ug,My,eg,cg,Uy,Jy,Zy,ib,hm,dG],styles:[".login-container[_ngcontent-%COMP%]{width:480px;display:block;padding:10px;margin:150px auto 0}.login-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-100px;right:-150px}.login-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;font-size:22px;width:100%;display:flex;align-items:center;margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:325px;position:relative}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{float:left}.login-instead[_ngcontent-%COMP%]{float:left;margin-top:20px}.login-instead[_ngcontent-%COMP%], .login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}.login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.login-instead[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),mG),yG=n("J5zx"),bG=["loginRef"],kG=["googleSignUp"];function CG(e,t){1&e&&(jo(0,"div",26),Uo(1,"app-loading"),Ho())}function wG(e,t){1&e&&(jo(0,"div",27),jo(1,"p",28),Ss(2,"User Already registered ! go to Login"),Ho(),Ho())}function _G(e,t){1&e&&(jo(0,"span",34),Ss(1,"Invalid Name"),Ho())}function SG(e,t){if(1&e&&(jo(0,"div",29),jo(1,"label",30),Ss(2,"Full Name"),Ho(),Uo(3,"input",31,32),Po(5,_G,2,0,"span",33),Ho()),2&e){var i=Mo(4);_r(5),Bo("ngIf",!i.valid&&i.touched)}}function EG(e,t){1&e&&(jo(0,"span",34),Ss(1,"Invalid email"),Ho())}function TG(e,t){if(1&e&&(jo(0,"div",29),jo(1,"label",35),Ss(2,"Email Address"),Ho(),Uo(3,"input",36,37),Po(5,EG,2,0,"span",33),Ho()),2&e){var i=Mo(4),n=$o();_r(5),Bo("ngIf",!i.valid&&i.touched||n.emailValid)}}function AG(e,t){if(1&e&&(jo(0,"div",29),jo(1,"label",38),Ss(2,"Password"),Ho(),Uo(3,"input",39,40),jo(5,"span",41),Ss(6,"Your password must be a minimum of 8 characters long. Your PW must contain at least one uppercase letter (A-Z), one lowercase (a-z), one number (0-9), and one special character (@, #,&, %)."),Ho(),Ho()),2&e){var i=$o();_r(3),Bo("type",i.hide?"password":"text")("pattern",i.passwordPattern)}}function OG(e,t){1&e&&(jo(0,"span",34),Ss(1,"Invalid number"),Ho())}function xG(e,t){if(1&e&&(jo(0,"div",29),jo(1,"label",42),Ss(2,"Mobile Number"),Ho(),Uo(3,"input",43,44),Po(5,OG,2,0,"span",33),Ho()),2&e){var i=Mo(4),n=$o();_r(3),Bo("pattern",n.mobNumberPattern),_r(2),Bo("ngIf",!i.valid&&i.touched)}}function IG(e,t){1&e&&(jo(0,"div",29),jo(1,"label",45),Ss(2,"Role"),Ho(),jo(3,"select",46),jo(4,"option"),Ss(5,"Learner"),Ho(),jo(6,"option"),Ss(7,"Expert"),Ho(),Ho(),Ho())}function DG(e,t){1&e&&(jo(0,"p",47),Ss(1," Your Verification Code has been sent to your Email, Please verify your account by signing in to your email. "),Ho())}function RG(e,t){1&e&&(jo(0,"span",34),Ss(1,"Invalid OTP"),Ho())}function PG(e,t){if(1&e&&(jo(0,"div",29),jo(1,"label",48),Ss(2,"One Time Password"),Ho(),Uo(3,"input",49,50),Po(5,RG,2,0,"span",33),Ho()),2&e){var i=$o();_r(5),Bo("ngIf",i.wrongOtp)}}function MG(e,t){if(1&e){var i=zo();jo(0,"div",51),Ss(1," By clicking on Next, you agree to our "),jo(2,"a",52),Ko("click",(function(){return ti(i),$o().openTermsAndConditions()})),Ss(3,"Terms and Conditions"),Ho(),Ho()}}var LG,NG,FG,BG,VG,jG,HG,UG,qG,WG=function(e){return{"margin-bottom":e}},zG=((FG=function(){function e(t,i,n,r,a,o,s,l,c,u,h){_classCallCheck2(this,e),this.router=t,this.httpClient=i,this.studentService=n,this.tutorService=r,this.loginService=a,this.snackBar=o,this.dialogRef=s,this.cookieService=l,this.socialService=c,this.zone=u,this.authService=h,this.wrongOtp=!1,this.showInput=!0,this.verifyEmail=!1,this.incorrectLoginDetails=!1,this.termsAndConditionsChecked=!1,this.emailValid=!1,this.hide=!0,this.timeOut=!0,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.registrationModel=new hG,this.loginModel=new uA,this.studentProfile=new cb,this.socialLogin=new dA,this.tutorProfile=new ub,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top"}}return _createClass(e,[{key:"ngOnInit",value:function(){this.googleSDK()}},{key:"toSignUpPage",value:function(){this.router.navigate(["signUp"])}},{key:"toFacadePage",value:function(){this.router.navigate(["facade"])}},{key:"toHome",value:function(){this.router.navigate(["home"])}},{key:"openThankYouPage",value:function(){var e=this,t=new kT;t.disableClose=!0,this.dialogRef.open(KA,t).afterClosed().subscribe((function(t){e.role=t.role,e.registrationModel.role=t.role,e.registrationModel.password=t.password,console.log(e.registrationModel),e.authService.saveSocialLogin(e.registrationModel),e.authService.getAuthStatusListener().subscribe((function(t){console.log("auth listener result!"),console.log(t),1==t&&("Learner"==e.loginService.getLoginType()?e.toFacadePage():"Expert"==e.loginService.getLoginType()&&e.toHome())}))}))}},{key:"openTermsAndConditions",value:function(){this.dialogRef.open(uG,{width:"auto",height:"auto"})}},{key:"onSignUp",value:function(e){var t=this;0==this.verifyEmail?(this.isLoading=!0,this.registrationModel.fullName=e.value.fullName,this.registrationModel.email=e.value.email,this.registrationModel.password=e.value.password,this.registrationModel.contact=e.value.contact,this.registrationModel.role=e.value.role,this.httpClient.checkUser(this.registrationModel.email).subscribe((function(e){1==!e?(setTimeout((function(){1==t.timeOut&&(t.emailValid=!0,t.isLoading=!1,t.showInput=!0)}),25e3),t.httpClient.verifyEmail(t.registrationModel.email).subscribe((function(e){t.verificationOtp=e.response,t.timeOut=!1,t.verifyEmail=!0,t.isLoading=!1,t.showInput=!1}))):(t.timeOut=!1,t.isLoading=!1,t.snackBar.open("You are already registered. Please Login.","close",t.config),t.router.navigate(["login"]))}))):yG.compareSync(e.value.otp,this.verificationOtp)?(console.log("registration model in sign up",this.registrationModel),this.authService.onSignUp(this.registrationModel),this.authService.getAuthStatusListener().subscribe((function(e){0==e?(t.snackBar.open("registration not successful ! email already exists !","close",t.config),t.incorrectLoginDetails=!0,t.dialogRef.closeAll()):1==e&&("Learner"==t.loginService.getLoginType()?t.toFacadePage():"Expert"==t.loginService.getLoginType()&&t.toHome())}))):this.wrongOtp=!0}},{key:"prepareLoginButton",value:function(){var e=this;null==this.auth2&&location.reload(),this.auth2.attachClickHandler(this.googleSignUp.nativeElement,{},(function(t){var i=t.getBasicProfile();e.socialLogin.id=i.getId(),e.socialLogin.fullName=i.getName(),e.socialLogin.email=i.getEmail(),e.socialService.setSocialDetails(e.socialLogin),e.registrationModel.fullName=e.socialLogin.fullName,e.registrationModel.email=e.socialLogin.email,e.registrationModel.socialId=e.socialLogin.id,e.httpClient.checkUser(e.socialLogin.email).subscribe((function(t){t?(e.isLoading=!1,e.snackBar.open("You are already registered. Please Login","close",e.config),e.router.navigate(["login"])):e.zone.run((function(){console.log("opening thank you page"),e.openThankYouPage()}))}))}),(function(e){console.log("google pop up closed by the user")}))}},{key:"googleSDK",value:function(){var e,t,i,n,r=this;window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){r.auth2=window.gapi.auth2.init({client_id:"254899928533-k6lru4oe7sbmpe22ns0m11rvtbokk3qk.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),r.prepareLoginButton()}))},t="google-jssdk",n=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((i=e.createElement("script")).id=t,i.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",n.parentNode.insertBefore(i,n))}}]),e}()).\u0275fac=function(e){return new(e||FG)(Lo(cm),Lo(lk),Lo(FT),Lo(ck),Lo(gb),Lo(rI),Lo(LT),Lo(BT),Lo(EA),Lo(Wc),Lo(bA))},FG.\u0275cmp=gt({type:FG,selectors:[["app-sign-up"]],viewQuery:function(e,t){var i;1&e&&(dc(bG,!0),dc(kG,!0)),2&e&&(hc(i=yc())&&(t.loginElement=i.first),hc(i=yc())&&(t.googleSignUp=i.first))},decls:42,vars:16,consts:[["style","\n      text-align: center;\n      margin-top: 20%;\n      margin-left: auto;\n      margin-right: auto;\n    ",4,"ngIf"],[1,"signup-container"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[1,"signup-header"],[1,"header-container"],[1,"header-primary"],[1,"header-container-secondary"],[1,"logo","hide"],[1,"info-class"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"signup-parameter-container","bg-signup"],[1,"logo","logo-mobile"],[1,"form-group-container",3,"ngSubmit"],["t","ngForm"],["class","form-group",4,"ngIf"],["style","color: rgba(0, 0, 0, 0.8); width: 75%",4,"ngIf"],["class","form-group agree-disagree",4,"ngIf"],[1,"form-group","button-container",3,"ngStyle"],["routerLink","/login","href","javascript:;",1,"forgot-password",2,"color","#007bff"],["type","submit",1,"btn","btn-primary",3,"disabled"],["href","#",1,"forgot-password",2,"float","right","margin-right","20px"],[1,"form-group","button-container","social-button-container"],[1,"btn","btn-secondary",3,"click"],["googleSignUp",""],[1,"fa","fa-google","social-icons",2,"margin-right","5px"],[2,"display","inline","font-size","larger"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],["role","alert",1,"alert","alert-danger"],[2,"text-align","center"],[1,"form-group"],["for","fullName",1,"form-control-placeholder"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control"],["fullName","ngModel"],["class","help-block",4,"ngIf"],[1,"help-block"],["for","email",1,"form-control-placeholder"],["type","email","id","email","name","email","ngModel","","required","","email","","maxlength","64","pattern","[a-zA-Z0-9_.+-]{1,20}@(?:(?:[a-zA-Z0-9-]+\\.)?[a-zA-Z]+\\.)?(gmail|piet|yahoo|hotmail|rediffmail|apple|microsoft)\\.([a-z]{2,4})(\\.[a-z]{2,4})?$",1,"form-control"],["email","ngModel"],["for","password",1,"form-control-placeholder"],["type","password","id","password","name","password","ngModel","","required","","minlength","8","maxlength","20",1,"form-control",3,"type","pattern"],["password","ngModel"],[1,"help-block",2,"color","grey"],["for","contact",1,"form-control-placeholder"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control",3,"pattern"],["contact","ngModel"],["for","role",1,"form-control-placeholder"],["ngModel","","name","role","required","",1,"form-control"],[2,"color","rgba(0, 0, 0, 0.8)","width","75%"],["for","otp",1,"form-control-placeholder"],["type","text","id","otp","name","otp","ngModel","","required","",1,"form-control"],["otp","ngModel"],[1,"form-group","agree-disagree"],["role","button",1,"termsLink",3,"click"]],template:function(e,t){if(1&e){var i=zo();jo(0,"body"),Po(1,CG,2,0,"div",0),jo(2,"div",1),jo(3,"span",2),Ko("click",(function(){return t.toFacadePage()})),Ss(4," close "),Ho(),jo(5,"div",3),jo(6,"div",4),jo(7,"span",5),Ss(8,"Create"),Ho(),Uo(9,"br"),jo(10,"span",6),Ss(11,"Your Account"),Ho(),Ho(),Uo(12,"div",7),jo(13,"div",8),jo(14,"span"),Ss(15,"Please fill all the fields below to sign-up at fellowGenius. Or sign-up with your Google account."),Ho(),Ho(),Ho(),Po(16,wG,3,0,"div",9),jo(17,"div",10),Uo(18,"div",11),jo(19,"form",12,13),Ko("ngSubmit",(function(){ti(i);var e=Mo(20);return t.onSignUp(e)})),Po(21,SG,6,1,"div",14),Po(22,TG,6,1,"div",14),Po(23,AG,7,2,"div",14),Po(24,xG,6,2,"div",14),Po(25,IG,8,0,"div",14),Po(26,DG,2,0,"p",15),Po(27,PG,6,1,"div",14),Po(28,MG,4,0,"div",16),jo(29,"div",17),jo(30,"a",18),Ss(31," Login Instead "),Ho(),jo(32,"button",19),Ss(33," Next "),Ho(),jo(34,"a",20),Ss(35," Cancel "),Ho(),Ho(),Ho(),jo(36,"div",21),jo(37,"button",22,23),Ko("click",(function(){return t.prepareLoginButton()})),Uo(39,"i",24),jo(40,"p",25),Ss(41,"Sign Up Using Google"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(20);_r(1),Bo("ngIf",t.isLoading),_r(1),ds(t.isLoading?"hideBlock":""),_r(14),Bo("ngIf",t.incorrectLoginDetails),_r(5),Bo("ngIf",t.showInput),_r(1),Bo("ngIf",t.showInput),_r(1),Bo("ngIf",t.showInput),_r(1),Bo("ngIf",t.showInput),_r(1),Bo("ngIf",t.showInput),_r(1),Bo("ngIf",t.verifyEmail),_r(1),Bo("ngIf",t.verifyEmail),_r(1),Bo("ngIf",t.showInput),_r(1),Bo("ngStyle",ql(14,WG,t.verifyEmail?"35vh":"")),_r(3),Bo("disabled",!n.valid)}},directives:[Dh,qy,ug,My,qh,hm,dG,eg,cg,Uy,Jy,ib,Zy,rb,eb,jg,Hg,Yg],styles:[".signup-container[_ngcontent-%COMP%]{width:680px;display:block;padding:10px;margin:50px auto 0;height:700px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right;margin-right:70px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:60%}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),FG),GG=((NG=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.meetingService=t,this.httpService=i,this.dialog=n,this.router=r,this.snackBar=a,this.cancelBooking=new vb,this.config={duration:4e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]}}return _createClass(e,[{key:"ngOnInit",value:function(){this.cancelBooking=this.meetingService.getDeleteBooking(),this.pendingRequests=this.meetingService.getStudentPendingRequests()}},{key:"close",value:function(){this.dialog.closeAll()}},{key:"deleteBooking",value:function(){var e=this;this.httpService.deleteMyBooking(this.cancelBooking.bid).subscribe((function(t){t?(e.pendingRequests.splice(e.pendingRequests.indexOf(e.cancelBooking),1),0==e.pendingRequests.length&&e.meetingService.refreshBookingList("delete"),e.snackBar.open("Booking has been cancelled !","close",e.config)):e.snackBar.open("Booking has already been accepted !","close",e.config)})),this.dialog.closeAll(),this.router.navigate(["home/studentDashboard"])}}]),e}()).\u0275fac=function(e){return new(e||NG)(Lo(mb),Lo(lk),Lo(LT),Lo(cm),Lo(rI))},NG.\u0275cmp=gt({type:NG,selectors:[["app-delete-popup"]],decls:9,vars:0,consts:[[1,"row"],[1,"denial",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(jo(0,"div"),jo(1,"div",0),jo(2,"p"),Ss(3,"Are you sure you want to cancel the booking"),Ho(),Ho(),jo(4,"div",0),jo(5,"button",1),Ko("click",(function(){return t.close()})),Ss(6,"No"),Ho(),jo(7,"button",2),Ko("click",(function(){return t.deleteBooking()})),Ss(8,"Yes"),Ho(),Ho(),Ho())},styles:["button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:40%}.denial[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2);border:none;border-radius:3px}.denial[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.8);color:#fff}p[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:25px;font-size:large}"]}),NG),YG=((LG=function(){function e(){_classCallCheck2(this,e),this.viewProfile=new db}return _createClass(e,[{key:"setProfile",value:function(e){this.viewProfile=e}},{key:"getProfile",value:function(){return this.viewProfile}}]),e}()).\u0275fac=function(e){return new(e||LG)},LG.\u0275prov=pe({token:LG,factory:LG.\u0275fac,providedIn:"root"}),LG),KG=["*"],XG=new qe("GOOGLE_CHARTS_CONFIG"),JG={mapsApiKey:"",version:"current",safeMode:!1},QG=((qG=function(){function e(t,i,n){_classCallCheck2(this,e),this.zone=t,this.localeId=i,this.config=n,this.scriptSource="https://www.gstatic.com/charts/loader.js",this.scriptLoadSubject=new x,this.config=Object.assign(Object.assign({},JG),n||{})}return _createClass(e,[{key:"isGoogleChartsAvailable",value:function(){return"undefined"!=typeof google&&void 0!==google.charts}},{key:"loadChartPackages",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.loadGoogleCharts().pipe(Ap((function(){return new _((function(t){google.charts.load(e.config.version,{packages:i,language:e.localeId,mapsApiKey:e.config.mapsApiKey,safeMode:e.config.safeMode}),google.charts.setOnLoadCallback((function(){e.zone.run((function(){t.next(),t.complete()}))}))}))})))}},{key:"loadGoogleCharts",value:function(){var e=this;if(this.isGoogleChartsAvailable())return Gd(null);if(!this.isLoadingGoogleCharts()){var t=this.createGoogleChartsScript();t.onload=function(){e.zone.run((function(){e.scriptLoadSubject.next(),e.scriptLoadSubject.complete()}))},t.onerror=function(){e.zone.run((function(){console.error("Failed to load the google charts script!"),e.scriptLoadSubject.error(new Error("Failed to load the google charts script!"))}))}}return this.scriptLoadSubject.asObservable()}},{key:"isLoadingGoogleCharts",value:function(){return null!=this.getGoogleChartsScript()}},{key:"getGoogleChartsScript",value:function(){var e=this;return Array.from(document.getElementsByTagName("script")).find((function(t){return t.src===e.scriptSource}))}},{key:"createGoogleChartsScript",value:function(){var e=document.createElement("script");return e.type="text/javascript",e.src=this.scriptSource,e.async=!0,document.getElementsByTagName("head")[0].appendChild(e),e}}]),e}()).\u0275fac=function(e){return new(e||qG)(Ze(Wc),Ze(Dc),Ze(XG,8))},qG.\u0275prov=pe({factory:function(){return new qG(Ze(Wc),Ze(Dc),Ze(XG,8))},token:qG,providedIn:"root"}),qG),ZG=((UG=function(){function e(t){_classCallCheck2(this,e),this.loaderService=t,this.error=new ec,this.ready=new ec,this.stateChange=new ec,this.id="_"+Math.random().toString(36).substr(2,9),this.wrapperReadySubject=new Jk(1),this.initialized=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loaderService.loadChartPackages("controls").subscribe((function(){e.createControlWrapper(),e.initialized=!0}))}},{key:"ngOnChanges",value:function(e){this.initialized&&(e.type&&this._controlWrapper.setControlType(this.type),e.options&&this._controlWrapper.setOptions(this.options),e.state&&this._controlWrapper.setState(this.state))}},{key:"createControlWrapper",value:function(){this._controlWrapper=new google.visualization.ControlWrapper({containerId:this.id,controlType:this.type,state:this.state,options:this.options}),this.addEventListeners(),this.wrapperReadySubject.next(this._controlWrapper)}},{key:"addEventListeners",value:function(){var e=this;google.visualization.events.removeAllListeners(this._controlWrapper),google.visualization.events.addListener(this._controlWrapper,"ready",(function(t){return e.ready.emit(t)})),google.visualization.events.addListener(this._controlWrapper,"error",(function(t){return e.error.emit(t)})),google.visualization.events.addListener(this._controlWrapper,"statechange",(function(t){return e.stateChange.emit(t)}))}},{key:"wrapperReady$",get:function(){return this.wrapperReadySubject.asObservable()}},{key:"controlWrapper",get:function(){return this._controlWrapper}}]),e}()).\u0275fac=function(e){return new(e||UG)(Lo(QG))},UG.\u0275cmp=gt({type:UG,selectors:[["control-wrapper"]],hostAttrs:[1,"control-wrapper"],hostVars:1,hostBindings:function(e,t){2&e&&Is("id",t.id)},inputs:{for:"for",type:"type",options:"options",state:"state"},outputs:{error:"error",ready:"ready",stateChange:"stateChange"},exportAs:["controlWrapper"],features:[Vs],decls:0,vars:0,template:function(e,t){},encapsulation:2,changeDetection:0}),UG),$G=((HG=function(){function e(t,i){_classCallCheck2(this,e),this.element=t,this.loaderService=i,this.ready=new ec,this.error=new ec,this.initialized=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loaderService.loadChartPackages("controls").subscribe((function(){e.createDataTable(),e.createDashboard(),e.initialized=!0}))}},{key:"ngOnChanges",value:function(e){this.initialized&&(e.data||e.columns)&&(this.createDataTable(),this.dashboard.draw(this.dataTable))}},{key:"createDashboard",value:function(){var e=this,t=this.controlWrappers.map((function(e){return e.wrapperReady$})),i=this.controlWrappers.map((function(e){return e.for})).map((function(e){return Array.isArray(e)?Jd(e.map((function(e){return e.wrapperReady$}))):e.wrapperReady$}));Jd([].concat(_toConsumableArray2(t),_toConsumableArray2(i))).subscribe((function(){e.dashboard=new google.visualization.Dashboard(e.element.nativeElement),e.initializeBindings(),e.dashboard.draw(e.dataTable)}))}},{key:"initializeBindings",value:function(){var e=this;this.controlWrappers.forEach((function(t){if(Array.isArray(t.for)){var i=t.for.map((function(e){return e.chartWrapper}));e.dashboard.bind(t.controlWrapper,i)}else e.dashboard.bind(t.controlWrapper,t.for.chartWrapper)}))}},{key:"createDataTable",value:function(){if(null!=this.data){var e=!0;null!=this.columns&&(e=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),e)}}},{key:"getDataAsTable",value:function(){return this.columns?[this.columns].concat(_toConsumableArray2(this.data)):this.data}}]),e}()).\u0275fac=function(e){return new(e||HG)(Lo($s),Lo(QG))},HG.\u0275cmp=gt({type:HG,selectors:[["dashboard"]],contentQueries:function(e,t,i){var n;1&e&&vc(i,ZG,!1),2&e&&hc(n=yc())&&(t.controlWrappers=n)},hostAttrs:[1,"dashboard"],inputs:{data:"data",columns:"columns"},outputs:{ready:"ready",error:"error"},exportAs:["dashboard"],features:[Vs],ngContentSelectors:KG,decls:1,vars:0,template:function(e,t){1&e&&(ts(),is(0))},encapsulation:2,changeDetection:0}),HG),eY=((jG=function(){function e(t,i,n){_classCallCheck2(this,e),this.element=t,this.scriptLoaderService=i,this.dashboard=n,this.options={},this.dynamicResize=!1,this.ready=new ec,this.error=new ec,this.select=new ec,this.mouseover=new ec,this.mouseleave=new ec,this.wrapperReadySubject=new Jk(1),this.initialized=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.scriptLoaderService.loadChartPackages().subscribe((function(){e.createDataTable(),e.wrapper=new google.visualization.ChartWrapper({container:e.element.nativeElement,chartType:e.type,dataTable:e.dataTable,options:e.mergeOptions()}),e.registerChartEvents(),e.wrapperReadySubject.next(e.wrapper),e.initialized=!0,e.drawChart()}))}},{key:"ngOnChanges",value:function(e){if(e.dynamicResize&&this.updateResizeListener(),this.initialized){var t=!1;(e.data||e.columns||e.formatters)&&(this.createDataTable(),this.wrapper.setDataTable(this.dataTable),t=!0),e.type&&(this.wrapper.setChartType(this.type),t=!0),(e.options||e.width||e.height||e.title)&&(this.wrapper.setOptions(this.mergeOptions()),t=!0),t&&this.drawChart()}}},{key:"createDataTable",value:function(){if(null!=this.data){var e=!0;null!=this.columns&&(e=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),e),this.applyFormatters(this.dataTable)}}},{key:"getDataAsTable",value:function(){return this.columns?[this.columns].concat(_toConsumableArray2(this.data)):this.data}},{key:"updateResizeListener",value:function(){var e=this;null!=this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null),this.dynamicResize&&(this.resizeSubscription=vk(window,"resize").pipe(Cw(100)).subscribe((function(){e.initialized&&e.drawChart()})))}},{key:"mergeOptions",value:function(){return Object.assign({title:this.title,width:this.width,height:this.height},this.options)}},{key:"applyFormatters",value:function(e){if(null!=this.formatters){var t,i=_createForOfIteratorHelper(this.formatters);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.formatter.format(e,n.colIndex)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"registerChartEvents",value:function(){var e=this;google.visualization.events.removeAllListeners(this.wrapper);var t=function(e,t,i){google.visualization.events.addListener(e,t,i)};t(this.wrapper,"ready",(function(){google.visualization.events.removeAllListeners(e.chart),t(e.chart,"onmouseover",(function(t){return e.mouseover.emit(t)})),t(e.chart,"onmouseout",(function(t){return e.mouseleave.emit(t)})),t(e.chart,"select",(function(){var t=e.chart.getSelection();e.select.emit({selection:t})})),e.ready.emit({chart:e.chart})})),t(this.wrapper,"error",(function(t){return e.error.emit(t)}))}},{key:"drawChart",value:function(){null==this.dashboard&&this.wrapper.draw()}},{key:"chart",get:function(){return this.wrapper?this.wrapper.getChart():null}},{key:"wrapperReady$",get:function(){return this.wrapperReadySubject.asObservable()}},{key:"chartWrapper",get:function(){return this.wrapper},set:function(e){this.wrapper=e,this.drawChart()}}]),e}()).\u0275fac=function(e){return new(e||jG)(Lo($s),Lo(QG),Lo($G,8))},jG.\u0275cmp=gt({type:jG,selectors:[["google-chart"]],hostAttrs:[1,"google-chart"],inputs:{options:"options",dynamicResize:"dynamicResize",type:"type",data:"data",columns:"columns",title:"title",width:"width",height:"height",formatters:"formatters"},outputs:{ready:"ready",error:"error",select:"select",mouseover:"mouseover",mouseleave:"mouseleave"},exportAs:["googleChart"],features:[Vs],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%] { width: fit-content; display: block; }"],changeDetection:0}),jG),tY=((VG=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[{provide:XG,useValue:t}]}}}]),e}()).\u0275mod=Ct({type:VG}),VG.\u0275inj=ve({factory:function(e){return new(e||VG)}}),VG),iY=((BG=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"transform",value:function(e){return 0==e?0+e.toString():e}}]),e}()).\u0275fac=function(e){return new(e||BG)},BG.\u0275pipe=St({name:"zero",type:BG,pure:!0}),BG);function nY(e,t){if(1&e){var i=zo();jo(0,"a",23),Ko("click",(function(){return ti(i),$o().viewPendingRequests()})),Ss(1,"View"),Ho()}}function rY(e,t){if(1&e){var i=zo();jo(0,"button",35),Ko("click",(function(){ti(i);var e=$o().$implicit;return $o(2).deleteBooking(e)})),Ss(1," Cancel "),Ho()}}function aY(e,t){if(1&e&&(jo(0,"div",26),Uo(1,"div",27),jo(2,"div",28),jo(3,"span",29),Ss(4),Ho(),jo(5,"span",30),Ss(6),Ho(),Ho(),jo(7,"div",31),jo(8,"span"),Ss(9),Ho(),jo(10,"span"),Ss(11),Xl(12,"zero"),Xl(13,"zero"),Ho(),Ho(),jo(14,"div",32),jo(15,"span",33),Ss(16),Ho(),Po(17,rY,2,0,"button",34),Ho(),Ho()),2&e){var i=t.$implicit;_r(4),Es(i.tutorName),_r(2),Es(i.subject),_r(3),Es(i.dateOfMeeting),_r(2),xs(" ",i.startTimeHour,":",Jl(12,10,i.startTimeMinute)," - ",i.endTimeHour,":",Jl(13,12,i.endTimeMinute)," (",i.duration," minutes)"),_r(5),Es(i.approvalStatus),_r(1),Bo("ngIf","Pending"==i.approvalStatus)}}function oY(e,t){if(1&e&&(jo(0,"div",24),jo(1,"div",7),Ss(2,"Pending Requests"),Ho(),jo(3,"div",25),Po(4,aY,18,14,"div",22),Ho(),Ho()),2&e){var i=$o();_r(4),Bo("ngForOf",i.bookingList)}}function sY(e,t){1&e&&(jo(0,"span"),Ss(1,"No upcoming classes"),Ho())}function lY(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",20),jo(2,"div",36),jo(3,"span",37),Ss(4,"\u25cf \xa0Live Now"),Ho(),Ho(),Uo(5,"div",38),jo(6,"div",39),jo(7,"span"),Ss(8),Ho(),jo(9,"span"),Ss(10),Xl(11,"zero"),Xl(12,"zero"),Ho(),jo(13,"span"),Ss(14),Ho(),jo(15,"button",35),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).onJoin(e)})),Ss(16," Join "),Ho(),Ho(),Ho(),jo(17,"div",40),jo(18,"a",41),Ko("click",(function(){return ti(i),$o(2).toBookingsPage()})),Ss(19,"view more"),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(8),Es(n.tutorName),_r(2),xs("",n.startTimeHour,":",Jl(11,7,n.startTimeMinute)," - ",n.endTimeHour,":",Jl(12,9,n.endTimeMinute)," (",n.duration," minutes)"),_r(4),Es(n.description)}}function cY(e,t){if(1&e&&(jo(0,"div"),Po(1,lY,20,11,"div",10),Ho()),2&e){var i=$o();_r(1),Bo("ngForOf",i.liveMeetingList)}}function uY(e,t){if(1&e){var i=zo();jo(0,"span",37),Ss(1,"\u25cf \xa0About to start"),jo(2,"i",46),Ko("click",(function(){return ti(i),$o(2).refreshPage()})),Ho(),Ho()}}function hY(e,t){if(1&e&&(jo(0,"div",36),Ss(1),Ho()),2&e){var i=$o().$implicit;_r(1),Ts(" Live in:",i.timeLeft," ")}}function dY(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",20),jo(2,"div",36),Po(3,uY,3,0,"span",42),Ho(),Po(4,hY,2,1,"div",43),Uo(5,"div",38),jo(6,"div",39),jo(7,"span"),Ss(8),Ho(),jo(9,"span"),Ss(10),Ho(),jo(11,"span"),Ss(12),Xl(13,"zero"),Xl(14,"zero"),Ho(),jo(15,"span"),Ss(16),Ho(),jo(17,"button",44),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().onJoin(e)})),Ss(18," Join "),Ho(),Ho(),Ho(),jo(19,"div",40),jo(20,"a",45),Ko("click",(function(){return ti(i),$o().toBookingsPage()})),Ss(21,"view more"),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(3),Bo("ngIf",null==n.timeLeft),_r(1),Bo("ngIf",null!=n.timeLeft),_r(4),Es(n.tutorName),_r(2),Es(n.dateOfMeeting),_r(2),xs("",n.startTimeHour,":",Jl(13,11,n.startTimeMinute)," - ",n.endTimeHour,":",Jl(14,13,n.endTimeMinute)," (",n.duration," minutes)"),_r(4),Es(n.description),_r(1),Bo("disabled",!n.isLive)}}function pY(e,t){1&e&&(jo(0,"div",8),jo(1,"span"),Ss(2,"No Pending reviews"),Ho(),Ho())}var fY=function(e){return{"background-image":e}};function vY(e,t){if(1&e){var i=zo();jo(0,"div",26),Uo(1,"div",47),jo(2,"div",28),Uo(3,"span",48),Uo(4,"span",49),Ho(),jo(5,"div",50),jo(6,"div",51),jo(7,"div",52),jo(8,"input",53),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().saveRating(e,"100")})),Ho(),Uo(9,"label",54),jo(10,"input",55),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().saveRating(e,"80")})),Ho(),Uo(11,"label",56),jo(12,"input",57),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().saveRating(e,"60")})),Ho(),Uo(13,"label",58),jo(14,"input",59),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().saveRating(e,"40")})),Ho(),Uo(15,"label",60),jo(16,"input",61),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().saveRating(e,"20")})),Ho(),Uo(17,"label",62),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(1),Bo("ngStyle",ql(3,fY,"url("+n.tutorProfilePictureUrl+")")),_r(2),Bo("innerHTML",n.tutorName,tr),_r(1),Bo("innerHTML",n.subject,tr)}}var mY,gY=((mY=function(){function e(t,i,n,r,a,o,s,l,c){var u=this;_classCallCheck2(this,e),this.httpService=t,this.studentService=i,this.tutorService=n,this.meetingService=r,this.router=a,this.dialog=o,this.profileService=s,this.snackBar=l,this.locationStrategy=c,this.selected=0,this.hovered=0,this.readonly=!1,this.viewPending=!0,this.pendingRequestsCount=0,this.joinMeeting=new fb,this.bookingList=[],this.approvedList=[],this.liveMeetingList=[],this.pendingReviewList=[],this.emptyBookingList=!1,this.emptyApprovedList=!1,this.emptyLiveList=!1,this.pendingReviews=[],this.now=new Date,this.noTutorMessage="",this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},this.type="PieChart",this.data=[["Mathematics",45],["English",26.8],["Science",12.8],["C++",8.5],["Machine Learning",6.2],["Others",.7]],this.options={pieHole:.4},this.studentChartWidth="380",this.studentChartHeight="180",setInterval((function(){u.now=new Date}),1e3)}return _createClass(e,[{key:"getScreenSize",value:function(e){var t=window.innerWidth;this.studentChartWidth=t<=800?"320":"380"}},{key:"ngOnInit",value:function(){this.preventBackButton(),window.innerWidth<=800&&(this.studentChartWidth="320"),this.sid=this.studentService.getStudentProfileDetails().sid,this.sid?(this.fetchPendingReviewsList(),this.initialiseStudentPendingRequest(),this.intialiseStudentApprovedBookings(),this.initialiseLiveMeetingList()):this.handleRefresh()}},{key:"toBookingsPage",value:function(){this.router.navigate(["home/studentBookings"])}},{key:"cancelReview",value:function(){console.log("canceledReviews")}},{key:"preventBackButton",value:function(){history.pushState(null,null,location.href),this.locationStrategy.onPopState((function(){history.pushState(null,null,location.href)}))}},{key:"saveRating",value:function(e,t){var i=this;this.httpService.giveFeedback(e.meetingId,t," ",e.tutorId).subscribe((function(t){i.pendingReviewList.splice(i.pendingReviewList.indexOf(e),1),i.snackBar.open("Feedback submitted successfully","close",i.config)}))}},{key:"viewPendingRequests",value:function(){this.viewPending=!this.viewPending}},{key:"toggleSkillsInDemand",value:function(e){this.type=e}},{key:"openRecordingsPage",value:function(){this.router.navigate(["home/recordings"])}},{key:"refreshPage",value:function(){location.reload()}},{key:"handleRefresh",value:function(){var e=this;setTimeout((function(){e.sid=e.studentService.getStudentProfileDetails().sid,e.initialiseStudentPendingRequest(),e.intialiseStudentApprovedBookings(),e.initialiseLiveMeetingList()}),1e3)}},{key:"initialiseStudentPendingRequest",value:function(){var e=this;this.studentService.fetchStudentPendingBookings(),this.pendingRequestsCount=0,console.log("pending reques =>",this.pendingRequestsCount),this.studentService.bookingsChanged.subscribe((function(t){e.bookingList=t,0==e.bookingList.length?(e.emptyBookingList=!0,e.pendingRequestsCount=0):e.pendingRequestsCount=e.bookingList.length,console.log("pending reques =>",e.pendingRequestsCount)}))}},{key:"intialiseStudentApprovedBookings",value:function(){var e=this;this.studentService.fetchApprovedStudentMeetings(),this.studentService.approvedBookingsChanged.subscribe((function(t){e.approvedList=t,e.sortMeetings(e.approvedList),0==e.approvedList.length&&(e.emptyApprovedList=!0);var i,n=_createForOfIteratorHelper(e.approvedList);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.timeLeft(r),0==e.approvedList.length&&(e.emptyApprovedList=!0)}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"initialiseLiveMeetingList",value:function(){var e=this;this.studentService.fetchLiveMeetings(),this.studentService.liveMeetingsChanged.subscribe((function(t){e.liveMeetingList=t,0==e.liveMeetingList.length&&(e.emptyLiveList=!0);var i,n=_createForOfIteratorHelper(e.liveMeetingList);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.eliminateLiveMeetings(r,e.liveMeetingList)}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"fetchPendingReviewsList",value:function(){var e=this;this.httpService.fetchPendingReviewsList(this.sid).subscribe((function(t){e.pendingReviewList=t,console.log("pending requests ->",e.pendingRequestsCount)}))}},{key:"giveFeedback",value:function(e){this.httpService.giveFeedback(e.meetingId,80,"You are a god teacher",e.tutorId).subscribe((function(e){}))}},{key:"sortMeetings",value:function(e){e.sort((function(e,t){var i=e.dateOfMeeting.split("/")[2],n=e.dateOfMeeting.split("/")[1]-1,r=e.dateOfMeeting.split("/")[0],a=e.startTimeHour,o=e.startTimeMinute;console.log(r+"/"+n+"/"+i+"..."+a+":"+o);var s=t.dateOfMeeting.split("/")[2],l=t.dateOfMeeting.split("/")[1]-1,c=t.dateOfMeeting.split("/")[0],u=t.startTimeHour,h=t.startTimeMinute;return new Date(i,n,r,a,o,0,0).valueOf()-new Date(s,l,c,u,h,0,0).valueOf()}))}},{key:"eliminateLiveMeetings",value:function(e,t){var i=this;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var n=60*e.endTimeHour+e.endTimeMinute,r=60*this.now.getHours()+this.now.getMinutes(),a=n-r;a<=0&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1),setInterval((function(){r=60*i.now.getHours()+i.now.getMinutes(),(a=n-r)<=0&&-1!=t.indexOf(e)&&(t.splice(t.indexOf(e),1),i.httpService.updateBookingStatus(e.bid,"completed").subscribe((function(e){})))}),5e3)}}},{key:"timeLeft",value:function(e){var t=this,i=new Date;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var n=60*e.startTimeHour+e.startTimeMinute,r=e.duration+10,a=60*this.now.getHours()+this.now.getMinutes(),o=n-a,s=Math.trunc(o/60),l=o%60;o>0&&(0==s?c=l+" minutes":0!=l?c=s+" hours "+l+" minutes ":0==l&&(c=s+" hours "),e.timeLeft=c),setInterval((function(){a=60*t.now.getHours()+t.now.getMinutes(),o=n-a,s=Math.trunc(o/60),l=o%60,o>0?(0==s?c=l+" minutes ":0!=l?c=s+" hours "+l+" minutes":0==l&&(c=s+" hours"),e.timeLeft=c):o<=0&&(e.timeLeft=null,Math.abs(o)>r&&(t.approvedList.splice(t.approvedList.indexOf(e),1),t.httpService.updateBookingStatus(e.bid,"completed unattended").subscribe((function(e){}))))}),5e3)}else{var c,u=0,h=0,d=0,p=e.dateOfMeeting.split("/"),f=new Date(+p[2],p[1]-1,+p[0]);if(n=60*e.startTimeHour+e.startTimeMinute,f.getTime()>i.getTime()){var v=Math.trunc((f.getTime()-i.getTime())/6e4);if((d=Math.trunc(v/1440))<1)u=Math.trunc(v/60),h=v%60;else{var m=v%1440;u=Math.trunc(m/60),h=m%60}u+=Math.trunc(n/60),(h+=Math.trunc(n%60))>60&&(u+=h/60,h%=60),u>24&&(d+=u/24,u%=24),c=0==d?Math.trunc(u)+" hours "+Math.trunc(h)+" minutes":Math.trunc(d)+" days "+Math.trunc(u)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=c}setInterval((function(){i=new Date;var t=Math.trunc((f.getTime()-i.getTime())/6e4),r=Math.trunc(t/1440);if(r<1)u=Math.trunc(t/60),h=t%60;else{var a=t%1440;u=Math.trunc(a/60),h=a%60}u+=Math.trunc(n/60),(h+=Math.trunc(n%60))>60&&(u+=h/60,h%=60),u>24&&(r+=u/24,u%=24),c=0==r?Math.trunc(u)+" hours "+Math.trunc(h)+" minutes":Math.trunc(r)+" days "+Math.trunc(u)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=c}),5e3)}}},{key:"onJoin",value:function(e){this.joinMeeting.role="student",this.joinMeeting.roomId=123,this.joinMeeting.roomName=e.meetingId,this.joinMeeting.userName=e.studentName,this.joinMeeting.userId=e.studentId,this.meetingService.setMeeting(this.joinMeeting),this.meetingService.setBooking(e),this.router.navigate(["meeting"])}},{key:"deleteBooking",value:function(e){var t=this;this.meetingService.setDeleteBooking(e),this.dialog.open(GG,{width:"400px",height:"150px"}),this.dialog.afterAllClosed.subscribe((function(){0==t.bookingList.length&&(t.emptyBookingList=!0)}))}}]),e}()).\u0275fac=function(e){return new(e||mY)(Lo(lk),Lo(FT),Lo(ck),Lo(mb),Lo(cm),Lo(LT),Lo(YG),Lo(rI),Lo(Nu))},mY.\u0275cmp=gt({type:mY,selectors:[["app-student-dashboard"]],hostBindings:function(e,t){1&e&&Ko("resize",(function(e){return t.getScreenSize(e)}),!1,Gi)},decls:35,vars:19,consts:[[1,"dashboard-container"],[1,"pending-reviews-panel"],[1,"number"],[1,"text-content"],["class","takeActionLink",3,"click",4,"ngIf"],["class","widget pending-reviews-list","style","min-height: 0; max-height: 250px",4,"ngIf"],[1,"widget"],[1,"widget-header"],[2,"padding","10px"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"widget-timings"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-chart-pie"],[1,"fa","fa-list"],[2,"margin-top","20px"],[3,"type","data","options","width","height"],["chart",""],[1,"widget","pending-reviews"],[1,"widget-information"],["style","padding: 10px",4,"ngIf"],["class","list-panel",4,"ngFor","ngForOf"],[1,"takeActionLink",3,"click"],[1,"widget","pending-reviews-list",2,"min-height","0","max-height","250px"],[1,"widget-information","pending-requests"],[1,"list-panel"],[1,"list-thumbnail",2,"background-image","url('../../../assets/images/default-user-image.png')"],[1,"list-information"],[1,"name"],[1,"subject"],[1,"date-time-panel"],[1,"button-container"],[1,"btn","btn-primary"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"widget-time"],[2,"color","red"],[1,"subject-thumbnail"],[1,"subject-description"],[1,"widget-footer"],[3,"click"],["style","color: red",4,"ngIf"],["class","widget-time",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["href","javascript:;",3,"click"],[1,"fas","fa-redo",2,"margin-left","5px","color","black","cursor","pointer",3,"click"],[1,"list-thumbnail",3,"ngStyle"],[1,"name",3,"innerHTML"],[1,"subject",3,"innerHTML"],[1,"review-nav"],[1,"stars-container"],[1,"star-widget",2,"cursor","pointer"],["type","radio","name","rate","id","rate-5",3,"click"],["for","rate-5",1,"fas","fa-star"],["type","radio","name","rate","id","rate-4",3,"click"],["for","rate-4",1,"fas","fa-star"],["type","radio","name","rate","id","rate-3",3,"click"],["for","rate-3",1,"fas","fa-star"],["type","radio","name","rate","id","rate-2",3,"click"],["for","rate-2",1,"fas","fa-star"],["type","radio","name","rate","id","rate-1",3,"click"],["for","rate-1",1,"fas","fa-star"]],template:function(e,t){1&e&&(jo(0,"body"),jo(1,"div",0),jo(2,"div",1),jo(3,"span",2),Ss(4),Xl(5,"zero"),Ho(),jo(6,"span",3),Ss(7,"PENDING REQUESTS"),Ho(),Po(8,nY,2,0,"a",4),Ho(),Po(9,oY,5,1,"div",5),jo(10,"div",6),jo(11,"div",7),Ss(12,"Upcoming Classes"),Ho(),jo(13,"div",8),Po(14,sY,2,0,"span",9),Ho(),Po(15,cY,2,1,"div",9),Po(16,dY,22,15,"div",10),Ho(),jo(17,"div",6),jo(18,"div",7),Ss(19,"Skills in Demand"),Ho(),jo(20,"div",11),jo(21,"div",12),jo(22,"button",13),Ko("click",(function(){return t.toggleSkillsInDemand("PieChart")})),Uo(23,"span",14),Ho(),jo(24,"button",13),Ko("click",(function(){return t.toggleSkillsInDemand("Table")})),Uo(25,"span",15),Ho(),Ho(),Ho(),jo(26,"div",16),Uo(27,"google-chart",17,18),Ho(),Ho(),jo(29,"div",19),jo(30,"div",7),Ss(31,"Pending Reviews"),Ho(),jo(32,"div",20),Po(33,pY,3,0,"div",21),Po(34,vY,18,5,"div",22),Ho(),Ho(),Ho(),Ho()),2&e&&(_r(4),Es(Jl(5,17,t.pendingRequestsCount)),_r(4),Bo("ngIf",0!=t.pendingRequestsCount),_r(1),Bo("ngIf",t.viewPending&&0!=t.pendingRequestsCount),_r(5),Bo("ngIf",0==t.liveMeetingList.length&&0==t.approvedList.length),_r(1),Bo("ngIf",null!=t.liveMeetingList),_r(1),Bo("ngForOf",t.approvedList),_r(6),hs("active","PieChart"==t.type),_r(2),hs("active","Table"==t.type),_r(3),Bo("type",t.type)("data",t.data)("options",t.options)("width",t.studentChartWidth)("height",t.studentChartHeight),_r(6),Bo("ngIf",0==t.pendingReviewList.length),_r(1),Bo("ngForOf",t.pendingReviewList))},directives:[Dh,xh,eY,qh],pipes:[iY],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7)}.card[_ngcontent-%COMP%], .card2[_ngcontent-%COMP%]{width:80%;margin-bottom:50px;margin-left:70px;margin-top:50px;padding:0}.card2[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(132,133,136,.7);height:auto;max-height:600px}.card-body[_ngcontent-%COMP%]{padding:20px}.card-body[_ngcontent-%COMP%], .tutor-card-body[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7)}.tutor-card-body[_ngcontent-%COMP%]{padding:10px;height:auto;max-height:360px;overflow-y:scroll}.tutorBox[_ngcontent-%COMP%]{padding:0;width:100%;margin:0}.star[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:3rem;color:#d3d3d3}.full[_ngcontent-%COMP%], .half[_ngcontent-%COMP%]{color:red}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden}.image-styling[_ngcontent-%COMP%]{margin-top:20px;display:block;margin-left:auto;margin-right:auto;height:110px;width:110px;border-radius:50%}.btn-join[_ngcontent-%COMP%]{border:1px solid #0073b1;color:#0073b1;background:none;padding:2px 15px}.btn-join[_ngcontent-%COMP%]:hover{background-color:#57add3}.btn-decline[_ngcontent-%COMP%]{border:1px solid #800d1a;color:#800d1a;background:none;padding:2px 15px}.btn-decline[_ngcontent-%COMP%]:hover{background-color:#d50b31}.education-detail[_ngcontent-%COMP%]{margin-left:30px;margin-right:15px;font-size:10px;margin-top:10px}.request-buttons[_ngcontent-%COMP%]{display:block;margin:10px auto}.align[_ngcontent-%COMP%]{float:left}img[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:100%}.leftMarginZero[_ngcontent-%COMP%]{margin-left:0}.rightPaddingZero[_ngcontent-%COMP%]{padding-right:0}.paddingZero[_ngcontent-%COMP%]{padding:0}.card-header[_ngcontent-%COMP%]{width:100%}p[_ngcontent-%COMP%]{margin:0}.divBox[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7);padding:10px;margin-bottom:10px}.tutorSkillTags[_ngcontent-%COMP%]{display:inline;font-size:smaller;background-color:#b7d0e7;color:#fff;padding:2px 5px;border-radius:0;margin-right:5px;border-radius:5px}.takeActionLink[_ngcontent-%COMP%]{cursor:pointer}.takeActionLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.widget-information[_ngcontent-%COMP%]{position:relative;height:250px;margin-bottom:30px}.pending-requests[_ngcontent-%COMP%]{height:-webkit-max-content;height:-moz-max-content;height:max-content}.widget-time[_ngcontent-%COMP%]{font-size:11px;color:#e7001a;position:absolute;top:-35px;right:10px}.widget[_ngcontent-%COMP%]{max-height:250px;overflow:hidden}.star-widget[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.star-widget[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;color:#fff;float:right;transition:all .2s ease;-webkit-text-stroke-color:#fc91fc;-webkit-text-stroke-width:medium;padding:2px}input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:not(:checked) ~ label[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:not(:checked) ~ label[_ngcontent-%COMP%]:hover ~ label[_ngcontent-%COMP%]{color:#fc91fc}.stars-container[_ngcontent-%COMP%]{display:inline}.review-nav[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;position:absolute;top:0;right:10px}.review-icons[_ngcontent-%COMP%]{padding:10px}.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#7d0f7d!important}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.dashboard-container[_ngcontent-%COMP%]   .widget[_ngcontent-%COMP%]   .widget-information[_ngcontent-%COMP%]   .subject-thumbnail[_ngcontent-%COMP%]{width:115px;height:115px}}"]}),mY);function yY(e,t){if(1&e){var i=zo();jo(0,"a",22),Ko("click",(function(){return ti(i),$o().viewPendingRequests()})),Ss(1,"Take Action"),Ho()}}function bY(e,t){1&e&&(jo(0,"span"),Ss(1,"No pending requests"),Ho())}function kY(e,t){1&e&&Uo(0,"i",35)}function CY(e,t){if(1&e){var i=zo();jo(0,"div",25),Uo(1,"div",26),jo(2,"div",27),jo(3,"span",28),Ss(4),Ho(),jo(5,"span",29),Ss(6),Ho(),Ho(),jo(7,"div",30),jo(8,"span"),Ss(9),Ho(),jo(10,"span"),Ss(11),Xl(12,"zero"),Xl(13,"zero"),Ho(),Ho(),jo(14,"div",31),jo(15,"button",32),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).acceptBooking(e)})),Po(16,kY,1,0,"i",33),Ss(17," Accept "),Ho(),jo(18,"button",34),Ss(19," Re-Schedule "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit,r=$o(2);_r(4),Es(n.studentName),_r(2),Es(n.subject),_r(3),Es(n.dateOfMeeting),_r(2),xs(" ",n.startTimeHour,":",Jl(12,9,n.startTimeMinute)," - ",n.endTimeHour,":",Jl(13,11,n.endTimeMinute)," (",n.duration," minutes)"),_r(5),Bo("ngIf",r.isLoading)}}function wY(e,t){if(1&e&&(jo(0,"div",23),jo(1,"div",7),Ss(2,"Pending Requests"),Ho(),jo(3,"div",24),Po(4,bY,2,0,"span",9),Po(5,CY,20,13,"div",20),Ho(),Ho()),2&e){var i=$o();_r(4),Bo("ngIf",0==i.pendingRequestsCount),_r(1),Bo("ngForOf",i.bookingList)}}function _Y(e,t){1&e&&(jo(0,"span"),Ss(1,"No upcoming classes"),Ho())}function SY(e,t){if(1&e&&(jo(0,"div",36),Po(1,_Y,2,0,"span",9),Ho()),2&e){var i=$o();_r(1),Bo("ngIf",0==i.liveMeetingList.length&&0==i.meetingList.length)}}function EY(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",19),jo(2,"div",37),jo(3,"span",38),Ss(4,"\u25cf \xa0"),Ho(),Ss(5,"Live Now "),Ho(),Uo(6,"div",39),jo(7,"div",40),jo(8,"span"),Ss(9),Ho(),jo(10,"span"),Ss(11),Xl(12,"zero"),Xl(13,"zero"),Ho(),jo(14,"span"),Ss(15),Ho(),jo(16,"button",32),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).onJoin(e)})),Ss(17," Join "),Ho(),Ho(),Ho(),jo(18,"div",41),jo(19,"a",42),Ss(20,"view more"),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(9),Es(n.studentName),_r(2),xs("",n.startTimeHour,":",Jl(12,7,n.startTimeMinute)," - ",n.endTimeHour,":",Jl(13,9,n.endTimeMinute)," (",n.duration," minutes)"),_r(4),Es(n.description)}}function TY(e,t){if(1&e&&(jo(0,"div"),Po(1,EY,21,11,"div",10),Ho()),2&e){var i=$o();_r(1),Bo("ngForOf",i.liveMeetingList)}}function AY(e,t){1&e&&(jo(0,"div",37),jo(1,"span",38),Ss(2,"\u25cf \xa0"),Ho(),Ss(3,"Live Now "),Ho())}function OY(e,t){if(1&e&&(jo(0,"div",37),Ss(1),Ho()),2&e){var i=$o().$implicit;_r(1),Ts(" Live in:",i.timeLeft," ")}}function xY(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",19),Po(2,AY,4,0,"div",43),Po(3,OY,2,1,"div",43),Uo(4,"div",39),jo(5,"div",40),jo(6,"span"),Ss(7),Ho(),jo(8,"span"),Ss(9),Ho(),jo(10,"span"),Ss(11),Xl(12,"zero"),Xl(13,"zero"),Ho(),jo(14,"span"),Ss(15),Ho(),jo(16,"button",44),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().onHost(e)})),Ss(17," Join "),Ho(),Ho(),Ho(),jo(18,"div",41),jo(19,"a",45),Ko("click",(function(){return ti(i),$o().openSchedulePage()})),Ss(20,"view more"),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Bo("ngIf",null==n.timeLeft),_r(1),Bo("ngIf",null!=n.timeLeft),_r(4),Es(n.studentName),_r(2),Es(n.dateOfMeeting),_r(2),xs("",n.startTimeHour,":",Jl(12,11,n.startTimeMinute)," - ",n.endTimeHour,":",Jl(13,13,n.endTimeMinute)," (",n.duration," minutes)"),_r(4),Es(n.description),_r(1),Bo("disabled",!n.isLive)}}function IY(e,t){1&e&&(jo(0,"div",36),jo(1,"span"),Ss(2,"No Recent reviews"),Ho(),Ho())}var DY=function(e){return{"background-image":e}};function RY(e,t){if(1&e&&(jo(0,"div",25),Uo(1,"div",46),jo(2,"div",27),jo(3,"span",28),Ss(4),Ho(),jo(5,"span",29),Ss(6),Ho(),Ho(),jo(7,"div",47),Uo(8,"div",48),Ho(),Ho()),2&e){var i=t.$implicit,n=$o();_r(1),Bo("ngStyle",ql(5,DY,"url("+n.profilePictureUrl+")")),_r(3),Es(i.studentName),_r(2),Es(i.subject),_r(2),us("width",i.rating,"%")}}function PY(e,t){1&e&&(jo(0,"div",41),jo(1,"a",49),Ss(2,"view more"),Ho(),Ho())}PM.load({"en-US":{schedule:{addTitle:"My Availability"}}});var MY,LY,NY=((MY=function(){function e(t,i,n,r,a,o,s){var l=this;_classCallCheck2(this,e),this.httpService=t,this.tutorService=i,this.meetingService=n,this.router=r,this.loginService=a,this.locationStrategy=o,this.webSocketService=s,this.now=new Date,this.tutorChartWidth="380",this.tutorChartHeight="180",this.skillsChartType="PieChart",this.skillsData=[["Mathematics",45],["English",26.8],["Science",12.8],["C++",8.5],["Machine Learning",6.2],["Others",.7]],this.skillsOptions={pieHole:.4},this.earningTrackerType="ComboChart",this.earningPeriod="Week",this.earningTrackerData=[["June",150,150],["July",200,200],["August",300,300],["September",250,250]],this.earningTrackerOptions={hAxis:{title:"Months"},vAxis:{title:"Earning (USD $)"},seriesType:"bars",series:{1:{type:"line"}}},this.takeAction=!0,this.pendingRequestsCount=0,this.showCard=!0,this.bookingRequestMessage="",this.approvedMeetingsMessage="",this.liveMeetingsMessage="",this.isLoading=!1,this.bookingList=[],this.meetingList=[],this.liveMeetingList=[],this.hostMeeting=new fb,this.completeProfile=!0,this.profilePictureUrl="../../../assets/images/default-user-image.png",this.recentReviewsList=[],setInterval((function(){l.now=new Date}),1e3)}return _createClass(e,[{key:"getScreenSize",value:function(e){window;var t=window.innerWidth;this.tutorChartWidth=t<=800?"320":"380"}},{key:"toggleSkillsInDemand",value:function(e){this.skillsChartType=e}},{key:"toggleEarningPeriod",value:function(e){this.earningPeriod=e}},{key:"ngOnInit",value:function(){this.preventBackButton(),window.innerWidth<=800&&(this.tutorChartWidth="320"),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),"Expert"==this.loginService.getLoginType()&&this.tutorProfileDetails.tid?(this.initialisePendingRequests(),this.fetchTutorApprovedMeetings(),this.fetchTutorLiveMeetings(),this.fetchExpertRecentReviews()):this.handleRefresh()}},{key:"initialisePendingRequests",value:function(){var e=this;this.tutorService.fetchTutorPendingBookings(),this.tutorService.bookingsChanged.subscribe((function(t){console.log(t),e.bookingList=t,0==e.bookingList.length?(e.bookingRequestMessage="No booking requests pending.",e.pendingRequestsCount=0):e.pendingRequestsCount=e.bookingList.length})),this.bookingList=this.tutorService.getBookings()}},{key:"viewPendingRequests",value:function(){this.takeAction=!this.takeAction}},{key:"closeCompleteProfile",value:function(){this.completeProfile=!1,this.showCard=!1}},{key:"handleRefresh",value:function(){var e=this;setTimeout((function(){e.tutorProfileDetails=e.tutorService.getTutorProfileDetails(),e.loginService.setLoginType("Expert"),e.initialisePendingRequests(),e.fetchTutorApprovedMeetings(),e.fetchTutorLiveMeetings(),e.fetchExpertRecentReviews()}),1e3)}},{key:"openSchedulePage",value:function(){this.router.navigate(["home/tutorSchedule"])}},{key:"fetchExpertRecentReviews",value:function(){var e=this;this.httpService.fetchExpertRecentReviews(this.tutorProfileDetails.bookingId).subscribe((function(t){e.recentReviewsList=t}))}},{key:"acceptBooking",value:function(e){var t=this;this.isLoading=!0,e.approvalStatus="Accepted",this.httpService.updateBookingStatus(e.bid,e.approvalStatus).subscribe((function(i){if(1==i){t.bookingList.splice(t.bookingList.indexOf(e,0),1),0==t.bookingList.length&&(t.bookingRequestMessage="No booking requests pending.",t.pendingRequestsCount=0,t.takeAction=!1);var n=JSON.stringify({entityType:"1",entityTypeId:"12",actorId:e.tutorId,notifierId:e.studentId,pictureUrl:e.tutorProfilePictureUrl,readStatus:!1});t.webSocketService.sendAppointmentNotfication(n,e.studentId.toString()),t.before10MinutesTime(e),t.enableJoinNow(e),t.timeLeft(e),t.meetingList.push(e),t.approvedMeetingsMessage="",t.isLoading=!1}}))}},{key:"denyBooking",value:function(e){var t=this;e.approvalStatus="Rejected",this.httpService.updateBookingStatus(e.bid,e.approvalStatus).subscribe((function(i){1==i&&(t.bookingList.splice(t.bookingList.indexOf(e,0),1),0==t.bookingList.length&&(t.bookingRequestMessage="No booking requests pending.",t.pendingRequestsCount=0,t.takeAction=!1))}))}},{key:"fetchTutorApprovedMeetings",value:function(){var e=this;this.httpService.fetchApprovedMeetingsTutor(this.tutorService.getTutorDetials().bookingId).subscribe((function(t){e.meetingList=t,e.sortMeetings(e.meetingList),0==e.meetingList.length&&(e.approvedMeetingsMessage="No upcoming meetings pending.");var i,n=_createForOfIteratorHelper(e.meetingList);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.before10MinutesTime(r),e.enableJoinNow(r),e.timeLeft(r),0==e.meetingList.length&&(e.approvedMeetingsMessage="No upcoming meetings pending.")}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"fetchTutorLiveMeetings",value:function(){var e=this;this.httpService.fetchLiveMeetingsTutor(this.tutorService.getTutorDetials().bookingId).subscribe((function(t){e.liveMeetingList=t,0==e.liveMeetingList.length&&(e.liveMeetingsMessage="No live meetings.");var i,n=_createForOfIteratorHelper(e.liveMeetingList);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.eliminateLiveMeetings(r,e.liveMeetingList),0==e.meetingList.length&&(e.approvedMeetingsMessage="No upcoming meetings pending.")}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"sortMeetings",value:function(e){e.sort((function(e,t){var i=e.dateOfMeeting.split("/")[2],n=e.dateOfMeeting.split("/")[1]-1,r=e.dateOfMeeting.split("/")[0],a=e.startTimeHour,o=e.startTimeMinute,s=t.dateOfMeeting.split("/")[2],l=t.dateOfMeeting.split("/")[1]-1,c=t.dateOfMeeting.split("/")[0],u=t.startTimeHour,h=t.startTimeMinute;return new Date(i,n,r,a,o,0,0).valueOf()-new Date(s,l,c,u,h,0,0).valueOf()}))}},{key:"enableJoinNow",value:function(e){var t=this,i=new Date(Date.now()).toLocaleDateString("en-GB"),n=60*e.startTimeHour+e.startTimeMinute;i==e.dateOfMeeting&&setInterval((function(){60*t.now.getHours()+t.now.getMinutes()>=n&&(e.isLive=!0)}),5e3)}},{key:"timeLeft",value:function(e){var t=this,i=new Date;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var n=60*e.startTimeHour+e.startTimeMinute,r=e.duration+10,a=60*this.now.getHours()+this.now.getMinutes(),o=n-a,s=Math.trunc(o/60),l=o%60;o>0&&(0==s?c=l+" minutes":0!=l?c=s+" hours "+l+" minutes ":0==l&&(c=s+" hours "),e.timeLeft=c),setInterval((function(){a=60*t.now.getHours()+t.now.getMinutes(),o=n-a,s=Math.trunc(o/60),l=o%60,o>0?(0==s?c=l+" minutes ":0!=l?c=s+" hours "+l+" minutes":0==l&&(c=s+" hours"),e.timeLeft=c):o<=0&&(e.timeLeft=null,Math.abs(o)>r&&(t.meetingList.splice(t.meetingList.indexOf(e),1),0==t.meetingList.length&&(t.approvedMeetingsMessage="No upcoming meetings."),t.httpService.updateBookingStatus(e.bid,"completed unattended").subscribe((function(e){}))))}),5e3)}else{var c,u=0,h=0,d=0,p=e.dateOfMeeting.split("/"),f=new Date(+p[2],p[1]-1,+p[0]);if(n=60*e.startTimeHour+e.startTimeMinute,f.getTime()>i.getTime()){var v=Math.trunc((f.getTime()-i.getTime())/6e4);if((d=Math.trunc(v/1440))<1)u=Math.trunc(v/60),h=v%60;else{var m=v%1440;u=Math.trunc(m/60),h=m%60}u+=Math.trunc(n/60),(h+=Math.trunc(n%60))>60&&(u+=h/60,h%=60),u>24&&(d+=u/24,u%=24),c=0==d?Math.trunc(u)+" hours "+Math.trunc(h)+" minutes":Math.trunc(d)+" days "+Math.trunc(u)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=c}setInterval((function(){i=new Date;var t=Math.trunc((f.getTime()-i.getTime())/6e4),r=Math.trunc(t/1440);if(r<1)u=Math.trunc(t/60),h=t%60;else{var a=t%1440;u=Math.trunc(a/60),h=a%60}u+=Math.trunc(n/60),(h+=Math.trunc(n%60))>60&&(u+=h/60,h%=60),u>24&&(r+=u/24,u%=24),c=0==r?Math.trunc(u)+" hours "+Math.trunc(h)+" minutes":Math.trunc(r)+" days "+Math.trunc(u)+" hours "+Math.trunc(h)+" minutes",e.timeLeft=c}),5e3)}}},{key:"isTimeCompleted",value:function(e,t){var i=this;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var n=60*e.startTimeHour+e.startTimeMinute,r=e.duration+10,a=60*this.now.getHours()+this.now.getMinutes(),o=n-a;o<=0&&Math.abs(o)>r&&t.splice(t.indexOf(e),1),setInterval((function(){a=60*i.now.getHours()+i.now.getMinutes(),(o=n-a)<=0&&Math.abs(o)>r&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1)}),5e3)}}},{key:"eliminateLiveMeetings",value:function(e,t){var i=this;if(new Date(Date.now()).toLocaleDateString("en-GB")==e.dateOfMeeting){var n=60*e.endTimeHour+e.endTimeMinute,r=60*this.now.getHours()+this.now.getMinutes(),a=n-r;a<=0&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1),setInterval((function(){r=60*i.now.getHours()+i.now.getMinutes(),(a=n-r)<=0&&-1!=t.indexOf(e)&&(t.splice(t.indexOf(e),1),i.httpService.updateBookingStatus(e.bid,"completed").subscribe((function(e){})))}),5e3)}}},{key:"before10MinutesTime",value:function(e){0==e.startTimeMinute?(e.startTimeMinute=50,e.startTimeHour-=1):e.startTimeMinute-=10}},{key:"onHost",value:function(e){var t=this;e.approvalStatus="live",this.httpService.updateBookingStatus(e.bid,e.approvalStatus).subscribe((function(i){1==i&&(t.meetingList.splice(t.meetingList.indexOf(e,0),1),t.liveMeetingList.push(e))})),this.hostMeeting.roomId=123,this.hostMeeting.role="host",this.hostMeeting.roomName=e.meetingId,this.hostMeeting.userName=e.tutorName,this.hostMeeting.userId=e.tutorId,this.meetingService.setMeeting(this.hostMeeting),this.meetingService.setBooking(e),this.router.navigate(["meeting"])}},{key:"onJoin",value:function(e){this.hostMeeting.roomId=123,this.hostMeeting.role="host",this.hostMeeting.roomName=e.meetingId,this.hostMeeting.userName=e.tutorName,this.hostMeeting.userId=e.tutorId,this.meetingService.setMeeting(this.hostMeeting),this.meetingService.setBooking(e),this.router.navigate(["meeting"])}},{key:"preventBackButton",value:function(){history.pushState(null,null,location.href),this.locationStrategy.onPopState((function(){history.pushState(null,null,location.href)}))}}]),e}()).\u0275fac=function(e){return new(e||MY)(Lo(lk),Lo(ck),Lo(mb),Lo(cm),Lo(gb),Lo(Nu),Lo(yA))},MY.\u0275cmp=gt({type:MY,selectors:[["app-tutor-dashboard"]],hostBindings:function(e,t){1&e&&Ko("resize",(function(e){return t.getScreenSize(e)}),!1,Gi)},decls:49,vars:31,consts:[[1,"dashboard-container"],[1,"pending-reviews-panel"],[1,"number"],[1,"text-content"],["class","takeActionLink",3,"click",4,"ngIf"],["class","widget pending-reviews-list","style","min-height: 0; max-height: 250px",4,"ngIf"],[1,"widget"],[1,"widget-header"],["style","padding: 10px",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"widget-timings"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-chart-pie"],[1,"fa","fa-list"],[2,"margin-top","20px"],[3,"type","data","options","width","height"],["skillsChart",""],[1,"widget-information"],["class","list-panel",4,"ngFor","ngForOf"],["class","widget-footer",4,"ngIf"],[1,"takeActionLink",3,"click"],[1,"widget","pending-reviews-list",2,"min-height","0","max-height","250px"],[1,"widget-information",2,"height","auto"],[1,"list-panel"],[1,"list-thumbnail",2,"background-image","url('../../../assets/images/default-user-image.png')"],[1,"list-information"],[1,"name"],[1,"subject"],[1,"date-time-panel"],[1,"button-container"],["type","button",1,"btn","btn-primary",3,"click"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","button","disabled","",1,"btn","btn-secondary"],[1,"fa","fa-spinner","fa-spin"],[2,"padding","10px"],[1,"widget-time"],[2,"color","red"],[1,"subject-thumbnail"],[1,"subject-description"],[1,"widget-footer"],["href","javascript:;","routerLink","tutorSchedule"],["class","widget-time",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["href","javascript:;",3,"click"],[1,"list-thumbnail",3,"ngStyle"],[1,"outer-stars"],[1,"inner-stars"],["href",""]],template:function(e,t){1&e&&(jo(0,"body"),jo(1,"div",0),jo(2,"div",1),jo(3,"span",2),Ss(4),Xl(5,"zero"),Ho(),jo(6,"span",3),Ss(7,"PENDING REQUESTS"),Ho(),Po(8,yY,2,0,"a",4),Ho(),Po(9,wY,6,2,"div",5),jo(10,"div",6),jo(11,"div",7),Ss(12,"Upcoming Classes"),Ho(),Po(13,SY,2,1,"div",8),Po(14,TY,2,1,"div",9),Po(15,xY,21,15,"div",10),Ho(),jo(16,"div",6),jo(17,"div",7),Ss(18,"Skills in Demand"),Ho(),jo(19,"div",11),jo(20,"div",12),jo(21,"button",13),Ko("click",(function(){return t.toggleSkillsInDemand("PieChart")})),Uo(22,"span",14),Ho(),jo(23,"button",13),Ko("click",(function(){return t.toggleSkillsInDemand("Table")})),Uo(24,"span",15),Ho(),Ho(),Ho(),jo(25,"div",16),Uo(26,"google-chart",17,18),Ho(),Ho(),jo(28,"div",6),jo(29,"div",7),Ss(30,"Earning Tracker"),Ho(),jo(31,"div",11),jo(32,"div",12),jo(33,"button",13),Ko("click",(function(){return t.toggleEarningPeriod("Week")})),Ss(34," 1W "),Ho(),jo(35,"button",13),Ko("click",(function(){return t.toggleEarningPeriod("Month")})),Ss(36," 1M "),Ho(),jo(37,"button",13),Ko("click",(function(){return t.toggleEarningPeriod("Quarter")})),Ss(38," 1Q "),Ho(),Ho(),Ho(),jo(39,"div",16),Uo(40,"google-chart",17,18),Ho(),Ho(),jo(42,"div",6),jo(43,"div",7),Ss(44,"Recent Reviews"),Ho(),jo(45,"div",19),Po(46,IY,3,0,"div",8),Po(47,RY,9,7,"div",20),Ho(),Po(48,PY,3,0,"div",21),Ho(),Ho(),Ho()),2&e&&(_r(4),Es(Jl(5,29,t.pendingRequestsCount)),_r(4),Bo("ngIf",0!=t.pendingRequestsCount),_r(1),Bo("ngIf",t.takeAction&&0!=t.pendingRequestsCount),_r(4),Bo("ngIf",null!=t.liveMeetingList&&null!=t.meetingList),_r(1),Bo("ngIf",null!=t.liveMeetingList),_r(1),Bo("ngForOf",t.meetingList),_r(6),hs("active","PieChart"==t.skillsChartType),_r(2),hs("active","Table"==t.skillsChartType),_r(3),Bo("type",t.skillsChartType)("data",t.skillsData)("options",t.skillsOptions)("width",t.tutorChartWidth)("height",t.tutorChartHeight),_r(7),hs("active","Week"==t.earningPeriod),_r(2),hs("active","Month"==t.earningPeriod),_r(2),hs("active","Quarter"==t.earningPeriod),_r(3),Bo("type",t.earningTrackerType)("data",t.earningTrackerData)("options",t.earningTrackerOptions)("width",t.tutorChartWidth)("height",t.tutorChartHeight),_r(6),Bo("ngIf",0==t.recentReviewsList.length),_r(1),Bo("ngForOf",t.recentReviewsList),_r(1),Bo("ngIf",t.recentReviewsList.length>3))},directives:[Dh,xh,eY,hm,qh],pipes:[iY],styles:['body[_ngcontent-%COMP%]{background-color:#f9fafc;height:100%}.card[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7);width:70%;margin-bottom:50px}.progress-Bar[_ngcontent-%COMP%]{width:70%;height:8px;margin-bottom:16px}.outer-progressBar[_ngcontent-%COMP%]{background-color:#ccc;height:inherit;border-radius:8px}.inner-progressBar[_ngcontent-%COMP%]{background-color:#241084;height:inherit;width:0;border-radius:8px}.completeProfileLink[_ngcontent-%COMP%]{color:#241084;cursor:pointer;display:inline-block}.completeProfileLink[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#241084}.dashboardIcons[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:5px}.takeActionLink[_ngcontent-%COMP%]{cursor:pointer}.takeActionLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.widget-information[_ngcontent-%COMP%]{position:relative;height:250px;margin-bottom:30px}.widget-time[_ngcontent-%COMP%]{font-size:11px;color:#e7001a;position:absolute;top:-35px;right:10px}.widget[_ngcontent-%COMP%]{max-height:250px;overflow:hidden}.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#7d0f7d!important}.outer-stars[_ngcontent-%COMP%]{position:absolute;display:inline-block;top:10px;right:5px;font-size:20px;-webkit-text-stroke-color:#fc91fc;-webkit-text-stroke-width:thin}.inner-stars[_ngcontent-%COMP%]{position:absolute;top:0;left:0;white-space:nowrap;overflow:hidden;width:0}.outer-stars[_ngcontent-%COMP%]:before{color:#fff}.inner-stars[_ngcontent-%COMP%]:before, .outer-stars[_ngcontent-%COMP%]:before{content:"\\f005 \\f005 \\f005 \\f005 \\f005";font-family:Font Awesome\\ 5 Free;font-weight:900}.inner-stars[_ngcontent-%COMP%]:before{color:#fc91fc}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.dashboard-container[_ngcontent-%COMP%]   .widget[_ngcontent-%COMP%]   .widget-information[_ngcontent-%COMP%]   .subject-thumbnail[_ngcontent-%COMP%]{width:115px;height:115px}}']}),MY),FY=n("urRO"),BY=n.n(FY),VY=["image"],jY=((LY=function(){function e(t,i){_classCallCheck2(this,e),this.dialogRef=t,this.imageDestination="",this.imageSource=i.imageSrc,this.profileImage=i.image}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.cropper=new BY.a(this.imageElement.nativeElement,{zoomable:!1,scalable:!1,aspectRatio:1,crop:function(){var t=e.cropper.getCroppedCanvas();e.imageDestination=t.toDataURL("image/png")}})}},{key:"onUpload",value:function(){this.dialogRef.close(this.imageDestination)}}]),e}()).\u0275fac=function(e){return new(e||LY)(Lo(IT),Lo(DT))},LY.\u0275cmp=gt({type:LY,selectors:[["app-upload-profile-picture"]],viewQuery:function(e,t){var i;1&e&&pc(VY,!0),2&e&&hc(i=yc())&&(t.imageElement=i.first)},decls:12,vars:1,consts:[[2,"padding","20px","width","500px","height","500px"],[2,"text-align","Center"],[2,"font-weight","400"],[1,"img-container"],["crossorigin","",3,"src"],["image",""],[2,"width","max-content","float","right"],[1,"btn","btn-primary",2,"margin-right","10px",3,"click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),jo(2,"h2",2),Ss(3,"Upload Profile Picture"),Ho(),Ho(),Uo(4,"hr"),jo(5,"div",3),Uo(6,"img",4,5),Ho(),Uo(8,"hr"),jo(9,"div",6),jo(10,"button",7),Ko("click",(function(){return t.onUpload()})),Ss(11," Save "),Ho(),Ho(),Ho()),2&e&&(_r(6),Bo("src",t.imageSource,ir))},styles:[".img-container[_ngcontent-%COMP%]{width:auto;height:70%}"]}),LY),HY=function e(){_classCallCheck2(this,e)},UY=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tk;return _classCallCheck2(this,i),(n=t.call(this)).source=e,n.delayTime=r,n.scheduler=a,(!Rk(r)||r<0)&&(n.delayTime=0),a&&"function"==typeof a.schedule||(n.scheduler=Tk),n}return _createClass(i,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(i.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tk;return new i(e,t,n)}},{key:"dispatch",value:function(e){var t=e.source,i=e.subscriber;return this.add(t.subscribe(i))}}]),i}(_),qY=function(){function e(t,i){_classCallCheck2(this,e),this.scheduler=t,this.delay=i}return _createClass(e,[{key:"call",value:function(e,t){return new UY(t,this.delay,this.scheduler).subscribe(e)}}]),e}(),WY=n("Wcq6");function zY(){}var GY=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wk;_classCallCheck2(this,e),this.zone=t,this.delegate=i}return _createClass(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,i){var n=this.zone;return this.delegate.schedule((function(t){var i=this;n.runGuarded((function(){e.apply(i,[t])}))}),t,i)}}]),e}(),YY=function(){function e(t){_classCallCheck2(this,e),this.zone=t,this.task=null}return _createClass(e,[{key:"call",value:function(e,t){var i=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",zY,{},zY,zY)})),t.pipe(Bp({next:i,complete:i,error:i})).subscribe(e).add(i)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout((function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)}),10)}}]),e}(),KY=function e(t){_classCallCheck2(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular((function(){return new GY(Zone.current)})),this.insideAngular=t.run((function(){return new GY(Zone.current,xk)}))},XY=new qe("angularfire2.app.options"),JY=new qe("angularfire2.app.nameOrConfig"),QY=new ol("6.0.2");function ZY(e,t,i){var n="object"==typeof i&&i||{};return n.name=n.name||"string"==typeof i&&i||"[DEFAULT]",WY.apps.filter((function(e){return e&&e.name===n.name}))[0]||t.runOutsideAngular((function(){return Object(WY.initializeApp)(e,n)}))}var $Y,eK={provide:function e(){_classCallCheck2(this,e)},useFactory:ZY,deps:[XY,Wc,[new se,JY]]},tK=(($Y=function(){function e(t){_classCallCheck2(this,e),Object(WY.registerVersion)("angularfire",QY.full,t.toString()),Object(WY.registerVersion)("angular",sl.full)}return _createClass(e,null,[{key:"initializeApp",value:function(t,i){return{ngModule:e,providers:[{provide:XY,useValue:t},{provide:JY,useValue:i}]}}}]),e}()).\u0275mod=Ct({type:$Y}),$Y.\u0275inj=ve({factory:function(e){return new(e||$Y)(Ze(Oc))},providers:[eK]}),$Y),iK=n("wj3C"),nK=n.n(iK),rK=n("mrSG"),aK=n("S+S0"),oK=function(){function e(e,t){this.code_=sK(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return sK(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),e}();function sK(e){return"storage/"+e}function lK(){return new oK("unknown","An unknown error occurred, please check the error payload for server response.")}function cK(){return new oK("canceled","User canceled the upload/download.")}function uK(){return new oK("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hK(){return new oK("no-download-url","The given file does not have any download URLs.")}function dK(e,t,i){return new oK("invalid-argument","Invalid argument in `"+t+"` at index "+e+": "+i)}function pK(){return new oK("app-deleted","The Firebase app was deleted.")}function fK(e,t){return new oK("invalid-format","String does not match format '"+e+"': "+t)}function vK(e){throw new oK("internal-error","Internal error: "+e)}var mK={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function gK(e){switch(e){case mK.RAW:case mK.BASE64:case mK.BASE64URL:case mK.DATA_URL:return;default:throw"Expected one of the event types: ["+mK.RAW+", "+mK.BASE64+", "+mK.BASE64URL+", "+mK.DATA_URL+"]."}}var yK=function(e,t){this.data=e,this.contentType=t||null};function bK(t,i){switch(t){case mK.RAW:return new yK(kK(i));case mK.BASE64:case mK.BASE64URL:return new yK(CK(t,i));case mK.DATA_URL:return new yK((n=new wK(i)).base64?CK(mK.BASE64,n.rest):function(t){var i;try{i=decodeURIComponent(t)}catch(e){throw fK(mK.DATA_URL,"Malformed data URL.")}return kK(i)}(n.rest),new wK(i).contentType)}var n;throw lK()}function kK(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|63&n);else if(55296==(64512&n))if(i<e.length-1&&56320==(64512&e.charCodeAt(i+1))){var r=n,a=e.charCodeAt(++i);t.push(240|(n=65536|(1023&r)<<10|1023&a)>>18,128|n>>12&63,128|n>>6&63,128|63&n)}else t.push(239,191,189);else 56320==(64512&n)?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function CK(t,i){switch(t){case mK.BASE64:var n=-1!==i.indexOf("-"),r=-1!==i.indexOf("_");if(n||r)throw fK(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case mK.BASE64URL:var a=-1!==i.indexOf("+"),o=-1!==i.indexOf("/");if(a||o)throw fK(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(i)}catch(e){throw fK(t,"Invalid character found")}for(var l=new Uint8Array(s.length),c=0;c<s.length;c++)l[c]=s.charCodeAt(c);return l}var wK=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw fK(mK.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var i,n=t[1]||null;null!=n&&(this.base64=(i=n).length>=";base64".length&&";base64"===i.substring(i.length-";base64".length),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)},_K={STATE_CHANGED:"state_changed"},SK={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function EK(e){switch(e){case"running":case"pausing":case"canceling":return SK.RUNNING;case"paused":return SK.PAUSED;case"success":return SK.SUCCESS;case"canceled":return SK.CANCELED;case"error":default:return SK.ERROR}}function TK(e){return null!=e}function AK(e){return void 0!==e}function OK(e){return"function"==typeof e}function xK(e){return"object"==typeof e}function IK(e){return xK(e)&&null!==e}function DK(e){return"string"==typeof e||e instanceof String}function RK(e){return PK(e)&&Number.isInteger(e)}function PK(e){return"number"==typeof e||e instanceof Number}function MK(e){return LK()&&e instanceof Blob}function LK(){return"undefined"!=typeof Blob}var NK=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({}),FK=function(){function t(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=NK.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=NK.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=NK.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return t.prototype.send=function(e,t,i,n){if(this.sent_)throw vK("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),TK(n))for(var r in n)n.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,n[r].toString());return TK(i)?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw vK("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw vK("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw vK("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},t.prototype.addUploadProgressListener=function(e){TK(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},t.prototype.removeUploadProgressListener=function(e){TK(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},t}(),BK=function(){function e(){}return e.prototype.createXhrIo=function(){return new FK},e}();function VK(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=VK();if(void 0!==i){for(var n=new i,r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}if(LK())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var HK=function(){function e(e,t){var i=0,n="";MK(e)?(this.data_=e,i=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=n}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,i){if(MK(this.data_)){var n=(a=t,o=i,(r=this.data_).webkitSlice?r.webkitSlice(a,o):r.mozSlice?r.mozSlice(a,o):r.slice?r.slice(a,o):null);return null===n?null:new e(n)}var r,a,o;return new e(new Uint8Array(this.data_.buffer,t,i-t),!0)},e.getBlob=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(LK()){var n=t.map((function(t){return t instanceof e?t.data_:t}));return new e(jK.apply(null,n))}var r=t.map((function(e){return DK(e)?bK(mK.RAW,e).data:e.data_})),a=0;r.forEach((function(e){a+=e.byteLength}));var o=new Uint8Array(a),s=0;return r.forEach((function(e){for(var t=0;t<e.length;t++)o[s++]=e[t]})),new e(o,!0)},e.prototype.uploadData=function(){return this.data_},e}(),UK=function(){function t(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(i){var n;try{n=t.makeFromUrl(i)}catch(e){return new t(i,"")}if(""===n.path)return n;throw new oK("invalid-default-bucket","Invalid default bucket '"+i+"'.")},t.makeFromUrl=function(e){var i=null,n=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function r(e){e.path_=decodeURIComponent(e.path)}for(var a="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),o=[{regex:n,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:r},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:r}],s=0;s<o.length;s++){var l=o[s],c=l.regex.exec(e);if(c){var u=c[l.indices.path];u||(u=""),i=new t(c[l.indices.bucket],u),l.postModify(i);break}}if(null==i)throw function(e){return new oK("invalid-url","Invalid URL '"+e+"'.")}(e);return i},t}();function qK(t){var i,n;try{i=JSON.parse(t)}catch(e){return null}return xK(n=i)&&!Array.isArray(n)?i:null}function WK(e,t){var i=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?i:e+"/"+i}function zK(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function GK(e){return"https://firebasestorage.googleapis.com/v0"+e}function YK(e){var t=encodeURIComponent,i="?";for(var n in e)e.hasOwnProperty(n)&&(i=i+(t(n)+"=")+t(e[n])+"&");return i.slice(0,-1)}function KK(e,t){return t}var XK=function(e,t,i,n){this.server=e,this.local=t||e,this.writable=!!i,this.xform=n||KK},JK=null;function QK(e,t,i){var n=qK(t);return null===n?null:function(e,t,i){for(var n={type:"file"},r=i.length,a=0;a<r;a++){var o=i[a];n[o.local]=o.xform(n,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var i=new UK(e.bucket,e.fullPath);return t.makeStorageReference(i)}})}(n,e),n}(e,n,i)}function ZK(e,t){for(var i={},n=t.length,r=0;r<n;r++){var a=t[r];a.writable&&(i[a.server]=e[a.local])}return JSON.stringify(i)}function $K(e){if(!xK(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if("customMetadata"===t){if(!xK(i))throw"Expected object for 'customMetadata' mapping."}else if(IK(i))throw"Mapping for '"+t+"' cannot be an object."}}function eX(e){if(!xK(e)||!e)throw"Expected ListOptions object.";for(var t in e)if("maxResults"===t){if(!RK(e.maxResults)||e.maxResults<=0)throw"Expected maxResults to be a positive number.";if(e.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==t)throw"Unknown option: "+t;if(e.pageToken&&!DK(e.pageToken))throw"Expected pageToken to be string."}}var tX=function(e,t,i,n){this.url=e,this.method=t,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function iX(e){if(!e)throw lK()}function nX(e,t){return function(i,n){var r=QK(e,n,t);return iX(null!==r),r}}function rX(e){return function(t,i){var n;return(n=401===t.getStatus()?new oK("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new oK("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new oK("unauthorized","User does not have permission to access '"+e.path+"'."):i).setServerResponseProp(i.serverResponseProp()),n}}function aX(e){var t=rX(e);return function(i,n){var r=t(i,n);return 404===i.getStatus()&&(r=new oK("object-not-found","Object '"+e.path+"' does not exist.")),r.setServerResponseProp(n.serverResponseProp()),r}}function oX(e,t,i){var n=GK(t.fullServerUrl()),r=e.maxOperationRetryTime,a=new tX(n,"GET",nX(e,i),r);return a.errorHandler=aX(t),a}function sX(e,t,i,n,r){var a={};a.prefix=t.isRoot?"":t.path+"/",i&&i.length>0&&(a.delimiter=i),n&&(a.pageToken=n),r&&(a.maxResults=r);var o=GK(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime,l=new tX(o,"GET",function(e,t){return function(i,n){var r=function(e,t,i){var n=qK(i);return null===n?null:function(e,t,i){var n={prefixes:[],items:[],nextPageToken:i.nextPageToken};if(i.prefixes)for(var r=0,a=i.prefixes;r<a.length;r++){var o=a[r].replace(/\/$/,""),s=e.makeStorageReference(new UK(t,o));n.prefixes.push(s)}if(i.items)for(var l=0,c=i.items;l<c.length;l++)s=e.makeStorageReference(new UK(t,c[l].name)),n.items.push(s);return n}(e,t,n)}(e,t,n);return iX(null!==r),r}}(e,t.bucket),s);return l.urlParams=a,l.errorHandler=rX(t),l}function lX(e,t,i){var n=GK(t.fullServerUrl()),r=e.maxOperationRetryTime,a=new tX(n,"GET",function(e,t){return function(i,n){var r=QK(e,n,t);return iX(null!==r),function(e,t){var i=qK(t);if(null===i)return null;if(!DK(i.downloadTokens))return null;var n=i.downloadTokens;if(0===n.length)return null;var r=encodeURIComponent;return n.split(",").map((function(t){var i=e.fullPath;return GK("/b/"+r(e.bucket)+"/o/"+r(i))+YK({alt:"media",token:t})}))[0]}(r,n)}}(e,i),r);return a.errorHandler=aX(t),a}function cX(e,t,i,n){var r=GK(t.fullServerUrl()),a=ZK(i,n),o=e.maxOperationRetryTime,s=new tX(r,"PATCH",nX(e,n),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=aX(t),s}function uX(e,t){var i=GK(t.fullServerUrl()),n=new tX(i,"DELETE",(function(e,t){}),e.maxOperationRetryTime);return n.successCodes=[200,204],n.errorHandler=aX(t),n}function hX(e,t,i){var n=Object.assign({},i);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),n}var dX=function(e,t,i,n){this.current=e,this.total=t,this.finalized=!!i,this.metadata=n||null};function pX(t,i){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(e){iX(!1)}return iX(!!n&&-1!==(i||["active"]).indexOf(n)),n}var fX=function(e,t,i){if(OK(e)||TK(t)||TK(i))this.next=e,this.error=t||null,this.complete=i||null;else{var n=e;this.next=n.next||null,this.error=n.error||null,this.complete=n.complete||null}},vX=function(e,t,i,n,r,a){this.bytesTransferred=e,this.totalBytes=t,this.state=i,this.metadata=n,this.task=r,this.ref=a};function mX(t,i,n){for(var r=i.length,a=i.length,o=0;o<i.length;o++)if(i[o].optional){r=o;break}if(!(r<=n.length&&n.length<=a))throw(s=r)===(l=a)?(c=s,u=1===s?"argument":"arguments"):(c="between "+s+" and "+l,u="arguments"),new oK("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+c+" "+u+", received "+n.length+".");var s,l,c,u;for(o=0;o<n.length;o++)try{i[o].validator(n[o])}catch(e){throw e instanceof Error?dK(o,t,e.message):dK(o,t,e)}}var gX=function(e,t){var i=this;this.validator=function(t){i.optional&&!AK(t)||e(t)},this.optional=!!t};function yX(e,t){function i(e){if(!DK(e))throw"Expected string."}var n,r,a;return e?(r=i,a=e,n=function(e){r(e),a(e)}):n=i,new gX(n,t)}function bX(){return new gX((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||LK()&&e instanceof Blob))throw"Expected Blob or File."}))}function kX(e){return new gX($K,e)}function CX(e){return new gX(eX,e)}function wX(){return new gX((function(e){if(!(PK(e)&&e>=0))throw"Expected a number 0 or greater."}))}function _X(e,t){return new gX((function(t){if(!(null===t||TK(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function SX(e){return new gX((function(e){if(null!==e&&!OK(e))throw"Expected a Function."}),e)}function EX(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var TX,AX,OX=function(){function t(e,t,i,n,r,a){var o=this;void 0===a&&(a=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.service_=t,this.location_=i,this.blob_=r,this.metadata_=a,this.mappings_=n,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(e){o.request_=null,o.chunkMultiplier_=1,e.codeEquals("canceled")?(o.needToFetchStatus_=!0,o.completeTransitions_()):(o.error_=e,o.transition_("error"))},this.metadataErrorHandler_=function(e){o.request_=null,e.codeEquals("canceled")?o.completeTransitions_():(o.error_=e,o.transition_("error"))},this.promise_=new Promise((function(e,t){o.resolve_=e,o.reject_=t,o.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(i){return e.updateProgress_(t+i)}},t.prototype.shouldDoResumable_=function(e){return e.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var t=this;this.service_.getAuthToken().then((function(i){switch(t.state_){case"running":e(i);break;case"canceling":t.transition_("canceled");break;case"pausing":t.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(i){var n=function(t,i,n,r,a){var o=i.bucketOnlyServerUrl(),s=hX(i,r,a),l={name:s.fullPath},c=GK(o),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=ZK(s,n),d=new tX(c,"POST",(function(t){var i;pX(t);try{i=t.getResponseHeader("X-Goog-Upload-URL")}catch(e){iX(!1)}return iX(DK(i)),i}),t.maxUploadRetryTime);return d.urlParams=l,d.headers=u,d.body=h,d.errorHandler=rX(i),d}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,i);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,i=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,i,n,r){var a=new tX(n,"POST",(function(t){var i=pX(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){iX(!1)}n||iX(!1);var a=Number(n);return iX(!isNaN(a)),new dX(a,r.size(),"final"===i)}),t.maxUploadRetryTime);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=rX(i),a}(t.service_,t.location_,i,t.blob_),a=t.service_.makeRequest(r,n);t.request_=a,a.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,i=262144*this.chunkMultiplier_,n=new dX(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(a){var o;try{o=function(e,t,i,n,r,a,o,s){var l=new dX(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=n.size()),n.size()!==l.total)throw new oK("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=l.total-l.current,u=c;r>0&&(u=Math.min(u,r));var h=l.current,d={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},p=n.slice(h,h+u);if(null===p)throw uK();var f=new tX(i,"POST",(function(e,i){var r,o=pX(e,["active","final"]),s=l.current+u,c=n.size();return r="final"===o?nX(t,a)(e,i):null,new dX(s,c,"final"===o,r)}),t.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=s||null,f.errorHandler=rX(e),f}(t.location_,t.service_,r,t.blob_,i,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_("error")}var s=t.service_.makeRequest(o,a);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var i=oX(e.service_,e.location_,e.mappings_),n=e.service_.makeRequest(i,t);e.request_=n,n.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_("success")}),e.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var i=function(e,t,i,n,r){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var l=hX(t,n,r),c=ZK(l,i),u=HK.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",n,"\r\n--"+s+"--");if(null===u)throw uK();var h={name:l.fullPath},d=GK(a),p=e.maxUploadRetryTime,f=new tX(d,"POST",nX(e,i),p);return f.urlParams=h,f.headers=o,f.body=u.uploadData(),f.errorHandler=rX(t),f}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),n=e.service_.makeRequest(i,t);e.request_=n,n.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_("success")}),e.errorHandler_)}))},t.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},t.prototype.transition_=function(e){if(this.state_!==e)switch(e){case"canceling":case"pausing":this.state_=e,null!==this.request_&&this.request_.cancel();break;case"running":var t="paused"===this.state_;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=e,this.notifyObservers_();break;case"canceled":this.error_=cK(),this.state_=e,this.notifyObservers_();break;case"error":case"success":this.state_=e,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var e=EK(this.state_);return new vX(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,i,n,r){function a(){if(t!==_K.STATE_CHANGED)throw"Expected one of the event types: ["+_K.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=SX(!0).validator,l=_X(null,!0).validator;function c(t){try{return void s(t)}catch(e){}try{if(l(t),!(AK(t.next)||AK(t.error)||AK(t.complete)))throw"";return}catch(e){throw o}}var u=[yX(a),_X(c,!0),SX(!0),SX(!0)];mX("on",u,arguments);var h=this;function d(e){return function(t,i,n){null!==e&&mX("on",e,arguments);var a=new fX(t,i,r);return h.addObserver_(a),function(){h.removeObserver_(a)}}}function p(e){if(null===e)throw o;c(e)}var f=[_X(p),SX(!0),SX(!0)],v=!(AK(i)||AK(n)||AK(r));return v?d(f):d(null)(i,n,r)},t.prototype.then=function(e,t){return this.promise_.then(e,t)},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},t.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},t.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach((function(t){e.notifyObserver_(t)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(EK(this.state_)){case SK.SUCCESS:EX(this.resolve_.bind(null,this.snapshot))();break;case SK.CANCELED:case SK.ERROR:EX(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(e){switch(EK(this.state_)){case SK.RUNNING:case SK.PAUSED:e.next&&EX(e.next.bind(e,this.snapshot))();break;case SK.SUCCESS:e.complete&&EX(e.complete.bind(e))();break;case SK.CANCELED:case SK.ERROR:e.error&&EX(e.error.bind(e,this.error_))();break;default:e.error&&EX(e.error.bind(e,this.error_))()}},t.prototype.resume=function(){mX("resume",[],arguments);var e="paused"===this.state_||"pausing"===this.state_;return e&&this.transition_("running"),e},t.prototype.pause=function(){mX("pause",[],arguments);var e="running"===this.state_;return e&&this.transition_("pausing"),e},t.prototype.cancel=function(){mX("cancel",[],arguments);var e="running"===this.state_||"pausing"===this.state_;return e&&this.transition_("canceling"),e},t}(),xX=function(){function e(e,t){this.service=e,this.location=t instanceof UK?t:UK.makeFromUrl(t)}return e.prototype.toString=function(){return mX("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,i){return new e(t,i)},e.prototype.mappings=function(){return function(){if(JK)return JK;var e=[];e.push(new XK("bucket")),e.push(new XK("generation")),e.push(new XK("metageneration")),e.push(new XK("name","fullPath",!0));var t=new XK("name");t.xform=function(e,t){return function(e){return!DK(e)||e.length<2?e:zK(e)}(t)},e.push(t);var i=new XK("size");return i.xform=function(e,t){return TK(t)?Number(t):t},e.push(i),e.push(new XK("timeCreated")),e.push(new XK("updated")),e.push(new XK("md5Hash",null,!0)),e.push(new XK("cacheControl",null,!0)),e.push(new XK("contentDisposition",null,!0)),e.push(new XK("contentEncoding",null,!0)),e.push(new XK("contentLanguage",null,!0)),e.push(new XK("contentType",null,!0)),e.push(new XK("metadata","customMetadata",!0)),JK=e}()},e.prototype.child=function(e){mX("child",[yX()],arguments);var t=WK(this.location.path,e),i=new UK(this.location.bucket,t);return this.newRef(this.service,i)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new UK(this.location.bucket,e);return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new UK(this.location.bucket,"");return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return zK(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),mX("put",[bX(),kX(!0)],arguments),this.throwIfRoot_("put"),new OX(this,this.service,this.location,this.mappings(),new HK(e),t)},e.prototype.putString=function(e,t,i){void 0===t&&(t=mK.RAW),mX("putString",[yX(),yX(gK,!0),kX(!0)],arguments),this.throwIfRoot_("putString");var n=bK(t,e),r=Object.assign({},i);return!TK(r.contentType)&&TK(n.contentType)&&(r.contentType=n.contentType),new OX(this,this.service,this.location,this.mappings(),new HK(n.data,!0),r)},e.prototype.delete=function(){var e=this;return mX("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(t){var i=uX(e.service,e.location);return e.service.makeRequest(i,t).getPromise()}))},e.prototype.listAll=function(){mX("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then((function(){return e}))},e.prototype.listAllHelper=function(e,t){return Object(rK.__awaiter)(this,void 0,void 0,(function(){var i,n,r;return Object(rK.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.list({pageToken:t})];case 1:return i=a.sent(),(n=e.prefixes).push.apply(n,i.prefixes),(r=e.items).push.apply(r,i.items),null==i.nextPageToken?[3,3]:[4,this.listAllHelper(e,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.list=function(e){mX("list",[CX(!0)],arguments);var t=this;return this.service.getAuthToken().then((function(i){var n=e||{},r=sX(t.service,t.location,"/",n.pageToken,n.maxResults);return t.service.makeRequest(r,i).getPromise()}))},e.prototype.getMetadata=function(){var e=this;return mX("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(t){var i=oX(e.service,e.location,e.mappings());return e.service.makeRequest(i,t).getPromise()}))},e.prototype.updateMetadata=function(e){var t=this;return mX("updateMetadata",[kX()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(i){var n=cX(t.service,t.location,e,t.mappings());return t.service.makeRequest(n,i).getPromise()}))},e.prototype.getDownloadURL=function(){var e=this;return mX("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(t){var i=lX(e.service,e.location,e.mappings());return e.service.makeRequest(i,t).getPromise().then((function(e){if(null===e)throw hK();return e}))}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new oK("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),IX=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),DX=function(){function t(e,t,i,n,r,a,o,s,l,c,u){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=i,this.body_=n,this.successCodes_=r.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=o,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=l,this.pool_=u,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return t.prototype.start_=function(){var t=this;function i(i,n){var r,a=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var l=t.callback_(s,s.getResponseText());AK(l)?a(l):a()}catch(e){o(e)}else null!==s?((r=lK()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?pK():cK():new oK("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?i(0,new RX(!1,null,!0)):this.backoffId_=function(e,i,n){var r=1,a=null,o=!1,s=0;function l(){return 2===s}var c=!1;function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c||(c=!0,i.apply(null,e))}function h(e){a=setTimeout((function(){a=null,function(e,i){if(i)e(!1,new RX(!1,null,!0));else{var n=t.pool_.createXhrIo();t.pendingXhr_=n,null!==t.progressCallback_&&n.addUploadProgressListener(r),n.send(t.url_,t.method_,t.body_,t.headers_).then((function(i){null!==t.progressCallback_&&i.removeUploadProgressListener(r),t.pendingXhr_=null;var n=(i=i).getErrorCode()===NK.NO_ERROR,a=i.getStatus();if(n&&!t.isRetryStatusCode_(a)){var o=-1!==t.successCodes_.indexOf(a);e(!0,new RX(o,i))}else{var s=i.getErrorCode()===NK.ABORT;e(!1,new RX(!1,null,s))}}))}function r(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,l())}),e)}function d(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!c)if(e)u.call.apply(u,Object(rK.__spreadArrays)([null,e],t));else{var n,a=l()||o;a?u.call.apply(u,Object(rK.__spreadArrays)([null,e],t)):(r<64&&(r*=2),1===s?(s=2,n=0):n=1e3*(r+Math.random()),h(n))}}var p=!1;function f(e){p||(p=!0,c||(null!==a?(e||(s=2),clearTimeout(a),h(0)):e||(s=1)))}return h(0),setTimeout((function(){o=!0,f(!0)}),n),f}(0,i,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),n=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||n},t}(),RX=function(e,t,i){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!i},PX=function(){function t(e,i,n,r){var a;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?UK.makeFromBucketSpec(r):t.extractBucket_(null===(a=this.app_)||void 0===a?void 0:a.options),this.internals_=new MX(this)}return t.extractBucket_=function(e){var t=null==e?void 0:e.storageBucket;return null==t?null:UK.makeFromBucketSpec(t)},t.prototype.getAuthToken=function(){return Object(rK.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(rK.__generator)(this,(function(i){switch(i.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=i.sent()))return[2,t.accessToken];i.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(e){return e.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(e){return new xX(this,e)},t.prototype.makeRequest=function(e,t){var i=this;if(this.deleted_)return new IX(pK());var n=function(e,t,i,n){var r=YK(e.urlParams),a=e.url+r,o=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(o,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(o,i),function(e){e["X-Firebase-Storage-Version"]="webjs/"+(void 0!==nK.a?nK.a.SDK_VERSION:"AppManager")}(o),new DX(a,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}(e,this.appId_,t,this.pool_);return this.requests_.add(n),n.getPromise().then((function(){return i.requests_.delete(n)}),(function(){return i.requests_.delete(n)})),n},t.prototype.ref=function(e){function t(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(mX("ref",[yX(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var i=new xX(this,this.bucket_);return null!=e?i.child(e):i},t.prototype.refFromURL=function(t){function i(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{UK.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return mX("refFromURL",[yX(i,!1)],arguments),new xX(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(e){mX("setMaxUploadRetryTime",[wX()],arguments),this.maxUploadRetryTime_=e},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(e){mX("setMaxOperationRetryTime",[wX()],arguments),this.maxOperationRetryTime_=e},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),MX=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},e}();function LX(e){var t=function(e){return new _((function(t){return e.on("state_changed",(function(e){return t.next(e)}),(function(e){return t.error(e)}),(function(){return t.complete()})),function(){return e.cancel()}}))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:function(){return t},percentageChanges:function(){return t.pipe(j((function(e){return e.bytesTransferred/e.totalBytes*100})))}}}function NX(e,t,i){return{getDownloadURL:function(){return Gd(void 0).pipe(Gk(t.outsideAngular),Ap((function(){return e.getDownloadURL()})),i)},getMetadata:function(){return Gd(void 0).pipe(Gk(t.outsideAngular),Ap((function(){return e.getMetadata()})),i)},delete:function(){return W(e.delete())},child:function(n){return NX(e.child(n),t,i)},updateMetadata:function(t){return W(e.updateMetadata(t))},put:function(t,i){return LX(e.put(t,i))},putString:function(t,i,n){return LX(e.putString(t,i,n))},listAll:function(){return W(e.listAll())}}}AX={TaskState:SK,TaskEvent:_K,StringFormat:mK,Storage:PX,Reference:xX},(TX=nK.a).INTERNAL.registerComponent(new aK.Component("storage",(function(e,t){var i=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal");return new PX(i,n,new BK,t)}),"PUBLIC").setServiceProps(AX).setMultipleInstances(!0)),TX.registerVersion("@firebase/storage","0.3.43");var FX,BX,VX,jX,HX=new qe("angularfire2.storageBucket"),UX=((jX=function(){function e(t,i,n,r,a){var o;_classCallCheck2(this,e),this.schedulers=new KY(a),this.keepUnstableUntilFirst=(o=this.schedulers,function(e){return(e=e.lift(new YY(o.ngZone))).pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(i){return i.lift(new qY(e,t))}}(o.outsideAngular),Gk(o.insideAngular))}),this.storage=a.runOutsideAngular((function(){return ZY(t,a,i).storage(n||void 0)}))}return _createClass(e,[{key:"ref",value:function(e){return NX(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst)}},{key:"upload",value:function(e,t,i){return NX(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst).put(t,i)}}]),e}()).\u0275fac=function(e){return new(e||jX)(Ze(XY),Ze(JY,8),Ze(HX,8),Ze(Oc),Ze(Wc))},jX.\u0275prov=pe({factory:function(){return new jX(Ze(XY),Ze(JY,8),Ze(HX,8),Ze(Oc),Ze(Wc))},token:jX,providedIn:"any"}),jX),qX=((VX=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:VX}),VX.\u0275inj=ve({factory:function(e){return new(e||VX)},providers:[UX]}),VX),WX=((BX=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"validate",value:function(e){if(null==e.value)return null;var t=e.value.split("-"),i=parseInt(t[0]),n=(new Date).getFullYear()-6,r=(new Date).getFullYear()-70;return i<n&&i>r?null:{invalidDob:!0}}}]),e}()).\u0275fac=function(e){return new(e||BX)},BX.\u0275dir=_t({type:BX,selectors:[["","dobValidator",""]],features:[Xs([{provide:dg,useExisting:BX,multi:!0}])]}),BX),zX=((FX=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||FX)},FX.\u0275cmp=gt({type:FX,selectors:[["app-loader"]],decls:5,vars:0,consts:[[1,"lds-ellipsis"]],template:function(e,t){1&e&&(jo(0,"div",0),Uo(1,"div"),Uo(2,"div"),Uo(3,"div"),Uo(4,"div"),Ho())},styles:[".lds-ellipsis[_ngcontent-%COMP%]{display:inline-block;position:relative;width:20px;height:80px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:15px;width:10px;height:10px;border-radius:50%;background:#1f22bb;-webkit-animation-timing-function:cubic-bezier(0,1,1,0);animation-timing-function:cubic-bezier(0,1,1,0)}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{left:4px;-webkit-animation:lds-ellipsis1 .6s infinite;animation:lds-ellipsis1 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:4px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2), .lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation:lds-ellipsis2 .6s infinite;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:16px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:32px;-webkit-animation:lds-ellipsis3 .6s infinite;animation:lds-ellipsis3 .6s infinite}@-webkit-keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@-webkit-keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@-webkit-keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(20px)}}@keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(20px)}}"]}),FX),GX=["basicProfile"];function YX(e,t){1&e&&(jo(0,"span"),Ss(1,"Upload"),Ho())}function KX(e,t){1&e&&(jo(0,"div",80),Uo(1,"img",81),Ho())}function XX(e,t){1&e&&(jo(0,"span",82),Uo(1,"app-loader"),Ho())}function JX(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid Name"),Ho())}function QX(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid dob"),Ho())}function ZX(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid contact"),Ho())}function $X(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid professional skills"),Ho())}function eJ(e,t){1&e&&(jo(0,"div",84),Ss(1," Educational Qualification already exists ! "),Ho())}function tJ(e,t){if(1&e){var i=zo();jo(0,"div",85),jo(1,"div",86),Ss(2),Ho(),jo(3,"button",87),Ko("click",(function(){ti(i);var e=t.index;return $o().deleteEducation(e)})),Uo(4,"i",88),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Es(n)}}function iJ(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid Institute"),Ho())}function nJ(e,t){if(1&e&&(jo(0,"option",89),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i.category),_r(1),Ts(" ",i.category," ")}}function rJ(e,t){if(1&e&&(jo(0,"option",89),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i.subCategory),_r(1),Ts(" ",i.subCategory," ")}}function aJ(e,t){if(1&e){var i=zo();jo(0,"div",85),jo(1,"div",86),Ss(2),Ho(),jo(3,"button",87),Ko("click",(function(){ti(i);var e=t.index;return $o().deleteExpertise(e)})),Uo(4,"i",88),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Os(" ",n.category," : ",n.subCategory," \xa0 - \xa0 \u20b9 ",n.price,"/hr ")}}function oJ(e,t){1&e&&(jo(0,"div",84),Ss(1," Expertise already exists ! "),Ho())}function sJ(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid years of experience"),Ho())}function lJ(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid current organisation"),Ho())}function cJ(e,t){1&e&&(jo(0,"div",84),Ss(1," Organisation already exists ! "),Ho())}function uJ(e,t){if(1&e){var i=zo();jo(0,"div",85),jo(1,"div",86),Ss(2),Ho(),jo(3,"button",87),Ko("click",(function(){ti(i);var e=t.index;return $o().deleteOrganisation(e)})),Uo(4,"i",88),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Es(n)}}function hJ(e,t){1&e&&(jo(0,"span",83),Ss(1,"Invalid Link"),Ho())}var dJ,pJ=((dJ=function(){function e(t,i,n,r,a,o,s){_classCallCheck2(this,e),this.cookieService=t,this.tutorService=i,this.httpService=n,this.firebaseStorage=r,this.snackBar=a,this.matDialog=o,this.router=s,this.addExpertise=new pb,this.basic=!0,this.myControl=new xy,this.isLoading3=!1,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},this.options=[],this.expertises=[],this.educationQualifications=[],this.previousOraganisations=[],this.tutorProfile=new ub,this.tutorProfileDetails=new db,this.profilePictureUrl="../../../assets/images/default-user-image.png",this.uploadedProfilePicture=null,this.categories=[],this.subCategories=[],this.fillOptions()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getAllCategories(),this.filteredOptions=this.myControl.valueChanges.pipe(Dp(""),j((function(t){return e._filter(t)}))),this.tutorService.getTutorProfileDetails().profileCompleted?(this.tutorProfile=this.tutorService.getTutorDetials(),this.tutorProfileDetails=this.tutorService.getTutorProfileDetails(),null!=this.tutorProfileDetails.educationalQualifications&&(this.educationQualifications=this.tutorProfileDetails.educationalQualifications),null!=this.tutorProfileDetails.areaOfExpertise&&(this.expertises=this.tutorProfileDetails.areaOfExpertise),null!=this.tutorProfileDetails.previousOrganisations&&(this.previousOraganisations=this.tutorProfileDetails.previousOrganisations),null!=this.tutorProfileDetails.profilePictureUrl&&(this.profilePictureUrl=this.tutorProfileDetails.profilePictureUrl)):setTimeout((function(){e.tutorProfile=e.tutorService.getTutorDetials(),e.tutorProfileDetails=e.tutorService.getTutorProfileDetails(),null!=e.tutorProfileDetails.educationalQualifications&&(e.educationQualifications=e.tutorProfileDetails.educationalQualifications),null!=e.tutorProfileDetails.areaOfExpertise&&(e.expertises=e.tutorProfileDetails.areaOfExpertise),null!=e.tutorProfileDetails.previousOrganisations&&(e.previousOraganisations=e.tutorProfileDetails.previousOrganisations),null!=e.tutorProfileDetails.profilePictureUrl&&(e.profilePictureUrl=e.tutorProfileDetails.profilePictureUrl)}),1e3)}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.options.filter((function(e){return e.toLowerCase().includes(t)}))}},{key:"fillOptions",value:function(){var e=this;this.httpService.getAllSubCategories().subscribe((function(t){if(e.subCategories=t,e.subCategories.length>0)for(var i=0;i<e.subCategories.length;i++)e.options.push(e.subCategories[i].subCategory)}))}},{key:"filterSCfromCateg",value:function(){var e=this;return this.subCategories.filter((function(t){return t.category==e.selectedCategory}))}},{key:"getAllCategories",value:function(){var e=this;this.httpService.getAllCategories().subscribe((function(t){var i=t;if(i.length>0)for(var n=0;n<i.length;n++){var r=new HY;r.category=i[n].category,e.categories.push(r)}e.httpService.getAllSubCategories().subscribe((function(t){e.subCategories=t})),console.log(e.categories)}))}},{key:"saveExpertBasicProfile",value:function(e){var t=this;this.userId=this.cookieService.get("userId"),this.userId&&(this.tutorProfile.tid=this.userId,this.tutorProfile.contact=e.value.contact,this.tutorProfile.dateOfBirth=e.value.dob,this.tutorProfile.fullName=e.value.fullName,this.tutorProfile.bookingId=this.tutorService.getTutorDetials().bookingId,this.tutorProfile.profilePictureUrl=this.profilePictureUrl,this.tutorProfileDetails.tid=this.userId,this.tutorProfileDetails.educationalQualifications=this.educationQualifications,this.tutorProfileDetails.professionalSkills=e.value.professionalSkills,this.tutorProfileDetails.fullName=this.tutorProfile.fullName,this.tutorProfileDetails.profilePictureUrl=this.profilePictureUrl,this.tutorProfileDetails.bookingId=this.tutorProfile.bookingId,this.httpService.updateTutorProfile(this.tutorProfile).subscribe((function(e){t.tutorService.setTutorDetails(t.tutorProfile),t.httpService.updateTutorProfileDetails(t.tutorProfileDetails).subscribe((function(){t.tutorProfileDetails.profileCompleted<50&&(t.tutorProfileDetails.profileCompleted=50),t.tutorService.setTutorProfileDetails(t.tutorProfileDetails),t.snackBar.open("Information saved Successfully !","close",t.config),t.advancedProfileToggle()}))})))}},{key:"saveExpertAdvancedProfile",value:function(e){var t=this;this.tutorProfileDetails.profileCompleted>=50&&(this.userId=this.cookieService.get("userId"),this.userId&&this.expertises.length>0?(this.tutorProfileDetails.institute=e.value.Institute,this.tutorProfileDetails.areaOfExpertise=this.expertises,this.tutorProfileDetails.linkedInProfile=e.value.linkedInProfile,this.tutorProfileDetails.yearsOfExperience=e.value.yearsOfExperience,this.tutorProfileDetails.currentOrganisation=e.value.currentOrganisation,this.tutorProfileDetails.previousOrganisations=this.previousOraganisations,this.tutorProfileDetails.description=e.value.description,this.tutorProfileDetails.speciality=e.value.speciality,this.tutorProfileDetails.bookingId=this.tutorService.getTutorProfileDetails().bookingId,50==this.tutorProfileDetails.profileCompleted&&(this.tutorProfileDetails.profileCompleted=100),console.log("informations saved",this.tutorProfileDetails),this.httpService.updateTutorProfileDetails(this.tutorProfileDetails).subscribe((function(e){t.tutorService.setTutorProfileDetails(t.tutorProfileDetails),t.snackBar.open("Information saved Successfully !","close",t.config),t.router.navigate(["/home/tutorDashboard"])}))):this.errorText="Enter atleast one area of Expertise !")}},{key:"cancelForm",value:function(){location.reload()}},{key:"duplicacyCheck",value:function(e,t){return e.includes(t)}},{key:"expertiseDuplicacyCheck",value:function(e,t){var i,n=_createForOfIteratorHelper(this.expertises);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.category==e&&r.subCategory==t)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"profilePictureChange",value:function(e){var t=this;this.uploadedProfilePicture=e.target.files[0],this.isLoading3=!0,this.uploadedProfilePicture=e.target.files[0];var i=new FileReader;e.target.files&&e.target.files.length&&(this.uploadedProfilePicture=e.target.files[0],i.readAsDataURL(this.uploadedProfilePicture),i.onload=function(){t.openDialog(i.result)})}},{key:"openDialog",value:function(e){var t=this,i=new kT;i.disableClose=!0,i.data={image:this.uploadedProfilePicture,imageSrc:e},this.matDialog.open(jY,i).afterClosed().subscribe((function(e){var i=t.b64toBlob(e,t.uploadedProfilePicture.type),n=new File([i],t.uploadedProfilePicture.name,{type:t.uploadedProfilePicture.type,lastModified:Date.now()});t.uploadedProfilePicture=n,t.uploadProfilePicture()}))}},{key:"b64toBlob",value:function(e,t){for(var i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),r=new Uint8Array(n),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);return new Blob([n],{type:t})}},{key:"profilePictureChangeCompleted",value:function(e){var t=this;this.uploadedProfilePicture=e.target.files[0];var i="tutor_profile_picture/".concat(this.uploadedProfilePicture,"_").concat((new Date).getTime()),n=this.firebaseStorage.ref(i);this.firebaseStorage.upload(i,this.uploadedProfilePicture).snapshotChanges().pipe(Hp((function(){n.getDownloadURL().subscribe((function(e){var i=t.tutorService.getTutorProfileDetails();t.profilePictureUrl=e,i.profilePictureUrl=t.profilePictureUrl,t.httpService.editTutorProfileDetails(i).subscribe((function(e){var i=t.tutorService.getTutorDetials();i.profilePictureUrl=t.profilePictureUrl,t.httpService.editBasicProfile(i).subscribe((function(e){t.tutorProfile.profilePictureUrl=t.profilePictureUrl,t.snackBar.open("Image Uploaded successfully","close",t.config)}))}))}))}))).subscribe()}},{key:"uploadProfilePicture",value:function(){var e=this,t="tutor_profile_picture/".concat(this.uploadedProfilePicture,"_").concat((new Date).getTime()),i=this.firebaseStorage.ref(t);this.firebaseStorage.upload(t,this.uploadedProfilePicture).snapshotChanges().pipe(Hp((function(){i.getDownloadURL().subscribe((function(t){e.profilePicUploadStatus=!0,e.isLoading3=!1,e.profilePictureUrl=t,e.snackBar.open("Image Uploaded successfully","close",e.config)}))}))).subscribe()}},{key:"basicProfileToggle",value:function(){this.basic=!0}},{key:"advancedProfileToggle",value:function(){this.tutorService.tutorProfileDetails.profileCompleted<50?this.profileError="Complete basic profile first !":this.basic=!1}},{key:"findSubCategory",value:function(e){if(!e)return null;console.log("selected subcategory",this.selectedSubCategory);for(var t=0;t<this.subCategories.length;t++)if(this.subCategories[t].subCategory==e)return this.subCategories[t].category}},{key:"saveExpertise",value:function(){this.addExpertise=new pb,this.expertiseDuplicacyCheck(this.selectedCategory,this.selectedSubCategory)?(this.duplicateExpertiseArea=!0,this.selectedExpertise="",this.selectedSubCategory="",this.priceForExpertise=""):(this.addExpertise.category=this.selectedCategory,this.addExpertise.subCategory=this.selectedSubCategory,this.addExpertise.price=this.priceForExpertise,this.expertises.push(this.addExpertise),this.selectedCategory="",this.selectedSubCategory="",this.priceForExpertise="",1==this.duplicateExpertiseArea&&(this.duplicateExpertiseArea=!1))}},{key:"deleteExpertise",value:function(e){var t=this.expertises[e];confirm("Are you sure you want to delete ?")&&(this.httpService.subtractArea(this.tutorProfile.tid,"Expert",t.subCategory).subscribe(),this.expertises.splice(e,1))}},{key:"addOrganisation",value:function(){this.duplicacyCheck(this.previousOraganisations,this.inputOrganisation)?(this.inputOrganisation="",this.duplicatePreviousOrganisation=!0):(this.previousOraganisations.push(this.inputOrganisation),this.inputOrganisation="",1==this.duplicatePreviousOrganisation&&(this.duplicatePreviousOrganisation=!1))}},{key:"deleteOrganisation",value:function(e){this.previousOraganisations.splice(e,1)}},{key:"addEducation",value:function(){this.duplicacyCheck(this.educationQualifications,this.inputEducation)?(this.inputEducation="",this.duplicateEducationArea=!0):(this.educationQualifications.push(this.inputEducation),this.inputEducation="",1==this.duplicateEducationArea&&(this.duplicateEducationArea=!1))}},{key:"deleteEducation",value:function(e){this.educationQualifications.splice(e,1)}}]),e}()).\u0275fac=function(e){return new(e||dJ)(Lo(BT),Lo(ck),Lo(lk),Lo(UX),Lo(rI),Lo(LT),Lo(cm))},dJ.\u0275cmp=gt({type:dJ,selectors:[["app-profile"]],viewQuery:function(e,t){var i;1&e&&pc(GX,!0),2&e&&hc(i=yc())&&(t.basicProfile=i.first)},decls:169,vars:62,consts:[[1,"container",2,"margin-bottom","50px"],[1,"row"],[1,"col-md-6"],[2,"margin","10px"],[2,"color","#e3165b","font-size","x-large","margin-right","40px","display","inline"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],[2,"width","130px","height","130px","border-radius","100%","border","1px solid black",3,"src"],[1,"form-group"],["hidden","true","type","file","onclick","this.value=null","required","",3,"change"],["profilePicture",""],[1,"btn","btn-primary",2,"margin-top","5px","width","140px","position","relative","height","30px",3,"click"],[4,"ngIf"],["class","tickMark",4,"ngIf"],["class","loader","style","text-align: center; z-index: 10",4,"ngIf"],[1,"col-md-3",2,"text-align","end","margin","20px"],[1,"btn",2,"margin-right","2vw","text-decoration","underline","width","auto",3,"click"],["type","submit",1,"btn",2,"padding","1vh 2vw","background-color","purple","color","white","width","auto","font-size","small",3,"disabled","click"],[2,"padding-bottom","10px","font-size","12px","font-weight","600"],[2,"color","red","padding-bottom","10px","font-size","15px"],[1,"col-md-6","leftBox"],[3,"ngSubmit"],["basicProfile","ngForm"],["for","fullName"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control","input-fields",3,"ngModel"],["fullName","ngModel"],["class","help-block",4,"ngIf"],["for","dob"],["type","date","id","dob","name","dob","ngModel","","dobValidator","","required","",1,"form-control","input-fields",3,"ngModel"],["dob","ngModel"],["for","contact"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control","input-fields",3,"ngModel","pattern"],["contact","ngModel"],["for","professionalSkills"],["type","text","id","professionalSkills","ngModel","","name","professionalSkills",1,"form-control","input-fields",3,"ngModel"],["professionalSkills","ngModel"],[1,"col-md-5"],["type","search","name","search","placeholder","Enter Qualification ",1,"form-control","input-fields",2,"display","inline","width","80%","margin-right","5px",3,"ngModel","ngModelChange"],[2,"width","max-content","display","inline"],["type","submit",1,"btn","btn-success","btn-circle","btn-sm",2,"font-size","inherit","display","inline",3,"disabled","click"],[1,"fas","fa-plus"],["style","color: red; margin-top: 10px",4,"ngIf"],["style","margin: 10px; margin-left: 0",4,"ngFor","ngForOf"],["advancedProfile","ngForm"],[1,"col-md-5","leftBox"],["for","Institute"],["type","text","id","Institute","name","Institute","ngModel","","required","","maxlength","50","autofocus","",1,"form-control","input-fields",3,"ngModel"],["Institute","ngModel"],["for","expertise",2,"width","100%"],[2,"position","relative"],[2,"width","80%","display","inline-block","background","white","padding","10px","box-shadow","0px 0px 4px rgb(199, 203, 217, 0.7)"],[1,"form-group",2,"margin-bottom","0.5rem"],["for","chooseCategory"],["id","chooseCategory","name","categoryName","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","subCategoryInput"],["id","chooseSubCategory","name","subCategoryName","ngModel","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"form-group",2,"margin-bottom","0"],["type","number","name","price","placeholder","Enter price per hour",1,"form-control",3,"ngModel","ngModelChange"],[2,"width","max-content","display","inline","margin-left","5px","position","absolute","top","40px"],["type","button",1,"btn","btn-success","btn-circle","btn-sm",2,"font-size","inherit","display","inline",3,"disabled","click"],[1,"errorMessage"],["for","description"],["id","description","rows","3","name","description","maxlength","250","placeholder","Enter your Description text","required","",1,"form-control",2,"padding-top","10px",3,"ngModel"],["tutorProfileDescription",""],[1,"setLength"],["for","speciality"],["id","speciality","rows","3","name","speciality","maxlength","250","placeholder","Enter your Speciality text","required","",1,"form-control",3,"ngModel"],["tutorProfileSpeciality",""],["for","yearsOfExperience"],["type","number","id","yearsOfExperience","name","yearsOfExperience","ngModel","",1,"form-control","input-fields",3,"ngModel"],["yearsOfExperience","ngModel"],["for","currentOrganisation"],["type","text","id","currentOrganisation","name","currentOrganisation","ngModel","","maxlength","50",1,"form-control","input-fields",3,"ngModel"],["currentOrganisation","ngModel"],["for","expertise"],["type","search","name","search","placeholder","Enter organisation name",1,"form-control","input-fields",2,"display","inline","width","80%","margin-right","5px",3,"ngModel","ngModelChange"],["for","linkedInProfile"],["type","text","id","linkedInProfile","name","linkedInProfile","ngModel","",1,"form-control","input-fields",3,"ngModel"],["linkedInProfile","ngModel"],[1,"tickMark"],["src","../../../assets/icons/tick.png",1,"tickMarkImg"],[1,"loader",2,"text-align","center","z-index","10"],[1,"help-block"],[2,"color","red","margin-top","10px"],[2,"margin","10px","margin-left","0"],[1,"tags"],["type","button",1,"btn","btn-danger","btn-circle","btn-sm",2,"font-size","inherit",3,"click"],[1,"fas","fa-minus"],[3,"value"]],template:function(e,t){if(1&e){var i=zo();jo(0,"body"),jo(1,"div",0),jo(2,"div",1),jo(3,"div",2),jo(4,"div",3),jo(5,"p",4),jo(6,"b"),Ss(7,"PROFILE"),Ho(),Ho(),jo(8,"div",5),jo(9,"button",6),Ko("click",(function(){return t.basicProfileToggle()})),Ss(10," Basic "),Ho(),jo(11,"button",6),Ko("click",(function(){return t.advancedProfileToggle()})),Ss(12," Advanced "),Ho(),Ho(),Ho(),jo(13,"div"),Uo(14,"img",7),jo(15,"div",8),jo(16,"input",9,10),Ko("change",(function(e){return t.profilePictureChange(e)})),Ho(),jo(18,"button",11),Ko("click",(function(){return ti(i),Mo(17).click()})),Po(19,YX,2,0,"span",12),Po(20,KX,2,0,"div",13),Po(21,XX,2,0,"span",14),Ho(),Ho(),Ho(),Ho(),jo(22,"div",15),jo(23,"button",16),Ko("click",(function(){return t.cancelForm()})),Ss(24," Cancel "),Ho(),jo(25,"button",17),Ko("click",(function(){return ti(i),Mo(39).ngSubmit.emit()})),Ss(26," Save "),Ho(),Ho(),jo(27,"div",15),jo(28,"button",16),Ko("click",(function(){return t.cancelForm()})),Ss(29," Cancel "),Ho(),jo(30,"button",17),Ko("click",(function(){return ti(i),Mo(85).ngSubmit.emit()})),Ss(31," Save "),Ho(),Ho(),Ho(),jo(32,"div",18),Ss(33," The fields marked with * are mandatory "),Ho(),jo(34,"div",19),Ss(35),Ho(),jo(36,"div",1),jo(37,"div",20),jo(38,"form",21,22),Ko("ngSubmit",(function(){ti(i);var e=Mo(39);return t.saveExpertBasicProfile(e)})),jo(40,"div",8),jo(41,"label",23),Ss(42,"Full Name"),jo(43,"sup"),Ss(44,"*"),Ho(),Ho(),Uo(45,"input",24,25),Po(47,JX,2,0,"span",26),Ho(),jo(48,"div",8),jo(49,"label",27),Ss(50,"Date of Birth"),jo(51,"sup"),Ss(52,"*"),Ho(),Ho(),Uo(53,"input",28,29),Po(55,QX,2,0,"span",26),Ho(),jo(56,"div",8),jo(57,"label",30),Ss(58,"Mobile Number"),jo(59,"sup"),Ss(60,"*"),Ho(),Ho(),Uo(61,"input",31,32),Po(63,ZX,2,0,"span",26),Ho(),jo(64,"div",8),jo(65,"label",33),Ss(66,"Professional Skills"),Ho(),Uo(67,"input",34,35),Po(69,$X,2,0,"span",26),Ho(),Ho(),Ho(),jo(70,"div",36),jo(71,"div",8),jo(72,"label"),Ss(73,"Educational Qualifications & Certifications"),Ho(),jo(74,"div"),jo(75,"form"),jo(76,"input",37),Ko("ngModelChange",(function(e){return t.inputEducation=e})),Ho(),jo(77,"div",38),jo(78,"button",39),Ko("click",(function(){return t.addEducation()})),Uo(79,"i",40),Ho(),Ho(),Po(80,eJ,2,0,"div",41),Ho(),Ho(),Po(81,tJ,5,1,"div",42),Ho(),Ho(),Ho(),jo(82,"div"),jo(83,"div"),jo(84,"form",21,43),Ko("ngSubmit",(function(){ti(i);var e=Mo(85);return t.saveExpertAdvancedProfile(e)})),jo(86,"div",1),jo(87,"div",44),jo(88,"div",8),jo(89,"label",45),Ss(90,"Institute"),jo(91,"sup"),Ss(92,"*"),Ho(),Ho(),Uo(93,"input",46,47),Po(95,iJ,2,0,"span",26),Ho(),jo(96,"div",8),jo(97,"label",48),Ss(98,"Area of Expertise"),jo(99,"sup"),Ss(100,"*"),Ho(),Ho(),jo(101,"div",49),jo(102,"div",50),jo(103,"div",51),jo(104,"label",52),Ss(105,"Choose Domain"),Ho(),jo(106,"select",53),Ko("ngModelChange",(function(e){return t.selectedCategory=e})),Po(107,nJ,2,2,"option",54),Ho(),Ho(),jo(108,"div",8),jo(109,"label",55),Ss(110,"Choose Topic"),Ho(),jo(111,"select",56),Ko("ngModelChange",(function(e){return t.selectedSubCategory=e})),Po(112,rJ,2,2,"option",54),Ho(),Ho(),jo(113,"div",57),jo(114,"input",58),Ko("ngModelChange",(function(e){return t.priceForExpertise=e})),Ho(),Ho(),Ho(),jo(115,"div",59),jo(116,"button",60),Ko("click",(function(){return t.saveExpertise()})),Uo(117,"i",40),Ho(),Ho(),Ho(),Po(118,aJ,5,3,"div",42),Po(119,oJ,2,0,"div",41),jo(120,"p",61),Ss(121),Ho(),Ho(),jo(122,"div",8),jo(123,"label",62),Ss(124,"Description"),jo(125,"sup"),Ss(126,"*"),Ho(),Ho(),Uo(127,"textarea",63,64),jo(129,"span",65),Ss(130),Ho(),Ho(),jo(131,"div",8),jo(132,"label",66),Ss(133,"Speciality"),jo(134,"sup"),Ss(135,"*"),Ho(),Ho(),Uo(136,"textarea",67,68),jo(138,"span",65),Ss(139),Ho(),Ho(),Ho(),jo(140,"div",36),jo(141,"div",8),jo(142,"label",69),Ss(143,"Years of Experience"),Ho(),Uo(144,"input",70,71),Po(146,sJ,2,0,"span",26),Ho(),jo(147,"div",8),jo(148,"label",72),Ss(149,"Current Organisation"),Ho(),Uo(150,"input",73,74),Po(152,lJ,2,0,"span",26),Ho(),jo(153,"div",8),jo(154,"label",75),Ss(155,"Previous Organisation"),Ho(),jo(156,"div"),jo(157,"input",76),Ko("ngModelChange",(function(e){return t.inputOrganisation=e})),Ho(),jo(158,"div",38),jo(159,"button",60),Ko("click",(function(){return t.addOrganisation()})),Uo(160,"i",40),Ho(),Ho(),Ho(),Po(161,cJ,2,0,"div",41),Po(162,uJ,5,1,"div",42),Ho(),jo(163,"div",8),jo(164,"label",77),Ss(165,"LinkedIn Profile link"),Ho(),Uo(166,"input",78,79),Po(168,hJ,2,0,"span",26),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(39),r=Mo(46),a=Mo(54),o=Mo(62),s=Mo(68),l=Mo(85),c=Mo(94),u=Mo(128),h=Mo(137),d=Mo(145),p=Mo(151),f=Mo(167);_r(9),hs("active",t.basic),_r(2),hs("active",!t.basic),_r(2),hs("hideBlock",!t.basic),_r(1),Bo("src",t.profilePictureUrl,ir),_r(5),Bo("ngIf",!t.isLoading3),_r(1),Bo("ngIf",t.profilePicUploadStatus),_r(1),Bo("ngIf",t.isLoading3),_r(1),hs("hideBlock",!t.basic),_r(3),Bo("disabled",!n.valid),_r(2),hs("hideBlock",t.basic),_r(3),Bo("disabled",!l.valid),_r(5),Ts(" ",t.profileError," "),_r(1),hs("hideBlock",!t.basic),_r(9),Bo("ngModel",t.tutorProfile.fullName),_r(2),Bo("ngIf",!r.valid&&r.touched),_r(6),Bo("ngModel",t.tutorProfile.dateOfBirth),_r(2),Bo("ngIf",(null==a.errors?null:a.errors.invalidDob)&&a.touched),_r(6),Bo("ngModel",t.tutorProfile.contact)("pattern",t.mobNumberPattern),_r(2),Bo("ngIf",!o.valid&&o.touched),_r(4),Bo("ngModel",t.tutorProfileDetails.professionalSkills),_r(2),Bo("ngIf",!s.valid&&s.touched),_r(7),Bo("ngModel",t.inputEducation),_r(2),Bo("disabled",!t.inputEducation),_r(2),Bo("ngIf",t.duplicateEducationArea),_r(1),Bo("ngForOf",t.educationQualifications),_r(2),hs("hideBlock",t.tutorService.getTutorProfileDetails().profileCompleted<50&&!t.basic),_r(3),hs("hideBlock",t.basic),_r(7),Bo("ngModel",t.tutorProfileDetails.institute),_r(2),Bo("ngIf",!c.valid&&c.touched),_r(11),Bo("ngModel",t.selectedCategory),_r(1),Bo("ngForOf",t.categories),_r(4),Bo("ngModel",t.selectedSubCategory)("disabled",!t.selectedCategory),_r(1),Bo("ngForOf",t.filterSCfromCateg()),_r(2),Bo("ngModel",t.priceForExpertise),_r(2),Bo("disabled",!t.selectedCategory||!t.selectedSubCategory||!t.priceForExpertise),_r(2),Bo("ngForOf",t.expertises),_r(1),Bo("ngIf",t.duplicateExpertiseArea),_r(2),Es(t.errorText),_r(6),Bo("ngModel",t.tutorProfileDetails.description),_r(3),Ts("",u.value.length,"/250"),_r(6),Bo("ngModel",t.tutorProfileDetails.speciality),_r(3),Ts("",h.value.length,"/250"),_r(5),Bo("ngModel",t.tutorProfileDetails.yearsOfExperience),_r(2),Bo("ngIf",!d.valid&&d.touched),_r(4),Bo("ngModel",t.tutorProfileDetails.currentOrganisation),_r(2),Bo("ngIf",!p.valid&&p.touched),_r(5),Bo("ngModel",t.inputOrganisation),_r(2),Bo("disabled",!t.inputOrganisation),_r(2),Bo("ngIf",t.duplicatePreviousOrganisation),_r(1),Bo("ngForOf",t.previousOraganisations),_r(4),Bo("ngModel",t.tutorProfileDetails.linkedInProfile),_r(2),Bo("ngIf",!f.valid&&f.touched)}},directives:[Dh,qy,ug,My,eg,cg,Uy,Jy,ib,WX,rb,xh,jg,Tg,zX,Hg,Yg],styles:["body[_ngcontent-%COMP%]{height:100vh;background-color:#f9fafc}.outer-box[_ngcontent-%COMP%]{width:80%;background-color:#fff;height:80%;margin:auto;box-shadow:0 0 4px rgba(199,203,217,.7)}.inner-box[_ngcontent-%COMP%]{width:80%;margin:auto;height:100%}button[_ngcontent-%COMP%]{width:100%}.setLength[_ngcontent-%COMP%]{float:right;color:grey;font-size:small}.navigation-links[_ngcontent-%COMP%]{text-align:center;cursor:pointer;padding:15px;font-size:larger}.form-navigation[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.border-right[_ngcontent-%COMP%]{border-right:1px solid #ccc}.active[_ngcontent-%COMP%]{box-shadow:0 0 4px rgba(199,203,217,.7);color:#241084;background-color:rgba(199,203,217,.7)}.progress-Bar[_ngcontent-%COMP%]{width:100%;height:8px;margin-bottom:15px;margin-top:15px}.outer-progressBar[_ngcontent-%COMP%]{background-color:#ccc;height:inherit;border-radius:8px}.inner-progressBar[_ngcontent-%COMP%]{background-color:#241084;height:inherit;width:0;border-radius:8px}.form-body[_ngcontent-%COMP%]{height:75%}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.4rem}.form-control[_ngcontent-%COMP%]{padding-left:15px}.example-chip-list[_ngcontent-%COMP%]{width:100%}.completeProfileLink[_ngcontent-%COMP%]{color:#241084}.completeProfileLink[_ngcontent-%COMP%]:hover{text-decoration:underline}.help-block[_ngcontent-%COMP%]{font-size:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#8093eb;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 5px rgba(131,137,221,.5)}.Box[_ngcontent-%COMP%]{padding:20px;box-shadow:0 0 4px rgba(199,203,217,.7);margin-bottom:20px;background-color:#fff;position:relative}.marginZero[_ngcontent-%COMP%]{margin:0}.displaySubjects[_ngcontent-%COMP%]{display:inline;margin-right:10px;background-color:tomato;color:#fff;padding:7px;border-radius:5px}.content-Box[_ngcontent-%COMP%]{padding-left:10px}.editIconButton[_ngcontent-%COMP%]{background-color:#fff;border:none;position:absolute;width:45px;height:45px;top:15px;right:20px;font-size:larger;cursor:pointer;color:#8d89aa;outline:none}.editIconButton[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:50%;color:#000}.editIcon[_ngcontent-%COMP%]{position:absolute;top:13px;left:13px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:400!important}h2[_ngcontent-%COMP%]{margin:0 0 10px!important}p[_ngcontent-%COMP%]{font-weight:300!important}.errorMessage[_ngcontent-%COMP%]{color:red;margin:5px}.hideBlock[_ngcontent-%COMP%]{display:none}.tickMark[_ngcontent-%COMP%]{position:absolute;height:0;padding:0;right:-10px;top:5px}.tickMarkImg[_ngcontent-%COMP%]{width:20px;margin-top:-25px}.loader[_ngcontent-%COMP%]{position:absolute;top:-5px;right:73px;height:0}.leftBox[_ngcontent-%COMP%]{border-right:1px solid #a4a2a2}.learningArea-fields[_ngcontent-%COMP%]{margin-bottom:2.5vh}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btn-circle.btn-sm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:15px;font-size:8px;padding:0 0 6px;text-align:center}.btn-success[_ngcontent-%COMP%]{margin-right:3vw}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#39093d;overflow-x:hidden;transition:.5s;padding-top:60px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:25px;color:#fff;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#mainContent[_ngcontent-%COMP%]{padding:16px}#headerContent[_ngcontent-%COMP%], #mainContent[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{transition:margin-left .5s}.header[_ngcontent-%COMP%]{height:60px;background:#fff;border-bottom:1px solid rgba(177,165,165,.48);width:100vw;margin-left:-2vw;display:block;float:left;box-shadow:0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important;padding-left:15px;margin-top:-2vh}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#7d0f7d!important}.width50[_ngcontent-%COMP%]{width:50%}.tags[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;margin-right:5px;border-radius:.25rem;width:82%;display:inline-block}"]}),dJ);function fJ(e,t){1&e&&(jo(0,"span"),Ss(1,"Upload"),Ho())}function vJ(e,t){1&e&&(jo(0,"div",45),Uo(1,"img",46),Ho())}function mJ(e,t){1&e&&(jo(0,"span",47),Uo(1,"app-loader"),Ho())}function gJ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid Name"),Ho())}function yJ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid dob"),Ho())}function bJ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid contact"),Ho())}function kJ(e,t){if(1&e&&(jo(0,"mat-option",49),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i),_r(1),Ts(" ",i," ")}}function CJ(e,t){1&e&&(jo(0,"div",50),Ss(1," Duplicate learning area ! "),Ho())}function wJ(e,t){if(1&e){var i=zo();jo(0,"div",51),jo(1,"div",52),Ss(2),Ho(),jo(3,"button",53),Ko("click",(function(){ti(i);var e=t.index;return $o().subtractLearningArea(e)})),Uo(4,"i",54),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Es(n)}}var _J,SJ=((_J=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this.studentService=t,this.matDialog=i,this.snackBar=n,this.firebaseStorage=r,this.httpService=a,this.router=o,this.zone=s,this.home=l,this.isLoading3=!1,this.config={duration:2e3,horizontalPosition:"center",verticalPosition:"top"},this.myControl=new xy,this.options=[],this.subCategories=[],this.learningAreas=[],this.profilePictureUrl="../../../assets/images/default-user-image.png",this.uploadedProfilePicture=null,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.snackBarConfig={duration:15e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.fillOptions(),this.filteredOptions=this.myControl.valueChanges.pipe(Dp(""),j((function(t){return e._filter(t)}))),this.index=1,this.openNav(),this.studentProfile=this.studentService.getStudentProfileDetails(),null!=this.studentProfile.profilePictureUrl&&(this.profilePictureUrl=this.studentProfile.profilePictureUrl),null!=this.studentProfile.learningAreas&&(this.learningAreas=this.studentProfile.learningAreas),this.handleRefresh()}},{key:"_filter",value:function(e){var t=e.toLowerCase();return this.options.filter((function(e){return e.toLowerCase().includes(t)}))}},{key:"fillOptions",value:function(){var e=this;this.httpService.getAllSubCategories().subscribe((function(t){if(e.subCategories=t,e.subCategories.length>0)for(var i=0;i<e.subCategories.length;i++)e.options.push(e.subCategories[i].subCategory)}))}},{key:"cancelForm",value:function(){location.reload()}},{key:"addLearningArea",value:function(){this.duplicacyCheck(this.learningAreas,this.learningArea)?(this.duplicateArea=!0,this.learningArea=""):(this.learningAreas.push(this.learningArea),this.learningArea="",1==this.duplicateArea&&(this.duplicateArea=!1))}},{key:"subtractLearningArea",value:function(e){var t=this.learningAreas[e];confirm("Are you sure you want to delete this learning area?")&&(this.httpService.subtractArea(this.studentProfile.sid,"Learner",t).subscribe(),this.learningAreas.splice(e,1))}},{key:"navAction",value:function(e){e%2==1?(this.index=e+1,this.closeNav()):(this.index=e+1,this.openNav())}},{key:"openNav",value:function(){document.getElementById("sidenav").style.width="230px",document.getElementById("mainContent").style.marginLeft="230px"}},{key:"closeNav",value:function(){document.getElementById("sidenav").style.width="0",document.getElementById("mainContent").style.marginLeft="0"}},{key:"saveStudentProfile",value:function(e){var t=this;this.studentProfile.contact=e.value.contact,this.studentProfile.dateOfBirth=e.value.dob,this.studentProfile.fullName=e.value.fullName,this.studentProfile.linkedInProfile=e.value.linkedInProfile,this.studentProfile.learningAreas=this.learningAreas,this.studentProfile.profilePictureUrl=this.profilePictureUrl,this.learningAreasDuplicacyCheck(this.learningAreas)&&this.httpService.updateStudentProfile(this.studentProfile).subscribe((function(e){t.studentService.setStudentProfileDetails(t.studentProfile),t.home.calculateStudentProfilePercentage(),t.zone.run((function(){t.snackBar.open("information saved successfully !","close",t.config),t.router.navigate(["/home/studentDashboard"])}))}))}},{key:"learningAreasDuplicacyCheck",value:function(e){for(var t=0;t<e.length-1;t++)for(var i=t+1;i<e.length;i++)if(e[t]==e[i])return!1;return!0}},{key:"duplicacyCheck",value:function(e,t){return e.includes(t)}},{key:"profilePictureChange",value:function(e){var t=this;this.uploadedProfilePicture=e.target.files[0],this.isLoading3=!0,this.uploadedProfilePicture=e.target.files[0];var i=new FileReader;e.target.files&&e.target.files.length&&(this.uploadedProfilePicture=e.target.files[0],i.readAsDataURL(this.uploadedProfilePicture),i.onload=function(){t.openDialog(i.result)})}},{key:"openDialog",value:function(e){var t=this,i=new kT;i.disableClose=!0,i.data={image:this.uploadedProfilePicture,imageSrc:e},this.matDialog.open(jY,i).afterClosed().subscribe((function(e){var i=t.b64toBlob(e,t.uploadedProfilePicture.type),n=new File([i],t.uploadedProfilePicture.name,{type:t.uploadedProfilePicture.type,lastModified:Date.now()});t.uploadedProfilePicture=n,t.uploadProfilePicture()}))}},{key:"b64toBlob",value:function(e,t){for(var i=atob(e.split(",")[1]),n=new ArrayBuffer(i.length),r=new Uint8Array(n),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);return new Blob([n],{type:t})}},{key:"profilePictureChangeCompleted",value:function(e){var t=this;this.uploadedProfilePicture=e.target.files[0];var i="tutor_profile_picture/".concat(this.uploadedProfilePicture,"_").concat((new Date).getTime()),n=this.firebaseStorage.ref(i);this.firebaseStorage.upload(i,this.uploadedProfilePicture).snapshotChanges().pipe(Hp((function(){n.getDownloadURL().subscribe((function(e){t.profilePictureUrl=e,t.snackBar.open("Image Uploaded successfully","close",t.config)}))}))).subscribe()}},{key:"uploadProfilePicture",value:function(){var e=this,t="tutor_profile_picture/".concat(this.uploadedProfilePicture,"_").concat((new Date).getTime()),i=this.firebaseStorage.ref(t);this.firebaseStorage.upload(t,this.uploadedProfilePicture).snapshotChanges().pipe(Hp((function(){i.getDownloadURL().subscribe((function(t){e.profilePicUploadStatus=!0,e.isLoading3=!1,e.profilePictureUrl=t,e.snackBar.open("Image Uploaded successfully","close",e.config)}))}))).subscribe()}},{key:"handleRefresh",value:function(){var e=this;this.studentProfile.sid||setTimeout((function(){e.studentProfile=e.studentService.getStudentProfileDetails(),null!=e.studentProfile.profilePictureUrl&&(e.profilePictureUrl=e.studentProfile.profilePictureUrl),null!=e.studentProfile.learningAreas&&(e.learningAreas=e.studentProfile.learningAreas)}),1e3)}}]),e}()).\u0275fac=function(e){return new(e||_J)(Lo(FT),Lo(LT),Lo(rI),Lo(UX),Lo(lk),Lo(cm),Lo(Wc),Lo(Mx))},_J.\u0275cmp=gt({type:_J,selectors:[["app-student-profile"]],decls:75,vars:22,consts:[[2,"width","100%",3,"ngSubmit"],["learnerProfile","ngForm"],[1,"container"],[1,"row",2,"padding-top","2vh"],[1,"col-md-3"],[2,"color","#e3165b","font-size","x-large"],[2,"width","130px","height","130px","border-radius","100%","border","1px solid black",3,"src"],[1,"form-group"],["hidden","true","type","file","onclick","this.value=null","required","",3,"change"],["profilePicture",""],["type","button",1,"btn","btn-primary",2,"margin-top","5px","width","140px","position","relative","height","30px",3,"click"],[4,"ngIf"],["class","tickMark",4,"ngIf"],["class","loader","style","text-align: center; z-index: 10",4,"ngIf"],[1,"offset-md-6","col-md-3",2,"text-align","end"],[1,"btn",2,"margin-right","2vw","text-decoration","underline",3,"click"],["type","button","type"," submit",1,"btn",2,"padding","1vh 2vw","background-color","purple","color","white","font-size","small",3,"disabled"],[2,"padding-bottom","10px","font-size","12px","font-weight","600"],[1,"row"],[1,"col-md-7","leftBox"],["for","fullName",1,"form-control-placeholder"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control","input-fields",3,"ngModel"],["fullName","ngModel"],["class","help-block",4,"ngIf"],["for","dob",1,"form-control-placeholder"],["type","date","id","dob","name","dob","ngModel","","dobValidator","","required","",1,"form-control","input-fields",3,"ngModel"],["dob","ngModel"],["for","contact",1,"form-control-placeholder"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control","input-fields",3,"ngModel","pattern"],["contact","ngModel"],["for","linkProfile",1,"form-control-placeholder"],["type","text","id","linkedInProfile","ngModel","","name","linkedInProfile",1,"form-control","input-fields",3,"ngModel"],["linkedInProfile","ngModel"],[1,"col-md-4"],["for","learning"],["type","search","name","search","placeholder","Add learning area",1,"form-control",2,"width","70%","display","inline","margin-right","5px",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"display","inline"],["type","button",1,"btn","btn-success","btn-circle","btn-sm",2,"font-size","inherit","display","inline",3,"disabled","click"],[1,"fas","fa-plus"],["style","color: red; margin-top: 10px",4,"ngIf"],["class","learningArea-fields","style","margin-top: 10px; margin-bottom: 10px",4,"ngFor","ngForOf"],[1,"col-md-1"],[1,"tickMark"],["src","../../../assets/icons/tick.png",1,"tickMarkImg"],[1,"loader",2,"text-align","center","z-index","10"],[1,"help-block"],[3,"value"],[2,"color","red","margin-top","10px"],[1,"learningArea-fields",2,"margin-top","10px","margin-bottom","10px"],[1,"tags"],["type","button",1,"btn","btn-danger","btn-circle","btn-sm",2,"font-size","inherit",3,"click"],[1,"fas","fa-minus"]],template:function(e,t){if(1&e){var i=zo();jo(0,"body"),jo(1,"div"),jo(2,"form",0,1),Ko("ngSubmit",(function(){ti(i);var e=Mo(3);return t.saveStudentProfile(e)})),jo(4,"div",2),jo(5,"div",3),jo(6,"div",4),jo(7,"p",5),jo(8,"b"),Ss(9,"PROFILE"),Ho(),Ho(),Uo(10,"img",6),jo(11,"div",7),jo(12,"input",8,9),Ko("change",(function(e){return t.profilePictureChange(e)})),Ho(),jo(14,"button",10),Ko("click",(function(){return ti(i),Mo(13).click()})),Po(15,fJ,2,0,"span",11),Po(16,vJ,2,0,"div",12),Po(17,mJ,2,0,"span",13),Ho(),Ho(),Ho(),jo(18,"div",14),jo(19,"button",15),Ko("click",(function(){return t.cancelForm()})),Ss(20," Cancel "),Ho(),jo(21,"button",16),Ss(22," Save "),Ho(),Ho(),Ho(),Uo(23,"br"),jo(24,"div",17),Ss(25," The fields marked with * are mandatory "),Ho(),jo(26,"div",18),jo(27,"div",19),jo(28,"div",7),jo(29,"label",20),Ss(30,"Full Name"),jo(31,"sup"),Ss(32,"*"),Ho(),Ho(),Uo(33,"input",21,22),Po(35,gJ,2,0,"span",23),Ho(),jo(36,"div",7),jo(37,"label",24),Ss(38,"Date of Birth"),jo(39,"sup"),Ss(40,"*"),Ho(),Ho(),Uo(41,"input",25,26),Po(43,yJ,2,0,"span",23),Ho(),jo(44,"div",7),jo(45,"label",27),Ss(46,"Mobile Number"),jo(47,"sup"),Ss(48,"*"),Ho(),Ho(),Uo(49,"input",28,29),Po(51,bJ,2,0,"span",23),Ho(),jo(52,"div",7),jo(53,"label",30),Ss(54,"Add your LinkedIn Profile"),Ho(),Uo(55,"input",31,32),Ho(),Ho(),jo(57,"div",33),jo(58,"div",7),jo(59,"label",34),Ss(60,"Learning Areas"),jo(61,"sup"),Ss(62,"*"),Ho(),Ho(),jo(63,"div"),jo(64,"input",35),Ko("ngModelChange",(function(e){return t.learningArea=e})),Ho(),jo(65,"mat-autocomplete",36,37),Po(67,kJ,2,2,"mat-option",38),Xl(68,"async"),Ho(),jo(69,"span",39),jo(70,"button",40),Ko("click",(function(){return t.addLearningArea()})),Uo(71,"i",41),Ho(),Ho(),Po(72,CJ,2,0,"div",42),Ho(),Po(73,wJ,5,1,"div",43),Ho(),Ho(),Uo(74,"div",44),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(3),r=Mo(34),a=Mo(42),o=Mo(50),s=Mo(66);_r(10),Bo("src",t.profilePictureUrl,ir),_r(5),Bo("ngIf",!t.isLoading3),_r(1),Bo("ngIf",t.profilePicUploadStatus),_r(1),Bo("ngIf",t.isLoading3),_r(4),Bo("disabled",!n.valid),_r(12),Bo("ngModel",t.studentProfile.fullName),_r(2),Bo("ngIf",!r.valid&&r.touched),_r(6),Bo("ngModel",t.studentProfile.dateOfBirth),_r(2),Bo("ngIf",(null==a.errors?null:a.errors.invalidDob)&&a.touched),_r(6),Bo("ngModel",t.studentProfile.contact)("pattern",t.mobNumberPattern),_r(2),Bo("ngIf",!o.valid&&o.touched),_r(4),Bo("ngModel",t.studentProfile.linkedInProfile),_r(9),Bo("formControl",t.myControl)("matAutocomplete",s)("ngModel",t.learningArea),_r(3),Bo("ngForOf",Jl(68,20,t.filteredOptions)),_r(3),Bo("disabled",!t.learningArea),_r(2),Bo("ngIf",t.duplicateArea),_r(1),Bo("ngForOf",t.learningAreas)}},directives:[qy,ug,My,Dh,eg,cg,Uy,Jy,ib,WX,rb,ix,Gy,ZO,xh,zX,pT],pipes:[$h],styles:[".leftBox[_ngcontent-%COMP%]{border-right:1px solid #a4a2a2}.learningArea-fields[_ngcontent-%COMP%]{margin-bottom:2.5vh}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.btn-circle.btn-sm[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:15px;font-size:8px;padding:0 0 6px;text-align:center}.btn-success[_ngcontent-%COMP%]{margin-right:3vw}label[_ngcontent-%COMP%]{font-size:small;color:#000}.sidenav[_ngcontent-%COMP%]{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#39093d;overflow-x:hidden;transition:.5s;padding-top:60px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:8px 8px 8px 32px;text-decoration:none;font-size:25px;color:#fff;display:block;transition:.3s}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1f1f1}.sidenav[_ngcontent-%COMP%]   .closebtn[_ngcontent-%COMP%]{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#mainContent[_ngcontent-%COMP%]{padding:16px}#headerContent[_ngcontent-%COMP%], #mainContent[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{transition:margin-left .5s}.header[_ngcontent-%COMP%]{height:60px;background:#fff;border-bottom:1px solid rgba(177,165,165,.48);width:100vw;margin-left:-2vw;display:block;float:left;box-shadow:0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important;padding-left:15px;margin-top:-2vh}@media screen and (max-height:450px){.sidenav[_ngcontent-%COMP%]{padding-top:15px}.sidenav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}}.plus_minus[_ngcontent-%COMP%]{width:10px;height:10px}.tickMark[_ngcontent-%COMP%]{position:absolute;height:0;padding:0;right:-10px;top:5px}.tickMarkImg[_ngcontent-%COMP%]{width:20px;margin-top:-25px}.loader[_ngcontent-%COMP%]{position:absolute;top:-5px;right:73px;height:0}.tags[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;margin-right:5px;border-radius:.25rem;width:82%;display:inline-block}"]}),_J),EJ=function e(){_classCallCheck2(this,e),this.Subject="My Availability"},TJ=["scheduleObj"],AJ=["meetingObj"];function OJ(e,t){1&e&&(jo(0,"div",8),Uo(1,"app-loading"),Ho())}var xJ,IJ,DJ,RJ,PJ,MJ,LJ,NJ=((DJ=function(){function e(t,i,n,r,a){_classCallCheck2(this,e),this.matDialog=t,this.httpService=i,this.tutorService=n,this.loginService=r,this.cookieService=a,this.scheduleViews=["Day","Week","WorkWeek","Month"],this.tutorAvailabilitySchedule=new pA,this.calendarLoaded=!1,this.calendarView="Availability",this.availabiltiySchedules=[],this.availableSchedules=[],this.bookingSchedule=[],this.combinedSchedule=[],this.isLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.tutorService.getPersonalAvailabilitySchedule()?(this.scheduleObj.eventSettings.dataSource=this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule,this.tutorAvailabilitySchedule.fullName=this.tutorService.getTutorDetials().fullName,this.tutorAvailabilitySchedule.tid=this.tutorService.getTutorDetials().bookingId,this.tutorAvailabilitySchedule.isAvailable=this.tutorService.getPersonalAvailabilitySchedule().isAvailable,this.copySchedule(),this.copyBookings()):this.handleRefresh()}},{key:"switchCalendarView",value:function(){"Availability"==this.calendarView?(this.calendarView="Meeting",this.scheduleObj.eventSettings.dataSource=this.bookingSchedule):(this.calendarView="Availability",this.scheduleObj.eventSettings.dataSource=this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule)}},{key:"handleRefresh",value:function(){var e=this;this.cookieService.get("userId")&&(this.userId=this.cookieService.get("userId"),this.httpService.getTutorDetails(this.userId).subscribe((function(t){e.httpService.getScheduleData(parseInt(t.bookingId)).subscribe((function(t){e.tutorService.setPersonalAvailabilitySchedule(t),e.tutorAvailabilitySchedule.fullName=e.tutorService.getTutorDetials().fullName,e.tutorAvailabilitySchedule.tid=e.tutorService.getTutorDetials().bookingId,e.tutorAvailabilitySchedule.isAvailable=e.tutorService.getPersonalAvailabilitySchedule().isAvailable,e.availabiltiySchedules=e.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule,e.copySchedule(),e.copyBookings(),e.scheduleObj.eventSettings.dataSource=e.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule}))})))}},{key:"copySchedule",value:function(){var e,t=_createForOfIteratorHelper(this.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=new EJ;n.Id=i.Id,n.Subject=i.Subject,n.StartTime=i.StartTime,n.EndTime=i.EndTime,n.IsAllDay=i.IsAllDay,n.RecurrenceRule=i.RecurrenceRule,n.RecurrenceException=i.RecurrenceException,n.Guid=i.Guid,n.IsReadonly=!1,n.Type="availability",this.availableSchedules.push(n)}}catch(r){t.e(r)}finally{t.f()}}},{key:"copyBookings",value:function(){if(0!=this.tutorService.getPersonalAvailabilitySchedule().allMeetingsSchedule.length){var e,t=_createForOfIteratorHelper(this.tutorService.getPersonalAvailabilitySchedule().allMeetingsSchedule);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=new EJ;n.Subject=i.Subject,n.StartTime=i.StartTime,n.EndTime=i.EndTime,n.IsAllDay=i.IsAllDay,n.RecurrenceRule=i.RecurrenceRule,n.RecurrenceException=i.RecurrenceException,n.Guid=i.Guid,n.Type="booking",n.IsReadonly=!0,this.bookingSchedule.push(n)}}catch(r){t.e(r)}finally{t.f()}}}},{key:"copyAppointment",value:function(e){var t=new EJ;return t.Id=e.Id,t.Subject=e.Subject,t.StartTime=e.StartTime.toString(),t.EndTime=e.EndTime.toString(),t.IsAllDay=e.IsAllDay,t.RecurrenceRule=e.RecurrenceRule,t.RecurrenceException=e.RecurrenceException,t.Guid=e.Guid,t.Description=e.Description,t.Type="availability",t}},{key:"addEvents",value:function(e){var t=this;this.availableSchedules.push(e),this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout((function(){null!=t.userId&&(t.tutorAvailabilitySchedule.tid=t.tutorService.getTutorDetials().bookingId),t.httpService.saveScheduleData(t.tutorAvailabilitySchedule).subscribe((function(e){t.tutorService.personalAvailablitySchedule=t.tutorAvailabilitySchedule,t.isLoading=!1}))}),3e3)}},{key:"onEventRendered",value:function(e){"booking"==e.data.Type?e.element.style.backgroundColor="#e30084":"availability"==e.data.Type&&(e.element.style.backgroundColor="#7d0f7d")}},{key:"updateEvents",value:function(e){var t=this,i=this.availableSchedules.findIndex((function(t){return t.Id==e.Id}));-1==i?this.availableSchedules.push(e):this.availableSchedules[i]=e,this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout((function(){t.httpService.saveScheduleData(t.tutorAvailabilitySchedule).subscribe((function(e){t.tutorService.personalAvailablitySchedule=t.tutorAvailabilitySchedule,t.isLoading=!1}))}),3e3)}},{key:"deleteEvents",value:function(e){var t=this,i=this.availableSchedules.findIndex((function(t){return t.Id==e.Id}));this.availableSchedules.splice(i,1),this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout((function(){t.httpService.saveScheduleData(t.tutorAvailabilitySchedule).subscribe((function(e){t.tutorService.personalAvailablitySchedule=t.tutorAvailabilitySchedule,t.isLoading=!1}))}),3e3)}},{key:"updateSpecialEvents",value:function(){var e=this;this.tutorAvailabilitySchedule.allAvailabilitySchedule=this.availableSchedules,this.isLoading=!0,setTimeout((function(){e.httpService.saveScheduleData(e.tutorAvailabilitySchedule).subscribe((function(t){e.tutorService.personalAvailablitySchedule=e.tutorAvailabilitySchedule,e.isLoading=!1}))}),3e3)}},{key:"onActionBegin",value:function(e){var t,i=this;"eventCreate"===e.requestType?(t=e.addedRecords,setTimeout((function(){i.addEvents(i.copyAppointment(t[0]))}),3e3)):"eventChange"===e.requestType?(t=e.changedRecords,this.isLoading=!this.isLoading,setTimeout((function(){if(null!=t[0].Guid&&null!=t[0].RecurrenceException){i.availableSchedules.splice(0,i.availableSchedules.length);var e,n=_createForOfIteratorHelper(i.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=new EJ;a.Id=r.Id,a.Subject=r.Subject,a.StartTime=r.StartTime.toString(),a.EndTime=r.EndTime.toString(),a.IsAllDay=r.IsAllDay,a.RecurrenceRule=r.RecurrenceRule,a.RecurrenceException=r.RecurrenceException,a.Guid=r.Guid,a.RecurrenceID=r.RecurrenceID,i.availableSchedules.push(a)}}catch(o){n.e(o)}finally{n.f()}i.updateSpecialEvents()}else i.updateEvents(i.copyAppointment(t[0]))}),3e3)):"eventRemove"===e.requestType&&(0!=(t=e.deletedRecords).length?setTimeout((function(){i.availableSchedules.splice(0,i.availableSchedules.length);var e,t=_createForOfIteratorHelper(i.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=new EJ;r.Id=n.Id,r.Subject=n.Subject,r.StartTime=n.StartTime.toString(),r.EndTime=n.EndTime.toString(),r.IsAllDay=n.IsAllDay,r.RecurrenceRule=n.RecurrenceRule,r.RecurrenceException=n.RecurrenceException,r.Guid=n.Guid,r.RecurrenceID=n.RecurrenceID,i.availableSchedules.push(r)}}catch(a){t.e(a)}finally{t.f()}i.updateSpecialEvents()}),3e3):0==t.length&&setTimeout((function(){i.availableSchedules.splice(0,i.availableSchedules.length);var e,t=_createForOfIteratorHelper(i.tutorService.getPersonalAvailabilitySchedule().allAvailabilitySchedule);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=new EJ;r.Id=n.Id,r.Subject=n.Subject,r.StartTime=n.StartTime.toString(),r.EndTime=n.EndTime.toString(),r.IsAllDay=n.IsAllDay,r.RecurrenceRule=n.RecurrenceRule,r.RecurrenceException=n.RecurrenceException,r.Guid=n.Guid,r.RecurrenceID=n.RecurrenceID,i.availableSchedules.push(r)}}catch(a){t.e(a)}finally{t.f()}i.updateSpecialEvents()}),3e3))}}]),e}()).\u0275fac=function(e){return new(e||DJ)(Lo(LT),Lo(lk),Lo(ck),Lo(gb),Lo(BT))},DJ.\u0275cmp=gt({type:DJ,selectors:[["app-schedule"]],viewQuery:function(e,t){var i;1&e&&(pc(TJ,!0),pc(AJ,!0)),2&e&&(hc(i=yc())&&(t.scheduleObj=i.first),hc(i=yc())&&(t.meetingObj=i.first))},decls:11,vars:9,consts:[[2,"background-color","#f9fafc","height","100vh"],[2,"width","95%","margin","auto","padding-top","80px","padding-bottom","15px"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],["style","width: max-content; margin: auto; padding-top: 20vh",4,"ngIf"],[1,"Box",2,"width","95%","margin","auto","padding","0"],["width","100%","height","560px",3,"views","readonly","eventRendered","actionBegin"],["scheduleObj",""],[2,"width","max-content","margin","auto","padding-top","20vh"]],template:function(e,t){1&e&&(jo(0,"body",0),jo(1,"div",1),jo(2,"div",2),jo(3,"button",3),Ko("click",(function(){return t.switchCalendarView()})),Ss(4," Availability "),Ho(),jo(5,"button",3),Ko("click",(function(){return t.switchCalendarView()})),Ss(6," Meetings "),Ho(),Ho(),Ho(),Po(7,OJ,2,0,"div",4),jo(8,"div",5),jo(9,"ejs-schedule",6,7),Ko("eventRendered",(function(e){return t.onEventRendered(e)}))("actionBegin",(function(e){return t.onActionBegin(e)})),Ho(),Ho(),Ho()),2&e&&(_r(3),hs("btnActive","Availability"==t.calendarView),_r(2),hs("btnActive","Meeting"==t.calendarView),_r(2),Bo("ngIf",t.isLoading),_r(1),hs("hide",t.isLoading),_r(1),Bo("views",t.scheduleViews)("readonly","Meeting"==t.calendarView))},directives:[Dh,BW,dG],styles:['.box[_ngcontent-%COMP%]{width:80vw;height:85vh;background-color:#fafafa;margin:auto;border:1.5px solid #eee;overflow:hidden;padding:0}.width100[_ngcontent-%COMP%]{width:100%}.marginZero[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem}label[_ngcontent-%COMP%]{margin-bottom:5px}.example-chip-list[_ngcontent-%COMP%]{padding-left:20px;width:80%}.cornerButtonsWrapper[_ngcontent-%COMP%]{position:absolute;top:20px;right:10px}.cornerButtons[_ngcontent-%COMP%]{margin-right:10px}.chip[_ngcontent-%COMP%]{padding:7px 12px;margin-right:4px;background-color:#e0e0e0;color:rgba(0,0,0,.87);font-size:14px;font-weight:500;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.round[_ngcontent-%COMP%]{position:relative;margin-top:5vh}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:50%;cursor:pointer;height:28px;left:0;position:absolute;top:0;width:28px}.round[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{border:2px solid #fff;border-top:none;border-right:none;content:"";height:6px;left:7px;opacity:0;position:absolute;top:8px;transform:rotate(-45deg);width:12px}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{visibility:hidden}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#66bb6a;border-color:#66bb6a}.round[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{opacity:1}.instruction-box[_ngcontent-%COMP%]{position:absolute;top:0}.btnActive[_ngcontent-%COMP%]{background-color:#7d0f7d!important;border-color:#7d0f7d!important;box-shadow:0 0 0 .2rem #f7e4f9!important;color:#fff!important}.hideBlock[_ngcontent-%COMP%]{display:none}.e-schedule-dialog[_ngcontent-%COMP%]   .e-numeric.e-control-wrapper.e-input-group[_ngcontent-%COMP%]   .e-input-group-icon[_ngcontent-%COMP%]{pointer-events:none!important}.e-schedule-dialog[_ngcontent-%COMP%]   .e-all-day-time-zone-row[_ngcontent-%COMP%]{display:none!important}.hide[_ngcontent-%COMP%]{display:none}']}),DJ),FJ=((IJ=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:IJ}),IJ.\u0275inj=ve({factory:function(e){return new(e||IJ)}}),IJ),BJ=((xJ=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:xJ}),xJ.\u0275inj=ve({factory:function(e){return new(e||xJ)},imports:[[FJ,nT,NE,Pw],FJ,NE]}),xJ),VJ=["scheduleObj"],jJ=["addButton"],HJ=((PJ=function(){function e(t){_classCallCheck2(this,e),this.studentService=t,this.scheduleViews=["Day","Week","WorkWeek","Month"],this.eventSettings={dataSource:this.studentService.getStudentBookings()}}return _createClass(e,[{key:"ngOnInit",value:function(){this.studentService.getStudentBookings()?this.scheduleObj.eventSettings.dataSource=this.studentService.getStudentBookings():this.handleRefresh()}},{key:"onEventRendered",value:function(e){"booking"==e.data.Type?e.element.style.backgroundColor="#e30084":"availability"==e.data.Type&&(e.element.style.backgroundColor="#7d0f7d")}},{key:"handleRefresh",value:function(){var e=this;setTimeout((function(){e.scheduleObj.eventSettings.dataSource=e.studentService.getStudentBookings()}),2e3)}}]),e}()).\u0275fac=function(e){return new(e||PJ)(Lo(FT))},PJ.\u0275cmp=gt({type:PJ,selectors:[["app-student-booking"]],viewQuery:function(e,t){var i;1&e&&(pc(VJ,!0),pc(jJ,!0)),2&e&&(hc(i=yc())&&(t.scheduleObj=i.first),hc(i=yc())&&(t.addButton=i.first))},decls:4,vars:3,consts:[[2,"padding","20px"],[1,"Box",2,"width","95%","margin","auto","padding-top","70px"],["width","100%","height","600px",3,"readonly","eventSettings","views","eventRendered"],["scheduleObj",""]],template:function(e,t){1&e&&(jo(0,"body",0),jo(1,"div",1),jo(2,"ejs-schedule",2,3),Ko("eventRendered",(function(e){return t.onEventRendered(e)})),Ho(),Ho(),Ho()),2&e&&(_r(2),Bo("readonly",!0)("eventSettings",t.eventSettings)("views",t.scheduleViews))},directives:[BW],styles:["body[_ngcontent-%COMP%]{background-color:#f9fafc;height:100%}"]}),PJ),UJ=((RJ=function(){function e(t){_classCallCheck2(this,e),this.cookieService=t,this.invalidUrls=["https://backend.fellowgenius.com/fellowGenius/meeting/sendEmail","https://backend.fellowgenius.com/fellowGenius/registerUser","https://backend.fellowgenius.com/fellowGenius/registerSocialLogin","https://backend.fellowgenius.com/authenticate","https://backend.fellowgenius.com/fellowgenius/fetchTutorList"]}return _createClass(e,[{key:"intercept",value:function(e,t){var i=this.cookieService.get("token");return this.isUrlValid(e.url)?(""!=i&&(e=e.clone({setHeaders:{Authorization:"Bearer "+i}})),t.handle(e)):t.handle(e)}},{key:"isUrlValid",value:function(e){return!this.invalidUrls.includes(e)}}]),e}()).\u0275fac=function(e){return new(e||RJ)(Ze(BT))},RJ.\u0275prov=pe({token:RJ,factory:RJ.\u0275fac,providedIn:"root"}),RJ),qJ=function e(){_classCallCheck2(this,e),this.subjects=[],this.price=[],this.ratings=[],this.show=!1},WJ=((LJ=function(){function e(t,i){_classCallCheck2(this,e),this.dialogRef=t,this.subjectFiltersApplied=[],this.priceFiltersApplied=[],this.ratingFilterApplied=[],this.deletionElementFinder=[],this.elementsToBeDeleted=[],this.allFiltersApplied=new qJ,this.allFiltersApplied=i.allFiltersApplied,this.subjectFiltersApplied=i.subjectFiltersApplied,this.priceFiltersApplied=i.priceFiltersApplied,this.ratingFilterApplied=i.ratingFiltersApplied}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"closeDialog",value:function(){this.dialogRef.close({operation:"cancel"})}},{key:"applyFilters",value:function(){this.dialogRef.close({operation:"apply",subjectFilters:this.subjectFiltersApplied,priceFiltersApplied:this.priceFiltersApplied,ratingFilterApplied:this.ratingFilterApplied,allFiltersApplied:this.allFiltersApplied})}},{key:"searchBySubject",value:function(e){var t=e.target.value;0==this.subjectFiltersApplied.length?(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.subjectFiltersApplied,t)?(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(t),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(t),1),0==this.allFiltersApplied.subjects.length&&(this.allFiltersApplied.show=!1)):(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0)}},{key:"searchByPrice",value:function(e){var t=e.target.value;0==this.priceFiltersApplied.length?(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.priceFiltersApplied,t)?(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(t),1),this.allFiltersApplied.price.splice(this.allFiltersApplied.price.indexOf(t),1),0==this.allFiltersApplied.price.length&&(this.allFiltersApplied.show=!1)):(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0)}},{key:"searchByRatings",value:function(e){var t=e.target.value;0==this.ratingFilterApplied.length?(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.ratingFilterApplied,t)?(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(t),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*t),1),0==this.allFiltersApplied.ratings.length&&(this.allFiltersApplied.show=!1)):(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0)}},{key:"removeOrNot",value:function(e,t,i){for(var n=0,r=0;r<e.length;r++)for(var a=0;a<t.length;a++)if(0!=t[a].localeCompare(i)&&0==e[r].area.localeCompare(t[a])){n=1;break}return 0==n}},{key:"checkFiltersApplied",value:function(e,t){if(e.includes(t))return!0}},{key:"checkDuplicacyOfObjectInArray",value:function(e,t){if(e.filter((function(e){return JSON.stringify(e)===JSON.stringify(t)})).length>0)return!0}},{key:"subjectContains",value:function(e){return this.subjectFiltersApplied.includes(e)}},{key:"priceContains",value:function(e){return this.priceFiltersApplied.includes(e)}},{key:"ratingContains",value:function(e){return this.ratingFilterApplied.includes(e)}}]),e}()).\u0275fac=function(e){return new(e||LJ)(Lo(IT),Lo(DT))},LJ.\u0275cmp=gt({type:LJ,selectors:[["app-filters-dialog"]],decls:79,vars:11,consts:[["id","dialog-container",1,"dialog-container"],[1,"content-header"],[1,"content-body"],[1,"filter-container"],[1,"filter-category"],[1,"filter-category-header"],[1,"filter-category-list"],[1,"filters-label"],["type","checkbox","value","English",1,"filter-input",3,"checked","change"],[1,"filter-num"],["type","checkbox","value","100-199",1,"filter-input",3,"checked","change"],["type","checkbox","value","200-399",1,"filter-input",3,"checked","change"],["type","checkbox","value","400-699",1,"filter-input",3,"checked","change"],["type","checkbox","value","700-999",1,"filter-input",3,"checked","change"],["type","checkbox","value","1000-1499",1,"filter-input",3,"checked","change"],["type","checkbox","value","1500-10000",1,"filter-input",3,"checked","change"],["type","checkbox","value","4",1,"filter-input",3,"checked","change"],["type","checkbox","value","3",1,"filter-input",3,"checked","change"],["type","checkbox","value","2",1,"filter-input",3,"checked","change"],["type","checkbox","value","1",1,"filter-input",3,"checked","change"],[1,"dialog-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Ss(2," Apply Filters "),Ho(),jo(3,"div",2),jo(4,"div",3),jo(5,"div",4),jo(6,"span",5),Ss(7,"Subjects"),Ho(),jo(8,"ul",6),jo(9,"li"),jo(10,"label",7),jo(11,"input",8),Ko("change",(function(e){return t.searchBySubject(e)})),Ho(),jo(12,"span"),Ss(13,"English "),jo(14,"label",9),Ss(15,"(123)"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(16,"div",4),jo(17,"span",5),Ss(18,"Price"),Ho(),jo(19,"ul",6),jo(20,"li"),jo(21,"label",7),jo(22,"input",10),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),jo(23,"span"),Ss(24,"100-199"),Ho(),Ho(),Ho(),jo(25,"li"),jo(26,"label",7),jo(27,"input",11),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),jo(28,"span"),Ss(29,"200-399"),Ho(),Ho(),Ho(),jo(30,"li"),jo(31,"label",7),jo(32,"input",12),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),jo(33,"span"),Ss(34,"400-699"),Ho(),Ho(),Ho(),jo(35,"li"),jo(36,"label",7),jo(37,"input",13),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),jo(38,"span"),Ss(39,"700-999"),Ho(),Ho(),Ho(),jo(40,"li"),jo(41,"label",7),jo(42,"input",14),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),jo(43,"span"),Ss(44,"1000-1499"),Ho(),Ho(),Ho(),jo(45,"li"),jo(46,"label",7),jo(47,"input",15),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),jo(48,"span"),Ss(49,"1500+"),Ho(),Ho(),Ho(),Ho(),Ho(),jo(50,"div",4),jo(51,"span",5),Ss(52,"Avg. Reviews"),Ho(),jo(53,"ul",6),jo(54,"li"),jo(55,"label",7),jo(56,"input",16),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),jo(57,"span"),Ss(58,"M4 & up"),Ho(),Ho(),Ho(),jo(59,"li"),jo(60,"label",7),jo(61,"input",17),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),jo(62,"span"),Ss(63,"3 & up"),Ho(),Ho(),Ho(),jo(64,"li"),jo(65,"label",7),jo(66,"input",18),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),jo(67,"span"),Ss(68,"2 & up"),Ho(),Ho(),Ho(),jo(69,"li"),jo(70,"label",7),jo(71,"input",19),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),jo(72,"span"),Ss(73,"1 & up"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(74,"div",20),jo(75,"button",21),Ko("click",(function(){return t.closeDialog()})),Ss(76,"Cancel"),Ho(),jo(77,"button",22),Ko("click",(function(){return t.applyFilters()})),Ss(78,"Apply"),Ho(),Ho(),Ho()),2&e&&(_r(11),Bo("checked",t.subjectContains("English")),_r(11),Bo("checked",t.priceContains("100-199")),_r(5),Bo("checked",t.priceContains("200-399")),_r(5),Bo("checked",t.priceContains("400-699")),_r(5),Bo("checked",t.priceContains("700-999")),_r(5),Bo("checked",t.priceContains("1000-1499")),_r(5),Bo("checked",t.priceContains("1500-10000")),_r(9),Bo("checked",t.ratingContains("4")),_r(5),Bo("checked",t.ratingContains("3")),_r(5),Bo("checked",t.ratingContains("2")),_r(5),Bo("checked",t.ratingContains("1")))},styles:["button[_ngcontent-%COMP%]{margin:5px}.dialog-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100vh;height:calc(var(--vh, 1vh)*100);padding:10px}.content-header[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.content-body[_ngcontent-%COMP%]{padding:10px}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{padding:0;margin:0}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;max-width:50%;word-break:break-all}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{color:#fff;width:auto;background-color:#e30084;padding:5px;border-radius:5px;display:inline-block;margin:5px}.content-body[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-category-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;width:auto;border:1px solid #e30084;padding:5px;border-radius:5px;display:inline-block;margin:5px}.dialog-footer[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;width:100%;text-align:right}"]}),LJ),zJ=((MJ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"transform",value:function(e){return e.length>100?e.substr(0,100)+" ...":e}}]),e}()).\u0275fac=function(e){return new(e||MJ)},MJ.\u0275pipe=St({name:"shorten",type:MJ,pure:!0}),MJ);function GJ(e,t){if(1&e){var i=zo();jo(0,"li",54),jo(1,"a",55),Uo(2,"span",56),jo(3,"span",57),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().deleteSubject(e)})),Ss(4," close "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Bo("innerHTML",n,tr)}}function YJ(e,t){if(1&e){var i=zo();jo(0,"li",54),jo(1,"a",55),Uo(2,"span",56),jo(3,"span",57),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().deletePrice(e)})),Ss(4," close "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Bo("innerHTML",n,tr)}}function KJ(e,t){if(1&e){var i=zo();jo(0,"li",54),jo(1,"a",55),jo(2,"span"),Ss(3),Ho(),jo(4,"span",57),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().deleteRating(e)})),Ss(5," close "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(3),Ts("",n,"\xa0 & up")}}function XJ(e,t){if(1&e){var i=zo();jo(0,"button",58),Ko("click",(function(){return ti(i),$o().showFilters()})),Ss(1," Filter "),Ho()}}function JJ(e,t){1&e&&(jo(0,"span",44),Ss(1,"Subjects"),Ho())}function QJ(e,t){1&e&&(jo(0,"span",44),Ss(1,"Price"),Ho())}function ZJ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Ts("",i.area,", \xa0")}}var $J=function(e){return{"background-image":e}};function eQ(e,t){if(1&e){var i=zo();jo(0,"li",59),Uo(1,"div",60),jo(2,"div",61),Uo(3,"span",62),Uo(4,"span",63),jo(5,"div",64),Uo(6,"div",65),Ho(),Ho(),jo(7,"div",66),jo(8,"div",67),jo(9,"div",68),Ss(10," \u20b9"),Uo(11,"span",69),jo(12,"span",70),Ss(13,"per hour"),Ho(),Ho(),Uo(14,"div",71),jo(15,"div"),Uo(16,"span",72),jo(17,"span",70),Ss(18,"REVIEWS"),Ho(),Ho(),Uo(19,"div",71),jo(20,"div"),Uo(21,"span",72),jo(22,"span",70),Ss(23,"Sessions"),Ho(),Ho(),Ho(),Uo(24,"div",73),Xl(25,"shorten"),jo(26,"div",74),jo(27,"b"),Ss(28," Tutors For"),Ho(),jo(29,"div",75),Po(30,ZJ,2,1,"span",76),Ho(),Ho(),jo(31,"button",77),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).viewProfile(e)})),Ss(32," View Profile "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(1),Bo("ngStyle",ql(12,$J,"url("+n.profilePictureUrl+")")),_r(2),Bo("innerHTML",n.fullName,tr),_r(1),Bo("innerHTML",n.institute,tr),_r(2),us("width",n.rating,"%"),_r(5),Bo("innerHTML",n.price1,tr),_r(5),Bo("innerHTML",n.reviewCount,tr),_r(5),Bo("innerHTML",n.lessonCompleted,tr),_r(3),Bo("innerHTML",Jl(25,10,n.description),tr),_r(6),Bo("ngForOf",n.areaOfExpertise)}}function tQ(e,t){if(1&e&&(jo(0,"div"),Po(1,eQ,33,14,"li",52),Ho()),2&e){var i=$o();_r(1),Bo("ngForOf",i.searchResults)}}function iQ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Ts("",i.area,", \xa0")}}function nQ(e,t){if(1&e){var i=zo();jo(0,"li",59),Uo(1,"div",78),jo(2,"div",61),Uo(3,"span",62),Uo(4,"span",63),jo(5,"div",64),Uo(6,"div",65),Ho(),Ho(),jo(7,"div",66),jo(8,"div",67),jo(9,"div",68),Ss(10," \u20b9"),Uo(11,"span",69),jo(12,"span",70),Ss(13,"per hour"),Ho(),Ho(),Uo(14,"div",71),jo(15,"div"),Uo(16,"span",72),jo(17,"span",70),Ss(18,"REVIEWS"),Ho(),Ho(),Uo(19,"div",71),jo(20,"div"),Uo(21,"span",72),jo(22,"span",70),Ss(23,"Sessions"),Ho(),Ho(),Ho(),Uo(24,"div",73),Xl(25,"shorten"),jo(26,"div",74),jo(27,"b"),Ss(28," Tutors For"),Ho(),jo(29,"div",75),Po(30,iQ,2,1,"span",76),Ho(),Ho(),jo(31,"button",77),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().viewProfile(e)})),Ss(32," View Profile "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(1),Bo("ngStyle",ql(12,$J,"url("+n.profilePictureUrl+")")),_r(2),Bo("innerHTML",n.fullName,tr),_r(1),Bo("innerHTML",n.institute,tr),_r(2),us("width",n.rating,"%"),_r(5),Bo("innerHTML",n.price1,tr),_r(5),Bo("innerHTML",n.reviewCount,tr),_r(5),Bo("innerHTML",n.lessonCompleted,tr),_r(3),Bo("innerHTML",Jl(25,10,n.description),tr),_r(6),Bo("ngForOf",n.areaOfExpertise)}}function rQ(e,t){1&e&&(jo(0,"div",79),Uo(1,"img",80),jo(2,"div",2),jo(3,"span",3),Ss(4,"We're Sorry"),Ho(),jo(5,"span"),Ss(6," We can't seem to find any experts that match your search"),Ho(),Ho(),Ho())}var aQ,oQ=((aQ=function(){function e(t,i,n,r,a,o){_classCallCheck2(this,e),this.router=t,this.httpService=i,this.loginService=n,this.profileService=r,this.matDialog=a,this.activatedRoute=o,this.searchResults=[],this.filteredArray=[],this.allFiltersApplied=new qJ,this.subjectFiltersApplied=[],this.priceFiltersApplied=[],this.ratingFilterApplied=[],this.deletionElementFinder=[],this.elementsToBeDeleted=[],this.showMobileFilterButton=!1,this.getScreenSize()}return _createClass(e,[{key:"getScreenSize",value:function(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth,this.screenWidth<=500?(this.showMobileFilterButton=!0,this.showMobileFilterView=!0):(this.showMobileFilterButton=!1,this.showMobileFilterView=!1)}},{key:"ngOnInit",value:function(){window.screen.width<=500?(this.showMobileFilterButton=!0,this.showMobileFilterView=!0):(this.showMobileFilterButton=!1,this.showMobileFilterView=!1),this.callSearchBySubject=!1,this.callSearchByPrice=!1,this.findFromSearchResult=!1,this.findFromFilterSearch=!1,this.filteredArray=this.searchResults}},{key:"onSignUp",value:function(){this.router.navigate(["signUp"])}},{key:"showFilters",value:function(){var e=new kT;e.data={subjectFiltersApplied:this.subjectFiltersApplied,priceFiltersApplied:this.priceFiltersApplied,ratingFiltersApplied:this.ratingFilterApplied,allFiltersApplied:this.allFiltersApplied},this.matDialog.open(WJ,e)}},{key:"toLoginPage",value:function(){this.router.navigate(["login"])}},{key:"viewProfile",value:function(e){this.profileService.setProfile(e),this.router.navigate(["viewTutors"],{queryParams:{page:e.tid}})}},{key:"fetchTutorList",value:function(){var e=this;this.httpService.getTutorList("Mathematics").subscribe((function(t){e.searchResults=t}))}},{key:"subjectContains",value:function(e){return this.subjectFiltersApplied.includes(e)}},{key:"priceContains",value:function(e){return this.priceFiltersApplied.includes(e)}},{key:"ratingContains",value:function(e){return this.ratingFilterApplied.includes(e)}},{key:"deleteSubject",value:function(e){var t=this;this.subjectFiltersApplied.includes(e)&&(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(e),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e})))}},{key:"deletePrice",value:function(e){var t=this;this.priceFiltersApplied.includes(e)&&(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(e),1),this.allFiltersApplied.price.splice(this.priceFiltersApplied.indexOf(e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e})))}},{key:"deleteRating",value:function(e){var t=this;this.ratingFilterApplied.includes(e)&&(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(e),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e})))}},{key:"searchBySubject",value:function(e){var t=e.target.value;0==this.subjectFiltersApplied.length?(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.subjectFiltersApplied,t)?(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(t),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(t),1),0==this.allFiltersApplied.subjects.length&&(this.allFiltersApplied.show=!1)):(this.subjectFiltersApplied.push(t),this.allFiltersApplied.subjects.push(t),this.allFiltersApplied.show=!0)}},{key:"searchByPrice",value:function(e){var t=e.target.value;0==this.priceFiltersApplied.length?(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.priceFiltersApplied,t)?(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(t),1),this.allFiltersApplied.price.splice(this.allFiltersApplied.price.indexOf(t),1),0==this.allFiltersApplied.price.length&&(this.allFiltersApplied.show=!1)):(this.priceFiltersApplied.push(t),this.allFiltersApplied.price.push(t),this.allFiltersApplied.show=!0)}},{key:"searchByRatings",value:function(e){var t=e.target.value;0==this.ratingFilterApplied.length?(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.ratingFilterApplied,t)?(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(t),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*t),1),0==this.allFiltersApplied.ratings.length&&(this.allFiltersApplied.show=!1)):(this.ratingFilterApplied.push(t),this.allFiltersApplied.ratings.push(20*t),this.allFiltersApplied.show=!0)}},{key:"removeOrNot",value:function(e,t,i){for(var n=0,r=0;r<e.length;r++)for(var a=0;a<t.length;a++)if(0!=t[a].localeCompare(i)&&0==e[r].area.localeCompare(t[a])){n=1;break}return 0==n}},{key:"checkFiltersApplied",value:function(e,t){if(e.includes(t))return!0}},{key:"checkDuplicacyOfObjectInArray",value:function(e,t){if(e.filter((function(e){return JSON.stringify(e)===JSON.stringify(t)})).length>0)return!0}},{key:"clearAllFilters",value:function(){window.location.reload()}},{key:"sort",value:function(e){0==this.allFiltersApplied.price.length&&0==this.allFiltersApplied.ratings.length&&0==this.allFiltersApplied.subjects.length?0==e.target.value.localeCompare("sortLowToHigh")?this.searchResults.sort((function(e,t){return Number(e.price1)-Number(t.price1)})):0==e.target.value.localeCompare("sortHighToLow")&&this.searchResults.sort((function(e,t){return Number(t.price1)-Number(e.price1)})):0==e.target.value.localeCompare("sortLowToHigh")?this.filteredArray.sort((function(e,t){return Number(e.price1)-Number(t.price1)})):0==e.target.value.localeCompare("sortHighToLow")&&this.filteredArray.sort((function(e,t){return Number(t.price1)-Number(e.price1)}))}}]),e}()).\u0275fac=function(e){return new(e||aQ)(Lo(cm),Lo(lk),Lo(gb),Lo(YG),Lo(LT),Lo($f))},aQ.\u0275cmp=gt({type:aQ,selectors:[["app-test"]],hostBindings:function(e,t){1&e&&Ko("resize",(function(e){return t.getScreenSize(e)}),!1,Gi)},decls:130,vars:25,consts:[[1,"work-in-progress",2,"display","none"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"content-container"],[1,"row",2,"margin","0"],[1,"col"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"fliter-tag-container"],[1,"row",2,"margin","0","width","100%"],[1,"col-md-8"],[1,"filters-content"],[1,"nav","nav-pills"],["class","nav-item",4,"ngFor","ngForOf"],["class","btn btn-primary","type","button","style","margin: 10px; z-index: 5",3,"click",4,"ngIf"],[1,"col-md-4",2,"float","right"],[1,"sort-by-container",2,"width","100%"],["href","javascript:;",3,"click"],[2,"margin-left","15px"],[3,"change"],["value","sortLowToHigh"],["value","sortHighToLow"],[1,"search-result-container","rowto"],[1,"filter-container","columnto",3,"hidden"],[1,"filter-category"],["class","filter-category-header",4,"ngIf"],[1,"filter-category-list"],[1,"filters-label"],["type","checkbox","value","English",1,"filter-input",3,"checked","change"],[1,"filter-num"],["type","checkbox","value","Physics",1,"filter-input",3,"checked","change"],["type","checkbox","value","Chemistry",1,"filter-input",3,"checked","change"],["type","checkbox","value","Mathematics",1,"filter-input",3,"checked","change"],["type","checkbox","value","Science",1,"filter-input",3,"checked","change"],[2,"width","50%"],["type","checkbox","value","100-199",1,"filter-input",3,"checked","change"],["type","checkbox","value","200-399",1,"filter-input",3,"checked","change"],["type","checkbox","value","400-699",1,"filter-input",3,"checked","change"],["type","checkbox","value","700-999",1,"filter-input",3,"checked","change"],["type","checkbox","value","1000-1499",1,"filter-input",3,"checked","change"],["type","checkbox","value","1500-10000",1,"filter-input",3,"checked","change"],[1,"filter-category-header"],["type","checkbox","value","4",1,"filter-input",3,"checked","change"],["type","checkbox","value","3",1,"filter-input",3,"checked","change"],["type","checkbox","value","2",1,"filter-input",3,"checked","change"],["type","checkbox","value","1",1,"filter-input",3,"checked","change"],[1,"search-cards-container","columnto"],[1,"rowto"],[4,"ngIf"],["class","search-result-card",4,"ngFor","ngForOf"],["class","no-recordsfound",4,"ngIf"],[1,"nav-item"],[1,"nav-link"],[3,"innerHTML"],[1,"material-icons",3,"click"],["type","button",1,"btn","btn-primary",2,"margin","10px","z-index","5",3,"click"],[1,"search-result-card"],["default","../../assets/images/default-user-image.png",1,"result-profile-pic",3,"ngStyle"],[1,"result-card-header"],[1,"result-card-name",3,"innerHTML"],[1,"result-card-specalizaiton",3,"innerHTML"],[1,"stars-outer"],[1,"stars-inner"],[1,"result-card-content"],[1,"numbers-container"],[1,"fee_per_attribute"],[1,"number",2,"display","contents","color","#7d0f7d",3,"innerHTML"],[1,"info"],[1,"separtor"],[1,"number",3,"innerHTML"],[1,"result-card-descirption",3,"innerHTML"],[1,"result-card-tutorsfor"],[1,"tutor-sub"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"result-profile-pic",3,"ngStyle"],[1,"no-recordsfound"],["src","/assets/images/norecordsfound.svg"]],template:function(e,t){1&e&&(jo(0,"div",0),Uo(1,"img",1),jo(2,"div",2),jo(3,"span",3),Ss(4,"Work in Progress"),Ho(),jo(5,"span"),Ss(6,"For better Tomorrow"),Ho(),Ho(),Ho(),Uo(7,"app-nav-bar"),Uo(8,"app-advertisement-banner"),jo(9,"div",4),jo(10,"div",5),jo(11,"div",6),jo(12,"div",7),jo(13,"ol",8),jo(14,"li"),jo(15,"a",9),Ss(16,"Home"),Ho(),Ho(),jo(17,"li",10),Ss(18,"Data"),Ho(),Ho(),Ho(),Ho(),Ho(),jo(19,"div",11),jo(20,"div",12),jo(21,"div",13),jo(22,"div",14),jo(23,"ul",15),Po(24,GJ,5,1,"li",16),Po(25,YJ,5,1,"li",16),Po(26,KJ,6,1,"li",16),Ho(),Ho(),Po(27,XJ,2,0,"button",17),Ho(),jo(28,"div",18),jo(29,"div",19),jo(30,"span"),jo(31,"a",20),Ko("click",(function(){return t.clearAllFilters()})),Ss(32,"clear filters"),Ho(),Ho(),jo(33,"span",21),Ss(34,"Sort By"),Ho(),jo(35,"select",22),Ko("change",(function(e){return t.sort(e)})),jo(36,"option"),Ss(37,"Price"),Ho(),jo(38,"option",23),Ss(39,"Low to High"),Ho(),jo(40,"option",24),Ss(41,"High to Low"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(42,"div",25),jo(43,"div",26),jo(44,"div",27),Po(45,JJ,2,0,"span",28),jo(46,"ul",29),jo(47,"li"),jo(48,"label",30),jo(49,"input",31),Ko("change",(function(e){return t.searchBySubject(e)})),Ho(),Ss(50,"English "),jo(51,"span",32),Ss(52,"(123)"),Ho(),Ho(),Ho(),jo(53,"li"),jo(54,"label",30),jo(55,"input",33),Ko("change",(function(e){return t.searchBySubject(e)})),Ho(),Ss(56,"Physics "),jo(57,"span",32),Ss(58,"(123)"),Ho(),Ho(),Ho(),jo(59,"li"),jo(60,"label",30),jo(61,"input",34),Ko("change",(function(e){return t.searchBySubject(e)})),Ho(),Ss(62,"Chemistry "),jo(63,"span",32),Ss(64,"(123)"),Ho(),Ho(),Ho(),jo(65,"li"),jo(66,"label",30),jo(67,"input",35),Ko("change",(function(e){return t.searchBySubject(e)})),Ho(),Ss(68,"Mathematics "),jo(69,"span",32),Ss(70,"(123)"),Ho(),Ho(),Ho(),jo(71,"li"),jo(72,"label",30),jo(73,"input",36),Ko("change",(function(e){return t.searchBySubject(e)})),Ho(),Ss(74,"Science "),jo(75,"span",32),Ss(76,"(123)"),Ho(),Ho(),Ho(),Ho(),Ho(),jo(77,"div",27),Po(78,QJ,2,0,"span",28),jo(79,"ul",29),jo(80,"li",37),jo(81,"label",30),jo(82,"input",38),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(83,"100-199 "),Ho(),Ho(),jo(84,"li",37),jo(85,"label",30),jo(86,"input",39),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(87,"200-399 "),Ho(),Ho(),jo(88,"li",37),jo(89,"label",30),jo(90,"input",40),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(91,"400-699 "),Ho(),Ho(),jo(92,"li",37),jo(93,"label",30),jo(94,"input",41),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(95,"700-999 "),Ho(),Ho(),jo(96,"li",37),jo(97,"label",30),jo(98,"input",42),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(99,"1000-1499 "),Ho(),Ho(),jo(100,"li",37),jo(101,"label",30),jo(102,"input",43),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(103,"1500+ "),Ho(),Ho(),Ho(),Ho(),jo(104,"div",27),jo(105,"span",44),Ss(106,"Avg. Reviews"),Ho(),jo(107,"ul",29),jo(108,"li"),jo(109,"label",30),jo(110,"input",45),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(111,"4 & up "),Ho(),Ho(),jo(112,"li"),jo(113,"label",30),jo(114,"input",46),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(115,"3 & up "),Ho(),Ho(),jo(116,"li"),jo(117,"label",30),jo(118,"input",47),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(119,"2 & up "),Ho(),Ho(),jo(120,"li"),jo(121,"label",30),jo(122,"input",48),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(123,"1 & up "),Ho(),Ho(),Ho(),Ho(),Ho(),jo(124,"div",49),jo(125,"ul",50),Po(126,tQ,2,1,"div",51),jo(127,"div"),Po(128,nQ,33,14,"li",52),Ho(),Po(129,rQ,7,0,"div",53),Ho(),Ho(),Ho(),Ho()),2&e&&(_r(24),Bo("ngForOf",t.subjectFiltersApplied),_r(1),Bo("ngForOf",t.priceFiltersApplied),_r(1),Bo("ngForOf",t.ratingFilterApplied),_r(1),Bo("ngIf",t.showMobileFilterButton),_r(16),Bo("hidden",t.showMobileFilterView),_r(2),Bo("ngIf",!t.showMobileFilterView),_r(4),Bo("checked",t.subjectContains("English")),_r(6),Bo("checked",t.subjectContains("Physics")),_r(6),Bo("checked",t.subjectContains("Chemistry")),_r(6),Bo("checked",t.subjectContains("Mathematics")),_r(6),Bo("checked",t.subjectContains("Science")),_r(5),Bo("ngIf",!t.showMobileFilterView),_r(4),Bo("checked",t.priceContains("100-199")),_r(4),Bo("checked",t.priceContains("200-399")),_r(4),Bo("checked",t.priceContains("400-699")),_r(4),Bo("checked",t.priceContains("700-999")),_r(4),Bo("checked",t.priceContains("1000-1499")),_r(4),Bo("checked",t.priceContains("1500-10000")),_r(8),Bo("checked",t.ratingContains("4")),_r(4),Bo("checked",t.ratingContains("3")),_r(4),Bo("checked",t.ratingContains("2")),_r(4),Bo("checked",t.ratingContains("1")),_r(4),Bo("ngIf",0==t.allFiltersApplied.price.length&&0==t.allFiltersApplied.ratings.length&&0==t.allFiltersApplied.subjects.length),_r(2),Bo("ngForOf",t.filteredArray),_r(1),Bo("ngIf",(0!=t.allFiltersApplied.price.length||0!=t.allFiltersApplied.ratings.length||0!=t.allFiltersApplied.subjects.length)&&0==t.filteredArray.length))},directives:[tz,iz,xh,Dh,Hg,Yg,qh],pipes:[zJ],styles:[".starButton[_ngcontent-%COMP%]{background:#fff;border:.2px solid grey;height:13px}.starButton[_ngcontent-%COMP%]:focus{background-color:grey}.hideBlock[_ngcontent-%COMP%]{display:none}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.hideBlock[_ngcontent-%COMP%]{display:none}.search-result-container[_ngcontent-%COMP%]   .search-cards-container[_ngcontent-%COMP%]   .search-result-card[_ngcontent-%COMP%]{margin-top:5rem;margin-left:-10px!important}button[_ngcontent-%COMP%]{position:relative;margin-right:50vw;margin-bottom:10px;left:2vw}}"]}),aQ);function sQ(e,t){if(1&e){var i=zo();jo(0,"li",47),jo(1,"a",48),Uo(2,"span",49),jo(3,"span",50),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().deleteSubject(e)})),Ss(4," close "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Bo("innerHTML",n,tr)}}function lQ(e,t){if(1&e){var i=zo();jo(0,"li",47),jo(1,"a",48),Uo(2,"span",49),jo(3,"span",50),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().deletePrice(e)})),Ss(4," close "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(2),Bo("innerHTML",n,tr)}}function cQ(e,t){if(1&e){var i=zo();jo(0,"li",47),jo(1,"a",48),jo(2,"span"),Ss(3),Ho(),jo(4,"span",50),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().deleteRating(e)})),Ss(5," close "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(3),Ts("",n,"\xa0 & up")}}function uQ(e,t){1&e&&(jo(0,"span",37),Ss(1,"Subjects"),Ho())}function hQ(e,t){if(1&e){var i=zo();jo(0,"li"),jo(1,"label",30),jo(2,"input",51),Ko("change",(function(e){return ti(i),$o().searchBySubject(e)})),Ho(),Ss(3),jo(4,"span",52),Ss(5,"(123)"),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit,r=$o();_r(2),Bo("value",n.subCategory)("checked",r.subjectContains(n.subCategory)),_r(1),Ts("",n.subCategory," ")}}function dQ(e,t){1&e&&(jo(0,"span",37),Ss(1,"Price"),Ho())}function pQ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Ts("",i.subCategory,", \xa0")}}var fQ=function(e){return{"background-image":e}};function vQ(e,t){if(1&e){var i=zo();jo(0,"li",53),Uo(1,"div",54),jo(2,"div",55),Uo(3,"span",56),Uo(4,"span",57),jo(5,"div",58),Uo(6,"div",59),Ho(),Ho(),jo(7,"div",60),jo(8,"div",61),jo(9,"div",62),Ss(10," \u20b9"),Uo(11,"span",63),jo(12,"span",64),Ss(13,"per hour"),Ho(),Ho(),Uo(14,"div",65),jo(15,"div"),jo(16,"a",66),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).viewProfile(e)})),Ho(),jo(17,"a",67),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).viewProfile(e)})),Ss(18,"REVIEWS"),Ho(),Ho(),Uo(19,"div",65),jo(20,"div"),Uo(21,"span",68),jo(22,"span",64),Ss(23,"Sessions"),Ho(),Ho(),Ho(),Uo(24,"div",69),Xl(25,"shorten"),jo(26,"div",70),jo(27,"b"),Ss(28," Tutors For"),Ho(),jo(29,"div",71),Po(30,pQ,2,1,"span",28),Ho(),Ho(),jo(31,"button",72),Ko("click",(function(){ti(i);var e=t.$implicit;return $o(2).viewProfile(e)})),Ss(32," View Profile "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(1),Bo("ngStyle",ql(12,fQ,"url("+n.profilePictureUrl+")")),_r(2),Bo("innerHTML",n.fullName,tr),_r(1),Bo("innerHTML",n.institute,tr),_r(2),us("width",n.rating,"%"),_r(5),Bo("innerHTML",n.price1,tr),_r(5),Bo("innerHTML",n.reviewCount,tr),_r(5),Bo("innerHTML",n.lessonCompleted,tr),_r(3),Bo("innerHTML",Jl(25,10,n.description),tr),_r(6),Bo("ngForOf",n.areaOfExpertise)}}function mQ(e,t){if(1&e&&(jo(0,"div"),Po(1,vQ,33,14,"li",45),Ho()),2&e){var i=$o();_r(1),Bo("ngForOf",i.searchResults)}}function gQ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Ts("",i.subCategory,", \xa0")}}function yQ(e,t){if(1&e){var i=zo();jo(0,"li",53),Uo(1,"div",73),jo(2,"div",55),Uo(3,"span",56),Uo(4,"span",57),jo(5,"div",58),Uo(6,"div",59),Ho(),Ho(),jo(7,"div",60),jo(8,"div",61),jo(9,"div",62),Ss(10," \u20b9"),Uo(11,"span",63),jo(12,"span",64),Ss(13,"per hour"),Ho(),Ho(),Uo(14,"div",65),jo(15,"div"),jo(16,"a",66),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().viewProfile(e)})),Ho(),jo(17,"a",67),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().viewProfile(e)})),Ss(18,"REVIEWS"),Ho(),Ho(),Uo(19,"div",65),jo(20,"div"),Uo(21,"span",68),jo(22,"span",64),Ss(23,"Sessions"),Ho(),Ho(),Ho(),Uo(24,"div",69),Xl(25,"shorten"),jo(26,"div",70),jo(27,"b"),Ss(28," Tutors For"),Ho(),jo(29,"div",71),Po(30,gQ,2,1,"span",28),Ho(),Ho(),jo(31,"button",72),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().viewProfile(e)})),Ss(32," View Profile "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(1),Bo("ngStyle",ql(12,fQ,"url("+n.profilePictureUrl+")")),_r(2),Bo("innerHTML",n.fullName,tr),_r(1),Bo("innerHTML",n.institute,tr),_r(2),us("width",n.rating,"%"),_r(5),Bo("innerHTML",n.price1,tr),_r(5),Bo("innerHTML",n.reviewCount,tr),_r(5),Bo("innerHTML",n.lessonCompleted,tr),_r(3),Bo("innerHTML",Jl(25,10,n.description),tr),_r(6),Bo("ngForOf",n.areaOfExpertise)}}function bQ(e,t){1&e&&(jo(0,"div",74),Uo(1,"img",75),jo(2,"div",76),jo(3,"span",77),Ss(4,"We're Sorry"),Ho(),jo(5,"span"),Ss(6," We can't seem to find any experts that match your search"),Ho(),Ho(),Ho())}var kQ,CQ,wQ,_Q,SQ,EQ=((_Q=function(){function e(t,i,n,r,a,o){_classCallCheck2(this,e),this.router=t,this.httpService=i,this.loginService=n,this.profileService=r,this.matDialog=a,this.activatedRoute=o,this.searchResults=[],this.filteredArray=[],this.subjectFiltersApplied=[],this.priceFiltersApplied=[],this.ratingFilterApplied=[],this.deletionElementFinder=[],this.elementsToBeDeleted=[],this.showMobileFilterButton=!1,this.subCategories=[],this.getScreenSize(),this.allFiltersApplied=new qJ}return _createClass(e,[{key:"getScreenSize",value:function(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth,this.screenWidth<=500?(this.showMobileFilterButton=!0,this.showMobileFilterView=!0):(this.showMobileFilterButton=!1,this.showMobileFilterView=!1)}},{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.queryParams.subscribe((function(t){e.selectedSubject=t.subject})),this.getSubCategories(),window.screen.width<=500?(this.showMobileFilterButton=!0,this.showMobileFilterView=!0):(this.showMobileFilterButton=!1,this.showMobileFilterView=!1),this.callSearchBySubject=!1,this.callSearchByPrice=!1,this.findFromSearchResult=!1,this.findFromFilterSearch=!1,this.fetchTutorList(),this.filteredArray=this.searchResults}},{key:"onSignUp",value:function(){this.router.navigate(["signUp"])}},{key:"getSubCategories",value:function(){var e=this;null!=this.selectedSubject&&this.httpService.getSubCategories(this.selectedSubject).subscribe((function(t){e.subCategories=t,console.log(e.subCategories)}))}},{key:"checkFilters",value:function(){var e,t,i;return this.allFiltersApplied?(this.allFiltersApplied.subjects&&(e=0!=this.allFiltersApplied.subjects.length),this.allFiltersApplied.price&&(i=0!=this.allFiltersApplied.price.length),this.allFiltersApplied.ratings&&(t=0!=this.allFiltersApplied.ratings.length),!!(e||i||t)):(console.log("no filters"),!1)}},{key:"showFilters",value:function(){var e=this,t=new kT;t.data={subjectFiltersApplied:this.subjectFiltersApplied,priceFiltersApplied:this.priceFiltersApplied,ratingFiltersApplied:this.ratingFilterApplied,allFiltersApplied:this.allFiltersApplied},this.matDialog.open(WJ,t).afterClosed().subscribe((function(t){if("apply"==t.operation){if(null!=t.subjectFilters){var i,n=_createForOfIteratorHelper(t.subjectFilters);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.subjectFiltersApplied.includes(r)||e.subjectFiltersApplied.push(r)}}catch(h){n.e(h)}finally{n.f()}}if(null!=t.priceFiltersApplied){var a,o=_createForOfIteratorHelper(t.priceFiltersApplied);try{for(o.s();!(a=o.n()).done;){var s=a.value;e.priceFiltersApplied.includes(s)||e.priceFiltersApplied.push(s)}}catch(h){o.e(h)}finally{o.f()}}if(null!=t.ratingFilterApplied){var l,c=_createForOfIteratorHelper(t.ratingFilterApplied);try{for(c.s();!(l=c.n()).done;){var u=l.value;e.ratingFilterApplied.includes(u)||e.ratingFilterApplied.push(u)}}catch(h){c.e(h)}finally{c.f()}}e.allFiltersApplied=t.allFiltersApplied,e.httpService.applyFilters(e.allFiltersApplied).subscribe((function(t){e.filteredArray=[],e.filteredArray=t}))}}))}},{key:"toLoginPage",value:function(){this.router.navigate(["login"])}},{key:"viewProfile",value:function(e){this.profileService.setProfile(e),this.router.navigate(["viewTutors"],{queryParams:{page:e.bookingId}})}},{key:"fetchTutorList",value:function(){var e=this;this.httpService.getTutorList(this.selectedSubject).subscribe((function(t){e.searchResults=t}))}},{key:"subjectContains",value:function(e){return this.subjectFiltersApplied.includes(e)}},{key:"priceContains",value:function(e){return this.priceFiltersApplied.includes(e)}},{key:"ratingContains",value:function(e){return this.ratingFilterApplied.includes(e)}},{key:"deleteSubject",value:function(e){var t=this;this.subjectFiltersApplied.includes(e)&&(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(e),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e})))}},{key:"deletePrice",value:function(e){var t=this;this.priceFiltersApplied.includes(e)&&(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(e),1),this.allFiltersApplied.price.splice(this.priceFiltersApplied.indexOf(e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e})))}},{key:"deleteRating",value:function(e){var t=this;this.ratingFilterApplied.includes(e)&&(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(e),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*e),1),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e})))}},{key:"searchBySubject",value:function(e){var t=this,i=e.target.value;0==this.subjectFiltersApplied.length?(this.subjectFiltersApplied.push(i),this.allFiltersApplied.subjects.push(i),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.subjectFiltersApplied,i)?(this.subjectFiltersApplied.splice(this.subjectFiltersApplied.indexOf(i),1),this.allFiltersApplied.subjects.splice(this.allFiltersApplied.subjects.indexOf(i),1),0==this.allFiltersApplied.subjects.length&&(this.allFiltersApplied.show=!1)):(this.subjectFiltersApplied.push(i),this.allFiltersApplied.subjects.push(i),this.allFiltersApplied.show=!0),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e}))}},{key:"searchByPrice",value:function(e){var t=this,i=e.target.value;0==this.priceFiltersApplied.length?(this.priceFiltersApplied.push(i),this.allFiltersApplied.price.push(i),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.priceFiltersApplied,i)?(this.priceFiltersApplied.splice(this.priceFiltersApplied.indexOf(i),1),this.allFiltersApplied.price.splice(this.allFiltersApplied.price.indexOf(i),1),0==this.allFiltersApplied.price.length&&(this.allFiltersApplied.show=!1)):(this.priceFiltersApplied.push(i),this.allFiltersApplied.price.push(i),this.allFiltersApplied.show=!0),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e}))}},{key:"searchByRatings",value:function(e){var t=this,i=e.target.value;0==this.ratingFilterApplied.length?(this.ratingFilterApplied.push(i),this.allFiltersApplied.ratings.push(20*i),this.allFiltersApplied.show=!0):this.checkFiltersApplied(this.ratingFilterApplied,i)?(this.ratingFilterApplied.splice(this.ratingFilterApplied.indexOf(i),1),this.allFiltersApplied.ratings.splice(this.allFiltersApplied.ratings.indexOf(20*i),1),0==this.allFiltersApplied.ratings.length&&(this.allFiltersApplied.show=!1)):(this.ratingFilterApplied.push(i),this.allFiltersApplied.ratings.push(20*i),this.allFiltersApplied.show=!0),this.httpService.applyFilters(this.allFiltersApplied).subscribe((function(e){t.filteredArray=[],t.filteredArray=e}))}},{key:"removeOrNot",value:function(e,t,i){for(var n=0,r=0;r<e.length;r++)for(var a=0;a<t.length;a++)if(0!=t[a].localeCompare(i)&&0==e[r].area.localeCompare(t[a])){n=1;break}return 0==n}},{key:"checkFiltersApplied",value:function(e,t){if(e.includes(t))return!0}},{key:"checkDuplicacyOfObjectInArray",value:function(e,t){if(e.filter((function(e){return JSON.stringify(e)===JSON.stringify(t)})).length>0)return!0}},{key:"clearAllFilters",value:function(){window.location.reload()}},{key:"sort",value:function(e){0==this.allFiltersApplied.price.length&&0==this.allFiltersApplied.ratings.length&&0==this.allFiltersApplied.subjects.length?0==e.target.value.localeCompare("priceLowToHigh")?this.searchResults.sort((function(e,t){return Number(e.price1)-Number(t.price1)})):0==e.target.value.localeCompare("priceHighToLow")?this.searchResults.sort((function(e,t){return Number(t.price1)-Number(e.price1)})):0==e.target.value.localeCompare("ratingLowToHigh")?this.searchResults.sort((function(e,t){return e.rating-t.rating})):0==e.target.value.localeCompare("ratingHighToLow")&&this.searchResults.sort((function(e,t){return t.rating-e.rating})):0==e.target.value.localeCompare("priceLowToHigh")?this.filteredArray.sort((function(e,t){return Number(e.price1)-Number(t.price1)})):0==e.target.value.localeCompare("priceHighToLow")?this.filteredArray.sort((function(e,t){return Number(t.price1)-Number(e.price1)})):0==e.target.value.localeCompare("ratingLowToHigh")?this.filteredArray.sort((function(e,t){return e.rating-t.rating})):0==e.target.value.localeCompare("ratingHighToLow")&&this.filteredArray.sort((function(e,t){return t.rating-e.rating}))}}]),e}()).\u0275fac=function(e){return new(e||_Q)(Lo(cm),Lo(lk),Lo(gb),Lo(YG),Lo(LT),Lo($f))},_Q.\u0275cmp=gt({type:_Q,selectors:[["app-search-results"]],hostBindings:function(e,t){1&e&&Ko("resize",(function(e){return t.getScreenSize(e)}),!1,Gi)},decls:96,vars:21,consts:[[1,"content-container"],[1,"row",2,"margin","0"],[1,"col"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active",3,"innerHtml"],[1,"fliter-tag-container"],[1,"row",2,"margin","0","width","100%"],[1,"col-md-8"],[1,"filters-content"],[1,"nav","nav-pills"],["class","nav-item",4,"ngFor","ngForOf"],[1,"col-md-4",2,"float","right"],[1,"sort-by-container",2,"width","100%"],["href","javascript:;",3,"click"],[2,"margin-left","15px"],[3,"change"],["selected","","disabled",""],["value","priceLowToHigh"],["value","priceHighToLow"],["value","ratingLowToHigh"],["value","ratingHighToLow"],[1,"search-result-container","rowto"],[1,"filter-container","columnto",3,"hidden"],[1,"filter-category"],["class","filter-category-header",4,"ngIf"],[1,"filter-category-list"],[4,"ngFor","ngForOf"],[2,"width","50%"],[1,"filters-label"],["type","checkbox","value","100-199",1,"filter-input",3,"checked","change"],["type","checkbox","value","200-399",1,"filter-input",3,"checked","change"],["type","checkbox","value","400-699",1,"filter-input",3,"checked","change"],["type","checkbox","value","700-999",1,"filter-input",3,"checked","change"],["type","checkbox","value","1000-1499",1,"filter-input",3,"checked","change"],["type","checkbox","value","1500-10000",1,"filter-input",3,"checked","change"],[1,"filter-category-header"],["type","checkbox","value","4",1,"filter-input",3,"checked","change"],["type","checkbox","value","3",1,"filter-input",3,"checked","change"],["type","checkbox","value","2",1,"filter-input",3,"checked","change"],["type","checkbox","value","1",1,"filter-input",3,"checked","change"],[1,"search-cards-container","columnto"],[1,"rowto"],[4,"ngIf"],["class","search-result-card",4,"ngFor","ngForOf"],["class","no-recordsfound",4,"ngIf"],[1,"nav-item"],[1,"nav-link"],[3,"innerHTML"],[1,"material-icons",3,"click"],["type","checkbox",1,"filter-input",3,"value","checked","change"],[1,"filter-num"],[1,"search-result-card"],["default","../../assets/images/default-user-image.png",1,"result-profile-pic",3,"ngStyle"],[1,"result-card-header"],[1,"result-card-name",3,"innerHTML"],[1,"result-card-specalizaiton",3,"innerHTML"],[1,"stars-outer"],[1,"stars-inner"],[1,"result-card-content"],[1,"numbers-container"],[1,"fee_per_attribute"],[1,"number",2,"display","contents","color","#7d0f7d",3,"innerHTML"],[1,"info"],[1,"separtor"],["href","javascript:;",1,"number",3,"innerHTML","click"],["href","javascript:;",1,"info",2,"color","black",3,"click"],[1,"number",3,"innerHTML"],[1,"result-card-descirption",3,"innerHTML"],[1,"result-card-tutorsfor"],[1,"tutor-sub"],["type","button",1,"btn","btn-primary",3,"click"],[1,"result-profile-pic",3,"ngStyle"],[1,"no-recordsfound"],["src","/assets/images/norecordsfound.svg"],[1,"information-container"],[1,"noinforheader"]],template:function(e,t){1&e&&(Uo(0,"app-nav-bar"),Uo(1,"app-advertisement-banner"),jo(2,"div",0),jo(3,"div",1),jo(4,"div",2),jo(5,"div",3),jo(6,"ol",4),jo(7,"li"),jo(8,"a",5),Ss(9,"Home"),Ho(),Ho(),Uo(10,"li",6),Ho(),Ho(),Ho(),Ho(),jo(11,"div",7),jo(12,"div",8),jo(13,"div",9),jo(14,"div",10),jo(15,"ul",11),Po(16,sQ,5,1,"li",12),Po(17,lQ,5,1,"li",12),Po(18,cQ,6,1,"li",12),Ho(),Ho(),Ho(),jo(19,"div",13),jo(20,"div",14),jo(21,"span"),jo(22,"a",15),Ko("click",(function(){return t.clearAllFilters()})),Ss(23,"clear filters"),Ho(),Ho(),jo(24,"span",16),Ss(25,"Sort By"),Ho(),jo(26,"select",17),Ko("change",(function(e){return t.sort(e)})),jo(27,"option",18),Ss(28,"Sort"),Ho(),jo(29,"option",19),Ss(30,"Price: Low to High"),Ho(),jo(31,"option",20),Ss(32,"Price: High to Low"),Ho(),jo(33,"option",21),Ss(34,"Rating: Low to High"),Ho(),jo(35,"option",22),Ss(36,"Rating: High to Low"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(37,"div",23),jo(38,"div",24),jo(39,"div",25),Po(40,uQ,2,0,"span",26),jo(41,"ul",27),Po(42,hQ,6,3,"li",28),Ho(),Ho(),jo(43,"div",25),Po(44,dQ,2,0,"span",26),jo(45,"ul",27),jo(46,"li",29),jo(47,"label",30),jo(48,"input",31),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(49,"100-199 "),Ho(),Ho(),jo(50,"li",29),jo(51,"label",30),jo(52,"input",32),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(53,"200-399 "),Ho(),Ho(),jo(54,"li",29),jo(55,"label",30),jo(56,"input",33),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(57,"400-699 "),Ho(),Ho(),jo(58,"li",29),jo(59,"label",30),jo(60,"input",34),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(61,"700-999 "),Ho(),Ho(),jo(62,"li",29),jo(63,"label",30),jo(64,"input",35),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(65,"1000-1499 "),Ho(),Ho(),jo(66,"li",29),jo(67,"label",30),jo(68,"input",36),Ko("change",(function(e){return t.searchByPrice(e)})),Ho(),Ss(69,"1500+ "),Ho(),Ho(),Ho(),Ho(),jo(70,"div",25),jo(71,"span",37),Ss(72,"Avg. Reviews"),Ho(),jo(73,"ul",27),jo(74,"li"),jo(75,"label",30),jo(76,"input",38),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(77,"4 & up "),Ho(),Ho(),jo(78,"li"),jo(79,"label",30),jo(80,"input",39),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(81,"3 & up "),Ho(),Ho(),jo(82,"li"),jo(83,"label",30),jo(84,"input",40),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(85,"2 & up "),Ho(),Ho(),jo(86,"li"),jo(87,"label",30),jo(88,"input",41),Ko("change",(function(e){return t.searchByRatings(e)})),Ho(),Ss(89,"1 & up "),Ho(),Ho(),Ho(),Ho(),Ho(),jo(90,"div",42),jo(91,"ul",43),Po(92,mQ,2,1,"div",44),jo(93,"div"),Po(94,yQ,33,14,"li",45),Ho(),Po(95,bQ,7,0,"div",46),Ho(),Ho(),Ho(),Ho()),2&e&&(_r(10),Bo("innerHtml",t.selectedSubject,tr),_r(6),Bo("ngForOf",t.subjectFiltersApplied),_r(1),Bo("ngForOf",t.priceFiltersApplied),_r(1),Bo("ngForOf",t.ratingFilterApplied),_r(20),Bo("hidden",t.showMobileFilterView),_r(2),Bo("ngIf",!t.showMobileFilterView),_r(2),Bo("ngForOf",t.subCategories),_r(2),Bo("ngIf",!t.showMobileFilterView),_r(4),Bo("checked",t.priceContains("100-199")),_r(4),Bo("checked",t.priceContains("200-399")),_r(4),Bo("checked",t.priceContains("400-699")),_r(4),Bo("checked",t.priceContains("700-999")),_r(4),Bo("checked",t.priceContains("1000-1499")),_r(4),Bo("checked",t.priceContains("1500-10000")),_r(8),Bo("checked",t.ratingContains("4")),_r(4),Bo("checked",t.ratingContains("3")),_r(4),Bo("checked",t.ratingContains("2")),_r(4),Bo("checked",t.ratingContains("1")),_r(4),Bo("ngIf",0==t.allFiltersApplied.price.length&&0==t.allFiltersApplied.ratings.length&&0==t.allFiltersApplied.subjects.length),_r(2),Bo("ngForOf",t.filteredArray),_r(1),Bo("ngIf",0==t.searchResults.length&&0==t.filteredArray.length||t.checkFilters()&&0==t.filteredArray.length))},directives:[tz,iz,xh,Hg,Yg,Dh,qh],pipes:[zJ],styles:[".starButton[_ngcontent-%COMP%]{background:#fff;border:.2px solid grey;height:13px}.starButton[_ngcontent-%COMP%]:focus{background-color:grey}.hideBlock[_ngcontent-%COMP%]{display:none}@media only screen and (min-device-width:320px) and (max-device-width:812px) and (-webkit-min-device-pixel-ratio:2){.hideBlock[_ngcontent-%COMP%]{display:none}.search-result-container[_ngcontent-%COMP%]   .search-cards-container[_ngcontent-%COMP%]   .search-result-card[_ngcontent-%COMP%]{margin-top:1rem;margin-left:-10px!important}button[_ngcontent-%COMP%]{position:relative;margin-right:50vw;margin-bottom:10px;left:2vw}}.marginZero[_ngcontent-%COMP%]{margin:zero}"]}),_Q),TQ=((wQ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||wQ)},wQ.\u0275cmp=gt({type:wQ,selectors:[["app-knowledge-base"]],decls:55,vars:0,consts:[[2,"padding-top","90px"],[1,"work-in-progress"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"primary-container",2,"display","none"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"sort-container",2,"right","0"],[2,"margin-right","1rem"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],["href","javascript:;",1,"dropdown-item"],[1,"content-container"],["scope","col"],["scope","row","data-label","Thumbnail"],["src","assets/images/thumbnail_img.png"],["data-label","Name,Date,Duration",1,"name-information"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Uo(2,"img",2),jo(3,"div",3),jo(4,"span",4),Ss(5,"Work in Progress"),Ho(),jo(6,"span"),Ss(7,"For better Tomorrow"),Ho(),Ho(),Ho(),Ho(),jo(8,"div",5),jo(9,"div",6),jo(10,"ol",7),jo(11,"li"),jo(12,"a",8),Ss(13,"Home"),Ho(),Ho(),jo(14,"li",9),Ss(15,"Knowledge Base"),Ho(),Ho(),Ho(),jo(16,"div",10),jo(17,"span"),jo(18,"select",11),jo(19,"option"),Ss(20,"Sort By"),Ho(),jo(21,"option"),Ss(22,"Option 1"),Ho(),Ho(),Ho(),jo(23,"span",12),jo(24,"button",13),Ss(25," Upload "),Ho(),jo(26,"div",14),jo(27,"a",15),Ss(28,"Web Link"),Ho(),jo(29,"a",15),Ss(30,"Upload File"),Ho(),Ho(),Ho(),Ho(),jo(31,"div",16),jo(32,"table"),jo(33,"thead"),jo(34,"tr"),jo(35,"th",17),Ss(36,"Thumbnail"),Ho(),jo(37,"th",17),Ss(38,"Name,Date,Duration"),Ho(),Ho(),Ho(),jo(39,"tbody"),jo(40,"tr"),jo(41,"td",18),Uo(42,"img",19),Ho(),jo(43,"td",20),jo(44,"span"),Ss(45,"By:Name"),Ho(),jo(46,"span"),Ss(47,"August 4th 2020, 10:30 PM"),Ho(),jo(48,"span"),Ss(49,"30 mins"),Ho(),Ho(),Ho(),jo(50,"tr"),jo(51,"td",18),Uo(52,"img",19),Ho(),jo(53,"td",20),Ss(54,"@mdo"),Ho(),Ho(),Ho(),Ho(),Ho(),Ho())},directives:[Hg,Yg],styles:[".sort-container[_ngcontent-%COMP%]{margin-bottom:2rem;display:inline-flex;right:1rem;text-align:right;margin-top:1 rem}.form-control[_ngcontent-%COMP%]{float:right}"]}),wQ),AQ=((CQ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||CQ)},CQ.\u0275cmp=gt({type:CQ,selectors:[["app-session-notes"]],decls:72,vars:0,consts:[[2,"padding-top","90px"],[1,"work-in-progress"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"primary-container",2,"display","none"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"sort-container"],[1,"content-container"],[1,"button-subject-container"],[1,"buttons-for-subject"],[1,"button-for-text"],[1,"subject-name"],[1,"subject-information"],[1,"button-for-icon"],[1,"fa","fa-angle-double-right"],["scope","col"],["scope","row","data-label","Thumbnail"],["src","assets/images/thumbnail_img.png"],["data-label","Name,Date,Duration",1,"name-information"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Uo(2,"img",2),jo(3,"div",3),jo(4,"span",4),Ss(5,"Work in Progress"),Ho(),jo(6,"span"),Ss(7,"For better Tomorrow"),Ho(),Ho(),Ho(),Ho(),jo(8,"div",5),jo(9,"div",6),jo(10,"ol",7),jo(11,"li"),jo(12,"a",8),Ss(13,"Home"),Ho(),Ho(),jo(14,"li",9),Ss(15,"Recordings"),Ho(),Ho(),Ho(),jo(16,"div",10),jo(17,"select"),jo(18,"option"),Ss(19,"Sort By"),Ho(),jo(20,"option"),Ss(21,"Option 1"),Ho(),Ho(),Ho(),jo(22,"div",11),jo(23,"div",12),jo(24,"a",13),jo(25,"div",14),jo(26,"span",15),Ss(27," Physics"),Ho(),jo(28,"span",16),Ss(29," 8 Recordings"),Ho(),Ho(),jo(30,"div",17),Uo(31,"span",18),Ho(),Ho(),jo(32,"a",13),jo(33,"div",14),jo(34,"span",15),Ss(35," Physics"),Ho(),jo(36,"span",16),Ss(37," 8 Recordings"),Ho(),Ho(),jo(38,"div",17),Uo(39,"span",18),Ho(),Ho(),jo(40,"a",13),jo(41,"div",14),jo(42,"span",15),Ss(43," Physics"),Ho(),jo(44,"span",16),Ss(45," 8 Recordings"),Ho(),Ho(),jo(46,"div",17),Uo(47,"span",18),Ho(),Ho(),Ho(),jo(48,"div",11),jo(49,"table"),jo(50,"thead"),jo(51,"tr"),jo(52,"th",19),Ss(53,"Thumbnail"),Ho(),jo(54,"th",19),Ss(55,"Name,Date,Duration"),Ho(),Ho(),Ho(),jo(56,"tbody"),jo(57,"tr"),jo(58,"td",20),Uo(59,"img",21),Ho(),jo(60,"td",22),jo(61,"span"),Ss(62,"By:Name"),Ho(),jo(63,"span"),Ss(64,"August 4th 2020, 10:30 PM"),Ho(),jo(65,"span"),Ss(66,"30 mins"),Ho(),Ho(),Ho(),jo(67,"tr"),jo(68,"td",20),Uo(69,"img",21),Ho(),jo(70,"td",22),Ss(71," @mdo "),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho())},directives:[Hg,Yg],styles:[""]}),CQ),OQ=((kQ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||kQ)},kQ.\u0275cmp=gt({type:kQ,selectors:[["app-recordings"]],decls:72,vars:0,consts:[[2,"padding-top","90px"],[1,"work-in-progress"],["src","/assets/images/workinprogress.svg"],[1,"information-container"],[1,"noinforheader"],[1,"primary-container",2,"display","none"],[1,"breadcrumb-container"],[1,"breadcrumb"],["href","#"],[1,"active"],[1,"sort-container"],[1,"content-container"],[1,"button-subject-container"],[1,"buttons-for-subject"],[1,"button-for-text"],[1,"subject-name"],[1,"subject-information"],[1,"button-for-icon"],[1,"fa","fa-angle-double-right"],["scope","col"],["scope","row","data-label","Thumbnail"],["src","assets/images/thumbnail_img.png"],["data-label","Name,Date,Duration",1,"name-information"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Uo(2,"img",2),jo(3,"div",3),jo(4,"span",4),Ss(5,"Work in Progress"),Ho(),jo(6,"span"),Ss(7,"For better Tomorrow"),Ho(),Ho(),Ho(),Ho(),jo(8,"div",5),jo(9,"div",6),jo(10,"ol",7),jo(11,"li"),jo(12,"a",8),Ss(13,"Home"),Ho(),Ho(),jo(14,"li",9),Ss(15,"Recordings"),Ho(),Ho(),Ho(),jo(16,"div",10),jo(17,"select"),jo(18,"option"),Ss(19,"Sort By"),Ho(),jo(20,"option"),Ss(21,"Option 1"),Ho(),Ho(),Ho(),jo(22,"div",11),jo(23,"div",12),jo(24,"a",13),jo(25,"div",14),jo(26,"span",15),Ss(27," Physics"),Ho(),jo(28,"span",16),Ss(29," 8 Recordings"),Ho(),Ho(),jo(30,"div",17),Uo(31,"span",18),Ho(),Ho(),jo(32,"a",13),jo(33,"div",14),jo(34,"span",15),Ss(35," Physics"),Ho(),jo(36,"span",16),Ss(37," 8 Recordings"),Ho(),Ho(),jo(38,"div",17),Uo(39,"span",18),Ho(),Ho(),jo(40,"a",13),jo(41,"div",14),jo(42,"span",15),Ss(43," Physics"),Ho(),jo(44,"span",16),Ss(45," 8 Recordings"),Ho(),Ho(),jo(46,"div",17),Uo(47,"span",18),Ho(),Ho(),Ho(),jo(48,"div",11),jo(49,"table"),jo(50,"thead"),jo(51,"tr"),jo(52,"th",19),Ss(53,"Thumbnail"),Ho(),jo(54,"th",19),Ss(55,"Name,Date,Duration"),Ho(),Ho(),Ho(),jo(56,"tbody"),jo(57,"tr"),jo(58,"td",20),Uo(59,"img",21),Ho(),jo(60,"td",22),jo(61,"span"),Ss(62,"By:Name"),Ho(),jo(63,"span"),Ss(64,"August 4th 2020, 10:30 PM"),Ho(),jo(65,"span"),Ss(66,"30 mins"),Ho(),Ho(),Ho(),jo(67,"tr"),jo(68,"td",20),Uo(69,"img",21),Ho(),jo(70,"td",22),Ss(71," @mdo "),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),Ho())},directives:[Hg,Yg],styles:[""]}),kQ),xQ=function e(){_classCallCheck2(this,e),this.isStartDate=!1,this.isEndDate=!1},IQ=((SQ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"nativeWindow",get:function(){return window}}]),e}()).\u0275fac=function(e){return new(e||SQ)},SQ.\u0275prov=pe({token:SQ,factory:SQ.\u0275fac,providedIn:"root"}),SQ),DQ=["trigger"],RQ=["panel"];function PQ(e,t){if(1&e&&(jo(0,"span",8),Ss(1),Ho()),2&e){var i=$o();_r(1),Es(i.placeholder||"\xa0")}}function MQ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=$o(2);_r(1),Es(i.triggerValue||"\xa0")}}function LQ(e,t){1&e&&is(0,0,["*ngSwitchCase","true"])}function NQ(e,t){1&e&&(jo(0,"span",9),Po(1,MQ,2,1,"span",10),Po(2,LQ,1,0,void 0,11),Ho()),2&e&&(Bo("ngSwitch",!!$o().customTrigger),_r(2),Bo("ngSwitchCase",!0))}function FQ(e,t){if(1&e){var i=zo();jo(0,"div",12),jo(1,"div",13,14),Ko("@transformPanel.done",(function(e){return ti(i),$o()._panelDoneAnimatingStream.next(e.toState)}))("keydown",(function(e){return ti(i),$o()._handleKeydown(e)})),is(3,1),Ho(),Ho()}if(2&e){var n=$o();Bo("@transformPanelWrap",void 0),_r(1),r=n._getPanelTheme(),vs(ct,ps,Ro($t(),"mat-select-panel ",r,""),!0),us("transform-origin",n._transformOrigin)("font-size",n._triggerFontSize,"px"),Bo("ngClass",n.panelClass)("@transformPanel",n.multiple?"showing-multiple":"showing"),Do("id",n.id+"-panel")}var r}var BQ,VQ,jQ,HQ,UQ,qQ=[[["mat-select-trigger"]],"*"],WQ=["mat-select-trigger","*"],zQ={transformPanelWrap:t_("transformPanelWrap",[o_("* => void",function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:11,selector:e,animation:t,options:i}}("@transformPanel",[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:9,options:e}}()],{optional:!0}))]),transformPanel:t_("transformPanel",[a_("void",r_({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),a_("showing",r_({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),a_("showing-multiple",r_({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),o_("void => *",i_("120ms cubic-bezier(0, 0, 0.2, 1)")),o_("* => void",i_("100ms 25ms linear",r_({opacity:0})))])},GQ=0,YQ=new qe("mat-select-scroll-strategy"),KQ=new qe("MAT_SELECT_CONFIG"),XQ={provide:YQ,deps:[fw],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},JQ=function e(t,i){_classCallCheck2(this,e),this.source=t,this.value=i},QQ=VE(jE(FE(function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;_classCallCheck2(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).errorState=!1,e.stateChanges=new x,e}return _createClass(i,[{key:"updateErrorState",value:function(){var e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}]),i}((function e(t,i,n,r,a){_classCallCheck2(this,e),this._elementRef=t,this._defaultErrorStateMatcher=i,this._parentForm=n,this._parentFormGroup=r,this.ngControl=a}))))),ZQ=((UQ=function e(){_classCallCheck2(this,e)}).\u0275fac=function(e){return new(e||UQ)},UQ.\u0275dir=_t({type:UQ,selectors:[["mat-select-trigger"]]}),UQ),$Q=((HQ=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,r,a,o,s,l,c,u,h,d,p,f,v){var m;return _classCallCheck2(this,i),(m=t.call(this,o,a,l,c,h))._viewportRuler=e,m._changeDetectorRef=n,m._ngZone=r,m._dir=s,m._parentFormField=u,m.ngControl=h,m._liveAnnouncer=f,m._panelOpen=!1,m._required=!1,m._scrollTop=0,m._multiple=!1,m._compareWith=function(e,t){return e===t},m._uid="mat-select-"+GQ++,m._destroy=new x,m._triggerFontSize=0,m._onChange=function(){},m._onTouched=function(){},m._optionIds="",m._transformOrigin="top",m._panelDoneAnimatingStream=new x,m._offsetY=0,m._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],m._disableOptionCentering=!1,m._focused=!1,m.controlType="mat-select",m.ariaLabel="",m.optionSelectionChanges=tp((function(){var e=m.options;return e?e.changes.pipe(Dp(e),Ap((function(){return J.apply(void 0,_toConsumableArray2(e.map((function(e){return e.onSelectionChange}))))}))):m._ngZone.onStable.asObservable().pipe(Cp(1),Ap((function(){return m.optionSelectionChanges})))})),m.openedChange=new ec,m._openedStream=m.openedChange.pipe(np((function(e){return e})),j((function(){}))),m._closedStream=m.openedChange.pipe(np((function(e){return!e})),j((function(){}))),m.selectionChange=new ec,m.valueChange=new ec,m.ngControl&&(m.ngControl.valueAccessor=_assertThisInitialized(m)),m._scrollStrategyFactory=p,m._scrollStrategy=m._scrollStrategyFactory(),m.tabIndex=parseInt(d)||0,m.id=m.id,v&&(null!=v.disableOptionCentering&&(m.disableOptionCentering=v.disableOptionCentering),null!=v.typeaheadDebounceInterval&&(m.typeaheadDebounceInterval=v.typeaheadDebounceInterval)),m}return _createClass(i,[{key:"ngOnInit",value:function(){var e=this;this._selectionModel=new mC(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((function(e){return e.lift(new Ak(void 0,void 0))}),Nk(this._destroy)).subscribe((function(){e.panelOpen?(e._scrollTop=0,e.openedChange.emit(!0)):(e.openedChange.emit(!1),e.overlayDir.offsetX=0,e._changeDetectorRef.markForCheck())})),this._viewportRuler.change().pipe(Nk(this._destroy)).subscribe((function(){e._panelOpen&&(e._triggerRect=e.trigger.nativeElement.getBoundingClientRect(),e._changeDetectorRef.markForCheck())}))}},{key:"ngAfterContentInit",value:function(){var e=this;this._initKeyManager(),this._selectionModel.changed.pipe(Nk(this._destroy)).subscribe((function(e){e.added.forEach((function(e){return e.select()})),e.removed.forEach((function(e){return e.deselect()}))})),this.options.changes.pipe(Dp(null),Nk(this._destroy)).subscribe((function(){e._resetOptions(),e._initializeSelection()}))}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState()}},{key:"ngOnChanges",value:function(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}},{key:"ngOnDestroy",value:function(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}},{key:"toggle",value:function(){this.panelOpen?this.close():this.open()}},{key:"open",value:function(){var e=this;!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(Cp(1)).subscribe((function(){e._triggerFontSize&&e.overlayDir.overlayRef&&e.overlayDir.overlayRef.overlayElement&&(e.overlayDir.overlayRef.overlayElement.style.fontSize=e._triggerFontSize+"px")})))}},{key:"close",value:function(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}},{key:"writeValue",value:function(e){this.options&&this._setSelectionByValue(e)}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_isRtl",value:function(){return!!this._dir&&"rtl"===this._dir.value}},{key:"_handleKeydown",value:function(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}},{key:"_handleClosedKeydown",value:function(e){var t=e.keyCode,i=40===t||38===t||37===t||39===t,n=13===t||32===t,r=this._keyManager;if(!r.isTyping()&&n&&!MC(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){var a=this.selected;36===t||35===t?(36===t?r.setFirstItemActive():r.setLastItemActive(),e.preventDefault()):r.onKeydown(e);var o=this.selected;o&&a!==o&&this._liveAnnouncer.announce(o.viewValue,1e4)}}},{key:"_handleOpenKeydown",value:function(e){var t=this._keyManager,i=e.keyCode,n=40===i||38===i,r=t.isTyping();if(36===i||35===i)e.preventDefault(),36===i?t.setFirstItemActive():t.setLastItemActive();else if(n&&e.altKey)e.preventDefault(),this.close();else if(r||13!==i&&32!==i||!t.activeItem||MC(e))if(!r&&this._multiple&&65===i&&e.ctrlKey){e.preventDefault();var a=this.options.some((function(e){return!e.disabled&&!e.selected}));this.options.forEach((function(e){e.disabled||(a?e.select():e.deselect())}))}else{var o=t.activeItemIndex;t.onKeydown(e),this._multiple&&n&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==o&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}},{key:"_onFocus",value:function(){this.disabled||(this._focused=!0,this.stateChanges.next())}},{key:"_onBlur",value:function(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}},{key:"_onAttached",value:function(){var e=this;this.overlayDir.positionChange.pipe(Cp(1)).subscribe((function(){e._changeDetectorRef.detectChanges(),e._calculateOverlayOffsetX(),e.panel.nativeElement.scrollTop=e._scrollTop}))}},{key:"_getPanelTheme",value:function(){return this._parentFormField?"mat-"+this._parentFormField.color:""}},{key:"_initializeSelection",value:function(){var e=this;Promise.resolve().then((function(){e._setSelectionByValue(e.ngControl?e.ngControl.value:e._value),e.stateChanges.next()}))}},{key:"_setSelectionByValue",value:function(e){var t=this;if(this.multiple&&e){if(!Array.isArray(e))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),e.forEach((function(e){return t._selectValue(e)})),this._sortValues()}else{this._selectionModel.clear();var i=this._selectValue(e);i?this._keyManager.setActiveItem(i):this.panelOpen||this._keyManager.setActiveItem(-1)}this._changeDetectorRef.markForCheck()}},{key:"_selectValue",value:function(e){var t=this,i=this.options.find((function(i){try{return null!=i.value&&t._compareWith(i.value,e)}catch(n){return xn()&&console.warn(n),!1}}));return i&&this._selectionModel.select(i),i}},{key:"_initKeyManager",value:function(){var e=this;this._keyManager=new Mw(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Nk(this._destroy)).subscribe((function(){e.panelOpen&&(!e.multiple&&e._keyManager.activeItem&&e._keyManager.activeItem._selectViaInteraction(),e.focus(),e.close())})),this._keyManager.change.pipe(Nk(this._destroy)).subscribe((function(){e._panelOpen&&e.panel?e._scrollActiveOptionIntoView():e._panelOpen||e.multiple||!e._keyManager.activeItem||e._keyManager.activeItem._selectViaInteraction()}))}},{key:"_resetOptions",value:function(){var e=this,t=J(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Nk(t)).subscribe((function(t){e._onSelect(t.source,t.isUserInput),t.isUserInput&&!e.multiple&&e._panelOpen&&(e.close(),e.focus())})),J.apply(void 0,_toConsumableArray2(this.options.map((function(e){return e._stateChanges})))).pipe(Nk(t)).subscribe((function(){e._changeDetectorRef.markForCheck(),e.stateChanges.next()})),this._setOptionIds()}},{key:"_onSelect",value:function(e,t){var i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}},{key:"_sortValues",value:function(){var e=this;if(this.multiple){var t=this.options.toArray();this._selectionModel.sort((function(i,n){return e.sortComparator?e.sortComparator(i,n,t):t.indexOf(i)-t.indexOf(n)})),this.stateChanges.next()}}},{key:"_propagateChanges",value:function(e){var t;t=this.multiple?this.selected.map((function(e){return e.value})):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(new JQ(this,t)),this._changeDetectorRef.markForCheck()}},{key:"_setOptionIds",value:function(){this._optionIds=this.options.map((function(e){return e.id})).join(" ")}},{key:"_highlightCorrectOption",value:function(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}},{key:"_scrollActiveOptionIntoView",value:function(){var e=this._keyManager.activeItemIndex||0,t=fT(e,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=vT(e+t,this._getItemHeight(),this.panel.nativeElement.scrollTop,256)}},{key:"focus",value:function(e){this._elementRef.nativeElement.focus(e)}},{key:"_getOptionIndex",value:function(e){return this.options.reduce((function(t,i,n){return void 0!==t?t:e===i?n:void 0}),void 0)}},{key:"_calculateOverlayPosition",value:function(){var e=this._getItemHeight(),t=this._getItemCount(),i=Math.min(t*e,256),n=t*e-i,r=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);r+=fT(r,this.options,this.optionGroups);var a=i/2;this._scrollTop=this._calculateOverlayScroll(r,a,n),this._offsetY=this._calculateOverlayOffsetY(r,a,n),this._checkOverlayWithinViewport(n)}},{key:"_calculateOverlayScroll",value:function(e,t,i){var n=this._getItemHeight();return Math.min(Math.max(0,n*e-t+n/2),i)}},{key:"_getAriaLabel",value:function(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}},{key:"_getAriaLabelledby",value:function(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}},{key:"_getAriaActiveDescendant",value:function(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}},{key:"_calculateOverlayOffsetX",value:function(){var e,t=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),n=this._isRtl(),r=this.multiple?56:32;if(this.multiple)e=40;else{var a=this._selectionModel.selected[0]||this.options.first;e=a&&a.group?32:16}n||(e*=-1);var o=0-(t.left+e-(n?r:0)),s=t.right+e-i.width+(n?0:r);o>0?e+=o+8:s>0&&(e-=s+8),this.overlayDir.offsetX=Math.round(e),this.overlayDir.overlayRef.updatePosition()}},{key:"_calculateOverlayOffsetY",value:function(e,t,i){var n,r=this._getItemHeight(),a=(r-this._triggerRect.height)/2,o=Math.floor(256/r);return this._disableOptionCentering?0:(n=0===this._scrollTop?e*r:this._scrollTop===i?(e-(this._getItemCount()-o))*r+(r-(this._getItemCount()*r-256)%r):t-r/2,Math.round(-1*n-a))}},{key:"_checkOverlayWithinViewport",value:function(e){var t=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),n=this._triggerRect.top-8,r=i.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-a-this._triggerRect.height;o>r?this._adjustPanelUp(o,r):a>n?this._adjustPanelDown(a,n,e):this._transformOrigin=this._getOriginBasedOnOption()}},{key:"_adjustPanelUp",value:function(e,t){var i=Math.round(e-t);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}},{key:"_adjustPanelDown",value:function(e,t,i){var n=Math.round(e-t);if(this._scrollTop+=n,this._offsetY+=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}},{key:"_getOriginBasedOnOption",value:function(){var e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return"50% ".concat(Math.abs(this._offsetY)-t+e/2,"px 0px")}},{key:"_getItemCount",value:function(){return this.options.length+this.optionGroups.length}},{key:"_getItemHeight",value:function(){return 3*this._triggerFontSize}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"onContainerClick",value:function(){this.focus(),this.open()}},{key:"focused",get:function(){return this._focused||this._panelOpen}},{key:"placeholder",get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()}},{key:"required",get:function(){return this._required},set:function(e){this._required=uk(e),this.stateChanges.next()}},{key:"multiple",get:function(){return this._multiple},set:function(e){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=uk(e)}},{key:"disableOptionCentering",get:function(){return this._disableOptionCentering},set:function(e){this._disableOptionCentering=uk(e)}},{key:"compareWith",get:function(){return this._compareWith},set:function(e){if("function"!=typeof e)throw Error("`compareWith` must be a function.");this._compareWith=e,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this.writeValue(e),this._value=e)}},{key:"typeaheadDebounceInterval",get:function(){return this._typeaheadDebounceInterval},set:function(e){this._typeaheadDebounceInterval=hk(e)}},{key:"id",get:function(){return this._id},set:function(e){this._id=e||this._uid,this.stateChanges.next()}},{key:"panelOpen",get:function(){return this._panelOpen}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"triggerValue",get:function(){if(this.empty)return"";if(this._multiple){var e=this._selectionModel.selected.map((function(e){return e.viewValue}));return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}},{key:"empty",get:function(){return!this._selectionModel||this._selectionModel.isEmpty()}},{key:"shouldLabelFloat",get:function(){return this._panelOpen||!this.empty}}]),i}(QQ)).\u0275fac=function(e){return new(e||HQ)(Lo(bC),Lo(Qa),Lo(Wc),Lo(KE),Lo($s),Lo(fC,8),Lo(My,8),Lo(Ky,8),Lo(LO,8),Lo(sg,10),No("tabindex"),Lo(YQ),Lo(Ww),Lo(KQ,8))},HQ.\u0275cmp=gt({type:HQ,selectors:[["mat-select"]],contentQueries:function(e,t,i){var n;1&e&&(vc(i,ZQ,!0),vc(i,pT,!0),vc(i,lT,!0)),2&e&&(hc(n=yc())&&(t.customTrigger=n.first),hc(n=yc())&&(t.options=n),hc(n=yc())&&(t.optionGroups=n))},viewQuery:function(e,t){var i;1&e&&(pc(DQ,!0),pc(RQ,!0),pc(yw,!0)),2&e&&(hc(i=yc())&&(t.trigger=i.first),hc(i=yc())&&(t.panel=i.first),hc(i=yc())&&(t.overlayDir=i.first))},hostAttrs:["role","listbox",1,"mat-select"],hostVars:19,hostBindings:function(e,t){1&e&&Ko("keydown",(function(e){return t._handleKeydown(e)}))("focus",(function(){return t._onFocus()}))("blur",(function(){return t._onBlur()})),2&e&&(Do("id",t.id)("tabindex",t.tabIndex)("aria-label",t._getAriaLabel())("aria-labelledby",t._getAriaLabelledby())("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-owns",t.panelOpen?t._optionIds:null)("aria-multiselectable",t.multiple)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),hs("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],id:"id",disableOptionCentering:"disableOptionCentering",typeaheadDebounceInterval:"typeaheadDebounceInterval",placeholder:"placeholder",required:"required",multiple:"multiple",compareWith:"compareWith",value:"value",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[Xs([{provide:gO,useExisting:HQ},{provide:dT,useExisting:HQ}]),Ps,Vs],ngContentSelectors:WQ,decls:9,vars:9,consts:[["cdk-overlay-origin","","aria-hidden","true",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder"],[1,"mat-select-value-text",3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-panel-wrap"],[3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(ts(qQ),jo(0,"div",0,1),Ko("click",(function(){return t.toggle()})),jo(3,"div",2),Po(4,PQ,2,1,"span",3),Po(5,NQ,3,2,"span",4),Ho(),jo(6,"div",5),Uo(7,"div",6),Ho(),Ho(),Po(8,FQ,4,11,"ng-template",7),Ko("backdropClick",(function(){return t.close()}))("attach",(function(){return t._onAttached()}))("detach",(function(){return t.close()}))),2&e){var i=Mo(1);_r(3),Bo("ngSwitch",t.empty),_r(1),Bo("ngSwitchCase",!0),_r(1),Bo("ngSwitchCase",!1),_r(3),Bo("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[gw,jh,Hh,yw,Uh,Ah],styles:[".mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}\n"],encapsulation:2,data:{animation:[zQ.transformPanelWrap,zQ.transformPanel]},changeDetection:0}),HQ),eZ=((jQ=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:jQ}),jQ.\u0275inj=ve({factory:function(e){return new(e||jQ)},providers:[XQ],imports:[[id,kw,gT,NE],kC,FO,gT,NE]}),jQ),tZ=((VQ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"transform",value:function(e){return e<=12?e:e-12}}]),e}()).\u0275fac=function(e){return new(e||VQ)},VQ.\u0275pipe=St({name:"timeConverter",type:VQ,pure:!0}),VQ),iZ=((BQ=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"transform",value:function(e){return e<12?"AM":"PM"}}]),e}()).\u0275fac=function(e){return new(e||BQ)},BQ.\u0275pipe=St({name:"timeMedian",type:BQ,pure:!0}),BQ);function nZ(e,t){1&e&&(jo(0,"div",3),Uo(1,"app-loading"),Ho())}function rZ(e,t){if(1&e){var i=zo();jo(0,"span",4),Ko("click",(function(){return ti(i),$o().closeNav()})),Ss(1," close "),Ho()}}function aZ(e,t){1&e&&(jo(0,"div",6),jo(1,"div",7),jo(2,"h1"),Ss(3,"Expert is not available right now"),Ho(),jo(4,"h2"),Ss(5,"Check Back Later"),Ho(),Ho(),Ho())}function oZ(e,t){if(1&e&&(jo(0,"option",33),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i.subCategory),_r(1),Ts(" ",i.subCategory," ")}}function sZ(e,t){if(1&e&&(jo(0,"mat-option",33),Ss(1),Xl(2,"date"),Ho()),2&e){var i=t.$implicit,n=t.index,r=$o(3);Bo("value",i),_r(1),Ts(" ",Ql(2,2,r.fullDate[n],"fullDate")," ")}}function lZ(e,t){1&e&&(jo(0,"div"),jo(1,"span",34),Ss(2," No available schedules"),Ho(),Ho())}function cZ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Xl(2,"timeConverter"),Xl(3,"zero"),Xl(4,"timeMedian"),Ho()),2&e){var i=$o().$implicit;_r(1),Os("",Jl(2,3,i.hours),":",Jl(3,5,i.minutes)," ",Jl(4,7,i.hours),"")}}function uZ(e,t){if(1&e&&(jo(0,"mat-option",33),Po(1,cZ,5,9,"span",2),Ho()),2&e){var i=t.$implicit,n=t.index,r=$o(4);Bo("value",n),_r(1),Bo("ngIf",r.selectedDate.date==i.date)}}function hZ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Xl(2,"timeConverter"),Xl(3,"zero"),Xl(4,"timeMedian"),Ho()),2&e){var i=$o().$implicit;_r(1),Os("",Jl(2,3,i.hours),":",Jl(3,5,i.minutes)," ",Jl(4,7,i.hours),"")}}function dZ(e,t){if(1&e&&(jo(0,"mat-option",33),Po(1,hZ,5,9,"span",2),Ho()),2&e){var i=t.$implicit,n=t.index,r=$o(4);Bo("value",n),_r(1),Bo("ngIf",r.selectedDate.date==i.date)}}function pZ(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"mat-form-field",35),jo(2,"mat-label"),Ss(3,"Start"),Ho(),jo(4,"mat-select",29),Ko("valueChange",(function(e){return ti(i),$o(3).startTimeValue=e}))("selectionChange",(function(){return ti(i),$o(3).startSlotChange()})),Po(5,uZ,2,2,"mat-option",17),Ho(),Ho(),jo(6,"span",36),Ss(7,"\xa0-\xa0"),Ho(),jo(8,"mat-form-field",35),jo(9,"mat-label"),Ss(10,"End"),Ho(),jo(11,"mat-select",37),Ko("valueChange",(function(e){return ti(i),$o(3).endTimeValue=e})),Po(12,dZ,2,2,"mat-option",17),Ho(),Ho(),Ho()}if(2&e){var n=$o(3);_r(4),Bo("value",n.startTimeValue),_r(1),Bo("ngForOf",n.startSlots),_r(6),Bo("value",n.endTimeValue),_r(1),Bo("ngForOf",n.endSlots)}}function fZ(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"div",8),jo(2,"div",9),jo(3,"div",10),jo(4,"h1",11),Ss(5,"Book Meeting"),Ho(),Ho(),Ho(),jo(6,"div"),jo(7,"div",12),jo(8,"div",13),jo(9,"div",14),jo(10,"label",15),Ss(11,"Choose Subject"),jo(12,"sup"),Ss(13,"*"),Ho(),Ho(),jo(14,"select",16),Ko("ngModelChange",(function(e){return ti(i),$o(2).bookingDetails.subject=e})),Po(15,oZ,2,2,"option",17),Ho(),Ho(),Ho(),Ho(),jo(16,"div",12),jo(17,"div",13),jo(18,"div",14),jo(19,"label",18),Ss(20,"Description"),Ho(),jo(21,"textarea",19,20),Ko("ngModelChange",(function(e){return ti(i),$o(2).bookingDetails.description=e})),Ho(),jo(23,"span",21),Ss(24),Ho(),Ho(),Ho(),Ho(),Ho(),jo(25,"div",22),Uo(26,"hr"),jo(27,"div"),jo(28,"label",23),Ss(29,"Choose Time"),jo(30,"sup"),Ss(31,"*"),Ho(),Ho(),Uo(32,"p",24),jo(33,"div",25),Ss(34),Ho(),Ho(),jo(35,"div"),jo(36,"div",26),jo(37,"div",27),jo(38,"div"),jo(39,"mat-form-field",28),jo(40,"mat-label"),Ss(41,"Choose Date"),Ho(),jo(42,"mat-select",29),Ko("valueChange",(function(e){return ti(i),$o(2).selectedDate=e}))("selectionChange",(function(){return ti(i),$o(2).dateChange()})),Po(43,sZ,3,5,"mat-option",17),Ho(),Ho(),Ho(),Ho(),jo(44,"div",27),Po(45,lZ,3,0,"div",2),Po(46,pZ,13,4,"div",2),Ho(),Ho(),Ho(),Ho(),jo(47,"div",30),jo(48,"div",31),jo(49,"button",32),Ko("click",(function(){return ti(i),$o(2).onBooking()})),Ss(50," Submit "),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(22),r=$o(2);_r(14),Bo("ngModel",r.bookingDetails.subject),_r(1),Bo("ngForOf",r.areaOfExpertises),_r(6),Bo("ngModel",r.bookingDetails.description),_r(3),Ts("",n.value.length,"/100"),_r(10),Es(r.errorMessage),_r(8),Bo("value",r.selectedDate),_r(1),Bo("ngForOf",r.scheduleDates),_r(2),Bo("ngIf",r.noSchedule),_r(1),Bo("ngIf",!r.noSchedule),_r(3),Bo("disabled",!r.bookingDetails.subject)}}function vZ(e,t){if(1&e&&(jo(0,"div"),Po(1,aZ,6,0,"div",5),Po(2,fZ,51,10,"div",2),Ho()),2&e){var i=$o();_r(1),Bo("ngIf",!i.isTutorAvailable),_r(1),Bo("ngIf",i.isTutorAvailable)}}var mZ,gZ=((mZ=function(){function e(t,i,n,r,a,o,s,l,c,u,h,d,p){var f=this;_classCallCheck2(this,e),this.profileService=t,this.meetingSevice=i,this.studentService=n,this.httpService=r,this.snackBar=a,this.router=o,this.dialogRef=s,this.activatedRoute=l,this.loginService=c,this.dialog=u,this.zone=h,this.winRef=d,this.webSocket=p,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]},this.areaOfExpertises=[],this.noSchedule=!1,this.isLoading=!1,this.teacherProfile=new db,this.meetingDetails=new fb,this.bookingDetails=new vb,this.startTimeString="Start Time",this.endTimeString="End Time",this.errorMessage="",this.endSelect=-1,this.startSelect=-1,this.paymentSuccessful=!1,this.tempArray=new xQ,this.time={hour:13,minute:30},this.endTime={hour:0,minute:0},this.st={sh:-1,sm:-1},this.et={eh:-1,em:-1},this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,this.dates=[],this.scheduleDates=[],this.meridian=!0,this.date=new Date,this.settings={bigBanner:!0,timePicker:!0,format:"dd-MM-yyyy hh:mm a",defaultOpen:!1,closeOnSelect:!1},this.ScheduleTime=[],this.startSlots=[],this.startSlotsCopy=[],this.endSlots=[],this.fullDate=[],this.profilePictureUrl="../../assets/images/default-user-image.png",this.totalPrice=0,this.payableAmount=0,this.paymentResponse={},this.timeFrom=function(e){for(var t=0;t<Math.abs(e);t++)f.fullDate.push(new Date((new Date).getTime()-24*(e>=0?t:t-t-t)*60*60*1e3))},this.timeFrom2=function(e){for(var t=0;t<Math.abs(e);t++){var i=new yZ;i.date=new Date((new Date).getTime()-24*(e>=0?t:t-t-t)*60*60*1e3).toLocaleDateString("en-GB"),f.scheduleDates.push(i)}}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.queryParams.subscribe((function(t){e.userId=t.page,e.httpService.fetchBookingTutorProfileDetails(e.userId).subscribe((function(t){e.teacherProfile=t,e.amount=parseInt(e.teacherProfile.price1),e.profilePictureUrl=e.teacherProfile.profilePictureUrl,e.areaOfExpertises=e.teacherProfile.areaOfExpertise}))})),this.startDisabled=!0,this.endDisabled=!0,this.teacherProfile=this.profileService.getProfile(),"Learner"==this.loginService.getLoginType()&&this.httpService.getTutorIsAvailable(this.userId).subscribe((function(t){1==t?(e.isTutorAvailable=!0,e.timeFrom(-7),e.timeFrom2(-7),e.httpService.getTutorTimeAvailabilityTimeArray(e.userId).subscribe((function(t){e.ScheduleTime=t,e.selectedDate=e.scheduleDates[0],setTimeout((function(){e.dateChange()}),1e3),e.manipulateTimeSlots()}))):0==t&&(e.isTutorAvailable=!1)}))}},{key:"dateChange",value:function(){0==this.selectedDate.hasElements?this.noSchedule=!0:1==this.selectedDate.hasElements&&(this.noSchedule=!1,this.fillSlots("start"))}},{key:"startSlotChange",value:function(){var e;for(this.endSlots=[],e=this.startTimeValue+1;e<this.startSlotsCopy.length;e++)this.endSlots.push(this.startSlotsCopy[e])}},{key:"fillSlots",value:function(e){if("start"==e){this.startSlots=[],this.endSlots=[],this.startSlotsCopy=[],console.log(this.endSlots),console.log(this.startSlots);var t,i=_createForOfIteratorHelper(this.ScheduleTime);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.date==this.selectedDate.date&&this.startSlots.push(n)}}catch(l){i.e(l)}finally{i.f()}var r,a,o=_createForOfIteratorHelper(this.ScheduleTime);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.date==this.selectedDate.date&&this.startSlotsCopy.push(s)}}catch(l){o.e(l)}finally{o.f()}for(a=1;a<this.startSlotsCopy.length;a++)this.endSlots.push(this.startSlotsCopy[a]);this.startTimeValue=0,this.endTimeValue=0,this.startSlots.pop(),console.log(this.startSlots),console.log(this.endSlots),console.log(this.startSlotsCopy)}}},{key:"initPay",value:function(){this.rzp=new this.winRef.nativeWindow.Razorpay(this.preparePaymentDetails()),this.rzp.open()}},{key:"preparePaymentDetails",value:function(){var e=this,t=this;return{key:"rzp_test_B1W7ile7wVdDl1",amount:(100*t.payableAmount).toString(),name:"Pay "+t.teacherProfile.fullName,image:this.teacherProfile.profilePictureUrl,handler:function(e){t.paymentHandler(e)},modal:{ondismiss:function(){e.zone.run((function(){console.log("payment failed"),e.closeNav()}))}},prefill:{name:"FellowGenius",email:""},theme:{color:"#2874f0"}}}},{key:"paymentHandler",value:function(e){var t=this;this.zone.run((function(){t.paymentSuccessful=!0,t.createBooking(e)}))}},{key:"calculatePrice",value:function(e){var t,i,n=_createForOfIteratorHelper(this.teacherProfile.areaOfExpertise);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.subCategory==e&&(t=r.price)}}catch(a){n.e(a)}finally{n.f()}this.payableAmount=this.bookingDetails.duration/60*t}},{key:"createBooking",value:function(e){var t=this;this.paymentSuccessful&&(this.bookingDetails.razorpay_payment_id=e.razorpay_payment_id,this.bookingDetails.razorpay_order_id=e.razorpay_order_id,this.bookingDetails.razorpay_signature=e.razorpay_signature,this.bookingDetails.amount=this.payableAmount,this.httpService.saveBooking(this.bookingDetails).subscribe((function(e){if(1==e){t.isLoading=!1;var i=JSON.stringify({entityType:"1",entityTypeId:"11",actorId:t.bookingDetails.studentId,notifierId:t.bookingDetails.tutorId,pictureUrl:t.studentService.studentProfile.profilePictureUrl,readStatus:!1});t.webSocket.sendAppointmentNotfication(i,t.bookingDetails.tutorId.toString()),t.snackBar.open("Booking submitted successfully !","close",t.config),t.dialogRef.closeAll(),t.router.navigate(["home/studentDashboard"])}})))}},{key:"onBooking",value:function(){var e,t,i=this;e=this.ScheduleTime.indexOf(this.startSlots[this.startTimeValue]),t=this.ScheduleTime.indexOf(this.endSlots[this.endTimeValue]),this.timeSelector(this.startSlots[this.startTimeValue],e),this.timeSelector(this.endSlots[this.endTimeValue],t),this.bookingDetails.startTimeHour=this.st.sh,this.bookingDetails.startTimeMinute=this.st.sm,this.bookingDetails.dateOfMeeting=this.startDate,this.bookingDetails.duration=this.findDuration(this.st.sh,this.st.sm,this.et.eh,this.et.em),this.bookingDetails.endTimeHour=this.et.eh,this.bookingDetails.endTimeMinute=this.et.em,this.bookingDetails.meetingId=this.onGenerateString(10),this.bookingDetails.tutorId=this.teacherProfile.bookingId,this.bookingDetails.studentName=this.studentService.getStudentProfileDetails().fullName,this.bookingDetails.tutorName=this.teacherProfile.fullName,this.bookingDetails.tutorProfilePictureUrl=this.teacherProfile.profilePictureUrl,this.bookingDetails.studentId=this.studentService.getStudentProfileDetails().sid,this.calculatePrice(this.bookingDetails.subject),this.processingPayment=!1,this.httpService.isBookingValid(this.bookingDetails).subscribe((function(e){e?(i.isLoading=!0,i.initPay()):e||(i.errorMessage="Tutor is busy in between your selected time slots !")}))}},{key:"closeNav",value:function(){this.dialogRef.closeAll()}},{key:"openConnectPage",value:function(){this.dialog.open(e)}},{key:"timeSelector",value:function(e,t){if(this.clickedIndex=t,-1==this.st.sh&&-1==this.st.sm&&-1==this.et.eh&&-1==this.et.em)this.clickedIndex1=t,this.startDisabled=!1,this.startDate=e.date,this.st.sh=e.hours,this.st.sm=e.minutes,e.isStartDate=!0,this.startSelect=this.clickedIndex,this.startTimeString=0==this.st.sm?this.st.sh+":0"+this.st.sm:this.st.sh+":"+this.st.sm,this.errorMessage="",null!=this.tempArray.clickIndex1||null!=this.tempArray.clickIndex2||this.clickedIndex-1!=-1&&this.ScheduleTime[this.clickedIndex-1].date==e.date?null==this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex-1].date==e.date&&(this.tempArray.clickIndex1=t,this.case2a=!0,this.case4a=!0,this.case5a=!0):(this.tempArray.clickIndex1=t,this.case1a=!0,this.case3a=!0);else if(-1!=this.st.sh&&-1!=this.st.sm&&-1==this.et.eh&&-1==this.et.em)if(this.clickedIndex2=t,this.startDate==e.date)if(this.clickedIndex2-this.clickedIndex1<=6)if(this.et.eh=e.hours,this.et.em=e.minutes,60*this.et.eh+this.et.em>60*this.st.sh+this.st.sm)if(this.endDisabled=!1,e.isEndDate=!0,this.endSelect=this.clickedIndex,this.endTimeString=0==this.et.em?this.et.eh+":0"+this.et.em:this.et.eh+":"+this.et.em,this.errorMessage="",console.log("eventt"),console.log(this.ScheduleTime),console.log(this.clickedIndex),console.log(e.date),null!=this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex].date==e.date){this.tempArray.clickIndex2=t,this.case1b=!0,this.case4b=!0,this.case5b=!0,this.case1a&&this.case1b&&(this.bookingDetails.bookingCase=1);var i=t-this.tempArray.clickIndex1;1==i&&this.case4a&&this.case4b?this.bookingDetails.bookingCase=4:1!=i&&this.case5a&&this.case5b&&(this.bookingDetails.bookingCase=5)}else null!=this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex+1].date!=e.date&&(this.tempArray.clickIndex2=t,this.case2b=!0,this.case3b=!0,this.case2a&&this.case2b?this.bookingDetails.bookingCase=2:this.case3a&&this.case3b&&(this.bookingDetails.bookingCase=3));else 60*this.et.eh+this.et.em<=60*this.st.sh+this.st.sm&&(this.startDisabled=!0,this.endDisabled=!0,this.startSelect=-1,this.endSelect=-1,e.isEndDate=!1,e.isStartDate=!1,this.et.eh=-1,this.et.em=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.endTimeString="End Time",this.errorMessage="End time should be after Start time, Reset !",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1);else this.errorMessage="You can't book a tutor for more than 3 hours",this.startDisabled=!0,this.endDisabled=!0,e.isStartDate=!1,this.startSelect=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1;else this.errorMessage="Start date and End date should be same",this.startDisabled=!0,this.endDisabled=!0,e.isStartDate=!1,this.startSelect=-1,this.st.sh=-1,this.st.sm=-1,this.startTimeString="Start Time ",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1;else-1!=this.st.sh&&-1!=this.st.sm&&-1!=this.et.eh&&-1!=this.et.em&&(this.endDisabled=!0,this.startDisabled=!1,this.startSelect=this.clickedIndex,this.endSelect=-1,this.startDate=e.date,this.st.sh=e.hours,this.st.sm=e.minutes,this.et.eh=-1,this.et.em=-1,e.isEndDate=!1,this.startTimeString=0==this.st.sm?this.st.sh+":0"+this.st.sm:this.st.sh+":"+this.st.sm,this.endTimeString="End Time",this.errorMessage="",this.tempArray.clickIndex1=null,this.tempArray.clickIndex2=null,this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,null!=this.tempArray.clickIndex1||null!=this.tempArray.clickIndex2||this.clickedIndex-1!=-1&&this.ScheduleTime[this.clickedIndex-1].date==e.date?null==this.tempArray.clickIndex1&&null==this.tempArray.clickIndex2&&this.ScheduleTime[this.clickedIndex-1].date==e.date&&(this.tempArray.clickIndex1=t,this.case2a=!0,this.case4a=!0,this.case5a=!0):(this.tempArray.clickIndex1=t,this.case1a=!0,this.case3a=!0))}},{key:"manipulateTimeSlots",value:function(){var e,t=_createForOfIteratorHelper(this.scheduleDates);try{for(t.s();!(e=t.n()).done;){var i,n=e.value,r=0,a=_createForOfIteratorHelper(this.ScheduleTime);try{for(a.s();!(i=a.n()).done;)if(i.value.date==n.date){r=1;break}}catch(o){a.e(o)}finally{a.f()}1==r&&(n.hasElements=!0)}}catch(o){t.e(o)}finally{t.f()}}},{key:"toggleMeridian",value:function(){this.meridian=!this.meridian}},{key:"findDuration",value:function(e,t,i,n){return 60*i+n-(60*e+t)}},{key:"onGenerateString",value:function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}},{key:"calculateEndTime",value:function(e,t){var i;i=t%1*60;var n=e.minute;if(this.endTime.hour=e.hour+(t-t%1),this.endTime.minute=n+i,this.endTime.minute>=60){var r=this.endTime.minute-60;this.endTime.hour++,this.endTime.minute=r}return this.endTime.hour=Math.trunc(this.endTime.hour),this.endTime.minute=Math.trunc(this.endTime.minute),this.endTime}}]),e}()).\u0275fac=function(e){return new(e||mZ)(Lo(YG),Lo(mb),Lo(FT),Lo(lk),Lo(rI),Lo(cm),Lo(LT),Lo($f),Lo(gb),Lo(LT),Lo(Wc),Lo(IQ),Lo(yA))},mZ.\u0275cmp=gt({type:mZ,selectors:[["app-connect"]],decls:4,vars:3,consts:[["style","\n      text-align: center;\n      margin-top: 27%;\n      z-index: 5;\n      height: 40vh;\n      width: 50vw;\n    ",4,"ngIf"],["class","material-icons close","style","cursor: pointer",3,"click",4,"ngIf"],[4,"ngIf"],[2,"text-align","center","margin-top","27%","z-index","5","height","40vh","width","50vw"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],["style","padding: 40px",4,"ngIf"],[2,"padding","40px"],[2,"text-align","center"],[1,"connect-container"],[1,"connect-header"],[2,"margin-bottom","15px"],[2,"margin","0","color","#7d0f7d"],[1,"row"],[1,"col-md-8"],[1,"form-group"],["for","subject",2,"margin-bottom","10px"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","description",2,"margin-bottom","10px"],["id","description","rows","2","name","description","maxlength","100","ngModel","","placeholder","Enter description","required","",1,"form-control",2,"padding-top","5px",3,"ngModel","ngModelChange"],["desc",""],[1,"setLength",2,"float","right"],[1,"connect-body"],[2,"margin-bottom","10px"],[2,"font-weight","500","margin-top","5px","color","#892687","display","inline","margin-left","10px"],[1,"errorMessage"],[1,"row",2,"width","510px"],[1,"col-sm-6"],["appearance","fill"],[3,"value","valueChange","selectionChange"],[1,"connect-footer"],[2,"float","right"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[2,"font-size","large"],["appearance","fill",2,"width","95px"],[2,"font-size","25px","margin","5px"],[3,"value","valueChange"]],template:function(e,t){1&e&&(jo(0,"body"),Po(1,nZ,2,0,"div",0),Po(2,rZ,2,0,"span",1),Po(3,vZ,3,2,"div",2),Ho()),2&e&&(_r(1),Bo("ngIf",t.isLoading),_r(1),Bo("ngIf",!t.isLoading),_r(1),Bo("ngIf",!t.isLoading))},directives:[Dh,dG,jg,cg,Uy,xh,eg,ib,Jy,NO,OO,$Q,Hg,Yg,pT],pipes:[td,tZ,iY,iZ],styles:['.image[_ngcontent-%COMP%]{width:50vw;height:17vh}img[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%}.boxShadow[_ngcontent-%COMP%]{box-shadow:0 0 5px rgba(199,203,217,.7)}.font19[_ngcontent-%COMP%]{font-size:19px}.marginZero[_ngcontent-%COMP%]{margin:0}.paddingZero[_ngcontent-%COMP%]{padding:0}.stars-outer[_ngcontent-%COMP%]{position:relative;display:inline-block}.stars-inner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;white-space:nowrap;overflow:hidden;width:0}.stars-outer[_ngcontent-%COMP%]:before{color:#ccc}.stars-inner[_ngcontent-%COMP%]:before, .stars-outer[_ngcontent-%COMP%]:before{content:"\\f005 \\f005 \\f005 \\f005 \\f005";font-family:Font Awesome\\ 5 Free;font-weight:900}.stars-inner[_ngcontent-%COMP%]:before{color:#f8ce0b}.lessonCompleted[_ngcontent-%COMP%]{margin-top:1px;background-color:teal;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding-left:4px;padding-right:4px;color:#fff;border-radius:4px}.messageBar[_ngcontent-%COMP%]{z-index:3;width:100%;height:10vh;background-color:red}.closeButton[_ngcontent-%COMP%]{background:none;border:none;outline:none}.timeSlots[_ngcontent-%COMP%]{float:left;margin-right:10px;height:30px;border:1px solid #e30084;border-radius:25px;margin-bottom:3px;cursor:pointer!important;padding:5px 16px;line-height:20px}.selectedTimeSlots[_ngcontent-%COMP%]{float:left;z-index:2}.selectedTimeSlots[_ngcontent-%COMP%], .selectedTimeSlots[_ngcontent-%COMP%]:hover, .timeSlots[_ngcontent-%COMP%]:hover{color:#fff;background-color:#e30084}.timeSlots[_ngcontent-%COMP%]:hover{cursor:default}.timeBoxHr[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:1rem;border:0;border-top:1px solid rgba(0,0,0,.1)}.endClass[_ngcontent-%COMP%], .startClass[_ngcontent-%COMP%]{background-color:#e30084;color:#fff;z-index:2}.closeIconButton[_ngcontent-%COMP%]{background-color:#fff;border:none;position:absolute;width:30px;height:30px;top:15px;right:20px;font-size:larger;cursor:pointer;color:#8d89aa;outline:none}.closeIconButton[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:50%;color:#000}.form-group[_ngcontent-%COMP%]{position:relative}.form-control-placeholder[_ngcontent-%COMP%]{position:absolute;top:5px;left:11px;padding-left:5px;padding-right:5px;transition:all .5s;opacity:1}.form-control[_ngcontent-%COMP%]:focus + .form-control-placeholder[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:valid + .form-control-placeholder[_ngcontent-%COMP%]{font-size:90%;transform:translate3d(0,-75%,0)}label[_ngcontent-%COMP%]{background-color:#fff;margin:0}.errorMessage[_ngcontent-%COMP%]{color:red}.mat-snack-bar-container[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.connect-footer[_ngcontent-%COMP%]{margin-top:20px}.dayColumn[_ngcontent-%COMP%]{width:110px;position:inline;padding:10px;margin-right:20px;font-size:13px}@media only screen and (min-device-width:320px) and (max-device-width:812px){.dayColumn[_ngcontent-%COMP%]{width:100%}}']}),mZ),yZ=function e(){_classCallCheck2(this,e),this.hasElements=!1},bZ=["loginRef"],kZ=["googleSignUp"],CZ=["googleLogIn"];function wZ(e,t){if(1&e){var i=zo();jo(0,"span",24),Ko("click",(function(){return ti(i),$o().closeNav()})),Ss(1," close\n"),Ho()}}function _Z(e,t){if(1&e&&(jo(0,"p",25),Ss(1),Ho()),2&e){var i=$o();_r(1),Es(i.errorText)}}function SZ(e,t){1&e&&(jo(0,"div",26),Uo(1,"app-loading"),Ho())}function EZ(e,t){1&e&&(jo(0,"div",42),jo(1,"p",43),Ss(2,"User Already registered ! go to Login"),Ho(),Ho())}function TZ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid Name"),Ho())}function AZ(e,t){if(1&e&&(jo(0,"div",6),jo(1,"label",44),Ss(2,"Full Name"),Ho(),Uo(3,"input",45,46),Po(5,TZ,2,0,"span",47),Ho()),2&e){var i=Mo(4);_r(5),Bo("ngIf",!i.valid&&i.touched)}}function OZ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid email"),Ho())}function xZ(e,t){if(1&e&&(jo(0,"div",6),jo(1,"label",7),Ss(2,"Email Address"),Ho(),Uo(3,"input",49,50),Po(5,OZ,2,0,"span",47),Ho()),2&e){var i=Mo(4),n=$o(2);_r(5),Bo("ngIf",!i.valid&&i.touched||n.emailValid)}}function IZ(e,t){1&e&&(jo(0,"span",48),Ss(1,"password field must be minimum of 8 characters with atleast one lowercase, uppercase, number and a special character"),Ho())}function DZ(e,t){if(1&e&&(jo(0,"div",6),jo(1,"label",10),Ss(2,"Password"),Ho(),Uo(3,"input",51,52),Po(5,IZ,2,0,"span",47),Ho()),2&e){var i=Mo(4),n=$o(2);_r(3),Bo("type",n.hide?"password":"text")("pattern",n.passwordPattern),_r(2),Bo("ngIf",!i.valid&&i.touched)}}function RZ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid contact"),Ho())}function PZ(e,t){if(1&e&&(jo(0,"div",6),jo(1,"label",53),Ss(2,"Mobile Number"),Ho(),Uo(3,"input",54,55),Po(5,RZ,2,0,"span",47),Ho()),2&e){var i=Mo(4),n=$o(2);_r(3),Bo("pattern",n.mobNumberPattern),_r(2),Bo("ngIf",!i.valid&&i.touched)}}function MZ(e,t){1&e&&(jo(0,"div",6),jo(1,"label",56),Ss(2,"Role"),Ho(),jo(3,"select",57),jo(4,"option"),Ss(5,"Learner"),Ho(),jo(6,"option"),Ss(7,"Expert"),Ho(),Ho(),Ho())}function LZ(e,t){1&e&&(jo(0,"p",58),Ss(1," Your Verification Code has been sent to your Email, Please verify your account by signing in to your email. "),Ho())}function NZ(e,t){1&e&&(jo(0,"span",48),Ss(1,"Invalid OTP"),Ho())}function FZ(e,t){if(1&e&&(jo(0,"div",6),jo(1,"label",59),Ss(2,"One Time Password"),Ho(),Uo(3,"input",60,61),Po(5,NZ,2,0,"span",47),Ho()),2&e){var i=$o(2);_r(5),Bo("ngIf",i.wrongOtp)}}function BZ(e,t){if(1&e){var i=zo();jo(0,"div",62),Ss(1," By clicking on Next, you agree to our "),jo(2,"a",63),Ko("click",(function(){return ti(i),$o(2).openTermsAndConditions()})),Ss(3,"Terms and Conditions"),Ho(),Ho()}}var VZ=function(e){return{"margin-bottom":e}};function jZ(e,t){if(1&e){var i=zo();jo(0,"div",27),jo(1,"div",28),jo(2,"div",29),jo(3,"span",30),Ss(4,"Create"),Ho(),Uo(5,"br"),jo(6,"span",31),Ss(7,"Your Account"),Ho(),Ho(),Ho(),Po(8,EZ,3,0,"div",32),jo(9,"div",33),jo(10,"form",34,35),Ko("ngSubmit",(function(){ti(i);var e=Mo(11);return $o().onSignUp(e)})),Po(12,AZ,6,1,"div",36),Po(13,xZ,6,1,"div",36),Po(14,DZ,6,3,"div",36),Po(15,PZ,6,2,"div",36),Po(16,MZ,8,0,"div",36),Po(17,LZ,2,0,"p",37),Po(18,FZ,6,1,"div",36),Po(19,BZ,4,0,"div",38),jo(20,"div",39),jo(21,"a",40),Ko("click",(function(){return ti(i),$o().toSignUp()})),Ss(22," Login Instead "),Ho(),jo(23,"button",15),Ss(24," Next "),Ho(),jo(25,"a",41),Ss(26," Cancel "),Ho(),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(11),r=$o();_r(8),Bo("ngIf",r.incorrectLoginDetails),_r(4),Bo("ngIf",r.showInput),_r(1),Bo("ngIf",r.showInput),_r(1),Bo("ngIf",r.showInput),_r(1),Bo("ngIf",r.showInput),_r(1),Bo("ngIf",r.showInput),_r(1),Bo("ngIf",r.verifyEmail),_r(1),Bo("ngIf",r.verifyEmail),_r(1),Bo("ngIf",r.showInput),_r(1),Bo("ngStyle",ql(11,VZ,r.verifyEmail?"35vh":"")),_r(3),Bo("disabled",!n.valid)}}function HZ(e,t){1&e&&(jo(0,"p",64),Ss(1," Login Using Google "),Ho())}function UZ(e,t){1&e&&(jo(0,"p",64),Ss(1," Sign up Using Google "),Ho())}function qZ(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"span"),Ss(2," New to FellowGenius? "),Ho(),jo(3,"a",14),Ko("click",(function(){return ti(i),$o().toSignUp()})),Ss(4,"Sign up"),Ho(),Ho()}}var WZ,zZ=((WZ=function(){function e(t,i,n,r,a,o,s,l){_classCallCheck2(this,e),this.router=t,this.httpClient=i,this.snackBar=n,this.dialogRef=r,this.socialService=a,this.authService=o,this.loginService=s,this.zone=l,this.login=!0,this.wrongOtp=!1,this.showInput=!0,this.verifyEmail=!1,this.incorrectLoginDetails=!1,this.termsAndConditionsChecked=!1,this.emailValid=!1,this.hide=!0,this.timeOut=!0,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$",this.registrationModel=new hG,this.loginModel=new uA,this.studentProfile=new cb,this.socialLogin=new dA,this.tutorProfile=new ub,this.config={duration:3e3,horizontalPosition:"center",verticalPosition:"top"},this.hideSocialLogin="hideBlock",this.hideContainer="",this.studentLoginDetails=new hb}return _createClass(e,[{key:"ngOnInit",value:function(){this.googleSDK()}},{key:"toSignUp",value:function(){this.login=!this.login}},{key:"closeNav",value:function(){this.dialogRef.closeAll()}},{key:"openTermsAndConditions",value:function(){this.dialogRef.open(uG,{width:"auto",height:"auto"})}},{key:"toResetPassword",value:function(){this.dialogRef.closeAll(),this.router.navigate(["resetPassword"])}},{key:"openConnectPage",value:function(){console.log(this.loginService.getLoginType()),null!=this.loginService.getLoginType()&&"Learner"==this.loginService.getLoginType()?this.dialogRef.open(gZ,{height:"auto",width:"auto"}):this.dialogRef.open(e,{width:"auto",height:"auto"})}},{key:"onLogin",value:function(e){var t=this;this.isLoading=!0,this.hideContainer="hideBlock",this.loginModel.email=e.value.email,this.loginModel.password=e.value.password,this.authService.onLogin(this.loginModel),this.authService.getAuthStatusListener().subscribe((function(e){0==e?(t.errorText="Incorrect email or password",t.isLoading=!1,t.hideContainer="",t.incorrectLoginDetails=!0):1==e&&(t.isLoading=!1,t.snackBar.open("Logged in successfully","close",t.config),t.dialogRef.closeAll(),t.openConnectPage())}))}},{key:"openThankYouPage",value:function(){var e=this,t=new kT;t.disableClose=!0,this.dialogRef.open(KA,t).afterClosed().subscribe((function(t){e.role=t.role,e.registrationModel.role=t.role,e.registrationModel.password=t.password,e.authService.saveSocialLogin(e.registrationModel),e.authService.getAuthStatusListener().subscribe((function(t){1==t&&(e.isLoading=!1,e.snackBar.open("Logged in successfully","close",e.config),e.dialogRef.closeAll(),e.openConnectPage())}))}))}},{key:"prepareLoginButton",value:function(){var e=this;console.log("called"),null==this.auth2&&(location.reload(),console.log("auth 2 null")),this.auth2.attachClickHandler(this.googleLogIn.nativeElement,{},(function(t){var i=t.getBasicProfile();e.socialLogin.id=i.getId(),e.socialLogin.fullName=i.getName(),e.socialLogin.email=i.getEmail(),e.socialService.setSocialDetails(e.socialLogin),e.zone.run((function(){e.hideContainer="hideBlock",e.loginModel.email=e.socialLogin.email,e.loginModel.password=e.socialLogin.id,console.log(e.loginModel),e.authService.onLogin(e.loginModel),e.authService.getAuthStatusListener().subscribe((function(t){0==t?e.httpClient.checkUser(e.socialLogin.email).subscribe((function(t){t?(e.isLoading=!1,e.snackBar.open("login not successful","close",e.config)):e.zone.run((function(){e.registrationModel.fullName=e.socialLogin.fullName,e.registrationModel.email=e.socialLogin.email,e.registrationModel.password=e.socialLogin.id,e.openThankYouPage()}))})):1==t&&(e.isLoading=!1,e.snackBar.open("Logged in successfully","close",e.config),e.dialogRef.closeAll(),e.openConnectPage())}))}))}),(function(e){}))}},{key:"onSignUp",value:function(e){var t=this;0==this.verifyEmail?(this.isLoading=!0,this.registrationModel.fullName=e.value.fullName,this.registrationModel.email=e.value.email,this.registrationModel.password=e.value.password,this.registrationModel.contact=e.value.contact,this.registrationModel.role=e.value.role,this.httpClient.checkUser(this.registrationModel.email).subscribe((function(e){1==!e?(setTimeout((function(){1==t.timeOut&&(t.emailValid=!0,t.isLoading=!1,t.showInput=!0)}),25e3),t.httpClient.verifyEmail(t.registrationModel.email).subscribe((function(e){t.verificationOtp=e.response,t.timeOut=!1,t.verifyEmail=!0,t.isLoading=!1,t.showInput=!1}))):(t.timeOut=!1,t.isLoading=!1,t.snackBar.open("You are already registered. Please Login.","close",t.config),t.login=!0)}))):yG.compareSync(e.value.otp,this.verificationOtp)?(this.authService.onSignUp(this.registrationModel),this.authService.getAuthStatusListener().subscribe((function(e){0==e?(t.snackBar.open("registration not successful ! email already exists !","close",t.config),t.incorrectLoginDetails=!0,t.dialogRef.closeAll()):1==e&&(t.isLoading=!1,t.snackBar.open("Logged in successfully","close",t.config),t.dialogRef.closeAll(),t.openConnectPage())}))):this.wrongOtp=!0}},{key:"googleSDK",value:function(){var e,t,i,n,r=this;window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){r.auth2=window.gapi.auth2.init({client_id:"254899928533-k6lru4oe7sbmpe22ns0m11rvtbokk3qk.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),r.prepareLoginButton()}))},t="google-jssdk",n=(e=document).getElementsByTagName("script")[0],e.getElementById(t)||((i=e.createElement("script")).id=t,i.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",n.parentNode.insertBefore(i,n))}}]),e}()).\u0275fac=function(e){return new(e||WZ)(Lo(cm),Lo(lk),Lo(rI),Lo(LT),Lo(EA),Lo(bA),Lo(gb),Lo(Wc))},WZ.\u0275cmp=gt({type:WZ,selectors:[["app-login-dialog"]],viewQuery:function(e,t){var i;1&e&&(dc(bZ,!0),dc(kZ,!0),dc(CZ,!0)),2&e&&(hc(i=yc())&&(t.loginElement=i.first),hc(i=yc())&&(t.googleSignUp=i.first),hc(i=yc())&&(t.googleLogIn=i.first))},decls:34,vars:15,consts:[["class","material-icons close","style","cursor: pointer",3,"click",4,"ngIf"],[1,"login-container"],[1,"login-parameter-container"],["style","color: red",4,"ngIf"],[3,"ngSubmit"],["l","ngForm"],[1,"form-group"],["for","email",1,"form-control-placeholder"],["type","email","id","email","ngModel","","name","email","required","","maxlength","64",1,"form-control"],["loginEmail",""],["for","password",1,"form-control-placeholder"],["type","password","id","password","name","password","ngModel","","required","","maxlength","40",1,"form-control",3,"type"],["loginPassword","ngModel"],[1,"form-group","button-container"],["href","javascript:;",1,"forgot-password",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["style","\n      text-align: center;\n      margin-top: 20%;\n      margin-left: auto;\n      margin-right: auto;\n    ",4,"ngIf"],["class","signup-container",4,"ngIf"],[1,"login-instead"],[1,"btn","btn-secondary",3,"click"],["googleLogIn",""],[1,"fa","fa-google","social-icons",2,"margin-right","5px"],["style","display: inline; font-size: larger",4,"ngIf"],[4,"ngIf"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[2,"color","red"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],[1,"signup-container"],[1,"signup-header"],[1,"header-container"],[1,"header-primary"],[1,"header-container-secondary"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"signup-parameter-container"],[1,"form-group-container",3,"ngSubmit"],["t","ngForm"],["class","form-group",4,"ngIf"],["style","color: rgba(0, 0, 0, 0.8); width: 75%",4,"ngIf"],["class","form-group agree-disagree",4,"ngIf"],[1,"form-group","button-container",3,"ngStyle"],["href","javascript:;",1,"forgot-password",2,"color","#007bff",3,"click"],["href","#",1,"forgot-password",2,"float","right","margin-right","20px"],["role","alert",1,"alert","alert-danger"],[2,"text-align","center"],["for","fullName",1,"form-control-placeholder"],["type","text","id","fullName","name","fullName","ngModel","","required","","maxlength","50","autofocus","",1,"form-control"],["fullName",""],["class","help-block",4,"ngIf"],[1,"help-block"],["type","email","id","email","name","email","ngModel","","required","","email","","maxlength","64","pattern","[a-zA-Z0-9_.+-]{1,20}@(?:(?:[a-zA-Z0-9-]+\\.)?[a-zA-Z]+\\.)?(gmail|piet|yahoo|hotmail|rediffmail|apple|microsoft)\\.([a-z]{2,4})(\\.[a-z]{2,4})?$",1,"form-control"],["email",""],["type","password","id","password","name","password","ngModel","","required","","minlength","8","maxlength","20",1,"form-control",3,"type","pattern"],["password",""],["for","contact",1,"form-control-placeholder"],["type","text","id","contact","ngModel","","name","contact","required","",1,"form-control",3,"pattern"],["contact",""],["for","role",1,"form-control-placeholder"],["ngModel","","name","role","required","",1,"form-control"],[2,"color","rgba(0, 0, 0, 0.8)","width","75%"],["for","otp",1,"form-control-placeholder"],["type","text","id","otp","name","otp","ngModel","","required","",1,"form-control"],["otp",""],[1,"form-group","agree-disagree"],["role","button",1,"termsLink",3,"click"],[2,"display","inline","font-size","larger"]],template:function(e,t){if(1&e){var i=zo();Po(0,wZ,2,0,"span",0),jo(1,"div"),jo(2,"div",1),jo(3,"div",2),Po(4,_Z,2,1,"p",3),jo(5,"form",4,5),Ko("ngSubmit",(function(){ti(i);var e=Mo(6);return t.onLogin(e)})),jo(7,"div",6),jo(8,"label",7),Ss(9,"Email Address"),Ho(),Uo(10,"input",8,9),Ho(),jo(12,"div",6),jo(13,"label",10),Ss(14,"Password"),Ho(),Uo(15,"input",11,12),Ho(),jo(17,"div",13),jo(18,"a",14),Ko("click",(function(){return t.toResetPassword()})),Ss(19," Forgot-Password "),Ho(),jo(20,"button",15),Ss(21," Sign in "),Ho(),Ho(),Ho(),Ho(),Ho(),Ho(),jo(22,"div"),Po(23,SZ,2,0,"div",16),Po(24,jZ,27,13,"div",17),Ho(),jo(25,"div",18),jo(26,"span"),Ss(27,"or"),Ho(),jo(28,"button",19,20),Ko("click",(function(){return t.prepareLoginButton()})),Uo(30,"i",21),Po(31,HZ,2,0,"p",22),Po(32,UZ,2,0,"p",22),Ho(),Po(33,qZ,5,0,"div",23),Ho()}if(2&e){var n=Mo(6);Bo("ngIf",!t.isLoading),_r(1),hs("hideBlock",!t.login),_r(3),Bo("ngIf",t.incorrectLoginDetails),_r(11),Bo("type",t.hide?"password":"text"),_r(5),Bo("disabled",!n.valid),_r(2),hs("hideBlock",t.login),_r(1),Bo("ngIf",t.isLoading),_r(1),Bo("ngIf",!t.isLoading),_r(1),hs("hideBlock",t.isLoading||t.verifyEmail),_r(6),Bo("ngIf",t.login),_r(1),Bo("ngIf",!t.login),_r(1),Bo("ngIf",t.login)}},directives:[Dh,qy,ug,My,eg,cg,Uy,Jy,ib,dG,qh,Zy,rb,eb,jg,Hg,Yg],styles:[".login-container[_ngcontent-%COMP%]{width:400px;margin:0 auto;display:block;padding:10px}.login-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-100px;right:-150px}.login-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;font-size:22px;width:100%;display:flex;align-items:center;margin-bottom:10px}.login-container[_ngcontent-%COMP%]   .login-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:325px;position:relative}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.login-container[_ngcontent-%COMP%]   .login-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.login-instead[_ngcontent-%COMP%]{float:left;margin-top:20px}.login-instead[_ngcontent-%COMP%], .login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;display:block;text-align:center}.login-instead[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.login-instead[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.hideBlock[_ngcontent-%COMP%]{display:none}.signup-container[_ngcontent-%COMP%]{width:325px;margin:0 auto;display:block;padding:10px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px;margin-bottom:10px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]}),WZ);function GZ(e,t){if(1&e){var i=zo();jo(0,"div",31),jo(1,"button",32),Ko("click",(function(){return ti(i),$o().openConnectPage()})),Ss(2," Connect "),Ho(),Ho()}}function YZ(e,t){if(1&e&&(jo(0,"span",33),Ss(1),Ho()),2&e){var i=$o();_r(1),As("\u20b9 ",i.teacherProfile.price1," - ",i.teacherProfile.price2,"/hr")}}function KZ(e,t){if(1&e&&(jo(0,"span",33),Ss(1),Ho()),2&e){var i=$o();_r(1),Ts("\u20b9 ",i.teacherProfile.price1,"/hr")}}function XZ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Es(i)}}function JZ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Os("",i.subCategory," : ",i.category," - \u20b9 ",i.price,"/hour")}}function QZ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=$o();_r(1),Ts("Years of Experience - ",i.teacherProfile.yearsOfExperience,"")}}function ZZ(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=$o();_r(1),Ts("Current Organization - ",i.teacherProfile.currentOrganisation,"")}}function $Z(e,t){if(1&e&&(jo(0,"p"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Ts(" ",i," ")}}function e$(e,t){if(1&e&&(jo(0,"span"),Ss(1,"Previous Organization - "),Po(2,$Z,2,1,"p",27),Ho()),2&e){var i=$o();_r(2),Bo("ngForOf",i.teacherProfile.previousOrganisations)}}function t$(e,t){1&e&&(jo(0,"span"),Ss(1,"No Reviews"),Ho())}function i$(e,t){if(1&e&&(jo(0,"tr"),Uo(1,"td",34),jo(2,"td"),jo(3,"div",35),Uo(4,"div",15),Ho(),Ho(),Ho()),2&e){var i=t.$implicit;_r(1),Bo("innerHTML",i.studentName,tr),_r(3),us("width",i.rating,"%")}}var n$,r$=function(e){return{"background-image":e}},a$=((n$=function(){function e(t,i,n,r,a,o,s,l,c,u){_classCallCheck2(this,e),this.profileService=t,this.meetingSevice=i,this.studentService=n,this.httpService=r,this.snackBar=a,this.router=o,this.dialogRef=s,this.activatedRoute=l,this.loginService=c,this.dialog=u,this.config={duration:5e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["snackbar"]},this.isLoading=!1,this.teacherProfile=new db,this.meetingDetails=new fb,this.bookingDetails=new vb,this.reviewList=[],this.startTimeString="Start Time",this.endTimeString="End Time",this.errorMessage="",this.endSelect=-1,this.startSelect=-1,this.tempArray=new xQ,this.time={hour:13,minute:30},this.endTime={hour:0,minute:0},this.st={sh:-1,sm:-1},this.et={eh:-1,em:-1},this.case1a=!1,this.case1b=!1,this.case2a=!1,this.case2b=!1,this.case3a=!1,this.case3b=!1,this.case4a=!1,this.case4b=!1,this.case5a=!1,this.case5b=!1,this.dates=[],this.scheduleDates=[],this.meridian=!0,this.date=new Date,this.settings={bigBanner:!0,timePicker:!0,format:"dd-MM-yyyy hh:mm a",defaultOpen:!1,closeOnSelect:!1},this.ScheduleTime=[],this.fullDate=[],this.profilePictureUrl="../../assets/images/default-user-image.png"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.queryParams.subscribe((function(t){e.userId=t.page,e.httpService.fetchBookingTutorProfileDetails(e.userId).subscribe((function(t){e.teacherProfile=t,e.profilePictureUrl=e.teacherProfile.profilePictureUrl,e.fetchExpertReviews()}))})),this.startDisabled=!0,this.endDisabled=!0,this.teacherProfile=this.profileService.getProfile()}},{key:"openConnectPage",value:function(){null!=this.loginService.getLoginType()?this.dialog.open(gZ,{height:"auto",width:"auto"}):this.dialog.open(zZ,{width:"auto",height:"auto"})}},{key:"fetchExpertReviews",value:function(){var e=this;this.httpService.fetchExpertRecentReviews(this.teacherProfile.bookingId).subscribe((function(t){e.reviewList=t}))}}]),e}()).\u0275fac=function(e){return new(e||n$)(Lo(YG),Lo(mb),Lo(FT),Lo(lk),Lo(rI),Lo(cm),Lo(LT),Lo($f),Lo(gb),Lo(LT))},n$.\u0275cmp=gt({type:n$,selectors:[["app-expert-profile"]],decls:95,vars:23,consts:[[1,"content-container",2,"background-color","black"],[1,"breadcrumb-container"],[1,"breadcrumb",2,"font-size","15px"],["routerLink","../facade"],["routerLink","../searchResults"],[1,"active"],[1,"expert-profile-container-connect"],["class","connect-button-container",4,"ngIf"],[1,"expert-profile-container"],[1,"expert-profile-header"],["default","../../assets/images/default-user-image.png",1,"list-thumbnail",3,"ngStyle"],[1,"basic-information"],[1,"profile-name"],[1,"profile-skills"],[1,"stars-outer"],[1,"stars-inner"],[1,"price-stamp"],["class","price",4,"ngIf"],[1,"numbers-container"],[1,"number"],[1,"info"],[1,"separtor"],[1,"expert-profile-description"],[1,"row"],[1,"col-md-6"],[1,"description-header"],[1,"description-label"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-12"],[1,"content-container"],[1,"connect-button-container"],["type","button",1,"btn","btn-primary",3,"click"],[1,"price"],[3,"innerHTML"],[1,"stars-outer",2,"position","relative","margin-left","10px"]],template:function(e,t){1&e&&(Uo(0,"app-nav-bar"),jo(1,"div",0),jo(2,"div",1),jo(3,"ol",2),jo(4,"li"),jo(5,"a",3),Ss(6,"Home"),Ho(),Ho(),jo(7,"li"),jo(8,"a",4),Ss(9,"Search Results"),Ho(),Ho(),jo(10,"li",5),Ss(11,"Profile"),Ho(),Ho(),Ho(),jo(12,"div",6),Po(13,GZ,3,0,"div",7),jo(14,"div",8),jo(15,"div",9),Uo(16,"div",10),jo(17,"div",11),jo(18,"span",12),Ss(19),Ho(),jo(20,"span",13),Ss(21),Ho(),jo(22,"span",13),Ss(23),Ho(),jo(24,"div",14),Uo(25,"div",15),Ho(),Ho(),jo(26,"div",16),Po(27,YZ,2,2,"span",17),Po(28,KZ,2,1,"span",17),Ho(),jo(29,"div",18),jo(30,"div"),jo(31,"span",19),Ss(32),Ho(),jo(33,"span",20),Ss(34,"Reviews"),Ho(),Ho(),Uo(35,"div",21),jo(36,"div"),jo(37,"span",19),Ss(38),Ho(),jo(39,"span",20),Ss(40,"Sessions"),Ho(),Ho(),Ho(),Ho(),jo(41,"div",22),jo(42,"div",23),jo(43,"div",24),jo(44,"div",25),Ss(45,"Description"),Ho(),jo(46,"div",26),Ss(47),Ho(),Ho(),jo(48,"div",24),jo(49,"div",25),Ss(50,"Speciality"),Ho(),jo(51,"div",26),Ss(52),Ho(),Ho(),Ho(),jo(53,"div",23),jo(54,"div",24),jo(55,"div",25),Ss(56," Education Qualification & Certificates "),Ho(),jo(57,"div",26),Po(58,XZ,2,1,"span",27),Ho(),Ho(),jo(59,"div",24),jo(60,"div",25),Ss(61,"Profession Skills"),Ho(),jo(62,"div",26),jo(63,"span"),Ss(64),Ho(),Ho(),Ho(),Ho(),jo(65,"div",23),jo(66,"div",24),jo(67,"div",25),Ss(68,"Area of Expertise"),Ho(),jo(69,"div",26),Po(70,JZ,2,3,"span",27),Ho(),Ho(),jo(71,"div",24),jo(72,"div",25),Ss(73,"Professional Background"),Ho(),jo(74,"div",26),Po(75,QZ,2,1,"span",28),Po(76,ZZ,2,1,"span",28),Po(77,e$,3,1,"span",28),Ho(),Ho(),Ho(),jo(78,"div",23),jo(79,"div",29),jo(80,"div",25),Ss(81,"Reviews"),Ho(),jo(82,"div",30),Po(83,t$,2,0,"span",28),jo(84,"table"),Po(85,i$,5,3,"tr",27),Ho(),Ho(),Ho(),Uo(86,"br"),Uo(87,"br"),Uo(88,"br"),Uo(89,"br"),Uo(90,"br"),Uo(91,"br"),Uo(92,"br"),Uo(93,"br"),Uo(94,"br"),Ho(),Ho(),Ho(),Ho(),Ho()),2&e&&(_r(13),Bo("ngIf","Expert"!=t.loginService.getLoginType()),_r(3),Bo("ngStyle",ql(21,r$,"url("+t.profilePictureUrl+")")),_r(3),Es(t.teacherProfile.fullName),_r(2),Es(t.teacherProfile.institute),_r(2),Es(t.teacherProfile.professionalSkills),_r(2),us("width",t.teacherProfile.rating,"%"),_r(2),Bo("ngIf",t.teacherProfile.price1!=t.teacherProfile.price2),_r(1),Bo("ngIf",t.teacherProfile.price1==t.teacherProfile.price2),_r(4),Es(t.teacherProfile.reviewCount),_r(6),Es(t.teacherProfile.lessonCompleted),_r(9),Ts(" ",t.teacherProfile.description," "),_r(5),Ts(" ",t.teacherProfile.speciality," "),_r(6),Bo("ngForOf",t.teacherProfile.educationalQualifications),_r(6),Es(t.teacherProfile.professionalSkills),_r(6),Bo("ngForOf",t.teacherProfile.areaOfExpertise),_r(5),Bo("ngIf",t.teacherProfile.yearsOfExperience),_r(1),Bo("ngIf",t.teacherProfile.currentOrganisation),_r(1),Bo("ngIf",t.teacherProfile.previousOrganisations),_r(6),Bo("ngIf",0==t.reviewList.length),_r(2),Bo("ngForOf",t.reviewList))},directives:[tz,hm,Dh,qh,xh],styles:[""]}),n$);function o$(e,t){1&e&&(jo(0,"div",5),Uo(1,"img",6),jo(2,"div",7),jo(3,"span",8),Ss(4,"Follow your experts"),Ho(),jo(5,"span"),Ss(6," Please get a head start by booking an expert of you choice"),Ho(),Ho(),Ho())}function s$(e,t){if(1&e&&(jo(0,"span"),Ss(1),Ho()),2&e){var i=t.$implicit;_r(1),Ts("",i.subCategory,", \xa0")}}var l$=function(e){return{"background-image":e}};function c$(e,t){if(1&e){var i=zo();jo(0,"li",9),Uo(1,"div",10),jo(2,"div",11),Uo(3,"span",12),Uo(4,"span",13),jo(5,"div",14),Uo(6,"div",15),Ho(),Ho(),jo(7,"div",16),jo(8,"div",17),jo(9,"div",18),Ss(10," \u20b9"),Uo(11,"span",19),jo(12,"span",20),Ss(13,"per hour"),Ho(),Ho(),Uo(14,"div",21),jo(15,"div"),Uo(16,"span",22),jo(17,"span",20),Ss(18,"REVIEWS"),Ho(),Ho(),Uo(19,"div",21),jo(20,"div"),Uo(21,"span",22),jo(22,"span",20),Ss(23,"Sessions"),Ho(),Ho(),Ho(),Uo(24,"div",23),Xl(25,"shorten"),jo(26,"div",24),jo(27,"b"),Ss(28," Tutors For"),Ho(),jo(29,"div",25),Po(30,s$,2,1,"span",26),Ho(),Ho(),jo(31,"button",27),Ko("click",(function(){ti(i);var e=t.$implicit;return $o().viewProfile(e)})),Ss(32," View Profile "),Ho(),Ho(),Ho()}if(2&e){var n=t.$implicit;_r(1),Bo("ngStyle",ql(12,l$,"url("+n.profilePictureUrl+")")),_r(2),Bo("innerHTML",n.fullName,tr),_r(1),Bo("innerHTML",n.institute,tr),_r(2),us("width",n.rating,"%"),_r(5),Bo("innerHTML",n.price1,tr),_r(5),Bo("innerHTML",n.reviewCount,tr),_r(5),Bo("innerHTML",n.lessonCompleted,tr),_r(3),Bo("innerHTML",Jl(25,10,n.description),tr),_r(6),Bo("ngForOf",n.areaOfExpertise)}}var u$,h$=((u$=function(){function e(t,i,n){_classCallCheck2(this,e),this.httpService=t,this.router=i,this.studentService=n,this.searchResults=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;null!=this.studentService.getStudentProfileDetails().sid?this.fetchAllLinkedTutors():setTimeout((function(){e.studentProfile=e.studentService.getStudentProfileDetails(),e.fetchAllLinkedTutors()}),1e3)}},{key:"fetchAllLinkedTutors",value:function(){var e=this;this.sid=this.studentService.getStudentProfileDetails().sid,this.httpService.fetchAllLinkedTutors(this.sid).subscribe((function(t){e.searchResults=t}))}},{key:"viewProfile",value:function(e){this.router.navigate(["viewTutors"],{queryParams:{page:e.bookingId}})}}]),e}()).\u0275fac=function(e){return new(e||u$)(Lo(lk),Lo(cm),Lo(FT))},u$.\u0275cmp=gt({type:u$,selectors:[["app-experts"]],decls:6,vars:2,consts:[[1,"search-result-container",2,"margin-top","0","padding-top","70px"],[1,"search-cards-container"],["class","no-recordsfound","style","height: 180px;",4,"ngIf"],[2,"padding","10px"],["class","search-result-card",4,"ngFor","ngForOf"],[1,"no-recordsfound",2,"height","180px"],["src","../../../assets/images/thankyou_bg.svg"],[1,"information-container"],[1,"noinforheader"],[1,"search-result-card"],[1,"result-profile-pic",3,"ngStyle"],[1,"result-card-header"],[1,"result-card-name",3,"innerHTML"],[1,"result-card-specalizaiton",3,"innerHTML"],[1,"stars-outer"],[1,"stars-inner"],[1,"result-card-content"],[1,"numbers-container"],[1,"fee_per_attribute"],[1,"number",2,"display","contents","color","#7d0f7d",3,"innerHTML"],[1,"info"],[1,"separtor"],[1,"number",3,"innerHTML"],[1,"result-card-descirption",3,"innerHTML"],[1,"result-card-tutorsfor"],[1,"tutor-sub"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(jo(0,"div",0),jo(1,"div",1),Po(2,o$,7,0,"div",2),jo(3,"ul"),jo(4,"div",3),Po(5,c$,33,14,"li",4),Ho(),Ho(),Ho(),Ho()),2&e&&(_r(2),Bo("ngIf",0==t.searchResults.length),_r(3),Bo("ngForOf",t.searchResults))},directives:[Dh,xh,qh],pipes:[zJ],styles:["@media only screen and (-webkit-min-device-pixel-ratio:2) and (max-device-width:812px) and (min-device-width:320px){.search-result-container[_ngcontent-%COMP%]{position:absolute;top:178px!important;display:inline-block;margin-top:0!important;left:-20px;padding-top:0!important}.search-result-container[_ngcontent-%COMP%]   .no-recordsfound[_ngcontent-%COMP%]{margin-left:50px!important;height:250px!important}}"]}),u$);function d$(e,t){1&e&&(jo(0,"div",10),Uo(1,"app-loading"),Ho())}function p$(e,t){1&e&&(jo(0,"div",21),Ss(1," Email entered doesn't exist ! "),Ho())}function f$(e,t){1&e&&(jo(0,"span",27),Ss(1,"Invalid email"),Ho())}function v$(e,t){if(1&e&&(jo(0,"div",22),jo(1,"label",23),Ss(2,"Email Address"),Ho(),Uo(3,"input",24,25),Po(5,f$,2,0,"span",26),Ho()),2&e){var i=Mo(4);_r(5),Bo("ngIf",!i.valid&&i.touched)}}function m$(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"p"),Ss(2,"Please enter your registered email."),Ho(),Po(3,p$,2,0,"div",14),jo(4,"form",15,16),Ko("ngSubmit",(function(){ti(i);var e=Mo(5);return $o(2).submitEmail(e)})),Po(6,v$,6,1,"div",17),jo(7,"div",18),jo(8,"button",19),Ss(9," Next "),Ho(),jo(10,"a",20),Ss(11," Cancel "),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(5),r=$o(2);_r(3),Bo("ngIf",r.incorrectEmail),_r(3),Bo("ngIf",r.showEmail),_r(2),Bo("disabled",!n.valid)}}function g$(e,t){1&e&&(jo(0,"div",28),Uo(1,"img",29),jo(2,"h5"),Ss(3,"Reset password link has been sent to your registered email !"),Ho(),Ho())}function y$(e,t){if(1&e&&(jo(0,"div",11),Po(1,m$,12,3,"div",12),Po(2,g$,4,0,"div",13),Ho()),2&e){var i=$o();_r(1),Bo("ngIf",!i.linkSent),_r(1),Bo("ngIf",i.linkSent)}}function b$(e,t){1&e&&(jo(0,"span",27),Ss(1,"password field must be minimum of 8 characters with atleast one lowercase, uppercase, number and a special character"),Ho())}function k$(e,t){if(1&e&&(jo(0,"div",22),jo(1,"label",31),Ss(2,"New Password"),Ho(),Uo(3,"input",32,33),Po(5,b$,2,0,"span",26),Ho()),2&e){var i=Mo(4),n=$o(3);_r(3),Bo("pattern",n.passwordPattern),_r(2),Bo("ngIf",!i.valid&&i.touched)}}function C$(e,t){1&e&&(jo(0,"span",27),Ss(1,"password field must be minimum of 8 characters with atleast one lowercase, uppercase, number and a special character"),Ho())}function w$(e,t){if(1&e&&(jo(0,"div",22),jo(1,"label",34),Ss(2,"Retype New Password"),Ho(),Uo(3,"input",35,36),Po(5,C$,2,0,"span",26),Ho()),2&e){var i=Mo(4),n=$o(3);_r(3),Bo("pattern",n.passwordPattern),_r(2),Bo("ngIf",!i.valid&&i.touched)}}function _$(e,t){if(1&e){var i=zo();jo(0,"div"),jo(1,"p"),Ss(2,"Please reset your password"),Ho(),Uo(3,"div",30),jo(4,"form",15,16),Ko("ngSubmit",(function(){ti(i);var e=Mo(5);return $o(2).onReset(e)})),Po(6,k$,6,2,"div",17),Po(7,w$,6,2,"div",17),jo(8,"div",18),jo(9,"button",19),Ss(10," Next "),Ho(),jo(11,"a",20),Ss(12," Cancel "),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(5),r=$o(2);_r(3),Bo("innerHTML",r.passwordError,tr),_r(3),Bo("ngIf",r.showPassword),_r(1),Bo("ngIf",r.showPassword),_r(2),Bo("disabled",!n.valid)}}function S$(e,t){1&e&&(jo(0,"div",28),Uo(1,"img",29),jo(2,"h5"),Ss(3,"Password has been reset successfully !"),Ho(),Ho())}function E$(e,t){if(1&e&&(jo(0,"div",11),Po(1,_$,13,4,"div",12),Po(2,S$,4,0,"div",13),Ho()),2&e){var i=$o();_r(1),Bo("ngIf",!i.passwordReset),_r(1),Bo("ngIf",i.passwordReset)}}var T$,A$,O$,x$=((O$=function(){function e(t,i,n,r,a,o,s,l,c,u){_classCallCheck2(this,e),this.profileService=t,this.meetingSevice=i,this.studentService=n,this.httpService=r,this.snackBar=a,this.router=o,this.dialogRef=s,this.activatedRoute=l,this.loginService=c,this.dialog=u,this.linkSent=!1,this.mobNumberPattern="^((\\+91-?)|0)?[0-9]{10}$",this.passwordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,12}$"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.queryParams.subscribe((function(t){e.code=t.token,null==e.code?e.showEmail=!0:e.showPassword=!0}))}},{key:"toLoginPage",value:function(){this.router.navigate(["login"])}},{key:"onReset",value:function(e){var t=this;e.value.password==e.value.retypePassword?(this.passwordError="",this.httpService.updatePassword(this.code,e.value.password).subscribe((function(e){1==e&&(t.passwordReset=!0)}))):this.passwordError="Password and retyped password doesn't match !"}},{key:"submitEmail",value:function(e){var t=this;this.isLoading=!0,this.httpService.resetPasswordLink(e.value.email).subscribe((function(e){t.isLoading=!1,1==e?t.linkSent=!t.linkSent:t.incorrectEmail=!0}))}}]),e}()).\u0275fac=function(e){return new(e||O$)(Lo(YG),Lo(mb),Lo(FT),Lo(lk),Lo(rI),Lo(cm),Lo(LT),Lo($f),Lo(gb),Lo(LT))},O$.\u0275cmp=gt({type:O$,selectors:[["app-reset-password"]],decls:15,vars:5,consts:[["style","\n    text-align: center;\n    margin-top: 20%;\n    margin-left: auto;\n    margin-right: auto;\n  ",4,"ngIf"],[1,"signup-container"],[1,"material-icons","close",2,"cursor","pointer",3,"click"],[1,"signup-header"],[1,"header-container"],[1,"header-primary"],[1,"header-container-secondary"],[1,"logo","hide"],[1,"info-class"],["class","signup-parameter-container",4,"ngIf"],[2,"text-align","center","margin-top","20%","margin-left","auto","margin-right","auto"],[1,"signup-parameter-container"],[4,"ngIf"],["style","text-align: center",4,"ngIf"],["style","margin: 10px; margin-left: 0; color: red; font-size: 12px",4,"ngIf"],[1,"form-group-container",3,"ngSubmit"],["t","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group","button-container"],["type","submit",1,"btn","btn-primary",3,"disabled"],["href","#",1,"forgot-password",2,"float","right","margin-right","20px"],[2,"margin","10px","margin-left","0","color","red","font-size","12px"],[1,"form-group"],["for","email",1,"form-control-placeholder"],["type","email","id","email","name","email","ngModel","","required","","email","","maxlength","64","pattern","[a-zA-Z0-9_.+-]{1,20}@(?:(?:[a-zA-Z0-9-]+\\.)?[a-zA-Z]+\\.)?(gmail|piet|yahoo|hotmail|rediffmail|apple|microsoft)\\.([a-z]{2,4})(\\.[a-z]{2,4})?$",1,"form-control"],["email","ngModel"],["class","help-block",4,"ngIf"],[1,"help-block"],[2,"text-align","center"],["src","../../assets/images/check.svg","alt","",2,"width","100px","height","100px","margin","20px"],[2,"margin","10px","margin-left","0","color","red","font-size","12px",3,"innerHTML"],["for","password",1,"form-control-placeholder"],["type","password","id","password","name","password","ngModel","","required","","minlength","8","maxlength","20","placeholder","Enter new password",1,"form-control",3,"pattern"],["password","ngModel"],["for","retypePassword",1,"form-control-placeholder"],["type","password","id","retypePassword","name","retypePassword","ngModel","","required","","minlength","8","maxlength","20","placeholder","Retype new password",1,"form-control",3,"pattern"],["retypePassword","ngModel"]],template:function(e,t){1&e&&(Po(0,d$,2,0,"div",0),jo(1,"div",1),jo(2,"span",2),Ko("click",(function(){return t.toLoginPage()})),Ss(3," close "),Ho(),jo(4,"div",3),jo(5,"div",4),jo(6,"span",5),Ss(7,"Reset"),Ho(),Uo(8,"br"),jo(9,"span",6),Ss(10,"Your Password"),Ho(),Ho(),Uo(11,"div",7),Uo(12,"div",8),Ho(),Po(13,y$,3,2,"div",9),Po(14,E$,3,2,"div",9),Ho()),2&e&&(Bo("ngIf",t.isLoading),_r(1),ds(t.isLoading?"hideBlock":""),_r(12),Bo("ngIf",t.showEmail),_r(1),Bo("ngIf",t.showPassword))},directives:[Dh,dG,qy,ug,My,eg,cg,Uy,Jy,Zy,ib,rb,eb],styles:[".signup-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;display:block;padding:10px;margin:50px auto 0;height:700px}.signup-container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:24px;position:relative;top:-10px;right:-10px}.signup-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:120px;height:90px;display:inline-block;float:right;margin-right:70px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{color:#e30084;font-weight:700;text-transform:uppercase;width:325px;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-header[_ngcontent-%COMP%]   .header-container-secondary[_ngcontent-%COMP%]{color:#000;font-weight:400;text-transform:uppercase;font-size:22px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]{border:1px solid #7d0f7d;border-radius:8px;display:block;float:left;width:100%;padding:20px;box-shadow:0 8px 16px 0 #90a4ae}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{line-height:30px}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{float:right}.signup-container[_ngcontent-%COMP%]   .signup-parameter-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#000;float:left}.agree-disagree[_ngcontent-%COMP%]{margin-bottom:15px;text-align:center}.social-button-container[_ngcontent-%COMP%]{margin-top:60px;text-align:center}.help-block[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.hideBlock[_ngcontent-%COMP%]{display:none}"]}),O$),I$=((A$=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||A$)},A$.\u0275cmp=gt({type:A$,selectors:[["app-about-us"]],decls:19,vars:0,consts:[[2,"padding-top","100px","padding-bottom","20px"],[1,"container"],[2,"margin-bottom","30px","text-align","center"],[1,"row",2,"margin","20px"],[2,"font-family","Lobster","text-align","center","font-size","large"]],template:function(e,t){1&e&&(Uo(0,"app-nav-bar"),jo(1,"body",0),jo(2,"div",1),jo(3,"h1",2),Ss(4,"About Fellow Genius"),Ho(),jo(5,"div",3),jo(6,"h2"),Ss(7,"Learning On-demand!"),Ho(),jo(8,"div"),jo(9,"p"),Ss(10," In an age of emerging technologies, access to the internet and devices is easy today. This connectivity opens a superhighway of information for people to learn and progress from anywhere. fellowGenius offers an easy to use online hub for anyone who wants to learn or teach something. Founded in 2020, fellowGenius is a New Delhi (India) based company that promotes the peer-to-peer learning platform. It is a convenient and simple technology for students, young professionals, or anyone who wants to find an instructor instantly. That\u2019s why we are home to more than 4500 learners and 1000+ instructors and have already rolled-out almost 12000 sessions successfully. "),Ho(),Ho(),Ho(),jo(11,"div",3),jo(12,"h2"),Ss(13,"Our Vision"),Ho(),jo(14,"div"),jo(15,"p",4),Ss(16," \u201cFacilitate a world-class knowledge experience for everyone regardless of their geographic location.\u201d "),Ho(),jo(17,"p"),Ss(18," We help people access the best instructors and help instructors find students through our groundbreaking online learning technology. Our vision is to provide people with tools to help transfer knowledge in a transparent manner. "),Ho(),Ho(),Ho(),Ho(),Ho())},directives:[tz],styles:["p[_ngcontent-%COMP%]{display:block;font-size:medium}h2[_ngcontent-%COMP%]{margin-bottom:20px!important;color:#e30084;margin:auto}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:600}h1[_ngcontent-%COMP%]{color:#892687;text-align:center}"]}),A$),D$=((T$=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||T$)},T$.\u0275cmp=gt({type:T$,selectors:[["app-faq"]],decls:87,vars:0,consts:[[2,"padding-top","100px","padding-bottom","20px"],[1,"container"],[2,"margin-bottom","30px"],[1,"row",2,"margin","20px"]],template:function(e,t){1&e&&(Uo(0,"app-nav-bar"),jo(1,"body",0),jo(2,"div",1),jo(3,"h1",2),Ss(4,"Frequently Asked Questions"),Ho(),jo(5,"div",3),jo(6,"h2"),Ss(7,"General"),Ho(),jo(8,"div"),jo(9,"p"),jo(10,"b"),Ss(11,"Where can I complete my profile? Can I change/edit profile information once I have submitted it?"),Ho(),Ho(),jo(12,"p"),Ss(13,"We can complete our profile percentage wise by clicking on the completing profile hyperlink and navigating to profile page. We can also view and edit our profile by navigating to profile page by clicking your name (or profile picture) in navigation bar."),Ho(),jo(14,"p"),jo(15,"b"),Ss(16,"How easy is it to book a classroom session?"),Ho(),Ho(),jo(17,"p"),Ss(18,"It is easy to book a class. Simply search for the Expert with the required subject expertise. Then select the Expert you find appropriate and send him/her the request to book a classroom session as per their availability published on platform. Once accepted your session would start as per the mutually agreed timeslot. "),Ho(),jo(19,"p"),jo(20,"b"),Ss(21,"How much does it cost to use fellowGenius?"),Ho(),Ho(),jo(22,"p"),Ss(23,"The platform is FREE to join. The cost of the class is based on charges of the instructor. To take a class, you need to pay part of the fee as per the defined charges."),Ho(),Ho(),Ho(),jo(24,"div",3),jo(25,"h2"),Ss(26,"Learners FAQ"),Ho(),jo(27,"div"),jo(28,"p"),jo(29,"b"),Ss(30,"How to find an expert on Fellow Genius?"),Ho(),Ho(),jo(31,"p"),Ss(32,"To find an expert, Go to \u201cSearch bar\u201d and select the subject/specialty and click search. You will immediately view a list of all the matching instructors suitable for your search criteria. "),Ho(),jo(33,"p"),jo(34,"b"),Ss(35,"Can I cancel or reschedule my session?"),Ho(),Ho(),jo(36,"p"),Ss(37,"Yes, you can cancel a session anytime you want. Thereafter you can reschedule the session by getting in touch with your expert. "),Ho(),jo(38,"p"),jo(39,"b"),Ss(40,"What are the payment methods?"),Ho(),Ho(),jo(41,"p"),Ss(42,"You can pay the fee online through a Debit/Credit card. Other options include UPI, online banking, and Paypal. "),Ho(),jo(43,"p"),jo(44,"b"),Ss(45,"Can I view my earlier taken sessions on Platform?"),Ho(),Ho(),jo(46,"p"),Ss(47,"Yes, you can view the previous taken sessions in calendar of the bookings page. You can visit the bookings page using navigation bar"),Ho(),jo(48,"p"),jo(49,"b"),Ss(50,"How can I review an expert?"),Ho(),Ho(),jo(51,"p"),Ss(52,"Once the session is completed, you can review the expert as a learner from pending reviews section on dashboard. You can rate the expert by clicking on the stars."),Ho(),jo(53,"p"),jo(54,"b"),Ss(55,"Would I get an reminder on start of the session?"),Ho(),Ho(),jo(56,"p"),Ss(57,"Yes, as a learner you will receive a notification on your registered email whenever the expert initiates the session "),Ho(),Ho(),Ho(),jo(58,"div",3),jo(59,"h2"),Ss(60,"Expert FAQ"),Ho(),jo(61,"div"),jo(62,"p"),jo(63,"b"),Ss(64,"How much fellowGenius charge for registration?"),Ho(),Ho(),jo(65,"p"),Ss(66,"There is NO charge to join the fellowGenius teaching program. You register for FREE and immediately start earning once your profile is registered and your availability is set. "),Ho(),jo(67,"p"),jo(68,"b"),Ss(69,"How much time does it take for an expert to get students?"),Ho(),Ho(),jo(70,"p"),Ss(71,"Most of the experts find prospective students within a week after joining our program. "),Ho(),jo(72,"p"),jo(73,"b"),Ss(74,"How much can I earn as an instructor? Where do I set my Session fees? "),Ho(),Ho(),jo(75,"p"),Ss(76,"There is simply no marker to ascertain that. What you earn entirely depends on the fee you charge and how many classes you take. "),Ho(),jo(77,"p"),jo(78,"b"),Ss(79,"Is it important to fill all information and give my Linked In Profile link?"),Ho(),Ho(),jo(80,"p"),Ss(81,"While filling the form, all the fields marked with * are mandatory.Filling the complete form might improve your learner booking frequency."),Ho(),jo(82,"p"),jo(83,"b"),Ss(84,"Can I view my earlier taken sessions on Platform?"),Ho(),Ho(),jo(85,"p"),Ss(86,"Yes, you can view the previous taken sessions in calendar of the bookings page. You can visit the bookings page using navigation bar."),Ho(),Ho(),Ho(),Ho(),Ho())},directives:[tz],styles:["p[_ngcontent-%COMP%]{display:block;font-size:medium}h2[_ngcontent-%COMP%]{margin-bottom:20px!important;color:#e30084;margin:auto}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:600}h1[_ngcontent-%COMP%]{color:#892687;text-align:center}"]}),T$);function R$(e,t){if(1&e&&(jo(0,"p",17),Ss(1),Ho()),2&e){var i=$o().$implicit;_r(1),Ts(" ",i.subCategory," ")}}function P$(e,t){if(1&e&&(jo(0,"div"),Po(1,R$,2,1,"p",16),Ho()),2&e){var i=t.$implicit,n=$o().$implicit;_r(1),Bo("ngIf",i.category==n.category)}}function M$(e,t){if(1&e&&(jo(0,"div"),jo(1,"p",15),Ss(2),Ho(),Po(3,P$,2,1,"div",2),Ho()),2&e){var i=t.$implicit,n=$o();_r(2),Es(i.category),_r(1),Bo("ngForOf",n.subCategories)}}function L$(e,t){if(1&e&&(jo(0,"option",18),Ss(1),Ho()),2&e){var i=t.$implicit;Bo("value",i.category),_r(1),Ts(" ",i.category," ")}}var N$,F$,B$,V$=[{path:"home",component:Mx,children:[{path:"profile",component:pJ},{path:"studentDashboard",component:gY},{path:"tutorDashboard",component:NY},{path:"studentProfile",component:SJ},{path:"bookings",component:YW},{path:"studentBookings",component:HJ},{path:"tutorSchedule",component:NJ},{path:"sessionNotes",component:AQ},{path:"recordings",component:OQ},{path:"knowledgeBase",component:TQ},{path:"experts",component:h$}]},{path:"facade",component:cG},{path:"how-it-works",component:(F$=function(){function e(){_classCallCheck2(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),F$.\u0275fac=function(e){return new(e||F$)},F$.\u0275cmp=gt({type:F$,selectors:[["app-how-it-works"]],decls:55,vars:0,consts:[[2,"padding-top","100px","padding-bottom","20px"],[1,"container"],[2,"margin-bottom","30px","text-align","center"],[1,"row",2,"margin","20px"]],template:function(e,t){1&e&&(Uo(0,"app-nav-bar"),jo(1,"body",0),jo(2,"div",1),jo(3,"h1",2),Ss(4," How the Platform works "),Ho(),jo(5,"div",3),jo(6,"h4"),Ss(7," To use Fellow Genius is very simple. Just follow the steps below to get started. It takes just a couple of minutes to register. "),Ho(),jo(8,"h2"),Ss(9,"For Learner"),Ho(),jo(10,"div"),jo(11,"p"),jo(12,"b"),Ss(13,"Step 1 - Register"),Ho(),Ho(),jo(14,"p"),Ss(15," To make the full use of Fellow Genius, learners must create an account here by providing their basic details like name, email ID, and phone number (required for OTP verification). The platform is SSO enabled with Google and you can sing up using ur Google credentials as well. "),Ho(),jo(16,"p"),jo(17,"strong"),Ss(18,"Step 2 - Find an Expert"),Ho(),Ho(),jo(19,"p"),Ss(20," Once registered, the learner can search for instructors they need based on specialization and subject. A detailed profile of the Expert is provided to view their skills and qualification. After selecting the instructor just send a request to conduct a class. "),Ho(),jo(21,"p"),jo(22,"strong"),Ss(23,"Step 3 - Pay fee"),Ho(),Ho(),jo(24,"p"),Ss(25," After selecting the preferred instructor, a learner or the student can proceed by paying the fee as requested by the instructor. The fee can be paid through Debit/Credit card, UPI, Netbanking, and Paypal. 50% of the fees is to be paid before taking the class. "),Ho(),jo(26,"p"),jo(27,"strong"),Ss(28,"Step 4 - Start learning"),Ho(),Ho(),jo(29,"p"),Ss(30," Once the fee is paid, the learner and the Expert can collaborate together. Based on the availability and convenience of the Expert, finalize the classroom schedule and start learning. "),Ho(),Ho(),Ho(),jo(31,"div",3),jo(32,"h2"),Ss(33,"For Expert"),Ho(),jo(34,"div"),jo(35,"p"),jo(36,"strong"),Ss(37,"Step 1 - Register"),Ho(),Ho(),jo(38,"p"),Ss(39," All the experts must register on Fellow Genius to get started. Go to our Sign up page and create an account with details like name, email ID, and phone number (required for OTP verification). It is simple to register and only takes a few minutes. The platform is SSO enabled with Google and you can sing up using ur Google credentials as well. "),Ho(),jo(40,"p"),jo(41,"strong"),Ss(42,"Step 2 - Complete your profile"),Ho(),Ho(),jo(43,"p"),Ss(44," All the experts must complete their profile on Fellow Genius to get started. Go to our Profile completion Page and provide information. Please ensure to make it as relevant and comprehensive as possible since basis this only learner would reach out to you for the learning demands. "),Ho(),jo(45,"p"),jo(46,"strong"),Ss(47,"Step 3 - Schedule your availability"),Ho(),Ho(),jo(48,"p"),Ss(49," As a next step, you need to schedule your availability by clicking on the Schedule tab on the left panel; To schedule the same; click on the timeslots you want to publish as available slots which would be visible to the learner and he/she can request to book your calendar. Also you can set it up one time or recurring as required. "),Ho(),jo(50,"p"),jo(51,"strong"),Ss(52,"Step 4 - Start Mentoring"),Ho(),Ho(),jo(53,"p"),Ss(54," Once the profile is completed and availability is set you would be part of the Expert community at Fellow genius and then learners can search you and request for sessions. "),Ho(),Ho(),Ho(),Ho(),Ho())},directives:[tz],styles:["p[_ngcontent-%COMP%]{display:block;font-size:medium}h2[_ngcontent-%COMP%]{color:#e30084;margin:auto;margin-top:10px!important;margin-bottom:10px!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-weight:600}h1[_ngcontent-%COMP%]{color:#892687}h4[_ngcontent-%COMP%]{font-weight:600}"]}),F$)},{path:"faq",component:D$},{path:"about-us",component:I$},{path:"searchResults",component:EQ},{path:"viewTutors",component:a$},{path:"login",component:gG},{path:"signUp",component:zG},{path:"meeting",component:gD},{path:"test",component:oQ},{path:"resetPassword",component:x$},{path:"admin/categories",component:(N$=function(){function e(t){_classCallCheck2(this,e),this.httpService=t,this.categories=[],this.subCategories=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllCategories()}},{key:"addCategory",value:function(e){var t=this;console.log(e.value);var i=new HY;i.category=e.value.categoryName,console.log(i),this.httpService.addNewCategory(i).subscribe((function(e){1==e&&(t.categories.push(i),t.categoryInput="")}))}},{key:"addSubCategory",value:function(e){var t=this,i=new HY;i.category=e.value.categoryName,i.subCategory=e.value.subCategoryName,this.httpService.addNewSubCategory(i).subscribe((function(e){1==e&&(t.subCategories.push(i),t.subCategoryInput="")}))}},{key:"getAllCategories",value:function(){var e=this;this.httpService.getAllCategories().subscribe((function(t){var i=t;if(i.length>0)for(var n=0;n<i.length;n++){var r=new HY;r.category=i[n].category,e.categories.push(r),e.selectedValue=e.categories[0].category}e.httpService.getAllSubCategories().subscribe((function(t){e.subCategories=t,console.log(e.subCategories)})),console.log(e.categories)}))}}]),e}(),N$.\u0275fac=function(e){return new(e||N$)(Lo(lk))},N$.\u0275cmp=gt({type:N$,selectors:[["app-categories"]],decls:29,vars:7,consts:[[1,"container"],[1,"box"],[4,"ngFor","ngForOf"],[3,"ngSubmit"],["c","ngForm"],[1,"form-group"],["for","categoryInput"],["type","text","id","categoryInput","name","categoryName","ngModel","","required","","placeholder","Enter Category Name",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled"],["sc","ngForm"],["for","chooseCategory"],["id","chooseCategory","name","categoryName","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","subCategoryInput"],["type","text","id","subCategoryInput","name","subCategoryName","ngModel","","required","","placeholder","Enter Sub Category Name",1,"form-control",3,"ngModel","ngModelChange"],[2,"margin-left","1rem"],["style","margin-left: 2rem",4,"ngIf"],[2,"margin-left","2rem"],[3,"value"]],template:function(e,t){if(1&e){var i=zo();jo(0,"div",0),jo(1,"div",1),jo(2,"h3"),Ss(3,"Categories"),Ho(),Uo(4,"br"),Po(5,M$,4,2,"div",2),Ho(),jo(6,"div",1),jo(7,"form",3,4),Ko("ngSubmit",(function(){ti(i);var e=Mo(8);return t.addCategory(e)})),jo(9,"div",5),jo(10,"label",6),Ss(11,"Category Name"),Ho(),jo(12,"input",7),Ko("ngModelChange",(function(e){return t.categoryInput=e})),Ho(),Ho(),jo(13,"button",8),Ss(14," Submit "),Ho(),Ho(),Ho(),jo(15,"div",1),jo(16,"form",3,9),Ko("ngSubmit",(function(){ti(i);var e=Mo(17);return t.addSubCategory(e)})),jo(18,"div",5),jo(19,"label",10),Ss(20,"Choose category"),Ho(),jo(21,"select",11),Ko("ngModelChange",(function(e){return t.selectedValue=e})),Po(22,L$,2,2,"option",12),Ho(),Ho(),jo(23,"div",5),jo(24,"label",13),Ss(25,"Sub Category Name"),Ho(),jo(26,"input",14),Ko("ngModelChange",(function(e){return t.subCategoryInput=e})),Ho(),Ho(),jo(27,"button",8),Ss(28," Submit "),Ho(),Ho(),Ho(),Ho()}if(2&e){var n=Mo(8),r=Mo(17);_r(5),Bo("ngForOf",t.categories),_r(7),Bo("ngModel",t.categoryInput),_r(1),Bo("disabled",!n.form.valid),_r(8),Bo("ngModel",t.selectedValue),_r(1),Bo("ngForOf",t.categories),_r(4),Bo("ngModel",t.subCategoryInput),_r(1),Bo("disabled",!r.form.valid)}},directives:[xh,qy,ug,My,eg,cg,Uy,Jy,jg,Dh,Hg,Yg],styles:[".container[_ngcontent-%COMP%]{margin-top:2vh}.box[_ngcontent-%COMP%]{background:#fff;border:1px solid #3f023f;box-shadow:0 2px 34px 0 rgba(0,0,0,.09);border-radius:12px;width:400px;padding:10px;position:relative;float:left;margin-right:20px;margin-bottom:20px}"]}),N$)},{path:"",redirectTo:"/facade",pathMatch:"full"}],j$=((B$=function e(){_classCallCheck2(this,e)}).\u0275mod=Ct({type:B$,bootstrap:[kA]}),B$.\u0275inj=ve({factory:function(e){return new(e||B$)},providers:[BT,UJ,{provide:Kb,useClass:UJ,multi:!0},jW,HW,UW,qW,WW],imports:[[OE,bD,BA,zd,qm,_A.forRoot({AppID:"45f3ee50e0fd491aa46bd17c05fc7073"}),Dm.forRoot(V$,{useHash:!0}),sb,NT,sk,AE,wD,eZ,lb,nx,_D,tK.initializeApp(ku),qX,iI,VW,zW,BJ,zT,tG,bD,tY]]}),B$);(function(){if(On)throw new Error("Cannot enable prod mode after platform setup.");An=!1})(),qd().bootstrapModule(j$).catch((function(e){return console.error(e)}))},zVF4:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=n("mrSG"),a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},l=function(e){for(var t=[],i=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=63&r|128):55296==(64512&r)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n)),t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=63&r|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],r=0;r<e.length;r+=3){var a=e[r],o=r+1<e.length,s=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=(15&s)<<2|c>>6,h=63&c;l||(h=64,o||(u=64)),n.push(i[a>>2],i[(3&a)<<4|s>>4],i[u],i[h])}return n.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],i=0,n=0;i<e.length;){var r=e[i++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){var a=e[i++];t[n++]=String.fromCharCode((31&r)<<6|63&a)}else if(r>239&&r<365){var o=((7&r)<<18|(63&(a=e[i++]))<<12|(63&(s=e[i++]))<<6|63&e[i++])-65536;t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else{a=e[i++];var s=e[i++];t[n++]=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var i=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],r=0;r<e.length;){var a=i[e.charAt(r++)],o=r<e.length?i[e.charAt(r)]:0,s=++r<e.length?i[e.charAt(r)]:64,l=++r<e.length?i[e.charAt(r)]:64;if(++r,null==a||null==o||null==s||null==l)throw Error();n.push(a<<2|o>>4),64!==s&&(n.push(o<<4&240|s>>2),64!==l&&n.push(s<<6&192|l))}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var i in t)t.hasOwnProperty(i)&&(e[i]=h(e[i],t[i]));return e}var d=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i}))}return e.prototype.wrapCallback=function(e){var t=this;return function(i,n){i?t.reject(i):t.resolve(n),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(i):e(i,n))}},e}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var v=function(e){function t(i,n){var r=e.call(this,n)||this;return r.code=i,r.name="FirebaseError",Object.setPrototypeOf(r,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,m.prototype.create),r}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,i){this.service=e,this.serviceName=t,this.errors=i}return e.prototype.create=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=t[0]||{},r=this.service+"/"+e,a=this.errors[e],o=a?g(a,n):"Error",s=this.serviceName+": "+o+" ("+r+").",l=new v(r,s),c=0,u=Object.keys(n);c<u.length;c++){var h=u[c];"_"!==h.slice(-1)&&(h in l&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),l[h]=n[h])}return l},e}();function g(e,t){return e.replace(y,(function(e,i){var n=t[i];return null!=n?String(n):"<"+i+"?>"}))}var y=/\{\$([^}]+)}/g;function b(e){return JSON.parse(e)}var k=function(t){var i={},n={},r={},a="";try{var o=t.split(".");i=b(u(o[0])||""),n=b(u(o[1])||""),a=o[2],r=n.d||{},delete n.d}catch(e){}return{header:i,claims:n,data:r,signature:a}},C=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var i=this.W_;if("string"==typeof e)for(var n=0;n<16;n++)i[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(n=0;n<16;n++)i[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(n=16;n<80;n++)i[n]=4294967295&((h=i[n-3]^i[n-8]^i[n-14]^i[n-16])<<1|h>>>31);var r,a,o=this.chain_[0],s=this.chain_[1],l=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(n=0;n<80;n++){n<40?n<20?(r=c^s&(l^c),a=1518500249):(r=s^l^c,a=1859775393):n<60?(r=s&l|c&(s|l),a=2400959708):(r=s^l^c,a=3395469782);var h=(o<<5|o>>>27)+r+u+a+i[n]&4294967295;u=c,c=l,l=4294967295&(s<<30|s>>>2),s=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var i=t-this.blockSize,n=0,r=this.buf_,a=this.inbuf_;n<t;){if(0===a)for(;n<=i;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(r[a]=e.charCodeAt(n),++n,++a===this.blockSize){this.compress_(r),a=0;break}}else for(;n<t;)if(r[a]=e[n],++n,++a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)e[n]=this.chain_[i]>>r&255,++n;return e},e}(),w=function(){function t(e,t){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(i)})).catch((function(e){i.error(e)}))}return t.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},t.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},t.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},t.prototype.subscribe=function(t,i,n){var r,a=this;if(void 0===t&&void 0===i&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var i=0,n=["next","error","complete"];i<n.length;i++){var r=n[i];if(r in e&&"function"==typeof e[r])return!0}return!1}(t)?t:{next:t,error:i,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},t.prototype.sendOne=function(t,i){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{i(n.observers[t])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},t.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},t}();function _(){}function S(e,t,i){var n="";switch(t){case 1:n=i?"first":"First";break;case 2:n=i?"second":"Second";break;case 3:n=i?"third":"Third";break;case 4:n=i?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+n+" argument "}i.CONSTANTS=a,i.Deferred=d,i.ErrorFactory=m,i.FirebaseError=v,i.MAX_VALUE_MILLIS=144e5,i.RANDOM_FACTOR=.5,i.Sha1=C,i.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},i.assert=o,i.assertionError=s,i.async=function(e,t){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];Promise.resolve(!0).then((function(){e.apply(void 0,i)})).catch((function(e){t&&t(e)}))}},i.base64=c,i.base64Decode=u,i.base64Encode=function(e){var t=l(e);return c.encodeByteArray(t,!0)},i.calculateBackoffMillis=function(e,t,i){void 0===t&&(t=1e3),void 0===i&&(i=2);var n=t*Math.pow(i,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)},i.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.createSubscribe=function(e,t){var i=new w(e,t);return i.subscribe.bind(i)},i.decode=k,i.deepCopy=function(e){return h(void 0,e)},i.deepExtend=h,i.errorPrefix=S,i.getUA=p,i.isAdmin=function(e){var t=k(e).claims;return"object"==typeof t&&!0===t.admin},i.isBrowser=function(){return"object"==typeof self&&self.self===self},i.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},i.isElectron=function(){return p().indexOf("Electron/")>=0},i.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},i.isIE=function(){var e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},i.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},i.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},i.isNode=f,i.isNodeSdk=function(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN},i.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},i.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},i.isUWP=function(){return p().indexOf("MSAppHost/")>=0},i.isValidFormat=function(e){var t=k(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},i.isValidTimestamp=function(e){var t=k(e).claims,i=Math.floor((new Date).getTime()/1e3),n=0,r=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?n=t.nbf:t.hasOwnProperty("iat")&&(n=t.iat),r=t.hasOwnProperty("exp")?t.exp:n+86400),!!i&&!!n&&!!r&&i>=n&&i<=r},i.issuedAtTime=function(e){var t=k(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},i.jsonEval=b,i.map=function(e,t,i){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t.call(i,e[r],r,e));return n},i.querystring=function(e){for(var t=[],i=function(e,i){Array.isArray(i)?i.forEach((function(i){t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))},n=0,r=Object.entries(e);n<r.length;n++){var a=r[n];i(a[0],a[1])}return t.length?"&"+t.join("&"):""},i.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var i=e.split("=");t[i[0]]=i[1]}})),t},i.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},i.stringLength=function(e){for(var t=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,i++):t+=3}return t},i.stringToByteArray=function(e){for(var t=[],i=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319){var a=r-55296;n++,o(n<e.length,"Surrogate pair missing trail surrogate."),r=65536+(a<<10)+(e.charCodeAt(n)-56320)}r<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=63&r|128):r<65536?(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128)}return t},i.stringify=function(e){return JSON.stringify(e)},i.validateArgCount=function(e,t,i,n){var r;if(n<t?r="at least "+t:n>i&&(r=0===i?"none":"no more than "+i),r)throw new Error(e+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+r+".")},i.validateCallback=function(e,t,i,n){if((!n||i)&&"function"!=typeof i)throw new Error(S(e,t,n)+"must be a valid function.")},i.validateContextObject=function(e,t,i,n){if((!n||i)&&("object"!=typeof i||null===i))throw new Error(S(e,t,n)+"must be a valid context object.")},i.validateIndexedDBOpenable=function(){return new Promise((function(e,t){try{var i=!0,n="validate-browser-context-for-indexeddb-analytics-module",r=window.indexedDB.open(n);r.onsuccess=function(){r.result.close(),i||window.indexedDB.deleteDatabase(n),e(!0)},r.onupgradeneeded=function(){i=!1},r.onerror=function(){var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))},i.validateNamespace=function(e,t,i,n){if((!n||i)&&"string"!=typeof i)throw new Error(S(e,t,n)+"must be a valid firebase namespace.")}},zn8P:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="zn8P"}},[[0,0]]]);