<div class="page-content dashboard__Panel">
  <div class="wrapper">
    <div class="refer_Earn_page">
      <div class="Referal__Sec white__bg">
        <div class="referal__banner">
          <div class="rfrl_bnrTxt">
            <h2>Referrals</h2>
            <p>
             
Refer your friends and make learning more rewarding.
<br><br>
Refer your friends today and when they complete their 1st session with a FellowGenius expert, you both earn benefits* worth INR 200 each.

            </p>
          </div>
          <div class="rfrl_bnrimage">
            <img src="../../../assets/images/Refer-Friend-image.svg" alt="#" />
          </div>
        </div>
        <div class="sec__divider">
          <div class="referal__steps">
            <div class="step_item">
              <div class="rfr_step_wrap">
                <div class="icon__box">
                  <img
                    src="../../../assets/images/share-code-icon.svg"
                    alt="#"
                  />
                </div>
                <div class="txt_box">
                  <h6 class="mb-0">Share</h6>
                  <p>
                   Share your referral code with friends
                  </p>
                </div>
              </div>
            </div>
            <div class="step_item">
              <div class="rfr_step_wrap">
                <div class="icon__box">
                  <img
                    src="../../../assets/images/register-code-icon.svg"
                    alt="#"
                  />
                </div>
                <div class="txt_box">
                  <h6 class="mb-0">Register</h6>
                  <p>
                    Your friends register and complete their 1st FellowGenius Session within 15 days of referral
                  </p>
                </div>
              </div>
            </div>
            <div class="step_item">
              <div class="rfr_step_wrap">
                <div class="icon__box">
                  <img
                    src="../../../assets/images/book-attend-icon.svg"
                    alt="#"
                  />
                </div>
                <div class="txt_box">
                  <h6 class="mb-0">Earn</h6>
                  <p>
                    Both you and your friends earn benefits* worth INR 200
                  </p>
                </div>
              </div>
            </div>
          </div>
          <!-- step ends-->
          <p style="margin-top: 20px;
          color: gray;">*Valid for a minimum session value of INR 500 | You will get Rs 200 cash payment to the UPI ID provided | Your friend earns 200 FG credits which can be used for their next FellowGenius session | 1 FG Credit = INR 1</p>
        </div>
        <div class="referal__code_box">
          <h4>Referral Code</h4>
          <p>
            Your unique referral code is provided below. Share it with your friends and make learning more rewarding.
          </p>
          <div class="share__code_fld">
            <div class="input-group referal__input">
              <input
                type="text"
                class="form-control"
                [value]="referCode"
                readonly
              />
              <button
                type="submit"
                class="button green_btn"
                (click)="copyReferCode()"
              >
                Copy code
              </button>
            </div>
            <div class="share__options">
              <a
                class="share_btn shareLI"
                href="#Linkedin_Modal"
                data-toggle="modal"
                (click)="copyLinkedinText()"
              >
                <img src="../../../assets/images/Linkedin.svg" alt="#"
              /></a>

              <!-- Linkedin Modal Starts -->
              <div
                class="modal fade join__Modal"
                id="Linkedin_Modal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="myLargeModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-lg">
                  <!-- Modal Content: begins -->
                  <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <button
                        type="button"
                        id="close-popup"
                        class="close close-linkedin"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <!-- Modal Body -->
                    <div class="modal-body">
                      <div class="body-message">
                        <h4>Share with LinkedIn</h4>

                        <div class="refer_code border_box">
                          <div class="box_title">
                            Your refer code is {{ referCode }}
                          </div>
                        </div>

                        <div class="what border_box">
                          <!-- <div class="box_title">What ?</div> -->
                          <div>
                            <p class="text-black text-font-size">
                              Looking for expert advice for your on-going project at work? Join the FellowGenius community and connect with experts across domains for help and support. 
                              <br>
                              To make learning more rewarding, use the referral code below while signing up and earn rewards worth INR 200 when you complete your 1st session with a FellowGenius expert.
                              <br><br>
                              {{referCode}}
                              <br><br>
                              Click <a href="{{linkedinURL}}" class="hyperlink-text">here</a> to sign up now.
                              <br><br>
                              Regards, <br>
                              Team FellowGenius
                            </p>
                          </div>
                        </div>

                        <!-- <div class="how border_box">
                          <div class="box_title">How ?</div>
                          <div>
                            <div class="text-black text-font-size">
                              <ol>
                                <li>We have copied the above mentioned text for you.</li>
                                <li>
                                  Click on go to linked in.
                                </li>
                                <li>You can choose from given options to either "Share in a post" or "Send as private Message".</li>
                                <li>Paste the text that we have copied for you and you can send.</li>
                              </ol>
                              
                            </div>
                          </div>
                        </div> -->

                        <div class="modal_btn feedback_submit">
                          <button
                            type="submit"
                            (click)="shareLinkedIn()"
                            class="button btn_mdl"
                          >
                            Go To LinkedIn
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Modal Content: ends -->
                </div>
              </div>
              <!-- Linkedin Modal Ends -->
              <a
                href="javascript:void(0)"
                href="#Mail_Modal"
                data-toggle="modal"
                class="share_btn"
              >
                <img src="../../../assets/images/envelope-icon.svg" alt="#"
              /></a>
              <!-- mail modal begins-->
              <div
                class="modal fade join__Modal"
                id="Mail_Modal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="myLargeModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-lg">
                  <!-- Modal Content: begins -->
                  <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <button
                        type="button"
                        id="close-popup"
                        class="close close-whatsapp"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <!-- Modal Body -->
                    <div class="modal-body">
                      <div class="body-message">
                        <h4>Share with Mail</h4>

                        <div class="refer_code border_box">
                          <div class="box_title">
                            Your refer code is {{ referCode }}
                          </div>
                        </div>

                        <div class="what border_box invite__friend_box">
                            <h4>Invite your friends</h4>
                            <p>
                              Please add email adresses of person you want to refer
                            </p>
                            <div>
                              <div class="input-group invite__input">
                                  
                                  <mat-form-field class="example-chip-list" appearance="fill">
                                    <mat-chip-list #chipList aria-label="Email selection">
                                      <mat-chip
                                        *ngFor="let email of emailsArray"
                                        [selectable]="selectable"
                                        [removable]="removable"
                                        (removed)="remove(email)"
                                      >
                                        {{ email }}
                                        <button matChipRemove *ngIf="removable">
                                          <mat-icon>cancel</mat-icon>
                                        </button>
                                      </mat-chip>
                                      <input
                                        placeholder="New Emails..."
                                        [matChipInputFor]="chipList"
                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                        [matChipInputAddOnBlur]="addOnBlur"
                                        (matChipInputTokenEnd)="add($event)"
                                      />
                                    </mat-chip-list>
                                  </mat-form-field>
                                </div>
                                
                            </div>
                            
                          
                        </div>

                        
                        <div class="modal_btn feedback_submit">
                          <button
                            type="submit"
                            (click)="sendMail()"
                            class="button btn_mdl"
                          >
                            Send Mail
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Modal Content: ends -->
                </div>
              </div>
              <!-- Mail Modal Ends -->

              <a
                href="javascript:void(0)"
                (click)="shareWhatsapp()"
                class="share_btn"
                ><img src="../../../assets/images/watsapp-icon.svg" alt="#"
              /></a>
            </div>
          </div>
        </div>

        <!-- invite box ends-->
      </div>
      <div class="Referal__dashbrd white__bg">
        <div class="sec__title">
          <h2>Referral Dashboard</h2>
          <div style="display:flex">
          <!-- casback credit box  starts -->
          <div *ngIf="CashbackInfo.totalCashback; else hideCashbackInfo">
          <a
                href="javascript:void(0)"
                href="#Cashback_Modal"
                data-toggle="modal"
                class="share_btn"
          >
          <div class="credit__box cashback__box">
            <img src="../../../assets/images/credits-icon.svg" alt="#" />
            <span>Cashback Earned<strong>{{CashbackInfo.totalCashback}}</strong></span>
          </div>
          </a>
          </div>
          <ng-template #hideCashbackInfo>
            <div class="credit__box cashback__box">
              <img src="../../../assets/images/credits-icon.svg" alt="#" />
              <span>Cashback Earned<strong>{{CashbackInfo.totalCashback}}</strong></span>
            </div>
          </ng-template>
          <!-- Cashback Modal begins -->
          <div
                class="modal fade join__Modal"
                id="Cashback_Modal"
                tabindex="-1"
                role="dialog"
                aria-labelledby="myLargeModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-lg">
                  <!-- Modal Content: begins -->
                  <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <button
                        type="button"
                        id="close-popup"
                        class="close close-linkedin"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <!-- Modal Body -->
                    <div class="modal-body">
                      <div class="body-message">
                        <h4>Cashback Info</h4>

                        

                            
    
                            
                                <div class="referal__table">
                                  <div class="table-responsive">
                                    <table class="table">
                                      <thead>
                                        <tr>
                                          <th class="fld_name">Date</th>
                                          <th class="fld_email">Referred User</th>
                                          <th class="fld_status">Context</th>
                                          <th class="fld_status">Balance</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        
                                        <tr *ngFor="let cashback of cashbackTableInfo">
                                          <td class="fld_name">
                                            <div class="nme_style">{{cashback.date}}</div>
                                          </td>
                                          <td class="fld_email">{{cashback.referredUserName}}</td>
                                          <td class="fld_email">{{cashback.context}}</td>
                                          <td class="fld_email">{{cashback.amount}}</td>
                                        </tr>
                                        
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                              


                            Total Cashback Earned :- {{CashbackInfo.totalCashback}} <br/>
                            Redeemed Cashback :- {{CashbackInfo.redeemedCashback}}  <br/>
                            Remaining Cashback :- {{CashbackInfo.remainingCashback}}
                          

                      </div>
                    </div>
                  </div>
                  <!-- Modal Content: ends -->
                </div>
              </div>
              <!--Cashback Modal Ends-->
              <!-- cashback credit box ends -->
              <!-- FG credit box starts -->
            <div *ngIf="creditsTableInfo.length==0;else showCreditModal">
              <div class="credit__box">
                <img src="../../../assets/images/credits-icon.svg" alt="#" />
                <span>FG Credits<strong>{{FGCredits}}</strong></span>
              </div>
           </div>
        <ng-template #showCreditModal>
          <a
                href="javascript:void(0)"
                href="#CreditsTable_Modal"
                data-toggle="modal"
                class="share_btn"
          >
          <div class="credit__box">
            <img src="../../../assets/images/credits-icon.svg" alt="#" />
            <span>FG Credits<strong>{{FGCredits}}</strong></span>
          </div>
          </a>
          
        </ng-template>
                    <!-- Credits Modal begins -->
                    <div
                    class="modal fade join__Modal"
                    id="CreditsTable_Modal"
                    tabindex="-1"
                    role="dialog"
                    aria-labelledby="myLargeModalLabel"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog modal-lg">
                      <!-- Modal Content: begins -->
                      <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                          <button
                            type="button"
                            id="close-popup"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                          >
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <!-- Modal Body -->
                        <div class="modal-body">
                          <div class="body-message">
                            <h4> FG Credits Transaction Info</h4>
                            
                            
                            <div class="referal__table">
                              <div class="table-responsive">
                                <table class="table">
                                  <thead>
                                    <tr>
                                      <th class="fld_name">Date</th>
                                      <th class="fld_email">Context</th>
                                      <th class="fld_status">Type</th>
                                      <th class="fld_status">Amount</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    
                                    <tr *ngFor="let credits of creditsTableInfo ; let i =index" >
                                      <td class="fld_name">
                                        <div class="nme_style">{{credits.date}}</div>
                                      </td>
                                      <td class="fld_email">{{credits.context}}</td>
                                      <td class="fld_status">{{credits.type}}</td>
                                      <td class="fld_status">
                                         {{credits.amount}}
                                      </td>
                                    </tr>
                                    
                                  </tbody>
                                </table>
                              </div>
                            
                          </div>


                                
                          </div>
                        </div>
                      </div>
                      <!-- Modal Content: ends -->
                    </div>
                  </div>
                  <!--Credits Table Modal Ends-->


                  <!-- FG Credit box ends -->
                </div>
        </div>
        
       <div *ngIf="userReferralInfoList.length; else hideReferralInfoList"> 
        <div class="referal__table">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th class="fld_name">Name</th>
                  <th class="fld_email">Email</th>
                  <th class="fld_status">Status</th>
                </tr>
              </thead>
              <tbody>
                
                <tr *ngFor="let refInfo of userReferralInfoList ; let i =index" >
                  <td class="fld_name">
                    <div class="nme_style">{{refInfo.name}}</div>
                  </td>
                  <td class="fld_email">{{refInfo.email}}</td>
                  <td class="fld_status">
                    <div class="td_btn">
                      <div style="display:flex">
                        <div class="referral_status_btn" [id]=returnStatusId(i)
                        [class]=getClass(refInfo.status,i)
                        
                        >{{refInfo.status}}</div>
                      </div>
                      
                    </div>
                  </td>
                </tr>
                
              </tbody>
            </table>
          </div>
        </div>
      </div> 
      <ng-template #hideReferralInfoList>
        <p>Refer your friends to see their status here</p>
      </ng-template>
        <!-- referral table ends here-->
      </div>
    </div>
  </div>
</div>
