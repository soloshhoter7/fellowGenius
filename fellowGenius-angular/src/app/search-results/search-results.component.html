<app-nav-bar></app-nav-bar>
<body>
  <div class="page-content">
    <section class="wi_full py_5 full_expert_sec">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="page-breadcrumb">
              <ul class="breadcrumb">
                <li>
                  <a href="#"
                    ><img src="../../assets/images/breadcrumb-home.svg" alt="#"
                  /></a>
                </li>
                <li class="active" [innerHtml]="selectedSubject"></li>
              </ul>
            </div>
            <div class="expert_filter">
              <div class="row">
                <div class="col-12 col-md-9 col-lg-7 exprt_sel_fltr">
                  <div class="filter_sel">
                    <select
                      id="subjectFilter"
                      class="select2 form-control"
                      (change)="searchBySubject($event)"
                    >
                      <option selected value="defaultSubject" disabled>Topic Options</option>
                      <option *ngFor="let sc of subCategories">
                        {{ sc.subCategory }}
                      </option>
                    </select>
                  </div>
                  <div class="filter_sel price_filter">
                    <select
                    id="priceFilter"
                      class="select2 form-control"
                      (change)="searchByPrice($event)"
                    >
                      <option selected value="defaultPrice" disabled>Price</option>
                      <option value="100-199">100-199</option>
                      <option value="200-399">200-399</option>
                      <option value="400-699">400-699</option>
                      <option value="700-999">700-999</option>
                      <option value="1000-1499">1000-1499</option>
                      <option value="1500-10000">1500-10000</option>
                    </select>
                  </div>
                  <div class="filter_sel">
                    <select
                    id="ratingFilter"
                      class="select2 form-control"
                      (change)="searchByRatings($event)"
                    >
                      <option selected value="defaultRating" disabled>Average Reviews</option>
                      <option value="1">1 & up</option>
                      <option value="2">2 & up</option>
                      <option value="3">3 & up</option>
                      <option value="4">4 & up</option>
                    </select>
                  </div>
                </div>
                <div class="col-12 col-md-3 col-lg-4 ml-auto">
                  <div class="serach_field">
                    <input
                      type="search"
                      class="form-control expert_srch"
                      placeholder="Search"
                    />
                  </div>
                </div>
                <div class="col-12" style="margin-top: 10px;">
                  <ul class="nav nav-pills">
                    <li class="nav-item" *ngFor="let filters of subjectFiltersApplied">
                      <a class="nav-link">
                        <span [innerHTML]="filters"></span>
                        <span class="material-icons" style="cursor: pointer;" (click)="deleteSubject(filters)">
                          close
                        </span></a
                      >
                    </li>
                    <li class="nav-item" *ngFor="let filters of priceFiltersApplied">
                      <a class="nav-link">
                        <span [innerHTML]="filters"></span>
                        <span class="material-icons" style="cursor: pointer;" (click)="deletePrice(filters)">
                          close
                        </span></a
                      >
                    </li>
                    <li class="nav-item" *ngFor="let filters of ratingFilterApplied">
                      <a class="nav-link">
                        <span>{{ filters }}&nbsp; & up</span>
                        <span class="material-icons"  style="cursor: pointer;" (click)="deleteRating(filters)">
                          close
                        </span></a
                      >
                    </li>
                  </ul>
                </div>
                <div class="col-12 availbale_expert">
                  <div class="total_expert">{{expertsCount}} Experts Available</div>
                  <div class="sort_by_exprt">
                    Sort by
                    <div class="pice_select">
                      <select class="select2" id="sortExpert">
                        <option value="priceLowToHigh">Price: Low to High</option>
                        <option value="priceHighToLow">Price: High to Low</option>
                        <option value="ratingLowToHigh">Rating: Low to High</option>
                        <option value="ratingHighToLow">Rating: High to Low</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div><div
              *ngIf="isLoading"
            style="
              text-align: center;
              margin-top: 8vh;
              margin-left: auto;
              margin-right: auto;
            "
          >
            <app-loading></app-loading>
            <p style="margin:1rem;font-size: larger;">Loading Experts..</p>
          </div></div>
            <div
              *ngIf="
                allFiltersApplied.price.length == 0 &&
                allFiltersApplied.ratings.length == 0 &&
                allFiltersApplied.subjects.length == 0
              "
            >
              <div class="expert__available">
                <div class="expert__item" *ngFor="let result of searchResults">
                  <div class="expert__img">
                    <img
                      [src]="result.profilePictureUrl"
                      
                      alt="#"
                    />
                  </div>
                  <div class="expert__txt">
                    <h6>
                      {{result.fullName}}<span class="expert__rtng" 
                        ><i class="fa fa-star" aria-hidden="true"></i> {{result.rating/20}}</span
                      >
                    </h6>
                    <!-- <p>Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin.</p> -->
                    <!-- <p>NPD<span>Marketing</span></p> -->
                    <p>
                      <span>{{createExpertString(result)|shorten}}</span></p>
                    <ul>
                      <li>
                        <span class="review_cnt"
                          ><img
                            src="../../assets/images/review_icon.svg"
                            alt="#"
                          />{{result.reviewCount}} REVIEWS</span
                        >
                      </li>
                      <li>
                        <span class="review_session"
                          ><img
                            src="../../assets/images/session_icon.svg"
                            alt="#"
                          />{{result.lessonCompleted}} SESSIONS</span
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="expert__price">₹{{result.price1}}<span>Per Hour</span></div>
                  <div class="expert__Btn">
                    <a href="javascript:;" class="button exprt_btn connect_btn" (click)="viewProfile(result)">Connect</a>
                    <!-- <a href="" class="button exprt_btn profile_btn">View Profile</a> -->
                  </div>
                </div>

                <div class="Page_nav" *ngIf="searchResults.length>16">
                  <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                      <a
                        class="page-link"
                        href="#"
                        tabindex="-1"
                        aria-disabled="true"
                        ><i class="fas fa-angle-left"></i
                      ></a>
                    </li>
                    <li class="page-item active">
                      <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#">2</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#">3</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#"
                        ><i class="fas fa-angle-right"></i
                      ></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div
              *ngIf="
                allFiltersApplied.price.length != 0 ||
                allFiltersApplied.ratings.length != 0 ||
                allFiltersApplied.subjects.length != 0
              "
            >
              <div class="expert__available">
                <div class="expert__item" *ngFor="let result of filteredArray">
                  <div class="expert__img">
                    <img
                      [src]="result.profilePictureUrl"
                      
                      alt="#"
                    />
                  </div>
                  <div class="expert__txt">
                    <h6>
                      {{result.fullName}}<span class="expert__rtng" 
                        ><i class="fa fa-star" aria-hidden="true"></i> {{result.rating/20}}</span
                      >
                    </h6>
                    <!-- <p>Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin.</p> -->
                    <!-- <p>NPD<span>Marketing</span></p> -->
                    <p >
                      <span *ngFor="let skills of result.areaOfExpertise">{{ skills.subCategory }},</span></p>
                    <ul>
                      <li>
                        <span class="review_cnt"
                          ><img
                            src="../../assets/images/review_icon.svg"
                            alt="#"
                          />{{result.reviewCount}} REVIEWS</span
                        >
                      </li>
                      <li>
                        <span class="review_session"
                          ><img
                            src="../../assets/images/session_icon.svg"
                            alt="#"
                          />{{result.lessonCompleted}} SESSIONS</span
                        >
                      </li>
                    </ul>
                  </div>
                  <div class="expert__price">₹{{result.price1}}<span>Per Hour</span></div>
                  <div class="expert__Btn">
                    <a href="javascript:;" class="button exprt_btn connect_btn" (click)="viewProfile(result)">Connect</a>
                    <!-- <a href="" class="button exprt_btn profile_btn">View Profile</a> -->
                  </div>
                </div>

                <div class="Page_nav" *ngIf="filteredArray.length>16">
                  <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                      <a
                        class="page-link"
                        href="#"
                        tabindex="-1"
                        aria-disabled="true"
                        ><i class="fas fa-angle-left"></i
                      ></a>
                    </li>
                    <li class="page-item active">
                      <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#">2</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#">3</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#"
                        ><i class="fas fa-angle-right"></i
                      ></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div
            *ngIf="
              ((searchResults.length == 0 && filteredArray.length == 0) ||
              (checkFilters() && filteredArray.length == 0)) && !isLoading
            "
           
          >
          <div class="row">
            <div class="col-12 col-lg-8 mx-auto">
              <div class="nodata_wrapper">
                <img src="../../assets/images/No-data-clip.png" alt="#" class="nodata_thumbnail" />
                <div class="nodata__desc">
                  <h2>Sorry no expert match your selected criteria</h2>
                  <p>Please relax your preferences</p>
                </div>
              </div>
            </div>
          </div>
          </div>
          </div>
        </div>
      </div>
    </section>
  </div>
  <app-footer></app-footer>
</body>
