<div
  *ngIf="isLoading"
  style="
    text-align: center;
    margin-top: 20%;
    margin-left: auto;
    margin-right: auto;
  "
>
  <app-loading></app-loading>
</div>
<div [class]="!isLoading ? '' : 'hideBlock'">
  <div *ngIf="showEmail">
    <div class="access_page wi_full">
      <div class="container">
        <div class="page_wrapper">
          <div class="access_icon_box">
            <img
              src="../../assets/images/forgot-password-clip.svg"
              alt="#"
              class="graphic_style"
            />
          </div>
          <div class="access_field_box">
            <div class="access_header">
              <a href="" class="back_button"
                ><img src="../../assets/images/arrow-grey.svg" alt="#"
              /></a>
              <a href="" class="accs_logo"
                ><img src="../../assets/images/fellow genius logo.svg" alt="#"
              /></a>
            </div>
            <div *ngIf="!linkSent">
              <div class="access_data">
                <div class="content_wrapper" *ngIf="showEmail">
                  <h2>Forgot Password</h2>
                  <div class="tagline">
                    Enter your registered email address to reset your password
                  </div>
                  <div class="error_message" *ngIf="incorrectEmail">
                    <div class="msg_wrap">
                      <img
                        src="../../../assets/images/required-error.svg"
                        alt="#"
                        class="erro_icon"
                      />
                      <span
                        ><strong>Error</strong>Entered Email doesn't
                        Exist!</span
                      >
                    </div>
                  </div>
                  <form (ngSubmit)="submitEmail(t)" #t="ngForm">
                    <div class="form-group">
                      <label class="">E-Mail</label>
                      <input
                        type="email"
                        id="email"
                        name="email"
                        ngModel
                        class="form-control"
                        required
                        email
                        #email="ngModel"
                        maxlength="64"
                        placeholder="Enter Email Address"
                      />
                      <span
                        *ngIf="!email.valid && email.touched"
                        class="help-block"
                        >Invalid email</span
                      >
                    </div>
                    <button
                      type="submit"
                      [disabled]="!t.valid"
                      class="button form_Btn"
                    >
                      Submit
                    </button>
                  </form>
                </div>
              </div>
            </div>
            <div *ngIf="linkSent">
              <div class="access_data" *ngIf="linkSent">
                <div class="content_wrapper">
                  <h2>Reset Password Link Sent!</h2>
                  <div class="tagline">
                    Reset password link has been sent to the entered email !
                  </div>
                </div>
              </div>
            </div>
            <div class="access_footer">
              <p>
                Don't have an account yet?
                <a routerLink="sign-up">Create an account</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="showPassword">
    <div *ngIf="!passwordReset">
      <div class="access_page wi_full">
        <div class="container">
          <div class="page_wrapper">
            <div class="access_icon_box">
              <img
                src="../../assets/images/login-clip.svg"
                alt="#"
                class="graphic_style"
              />
            </div>
            <div class="access_field_box">
              <div class="access_header">
                <a routerLink="login" class="back_button"
                  ><img src="../../assets/images/arrow-grey.svg" alt="#"
                /></a>
                <a href="" class="accs_logo"
                  ><img
                    src="../../assets/images/fellow genius logo.svg"
                    alt="#"
                /></a>
              </div>
              <div class="access_data">
                <div class="content_wrapper" *ngIf="showPassword">
                  <h2>Reset Password</h2>
                  <div class="tagline">Please enter your new password</div>
                  <div class="error_message" *ngIf="passwordError != ''">
                    <div class="msg_wrap">
                      <img
                        src="../../../assets/images/required-error.svg"
                        alt="#"
                        class="erro_icon"
                      />
                      <span><strong>Error</strong>{{ passwordError }}</span>
                    </div>
                  </div>
                  <form (ngSubmit)="onReset(t)" #t="ngForm">
                    <div class="form-group">
                      <label class="">New Password</label>
                      <div class="password_wrap">
                        <input
                          type="text"
                          id="password-new"
                          class="form-control"
                          name="password-new"
                          ngModel
                          required
                          [pattern]="passwordPattern"
                          minlength="8"
                          maxlength="20"
                          #password="ngModel"
                          placeholder="Enter new password"
                        />
                        <span
                          toggle="#password-new"
                          class="fa fa-fw fa-eye field-icon toggle-password"
                        ></span>
                        <span
                        class="help-block"
                        *ngIf="
                          password.invalid && (password.dirty || password.touched)
                        "
                        style="
                          color: grey;
                          font-size: smaller;
                          margin-bottom: 20px;
                        "
                        >Your password must be a minimum of 8 characters long and
                        should contain atleast<br />
                        One uppercase letter (A-Z)<br />
                        One lowercase letter (a-z)<br />
                        One number (0-9)<br />
                        One special character (@, #,&, %)</span
                      >
                        
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="">Confirm Password</label>
                      <div class="password_wrap">
                        <input
                          type="password"
                          id="retypePassword"
                          class="form-control"
                          name="retypePassword"
                          ngModel
                          required
                          [pattern]="passwordPattern"
                          minlength="8"
                          maxlength="20"
                          #retypePassword="ngModel"
                          placeholder="Confirm your new password"
                        />

                        <span
                          class="help-block"
                          *ngIf="
                            !retypePassword.valid && retypePassword.touched
                          "
                          >Please confirm your new password !</span
                        >
                        <span
                          toggle="#password-field"
                          class="fa fa-fw fa-eye field-icon toggle-password"
                        ></span>
                      </div>
                    </div>
                    <button
                      type="submit"
                      [disabled]="!t.valid"
                      class="button form_Btn"
                    >
                      Save new Password
                    </button>
                  </form>
                </div>
              </div>
              <div class="access_footer"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="passwordReset">
      <div class="access_page wi_full">
        <div class="container">
          <div class="page_wrapper">
            <div class="access_icon_box">
              <img
                src="../../assets/images/password-reset-clip.svg"
                alt="#"
                class="graphic_style"
              />
            </div>
            <div class="access_field_box">
              <div class="access_header">
                <a href="" class="back_button"
                  ><img src="../../assets/images/arrow-grey.svg" alt="#"
                /></a>
                <a href="" class="accs_logo"
                  ><img
                    src="../../assets/images/fellow genius logo.svg"
                    alt="#"
                /></a>
              </div>
              <div class="access_data">
                <div class="content_wrapper">
                  <h2>Password Reset Successfully</h2>
                  <div class="tagline">
                    You can now use your new password to login to your account
                  </div>
                  <form>
                    <button
                      type="button"
                      class="button form_Btn"
                      (click)="toLoginPage()"
                    >
                      Log in
                    </button>
                  </form>
                </div>
              </div>
              <div class="access_footer"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
